<!DOCTYPE html>
<html>
<head>
	<!-- TODO: update all of this with game engine/API calls, status icon data-uri -->
	<title>Morpheus Automation</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<link rel="stylesheet" href="index.css" />
	<link rel="icon" href="/quakejs-bnw.png" />
<body class="paused">

</body>
<script async type="application/javascript">
/*! For license information please see jsencrypt.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.JSEncrypt=e():t.JSEncrypt=e()}(window,(function(){return(()=>{"use strict";var t=[,(t,e,i)=>{function r(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function n(t,e){return t&e}function s(t,e){return t|e}function o(t,e){return t^e}function h(t,e){return t&~e}function a(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function u(t){for(var e=0;0!=t;)t&=t-1,++e;return e}i.d(e,{default:()=>nt});var c,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function l(t){var e,i,r="";for(e=0;e+3<=t.length;e+=3)i=parseInt(t.substring(e,e+3),16),r+=f.charAt(i>>6)+f.charAt(63&i);for(e+1==t.length?(i=parseInt(t.substring(e,e+1),16),r+=f.charAt(i<<2)):e+2==t.length&&(i=parseInt(t.substring(e,e+2),16),r+=f.charAt(i>>2)+f.charAt((3&i)<<4));(3&r.length)>0;)r+="=";return r}function p(t){var e,i="",n=0,s=0;for(e=0;e<t.length&&"="!=t.charAt(e);++e){var o=f.indexOf(t.charAt(e));o<0||(0==n?(i+=r(o>>2),s=3&o,n=1):1==n?(i+=r(s<<2|o>>4),s=15&o,n=2):2==n?(i+=r(s),i+=r(o>>2),s=3&o,n=3):(i+=r(s<<2|o>>4),i+=r(15&o),n=0))}return 1==n&&(i+=r(s<<2)),i}var g,d={decode:function(t){var e;if(void 0===g){var i="= \f\n\r\t \u2028\u2029";for(g=Object.create(null),e=0;e<64;++e)g["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)]=e;for(g["-"]=62,g._=63,e=0;e<i.length;++e)g[i.charAt(e)]=-1}var r=[],n=0,s=0;for(e=0;e<t.length;++e){var o=t.charAt(e);if("="==o)break;if(-1!=(o=g[o])){if(void 0===o)throw new Error("Illegal character at offset "+e);n|=o,++s>=4?(r[r.length]=n>>16,r[r.length]=n>>8&255,r[r.length]=255&n,n=0,s=0):n<<=6}}switch(s){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:r[r.length]=n>>10;break;case 3:r[r.length]=n>>16,r[r.length]=n>>8&255}return r},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(t){var e=d.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw new Error("RegExp out of sync");t=e[2]}return d.decode(t)}},v=1e13,m=function(){function t(t){this.buf=[+t||0]}return t.prototype.mulAdd=function(t,e){var i,r,n=this.buf,s=n.length;for(i=0;i<s;++i)(r=n[i]*t+e)<v?e=0:r-=(e=0|r/v)*v,n[i]=r;e>0&&(n[i]=e)},t.prototype.sub=function(t){var e,i,r=this.buf,n=r.length;for(e=0;e<n;++e)(i=r[e]-t)<0?(i+=v,t=1):t=0,r[e]=i;for(;0===r[r.length-1];)r.pop()},t.prototype.toString=function(t){if(10!=(t||10))throw new Error("only base 10 is supported");for(var e=this.buf,i=e[e.length-1].toString(),r=e.length-2;r>=0;--r)i+=(v+e[r]).toString().substring(1);return i},t.prototype.valueOf=function(){for(var t=this.buf,e=0,i=t.length-1;i>=0;--i)e=e*v+t[i];return e},t.prototype.simplify=function(){var t=this.buf;return 1==t.length?t[0]:this},t}(),y=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,b=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function T(t,e){return t.length>e&&(t=t.substring(0,e)+"…"),t}var S,E=function(){function t(e,i){this.hexDigits="0123456789ABCDEF",e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=i)}return t.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw new Error("Requesting byte offset "+t+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(t):this.enc[t]},t.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},t.prototype.hexDump=function(t,e,i){for(var r="",n=t;n<e;++n)if(r+=this.hexByte(this.get(n)),!0!==i)switch(15&n){case 7:r+="  ";break;case 15:r+="\n";break;default:r+=" "}return r},t.prototype.isASCII=function(t,e){for(var i=t;i<e;++i){var r=this.get(i);if(r<32||r>176)return!1}return!0},t.prototype.parseStringISO=function(t,e){for(var i="",r=t;r<e;++r)i+=String.fromCharCode(this.get(r));return i},t.prototype.parseStringUTF=function(t,e){for(var i="",r=t;r<e;){var n=this.get(r++);i+=n<128?String.fromCharCode(n):n>191&&n<224?String.fromCharCode((31&n)<<6|63&this.get(r++)):String.fromCharCode((15&n)<<12|(63&this.get(r++))<<6|63&this.get(r++))}return i},t.prototype.parseStringBMP=function(t,e){for(var i,r,n="",s=t;s<e;)i=this.get(s++),r=this.get(s++),n+=String.fromCharCode(i<<8|r);return n},t.prototype.parseTime=function(t,e,i){var r=this.parseStringISO(t,e),n=(i?y:b).exec(r);return n?(i&&(n[1]=+n[1],n[1]+=+n[1]<70?2e3:1900),r=n[1]+"-"+n[2]+"-"+n[3]+" "+n[4],n[5]&&(r+=":"+n[5],n[6]&&(r+=":"+n[6],n[7]&&(r+="."+n[7]))),n[8]&&(r+=" UTC","Z"!=n[8]&&(r+=n[8],n[9]&&(r+=":"+n[9]))),r):"Unrecognized time: "+r},t.prototype.parseInteger=function(t,e){for(var i,r=this.get(t),n=r>127,s=n?255:0,o="";r==s&&++t<e;)r=this.get(t);if(0==(i=e-t))return n?-1:0;if(i>4){for(o=r,i<<=3;0==(128&(+o^s));)o=+o<<1,--i;o="("+i+" bit)\n"}n&&(r-=256);for(var h=new m(r),a=t+1;a<e;++a)h.mulAdd(256,this.get(a));return o+h.toString()},t.prototype.parseBitString=function(t,e,i){for(var r=this.get(t),n="("+((e-t-1<<3)-r)+" bit)\n",s="",o=t+1;o<e;++o){for(var h=this.get(o),a=o==e-1?r:0,u=7;u>=a;--u)s+=h>>u&1?"1":"0";if(s.length>i)return n+T(s,i)}return n+s},t.prototype.parseOctetString=function(t,e,i){if(this.isASCII(t,e))return T(this.parseStringISO(t,e),i);var r=e-t,n="("+r+" byte)\n";r>(i/=2)&&(e=t+i);for(var s=t;s<e;++s)n+=this.hexByte(this.get(s));return r>i&&(n+="…"),n},t.prototype.parseOID=function(t,e,i){for(var r="",n=new m,s=0,o=t;o<e;++o){var h=this.get(o);if(n.mulAdd(128,127&h),s+=7,!(128&h)){if(""===r)if((n=n.simplify())instanceof m)n.sub(80),r="2."+n.toString();else{var a=n<80?n<40?0:1:2;r=a+"."+(n-40*a)}else r+="."+n.toString();if(r.length>i)return T(r,i);n=new m,s=0}}return s>0&&(r+=".incomplete"),r},t}(),w=function(){function t(t,e,i,r,n){if(!(r instanceof D))throw new Error("Invalid tag value.");this.stream=t,this.header=e,this.length=i,this.tag=r,this.sub=n}return t.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},t.prototype.content=function(t){if(void 0===this.tag)return null;void 0===t&&(t=1/0);var e=this.posContent(),i=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+i,t);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(e)?"false":"true";case 2:return this.stream.parseInteger(e,e+i);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(e,e+i,t);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+i,t);case 6:return this.stream.parseOID(e,e+i,t);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return T(this.stream.parseStringUTF(e,e+i),t);case 18:case 19:case 20:case 21:case 22:case 26:return T(this.stream.parseStringISO(e,e+i),t);case 30:return T(this.stream.parseStringBMP(e,e+i),t);case 23:case 24:return this.stream.parseTime(e,e+i,23==this.tag.tagNumber)}return null},t.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},t.prototype.toPrettyString=function(t){void 0===t&&(t="");var e=t+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(e+="+"),e+=this.length,this.tag.tagConstructed?e+=" (constructed)":!this.tag.isUniversal()||3!=this.tag.tagNumber&&4!=this.tag.tagNumber||null===this.sub||(e+=" (encapsulates)"),e+="\n",null!==this.sub){t+="  ";for(var i=0,r=this.sub.length;i<r;++i)e+=this.sub[i].toPrettyString(t)}return e},t.prototype.posStart=function(){return this.stream.pos},t.prototype.posContent=function(){return this.stream.pos+this.header},t.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},t.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},t.decodeLength=function(t){var e=t.get(),i=127&e;if(i==e)return i;if(i>6)throw new Error("Length over 48 bits not supported at position "+(t.pos-1));if(0===i)return null;e=0;for(var r=0;r<i;++r)e=256*e+t.get();return e},t.prototype.getHexStringValue=function(){var t=this.toHexString(),e=2*this.header,i=2*this.length;return t.substr(e,i)},t.decode=function(e){var i;i=e instanceof E?e:new E(e,0);var r=new E(i),n=new D(i),s=t.decodeLength(i),o=i.pos,h=o-r.pos,a=null,u=function(){var e=[];if(null!==s){for(var r=o+s;i.pos<r;)e[e.length]=t.decode(i);if(i.pos!=r)throw new Error("Content size is not correct for container starting at offset "+o)}else try{for(;;){var n=t.decode(i);if(n.tag.isEOC())break;e[e.length]=n}s=o-i.pos}catch(t){throw new Error("Exception while decoding undefined length content: "+t)}return e};if(n.tagConstructed)a=u();else if(n.isUniversal()&&(3==n.tagNumber||4==n.tagNumber))try{if(3==n.tagNumber&&0!=i.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");a=u();for(var c=0;c<a.length;++c)if(a[c].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(t){a=null}if(null===a){if(null===s)throw new Error("We can't skip over an invalid tag with undefined length at offset "+o);i.pos=o+Math.abs(s)}return new t(r,h,s,n,a)},t}(),D=function(){function t(t){var e=t.get();if(this.tagClass=e>>6,this.tagConstructed=0!=(32&e),this.tagNumber=31&e,31==this.tagNumber){var i=new m;do{e=t.get(),i.mulAdd(128,127&e)}while(128&e);this.tagNumber=i.simplify()}}return t.prototype.isUniversal=function(){return 0===this.tagClass},t.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},t}(),x=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],R=(1<<26)/x[x.length-1],B=function(){function t(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}return t.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,n=(1<<e)-1,s=!1,o="",h=this.t,a=this.DB-h*this.DB%e;if(h-- >0)for(a<this.DB&&(i=this[h]>>a)>0&&(s=!0,o=r(i));h>=0;)a<e?(i=(this[h]&(1<<a)-1)<<e-a,i|=this[--h]>>(a+=this.DB-e)):(i=this[h]>>(a-=e)&n,a<=0&&(a+=this.DB,--h)),i>0&&(s=!0),s&&(o+=r(i));return s?o:"0"},t.prototype.negate=function(){var e=N();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+F(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var i=N();return this.abs().divRemTo(e,null,i),this.s<0&&i.compareTo(t.ZERO)>0&&e.subTo(i,i),i},t.prototype.modPowInt=function(t,e){var i;return i=t<256||e.isEven()?new A(e):new V(e),this.exp(t,i)},t.prototype.clone=function(){var t=N();return this.copyTo(t),t},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},t.prototype.toByteArray=function(){var t=this.t,e=[];e[0]=this.s;var i,r=this.DB-t*this.DB%8,n=0;if(t-- >0)for(r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==n&&(128&this.s)!=(128&i)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e},t.prototype.equals=function(t){return 0==this.compareTo(t)},t.prototype.min=function(t){return this.compareTo(t)<0?this:t},t.prototype.max=function(t){return this.compareTo(t)>0?this:t},t.prototype.and=function(t){var e=N();return this.bitwiseTo(t,n,e),e},t.prototype.or=function(t){var e=N();return this.bitwiseTo(t,s,e),e},t.prototype.xor=function(t){var e=N();return this.bitwiseTo(t,o,e),e},t.prototype.andNot=function(t){var e=N();return this.bitwiseTo(t,h,e),e},t.prototype.not=function(){for(var t=N(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},t.prototype.shiftLeft=function(t){var e=N();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},t.prototype.shiftRight=function(t){var e=N();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},t.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+a(this[t]);return this.s<0?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=u(this[i]^e);return t},t.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},t.prototype.setBit=function(t){return this.changeBit(t,s)},t.prototype.clearBit=function(t){return this.changeBit(t,h)},t.prototype.flipBit=function(t){return this.changeBit(t,o)},t.prototype.add=function(t){var e=N();return this.addTo(t,e),e},t.prototype.subtract=function(t){var e=N();return this.subTo(t,e),e},t.prototype.multiply=function(t){var e=N();return this.multiplyTo(t,e),e},t.prototype.divide=function(t){var e=N();return this.divRemTo(t,e,null),e},t.prototype.remainder=function(t){var e=N();return this.divRemTo(t,null,e),e},t.prototype.divideAndRemainder=function(t){var e=N(),i=N();return this.divRemTo(t,e,i),[e,i]},t.prototype.modPow=function(t,e){var i,r,n=t.bitLength(),s=C(1);if(n<=0)return s;i=n<18?1:n<48?3:n<144?4:n<768?5:6,r=n<8?new A(e):e.isEven()?new I(e):new V(e);var o=[],h=3,a=i-1,u=(1<<i)-1;if(o[1]=r.convert(this),i>1){var c=N();for(r.sqrTo(o[1],c);h<=u;)o[h]=N(),r.mulTo(c,o[h-2],o[h]),h+=2}var f,l,p=t.t-1,g=!0,d=N();for(n=F(t[p])-1;p>=0;){for(n>=a?f=t[p]>>n-a&u:(f=(t[p]&(1<<n+1)-1)<<a-n,p>0&&(f|=t[p-1]>>this.DB+n-a)),h=i;0==(1&f);)f>>=1,--h;if((n-=h)<0&&(n+=this.DB,--p),g)o[f].copyTo(s),g=!1;else{for(;h>1;)r.sqrTo(s,d),r.sqrTo(d,s),h-=2;h>0?r.sqrTo(s,d):(l=s,s=d,d=l),r.mulTo(d,o[f],s)}for(;p>=0&&0==(t[p]&1<<n);)r.sqrTo(s,d),l=s,s=d,d=l,--n<0&&(n=this.DB-1,--p)}return r.revert(s)},t.prototype.modInverse=function(e){var i=e.isEven();if(this.isEven()&&i||0==e.signum())return t.ZERO;for(var r=e.clone(),n=this.clone(),s=C(1),o=C(0),h=C(0),a=C(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),i?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),i?(h.isEven()&&a.isEven()||(h.addTo(this,h),a.subTo(e,a)),h.rShiftTo(1,h)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),i&&s.subTo(h,s),o.subTo(a,o)):(n.subTo(r,n),i&&h.subTo(s,h),a.subTo(o,a))}return 0!=n.compareTo(t.ONE)?t.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},t.prototype.pow=function(t){return this.exp(t,new O)},t.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var r=e;e=i,i=r}var n=e.getLowestSetBit(),s=i.getLowestSetBit();if(s<0)return e;for(n<s&&(s=n),s>0&&(e.rShiftTo(s,e),i.rShiftTo(s,i));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=i.getLowestSetBit())>0&&i.rShiftTo(n,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return s>0&&i.lShiftTo(s,i),i},t.prototype.isProbablePrime=function(t){var e,i=this.abs();if(1==i.t&&i[0]<=x[x.length-1]){for(e=0;e<x.length;++e)if(i[0]==x[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<x.length;){for(var r=x[e],n=e+1;n<x.length&&r<R;)r*=x[n++];for(r=i.modInt(r);e<n;)if(r%x[e++]==0)return!1}return i.millerRabin(t)},t.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},t.prototype.fromString=function(e,i){var r;if(16==i)r=4;else if(8==i)r=3;else if(256==i)r=8;else if(2==i)r=1;else if(32==i)r=5;else{if(4!=i)return void this.fromRadix(e,i);r=2}this.t=0,this.s=0;for(var n=e.length,s=!1,o=0;--n>=0;){var h=8==r?255&+e[n]:H(e,n);h<0?"-"==e.charAt(n)&&(s=!0):(s=!1,0==o?this[this.t++]=h:o+r>this.DB?(this[this.t-1]|=(h&(1<<this.DB-o)-1)<<o,this[this.t++]=h>>this.DB-o):this[this.t-1]|=h<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&+e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},t.prototype.dlShiftTo=function(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s},t.prototype.drShiftTo=function(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s},t.prototype.lShiftTo=function(t,e){for(var i=t%this.DB,r=this.DB-i,n=(1<<r)-1,s=Math.floor(t/this.DB),o=this.s<<i&this.DM,h=this.t-1;h>=0;--h)e[h+s+1]=this[h]>>r|o,o=(this[h]&n)<<i;for(h=s-1;h>=0;--h)e[h]=0;e[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()},t.prototype.rShiftTo=function(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var r=t%this.DB,n=this.DB-r,s=(1<<r)-1;e[0]=this[i]>>r;for(var o=i+1;o<this.t;++o)e[o-i-1]|=(this[o]&s)<<n,e[o-i]=this[o]>>r;r>0&&(e[this.t-i-1]|=(this.s&s)<<n),e.t=this.t-i,e.clamp()}},t.prototype.subTo=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]-t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r-=t[i],e[i++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[i++]=this.DV+r:r>0&&(e[i++]=r),e.t=i,e.clamp()},t.prototype.multiplyTo=function(e,i){var r=this.abs(),n=e.abs(),s=r.t;for(i.t=s+n.t;--s>=0;)i[s]=0;for(s=0;s<n.t;++s)i[s+r.t]=r.am(0,n[s],i,s,0,r.t);i.s=0,i.clamp(),this.s!=e.s&&t.ZERO.subTo(i,i)},t.prototype.squareTo=function(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var r=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,r,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(e,i,r){var n=e.abs();if(!(n.t<=0)){var s=this.abs();if(s.t<n.t)return null!=i&&i.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=N());var o=N(),h=this.s,a=e.s,u=this.DB-F(n[n.t-1]);u>0?(n.lShiftTo(u,o),s.lShiftTo(u,r)):(n.copyTo(o),s.copyTo(r));var c=o.t,f=o[c-1];if(0!=f){var l=f*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),p=this.FV/l,g=(1<<this.F1)/l,d=1<<this.F2,v=r.t,m=v-c,y=null==i?N():i;for(o.dlShiftTo(m,y),r.compareTo(y)>=0&&(r[r.t++]=1,r.subTo(y,r)),t.ONE.dlShiftTo(c,y),y.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--m>=0;){var b=r[--v]==f?this.DM:Math.floor(r[v]*p+(r[v-1]+d)*g);if((r[v]+=o.am(0,b,r,m,0,c))<b)for(o.dlShiftTo(m,y),r.subTo(y,r);r[v]<--b;)r.subTo(y,r)}null!=i&&(r.drShiftTo(c,i),h!=a&&t.ZERO.subTo(i,i)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),h<0&&t.ZERO.subTo(r,r)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(e,i){if(e>4294967295||e<1)return t.ONE;var r=N(),n=N(),s=i.convert(this),o=F(e)-1;for(s.copyTo(r);--o>=0;)if(i.sqrTo(r,n),(e&1<<o)>0)i.mulTo(n,s,r);else{var h=r;r=n,n=h}return i.revert(r)},t.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},t.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),r=C(i),n=N(),s=N(),o="";for(this.divRemTo(r,n,s);n.signum()>0;)o=(i+s.intValue()).toString(t).substr(1)+o,n.divRemTo(r,n,s);return s.intValue().toString(t)+o},t.prototype.fromRadix=function(e,i){this.fromInt(0),null==i&&(i=10);for(var r=this.chunkSize(i),n=Math.pow(i,r),s=!1,o=0,h=0,a=0;a<e.length;++a){var u=H(e,a);u<0?"-"==e.charAt(a)&&0==this.signum()&&(s=!0):(h=i*h+u,++o>=r&&(this.dMultiply(n),this.dAddOffset(h,0),o=0,h=0))}o>0&&(this.dMultiply(Math.pow(i,o)),this.dAddOffset(h,0)),s&&t.ZERO.subTo(this,this)},t.prototype.fromNumber=function(e,i,r){if("number"==typeof i)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),s,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(i);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var n=[],o=7&e;n.length=1+(e>>3),i.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}},t.prototype.bitwiseTo=function(t,e,i){var r,n,s=Math.min(t.t,this.t);for(r=0;r<s;++r)i[r]=e(this[r],t[r]);if(t.t<this.t){for(n=t.s&this.DM,r=s;r<this.t;++r)i[r]=e(this[r],n);i.t=this.t}else{for(n=this.s&this.DM,r=s;r<t.t;++r)i[r]=e(n,t[r]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()},t.prototype.changeBit=function(e,i){var r=t.ONE.shiftLeft(e);return this.bitwiseTo(r,i,r),r},t.prototype.addTo=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]+t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r+=t[i],e[i++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[i++]=r:r<-1&&(e[i++]=this.DV+r),e.t=i,e.clamp()},t.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},t.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},t.prototype.multiplyLowerTo=function(t,e,i){var r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;r>0;)i[--r]=0;for(var n=i.t-this.t;r<n;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(n=Math.min(t.t,e);r<n;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()},t.prototype.multiplyUpperTo=function(t,e,i){--e;var r=i.t=this.t+t.t-e;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)i[this.t+r-e]=this.am(e-r,t[r],i,0,0,this.t+r-e);i.clamp(),i.drShiftTo(1,i)},t.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var r=this.t-1;r>=0;--r)i=(e*i+this[r])%t;return i},t.prototype.millerRabin=function(e){var i=this.subtract(t.ONE),r=i.getLowestSetBit();if(r<=0)return!1;var n=i.shiftRight(r);(e=e+1>>1)>x.length&&(e=x.length);for(var s=N(),o=0;o<e;++o){s.fromInt(x[Math.floor(Math.random()*x.length)]);var h=s.modPow(n,this);if(0!=h.compareTo(t.ONE)&&0!=h.compareTo(i)){for(var a=1;a++<r&&0!=h.compareTo(i);)if(0==(h=h.modPowInt(2,this)).compareTo(t.ONE))return!1;if(0!=h.compareTo(i))return!1}}return!0},t.prototype.square=function(){var t=N();return this.squareTo(t),t},t.prototype.gcda=function(t,e){var i=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(i.compareTo(r)<0){var n=i;i=r,r=n}var s=i.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)e(i);else{s<o&&(o=s),o>0&&(i.rShiftTo(o,i),r.rShiftTo(o,r));var h=function(){(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),i.compareTo(r)>=0?(i.subTo(r,i),i.rShiftTo(1,i)):(r.subTo(i,r),r.rShiftTo(1,r)),i.signum()>0?setTimeout(h,0):(o>0&&r.lShiftTo(o,r),setTimeout((function(){e(r)}),0))};setTimeout(h,10)}},t.prototype.fromNumberAsync=function(e,i,r,n){if("number"==typeof i)if(e<2)this.fromInt(1);else{this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),s,this),this.isEven()&&this.dAddOffset(1,0);var o=this,h=function(){o.dAddOffset(2,0),o.bitLength()>e&&o.subTo(t.ONE.shiftLeft(e-1),o),o.isProbablePrime(i)?setTimeout((function(){n()}),0):setTimeout(h,0)};setTimeout(h,0)}else{var a=[],u=7&e;a.length=1+(e>>3),i.nextBytes(a),u>0?a[0]&=(1<<u)-1:a[0]=0,this.fromString(a,256)}},t}(),O=function(){function t(){}return t.prototype.convert=function(t){return t},t.prototype.revert=function(t){return t},t.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i)},t.prototype.sqrTo=function(t,e){t.squareTo(e)},t}(),A=function(){function t(t){this.m=t}return t.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},t.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),V=function(){function t(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}return t.prototype.convert=function(t){var e=N();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(B.ZERO)>0&&this.m.subTo(e,e),e},t.prototype.revert=function(t){var e=N();return t.copyTo(e),this.reduce(e),e},t.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],r=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),I=function(){function t(t){this.m=t,this.r2=N(),this.q3=N(),B.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t)}return t.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=N();return t.copyTo(e),this.reduce(e),e},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}();function N(){return new B(null)}function P(t,e){return new B(t,e)}var M="undefined"!=typeof navigator;M&&"Microsoft Internet Explorer"==navigator.appName?(B.prototype.am=function(t,e,i,r,n,s){for(var o=32767&e,h=e>>15;--s>=0;){var a=32767&this[t],u=this[t++]>>15,c=h*a+u*o;n=((a=o*a+((32767&c)<<15)+i[r]+(1073741823&n))>>>30)+(c>>>15)+h*u+(n>>>30),i[r++]=1073741823&a}return n},S=30):M&&"Netscape"!=navigator.appName?(B.prototype.am=function(t,e,i,r,n,s){for(;--s>=0;){var o=e*this[t++]+i[r]+n;n=Math.floor(o/67108864),i[r++]=67108863&o}return n},S=26):(B.prototype.am=function(t,e,i,r,n,s){for(var o=16383&e,h=e>>14;--s>=0;){var a=16383&this[t],u=this[t++]>>14,c=h*a+u*o;n=((a=o*a+((16383&c)<<14)+i[r]+n)>>28)+(c>>14)+h*u,i[r++]=268435455&a}return n},S=28),B.prototype.DB=S,B.prototype.DM=(1<<S)-1,B.prototype.DV=1<<S,B.prototype.FV=Math.pow(2,52),B.prototype.F1=52-S,B.prototype.F2=2*S-52;var j,q,L=[];for(j="0".charCodeAt(0),q=0;q<=9;++q)L[j++]=q;for(j="a".charCodeAt(0),q=10;q<36;++q)L[j++]=q;for(j="A".charCodeAt(0),q=10;q<36;++q)L[j++]=q;function H(t,e){var i=L[t.charCodeAt(e)];return null==i?-1:i}function C(t){var e=N();return e.fromInt(t),e}function F(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}B.ZERO=C(0),B.ONE=C(1);var U,K,k=function(){function t(){this.i=0,this.j=0,this.S=[]}return t.prototype.init=function(t){var e,i,r;for(e=0;e<256;++e)this.S[e]=e;for(i=0,e=0;e<256;++e)i=i+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[i],this.S[i]=r;this.i=0,this.j=0},t.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},t}(),_=null;if(null==_){_=[],K=0;var z=void 0;if(window.crypto&&window.crypto.getRandomValues){var Z=new Uint32Array(256);for(window.crypto.getRandomValues(Z),z=0;z<Z.length;++z)_[K++]=255&Z[z]}var G=0,$=function(t){if((G=G||0)>=256||K>=256)window.removeEventListener?window.removeEventListener("mousemove",$,!1):window.detachEvent&&window.detachEvent("onmousemove",$);else try{var e=t.x+t.y;_[K++]=255&e,G+=1}catch(t){}};window.addEventListener?window.addEventListener("mousemove",$,!1):window.attachEvent&&window.attachEvent("onmousemove",$)}function Y(){if(null==U){for(U=new k;K<256;){var t=Math.floor(65536*Math.random());_[K++]=255&t}for(U.init(_),K=0;K<_.length;++K)_[K]=0;K=0}return U.next()}var J=function(){function t(){}return t.prototype.nextBytes=function(t){for(var e=0;e<t.length;++e)t[e]=Y()},t}(),X=function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},t.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),i=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(i)<0;)e=e.add(this.p);return e.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)},t.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=P(t,16),this.e=parseInt(e,16)):console.error("Invalid RSA public key")},t.prototype.encrypt=function(t){var e=this.n.bitLength()+7>>3,i=function(t,e){if(e<t.length+11)return console.error("Message too long for RSA"),null;for(var i=[],r=t.length-1;r>=0&&e>0;){var n=t.charCodeAt(r--);n<128?i[--e]=n:n>127&&n<2048?(i[--e]=63&n|128,i[--e]=n>>6|192):(i[--e]=63&n|128,i[--e]=n>>6&63|128,i[--e]=n>>12|224)}i[--e]=0;for(var s=new J,o=[];e>2;){for(o[0]=0;0==o[0];)s.nextBytes(o);i[--e]=o[0]}return i[--e]=2,i[--e]=0,new B(i)}(t,e);if(null==i)return null;var r=this.doPublic(i);if(null==r)return null;for(var n=r.toString(16),s=n.length,o=0;o<2*e-s;o++)n="0"+n;return n},t.prototype.setPrivate=function(t,e,i){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=P(t,16),this.e=parseInt(e,16),this.d=P(i,16)):console.error("Invalid RSA private key")},t.prototype.setPrivateEx=function(t,e,i,r,n,s,o,h){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=P(t,16),this.e=parseInt(e,16),this.d=P(i,16),this.p=P(r,16),this.q=P(n,16),this.dmp1=P(s,16),this.dmq1=P(o,16),this.coeff=P(h,16)):console.error("Invalid RSA private key")},t.prototype.generate=function(t,e){var i=new J,r=t>>1;this.e=parseInt(e,16);for(var n=new B(e,16);;){for(;this.p=new B(t-r,1,i),0!=this.p.subtract(B.ONE).gcd(n).compareTo(B.ONE)||!this.p.isProbablePrime(10););for(;this.q=new B(r,1,i),0!=this.q.subtract(B.ONE).gcd(n).compareTo(B.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract(B.ONE),h=this.q.subtract(B.ONE),a=o.multiply(h);if(0==a.gcd(n).compareTo(B.ONE)){this.n=this.p.multiply(this.q),this.d=n.modInverse(a),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(h),this.coeff=this.q.modInverse(this.p);break}}},t.prototype.decrypt=function(t){var e=P(t,16),i=this.doPrivate(e);return null==i?null:function(t,e){for(var i=t.toByteArray(),r=0;r<i.length&&0==i[r];)++r;if(i.length-r!=e-1||2!=i[r])return null;for(++r;0!=i[r];)if(++r>=i.length)return null;for(var n="";++r<i.length;){var s=255&i[r];s<128?n+=String.fromCharCode(s):s>191&&s<224?(n+=String.fromCharCode((31&s)<<6|63&i[r+1]),++r):(n+=String.fromCharCode((15&s)<<12|(63&i[r+1])<<6|63&i[r+2]),r+=2)}return n}(i,this.n.bitLength()+7>>3)},t.prototype.generateAsync=function(t,e,i){var r=new J,n=t>>1;this.e=parseInt(e,16);var s=new B(e,16),o=this,h=function(){var e=function(){if(o.p.compareTo(o.q)<=0){var t=o.p;o.p=o.q,o.q=t}var e=o.p.subtract(B.ONE),r=o.q.subtract(B.ONE),n=e.multiply(r);0==n.gcd(s).compareTo(B.ONE)?(o.n=o.p.multiply(o.q),o.d=s.modInverse(n),o.dmp1=o.d.mod(e),o.dmq1=o.d.mod(r),o.coeff=o.q.modInverse(o.p),setTimeout((function(){i()}),0)):setTimeout(h,0)},a=function(){o.q=N(),o.q.fromNumberAsync(n,1,r,(function(){o.q.subtract(B.ONE).gcda(s,(function(t){0==t.compareTo(B.ONE)&&o.q.isProbablePrime(10)?setTimeout(e,0):setTimeout(a,0)}))}))},u=function(){o.p=N(),o.p.fromNumberAsync(t-n,1,r,(function(){o.p.subtract(B.ONE).gcda(s,(function(t){0==t.compareTo(B.ONE)&&o.p.isProbablePrime(10)?setTimeout(a,0):setTimeout(u,0)}))}))};setTimeout(u,0)};setTimeout(h,0)},t.prototype.sign=function(t,e,i){var r=function(t,e){if(e<t.length+22)return console.error("Message too long for RSA"),null;for(var i=e-t.length-6,r="",n=0;n<i;n+=2)r+="ff";return P("0001"+r+"00"+t,16)}((Q[i]||"")+e(t).toString(),this.n.bitLength()/4);if(null==r)return null;var n=this.doPrivate(r);if(null==n)return null;var s=n.toString(16);return 0==(1&s.length)?s:"0"+s},t.prototype.verify=function(t,e,i){var r=P(e,16),n=this.doPublic(r);return null==n?null:function(t){for(var e in Q)if(Q.hasOwnProperty(e)){var i=Q[e],r=i.length;if(t.substr(0,r)==i)return t.substr(r)}return t}(n.toString(16).replace(/^1f+00/,""))==i(t).toString()},t}(),Q={md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"},W={};W.lang={extend:function(t,e,i){if(!e||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var r=function(){};if(r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e),i){var n;for(n in i)t.prototype[n]=i[n];var s=function(){},o=["toString","valueOf"];try{/MSIE/.test(navigator.userAgent)&&(s=function(t,e){for(n=0;n<o.length;n+=1){var i=o[n],r=e[i];"function"==typeof r&&r!=Object.prototype[i]&&(t[i]=r)}})}catch(t){}s(t.prototype,i)}}};var tt={};void 0!==tt.asn1&&tt.asn1||(tt.asn1={}),tt.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var i=e.substr(1).length;i%2==1?i+=1:e.match(/^[0-7]/)||(i+=2);for(var r="",n=0;n<i;n++)r+="f";e=new B(r,16).xor(t).add(B.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return hextopem(t,e)},this.newObject=function(t){var e=tt.asn1,i=e.DERBoolean,r=e.DERInteger,n=e.DERBitString,s=e.DEROctetString,o=e.DERNull,h=e.DERObjectIdentifier,a=e.DEREnumerated,u=e.DERUTF8String,c=e.DERNumericString,f=e.DERPrintableString,l=e.DERTeletexString,p=e.DERIA5String,g=e.DERUTCTime,d=e.DERGeneralizedTime,v=e.DERSequence,m=e.DERSet,y=e.DERTaggedObject,b=e.ASN1Util.newObject,T=Object.keys(t);if(1!=T.length)throw"key of param shall be only one.";var S=T[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+S+":"))throw"undefined key: "+S;if("bool"==S)return new i(t[S]);if("int"==S)return new r(t[S]);if("bitstr"==S)return new n(t[S]);if("octstr"==S)return new s(t[S]);if("null"==S)return new o(t[S]);if("oid"==S)return new h(t[S]);if("enum"==S)return new a(t[S]);if("utf8str"==S)return new u(t[S]);if("numstr"==S)return new c(t[S]);if("prnstr"==S)return new f(t[S]);if("telstr"==S)return new l(t[S]);if("ia5str"==S)return new p(t[S]);if("utctime"==S)return new g(t[S]);if("gentime"==S)return new d(t[S]);if("seq"==S){for(var E=t[S],w=[],D=0;D<E.length;D++){var x=b(E[D]);w.push(x)}return new v({array:w})}if("set"==S){for(E=t[S],w=[],D=0;D<E.length;D++)x=b(E[D]),w.push(x);return new m({array:w})}if("tag"==S){var R=t[S];if("[object Array]"===Object.prototype.toString.call(R)&&3==R.length){var B=b(R[2]);return new y({tag:R[0],explicit:R[1],obj:B})}var O={};if(void 0!==R.explicit&&(O.explicit=R.explicit),void 0!==R.tag&&(O.tag=R.tag),void 0===R.obj)throw"obj shall be specified for 'tag'.";return O.obj=b(R.obj),new y(O)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},tt.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",i=parseInt(t.substr(0,2),16),r=(e=Math.floor(i/40)+"."+i%40,""),n=2;n<t.length;n+=2){var s=("00000000"+parseInt(t.substr(n,2),16).toString(2)).slice(-8);r+=s.substr(1,7),"0"==s.substr(0,1)&&(e=e+"."+new B(r,2).toString(10),r="")}return e},tt.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},i=function(t){var i="",r=new B(t,10).toString(2),n=7-r.length%7;7==n&&(n=0);for(var s="",o=0;o<n;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var h=r.substr(o,7);o!=r.length-7&&(h="1"+h),i+=e(parseInt(h,2))}return i};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",n=t.split("."),s=40*parseInt(n[0])+parseInt(n[1]);r+=e(s),n.splice(0,2);for(var o=0;o<n.length;o++)r+=i(n[o]);return r},tt.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var i=e.length/2;if(i>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+i).toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},tt.asn1.DERAbstractString=function(t){tt.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(this.s)},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},W.lang.extend(tt.asn1.DERAbstractString,tt.asn1.ASN1Object),tt.asn1.DERAbstractTime=function(t){tt.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.formatDate=function(t,e,i){var r=this.zeroPadding,n=this.localDateToUTC(t),s=String(n.getFullYear());"utc"==e&&(s=s.substr(2,2));var o=s+r(String(n.getMonth()+1),2)+r(String(n.getDate()),2)+r(String(n.getHours()),2)+r(String(n.getMinutes()),2)+r(String(n.getSeconds()),2);if(!0===i){var h=n.getMilliseconds();if(0!=h){var a=r(String(h),3);o=o+"."+(a=a.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(t)},this.setByDateValue=function(t,e,i,r,n,s){var o=new Date(Date.UTC(t,e-1,i,r,n,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},W.lang.extend(tt.asn1.DERAbstractTime,tt.asn1.ASN1Object),tt.asn1.DERAbstractStructured=function(t){tt.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},W.lang.extend(tt.asn1.DERAbstractStructured,tt.asn1.ASN1Object),tt.asn1.DERBoolean=function(){tt.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},W.lang.extend(tt.asn1.DERBoolean,tt.asn1.ASN1Object),tt.asn1.DERInteger=function(t){tt.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=tt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new B(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},W.lang.extend(tt.asn1.DERInteger,tt.asn1.ASN1Object),tt.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=tt.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}tt.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var i="0"+t;this.hTLV=null,this.isModified=!0,this.hV=i+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var i=0;i<=e;i++)t+="0";var r="";for(i=0;i<t.length-1;i+=8){var n=t.substr(i,8),s=parseInt(n,2).toString(16);1==s.length&&(s="0"+s),r+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+e+r},this.setByBooleanArray=function(t){for(var e="",i=0;i<t.length;i++)1==t[i]?e+="1":e+="0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},W.lang.extend(tt.asn1.DERBitString,tt.asn1.ASN1Object),tt.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=tt.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}tt.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},W.lang.extend(tt.asn1.DEROctetString,tt.asn1.DERAbstractString),tt.asn1.DERNull=function(){tt.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},W.lang.extend(tt.asn1.DERNull,tt.asn1.ASN1Object),tt.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},i=function(t){var i="",r=new B(t,10).toString(2),n=7-r.length%7;7==n&&(n=0);for(var s="",o=0;o<n;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var h=r.substr(o,7);o!=r.length-7&&(h="1"+h),i+=e(parseInt(h,2))}return i};tt.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",n=t.split("."),s=40*parseInt(n[0])+parseInt(n[1]);r+=e(s),n.splice(0,2);for(var o=0;o<n.length;o++)r+=i(n[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var e=tt.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},W.lang.extend(tt.asn1.DERObjectIdentifier,tt.asn1.ASN1Object),tt.asn1.DEREnumerated=function(t){tt.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=tt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new B(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},W.lang.extend(tt.asn1.DEREnumerated,tt.asn1.ASN1Object),tt.asn1.DERUTF8String=function(t){tt.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},W.lang.extend(tt.asn1.DERUTF8String,tt.asn1.DERAbstractString),tt.asn1.DERNumericString=function(t){tt.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},W.lang.extend(tt.asn1.DERNumericString,tt.asn1.DERAbstractString),tt.asn1.DERPrintableString=function(t){tt.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},W.lang.extend(tt.asn1.DERPrintableString,tt.asn1.DERAbstractString),tt.asn1.DERTeletexString=function(t){tt.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},W.lang.extend(tt.asn1.DERTeletexString,tt.asn1.DERAbstractString),tt.asn1.DERIA5String=function(t){tt.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},W.lang.extend(tt.asn1.DERIA5String,tt.asn1.DERAbstractString),tt.asn1.DERUTCTime=function(t){tt.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},W.lang.extend(tt.asn1.DERUTCTime,tt.asn1.DERAbstractTime),tt.asn1.DERGeneralizedTime=function(t){tt.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},W.lang.extend(tt.asn1.DERGeneralizedTime,tt.asn1.DERAbstractTime),tt.asn1.DERSequence=function(t){tt.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++)t+=this.asn1Array[e].getEncodedHex();return this.hV=t,this.hV}},W.lang.extend(tt.asn1.DERSequence,tt.asn1.DERAbstractStructured),tt.asn1.DERSet=function(t){tt.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var i=this.asn1Array[e];t.push(i.getEncodedHex())}return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},W.lang.extend(tt.asn1.DERSet,tt.asn1.DERAbstractStructured),tt.asn1.DERTaggedObject=function(t){tt.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,i){this.hT=e,this.isExplicit=t,this.asn1Object=i,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=i.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.tag&&(this.hT=t.tag),void 0!==t.explicit&&(this.isExplicit=t.explicit),void 0!==t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},W.lang.extend(tt.asn1.DERTaggedObject,tt.asn1.ASN1Object);var et,it=(et=function(t,e){return(et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}et(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),rt=function(t){function e(i){var r=t.call(this)||this;return i&&("string"==typeof i?r.parseKey(i):(e.hasPrivateKeyProperty(i)||e.hasPublicKeyProperty(i))&&r.parsePropertiesFrom(i)),r}return it(e,t),e.prototype.parseKey=function(t){try{var e=0,i=0,r=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(t)?function(t){var e;if(void 0===c){var i="0123456789ABCDEF",r=" \f\n\r\t \u2028\u2029";for(c={},e=0;e<16;++e)c[i.charAt(e)]=e;for(i=i.toLowerCase(),e=10;e<16;++e)c[i.charAt(e)]=e;for(e=0;e<r.length;++e)c[r.charAt(e)]=-1}var n=[],s=0,o=0;for(e=0;e<t.length;++e){var h=t.charAt(e);if("="==h)break;if(-1!=(h=c[h])){if(void 0===h)throw new Error("Illegal character at offset "+e);s|=h,++o>=2?(n[n.length]=s,s=0,o=0):s<<=4}}if(o)throw new Error("Hex encoding incomplete: 4 bits missing");return n}(t):d.unarmor(t),n=w.decode(r);if(3===n.sub.length&&(n=n.sub[2].sub[0]),9===n.sub.length){e=n.sub[1].getHexStringValue(),this.n=P(e,16),i=n.sub[2].getHexStringValue(),this.e=parseInt(i,16);var s=n.sub[3].getHexStringValue();this.d=P(s,16);var o=n.sub[4].getHexStringValue();this.p=P(o,16);var h=n.sub[5].getHexStringValue();this.q=P(h,16);var a=n.sub[6].getHexStringValue();this.dmp1=P(a,16);var u=n.sub[7].getHexStringValue();this.dmq1=P(u,16);var f=n.sub[8].getHexStringValue();this.coeff=P(f,16)}else{if(2!==n.sub.length)return!1;var l=n.sub[1].sub[0];e=l.sub[0].getHexStringValue(),this.n=P(e,16),i=l.sub[1].getHexStringValue(),this.e=parseInt(i,16)}return!0}catch(t){return!1}},e.prototype.getPrivateBaseKey=function(){var t={array:[new tt.asn1.DERInteger({int:0}),new tt.asn1.DERInteger({bigint:this.n}),new tt.asn1.DERInteger({int:this.e}),new tt.asn1.DERInteger({bigint:this.d}),new tt.asn1.DERInteger({bigint:this.p}),new tt.asn1.DERInteger({bigint:this.q}),new tt.asn1.DERInteger({bigint:this.dmp1}),new tt.asn1.DERInteger({bigint:this.dmq1}),new tt.asn1.DERInteger({bigint:this.coeff})]};return new tt.asn1.DERSequence(t).getEncodedHex()},e.prototype.getPrivateBaseKeyB64=function(){return l(this.getPrivateBaseKey())},e.prototype.getPublicBaseKey=function(){var t=new tt.asn1.DERSequence({array:[new tt.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new tt.asn1.DERNull]}),e=new tt.asn1.DERSequence({array:[new tt.asn1.DERInteger({bigint:this.n}),new tt.asn1.DERInteger({int:this.e})]}),i=new tt.asn1.DERBitString({hex:"00"+e.getEncodedHex()});return new tt.asn1.DERSequence({array:[t,i]}).getEncodedHex()},e.prototype.getPublicBaseKeyB64=function(){return l(this.getPublicBaseKey())},e.wordwrap=function(t,e){if(!t)return t;var i="(.{1,"+(e=e||64)+"})( +|$\n?)|(.{1,"+e+"})";return t.match(RegExp(i,"g")).join("\n")},e.prototype.getPrivateKey=function(){var t="-----BEGIN RSA PRIVATE KEY-----\n";return(t+=e.wordwrap(this.getPrivateBaseKeyB64())+"\n")+"-----END RSA PRIVATE KEY-----"},e.prototype.getPublicKey=function(){var t="-----BEGIN PUBLIC KEY-----\n";return(t+=e.wordwrap(this.getPublicBaseKeyB64())+"\n")+"-----END PUBLIC KEY-----"},e.hasPublicKeyProperty=function(t){return(t=t||{}).hasOwnProperty("n")&&t.hasOwnProperty("e")},e.hasPrivateKeyProperty=function(t){return(t=t||{}).hasOwnProperty("n")&&t.hasOwnProperty("e")&&t.hasOwnProperty("d")&&t.hasOwnProperty("p")&&t.hasOwnProperty("q")&&t.hasOwnProperty("dmp1")&&t.hasOwnProperty("dmq1")&&t.hasOwnProperty("coeff")},e.prototype.parsePropertiesFrom=function(t){this.n=t.n,this.e=t.e,t.hasOwnProperty("d")&&(this.d=t.d,this.p=t.p,this.q=t.q,this.dmp1=t.dmp1,this.dmq1=t.dmq1,this.coeff=t.coeff)},e}(X);const nt=function(){function t(t){void 0===t&&(t={}),t=t||{},this.default_key_size=t.default_key_size?parseInt(t.default_key_size,10):1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null}return t.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new rt(t)},t.prototype.setPrivateKey=function(t){this.setKey(t)},t.prototype.setPublicKey=function(t){this.setKey(t)},t.prototype.decrypt=function(t){try{return this.getKey().decrypt(p(t))}catch(t){return!1}},t.prototype.encrypt=function(t){try{return l(this.getKey().encrypt(t))}catch(t){return!1}},t.prototype.sign=function(t,e,i){try{return l(this.getKey().sign(t,e,i))}catch(t){return!1}},t.prototype.verify=function(t,e,i){try{return this.getKey().verify(t,p(e),i)}catch(t){return!1}},t.prototype.getKey=function(t){if(!this.key){if(this.key=new rt,t&&"[object Function]"==={}.toString.call(t))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,t);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},t.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},t.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},t.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},t.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},t.version="3.2.1",t}()}],e={d:(t,i)=>{for(var r in i)e.o(i,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},i={};return t[1](0,i,e),i.default})()}));


// SOURCE: https://stackoverflow.com/questions/18279141/javascript-string-encryption-and-decryption

const crypt = (salt, text) => {
  const textToChars = (text) => text.split("").map((c) => c.charCodeAt(0));
  const byteHex = (n) => ("0" + Number(n).toString(16)).substr(-2);
  const applySaltToChar = (code) => textToChars(salt).reduce((a, b) => a ^ b, code);

  return text
    .split("")
    .map(textToChars)
    .map(applySaltToChar)
    .map(byteHex)
    .join("");
};

const decrypt = (salt, encoded) => {
  const textToChars = (text) => text.split("").map((c) => c.charCodeAt(0));
  const applySaltToChar = (code) => textToChars(salt).reduce((a, b) => a ^ b, code);
  return encoded
    .match(/.{1,2}/g)
    .map((hex) => parseInt(hex, 16))
    .map(applySaltToChar)
    .map((charCode) => String.fromCharCode(charCode))
    .join("");
};

//     keymaster.js
//     (c) 2011-2013 Thomas Fuchs
//     keymaster.js may be freely distributed under the MIT license.

;(function(global){
  var k,
    _handlers = {},
    _mods = { 16: false, 18: false, 17: false, 91: false },
    _scope = 'all',
    // modifier keys
    _MODIFIERS = {
      '⇧': 16, shift: 16,
      '⌥': 18, alt: 18, option: 18,
      '⌃': 17, ctrl: 17, control: 17,
      '⌘': 91, command: 91
    },
    // special keys
    _MAP = {
      backspace: 8, tab: 9, clear: 12,
      enter: 13, 'return': 13,
      esc: 27, escape: 27, space: 32,
      left: 37, up: 38,
      right: 39, down: 40,
      del: 46, 'delete': 46,
      home: 36, end: 35,
      pageup: 33, pagedown: 34,
      ',': 188, '.': 190, '/': 191,
      '`': 192, '-': 189, '=': 187,
      ';': 186, '\'': 222,
      '[': 219, ']': 221, '\\': 220
    },
    code = function(x){
      return _MAP[x] || x.toUpperCase().charCodeAt(0);
    },
    _downKeys = [];

  for(k=1;k<20;k++) _MAP['f'+k] = 111+k;

  // IE doesn't support Array#indexOf, so have a simple replacement
  function index(array, item){
    var i = array.length;
    while(i--) if(array[i]===item) return i;
    return -1;
  }

  // for comparing mods before unassignment
  function compareArray(a1, a2) {
    if (a1.length != a2.length) return false;
    for (var i = 0; i < a1.length; i++) {
        if (a1[i] !== a2[i]) return false;
    }
    return true;
  }

  var modifierMap = {
      16:'shiftKey',
      18:'altKey',
      17:'ctrlKey',
      91:'metaKey'
  };
  function updateModifierKey(event) {
      for(k in _mods) _mods[k] = event[modifierMap[k]];
  };

  // handle keydown event
  function dispatch(event) {
    var key, handler, k, i, modifiersMatch, scope;
    key = event.keyCode;

    if (index(_downKeys, key) == -1) {
        _downKeys.push(key);
    }

    // if a modifier key, set the key.<modifierkeyname> property to true and return
    if(key == 93 || key == 224) key = 91; // right command on webkit, command on Gecko
    if(key in _mods) {
      _mods[key] = true;
      // 'assignKey' from inside this closure is exported to window.key
      for(k in _MODIFIERS) if(_MODIFIERS[k] == key) assignKey[k] = true;
      return;
    }
    updateModifierKey(event);

    // see if we need to ignore the keypress (filter() can can be overridden)
    // by default ignore key presses if a select, textarea, or input is focused
    if(!assignKey.filter.call(this, event)) return;

    // abort if no potentially matching shortcuts found
    if (!(key in _handlers)) return;

    scope = getScope();

    // for each potential shortcut
    for (i = 0; i < _handlers[key].length; i++) {
      handler = _handlers[key][i];

      // see if it's in the current scope
      if(handler.scope == scope || handler.scope == 'all'){
        // check if modifiers match if any
        modifiersMatch = handler.mods.length > 0;
        for(k in _mods)
          if((!_mods[k] && index(handler.mods, +k) > -1) ||
            (_mods[k] && index(handler.mods, +k) == -1)) modifiersMatch = false;
        // call the handler and stop the event if neccessary
        if((handler.mods.length == 0 && !_mods[16] && !_mods[18] && !_mods[17] && !_mods[91]) || modifiersMatch){
          if(handler.method(event, handler)===false){
            if(event.preventDefault) event.preventDefault();
              else event.returnValue = false;
            if(event.stopPropagation) event.stopPropagation();
            if(event.cancelBubble) event.cancelBubble = true;
          }
        }
      }
    }
  };

  // unset modifier keys on keyup
  function clearModifier(event){
    var key = event.keyCode, k,
        i = index(_downKeys, key);

    // remove key from _downKeys
    if (i >= 0) {
        _downKeys.splice(i, 1);
    }

    if(key == 93 || key == 224) key = 91;
    if(key in _mods) {
      _mods[key] = false;
      for(k in _MODIFIERS) if(_MODIFIERS[k] == key) assignKey[k] = false;
    }
  };

  function resetModifiers() {
    for(k in _mods) _mods[k] = false;
    for(k in _MODIFIERS) assignKey[k] = false;
  };

  // parse and assign shortcut
  function assignKey(key, scope, method){
    var keys, mods;
    keys = getKeys(key);
    if (method === undefined) {
      method = scope;
      scope = 'all';
    }

    // for each shortcut
    for (var i = 0; i < keys.length; i++) {
      // set modifier keys if any
      mods = [];
      key = keys[i].split('+');
      if (key.length > 1){
        mods = getMods(key);
        key = [key[key.length-1]];
      }
      // convert to keycode and...
      key = key[0]
      key = code(key);
      // ...store handler
      if (!(key in _handlers)) _handlers[key] = [];
      _handlers[key].push({ shortcut: keys[i], scope: scope, method: method, key: keys[i], mods: mods });
    }
  };

  // unbind all handlers for given key in current scope
  function unbindKey(key, scope) {
    var multipleKeys, keys,
      mods = [],
      i, j, obj;

    multipleKeys = getKeys(key);

    for (j = 0; j < multipleKeys.length; j++) {
      keys = multipleKeys[j].split('+');

      if (keys.length > 1) {
        mods = getMods(keys);
      }

      key = keys[keys.length - 1];
      key = code(key);

      if (scope === undefined) {
        scope = getScope();
      }
      if (!_handlers[key]) {
        return;
      }
      for (i = 0; i < _handlers[key].length; i++) {
        obj = _handlers[key][i];
        // only clear handlers if correct scope and mods match
        if (obj.scope === scope && compareArray(obj.mods, mods)) {
          _handlers[key][i] = {};
        }
      }
    }
  };

  // Returns true if the key with code 'keyCode' is currently down
  // Converts strings into key codes.
  function isPressed(keyCode) {
      if (typeof(keyCode)=='string') {
        keyCode = code(keyCode);
      }
      return index(_downKeys, keyCode) != -1;
  }

  function getPressedKeyCodes() {
      return _downKeys.slice(0);
  }

  function filter(event){
    var tagName = (event.target || event.srcElement).tagName;
    // ignore keypressed in any elements that support keyboard data input
    return !(tagName == 'INPUT' || tagName == 'SELECT' || tagName == 'TEXTAREA');
  }

  // initialize key.<modifier> to false
  for(k in _MODIFIERS) assignKey[k] = false;

  // set current scope (default 'all')
  function setScope(scope){ _scope = scope || 'all' };
  function getScope(){ return _scope || 'all' };

  // delete all handlers for a given scope
  function deleteScope(scope){
    var key, handlers, i;

    for (key in _handlers) {
      handlers = _handlers[key];
      for (i = 0; i < handlers.length; ) {
        if (handlers[i].scope === scope) handlers.splice(i, 1);
        else i++;
      }
    }
  };

  // abstract key logic for assign and unassign
  function getKeys(key) {
    var keys;
    key = key.replace(/\s/g, '');
    keys = key.split(',');
    if ((keys[keys.length - 1]) == '') {
      keys[keys.length - 2] += ',';
    }
    return keys;
  }

  // abstract mods logic for assign and unassign
  function getMods(key) {
    var mods = key.slice(0, key.length - 1);
    for (var mi = 0; mi < mods.length; mi++)
    mods[mi] = _MODIFIERS[mods[mi]];
    return mods;
  }

  // cross-browser events
  function addEvent(object, event, method) {
    if (object.addEventListener)
      object.addEventListener(event, method, false);
    else if(object.attachEvent)
      object.attachEvent('on'+event, function(){ method(window.event) });
  };

  // set the handlers globally on document
  addEvent(document, 'keydown', function(event) { dispatch(event) }); // Passing _scope to a callback to ensure it remains the same by execution. Fixes #48
  addEvent(document, 'keyup', clearModifier);

  // reset modifiers to false whenever the window is (re)focused.
  addEvent(window, 'focus', resetModifiers);

  // store previously defined key
  var previousKey = global.key;

  // restore previously defined key and return reference to our key object
  function noConflict() {
    var k = global.key;
    global.key = previousKey;
    return k;
  }

  // set window.key and window.key.set/get/deleteScope, and the default filter
  global.key = assignKey;
  global.key.setScope = setScope;
  global.key.getScope = getScope;
  global.key.deleteScope = deleteScope;
  global.key.filter = filter;
  global.key.isPressed = isPressed;
  global.key.getPressedKeyCodes = getPressedKeyCodes;
  global.key.noConflict = noConflict;
  global.key.unbind = unbindKey;

  if(typeof module !== 'undefined') module.exports = assignKey;

})(this);
// ALL THAT MAKEFILE WORK JUST SO I FEEL ORGANIZED ENOUGH TO EXPAND.


// need to improve file list
//   need to render a list of widgets for section collapsing
// tables of contents should sort by entity type and alphabetically or locationally
//   need (depth, title, sort-key)
// entity list should group map entities in separate
//   .map files then use build system and a few transoforms
//   to compile .bsp
// unzip .zip files automatically and list contents in tree
// TODO: add alternate image views so same control can be used for
//   listing textures later
// decode Makefile and highlight the file with the commands being run
// file list always shows sized, especially on folders

// TODO: probably some game engine display




const FILE_WIDGETS = [
	['Documentation', showDocument, renderDocument],
	['Local Storage', listFiles, renderFile],
	['Call Stack', callStack, renderFunc],
	['Cookies', cookieList, renderCookie],
	['Threads', threadPool, renderThread],
	['Interactions', interactionsList, renderInteractions],
];

function anyParentsCollapsed(segments) {
	if(!ACE.filescollapsed) {
		return
	}
	return segments.slice(0, -1)
		.reduce(function (p, s, i) { 
			return p + ACE.filescollapsed[
				segments.slice(0, i + 1).join('/')]
		}, 0)
}



function simplifyMilliseconds(milli) {
	let secs = milli / 1000.0
	let mins = secs / 60.0
	let hours = mins / 60.0
	let days = hours / 24.0
	if(days > 1) {
		return Math.round(days, 1) + 'd'
	} else
	if(hours > 1) {
		return Math.round(hours, 1) + 'h'
	}
	else
	if(mins > 1) {
		return Math.round(hours, 1) + 'm'
	}
	else
	if(secs > 1) {
		return Math.round(hours, 1) + 's'
	} else {
		return milli + 'ms'
	}
}


function showDocument() {
	if(!ACE.documentation || !ACE.bubbleFile) {
		return []
	}
	let currentDoc = ACE.bubbleFile
			.replace('library/', 'library/docs/')
			.replace('.js', '.md')

	if(ACE.documentation.includes(currentDoc)) {
		return [currentDoc.replace(/\//g, '_')]
	}
	return []
}


function listFiles() {
	let newFiles = Object.keys(FS.virtual)
	let startLength = newFiles.length

	// put folder collapse hidden at top
	for(let i = 0; i < startLength; i++) {
		let segments = newFiles[i].split('/')
			.map(function (seg, i, arr) {
				return arr.slice(0, i + 1).join('/') 
			})
		// ADD MISSING PATHS FROM ENGINE TO FILE 
		//   LIST SO WE DON'T LOSE FILES IN DATABASE
		//   FROM MISSING LINKS. TODO: FSCHKDSK TOOL, WTF?
		newFiles.push.apply(newFiles, segments)
	}

	// sort and unique
	newFiles = newFiles.sort().filter(function (f, i, arr) { 
		return f && arr.indexOf(f) == i
	})
	return newFiles
}


function callStack() {
	let newFiles = []
	if(!ACE.callStack) {
		return newFiles
	}
	return newFiles.concat(ACE.callStack)
}


function cookieList() {
	if(!ACE.cookiesList) {
		return []
	}
	return Object.keys(ACE.cookiesList)
		.map(function (key) {
			return key + ': ' + ACE.cookiesList[key]
		})
}



function renderInteractions(link, item, path) {
	let dialogs = document.getElementsByClassName('dialog')
	for(let i = 0; i < dialogs.length; i++) {
		if(dialogs[i].getAttribute('aria-id') == path) {
			let title = dialogs[i].getElementsByTagName('h2')[0]
			item.className = 'interaction'
			if(title) {
				if(link.innerText != title.innerText)
					link.innerText = title.innerText
			} else {
				if(link.innerText != dialogs[i].innerText.substr(0, 100))
					link.innerText = dialogs[i].innerText.substr(0, 100)
			}
			if(dialogs[i].parentElement !== item) {
				item.appendChild(dialogs[i])
			}
			break
		}
	}
}


function interactionsList() {
	if(!ACE.interactions) {
		return []
	}
	return ACE.interactions
		.map(function (dialog) {
			return dialog.getAttribute('aria-id')
		})
}


function threadPool() {
	if(!ACE.threadPool) {
		return []
	}
	return ACE.threadPool
		.map(function (thread) {
			return simplifyMilliseconds(Date.now() - thread[1]) + ': ' + thread[0]
		})
}


function initSidebarTheme(newStyle) {
	if(ACE.sidebarStyle || !newStyle) {
		return
	}
	ACE.sidebarStyle = document.createElement('STYLE')
	ACE.sidebarStyle.innerText = newStyle
	document.body.insertBefore(ACE.sidebarStyle, ACE.fileList)

}

function updateFilelist(filepath) {
	if(typeof ACE == 'undefined') {
		return
	}
	if(!ACE.fileList) {
		ACE.fileList = document.getElementById('file-list')
	}
	if(!ACE.fileList) {
		ACE.fileList = document.createElement('DIV')
		ACE.fileList.id = 'file-list'
		document.body.append(ACE.fileList)
		sendMessage({
			script: 'return readFile("library/styles/sidebar.css");'
		}).then(initSidebarTheme)
		ACE.fileList.appendChild(document.createElement('OL'))
	}
	ACE.filestimer = null
	if(!ACE.filetypes) {
		ACE.filetypes = {}
	}
	// SLIGHTLY MORE EXPANDABLE
	ACE.filelistWidgets = []
	ACE.filelistWidgetRows = []
	let newFiles = []
	for(let i = 0; i < FILE_WIDGETS.length; i++) {
		// TODO: if(!filepath) continue
		ACE.filelistWidgets[newFiles.length] = FILE_WIDGETS[i]
		ACE.filelistWidgetRows.push(newFiles.length)
		newFiles.push(FILE_WIDGETS[i][0])
		newFiles = newFiles.concat(FILE_WIDGETS[i][1]())
	}
	ACE.filelistWidgetRows.sort()

	if(ACE.fileslist) {
		let prevCollapse = ACE.filescollapsed
		// save expand/collapse state even if files are added or removed
		ACE.filescollapsed = newFiles.reduce(function (obj, i) {
			let isTopLevel = i.split('/').length == 1
			if(prevCollapse.hasOwnProperty(i)) {
				obj[i] = prevCollapse[i]
			} else {
				obj[i] = i.split('/').length > 1 ? 0 : 1
			}
			// MAINTAIN THIS VISIBILITY INDEX SO USER 
			//   INTERACTION CAN BE VERY SPECIFIC AND FAST
			ACE.filesvisible[i] = isTopLevel
					|| !anyParentsCollapsed(i.split('/'))
			return obj
		}, {})
	} else {
		ACE.filesvisible = {} // I CAN DO THIS ALL DAY
		//   TODO: CHECK V8 USES HASH TABLES OR IF PHP IS FASTER
		ACE.filescollapsed = newFiles.reduce(
			function (obj, i) {
				let isTopLevel = i.split('/').length == 1
				obj[i] = isTopLevel ? 1 : 0
				ACE.filesvisible[i] = isTopLevel
				return obj
			}, {})
	}

	ACE.fileslist = newFiles
	ACE.filescount = Object.values(ACE.filesvisible)
			.reduce(function (p, i) { return p + i }, 0)
	ACE.filesmoved = true
	if(typeof Com_Frame == 'undefined') {
		SYS.frameInterval = setInterval(function () {
			renderFilelist()
		}, 100)
	}

}

function isDirectory(i) {
	// only folder paths and directories are collapsible,
	//   missing paths added seperately above
	//   HENCE THE CHECK FOR !FS.virtual[files[j]]
	return !FS.virtual[i] || FS.virtual[i].mode == FS_DIR
}





function toggleCollapse(row, dataRow) {
	if(!ACE.filescollapsed) {
		return
	}
	let collapse = !ACE.filescollapsed[dataRow]
	ACE.filescollapsed[dataRow] = collapse
	for(let i = row; i < ACE.fileslist.length; i++) {
		if(ACE.fileslist[i].substring(0, dataRow.length)
			.localeCompare(dataRow)) {
			break // no more files under this sorted folder
		}
		// don't make the row we clicked on invisible
		if(ACE.fileslist[i].localeCompare(dataRow) !== 0) {
			ACE.filesvisible[ACE.fileslist[i]] = !anyParentsCollapsed(ACE.fileslist[i].split('/'))
		} else {
			continue // don't count self?
		}
		if(!collapse) {
			ACE.filescount++
		} else {
			ACE.filescount--
		}
	}
	ACE.filesmoved = true
}



function doFileClick(evt) {
	if(!evt.target) {
		return
	}
  let gamedir = addressToString(FS_GetCurrentGameDir())
	let row = evt.target.getAttribute('aria-id') // WTF?
	let dataRow = ACE.fileslist[row]
	if(FS.virtual[dataRow]
		&& FS.virtual[dataRow].mode != FS_DIR) {
		Cbuf_AddText(stringToAddress(
				'edit "' + dataRow.replace(gamedir + '/', '') + '"\n'))
		return
	}
	toggleCollapse(row, dataRow)
}


function getWidgetAtRow(row) {
	let count = 0
	do {
		if(ACE.filelistWidgetRows[count] == row) {
			return ACE.filelistWidgets[row]
		}
		count++
	} while (count < ACE.filelistWidgetRows.length
		&& ACE.filelistWidgetRows[count] <= row)
}

function getWidgetBeforeRow(row) {
	let count = 0
	let widget
	do {
		if(ACE.filelistWidgetRows[count] <= row) {
			widget = ACE.filelistWidgets[row]
		}
		count++
	} while (count < ACE.filelistWidgetRows.length
		&& ACE.filelistWidgetRows[count] <= row)
	return widget
}


function renderFile(link, item, path) {
	let segments = path.split('/')
	if(link.innerText != segments.slice(-1)[0]) {
	 	link.innerText = segments.slice(-1)[0]
	}
	link.style.backgroundPosition = ((segments.length - 1) * 20 + 10) + 'px 50%'
	if(item.classList.contains('filelist-widget'))
		item.classList.remove('filelist-widget')
	link.style.paddingLeft = (segments.length * 20 + 20) + 'px'
	if(isDirectory(path)) {
		if(!item.classList.contains('folder'))
			item.classList.add('folder')
		if(!ACE.filescollapsed[path] && !item.classList.contains('open'))
			item.classList.add('open')
		if(ACE.filescollapsed[path] && item.classList.contains('open'))
			item.classList.remove('open')
		if(item.classList.contains('file'))
			item.classList.remove('file')
	} else {
		if(item.className != 'file')
			item.className = 'file'
		if(item.classList.contains('folder'))
			item.classList.remove('folder')
	}

}


function renderDocument(link, item, path) {
	//Promise.resolve(sendMessage({
	//	script: 'return renderDocument2();\n'
	//}))
	//return
	for(let i = 0; i < ACE.documentation.length; i++) {
		let replacedName = ACE.documentation[i]
			.replace('.js', '.md')
			.replace(/\//g, '_')
		if(replacedName != path) {
			continue
		}

		Promise.resolve(sendMessage({
			script: 'return renderMarkdown("' + ACE.documentation[i] + '");\n'
		}).then(function (response) {
			if(response) {
				let newDialog = document.createElement('DIV')
				newDialog.id = 'documentation'
				newDialog.innerHTML = response
				item.appendChild(newDialog)
			}
		}))
	}
	
}


function renderWidget(link, item, path) {
	if(link.innerText != path) { // otherwise annoying flash in element page
		link.innerText = path
	}
	link.style.paddingLeft = '10px'
	if(!item.classList.contains('filelist-widget'))
		item.classList.add('filelist-widget')
	if(!ACE.filescollapsed[path] && !item.classList.contains('open'))
		item.classList.add('open')
	if(ACE.filescollapsed[path] && item.classList.contains('open'))
		item.classList.remove('open')
	if(item.classList.contains('folder'))
		item.classList.remove('folder')
	if(item.classList.contains('file'))
		item.classList.remove('file')

}


function renderFunc(link, item, path) {
	if(link.innerText != path) { // otherwise annoying flash in element page
		link.style.paddingLeft = '10px'
		link.style.backgroundPosition = '10px 50%'
		link.innerText = path
	}
	item.className = ''
}


function renderCookie(link, item, path) {
	if(link.innerText != path) { // otherwise annoying flash in element page
		link.style.paddingLeft = '10px'
		link.style.backgroundPosition = '10px 50%'
		link.innerText = path
	}
	item.className = ''
}


function renderThread(link, item, path) {
	if(link.innerText != path) { // otherwise annoying flash in element page
		link.style.paddingLeft = '10px'
		link.style.backgroundPosition = '10px 50%'
		link.innerText = path
	}
	item.className = ''
}




// DO THE SAME KIND OF VIRTUAL RENDERING TECHNIQUE ACE USES ON CODE,
//   AND APPLY IT TO THE FILE LIST IN CASE THERE'S EVER LIKE, 10,000
//   THAT MIGHT BE TOO MUCH FOR A PAGE. BOOKMARKS, FOR EXAMPLE?
// TODO: FANCY STUFF LIKE VS CODE EXTENSIONS LIST, GITHUB ACTIONS LEFT HAND LIST,
//   SHOW FILE-GHOST TARGETS BEFORE MAKEFILE CREATES THEM USING SYNTAX ANALYSIS
//   LIKE MACOS DOES IN FINDER WHEN YOU GO TO COPY A FILE OR SOMETHING IS 
//   UPLOADING TO ICLOUD.
function renderFilelist() {
	if(!ACE.fileList) {
		updateFilelist()
		if(!ACE.fileList) {
			return
		}
	}
	let lineHeight = 21
	if(typeof window.ace != 'undefined'
			&& typeof window.ace.renderer != 'undefined') {
		lineHeight = ace.renderer.lineHeight
	}

	// GENERATE THIS LIST ON BACKEND USING VIRTUAL DOM, CSS CONTROL OVER LIST WILL
	//   LOOK THE SAME
	let actualList = ACE.fileList.getElementsByTagName('ol')[0]
	if(!actualList) {
		return
	}
	let newHeight = ACE.filescount * lineHeight
	if(actualList.clientHeight != newHeight)
		actualList.style.height = newHeight + 'px'

	let virtualLineCount = Math.min(Math.ceil(
		ACE.fileList.clientHeight / lineHeight)
				, ACE.filescount) // min, updated on interaction

	// THIS IS WRONG, STARTING ON VISIBLE LINES LIST
	//   NOT ALL OF FILES. BUT WAIT, IF THEY SCROLLED IT
	//   CERTAINLY CAN'T DISPLAY LINES BEFORE THEIR SCROLL
	//   EVEN IF THEY ARE COLLAPSED OR NOT.
	let startLine = Math.floor(
		ACE.fileList.scrollTop / lineHeight)
	let displayCount = 0

	let renderFunction = getWidgetBeforeRow(startLine)[2]
	let widget

	for(
		let j = startLine; // small efficiency gain?
		displayCount < virtualLineCount && j < ACE.fileslist.length;
		j++
	) {
		if(!ACE.filesvisible[ACE.fileslist[j]]) {
			continue
		}
		// SWITCHING BETWEEN IDE AND SOURCE TREE TO COPY SHIT CODE I 
		//   WROTE LAST NIGHT. I REALIZED VS CODE DOES THIS BLAME FEATURE
		//   BUT IT'S DISTRACTING, BOTH VIEWS OF CHANGES ARE SMALL AND 
		//   INCONVENIENT, BEYOND COMPARE IS BEYOND COMPARE. WHAT IF THERE
		//   WAS A TAB AT THE TOP I COULD SWITCH TO, TO SEE SOURCE COMPARE?
		let item
		let link

		if(displayCount == actualList.children.length) {
			item = document.createElement('LI')
			actualList.appendChild(item)
			link = document.createElement('A')
			link.onclick = doFileClick
			item.appendChild(link)
		} else {
			item = actualList.children[displayCount]
			link = item.children[0]
		}
		// TODO: SHOW SEPERATED DIRECTORIES IN ONE LINE LIKE VISUAL STUDIO CODE DOES
		//   GITHUB ALSO DOES IT FOR FOLDERS THAT ONLY HAVE 1 PATH
		if(ACE.filesmoved) {
			link.setAttribute('aria-id', j) // WTF WAS THIS CRAP???
			if((widget = getWidgetAtRow(j))) {
				renderFunction = widget[2]
				renderWidget(link, item, ACE.fileslist[j])
			} else {
				renderFunction(link, item, ACE.fileslist[j])
			}
			item.style.display = 'block'
		}
		displayCount++
	}
	if(ACE.filesmoved) {
		for(let i = displayCount; i < actualList.children.length; i++) {
			actualList.children[i].style.display = 'none'
		}
	}
	ACE.filesmoved = false
}


/*

	// extract basename from zip path
	basename = strrchr( zipfile, PATH_SEP );
	if ( basename == NULL ) {
		basename = zipfile;
	} else {
		basename++;
	}

	fileNameLen = (int) strlen( zipfile ) + 1;
	baseNameLen = (int) strlen( basename ) + 1;

	uf = unzOpen( zipfile );
	err = unzGetGlobalInfo( uf, &gi );

	if ( err != UNZ_OK ) {
		return NULL;
	}

	namelen = 0;
	filecount = 0;
	unzGoToFirstFile( uf );
	for (i = 0; i < gi.number_entry; i++)
	{
		err = unzGetCurrentFileInfo(uf, &file_info, filename_inzip, sizeof(filename_inzip), NULL, 0, NULL, 0);
		filename_inzip[sizeof(filename_inzip)-1] = '\0';
		if (err != UNZ_OK) {
			break;
		}
		// Z_DEFLATED
		if ( file_info.compression_method != 0 && file_info.compression_method != 8  ) {
			Com_Printf( S_COLOR_YELLOW "%s|%s: unsupported compression method %i\n", basename, filename_inzip, (int)file_info.compression_method );
			unzGoToNextFile( uf );
			continue;
		}
		namelen += strlen( filename_inzip ) + 1;
		unzGoToNextFile( uf );
		filecount++;
	}

	if ( filecount == 0 ) {
		unzClose( uf );
		return NULL;
	}
*/



// conversions for accessing pages

const NAMED_FUNCTION = /function\s+([a-z]+[ -~]*)\s*\(/
const EXTENSION_ID = 'lnglmljjcpnpahmfpnfjkgjgmjhegihd';
const EXTENSION_VERSION = '1.0'
const RGBA_REGEX = /rgba?\(([^\)]*)\)/
const FADE_DURATION = 300.0
const FLASH_DURATION = 700.0


// TODO: add information collection _accessors here


// TODO: add utilities from selenium for using Xpath


// TODO: add eye-dropper element selector here

function runBlock(start) {
	if(document.body.className.includes('running')
		|| document.body.className.includes('starting')
		|| document.body.className.includes('paused')) {
		ace.focus()
		return
	}

	document.body.classList.add('starting')

	if(start === -1) {
		sendMessage({
			script: window.ace.getValue()
				.replace(/\s*$/, '') + '\nreturn main();',
			line: ace.session.getLength()
		})
	} else {
		let funcName = NAMED_FUNCTION.exec(
				ace.env.document.getLine(start))[1]
		sendMessage({
			script: ace.session.getLines(start, ACE.lastLine)
				.join('\n').replace(/\s*$/, '') 
				+ '\nreturn ' + funcName + '();\n',
			line: ace.session.getFoldWidgetRange(start).end.row
		})
	}
	ace.focus()
}


function collectForm(dialog) {
	let responseId = dialog.getAttribute('aria-id')
	let formResults = {}
	debugger
	return formResults
}


function doSendForm(reply, dialog, event) {
	let formResults
	let responseId = dialog.getAttribute('aria-id')
	if(event.target && event.target.tagName == 'BUTTON') {
		// SINK!
		return reply({
			responseId: responseId,
			result: formResults
		})
	} else
	if(event.target === dialog
		|| !(formResults = collectForm(dialog))) {
		dialog.style.display = 'none'
		let dialogI = ACE.interactions.indexOf(dialog)
		if(dialogI > -1) {
			ACE.interactions.splice(dialogI, 1)
			updateFilelist('Interactions')
		}
		return reply({
			responseId: responseId
		})
	} else {
	}
}


// TODO: create a drop surface since the game 
//   and editor might interfere



// WHY DO THIS DIALOG FORM CRAP? HASN'T THIS BEEN DONE 1000X OVER
//   BY WORDPRESS? IN THIS CASE, THERE'S A SPECIFIC PURPOSE.
//   IN CASE A MORPHEUS SCRIPT NEEDS INTERVENTION LIKE CAPTCHA
//   WE CAN PHARM OUT THE CAPTCHA FORMS USING A STANDARD UI
//   NO ONE WILL KNOW IF THEY ARE ENTERING A CAPTCHA FOR THEIR
//   OWN LOGIN, OR IF THEY ENTERED IT WRONG AND ARE ENTERING 
//   SOMEONE ELSE'S CAPTCHA BECAUSE THEY AREN'T PRESENT, ATM.
//   RECAPTCHA WAS A STUPID SOLUTION, WE SHOULD HAVE MADE BOT-
//   NETS PUBLIC AND VOLNUTEER A LONG TIME AGO. MY INDUSTRY
//   HAS FAILED TO CAPITALIZE.
// TODO: BRING BACK EULA FOR QUAKE 3 DEMO FOR PUBLIC RELEASE
//   THAT WAY THEY HAVE TO ENTER A KEY TO PLAY THE WHOLE GAME
//   I CAN'T BE ACCUSED OF STEALING IF IT'S THE DEMO PRESENTED
//   WITH THE SAME AGREEMENT AS ON DESKTOP. I THOUGHT THERE WAS
//   AND IN GAME Y/N KEY FOR ACCEPTING EULA? CHECK FOR EULA.TXT
// TODO: call this code for engine system errors Sys_Dialog()
// TODO: NOT REALLY SURE HOW CHROME PROTECTS PASSWORD FIELDS AGAINST
//   MEMORY ATTACKS

// TODO: move all of this to libs so we can affect interaction on other pages
function mergeHTML(request) {
	// INTERESTING, THIS NEIGHBOR WAS TALKING ABOUT CHANGING
	//   NAMES AND PASSING VAIRABLES AROUND AND MAKING MESS,
	//   HE UNDID THE MESS AND THE WHOLE SYSTEM RUNS FASTER.

	// OKAY, THIS IS WHERE THE WHOLE INNERHTML FROM FRONTEND.JS THING
	//   GETS REALLY STUPID. FRONTEND.JS WON'T LET ME INSERT HTML
	//   INTO ANY PAGE FROM AN ARBITRARY STRING. SO I PARSE IT AS XML
	//   SEND IT AS A TREE, AND MERGE IT USING STANDARD DOCUMENT.CREATELEMENT CALLS
	// ABSOLUTELY RIDICULOUS, BUT THIS IS WHAT IT TAKES FOR MY TO CONTROL MY
	//   OWN PERSONAL EXPERIENCE ON THE WEB. THANK YOU DECLARATIVE NET REQUESTS.
	

	return newDialog
}



function showDialog(dialog, request) {
  let newDialog = document.getElementById(request.accessor)
	if(!newDialog) {
		newDialog = document.createElement('DIV')
		document.body.appendChild(newDialog)
	}
	newDialog.setAttribute('aria-id', request.responseId)
	newDialog.onclick = doSendForm.bind(newDialog, reply, newDialog)
  mergeHTML(dialog, newDialog)
  
	// IMPORTANT: prevents inputs from display in game
	INPUT.editorActive = true
	let input = newDialog.getElementsByTagName('input')[0]
	if(!input) {
		input = newDialog.getElementsByTagName('button')[0]
	}
	if(input) {
		input.focus()
	}

	if(typeof ACE.interactions == 'undefined') {
		ACE.interactions = []
	}
	if(!ACE.interactions.includes(newDialog)) {
		ACE.interactions.push(newDialog)
		updateFilelist('Interactions')
	}

}


function hideDialog(dialog) {

  let dialogI = ACE.interactions.indexOf(dialog)
  ACE.interactions.splice(dialogI, 1)
  updateFilelist('Interactions')

}


// I NEED AN EASY WIN, LIKE A WARMUP TASK.
// TODO: inject dark mode into pages that don't support it
//   like uBlock Origin for bad UI/UX.
//   Companies want to keep buying off the shelf crap
//   doesn't mean I have to look at to enjoy the rest of the service.
function toggleOption(option) {
	switch(option.id) {
		case 'syncLocal':
			
			break
		case 'snapWindows':
			sendMessage({ 
				snapWindows: evt.target.checked,
			})
			break
			// GOOGLE HIDES THEIR CONSOLE BEHIND TINY LITTLE ICONS.
			//   FUNNY, I WONDER IF THE USER-EXPERIENCE SURVEYS I TOOK
			//   THINK THAT I PREFER TO CLICK ON THEIR STUFF INSTEAD 
			//   OF WRITE CODE? WILL WRITING THIS TOOL GIVE ME THE POWER
			//   TO REWRITE THEIR DESIGN FROM GITHUB SOURCES?
		case 'lineWrap':
			if(option.checked) {
				ace.setOption('wrap', 50)
			} else {
				ace.setOption('wrap', false)
			}
			break
		case 'codeFold':
			// SURE, THE CODE EDITOR ON AWS IS FREE TO USE,
			//   AFTER A 12-STEP SIGN-UP PROCCESS, ENTERING 
			//   CREDIT CARD INFORMATION, AND PAYING FOR 
			//   OTHER CLOUD SERVICES TO CONNECT IT TO YOUR
			//   WORKFLOW. GET REAL AMAZON.
			if(option.checked) {
				ace.setOption('foldStyle', 'markbeginend')
			} else {
				ace.setOption('foldStyle', 'manual')
			}
			break
		case 'snapWindows':
			// automatically recovered by frontend-plugin.js
			break
		case 'darkMode':
			if(option.checked) {
				ace.setTheme('ace/theme/monokai')
				document.body.classList.remove('light')
				document.body.classList.add('dark')
				// is this the first tooling connection to the engine?
				//   I guess file-list updates
				if(typeof Cvar_Set != 'undefined') {
					Cvar_Set(stringToAddress('cl_conColor'), stringToAddress('0 0 0 255'))
					Cvar_Set(stringToAddress('cl_textColor'), stringToAddress('255 255 255 255'))
				}
			} else {
				ace.setTheme('ace/theme/xcode')
				document.body.classList.add('light')
				document.body.classList.remove('dark')
				if(typeof Cvar_Set != 'undefined') {
					Cvar_Set(stringToAddress('cl_conColor'), stringToAddress('255 255 255 255'))
					Cvar_Set(stringToAddress('cl_textColor'), stringToAddress('0 0 0 255'))
				}
			}
			break
		default:
	}
}

// THIS IS ABOUT ALL THE BOILERPLATE I CAN TOLERATE TO BOOT A WASM FILE
//   EMSCRIPTEN IS WHAT 10,000 LINES OF BOILERPLATE?

function initEngine() {
	initWasm({
		SYS: SYS,
		GL: GL,
		EMGL: EMGL,
		INPUT: INPUT,
	})
	let startArgs = getQueryCommands()
	initProgram(startArgs)
}



// BECAUSE IT'S FUCKING PRETTIER, OKAY?
function updateGlobalFunctions(GLOBAL) {

	// assign everything to env because this __attribute(import) BS don't work
	let startKeys = Object.keys(GLOBAL)
	let startValues = Object.values(GLOBAL)
	if(typeof window != 'undefined') {
		for(let i = 0; i < startKeys.length; i++) {
			ENV[startKeys[i]] =
			window[startKeys[i]] = startValues[i] //.apply(ENV.exports)
		}
		Object.assign(ENV, GLOBAL)
	} else if (typeof global != 'undefined') {
		for(let i = 0; i < startKeys.length; i++) {
			ENV[startKeys[i]] =
			global[startKeys[i]] = startValues[i] //.apply(ENV.exports)
		}
		Object.assign(ENV, GLOBAL)
	}

}

// write it non-async just in case wasm is support but not es6?
function initWasm(bytes, env) {
	if(isStreaming) {
		return WebAssembly.instantiateStreaming(bytes, env)
	} else {
		return WebAssembly.instantiate(bytes, env)
	}
}

function initDedicated() {
	Sys_fork()
		let startArgs = [
		'+set', 'dedicated', '1'
	].concat(getQueryCommands())
	Sys_exec(stringToAddress('quake3e.ded.wasm'), stringsToMemory(startArgs))
}


/*

GRAB INSTRUCTIONS FROM MANY SOURCES. USED CALENDAR BEFORE,
SHEETS, GIT, 
USENET WOULD BE INTERESTING BECAUSE IT'S ALREADY PROPOGATED,
JUST NEED TO SEARCH FOR THE RIGHT HASHES. MAYBE WE CAN EXPLOIT
COLLISIONS FOR THIS PURPOSE?

CONTROLLER FOR FRONT-END REQUEST INJECTION LIKE uBlock Origin.

TOOLS FOR MAKING THE WHOLE PACKAGE ISOMORPHIC

*/

let ACE = {
	consoleLines: 0,
	playCount: 0,
	playButtons: [],
	downloaded: false,
	filename: false,

	// TODO: FEATURE LIKE VISUAL STUDIO WITH THE HIDDEN IMPORTS IN
	//   PROJECT SETTINGS, I THINK ECLIPSE/JAVA DOES THIS TOO.
}

// I DON'T KNOW WHY I THINK THIS STUFF IS COOL, 
// BY PUTTING ACE INTO THE LIBRARY, I WILL BE ABLE TO
// INJECT A NOTEPAD ONTO ANY WEBPAGE, I THINK INTERNET ANNOTATIONS COULD BE FUN
//   LIKE SOME SORT OF PUBLIC BILLBOARD FOR A COMPANY AND THEN ANYONE CAN COME
//   AND COMMENT ON IT, EITHER IN 2D AS A REVIEW TOOL, OR IN 3D AS A SPECTATOR.
function initAce(editorId) {
	// TODO: on native sys_open index.html and use engine as proxy, cebsocket
	ace.edit(editorId)
	ace.setFontSize(16)
	ace.setTheme('ace/theme/monokai')
	ace.setOption('minLines', 1000)
	ace.setOption('foldStyle', 'markbeginend')
	ace.setOption('fadeFoldWidgets', true)
	ace.setOption('scrollPastEnd', 0.618) // FOR TERRY!!!
	ace.setOption('wrap', 50)
	ace.setOption('printMarginColumn', 50)
	//ace.setOption('split', 'below')
	ace.setOption('indentedSoftWrap', false)
	ace.session.setTabSize(2)
	ace.session.setMode('ace/mode/javascript')
	ace.session.setUseWorker(false)
	// add play buttons to individual function blocks for ease of use
	ace.on('focus', function () { INPUT.editorActive = true })
	ace.on('blur', function () { INPUT.editorActive = false })

}


/*
function showConsole(console, lastLine) {
	let newLines = console.replace(/\s*$/, '') // only truncating end like Chrome
																						// see, I do have some nice things to say
	if(!ACE.consoleWidget) {
		ACE.consoleWidget = createLineWidget(newLines + '\n', lastLine)
		ace.getSession().widgetManager.addLineWidget(ACE.consoleWidget)
		ACE.consoleWidget.el.children[0].id = 'console'
		ACE.consoleWidget.editor = initAce('console')
	}
}

function onPaused(request) {
	document.body.classList.remove('starting')
	document.body.classList.add('paused')
	if(!ACE.pausedWidget) {
		ACE.pausedWidget = createLineWidget('PAUSED', ACE.previousNonLibrary, 'morph_pause')
		ace.getSession().widgetManager.addLineWidget(ACE.pausedWidget)
	} else {
		ACE.pausedWidget.row = ACE.previousNonLibrary
		//ace.getSession().widgetManager.addLineWidget(ACE.pausedWidget)
	}
	// debounce
	setTimeout(function () {
		document.body.classList.remove('running')
	}, 1000)
}


function doResult(request) {
	if (!ace.session || !ace.session.lineWidgets) {
		return
	}

	// TODO: display some fancy report?
	document.body.classList.remove('running')
	document.body.classList.add('stopped')
}



function showError(request) {

	if(request.error.includes('No script')) {
		document.body.classList.remove('runnning')
		document.body.classList.remove('starting')
		document.body.classList.remove('error')
		return
	}

	document.body.classList.remove('running')
	document.body.classList.add('stopped')
	// SEARCH GITHUB: getElementsByClassName('.
	//   WHAT IF MY BOT COULD DEBUG OTHER PEOPLE'S CODE
	//   WHILE THEY ARE SLEEP LIKE THE SANDMAN?
	if (!ace.session) {
		return
	}
	if(!ace.session.lineWidgets) {
		initLineWidgets()
	}
	let newLines = request.error.replace(/\s*$/, '')
	// scroll to the line when an error occurs
	if(ace.gotoLine) {
		setTimeout(ace.gotoLine.bind(ace, request.line), 100)
	}
	// if error has a line number, insert message below that line
	if(!ACE.errorWidget) {
		ACE.errorWidget = createLineWidget(newLines, request.line, 'morph_error')
		ace.getSession().widgetManager.addLineWidget(ACE.errorWidget)
	} else {
		ACE.errorWidget.el.children[0].innerText = newLines
	}
	ACE.errorWidget.stack = request.stack

}

// TODO: INJECT CKEDITOR INSTEAD
*/

if(typeof module != 'undefined') {
	module.exports = {
		ACE
	}
} else if (typeof window != 'undefined') {
	window.ACE = ACE
}

(function(){function o(n){var i=e;n&&(e[n]||(e[n]={}),i=e[n]);if(!i.define||!i.define.packaged)t.original=i.define,i.define=t,i.define.packaged=!0;if(!i.require||!i.require.packaged)r.original=i.require,i.require=r,i.require.packaged=!0}var ACE_NAMESPACE = "ace",e=function(){return this}();!e&&typeof window!="undefined"&&(e=window);if(!ACE_NAMESPACE&&typeof requirejs!="undefined")return;var t=function(e,n,r){if(typeof e!="string"){t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(r=n),t.modules[e]||(t.payloads[e]=r,t.modules[e]=null)};t.modules={},t.payloads={};var n=function(e,t,n){if(typeof t=="string"){var i=s(e,t);if(i!=undefined)return n&&n(),i}else if(Object.prototype.toString.call(t)==="[object Array]"){var o=[];for(var u=0,a=t.length;u<a;++u){var f=s(e,t[u]);if(f==undefined&&r.original)return;o.push(f)}return n&&n.apply(null,o)||!0}},r=function(e,t){var i=n("",e,t);return i==undefined&&r.original?r.original.apply(this,arguments):i},i=function(e,t){if(t.indexOf("!")!==-1){var n=t.split("!");return i(e,n[0])+"!"+i(e,n[1])}if(t.charAt(0)=="."){var r=e.split("/").slice(0,-1).join("/");t=r+"/"+t;while(t.indexOf(".")!==-1&&s!=t){var s=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},s=function(e,r){r=i(e,r);var s=t.modules[r];if(!s){s=t.payloads[r];if(typeof s=="function"){var o={},u={id:r,uri:"",exports:o,packaged:!0},a=function(e,t){return n(r,e,t)},f=s(a,o,u);o=f||u.exports,t.modules[r]=o,delete t.payloads[r]}s=t.modules[r]=o||s}return s};o(ACE_NAMESPACE)})(),ace.define("ace/lib/fixoldbrowsers",["require","exports","module"],function(e,t,n){"use strict";typeof Element!="undefined"&&!Element.prototype.remove&&Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})}),ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var r=typeof navigator=="object"?navigator:{},i=(/mac|win|linux/i.exec(r.platform)||["other"])[0].toLowerCase(),s=r.userAgent||"",o=r.appName||"";t.isWin=i=="win",t.isMac=i=="mac",t.isLinux=i=="linux",t.isIE=o=="Microsoft Internet Explorer"||o.indexOf("MSAppHost")>=0?parseFloat((s.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((s.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=s.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(s.split("WebKit/")[1])||undefined,t.isChrome=parseFloat(s.split(" Chrome/")[1])||undefined,t.isEdge=parseFloat(s.split(" Edge/")[1])||undefined,t.isAIR=s.indexOf("AdobeAIR")>=0,t.isAndroid=s.indexOf("Android")>=0,t.isChromeOS=s.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(s)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";function u(){var e=o;o=null,e&&e.forEach(function(e){a(e[0],e[1])})}function a(e,n,r){if(typeof document=="undefined")return;if(o)if(r)u();else if(r===!1)return o.push([e,n]);if(s)return;var i=r;if(!r||!r.getRootNode)i=document;else{i=r.getRootNode();if(!i||i==r)i=document}var a=i.ownerDocument||i;if(n&&t.hasCssString(n,i))return null;n&&(e+="\n/*# sourceURL=ace/css/"+n+" */");var f=t.createElement("style");f.appendChild(a.createTextNode(e)),n&&(f.id=n),i==a&&(i=t.getDocumentHead(a)),i.insertBefore(f,i.firstChild)}var r=e("./useragent"),i="http://www.w3.org/1999/xhtml";t.buildDom=function l(e,t,n){if(typeof e=="string"&&e){var r=document.createTextNode(e);return t&&t.appendChild(r),r}if(!Array.isArray(e))return e&&e.appendChild&&t&&t.appendChild(e),e;if(typeof e[0]!="string"||!e[0]){var i=[];for(var s=0;s<e.length;s++){var o=l(e[s],t,n);o&&i.push(o)}return i}var u=document.createElement(e[0]),a=e[1],f=1;a&&typeof a=="object"&&!Array.isArray(a)&&(f=2);for(var s=f;s<e.length;s++)l(e[s],u,n);return f==2&&Object.keys(a).forEach(function(e){var t=a[e];e==="class"?u.className=Array.isArray(t)?t.join(" "):t:typeof t=="function"||e=="value"||e[0]=="$"?u[e]=t:e==="ref"?n&&(n[t]=u):e==="style"?typeof t=="string"&&(u.style.cssText=t):t!=null&&u.setAttribute(e,t)}),t&&t.appendChild(u),u},t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||i,e):document.createElement(e)},t.removeChildren=function(e){e.innerHTML=""},t.createTextNode=function(e,t){var n=t?t.ownerDocument:document;return n.createTextNode(e)},t.createFragment=function(e){var t=e?e.ownerDocument:document;return t.createDocumentFragment()},t.hasCssClass=function(e,t){var n=(e.className+"").split(/\s+/g);return n.indexOf(t)!==-1},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){var n=e.className.split(/\s+/g);for(;;){var r=n.indexOf(t);if(r==-1)break;n.splice(r,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){var n=e.className.split(/\s+/g),r=!0;for(;;){var i=n.indexOf(t);if(i==-1)break;r=!1,n.splice(i,1)}return r&&n.push(t),e.className=n.join(" "),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n=0,r;t=t||document;if(r=t.querySelectorAll("style"))while(n<r.length)if(r[n++].id===e)return!0};var s,o=[];t.useStrictCSP=function(e){s=e,e==0?u():o||(o=[])},t.importCssString=a,t.importCssStylsheet=function(e,n){t.buildDom(["link",{rel:"stylesheet",href:e}],t.getDocumentHead(n))},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=t.createElement("ace_outer"),i=r.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",i.display="block",r.appendChild(n);var s=e.documentElement;s.appendChild(r);var o=n.offsetWidth;i.overflow="scroll";var u=n.offsetWidth;return o==u&&(u=r.clientWidth),s.removeChild(r),o-u},t.computedStyle=function(e,t){return window.getComputedStyle(e,"")||{}},t.setStyle=function(e,t,n){e[t]!==n&&(e[t]=n)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=r.isWin?typeof window!="undefined"&&window.devicePixelRatio>=1.5:!0,r.isChromeOS&&(t.HI_DPI=!1);if(typeof document!="undefined"){var f=document.createElement("div");t.HI_DPI&&f.style.transform!==undefined&&(t.HAS_CSS_TRANSFORMS=!0),!r.isEdge&&typeof f.style.animationName!="undefined"&&(t.HAS_CSS_ANIMATION=!0),f=null}t.HAS_CSS_TRANSFORMS?t.translate=function(e,t,n){e.style.transform="translate("+Math.round(t)+"px, "+Math.round(n)+"px)"}:t.translate=function(e,t,n){e.style.top=Math.round(n)+"px",e.style.left=Math.round(t)+"px"}}),ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var r=e("./oop"),i=function(){var e={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},t,n;for(n in e.FUNCTION_KEYS)t=e.FUNCTION_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);for(n in e.PRINTABLE_KEYS)t=e.PRINTABLE_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);return r.mixin(e,e.MODIFIER_KEYS),r.mixin(e,e.PRINTABLE_KEYS),r.mixin(e,e.FUNCTION_KEYS),e.enter=e["return"],e.escape=e.esc,e.del=e["delete"],e[173]="-",function(){var t=["cmd","ctrl","alt","shift"];for(var n=Math.pow(2,t.length);n--;)e.KEY_MODS[n]=t.filter(function(t){return n&e.KEY_MODS[t]}).join("-")+"-"}(),e.KEY_MODS[0]="",e.KEY_MODS[-1]="input-",e}();r.mixin(t,i),t.keyCodeToString=function(e){var t=i[e];return typeof t!="string"&&(t=String.fromCharCode(e)),t.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function a(){u=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){u={passive:!1}}})}catch(e){}}function f(){return u==undefined&&a(),u}function l(e,t,n){this.elem=e,this.type=t,this.callback=n}function d(e,t,n){var u=p(t);if(!i.isMac&&s){t.getModifierState&&(t.getModifierState("OS")||t.getModifierState("Win"))&&(u|=8);if(s.altGr){if((3&u)==3)return;s.altGr=0}if(n===18||n===17){var a="location"in t?t.location:t.keyLocation;if(n===17&&a===1)s[n]==1&&(o=t.timeStamp);else if(n===18&&u===3&&a===2){var f=t.timeStamp-o;f<50&&(s.altGr=!0)}}}n in r.MODIFIER_KEYS&&(n=-1);if(!u&&n===13){var a="location"in t?t.location:t.keyLocation;if(a===3){e(t,u,-n);if(t.defaultPrevented)return}}if(i.isChromeOS&&u&8){e(t,u,n);if(t.defaultPrevented)return;u&=-9}return!!u||n in r.FUNCTION_KEYS||n in r.PRINTABLE_KEYS?e(t,u,n):!1}function v(){s=Object.create(null)}var r=e("./keys"),i=e("./useragent"),s=null,o=0,u;l.prototype.destroy=function(){h(this.elem,this.type,this.callback),this.elem=this.type=this.callback=undefined};var c=t.addListener=function(e,t,n,r){e.addEventListener(t,n,f()),r&&r.$toDestroy.push(new l(e,t,n))},h=t.removeListener=function(e,t,n){e.removeEventListener(t,n,f())};t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation&&e.stopPropagation()},t.preventDefault=function(e){e.preventDefault&&e.preventDefault()},t.getButton=function(e){return e.type=="dblclick"?0:e.type=="contextmenu"||i.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.button},t.capture=function(e,t,n){function i(e){t&&t(e),n&&n(e),h(r,"mousemove",t),h(r,"mouseup",i),h(r,"dragstart",i)}var r=e&&e.ownerDocument||document;return c(r,"mousemove",t),c(r,"mouseup",i),c(r,"dragstart",i),i},t.addMouseWheelListener=function(e,t,n){"onmousewheel"in e?c(e,"mousewheel",function(e){var n=8;e.wheelDeltaX!==undefined?(e.wheelX=-e.wheelDeltaX/n,e.wheelY=-e.wheelDeltaY/n):(e.wheelX=0,e.wheelY=-e.wheelDelta/n),t(e)},n):"onwheel"in e?c(e,"wheel",function(e){var n=.35;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=e.deltaX*n||0,e.wheelY=e.deltaY*n||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=(e.deltaX||0)*5,e.wheelY=(e.deltaY||0)*5}t(e)},n):c(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=(e.detail||0)*5,e.wheelY=0):(e.wheelX=0,e.wheelY=(e.detail||0)*5),t(e)},n)},t.addMultiMouseDownListener=function(e,n,r,s,o){function p(e){t.getButton(e)!==0?u=0:e.detail>1?(u++,u>4&&(u=1)):u=1;if(i.isIE){var o=Math.abs(e.clientX-a)>5||Math.abs(e.clientY-f)>5;if(!l||o)u=1;l&&clearTimeout(l),l=setTimeout(function(){l=null},n[u-1]||600),u==1&&(a=e.clientX,f=e.clientY)}e._clicks=u,r[s]("mousedown",e);if(u>4)u=0;else if(u>1)return r[s](h[u],e)}var u=0,a,f,l,h={2:"dblclick",3:"tripleclick",4:"quadclick"};Array.isArray(e)||(e=[e]),e.forEach(function(e){c(e,"mousedown",p,o)})};var p=function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)};t.getModifierString=function(e){return r.KEY_MODS[p(e)]},t.addCommandKeyListener=function(e,n,r){if(i.isOldGecko||i.isOpera&&!("KeyboardEvent"in window)){var o=null;c(e,"keydown",function(e){o=e.keyCode},r),c(e,"keypress",function(e){return d(n,e,o)},r)}else{var u=null;c(e,"keydown",function(e){s[e.keyCode]=(s[e.keyCode]||0)+1;var t=d(n,e,e.keyCode);return u=e.defaultPrevented,t},r),c(e,"keypress",function(e){u&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),u=null)},r),c(e,"keyup",function(e){s[e.keyCode]=null},r),s||(v(),c(window,"focus",v))}};if(typeof window=="object"&&window.postMessage&&!i.isOldIE){var m=1;t.nextTick=function(e,n){n=n||window;var r="zero-timeout-message-"+m++,i=function(s){s.data==r&&(t.stopPropagation(s),h(n,"message",i),e())};c(n,"message",i),n.postMessage(r,"*")}}t.$idleBlocked=!1,t.onIdle=function(e,n){return setTimeout(function r(){t.$idleBlocked?setTimeout(r,100):e()},n)},t.$idleBlockId=null,t.blockIdle=function(e){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},e||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}}),ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var r=function(e,t){return e.row-t.row||e.column-t.column},i=function(e,t,n,r){this.start={row:e,column:t},this.end={row:n,column:r}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return this.compare(e,t)==0},this.compareRange=function(e){var t,n=e.end,r=e.start;return t=this.compare(n.row,n.column),t==1?(t=this.compare(r.row,r.column),t==1?2:t==0?1:0):t==-1?-2:(t=this.compare(r.row,r.column),t==-1?-1:t==1?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return this.comparePoint(e.start)==0&&this.comparePoint(e.end)==0},this.intersects=function(e){var t=this.compareRange(e);return t==-1||t==0||t==1},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){typeof e=="object"?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){typeof e=="object"?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)||this.isStart(e,t)?!1:!0:!1},this.insideStart=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)?!1:!0:!1},this.insideEnd=function(e,t){return this.compare(e,t)==0?this.isStart(e,t)?!1:!0:!1},this.compare=function(e,t){return!this.isMultiLine()&&e===this.start.row?t<this.start.column?-1:t>this.end.column?1:0:e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)var n={row:e,column:0};if(this.start.row>t)var r={row:t+1,column:0};else if(this.start.row<e)var r={row:e,column:0};return i.fromPoints(r||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(n==0)return this;if(n==-1)var r={row:e,column:t};else var s={row:e,column:t};return i.fromPoints(r||this.start,s||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new i(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new i(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new i(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(i.prototype),i.fromPoints=function(e,t){return new i(e.row,e.column,t.row,t.column)},i.comparePoints=r,i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=i}),ace.define("ace/lib/lang",["require","exports","module"],function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){var n="";while(t>0){t&1&&(n+=e);if(t>>=1)e+=e}return n};var r=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)e[n]&&typeof e[n]=="object"?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function s(e){if(typeof e!="object"||!e)return e;var t;if(Array.isArray(e)){t=[];for(var n=0;n<e.length;n++)t[n]=s(e[n]);return t}if(Object.prototype.toString.call(e)!=="[object Object]")return e;t={};for(var n in e)t[n]=s(e[n]);return t},t.arrayToMap=function(e){var t={};for(var n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return(""+e).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},i=function(e){n==null&&(n=setTimeout(r,e||t))};return i.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),ace.define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";var r;n.exports={lineMode:!1,pasteCancelled:function(){return r&&r>Date.now()-50?!0:r=!1},cancel:function(){r=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=e("../lib/dom"),o=e("../lib/lang"),u=e("../clipboard"),a=i.isChrome<18,f=i.isIE,l=i.isChrome>63,c=400,h=e("../lib/keys"),p=h.KEY_MODS,d=i.isIOS,v=d?/\s/:/\n/,m=i.isMobile,g=function(e,t){function X(){x=!0,n.blur(),n.focus(),x=!1}function $(e){e.keyCode==27&&n.value.length<n.selectionStart&&(b||(T=n.value),N=C=-1,O()),V()}function K(){clearTimeout(J),J=setTimeout(function(){E&&(n.style.cssText=E,E=""),t.renderer.$isMousePressed=!1,t.renderer.$keepTextAreaAtCursor&&t.renderer.$moveTextAreaToCursor()},0)}function G(e,t,n){var r=null,i=!1;n.addEventListener("keydown",function(e){r&&clearTimeout(r),i=!0},!0),n.addEventListener("keyup",function(e){r=setTimeout(function(){i=!1},100)},!0);var s=function(e){if(document.activeElement!==n)return;if(i||b||t.$mouseHandler.isMousePressed)return;if(g)return;var r=n.selectionStart,s=n.selectionEnd,o=null,u=0;if(r==0)o=h.up;else if(r==1)o=h.home;else if(s>C&&T[s]=="\n")o=h.end;else if(r<N&&T[r-1]==" ")o=h.left,u=p.option;else if(r<N||r==N&&C!=N&&r==s)o=h.left;else if(s>C&&T.slice(0,s).split("\n").length>2)o=h.down;else if(s>C&&T[s-1]==" ")o=h.right,u=p.option;else if(s>C||s==C&&C!=N&&r==s)o=h.right;r!==s&&(u|=p.shift);if(o){var a=t.onCommandKey({},u,o);if(!a&&t.commands){o=h.keyCodeToString(o);var f=t.commands.findKeyCommand(u,o);f&&t.execCommand(f)}N=r,C=s,O("")}};document.addEventListener("selectionchange",s),t.on("destroy",function(){document.removeEventListener("selectionchange",s)})}var n=s.createElement("textarea");n.className="ace_text-input",n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck",!1),n.style.opacity="0",e.insertBefore(n,e.firstChild);var g=!1,y=!1,b=!1,w=!1,E="";m||(n.style.fontSize="1px");var S=!1,x=!1,T="",N=0,C=0,k=0;try{var L=document.activeElement===n}catch(A){}r.addListener(n,"blur",function(e){if(x)return;t.onBlur(e),L=!1},t),r.addListener(n,"focus",function(e){if(x)return;L=!0;if(i.isEdge)try{if(!document.hasFocus())return}catch(e){}t.onFocus(e),i.isEdge?setTimeout(O):O()},t),this.$focusScroll=!1,this.focus=function(){if(E||l||this.$focusScroll=="browser")return n.focus({preventScroll:!0});var e=n.style.top;n.style.position="fixed",n.style.top="0px";try{var t=n.getBoundingClientRect().top!=0}catch(r){return}var i=[];if(t){var s=n.parentElement;while(s&&s.nodeType==1)i.push(s),s.setAttribute("ace_nocontext",!0),!s.parentElement&&s.getRootNode?s=s.getRootNode().host:s=s.parentElement}n.focus({preventScroll:!0}),t&&i.forEach(function(e){e.removeAttribute("ace_nocontext")}),setTimeout(function(){n.style.position="",n.style.top=="0px"&&(n.style.top=e)},0)},this.blur=function(){n.blur()},this.isFocused=function(){return L},t.on("beforeEndOperation",function(){var e=t.curOp,r=e&&e.command&&e.command.name;if(r=="insertstring")return;var i=r&&(e.docChanged||e.selectionChanged);b&&i&&(T=n.value="",W()),O()});var O=d?function(e){if(!L||g&&!e||w)return;e||(e="");var r="\n ab"+e+"cde fg\n";r!=n.value&&(n.value=T=r);var i=4,s=4+(e.length||(t.selection.isEmpty()?0:1));(N!=i||C!=s)&&n.setSelectionRange(i,s),N=i,C=s}:function(){if(b||w)return;if(!L&&!P)return;b=!0;var e=0,r=0,i="";if(t.session){var s=t.selection,o=s.getRange(),u=s.cursor.row;e=o.start.column,r=o.end.column,i=t.session.getLine(u);if(o.start.row!=u){var a=t.session.getLine(u-1);e=o.start.row<u-1?0:e,r+=a.length+1,i=a+"\n"+i}else if(o.end.row!=u){var f=t.session.getLine(u+1);r=o.end.row>u+1?f.length:r,r+=i.length+1,i=i+"\n"+f}else m&&u>0&&(i="\n"+i,r+=1,e+=1);i.length>c&&(e<c&&r<c?i=i.slice(0,c):(i="\n",e==r?e=r=0:(e=0,r=1)))}var l=i+"\n\n";l!=T&&(n.value=T=l,N=C=l.length),P&&(N=n.selectionStart,C=n.selectionEnd);if(C!=r||N!=e||n.selectionEnd!=C)try{n.setSelectionRange(e,r),N=e,C=r}catch(h){}b=!1};this.resetSelection=O,L&&t.onFocus();var M=function(e){return e.selectionStart===0&&e.selectionEnd>=T.length&&e.value===T&&T&&e.selectionEnd!==C},_=function(e){if(b)return;g?g=!1:M(n)?(t.selectAll(),O()):m&&n.selectionStart!=N&&O()},D=null;this.setInputHandler=function(e){D=e},this.getInputHandler=function(){return D};var P=!1,H=function(e,r){P&&(P=!1);if(y)return O(),e&&t.onPaste(e),y=!1,"";var s=n.selectionStart,o=n.selectionEnd,u=N,a=T.length-C,f=e,l=e.length-s,c=e.length-o,h=0;while(u>0&&T[h]==e[h])h++,u--;f=f.slice(h),h=1;while(a>0&&T.length-h>N-1&&T[T.length-h]==e[e.length-h])h++,a--;l-=h-1,c-=h-1;var p=f.length-h+1;p<0&&(u=-p,p=0),f=f.slice(0,p);if(!r&&!f&&!l&&!u&&!a&&!c)return"";w=!0;var d=!1;return i.isAndroid&&f==". "&&(f="  ",d=!0),f&&!u&&!a&&!l&&!c||S?t.onTextInput(f):t.onTextInput(f,{extendLeft:u,extendRight:a,restoreStart:l,restoreEnd:c}),w=!1,T=e,N=s,C=o,k=c,d?"\n":f},B=function(e){if(b)return z();if(e&&e.inputType){if(e.inputType=="historyUndo")return t.execCommand("undo");if(e.inputType=="historyRedo")return t.execCommand("redo")}var r=n.value,i=H(r,!0);(r.length>c+100||v.test(i)||m&&N<1&&N==C)&&O()},j=function(e,t,n){var r=e.clipboardData||window.clipboardData;if(!r||a)return;var i=f||n?"Text":"text/plain";try{return t?r.setData(i,t)!==!1:r.getData(i)}catch(e){if(!n)return j(e,t,!0)}},F=function(e,i){var s=t.getCopyText();if(!s)return r.preventDefault(e);j(e,s)?(d&&(O(s),g=s,setTimeout(function(){g=!1},10)),i?t.onCut():t.onCopy(),r.preventDefault(e)):(g=!0,n.value=s,n.select(),setTimeout(function(){g=!1,O(),i?t.onCut():t.onCopy()}))},I=function(e){F(e,!0)},q=function(e){F(e,!1)},R=function(e){var s=j(e);if(u.pasteCancelled())return;typeof s=="string"?(s&&t.onPaste(s,e),i.isIE&&setTimeout(O),r.preventDefault(e)):(n.value="",y=!0)};r.addCommandKeyListener(n,t.onCommandKey.bind(t),t),r.addListener(n,"select",_,t),r.addListener(n,"input",B,t),r.addListener(n,"cut",I,t),r.addListener(n,"copy",q,t),r.addListener(n,"paste",R,t),(!("oncut"in n)||!("oncopy"in n)||!("onpaste"in n))&&r.addListener(e,"keydown",function(e){if(i.isMac&&!e.metaKey||!e.ctrlKey)return;switch(e.keyCode){case 67:q(e);break;case 86:R(e);break;case 88:I(e)}},t);var U=function(e){if(b||!t.onCompositionStart||t.$readOnly)return;b={};if(S)return;e.data&&(b.useTextareaForIME=!1),setTimeout(z,0),t._signal("compositionStart"),t.on("mousedown",X);var r=t.getSelectionRange();r.end.row=r.start.row,r.end.column=r.start.column,b.markerRange=r,b.selectionStart=N,t.onCompositionStart(b),b.useTextareaForIME?(T=n.value="",N=0,C=0):(n.msGetInputContext&&(b.context=n.msGetInputContext()),n.getInputContext&&(b.context=n.getInputContext()))},z=function(){if(!b||!t.onCompositionUpdate||t.$readOnly)return;if(S)return X();if(b.useTextareaForIME)t.onCompositionUpdate(n.value);else{var e=n.value;H(e),b.markerRange&&(b.context&&(b.markerRange.start.column=b.selectionStart=b.context.compositionStartOffset),b.markerRange.end.column=b.markerRange.start.column+C-b.selectionStart+k)}},W=function(e){if(!t.onCompositionEnd||t.$readOnly)return;b=!1,t.onCompositionEnd(),t.off("mousedown",X),e&&B()},V=o.delayedCall(z,50).schedule.bind(null,null);r.addListener(n,"compositionstart",U,t),r.addListener(n,"compositionupdate",z,t),r.addListener(n,"keyup",$,t),r.addListener(n,"keydown",V,t),r.addListener(n,"compositionend",W,t),this.getElement=function(){return n},this.setCommandMode=function(e){S=e,n.readOnly=!1},this.setReadOnly=function(e){S||(n.readOnly=e)},this.setCopyWithEmptySelection=function(e){},this.onContextMenu=function(e){P=!0,O(),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,o){E||(E=n.style.cssText),n.style.cssText=(o?"z-index:100000;":"")+(i.isIE?"opacity:0.1;":"")+"text-indent: -"+(N+C)*t.renderer.characterWidth*.5+"px;";var u=t.container.getBoundingClientRect(),a=s.computedStyle(t.container),f=u.top+(parseInt(a.borderTopWidth)||0),l=u.left+(parseInt(u.borderLeftWidth)||0),c=u.bottom-f-n.clientHeight-2,h=function(e){s.translate(n,e.clientX-l-2,Math.min(e.clientY-f-2,c))};h(e);if(e.type!="mousedown")return;t.renderer.$isMousePressed=!0,clearTimeout(J),i.isWin&&r.capture(t.container,h,K)},this.onContextMenuClose=K;var J,Q=function(e){t.textInput.onContextMenu(e),K()};r.addListener(n,"mouseup",Q,t),r.addListener(n,"mousedown",function(e){e.preventDefault(),K()},t),r.addListener(t.renderer.scroller,"contextmenu",Q,t),r.addListener(n,"contextmenu",Q,t),d&&G(e,t,n)};t.TextInput=g,t.$setUserAgentForTests=function(e,t){m=e,d=t}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";function o(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));var n=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];n.forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function u(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}function a(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row==e.end.row-1&&!e.start.column&&!e.end.column)var n=t.column-4;else var n=2*t.row-e.start.row-e.end.row;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var r=e("../lib/useragent"),i=0,s=550;(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var i=this.editor,s=e.getButton();if(s!==0){var o=i.getSelectionRange(),u=o.isEmpty();(u||s==1)&&i.selection.moveToPosition(n),s==2&&(i.textInput.onContextMenu(e.domEvent),r.isMozilla||e.preventDefault());return}this.mousedownEvent.time=Date.now();if(t&&!i.isFocused()){i.focus();if(this.$focusTimeout&&!this.$clickSelection&&!i.inMultiSelectMode){this.setState("focusWait"),this.captureMouse(e);return}}return this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;if(!this.mousedownEvent)return;this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select")},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(r==-1)e=this.$clickSelection.end;else if(r==1)e=this.$clickSelection.start;else{var i=a(this.$clickSelection,n);n=i.cursor,e=i.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),i=n.selection[e](r.row,r.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(i.start),o=this.$clickSelection.comparePoint(i.end);if(s==-1&&o<=0){t=this.$clickSelection.end;if(i.end.row!=r.row||i.end.column!=r.column)r=i.start}else if(o==1&&s>=0){t=this.$clickSelection.start;if(i.start.row!=r.row||i.start.column!=r.column)r=i.end}else if(s==-1&&o==1)r=i.end,t=i.start;else{var u=a(this.$clickSelection,r);r=u.cursor,t=u.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(r),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(e>i||t-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,r=n.session,i=r.getBracketRange(t);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var r=n.getSelectionRange();r.isMultiLine()&&r.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(r.start.row),this.$clickSelection.end=n.selection.getLineRange(r.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(e.getAccelKey())return;e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,r=e.domEvent.timeStamp,i=r-n.t,o=i?e.wheelX/i:n.vx,u=i?e.wheelY/i:n.vy;i<s&&(o=(o+n.vx)/2,u=(u+n.vy)/2);var a=Math.abs(o/u),f=!1;a>=1&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(f=!0),a<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(f=!0);if(f)n.allowed=r;else if(r-n.allowed<s){var l=Math.abs(o)<=1.5*Math.abs(n.vx)&&Math.abs(u)<=1.5*Math.abs(n.vy);l?(f=!0,n.allowed=r):n.allowed=0}n.t=r,n.vx=o,n.vy=u;if(f)return t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()}}).call(o.prototype),t.DefaultHandlers=o}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,n){"use strict";function s(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}var r=e("./lib/oop"),i=e("./lib/dom");(function(){this.$init=function(){return this.$element=i.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){this.getElement().textContent=e},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){i.addCssClass(this.getElement(),e)},this.show=function(e,t,n){e!=null&&this.setText(e),t!=null&&n!=null&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(s.prototype),t.Tooltip=s}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,n){"use strict";function u(e){function l(){var r=u.getDocumentPosition().row,s=n.$annotations[r];if(!s)return c();var o=t.session.getLength();if(r==o){var a=t.renderer.pixelToScreenCoordinates(0,u.y).row,l=u.$pos;if(a>t.session.documentToScreenRow(l.row,l.column))return c()}if(f==s)return;f=s.text.join("<br/>"),i.setHtml(f),i.show(),t._signal("showGutterTooltip",i),t.on("mousewheel",c);if(e.$tooltipFollowsMouse)h(u);else{var p=u.domEvent.target,d=p.getBoundingClientRect(),v=i.getElement().style;v.left=d.right+"px",v.top=d.bottom+"px"}}function c(){o&&(o=clearTimeout(o)),f&&(i.hide(),f=null,t._signal("hideGutterTooltip",i),t.off("mousewheel",c))}function h(e){i.setPosition(e.x,e.y)}var t=e.editor,n=t.renderer.$gutterLayer,i=new a(t.container);e.editor.setDefaultHandler("guttermousedown",function(r){if(!t.isFocused()||r.getButton()!=0)return;var i=n.getRegion(r);if(i=="foldWidgets")return;var s=r.getDocumentPosition().row,o=t.session.selection;if(r.getShiftKey())o.selectTo(s,0);else{if(r.domEvent.detail==2)return t.selectAll(),r.preventDefault();e.$clickSelection=t.selection.getLineRange(s)}return e.setState("selectByLines"),e.captureMouse(r),r.preventDefault()});var o,u,f;e.editor.setDefaultHandler("guttermousemove",function(t){var n=t.domEvent.target||t.domEvent.srcElement;if(r.hasCssClass(n,"ace_fold-widget"))return c();f&&e.$tooltipFollowsMouse&&h(t),u=t;if(o)return;o=setTimeout(function(){o=null,u&&!e.isMousePressed?l():c()},50)}),s.addListener(t.renderer.$gutter,"mouseout",function(e){u=null;if(!f||o)return;o=setTimeout(function(){o=null,c()},50)},t),t.on("changeSession",c)}function a(e){o.call(this,e)}var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/event"),o=e("../tooltip").Tooltip;i.inherits(a,o),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),s=this.getHeight();e+=15,t+=15,e+i>n&&(e-=e+i-n),t+s>r&&(t-=20+s),o.prototype.setPosition.call(this,e,t)}}.call(a.prototype),t.GutterHandler=u}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var e=this.editor,t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=t.contains(n.row,n.column)}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(s.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";function f(e){function T(e,n){var r=Date.now(),i=!n||e.row!=n.row,s=!n||e.column!=n.column;if(!S||i||s)t.moveCursorToPosition(e),S=r,x={x:p,y:d};else{var o=l(x.x,x.y,p,d);o>a?S=null:r-S>=u&&(t.renderer.scrollCursorIntoView(),S=null)}}function N(e,n){var r=Date.now(),i=t.renderer.layerConfig.lineHeight,s=t.renderer.layerConfig.characterWidth,u=t.renderer.scroller.getBoundingClientRect(),a={x:{left:p-u.left,right:u.right-p},y:{top:d-u.top,bottom:u.bottom-d}},f=Math.min(a.x.left,a.x.right),l=Math.min(a.y.top,a.y.bottom),c={row:e.row,column:e.column};f/s<=2&&(c.column+=a.x.left<a.x.right?-3:2),l/i<=1&&(c.row+=a.y.top<a.y.bottom?-1:1);var h=e.row!=c.row,v=e.column!=c.column,m=!n||e.row!=n.row;h||v&&!m?E?r-E>=o&&t.renderer.scrollCursorIntoView(c):E=r:E=null}function C(){var e=g;g=t.renderer.screenToTextCoordinates(p,d),T(g,e),N(g,e)}function k(){m=t.selection.toOrientedRange(),h=t.session.addMarker(m,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(v),C(),v=setInterval(C,20),y=0,i.addListener(document,"mousemove",O)}function L(){clearInterval(v),t.session.removeMarker(h),h=null,t.selection.fromOrientedRange(m),t.isFocused()&&!w&&t.$resetCursorStyle(),m=null,g=null,y=0,E=null,S=null,i.removeListener(document,"mousemove",O)}function O(){A==null&&(A=setTimeout(function(){A!=null&&h&&L()},20))}function M(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return e=="text/plain"||e=="Text"})}function _(e){var t=["copy","copymove","all","uninitialized"],n=["move","copymove","linkmove","all","uninitialized"],r=s.isMac?e.altKey:e.ctrlKey,i="uninitialized";try{i=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return r&&t.indexOf(i)>=0?o="copy":n.indexOf(i)>=0?o="move":t.indexOf(i)>=0&&(o="copy"),o}var t=e.editor,n=r.createElement("div");n.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",n.textContent="\u00a0";var f=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];f.forEach(function(t){e[t]=this[t]},this),t.on("mousedown",this.onMouseDown.bind(e));var c=t.container,h,p,d,v,m,g,y=0,b,w,E,S,x;this.onDragStart=function(e){if(this.cancelDrag||!c.draggable){var r=this;return setTimeout(function(){r.startSelect(),r.captureMouse(e)},0),e.preventDefault()}m=t.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=t.getReadOnly()?"copy":"copyMove",t.container.appendChild(n),i.setDragImage&&i.setDragImage(n,0,0),setTimeout(function(){t.container.removeChild(n)}),i.clearData(),i.setData("Text",t.session.getTextRange()),w=!0,this.setState("drag")},this.onDragEnd=function(e){c.draggable=!1,w=!1,this.setState(null);if(!t.getReadOnly()){var n=e.dataTransfer.dropEffect;!b&&n=="move"&&t.session.remove(t.getSelectionRange()),t.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(t.getReadOnly()||!M(e.dataTransfer))return;return p=e.clientX,d=e.clientY,h||k(),y++,e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)},this.onDragOver=function(e){if(t.getReadOnly()||!M(e.dataTransfer))return;return p=e.clientX,d=e.clientY,h||(k(),y++),A!==null&&(A=null),e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)},this.onDragLeave=function(e){y--;if(y<=0&&h)return L(),b=null,i.preventDefault(e)},this.onDrop=function(e){if(!g)return;var n=e.dataTransfer;if(w)switch(b){case"move":m.contains(g.row,g.column)?m={start:g,end:g}:m=t.moveText(m,g);break;case"copy":m=t.moveText(m,g,!0)}else{var r=n.getData("Text");m={start:g,end:t.session.insert(g,r)},t.focus(),b=null}return L(),i.preventDefault(e)},i.addListener(c,"dragstart",this.onDragStart.bind(e),t),i.addListener(c,"dragend",this.onDragEnd.bind(e),t),i.addListener(c,"dragenter",this.onDragEnter.bind(e),t),i.addListener(c,"dragover",this.onDragOver.bind(e),t),i.addListener(c,"dragleave",this.onDragLeave.bind(e),t),i.addListener(c,"drop",this.onDrop.bind(e),t);var A=null}function l(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}var r=e("../lib/dom"),i=e("../lib/event"),s=e("../lib/useragent"),o=200,u=200,a=5;(function(){this.dragWait=function(){var e=Date.now()-this.mousedownEvent.time;e>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var e=this.editor.container;e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor,t=e.container;t.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var n=s.isWin?"default":"move";e.renderer.setCursorStyle(n),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;if(s.isIE&&this.state=="dragReady"){var n=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>3&&t.dragDrop()}if(this.state==="dragWait"){var n=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(e){if(!this.$dragEnabled)return;this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),r=e.getButton(),i=e.domEvent.detail||1;if(i===1&&r===0&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=e.domEvent.target||e.domEvent.srcElement;"unselectable"in o&&(o.unselectable="on");if(t.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;var u=t.container;u.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}).call(f.prototype),t.DragdropHandler=f}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,n){"use strict";var r=e("./mouse_event").MouseEvent,i=e("../lib/event"),s=e("../lib/dom");t.addTouchListeners=function(e,t){function b(){var e=window.navigator&&window.navigator.clipboard,r=!1,i=function(){var n=t.getCopyText(),i=t.session.getUndoManager().hasUndo();y.replaceChild(s.buildDom(r?["span",!n&&["span",{"class":"ace_mobile-button",action:"selectall"},"Select All"],n&&["span",{"class":"ace_mobile-button",action:"copy"},"Copy"],n&&["span",{"class":"ace_mobile-button",action:"cut"},"Cut"],e&&["span",{"class":"ace_mobile-button",action:"paste"},"Paste"],i&&["span",{"class":"ace_mobile-button",action:"undo"},"Undo"],["span",{"class":"ace_mobile-button",action:"find"},"Find"],["span",{"class":"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),y.firstChild)},o=function(n){var s=n.target.getAttribute("action");if(s=="more"||!r)return r=!r,i();if(s=="paste")e.readText().then(function(e){t.execCommand(s,e)});else if(s){if(s=="cut"||s=="copy")e?e.writeText(t.getCopyText()):document.execCommand("copy");t.execCommand(s)}y.firstChild.style.display="none",r=!1,s!="openCommandPallete"&&t.focus()};y=s.buildDom(["div",{"class":"ace_mobile-menu",ontouchstart:function(e){n="menu",e.stopPropagation(),e.preventDefault(),t.textInput.focus()},ontouchend:function(e){e.stopPropagation(),e.preventDefault(),o(e)},onclick:o},["span"],["span",{"class":"ace_mobile-button",action:"more"},"..."]],t.container)}function w(){y||b();var e=t.selection.cursor,n=t.renderer.textToScreenCoordinates(e.row,e.column),r=t.renderer.textToScreenCoordinates(0,0).pageX,i=t.renderer.scrollLeft,s=t.container.getBoundingClientRect();y.style.top=n.pageY-s.top-3+"px",n.pageX-s.left<s.width-70?(y.style.left="",y.style.right="10px"):(y.style.right="",y.style.left=r+i-s.left+"px"),y.style.display="",y.firstChild.style.display="none",t.on("input",E)}function E(e){y&&(y.style.display="none"),t.off("input",E)}function S(){l=null,clearTimeout(l);var e=t.selection.getRange(),r=e.contains(p.row,p.column);if(e.isEmpty()||!r)t.selection.moveToPosition(p),t.selection.selectWord();n="wait",w()}function x(){l=null,clearTimeout(l),t.selection.moveToPosition(p);var e=d>=2?t.selection.getLineRange(p.row):t.session.getBracketRange(p);e&&!e.isEmpty()?t.selection.setRange(e):t.selection.selectWord(),n="wait"}function T(){h+=60,c=setInterval(function(){h--<=0&&(clearInterval(c),c=null),Math.abs(v)<.01&&(v=0),Math.abs(m)<.01&&(m=0),h<20&&(v=.9*v),h<20&&(m=.9*m);var e=t.session.getScrollTop();t.renderer.scrollBy(10*v,10*m),e==t.session.getScrollTop()&&(h=0)},10)}var n="scroll",o,u,a,f,l,c,h=0,p,d=0,v=0,m=0,g,y;i.addListener(e,"contextmenu",function(e){if(!g)return;var n=t.textInput.getElement();n.focus()},t),i.addListener(e,"touchstart",function(e){var i=e.touches;if(l||i.length>1){clearTimeout(l),l=null,a=-1,n="zoom";return}g=t.$mouseHandler.isMousePressed=!0;var s=t.renderer.layerConfig.lineHeight,c=t.renderer.layerConfig.lineHeight,y=e.timeStamp;f=y;var b=i[0],w=b.clientX,E=b.clientY;Math.abs(o-w)+Math.abs(u-E)>s&&(a=-1),o=e.clientX=w,u=e.clientY=E,v=m=0;var T=new r(e,t);p=T.getDocumentPosition();if(y-a<500&&i.length==1&&!h)d++,e.preventDefault(),e.button=0,x();else{d=0;var N=t.selection.cursor,C=t.selection.isEmpty()?N:t.selection.anchor,k=t.renderer.$cursorLayer.getPixelPosition(N,!0),L=t.renderer.$cursorLayer.getPixelPosition(C,!0),A=t.renderer.scroller.getBoundingClientRect(),O=t.renderer.layerConfig.offset,M=t.renderer.scrollLeft,_=function(e,t){return e/=c,t=t/s-.75,e*e+t*t};if(e.clientX<A.left){n="zoom";return}var D=_(e.clientX-A.left-k.left+M,e.clientY-A.top-k.top+O),P=_(e.clientX-A.left-L.left+M,e.clientY-A.top-L.top+O);D<3.5&&P<3.5&&(n=D>P?"cursor":"anchor"),P<3.5?n="anchor":D<3.5?n="cursor":n="scroll",l=setTimeout(S,450)}a=y},t),i.addListener(e,"touchend",function(e){g=t.$mouseHandler.isMousePressed=!1,c&&clearInterval(c),n=="zoom"?(n="",h=0):l?(t.selection.moveToPosition(p),h=0,w()):n=="scroll"?(T(),E()):w(),clearTimeout(l),l=null},t),i.addListener(e,"touchmove",function(e){l&&(clearTimeout(l),l=null);var i=e.touches;if(i.length>1||n=="zoom")return;var s=i[0],a=o-s.clientX,c=u-s.clientY;if(n=="wait"){if(!(a*a+c*c>4))return e.preventDefault();n="cursor"}o=s.clientX,u=s.clientY,e.clientX=s.clientX,e.clientY=s.clientY;var h=e.timeStamp,p=h-f;f=h;if(n=="scroll"){var d=new r(e,t);d.speed=1,d.wheelX=a,d.wheelY=c,10*Math.abs(a)<Math.abs(c)&&(a=0),10*Math.abs(c)<Math.abs(a)&&(c=0),p!=0&&(v=a/p,m=c/p),t._emit("mousewheel",d),d.propagationStopped||(v=m=0)}else{var g=new r(e,t),y=g.getDocumentPosition();n=="cursor"?t.selection.moveCursorToPosition(y):n=="anchor"&&t.selection.setSelectionAnchor(y.row,y.column),t.renderer.scrollCursorIntoView(y),e.preventDefault()}},t)}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState===4&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=r.getDocumentHead(),i=document.createElement("script");i.src=e,n.appendChild(i),i.onload=i.onreadystatechange=function(e,n){if(n||!i.readyState||i.readyState=="loaded"||i.readyState=="complete")i=i.onload=i.onreadystatechange=null,n||t()}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var r={},i=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(!n.length&&!r)return;if(typeof t!="object"||!t)t={};t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=i),t.preventDefault||(t.preventDefault=s),n=n.slice();for(var o=0;o<n.length;o++){n[o](t,this);if(t.propagationStopped)break}if(r&&!t.defaultPrevented)return r(t,this)},r._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(!n)return;n=n.slice();for(var r=0;r<n.length;r++)n[r](t,this)},r.once=function(e,t){var n=this;this.on(e,function r(){n.off(e,r),t.apply(null,arguments)});if(!t)return new Promise(function(e){t=e})},r.setDefaultHandler=function(e,t){var n=this._defaultHandlers;n||(n=this._defaultHandlers={_disabled_:{}});if(n[e]){var r=n[e],i=n._disabled_[e];i||(n._disabled_[e]=i=[]),i.push(r);var s=i.indexOf(t);s!=-1&&i.splice(s,1)}n[e]=t},r.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(!n)return;var r=n._disabled_[e];if(n[e]==t)r&&this.setDefaultHandler(e,r.pop());else if(r){var i=r.indexOf(t);i!=-1&&r.splice(i,1)}},r.on=r.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),r.indexOf(t)==-1&&r[n?"unshift":"push"](t),t},r.off=r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(!n)return;var r=n.indexOf(t);r!==-1&&n.splice(r,1)},r.removeAllListeners=function(e){e||(this._eventRegistry=this._defaultHandlers=undefined),this._eventRegistry&&(this._eventRegistry[e]=undefined),this._defaultHandlers&&(this._defaultHandlers[e]=undefined)},t.EventEmitter=r}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"no use strict";function o(e){typeof console!="undefined"&&console.warn&&console.warn.apply(console,arguments)}function u(e,t){var n=new Error(e);n.data=t,typeof console=="object"&&console.error&&console.error(n),setTimeout(function(){throw n})}var r=e("./oop"),i=e("./event_emitter").EventEmitter,s={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};if(!e){var n=this.$options;e=Object.keys(n).filter(function(e){return!n[e].hidden})}else Array.isArray(e)||(t=e,e=Object.keys(t));return e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]===t)return;var n=this.$options[e];if(!n)return o('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:o('misspelled option "'+e+'"')}},a=function(){this.$defaultOptions={}};(function(){r.implement(this,i),this.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach(function(t){var r=n[t];typeof r=="string"&&(r={forwardTo:r}),r.name||(r.name=t),e.$options[r.name]=r,"initialValue"in r&&(e["$"+r.name]=r.initialValue)}),r.implement(e,s),this},this.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)})},this.setDefaultValue=function(e,t,n){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][t])break;if(!this.$defaultOptions[e][t])return!1}var r=this.$defaultOptions[e]||(this.$defaultOptions[e]={});r[t]&&(r.forwardTo?this.setDefaultValue(r.forwardTo,t,n):r[t].value=n)},this.setDefaultValues=function(e,t){Object.keys(t).forEach(function(n){this.setDefaultValue(e,n,t[n])},this)},this.warn=o,this.reportError=u}).call(a.prototype),t.AppConfig=a}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/dom","ace/lib/app_config"],function(e,t,n){"no use strict";function c(r){if(!a||!a.document)return;f.packaged=r||e.packaged||n.packaged||a.define&&define.packaged;var i={},s="",o=document.currentScript||document._currentScript,u=o&&o.ownerDocument||document,l=u.getElementsByTagName("script");for(var c=0;c<l.length;c++){var p=l[c],d=p.src||p.getAttribute("src");if(!d)continue;var v=p.attributes;for(var m=0,g=v.length;m<g;m++){var y=v[m];y.name.indexOf("data-ace-")===0&&(i[h(y.name.replace(/^data-ace-/,""))]=y.value)}var b=d.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);b&&(s=b[1])}s&&(i.base=i.base||s,i.packaged=!0),i.basePath=i.base,i.workerPath=i.workerPath||i.base,i.modePath=i.modePath||i.base,i.themePath=i.themePath||i.base,delete i.base;for(var w in i)typeof i[w]!="undefined"&&t.set(w,i[w])}function h(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./lib/net"),o=e("./lib/dom"),u=e("./lib/app_config").AppConfig;n.exports=t=new u;var a=function(){return this||typeof window!="undefined"&&window}(),f={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(e){if(!f.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return f[e]},t.set=function(e,t){if(f.hasOwnProperty(e))f[e]=t;else if(this.setDefaultValue("",e,t)==0)throw new Error("Unknown config key: "+e);e=="useStrictCSP"&&o.useStrictCSP(t)},t.all=function(){return r.copyObject(f)},t.$modes={},t.moduleUrl=function(e,t){if(f.$moduleUrls[e])return f.$moduleUrls[e];var n=e.split("/");t=t||n[n.length-2]||"";var r=t=="snippets"?"/":"-",i=n[n.length-1];if(t=="worker"&&r=="-"){var s=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");i=i.replace(s,"")}(!i||i==t)&&n.length>1&&(i=n[n.length-2]);var o=f[t+"Path"];return o==null?o=f.basePath:r=="/"&&(t=r=""),o&&o.slice(-1)!="/"&&(o+="/"),o+t+r+i+this.get("suffix")},t.setModuleUrl=function(e,t){return f.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,r){var i,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{i=e(n)}catch(u){}if(i&&!t.$loading[n])return r&&r(i);t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(r);if(t.$loading[n].length>1)return;var a=function(){e([n],function(e){t._emit("load.module",{name:n,module:e});var r=t.$loading[n];t.$loading[n]=null,r.forEach(function(t){t&&t(e)})})};if(!t.get("packaged"))return a();s.loadScript(t.moduleUrl(n,o),a),l()};var l=function(){!f.basePath&&!f.workerPath&&!f.modePath&&!f.themePath&&!Object.keys(f.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),l=function(){})};t.init=c,t.version="1.4.14"}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=e("./default_handlers").DefaultHandlers,o=e("./default_gutter_handler").GutterHandler,u=e("./mouse_event").MouseEvent,a=e("./dragdrop_handler").DragdropHandler,f=e("./touch_handler").addTouchListeners,l=e("../config"),c=function(e){var t=this;this.editor=e,new s(this),new o(this),new a(this);var n=function(t){var n=!document.hasFocus||!document.hasFocus()||!e.isFocused()&&document.activeElement==(e.textInput&&e.textInput.getElement());n&&window.focus(),e.focus()},u=e.renderer.getMouseEventTarget();r.addListener(u,"click",this.onMouseEvent.bind(this,"click"),e),r.addListener(u,"mousemove",this.onMouseMove.bind(this,"mousemove"),e),r.addMultiMouseDownListener([u,e.renderer.scrollBarV&&e.renderer.scrollBarV.inner,e.renderer.scrollBarH&&e.renderer.scrollBarH.inner,e.textInput&&e.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",e),r.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"),e),f(e.container,e);var l=e.renderer.$gutter;r.addListener(l,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),e),r.addListener(l,"click",this.onMouseEvent.bind(this,"gutterclick"),e),r.addListener(l,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),e),r.addListener(l,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),e),r.addListener(u,"mousedown",n,e),r.addListener(l,"mousedown",n,e),i.isIE&&e.renderer.scrollBarV&&(r.addListener(e.renderer.scrollBarV.element,"mousedown",n,e),r.addListener(e.renderer.scrollBarH.element,"mousedown",n,e)),e.on("mousemove",function(n){if(t.state||t.$dragDelay||!t.$dragEnabled)return;var r=e.renderer.screenToTextCoordinates(n.x,n.y),i=e.session.selection.getRange(),s=e.renderer;!i.isEmpty()&&i.insideStart(r.row,r.column)?s.setCursorStyle("default"):s.setCursorStyle("")},e)};(function(){this.onMouseEvent=function(e,t){if(!this.editor.session)return;this.editor._emit(e,new u(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;if(!n||!n.length)return;this.editor._emit(e,new u(t,this.editor))},this.onMouseWheel=function(e,t){var n=new u(t,this.editor);n.speed=this.$scrollSpeed*2,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor,s=this.editor.renderer;s.$isMousePressed=!0;var o=this,a=function(e){if(!e)return;if(i.isWebKit&&!e.which&&o.releaseMouse)return o.releaseMouse();o.x=e.clientX,o.y=e.clientY,t&&t(e),o.mouseEvent=new u(e,o.editor),o.$mouseMoved=!0},f=function(e){n.off("beforeEndOperation",c),clearInterval(h),n.session&&l(),o[o.state+"End"]&&o[o.state+"End"](e),o.state="",o.isMousePressed=s.$isMousePressed=!1,s.$keepTextAreaAtCursor&&s.$moveTextAreaToCursor(),o.$onCaptureMouseMove=o.releaseMouse=null,e&&o.onMouseEvent("mouseup",e),n.endOperation()},l=function(){o[o.state]&&o[o.state](),o.$mouseMoved=!1};if(i.isOldIE&&e.domEvent.type=="dblclick")return setTimeout(function(){f(e)});var c=function(e){if(!o.releaseMouse)return;n.curOp.command.name&&n.curOp.selectionChanged&&(o[o.state+"End"]&&o[o.state+"End"](),o.state="",o.releaseMouse())};n.on("beforeEndOperation",c),n.startOperation({command:{name:"mouse"}}),o.$onCaptureMouseMove=a,o.releaseMouse=r.capture(this.editor.container,a,f);var h=setInterval(l,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){if(t&&t.domEvent&&t.domEvent.type!="contextmenu")return;this.editor.off("nativecontextmenu",e),t&&t.domEvent&&r.stopEvent(t.domEvent)}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}).call(c.prototype),l.defineOptions(c.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:i.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=c}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";function i(e){e.on("click",function(t){var n=t.getDocumentPosition(),i=e.session,s=i.getFoldAt(n.row,n.column,1);s&&(t.getAccelKey()?i.removeFold(s):i.expandFold(s),t.stop());var o=t.domEvent&&t.domEvent.target;o&&r.hasCssClass(o,"ace_inline_button")&&r.hasCssClass(o,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),e.renderer.scrollCursorIntoView())}),e.on("gutterclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if(n=="foldWidgets"){var r=t.getDocumentPosition().row,i=e.session;i.foldWidgets&&i.foldWidgets[r]&&e.session.onFoldWidgetClick(r,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if(n=="foldWidgets"){var r=t.getDocumentPosition().row,i=e.session,s=i.getParentFoldRangeData(r,!0),o=s.range||s.firstRange;if(o){r=o.start.row;var u=i.getFoldAt(r,i.getLine(r).length,1);u?i.removeFold(u):(i.addFold("...",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}})}var r=e("../lib/dom");t.FoldHandler=i}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var r=e("../lib/keys"),i=e("../lib/event"),s=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]==e)return;while(t[t.length-1]&&t[t.length-1]!=this.$defaultHandler)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)},this.addKeyboardHandler=function(e,t){if(!e)return;typeof e=="function"&&!e.handleKeyboard&&(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);n!=-1&&this.$handlers.splice(n,1),t==undefined?this.$handlers.push(e):this.$handlers.splice(t,0,e),n==-1&&e.attach&&e.attach(this.$editor)},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return t==-1?!1:(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(t,e)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,n,r){var s,o=!1,u=this.$editor.commands;for(var a=this.$handlers.length;a--;){s=this.$handlers[a].handleKeyboard(this.$data,e,t,n,r);if(!s||!s.command)continue;s.command=="null"?o=!0:o=u.exec(s.command,this.$editor,s.args,r),o&&r&&e!=-1&&s.passEvent!=1&&s.command.passEvent!=1&&i.stopEvent(r);if(o)break}return!o&&e==-1&&(s={command:"insertstring"},o=u.exec("insertstring",this.$editor,t)),o&&this.$editor._signal&&this.$editor._signal("keyboardActivity",s),o},this.onCommandKey=function(e,t,n){var i=r.keyCodeToString(n);return this.$callKeyboardHandlers(t,i,n,e)},this.onTextInput=function(e){return this.$callKeyboardHandlers(-1,e)}}).call(s.prototype),t.KeyBinding=s}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";function F(e,t,n,r){var i=s?d:p,c=null,h=null,v=null,m=0,g=null,y=null,b=-1,w=null,E=null,T=[];if(!r)for(w=0,r=[];w<n;w++)r[w]=R(e[w]);o=s,u=!1,a=!1,f=!1,l=!1;for(E=0;E<n;E++){c=m,T[E]=h=q(e,r,T,E),m=i[c][h],g=m&240,m&=15,t[E]=v=i[m][5];if(g>0)if(g==16){for(w=b;w<E;w++)t[w]=1;b=-1}else b=-1;y=i[m][6];if(y)b==-1&&(b=E);else if(b>-1){for(w=b;w<E;w++)t[w]=v;b=-1}r[E]==S&&(t[E]=0),o|=v}if(l)for(w=0;w<n;w++)if(r[w]==x){t[w]=s;for(var C=w-1;C>=0;C--){if(r[C]!=N)break;t[C]=s}}}function I(e,t,n){if(o<e)return;if(e==1&&s==m&&!f){n.reverse();return}var r=n.length,i=0,u,a,l,c;while(i<r){if(t[i]>=e){u=i+1;while(u<r&&t[u]>=e)u++;for(a=i,l=u-1;a<l;a++,l--)c=n[a],n[a]=n[l],n[l]=c;i=u}i++}}function q(e,t,n,r){var i=t[r],o,c,h,p;switch(i){case g:case y:u=!1;case E:case w:return i;case b:return u?w:b;case T:return u=!0,a=!0,y;case N:return E;case C:if(r<1||r+1>=t.length||(o=n[r-1])!=b&&o!=w||(c=t[r+1])!=b&&c!=w)return E;return u&&(c=w),c==o?c:E;case k:o=r>0?n[r-1]:S;if(o==b&&r+1<t.length&&t[r+1]==b)return b;return E;case L:if(r>0&&n[r-1]==b)return b;if(u)return E;p=r+1,h=t.length;while(p<h&&t[p]==L)p++;if(p<h&&t[p]==b)return b;return E;case A:h=t.length,p=r+1;while(p<h&&t[p]==A)p++;if(p<h){var d=e[r],v=d>=1425&&d<=2303||d==64286;o=t[p];if(v&&(o==y||o==T))return y}if(r<1||(o=t[r-1])==S)return E;return n[r-1];case S:return u=!1,f=!0,s;case x:return l=!0,E;case O:case M:case D:case P:case _:u=!1;case H:return E}}function R(e){var t=e.charCodeAt(0),n=t>>8;return n==0?t>191?g:B[t]:n==5?/[\u0591-\u05f4]/.test(e)?y:g:n==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?A:/[\u0660-\u0669\u066b-\u066c]/.test(e)?w:t==1642?L:/[\u06f0-\u06f9]/.test(e)?b:T:n==32&&t<=8287?j[t&255]:n==254?t>=65136?T:E:E}function U(e){return e>="\u064b"&&e<="\u0655"}var r=["\u0621","\u0641"],i=["\u063a","\u064a"],s=0,o=0,u=!1,a=!1,f=!1,l=!1,c=!1,h=!1,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v=0,m=1,g=0,y=1,b=2,w=3,E=4,S=5,x=6,T=7,N=8,C=9,k=10,L=11,A=12,O=13,M=14,_=15,D=16,P=17,H=18,B=[H,H,H,H,H,H,H,H,H,x,S,x,N,S,H,H,H,H,H,H,H,H,H,H,H,H,H,H,S,S,S,x,N,E,E,L,L,L,E,E,E,E,E,k,C,k,C,C,b,b,b,b,b,b,b,b,b,b,C,E,E,E,E,E,E,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,E,E,E,E,E,E,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,E,E,E,E,H,H,H,H,H,H,S,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,C,E,L,L,L,L,E,E,E,E,g,E,E,H,E,E,L,L,b,b,E,g,E,E,E,b,g,E,E,E,E,E],j=[N,N,N,N,N,N,N,N,N,N,N,H,H,H,g,y,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,N,S,O,M,_,D,P,C,L,L,L,L,L,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,C,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,N];t.L=g,t.R=y,t.EN=b,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\u00b7",t.doBidiReorder=function(e,n,r){if(e.length<2)return{};var i=e.split(""),o=new Array(i.length),u=new Array(i.length),a=[];s=r?m:v,F(i,a,i.length,n);for(var f=0;f<o.length;o[f]=f,f++);I(2,a,o),I(1,a,o);for(var f=0;f<o.length-1;f++)n[f]===w?a[f]=t.AN:a[f]===y&&(n[f]>T&&n[f]<O||n[f]===E||n[f]===H)?a[f]=t.ON_R:f>0&&i[f-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(i[f])&&(a[f-1]=a[f]=t.R_H,f++);i[i.length-1]===t.DOT&&(a[i.length-1]=t.B),i[0]==="\u202b"&&(a[0]=t.RLE);for(var f=0;f<o.length;f++)u[f]=a[o[f]];return{logicalFromVisual:o,bidiLevels:u}},t.hasBidiCharacters=function(e,t){var n=!1;for(var r=0;r<e.length;r++)t[r]=R(e.charAt(r)),!n&&(t[r]==y||t[r]==T||t[r]==w)&&(n=!0);return n},t.getVisualFromLogicalIdx=function(e,t){for(var n=0;n<t.logicalFromVisual.length;n++)if(t.logicalFromVisual[n]==e)return n;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var r=e("./lib/bidiutil"),i=e("./lib/lang"),s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,o=function(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=r,this.charWidths=[],this.EOL="\u00ac",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\u00b6",this.RLE="\u202b",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=s.test(e.getValue())};(function(){this.isBidiRow=function(e,t,n){return this.seenBidi?(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,n),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},this.onChange=function(e){this.seenBidi?this.currentRow=null:e.action=="insert"&&s.test(e.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n=this.session.$getRowCacheIndex(t,this.currentRow);n>=0&&(e=this.session.$docRowCache[n])}return e},this.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n,r=this.session.$getRowCacheIndex(t,this.currentRow);while(this.currentRow-e>0){n=this.session.$getRowCacheIndex(t,this.currentRow-e-1);if(n!==r)break;r=n,e++}}else e=this.currentRow;return e},this.updateRowLine=function(e,t){e===undefined&&(e=this.getDocumentRow());var n=e===this.session.getLength()-1,s=n?this.EOF:this.EOL;this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE;if(this.session.$useWrapMode){var o=this.session.$wrapData[e];o&&(t===undefined&&(t=this.getSplitIndex()),t>0&&o.length?(this.wrapIndent=o.indent,this.wrapOffset=this.wrapIndent*this.charWidths[r.L],this.line=t<o.length?this.line.substring(o[t-1],o[t]):this.line.substring(o[o.length-1])):this.line=this.line.substring(0,o[t])),t==o.length&&(this.line+=this.showInvisibles?s:r.DOT)}else this.line+=this.showInvisibles?s:r.DOT;var u=this.session,a=0,f;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(e,t){return e==="	"||u.isFullWidth(e.charCodeAt(0))?(f=e==="	"?u.getScreenTabSize(t+a):2,a+=f-1,i.stringRepeat(r.DOT,f)):e}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==r.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var e=[];r.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=r.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(e){if(this.characterWidth===e.$characterSize.width)return;this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,n=e.$measureCharWidth("\u05d4");this.charWidths[r.L]=this.charWidths[r.EN]=this.charWidths[r.ON_R]=t,this.charWidths[r.R]=this.charWidths[r.AN]=n,this.charWidths[r.R_H]=n*.45,this.charWidths[r.B]=this.charWidths[r.RLE]=0,this.currentRow=null},this.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},this.setEolChar=function(e){this.EOL=e},this.setContentWidth=function(e){this.contentWidth=e},this.isRtlLine=function(e){return this.$isRtl?!0:e!=undefined?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir},this.setRtlDirection=function(e,t){var n=e.getCursorPosition();for(var r=e.selection.getSelectionAnchor().row;r<=n.row;r++)!t&&e.session.getLine(r).charAt(0)===e.session.$bidiHandler.RLE?e.session.doc.removeInLine(r,0,1):t&&e.session.getLine(r).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:r},e.session.$bidiHandler.RLE)},this.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,n=e>t?this.session.getOverwrite()?e:e-1:t,i=r.getVisualFromLogicalIdx(n,this.bidiMap),s=this.bidiMap.bidiLevels,o=0;!this.session.getOverwrite()&&e<=t&&s[i]%2!==0&&i++;for(var u=0;u<i;u++)o+=this.charWidths[s[u]];return!this.session.getOverwrite()&&e>t&&s[i]%2===0&&(o+=this.charWidths[s[i]]),this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(o+=this.rtlLineOffset),o},this.getSelections=function(e,t){var n=this.bidiMap,r=n.bidiLevels,i,s=[],o=0,u=Math.min(e,t)-this.wrapIndent,a=Math.max(e,t)-this.wrapIndent,f=!1,l=!1,c=0;this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var h,p=0;p<r.length;p++)h=n.logicalFromVisual[p],i=r[p],f=h>=u&&h<a,f&&!l?c=o:!f&&l&&s.push({left:c,width:o-c}),o+=this.charWidths[i],l=f;f&&p===r.length&&s.push({left:c,width:o-c});if(this.isRtlDir)for(var d=0;d<s.length;d++)s[d].left+=this.rtlLineOffset;return s},this.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,e=Math.max(e,0),n=0,r=0,i=this.bidiMap.bidiLevels,s=this.charWidths[i[r]];this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);while(e>n+s/2){n+=s;if(r===i.length-1){s=0;break}s=this.charWidths[i[++r]]}return r>0&&i[r-1]%2!==0&&i[r]%2===0?(e<n&&r--,t=this.bidiMap.logicalFromVisual[r]):r>0&&i[r-1]%2===0&&i[r]%2!==0?t=1+(e>n?this.bidiMap.logicalFromVisual[r]:this.bidiMap.logicalFromVisual[r-1]):this.isRtlDir&&r===i.length-1&&s===0&&i[r-1]%2===0||!this.isRtlDir&&r===0&&i[r]%2!==0?t=1+this.bidiMap.logicalFromVisual[r]:(r>0&&i[r-1]%2!==0&&s!==0&&r--,t=this.bidiMap.logicalFromVisual[r]),t===0&&this.isRtlDir&&t++,t+this.wrapIndent}}).call(o.prototype),t.BidiHandler=o}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,u=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",function(e){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),!t.$isEmpty&&!t.$silent&&t._emit("changeSelection"),!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column&&(t.$desiredColumn=null)}),this.anchor.on("change",function(){t.$anchorChanged=!0,!t.$isEmpty&&!t.$silent&&t._emit("changeSelection")})};(function(){r.implement(this,s),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.$isEmpty?o.fromPoints(t,t):this.isBackwards()?o.fromPoints(t,e):o.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(e,t){var n=t?e.end:e.start,r=t?e.start:e.end;this.$setSelection(n.row,n.column,r.row,r.column)},this.$setSelection=function(e,t,n,r){if(this.$silent)return;var i=this.$isEmpty,s=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(n,r),this.$isEmpty=!o.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||i!=this.$isEmpty||s)&&this._emit("changeSelection")},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(typeof t=="undefined"){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n=typeof e=="number"?e:this.lead.row,r,i=this.session.getFoldLine(n);return i?(n=i.start.row,r=i.end.row):r=n,t===!0?new o(n,0,r,this.session.getLine(r).length):new o(n,0,r+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(e,t,n){var r=e.column,i=e.column+t;return n<0&&(r=e.column-t,i=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(r,i).split(" ").length-1==t},this.moveCursorLeft=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(e.column===0)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(e,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize(),e=this.lead;this.wouldMoveIntoSoftTab(e,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(n,0),i=this.session.getDisplayLine(e,null,r.row,r.column),s=i.match(/^\s*/);s[0].length!=t&&!this.session.$useEmacsStyleLineStart&&(r.column+=s[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var r=n.search(/\s+$/);r>0&&(t.column=r)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var i=this.session.getFoldAt(e,t,1);if(i){this.moveCursorTo(i.end.row,i.end.column);return}this.session.nonTokenRe.exec(r)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(t));if(t>=n.length){this.moveCursorTo(e,n.length),this.moveCursorRight(),e<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(r)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)},this.moveCursorLongWordLeft=function(){var e=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(e,t,-1)){this.moveCursorTo(n.start.row,n.start.column);return}var r=this.session.getFoldStringAt(e,t,-1);r==null&&(r=this.doc.getLine(e).substring(0,t));var s=i.stringReverse(r);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(s)&&(t-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0);if(t<=0){this.moveCursorTo(e,0),this.moveCursorLeft(),e>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(s)&&(t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)},this.$shortWordEndIndex=function(e){var t=0,n,r=/\s/,i=this.session.tokenRe;i.lastIndex=0;if(this.session.tokenRe.exec(e))t=this.session.tokenRe.lastIndex;else{while((n=e[t])&&r.test(n))t++;if(t<1){i.lastIndex=0;while((n=e[t])&&!i.test(n)){i.lastIndex=0,t++;if(r.test(n)){if(t>2){t--;break}while((n=e[t])&&r.test(n))t++;if(t>2)break}}}}return i.lastIndex=0,t},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i=this.session.getFoldAt(e,t,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(t==n.length){var s=this.doc.getLength();do e++,r=this.doc.getLine(e);while(e<s&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),t=0}var o=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+o)},this.moveCursorShortWordLeft=function(){var e=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(n.start.row,n.start.column);var r=this.session.getLine(e).substring(0,t);if(t===0){do e--,r=this.doc.getLine(e);while(e>0&&/^\s*$/.test(r));t=r.length,/\s+$/.test(r)||(r="")}var s=i.stringReverse(r),o=this.$shortWordEndIndex(s);return this.moveCursorTo(e,t-o)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n=this.session.documentToScreenPosition(this.lead.row,this.lead.column),r;t===0&&(e!==0&&(this.session.$bidiHandler.isBidiRow(n.row,this.lead.row)?(r=this.session.$bidiHandler.getPosLeft(n.column),n.column=Math.round(r/this.session.$bidiHandler.charWidths[0])):r=n.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);if(e!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var i=this.session.lineWidgets[this.lead.row];e<0?e-=i.rowsAbove||0:e>0&&(e+=i.rowCount-(i.rowsAbove||0))}var s=this.session.screenToDocumentPosition(n.row+e,n.column,r);e!==0&&t===0&&s.row===this.lead.row&&s.column===this.lead.column,this.moveCursorTo(s.row,s.column+t,t===0)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0;var i=this.session.getLine(e);/[\uDC00-\uDFFF]/.test(i.charAt(t))&&i.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach()},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var n=this.getCursor();return o.fromPoints(t,n)}catch(r){return o.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t});else{var e=this.getRange();e.isBackwards=this.isBackwards()}return e},this.fromJSON=function(e){if(e.start==undefined){if(this.rangeList&&e.length>1){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=o.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(u.prototype),t.Selection=u}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(e,t,n){"use strict";var r=e("./config"),i=2e3,s=function(e){this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){var n=this.states[t],r=[],i=0,s=this.matchMappings[t]={defaultToken:"text"},o="g",u=[];for(var a=0;a<n.length;a++){var f=n[a];f.defaultToken&&(s.defaultToken=f.defaultToken),f.caseInsensitive&&(o="gi");if(f.regex==null)continue;f.regex instanceof RegExp&&(f.regex=f.regex.toString().slice(1,-1));var l=f.regex,c=(new RegExp("(?:("+l+")|(.))")).exec("a").length-2;Array.isArray(f.token)?f.token.length==1||c==1?f.token=f.token[0]:c-1!=f.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:f,groupCount:c-1}),f.token=f.token[0]):(f.tokenArray=f.token,f.token=null,f.onMatch=this.$arrayTokens):typeof f.token=="function"&&!f.onMatch&&(c>1?f.onMatch=this.$applyToken:f.onMatch=f.token),c>1&&(/\\\d/.test(f.regex)?l=f.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+i+1)}):(c=1,l=this.removeCapturingGroups(f.regex)),!f.splitRegex&&typeof f.token!="string"&&u.push(f)),s[i]=a,i+=c,r.push(l),f.onMatch||(f.onMatch=null)}r.length||(s[0]=0,r.push("$")),u.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,o)},this),this.regExps[t]=new RegExp("("+r.join(")|(")+")|($)",o)}};(function(){this.$setMaxTokenCount=function(e){i=e|0},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if(typeof n=="string")return[{type:n,value:e}];var r=[];for(var i=0,s=n.length;i<s;i++)t[i]&&(r[r.length]={type:n[i],value:t[i]});return r},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";var n=[],r=this.tokenArray;for(var i=0,s=r.length;i<s;i++)t[i+1]&&(n[n.length]={type:r[i],value:t[i+1]});return n},this.removeCapturingGroups=function(e){var t=e.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(e,t){return t?"(?:":e});return t},this.createSplitterRegexp=function(e,t){if(e.indexOf("(?=")!=-1){var n=0,r=!1,i={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,s,o,u,a){return r?r=u!="]":u?r=!0:o?(n==i.stack&&(i.end=a+1,i.stack=-1),n--):s&&(n++,s.length!=1&&(i.stack=n,i.start=a)),e}),i.end!=null&&/^\)*$/.test(e.substr(i.end))&&(e=e.substring(0,i.start)+e.substr(i.end))}return e.charAt(0)!="^"&&(e="^"+e),e.charAt(e.length-1)!="$"&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&typeof t!="string"){var n=t.slice(0);t=n[0],t==="#tmp"&&(n.shift(),t=n.shift())}else var n=[];var r=t||"start",s=this.states[r];s||(r="start",s=this.states[r]);var o=this.matchMappings[r],u=this.regExps[r];u.lastIndex=0;var a,f=[],l=0,c=0,h={type:null,value:""};while(a=u.exec(e)){var p=o.defaultToken,d=null,v=a[0],m=u.lastIndex;if(m-v.length>l){var g=e.substring(l,m-v.length);h.type==p?h.value+=g:(h.type&&f.push(h),h={type:p,value:g})}for(var y=0;y<a.length-2;y++){if(a[y+1]===undefined)continue;d=s[o[y]],d.onMatch?p=d.onMatch(v,r,n,e):p=d.token,d.next&&(typeof d.next=="string"?r=d.next:r=d.next(r,n),s=this.states[r],s||(this.reportError("state doesn't exist",r),r="start",s=this.states[r]),o=this.matchMappings[r],l=m,u=this.regExps[r],u.lastIndex=m),d.consumeLineEnd&&(l=m);break}if(v)if(typeof p=="string")!!d&&d.merge===!1||h.type!==p?(h.type&&f.push(h),h={type:p,value:v}):h.value+=v;else if(p){h.type&&f.push(h),h={type:null,value:""};for(var y=0;y<p.length;y++)f.push(p[y])}if(l==e.length)break;l=m;if(c++>i){c>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});while(l<e.length)h.type&&f.push(h),h={value:e.substring(l,l+=500),type:"overflow"};r="start",n=[];break}}return h.type&&f.push(h),n.length>1&&n[0]!==r&&n.unshift("#tmp",r),{tokens:f,state:n.length?n:r}},this.reportError=r.reportError}).call(s.prototype),t.Tokenizer=s}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../lib/lang"),i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(!t){for(var n in e)this.$rules[n]=e[n];return}for(var n in e){var r=e[n];for(var i=0;i<r.length;i++){var s=r[i];if(s.next||s.onMatch)typeof s.next=="string"&&s.next.indexOf(t)!==0&&(s.next=t+s.next),s.nextState&&s.nextState.indexOf(t)!==0&&(s.nextState=t+s.nextState)}this.$rules[t+n]=r}},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,i,s){var o=typeof e=="function"?(new e).getRules():e;if(i)for(var u=0;u<i.length;u++)i[u]=t+i[u];else{i=[];for(var a in o)i.push(t+a)}this.addRules(o,t);if(n){var f=Array.prototype[s?"push":"unshift"];for(var u=0;u<i.length;u++)f.apply(this.$rules[i[u]],r.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return(e!="start"||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){function i(s){var o=r[s];o.processed=!0;for(var u=0;u<o.length;u++){var a=o[u],f=null;Array.isArray(a)&&(f=a,a={}),!a.regex&&a.start&&(a.regex=a.start,a.next||(a.next=[]),a.next.push({defaultToken:a.token},{token:a.token+".end",regex:a.end||a.start,next:"pop"}),a.token=a.token+".start",a.push=!0);var l=a.next||a.push;if(l&&Array.isArray(l)){var c=a.stateName;c||(c=a.token,typeof c!="string"&&(c=c[0]||""),r[c]&&(c+=n++)),r[c]=l,a.next=c,i(c)}else l=="pop"&&(a.next=t);a.push&&(a.nextState=a.next||a.push,a.next=e,delete a.push);if(a.rules)for(var h in a.rules)r[h]?r[h].push&&r[h].push.apply(r[h],a.rules[h]):r[h]=a.rules[h];var p=typeof a=="string"?a:a.include;p&&(Array.isArray(p)?f=p.map(function(e){return r[e]}):f=r[p]);if(f){var d=[u,1].concat(f);a.noEscape&&(d=d.filter(function(e){return!e.next})),o.splice.apply(o,d),u--}a.keywordMap&&(a.token=this.createKeywordMapper(a.keywordMap,a.defaultToken||"text",a.caseInsensitive),delete a.defaultToken)}}var n=0,r=this.$rules;Object.keys(r).forEach(i,this)},this.createKeywordMapper=function(e,t,n,r){var i=Object.create(null);return this.$keywordList=[],Object.keys(e).forEach(function(t){var s=e[t],o=s.split(r||"|");for(var u=o.length;u--;){var a=o[u];this.$keywordList.push(a),n&&(a=a.toLowerCase()),i[a]=t}},this),e=null,n?function(e){return i[e.toLowerCase()]||t}:function(e){return i[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(i.prototype),t.TextHighlightRules=i}),ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var r=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(undefined){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if(typeof e=="function")var n=(new e).getBehaviours(t);else var n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(!e)return this.$behaviours;var t={};for(var n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}}).call(r.prototype),t.Behaviour=r}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("./range").Range,i=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){this.$tokenIndex-=1;while(this.$tokenIndex<0){this.$row-=1;if(this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;var e;while(this.$tokenIndex>=this.$rowTokens.length){this.$row+=1,e||(e=this.$session.getLength());if(this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(n!==undefined)return n;n=0;while(t>0)t-=1,n+=e[t].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new r(this.$row,t,this.$row,t+e.value.length)}}).call(i.prototype),t.TokenIterator=i}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../../lib/oop"),i=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,o=e("../../lib/lang"),u=["text","paren.rparen","rparen","paren","punctuation.operator"],a=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],f,l={},c={'"':'"',"'":"'"},h=function(e){var t=-1;e.multiSelect&&(t=e.selection.index,l.rangeCount!=e.multiSelect.rangeCount&&(l={rangeCount:e.multiSelect.rangeCount}));if(l[t])return f=l[t];f=l[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},p=function(e,t,n,r){var i=e.end.row-e.start.row;return{text:n+t+r,selection:[0,e.start.column+1,i,e.end.column+(i?0:1)]}},d=function(e){this.add("braces","insertion",function(t,n,r,i,s){var u=r.getCursorPosition(),a=i.doc.getLine(u.row);if(s=="{"){h(r);var l=r.getSelectionRange(),c=i.doc.getTextRange(l);if(c!==""&&c!=="{"&&r.getWrapBehavioursEnabled())return p(l,c,"{","}");if(d.isSaneInsertion(r,i))return/[\]\}\)]/.test(a[u.column])||r.inMultiSelectMode||e&&e.braces?(d.recordAutoInsert(r,i,"}"),{text:"{}",selection:[1,1]}):(d.recordMaybeInsert(r,i,"{"),{text:"{",selection:[1,1]})}else if(s=="}"){h(r);var v=a.substring(u.column,u.column+1);if(v=="}"){var m=i.$findOpeningBracket("}",{column:u.column+1,row:u.row});if(m!==null&&d.isAutoInsertedClosing(u,a,s))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else{if(s=="\n"||s=="\r\n"){h(r);var g="";d.isMaybeInsertedClosing(u,a)&&(g=o.stringRepeat("}",f.maybeInsertedBrackets),d.clearMaybeInsertedClosing());var v=a.substring(u.column,u.column+1);if(v==="}"){var y=i.findMatchingBracket({row:u.row,column:u.column+1},"}");if(!y)return null;var b=this.$getIndent(i.getLine(y.row))}else{if(!g){d.clearMaybeInsertedClosing();return}var b=this.$getIndent(a)}var w=b+i.getTabString();return{text:"\n"+w+"\n"+b+g,selection:[1,w.length,1,w.length]}}d.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&s=="{"){h(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.end.column,i.end.column+1);if(u=="}")return i.end.column++,i;f.maybeInsertedBrackets--}}),this.add("parens","insertion",function(e,t,n,r,i){if(i=="("){h(n);var s=n.getSelectionRange(),o=r.doc.getTextRange(s);if(o!==""&&n.getWrapBehavioursEnabled())return p(s,o,"(",")");if(d.isSaneInsertion(n,r))return d.recordAutoInsert(n,r,")"),{text:"()",selection:[1,1]}}else if(i==")"){h(n);var u=n.getCursorPosition(),a=r.doc.getLine(u.row),f=a.substring(u.column,u.column+1);if(f==")"){var l=r.$findOpeningBracket(")",{column:u.column+1,row:u.row});if(l!==null&&d.isAutoInsertedClosing(u,a,i))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&s=="("){h(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if(u==")")return i.end.column++,i}}),this.add("brackets","insertion",function(e,t,n,r,i){if(i=="["){h(n);var s=n.getSelectionRange(),o=r.doc.getTextRange(s);if(o!==""&&n.getWrapBehavioursEnabled())return p(s,o,"[","]");if(d.isSaneInsertion(n,r))return d.recordAutoInsert(n,r,"]"),{text:"[]",selection:[1,1]}}else if(i=="]"){h(n);var u=n.getCursorPosition(),a=r.doc.getLine(u.row),f=a.substring(u.column,u.column+1);if(f=="]"){var l=r.$findOpeningBracket("]",{column:u.column+1,row:u.row});if(l!==null&&d.isAutoInsertedClosing(u,a,i))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&s=="["){h(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if(u=="]")return i.end.column++,i}}),this.add("string_dquotes","insertion",function(e,t,n,r,i){var s=r.$mode.$quotes||c;if(i.length==1&&s[i]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(i)!=-1)return;h(n);var o=i,u=n.getSelectionRange(),a=r.doc.getTextRange(u);if(a!==""&&(a.length!=1||!s[a])&&n.getWrapBehavioursEnabled())return p(u,a,o,o);if(!a){var f=n.getCursorPosition(),l=r.doc.getLine(f.row),d=l.substring(f.column-1,f.column),v=l.substring(f.column,f.column+1),m=r.getTokenAt(f.row,f.column),g=r.getTokenAt(f.row,f.column+1);if(d=="\\"&&m&&/escape/.test(m.type))return null;var y=m&&/string|escape/.test(m.type),b=!g||/string|escape/.test(g.type),w;if(v==o)w=y!==b,w&&/string\.end/.test(g.type)&&(w=!1);else{if(y&&!b)return null;if(y&&b)return null;var E=r.$mode.tokenRe;E.lastIndex=0;var S=E.test(d);E.lastIndex=0;var x=E.test(d);if(S||x)return null;if(v&&!/[\s;,.})\]\\]/.test(v))return null;var T=l[f.column-2];if(!(d!=o||T!=o&&!E.test(T)))return null;w=!0}return{text:w?o+o:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(e,t,n,r,i){var s=r.$mode.$quotes||c,o=r.doc.getTextRange(i);if(!i.isMultiLine()&&s.hasOwnProperty(o)){h(n);var u=r.doc.getLine(i.start.row),a=u.substring(i.start.column+1,i.start.column+2);if(a==o)return i.end.column++,i}})};d.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),r=new s(t,n.row,n.column);if(!this.$matchTokenType(r.getCurrentToken()||"text",u)){if(/[)}\]]/.test(e.session.getLine(n.row)[n.column]))return!0;var i=new s(t,n.row,n.column+1);if(!this.$matchTokenType(i.getCurrentToken()||"text",u))return!1}return r.stepForward(),r.getCurrentTokenRow()!==n.row||this.$matchTokenType(r.getCurrentToken()||"text",a)},d.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},d.recordAutoInsert=function(e,t,n){var r=e.getCursorPosition(),i=t.doc.getLine(r.row);this.isAutoInsertedClosing(r,i,f.autoInsertedLineEnd[0])||(f.autoInsertedBrackets=0),f.autoInsertedRow=r.row,f.autoInsertedLineEnd=n+i.substr(r.column),f.autoInsertedBrackets++},d.recordMaybeInsert=function(e,t,n){var r=e.getCursorPosition(),i=t.doc.getLine(r.row);this.isMaybeInsertedClosing(r,i)||(f.maybeInsertedBrackets=0),f.maybeInsertedRow=r.row,f.maybeInsertedLineStart=i.substr(0,r.column)+n,f.maybeInsertedLineEnd=i.substr(r.column),f.maybeInsertedBrackets++},d.isAutoInsertedClosing=function(e,t,n){return f.autoInsertedBrackets>0&&e.row===f.autoInsertedRow&&n===f.autoInsertedLineEnd[0]&&t.substr(e.column)===f.autoInsertedLineEnd},d.isMaybeInsertedClosing=function(e,t){return f.maybeInsertedBrackets>0&&e.row===f.maybeInsertedRow&&t.substr(e.column)===f.maybeInsertedLineEnd&&t.substr(0,e.column)==f.maybeInsertedLineStart},d.popAutoInsertedClosing=function(){f.autoInsertedLineEnd=f.autoInsertedLineEnd.substr(1),f.autoInsertedBrackets--},d.clearMaybeInsertedClosing=function(){f&&(f.maybeInsertedBrackets=0,f.maybeInsertedRow=-1)},r.inherits(d,i),t.CstyleBehaviour=d}),ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";var r=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],i=0,s=[];for(var o=0;o<r.length;o+=2)s.push(i+=r[o]),r[o+1]&&s.push(45,i+=r[o+1]);t.wordChars=String.fromCharCode.apply(null,s)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var r=e("../config"),i=e("../tokenizer").Tokenizer,s=e("./text_highlight_rules").TextHighlightRules,o=e("./behaviour/cstyle").CstyleBehaviour,u=e("../unicode"),a=e("../lib/lang"),f=e("../token_iterator").TokenIterator,l=e("../range").Range,c=function(){this.HighlightRules=s};(function(){this.$defaultBehaviour=new o,this.tokenRe=new RegExp("^["+u.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+u.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new i(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,r){function w(e){for(var t=n;t<=r;t++)e(i.getLine(t),t)}var i=t.doc,s=!0,o=!0,u=Infinity,f=t.getTabSize(),l=!1;if(!this.lineCommentStart){if(!this.blockComment)return!1;var c=this.blockComment.start,h=this.blockComment.end,p=new RegExp("^(\\s*)(?:"+a.escapeRegExp(c)+")"),d=new RegExp("(?:"+a.escapeRegExp(h)+")\\s*$"),v=function(e,t){if(g(e,t))return;if(!s||/\S/.test(e))i.insertInLine({row:t,column:e.length},h),i.insertInLine({row:t,column:u},c)},m=function(e,t){var n;(n=e.match(d))&&i.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(p))&&i.removeInLine(t,n[1].length,n[0].length)},g=function(e,n){if(p.test(e))return!0;var r=t.getTokens(n);for(var i=0;i<r.length;i++)if(r[i].type==="comment")return!0}}else{if(Array.isArray(this.lineCommentStart))var p=this.lineCommentStart.map(a.escapeRegExp).join("|"),c=this.lineCommentStart[0];else var p=a.escapeRegExp(this.lineCommentStart),c=this.lineCommentStart;p=new RegExp("^(\\s*)(?:"+p+") ?"),l=t.getUseSoftTabs();var m=function(e,t){var n=e.match(p);if(!n)return;var r=n[1].length,s=n[0].length;!b(e,r,s)&&n[0][s-1]==" "&&s--,i.removeInLine(t,r,s)},y=c+" ",v=function(e,t){if(!s||/\S/.test(e))b(e,u,u)?i.insertInLine({row:t,column:u},y):i.insertInLine({row:t,column:u},c)},g=function(e,t){return p.test(e)},b=function(e,t,n){var r=0;while(t--&&e.charAt(t)==" ")r++;if(r%f!=0)return!1;var r=0;while(e.charAt(n++)==" ")r++;return f>2?r%f!=f-1:r%f==0}}var E=Infinity;w(function(e,t){var n=e.search(/\S/);n!==-1?(n<u&&(u=n),o&&!g(e,t)&&(o=!1)):E>e.length&&(E=e.length)}),u==Infinity&&(u=E,s=!1,o=!1),l&&u%f!=0&&(u=Math.floor(u/f)*f),w(o?m:v)},this.toggleBlockComment=function(e,t,n,r){var i=this.blockComment;if(!i)return;!i.start&&i[0]&&(i=i[0]);var s=new f(t,r.row,r.column),o=s.getCurrentToken(),u=t.selection,a=t.selection.toOrientedRange(),c,h;if(o&&/comment/.test(o.type)){var p,d;while(o&&/comment/.test(o.type)){var v=o.value.indexOf(i.start);if(v!=-1){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;p=new l(m,g,m,g+i.start.length);break}o=s.stepBackward()}var s=new f(t,r.row,r.column),o=s.getCurrentToken();while(o&&/comment/.test(o.type)){var v=o.value.indexOf(i.end);if(v!=-1){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;d=new l(m,g,m,g+i.end.length);break}o=s.stepForward()}d&&t.remove(d),p&&(t.remove(p),c=p.start.row,h=-i.start.length)}else h=i.start.length,c=n.start.row,t.insert(n.end,i.end),t.insert(n.start,i.start);a.start.row==c&&(a.start.column+=h),a.end.row==c&&(a.end.column+=h),t.selection.fromOrientedRange(a)},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var t in e)if(e[t]){var n=e[t],i=n.prototype.$id,s=r.$modes[i];s||(r.$modes[i]=s=new n),r.$modes[t]||(r.$modes[t]=s),this.$embeds.push(t),this.$modes[t]=s}var o=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(var t=0;t<o.length;t++)(function(e){var n=o[t],r=e[n];e[o[t]]=function(){return this.$delegator(n,arguments,r)}})(this)},this.$delegator=function(e,t,n){var r=t[0]||"start";if(typeof r!="string"){if(Array.isArray(r[2])){var i=r[2][r[2].length-1],s=this.$modes[i];if(s)return s[e].apply(s,[r[1]].concat([].slice.call(t,1)))}r=r[0]||"start"}for(var o=0;o<this.$embeds.length;o++){if(!this.$modes[this.$embeds[o]])continue;var u=r.split(this.$embeds[o]);if(!u[0]&&u[1]){t[0]=u[1];var s=this.$modes[this.$embeds[o]];return s[e].apply(s,t)}}var a=n.apply(this,t);return n?a:undefined},this.transformAction=function(e,t,n,r,i){if(this.$behaviour){var s=this.$behaviour.getBehaviours();for(var o in s)if(s[o][t]){var u=s[o][t].apply(this,arguments);if(u)return u}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var r in t){var i=t[r];for(var s=0,o=i.length;s<o;s++)if(typeof i[s].token=="string")/keyword|support|storage/.test(i[s].token)&&n.push(i[s].regex);else if(typeof i[s].token=="object")for(var u=0,a=i[s].token.length;u<a;u++)if(/keyword|support|storage/.test(i[s].token[u])){var r=i[s].regex.match(/\(.+?\)/g)[u];n.push(r.substr(1,r.length-2))}}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,r){var i=this.$keywordList||this.$createKeywordList();return i.map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(c.prototype),t.Mode=c}),ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";function r(e,t){throw console.log("Invalid Delta:",e),"Invalid Delta: "+t}function i(e,t){return t.row>=0&&t.row<e.length&&t.column>=0&&t.column<=e[t.row].length}function s(e,t){t.action!="insert"&&t.action!="remove"&&r(t,"delta.action must be 'insert' or 'remove'"),t.lines instanceof Array||r(t,"delta.lines must be an Array"),(!t.start||!t.end)&&r(t,"delta.start/end must be an present");var n=t.start;i(e,t.start)||r(t,"delta.start must be contained in document");var s=t.end;t.action=="remove"&&!i(e,s)&&r(t,"delta.end must contained in document for 'remove' actions");var o=s.row-n.row,u=s.column-(o==0?n.column:0);(o!=t.lines.length-1||t.lines[o].length!=u)&&r(t,"delta.range must match delta lines")}t.applyDelta=function(e,t,n){var r=t.start.row,i=t.start.column,s=e[r]||"";switch(t.action){case"insert":var o=t.lines;if(o.length===1)e[r]=s.substring(0,i)+t.lines[0]+s.substring(i);else{var u=[r,1].concat(t.lines);e.splice.apply(e,u),e[r]=s.substring(0,i)+e[r],e[r+t.lines.length-1]+=s.substring(i)}break;case"remove":var a=t.end.column,f=t.end.row;r===f?e[r]=s.substring(0,i)+s.substring(a):e.splice(r,f-r+1,s.substring(0,i)+e[f].substring(a))}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),typeof n=="undefined"?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function e(e,t,n){var r=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&r}function t(t,n,r){var i=t.action=="insert",s=(i?1:-1)*(t.end.row-t.start.row),o=(i?1:-1)*(t.end.column-t.start.column),u=t.start,a=i?u:t.end;return e(n,u,r)?{row:n.row,column:n.column}:e(a,n,!r)?{row:n.row+s,column:n.column+(n.row==a.row?o:0)}:{row:u.row,column:u.column}}r.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){if(e.start.row==e.end.row&&e.start.row!=this.row)return;if(e.start.row>this.row)return;var n=t(e,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)},this.setPosition=function(e,t,n){var r;n?r={row:e,column:t}:r=this.$clipPositionToDocument(e,t);if(this.row==r.row&&this.column==r.column)return;var i={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:i,value:r})},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(s.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./apply_delta").applyDelta,s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,u=e("./anchor").Anchor,a=function(e){this.$lines=[""],e.length===0?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){r.implement(this,s),this.setValue=function(e){var t=this.getLength()-1;this.remove(new o(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new u(this,e,t)},"aaa".split(/a/).length===0?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){if(this.$newLineMode===e)return;this.$newLineMode=e,this._signal("changeNewLineMode")},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return e=="\r\n"||e=="\r"||e=="\n"},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{t=this.getLines(e.start.row,e.end.row),t[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),r=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:r,action:"insert",lines:[t]},!0),this.clonePos(r)},this.clippedPos=function(e,t){var n=this.getLength();e===undefined?e=n:e<0?e=0:e>=n&&(e=n-1,t=undefined);var r=this.getLine(e);return t==undefined&&(t=r.length),t=Math.min(Math.max(t,0),r.length),{row:e,column:t}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){e=Math.min(Math.max(e,0),this.getLength());var n=0;e<this.getLength()?(t=t.concat([""]),n=0):(t=[""].concat(t),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),r={row:n.row+t.length-1,column:(t.length==1?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:r,action:"insert",lines:t}),this.clonePos(r)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},this.removeInLine=function(e,t,n){var r=this.clippedPos(e,t),i=this.clippedPos(e,n);return this.applyDelta({start:r,end:i,action:"remove",lines:this.getLinesForRange({start:r,end:i})},!0),this.clonePos(r)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1),t=Math.min(Math.max(0,t),this.getLength()-1);var n=t==this.getLength()-1&&e>0,r=t<this.getLength()-1,i=n?e-1:e,s=n?this.getLine(i).length:0,u=r?t+1:t,a=r?0:this.getLine(u).length,f=new o(i,s,u,a),l=this.$lines.slice(e,t+1);return this.applyDelta({start:f.start,end:f.end,action:"remove",lines:this.getLinesForRange(f)}),l},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){e instanceof o||(e=o.fromPoints(e.start,e.end));if(t.length===0&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);var n;return t?n=this.insert(e.start,t):n=e.start,n},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n=e.action=="insert";if(n?e.lines.length<=1&&!e.lines[0]:!o.comparePoints(e.start,e.end))return;n&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(i(this.$lines,e,t),this._signal("change",e))},this.$safeApplyDelta=function(e){var t=this.$lines.length;(e.action=="remove"&&e.start.row<t&&e.end.row<t||e.action=="insert"&&e.start.row<=t)&&this.applyDelta(e)},this.$splitAndapplyLargeDelta=function(e,t){var n=e.lines,r=n.length-t+1,i=e.start.row,s=e.start.column;for(var o=0,u=0;o<r;o=u){u+=t-1;var a=n.slice(o,u);a.push(""),this.applyDelta({start:this.pos(i+o,s),end:this.pos(i+u,s=0),action:e.action,lines:a},!0)}e.lines=n.slice(o),e.start.row=i+o,e.start.column=s,this.applyDelta(e,!0)},this.revertDelta=function(e){this.$safeApplyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:e.action=="insert"?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length;for(var i=t||0,s=n.length;i<s;i++){e-=n[i].length+r;if(e<0)return{row:i,column:e+n[i].length+r}}return{row:s-1,column:e+n[s-1].length+r}},this.positionToIndex=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=0,s=Math.min(e.row,n.length);for(var o=t||0;o<s;++o)i+=n[o].length+r;return i+e.column}}).call(a.prototype),t.Document=a}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(!n.running)return;var e=new Date,t=n.currentLine,r=-1,i=n.doc,s=t;while(n.lines[t])t++;var o=i.getLength(),u=0;n.running=!1;while(t<o){n.$tokenizeRow(t),r=t;do t++;while(n.lines[t]);u++;if(u%5===0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,r==-1&&(r=t),s<=r&&n.fireUpdateEvent(s,r)}};(function(){r.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(n===0)this.lines[t]=null;else if(e.action=="remove")this.lines.splice(t,n+1,null),this.states.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.lines.splice.apply(this.lines,r),this.states.splice.apply(this.states,r)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],r=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!=r.state+""?(this.states[e]=r.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=r.tokens}}).call(s.prototype),t.BackgroundTokenizer=s}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){if(this.regExp+""==e+"")return;this.regExp=e,this.cache=[]},this.update=function(e,t,n,i){if(!this.regExp)return;var o=i.firstRow,u=i.lastRow;for(var a=o;a<=u;a++){var f=this.cache[a];f==null&&(f=r.getMatchOffsets(n.getLine(a),this.regExp),f.length>this.MAX_RANGES&&(f=f.slice(0,this.MAX_RANGES)),f=f.map(function(e){return new s(a,e.offset,a,e.offset+e.length)}),this.cache[a]=f.length?f:"");for(var l=f.length;l--;)t.drawSingleLineMarker(e,f[l].toScreenRange(n),this.clazz,i)}}}).call(o.prototype),t.SearchHighlight=o}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var r=e("../range").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var r=0,i=this.folds,s,o,u,a=!0;t==null&&(t=this.end.row,n=this.end.column);for(var f=0;f<i.length;f++){s=i[f],o=s.range.compareStart(t,n);if(o==-1){e(null,t,n,r,a);return}u=e(null,s.start.row,s.start.column,r,a),u=!u&&e(s.placeholder,s.start.row,s.start.column,r);if(u||o===0)return;a=!s.sameRow,r=s.end.column}e(null,t,n,r,a)},this.getNextFoldTo=function(e,t){var n,r;for(var i=0;i<this.folds.length;i++){n=this.folds[i],r=n.range.compareEnd(e,t);if(r==-1)return{fold:n,kind:"after"};if(r===0)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var r=this.getNextFoldTo(e,t),i,s;if(r){i=r.fold;if(r.kind=="inside"&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){s=this.folds;var o=s.indexOf(i);o===0&&(this.start.column+=n);for(o;o<s.length;o++){i=s[o],i.start.column+=n;if(!i.sameRow)return;i.end.column+=n}this.end.column+=n}}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||n.kind=="inside")return null;var r=n.fold,s=this.folds,o=this.foldData,u=s.indexOf(r),a=s[u-1];this.end.row=a.end.row,this.end.column=a.end.column,s=s.splice(u,s.length-u);var f=new i(o,s);return o.splice(o.indexOf(this)+1,0,f),f},this.merge=function(e){var t=e.folds;for(var n=0;n<t.length;n++)this.addFold(t[n]);var r=this.foldData;r.splice(r.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){var t=0;for(var n=0;n<this.folds.length;n++){var r=this.folds[n];e-=r.start.column-t;if(e<0)return{row:r.start.row,column:r.start.column+e};e-=r.placeholder.length;if(e<0)return r.start;t=r.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("./range").Range,i=r.comparePoints,s=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=i,this.pointIndex=function(e,t,n){var r=this.ranges;for(var s=n||0;s<r.length;s++){var o=r[s],u=i(e,o.end);if(u>0)continue;var a=i(e,o.start);return u===0?t&&a!==0?-s-2:s:a>0||a===0&&!t?s:-s-1}return-s-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var r=this.pointIndex(e.end,t,n);return r<0?r=-r-1:r++,this.ranges.splice(n,r-n,e)},this.addList=function(e){var t=[];for(var n=e.length;n--;)t.push.apply(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){var e=[],t=this.ranges;t=t.sort(function(e,t){return i(e.start,t.start)});var n=t[0],r;for(var s=1;s<t.length;s++){r=n,n=t[s];var o=i(r.end,n.start);if(o<0)continue;if(o==0&&!r.isEmpty()&&!n.isEmpty())continue;i(r.end,n.end)<0&&(r.end.row=n.end.row,r.end.column=n.end.column),t.splice(s,1),e.push(n),n=r,s--}return this.ranges=t,e},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});r<0&&(r=-r-1);var i=this.pointIndex({row:t,column:0},r);i<0&&(i=-i-1);var s=[];for(var o=r;o<i;o++)s.push(n[o]);return s},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){if(!this.session)return;this.session.removeListener("change",this.onChange),this.session=null},this.$onChange=function(e){var t=e.start,n=e.end,r=t.row,i=n.row,s=this.ranges;for(var o=0,u=s.length;o<u;o++){var a=s[o];if(a.end.row>=r)break}if(e.action=="insert"){var f=i-r,l=-t.column+n.column;for(;o<u;o++){var a=s[o];if(a.start.row>r)break;a.start.row==r&&a.start.column>=t.column&&(a.start.column==t.column&&this.$bias<=0||(a.start.column+=l,a.start.row+=f));if(a.end.row==r&&a.end.column>=t.column){if(a.end.column==t.column&&this.$bias<0)continue;a.end.column==t.column&&l>0&&o<u-1&&a.end.column>a.start.column&&a.end.column==s[o+1].start.column&&(a.end.column-=l),a.end.column+=l,a.end.row+=f}}}else{var f=r-i,l=t.column-n.column;for(;o<u;o++){var a=s[o];if(a.start.row>i)break;if(a.end.row<i&&(r<a.end.row||r==a.end.row&&t.column<a.end.column))a.end.row=r,a.end.column=t.column;else if(a.end.row==i)if(a.end.column<=n.column){if(f||a.end.column>t.column)a.end.column=t.column,a.end.row=t.row}else a.end.column+=l,a.end.row+=f;else a.end.row>i&&(a.end.row+=f);if(a.start.row<i&&(r<a.start.row||r==a.start.row&&t.column<a.start.column))a.start.row=r,a.start.column=t.column;else if(a.start.row==i)if(a.start.column<=n.column){if(f||a.start.column>t.column)a.start.column=t.column,a.start.row=t.row}else a.start.column+=l,a.start.row+=f;else a.start.row>i&&(a.start.row+=f)}}if(f!=0&&o<u)for(;o<u;o++){var a=s[o];a.start.row+=f,a.end.row+=f}}}).call(s.prototype),t.RangeList=s}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],function(e,t,n){"use strict";function o(e,t){e.row-=t.row,e.row==0&&(e.column-=t.column)}function u(e,t){o(e.start,t),o(e.end,t)}function a(e,t){e.row==0&&(e.column+=t.column),e.row+=t.row}function f(e,t){a(e.start,t),a(e.end,t)}var r=e("../range_list").RangeList,i=e("../lib/oop"),s=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};i.inherits(s,r),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new s(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(this.range.isEqual(e))return;u(e,this.start);var t=e.start.row,n=e.start.column;for(var r=0,i=-1;r<this.subFolds.length;r++){i=this.subFolds[r].range.compare(t,n);if(i!=1)break}var s=this.subFolds[r],o=0;if(i==0){if(s.range.containsRange(e))return s.addSubFold(e);o=1}var t=e.range.end.row,n=e.range.end.column;for(var a=r,i=-1;a<this.subFolds.length;a++){i=this.subFolds[a].range.compare(t,n);if(i!=1)break}i==0&&a++;var f=this.subFolds.splice(r,a-r,e),l=i==0?f.length-1:f.length;for(var c=o;c<l;c++)e.addSubFold(f[c]);return e.setFoldLine(this.foldLine),e},this.restoreRange=function(e){return f(e,this.start)}}.call(s.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,n){"use strict";function u(){this.getFoldAt=function(e,t,n){var r=this.getFoldLine(e);if(!r)return null;var i=r.folds;for(var s=0;s<i.length;s++){var o=i[s].range;if(o.contains(e,t)){if(n==1&&o.isEnd(e,t)&&!o.isEmpty())continue;if(n==-1&&o.isStart(e,t)&&!o.isEmpty())continue;return i[s]}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,r=this.$foldData,i=[];t.column+=1,n.column-=1;for(var s=0;s<r.length;s++){var o=r[s].range.compareRange(e);if(o==2)continue;if(o==-2)break;var u=r[s].folds;for(var a=0;a<u.length;a++){var f=u[a];o=f.range.compareRange(e);if(o==-2)break;if(o==2)continue;if(o==42)break;i.push(f)}}return t.column-=1,n.column+=1,i},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else var t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){var e=[],t=this.$foldData;for(var n=0;n<t.length;n++)for(var r=0;r<t[n].folds.length;r++)e.push(t[n].folds[r]);return e},this.getFoldStringAt=function(e,t,n,r){r=r||this.getFoldLine(e);if(!r)return null;var i={end:{column:0}},s,o;for(var u=0;u<r.folds.length;u++){o=r.folds[u];var a=o.range.compareEnd(e,t);if(a==-1){s=this.getLine(o.start.row).substring(i.end.column,o.start.column);break}if(a===0)return null;i=o}return s||(s=this.getLine(o.start.row).substring(i.end.column)),n==-1?s.substring(0,t-i.end.column):n==1?s.substring(t-i.end.column):s},this.getFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),r==-1&&(r=0);for(r;r<n.length;r++){var i=n[r];if(i.start.row<=e&&i.end.row>=e)return i;if(i.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),r==-1&&(r=0);for(r;r<n.length;r++){var i=n[r];if(i.end.row>=e)return i}return null},this.getFoldedRowCount=function(e,t){var n=this.$foldData,r=t-e+1;for(var i=0;i<n.length;i++){var s=n[i],o=s.end.row,u=s.start.row;if(o>=t){u<t&&(u>=e?r-=t-u:r=0);break}o>=e&&(u>=e?r-=o-u:r-=o-e+1)}return r},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var n=this.$foldData,r=!1,o;e instanceof s?o=e:(o=new s(t,e),o.collapseChildren=t.collapseChildren),this.$clipRangeToDocument(o.range);var u=o.start.row,a=o.start.column,f=o.end.row,l=o.end.column,c=this.getFoldAt(u,a,1),h=this.getFoldAt(f,l,-1);if(c&&h==c)return c.addSubFold(o);c&&!c.range.isStart(u,a)&&this.removeFold(c),h&&!h.range.isEnd(f,l)&&this.removeFold(h);var p=this.getFoldsInRange(o.range);p.length>0&&(this.removeFolds(p),o.collapseChildren||p.forEach(function(e){o.addSubFold(e)}));for(var d=0;d<n.length;d++){var v=n[d];if(f==v.start.row){v.addFold(o),r=!0;break}if(u==v.end.row){v.addFold(o),r=!0;if(!o.sameRow){var m=n[d+1];if(m&&m.start.row==f){v.merge(m);break}}break}if(f<=v.start.row)break}return r||(v=this.$addFoldLine(new i(this.$foldData,o))),this.$useWrapMode?this.$updateWrapData(v.start.row,v.start.row):this.$updateRowLengthCache(v.start.row,v.start.row),this.$modified=!0,this._signal("changeFold",{data:o,action:"add"}),o},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,r=t.end.row,i=this.$foldData,s=t.folds;if(s.length==1)i.splice(i.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))s.pop(),t.end.row=s[s.length-1].end.row,t.end.column=s[s.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))s.shift(),t.start.row=s[0].start.row,t.start.column=s[0].start.column;else if(e.sameRow)s.splice(s.indexOf(e),1);else{var o=t.split(e.start.row,e.start.column);s=o.folds,s.shift(),o.start.row=s[0].start.row,o.start.column=s[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){var t=[];for(var n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(t){e.restoreRange(t),this.addFold(t)},this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n,i;if(e==null)n=new r(0,0,this.getLength(),0),t==null&&(t=!0);else if(typeof e=="number")n=new r(e,0,e,this.getLine(e).length);else if("row"in e)n=r.fromPoints(e,e);else{if(Array.isArray(e))return i=[],e.forEach(function(e){i=i.concat(this.unfold(e))},this),i;n=e}i=this.getFoldsInRangeList(n);var s=i;while(i.length==1&&r.comparePoints(i[0].start,n.start)<0&&r.comparePoints(i[0].end,n.end)>0)this.expandFolds(i),i=this.getFoldsInRangeList(n);t!=0?this.removeFolds(i):this.expandFolds(i);if(s.length)return s},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,r,i){r==null&&(r=e.start.row),i==null&&(i=0),t==null&&(t=e.end.row),n==null&&(n=this.getLine(t).length);var s=this.doc,o="";return e.walk(function(e,t,n,u){if(t<r)return;if(t==r){if(n<i)return;u=Math.max(i,u)}e!=null?o+=e:o+=s.getLine(t).substring(u,n)},t,n),o},this.getDisplayLine=function(e,t,n,r){var i=this.getFoldLine(e);if(!i){var s;return s=this.doc.getLine(e),s.substring(r||0,t||s.length)}return this.getFoldDisplayLine(i,e,t,n,r)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var n=t.folds.map(function(e){return e.clone()});return new i(e,n)}),e},this.toggleFold=function(e){var t=this.selection,n=t.getRange(),r,i;if(n.isEmpty()){var s=n.start;r=this.getFoldAt(s.row,s.column);if(r){this.expandFold(r);return}(i=this.findMatchingBracket(s))?n.comparePoint(i)==1?n.end=i:(n.start=i,n.start.column++,n.end.column--):(i=this.findMatchingBracket({row:s.row,column:s.column+1}))?(n.comparePoint(i)==1?n.end=i:n.start=i,n.start.column++):n=this.getCommentFoldRange(s.row,s.column)||n}else{var o=this.getFoldsInRange(n);if(e&&o.length){this.expandFolds(o);return}o.length==1&&(r=o[0])}r||(r=this.getFoldAt(n.start.row,n.start.column));if(r&&r.range.toString()==n.toString()){this.expandFold(r);return}var u="...";if(!n.isMultiLine()){u=this.getTextRange(n);if(u.length<4)return;u=u.trim().substring(0,2)+".."}this.addFold(u,n)},this.getCommentFoldRange=function(e,t,n){var i=new o(this,e,t),s=i.getCurrentToken(),u=s&&s.type;if(s&&/^comment|string/.test(u)){u=u.match(/comment|string/)[0],u=="comment"&&(u+="|doc-start");var a=new RegExp(u),f=new r;if(n!=1){do s=i.stepBackward();while(s&&a.test(s.type));i.stepForward()}f.start.row=i.getCurrentTokenRow(),f.start.column=i.getCurrentTokenColumn()+2,i=new o(this,e,t);if(n!=-1){var l=-1;do{s=i.stepForward();if(l==-1){var c=this.getState(i.$row);a.test(c)||(l=i.$row)}else if(i.$row>l)break}while(s&&a.test(s.type));s=i.stepBackward()}else s=i.getCurrentToken();return f.end.row=i.getCurrentTokenRow(),f.end.column=i.getCurrentTokenColumn()+s.value.length-2,f}},this.foldAll=function(e,t,n,r){n==undefined&&(n=1e5);var i=this.foldWidgets;if(!i)return;t=t||this.getLength(),e=e||0;for(var s=e;s<t;s++){i[s]==null&&(i[s]=this.getFoldWidget(s));if(i[s]!="start")continue;if(r&&!r(s))continue;var o=this.getFoldWidgetRange(s);o&&o.isMultiLine()&&o.end.row<=t&&o.start.row>=e&&(s=o.end.row,o.collapseChildren=n,this.addFold("...",o))}},this.foldToLevel=function(e){this.foldAll();while(e-->0)this.unfold(null,!1)},this.foldAllComments=function(){var e=this;this.foldAll(null,null,null,function(t){var n=e.getTokens(t);for(var r=0;r<n.length;r++){var i=n[r];if(i.type=="text"&&/^\s+$/.test(i.value))continue;return/comment/.test(i.type)?!0:!1}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle==e)return;this.$foldStyle=e,e=="manual"&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)},this.$setFolding=function(e){if(this.$foldMode==e)return;this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation");if(!e||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};var r=e-1,i;while(r>=0){var s=n[r];s==null&&(s=n[r]=this.getFoldWidget(r));if(s=="start"){var o=this.getFoldWidgetRange(r);i||(i=o);if(o&&o.end.row>=e)break}r--}return{range:r!==-1&&o,firstRange:i}},this.onFoldWidgetClick=function(e,t){t=t.domEvent;var n={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey},r=this.$toggleFoldWidget(e,n);if(!r){var i=t.target||t.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(!this.getFoldWidget)return;var n=this.getFoldWidget(e),r=this.getLine(e),i=n==="end"?-1:1,s=this.getFoldAt(e,i===-1?0:r.length,i);if(s)return t.children||t.all?this.removeFold(s):this.expandFold(s),s;var o=this.getFoldWidgetRange(e,!0);if(o&&!o.isMultiLine()){s=this.getFoldAt(o.start.row,o.start.column,1);if(s&&o.isEqual(s.range))return this.removeFold(s),s}if(t.siblings){var u=this.getParentFoldRangeData(e);if(u.range)var a=u.range.start.row+1,f=u.range.end.row;this.foldAll(a,f,t.all?1e4:0)}else t.children?(f=o?o.end.row:this.getLength(),this.foldAll(e+1,f,t.all?1e4:0)):o&&(t.all&&(o.collapseChildren=1e4),this.addFold("...",o));return o},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(n)return;var r=this.getParentFoldRangeData(t,!0);n=r.range||r.firstRange;if(n){t=n.start.row;var i=this.getFoldAt(t,this.getLine(t).length,1);i?this.removeFold(i):this.addFold("...",n)}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(n===0)this.foldWidgets[t]=null;else if(e.action=="remove")this.foldWidgets.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,r)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}var r=e("../range").Range,i=e("./fold_line").FoldLine,s=e("./fold").Fold,o=e("../token_iterator").TokenIterator;t.Folding=u}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";function s(){this.findMatchingBracket=function(e,t){if(e.column==0)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(n=="")return null;var r=n.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e):null},this.getBracketRange=function(e){var t=this.getLine(e.row),n=!0,r,s=t.charAt(e.column-1),o=s&&s.match(/([\(\[\{])|([\)\]\}])/);o||(s=t.charAt(e.column),e={row:e.row,column:e.column+1},o=s&&s.match(/([\(\[\{])|([\)\]\}])/),n=!1);if(!o)return null;if(o[1]){var u=this.$findClosingBracket(o[1],e);if(!u)return null;r=i.fromPoints(e,u),n||(r.end.column++,r.start.column--),r.cursor=r.end}else{var u=this.$findOpeningBracket(o[2],e);if(!u)return null;r=i.fromPoints(u,e),n||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.getMatchingBracketRanges=function(e){var t=this.getLine(e.row),n=t.charAt(e.column-1),r=n&&n.match(/([\(\[\{])|([\)\]\}])/);r||(n=t.charAt(e.column),e={row:e.row,column:e.column+1},r=n&&n.match(/([\(\[\{])|([\)\]\}])/));if(!r)return null;var s=new i(e.row,e.column-1,e.row,e.column),o=r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e);if(!o)return[s];var u=new i(o.row,o.column,o.row,o.column+1);return[s,u]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(!u)return;n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));var a=t.column-o.getCurrentTokenColumn()-2,f=u.value;for(;;){while(a>=0){var l=f.charAt(a);if(l==i){s-=1;if(s==0)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else l==e&&(s+=1);a-=1}do u=o.stepBackward();while(u&&!n.test(u.type));if(u==null)break;f=u.value,a=f.length-1}return null},this.$findClosingBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(!u)return;n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));var a=t.column-o.getCurrentTokenColumn();for(;;){var f=u.value,l=f.length;while(a<l){var c=f.charAt(a);if(c==i){s-=1;if(s==0)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else c==e&&(s+=1);a+=1}do u=o.stepForward();while(u&&!n.test(u.type));if(u==null)break;a=0}return null}}var r=e("../token_iterator").TokenIterator,i=e("../range").Range;t.BracketMatch=s}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./bidihandler").BidiHandler,o=e("./config"),u=e("./lib/event_emitter").EventEmitter,a=e("./selection").Selection,f=e("./mode/text").Mode,l=e("./range").Range,c=e("./document").Document,h=e("./background_tokenizer").BackgroundTokenizer,p=e("./search_highlight").SearchHighlight,d=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++d.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this);if(typeof e!="object"||!e.getLine)e=new c(e);this.setDocument(e),this.selection=new a(this),this.$bidiHandler=new s(this),o.resetOptions(this),this.setMode(t),o._signal("session",this)};d.$uid=0,function(){function m(e){return e<4352?!1:e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510}r.implement(this,u),this.setDocument=function(e){this.doc&&this.doc.off("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e){this.$docRowCache=[],this.$screenRowCache=[];return}var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){var n=0,r=e.length-1;while(n<=r){var i=n+r>>1,s=e[i];if(t>s)n=i+1;else{if(!(t<s))return i;r=i-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:"removeFolds",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n=this.bgTokenizer.getTokens(e),r,i=0;if(t==null){var s=n.length-1;i=this.getLine(e).length}else for(var s=0;s<n.length;s++){i+=n[s].value.length;if(i>=t)break}return r=n[s],r?(r.index=s,r.start=i-r.value.length,r):null},this.setUndoManager=function(e){this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel();if(e){var t=this;e.addSession(this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize===0},this.setNavigateWithinSoftTabs=function(e){this.setOption("navigateWithinSoftTabs",e)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){t===undefined&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,r){var i=this.$markerId++,s={range:e,type:n||"line",renderer:typeof n=="function"?n:null,clazz:t,inFront:!!r,id:i};return r?(this.$frontMarkers[i]=s,this._signal("changeFrontMarker")):(this.$backMarkers[i]=s,this._signal("changeBackMarker")),i},this.addDynamicMarker=function(e,t){if(!e.update)return;var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(!t)return;var n=t.inFront?this.$frontMarkers:this.$backMarkers;delete n[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker")},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new p(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,r){typeof t!="number"&&(n=t,t=e),n||(n="ace_step");var i=new l(e,0,t,Infinity);return i.id=this.addMarker(i,n,"fullLine",r),i},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);t?this.$autoNewLine=t[1]:this.$autoNewLine="\n"},this.getWordRange=function(e,t){var n=this.getLine(e),r=!1;t>0&&(r=!!n.charAt(t-1).match(this.tokenRe)),r||(r=!!n.charAt(t).match(this.tokenRe));if(r)var i=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))var i=/\s/;else var i=this.nonTokenRe;var s=t;if(s>0){do s--;while(s>=0&&n.charAt(s).match(i));s++}var o=t;while(o<n.length&&n.charAt(o).match(i))o++;return new l(e,s,e,o)},this.getAWordRange=function(e,t){var n=this.getWordRange(e,t),r=this.getLine(n.end.row);while(r.charAt(n.end.column).match(/[ \t]/))n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes=o.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&typeof e=="object"){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,r=n.path}else r=e||"ace/mode/text";this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new f);if(this.$modes[r]&&!n){this.$onChangeMode(this.$modes[r]),t&&t();return}this.$modeId=r,o.loadModule(["mode",r],function(e){if(this.$modeId!==r)return t&&t();this.$modes[r]&&!n?this.$onChangeMode(this.$modes[r]):e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[r]=e,e.$id=r),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){t||(this.$modeId=e.$id);if(this.$mode===e)return;var n=this.$mode;this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var r=e.getTokenizer();if(r.on!==undefined){var i=this.onReloadTokenizer.bind(this);r.on("update",i)}if(!this.bgTokenizer){this.bgTokenizer=new h(r);var s=this;this.bgTokenizer.on("update",function(e){s._signal("tokenizerUpdate",e)})}else this.bgTokenizer.setTokenizer(r);this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:n,mode:e}))},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){o.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){if(this.$scrollTop===e||isNaN(e))return;this.$scrollTop=e,this._signal("changeScrollTop",e)},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){if(this.$scrollLeft===e||isNaN(e))return;this.$scrollLeft=e,this._signal("changeScrollLeft",e)},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach(function(t){t&&t.screenWidth>e&&(e=t.screenWidth)}),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){this.$modified=!1;if(this.$useWrapMode)return this.screenWidth=this.$wrapLimit;var t=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,i=0,s=this.$foldData[i],o=s?s.start.row:Infinity,u=t.length;for(var a=0;a<u;a++){if(a>o){a=s.end.row+1;if(a>=u)break;s=this.$foldData[i++],o=s?s.start.row:Infinity}n[a]==null&&(n[a]=this.$getStringScreenWidth(t[a])[0]),n[a]>r&&(r=n[a])}this.screenWidth=r}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(!e.length)return;this.$fromUndo=!0;for(var n=e.length-1;n!=-1;n--){var r=e[n];r.action=="insert"||r.action=="remove"?this.doc.revertDelta(r):r.folds&&this.addFolds(r.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1},this.redoChanges=function(e,t){if(!e.length)return;this.$fromUndo=!0;for(var n=0;n<e.length;n++){var r=e[n];(r.action=="insert"||r.action=="remove")&&this.doc.$safeApplyDelta(r)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t){function n(e){return t?e.action!=="insert":e.action==="insert"}var r,i;for(var s=0;s<e.length;s++){var o=e[s];if(!o.start)continue;if(!r){n(o)?r=l.fromPoints(o.start,o.end):r=l.fromPoints(o.start,o.start);continue}n(o)?(i=o.start,r.compare(i.row,i.column)==-1&&r.setStart(i),i=o.end,r.compare(i.row,i.column)==1&&r.setEnd(i)):(i=o.start,r.compare(i.row,i.column)==-1&&(r=l.fromPoints(o.start,o.start)))}return r},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var r=this.getTextRange(e),i=this.getFoldsInRange(e),s=l.fromPoints(t,t);if(!n){this.remove(e);var o=e.start.row-e.end.row,u=o?-e.end.column:e.start.column-e.end.column;u&&(s.start.row==e.end.row&&s.start.column>e.end.column&&(s.start.column+=u),s.end.row==e.end.row&&s.end.column>e.end.column&&(s.end.column+=u)),o&&s.start.row>=e.end.row&&(s.start.row+=o,s.end.row+=o)}s.end=this.insert(s.start,r);if(i.length){var a=e.start,f=s.start,o=f.row-a.row,u=f.column-a.column;this.addFolds(i.map(function(e){return e=e.clone(),e.start.row==a.row&&(e.start.column+=u),e.end.row==a.row&&(e.end.column+=u),e.start.row+=o,e.end.row+=o,e}))}return s},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var r=e;r<=t;r++)this.doc.insertInLine({row:r,column:0},n)},this.outdentRows=function(e){var t=e.collapseRows(),n=new l(0,0,0,0),r=this.getTabSize();for(var i=t.start.row;i<=t.end.row;++i){var s=this.getLine(i);n.start.row=i,n.end.row=i;for(var o=0;o<r;++o)if(s.charAt(o)!=" ")break;o<r&&s.charAt(o)=="	"?(n.start.column=o,n.end.column=o+1):(n.start.column=0,n.end.column=o),this.remove(n)}},this.$moveLines=function(e,t,n){e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t);if(n<0){var r=this.getRowFoldStart(e+n);if(r<0)return 0;var i=r-e}else if(n>0){var r=this.getRowFoldEnd(t+n);if(r>this.doc.getLength()-1)return 0;var i=r-t}else{e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t);var i=t-e+1}var s=new l(e,0,t,Number.MAX_VALUE),o=this.getFoldsInRange(s).map(function(e){return e=e.clone(),e.start.row+=i,e.end.row+=i,e}),u=n==0?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+i,u),o.length&&this.addFolds(o),i},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){t=Math.max(0,t);if(e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0);if(e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){if(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t)this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode")},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var r=this.$constrainWrapLimit(e,n.min,n.max);return r!=this.$wrapLimit&&r>1?(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,r=e.start,i=e.end,s=r.row,o=i.row,u=o-s,a=null;this.$updating=!0;if(u!=0)if(n==="remove"){this[t?"$wrapData":"$rowLengthCache"].splice(s,u);var f=this.$foldData;a=this.getFoldsInRange(e),this.removeFolds(a);var l=this.getFoldLine(i.row),c=0;if(l){l.addRemoveChars(i.row,i.column,r.column-i.column),l.shiftRow(-u);var h=this.getFoldLine(s);h&&h!==l&&(h.merge(l),l=h),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=i.row&&l.shiftRow(-u)}o=s}else{var p=Array(u);p.unshift(s,0);var d=t?this.$wrapData:this.$rowLengthCache;d.splice.apply(d,p);var f=this.$foldData,l=this.getFoldLine(s),c=0;if(l){var v=l.range.compareInside(r.row,r.column);v==0?(l=l.split(r.row,r.column),l&&(l.shiftRow(u),l.addRemoveChars(o,0,i.column-r.column))):v==-1&&(l.addRemoveChars(s,0,i.column-r.column),l.shiftRow(u)),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=s&&l.shiftRow(u)}}else{u=Math.abs(e.start.column-e.end.column),n==="remove"&&(a=this.getFoldsInRange(e),this.removeFolds(a),u=-u);var l=this.getFoldLine(s);l&&l.addRemoveChars(s,r.column,u)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(s,o):this.$updateRowLengthCache(s,o),a},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var r=this.doc.getAllLines(),i=this.getTabSize(),o=this.$wrapData,u=this.$wrapLimit,a,f,l=e;t=Math.min(t,r.length-1);while(l<=t)f=this.getFoldLine(l,f),f?(a=[],f.walk(function(e,t,i,o){var u;if(e!=null){u=this.$getDisplayTokens(e,a.length),u[0]=n;for(var f=1;f<u.length;f++)u[f]=s}else u=this.$getDisplayTokens(r[t].substring(o,i),a.length);a=a.concat(u)}.bind(this),f.end.row,r[f.end.row].length+1),o[f.start.row]=this.$computeWrapSplits(a,u,i),l=f.end.row+1):(a=this.$getDisplayTokens(r[l]),o[l]=this.$computeWrapSplits(a,u,i),l++)};var e=1,t=2,n=3,s=4,a=9,c=10,d=11,v=12;this.$computeWrapSplits=function(e,r,i){function g(){var t=0;if(m===0)return t;if(p)for(var n=0;n<e.length;n++){var r=e[n];if(r==c)t+=1;else{if(r!=d){if(r==v)continue;break}t+=i}}return h&&p!==!1&&(t+=i),Math.min(t,m)}function y(t){var n=t-f;for(var r=f;r<t;r++){var i=e[r];if(i===12||i===2)n-=1}o.length||(b=g(),o.indent=b),l+=n,o.push(l),f=t}if(e.length==0)return[];var o=[],u=e.length,f=0,l=0,h=this.$wrapAsCode,p=this.$indentedSoftWrap,m=r<=Math.max(2*i,8)||p===!1?0:Math.floor(r/2),b=0;while(u-f>r-b){var w=f+r-b;if(e[w-1]>=c&&e[w]>=c){y(w);continue}if(e[w]==n||e[w]==s){for(w;w!=f-1;w--)if(e[w]==n)break;if(w>f){y(w);continue}w=f+r;for(w;w<e.length;w++)if(e[w]!=s)break;if(w==e.length)break;y(w);continue}var E=Math.max(w-(r-(r>>2)),f-1);while(w>E&&e[w]<n)w--;if(h){while(w>E&&e[w]<n)w--;while(w>E&&e[w]==a)w--}else while(w>E&&e[w]<c)w--;if(w>E){y(++w);continue}w=f+r,e[w]==t&&w--,y(w-b)}return o},this.$getDisplayTokens=function(n,r){var i=[],s;r=r||0;for(var o=0;o<n.length;o++){var u=n.charCodeAt(o);if(u==9){s=this.getScreenTabSize(i.length+r),i.push(d);for(var f=1;f<s;f++)i.push(v)}else u==32?i.push(c):u>39&&u<48||u>57&&u<64?i.push(a):u>=4352&&m(u)?i.push(e,t):i.push(e)}return i},this.$getStringScreenWidth=function(e,t,n){if(t==0)return[0,0];t==null&&(t=Infinity),n=n||0;var r,i;for(i=0;i<e.length;i++){r=e.charCodeAt(i),r==9?n+=this.getScreenTabSize(n):r>=4352&&m(r)?n+=2:n+=1;if(n>t)break}return[n,i]},this.lineWidgets=null,this.getRowLength=function(e){var t=1;return this.lineWidgets&&(t+=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0),!this.$useWrapMode||!this.$wrapData[e]?t:this.$wrapData[e].length+t},this.getRowLineCount=function(e){return!this.$useWrapMode||!this.$wrapData[e]?1:this.$wrapData[e].length+1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),n=this.$wrapData[t.row];return n.length&&n[0]<t.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:undefined},this.getScreenTabSize=function(e){return this.$tabSize-(e%this.$tabSize|0)},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t,n){if(e<0)return{row:0,column:0};var r,i=0,s=0,o,u=0,a=0,f=this.$screenRowCache,l=this.$getRowCacheIndex(f,e),c=f.length;if(c&&l>=0)var u=f[l],i=this.$docRowCache[l],h=e>f[c-1];else var h=!c;var p=this.getLength()-1,d=this.getNextFoldLine(i),v=d?d.start.row:Infinity;while(u<=e){a=this.getRowLength(i);if(u+a>e||i>=p)break;u+=a,i++,i>v&&(i=d.end.row+1,d=this.getNextFoldLine(i,d),v=d?d.start.row:Infinity),h&&(this.$docRowCache.push(i),this.$screenRowCache.push(u))}if(d&&d.start.row<=i)r=this.getFoldDisplayLine(d),i=d.start.row;else{if(u+a<=e||i>p)return{row:p,column:this.getLine(p).length};r=this.getLine(i),d=null}var m=0,g=Math.floor(e-u);if(this.$useWrapMode){var y=this.$wrapData[i];y&&(o=y[g],g>0&&y.length&&(m=y.indent,s=y[g-1]||y[y.length-1],r=r.substring(s)))}return n!==undefined&&this.$bidiHandler.isBidiRow(u+g,i,g)&&(t=this.$bidiHandler.offsetToCol(n)),s+=this.$getStringScreenWidth(r,t-m)[1],this.$useWrapMode&&s>=o&&(s=o-1),d?d.idxToPosition(s):{row:i,column:s}},this.documentToScreenPosition=function(e,t){if(typeof t=="undefined")var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var r=0,i=null,s=null;s=this.getFoldAt(e,t,1),s&&(e=s.start.row,t=s.start.column);var o,u=0,a=this.$docRowCache,f=this.$getRowCacheIndex(a,e),l=a.length;if(l&&f>=0)var u=a[f],r=this.$screenRowCache[f],c=e>a[l-1];else var c=!l;var h=this.getNextFoldLine(u),p=h?h.start.row:Infinity;while(u<e){if(u>=p){o=h.end.row+1;if(o>e)break;h=this.getNextFoldLine(o,h),p=h?h.start.row:Infinity}else o=u+1;r+=this.getRowLength(u),u=o,c&&(this.$docRowCache.push(u),this.$screenRowCache.push(r))}var d="";h&&u>=p?(d=this.getFoldDisplayLine(h,e,t),i=h.start.row):(d=this.getLine(e).substring(0,t),i=e);var v=0;if(this.$useWrapMode){var m=this.$wrapData[i];if(m){var g=0;while(d.length>=m[g])r++,g++;d=d.substring(m[g-1]||0,d.length),v=g>0?m.indent:0}}return this.lineWidgets&&this.lineWidgets[u]&&this.lineWidgets[u].rowsAbove&&(r+=this.lineWidgets[u].rowsAbove),{row:r,column:v+this.$getStringScreenWidth(d)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(!this.$useWrapMode){e=this.getLength();var n=this.$foldData;for(var r=0;r<n.length;r++)t=n[r],e-=t.end.row-t.start.row}else{var i=this.$wrapData.length,s=0,r=0,t=this.$foldData[r++],o=t?t.start.row:Infinity;while(s<i){var u=this.$wrapData[s];e+=u?u.length+1:1,s++,s>o&&(s=t.end.row+1,t=this.$foldData[r++],o=t?t.start.row:Infinity)}}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){if(!this.$enableVarChar)return;this.$getStringScreenWidth=function(t,n,r){if(n===0)return[0,0];n||(n=Infinity),r=r||0;var i,s;for(s=0;s<t.length;s++){i=t.charAt(s),i==="	"?r+=this.getScreenTabSize(r):r+=e.getCharacterWidth(i);if(r>n)break}return[r,s]}},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},this.isFullWidth=m}.call(d.prototype),e("./edit_session/folding").Folding.call(d.prototype),e("./edit_session/bracket_match").BracketMatch.call(d.prototype),o.defineOptions(d.prototype,"session",{wrap:{set:function(e){!e||e=="off"?e=!1:e=="free"?e=!0:e=="printMargin"?e=-1:typeof e=="string"&&(e=parseInt(e,10)||!1);if(this.$wrap==e)return;this.$wrap=e;if(!e)this.setUseWrapMode(!1);else{var t=typeof e=="number"?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){e=e=="auto"?this.$mode.type!="text":e!="text",e!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){e=parseInt(e),e>0&&this.$tabSize!==e&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(e){this.setFoldStyle(e)},handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=d}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";function u(e,t){function n(e){return/\w/.test(e)||t.regExp?"\\b":""}return n(e[0])+e+n(e[e.length-1])}var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(){this.$options={}};(function(){this.set=function(e){return i.mixin(this.$options,e),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$options,n=this.$matchIterator(e,t);if(!n)return!1;var r=null;return n.forEach(function(e,n,i,o){return r=new s(e,n,i,o),n==o&&t.start&&t.start.start&&t.skipCurrent!=0&&r.isEqual(t.start)?(r=null,!1):!0}),r},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,i=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),o=[],u=t.re;if(t.$isMultiLine){var a=u.length,f=i.length-a,l;e:for(var c=u.offset||0;c<=f;c++){for(var h=0;h<a;h++)if(i[c+h].search(u[h])==-1)continue e;var p=i[c],d=i[c+a-1],v=p.length-p.match(u[0])[0].length,m=d.match(u[a-1])[0].length;if(l&&l.end.row===c&&l.end.column>v)continue;o.push(l=new s(c,v,c+a-1,m)),a>2&&(c=c+a-2)}}else for(var g=0;g<i.length;g++){var y=r.getMatchOffsets(i[g],u);for(var h=0;h<y.length;h++){var b=y[h];o.push(new s(g,b.offset,g,b.offset+b.length))}}if(n){var w=n.start.column,E=n.start.column,g=0,h=o.length-1;while(g<h&&o[g].start.column<w&&o[g].start.row==n.start.row)g++;while(g<h&&o[h].end.column>E&&o[h].end.row==n.end.row)h--;o=o.slice(g,h+1);for(g=0,h=o.length;g<h;g++)o[g].start.row+=n.start.row,o[g].end.row+=n.start.row}return o},this.replace=function(e,t){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(!r)return;var i=r.exec(e);if(!i||i[0].length!=e.length)return null;t=e.replace(r,t);if(n.preserveCase){t=t.split("");for(var s=Math.min(e.length,e.length);s--;){var o=e[s];o&&o.toLowerCase()!=o?t[s]=t[s].toUpperCase():t[s]=t[s].toLowerCase()}t=t.join("")}return t},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=r.escapeRegExp(n)),e.wholeWord&&(n=u(n,e));var i=e.caseSensitive?"gm":"gmi";e.$isMultiLine=!t&&/[\n\r]/.test(n);if(e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,i);try{var s=new RegExp(n,i)}catch(o){s=!1}return e.re=s},this.$assembleMultilineRegExp=function(e,t){var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[];for(var i=0;i<n.length;i++)try{r.push(new RegExp(n[i],t))}catch(s){return!1}return r},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var r=t.backwards==1,i=t.skipCurrent!=0,s=t.range,o=t.start;o||(o=s?s[r?"end":"start"]:e.selection.getRange()),o.start&&(o=o[i!=r?"end":"start"]);var u=s?s.start.row:0,a=s?s.end.row:e.getLength()-1;if(r)var f=function(e){var n=o.row;if(c(n,o.column,e))return;for(n--;n>=u;n--)if(c(n,Number.MAX_VALUE,e))return;if(t.wrap==0)return;for(n=a,u=o.row;n>=u;n--)if(c(n,Number.MAX_VALUE,e))return};else var f=function(e){var n=o.row;if(c(n,o.column,e))return;for(n+=1;n<=a;n++)if(c(n,0,e))return;if(t.wrap==0)return;for(n=u,a=o.row;n<=a;n++)if(c(n,0,e))return};if(t.$isMultiLine)var l=n.length,c=function(t,i,s){var o=r?t-l+1:t;if(o<0||o+l>e.getLength())return;var u=e.getLine(o),a=u.search(n[0]);if(!r&&a<i||a===-1)return;for(var f=1;f<l;f++){u=e.getLine(o+f);if(u.search(n[f])==-1)return}var c=u.match(n[l-1])[0].length;if(r&&c>i)return;if(s(o,a,o+l-1,c))return!0};else if(r)var c=function(t,r,i){var s=e.getLine(t),o=[],u,a=0;n.lastIndex=0;while(u=n.exec(s)){var f=u[0].length;a=u.index;if(!f){if(a>=s.length)break;n.lastIndex=a+=1}if(u.index+f>r)break;o.push(u.index,f)}for(var l=o.length-1;l>=0;l-=2){var c=o[l-1],f=o[l];if(i(t,c,t,c+f))return!0}};else var c=function(t,r,i){var s=e.getLine(t),o,u;n.lastIndex=r;while(u=n.exec(s)){var a=u[0].length;o=u.index;if(i(t,o,t,o+a))return!0;if(!a){n.lastIndex=o+=1;if(o>=s.length)return!1}}};return{forEach:f}}}).call(o.prototype),t.Search=o}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function o(e,t){this.platform=t||(i.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function u(e,t){o.call(this,e,t),this.$singleCommand=!1}var r=e("../lib/keys"),i=e("../lib/useragent"),s=r.KEY_MODS;u.prototype=o.prototype,function(){function e(e){return typeof e=="object"&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var n=e&&(typeof e=="string"?e:e.name);e=this.commands[n],t||delete this.commands[n];var r=this.commandKeyBinding;for(var i in r){var s=r[i];if(s==e)delete r[i];else if(Array.isArray(s)){var o=s.indexOf(e);o!=-1&&(s.splice(o,1),s.length==1&&(r[i]=s[0]))}}},this.bindKey=function(e,t,n){typeof e=="object"&&e&&(n==undefined&&(n=e.position),e=e[this.platform]);if(!e)return;if(typeof t=="function")return this.addCommand({exec:t,bindKey:e,name:t.name||e});e.split("|").forEach(function(e){var r="";if(e.indexOf(" ")!=-1){var i=e.split(/\s+/);e=i.pop(),i.forEach(function(e){var t=this.parseKeys(e),n=s[t.hashId]+t.key;r+=(r?" ":"")+n,this._addCommandToBinding(r,"chainKeys")},this),r+=" "}var o=this.parseKeys(e),u=s[o.hashId]+o.key;this._addCommandToBinding(r+u,t,n)},this)},this._addCommandToBinding=function(t,n,r){var i=this.commandKeyBinding,s;if(!n)delete i[t];else if(!i[t]||this.$singleCommand)i[t]=n;else{Array.isArray(i[t])?(s=i[t].indexOf(n))!=-1&&i[t].splice(s,1):i[t]=[i[t]],typeof r!="number"&&(r=e(n));var o=i[t];for(s=0;s<o.length;s++){var u=o[s],a=e(u);if(a>r)break}o.splice(s,0,n)}},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var n=e[t];if(!n)return;if(typeof n=="string")return this.bindKey(n,t);typeof n=="function"&&(n={exec:n});if(typeof n!="object")return;n.name||(n.name=t),this.addCommand(n)},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),n=t.pop(),i=r[n];if(r.FUNCTION_KEYS[i])n=r.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(t.length==1&&t[0]=="shift")return{key:n.toUpperCase(),hashId:-1}}var s=0;for(var o=t.length;o--;){var u=r.KEY_MODS[t[o]];if(u==null)return typeof console!="undefined"&&console.error("invalid modifier "+t[o]+" in "+e),!1;s|=u}return{key:n,hashId:s}},this.findKeyCommand=function(t,n){var r=s[t]+n;return this.commandKeyBinding[r]},this.handleKeyboard=function(e,t,n,r){if(r<0)return;var i=s[t]+n,o=this.commandKeyBinding[i];e.$keyChain&&(e.$keyChain+=" "+i,o=this.commandKeyBinding[e.$keyChain]||o);if(o)if(o=="chainKeys"||o[o.length-1]=="chainKeys")return e.$keyChain=e.$keyChain||i,{command:"null"};if(e.$keyChain)if(!!t&&t!=4||n.length!=1){if(t==-1||r>0)e.$keyChain=""}else e.$keyChain=e.$keyChain.slice(0,-i.length-1);return{command:o}},this.getStatusText=function(e,t){return t.$keyChain||""}}.call(o.prototype),t.HashHandler=o,t.MultiHashHandler=u}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../keyboard/hash_handler").MultiHashHandler,s=e("../lib/event_emitter").EventEmitter,o=function(e,t){i.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};r.inherits(o,i),function(){r.implement(this,s),this.exec=function(e,t,n){if(Array.isArray(e)){for(var r=e.length;r--;)if(this.exec(e[r],t,n))return!0;return!1}typeof e=="string"&&(e=this.commands[e]);if(!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(this.$checkCommandState!=0&&e.isAvailable&&!e.isAvailable(t))return!1;var i={editor:t,command:e,args:n};return i.returnValue=this._emit("exec",i),this._signal("afterExec",i),i.returnValue===!1?!1:!0},this.toggleRecording=function(e){if(this.$inReplay)return;return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(this.$inReplay||!this.macro)return;if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){typeof t=="string"?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}},this.trimMacro=function(e){return e.map(function(e){return typeof e[0]!="string"&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(o.prototype),t.CommandManager=o}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";function o(e,t){return{win:e,mac:t}}var r=e("../lib/lang"),i=e("../config"),s=e("../range").Range;t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:o("Ctrl-,","Command-,"),exec:function(e){i.loadModule("ace/ext/settings_menu",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:o("Alt-E","F4"),exec:function(e){i.loadModule("./ext/error_marker",function(t){t.showErrorMarker(e,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:o("Alt-Shift-E","Shift-F4"),exec:function(e){i.loadModule("./ext/error_marker",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:o("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:o(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:o("Ctrl-L","Command-L"),exec:function(e,t){typeof t=="number"&&!isNaN(t)&&e.gotoLine(t),e.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:o("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:o("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:o("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:o("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:o("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:o("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:o("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:o("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:o("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:o("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:o("Ctrl-F","Command-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:o("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:o("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:o("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:o("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:o("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:o("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:o("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:o("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:o("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:o("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:o("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:o("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:o("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:o("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:o("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:o("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:o("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:o("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:o("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:o("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:o(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:o("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:o(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:o("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:o("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:o("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:o("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:o("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:o("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:o("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:o(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(e){},readOnly:!0},{name:"cut",description:"Cut",exec:function(e){var t=e.$copyWithEmptySelection&&e.selection.isEmpty(),n=t?e.selection.getLineRange():e.selection.getRange();e._emit("cut",n),n.isEmpty()||e.session.remove(n),e.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:o("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:o("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:o("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:o("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:o("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:o("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:o("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:o("Ctrl-H","Command-Option-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e,!0)})}},{name:"undo",description:"Undo",bindKey:o("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",description:"Redo",bindKey:o("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:o("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:o("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:o("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:o("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:o("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:o("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:o("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:o("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:o("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:o("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:o("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:o("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:o("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:o("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:o("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:o("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:o("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:o(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:o("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:o("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:o("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:o(null,null),exec:function(e){e.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:o("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:o(null,null),exec:function(e){var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),i=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),o=e.session.doc.getLine(n.row).length,u=e.session.doc.getTextRange(e.selection.getRange()),a=u.replace(/\n\s*/," ").length,f=e.session.doc.getLine(n.row);for(var l=n.row+1;l<=i.row+1;l++){var c=r.stringTrimLeft(r.stringTrimRight(e.session.doc.getLine(l)));c.length!==0&&(c=" "+c),f+=c}i.row+1<e.session.doc.getLength()-1&&(f+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new s(n.row,0,i.row+2,0),f),a>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+a)):(o=e.session.doc.getLine(n.row).length>o?o+1:o,e.selection.moveCursorTo(n.row,o))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:o(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,r=e.selection.rangeList.ranges,i=[];r.length<1&&(r=[e.selection.getRange()]);for(var o=0;o<r.length;o++)o==r.length-1&&(r[o].end.row!==t||r[o].end.column!==n)&&i.push(new s(r[o].end.row,r[o].end.column,t,n)),o===0?(r[o].start.row!==0||r[o].start.column!==0)&&i.push(new s(0,0,r[o].start.row,r[o].start.column)):i.push(new s(r[o-1].end.row,r[o-1].end.column,r[o].start.row,r[o].start.column));e.exitMultiSelectMode(),e.clearSelection();for(var o=0;o<i.length;o++)e.selection.addRange(i[o],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(e){e.selection.clearSelection(),e.navigateLineEnd(),e.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(e){e.selection.clearSelection();var t=e.getCursorPosition();e.selection.moveTo(t.row-1,Number.MAX_VALUE),e.insert("\n"),t.row===0&&e.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command pallete",bindKey:o("F1","F1"),exec:function(e){e.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:o(null,null),exec:function(e){e.prompt({$type:"modes"})},readOnly:!0}];for(var u=1;u<9;u++)t.commands.push({name:"foldToLevel"+u,description:"Fold To Level "+u,level:u,exec:function(e){e.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/lang"),o=e("./lib/useragent"),u=e("./keyboard/textinput").TextInput,a=e("./mouse/mouse_handler").MouseHandler,f=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,c=e("./edit_session").EditSession,h=e("./search").Search,p=e("./range").Range,d=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,g=e("./config"),y=e("./token_iterator").TokenIterator,b=e("./clipboard"),w=function(e,t,n){this.$toDestroy=[];var r=e.getContainerElement();this.container=r,this.renderer=e,this.id="editor"+ ++w.$uid,this.commands=new v(o.isMac?"mac":"win",m),typeof document=="object"&&(this.textInput=new u(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new a(this),new f(this)),this.keyBinding=new l(this),this.$search=(new h).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||n&&n.session||new c("")),g.resetOptions(this),n&&this.setOptions(n),g._signal("editor",this)};w.$uid=0,function(){r.implement(this,d),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(e){if(this.curOp&&this.session){if(e&&e.returnValue===!1||!this.session)return this.curOp=null;if(e==1&&this.curOp.command&&this.curOp.command.name=="mouse")return;this._signal("beforeEndOperation");if(!this.curOp)return;var t=this.curOp.command,n=t&&t.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var r=this.selection.getRange(),i=this.renderer.layerConfig;(r.start.row>=i.lastRow||r.end.row<=i.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:}n=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var s=this.selection.toJSON();this.curOp.selectionAfter=s,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(s),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(!this.$mergeUndoDeltas)return;var t=this.prevOp,n=this.$mergeableCommands,r=t.command&&e.command.name==t.command.name;if(e.command.name=="insertstring"){var i=e.args;this.mergeNextCommand===undefined&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(i)||/\s/.test(t.args)),this.mergeNextCommand=!0}else r=r&&n.indexOf(e.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:n.indexOf(e.command.name)!==-1&&(this.sequenceStartTime=Date.now())},this.setKeyboardHandler=function(e,t){if(e&&typeof e=="string"&&e!="ace"){this.$keybindingId=e;var n=this;g.loadModule(["keybinding",e],function(r){n.$keybindingId==e&&n.keyBinding.setKeyboardHandler(r&&r.handler),t&&t()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session==e)return;this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}),e&&e.bgTokenizer&&e.bgTokenizer.scheduleStart()},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?t==1?this.navigateFileEnd():t==-1&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||i.computedStyle(this.container).fontSize},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(this.$highlightPending)return;var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session;if(!t||!t.bgTokenizer)return;t.$bracketHighlight&&(t.$bracketHighlight.markerIds.forEach(function(e){t.removeMarker(e)}),t.$bracketHighlight=null);var n=t.getMatchingBracketRanges(e.getCursorPosition());!n&&t.$mode.getMatching&&(n=t.$mode.getMatching(e.session));if(!n)return;var r="ace_bracket";Array.isArray(n)?n.length==1&&(r="ace_error_bracket"):n=[n],n.length==2&&(p.comparePoints(n[0].end,n[1].start)==0?n=[p.fromPoints(n[0].start,n[1].end)]:p.comparePoints(n[0].start,n[1].end)==0&&(n=[p.fromPoints(n[1].start,n[0].end)])),t.$bracketHighlight={ranges:n,markerIds:n.map(function(e){return t.addMarker(e,r,"text")})}},50)},this.$highlightTags=function(){if(this.$highlightTagPending)return;var e=this;this.$highlightTagPending=!0,setTimeout(function(){e.$highlightTagPending=!1;var t=e.session;if(!t||!t.bgTokenizer)return;var n=e.getCursorPosition(),r=new y(e.session,n.row,n.column),i=r.getCurrentToken();if(!i||!/\b(?:tag-open|tag-name)/.test(i.type)){t.removeMarker(t.$tagHighlight),t.$tagHighlight=null;return}if(i.type.indexOf("tag-open")!==-1){i=r.stepForward();if(!i)return}var s=i.value,o=i.value,u=0,a=r.stepBackward();if(a.value==="<"){do a=i,i=r.stepForward(),i&&(i.type.indexOf("tag-name")!==-1?(o=i.value,s===o&&(a.value==="<"?u++:a.value==="</"&&u--)):s===o&&i.value==="/>"&&u--);while(i&&u>=0)}else{do{i=a,a=r.stepBackward();if(i)if(i.type.indexOf("tag-name")!==-1)s===i.value&&(a.value==="<"?u++:a.value==="</"&&u--);else if(i.value==="/>"){var f=0,l=a;while(l){if(l.type.indexOf("tag-name")!==-1&&l.value===s){u--;break}if(l.value==="<")break;l=r.stepBackward(),f++}for(var c=0;c<f;c++)r.stepForward()}}while(a&&u<=0);r.stepForward()}if(!i){t.removeMarker(t.$tagHighlight),t.$tagHighlight=null;return}var h=r.getCurrentTokenRow(),d=r.getCurrentTokenColumn(),v=new p(h,d,h,d+i.value.length),m=t.$backMarkers[t.$tagHighlight];t.$tagHighlight&&m!=undefined&&v.compareRange(m.range)!==0&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),t.$tagHighlight||(t.$tagHighlight=t.addMarker(v,"ace_bracket","text"))},50)},this.focus=function(){var e=this;setTimeout(function(){e.isFocused()||e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){if(this.$isFocused)return;this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e)},this.onBlur=function(e){if(!this.$isFocused)return;this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e)},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:Infinity;this.renderer.updateLines(e.start.row,n,t),this._signal("change",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e=this.getSession(),t;if(this.$highlightActiveLine){if(this.$selectionStyle!="line"||!this.selection.isMultiLine())t=this.getCursorPosition();this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(t=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(t=!1)}if(e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new p(t.row,t.column,t.row,Infinity);n.id=e.addMarker(n,"ace_active-line","screenLine"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null;if(!this.selection.isEmpty()){var n=this.selection.getRange(),r=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",r)}else this.$updateHighlightActiveLine();var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(t.isEmpty()||t.isMultiLine())return;var n=t.start.column,r=t.end.column,i=e.getLine(t.start.row),s=i.substring(n,r);if(s.length>5e3||!/[\w\d]/.test(s))return;var o=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:s}),u=i.substring(n-1,r+1);if(!o.test(u))return;return o},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),n=!1;if(!e&&this.$copyWithEmptySelection){n=!0;var r=this.selection.getAllRanges();for(var i=0;i<r.length;i++){var s=r[i];if(i&&r[i-1].start.row==s.start.row)continue;e+=this.session.getLine(s.start.row)+t}}var o={text:e};return this._signal("copy",o),b.lineMode=n?o.text:!1,o.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){var n={text:e,event:t};this.commands.exec("paste",this,n)},this.$handlePaste=function(e){typeof e=="string"&&(e={text:e}),this._signal("paste",e);var t=e.text,n=t===b.lineMode,r=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?r.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(n)this.selection.rangeList.ranges.forEach(function(e){r.insert({row:e.start.row,column:0},t)});else{var i=t.split(/\r\n|\r|\n/),s=this.selection.rangeList.ranges,o=i.length==2&&(!i[0]||!i[1]);if(i.length!=s.length||o)return this.commands.exec("insertstring",this,t);for(var u=s.length;u--;){var a=s[u];a.isEmpty()||r.remove(a),r.insert(a.start,i[u])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,r=n.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var s=r.transformAction(n.getState(i.row),"insertion",this,n,e);s&&(e!==s.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),e=s.text)}e=="	"&&(e=this.session.getTabString());if(!this.selection.isEmpty()){var o=this.getSelectionRange();i=this.session.remove(o),this.clearSelection()}else if(this.session.getOverwrite()&&e.indexOf("\n")==-1){var o=new p.fromPoints(i,i);o.end.column+=e.length,this.session.remove(o)}if(e=="\n"||e=="\r\n"){var u=n.getLine(i.row);if(i.column>u.search(/\S|$/)){var a=u.substr(i.column).search(/\S|$/);n.doc.removeInLine(i.row,i.column,i.column+a)}}this.clearSelection();var f=i.column,l=n.getState(i.row),u=n.getLine(i.row),c=r.checkOutdent(l,u,e);n.insert(i,e),s&&s.selection&&(s.selection.length==2?this.selection.setSelectionRange(new p(i.row,f+s.selection[0],i.row,f+s.selection[1])):this.selection.setSelectionRange(new p(i.row+s.selection[0],s.selection[1],i.row+s.selection[2],s.selection[3])));if(this.$enableAutoIndent){if(n.getDocument().isNewLine(e)){var h=r.getNextLineIndent(l,u.slice(0,i.column),n.getTabString());n.insert({row:i.row+1,column:0},h)}c&&r.autoOutdent(l,n,i.row)}},this.autoIndent=function(){var e=this.session,t=e.getMode(),n,r;if(this.selection.isEmpty())n=0,r=e.doc.getLength()-1;else{var i=this.getSelectionRange();n=i.start.row,r=i.end.row}var s="",o="",u="",a,f,l,c=e.getTabString();for(var h=n;h<=r;h++)h>0&&(s=e.getState(h-1),o=e.getLine(h-1),u=t.getNextLineIndent(s,o,c)),a=e.getLine(h),f=t.$getIndent(a),u!==f&&(f.length>0&&(l=new p(h,0,h,f.length),e.remove(l)),u.length>0&&e.insert({row:h,column:0},u)),t.autoOutdent(s,e,h)},this.onTextInput=function(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:"insertstring"}});var n=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},this.applyComposition=function(e,t){if(t.extendLeft||t.extendRight){var n=this.selection.getRange();n.start.column-=t.extendLeft,n.end.column+=t.extendRight,n.start.column<0&&(n.start.row--,n.start.column+=this.session.getLine(n.start.row).length+1),this.selection.setRange(n),!e&&!n.isEmpty()&&this.remove()}(e||!this.selection.isEmpty())&&this.insert(e,!0);if(t.restoreStart||t.restoreEnd){var n=this.selection.getRange();n.start.column-=t.restoreStart,n.end.column-=t.restoreEnd,this.selection.setRange(n)}},this.onCommandKey=function(e,t,n){return this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&(e=="left"?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(t.start.row),i=n.getMode().transformAction(r,"deletion",this,n,t);if(t.end.column===0){var s=n.getTextRange(t);if(s[s.length-1]=="\n"){var o=n.getLine(t.end.row);/^\s+$/.test(o)&&(t.end.column=o.length)}}i&&(t=i)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(!this.selection.isEmpty())return;var e=this.getCursorPosition(),t=e.column;if(t===0)return;var n=this.session.getLine(e.row),r,i;t<n.length?(r=n.charAt(t)+n.charAt(t-1),i=new p(e.row,t-1,e.row,t+1)):(r=n.charAt(t-1)+n.charAt(t-2),i=new p(e.row,t-2,e.row,t)),this.session.replace(i,r),this.session.selection.moveToPosition(i.end)},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row){var n=this.$getSelectedRows();e.indentRows(n.first,n.last,"	");return}if(t.start.column<t.end.column){var r=e.getTextRange(t);if(!/^\s+$/.test(r)){var n=this.$getSelectedRows();e.indentRows(n.first,n.last,"	");return}}var i=e.getLine(t.start.row),o=t.start,u=e.getTabSize(),a=e.documentToScreenColumn(o.row,o.column);if(this.session.getUseSoftTabs())var f=u-a%u,l=s.stringRepeat(" ",f);else{var f=a%u;while(i[t.start.column-1]==" "&&f)t.start.column--,f--;this.selection.setSelectionRange(t),l="	"}return this.insert(l)},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"	")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){var e=this.$getSelectedRows(),t=this.session,n=[];for(var r=e.first;r<=e.last;r++)n.push(t.getLine(r));n.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});var i=new p(0,0,0,0);for(var r=e.first;r<=e.last;r++){var s=t.getLine(r);i.start.row=r,i.end.row=r,i.end.column=s.length,t.replace(i,n[r-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;var r=this.session.getLine(e);while(n.lastIndex<t){var i=n.exec(r);if(i.index<=t&&i.index+i[0].length>=t){var s={value:i[0],start:i.index,end:i.index+i[0].length};return s}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,r=new p(t,n-1,t,n),i=this.session.getTextRange(r);if(!isNaN(parseFloat(i))&&isFinite(i)){var s=this.getNumberAt(t,n);if(s){var o=s.value.indexOf(".")>=0?s.start+s.value.indexOf(".")+1:s.end,u=s.start+s.value.length-o,a=parseFloat(s.value);a*=Math.pow(10,u),o!==s.end&&n<o?e*=Math.pow(10,s.end-n-1):e*=Math.pow(10,s.end-n),a+=e,a/=Math.pow(10,u);var f=a.toFixed(u),l=new p(t,s.start,t,s.end);this.session.replace(l,f),this.moveCursorTo(t,Math.max(s.start+1,n+f.length-s.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var e=this.selection.getCursor().row,t=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),r=this.selection.getWordRange().start.column,i=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),o=t-r-1;o<0&&(o=0);var u=0,a=0,f=this;n.match(/[A-Za-z0-9_]+/)&&i.forEach(function(t,i){a=u+t.length,o>=u&&o<=a&&(n=t,f.selection.clearSelection(),f.moveCursorTo(e,u+r),f.selection.selectTo(e,a+r)),u=a});var l=this.$toggleWordPairs,c;for(var h=0;h<l.length;h++){var p=l[h];for(var d=0;d<=1;d++){var v=+!d,m=n.match(new RegExp("^\\s?_?("+s.escapeRegExp(p[d])+")\\s?$","i"));if(m){var g=n.match(new RegExp("([_]|^|\\s)("+s.escapeRegExp(m[1])+")($|\\s)","g"));g&&(c=n.replace(new RegExp(s.escapeRegExp(p[d]),"i"),function(e){var t=p[v];return e.toUpperCase()==e?t=t.toUpperCase():e.charAt(0).toUpperCase()==e.charAt(0)&&(t=t.substr(0,0)+p[v].charAt(0).toUpperCase()+t.substr(1)),t}),this.insert(c),c="")}}}},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),r=e.isBackwards();if(n.isEmpty()){var i=n.start.row;t.duplicateLines(i,i)}else{var s=r?n.start:n.end,o=t.insert(s,t.getTextRange(n),!1);n.start=s,n.end=o,e.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var n,r,i=this.selection;if(!i.inMultiSelectMode||this.inVirtualSelectionMode){var s=i.toOrientedRange();n=this.$getSelectedRows(s),r=this.session.$moveLines(n.first,n.last,t?0:e),t&&e==-1&&(r=0),s.moveBy(r,0),i.fromOrientedRange(s)}else{var o=i.rangeList.ranges;i.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;var u=0,a=0,f=o.length;for(var l=0;l<f;l++){var c=l;o[l].moveBy(u,0),n=this.$getSelectedRows(o[l]);var h=n.first,p=n.last;while(++l<f){a&&o[l].moveBy(a,0);var d=this.$getSelectedRows(o[l]);if(t&&d.first!=p)break;if(!t&&d.first>p+1)break;p=d.last}l--,u=this.session.$moveLines(h,p,t?0:e),t&&e==-1&&(c=l+1);while(c<=l)o[c].moveBy(u,0),c++;t||(u=0),a+=u}i.fromOrientedRange(i.ranges[0]),i.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(e)},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,r=this.renderer.layerConfig,i=e*Math.floor(r.height/r.lineHeight);t===!0?this.selection.$moveSelection(function(){this.moveCursorBy(i,0)}):t===!1&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection());var s=n.scrollTop;n.scrollBy(0,i*r.lineHeight),t!=null&&n.scrollCursorIntoView(null,.5),n.animateScrolling(s)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,r){this.renderer.scrollToLine(e,t,n,r)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),r=new y(this.session,n.row,n.column),i=r.getCurrentToken(),s=i||r.stepForward();if(!s)return;var o,u=!1,a={},f=n.column-s.start,l,c={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(s.value.match(/[{}()\[\]]/g))for(;f<s.value.length&&!u;f++){if(!c[s.value[f]])continue;l=c[s.value[f]]+"."+s.type.replace("rparen","lparen"),isNaN(a[l])&&(a[l]=0);switch(s.value[f]){case"(":case"[":case"{":a[l]++;break;case")":case"]":case"}":a[l]--,a[l]===-1&&(o="bracket",u=!0)}}else s.type.indexOf("tag-name")!==-1&&(isNaN(a[s.value])&&(a[s.value]=0),i.value==="<"?a[s.value]++:i.value==="</"&&a[s.value]--,a[s.value]===-1&&(o="tag",u=!0));u||(i=s,s=r.stepForward(),f=0)}while(s&&!u);if(!o)return;var h,d;if(o==="bracket"){h=this.session.getBracketRange(n);if(!h){h=new p(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+f-1,r.getCurrentTokenRow(),r.getCurrentTokenColumn()+f-1),d=h.start;if(t||d.row===n.row&&Math.abs(d.column-n.column)<2)h=this.session.getBracketRange(d)}}else if(o==="tag"){if(!s||s.type.indexOf("tag-name")===-1)return;var v=s.value;h=new p(r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2,r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2);if(h.compare(n.row,n.column)===0){u=!1;do s=i,i=r.stepBackward(),i&&(i.type.indexOf("tag-close")!==-1&&h.setEnd(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1),s.value===v&&s.type.indexOf("tag-name")!==-1&&(i.value==="<"?a[v]++:i.value==="</"&&a[v]--,a[v]===0&&(u=!0)));while(i&&!u)}s&&s.type.indexOf("tag-name")&&(d=h.start,d.row==n.row&&Math.abs(d.column-n.column)<2&&(d=h.end))}d=h&&h.cursor||d,d&&(e?h&&t?this.selection.setRange(h):h&&h.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(d.row,d.column):this.selection.moveTo(d.row,d.column))},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}else{e=e||1;while(e--)this.selection.moveCursorLeft()}this.clearSelection()},this.navigateRight=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}else{e=e||1;while(e--)this.selection.moveCursorRight()}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,e)&&(r=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end),r):r},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;var i=this.getSelectionRange();this.selection.moveTo(0,0);for(var s=n.length-1;s>=0;--s)this.$tryReplace(n[s],e)&&r++;return this.selection.setSelectionRange(i),r},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return t=this.$search.replace(n,t),t!==null?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),typeof e=="string"||e instanceof RegExp?t.needle=e:typeof e=="object"&&r.mixin(t,e);var i=this.selection.getRange();t.needle==null&&(e=this.session.getTextRange(i)||this.$search.$options.needle,e||(i=this.session.getWordRange(i.start.row,i.start.column),e=this.session.getTextRange(i)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:i});var s=this.$search.find(this.session);if(t.preventScroll)return s;if(s)return this.revealRange(s,n),s;t.backwards?i.start=i.end:i.end=i.start,this.selection.setRange(i)},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),t!==!1&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(e){e.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(e){if(!e)return;var t,n=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var i=this.$scrollAnchor;i.style.cssText="position:absolute",this.container.insertBefore(i,this.container.firstChild);var s=this.on("changeSelection",function(){r=!0}),o=this.renderer.on("beforeRender",function(){r&&(t=n.renderer.container.getBoundingClientRect())}),u=this.renderer.on("afterRender",function(){if(r&&t&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var e=n.renderer,s=e.$cursorLayer.$pixelPos,o=e.layerConfig,u=s.top-o.offset;s.top>=0&&u+t.top<0?r=!0:s.top<o.height&&s.top+t.top+o.lineHeight>window.innerHeight?r=!1:r=null,r!=null&&(i.style.top=u+"px",i.style.left=s.left+"px",i.style.height=o.lineHeight+"px",i.scrollIntoView(r)),r=t=null}});this.setAutoScrollEditorIntoView=function(e){if(e)return;delete this.setAutoScrollEditorIntoView,this.off("changeSelection",s),this.renderer.off("afterRender",u),this.renderer.off("beforeRender",o)}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;if(!t)return;t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&e!="wide",i.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e))},this.prompt=function(e,t,n){var r=this;g.loadModule("./ext/prompt",function(i){i.prompt(r,e,t,n)})}}.call(w.prototype),g.defineOptions(w.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(e){this.textInput.setCopyWithEmptySelection(e)},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(e){this.session.setValue(e)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(e){this.setSession(e)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(e){this.renderer.$gutterLayer.setShowLineNumbers(e),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),e&&this.$relativeLineNumbers?E.attach(this):E.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(e){this.$showLineNumbers&&e?E.attach(this):E.detach(this)}},placeholder:{set:function(e){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var e=this.session&&(this.renderer.$composition||this.getValue());if(e&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),i.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!e&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),i.addCssClass(this.container,"ace_hasPlaceholder");var t=i.createElement("div");t.className="ace_placeholder",t.textContent=this.$placeholder||"",this.renderer.placeholderNode=t,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!e&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var E={getText:function(e,t){return(Math.abs(e.selection.lead.row-t)||t+1+(t<9?"\u00b7":""))+""},getWidth:function(e,t,n){return Math.max(t.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(e,t){t.renderer.$loop.schedule(t.renderer.CHANGE_GUTTER)},attach:function(e){e.renderer.$gutterLayer.$renderer=this,e.on("changeSelection",this.update),this.update(null,e)},detach:function(e){e.renderer.$gutterLayer.$renderer==this&&(e.renderer.$gutterLayer.$renderer=null),e.off("changeSelection",this.update),this.update(null,e)}};t.Editor=w}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";function i(e,t){for(var n=t;n--;){var r=e[n];if(r&&!r[0].ignore){while(n<t-1){var i=d(e[n],e[n+1]);e[n]=i[0],e[n+1]=i[1],n++}return!0}}}function a(e){var t=e.action=="insert",n=e.start,r=e.end,i=(r.row-n.row)*(t?1:-1),s=(r.column-n.column)*(t?1:-1);t&&(r=n);for(var o in this.marks){var a=this.marks[o],f=u(a,n);if(f<0)continue;if(f===0&&t){if(a.bias!=1){a.bias==-1;continue}f=1}var l=t?f:u(a,r);if(l>0){a.row+=i,a.column+=a.row==r.row?s:0;continue}!t&&l<=0&&(a.row=n.row,a.column=n.column,l===0&&(a.bias=1))}}function f(e){return{row:e.row,column:e.column}}function l(e){return{start:f(e.start),end:f(e.end),action:e.action,lines:e.lines.slice()}}function c(e){e=e||this;if(Array.isArray(e))return e.map(c).join("\n");var t="";e.action?(t=e.action=="insert"?"+":"-",t+="["+e.lines+"]"):e.value&&(Array.isArray(e.value)?t=e.value.map(h).join("\n"):t=h(e.value)),e.start&&(t+=h(e));if(e.id||e.rev)t+="	("+(e.id||e.rev)+")";return t}function h(e){return e.start.row+":"+e.start.column+"=>"+e.end.row+":"+e.end.column}function p(e,t){var n=e.action=="insert",r=t.action=="insert";if(n&&r)if(o(t.start,e.end)>=0)m(t,e,-1);else{if(!(o(t.start,e.start)<=0))return null;m(e,t,1)}else if(n&&!r)if(o(t.start,e.end)>=0)m(t,e,-1);else{if(!(o(t.end,e.start)<=0))return null;m(e,t,-1)}else if(!n&&r)if(o(t.start,e.start)>=0)m(t,e,1);else{if(!(o(t.start,e.start)<=0))return null;m(e,t,1)}else if(!n&&!r)if(o(t.start,e.start)>=0)m(t,e,1);else{if(!(o(t.end,e.start)<=0))return null;m(e,t,-1)}return[t,e]}function d(e,t){for(var n=e.length;n--;)for(var r=0;r<t.length;r++)if(!p(e[n],t[r])){while(n<e.length){while(r--)p(t[r],e[n]);r=t.length,n++}return[e,t]}return e.selectionBefore=t.selectionBefore=e.selectionAfter=t.selectionAfter=null,[t,e]}function v(e,t){var n=e.action=="insert",r=t.action=="insert";if(n&&r)o(e.start,t.start)<0?m(t,e,1):m(e,t,1);else if(n&&!r)o(e.start,t.end)>=0?m(e,t,-1):o(e.start,t.start)<=0?m(t,e,1):(m(e,s.fromPoints(t.start,e.start),-1),m(t,e,1));else if(!n&&r)o(t.start,e.end)>=0?m(t,e,-1):o(t.start,e.start)<=0?m(e,t,1):(m(t,s.fromPoints(e.start,t.start),-1),m(e,t,1));else if(!n&&!r)if(o(t.start,e.end)>=0)m(t,e,-1);else{if(!(o(t.end,e.start)<=0)){var i,u;return o(e.start,t.start)<0&&(i=e,e=y(e,t.start)),o(e.end,t.end)>0&&(u=y(e,t.end)),g(t.end,e.start,e.end,-1),u&&!i&&(e.lines=u.lines,e.start=u.start,e.end=u.end,u=e),[t,i,u].filter(Boolean)}m(e,t,-1)}return[t,e]}function m(e,t,n){g(e.start,t.start,t.end,n),g(e.end,t.start,t.end,n)}function g(e,t,n,r){e.row==(r==1?t:n).row&&(e.column+=r*(n.column-t.column)),e.row+=r*(n.row-t.row)}function y(e,t){var n=e.lines,r=e.end;e.end=f(t);var i=e.end.row-e.start.row,s=n.splice(i,n.length),o=i?t.column:t.column-e.start.column;n.push(s[0].substring(0,o)),s[0]=s[0].substr(o);var u={start:f(t),end:r,lines:s,action:e.action};return u}function b(e,t){t=l(t);for(var n=e.length;n--;){var r=e[n];for(var i=0;i<r.length;i++){var s=r[i],o=v(s,t);t=o[0],o.length!=2&&(o[2]?(r.splice(i+1,1,o[1],o[2]),i++):o[1]||(r.splice(i,1),i--))}r.length||e.splice(n,1)}return e}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];for(var i=0;i<r.length;i++)b(e,r[i])}}var r=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(e){this.$session=e},this.add=function(e,t,n){if(this.$fromUndo)return;if(e==this.$lastDelta)return;this.$keepRedoStack||(this.$redoStack.length=0);if(t===!1||!this.lastDeltas)this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev;if(e.action=="remove"||e.action=="insert")this.$lastDelta=e;this.lastDeltas.push(e)},this.addSelection=function(e,t){this.selections.push({value:e,rev:t||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(e,t){t==null&&(t=this.$rev+1);var n=this.$undoStack;for(var r=n.length;r--;){var i=n[r][0];if(i.id<=e)break;i.id<t&&(i.ignore=!0)}this.lastDeltas=null},this.getSelection=function(e,t){var n=this.selections;for(var r=n.length;r--;){var i=n[r];if(i.rev<e)return t&&(i=n[r+1]),i}},this.getRevision=function(){return this.$rev},this.getDeltas=function(e,t){t==null&&(t=this.$rev+1);var n=this.$undoStack,r=null,i=0;for(var s=n.length;s--;){var o=n[s][0];o.id<t&&!r&&(r=s+1);if(o.id<=e){i=s+1;break}}return n.slice(i,r)},this.getChangedRanges=function(e,t){t==null&&(t=this.$rev+1)},this.getChangedLines=function(e,t){t==null&&(t=this.$rev+1)},this.undo=function(e,t){this.lastDeltas=null;var n=this.$undoStack;if(!i(n,n.length))return;e||(e=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var r=n.pop(),s=null;return r&&(s=e.undoChanges(r,t),this.$redoStack.push(r),this.$syncRev()),this.$fromUndo=!1,s},this.redo=function(e,t){this.lastDeltas=null,e||(e=this.$session),this.$fromUndo=!0;if(this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);w(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(e){e[0].id=++this.$maxRev},this)}var r=this.$redoStack.pop(),i=null;return r&&(i=e.redoChanges(r,t),this.$undoStack.push(r),this.$syncRev()),this.$fromUndo=!1,i},this.$syncRev=function(){var e=this.$undoStack,t=e[e.length-1],n=t&&t[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(e){e==undefined&&(e=this.$rev),this.mark=e},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(e){return e?c(e):c(this.$undoStack)+"\n---\n"+c(this.$redoStack)}}).call(r.prototype);var s=e("./range").Range,o=s.comparePoints,u=s.comparePoints;t.UndoManager=r}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../lib/dom"),i=function(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(e){r.translate(this.element,0,-(e.firstRowScreen*e.lineHeight%this.canvasHeight)-e.offset*this.$offsetCoefficient)},this.pageChanged=function(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)},this.computeLineTop=function(e,t,n){var r=t.firstRowScreen*t.lineHeight,i=Math.floor(r/this.canvasHeight),s=n.documentToScreenRow(e,0)*t.lineHeight;return s-i*this.canvasHeight},this.computeLineHeight=function(e,t,n){return t.lineHeight*n.getRowLineCount(e)},this.getLength=function(){return this.cells.length},this.get=function(e){return this.cells[e]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);var t=r.createFragment(this.element);for(var n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)},this.unshift=function(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);var t=r.createFragment(this.element);for(var n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement("afterbegin",e.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(e){if(!e)return;e.element.remove(),this.cellCache.push(e)},this.createCell=function(e,t,n,i){var s=this.cellCache.pop();if(!s){var o=r.createElement("div");i&&i(o),this.element.appendChild(o),s={element:o,text:"",row:e}}return s.row=e,s}}).call(i.prototype),t.Lines=i}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],function(e,t,n){"use strict";function f(e){var t=document.createTextNode("");e.appendChild(t);var n=r.createElement("span");return e.appendChild(n),e}var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,u=e("./lines").Lines,a=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new u(this.element),this.$lines.$offsetCoefficient=1};(function(){i.implement(this,o),this.setSession=function(e){this.session&&this.session.off("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],r=n.row,i=this.$annotations[r];i||(i=this.$annotations[r]={text:[]});var o=n.text;o=o?s.escapeHTML(o):n.html||"",i.text.indexOf(o)===-1&&i.text.push(o);var u=n.type;u=="error"?i.className=" ace_error":u=="warning"&&i.className!=" ace_error"?i.className=" ace_warning":u=="info"&&!i.className&&(i.className=" ace_info")}},this.$updateAnnotations=function(e){if(!this.$annotations.length)return;var t=e.start.row,n=e.end.row-t;if(n!==0)if(e.action=="remove")this.$annotations.splice(t,n+1,null);else{var r=new Array(n+1);r.unshift(t,1),this.$annotations.splice.apply(this.$annotations,r)}},this.update=function(e){this.config=e;var t=this.session,n=e.firstRow,r=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=r,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();var i=t.getNextFoldLine(n),s=i?i.start.row:Infinity,o=null,u=-1,a=n;for(;;){a>s&&(a=i.end.row+1,i=t.getNextFoldLine(a,i),s=i?i.start.row:Infinity);if(a>r){while(this.$lines.getLength()>u+1)this.$lines.pop();break}o=this.$lines.get(++u),o?o.row=a:(o=this.$lines.createCell(a,e,this.session,f),this.$lines.push(o)),this.$renderCell(o,e,i,a),a++}this._signal("afterRender"),this.$updateGutterWidth(e)},this.$updateGutterWidth=function(e){var t=this.session,n=t.gutterRenderer||this.$renderer,r=t.$firstLineNumber,i=this.$lines.last()?this.$lines.last().text:"";if(this.$fixedWidth||t.$useWrapMode)i=t.getLength()+r-1;var s=n?n.getWidth(t,i,e):i.toString().length*e.characterWidth,o=this.$padding||this.$computePadding();s+=o.left+o.right,s!==this.gutterWidth&&!isNaN(s)&&(this.gutterWidth=s,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",s))},this.$updateCursorRow=function(){if(!this.$highlightGutterLine)return;var e=this.session.selection.getCursor();if(this.$cursorRow===e.row)return;this.$cursorRow=e.row},this.updateLineHighlight=function(){if(!this.$highlightGutterLine)return;var e=this.session.selection.cursor.row;this.$cursorRow=e;if(this.$cursorCell&&this.$cursorCell.row==e)return;this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<t.length;n++){var r=t[n];if(r.row>=this.$cursorRow){if(r.row>this.$cursorRow){var i=this.session.getFoldLine(this.$cursorRow);if(!(n>0&&i&&i.start.row==t[n-1].row))break;r=t[n-1]}r.element.className="ace_gutter-active-line "+r.element.className,this.$cursorCell=r;break}}},this.scrollLines=function(e){var t=this.config;this.config=e,this.$updateCursorRow();if(this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),r=this.oldLastRow;this.oldLastRow=n;if(!t||r<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(r>n)for(var i=this.session.getFoldedRowCount(n+1,r);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),n>r&&this.$lines.push(this.$renderLines(e,r+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},this.$renderLines=function(e,t,n){var r=[],i=t,s=this.session.getNextFoldLine(i),o=s?s.start.row:Infinity;for(;;){i>o&&(i=s.end.row+1,s=this.session.getNextFoldLine(i,s),o=s?s.start.row:Infinity);if(i>n)break;var u=this.$lines.createCell(i,e,this.session,f);this.$renderCell(u,e,s,i),r.push(u),i++}return r},this.$renderCell=function(e,t,n,i){var s=e.element,o=this.session,u=s.childNodes[0],a=s.childNodes[1],f=o.$firstLineNumber,l=o.$breakpoints,c=o.$decorations,h=o.gutterRenderer||this.$renderer,p=this.$showFoldWidgets&&o.foldWidgets,d=n?n.start.row:Number.MAX_VALUE,v="ace_gutter-cell ";this.$highlightGutterLine&&(i==this.$cursorRow||n&&i<this.$cursorRow&&i>=d&&this.$cursorRow<=n.end.row)&&(v+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),l[i]&&(v+=l[i]),c[i]&&(v+=c[i]),this.$annotations[i]&&(v+=this.$annotations[i].className),s.className!=v&&(s.className=v);if(p){var m=p[i];m==null&&(m=p[i]=o.getFoldWidget(i))}if(m){var v="ace_fold-widget ace_"+m;m=="start"&&i==d&&i<n.end.row?v+=" ace_closed":v+=" ace_open",a.className!=v&&(a.className=v);var g=t.lineHeight+"px";r.setStyle(a.style,"height",g),r.setStyle(a.style,"display","inline-block")}else a&&r.setStyle(a.style,"display","none");var y=(h?h.getText(o,i):i+f).toString();return y!==u.data&&(u.data=y),r.setStyle(e.element.style,"height",this.$lines.computeLineHeight(i,t,o)+"px"),r.setStyle(e.element.style,"top",this.$lines.computeLineTop(i,t,o)+"px"),e.text=y,e},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();if(e.x<t.left+n.left)return"markers";if(this.$showFoldWidgets&&e.x>n.right-t.right)return"foldWidgets"}}).call(a.prototype),t.Gutter=a}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../range").Range,i=e("../lib/dom"),s=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){function e(e,t,n,r){return(e?1:0)|(t?2:0)|(n?4:0)|(r?8:0)}this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.elt=function(e,t){var n=this.i!=-1&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=t,n.className=e},this.update=function(e){if(!e)return;this.config=e,this.i=0;var t;for(var n in this.markers){var r=this.markers[n];if(!r.range){r.update(t,this,this.session,e);continue}var i=r.range.clipRows(e.firstRow,e.lastRow);if(i.isEmpty())continue;i=i.toScreenRange(this.session);if(r.renderer){var s=this.$getTop(i.start.row,e),o=this.$padding+i.start.column*e.characterWidth;r.renderer(t,i,o,s,e)}else r.type=="fullLine"?this.drawFullLineMarker(t,i,r.clazz,e):r.type=="screenLine"?this.drawScreenLineMarker(t,i,r.clazz,e):i.isMultiLine()?r.type=="text"?this.drawTextMarker(t,i,r.clazz,e):this.drawMultiLineMarker(t,i,r.clazz,e):this.drawSingleLineMarker(t,i,r.clazz+" ace_start"+" ace_br15",e)}if(this.i!=-1)while(this.i<this.element.childElementCount)this.element.removeChild(this.element.lastChild)},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(t,n,i,s,o){var u=this.session,a=n.start.row,f=n.end.row,l=a,c=0,h=0,p=u.getScreenLastRowColumn(l),d=new r(l,n.start.column,l,h);for(;l<=f;l++)d.start.row=d.end.row=l,d.start.column=l==a?n.start.column:u.getRowWrapIndent(l),d.end.column=p,c=h,h=p,p=l+1<f?u.getScreenLastRowColumn(l+1):l==f?0:n.end.column,this.drawSingleLineMarker(t,d,i+(l==a?" ace_start":"")+" ace_br"+e(l==a||l==a+1&&n.start.column,c<h,h>p,l==f),s,l==f?0:1,o)},this.drawMultiLineMarker=function(e,t,n,r,i){var s=this.$padding,o=r.lineHeight,u=this.$getTop(t.start.row,r),a=s+t.start.column*r.characterWidth;i=i||"";if(this.session.$bidiHandler.isBidiRow(t.start.row)){var f=t.clone();f.end.row=f.start.row,f.end.column=this.session.getLine(f.start.row).length,this.drawBidiSingleLineMarker(e,f,n+" ace_br1 ace_start",r,null,i)}else this.elt(n+" ace_br1 ace_start","height:"+o+"px;"+"right:0;"+"top:"+u+"px;left:"+a+"px;"+(i||""));if(this.session.$bidiHandler.isBidiRow(t.end.row)){var f=t.clone();f.start.row=f.end.row,f.start.column=0,this.drawBidiSingleLineMarker(e,f,n+" ace_br12",r,null,i)}else{u=this.$getTop(t.end.row,r);var l=t.end.column*r.characterWidth;this.elt(n+" ace_br12","height:"+o+"px;"+"width:"+l+"px;"+"top:"+u+"px;"+"left:"+s+"px;"+(i||""))}o=(t.end.row-t.start.row-1)*r.lineHeight;if(o<=0)return;u=this.$getTop(t.start.row+1,r);var c=(t.start.column?1:0)|(t.end.column?0:8);this.elt(n+(c?" ace_br"+c:""),"height:"+o+"px;"+"right:0;"+"top:"+u+"px;"+"left:"+s+"px;"+(i||""))},this.drawSingleLineMarker=function(e,t,n,r,i,s){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,n,r,i,s);var o=r.lineHeight,u=(t.end.column+(i||0)-t.start.column)*r.characterWidth,a=this.$getTop(t.start.row,r),f=this.$padding+t.start.column*r.characterWidth;this.elt(n,"height:"+o+"px;"+"width:"+u+"px;"+"top:"+a+"px;"+"left:"+f+"px;"+(s||""))},this.drawBidiSingleLineMarker=function(e,t,n,r,i,s){var o=r.lineHeight,u=this.$getTop(t.start.row,r),a=this.$padding,f=this.session.$bidiHandler.getSelections(t.start.column,t.end.column);f.forEach(function(e){this.elt(n,"height:"+o+"px;"+"width:"+e.width+(i||0)+"px;"+"top:"+u+"px;"+"left:"+(a+e.left)+"px;"+(s||""))},this)},this.drawFullLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;t.start.row!=t.end.row&&(o+=this.$getTop(t.end.row,r)-s),this.elt(n,"height:"+o+"px;"+"top:"+s+"px;"+"left:0;right:0;"+(i||""))},this.drawScreenLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;this.elt(n,"height:"+o+"px;"+"top:"+s+"px;"+"left:0;right:0;"+(i||""))}}).call(s.prototype),t.Marker=s}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),o=e("./lines").Lines,u=e("../lib/event_emitter").EventEmitter,a=function(e){this.dom=i,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new o(this.element)};(function(){r.implement(this,u),this.EOF_CHAR="\u00b6",this.EOL_CHAR_LF="\u00ac",this.EOL_CHAR_CRLF="\u00a4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\u00b7",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var e=this.session.doc,t=e.getNewLineCharacter()=="\n"&&e.getNewLineMode()!="windows",n=t?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=n)return this.EOL_CHAR=n,!0},this.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,typeof e=="string"?(this.showSpaces=/tab/i.test(e),this.showTabs=/space/i.test(e),this.showEOL=/eol/i.test(e)):this.showSpaces=this.showTabs=this.showEOL=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;var t=this.$tabStrings=[0];for(var n=1;n<e+1;n++)if(this.showTabs){var r=this.dom.createElement("span");r.className="ace_invisible ace_invisible_tab",r.textContent=s.stringRepeat(this.TAB_CHAR,n),t.push(r)}else t.push(this.dom.createTextNode(s.stringRepeat(" ",n),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i="ace_indent-guide",o=this.showSpaces?" ace_invisible ace_invisible_space":"",u=this.showSpaces?s.stringRepeat(this.SPACE_CHAR,this.tabSize):s.stringRepeat(" ",this.tabSize),a=this.showTabs?" ace_invisible ace_invisible_tab":"",f=this.showTabs?s.stringRepeat(this.TAB_CHAR,this.tabSize):u,r=this.dom.createElement("span");r.className=i+o,r.textContent=u,this.$tabStrings[" "]=r;var r=this.dom.createElement("span");r.className=i+a,r.textContent=f,this.$tabStrings["	"]=r}},this.updateLines=function(e,t,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;var r=Math.max(t,e.firstRow),i=Math.min(n,e.lastRow),s=this.element.childNodes,o=0;for(var u=e.firstRow;u<r;u++){var a=this.session.getFoldLine(u);if(a){if(a.containsRow(r)){r=a.start.row;break}u=a.end.row}o++}var f=!1,u=r,a=this.session.getNextFoldLine(u),l=a?a.start.row:Infinity;for(;;){u>l&&(u=a.end.row+1,a=this.session.getNextFoldLine(u,a),l=a?a.start.row:Infinity);if(u>i)break;var c=s[o++];if(c){this.dom.removeChildren(c),this.$renderLine(c,u,u==l?a:!1),f&&(c.style.top=this.$lines.computeLineTop(u,e,this.session)+"px");var h=e.lineHeight*this.session.getRowLength(u)+"px";c.style.height!=h&&(f=!0,c.style.height=h)}u++}if(f)while(o<this.$lines.cells.length){var p=this.$lines.cells[o++];p.element.style.top=this.$lines.computeLineTop(p.row,e,this.session)+"px"}},this.scrollLines=function(e){var t=this.config;this.config=e;if(this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=e.lastRow,r=t?t.lastRow:-1;if(!t||r<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(t.lastRow>e.lastRow)for(var i=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow))},this.$renderLinesFragment=function(e,t,n){var r=[],s=t,o=this.session.getNextFoldLine(s),u=o?o.start.row:Infinity;for(;;){s>u&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),u=o?o.start.row:Infinity);if(s>n)break;var a=this.$lines.createCell(s,e,this.session),f=a.element;this.dom.removeChildren(f),i.setStyle(f.style,"height",this.$lines.computeLineHeight(s,e,this.session)+"px"),i.setStyle(f.style,"top",this.$lines.computeLineTop(s,e,this.session)+"px"),this.$renderLine(f,s,s==u?o:!1),this.$useLineGroups()?f.className="ace_line_group":f.className="ace_line",r.push(a),s++}return r},this.update=function(e){this.$lines.moveContainer(e),this.config=e;var t=e.firstRow,n=e.lastRow,r=this.$lines;while(r.getLength())r.pop();r.push(this.$renderLinesFragment(e,t,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,r){var i=this,o=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,u=this.dom.createFragment(this.element),a,f=0;while(a=o.exec(r)){var l=a[1],c=a[2],h=a[3],p=a[4],d=a[5];if(!i.showSpaces&&c)continue;var v=f!=a.index?r.slice(f,a.index):"";f=a.index+a[0].length,v&&u.appendChild(this.dom.createTextNode(v,this.element));if(l){var m=i.session.getScreenTabSize(t+a.index);u.appendChild(i.$tabStrings[m].cloneNode(!0)),t+=m-1}else if(c)if(i.showSpaces){var g=this.dom.createElement("span");g.className="ace_invisible ace_invisible_space",g.textContent=s.stringRepeat(i.SPACE_CHAR,c.length),u.appendChild(g)}else u.appendChild(this.com.createTextNode(c,this.element));else if(h){var g=this.dom.createElement("span");g.className="ace_invisible ace_invisible_space ace_invalid",g.textContent=s.stringRepeat(i.SPACE_CHAR,h.length),u.appendChild(g)}else if(p){t+=1;var g=this.dom.createElement("span");g.style.width=i.config.characterWidth*2+"px",g.className=i.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",g.textContent=i.showSpaces?i.SPACE_CHAR:p,u.appendChild(g)}else if(d){t+=1;var g=this.dom.createElement("span");g.style.width=i.config.characterWidth*2+"px",g.className="ace_cjk",g.textContent=d,u.appendChild(g)}}u.appendChild(this.dom.createTextNode(f?r.slice(f):r,this.element));if(!this.$textToken[n.type]){var y="ace_"+n.type.replace(/\./g," ace_"),g=this.dom.createElement("span");n.type=="fold"&&(g.style.width=n.value.length*this.config.characterWidth+"px"),g.className=y,g.appendChild(u),e.appendChild(g)}else e.appendChild(u);return t+r.length},this.renderIndentGuide=function(e,t,n){var r=t.search(this.$indentGuideRe);if(r<=0||r>=n)return t;if(t[0]==" "){r-=r%this.tabSize;var i=r/this.tabSize;for(var s=0;s<i;s++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return t.substr(r)}if(t[0]=="	"){for(var s=0;s<r;s++)e.appendChild(this.$tabStrings["	"].cloneNode(!0));return t.substr(r)}return t},this.$createLineElement=function(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t},this.$renderWrappedLine=function(e,t,n){var r=0,i=0,o=n[0],u=0,a=this.$createLineElement();e.appendChild(a);for(var f=0;f<t.length;f++){var l=t[f],c=l.value;if(f==0&&this.displayIndentGuides){r=c.length,c=this.renderIndentGuide(a,c,o);if(!c)continue;r-=c.length}if(r+c.length<o)u=this.$renderToken(a,u,l,c),r+=c.length;else{while(r+c.length>=o)u=this.$renderToken(a,u,l,c.substring(0,o-r)),c=c.substring(o-r),r=o,a=this.$createLineElement(),e.appendChild(a),a.appendChild(this.dom.createTextNode(s.stringRepeat("\u00a0",n.indent),this.element)),i++,u=0,o=n[i]||Number.MAX_VALUE;c.length!=0&&(r+=c.length,u=this.$renderToken(a,u,l,c))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(a,u,null,"",!0)},this.$renderSimpleLine=function(e,t){var n=0,r=t[0],i=r.value;this.displayIndentGuides&&(i=this.renderIndentGuide(e,i)),i&&(n=this.$renderToken(e,n,r,i));for(var s=1;s<t.length;s++){r=t[s],i=r.value;if(n+i.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,n,r,i);n=this.$renderToken(e,n,r,i)}},this.$renderOverflowMessage=function(e,t,n,r,i){n&&this.$renderToken(e,t,n,r.slice(0,this.MAX_LINE_LENGTH-t));var s=this.dom.createElement("span");s.className="ace_inline_button ace_keyword ace_toggle_wrap",s.textContent=i?"<hide>":"<click to see more...>",e.appendChild(s)},this.$renderLine=function(e,t,n){!n&&n!=0&&(n=this.session.getFoldLine(t));if(n)var r=this.$getFoldLineTokens(t,n);else var r=this.session.getTokens(t);var i=e;if(r.length){var s=this.session.getRowSplitData(t);if(s&&s.length){this.$renderWrappedLine(e,r,s);var i=e.lastChild}else{var i=e;this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i)),this.$renderSimpleLine(i,r)}}else this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i));if(this.showEOL&&i){n&&(t=n.end.row);var o=this.dom.createElement("span");o.className="ace_invisible ace_invisible_eol",o.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,i.appendChild(o)}},this.$getFoldLineTokens=function(e,t){function i(e,t,n){var i=0,s=0;while(s+e[i].value.length<t){s+=e[i].value.length,i++;if(i==e.length)return}if(s!=t){var o=e[i].value.substring(t-s);o.length>n-t&&(o=o.substring(0,n-t)),r.push({type:e[i].type,value:o}),s=t+o.length,i+=1}while(s<n&&i<e.length){var o=e[i].value;o.length+s>n?r.push({type:e[i].type,value:o.substring(0,n-s)}):r.push(e[i]),s+=o.length,i+=1}}var n=this.session,r=[],s=n.getTokens(e);return t.walk(function(e,t,o,u,a){e!=null?r.push({type:"fold",value:e}):(a&&(s=n.getTokens(t)),s.length&&i(s,u,o))},t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(a.prototype),t.Text=a}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../lib/dom"),i=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(e){var t=this.cursors;for(var n=t.length;n--;)r.setStyle(t[n].style,"opacity",e?"":"0")},this.$startCssAnimation=function(){var e=this.cursors;for(var t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&r.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){this.$isAnimating=!1,r.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,r.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var e=r.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,r.removeCssClass(this.element,"ace_smooth-blinking")),e(!0);if(!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this)));if(r.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var t=function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()}},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e),r=this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,e.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),i=(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:i}},this.isCursorInView=function(e,t){return e.top>=0&&e.top<t.maxHeight},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,i=0;if(t===undefined||t.length===0)t=[{cursor:null}];for(var n=0,s=t.length;n<s;n++){var o=this.getPixelPosition(t[n].cursor,!0);if((o.top>e.height+e.offset||o.top<0)&&n>1)continue;var u=this.cursors[i++]||this.addCursor(),a=u.style;this.drawCursor?this.drawCursor(u,o,e,t[n],this.session):this.isCursorInView(o,e)?(r.setStyle(a,"display","block"),r.translate(u,o.left,o.top),r.setStyle(a,"width",Math.round(e.characterWidth)+"px"),r.setStyle(a,"height",e.lineHeight+"px")):r.setStyle(a,"display","none")}while(this.cursors.length>i)this.removeCursor();var f=this.session.getOverwrite();this.$setOverwrite(f),this.$pixelPos=o,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(i.prototype),t.Cursor=i}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/event"),o=e("./lib/event_emitter").EventEmitter,u=32768,a=function(e){this.element=i.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=i.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\u00a0",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addListener(this.element,"scroll",this.onScroll.bind(this)),s.addListener(this.element,"mousedown",s.preventDefault)};(function(){r.implement(this,o),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}).call(a.prototype);var f=function(e,t){a.call(this,e),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=i.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};r.inherits(f,a),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){this.scrollTop=this.element.scrollTop;if(this.coeff!=1){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=this.setScrollHeight=function(e){this.scrollHeight=e,e>u?(this.coeff=u/e,e=u):this.coeff!=1&&(this.coeff=1),this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}}.call(f.prototype);var l=function(e,t){a.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};r.inherits(l,a),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(l.prototype),t.ScrollBar=f,t.ScrollBarV=f,t.ScrollBarH=l,t.VScrollBar=f,t.HScrollBar=l}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var r=e("./lib/event"),i=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var n=this;this._flush=function(e){n.pending=!1;var t=n.changes;t&&(r.blockIdle(100),n.changes=0,n.onRender(t));if(n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}};(function(){this.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(r.nextFrame(this._flush),this.pending=!0)},this.clear=function(e){var t=this.changes;return this.changes=0,t}}).call(i.prototype),t.RenderLoop=i}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),o=e("../lib/event"),u=e("../lib/useragent"),a=e("../lib/event_emitter").EventEmitter,f=256,l=typeof ResizeObserver=="function",c=200,h=t.FontMetrics=function(e){this.el=i.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.textContent=s.stringRepeat("X",f),this.$characterSize={width:0,height:0},l?this.$addObserver():this.checkForSizeChanges()};(function(){r.implement(this,a),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",u.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(e){e===undefined&&(e=this.$measureSizes());if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$addObserver=function(){var e=this;this.$observer=new window.ResizeObserver(function(t){e.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=o.onIdle(function t(){e.checkForSizeChanges(),o.onIdle(t,500)},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(e){var t={height:(e||this.$measureNode).clientHeight,width:(e||this.$measureNode).clientWidth/f};return t.width===0||t.height===0?null:t},this.$measureCharWidth=function(e){this.$main.textContent=s.stringRepeat(e,f);var t=this.$main.getBoundingClientRect();return t.width/f},this.getCharacterWidth=function(e){var t=this.charSizes[e];return t===undefined&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function e(t){return!t||!t.parentElement?1:(window.getComputedStyle(t).zoom||1)*e(t.parentElement)},this.$initTransformMeasureNodes=function(){var e=function(e,t){return["div",{style:"position: absolute;top:"+e+"px;left:"+t+"px;"}]};this.els=i.buildDom([e(0,0),e(c,0),e(0,c),e(c,c)],this.el)},this.transformCoordinates=function(e,t){function r(e,t,n){var r=e[1]*t[0]-e[0]*t[1];return[(-t[1]*n[0]+t[0]*n[1])/r,(+e[1]*n[0]-e[0]*n[1])/r]}function i(e,t){return[e[0]-t[0],e[1]-t[1]]}function s(e,t){return[e[0]+t[0],e[1]+t[1]]}function o(e,t){return[e*t[0],e*t[1]]}function u(e){var t=e.getBoundingClientRect();return[t.left,t.top]}if(e){var n=this.$getZoom(this.el);e=o(1/n,e)}this.els||this.$initTransformMeasureNodes();var a=u(this.els[0]),f=u(this.els[1]),l=u(this.els[2]),h=u(this.els[3]),p=r(i(h,f),i(h,l),i(s(f,l),s(h,a))),d=o(1+p[0],i(f,a)),v=o(1+p[1],i(l,a));if(t){var m=t,g=p[0]*m[0]/c+p[1]*m[1]/c+1,y=s(o(m[0],d),o(m[1],v));return s(o(1/g/c,y),a)}var b=i(e,a),w=r(i(d,o(p[0],b)),i(v,o(p[1],b)),b);return o(c,w)}}).call(h.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./config"),o=e("./layer/gutter").Gutter,u=e("./layer/marker").Marker,a=e("./layer/text").Text,f=e("./layer/cursor").Cursor,l=e("./scrollbar").HScrollBar,c=e("./scrollbar").VScrollBar,h=e("./renderloop").RenderLoop,p=e("./layer/font_metrics").FontMetrics,d=e("./lib/event_emitter").EventEmitter,v='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;padding: 0;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;font-variant-ligatures: no-common-ligatures;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_error_bracket {position: absolute;border-bottom: 1px solid #DE5555;border-radius: 0;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);transform-origin: left;white-space: pre;opacity: 0.7;margin: 0 10px;}',m=e("./lib/useragent"),g=m.isIE;i.importCssString(v,"ace_editor.css",!1);var y=function(e,t){var n=this;this.container=e||i.createElement("div"),i.addCssClass(this.container,"ace_editor"),i.HI_DPI&&i.addCssClass(this.container,"ace_hidpi"),this.setTheme(t),s.get("useStrictCSP")==null&&s.set("useStrictCSP",!1),this.$gutter=i.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=i.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=i.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new o(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new u(this.content);var r=this.$textLayer=new a(this.content);this.canvas=r.element,this.$markerFront=new u(this.content),this.$cursorLayer=new f(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new c(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.on("scroll",function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)}),this.scrollBarH.on("scroll",function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!m.isIOS,this.$loop=new h(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),s.resetOptions(this),s._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,d),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),i.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e);if(!e)return;this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode)},this.updateLines=function(e,t,n){t===undefined&&(t=Infinity),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t};if(this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}if(this.$changedLines.firstRow>this.layerConfig.lastRow)return;this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,r){if(this.resizing>2)return;this.resizing>0?this.resizing++:this.resizing=e?1:0;var i=this.container;r||(r=i.clientHeight||i.scrollHeight),n||(n=i.clientWidth||i.scrollWidth);var s=this.$updateCachedSize(e,t,n,r);if(!this.$size.scrollerHeight||!n&&!r)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(s|this.$changes,!0):this.$loop.schedule(s|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null},this.$updateCachedSize=function(e,t,n,r){r-=this.$extraHeight||0;var s=0,o=this.$size,u={width:o.width,height:o.height,scrollerHeight:o.scrollerHeight,scrollerWidth:o.scrollerWidth};r&&(e||o.height!=r)&&(o.height=r,s|=this.CHANGE_SIZE,o.scrollerHeight=o.height,this.$horizScroll&&(o.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",s|=this.CHANGE_SCROLL);if(n&&(e||o.width!=n)){s|=this.CHANGE_SIZE,o.width=n,t==null&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,i.setStyle(this.scrollBarH.element.style,"left",t+"px"),i.setStyle(this.scroller.style,"left",t+this.margin.left+"px"),o.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()-this.margin.h),i.setStyle(this.$gutter.style,"left",this.margin.left+"px");var a=this.scrollBarV.getWidth()+"px";i.setStyle(this.scrollBarH.element.style,"right",a),i.setStyle(this.scroller.style,"right",a),i.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight());if(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)s|=this.CHANGE_FULL}return o.$dirty=!n||!r,s&&this._signal("resize",u),s},this.onGutterResize=function(e){var t=this.$showGutter?e:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-this.$padding*2,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(!this.$showPrintMargin&&!this.$printMarginEl)return;if(!this.$printMarginEl){var e=i.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=i.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$isMousePressed)return;var e=this.textarea.style,t=this.$composition;if(!this.$keepTextAreaAtCursor&&!t){i.translate(this.textarea,-100,0);return}var n=this.$cursorLayer.$pixelPos;if(!n)return;t&&t.markerRange&&(n=this.$cursorLayer.getPixelPosition(t.markerRange.start,!0));var r=this.layerConfig,s=n.top,o=n.left;s-=r.offset;var u=t&&t.useTextareaForIME?this.lineHeight:g?0:1;if(s<0||s>r.height-u){i.translate(this.textarea,0,0);return}var a=1,f=this.$size.height-u;if(!t)s+=this.lineHeight;else if(t.useTextareaForIME){var l=this.textarea.value;a=this.characterWidth*this.session.$getStringScreenWidth(l)[0]}else s+=this.lineHeight+2;o-=this.scrollLeft,o>this.$size.scrollerWidth-a&&(o=this.$size.scrollerWidth-a),o+=this.gutterWidth+this.margin.left,i.setStyle(e,"height",u+"px"),i.setStyle(e,"width",a+"px"),i.translate(this.textarea,Math.min(o,this.$size.scrollerWidth-a),Math.min(s,f))},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},this.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow,n=this.session.documentToScreenRow(t,0)*e.lineHeight;return n-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,r){var i=this.scrollMargin;i.top=e|0,i.bottom=t|0,i.right=r|0,i.left=n|0,i.v=i.top+i.bottom,i.h=i.left+i.right,i.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-i.top),this.updateFull()},this.setMargin=function(e,t,n,r){var i=this.margin;i.top=e|0,i.bottom=t|0,i.right=r|0,i.left=n|0,i.v=i.top+i.bottom,i.h=i.left+i.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){this.$changes&&(e|=this.$changes,this.$changes=0);if(!this.session||!this.container.offsetWidth||this.$frozen||!e&&!t){this.$changes|=e;return}if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",e),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){e|=this.$computeLayerConfig()|this.$loop.clear();if(n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var r=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;r>0&&(this.scrollTop=r,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),i.translate(this.content,-this.scrollLeft,-n.offset);var s=n.width+2*this.$padding+"px",o=n.minHeight+"px";i.setStyle(this.content.style,"width",s),i.setStyle(this.content.style,"height",o)}e&this.CHANGE_H_SCROLL&&(i.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left");if(e&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this._signal("afterRender",e);return}if(e&this.CHANGE_SCROLL){this.$changedLines=null,e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this._signal("afterRender",e);return}e&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(n):e&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender",e)},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var r=n<=2*this.lineHeight,i=!r&&e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var s=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,s,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,r=this.session.getScreenLength(),i=r*this.lineHeight,s=this.$getLongestLine(),o=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-s-2*this.$padding<0),u=this.$horizScroll!==o;u&&(this.$horizScroll=o,this.scrollBarH.setVisible(o));var a=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var f=t.scrollerHeight+this.lineHeight,l=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;i+=l;var c=this.scrollMargin;this.session.setScrollTop(Math.max(-c.top,Math.min(this.scrollTop,i-t.scrollerHeight+c.bottom))),this.session.setScrollLeft(Math.max(-c.left,Math.min(this.scrollLeft,s+2*this.$padding-t.scrollerWidth+c.right)));var h=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-i+l<0||this.scrollTop>c.top),p=a!==h;p&&(this.$vScroll=h,this.scrollBarV.setVisible(h));var d=this.scrollTop%this.lineHeight,v=Math.ceil(f/this.lineHeight)-1,m=Math.max(0,Math.round((this.scrollTop-d)/this.lineHeight)),g=m+v,y,b,w=this.lineHeight;m=e.screenToDocumentRow(m,0);var E=e.getFoldLine(m);E&&(m=E.start.row),y=e.documentToScreenRow(m,0),b=e.getRowLength(m)*w,g=Math.min(e.screenToDocumentRow(g,0),e.getLength()-1),f=t.scrollerHeight+e.getRowLength(g)*w+b,d=this.scrollTop-y*w;var S=0;if(this.layerConfig.width!=s||u)S=this.CHANGE_H_SCROLL;if(u||p)S|=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),p&&(s=this.$getLongestLine());return this.layerConfig={width:s,padding:this.$padding,firstRow:m,firstRowScreen:y,lastRow:g,lineHeight:w,characterWidth:this.characterWidth,minHeight:f,maxHeight:i,offset:d,gutterOffset:w?Math.max(0,Math.ceil((d+t.height-t.scrollerHeight)/w)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(s-this.$padding),S},this.$updateLines=function(){if(!this.$changedLines)return;var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(e>n.lastRow+1)return;if(t<n.firstRow)return;if(t===Infinity){this.$showGutter&&this.$gutterLayer.update(n),this.$textLayer.update(n);return}return this.$textLayer.updateLines(n,e,t),!0},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(this.$size.scrollerHeight===0)return;var r=this.$cursorLayer.getPixelPosition(e),i=r.left,s=r.top,o=n&&n.top||0,u=n&&n.bottom||0,a=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;a+o>s?(t&&a+o>s+this.lineHeight&&(s-=t*this.$size.scrollerHeight),s===0&&(s=-this.scrollMargin.top),this.session.setScrollTop(s)):a+this.$size.scrollerHeight-u<s+this.lineHeight&&(t&&a+this.$size.scrollerHeight-u<s-this.lineHeight&&(s+=t*this.$size.scrollerHeight),this.session.setScrollTop(s+this.lineHeight+u-this.$size.scrollerHeight));var f=this.scrollLeft;f>i?(i<this.$padding+2*this.layerConfig.characterWidth&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):f+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(Math.round(i+this.characterWidth-this.$size.scrollerWidth)):f<=this.$padding&&i-f<this.characterWidth&&this.session.setScrollLeft(0)},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){typeof e=="number"&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),r=this.$size.scrollerHeight-this.lineHeight,i=n.top-r*(t||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,r=this.STEPS,i=[],s=function(e,t,n){return n*(Math.pow(e-1,3)+1)+t};for(n=0;n<r;++n)i.push(s(n/this.STEPS,e,t-e));return i},this.scrollToLine=function(e,t,n,r){var i=this.$cursorLayer.getPixelPosition({row:e,column:0}),s=i.top;t&&(s-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(s),n!==!1&&this.animateScrolling(o,r)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(!this.$animatedScroll)return;var r=this;if(e==n)return;if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length){e=i[0];if(e==n)return}}var s=r.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:s},clearInterval(this.$timer),r.session.setScrollTop(s.shift()),r.session.$scrollTop=n,this.$timer=setInterval(function(){if(!r.session)return clearInterval(r.$timer);s.length?(r.session.setScrollTop(s.shift()),r.session.$scrollTop=n):n!=null?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):(r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,t&&t())},10)},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(e)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){if(t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top)return!0;if(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom)return!0;if(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left)return!0;if(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},this.pixelToScreenCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else n=this.scroller.getBoundingClientRect();var i=e+this.scrollLeft-n.left-this.$padding,s=i/this.characterWidth,o=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),u=this.$blockCursor?Math.floor(s):Math.round(s);return{row:o,column:u,side:s-u>0?1:-1,offsetX:i}},this.screenToTextCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else n=this.scroller.getBoundingClientRect();var i=e+this.scrollLeft-n.left-this.$padding,s=i/this.characterWidth,o=this.$blockCursor?Math.floor(s):Math.round(s),u=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(u,Math.max(o,0),i)},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),i=this.$padding+(this.session.$bidiHandler.isBidiRow(r.row,e)?this.session.$bidiHandler.getPosLeft(r.column):Math.round(r.column*this.characterWidth)),s=r.row*this.lineHeight;return{pageX:n.left+i-this.scrollLeft,pageY:n.top+s-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition=e,e.cssText||(e.cssText=this.textarea.style.cssText),e.useTextareaForIME==undefined&&(e.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(i.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):e.markerId=this.session.addMarker(e.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(e){var t=this.session.selection.cursor;this.addToken(e,"composition_placeholder",t.row,t.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){if(!this.$composition)return;this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),i.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var e=this.session.selection.cursor;this.removeExtraToken(e.row,e.column),this.$composition=null,this.$cursorLayer.element.style.display=""},this.addToken=function(e,t,n,r){var i=this.session;i.bgTokenizer.lines[n]=null;var s={type:t,value:e},o=i.getTokens(n);if(r==null)o.push(s);else{var u=0;for(var a=0;a<o.length;a++){var f=o[a];u+=f.value.length;if(r<=u){var l=f.value.length-(u-r),c=f.value.slice(0,l),h=f.value.slice(l);o.splice(a,1,{type:f.type,value:c},s,{type:f.type,value:h});break}}}this.updateLines(n,n)},this.removeExtraToken=function(e,t){this.updateLines(e,e)},this.setTheme=function(e,t){function o(r){if(n.$themeId!=e)return t&&t();if(!r||!r.cssClass)throw new Error("couldn't load module "+e+" or it didn't call define");r.$id&&(n.$themeId=r.$id),i.importCssString(r.cssText,r.cssClass,n.container),n.theme&&i.removeCssClass(n.container,n.theme.cssClass);var s="padding"in r?r.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&s!=n.$padding&&n.setPadding(s),n.$theme=r.cssClass,n.theme=r,i.addCssClass(n.container,r.cssClass),i.setCssClass(n.container,"ace_dark",r.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:r}),t&&t()}var n=this;this.$themeId=e,n._dispatchEvent("themeChange",{theme:e});if(!e||typeof e=="string"){var r=e||this.$options.theme.initialValue;s.loadModule(["theme",r],o)}else o(e)},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){i.setCssClass(this.container,e,t!==!1)},this.unsetStyle=function(e){i.removeCssClass(this.container,e)},this.setCursorStyle=function(e){i.setStyle(this.scroller.style,"cursor",e)},this.setMouseCursor=function(e){i.setStyle(this.scroller.style,"cursor",e)},this.attachToShadowRoot=function(){i.importCssString(v,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""}}).call(y.prototype),s.defineOptions(y.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){typeof e=="number"&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){i.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){this.$gutterLayer.setHighlightGutterLine(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(e){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){typeof e=="number"&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){e=+e||0;if(this.$scrollPastEnd==e)return;this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!m.isMobile&&!m.isIE}}),t.VirtualRenderer=y}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";function u(e){var t="importScripts('"+i.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(n){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,s=new r;return s.append(t),s.getBlob("application/javascript")}}function a(e){if(typeof Worker=="undefined")return{postMessage:function(){},terminate:function(){}};if(o.get("loadWorkerFromBlob")){var t=u(e),n=window.URL||window.webkitURL,r=n.createObjectURL(t);return new Worker(r)}return new Worker(e)}var r=e("../lib/oop"),i=e("../lib/net"),s=e("../lib/event_emitter").EventEmitter,o=e("../config"),f=function(e){e.postMessage||(e=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=e,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){r.implement(this,s),this.$createWorkerFromOldConfig=function(t,n,r,i,s){e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl);if(o.get("packaged")||!e.toUrl)i=i||o.moduleUrl(n,"worker");else{var u=this.$normalizePath;i=i||u(e.toUrl("ace/worker/worker.js",null,"_"));var f={};t.forEach(function(t){f[t]=u(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=a(i),s&&this.send("importScripts",s),this.$worker.postMessage({init:!0,tlns:f,module:n,classname:r}),this.$worker},this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return i.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,t.push(r)}this.send(e,t)},this.emit=function(e,t){try{t.data&&t.data.err&&(t.data.err={message:t.data.err.message,stack:t.data.err.stack,code:t.data.err.code}),this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),e.action=="insert"?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;if(!e)return;this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e})}}).call(f.prototype);var l=function(e,t,n){var r=null,i=!1,u=Object.create(s),a=[],l=new f({messageBuffer:a,terminate:function(){},postMessage:function(e){a.push(e);if(!r)return;i?setTimeout(c):c()}});l.setEmitSync=function(e){i=e};var c=function(){var e=a.shift();e.command?r[e.command].apply(r,e.args):e.event&&u._signal(e.event,e.data)};return u.postMessage=function(e){l.onMessage({data:e})},u.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},u.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},o.loadModule(["worker",t],function(e){r=new e[n](u);while(a.length)c()}),l};t.UIWorkerClient=l,t.WorkerClient=f,t.createWorker=a}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var r=e("./range").Range,i=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),o=function(e,t,n,r,i,s){var o=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=i,this.othersClass=s,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=n;var u=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=u.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){s.implement(this,i),this.setup=function(){var e=this,t=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var i=this.pos;i.$insertRight=!0,i.detach(),i.markerId=n.addMarker(new r(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(n){var r=t.createAnchor(n.row,n.column);r.$insertRight=!0,r.detach(),e.others.push(r)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(this.othersActive)return;var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1)})},this.hideOtherMarkers=function(){if(!this.othersActive)return;this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row!==t.end.row)return;if(t.start.row!==this.pos.row)return;this.$updating=!0;var n=e.action==="insert"?t.end.column-t.start.column:t.start.column-t.end.column,i=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,s=t.start.column-this.pos.column;this.updateAnchors(e),i&&(this.length+=n);if(i&&!this.session.$fromUndo)if(e.action==="insert")for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};this.doc.insertMergedLines(a,e.lines)}else if(e.action==="remove")for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};this.doc.remove(new r(a.row,a.column,a.row,a.column-n))}this.$updating=!1,this.updateMarkers()},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(this.$updating)return;var e=this,t=this.session,n=function(n,i){t.removeMarker(n.markerId),n.markerId=t.addMarker(new r(n.row,n.column,n.row,n.column+e.length),i,null,!1)};n(this.pos,this.mainClass);for(var i=this.others.length;i--;)n(this.others[i],this.othersClass)},this.onCursorChange=function(e){if(this.$updating||!this.session)return;var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(this.$undoStackDepth===-1)return;var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth;for(var n=0;n<t;n++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}).call(o.prototype),t.PlaceHolder=o}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){function s(e,t){return e.row==t.row&&e.column==t.column}function o(e){var t=e.domEvent,n=t.altKey,o=t.shiftKey,u=t.ctrlKey,a=e.getAccelKey(),f=e.getButton();u&&i.isMac&&(f=t.button);if(e.editor.inMultiSelectMode&&f==2){e.editor.textInput.onContextMenu(e.domEvent);return}if(!u&&!n&&!a){f===0&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode();return}if(f!==0)return;var l=e.editor,c=l.selection,h=l.inMultiSelectMode,p=e.getDocumentPosition(),d=c.getCursor(),v=e.inSelection()||c.isEmpty()&&s(p,d),m=e.x,g=e.y,y=function(e){m=e.clientX,g=e.clientY},b=l.session,w=l.renderer.pixelToScreenCoordinates(m,g),E=w,S;if(l.$mouseHandler.$enableJumpToDef)u&&n||a&&n?S=o?"block":"add":n&&l.$blockSelectEnabled&&(S="block");else if(a&&!n){S="add";if(!h&&o)return}else n&&l.$blockSelectEnabled&&(S="block");S&&i.isMac&&t.ctrlKey&&l.$mouseHandler.cancelContextMenu();if(S=="add"){if(!h&&v)return;if(!h){var x=c.toOrientedRange();l.addSelectionMarker(x)}var T=c.rangeList.rangeAtPoint(p);l.inVirtualSelectionMode=!0,o&&(T=null,x=c.ranges[0]||x,l.removeSelectionMarker(x)),l.once("mouseup",function(){var e=c.toOrientedRange();T&&e.isEmpty()&&s(T.cursor,e.cursor)?c.substractPoint(e.cursor):(o?c.substractPoint(x.cursor):x&&(l.removeSelectionMarker(x),c.addRange(x)),c.addRange(e)),l.inVirtualSelectionMode=!1})}else if(S=="block"){e.stop(),l.inVirtualSelectionMode=!0;var N,C=[],k=function(){var e=l.renderer.pixelToScreenCoordinates(m,g),t=b.screenToDocumentPosition(e.row,e.column,e.offsetX);if(s(E,e)&&s(t,c.lead))return;E=e,l.selection.moveToPosition(t),l.renderer.scrollCursorIntoView(),l.removeSelectionMarkers(C),C=c.rectangularRangeBlock(E,w),l.$mouseHandler.$clickSelection&&C.length==1&&C[0].isEmpty()&&(C[0]=l.$mouseHandler.$clickSelection.clone()),C.forEach(l.addSelectionMarker,l),l.updateSelectionMarkers()};h&&!a?c.toSingleRange():!h&&a&&(N=c.toOrientedRange(),l.addSelectionMarker(N)),o?w=b.documentToScreenPosition(c.lead):c.moveToPosition(p),E={row:-1,column:-1};var L=function(e){k(),clearInterval(O),l.removeSelectionMarkers(C),C.length||(C=[c.toOrientedRange()]),N&&(l.removeSelectionMarker(N),c.toSingleRange(N));for(var t=0;t<C.length;t++)c.addRange(C[t]);l.inVirtualSelectionMode=!1,l.$mouseHandler.$clickSelection=null},A=k;r.capture(l.container,y,L);var O=setInterval(function(){A()},20);return e.preventDefault()}}var r=e("../lib/event"),i=e("../lib/useragent");t.onMouseDown=o}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.rangeCount>1?e.multiSelect.joinSelections():e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var r=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new r(t.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){function h(e,t,n){return c.$options.wrap=!0,c.$options.needle=t,c.$options.backwards=n==-1,c.find(e)}function v(e,t){return e.row==t.row&&e.column==t.column}function m(e){if(e.$multiselectOnSessionChange)return;e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",o),e.commands.addCommands(f.defaultCommands),g(e)}function g(e){function r(t){n&&(e.renderer.setMouseCursor(""),n=!1)}if(!e.textInput)return;var t=e.textInput.getElement(),n=!1;u.addListener(t,"keydown",function(t){var i=t.keyCode==18&&!(t.ctrlKey||t.shiftKey||t.metaKey);e.$blockSelectEnabled&&i?n||(e.renderer.setMouseCursor("crosshair"),n=!0):n&&r()},e),u.addListener(t,"keyup",r,e),u.addListener(t,"blur",r,e)}var r=e("./range_list").RangeList,i=e("./range").Range,s=e("./selection").Selection,o=e("./mouse/multi_select_handler").onMouseDown,u=e("./lib/event"),a=e("./lib/lang"),f=e("./commands/multi_select_commands");t.commands=f.defaultCommands.concat(f.multiSelectCommands);var l=e("./search").Search,c=new l,p=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(p.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(!e)return;if(!this.inMultiSelectMode&&this.rangeCount===0){var n=this.toOrientedRange();this.rangeList.add(n),this.rangeList.add(e);if(this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var r=this.rangeList.add(e);return this.$onAddRange(e),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length&&this.$onRemoveRange(e)},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){this.rangeCount=this.rangeList.ranges.length;if(this.rangeCount==1&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var r=this.ranges.indexOf(e[n]);this.ranges.splice(r,1)}this._signal("removeRange",{ranges:e}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),t=t||this.ranges[0],t&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){if(this.rangeList)return;this.rangeList=new r,this.ranges=[],this.rangeCount=0},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){var e=this.ranges.length?this.ranges:[this.getRange()],t=[];for(var n=0;n<e.length;n++){var r=e[n],s=r.start.row,o=r.end.row;if(s===o)t.push(r.clone());else{t.push(new i(s,r.start.column,s,this.session.getLine(s).length));while(++s<o)t.push(this.getLineRange(s,!0));t.push(new i(o,0,o,r.end.column))}n==0&&!this.isBackwards()&&(t=t.reverse())}this.toSingleRange();for(var n=t.length;n--;)this.addRange(t[n])},this.joinSelections=function(){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var r=this.session.documentToScreenPosition(this.cursor),s=this.session.documentToScreenPosition(this.anchor),o=this.rectangularRangeBlock(r,s);o.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var r=[],s=e.column<t.column;if(s)var o=e.column,u=t.column,a=e.offsetX,f=t.offsetX;else var o=t.column,u=e.column,a=t.offsetX,f=e.offsetX;var l=e.row<t.row;if(l)var c=e.row,h=t.row;else var c=t.row,h=e.row;o<0&&(o=0),c<0&&(c=0),c==h&&(n=!0);var p;for(var d=c;d<=h;d++){var m=i.fromPoints(this.session.screenToDocumentPosition(d,o,a),this.session.screenToDocumentPosition(d,u,f));if(m.isEmpty()){if(p&&v(m.end,p))break;p=m.end}m.cursor=s?m.start:m.end,r.push(m)}l&&r.reverse();if(!n){var g=r.length-1;while(r[g].isEmpty()&&g>0)g--;if(g>0){var y=0;while(r[y].isEmpty())y++}for(var b=g;b>=y;b--)r[b].isEmpty()&&r.splice(b,1)}return r}}.call(s.prototype);var d=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(!e.marker)return;this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);t!=-1&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length},this.removeSelectionMarkers=function(e){var t=this.session.$selectionMarkers;for(var n=e.length;n--;){var r=e[n];if(!r.marker)continue;this.session.removeMarker(r.marker);var i=t.indexOf(r);i!=-1&&t.splice(i,1)}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){if(this.inMultiSelectMode)return;this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onSingleSelect=function(e){if(this.session.multiSelect.inVirtualMode)return;this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection")},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(!n.multiSelect)return;if(!t.multiSelectAction){var r=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}else t.multiSelectAction=="forEach"?r=n.forEachSelection(t,e.args):t.multiSelectAction=="forEachLine"?r=n.forEachSelection(t,e.args,!0):t.multiSelectAction=="single"?(n.exitMultiSelectMode(),r=t.exec(n,e.args||{})):r=t.multiSelectAction(n,e.args||{});return r},this.forEachSelection=function(e,t,n){if(this.inVirtualSelectionMode)return;var r=n&&n.keepOrder,i=n==1||n&&n.$byLines,o=this.session,u=this.selection,a=u.rangeList,f=(r?u:a).ranges,l;if(!f.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var c=u._eventRegistry;u._eventRegistry={};var h=new s(o);this.inVirtualSelectionMode=!0;for(var p=f.length;p--;){if(i)while(p>0&&f[p].start.row==f[p-1].end.row)p--;h.fromOrientedRange(f[p]),h.index=p,this.selection=o.selection=h;var d=e.exec?e.exec(this,t||{}):e(this,t||{});!l&&d!==undefined&&(l=d),h.toOrientedRange(f[p])}h.detach(),this.selection=o.selection=u,this.inVirtualSelectionMode=!1,u._eventRegistry=c,u.mergeOverlappingRanges(),u.ranges[0]&&u.fromOrientedRange(u.ranges[0]);var v=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),v&&v.from==v.to&&this.renderer.animateScrolling(v.from),l},this.exitMultiSelectMode=function(){if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return;this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var t=this.multiSelect.rangeList.ranges,n=[];for(var r=0;r<t.length;r++)n.push(this.session.getTextRange(t[r]));var i=this.session.getDocument().getNewLineCharacter();e=n.join(i),e.length==(n.length-1)*i.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var r=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;r.row!=t.row||this.session.$clipPositionToDocument(r.row,r.column).column!=t.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(e,t,n){t=t||{},t.needle=e||t.needle;if(t.needle==undefined){var r=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(r)}this.$search.set(t);var i=this.$search.findAll(this.session);if(!i.length)return 0;var s=this.multiSelect;n||s.toSingleRange(i[0]);for(var o=i.length;o--;)s.addRange(i[o],!0);return r&&s.rangeList.rangeAtPoint(r.start)&&s.addRange(r,!0),i.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,s=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(s.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(s.row+e,s.column);if(!n.isEmpty())var u=this.session.documentToScreenPosition(r?n.end:n.start),a=this.session.screenToDocumentPosition(u.row+e,u.column);else var a=o;if(r){var f=i.fromPoints(o,a);f.cursor=f.start}else{var f=i.fromPoints(a,o);f.cursor=f.end}f.desiredColumn=s.column;if(!this.selection.inMultiSelectMode)this.selection.addRange(n);else if(t)var l=n.cursor;this.selection.addRange(f),l&&this.selection.substractPoint(l)},this.transposeSelections=function(e){var t=this.session,n=t.multiSelect,r=n.ranges;for(var i=r.length;i--;){var s=r[i];if(s.isEmpty()){var o=t.getWordRange(s.start.row,s.start.column);s.start.row=o.start.row,s.start.column=o.start.column,s.end.row=o.end.row,s.end.column=o.end.column}}n.mergeOverlappingRanges();var u=[];for(var i=r.length;i--;){var s=r[i];u.unshift(t.getTextRange(s))}e<0?u.unshift(u.pop()):u.push(u.shift());for(var i=r.length;i--;){var s=r[i],o=s.clone();t.replace(s,u[i]),s.start.row=o.start.row,s.start.column=o.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(e,t,n){var r=this.session,i=r.multiSelect,s=i.toOrientedRange();if(s.isEmpty()){s=r.getWordRange(s.start.row,s.start.column),s.cursor=e==-1?s.start:s.end,this.multiSelect.addRange(s);if(n)return}var o=r.getTextRange(s),u=h(r,o,e);u&&(u.cursor=e==-1?u.start:u.end,this.session.unfold(u),this.multiSelect.addRange(u),this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(s.cursor)},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,r=-1,s=n.filter(function(e){if(e.cursor.row==r)return!0;r=e.cursor.row});if(!n.length||s.length==n.length-1){var o=this.selection.getRange(),u=o.start.row,f=o.end.row,l=u==f;if(l){var c=this.session.getLength(),h;do h=this.session.getLine(f);while(/[=:]/.test(h)&&++f<c);do h=this.session.getLine(u);while(/[=:]/.test(h)&&--u>0);u<0&&(u=0),f>=c&&(f=c-1)}var p=this.session.removeFullLines(u,f);p=this.$reAlignText(p,l),this.session.insert({row:u,column:0},p.join("\n")+"\n"),l||(o.start.column=0,o.end.column=p[p.length-1].length),this.selection.setRange(o)}else{s.forEach(function(e){t.substractPoint(e.cursor)});var d=0,v=Infinity,m=n.map(function(t){var n=t.cursor,r=e.getLine(n.row),i=r.substr(n.column).search(/\S/g);return i==-1&&(i=0),n.column>d&&(d=n.column),i<v&&(v=i),i});n.forEach(function(t,n){var r=t.cursor,s=d-r.column,o=m[n]-v;s>o?e.insert(r,a.stringRepeat(" ",s-o)):e.remove(new i(r.row,r.column,r.row,r.column-s+o)),t.start.column=t.end.column=d,t.start.row=t.end.row=r.row,t.cursor=t.end}),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(e,t){function u(e){return a.stringRepeat(" ",e)}function f(e){return e[2]?u(i)+e[2]+u(s-e[2].length+o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function l(e){return e[2]?u(i+s-e[2].length)+e[2]+u(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function c(e){return e[2]?u(i)+e[2]+u(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var n=!0,r=!0,i,s,o;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?i==null?(i=t[1].length,s=t[2].length,o=t[3].length,t):(i+s+o!=t[1].length+t[2].length+t[3].length&&(r=!1),i!=t[1].length&&(n=!1),i>t[1].length&&(i=t[1].length),s<t[2].length&&(s=t[2].length),o>t[3].length&&(o=t[3].length),t):[e]}).map(t?f:n?r?l:f:c)}}).call(d.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=m,e("./config").defineOptions(d.prototype,"editor",{enableMultiselect:{set:function(e){m(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",o)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",o))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("../../range").Range,i=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);return this.foldingStartMarker.test(r)?"start":t=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var i=/\S/,s=e.getLine(t),o=s.search(i);if(o==-1)return;var u=n||s.length,a=e.getLength(),f=t,l=t;while(++t<a){var c=e.getLine(t).search(i);if(c==-1)continue;if(c<=o){var h=e.getTokenAt(t,0);if(!h||h.type!=="string")break}l=t}if(l>f){var p=e.getLine(l).length;return new r(f,u,l,p)}},this.openingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i+1},u=e.$findClosingBracket(t,o,s);if(!u)return;var a=e.foldWidgets[u.row];return a==null&&(a=e.getFoldWidget(u.row)),a=="start"&&u.row>o.row&&(u.row--,u.column=e.getLine(u.row).length),r.fromPoints(o,u)},this.closingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i},u=e.$findOpeningBracket(t,o);if(!u)return;return u.column++,o.column--,r.fromPoints(u,o)}}).call(i.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t.$id="ace/theme/textmate";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass,!1)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";function i(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}var r=e("./lib/dom");(function(){this.getRowLength=function(e){var t;return this.lineWidgets?t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0:t=0,!this.$useWrapMode||!this.$wrapData[e]?1+t:this.$wrapData[e].length+1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach(function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)}),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach();if(this.editor==e)return;this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets))},this.detach=function(e){var t=this.editor;if(!t)return;this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))})},this.updateOnFold=function(e,t){var n=t.lineWidgets;if(!n||!e.action)return;var r=e.data,i=r.start.row,s=r.end.row,o=e.action=="add";for(var u=i+1;u<s;u++)n[u]&&(n[u].hidden=o);n[s]&&(o?n[i]?n[s].hidden=o:n[i]=n[s]:(n[i]==n[s]&&(n[i]=undefined),n[s].hidden=o))},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(!t)return;var n=e.start.row,r=e.end.row-n;if(r!==0)if(e.action=="remove"){var i=t.splice(n+1,r);!t[n]&&i[i.length-1]&&(t[n]=i.pop()),i.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{var s=new Array(r);t[n]&&t[n].column!=null&&e.start.column>t[n].column&&n++,s.unshift(n,0),t.splice.apply(t,s),this.$updateRows()}},this.$updateRows=function(){var e=this.session.lineWidgets;if(!e)return;var t=!0;e.forEach(function(e,n){if(e){t=!1,e.row=n;while(e.$oldWidget)e.$oldWidget.row=n,e=e.$oldWidget}}),t&&(this.session.lineWidgets=null)},this.$registerLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];return t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e},this.addLineWidget=function(e){this.$registerLineWidget(e),e.session=this.session;if(!this.editor)return e;var t=this.editor.renderer;e.html&&!e.el&&(e.el=r.createElement("div"),e.el.innerHTML=e.html),e.el&&(r.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,t.container.appendChild(e.el),e._inDocument=!0,e.coverGutter||(e.el.style.zIndex=3),e.pixelHeight==null&&(e.pixelHeight=e.el.offsetHeight)),e.rowCount==null&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight);var n=this.session.getFoldAt(e.row,0);e.$fold=n;if(n){var i=this.session.lineWidgets;e.row==n.end.row&&!i[n.start.row]?i[n.start.row]=e:e.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el);if(e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(t){}if(this.session.lineWidgets){var n=this.session.lineWidgets[e.row];if(n==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else while(n){if(n.$oldWidget==e){n.$oldWidget=e.$oldWidget;break}n=n.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){var t=this.session.lineWidgets,n=t&&t[e],r=[];while(n)r.push(n),n=n.$oldWidget;return r},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,r=t.layerConfig;if(!n||!n.length)return;var i=Infinity;for(var s=0;s<n.length;s++){var o=n[s];if(!o||!o.el)continue;if(o.session!=this.session)continue;if(!o._inDocument){if(this.session.lineWidgets[o.row]!=o)continue;o._inDocument=!0,t.container.appendChild(o.el)}o.h=o.el.offsetHeight,o.fixedWidth||(o.w=o.el.offsetWidth,o.screenWidth=Math.ceil(o.w/r.characterWidth));var u=o.h/r.lineHeight;o.coverLine&&(u-=this.session.getRowLineCount(o.row),u<0&&(u=0)),o.rowCount!=u&&(o.rowCount=u,o.row<i&&(i=o.row))}i!=Infinity&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]},this.renderWidgets=function(e,t){var n=t.layerConfig,r=this.session.lineWidgets;if(!r)return;var i=Math.min(this.firstRow,n.firstRow),s=Math.max(this.lastRow,n.lastRow,r.length);while(i>0&&!r[i])i--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var o=i;o<=s;o++){var u=r[o];if(!u||!u.el)continue;if(u.hidden){u.el.style.top=-100-(u.pixelHeight||0)+"px";continue}u._inDocument||(u._inDocument=!0,t.container.appendChild(u.el));var a=t.$cursorLayer.getPixelPosition({row:o,column:0},!0).top;u.coverLine||(a+=n.lineHeight*this.session.getRowLineCount(u.row)),u.el.style.top=a-n.offset+"px";var f=u.coverGutter?0:t.gutterWidth;u.fixedWidth||(f-=t.scrollLeft),u.el.style.left=f+"px",u.fullWidth&&u.screenWidth&&(u.el.style.minWidth=n.width+2*n.padding+"px"),u.fixedWidth?u.el.style.right=t.scrollBar.getWidth()+"px":u.el.style.right=""}}}).call(i.prototype),t.LineWidgets=i}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,n){"use strict";function o(e,t,n){var r=0,i=e.length-1;while(r<=i){var s=r+i>>1,o=n(t,e[s]);if(o>0)r=s+1;else{if(!(o<0))return s;i=s-1}}return-(r+1)}function u(e,t,n){var r=e.getAnnotations().sort(s.comparePoints);if(!r.length)return;var i=o(r,{row:t,column:-1},s.comparePoints);i<0&&(i=-i-1),i>=r.length?i=n>0?0:r.length-1:i===0&&n<0&&(i=r.length-1);var u=r[i];if(!u||!n)return;if(u.row===t){do u=r[i+=n];while(u&&u.row===t);if(!u)return r.slice()}var a=[];t=u.row;do a[n<0?"unshift":"push"](u),u=r[i+=n];while(u&&u.row==t);return a.length&&a}var r=e("../line_widgets").LineWidgets,i=e("../lib/dom"),s=e("../range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new r(n),n.widgetManager.attach(e));var s=e.getCursorPosition(),o=s.row,a=n.widgetManager.getWidgetsAtRow(o).filter(function(e){return e.type=="errorMarker"})[0];a?a.destroy():o-=t;var f=u(n,o,t),l;if(f){var c=f[0];s.column=(c.pos&&typeof c.column!="number"?c.pos.sc:c.column)||0,s.row=c.row,l=e.renderer.$gutterLayer.$annotations[s.row]}else{if(a)return;l={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(s.row),e.selection.moveToPosition(s);var h={row:s.row,fixedWidth:!0,coverGutter:!0,el:i.createElement("div"),type:"errorMarker"},p=h.el.appendChild(i.createElement("div")),d=h.el.appendChild(i.createElement("div"));d.className="error_widget_arrow "+l.className;var v=e.renderer.$cursorLayer.getPixelPosition(s).left;d.style.left=v+e.renderer.gutterWidth-5+"px",h.el.className="error_widget_wrapper",p.className="error_widget "+l.className,p.innerHTML=l.text.join("<br>"),p.appendChild(i.createElement("div"));var m=function(e,t,n){if(t===0&&(n==="esc"||n==="return"))return h.destroy(),{command:"null"}};h.destroy=function(){if(e.$mouseHandler.isMousePressed)return;e.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(h),e.off("changeSelection",h.destroy),e.off("changeSession",h.destroy),e.off("mouseup",h.destroy),e.off("change",h.destroy)},e.keyBinding.addKeyboardHandler(m),e.on("changeSelection",h.destroy),e.on("changeSession",h.destroy),e.on("mouseup",h.destroy),e.on("change",h.destroy),e.session.widgetManager.addLineWidget(h),h.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:h.el.offsetHeight})},i.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/dom"),i=e("./lib/event"),s=e("./range").Range,o=e("./editor").Editor,u=e("./edit_session").EditSession,a=e("./undomanager").UndoManager,f=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,typeof define=="function"&&(t.define=define),t.edit=function(e,n){if(typeof e=="string"){var s=e;e=document.getElementById(s);if(!e)throw new Error("ace.edit can't find div #"+s)}if(e&&e.env&&e.env.editor instanceof o)return e.env.editor;var u="";if(e&&/input|textarea/i.test(e.tagName)){var a=e;u=a.value,e=r.createElement("pre"),a.parentNode.replaceChild(e,a)}else e&&(u=e.textContent,e.innerHTML="");var l=t.createEditSession(u),c=new o(new f(e),l,n),h={document:l,editor:c,onResize:c.resize.bind(c,null)};return a&&(h.textarea=a),i.addListener(window,"resize",h.onResize),c.on("destroy",function(){i.removeListener(window,"resize",h.onResize),h.editor.container.env=null}),c.container.env=c.env=h,c},t.createEditSession=function(e,t){var n=new u(e,t);return n.setUndoManager(new a),n},t.Range=s,t.Editor=o,t.EditSession=u,t.UndoManager=a,t.VirtualRenderer=f,t.version=t.config.version});            (function() {
                ace.require(["ace/ace"], function(a) {
                    if (a) {
                        a.config.init(true);
                        a.define = ace.define;
                    }
                    if (!window.ace)
                        window.ace = a;
                    for (var key in a) if (a.hasOwnProperty(key))
                        window.ace[key] = a[key];
                    window.ace["default"] = window.ace;
                    if (typeof module == "object" && typeof exports == "object" && module) {
                        module.exports = window.ace;
                    }
                });
            })();
        ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("./text_highlight_rules").TextHighlightRules,s=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},s.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};r.inherits(s,i),s.getTagRule=function(e){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},s.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}},s.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}},t.DocCommentHighlightRules=s}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";function a(){var e=o.replace("\\d","\\d\\-"),t={onMatch:function(e,t,n){var r=e.charAt(1)=="/"?2:1;if(r==1)t!=this.nextState?n.unshift(this.next,this.nextState,0):n.unshift(this.next),n[2]++;else if(r==2&&t==this.nextState){n[1]--;if(!n[1]||n[1]<0)n.shift(),n.shift()}return[{type:"meta.tag.punctuation."+(r==1?"":"end-")+"tag-open.xml",value:e.slice(0,r)},{type:"meta.tag.tag-name.xml",value:e.substr(r)}]},regex:"</?"+e+"",next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(t);var n={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[n,t,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(e,t,n){return t==n[0]&&n.shift(),e.length==2&&(n[0]==this.nextState&&n[1]--,(!n[1]||n[1]<0)&&n.splice(0,2)),this.next=n[0]||"start",[{type:this.token,value:e}]},nextState:"jsx"},n,f("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:e},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},t],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function f(e){return[{token:"comment",regex:/\/\*/,next:[i.getTagRule(),{token:"comment",regex:"\\*\\/",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[i.getTagRule(),{token:"comment",regex:"$|^",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}var r=e("../lib/oop"),i=e("./doc_comment_highlight_rules").DocCommentHighlightRules,s=e("./text_highlight_rules").TextHighlightRules,o="[a-zA-Z\\$_\u00a1-\uffff][a-zA-Z\\d\\$_\u00a1-\uffff]*",u=function(e){var t=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),n="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",r="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[i.getStartRule("doc-start"),f("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+o+")(\\.)(prototype)(\\.)("+o+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+o+")(\\.)("+o+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+o+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+o+")(\\.)("+o+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+o+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+o+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"from(?=\\s*('|\"))"},{token:"keyword",regex:"(?:"+n+")\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:t,regex:o},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+o+")(\\.)("+o+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:o},{regex:"",token:"empty",next:"no_regex"}],start:[i.getStartRule("doc-start"),f("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:o},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:r},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:r},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]};if(!e||!e.noES6)this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(e,t,n){this.next=e=="{"?this.nextState:"";if(e=="{"&&n.length)n.unshift("start",t);else if(e=="}"&&n.length){n.shift(),this.next=n.shift();if(this.next.indexOf("string")!=-1||this.next.indexOf("jsx")!=-1)return"paren.quasi.end"}return e=="{"?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:r},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),(!e||e.jsx!=0)&&a.call(this);this.embedRules(i,"doc-",[i.getEndRule("no_regex")]),this.normalizeRules()};r.inherits(u,s),t.JavaScriptHighlightRules=u}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("../range").Range,i=function(){};(function(){this.checkOutdent=function(e,t){return/^\s+$/.test(e)?/^\s*\}/.test(t):!1},this.autoOutdent=function(e,t){var n=e.getLine(t),i=n.match(/^(\s*\})/);if(!i)return 0;var s=i[1].length,o=e.findMatchingBracket({row:t,column:s});if(!o||o.row==t)return 0;var u=this.$getIndent(e.getLine(o.row));e.replace(new r(t,0,t,s-1),u)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(i.prototype),t.MatchingBraceOutdent=i}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,t,n){"use strict";var r=e("../../lib/oop"),i=e("../../range").Range,s=e("./fold_mode").FoldMode,o=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};r.inherits(o,s),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return"";var i=this._getFoldWidgetBase(e,t,n);return!i&&this.startRegionRe.test(r)?"start":i},this.getFoldWidgetRange=function(e,t,n,r){var i=e.getLine(n);if(this.startRegionRe.test(i))return this.getCommentRegionBlock(e,i,n);var s=i.match(this.foldingStartMarker);if(s){var o=s.index;if(s[1])return this.openingBracketBlock(e,s[1],n,o);var u=e.getCommentFoldRange(n,o+s[0].length,1);return u&&!u.isMultiLine()&&(r?u=this.getSectionRange(e,n):t!="all"&&(u=null)),u}if(t==="markbegin")return;var s=i.match(this.foldingStopMarker);if(s){var o=s.index+s[0].length;return s[1]?this.closingBracketBlock(e,s[1],n,o):e.getCommentFoldRange(n,o,-1)}},this.getSectionRange=function(e,t){var n=e.getLine(t),r=n.search(/\S/),s=t,o=n.length;t+=1;var u=t,a=e.getLength();while(++t<a){n=e.getLine(t);var f=n.search(/\S/);if(f===-1)continue;if(r>f)break;var l=this.getFoldWidgetRange(e,"all",t);if(l){if(l.start.row<=s)break;if(l.isMultiLine())t=l.end.row;else if(r==f)break}u=t}return new i(s,o,u,e.getLine(u).length)},this.getCommentRegionBlock=function(e,t,n){var r=t.search(/\s*$/),s=e.getLength(),o=n,u=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,a=1;while(++n<s){t=e.getLine(n);var f=u.exec(t);if(!f)continue;f[1]?a--:a++;if(!a)break}var l=n;if(l>o)return new i(o,r,l,t.length)}}.call(o.prototype)}),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("./text").Mode,s=e("./javascript_highlight_rules").JavaScriptHighlightRules,o=e("./matching_brace_outdent").MatchingBraceOutdent,u=e("../worker/worker_client").WorkerClient,a=e("./behaviour/cstyle").CstyleBehaviour,f=e("./folding/cstyle").FoldMode,l=function(){this.HighlightRules=s,this.$outdent=new o,this.$behaviour=new a,this.foldingRules=new f};r.inherits(l,i),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t),i=this.getTokenizer().getLineTokens(t,e),s=i.tokens,o=i.state;if(s.length&&s[s.length-1].type=="comment")return r;if(e=="start"||e=="no_regex"){var u=t.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/);u&&(r+=n)}else if(e=="doc-start"){if(o=="start"||o=="no_regex")return"";var u=t.match(/^\s*(\/?)\*/);u&&(u[1]&&(r+=" "),r+="* ")}return r},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new u(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return t.attachToDocument(e.getDocument()),t.on("annotate",function(t){e.setAnnotations(t.data)}),t.on("terminate",function(){e.clearAnnotations()}),t},this.$id="ace/mode/javascript",this.snippetFileId="ace/snippets/javascript"}.call(l.prototype),t.Mode=l});                (function() {
                    ace.require(["ace/mode/javascript"], function(m) {
                        if (typeof module == "object" && typeof exports == "object" && module) {
                            module.exports = m;
                        }
                    });
                })();
            ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-monokai",t.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass,!1)});                (function() {
                    ace.require(["ace/theme/monokai"], function(m) {
                        if (typeof module == "object" && typeof exports == "object" && module) {
                            module.exports = m;
                        }
                    });
                })();
            ace.define("ace/theme/xcode",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!1,t.cssClass="ace-xcode",t.cssText=".ace-xcode .ace_gutter {background: #e8e8e8;color: #333}.ace-xcode .ace_print-margin {width: 1px;background: #e8e8e8}.ace-xcode {background-color: #FFFFFF;color: #000000}.ace-xcode .ace_cursor {color: #000000}.ace-xcode .ace_marker-layer .ace_selection {background: #B5D5FF}.ace-xcode.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #FFFFFF;}.ace-xcode .ace_marker-layer .ace_step {background: rgb(198, 219, 174)}.ace-xcode .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #BFBFBF}.ace-xcode .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.071)}.ace-xcode .ace_gutter-active-line {background-color: rgba(0, 0, 0, 0.071)}.ace-xcode .ace_marker-layer .ace_selected-word {border: 1px solid #B5D5FF}.ace-xcode .ace_constant.ace_language,.ace-xcode .ace_keyword,.ace-xcode .ace_meta,.ace-xcode .ace_variable.ace_language {color: #C800A4}.ace-xcode .ace_invisible {color: #BFBFBF}.ace-xcode .ace_constant.ace_character,.ace-xcode .ace_constant.ace_other {color: #275A5E}.ace-xcode .ace_constant.ace_numeric {color: #3A00DC}.ace-xcode .ace_entity.ace_other.ace_attribute-name,.ace-xcode .ace_support.ace_constant,.ace-xcode .ace_support.ace_function {color: #450084}.ace-xcode .ace_fold {background-color: #C800A4;border-color: #000000}.ace-xcode .ace_entity.ace_name.ace_tag,.ace-xcode .ace_support.ace_class,.ace-xcode .ace_support.ace_type {color: #790EAD}.ace-xcode .ace_storage {color: #C900A4}.ace-xcode .ace_string {color: #DF0002}.ace-xcode .ace_comment {color: #008E00}.ace-xcode .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==) right repeat-y}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass,!1)});                (function() {
                    ace.require(["ace/theme/xcode"], function(m) {
                        if (typeof module == "object" && typeof exports == "object" && module) {
                            module.exports = m;
                        }
                    });
                })();
            !function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("nipplejs",[],i):"object"==typeof exports?exports.nipplejs=i():t.nipplejs=i()}(window,function(){return function(t){var i={};function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(o,n,function(i){return t[i]}.bind(null,n));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);var o,n=function(t,i){var e=i.x-t.x,o=i.y-t.y;return Math.sqrt(e*e+o*o)},s=function(t){return t*(Math.PI/180)},r=function(t){return t*(180/Math.PI)},d=function(t,i,e){for(var o,n=i.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.addEventListener?t.addEventListener(o,e,!1):t.attachEvent&&t.attachEvent(o,e)},a=function(t,i,e){for(var o,n=i.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.removeEventListener?t.removeEventListener(o,e):t.detachEvent&&t.detachEvent(o,e)},p=function(t){return t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t},c=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},h=function(t,i){i.top||i.right||i.bottom||i.left?(t.style.top=i.top,t.style.right=i.right,t.style.bottom=i.bottom,t.style.left=i.left):(t.style.left=i.x+"px",t.style.top=i.y+"px")},l=function(t,i,e){var o=u(t);for(var n in o)if(o.hasOwnProperty(n))if("string"==typeof i)o[n]=i+" "+e;else{for(var s="",r=0,d=i.length;r<d;r+=1)s+=i[r]+" "+e+", ";o[n]=s.slice(0,-2)}return o},u=function(t){var i={};i[t]="";return["webkit","Moz","o"].forEach(function(e){i[e+t.charAt(0).toUpperCase()+t.slice(1)]=""}),i},f=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},y=function(t,i){if(t.length)for(var e=0,o=t.length;e<o;e+=1)i(t[e]);else i(t)},m=!!("ontouchstart"in window),v=!!window.PointerEvent,g=!!window.MSPointerEvent,b={start:"mousedown",move:"mousemove",end:"mouseup"},x={};function O(){}v?o={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:g?o={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:m?(o={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},x=b):o=b,O.prototype.on=function(t,i){var e,o=t.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var n=0;n<o.length;n+=1)e=o[n],this._handlers_[e]=this._handlers_[e]||[],this._handlers_[e].push(i);return this},O.prototype.off=function(t,i){return this._handlers_=this._handlers_||{},void 0===t?this._handlers_={}:void 0===i?this._handlers_[t]=null:this._handlers_[t]&&this._handlers_[t].indexOf(i)>=0&&this._handlers_[t].splice(this._handlers_[t].indexOf(i),1),this},O.prototype.trigger=function(t,i){var e,o=this,n=t.split(/[ ,]+/g);o._handlers_=o._handlers_||{};for(var s=0;s<n.length;s+=1)e=n[s],o._handlers_[e]&&o._handlers_[e].length&&o._handlers_[e].forEach(function(t){t.call(o,{type:e,target:o},i)})},O.prototype.config=function(t){this.options=this.defaults||{},t&&(this.options=function(t,i){var e={};for(var o in t)t.hasOwnProperty(o)&&i.hasOwnProperty(o)?e[o]=i[o]:t.hasOwnProperty(o)&&(e[o]=t[o]);return e}(this.options,t))},O.prototype.bindEvt=function(t,i){var e=this;return e._domHandlers_=e._domHandlers_||{},e._domHandlers_[i]=function(){"function"==typeof e["on"+i]?e["on"+i].apply(e,arguments):console.warn('[WARNING] : Missing "on'+i+'" handler.')},d(t,o[i],e._domHandlers_[i]),x[i]&&d(t,x[i],e._domHandlers_[i]),e},O.prototype.unbindEvt=function(t,i){return this._domHandlers_=this._domHandlers_||{},a(t,o[i],this._domHandlers_[i]),x[i]&&a(t,x[i],this._domHandlers_[i]),delete this._domHandlers_[i],this};var _=O;function w(t,i){return this.identifier=i.identifier,this.position=i.position,this.frontPosition=i.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1},this.config(i),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=w.id,w.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}w.prototype=new _,w.constructor=w,w.id=0,w.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},w.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",i=function(t,i){var e=u(t);for(var o in e)e.hasOwnProperty(o)&&(e[o]=i);return e}("borderRadius","50%"),e=l("transition","opacity",t),o={};return o.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},o.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},o.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},f(o.el,e),f(o.back,i),f(o.front,i),this.applyStyles(o),this},w.prototype.applyStyles=function(t){for(var i in this.ui)if(this.ui.hasOwnProperty(i))for(var e in t[i])this.ui[i].style[e]=t[i][e];return this},w.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},w.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},w.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},w.prototype.show=function(t){var i=this;return i.options.dataOnly?i:(clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.addToDom(),i.restCallback(),setTimeout(function(){i.ui.el.style.opacity=1},0),i.showTimeout=setTimeout(function(){i.trigger("shown",i.instance),"function"==typeof t&&t.call(this)},i.options.fadeTime),i)},w.prototype.hide=function(t){var i=this;return i.options.dataOnly?i:(i.ui.el.style.opacity=i.options.restOpacity,clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.removeTimeout=setTimeout(function(){var e="dynamic"===i.options.mode?"none":"block";i.ui.el.style.display=e,"function"==typeof t&&t.call(i),i.trigger("hidden",i.instance)},i.options.fadeTime),i.options.restJoystick&&i.setPosition(t,{x:0,y:0}),i)},w.prototype.setPosition=function(t,i){var e=this;e.frontPosition={x:i.x,y:i.y};var o=e.options.fadeTime+"ms",n={};n.front=l("transition",["top","left"],o);var s={front:{}};s.front={left:e.frontPosition.x+"px",top:e.frontPosition.y+"px"},e.applyStyles(n),e.applyStyles(s),e.restTimeout=setTimeout(function(){"function"==typeof t&&t.call(e),e.restCallback()},e.options.fadeTime)},w.prototype.restCallback=function(){var t={};t.front=l("transition","none",""),this.applyStyles(t),this.trigger("rested",this.instance)},w.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},w.prototype.computeDirection=function(t){var i,e,o,n=t.angle.radian,s=Math.PI/4,r=Math.PI/2;if(n>s&&n<3*s&&!t.lockX?i="up":n>-s&&n<=s&&!t.lockY?i="left":n>3*-s&&n<=-s&&!t.lockX?i="down":t.lockY||(i="right"),t.lockY||(e=n>-r&&n<r?"left":"right"),t.lockX||(o=n>0?"up":"down"),t.force>this.options.threshold){var d,a={};for(d in this.direction)this.direction.hasOwnProperty(d)&&(a[d]=this.direction[d]);var p={};for(d in this.direction={x:e,y:o,angle:i},t.direction=this.direction,a)a[d]===this.direction[d]&&(p[d]=!0);if(p.x&&p.y&&p.angle)return t;p.x&&p.y||this.trigger("plain",t),p.x||this.trigger("plain:"+e,t),p.y||this.trigger("plain:"+o,t),p.angle||this.trigger("dir dir:"+i,t)}else this.resetDirection();return t};var T=w;function k(t,i){return this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=t,this.id=k.id,k.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,dynamicPage:!1},this.config(i),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}k.prototype=new _,k.constructor=k,k.id=0,k.prototype.prepareNipples=function(){var t=this.nipples;t.on=this.on.bind(this),t.off=this.off.bind(this),t.options=this.options,t.destroy=this.destroy.bind(this),t.ids=this.ids,t.id=this.id,t.processOnMove=this.processOnMove.bind(this),t.processOnEnd=this.processOnEnd.bind(this),t.get=function(i){if(void 0===i)return t[0];for(var e=0,o=t.length;e<o;e+=1)if(t[e].identifier===i)return t[e];return!1}},k.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},k.prototype.begin=function(){var t=this.options;if("static"===t.mode){var i=this.createNipple(t.position,this.manager.getIdentifier());i.add(),this.idles.push(i)}},k.prototype.createNipple=function(t,i){var e=c(),o={},n=this.options;if(t.x&&t.y)o={x:t.x-(e.x+this.box.left),y:t.y-(e.y+this.box.top)};else if(t.top||t.right||t.bottom||t.left){var s=document.createElement("DIV");s.style.display="hidden",s.style.top=t.top,s.style.right=t.right,s.style.bottom=t.bottom,s.style.left=t.left,s.style.position="absolute",n.zone.appendChild(s);var r=s.getBoundingClientRect();n.zone.removeChild(s),o=t,t={x:r.left+e.x,y:r.top+e.y}}var d=new T(this,{color:n.color,size:n.size,threshold:n.threshold,fadeTime:n.fadeTime,dataOnly:n.dataOnly,restJoystick:n.restJoystick,restOpacity:n.restOpacity,mode:n.mode,identifier:i,position:t,zone:n.zone,frontPosition:{x:0,y:0}});return n.dataOnly||(h(d.ui.el,o),h(d.ui.front,d.frontPosition)),this.nipples.push(d),this.trigger("added "+d.identifier+":added",d),this.manager.trigger("added "+d.identifier+":added",d),this.bindNipple(d),d},k.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},k.prototype.bindNipple=function(t){var i,e=this,o=function(t,o){i=t.type+" "+o.id+":"+t.type,e.trigger(i,o)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",o),t.on("dir:up dir:right dir:down dir:left",o),t.on("plain:up plain:right plain:down plain:left",o)},k.prototype.pressureFn=function(t,i,e){var o=this,n=0;clearInterval(o.pressureIntervals[e]),o.pressureIntervals[e]=setInterval(function(){var e=t.force||t.pressure||t.webkitForce||0;e!==n&&(i.trigger("pressure",e),o.trigger("pressure "+i.identifier+":pressure",e),n=e)}.bind(o),100)},k.prototype.onstart=function(t){var i=this,e=i.options,o=t;t=p(t),i.updateBox();return y(t,function(n){i.actives.length<e.maxNumberOfNipples?i.processOnStart(n):o.type.match(/^touch/)&&(Object.keys(i.manager.ids).forEach(function(e){if(Object.values(o.touches).findIndex(function(t){return t.identifier===e})<0){var n=[t[0]];n.identifier=e,i.processOnEnd(n)}}),i.actives.length<e.maxNumberOfNipples&&i.processOnStart(n))}),i.manager.bindDocument(),!1},k.prototype.processOnStart=function(t){var i,e=this,o=e.options,s=e.manager.getIdentifier(t),r=t.force||t.pressure||t.webkitForce||0,d={x:t.pageX,y:t.pageY},a=e.getOrCreate(s,d);a.identifier!==s&&e.manager.removeIdentifier(a.identifier),a.identifier=s;var p=function(i){i.trigger("start",i),e.trigger("start "+i.id+":start",i),i.show(),r>0&&e.pressureFn(t,i,i.identifier),e.processOnMove(t)};if((i=e.idles.indexOf(a))>=0&&e.idles.splice(i,1),e.actives.push(a),e.ids.push(a.identifier),"semi"!==o.mode)p(a);else{if(!(n(d,a.position)<=o.catchDistance))return a.destroy(),void e.processOnStart(t);p(a)}return a},k.prototype.getOrCreate=function(t,i){var e,o=this.options;return/(semi|static)/.test(o.mode)?(e=this.idles[0])?(this.idles.splice(0,1),e):"semi"===o.mode?this.createNipple(i,t):(console.warn("Coudln't find the needed nipple."),!1):e=this.createNipple(i,t)},k.prototype.processOnMove=function(t){var i=this.options,e=this.manager.getIdentifier(t),o=this.nipples.get(e);if(function(t){return isNaN(t.buttons)?0!==t.pressure:0!==t.buttons}(t)){if(!o)return console.error("Found zombie joystick with ID "+e),void this.manager.removeIdentifier(e);if(i.dynamicPage){var d=c();p=o.el.getBoundingClientRect(),o.position={x:d.x+p.left,y:d.y+p.top}}o.identifier=e;var a=o.options.size/2,p={x:t.pageX,y:t.pageY};i.lockX&&(p.y=o.position.y),i.lockY&&(p.x=o.position.x);var l,u,f,y,m,v,g,b,x=n(p,o.position),O=(l=p,u=o.position,f=u.x-l.x,y=u.y-l.y,r(Math.atan2(y,f))),_=s(O),w=x/a,T={distance:x,position:p};x>a&&(x=a,m=o.position,v=x,b={x:0,y:0},g=s(g=O),b.x=m.x-v*Math.cos(g),b.y=m.y-v*Math.sin(g),p=b);var k=p.x-o.position.x,P=p.y-o.position.y;o.frontPosition={x:k,y:P},i.dataOnly||h(o.ui.front,o.frontPosition);var E={identifier:o.identifier,position:p,force:w,pressure:t.force||t.pressure||t.webkitForce||0,distance:x,angle:{radian:_,degree:O},vector:{x:k/a,y:-P/a},raw:T,instance:o,lockX:i.lockX,lockY:i.lockY};(E=o.computeDirection(E)).angle={radian:s(180-O),degree:180-O},o.trigger("move",E),this.trigger("move "+o.id+":move",E)}else this.processOnEnd(t)},k.prototype.processOnEnd=function(t){var i=this,e=i.options,o=i.manager.getIdentifier(t),n=i.nipples.get(o),s=i.manager.removeIdentifier(n.identifier);n&&(e.dataOnly||n.hide(function(){"dynamic"===e.mode&&(n.trigger("removed",n),i.trigger("removed "+n.id+":removed",n),i.manager.trigger("removed "+n.id+":removed",n),n.destroy())}),clearInterval(i.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),i.trigger("end "+n.id+":end",n),i.ids.indexOf(n.identifier)>=0&&i.ids.splice(i.ids.indexOf(n.identifier),1),i.actives.indexOf(n)>=0&&i.actives.splice(i.actives.indexOf(n),1),/(semi|static)/.test(e.mode)?i.idles.push(n):i.nipples.indexOf(n)>=0&&i.nipples.splice(i.nipples.indexOf(n),1),i.manager.unbindDocument(),/(semi|static)/.test(e.mode)&&(i.manager.ids[s.id]=s.identifier))},k.prototype.onDestroyed=function(t,i){this.nipples.indexOf(i)>=0&&this.nipples.splice(this.nipples.indexOf(i),1),this.actives.indexOf(i)>=0&&this.actives.splice(this.actives.indexOf(i),1),this.idles.indexOf(i)>=0&&this.idles.splice(this.idles.indexOf(i),1),this.ids.indexOf(i.identifier)>=0&&this.ids.splice(this.ids.indexOf(i.identifier),1),this.manager.removeIdentifier(i.identifier),this.manager.unbindDocument()},k.prototype.destroy=function(){for(var t in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(t){t.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(t)&&clearInterval(this.pressureIntervals[t]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()};var P=k;function E(t){var i,e=this;return e.ids={},e.index=0,e.collections=[],e.config(t),e.prepareCollections(),d(window,"resize",function(t){clearTimeout(i),i=setTimeout(function(){var t,i=c();e.collections.forEach(function(e){e.forEach(function(e){t=e.el.getBoundingClientRect(),e.position={x:i.x+t.left,y:i.y+t.top}})})},100)}),e.collections}E.prototype=new _,E.constructor=E,E.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(i){var e;return t.collections.every(function(t){return!(e=t.get(i))}),e}},E.prototype.create=function(t){return this.createCollection(t)},E.prototype.createCollection=function(t){var i=new P(this,t);return this.bindCollection(i),this.collections.push(i),i},E.prototype.bindCollection=function(t){var i,e=this,o=function(t,o){i=t.type+" "+o.id+":"+t.type,e.trigger(i,o)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",o),t.on("dir:up dir:right dir:down dir:left",o),t.on("plain:up plain:right plain:down plain:left",o)},E.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},E.prototype.unbindDocument=function(t){Object.keys(this.ids).length&&!0!==t||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},E.prototype.getIdentifier=function(t){var i;return t?void 0===(i=void 0===t.identifier?t.pointerId:t.identifier)&&(i=this.latest||0):i=this.index,void 0===this.ids[i]&&(this.ids[i]=this.index,this.index+=1),this.latest=i,this.ids[i]},E.prototype.removeIdentifier=function(t){var i={};for(var e in this.ids)if(this.ids[e]===t){i.id=e,i.identifier=this.ids[e],delete this.ids[e];break}return i},E.prototype.onmove=function(t){return this.onAny("move",t),!1},E.prototype.onend=function(t){return this.onAny("end",t),!1},E.prototype.oncancel=function(t){return this.onAny("end",t),!1},E.prototype.onAny=function(t,i){var e,o=this,n="processOn"+t.charAt(0).toUpperCase()+t.slice(1);i=p(i);return y(i,function(t){e=o.getIdentifier(t),y(o.collections,function(t,i,e){e.ids.indexOf(i)>=0&&(e[n](t),t._found_=!0)}.bind(null,t,e)),t._found_||o.removeIdentifier(e)}),!1},E.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(t){t.destroy()}),this.off()},E.prototype.onDestroyed=function(t,i){if(this.collections.indexOf(i)<0)return!1;this.collections.splice(this.collections.indexOf(i),1)};var I=new E;i.default={create:function(t){return I.create(t)},factory:I}}]).default});// maybe unify the chrome-driver scripts and
//   web.js repackaging somehow?

// I built a pretty cool CLI forms interface in PHP,
//   import that when multi-language is done.

// TODO: can call all EMGL functions or re.* renderer2 export functions from scripts
//   Maybe this is where the paralel frame buffering comes in, or treat the javascript
//   like update calls and extrapolate.


function __webgl_enable_WEBGL_draw_instanced_base_vertex_base_instance(ctx) {
  return !!(ctx.dibvbi = ctx.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"));
}

function __webgl_enable_WEBGL_multi_draw_instanced_base_vertex_base_instance(ctx) {
  return !!(ctx.mdibvbi = ctx.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"));
}

function __webgl_enable_WEBGL_multi_draw(ctx) {
  return !!(ctx.multiDrawWebgl = ctx.getExtension("WEBGL_multi_draw"));
}


function SAFE_HEAP_STORE(dest, value, bytes, isFloat) {
  switch (bytes) {
    case 1:
      HEAP8[dest >> 0] = value
      break;
    case 2:
      HEAP16[dest >> 1] = value
      break;
    case 4:
      if (isFloat) {
        HEAPF32[dest >> 2] = value
      } else {
        HEAP32[dest >> 2] = value
      }
      break;
    case 8:
      HEAPF64[dest >> 3] = value
      break;
    default:
      throw new Error('data type not supported ' + bytes)
  }
  return value;
}

function unSign(value, bits) {
  if (value >= 0) {
    return value;
  }
  return bits <= 32 ? 2 * Math.abs(1 << bits - 1) + value : Math.pow(2, bits) + value;
}

function SAFE_HEAP_LOAD(src, bytes, unsigned, isFloat) {
  let ret
  switch (bytes) {
    case 1:
      ret = HEAP8[src >> 0]
      break;
    case 2:
      ret = HEAP16[src >> 1]
      break;
    case 4:
      if (isFloat) {
        ret = HEAPF32[src >> 2]
      } else {
        ret = HEAP32[src >> 2]
      }
      break;
    case 8:
      ret = HEAPF64[src >> 3]
      break;
    default:
      throw new Error('data type not supported ' + bytes)
  }
  if (unsigned) ret = unSign(ret, bytes * 8);
  return ret
}

var GL = {
  counter: 1,
  buffers: [],
  mappedBuffers: {},
  programs: [],
  framebuffers: [],
  renderbuffers: [],
  textures: [],
  shaders: [],
  vaos: [],
  contexts: [],
  offscreenCanvases: {},
  queries: [],
  samplers: [],
  transformFeedbacks: [],
  syncs: [],
  byteSizeByTypeRoot: 5120,
  byteSizeByType: [1, 1, 2, 2, 4, 4, 4, 2, 3, 4, 8],
  stringCache: {},
  stringiCache: {},
  unpackAlignment: 4,
  recordError: function recordError(errorCode) {
    if (!GL.lastError) {
      GL.lastError = errorCode;
    }
  },
  getNewId: function (table) {
    var ret = GL.counter++;
    for (var i = table.length; i < ret; i++) {
      table[i] = null;
    }
    return ret;
  },
  MAX_TEMP_BUFFER_SIZE: 2097152,
  numTempVertexBuffersPerSize: 64,
  log2ceilLookup: function (i) {
    return 32 - Math.clz32(i === 0 ? 0 : i - 1);
  },
  generateTempBuffers: function (quads, context) {
    var largestIndex = GL.log2ceilLookup(GL.MAX_TEMP_BUFFER_SIZE);
    context.tempVertexBufferCounters1 = [];
    context.tempVertexBufferCounters2 = [];
    context.tempVertexBufferCounters1.length = context.tempVertexBufferCounters2.length = largestIndex + 1;
    context.tempVertexBuffers1 = [];
    context.tempVertexBuffers2 = [];
    context.tempVertexBuffers1.length = context.tempVertexBuffers2.length = largestIndex + 1;
    context.tempIndexBuffers = [];
    context.tempIndexBuffers.length = largestIndex + 1;
    for (var i = 0; i <= largestIndex; ++i) {
      context.tempIndexBuffers[i] = null;
      context.tempVertexBufferCounters1[i] = context.tempVertexBufferCounters2[i] = 0;
      var ringbufferLength = GL.numTempVertexBuffersPerSize;
      context.tempVertexBuffers1[i] = [];
      context.tempVertexBuffers2[i] = [];
      var ringbuffer1 = context.tempVertexBuffers1[i];
      var ringbuffer2 = context.tempVertexBuffers2[i];
      ringbuffer1.length = ringbuffer2.length = ringbufferLength;
      for (var j = 0; j < ringbufferLength; ++j) {
        ringbuffer1[j] = ringbuffer2[j] = null;
      }
    }
    if (quads) {
      context.tempQuadIndexBuffer = GLctx.createBuffer();
      context.GLctx.bindBuffer(34963, context.tempQuadIndexBuffer);
      var numIndexes = GL.MAX_TEMP_BUFFER_SIZE >> 1;
      var quadIndexes = new Uint16Array(numIndexes);
      var i = 0, v = 0;
      while (1) {
        quadIndexes[i++] = v;
        if (i >= numIndexes) break;
        quadIndexes[i++] = v + 1;
        if (i >= numIndexes) break;
        quadIndexes[i++] = v + 2;
        if (i >= numIndexes) break;
        quadIndexes[i++] = v;
        if (i >= numIndexes) break;
        quadIndexes[i++] = v + 2;
        if (i >= numIndexes) break;
        quadIndexes[i++] = v + 3;
        if (i >= numIndexes) break;
        v += 4;
      }
      context.GLctx.bufferData(34963, quadIndexes, 35044);
      context.GLctx.bindBuffer(34963, null);
    }
  },
  getTempVertexBuffer: function getTempVertexBuffer(sizeBytes) {
    var idx = GL.log2ceilLookup(sizeBytes);
    var ringbuffer = GL.currentContext.tempVertexBuffers1[idx];
    var nextFreeBufferIndex = GL.currentContext.tempVertexBufferCounters1[idx];
    GL.currentContext.tempVertexBufferCounters1[idx] = GL.currentContext.tempVertexBufferCounters1[idx] + 1 & GL.numTempVertexBuffersPerSize - 1;
    var vbo = ringbuffer[nextFreeBufferIndex];
    if (vbo) {
      return vbo;
    }
    var prevVBO = GLctx.getParameter(34964);
    ringbuffer[nextFreeBufferIndex] = GLctx.createBuffer();
    GLctx.bindBuffer(34962, ringbuffer[nextFreeBufferIndex]);
    GLctx.bufferData(34962, 1 << idx, 35048);
    GLctx.bindBuffer(34962, prevVBO);
    return ringbuffer[nextFreeBufferIndex];
  },
  getTempIndexBuffer: function getTempIndexBuffer(sizeBytes) {
    var idx = GL.log2ceilLookup(sizeBytes);
    var ibo = GL.currentContext.tempIndexBuffers[idx];
    if (ibo) {
      return ibo;
    }
    var prevIBO = GLctx.getParameter(34965);
    GL.currentContext.tempIndexBuffers[idx] = GLctx.createBuffer();
    GLctx.bindBuffer(34963, GL.currentContext.tempIndexBuffers[idx]);
    GLctx.bufferData(34963, 1 << idx, 35048);
    GLctx.bindBuffer(34963, prevIBO);
    return GL.currentContext.tempIndexBuffers[idx];
  },
  newRenderingFrameStarted: function newRenderingFrameStarted() {
    if (!GL.currentContext) {
      return;
    }
    var vb = GL.currentContext.tempVertexBuffers1;
    GL.currentContext.tempVertexBuffers1 = GL.currentContext.tempVertexBuffers2;
    GL.currentContext.tempVertexBuffers2 = vb;
    vb = GL.currentContext.tempVertexBufferCounters1;
    GL.currentContext.tempVertexBufferCounters1 = GL.currentContext.tempVertexBufferCounters2;
    GL.currentContext.tempVertexBufferCounters2 = vb;
    var largestIndex = GL.log2ceilLookup(GL.MAX_TEMP_BUFFER_SIZE);
    for (var i = 0; i <= largestIndex; ++i) {
      GL.currentContext.tempVertexBufferCounters1[i] = 0;
    }
  },
  getSource: function (shader, count, string, length) {
    var source = "";
    for (var i = 0; i < count; ++i) {
      var len = length ? SAFE_HEAP_LOAD(length + i * 4 | 0, 4, 0) | 0 : -1;
      source += addressToString(SAFE_HEAP_LOAD(string + i * 4 | 0, 4, 0) | 0, len < 0 ? undefined : len);
    }
    return source;
  },
  calcBufLength: function calcBufLength(size, type, stride, count) {
    if (stride > 0) {
      return count * stride;
    }
    var typeSize = GL.byteSizeByType[type - GL.byteSizeByTypeRoot];
    return size * typeSize * count;
  },
  usedTempBuffers: [],
  preDrawHandleClientVertexAttribBindings: function preDrawHandleClientVertexAttribBindings(count) {
    GL.resetBufferBinding = false;
    for (var i = 0; i < GL.currentContext.maxVertexAttribs; ++i) {
      var cb = GL.currentContext.clientBuffers[i];
      if (!cb.clientside || !cb.enabled) continue;
      GL.resetBufferBinding = true;
      var size = GL.calcBufLength(cb.size, cb.type, cb.stride, count);
      var buf = GL.getTempVertexBuffer(size);
      GLctx.bindBuffer(34962, buf);
      GLctx.bufferSubData(34962, 0, HEAPU8.subarray(cb.ptr, cb.ptr + size));
      cb.vertexAttribPointerAdaptor.call(GLctx, i, cb.size, cb.type, cb.normalized, cb.stride, 0);
    }
  },
  postDrawHandleClientVertexAttribBindings: function postDrawHandleClientVertexAttribBindings() {
    if (GL.resetBufferBinding) {
      GLctx.bindBuffer(34962, GL.buffers[GLctx.currentArrayBufferBinding]);
    }
  },
  createContext: function (canvas, webGLContextAttributes) {
    if (!canvas.getContextSafariWebGL2Fixed) {
      canvas.getContextSafariWebGL2Fixed = canvas.getContext;
      canvas.getContext = function (ver, attrs) {
        var gl = canvas.getContextSafariWebGL2Fixed(ver, attrs);
        return ver == "webgl" == gl instanceof WebGLRenderingContext ? gl : null;
      };
    }
    var ctx = canvas.getContext("webgl2", webGLContextAttributes);
    if (!ctx) return 0;
    var handle = GL.registerContext(ctx, webGLContextAttributes);
    return handle;
  },
  registerContext: function (ctx, webGLContextAttributes) {
    var handle = GL.getNewId(GL.contexts);
    var context = {
      handle: handle,
      attributes: webGLContextAttributes,
      version: webGLContextAttributes.majorVersion,
      GLctx: ctx
    };
    if (ctx.canvas) ctx.canvas.GLctxObject = context;
    GL.contexts[handle] = context;
    if (typeof webGLContextAttributes.enableExtensionsByDefault === "undefined" || webGLContextAttributes.enableExtensionsByDefault) {
      GL.initExtensions(context);
    }
    context.maxVertexAttribs = context.GLctx.getParameter(34921);
    context.clientBuffers = [];
    for (var i = 0; i < context.maxVertexAttribs; i++) {
      context.clientBuffers[i] = {
        enabled: false,
        clientside: false,
        size: 0,
        type: 0,
        normalized: 0,
        stride: 0,
        ptr: 0,
        vertexAttribPointerAdaptor: null
      };
    }
    GL.generateTempBuffers(false, context);
    return handle;
  },
  makeContextCurrent: function (contextHandle) {
    GL.currentContext = GL.contexts[contextHandle];
    window.ctx = GLctx = GL.currentContext && GL.currentContext.GLctx;
    return !(contextHandle && !GLctx);
  },
  getContext: function (contextHandle) {
    return GL.contexts[contextHandle];
  },
  deleteContext: function (contextHandle) {
    if (GL.currentContext === GL.contexts[contextHandle]) GL.currentContext = null;
    if (typeof JSEvents === "object") JSEvents.removeAllHandlersOnTarget(GL.contexts[contextHandle].GLctx.canvas);
    if (GL.contexts[contextHandle] && GL.contexts[contextHandle].GLctx.canvas) GL.contexts[contextHandle].GLctx.canvas.GLctxObject = undefined;
    GL.contexts[contextHandle] = null;
  },
  initExtensions: function (context) {
    if (!context) context = GL.currentContext;
    if (context.initExtensionsDone) return;
    context.initExtensionsDone = true;
    var GLctx = context.GLctx;
    __webgl_enable_WEBGL_draw_instanced_base_vertex_base_instance(GLctx);
    __webgl_enable_WEBGL_multi_draw_instanced_base_vertex_base_instance(GLctx);
    if (context.version >= 2) {
      GLctx.disjointTimerQueryExt = GLctx.getExtension("EXT_disjoint_timer_query_webgl2");
    }
    if (context.version < 2 || !GLctx.disjointTimerQueryExt) {
      GLctx.disjointTimerQueryExt = GLctx.getExtension("EXT_disjoint_timer_query");
    }
    __webgl_enable_WEBGL_multi_draw(GLctx);
    var exts = GLctx.getSupportedExtensions() || [];
    exts.forEach(function (ext) {
      if (!ext.includes("lose_context") && !ext.includes("debug")) {
        GLctx.getExtension(ext);
      }
    });
  }
};

function _getTempRet0() {
  return getTempRet0();
}

function _glActiveTexture(x0) {
  GLctx["activeTexture"](x0);
}

function _glAlphaFunc() {
  debugger;
}

function _glArrayElement() {
  debugger;
}

function _glAttachShader(program, shader) {
  GLctx.attachShader(GL.programs[program], GL.shaders[shader]);
}

function _glBegin() {
  throw "Legacy GL function (glBegin) called. If you want legacy GL emulation, you need to compile with -s LEGACY_GL_EMULATION=1 to enable legacy GL emulation.";
}

function _glBindAttribLocation(program, index, name) {
  GLctx.bindAttribLocation(GL.programs[program], index, addressToString(name));
}

function _glBindBuffer(target, buffer) {
  if (target == 34962) {
    GLctx.currentArrayBufferBinding = buffer;
  } else if (target == 34963) {
    GLctx.currentElementArrayBufferBinding = buffer;
  }
  if (target == 35051) {
    GLctx.currentPixelPackBufferBinding = buffer;
  } else if (target == 35052) {
    GLctx.currentPixelUnpackBufferBinding = buffer;
  }
  GLctx.bindBuffer(target, GL.buffers[buffer]);
}

function _glBindFramebuffer(target, framebuffer) {
  GLctx.bindFramebuffer(target, GL.framebuffers[framebuffer]);
}

function _glBindRenderbuffer(target, renderbuffer) {
  GLctx.bindRenderbuffer(target, GL.renderbuffers[renderbuffer]);
}

function _glBindTexture(target, texture) {
  GLctx.bindTexture(target, GL.textures[texture]);
  EMGL.previousTex = texture
  if (typeof EMGL.texFiles[texture] != 'undefined') {
    EMGL.previousImage = EMGL.texFiles[texture][1]
  } else {
    EMGL.previousImage = null
  }
}

function _glBindVertexArray(vao) {
  GLctx["bindVertexArray"](GL.vaos[vao]);
  var ibo = GLctx.getParameter(34965);
  GLctx.currentElementArrayBufferBinding = ibo ? ibo.name | 0 : 0;
}

function _glBlendFunc(x0, x1) {
  GLctx["blendFunc"](x0, x1);
}

function _glBlitFramebuffer(x0, x1, x2, x3, x4, x5, x6, x7, x8, x9) {
  GLctx["blitFramebuffer"](x0, x1, x2, x3, x4, x5, x6, x7, x8, x9);
}

function _glBufferData(target, size, data, usage) {
  if (true) {
    if (data) {
      GLctx.bufferData(target, HEAPU8, usage, data, size);
    } else {
      GLctx.bufferData(target, size, usage);
    }
  } else {
    GLctx.bufferData(target, data ? HEAPU8.subarray(data, data + size) : size, usage);
  }
}

function _glBufferSubData(target, offset, size, data) {
  if (true) {
    GLctx.bufferSubData(target, offset, HEAPU8, data, size);
    return;
  }
  GLctx.bufferSubData(target, offset, HEAPU8.subarray(data, data + size));
}

function _glCheckFramebufferStatus(x0) {
  return GLctx["checkFramebufferStatus"](x0);
}

function _glClear(x0) {
  GLctx["clear"](x0);
}

function _glClearColor(x0, x1, x2, x3) {
  GLctx["clearColor"](x0, x1, x2, x3);
}

function _glClearDepth(x0) {
  GLctx["clearDepth"](x0);
}

function _glClearStencil(x0) {
  GLctx["clearStencil"](x0);
}

function _glClipPlane() {
  debugger;
}

function _glColor3f() {
  debugger;
}

function _glColor4f() {
  debugger;
}

function _glColor4ubv() {
  debugger;
}

function _glColorMask(red, green, blue, alpha) {
  GLctx.colorMask(!!red, !!green, !!blue, !!alpha);
}

function _glColorPointer() {
  debugger;
}

function _glCompileShader(shader) {
  GLctx.compileShader(GL.shaders[shader]);
}

function _glCompressedTexImage2D(target, level, internalFormat, width, height, border, imageSize, data) {
  if (true) {
    if (GLctx.currentPixelUnpackBufferBinding) {
      GLctx["compressedTexImage2D"](target, level, internalFormat, width, height, border, imageSize, data);
    } else {
      GLctx["compressedTexImage2D"](target, level, internalFormat, width, height, border, HEAPU8, data, imageSize);
    }
    return;
  }
  GLctx["compressedTexImage2D"](target, level, internalFormat, width, height, border, data ? HEAPU8.subarray(data, data + imageSize) : null);
}

function _glCompressedTexSubImage2D(target, level, xoffset, yoffset, width, height, format, imageSize, data) {
  if (true) {
    if (GLctx.currentPixelUnpackBufferBinding) {
      GLctx["compressedTexSubImage2D"](target, level, xoffset, yoffset, width, height, format, imageSize, data);
    } else {
      GLctx["compressedTexSubImage2D"](target, level, xoffset, yoffset, width, height, format, HEAPU8, data, imageSize);
    }
    return;
  }
  GLctx["compressedTexSubImage2D"](target, level, xoffset, yoffset, width, height, format, data ? HEAPU8.subarray(data, data + imageSize) : null);
}

function _glCopyTexSubImage2D(x0, x1, x2, x3, x4, x5, x6, x7) {
  GLctx["copyTexSubImage2D"](x0, x1, x2, x3, x4, x5, x6, x7);
}

function _glCreateProgram() {
  var id = GL.getNewId(GL.programs);
  var program = GLctx.createProgram();
  program.name = id;
  program.maxUniformLength = program.maxAttributeLength = program.maxUniformBlockNameLength = 0;
  program.uniformIdCounter = 1;
  GL.programs[id] = program;
  return id;
}

function _glCreateShader(shaderType) {
  var id = GL.getNewId(GL.shaders);
  GL.shaders[id] = GLctx.createShader(shaderType);
  return id;
}

function _glCullFace(x0) {
  GLctx["cullFace"](x0);
}

function _glDeleteBuffers(n, buffers) {
  for (var i = 0; i < n; i++) {
    var id = SAFE_HEAP_LOAD(buffers + i * 4 | 0, 4, 0) | 0;
    var buffer = GL.buffers[id];
    if (!buffer) continue;
    GLctx.deleteBuffer(buffer);
    buffer.name = 0;
    GL.buffers[id] = null;
    if (id == GLctx.currentArrayBufferBinding) GLctx.currentArrayBufferBinding = 0;
    if (id == GLctx.currentElementArrayBufferBinding) GLctx.currentElementArrayBufferBinding = 0;
    if (id == GLctx.currentPixelPackBufferBinding) GLctx.currentPixelPackBufferBinding = 0;
    if (id == GLctx.currentPixelUnpackBufferBinding) GLctx.currentPixelUnpackBufferBinding = 0;
  }
}

function _glDeleteFramebuffers(n, framebuffers) {
  for (var i = 0; i < n; ++i) {
    var id = SAFE_HEAP_LOAD(framebuffers + i * 4 | 0, 4, 0) | 0;
    var framebuffer = GL.framebuffers[id];
    if (!framebuffer) continue;
    GLctx.deleteFramebuffer(framebuffer);
    framebuffer.name = 0;
    GL.framebuffers[id] = null;
  }
}

function _glDeleteProgram(id) {
  if (!id) return;
  var program = GL.programs[id];
  if (!program) {
    GL.recordError(1281);
    return;
  }
  GLctx.deleteProgram(program);
  program.name = 0;
  GL.programs[id] = null;
}

function _glDeleteRenderbuffers(n, renderbuffers) {
  for (var i = 0; i < n; i++) {
    var id = SAFE_HEAP_LOAD(renderbuffers + i * 4 | 0, 4, 0) | 0;
    var renderbuffer = GL.renderbuffers[id];
    if (!renderbuffer) continue;
    GLctx.deleteRenderbuffer(renderbuffer);
    renderbuffer.name = 0;
    GL.renderbuffers[id] = null;
  }
}

function _glDeleteShader(id) {
  if (!id) return;
  var shader = GL.shaders[id];
  if (!shader) {
    GL.recordError(1281);
    return;
  }
  GLctx.deleteShader(shader);
  GL.shaders[id] = null;
}

function _glDeleteTextures(n, textures) {
  for (var i = 0; i < n; i++) {
    var id = SAFE_HEAP_LOAD(textures + i * 4 | 0, 4, 0) | 0;
    var texture = GL.textures[id];
    if (!texture) continue;
    GLctx.deleteTexture(texture);
    texture.name = 0;
    GL.textures[id] = null;
  }
}

function _glDeleteVertexArrays(n, vaos) {
  for (var i = 0; i < n; i++) {
    var id = SAFE_HEAP_LOAD(vaos + i * 4 | 0, 4, 0) | 0;
    GLctx["deleteVertexArray"](GL.vaos[id]);
    GL.vaos[id] = null;
  }
}

function _glDepthFunc(x0) {
  GLctx["depthFunc"](x0);
}

function _glDepthMask(flag) {
  GLctx.depthMask(!!flag);
}

function _glDepthRange(x0, x1) {
  GLctx["depthRange"](x0, x1);
}

function _glDetachShader(program, shader) {
  GLctx.detachShader(GL.programs[program], GL.shaders[shader]);
}

function _glDisable(x0) {
  GLctx["disable"](x0);
}

function _glDisableClientState() {
  debugger;
}

function _glDisableVertexAttribArray(index) {
  var cb = GL.currentContext.clientBuffers[index];
  cb.enabled = false;
  GLctx.disableVertexAttribArray(index);
}

function _glDrawArrays(mode, first, count) {
  GL.preDrawHandleClientVertexAttribBindings(first + count);
  GLctx.drawArrays(mode, first, count);
  GL.postDrawHandleClientVertexAttribBindings();
}

function _glDrawBuffer() {
  debugger;
}

var tempFixedLengthArray = [];

function _glDrawBuffers(n, bufs) {
  var bufArray = tempFixedLengthArray[n];
  for (var i = 0; i < n; i++) {
    bufArray[i] = SAFE_HEAP_LOAD(bufs + i * 4 | 0, 4, 0) | 0;
  }
  GLctx["drawBuffers"](bufArray);
}

for (var i = 0; i < 32; ++i) tempFixedLengthArray.push(new Array(i));

function _glDrawElements(mode, count, type, indices) {
  var buf;
  if (!GLctx.currentElementArrayBufferBinding) {
    var size = GL.calcBufLength(1, type, 0, count);
    buf = GL.getTempIndexBuffer(size);
    GLctx.bindBuffer(34963, buf);
    GLctx.bufferSubData(34963, 0, HEAPU8.subarray(indices, indices + size));
    indices = 0;
  }
  GL.preDrawHandleClientVertexAttribBindings(count);
  GLctx.drawElements(mode, count, type, indices);
  GL.postDrawHandleClientVertexAttribBindings(count);
  if (!GLctx.currentElementArrayBufferBinding) {
    GLctx.bindBuffer(34963, null);
  }
}

function _glEnable(x0) {
  GLctx["enable"](x0);
}

function _glEnableClientState() {
  debugger;
}

function _glEnableVertexAttribArray(index) {
  var cb = GL.currentContext.clientBuffers[index];
  cb.enabled = true;
  GLctx.enableVertexAttribArray(index);
}

function _glEnd() {
  debugger;
}

function _glFinish() {
  GLctx["finish"]();
}

function _glFlush() {
  GLctx["flush"]();
}

function _glFramebufferRenderbuffer(target, attachment, renderbuffertarget, renderbuffer) {
  GLctx.framebufferRenderbuffer(target, attachment, renderbuffertarget, GL.renderbuffers[renderbuffer]);
}

function _glFramebufferTexture2D(target, attachment, textarget, texture, level) {
  GLctx.framebufferTexture2D(target, attachment, textarget, GL.textures[texture], level);
}

function _glFrustum() {
  debugger;
}

function __glGenObject(n, buffers, createFunction, objectTable) {
  for (var i = 0; i < n; i++) {
    var buffer = GLctx[createFunction]();
    var id = buffer && GL.getNewId(objectTable);
    if (buffer) {
      buffer.name = id;
      objectTable[id] = buffer;
    } else {
      GL.recordError(1282);
    }
    SAFE_HEAP_STORE(buffers + i * 4 | 0, id | 0, 4);
  }
}

function _glGenBuffers(n, buffers) {
  __glGenObject(n, buffers, "createBuffer", GL.buffers);
}

function _glGenFramebuffers(n, ids) {
  __glGenObject(n, ids, "createFramebuffer", GL.framebuffers);
}

function _glGenRenderbuffers(n, renderbuffers) {
  __glGenObject(n, renderbuffers, "createRenderbuffer", GL.renderbuffers);
}

function loadImage(filename, pic, ext) {
  let filenameStr = addressToString(filename)
  let buf = stringToAddress('DEADBEEF') // pointer to pointer
  let length
  EMGL.previousImage = null
  EMGL.previousName = ''
  HEAP32[buf >> 2] = 0
  // TODO: merge with virtual filesystem...
  //   But doing it this way, it's possible for images to load with the page
  //   If I switch back to FS.virtual mode, this part will always reload async
  let preloadedImage = document.querySelector(`IMG[title="${filenameStr}"]`)
  if (preloadedImage) {
    EMGL.previousName = filenameStr
    EMGL.previousImage = preloadedImage
    HEAP32[pic >> 2] = 1
    return
  }
  
  if ((length = FS_ReadFile(filename, buf)) > 0 && HEAPU32[buf >> 2] > 0) {
    let thisImage = document.createElement('IMG')
    EMGL.previousName = filenameStr
    EMGL.previousImage = thisImage
    thisImage.onload = function (evt) {
      HEAP32[(evt.target.address - 4 * 4) >> 2] = evt.target.width
      HEAP32[(evt.target.address - 3 * 4) >> 2] = evt.target.height
      R_FinishImage3(evt.target.address - 7 * 4, 0x1908 /* GL_RGBA */, 0)
    }
    let imageView = Array.from(HEAPU8.slice(HEAPU32[buf >> 2], HEAPU32[buf >> 2] + length))
    let utfEncoded = imageView.map(function (c) { return String.fromCharCode(c) }).join('')
    thisImage.src = 'data:image/' + ext + ';base64,' + btoa(utfEncoded)
    thisImage.name = filenameStr
    HEAP32[pic >> 2] = 1
    FS_FreeFile(HEAPU32[buf >> 2])
    return
  }
  EMGL.previousName = ''
  EMGL.previousImage = null
  HEAP32[pic >> 2] = null
}


function R_LoadPNG(filename, pic) {
  return loadImage(filename, pic, 'png')
}

function R_LoadJPG(filename, pic) {
  return loadImage(filename, pic, 'jpg')
}


function _glGenTextures(n, textures) {
  __glGenObject(n, textures, "createTexture", GL.textures);
  // engine is giving us address of where it will store texture name, also
  let texture = HEAP32[textures >> 2]
  EMGL.texFiles[texture] = [textures, null]
  let newName = addressToString(HEAPU32[(EMGL.texFiles[texture][0] - 7*4) >> 2])
  if(newName.length == 0) {
    // using CreateImage2() not 3
    return;
  }
  if(EMGL.previousImage 
    && EMGL.previousName.replace(/\..*?$/, '') == newName.replace(/\..*?$/, '')) {
    EMGL.previousImage.address = EMGL.texFiles[texture][0]
    EMGL.texFiles[texture][1] = EMGL.previousImage
    // copy width, height to C struct
    if(EMGL.previousImage.width > 0 && EMGL.previousImage.height > 0) {
      HEAP32[(textures - 4 * 4) >> 2] = EMGL.previousImage.width
      HEAP32[(textures - 3 * 4) >> 2] = EMGL.previousImage.height
    }
  }
  EMGL.previousImage = null
  EMGL.previousName = ''
}

function _glGenVertexArrays(n, arrays) {
  __glGenObject(n, arrays, "createVertexArray", GL.vaos);
}

function _glGenerateMipmap(x0) {
  GLctx["generateMipmap"](x0);
}

function __glGetActiveAttribOrUniform(funcName, program, index, bufSize, length, size, type, name) {
  program = GL.programs[program];
  var info = GLctx[funcName](program, index);
  if (info) {
    var numBytesWrittenExclNull = name && stringToAddress(info.name, name, bufSize);
    if (length) SAFE_HEAP_STORE(length | 0, numBytesWrittenExclNull | 0, 4);
    if (size) SAFE_HEAP_STORE(size | 0, info.size | 0, 4);
    if (type) SAFE_HEAP_STORE(type | 0, info.type | 0, 4);
  }
}

function _glGetActiveUniform(program, index, bufSize, length, size, type, name) {
  __glGetActiveAttribOrUniform("getActiveUniform", program, index, bufSize, length, size, type, name);
}

function readI53FromI64(ptr) {
  return SAFE_HEAP_LOAD((ptr >> 2) * 4, 4, 1) + SAFE_HEAP_LOAD((ptr + 4 >> 2) * 4, 4, 0) * 4294967296;
}

function readI53FromU64(ptr) {
  return SAFE_HEAP_LOAD((ptr >> 2) * 4, 4, 1) + SAFE_HEAP_LOAD((ptr + 4 >> 2) * 4, 4, 1) * 4294967296;
}

function writeI53ToI64(ptr, num) {
  SAFE_HEAP_STORE((ptr >> 2) * 4, num, 4);
  SAFE_HEAP_STORE((ptr + 4 >> 2) * 4, (num - SAFE_HEAP_LOAD((ptr >> 2) * 4, 4, 1)) / 4294967296, 4);
  var deserialized = num >= 0 ? readI53FromU64(ptr) : readI53FromI64(ptr);
  if (deserialized != num) warnOnce("writeI53ToI64() out of range: serialized JS Number " + num + " to Wasm heap as bytes lo=0x" + SAFE_HEAP_LOAD((ptr >> 2) * 4, 4, 1).toString(16) + ", hi=0x" + SAFE_HEAP_LOAD((ptr + 4 >> 2) * 4, 4, 1).toString(16) + ", which deserializes back to " + deserialized + " instead!");
}

function emscriptenWebGLGet(name_, p, type) {
  if (!p) {
    GL.recordError(1281);
    return;
  }
  var ret = undefined;
  switch (name_) {
    case 36346:
      ret = 1;
      break;

    case 36344:
      if (type != 0 && type != 1) {
        GL.recordError(1280);
      }
      return;

    case 34814:
    case 36345:
      ret = 0;
      break;

    case 34466:
      var formats = GLctx.getParameter(34467);
      ret = formats ? formats.length : 0;
      break;

    case 33309:
      if (GL.currentContext.version < 2) {
        GL.recordError(1282);
        return;
      }
      var exts = GLctx.getSupportedExtensions() || [];
      ret = 2 * exts.length;
      break;

    case 33307:
    case 33308:
      if (GL.currentContext.version < 2) {
        GL.recordError(1280);
        return;
      }
      ret = name_ == 33307 ? 3 : 0;
      break;
  }
  if (ret === undefined) {
    var result = GLctx.getParameter(name_);
    switch (typeof result) {
      case "number":
        ret = result;
        break;

      case "boolean":
        ret = result ? 1 : 0;
        break;

      case "string":
        GL.recordError(1280);
        return;

      case "object":
        if (result === null) {
          switch (name_) {
            case 34964:
            case 35725:
            case 34965:
            case 36006:
            case 36007:
            case 32873:
            case 34229:
            case 36662:
            case 36663:
            case 35053:
            case 35055:
            case 36010:
            case 35097:
            case 35869:
            case 32874:
            case 36389:
            case 35983:
            case 35368:
            case 34068:
              {
                ret = 0;
                break;
              }

            default:
              {
                GL.recordError(1280);
                return;
              }
          }
        } else if (result instanceof Float32Array || result instanceof Uint32Array || result instanceof Int32Array || result instanceof Array) {
          for (var i = 0; i < result.length; ++i) {
            switch (type) {
              case 0:
                SAFE_HEAP_STORE(p + i * 4 | 0, result[i] | 0, 4);
                break;

              case 2:
                SAFE_HEAP_STORE_D(p + i * 4 | 0, Math.fround(result[i]), 4);
                break;

              case 4:
                SAFE_HEAP_STORE(p + i | 0, (result[i] ? 1 : 0) | 0, 1);
                break;
            }
          }
          return;
        } else {
          try {
            ret = result.name | 0;
          } catch (e) {
            GL.recordError(1280);
            err("GL_INVALID_ENUM in glGet" + type + "v: Unknown object returned from WebGL getParameter(" + name_ + ")! (error: " + e + ")");
            return;
          }
        }
        break;

      default:
        GL.recordError(1280);
        err("GL_INVALID_ENUM in glGet" + type + "v: Native code calling glGet" + type + "v(" + name_ + ") and it returns " + result + " of type " + typeof result + "!");
        return;
    }
  }
  switch (type) {
    case 1:
      writeI53ToI64(p, ret);
      break;

    case 0:
      SAFE_HEAP_STORE(p | 0, ret | 0, 4);
      break;

    case 2:
      SAFE_HEAP_STORE_D(p | 0, Math.fround(ret), 4);
      break;

    case 4:
      SAFE_HEAP_STORE(p | 0, (ret ? 1 : 0) | 0, 1);
      break;
  }
}

function _glGetBooleanv(name_, p) {
  emscriptenWebGLGet(name_, p, 4);
}

function _glGetError() {
  var error = GLctx.getError() || GL.lastError;
  GL.lastError = 0;
  return error;
}

function _glGetIntegerv(name_, p) {
  emscriptenWebGLGet(name_, p, 0);
}

function _glGetProgramInfoLog(program, maxLength, length, infoLog) {
  var log = GLctx.getProgramInfoLog(GL.programs[program]);
  if (log === null) log = "(unknown error)";
  var numBytesWrittenExclNull = maxLength > 0 && infoLog ? stringToAddress(log, infoLog, maxLength) : 0;
  if (length) SAFE_HEAP_STORE(length | 0, numBytesWrittenExclNull | 0, 4);
}

function _glGetProgramiv(program, pname, p) {
  if (!p) {
    GL.recordError(1281);
    return;
  }
  if (program >= GL.counter) {
    GL.recordError(1281);
    return;
  }
  program = GL.programs[program];
  if (pname == 35716) {
    var log = GLctx.getProgramInfoLog(program);
    if (log === null) log = "(unknown error)";
    SAFE_HEAP_STORE(p | 0, log.length + 1 | 0, 4);
  } else if (pname == 35719) {
    if (!program.maxUniformLength) {
      for (var i = 0; i < GLctx.getProgramParameter(program, 35718); ++i) {
        program.maxUniformLength = Math.max(program.maxUniformLength, GLctx.getActiveUniform(program, i).name.length + 1);
      }
    }
    SAFE_HEAP_STORE(p | 0, program.maxUniformLength | 0, 4);
  } else if (pname == 35722) {
    if (!program.maxAttributeLength) {
      for (var i = 0; i < GLctx.getProgramParameter(program, 35721); ++i) {
        program.maxAttributeLength = Math.max(program.maxAttributeLength, GLctx.getActiveAttrib(program, i).name.length + 1);
      }
    }
    SAFE_HEAP_STORE(p | 0, program.maxAttributeLength | 0, 4);
  } else if (pname == 35381) {
    if (!program.maxUniformBlockNameLength) {
      for (var i = 0; i < GLctx.getProgramParameter(program, 35382); ++i) {
        program.maxUniformBlockNameLength = Math.max(program.maxUniformBlockNameLength, GLctx.getActiveUniformBlockName(program, i).length + 1);
      }
    }
    SAFE_HEAP_STORE(p | 0, program.maxUniformBlockNameLength | 0, 4);
  } else {
    SAFE_HEAP_STORE(p | 0, GLctx.getProgramParameter(program, pname) | 0, 4);
  }
}

function _glGetShaderInfoLog(shader, maxLength, length, infoLog) {
  var log = GLctx.getShaderInfoLog(GL.shaders[shader]);
  if (log === null) log = "(unknown error)";
  var numBytesWrittenExclNull = maxLength > 0 && infoLog ? stringToAddress(log, infoLog, maxLength) : 0;
  if (length) SAFE_HEAP_STORE(length | 0, numBytesWrittenExclNull | 0, 4);
}

function _glGetShaderSource(shader, bufSize, length, source) {
  var result = GLctx.getShaderSource(GL.shaders[shader]);
  if (!result) return;
  var numBytesWrittenExclNull = bufSize > 0 && source ? stringToAddress(result, source, bufSize) : 0;
  if (length) SAFE_HEAP_STORE(length | 0, numBytesWrittenExclNull | 0, 4);
}

function _glGetShaderiv(shader, pname, p) {
  if (!p) {
    GL.recordError(1281);
    return;
  }
  if (pname == 35716) {
    var log = GLctx.getShaderInfoLog(GL.shaders[shader]);
    if (log === null) log = "(unknown error)";
    var logLength = log ? log.length + 1 : 0;
    SAFE_HEAP_STORE(p | 0, logLength | 0, 4);
  } else if (pname == 35720) {
    var source = GLctx.getShaderSource(GL.shaders[shader]);
    var sourceLength = source ? source.length + 1 : 0;
    SAFE_HEAP_STORE(p | 0, sourceLength | 0, 4);
  } else {
    SAFE_HEAP_STORE(p | 0, GLctx.getShaderParameter(GL.shaders[shader], pname) | 0, 4);
  }
}

function _glGetString(name_) {
  var ret = GL.stringCache[name_];
  if (!ret) {
    switch (name_) {
      case 7939:
        var exts = GLctx.getSupportedExtensions() || [];
        exts = exts.concat(exts.map(function (e) {
          return "GL_" + e;
        }));
        ret = stringToAddress(exts.join(" "));
        break;

      case 7936:
      case 7937:
      case 37445:
      case 37446:
        var s = GLctx.getParameter(name_);
        if (!s) {
          GL.recordError(1280);
        }
        ret = s && stringToAddress(s);
        break;

      case 7938:
        var glVersion = GLctx.getParameter(7938);
        if (true) glVersion = "OpenGL ES 3.0 (" + glVersion + ")"; else {
          glVersion = "OpenGL ES 2.0 (" + glVersion + ")";
        }
        ret = stringToAddress(glVersion);
        break;

      case 35724:
        var glslVersion = GLctx.getParameter(35724);
        var ver_re = /^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/;
        var ver_num = glslVersion.match(ver_re);
        if (ver_num !== null) {
          if (ver_num[1].length == 3) ver_num[1] = ver_num[1] + "0";
          glslVersion = "OpenGL ES GLSL ES " + ver_num[1] + " (" + glslVersion + ")";
        }
        ret = stringToAddress(glslVersion);
        break;

      default:
        GL.recordError(1280);
    }
    GL.stringCache[name_] = ret;
  }
  return ret;
}

function _glGetStringi(name, index) {
  if (GL.currentContext.version < 2) {
    GL.recordError(1282);
    return 0;
  }
  var stringiCache = GL.stringiCache[name];
  if (stringiCache) {
    if (index < 0 || index >= stringiCache.length) {
      GL.recordError(1281);
      return 0;
    }
    return stringiCache[index];
  }
  switch (name) {
    case 7939:
      var exts = GLctx.getSupportedExtensions() || [];
      exts = exts.concat(exts.map(function (e) {
        return "GL_" + e;
      }));
      exts = exts.map(function (e) {
        return stringToAddress(e);
      });
      stringiCache = GL.stringiCache[name] = exts;
      if (index < 0 || index >= stringiCache.length) {
        GL.recordError(1281);
        return 0;
      }
      return stringiCache[index];

    default:
      GL.recordError(1280);
      return 0;
  }
}

function jstoi_q(str) {
  return parseInt(str);
}

function webglGetLeftBracePos(name) {
  return name.slice(-1) == "]" && name.lastIndexOf("[");
}

function webglPrepareUniformLocationsBeforeFirstUse(program) {
  var uniformLocsById = program.uniformLocsById, uniformSizeAndIdsByName = program.uniformSizeAndIdsByName, i, j;
  if (!uniformLocsById) {
    program.uniformLocsById = uniformLocsById = {};
    program.uniformArrayNamesById = {};
    for (i = 0; i < GLctx.getProgramParameter(program, 35718); ++i) {
      var u = GLctx.getActiveUniform(program, i);
      var nm = u.name;
      var sz = u.size;
      var lb = webglGetLeftBracePos(nm);
      var arrayName = lb > 0 ? nm.slice(0, lb) : nm;
      var id = program.uniformIdCounter;
      program.uniformIdCounter += sz;
      uniformSizeAndIdsByName[arrayName] = [sz, id];
      for (j = 0; j < sz; ++j) {
        uniformLocsById[id] = j;
        program.uniformArrayNamesById[id++] = arrayName;
      }
    }
  }
}

function _glGetUniformLocation(program, name) {
  name = addressToString(name);
  if (program = GL.programs[program]) {
    webglPrepareUniformLocationsBeforeFirstUse(program);
    var uniformLocsById = program.uniformLocsById;
    var arrayIndex = 0;
    var uniformBaseName = name;
    var leftBrace = webglGetLeftBracePos(name);
    if (leftBrace > 0) {
      arrayIndex = jstoi_q(name.slice(leftBrace + 1)) >>> 0;
      uniformBaseName = name.slice(0, leftBrace);
    }
    var sizeAndId = program.uniformSizeAndIdsByName[uniformBaseName];
    if (sizeAndId && arrayIndex < sizeAndId[0]) {
      arrayIndex += sizeAndId[1];
      if (uniformLocsById[arrayIndex] = uniformLocsById[arrayIndex] || GLctx.getUniformLocation(program, name)) {
        return arrayIndex;
      }
    }
  } else {
    GL.recordError(1281);
  }
  return -1;
}

function _glLineWidth(x0) {
  GLctx["lineWidth"](x0);
}

function _glLinkProgram(program) {
  program = GL.programs[program];
  GLctx.linkProgram(program);
  program.uniformLocsById = 0;
  program.uniformSizeAndIdsByName = {};
}

function _glLoadIdentity() {
  throw "Legacy GL function (glLoadIdentity) called. If you want legacy GL emulation, you need to compile with -s LEGACY_GL_EMULATION=1 to enable legacy GL emulation.";
}

function _glLoadMatrixf() {
  debugger;
}

function _glMapBufferRange() {
  debugger;
}

function _glMatrixMode() {
  throw "Legacy GL function (glMatrixMode) called. If you want legacy GL emulation, you need to compile with -s LEGACY_GL_EMULATION=1 to enable legacy GL emulation.";
}

function _glOrtho() {
  debugger;
}

function _glPolygonMode() { }

function _glPolygonOffset(x0, x1) {
  GLctx["polygonOffset"](x0, x1);
}

function _glPopMatrix() {
  debugger;
}

function _glPushMatrix() {
  debugger;
}

function _glReadBuffer(x0) {
  GLctx["readBuffer"](x0);
}

function computeUnpackAlignedImageSize(width, height, sizePerPixel, alignment) {
  function roundedToNextMultipleOf(x, y) {
    return x + y - 1 & -y;
  }
  var plainRowSize = width * sizePerPixel;
  var alignedRowSize = roundedToNextMultipleOf(plainRowSize, alignment);
  return height * alignedRowSize;
}

function __colorChannelsInGlTextureFormat(format) {
  var colorChannels = {
    5: 3,
    6: 4,
    8: 2,
    29502: 3,
    29504: 4,
    26917: 2,
    26918: 2,
    29846: 3,
    29847: 4
  };
  return colorChannels[format - 6402] || 1;
}

function heapObjectForWebGLType(type) {
  type -= 5120;
  if (type == 0) return HEAP8;
  if (type == 1) return HEAPU8;
  if (type == 2) return HEAP16;
  if (type == 4) return HEAP32;
  if (type == 6) return HEAPF32;
  if (type == 5 || type == 28922 || type == 28520 || type == 30779 || type == 30782) return HEAPU32;
  return HEAPU16;
}

function heapAccessShiftForWebGLHeap(heap) {
  return 31 - Math.clz32(heap.BYTES_PER_ELEMENT);
}

function emscriptenWebGLGetTexPixelData(type, format, width, height, pixels, internalFormat) {
  var heap = heapObjectForWebGLType(type);
  var shift = heapAccessShiftForWebGLHeap(heap);
  var byteSize = 1 << shift;
  var sizePerPixel = __colorChannelsInGlTextureFormat(format) * byteSize;
  var bytes = computeUnpackAlignedImageSize(width, height, sizePerPixel, GL.unpackAlignment);
  return heap.subarray(pixels >> shift, pixels + bytes >> shift);
}

function _glReadPixels(x, y, width, height, format, type, pixels) {
  if (true) {
    if (GLctx.currentPixelPackBufferBinding) {
      GLctx.readPixels(x, y, width, height, format, type, pixels);
    } else {
      var heap = heapObjectForWebGLType(type);
      GLctx.readPixels(x, y, width, height, format, type, heap, pixels >> heapAccessShiftForWebGLHeap(heap));
    }
    return;
  }
  var pixelData = emscriptenWebGLGetTexPixelData(type, format, width, height, pixels, format);
  if (!pixelData) {
    GL.recordError(1280);
    return;
  }
  GLctx.readPixels(x, y, width, height, format, type, pixelData);
}

function _glRenderbufferStorage(x0, x1, x2, x3) {
  GLctx["renderbufferStorage"](x0, x1, x2, x3);
}

function _glRenderbufferStorageMultisample(x0, x1, x2, x3, x4) {
  GLctx["renderbufferStorageMultisample"](x0, x1, x2, x3, x4);
}

function _glScissor(x0, x1, x2, x3) {
  GLctx["scissor"](x0, x1, x2, x3);
}

function _glShadeModel() {
  debugger;
}

function _glShaderSource(shader, count, string, length) {
  var source = GL.getSource(shader, count, string, length);
  GLctx.shaderSource(GL.shaders[shader], source);
}

function _glStencilFunc(x0, x1, x2) {
  GLctx["stencilFunc"](x0, x1, x2);
}

function _glStencilMask(x0) {
  GLctx["stencilMask"](x0);
}

function _glStencilOp(x0, x1, x2) {
  GLctx["stencilOp"](x0, x1, x2);
}

function _glTexCoord2f() {
  debugger;
}

function _glTexCoord2fv() {
  debugger;
}

function _glTexCoordPointer() {
  debugger;
}

function _glTexEnvf() {
  debugger;
}

function _glTexImage2D(target, level, internalFormat, width, height, border, format, type, pixels) {
  /*
  //if(width <= 2 || height <= 2) return
  if(EMGL.previousImage && EMGL.previousImage.complete) {
    width = EMGL.previousImage.width
    height = EMGL.previousImage.height
    GLctx.texImage2D(target, level, internalFormat, width, height, border, format, type, pixels ? EMGL.previousImage : null);
    return
  } else if (typeof EMGL.texFiles[EMGL.previousTex] != 'undefined'
    && EMGL.texFiles[EMGL.previousTex][1]) {
    console.log('whoops')
    return
  }
  */

  if (true) {
    if (GLctx.currentPixelUnpackBufferBinding) {
      GLctx.texImage2D(target, level, internalFormat, width, height, border, format, type, pixels);
    } else if (pixels) {
      var heap = heapObjectForWebGLType(type);
      GLctx.texImage2D(target, level, internalFormat, width, height, border, format, type, heap, pixels >> heapAccessShiftForWebGLHeap(heap));
    } else {
      GLctx.texImage2D(target, level, internalFormat, width, height, border, format, type, null);
    }
    return;
  }
  GLctx.texImage2D(target, level, internalFormat, width, height, border, format, type, pixels ? emscriptenWebGLGetTexPixelData(type, format, width, height, pixels, internalFormat) : null);
}

function _glTexParameterf(x0, x1, x2) {
  GLctx["texParameterf"](x0, x1, x2);
}

function _glTexParameteri(x0, x1, x2) {
  GLctx["texParameteri"](x0, x1, x2);
}

function _glTexSubImage2D(target, level, xoffset, yoffset, width, height, format, type, pixels) {
  if (EMGL.previousImage) {
    if (width <= 2 || height <= 2) return
    //width = EMGL.previousImage.width
    //height = EMGL.previousImage.height
    GLctx.texSubImage2D(target, level, xoffset, yoffset, width, height, format, type, EMGL.previousImage);
    return
  } else if (typeof EMGL.texFiles[EMGL.previousTex] != 'undefined'
    && EMGL.texFiles[EMGL.previousTex][1]) {
    //debugger
    return
  }

  if (true) {
    if (GLctx.currentPixelUnpackBufferBinding) {
      GLctx.texSubImage2D(target, level, xoffset, yoffset, width, height, format, type, pixels);
    } else if (pixels) {
      var heap = heapObjectForWebGLType(type);
      GLctx.texSubImage2D(target, level, xoffset, yoffset, width, height, format, type, heap, pixels >> heapAccessShiftForWebGLHeap(heap));
    } else {
      GLctx.texSubImage2D(target, level, xoffset, yoffset, width, height, format, type, null);
    }
    return;
  }

  var pixelData = null;
  if (pixels) pixelData = emscriptenWebGLGetTexPixelData(type, format, width, height, pixels, 0);
  GLctx.texSubImage2D(target, level, xoffset, yoffset, width, height, format, type, pixelData);
}

function _glTranslatef() {
  debugger;
}

function webglGetUniformLocation(location) {
  var p = GLctx.currentProgram;
  if (p) {
    var webglLoc = p.uniformLocsById[location];
    if (typeof webglLoc === "number") {
      p.uniformLocsById[location] = webglLoc = GLctx.getUniformLocation(p, p.uniformArrayNamesById[location] + (webglLoc > 0 ? "[" + webglLoc + "]" : ""));
    }
    return webglLoc;
  } else {
    GL.recordError(1282);
  }
}

function _glUniform1f(location, v0) {
  GLctx.uniform1f(webglGetUniformLocation(location), v0);
}

function _glUniform1fv(location, count, value) {
  GLctx.uniform1fv(webglGetUniformLocation(location), HEAPF32, value >> 2, count);
}

function _glUniform1i(location, v0) {
  GLctx.uniform1i(webglGetUniformLocation(location), v0);
}

function _glUniform2f(location, v0, v1) {
  GLctx.uniform2f(webglGetUniformLocation(location), v0, v1);
}

function _glUniform3f(location, v0, v1, v2) {
  GLctx.uniform3f(webglGetUniformLocation(location), v0, v1, v2);
}

function _glUniform4f(location, v0, v1, v2, v3) {
  GLctx.uniform4f(webglGetUniformLocation(location), v0, v1, v2, v3);
}

function _glUniformMatrix4fv(location, count, transpose, value) {
  GLctx.uniformMatrix4fv(webglGetUniformLocation(location), !!transpose, HEAPF32, value >> 2, count * 16);
}

function _glUnmapBuffer() {
  debugger;
}

function _glUseProgram(program) {
  program = GL.programs[program];
  GLctx.useProgram(program);
  GLctx.currentProgram = program;
}

function _glValidateProgram(program) {
  GLctx.validateProgram(GL.programs[program]);
}

function _glVertex2f() {
  debugger;
}

function _glVertex3f() {
  debugger;
}

function _glVertex3fv() {
  debugger;
}

function _glVertexAttribPointer(index, size, type, normalized, stride, ptr) {
  var cb = GL.currentContext.clientBuffers[index];
  if (!GLctx.currentArrayBufferBinding) {
    cb.size = size;
    cb.type = type;
    cb.normalized = normalized;
    cb.stride = stride;
    cb.ptr = ptr;
    cb.clientside = true;
    cb.vertexAttribPointerAdaptor = function (index, size, type, normalized, stride, ptr) {
      this.vertexAttribPointer(index, size, type, normalized, stride, ptr);
    };
    return;
  }
  cb.clientside = false;
  GLctx.vertexAttribPointer(index, size, type, !!normalized, stride, ptr);
}

function _glVertexPointer() {
  throw "Legacy GL function (glVertexPointer) called. If you want legacy GL emulation, you need to compile with -s LEGACY_GL_EMULATION=1 to enable legacy GL emulation.";
}

function _glViewport(x0, x1, x2, x3) {
  GLctx["viewport"](x0, x1, x2, x3);
}

function _setTempRet0(val) {
  setTempRet0(val);
}

function GL_GetDrawableSize(width, height) {
  // THIS IS THE NEW VID_RESTART FAST HACK
  INPUT.updateWidth = width
  INPUT.updateHeight = height
  HEAP32[width>>2] = GL.canvas.width
  HEAP32[height>>2] = GL.canvas.height
}

var GLctx;

var EMGL = {
  previousName: '',
  previousImage: null,
  previousTex: 0,
  texFiles: {},
  GL_GetDrawableSize: GL_GetDrawableSize,
  GL_GetProcAddress: function () { },
  R_LoadPNG: R_LoadPNG,
  R_LoadJPG: R_LoadJPG,
  "getTempRet0": _getTempRet0,
  "glActiveTexture": _glActiveTexture,
  "glAlphaFunc": _glAlphaFunc,
  "glArrayElement": _glArrayElement,
  "glAttachShader": _glAttachShader,
  "glBegin": _glBegin,
  "glBindAttribLocation": _glBindAttribLocation,
  "glBindBuffer": _glBindBuffer,
  "glBindFramebuffer": _glBindFramebuffer,
  "glBindRenderbuffer": _glBindRenderbuffer,
  "glBindTexture": _glBindTexture,
  "glBindVertexArray": _glBindVertexArray,
  "glBlendFunc": _glBlendFunc,
  "glBlitFramebuffer": _glBlitFramebuffer,
  "glBufferData": _glBufferData,
  "glBufferSubData": _glBufferSubData,
  "glCheckFramebufferStatus": _glCheckFramebufferStatus,
  "glClear": _glClear,
  "glClearColor": _glClearColor,
  "glClearDepth": _glClearDepth,
  "glClearStencil": _glClearStencil,
  "glClipPlane": _glClipPlane,
  "glColor3f": _glColor3f,
  "glColor4f": _glColor4f,
  "glColor4ubv": _glColor4ubv,
  "glColorMask": _glColorMask,
  "glColorPointer": _glColorPointer,
  "glCompileShader": _glCompileShader,
  "glCompressedTexImage2D": _glCompressedTexImage2D,
  "glCompressedTexSubImage2D": _glCompressedTexSubImage2D,
  "glCopyTexSubImage2D": _glCopyTexSubImage2D,
  "glCreateProgram": _glCreateProgram,
  "glCreateShader": _glCreateShader,
  "glCullFace": _glCullFace,
  "glDeleteBuffers": _glDeleteBuffers,
  "glDeleteFramebuffers": _glDeleteFramebuffers,
  "glDeleteProgram": _glDeleteProgram,
  "glDeleteRenderbuffers": _glDeleteRenderbuffers,
  "glDeleteShader": _glDeleteShader,
  "glDeleteTextures": _glDeleteTextures,
  "glDeleteVertexArrays": _glDeleteVertexArrays,
  "glDepthFunc": _glDepthFunc,
  "glDepthMask": _glDepthMask,
  "glDepthRange": _glDepthRange,
  "glDetachShader": _glDetachShader,
  "glDisable": _glDisable,
  "glDisableClientState": _glDisableClientState,
  "glDisableVertexAttribArray": _glDisableVertexAttribArray,
  "glDrawArrays": _glDrawArrays,
  "glDrawBuffer": _glDrawBuffer,
  "glDrawBuffers": _glDrawBuffers,
  "glDrawElements": _glDrawElements,
  "glEnable": _glEnable,
  "glEnableClientState": _glEnableClientState,
  "glEnableVertexAttribArray": _glEnableVertexAttribArray,
  "glEnd": _glEnd,
  "glFinish": _glFinish,
  "glFlush": _glFlush,
  "glFramebufferRenderbuffer": _glFramebufferRenderbuffer,
  "glFramebufferTexture2D": _glFramebufferTexture2D,
  "glFrustum": _glFrustum,
  "glGenBuffers": _glGenBuffers,
  "glGenFramebuffers": _glGenFramebuffers,
  "glGenRenderbuffers": _glGenRenderbuffers,
  "glGenTextures": _glGenTextures,
  "glGenVertexArrays": _glGenVertexArrays,
  "glGenerateMipmap": _glGenerateMipmap,
  "glGetActiveUniform": _glGetActiveUniform,
  "glGetBooleanv": _glGetBooleanv,
  "glGetError": _glGetError,
  "glGetIntegerv": _glGetIntegerv,
  "glGetProgramInfoLog": _glGetProgramInfoLog,
  "glGetProgramiv": _glGetProgramiv,
  "glGetShaderInfoLog": _glGetShaderInfoLog,
  "glGetShaderSource": _glGetShaderSource,
  "glGetShaderiv": _glGetShaderiv,
  "glGetString": _glGetString,
  "glGetStringi": _glGetStringi,
  "glGetUniformLocation": _glGetUniformLocation,
  "glLineWidth": _glLineWidth,
  "glLinkProgram": _glLinkProgram,
  "glLoadIdentity": _glLoadIdentity,
  "glLoadMatrixf": _glLoadMatrixf,
  "glMapBufferRange": _glMapBufferRange,
  "glMatrixMode": _glMatrixMode,
  "glOrtho": _glOrtho,
  "glPolygonMode": _glPolygonMode,
  "glPolygonOffset": _glPolygonOffset,
  "glPopMatrix": _glPopMatrix,
  "glPushMatrix": _glPushMatrix,
  "glReadBuffer": _glReadBuffer,
  "glReadPixels": _glReadPixels,
  "glRenderbufferStorage": _glRenderbufferStorage,
  "glRenderbufferStorageMultisample": _glRenderbufferStorageMultisample,
  "glScissor": _glScissor,
  "glShadeModel": _glShadeModel,
  "glShaderSource": _glShaderSource,
  "glStencilFunc": _glStencilFunc,
  "glStencilMask": _glStencilMask,
  "glStencilOp": _glStencilOp,
  "glTexCoord2f": _glTexCoord2f,
  "glTexCoord2fv": _glTexCoord2fv,
  "glTexCoordPointer": _glTexCoordPointer,
  "glTexEnvf": _glTexEnvf,
  "glTexImage2D": _glTexImage2D,
  "glTexParameterf": _glTexParameterf,
  "glTexParameteri": _glTexParameteri,
  "glTexSubImage2D": _glTexSubImage2D,
  "glTranslatef": _glTranslatef,
  "glUniform1f": _glUniform1f,
  "glUniform1fv": _glUniform1fv,
  "glUniform1i": _glUniform1i,
  "glUniform2f": _glUniform2f,
  "glUniform3f": _glUniform3f,
  "glUniform4f": _glUniform4f,
  "glUniformMatrix4fv": _glUniformMatrix4fv,
  "glUnmapBuffer": _glUnmapBuffer,
  "glUseProgram": _glUseProgram,
  "glValidateProgram": _glValidateProgram,
  "glVertex2f": _glVertex2f,
  "glVertex3f": _glVertex3f,
  "glVertex3fv": _glVertex3fv,
  "glVertexAttribPointer": _glVertexAttribPointer,
  "glVertexPointer": _glVertexPointer,
  "glViewport": _glViewport,
}

// ZERO DEPENDENCY BARE-BONES JAVASCRIPT FILE-SYSTEM FOR 
//   POSIX WEB-ASSEMBLY

const VFS_NOW = 3
const ST_FILE = 8
const ST_DIR = 4

// 438 = 0o666
const FS_DEFAULT = (6 << 3) + (6 << 6) + (6) 
const FS_FILE = (ST_FILE << 12) + FS_DEFAULT
const FS_DIR = (ST_DIR << 12) + FS_DEFAULT

// (33206 & (((1 << 3) - 1) << 3) >> 3 = 6
const S_IRGRP = ((1 << 3) - 1) << 3
const S_IRUSR = ((1 << 3) - 1) << 6
const S_IROTH = ((1 << 3) - 1) << 0

const ENOENT = 9968
const R_OK = 1
const W_OK = 2
const X_OK = 3
const F_OK = 4


function Sys_Mkdir(filename) {
  let fileStr = addressToString(filename)
  let localName = fileStr
  if(localName.startsWith('/base')
    || localName.startsWith('/home'))
    localName = localName.substring('/base'.length)
  if(localName[0] == '/')
    localName = localName.substring(1)
	// check if parent directory has been created, TODO: POSIX errno?
	let parentDirectory = localName.substring(0, localName.lastIndexOf('/'))
	if(parentDirectory && !FS.virtual[parentDirectory]) {
		throw new Error('ENOENT')
	}
  FS.virtual[localName] = {
    timestamp: new Date(),
    mode: FS_DIR,
  }
  // async to filesystem
  // does it REALLY matter if it makes it? wont it just redownload?
  Sys_notify(FS.virtual[localName], localName)
}

function Sys_GetFileStats( filename, size, mtime, ctime ) {
  let fileStr = addressToString(filename)
  let localName = fileStr
  if(localName.startsWith('/base')
    || localName.startsWith('/home'))
    localName = localName.substring('/base'.length)
  if(localName[0] == '/')
    localName = localName.substring(1)
  if(typeof FS.virtual[localName] != 'undefined') {
    HEAPU32[size >> 2] = (FS.virtual[localName].contents || []).length
    HEAPU32[mtime >> 2] = FS.virtual[localName].timestamp.getTime()
    HEAPU32[ctime >> 2] = FS.virtual[localName].timestamp.getTime()
    return 1
  } else {
    HEAPU32[size >> 2] = 0
    HEAPU32[mtime >> 2] = 0
    HEAPU32[ctime >> 2] = 0
    return 0
  }
}

function Sys_FOpen(filename, mode) {
  // now we don't have to do the indexing crap here because it's built into the engine already
  let fileStr = addressToString(filename)
  let modeStr = addressToString(mode)
  let localName = fileStr
  if(localName.startsWith('/base')
    || localName.startsWith('/home'))
    localName = localName.substring('/base'.length)
  if(localName[0] == '/')
    localName = localName.substring(1)

  let createFP = function () {
    FS.filePointer++
    FS.pointers[FS.filePointer] = [
      0, // seek/tell
      modeStr,
      FS.virtual[localName],
      localName,
			FS.filePointer
    ]
    // DO THIS ON OPEN SO WE CAN CHANGE ICONS
    Sys_notify(FS.virtual[localName], localName)
    return FS.filePointer // not zero
  }

  // check if parent directory has been created, TODO: POSIX errno?
  let parentDirectory = localName.substring(0, localName.lastIndexOf('/'))
  // TODO: check mode?
  if(typeof FS.virtual[localName] != 'undefined'
    && (FS.virtual[localName].mode >> 12) == ST_FILE) {
    // open the file successfully
    return createFP()
  } else 
  // only write+ files after they have all been loaded, so we don't accidentally overwrite
  if (/* !FS.isSyncing && */ modeStr.includes('w')
    && (typeof FS.virtual[parentDirectory] != 'undefined'
    // allow writing to root path
    || parentDirectory.length == 0)
  ) {
    // create the file for write because the parent directory exists
    FS.virtual[localName] = {
      timestamp: new Date(),
      mode: FS_FILE,
      contents: new Uint8Array(0)
    }
    return createFP()
  } else {
    return 0 // POSIX
  }
}

function Sys_FTell(pointer) {
  if(typeof FS.pointers[pointer] == 'undefined') {
    throw new Error('File IO Error') // TODO: POSIX
  }
  return FS.pointers[pointer][0]
}

function Sys_FSeek(pointer, position, mode) {
  if(typeof FS.pointers[pointer] == 'undefined') {
    throw new Error('File IO Error') // TODO: POSIX
  }
  if(mode == 0 /* SEEK_SET */) {
    FS.pointers[pointer][0] = position
  } else if (mode == 1 /* SEEK_CUR */) {
    FS.pointers[pointer][0] += position
  } else if (mode == 2 /* SEEK_END */) {
    FS.pointers[pointer][0] = FS.pointers[pointer][2].contents.length + position
  } else {
    return -1 // POSIX?
  }
  return 0
}

function Sys_FClose(pointer) {
  if(typeof FS.pointers[pointer] == 'undefined') {
    throw new Error('File IO Error') // TODO: POSIX
  }
  Sys_notify(FS.pointers[pointer][2], FS.pointers[pointer][3], FS.pointers[pointer][4])
  FS.pointers[pointer] = void 0
}


function Sys_FFlush(pointer) {
  if(typeof FS.pointers[pointer] == 'undefined') {
    throw new Error('File IO Error') // TODO: POSIX
  }
  Sys_notify(FS.pointers[pointer][2], FS.pointers[pointer][3], FS.pointers[pointer][4])
}

function Sys_Remove(file) {
  let fileStr = addressToString(file)
  let localName = fileStr
  if(localName.startsWith('/base')
    || localName.startsWith('/home'))
    localName = localName.substring('/base'.length)
  if(localName[0] == '/')
    localName = localName.substring(1)
  if(typeof FS.virtual[localName] != 'undefined') {
    delete FS.virtual[localName]
    // remove from IDB
    Sys_notify(false, localName)
  }
}

function Sys_Rename(src, dest) {
  let strStr = addressToString(src)
  let srcName = strStr
  if(srcName.startsWith('/base')
    || srcName.startsWith('/home'))
    srcName = srcName.substring('/base'.length)
  if(srcName[0] == '/')
    srcName = srcName.substring(1)
  let fileStr = addressToString(dest)
  let destName = fileStr
  if(destName.startsWith('/base')
    || destName.startsWith('/home'))
    destName = destName.substring('/base'.length)
  if(destName[0] == '/')
    destName = destName.substring(1)
  if(typeof window.updateFilelist != 'undefined') {
    Sys_notify(FS.virtual[srcName], srcName)
    Sys_notify(FS.virtual[destName], destName)
  }
}


function Sys_ListFiles (directory, extension, filter, numfiles, wantsubs) {
  let files = {
    'default.cfg': {
      mtime: 0,
      size: 1024,
    }
  }
  // TODO: don't combine /home and /base?
  let localName = addressToString(directory)
  if(localName.startsWith('/base'))
    localName = localName.substring('/base'.length)
  if(localName[0] == '/')
    localName = localName.substring(1)
  let extensionStr = addressToString(extension)
  //let matches = []
  // can't use utility because FS_* frees and moves stuff around
  let matches = Object.keys(FS.virtual).filter(function (key) { 
    return (!extensionStr || key.endsWith(extensionStr) 
      || (extensionStr == '/' && (FS.virtual[key].mode >> 12) == ST_DIR))
      // TODO: match directory 
      && (!localName || key.startsWith(localName))
      && (!wantsubs || (FS.virtual[key].mode >> 12) == ST_DIR)
  })
  // return a copy!
	let listInMemory
	if(typeof Z_Malloc != 'undefined') {
		listInMemory = Z_Malloc( ( matches.length + 1 ) * 4 )
	} else {
		listInMemory = malloc( ( matches.length + 1 ) * 4 )
	}
  for(let i = 0; i < matches.length; i++) {
    let relativeName = matches[i]
    if(localName && relativeName.startsWith(localName)) {
      relativeName = relativeName.substring(localName.length)
    }
    if(relativeName[0] == '/')
      relativeName = relativeName.substring(1)
    //matches.push(files[i])
    HEAPU32[(listInMemory + i*4)>>2] = FS_CopyString(stringToAddress(relativeName));
  }
  HEAPU32[(listInMemory>>2)+matches.length] = 0
  HEAPU32[numfiles >> 2] = matches.length
  // skip address-list because for-loop counts \0 with numfiles
  return listInMemory
}


function Sys_stat(filename) {
	let fileStr = addressToString(filename)
	let localName = fileStr
	if(localName.startsWith('/base')
		|| localName.startsWith('/home'))
		localName = localName.substring('/base'.length)
	if(localName[0] == '/')
		localName = localName.substring(1)
	//if(typeof FS.virtual[localName] != 'undefined') {
	//  localName = localName
	//}
	if(typeof FS.virtual[localName] != 'undefined') {
		HEAPU32[(stat >> 2)+0] = FS.virtual[localName].mode
		HEAPU32[(stat >> 2)+1] = (FS.virtual[localName].contents || []).length
		HEAPU32[(stat >> 2)+2] = FS.virtual[localName].timestamp.getTime()
		HEAPU32[(stat >> 2)+3] = FS.virtual[localName].timestamp.getTime()
		HEAPU32[(stat >> 2)+4] = FS.virtual[localName].timestamp.getTime()
		return 0
	} else {
		HEAPU32[(stat >> 2)+0] = 0
		HEAPU32[(stat >> 2)+1] = 0
		HEAPU32[(stat >> 2)+2] = 0
		HEAPU32[(stat >> 2)+3] = 0
		HEAPU32[(stat >> 2)+4] = 0
		return 1
	}
}


function Sys_Mkdirp(pathname) {
	let localName = addressToString(pathname)
	try {
		if(localName.startsWith('/base')
			|| localName.startsWith('/home'))
			localName = localName.substring('/base'.length)
		if(localName[0] == '/')
			localName = localName.substring(1)
		Sys_Mkdir(pathname, FS_DIR);
	} catch (e) {
		// make the subdirectory and then retry
		if (e.message === 'ENOENT') {
			let parentDirectory = localName.substring(0, localName.lastIndexOf('/'))
			if(!parentDirectory) {
				throw e
			}
			Sys_Mkdirp(stringToAddress(parentDirectory));
			Sys_Mkdir(pathname);
			return;
		}

		// if we got any other error, let's see if the directory already exists
		if(Sys_stat(pathname)) {
			throw e
		}
	}
}

function Sys_FRead(bufferAddress, byteSize, count, pointer) {
  if(typeof FS.pointers[pointer] == 'undefined') {
    throw new Error('File IO Error') // TODO: POSIX
  }
  let i = 0
  for(; i < count * byteSize; i++ ) {
    if(FS.pointers[pointer][0] >= FS.pointers[pointer][2].contents.length) {
      break
    }
    HEAPU8[bufferAddress + i] = FS.pointers[pointer][2].contents[FS.pointers[pointer][0]]
    FS.pointers[pointer][0]++
  }

  return (i - (i % byteSize)) / byteSize
}


function Sys_fgetc(fp) {
	let c = stringToAddress('DEADBEEF')
	HEAPU32[c>>2] = 0
	if(Sys_FRead(c, 1, 1, fp) != 1) {
		return -1
	}
	return HEAPU32[c>>2]
}


function Sys_fgets(buf, size, fp) {
  if(typeof FS.pointers[fp] == 'undefined') {
    throw new Error('File IO Error') // TODO: POSIX
  }
	let dataView = FS.pointers[fp][2].contents
			.slice(FS.pointers[fp][0], FS.pointers[fp][0] + size)
	let line = dataView.indexOf('\n'.charCodeAt(0))
	let length
	if(line <= 1) {  // <- TODO: WTF IS THIS?
		//length = Sys_FRead(buf, 1, size - 1, fp)
		length = Sys_FRead(buf, 1, size, fp)
		//HEAPU8[buf + length] = 0 // FILL THE BUFFER COMPLETELY?
		return length ? buf : 0
	} else {
		length = Sys_FRead(buf, 1, line + 1, fp) // DO I INCLUDE THE \n IN THE BUFFER?
		HEAPU8[buf + length] = 0
		return length ? buf : 0
	}
}

function Sys_FWrite(buf, size, nmemb, pointer) {
	// something wrong with breaking inside `node -e`
	//   maybe someone at Google saw my stream because they made it even worse.
	//   now it shows Nodejs system code all the time instead of only when I 
	//   click on it like resharper. LOL!
  if(typeof FS.pointers[pointer] == 'undefined') {
    throw new Error('File IO Error') // TODO: POSIX
  }
  let tmp = FS.pointers[pointer][2].contents
  if(FS.pointers[pointer][0] + size * nmemb > FS.pointers[pointer][2].contents.length) {
    tmp = new Uint8Array(FS.pointers[pointer][2].contents.length + size * nmemb);
    tmp.set(FS.pointers[pointer][2].contents, 0);
  }
  tmp.set(HEAPU8.slice(buf, buf + size * nmemb), FS.pointers[pointer][0]);
  FS.pointers[pointer][0] += size * nmemb
	// WE DON'T NEED FILE LOCKING BECAUSE IT'S SINGLE THREADED IN NATURE
	//   IT WOULD BE IMPOSSIBLE FOR ANOTHER PROCESS TO COME ALONG AND
	//   OVERWRITE OUR TMP CONTENTS MID FUNCTION.
  FS.pointers[pointer][2].contents = tmp
  Sys_notify(FS.pointers[pointer][2], FS.pointers[pointer][3], FS.pointers[pointer][4])
  return nmemb // k==size*nmemb ? nmemb : k/size;
}


// WHY ADD THIS INSTEAD OF FWRITE DIRECTLY? 
//   TO MAKE IT EASIER TO DROP INFRONT OF WASI BS.
function Sys_fputs(s, f) {
	let l = addressToString(s).length;
	return Sys_FWrite(s, 1, l, f) == l ? 0 : -1;
}

function Sys_fputc(c, f) {
	let s = stringToAddress(String.fromCharCode(c))
	return Sys_FWrite(s, 1, 1, f) == 1 ? 0 : -1;
}

function Sys_fprintf(fp, fmt, args) {
	let formatted = stringToAddress('DEADBEEF')
	let length = sprintf(formatted, fmt, args)
	if(length < 1 || !HEAPU32[formatted>>2]) {
		formatted = fmt
	}
	Sys_fputs(formatted, fp)
}

function Sys_access(filename, i) {
	if(i != F_OK) {
		throw new Error('Not implemented!')
	}
	let fileStr = addressToString(filename)
	let localName = fileStr
	if(localName.startsWith('/base')
		|| localName.startsWith('/home'))
		localName = localName.substring('/base'.length)
	if(localName[0] == '/')
		localName = localName.substring(1)

	if(FS.virtual[localName]) {
		return 0
	} else {
		if(errno) {
			HEAPU32[errno>>2] = ENOENT
		}
		return 1
	}
}


function Sys_feof(fp) {
  if(typeof FS.pointers[fp] == 'undefined') {
    return 1
  }
	if(FS.pointers[fp][0] >= FS.pointers[fp][2].contents.length) {
		return 1
	}
	return 0
}

const FS = {
	ST_FILE: ST_FILE,
	ST_DIR: ST_DIR,
  FS_FILE: FS_FILE,
  FS_DIR: FS_DIR,
  ENOENT: ENOENT,
  modeToStr: ['r', 'w', 'rw'],
  pointers: {},
  filePointer: 0,
  virtual: {}, // temporarily store items as they go in and out of memory
  Sys_ListFiles: Sys_ListFiles,
  Sys_FTell: Sys_FTell,
  Sys_FSeek: Sys_FSeek,
  Sys_FClose: Sys_FClose,
  Sys_FWrite: Sys_FWrite,
  Sys_FFlush: Sys_FFlush,
  Sys_FRead: Sys_FRead,
  Sys_FOpen: Sys_FOpen,
  Sys_Remove: Sys_Remove,
  Sys_Rename: Sys_Rename,
  Sys_GetFileStats: Sys_GetFileStats,
  Sys_Mkdir: Sys_Mkdir,
  Sys_Mkdirp: Sys_Mkdirp,
	Sys_FOpen: Sys_FOpen,
	Sys_Mkdir: Sys_Mkdir,
	Sys_fgets: Sys_fgets,
	Sys_fputs: Sys_fputs,
	Sys_vfprintf: Sys_fprintf,
	Sys_fprintf: Sys_fprintf,
	Sys_fputc: Sys_fputc,
	Sys_putc: Sys_fputc,
	Sys_getc: Sys_fgetc,
	Sys_fgetc: Sys_fgetc,
	Sys_feof: Sys_feof,
	Sys_access: Sys_access,
}

var WASI_ESUCCESS = 0;
var WASI_EBADF = 8;
var WASI_EINVAL = 28;
var WASI_ENOSYS = 52;

var WASI_STDOUT_FILENO = 1;
var WASI_STDERR_FILENO = 2;

function getModuleMemoryDataView() {
	// call this any time you'll be reading or writing to a module's memory 
	// the returned DataView tends to be dissaociated with the module's memory buffer at the will of the WebAssembly engine 
	// cache the returned DataView at your own peril!!

	return new DataView(Module.memory.buffer);
}

function fd_prestat_get(fd, bufPtr) {
	return WASI_EBADF;
}

function fd_prestat_dir_name(fd, pathPtr, pathLen) {
	debugger
	return WASI_EINVAL;
}

function environ_sizes_get(environCount, environBufSize) {
	var view = getModuleMemoryDataView();

	view.setUint32(environCount, 0, !0);
	view.setUint32(environBufSize, 0, !0);

	return WASI_ESUCCESS;
}

function environ_get(environ, environBuf) {
	debugger
	return WASI_ESUCCESS;
}

function args_sizes_get(argc, argvBufSize) {
	debugger
	var view = getModuleMemoryDataView();

	view.setUint32(argc, 0, !0);
	view.setUint32(argvBufSize, 0, !0);

	return WASI_ESUCCESS;
}

function args_get(argv, argvBuf) {
	debugger
	return WASI_ESUCCESS;
}

function fd_fdstat_get(fd, bufPtr) {
	var view = getModuleMemoryDataView();

	view.setUint8(bufPtr, fd);
	view.setUint16(bufPtr + 2, 0, !0);
	view.setUint16(bufPtr + 4, 0, !0);

	function setBigUint64(byteOffset, value, littleEndian) {

			var lowWord = value;
			var highWord = 0;

			view.setUint32(littleEndian ? 0 : 4, lowWord, littleEndian);
			view.setUint32(littleEndian ? 4 : 0, highWord, littleEndian);
	}

	setBigUint64(bufPtr + 8, 0, !0);
	setBigUint64(bufPtr + 8 + 8, 0, !0);

	return WASI_ESUCCESS;
}



// TODO: THIS MIGHT BE A MORE COMPREHENSIVE WRITE FUNCTION
//   AND THE FS.VIRTUAL CODE COULD BE INSERTED AT THE BOTTOM
function fd_write(fd, iovs, iovsLen, nwritten) {
	var view = getModuleMemoryDataView();
	var written = 0;
	var bufferBytes = [];                   

	function getiovs(iovs, iovsLen) {
		// iovs* -> [iov, iov, ...]
		// __wasi_ciovec_t {
		//   void* buf,
		//   size_t buf_len,
		// }
		var buffers = Array.from({ length: iovsLen }, function (_, i) {
			var ptr = iovs + i * 8;
			var buf = view.getUint32(ptr, !0);
			var bufLen = view.getUint32(ptr + 4, !0);

			return new Uint8Array(Module.memory.buffer, buf, bufLen);
		});

		return buffers;
	}

	var buffers = getiovs(iovs, iovsLen);
	function writev(iov) {
		for (var b = 0; b < iov.byteLength; b++) {
			bufferBytes.push(iov[b]);
		}

		written += b;
	}

	buffers.forEach(writev);
	let newMessage = stringToAddress(String.fromCharCode.apply(null, bufferBytes))
	debugger
	if (fd === WASI_STDOUT_FILENO)
		Sys_FWrite(newMessage, 1, bufferBytes.length, HEAPU32[stdout>>2])
	else if (fd === WASI_STDERR_FILENO) 
		Sys_FWrite(newMessage, 1, bufferBytes.length, HEAPU32[stderr>>2])
	else {
		debugger
		throw new Error('wtf')
	}
	view.setUint32(nwritten, written, !0);

	return WASI_ESUCCESS;
}

function poll_oneoff(sin, sout, nsubscriptions, nevents) {
	debugger
	return WASI_ENOSYS;
}

function proc_exit(rval) {
	debugger
	return WASI_ENOSYS;
}

function fd_seek(fd, offset, whence, newOffsetPtr) {
	debugger
}

function fd_close(fd) {
	return WASI_ENOSYS;
}



const FILED = {

	//setModuleInstance : setModuleInstance,
	environ_sizes_get : environ_sizes_get,
	args_sizes_get : args_sizes_get,
	fd_fdstat_set_flags: function () { debugger },
	fd_prestat_get : fd_prestat_get,
	fd_fdstat_get : fd_fdstat_get,
	fd_write : fd_write,
	fd_prestat_dir_name : fd_prestat_dir_name,
	environ_get : environ_get,
	args_get : args_get,
	poll_oneoff : poll_oneoff,
	proc_exit : proc_exit,
	fd_close : fd_close,
	fd_seek : fd_seek,
	fd_advise: function () { debugger },
	fd_allocate: function () { debugger },
	fd_datasync: function () { debugger },
	fd_read: function () { debugger },
	path_open: function () { debugger },
	fd_fdstat_set_rights: function () { debugger },
	fd_filestat_get: function () { debugger },
	fd_filestat_set_size: function () { debugger },
	fd_filestat_set_times: function () { debugger },
	fd_pread: function () { debugger },
	fd_pwrite: function () { debugger },
	fd_readdir: function () { debugger },
	fd_renumber: function () { debugger },
	fd_sync: function () { debugger },
	fd_tell: function () { debugger },
	path_create_directory: function () { debugger },
	path_filestat_get: function () { debugger },
	path_filestat_set_times: function () { debugger },
	path_link: function () { debugger },
	path_readlink: function () { debugger },
	path_remove_directory: function () { debugger },
	path_rename: function () { debugger },
	path_symlink: function () { debugger },
	path_unlink_file: function () { debugger },
	proc_raise: function () { debugger },
	sched_yield: function () { debugger },
	random_get: function () { debugger },
	sock_recv: function () { debugger },
	sock_send: function () { debugger },
	sock_shutdown: function () { debugger },
}

Object.assign(FS, FILED)

if (typeof module != 'undefined') {
  // SOMETHING SOMETHING fs.writeFile
  module.exports = FS
}
const DB_STORE_NAME = 'FILE_DATA';

function openDatabase(noWait) {
  if(FS.database) {
    return Promise.resolve(FS.database)
  }
  if(!FS.database && (!FS.open || Date.now() - FS.openTime > 3000)) {
    FS.openTime = Date.now()
    // TODO: make a separate /home store for content to upload submissions to NPM-style packaging system
    // TODO: synchronize saved game states and config files out of /home database
    // TODO: on Native /base is manually configured, manually downloaded, /home is auto-downloaded
    //   on web /base is auto-downloaded and home is manually configured/drag-drop, fix this
    return new Promise(function (resolve) {
      FS.open = indexedDB.open('/base', 22)
      FS.open.onsuccess = function (evt) {
        FS.database = evt.target.result
        resolve(FS.database)
        //if(!Array.from(FS.database.objectStoreNames).includes(DB_STORE_NAME)) {
        //  FS.database.createObjectStore(DB_STORE_NAME)
        //}
      }
      FS.open.onupgradeneeded = function () {
        let fileStore = FS.open.result.createObjectStore(DB_STORE_NAME)
        if (!fileStore.indexNames.contains('timestamp')) {
          fileStore.createIndex('timestamp', 'timestamp', { unique: false });
        }
      }
      FS.open.onerror = function (error) {
        console.error(error)
        resolve(error)
      }
    })
  } else if (!noWait) {
    return new Promise(function (resolve) { 
      let count = 0
      let interval
      interval = setInterval(function () {
        if(FS.database || count == 10) {
          clearInterval(interval)
          openDatabase(true).then(resolve)
        } else {
          count++
        }
      }, 300)
    })
  } else {
    throw new Error('no database')
  }
}


function loadEntry(cursor) {
  if(!cursor) {
    return resolve()
  }
  if(cursor.key.endsWith('default.cfg')) {
    FS.hadDefault = cursor.key
  }
  // already exists on filesystem, 
  //   it must have come with page
  if(FS.virtual[cursor.key]
    && FS.virtual[cursor.key].timestamp 
      > cursor.value.timestamp) {
    // embedded file is newer, start with that
    return cursor.continue()
  }
  FS.virtual[cursor.key] = {
    timestamp: cursor.value.timestamp,
    mode: cursor.value.mode,
    contents: cursor.value.contents
  }
  return cursor.continue()
}



function readAll() {
  let startTime = Date.now()
  FS.isSyncing = 1
  // FIX FOR "QKEY could not open" ERROR
  FS.virtual['home'] = {
    timestamp: new Date(),
    mode: FS_DIR,
  }
  if(typeof window.fs_loading != 'undefined') {
    HEAPU32[fs_loading >> 2] = FS.isSyncing
  }
  console.log('sync started at ', new Date())
  readPreFS()
  return openDatabase().then(function(db) {

    let transaction = db.transaction([DB_STORE_NAME], 'readonly')
    let objStore = transaction.objectStore(DB_STORE_NAME)
    let tranCursor = objStore.openCursor()
    return new Promise(function (resolve) {
      tranCursor.onsuccess = function (event) {
        let cursor = event.target.result
        if(!cursor) {
          return resolve()
        }
        loadEntry(cursor)
      }
      tranCursor.onerror = function (error) {
        console.error(error)
        resolve(error)
      }
    }).then(function () { 
      transaction.commit()
      let tookTime = Date.now() - startTime
      console.log('sync completed', new Date())
      console.log('sync took', 
        (tookTime > 60 * 1000 ? (Math.floor(tookTime / 1000 / 60) + ' minutes, ') : '')
        + Math.floor(tookTime / 1000) % 60 + ' seconds, '
        + (tookTime % 1000) + ' milliseconds')
      FS.isSyncing = 0
      if(typeof window.fs_loading != 'undefined') {
        HEAPU32[fs_loading >> 2] = 0
        if(FS.hadDefault) {
          HEAPU32[com_fullyInitialized >> 2] = 1
          setTimeout(function () {
            Sys_FileReady(stringToAddress('default.cfg'), stringToAddress(FS.hadDefault))
          }, 100)
        }
      }
      if(typeof window.updateFilelist != 'undefined') {
        updateFilelist()
      }
    })
  })
  .catch(function (e) {
    console.log(e)
    debugger
  })

}



function readStore(key) {
  return openDatabase()
  .then(function (db) {
    let transaction = db.transaction([DB_STORE_NAME], 'readwrite');
    let objStore = transaction.objectStore(DB_STORE_NAME);
    return new Promise(function (resolve) {
      let tranCursor = objStore.get(key)
      tranCursor.onsuccess = function (event) {
        resolve(event.target.result)
      }
      tranCursor.onerror = function (error) {
        console.error(error)
        resolve(error)
      }
      transaction.commit()
    })
  })
  .catch(function (e) {})
}

function writeStore(value, key) {
  return openDatabase()
  .then(function (db) {
    let transaction = db.transaction([DB_STORE_NAME], 'readwrite');
    let objStore = transaction.objectStore(DB_STORE_NAME);
    return new Promise(function (resolve) {
      let storeValue  
      if(value === false) {
        storeValue = objStore.delete(key)
      } else {
        storeValue = objStore.put(value, key)
      }
      storeValue.onsuccess = function () {}
      transaction.oncomplete = function (event) {
        resolve(event.target.result)
        //FS.database.close()
        //FS.database = null
        //FS.open = null
      }
      storeValue.onerror = function (error) {
        console.error(error, value, key)
      }
      transaction.commit()
    })
  })
  .catch(function (e) {})
}

function _base64ToArrayBuffer(base64) {
	var binary_string = window.atob(base64);
	var len = binary_string.length;
	var bytes = new Uint8Array(len);
	for (var i = 0; i < len; i++) {
			bytes[i] = binary_string.charCodeAt(i);
	}
	return bytes;
}

// I JUST REALIZED WHY CHROME DEBUGGER WILL PERPUTUALLY HAVE A HARDER
//   AND HARD TIME WITH WEB APPS LIKE THIS. I SCREWED UP IT'S ABILITY TO OPTIMIZE GRAPH.

function readPreFS() {
	// TODO: offline download so it saves binary to IndexedDB
	if(typeof window.preFS == 'undefined') {
		throw new Error('No preFS, must load in correct order!')
	}
	let preloadedPaths = Object.keys(window.preFS)
	for(let i = 0; i < preloadedPaths.length; i++) {
		if(preloadedPaths[i].endsWith('_timestamp')) {
			continue
		}
		let newFiletime = window.preFS[
				preloadedPaths[i] + '_timestamp'] 
						|| new Date()
		FS.virtual[preloadedPaths[i]] = {
			timestamp: newFiletime,
			mode: FS_FILE,
			contents: _base64ToArrayBuffer(window.preFS[preloadedPaths[i]])
		}
	}

}


if(typeof module != 'undefined') {
  module.exports = {
    readPreFS,
    _base64ToArrayBuffer,
    
  }
}
function GLimp_StartDriverAndSetMode(mode, modeFS, fullscreen, fallback) {
  // TODO: multiple windows like a DVR?
  //   what kind of game needs two screens for one player to switch back and forth?
  GL.canvas.setAttribute('width', GL.canvas.clientWidth)
  GL.canvas.setAttribute('height', GL.canvas.clientHeight)
  if(window.flipper) {
    window.flipper.remove()
  }

  // TODO: keep track of multiple?
  let webGLContextAttributes = {
    failIfMajorPerformanceCaveat: true,
    alpha: false,
    stencil: true,
    premultipliedAlpha: false,
  }

  GL.context = (!fallback)
    ? GL.canvas.getContext('webgl2', webGLContextAttributes)
    : (GL.canvas.getContext('webgl', webGLContextAttributes)
      || GL.canvas.getContext('experimental-webgl'))

  GL.context.viewport(0, 0, GL.canvas.width, GL.canvas.height);
  if (!GL.context) return 2
  if(typeof GL != 'undefined') {
    INPUT.handle = GL.registerContext(GL.context, webGLContextAttributes)
    GL.makeContextCurrent(INPUT.handle)
  }

  // set the window to do the grabbing, when ungrabbing this doesn't really matter
  if(!HEAPU32[first_click>>2]) {
    //GL.canvas.requestPointerLock();
  } else {
    SDL_ShowCursor()
  }

  return 0 // no error
}

function updateVideoCmd () {
  GL.canvas.setAttribute('width', GL.canvas.clientWidth)
  GL.canvas.setAttribute('height', GL.canvas.clientHeight)
  // THIS IS THE NEW VID_RESTART FAST HACK
  HEAP32[INPUT.updateWidth>>2] = GL.canvas.width
  HEAP32[INPUT.updateHeight>>2] = GL.canvas.height
  Cvar_Set(stringToAddress('r_customWidth'), stringToAddress('' + GL.canvas.clientWidth))
  Cvar_Set(stringToAddress('r_customHeight'), stringToAddress('' + GL.canvas.clientHeight))
  // TODO: make this an SDL/Sys_Queue event to `vid_restart fast` on native
  Cbuf_AddText(stringToAddress('vid_restart fast\n'));
}

function resizeViewport () {
  // ignore if the canvas hasn't yet initialized
  if(!GL.canvas) return
  GL.canvas.removeAttribute('width')
  GL.canvas.removeAttribute('height')
  if (INPUT.resizeDelay) clearTimeout(INPUT.resizeDelay)
  INPUT.resizeDelay = setTimeout(updateVideoCmd, 100);
}


//typedef enum {
  // bk001129 - make sure SE_NONE is zero
const	SE_NONE = 0	// evTime is still valid
const	SE_KEY = 1		// evValue is a key code, evValue2 is the down flag
const	SE_FINGER_DOWN = 2
const	SE_FINGER_UP = 3
const	SE_CHAR = 4	// evValue is an ascii char
const	SE_MOUSE = 5	// evValue and evValue2 are relative signed x / y moves
const	SE_JOYSTICK_AXIS = 6	// evValue is an axis number and evValue2 is the current state (-127 to 127)
const	SE_CONSOLE = 7	// evPtr is a char*
const	SE_MOUSE_ABS = 8
//#ifdef USE_DRAGDROP
const	SE_DROPBEGIN = 9
const	SE_DROPCOMPLETE = 10
const	SE_DROPFILE = 11
const	SE_DROPTEXT = 12
const	SE_MAX = 13

//#endif
//} sysEventType_t;


const KEYCATCH_CONSOLE = 0x0001
const KEYCATCH_UI      =  0x0002
const KEYCATCH_MESSAGE =  0x0004
const KEYCATCH_CGAME   =  0x0008

function InputPushFocusEvent (evt) {
  if(evt.type == 'pointerlockchange') {
    HEAP32[gw_active >> 2] = (document.pointerLockElement === GL.canvas)
    if(!HEAP32[gw_active >> 2] && !(Key_GetCatcher() & KEYCATCH_CONSOLE)) {
      Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['ESCAPE'], true, 0, null );
      Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['ESCAPE'], false, 0, null );
    }
    return
  }
  if (document.visibilityState != 'visible' || evt.type == 'blur') {
    Key_ClearStates();
    HEAP32[gw_active >> 2] = false;
  } else {
    Key_ClearStates();
    HEAP32[gw_active >> 2] = true;
    HEAP32[gw_minimized >> 2] = false;
  }
}


function InputPushMovedEvent (evt) {
  if (evt.toElement === null && evt.relatedTarget === null) {
    HEAPU32[first_click>>2] = 1
    if(SYS.frameInterval) {
      clearInterval(SYS.frameInterval)
    }
    SYS.frameInterval = setInterval(Sys_Frame, 1000.0 / INPUT.fpsUnfocused)
    return
  }

  let notFullscreen = !document.isFullScreen
    && !document.webkitIsFullScreen
    && !document.mozIsFullScreen

  if(HEAP32[gw_active >> 2] && notFullscreen) {
    Cvar_SetIntegerValue( stringToAddress('vid_xpos'), 
      window.screenX || window.screenLeft );
    Cvar_SetIntegerValue( stringToAddress('vid_ypos'), 
      window.screenY || window.screenTop );
  }
}

/*
document.querySelector('element').bind('copy', function(event) {
  var selectedText = window.getSelection().toString(); 
  selectedText = selectedText.replace(/\u200B/g, '');

  clipboardData = event.clipboardData || window.clipboardData || event.originalEvent.clipboardData;
  clipboardData.setData('text/html', selectedText);

  event.preventDefault();
});
*/

function captureClipBoard () {
  // this is the same method I used on StudySauce
  var text = document.createElement('TEXTAREA')
  text.style.opacity = 0
  text.style.height = '1px'
  text.style.width = '1px'
  text.style.display = 'block'
  text.style.zIndex = 1000
  text.style.position = 'absolute'
  document.body.appendChild(text)
  text.focus()
  setTimeout(function () {
    INPUT.paste = text.value
    document.body.focus()
    if(INPUT.field) {
      INPUT.paste.split('').forEach(function (k) {
        Field_CharEvent(INPUT.field, k.charCodeAt(0))
      })
      INPUT.paste = ''
      INPUT.field = 0
      text.remove()
    }
  }, 100)
}

function checkPasteEvent (evt) {
  // mac support
  if(evt.key == 'Meta') INPUT.superKey = evt.type == 'keydown'
  if(INPUT.superKey && (evt.key == 'v' || evt.key == 'V')) {
    if(INPUT.superKey && (evt.type == 'keypress' || evt.type == 'keydown')) {
      captureClipBoard()
    }
  }
}

function InputPushKeyEvent(evt) {
  if (INPUT.editorActive) {
    return true
  }


  if(evt.keyCode === 8) {
    INPUT.cancelBackspace = true;
    setTimeout(function () { INPUT.cancelBackspace = false }, 100)
  }
  if(evt.keyCode === 27) {
    INPUT.cancelBackspace = true;
    SDL_ShowCursor()
    HEAP32[gw_active >> 2] = false
  }

  checkPasteEvent(evt)
  
  if(evt.type == 'keydown') {
    if ( evt.repeat && Key_GetCatcher() == 0 )
      return

    if ( evt.keyCode == 13 /* ENTER */ && evt.altKey ) {
      let notFullscreen = !document.isFullScreen
      && !document.webkitIsFullScreen
      && !document.mozIsFullScreen
      Cvar_SetIntegerValue( stringToAddress('r_fullscreen'), notFullscreen ? 1 : 0 );
      Cbuf_AddText( stringToAddress('vid_restart\n') );
      return
    }

    if ( evt.keyCode == 8 /* BAKCSPACE */ )
      Sys_QueEvent( Sys_Milliseconds(), SE_CHAR, 8, 0, 0, null );
  }

  if( evt.ctrlKey && evt.keyCode >= 'a'.charCodeAt(0) && evt.keyCode <= 'z'.charCodeAt(0) ) {
    Sys_QueEvent( Sys_Milliseconds(), SE_CHAR, evt.charCode-('a'.charCodeAt(0))+1, 0, 0, null );
  } else

  if(evt.keyCode >= 65 && evt.keyCode <= 90) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['a'] + (evt.keyCode - 65), evt.type == 'keydown', 0, null );
  } else 

  if(evt.shiftKey && evt.keyCode >= 65 && evt.keyCode <= 90) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['a'] + (evt.keyCode - 65 + 97), evt.type == 'keydown', 0, null );
  } else 

  if(evt.keyCode >= 48 && evt.keyCode <= 57) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['0'] + (evt.keyCode - 48), evt.type == 'keydown', 0, null );
  } else 

  if(evt.shiftKey && evt.keyCode >= 48 && evt.keyCode <= 57) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings[' '] + (evt.keyCode - 48), evt.type == 'keydown', 0, null );
  } else 

  if(evt.keyCode == 37) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['LEFTARROW'], evt.type == 'keydown', 0, null );
  } else 

  if(evt.keyCode == 38) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['UPARROW'], evt.type == 'keydown', 0, null );
  } else 

  if(evt.keyCode == 39) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['RIGHTARROW'], evt.type == 'keydown', 0, null );
  } else 

  if(evt.keyCode == 40) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['DOWNARROW'], evt.type == 'keydown', 0, null );
  } else 

  if(evt.keyCode == 16) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['SHIFT'], evt.type == 'keydown', 0, null );
  }

  if(evt.keyCode == 32) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['SPACE'], evt.type == 'keydown', 0, null );
  }

  if(evt.keyCode == 13) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['ENTER'], evt.type == 'keydown', 0, null );
  } else 

  if(evt.keyCode == 27) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['ESCAPE'], evt.type == 'keydown', 0, null );
  }
}

function InputPushTextEvent (evt) {
  if (INPUT.editorActive) {
    return true
  }
  if ( INPUT.consoleKeys.includes(String.fromCharCode(evt.charCode)) )
  {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, INPUT.keystrings['CONSOLE'], true, 0, null )
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, INPUT.keystrings['CONSOLE'], false, 0, null )
    setTimeout(function () {
      if(Key_GetCatcher() & KEYCATCH_CONSOLE) {
        SDL_ShowCursor()
        HEAP32[gw_active >> 2] = false
      }
    }, 100)
  } else {
    Sys_QueEvent( Sys_Milliseconds(), SE_CHAR, evt.charCode, 0, 0, null )
  }

}

function getMovementX(event) {
  return event['movementX'] ||
         event['mozMovementX'] ||
         event['webkitMovementX'] ||
         0;
}

function getMovementY(event) {
  return event['movementY'] ||
         event['mozMovementY'] ||
         event['webkitMovementY'] ||
         0;
}

function InputPushWheelEvent(evt) {
  if (INPUT.editorActive) {
    return true
  }
	if( evt.deltaY > 0 ) {
		Sys_QueEvent( Sys_Milliseconds(), SE_KEY, INPUT.keystrings['MWHEELUP'], true, 0, null );
		Sys_QueEvent( Sys_Milliseconds(), SE_KEY, INPUT.keystrings['MWHEELUP'], false, 0, null );
	} else if( evt.deltaY < 0 ) {
		Sys_QueEvent( Sys_Milliseconds(), SE_KEY, INPUT.keystrings['MWHEELDOWN'], true, 0, null );
		Sys_QueEvent( Sys_Milliseconds(), SE_KEY, INPUT.keystrings['MWHEELDOWN'], false, 0, null );
	}
}


function InputPushMouseEvent (evt) {
  let down = evt.type == 'mousedown'

  if(!(Key_GetCatcher() & KEYCATCH_CONSOLE)
    || HEAPU32[first_click>>2]) {
    if (evt.type == 'mousemove') {
      if(Key_GetCatcher() === 0) {
        Sys_QueEvent( Sys_Milliseconds(), SE_MOUSE, 
          getMovementX(evt), getMovementY(evt), 0, null );
      } else {
        Sys_QueEvent( Sys_Milliseconds(), SE_MOUSE_ABS, 
          evt.clientX, evt.clientY, 0, null );
      }
    } else {
      INPUT.editorActive = false
      Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
        INPUT.keystrings['MOUSE1'] + evt.button, down, 0, null );
    }
  }

  // always unlock on menus because it's position absolute now
  if ( Key_GetCatcher() !== 0 ) {
    if(document.pointerLockElement) {
      SDL_ShowCursor()
      // ruins sound //HEAP32[gw_active >> 2] = false
    }
    return;
  }

  // TODO: fix this maybe?
  //if(!mouseActive || in_joystick->integer) {
  //  return;
  //}
  // Basically, whenever the requestPointerLock() is finally triggered when cgame starts,
  //   the unfocusedFPS is cancelled and changed to real FPS, 200+!
  if(down && document.pointerLockElement != GL.canvas) {
    // TODO: start sound, capture mouse
    HEAP32[gw_active >> 2] = 1
    GL.canvas.requestPointerLock();

    if(SYS.frameInterval) {
      clearInterval(SYS.frameInterval)
    }
    SYS.frameInterval = setInterval(Sys_Frame, 1000.0 / INPUT.fps);
  }
}

function Com_MaxFPSChanged() {
  INPUT.fpsUnfocused = Cvar_VariableIntegerValue(stringToAddress('com_maxfpsUnfocused'));
  INPUT.fps = Cvar_VariableIntegerValue(stringToAddress('com_maxfps'));
  if(SYS.frameInterval) {
    clearInterval(SYS.frameInterval)
  }
  SYS.frameInterval = setInterval(Sys_Frame, 1000.0 / (HEAP32[gw_active >> 2] 
    ? INPUT.fps : INPUT.fpsUnfocused))
}

function Sys_ConsoleInput() {
  let command = window.location.hash
  window.location.hash = ''
  return command.length ? stringToAddress(command) : null
}


const CVAR_ARCHIVE = 0x0001
const CVAR_NODEFAULT = 0x4000
const CVAR_LATCH =  0x0020
const CVAR_ARCHIVE_ND = (CVAR_ARCHIVE|CVAR_NODEFAULT)
const CV_INTEGER = 2


function IN_Init() {

	console.log( '\n------- Input Initialization -------\n' );

  InitNippleJoysticks()

	let in_keyboardDebug = Cvar_Get( stringToAddress('in_keyboardDebug'), stringToAddress('0'), CVAR_ARCHIVE );
	let in_mouse = Cvar_Get( stringToAddress('in_mouse'), stringToAddress('1'), CVAR_ARCHIVE );
	Cvar_CheckRange( in_mouse, stringToAddress('-1'), stringToAddress('1'), CV_INTEGER );

	// ~ and `, as keys and characters
	Cvar_Get( stringToAddress('cl_consoleKeys'), stringToAddress('~ ` \u007e \u0060'), CVAR_ARCHIVE );
  if(!INPUT.consoleKeys) {
    INPUT.consoleKeys = addressToString(Cvar_VariableString(stringToAddress('cl_consoleKeys')))
      .split(' ').map(function (c) {
        return c[0] == '0' && c[1] == 'x' 
          ? String.fromCharCode(parseInt(c.substr(2), 16)) 
          : c
      })
  }

	// TODO: activate text input for text fields
	//SDL_StartTextInput();

  //let in_nograb = Cvar_Get( 'in_nograb', '0', CVAR_ARCHIVE );
  //let r_allowSoftwareGL = Cvar_Get( 'r_allowSoftwareGL', '0', CVAR_LATCH );
  //let r_swapInterval = Cvar_Get( 'r_swapInterval', '0', CVAR_ARCHIVE | CVAR_LATCH );
  //let r_stereoEnabled = Cvar_Get( 'r_stereoEnabled', '0', CVAR_ARCHIVE | CVAR_LATCH );

  for(let i = 0; i < 1024; i++) {
    let name = addressToString(Key_KeynumToString(i))
    if(name.length == 0) continue
    INPUT.keystrings[name] = i
  }
  window.addEventListener('keydown', InputPushKeyEvent, false)
  window.addEventListener('keyup', InputPushKeyEvent, false)
  window.addEventListener('keypress', InputPushTextEvent, false)
  window.addEventListener('mouseout', InputPushMovedEvent, false)
  window.addEventListener('resize', resizeViewport, false)
  window.addEventListener('popstate', CL_ModifyMenu, false)

  GL.canvas.addEventListener('mousemove', InputPushMouseEvent, false)
  GL.canvas.addEventListener('mousedown', InputPushMouseEvent, false)
  GL.canvas.addEventListener('mouseup', InputPushMouseEvent, false)
  
  document.addEventListener('mousewheel', InputPushWheelEvent, {capture: false, passive: true})
  document.addEventListener('visibilitychange', InputPushFocusEvent, false)
  document.addEventListener('focus', InputPushFocusEvent, false)
  document.addEventListener('blur', InputPushFocusEvent, false)
  //document.addEventListener('drop', dropHandler, false)
  //document.addEventListener('dragenter', dragEnterHandler, false)
  //document.addEventListener('dragover', dragOverHandler, false)

  document.addEventListener('pointerlockchange', InputPushFocusEvent, false)

  /*
  let nipple handle touch events
  GL.canvas.addEventListener('touchstart', InputPushTouchEvent, false)
  GL.canvas.addEventListener('touchend', InputPushTouchEvent, false)
  GL.canvas.addEventListener('touchmove', InputPushTouchEvent, false)
  GL.canvas.addEventListener('touchcancel', InputPushTouchEvent, false)
  */

  console.log( '------------------------------------\n' )
}

function InputPushTouchEvent(joystick, id, evt, data) {
  INPUT.cancelBackspace = false
  if(id == 1) {
    if (data.vector && data.vector.y > .4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 87})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 87})
    }
    if (data.vector && data.vector.y < -.4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 83})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 83})
    }
    if (data.vector && data.vector.x < -.4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 65})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 65})
    }
    if (data.vector && data.vector.x > .4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 68})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 68})
    }
  }
  
  if(id == 2) {
    if (data.vector && data.vector.y > .4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 40})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 40})
    }
    if (data.vector && data.vector.y < -.4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 38})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 38})
    }
    if (data.vector && data.vector.x < -.4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 37})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 37})
    }
    if (data.vector && data.vector.x > .4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 39})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 39})
    }
  }

  var w = Module['canvas'].width;
  var h = Module['canvas'].height;
  var dx = data.angle ? (Math.cos(data.angle.radian) * data.distance) : 0
  var dy = data.angle ? (Math.sin(data.angle.radian) * data.distance) : 0
  var x = data.angle ? dx : Math.round(data.position.x)
  var y = data.angle ? dy : Math.round(data.position.y)

  if(evt.type == 'start') {
    if((Key_GetCatcher( ) & KEYCATCH_UI) && id == 3) {
			Sys_QueEvent( Sys_Milliseconds(), SE_MOUSE_ABS, x, y, 0, null );
		}
		Sys_QueEvent( Sys_Milliseconds(), SE_FINGER_DOWN, INPUT.keystrings['MOUSE1'], id, 0, null );
  }

  if(evt.type == 'end') {
    //Sys_QueEvent( in_eventTime+1, SE_KEY, K_MOUSE1, qfalse, 0, null );
		Sys_QueEvent( Sys_Milliseconds(), SE_FINGER_UP, INPUT.keystrings['MOUSE1'], id, 0, null );
		INPUT.touchhats[id][0] = 0;
		INPUT.touchhats[id][1] = 0;
  }

  if(evt.type == 'move') {
    let ratio = GL.canvas.clientWidth / GL.canvas.clientHeight
		INPUT.touchhats[id][0] = (x * ratio) * 50
		INPUT.touchhats[id][1] = y * 50
  }
}

function IN_Frame() {
  let i = 2
  if(i == 2 && !(Key_GetCatcher( ) & KEYCATCH_UI)) {
    if(INPUT.touchhats[i][0] != 0 || INPUT.touchhats[i][1] != 0) {
      Sys_QueEvent( Sys_Milliseconds(), SE_MOUSE, INPUT.touchhats[i][0], 0, 0, null )
    }
  }

}


function InitNippleJoysticks () {
  // TODO: finish joystick settings
  /*
	in_joystick = Cvar_Get( 'in_joystick', '0', CVAR_ARCHIVE );
	in_joystickThreshold = Cvar_Get( 'joy_threshold', '0.15', CVAR_ARCHIVE );
	j_pitch =        Cvar_Get( 'j_pitch',        '0.022', CVAR_ARCHIVE_ND );
	j_yaw =          Cvar_Get( 'j_yaw',          '-0.022', CVAR_ARCHIVE_ND );
	j_forward =      Cvar_Get( 'j_forward',      '-0.25', CVAR_ARCHIVE_ND );
	j_side =         Cvar_Get( 'j_side',         '0.25', CVAR_ARCHIVE_ND );
	j_up =           Cvar_Get( 'j_up',           '0', CVAR_ARCHIVE_ND );

	j_pitch_axis =   Cvar_Get( 'j_pitch_axis',   '3', CVAR_ARCHIVE_ND );
	j_yaw_axis =     Cvar_Get( 'j_yaw_axis',     '2', CVAR_ARCHIVE_ND );
	j_forward_axis = Cvar_Get( 'j_forward_axis', '1', CVAR_ARCHIVE_ND );
	j_side_axis =    Cvar_Get( 'j_side_axis',    '0', CVAR_ARCHIVE_ND );
	j_up_axis =      Cvar_Get( 'j_up_axis',      '4', CVAR_ARCHIVE_ND );

	Cvar_CheckRange( j_pitch_axis,   '0', va('%i',MAX_JOYSTICK_AXIS-1), CV_INTEGER );
	Cvar_CheckRange( j_yaw_axis,     '0', va('%i',MAX_JOYSTICK_AXIS-1), CV_INTEGER );
	Cvar_CheckRange( j_forward_axis, '0', va('%i',MAX_JOYSTICK_AXIS-1), CV_INTEGER );
	Cvar_CheckRange( j_side_axis,    '0', va('%i',MAX_JOYSTICK_AXIS-1), CV_INTEGER );
	Cvar_CheckRange( j_up_axis,      '0', va('%i',MAX_JOYSTICK_AXIS-1), CV_INTEGER );
  */
  let joy = false
  if (navigator && navigator.userAgent && navigator.userAgent.match(/mobile/i)) {
    joy = true
  }
  Cvar_Get(stringToAddress('in_joystick'), stringToAddress(joy ? '1' : '0'), CVAR_ARCHIVE)

  if(!Cvar_VariableIntegerValue(stringToAddress('in_joystick'))) {
    return
  }

  document.body.classList.add('joysticks')
  if(INPUT.joysticks.length > 0) {
    for(var i = 0; i < INPUT.joysticks.length; i++) {
      INPUT.joysticks[i].destroy()
    }
  }
  INPUT.joysticks[0] = nipplejs.create({
    zone: document.getElementById('left-joystick'),
    multitouch: false,
    mode: 'semi',
    size: 100,
    catchDistance: 50,
    maxNumberOfNipples: 1,
    position: {bottom: '50px', left: '50px'},
  })
  INPUT.joysticks[1] = nipplejs.create({
    zone: document.getElementById('right-joystick'),
    multitouch: false,
    mode: 'semi',
    size: 100,
    catchDistance: 50,
    maxNumberOfNipples: 1,
    position: {bottom: '50px', right: '50px'},
  })
  INPUT.joysticks[2] = nipplejs.create({
    dataOnly: true,
    zone: document.body,
    multitouch: false,
    mode: 'dynamic',
    size: 2,
    catchDistance: 2,
    maxNumberOfNipples: 1,
  })
  INPUT.joysticks[0].on('start end move', InputPushTouchEvent.bind(null, INPUT.joysticks[0], 1))
  INPUT.joysticks[1].on('start end move', InputPushTouchEvent.bind(null, INPUT.joysticks[1], 2))
  INPUT.joysticks[2].on('start end move', InputPushTouchEvent.bind(null, INPUT.joysticks[2], 3))
}


function SDL_SetWindowGrab() {
  
}


function SDL_StartTextInput() {

}

function SDL_StopTextInput () {
  SDL.textInput = false;
}

function SDL_ShowCursor() {
  // TODO: some safety stuff?
  if(document.exitPointerLock)
  document.exitPointerLock()
  else if (document.webkitExitPointerLock)
  document.webkitExitPointerLock()
  else if (document.mozExitPointerLock)
  document.mozExitPointerLock()
}

function GLimp_Shutdown(destroy) {
  window.removeEventListener('resize', resizeViewport)
  window.removeEventListener('keydown', InputPushKeyEvent)
  window.removeEventListener('keyup', InputPushKeyEvent)
  window.removeEventListener('keypress', InputPushTextEvent)
  window.removeEventListener('mouseout', InputPushMovedEvent)
  window.removeEventListener('popstate', CL_ModifyMenu)

  document.removeEventListener('mousewheel', InputPushWheelEvent)
  document.removeEventListener('visibilitychange', InputPushFocusEvent)
  document.removeEventListener('focus', InputPushFocusEvent)
  document.removeEventListener('blur', InputPushFocusEvent)
  //document.removeEventListener('drop', dropHandler)
  //document.removeEventListener('dragenter', INPUT.dragEnterHandler)
  //document.removeEventListener('dragover', INPUT.dragOverHandler)
  document.removeEventListener('pointerlockchange', InputPushFocusEvent);

  if (destroy && GL.canvas) {
    GL.canvas.removeEventListener('mousemove', InputPushMouseEvent)
    GL.canvas.removeEventListener('mousedown', InputPushMouseEvent)
    GL.canvas.removeEventListener('mouseup', InputPushMouseEvent)
    GL.deleteContext(INPUT.handle);
    GL.canvas.remove()
    delete GL.canvas
  }
}

var INPUT = {
  editorActive: false,
  touchhats: [[0,0],[0,0],[0,0],[0,0]], // x/y values for nipples
  joysticks: [],
  keystrings: {},
  IN_Init: IN_Init,
  GLimp_Shutdown: GLimp_Shutdown,
  GLimp_StartDriverAndSetMode:GLimp_StartDriverAndSetMode,
  SDL_WasInit: function (device) { return 1; },
  SDL_StartTextInput: SDL_StartTextInput,
  SDL_StopTextInput: SDL_StopTextInput,
  SDL_ShowCursor: SDL_ShowCursor,
  SDL_SetWindowGrab: SDL_SetWindowGrab,
  Com_MaxFPSChanged: Com_MaxFPSChanged,
  Sys_ConsoleInput: Sys_ConsoleInput,
}

const MAX_MSGLEN = 16384


function reverseLookup(ipSlice) {
  let reverseLookup = Object.keys(NET.lookup).filter(function (addr) {
    if(  NET.lookup[addr][0] == ipSlice[0]
      && NET.lookup[addr][1] == ipSlice[1]
      && NET.lookup[addr][2] == ipSlice[2]
      && NET.lookup[addr][3] == ipSlice[3]) {
      return true
    }
    return false
  })
  if(reverseLookup.length) {
    return reverseLookup[0]
  }
  return null
}

function NET_AdrToString(net) {
  if(HEAPU32[net >> 2] == 2) {
    return stringToAddress('localhost')
  } else
  if(HEAPU32[net >> 2] == 4) {
    let lookup = reverseLookup(HEAPU8.slice(net + 4, net + 8))
    if(lookup)
      return stringToAddress(lookup)
    return stringToAddress(
			  HEAPU8[net + 4] + '.'
      + HEAPU8[net + 5] + '.' 
			+ HEAPU8[net + 6] + '.'
      + HEAPU8[net + 7])
  }
}

function Sys_SockaddrToString() {
  // DNS doesn't work in the browser, but UDP works with SOCKS
  //   How complicated to add DNS lookup through SOCK?
  debugger
}

function Sys_StringToAdr(addr, net) {
  let addrStr = addressToString(addr)

//if(addrStr.includes("local.games")) {
//	debugger
//}

  if(addrStr.match(/localhost/i)) {
    HEAPU32[net >> 2] = 2 /* NA_LOOPBACK */
    NET.lookup[addrStr] = [127, 0, 0, 1]
  } else

  if(typeof NET.lookup[addrStr] == 'undefined') {
    if(NET.lookupCount1 == 256) {
      NET.lookupCount2++;
      NET.lookupCount1 = 1;
    } else {
      NET.lookupCount1++;
    }
    HEAPU32[net >> 2] = 4 /* NA_IP */
		let ip = addrStr.match(/^([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)$/)
		if(ip) {
			NET.lookup[addrStr] = [
				parseInt(ip[1]), parseInt(ip[2]), 
				parseInt(ip[3]), parseInt(ip[4]), 
			]
		} else {
			NET.lookup[addrStr] = [10, 0, NET.lookupCount2, NET.lookupCount1]
		}
  } else {
		HEAPU32[net >> 2] = 4 /* NA_IP */
	}
  HEAPU8[net + 4] = NET.lookup[addrStr][0];
  HEAPU8[net + 5] = NET.lookup[addrStr][1];
  HEAPU8[net + 6] = NET.lookup[addrStr][2];
  HEAPU8[net + 7] = NET.lookup[addrStr][3];
  return true
}

function Sys_StringToSockaddr() {
  
}

function Sys_SendPacket(length, data, to) {
  let nameStr = addressToString(to + 10)
    || reverseLookup(HEAPU8.slice(to + 4, to + 8))
	let fullMessage = new Uint8Array(
		4 + (nameStr.length ? (nameStr.length + 2) : 4)
		+ 2 + length)
	fullMessage[0] = 0x00 // 0x05
	fullMessage[1] = 0x00 // 0x01
	fullMessage[2] = 0x00 // reserved
	if(nameStr.length) {
		fullMessage[3] = 0x03
		fullMessage[4] = nameStr.length + 1
		fullMessage.set(nameStr.split('').map(c => c.charCodeAt(0)), 5)
		fullMessage[5 + nameStr.length + 1] = HEAPU8[to + 8]
		fullMessage[5 + nameStr.length + 2] = HEAPU8[to + 9]
	} else {
		fullMessage[3] = 0x01
		fullMessage[4] = HEAPU8[to + 4]
		fullMessage[5] = HEAPU8[to + 5]
		fullMessage[6] = HEAPU8[to + 6]
		fullMessage[7] = HEAPU8[to + 7]
		fullMessage[8] = HEAPU8[to + 8]
		fullMessage[9] = HEAPU8[to + 9]
	}
	fullMessage.set(HEAPU8.slice(data, data + length), fullMessage.length - length);
	if(NET.socket1 && NET.socket1.readyState == WebSocket.OPEN
		&& NET.socket1.fresh >= 3) {
		NET.socket1.send(fullMessage)
	} else {
		NET.socket1Queue.push(fullMessage)
	}
	if(NET.socket2 && NET.socket2.readyState == WebSocket.OPEN
		&& NET.socket2.fresh >= 3) {
		NET.socket2.send(fullMessage)
	} else {
		NET.socket2Queue.push(fullMessage)
	}
}


function NET_Sleep() {
	let sv_running = Cvar_VariableIntegerValue(stringToAddress('sv_running'))
	let sv_dedicated = Cvar_VariableIntegerValue(stringToAddress('dedicated'))
	let count = NET.queue.length
   // alternate buffers so we don't overwrite
  NET.bufferAlternate = !NET.bufferAlternate
  let buffer = NET.buffer + NET.bufferAlternate * NET.bufferLength
	for(let i = 0; i < count; i++) {
		let packet = NET.queue.shift()
		let from = buffer
		let netmsg = buffer + 512
		let data = buffer + 1024
		HEAPU8.fill(0, from, from + 512)
		HEAPU8.fill(0, netmsg, netmsg + 512)
		HEAPU32[(netmsg >> 2) + 3] = data
		HEAPU32[(netmsg >> 2) + 4] = MAX_MSGLEN
		HEAPU32[(netmsg >> 2) + 5] = MAX_MSGLEN * 8
		HEAPU32[(netmsg >> 2) + 6] = packet[2].length
		HEAPU8.set(packet[2], data)
    HEAPU32[from >> 2] = 4 /* NA_IP */
    HEAPU8[from + 8] = packet[1][1]
    HEAPU8[from + 9] = packet[1][0]
		//HEAPU16[(from + 8) >> 1] = (packet[1][0] << 8) + packet[1][1] // port
		if(typeof packet[0] == 'string') {
			Sys_StringToAdr(stringToAddress(packet[0]), from)
		} else {
			HEAPU8.set(packet[0], from + 4)
		}

		if ( sv_running || sv_dedicated )
			Com_RunAndTimeServerPacket( from, netmsg );
		else
			CL_PacketEvent( from, netmsg );
	}
}

function sendHeartbeat(sock) {
  if(sock.readyState == WebSocket.OPEN) {
		sock.fresh = 5
    sock.send(Uint8Array.from([0x05, 0x01, 0x00, 0x00]),
      { binary: true })
  } else if(sock.readyState == WebSocket.CLOSED) {
    NET.reconnect = true
    if(sock == NET.socket1) {
      NET.socket1 = null
    } else {
      NET.socket2 = null
    }
    NET_OpenIP()
  }
}


function sendLegacyEmscriptenConnection(socket, port) {
  socket.send(Uint8Array.from([
    0xFF, 0xFF, 0xFF, 0xFF,
    'p'.charCodeAt(0), 'o'.charCodeAt(0), 'r'.charCodeAt(0), 't'.charCodeAt(0),
    (port & 0xFF00) >> 8, (port & 0xFF)
  ]))

}


function socketOpen(evt) {
	evt.target.fresh = 1
	evt.target.send(Uint8Array.from([
    0x05, 0x01, 0x00, // no password caps?
  ]))
	if(!NET.heartbeat) {
		NET.heartbeat = setInterval(function () {
			sendHeartbeat(NET.socket1)
			NET.heartbeatTimeout = setTimeout(function () {
				sendHeartbeat(NET.socket2)
			}, 8000)
		}, 10000)
	}
  if(!NET.reconnect) return
	sendLegacyEmscriptenConnection(evt.target, NET.net_port)
}


function socketMessage(evt) {
  let message = new Uint8Array(evt.data)
  switch(evt.target.fresh) {
    case 1:
      if(message.length != 2) {
        throw new Error('wtf? this socket no worky')
      } else

      if(message[1] != 0) {
        throw new Error('this socket requires a password, dude')
      }

      // send the UDP associate request
      evt.target.send(Uint8Array.from([
				0x05, 0x03, 0x00, 0x01, 
				0x00, 0x00, 0x00, 0x00, // ip address
				(NET.net_port & 0xFF00) >> 8, (NET.net_port & 0xFF)
			]))
      evt.target.fresh = 2
    break
		case 2:
			if(message.length < 5) {
				throw new Error('denied, can\'t have ports')
			}

			if(message[3] != 1) {
				throw new Error('relay address is not IPV4')
			}

			sendLegacyEmscriptenConnection(evt.target, NET.net_port)
			evt.target.fresh = 3
			/*if(socket == NET.socket1) {
				for(let i = 0, count = NET.socket1Queue.length; i < count; i++) {
					socket.send(NET.socket1Queue.shift())
				}
			} else {
				for(let i = 0, count = NET.socket1Queue.length; i < count; i++) {
					socket.send(NET.socket2Queue.shift())
				}
			}*/

		break
		case 3:
			if(message.length == 10) {
				evt.target.fresh = 4
				break
			}

		case 4:
		case 5:
				// add messages to queue for processing
			if(message.length == 2 || message.length == 10) {
				evt.target.fresh = 4
				return
			}

			let addr, remotePort, msg
			if(message[3] == 1) {
				addr = message.slice(4, 8)
				remotePort = message.slice(8, 10)
				msg = Array.from(message.slice(10))
			} else if (message[3] == 3) {
				addr = Array.from(message.slice(5, 5 + message[4])).map(function (c) {
					return String.fromCharCode(c)
				}).join('')
				remotePort = message.slice(5 + message[4], 5 + message[4] + 2)
				msg = Array.from(message.slice(5 + addr.length + 2))
			} else {
				throw new Error('don\' know what to do mate')
			}
			//if(addr.includes('local.games')) {
			//	debugger
			//}
			NET.queue.push([addr, remotePort, msg])
		break
  }
}

function socketError(evt) {
  NET.reconnect = true
  if(evt.target == NET.socket1) {
    NET.socket1 = null
  }
  if(evt.target == NET.socket2) {
    NET.socket2 = null
  }
}

function NET_OpenIP() {
  NET.net_port = addressToString(Cvar_VariableString(stringToAddress('net_port')))
  NET.net_socksServer = addressToString(Cvar_VariableString(stringToAddress('net_socksServer')))
  NET.net_socksPort = addressToString(Cvar_VariableString(stringToAddress('net_socksPort')))
  if(!NET.buffer) {
    // from NET_Event() + netmsg_t + netadr_t
    NET.bufferLength = MAX_MSGLEN + 8 + 24 + 1024
    NET.bufferAlternate = 0
    NET.buffer = malloc(NET.bufferLength * 3) 
  }
  if(!NET.queue) {
    NET.queue = []
  }
  if(window.location.protocol != 'http:' 
    && window.location.protocol != 'https:') {
    return
  }
  let fullAddress = 'ws' 
    + (window.location.protocol.length > 5 ? 's' : '')
    + '://' + NET.net_socksServer + ':' + NET.net_socksPort
  if(!NET.socket1) {
    NET.socket1 = new WebSocket(fullAddress)
    NET.socket1.binaryType = 'arraybuffer';
    NET.socket1.addEventListener('open', socketOpen, false)
    NET.socket1.addEventListener('message', socketMessage, false)
    NET.socket1.addEventListener('error', socketError, false)
  }
  if(!NET.socket2) {
    NET.socket2 = new WebSocket(fullAddress)
    NET.socket2.binaryType = 'arraybuffer';
    NET.socket2.addEventListener('open', socketOpen, false)
    NET.socket2.addEventListener('message', socketMessage, false)
    NET.socket2.addEventListener('error', socketError, false)
  }
}

function NET_Shutdown() {
  if(NET.heartbeat) {
    clearInterval(NET.heartbeat)
  }
  if(NET.heartbeatTimeout) {
    clearTimeout(NET.heartbeatTimeout)
  }
  if(NET.socket1) {
    NET.socket1.removeEventListener('open', socketOpen)
    NET.socket1.removeEventListener('message', socketMessage)
    NET.socket1.removeEventListener('close', socketError)
    NET.socket1.close()
    NET.socket1 = null
  }
  if(NET.socket2) {
    NET.socket2.removeEventListener('open', socketOpen)
    NET.socket2.removeEventListener('message', socketMessage)
    NET.socket2.removeEventListener('close', socketError)
    NET.socket2.close()
    NET.socket2 = null
  }
}

function Sys_IsLANAddress() {
  
}

function Sys_Offline() {

}

function Sys_NET_MulticastLocal (net, length, data) {
  debugger
  // all this does is use a dedicated server in a service worker
  window.serverWorker.postMessage([
    'net', net, Uint8Array.from(HEAP8.slice(data, data+length))])
}

function Com_DL_HeaderCallback(localName, response) {
  //let type = response.headers.get('Content-Type')
  if (!response || !(response.status >= 200 && response.status < 300 || response.status === 304)) {
    Sys_FileReady(stringToAddress(localName), null) // failed state, not to retry
    //throw new Error('Couldn\'t load ' + response.url + '. Status: ' + (response || {}).statusCode)
    response.body.getReader().cancel()
    // TODO: check for too big files!
    //if(controller)
      //controller.abort()
    return Promise.resolve()
  }
  return Promise.resolve(response.arrayBuffer())
}

function Com_DL_Begin(localName, remoteURL) {
  if(AbortController && !NET.controller) {
    NET.controller = new AbortController()
  }
  remoteURL += (remoteURL.includes('?') ? '&' : '?') + 'time=' + NET.cacheBuster
  return fetch(remoteURL, {
    mode: 'cors',
    responseType: 'arraybuffer',
    credentials: 'omit',
    signal: NET.controller ? NET.controller.signal : null
  })
  // why so many? this catches connection errors
  .catch(function (error) {
    return
  })
  .then(function (request) {
    return Com_DL_HeaderCallback(localName, request)
  })
  // this catches streaming errors, does everybody do this?
  .catch(function (error) {
    return
  })
}

function Com_DL_Perform(nameStr, localName, responseData) {
  NET.downloadCount--
  if(!responseData) {
    // already responded with null data
    return
  }
  // TODO: intercept this information here so we can invalidate the IDBFS storage
  if(localName.includes('version.json')) {
    NET.cacheBuster = Date.parse(JSON.parse(Array.from(new Uint8Array(responseData))
      .map(c => String.fromCharCode(c)).join(''))[0])
  }

  // don't store any index files, redownload every start
  if(nameStr.endsWith('/')) {
    let tempName = nameStr + '.' // yes this is where it always looks for temp files
      + Math.round(Math.random() * 0xFFFFFFFF).toString(16) + '.tmp'
    FS_CreatePath(stringToAddress(nameStr))
    FS.virtual[tempName] = {
      timestamp: new Date(),
      mode: FS_FILE,
      contents: new Uint8Array(responseData)
    }
    Sys_FileReady(stringToAddress(localName), stringToAddress(tempName));
  } else {
    // TODO: JSON.parse
    // save the file in memory for now
    FS_CreatePath(stringToAddress(nameStr))
    FS.virtual[nameStr] = {
      timestamp: new Date(),
      mode: FS_FILE,
      contents: new Uint8Array(responseData)
    }
    // async to filesystem
    // does it REALLY matter if it makes it? wont it just redownload?
    writeStore(FS.virtual[nameStr], nameStr)
    Sys_FileReady(stringToAddress(localName), stringToAddress(nameStr));
  }

}

function CL_Download(cmd, name, auto) {
  if(!FS.database) {
    openDatabase()
  }
  if(NET.downloadCount > 5) {
    return false // delay like cl_curl does
  }

  // TODO: make a utility for Cvar stuff?
  let dlURL = addressToString(Cvar_VariableString(stringToAddress("cl_dlURL")))
  let gamedir = addressToString(FS_GetCurrentGameDir())
  let nameStr = addressToString(name)
  let localName = nameStr
  if(localName[0] == '/')
    localName = localName.substring(1)
  if(localName.startsWith(gamedir))
    localName = localName.substring(gamedir.length)
  if(localName[0] == '/')
    localName = localName.substring(1)

  let remoteURL
  if(dlURL.includes('%1')) {
    remoteURL = dlURL.replace('%1', localName.replace(/\//ig, '%2F'))
  } else {
    remoteURL = dlURL + '/' + localName
  }
  if(remoteURL.includes('.googleapis.com')) {
    if(nameStr.endsWith('/')) {
      remoteURL = 'https://www.googleapis.com/storage/v1/b/'
        + remoteURL.match(/\/b\/(.*?)\/o\//)[1]
        + '/o/?includeTrailingDelimiter=true&maxResults=100&delimiter=%2f&prefix='
        + remoteURL.match(/\/o\/(.*)/)[1]
    } else if (!remoteURL.includes('?')) {
      remoteURL += '?alt=media'
    }
  }
  try {
    NET.downloadCount++
    let newPromise
    if(nameStr.includes('version.json') || nameStr.includes('maps/maplist.json')) {
      newPromise = Promise.resolve()
    } else {
      newPromise = readStore(nameStr)
    }
    newPromise.then(function (result) {
        // always redownload indexes in case the content has changed?
        if(!result || (result.mode >> 12) == ST_DIR) {
          return Com_DL_Begin(localName, remoteURL)
        // bust the caches!
        } else if(result.timestamp.getTime() < NET.cacheBuster) {
          return Com_DL_Begin(localName, remoteURL)
        // valid from disk
        } else {
          return Promise.resolve(result.contents)
        }
      })
      .then(function (responseData) {
        Com_DL_Perform(nameStr, localName, responseData)
      })
  } catch (e) {
    
  }
  if(!nameStr.includes(gamedir)) {
    debugger
    throw new Error('something wrong')
  }

  return true
}

var NET = {
  reconnect: false,
	socket1Queue: [],
	socket2Queue: [],
  lookup: {},
  lookupCount1: 1,
  lookupCount2: 127,
  downloadCount: 0,
  controller: null,
  NET_AdrToString: NET_AdrToString,
  Sys_Offline: Sys_Offline,
  Sys_SockaddrToString: Sys_SockaddrToString,
  Sys_StringToSockaddr: Sys_StringToSockaddr,
  NET_Sleep: NET_Sleep,
  NET_OpenIP: NET_OpenIP,
  Sys_StringToAdr: Sys_StringToAdr,
  Sys_SendPacket: Sys_SendPacket,
  Sys_IsLANAddress: Sys_IsLANAddress,
  Sys_NET_MulticastLocal: Sys_NET_MulticastLocal,
  CL_Download: CL_Download,

}


if (typeof module != 'undefined') {
  // SOMETHING SOMETHING fs.writeFile
  module.exports = NET
}

/*
function get_string(memory, addr) {
	let buffer = new Uint8Array(memory.buffer, addr, memory.buffer.byteLength - addr);
	let term = buffer.indexOf(0);

	return new TextDecoder().decode(buffer.subarray(0, term));
}
*/


function addressToString(addr, length) {
	let newString = ''
	if(!addr) return newString
	if(!length) length = 1024
	for(let i = 0; i < length; i++) {
		if(HEAPU8[addr + i] == 0) {
			break;
		}
		newString += String.fromCharCode(HEAPU8[addr + i])
	}

	return newString
}

function stringToAddress(str, addr) {
  if(!STD.sharedMemory 
    || typeof STD.sharedCounter != 'number'
    || isNaN(STD.sharedCounter)) {
    throw new Error('Memory not setup!')
  }
	let start = STD.sharedMemory + STD.sharedCounter
	if(typeof str != 'string') {
		str = str + ''
	}
	if(addr) start = addr
	for(let j = 0; j < str.length; j++) {
		HEAPU8[start+j] = str.charCodeAt(j)
	}
	HEAPU8[start+str.length] = 0
	HEAPU8[start+str.length+1] = 0
	HEAPU8[start+str.length+2] = 0
	if(!addr) {
		STD.sharedCounter += str.length + 3
		STD.sharedCounter += 4 - (STD.sharedCounter % 4)
		if(STD.sharedCounter > 1024 * 512) {
			STD.sharedCounter = 0
		}
	}
  if(isNaN(STD.sharedCounter)) {
    debugger
    throw new Error('Memory not setup!')
  }
	return start
}


// here's the thing, I know for a fact that all the callers copy this stuff
//   so I don't need to increase my temporary storage because by the time it's
//   overwritten the data won't be needed, should only keep shared storage around
//   for events and stuff that might take more than 1 frame
function stringsToMemory(list, length) {
  if(!STD.sharedMemory || typeof STD.sharedCounter != 'number') {
    debugger
    throw new Error('Memory not setup!')
  }
	// add list length so we can return addresses like char **
	let start = STD.sharedMemory + STD.sharedCounter
	let posInSeries = start + (list.length + 1) * 4
	for (let i = 0; i < list.length; i++) {
		HEAPU32[(start+i*4)>>2] = posInSeries // save the starting address in the list
		stringToAddress(list[i], posInSeries)
		posInSeries += list[i].length + 1
	}
  HEAPU32[(start+list.length*4)>>2] = 0
	if(length) HEAPU32[length >> 2] = posInSeries - start
	STD.sharedCounter = posInSeries - STD.sharedMemory
	STD.sharedCounter += 4 - (STD.sharedCounter % 4)
	if(STD.sharedCounter > 1024 * 512) {
		STD.sharedCounter = 0
	}
  if(isNaN(STD.sharedCounter)) {
    debugger
    throw new Error('Memory not setup!')
  }
	return start
}


function Sys_Microseconds() {
	if (window.performance.now) {
		return parseInt(window.performance.now(), 10);
	} else if (window.performance.webkitNow) {
		return parseInt(window.performance.webkitNow(), 10);
	}

	STD.sharedCounter += 8
	return STD.sharedMemory + STD.sharedCounter - 8
}

function Sys_Milliseconds() {
	if (!DATE.timeBase) {
		// javascript times are bigger, so start at zero
		//   pretend like we've been alive for at least a few seconds
		//   I actually had to do this because files it checking times and this caused a delay
		DATE.timeBase = Date.now() - 5000;
	}

	//if (window.performance.now) {
	//  return parseInt(window.performance.now(), 10);
	//} else if (window.performance.webkitNow) {
	//  return parseInt(window.performance.webkitNow(), 10);
	//} else {
	return Date.now() - DATE.timeBase;
	//}
}



// TODO: in browser, try to download wasm like normal only from host address
//   or from cl_dlurl address, localStorage or IndexedDB could be vulnerable.
// THATS WHY ITS ENCRYPTED AGAIN.
function Sys_exec(program, args) {
  // try to find and execute wasm in same context like INSECURE DLLs in Windows
  // we only have inmemory FS and specific system functions, there isn't much
  //   anyone can do from here on native to break out of nodejs sandbox
	let programStr = addressToString(program)
	if(programStr.length < 1) {
		return 1
	}
	if(!FS.virtual[programStr] 
		|| FS.virtual[programStr].mode >> 12 != ST_FILE) {
    if(!programStr.includes('.wasm'))
  		programStr += '.wasm'
	}
	if(!FS.virtual[programStr]) {
    programStr = programStr.replace('.wasm', '.js')
  }
  if(!FS.virtual[programStr] 
		|| FS.virtual[programStr].mode >> 12 != ST_FILE) {
    throw new Error('Command not found: ' + programStr)
  }

	// skip arg[0] = program name, will fill it in when it resolves
	//   this is always a system level decision, I think
	let varg = args+4
	let startArgs = []
	while(HEAPU32[varg>>2]!=0) {
		startArgs.push(addressToString(HEAPU32[varg>>2]))
		varg+=4
	}
	
  if(SYS.forked) {
    SYS.forked = false
    sendMessage({
      script: 'initAll(' + JSON.stringify([ programStr ].concat(startArgs)) 
          + ', {})'
    })
  } else {
    initAll([ programStr ].concat(startArgs), {
      SYS: SYS
    }).catch(function(e) {
			// TODO: send something back to LCC?
			console.error(e)
      // THIS IS WHAT HAPPENS WHEN A CHILD PROCESS DIES
      Sys_Exit(1)
		})
  }
	return 0 // INIT OK! POSIX WOOOO!
}



function Com_RealTime(tm) {
	// locale time is really complicated
	//   use simple Q3 time structure
	let now = new Date()
	let t = now / 1000
  if(tm) {
    HEAP32[(tm >> 2) + 5] = now.getFullYear() - 1900
    HEAP32[(tm >> 2) + 4] = now.getMonth() // already subtracted by 1
    HEAP32[(tm >> 2) + 3] = now.getDate() 
    HEAP32[(tm >> 2) + 2] = (t / 60 / 60) % 24
    HEAP32[(tm >> 2) + 1] = (t / 60) % 60
    HEAP32[(tm >> 2) + 0] = t % 60
  }
	return t
}

var _emscripten_get_now_is_monotonic = true;

function _emscripten_get_now() {
	return performance.now()
}

function clock_gettime(clk_id, tp) {
	let now;
  clk_id = HEAPU32[clk_id>>2]
	if (clk_id === 0) {
			now = Date.now()
	} else if ((clk_id === 1 || clk_id === 4) && _emscripten_get_now_is_monotonic) {
			now = _emscripten_get_now()
	} else {
			HEAPU32[errno >> 2] = 28
			return -1
	}
	HEAP32[tp >> 2] = now / 1e3 | 0;
	HEAP32[tp + 4 >> 2] = now % 1e3 * 1e3 * 1e3 | 0;
	return 0
}

var DATE = {
  mktime: function (tm) {
    return new Date(
      HEAP32[(tm >> 2) + 5] + 1900, 
      HEAP32[(tm >> 2) + 4] /* month is already subtracted for mtime */, 
      HEAP32[(tm >> 2) + 3], 
      HEAP32[(tm >> 2) + 2], 
      HEAP32[(tm >> 2) + 1], 
      HEAP32[(tm >> 2) + 0]).getTime() / 1000
  },
  asctime: function () {
    // Don't really care what time it is because this is what the engine does
    //   right above this call
    return stringToAddress(new Date().toLocaleString())
  },
  time: function () {
    // The pointer returned by localtime (and some other functions) are actually pointers to statically allocated memory.
    // perfect.
    debugger
  },
  localtime: function (t) {
    // TODO: only uses this for like file names, so doesn't have to be fast
    debugger
    let s = STD.sharedMemory + STD.sharedCounter
    HEAP32[(s + 4 * 1) >> 2] = floor(t / 60)
    HEAP32[(s + 4 * 1) >> 2] = floor(t / 60 / 60)
    HEAP32[(s + 4 * 1) >> 2] = floor(t / 60 / 60)
    /*
typedef struct qtime_s {
	int tm_sec;     /* seconds after the minute - [0,59]
	int tm_min;     /* minutes after the hour - [0,59]
	int tm_hour;    /* hours since midnight - [0,23]
	int tm_mday;    /* day of the month - [1,31]
	int tm_mon;     /* months since January - [0,11]
	int tm_year;    /* years since 1900
	int tm_wday;    /* days since Sunday - [0,6]
	int tm_yday;    /* days since January 1 - [0,365]
	int tm_isdst;   /* daylight savings time flag 
} qtime_t;
*/

  },
  ctime: function (t) {
    return stringToAddress(new Date(t).toString())
  },
  Com_RealTime: Com_RealTime,
	// locale time is really complicated
	//   use simple Q3 time structure
  Sys_time: Com_RealTime,
  Sys_Milliseconds: Sys_Milliseconds,
  Sys_Microseconds: Sys_Microseconds,
  Sys_gettime: clock_gettime,
  clock_time_get: function () { debugger },
	clock_res_get: function () { debugger },
}



function Sys_fork() {
  // TODO: prepare worker to call into
  //return ++Sys.threadCount
  SYS.forked = true
	if(typeof window.preFS == 'undefined'
		|| typeof window.preFS['sys_worker.js'] == 'undefined'
	//	|| !document.body.classList.contains('paused')
	) {
		throw new Error('Could not load worker.')
	}
	if(typeof FS.virtual['sys_worker.js'] == 'undefined') {
		readPreFS()
	}
	const workerData = Array.from(FS.virtual['sys_worker.js'].contents)
		.map(function (c) { return String.fromCharCode(c) }).join('')
	const blob = new Blob([workerData], {type: 'application/javascript'})
	SYS.worker = new Worker(URL.createObjectURL(blob))
	// TODO something with signals API
	SYS.worker.addEventListener('message', function (event) {
		setTimeout(function () {
			onMessage(event.data)
		}, 100)
  })

}


function Sys_wait(status) {
  // lookup by address status? does this work on git code?
  if(typeof Sys.waitListeners[status] == 'undefined') {
    Sys.waitListeners[status] = 0
  } else {
    ++Sys.waitListeners[status]
  }
  HEAPU32[status>>2] = Sys.waitListeners[status]
  return 0 // TODO: return error if it happens in _start()
}


function updateGlobalBufferAndViews() {
	let buf = ENV.memory.buffer
	if(typeof window != 'undefined') {
		Module.HEAP8 = window.HEAP8 = new Int8Array(buf);
		Module.HEAPU8 = window.HEAPU8 = new Uint8Array(buf);
		Module.HEAP16 = window.HEAP16 = new Int16Array(buf);
		Module.HEAPU16 = window.HEAPU16 = new Uint16Array(buf);
		Module.HEAP32 = window.HEAP32 = new Int32Array(buf);
		Module.HEAPU32 = window.HEAPU32 = new Uint32Array(buf);
		Module.HEAPF32 = window.HEAPF32 = new Float32Array(buf);
		Module.HEAPF64 = window.HEAPF64 = new Float64Array(buf);
	} else if (typeof global != 'undefined') {
		Module.HEAP8 = global.HEAP8 = new Int8Array(buf);
		Module.HEAPU8 = global.HEAPU8 = new Uint8Array(buf);
		Module.HEAP16 = global.HEAP16 = new Int16Array(buf);
		Module.HEAPU16 = global.HEAPU16 = new Uint16Array(buf);
		Module.HEAP32 = global.HEAP32 = new Int32Array(buf);
		Module.HEAPU32 = global.HEAPU32 = new Uint32Array(buf);
		Module.HEAPF32 = global.HEAPF32 = new Float32Array(buf);
		Module.HEAPF64 = global.HEAPF64 = new Float64Array(buf);
	}
}


var STD = {
  threadCount: 0,
  waitListeners: {},
  sharedCounter: 0,
  stringToAddress,
  addressToString,
  stringsToMemory,
  updateGlobalBufferAndViews: updateGlobalBufferAndViews,
  __assert_fail: console.assert, // TODO: convert to variadic fmt for help messages
  Sys_longjmp: function (id, code) { throw new Error('longjmp', id, code) },
  Sys_setjmp: function (id) { try {  } catch (e) { } },
  Sys_fork: Sys_fork,
  Sys_wait: Sys_wait,
  Sys_exec: Sys_exec,
	Sys_execv: Sys_exec,
}



var MATHS = {
  srand: function srand() {}, // TODO: highly under-appreciated game dynamic
  rand: Math.random,
  exp2: function (c) { return Math.pow(2, c) },
  exp2f: function (c) { return Math.pow(2, c) },
}
// These can be assigned automatically? but only because they deal only with numbers and not strings
//   TODO: What about converting between float, endian, and shorts?
let maths = Object.getOwnPropertyNames(Math)
for(let j = 0; j < maths.length; j++) {
  MATHS[maths[j] + 'f'] = Math[maths[j]]
  MATHS[maths[j]] = Math[maths[j]]
}

if(typeof module != 'undefined') {
  module.exports = {
    MATHS,
		STD,
		DATE,
    stringToAddress,
    addressToString,
    stringsToMemory
  }
}





function getQueryCommands() {
	// Wow, look at all the unfuckery I don't have to do with startup options because
	//   I'm not using emscripten anymore.
	let startup = [
		'quake3e_web',
		'+set', 'fs_basepath', '/base',
		'+set', 'fs_homepath', '/home',
		'+set', 'sv_pure', '0', // require for now, TODO: server side zips
		'+set', 'fs_basegame', 'multigame',
		'+set', 'r_mode', '-1',
		'+set', 'r_ext_framebuffer_object', '0',
		'+set', 'bot_enable', '0',
		'+set', 'net_socksServer', window.location.hostname || '',
		'+set', 'net_socksPort', window.location.port 
			|| (window.location.protocol == 'https:' ? '443' : '80'),
		'+set', 'sv_fps', '100',
		'+set', 'snaps', '100',
		//'+set', 'r_ext_multitexture', '0',
		//'+set', 'r_ext_framebuffer_multisample', '0',
		// this prevents lightmap from being wrong when switching maps
		//   renderer doesn't restart between maps, but BSP loading updates
		//   textures with lightmap by default, so this keeps them separate
		//'+set', 'r_mergeLightmaps', '0',
		//'+set', 'r_deluxeMapping', '0',
		//'+set', 'r_normalMapping', '0',
		//'+set', 'r_specularMapping', '0',
	]
	startup.push.apply(startup, window.preStart)
	startup.push.apply(startup, [
		'+set', 'r_fullscreen', window.fullscreen ? '1' : '0',
		'+set', 'r_customHeight', '' + GL.canvas.clientHeight || 0,
		'+set', 'r_customWidth', '' + GL.canvas.clientWidth || 0,
	])
	// meant to do this a lot sooner, with a download, we can just package
	//   whatever pk3/autoexec we want with the game.
	// but with web, we might be serving multiple sources, file:///index.html
	//   http://localhost/ and public quake.games/lvlworld. so i don't have
	//   to repackage for every source, check the domain we're on.
	let hostname = (/^(.*?)\./i).exec(window.location.hostname)
	let basename = false
	if(hostname) {
		basename = hostname[1]
	} else
	if(window.location.protocol == 'file:') {
		basename = 'localhost'
	}

	if(basename) {
		startup.push.apply(startup, [
			'+set', 'fs_basegame', basename,
			'+set', 'fs_game', 'lobby',
		])
	}
	var search = /([^&=]+)/g
	var query  = window.location.search.substring(1)
	var match
	while (match = search.exec(query)) {
		var val = decodeURIComponent(match[1])
		val = val.split(' ')
		val[0] = (val[0][0] != '+' ? '+' : '') + val[0]
		startup.push.apply(startup, val)
	}
	return startup
}


function Sys_UnloadLibrary() {

}

function Sys_LoadLibrary() {
	
}

function Sys_LoadFunction() {
	
}


function Sys_Print(message) {
	console.log(addressToString(message))
}

function Sys_Edit() {
	if(typeof window.ace == 'undefined') {
		return
	}

	if(Cmd_Argc() < 2) {
		Com_Printf(stringToAddress('Usage: edit [filename]\n'))
		return
	}

	let basegamedir = addressToString(FS_GetBaseGameDir())
	let gamedir = addressToString(FS_GetCurrentGameDir())
	let filename = Cmd_Argv(1)
	let filenameStr = addressToString(filename)
	if(filenameStr.startsWith('/')) {
		filenameStr = filenameStr.substr(1)
	}
	if(filenameStr.startsWith(gamedir)) {
		filenameStr = filenameStr.substr(gamedir.length)
	}
	if(filenameStr.startsWith(basegamedir)) {
		filenameStr = filenameStr.substr(basegamedir.length)
	}
	if(filenameStr.startsWith('/')) {
		filenameStr = filenameStr.substr(1)
	}
	if(!filenameStr || !filenameStr.length) {
		Com_Printf(stringToAddress('Usage: edit [filename]\n'))
		return
	}
	let openFilename = stringToAddress(filenameStr)

	let buf = stringToAddress('DEADBEEF') // pointer to pointer
	let length
	if ((length = FS_ReadFile(openFilename, buf)) > 0 && HEAPU32[buf >> 2] > 0) {
		let imageView = Array.from(HEAPU8.slice(HEAPU32[buf >> 2], HEAPU32[buf >> 2] + length))
		let utfEncoded = imageView.map(function (c) { return String.fromCharCode(c) }).join('')
		FS_FreeFile(HEAPU32[buf >> 2])
		ace.setValue(utfEncoded)
		// TODO: show relationships in Jarvis, 
		//   one module refers to another module
		//   these are the leaves of change that worry code reviewers
		ACE.filename = filenameStr
	} else {
		let vargs = stringToAddress('DEADBEEF') // pointer to pointer
		HEAPU32[vargs >> 2] = openFilename
		HEAPU32[(vargs >> 2) + 1] = 0
		Com_Printf(stringToAddress('File not found \'%s\'.\nUsage: edit [filename]\n'), vargs)
	}
}


function Sys_Exit(code) {
	SYS.exited = true
	GLimp_Shutdown();
	NET_Shutdown();
	if(SYS.frameInterval) {
		clearInterval(SYS.frameInterval)
		SYS.frameInterval = null
	}
	// redirect to lvlworld
	let returnUrl = addressToString(Cvar_VariableString(stringToAddress('cl_returnURL')))
	if(returnUrl) {
	//	navigateTo(returnUrl)
	//	window.location = returnUrl
	}
}

function Sys_Error(fmt, args) {
	let len = BG_sprintf(STD.sharedMemory + STD.sharedCounter, fmt, args)
	if(len > 0)
		console.error('Sys_Error: ', addressToString(STD.sharedMemory + STD.sharedCounter))
	Sys_Exit( 1 )
	throw new Error(addressToString(fmt))
}

function Sys_SetStatus(status, replacementStr) {
	// TODO: something like  window.title = , then setTimeout( window.title = 'Quake3e' again)
	
}

function CL_MenuModified(oldValue, newValue, cvar) {
	if(INPUT.modifyingCrumb) {
		return // called from ourselves below from a user action
	}
	if(window.location.orgin == null) {
		return
	}
	let newValueStr = addressToString(newValue)
	let newLocation = newValueStr.replace(/[^a-z0-9]/gi, '')
	if(!SYS.menuInited) { // keep track of first time the ui.qvm appears
		SYS.menuInited = true
		document.body.className += ' done-loading '
	}
	if(window.location.pathname.toString().includes(newLocation)) {
		// don't add to stack because it creates a lot of annoying back pushes
		return
	}
	history.pushState(
		{location: window.location.pathname}, 
		'Quake III Arena: ' + newValueStr, 
		newLocation)
}

function CL_ModifyMenu(event) {
	let oldLocation = window.location.pathname.toString().substring(1) || 'MAIN MENU'
	Cbuf_AddText( stringToAddress(`set ui_breadCrumb "${oldLocation}"\n`) );
}

function Sys_Frame() {
	if(SYS.inFrame) {
		return
	}
	function doFrame() {
		SYS.inFrame = true
		SYS.running = !SYS.running
		try {
			if(typeof ACE != 'undefined') {
				renderFilelist()
			}
			Com_Frame(SYS.running)
		} catch (e) {
			if(!SYS.exited && e.message == 'longjmp') {
				// let game Com_Frame handle it, it will restart UIVM
				Cbuf_AddText(stringToAddress('vid_restart\n'));
				console.error(e)
			} else
			if(!SYS.exited || e.message != 'unreachable') {
				Sys_Exit(1)
				throw e
			}
		}
		SYS.inFrame = false
	}
	if(HEAP32[gw_active >> 2]) {
		requestAnimationFrame(doFrame)
	} else {
		doFrame()
	}
}

function Sys_notify(ifile, path, fp) {
	openDatabase().then(function (db) {
		writeStore(ifile, path)
	})
	// TODO: ADD FILESYSTEM WATCHERS API INOTIFY 
	//   THAT READS A LIST GENERATED HERE
	if(typeof window.updateFilelist != 'undefined'
		&& !ACE.filestimer) {
		ACE.filestimer = setTimeout(updateFilelist, 100)
	}
}


function dynCall(ret, func, args) {
	return Module.table.get(func).apply(null, args)
}

function CreateAndCall(code, params, vargs) {
	let func
	if(typeof SYS.evaledFuncs[code] != 'undefined') {
		func = SYS.evaledFuncs[code]
	} else {
		let paramStr = addressToString(params)
		func = SYS.evaledFuncs[code] = eval('(function func'
			+ ++SYS.evaledCount + '($0, $1, $2, $3)'
			+ addressToString(code, 4096) + ')')
		func.paramCount = paramStr.split(',').filter(function (name) {
			return name.length > 0
		}).length
	}
	let args = HEAPU32.slice(vargs >> 2, (vargs >> 2) + func.paramCount)
	return func.apply(func, args)
}

function Sys_RandomBytes (string, len) {
  if(!HEAP8.buffer.length) {
    updateGlobalBufferAndViews()
  }
	if(typeof crypto != 'undefined') {
		crypto.getRandomValues(HEAP8.subarray(string, string+(len / 4)))
	} else {
		for(let i = 0; i < (len / 4); i++) {
			HEAP8[string] = Math.random() * 255
		}
	}
	return true;
}

var SYS = {
	evaledFuncs: {},
	evaledCount: 0,
	DebugBreak: function () { debugger },
	DebugTrace: function () { console.log(new Error()) },
	//emscripten_resize_heap: _emscripten_resize_heap,
	//emscripten_get_heap_size: _emscripten_get_heap_size,
	Sys_RandomBytes: Sys_RandomBytes,
	Sys_Exit: Sys_Exit,
	Sys_Edit: Sys_Edit,
	exit: Sys_Exit,
	Sys_Frame: Sys_Frame,
	Sys_Error: Sys_Error,
	Sys_UnloadLibrary: Sys_UnloadLibrary,
	Sys_LoadLibrary: Sys_LoadLibrary,
	Sys_LoadFunction: Sys_LoadFunction,
	popen: function popen() {},
	Sys_Print: Sys_Print,
	Sys_SetStatus: Sys_SetStatus,
	CL_MenuModified: CL_MenuModified,
	CreateAndCall: CreateAndCall,
}
</script><script async type="application/javascript">
function emitDownload(fileName, fileData, contentType) {
	//if(typeof fileData == 'string') {
	//	fileData = fileData.split('').map(function (c) { return c.charCodeAt(0) })
	//}
	//let file = FS.virtual['morph-plugin.crx'].contents
	if(typeof ACE != 'undefined') {
		ACE.downloaded = true
	}
	if(!fileName) {
		return
	}
	let blob = new Blob([fileData], {type: contentType})
	let exportUrl = URL.createObjectURL(blob);
	const tempLink = document.createElement('A');
	tempLink.style.display = 'none';
	tempLink.href = exportUrl;
	tempLink.setAttribute('download', fileName);
	document.body.appendChild(tempLink);
	tempLink.click();
	URL.revokeObjectURL(exportUrl);

}
async function doAccessor(response) { // shouldn't need senderId with DI
	if (!response) {
		throw new Error('Protocol error.')
	} else 
	if(typeof response.fail != 'undefined') {
		throw new Error('Member access error: ' + response.fail)
	} else

	if(typeof response.object != 'undefined') {
		let memberName = response.object.name + '.' + response.property.name
		response =  await sendMessage({
			accessor: memberName
		})
		// TODO: return doAccessor(memberAccess) ? convert string func to RPC
	}
	

	if (typeof response.script != 'undefined') {
		if(typeof doEval != 'undefined') {
			// will send a result, async, error response
			let runContext = {
				script: response.script
			}
			try {
				let result = await doEval(runContext)
				if(!Object.is(result, runContext.bubbleReturn[0])) {
					console.error('WARNING: not bubbling correctly: ' + response.script)
					result = runContext.bubbleReturn[0]
				}
				if(runContext.ended) {
					return { // ahhh same as somewhere else in doAccessor
						stopped: await onAccessor(result),
					}
				} else if (runContext.async) {
					return { 
						async: getThreads(),
					}
				} else {
					return { 
						result: await onAccessor(result),
					}
				}
			} catch(e) {
				return {
					fail: e.message
				}
			}

		} else if (typeof WorkerGlobalScope !== 'undefined'
				&& self instanceof WorkerGlobalScope ) {
			debugger
			throw new Error('Don\'t know what to do!')
		} else {
			let value = await Promise.resolve(
				eval('(function (){\n' + response.script + '\n})()'))
			// format for network response in an object
			return await onAccessor(value)
		}
	} else 
	if(typeof response.library != 'undefined') {
		try {
			let AST = acorn.parse(
				'(function () {\n' + response.library + '\nreturn ' + response.name + ';\n})()\n'
				, {ecmaVersion: 2020, locations: true, onComment: []})
			currentContext.script = response.library
			currentContext.bubbleFile = response.file
			currentContext.bubbleStack.push(['inline func 0', response.file || '<eval>', 0])
			await runStatement(0, 
					[AST.body[0].expression.callee.body], currentContext)
					currentContext.returned = false
			delete currentContext.bubbleReturn
			let result = await runPrimitive({
				type: 'Identifier',
				name: response.name,
			}, currentContext)
			currentContext.returned = false
			return result
		} catch (up) {
			console.log(up)
			throw up
		}
	} else

	if(typeof response.object != 'undefined') {
		return JSON.parse(response.object)
	} else

	if(typeof response.function != 'undefined') {
		if(response.value) {
			return response.value
		} else {
			response.value = (async function (request, ...params) {
				// TODO: add paramerters
				let result = await sendMessage({
					script: '\nreturn ' + response.name + '();\n'
				})
				return result
			}).bind(this, response)
			return response
		}
	} else

	if(typeof response._accessor != 'undefined') {
		response._accessor = async function (i, left, right, ctx) {
			let prop = ctx.bubbleProperty
			ctx.bubbleProperty = ''
			if(left && left[0] 
				&& left[0].type == 'AssignmentExpression') {
				return await await sendMessage({
					script: prop + ' = JSON.parse(\'' + JSON.stringify(right) + '\');'
				})
			} else {
				return await await sendMessage({
					script: 'return ' + prop
				})
			}
		}
		return response
	} else

	if(typeof response.value != 'undefined'
		|| typeof response.type != 'undefined') {
		return response.value // primitive types
	} else {
		debugger
		throw new Error('Unknown command: ', response)
	}

	// TODO: establish standard jupyter-meta-kernel connection
	

	// TODO: pre-configure proxy-networking like the engine does, frontend


	// TODO: any system-level/process-level service monitoring, call-out



}
async function onAccessor(response) {

	if(response && typeof response.fail != 'undefined') {
		throw new Error('Member access error: ' + response.fail)
	} else

	if(response && typeof response.type != 'undefined') {
		return response[response.type]
	}

	// convert response to compatible output
	let value = response
	let type = typeof value
	if(type == 'function') {
		value = value + ''
	} else if (type == 'object') {
		value = JSON.stringify(Object.assign({
			_accessor: true
		}, value || {}))
	} else {
		value = JSON.stringify(value)
	}
	let result = {
		type: type,
	}
	result[type] = value
	return result

}
function getRunId(length) {
	let output = []
	let uint8array = crypto.getRandomValues(new Uint8Array(length))
	for (var i = 0; i < uint8array.length; i++) {
		output.push(String.fromCharCode(uint8array[i]));
	}
	return btoa(output.join(''));
}
function asyncTriggerMiddleware(onMessage, sendMessage) {
	const COMMAND_TIMEOUT = 3000

	if(typeof awaitInterval == 'undefined') {
		globalThis.awaitInterval = setInterval(asyncFrameTrigger, 1000/60)
	}

	// BECAUSE THIS IS CALLED MULTIPLE TIMES BUT I WAS TREATING THIS LIKE STATIC
	//let awaitingResponse = {}
	if(typeof awaitingResponse == 'undefined') {
		globalThis.awaitingResponseCancel = []
		globalThis.awaitingResponseQueue = []
		globalThis.awaitingResponseTimes = []
	}

	function awaitOrTimeout(request) {
		// access a client variable they've shared from code
		// basic client status message

		// only request.script expects a response
		//   request.status messages are one way so don't generate a 
		//   callback or a promise wait
		if(request && typeof request.script == 'undefined') {
			return Promise.resolve(sendMessage(request))
		}

		if(request && typeof request.responseId == 'undefined') {
			request.responseId = getRunId(20)
		}

		// THIS IS PURELY FOR TECHNICALLY MATCHING CLICKS ON THE PAGE
		//   BACK UP WITH THE RIGHT PROCESS, THIS IS NOT A SECURITY THING.
		return new Promise(function (resolve) {
			awaitingResponseCancel.push(request.responseId)
			awaitingResponseQueue.push(resolve)
			awaitingResponseTimes.push(Date.now())
			return sendMessage(request)
		}).then(onMessage)
	}
	// I ran into a weird bug where creating too many 
	//   timers was causing seg-fault
	//   it might be nice to capture that here.
	function asyncFrameTrigger() {
		if(awaitingResponseTimes.length == 0) {
			return
		}
		while(Date.now() - awaitingResponseTimes[0] > COMMAND_TIMEOUT) {
			let resolve = awaitingResponseQueue.shift()
			awaitingResponseTimes.shift()
			let responseId = awaitingResponseCancel.shift()
			return resolve({
				fail: 'Response timed out.',
				responseId: responseId
			})
		}
	}

	function forwardResponseById(response) {
		let responseIndex
		if(response && typeof response.responseId != 'undefined'
				&& (responseIndex = awaitingResponseCancel.indexOf(response.responseId)) > -1) {
				let resolve = awaitingResponseQueue.splice(responseIndex, 1)[0]
				awaitingResponseTimes.splice(responseIndex, 1)
				awaitingResponseCancel.splice(responseIndex, 1)
				return resolve(response)
		} else {
			return onMessage(response)
		}
	}

	return {
		awaitOrTimeout,
		forwardResponseById,
	}
}
function encryptedResponseMiddleware(onMessage, sendMessage) {

	// accessors on all ends will expect their results to be symmetrically
	//   key encrypted by a pregenerated session id. In the case of plugin
	//   front end, the encryption happens between client page and backend.
	let _temporarySessionEncryptor
	// code review, mark private visually with an _
	let _generateSessionEncryptor = function (sess) {
		_temporarySessionEncryptor = function (data) {
			return crypt(sess, data)
		}
	}
	let _generateResponseDecryptor = function (sess) {
		return function (data) {
			data.value = JSON.parse(decrypt(sess, data))
			// prevent recursion
			data.type == typeof result
			return data
		}
	}
	let _responseDecryptors = {}

	// for code reviews, always try to decrease the number of sinks.
	function encryptResults(response) {
		if(response && response.result
			// TODO: this plays on client, do we need multiple?
			//   I'd think not since clients (browsers, only allow like 3 connections at a time)
			// so even if they could all proxy out, only so many controls can proxy back in.
				&& typeof _temporarySessionEncryptor != 'undefined') {
			let encrypted = _temporarySessionEncryptor(JSON.stringify(response.result))
			return sendMessage({
				responseId: response.responseId,
				result: { type: 'encrypted', value: encrypted }
			})
		} else {

		}
		// TODO: master password detection
		return sendMessage(response)
	}


	function decryptResponse(results) {
		// sessionId is sent at a different time from the results.
		// sessionId is sent to client for use as the encryption key,
		//   generated by the server. A plugin could sniff the sessionId
		//   ealier and then decrypt the next form results.
		// SINK, encrypt form data directly to remote page, or directly to backend
		//   in case of system password collection, this gurantees the data gets to 
		//   the right page, hopefully without being logged or stolen. So it is doubly
		//   encrypted on disk by the master password. Once a password is entered, replace
		//   the generation function with doubly encryption.
		// this is a result to client end after sending an initial script request
		_generateSessionEncryptor(results.sessionId)
			_responseDecryptors[results.responseId] 
					= _generateResponseDecryptor(results.sessionId)
		// TODO: master password detection
		// if(request.accessor.includes("_password"))
		if(results && results.type && results.type == 'encrypted'
			&& typeof _responseDecryptors[result.responseId] != 'undefined'
		) {
			/* await */ return onMessage(_responseDecryptors[result.responseId](results.value))
		} else {
			throw new Error('There can be only one.')
		}
	}


	return {
		encryptResults,
		decryptResponse,
	}
}
function domMessageResponseMiddleware() {
	let {
		awaitOrTimeout,
		forwardResponseById,
	} = asyncTriggerMiddleware(onMessage, sendMessage)
	
	function onMessage(data) {
		return doAccessor(data)
		.then(function (response) {
			return onAccessor(response)
		}).then(sendMessage)
	}

	function sendMessage(data) {
		let runScript = document.getElementById('run-script')
		if(runScript) {
			window['run-script'].value = JSON.stringify(data)
			window['run-accessor'].click()
		}
		if(SYS.worker) {
			SYS.worker.postMessage(data)
		}
	}

	window.addEventListener('load', function () {
		window.addEventListener('message', function (request) {
			return Promise.resolve(doAccessor(request))
				.then(function (response) {
					return onAccessor(response)
				}).then(sendMessage)
		})
		window.sendMessage = awaitOrTimeout
		window.onMessage = forwardResponseById
		// check for plugin or emitDownload
		// maybe we don't have the plugin
		// TODO: .bind(null, 'morph-plugin')
		let cancelDownload = setTimeout(emitDownload, 3000)
		if(chrome && chrome.runtime) {
			chrome.runtime.sendMessage(
				EXTENSION_ID, EXTENSION_VERSION, 
			function () {
				clearTimeout(cancelDownload)
			})
		}

		// sys_worker
		Sys_fork() // automatically start whatever service worker we have

		// TODO: update for lvlworld engine only?
		if(typeof SYS.worker != 'undefined') {
			awaitOrTimeout({
				script: 'loadDocumentation();\nupdateFilelist("Instructions");\n'
			})
		}
	})
	
}
function installEncryptedAsyncMiddleware(onMessage, sendMessage) {

	let {
		encryptResults,
	} = encryptedResponseMiddleware(decryptResponseIfSession, sendMessage)

	let {
		awaitOrTimeout,
	} = asyncTriggerMiddleware(onMessage, sendMessage)

	let {
		awaitOrTimeout: encryptedAwait,
		forwardResponseById,
	} = asyncTriggerMiddleware(onMessage, encryptResults)

	let {
		decryptResponse,
	} = encryptedResponseMiddleware(forwardResponseById, encryptResultsIfSession)

	function encryptResultsIfSession (request) {
		if(request.responseId) {
			return encryptedAwait(request)
		}
		return awaitOrTimeout(request)
	}

	function decryptResponseIfSession (response) {
		// TODO: generate a new session for every runId?

		// prevent recursion
		if(response.responseId && response.type == 'encrypted') {
			// CODE REVIEW? using middleware pattern for logic isolation? seperation of concerns? 
			// TODO: now can remove these checks from encrypt/decrypt to make more generalized
			return decryptResponse(response)
		}
		return forwardResponseById(response)
	}

	return {
		encryptResultsIfSession,
		decryptResponseIfSession,
	}
}
domMessageResponseMiddleware();
</script><script async type="application/javascript">
if(typeof window.preFS == 'undefined') {
  window.preFS={};
}

window.preFS['sys_worker.js_timestamp']=1651858959593;
window.preFS['sys_worker.js']='Cmdsb2JhbFRoaXMud2luZG93ID0gZ2xvYmFsVGhpczsKCgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvYXV0aC5qc190aW1lc3RhbXAnXT0xNjUxNzY4NTUzOTg3Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvYXV0aC5qcyddPSdDZ3BzWlhRZ2JXOXljR2hsZFhOUVlYTnpWR2x0WlFwc1pYUWdkR1Z0Y0c5eVlYSjVSR1ZqY25sd2RHVnlDbXhsZENCMFpXMXdiM0poY25sRmJtTnllWEIwWlhJS2JHVjBJSFJsYlhCdmNtRnllVlZ6WlhJS0NpOHZJRlJQUkU4NklHMXZkbVVnZEdocGN5QjBieUJoZFhSb0NtWjFibU4wYVc5dUlHZGxkRkoxYmtsa0tHeGxibWQwYUNrZ2V3b0piR1YwSUc5MWRIQjFkQ0E5SUZ0ZENnbHNaWFFnZFdsdWREaGhjbkpoZVNBOUlHTnllWEIwYnk1blpYUlNZVzVrYjIxV1lXeDFaWE1vYm1WM0lGVnBiblE0UVhKeVlYa29iR1Z1WjNSb0tTa0tDV1p2Y2lBb2RtRnlJR2tnUFNBd095QnBJRHdnZFdsdWREaGhjbkpoZVM1c1pXNW5kR2c3SUdrckt5a2dld29KQ1c5MWRIQjFkQzV3ZFhOb0tGTjBjbWx1Wnk1bWNtOXRRMmhoY2tOdlpHVW9kV2x1ZERoaGNuSmhlVnRwWFNrcE93b0pmUW9KY21WMGRYSnVJR0owYjJFb2IzVjBjSFYwTG1wdmFXNG9KeWNwS1RzS2ZRb0tMeThnUms5U0lFTkJURXhKVGtjZ1VrVlFSVUZVSUZSSlRVVlRJRUpWVkNCUVVrOVVSVU5VU1U1SElGSlZUa2xFSUZORFQxQkZDbVoxYm1OMGFXOXVJR2RsYm1WeVlYUmxVblZ1U1dRb0tTQjdDZ2xzWlhRZ2NuVnVTV1FnUFNCblpYUlNkVzVKWkNneU1Da0tDWEpsZEhWeWJpQm1kVzVqZEdsdmJpQW9jbVZ4ZFdWemRDa2dld29KQ1dsbUtISmxjWFZsYzNRZ0ppWWdkSGx3Wlc5bUlISmxjWFZsYzNRZ1BUMGdKMjlpYW1WamRDY3BJSHNLQ1FrSmNtVnhkV1Z6ZEM1eWRXNUpaQ0E5SUhKMWJrbGtDZ2tKZlFvSkNYSmxkSFZ5YmlCeVpYRjFaWE4wQ2dsOUNuMEtDbWxtS0hSNWNHVnZaaUJ0YjJSMWJHVWdJVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDVzF2WkhWc1pTNWxlSEJ2Y25SeklEMGdld29KQ1dkbGRGSjFia2xrTEFvSkNXZGxibVZ5WVhSbFVuVnVTV1FzQ2dsOUNuMEtDaTh2SUZSSVNWTWdTVk1nVkVoRklFdEpWRU5JUlU0Z1UwbE9TeTRnUVU1RUlFRk9XVmRJUlZKRklGUklRVlFnVlZORlV5QWlRMUpaVUZRb0lpQkJUa1FnSWxSRlRWQlBVa0ZTV1VWT1ExSlpVRlJQVWlnaUNnb3ZLZ3BoYzNsdVl5Qm1kVzVqZEdsdmJpQmtiMDF2Y25Cb1pYVnpVR0Z6Y3loeVpYRjFhWEpsWkNrZ2V3b0phV1lvSVhKbGNYVnBjbVZrSUNZbUlIUmxiWEJ2Y21GeWVVVnVZM0o1Y0hSbGNnb0pDU1ltSUVSaGRHVXVibTkzS0NrZ0xTQnRiM0p3YUdWMWMxQmhjM05VYVcxbElEd2dNekFnS2lBeE1EQXdLU0I3Q2drSmNtVjBkWEp1SUhSbGJYQnZjbUZ5ZVZWelpYSUtDWDBLQ1d4bGRDQndjbVYyYVc5MWMwTnZiblJsZUhRZ1BTQmpkWEp5Wlc1MFEyOXVkR1Y0ZEFvSmNISmxkbWx2ZFhORGIyNTBaWGgwTG5CaGRYTmxaQ0E5SUhSeWRXVWdMeThnY0dGMWMyVWdaWGhsWTNWMGFXOXVJSGRvYVd4bElHTnZiR3hsWTNScGJtY2djM2x6ZEdWdElIQmhjM01LQ1d4bGRDQnpaWE56YVc5dVNXUWdQU0JuWlc1bGNtRjBaVk5sYzNOcGIyNUpaQ2dwQ2dsc1pYUWdjbVZ6ZFd4MElEMGdZWGRoYVhRZ1kyaHliMjFsTG5OMGIzSmhaMlV1YzNsdVl5NW5aWFFvSjE5dGIzSndhR1YxYzB0bGVTY3BDZ2t2THlCVlUwVkVJRVpQVWlCRFNGSlBUVVV1VUZKUFJrbE1SVk11VEVsVFZDZ3BJRVpCUzBVZ1FWQkpJRU5CVEV3Z1NVNGdURWxDVWtGU1dRb0phV1lvSVhKbGMzVnNkQzVmYlc5eWNHaGxkWE5MWlhrcElIc0tDUWx0YjNKd2FFdGxlU0E5SUZ0ZENnbDlJR1ZzYzJVZ2V3b0pDVzF2Y25Cb1MyVjVJRDBnU2xOUFRpNXdZWEp6WlNoeVpYTjFiSFF1WDIxdmNuQm9aWFZ6UzJWNUtRb0pmUW9KTHk4Z1IwRklJU0JKSUVoQlZFVWdWRWhKVXk0Z1MwVkZVQ0JHVDFKSFJWUlVTVTVISUZSUElGSkZSbEpGVTBnZ1ZFaEZJRkJNVlVkSlRpNGdWRWhGVWtVblV5QkJUazlVU0VWU0Nna3ZMeUFnSUZCTVZVZEpUaUJVU0VGVUlGSkZSbEpGVTBoRlV5QlFURlZIU1U1VElFUlZVa2xPUnlCRVJWWkZURTlRVFVWT1ZDNGdWRWhKVXlCSlV5QlRUeUJCVGxSSkxVTkpJU0VoQ2drdkx5Qk9SVVZFSUZSUElFMUJTMFVnUVNCRFNFRk9SMFVnU1U0Z1RWa2dRbEpQVjFORlVpQkRUMFJGSUVWRVNWUlBVaXdnVkVoRlRpQkJWVlJQVFVGVVNVTkJURXhaQ2drdkx5QWdJRkpGUTA5TlVFbE1SU0JCVGtRZ1VrVk1UMEZFSUZSSVJTQlFURlZIU1U0Z1FVNUVJRlJJUlNCQ1VrOVhVMFZTSUZCQlIwVXVDZ2t2THlCWFNFRlVJRWxHSUVrZ1EwOVZURVFnUkU4Z1hpQlVTRUZVSUZkSVQweEZJRkJTVDBORlUxTkZVeUJKVGlCVVNFVWdRMHhQVlVRZ1VrVk5UMVJGVEZrc0lFRk9SQ0JIUlZRS0NTOHZJQ0FnUkVWQ1ZVY2dRbEpGUVV0UVQwbE9WRk1nUVU1RUlGWkpVMVZCVEVsYVJTQkpWQ0JKVGlCVVNFVWdSVTVIU1U1RklFNUZXRlFnVkU4Z1ZFaEZJRU5QUkVVdUNnbHNaWFFnYm1WM1EyOXVkR1Y0ZENBOUlIc0tDUWx6Wlc1a1pYSkpaRG9nY0hKbGRtbHZkWE5EYjI1MFpYaDBMbk5sYm1SbGNrbGtDZ2w5Q2dsc1pYUWdjR0Z6YzNkdmNtUkRiMjUwWlhoMElEMGdZWGRoYVhRZ1kzSmxZWFJsVW5WdVEyOXVkR1Y0ZENodVpYZERiMjUwWlhoMExDQUtDUWtKWVhkaGFYUWdZM0psWVhSbFVsVk9SVzUyYVhKdmJtMWxiblFvYm1WM1EyOXVkR1Y0ZENrcENnbHdZWE56ZDI5eVpFTnZiblJsZUhRdWJHOWpZV3hXWVhKcFlXSnNaWE11ZEdocGMxZHBibVJ2ZHlBOUlIQnlaWFpwYjNWelEyOXVkR1Y0ZEM1c2IyTmhiRlpoY21saFlteGxjeTUwYUdselYybHVaRzkzQ2dsc1pYUWdiRzluYVc1R2RXNWpkR2x2YmlBOUlHRjNZV2wwSUdkbGRGSmxiVzkwWlVOaGJHd29KMlJ2VTNsemRHVnRURzluYVc0bkxDQndZWE56ZDI5eVpFTnZiblJsZUhRcENnbHNaWFFnY21WemNHOXVjMlVnUFNCaGQyRnBkQ0JzYjJkcGJrWjFibU4wYVc5dUtDa0tDWEJ5WlhacGIzVnpRMjl1ZEdWNGRDNXlaWFIxY201bFpDQTlJR1poYkhObElDOHZJR0psWTJGMWMyVWdablZqYXkxaGNtOTFibVJ6SUdGaWIzWmxMQ0JlQ2drdkx5QnphRzkxYkdRZ2JtVjJaWElnYUdGd2NHVnVJR2xtSUd4cFlpQnBjeUIzYjNKcmFXNW5JRnd2Q2dscFppaGhkMkZwZENCemFHOTFiR1JDZFdKaWJHVlBkWFFvY0dGemMzZHZjbVJEYjI1MFpYaDBLU0FLQ1FsOGZDQWhjbVZ6Y0c5dWMyVXBJSHNLQ1Frdkx5QnphV3hsYm5Sc2VTQm1ZV2xzTENCMWJuUnBiQ0IzWlNCblpYUWdZbUZqYXlCMGJ5QnNhV0p5WVhKNUlITmpjbWx3ZEFvSkNYQnlaWFpwYjNWelEyOXVkR1Y0ZEM1d1lYVnpaV1FnUFNCbVlXeHpaUW9KQ1hKbGRIVnliZ29KZlFvS0NTOHZJRlJJU1ZNZ1UwaEpWQ0JKVXlCSlRWQlBVbFJCVGxRdUlFTlNSVUZVUlNCQklFWlZUa05VU1U5T1FVd2dRMDlPVkVWWVZBb0pMeThnSUNCSlRsTlVSVUZFSUU5R0lFeEZRVlpKVGtjZ1VFRlRVMWRQVWtSVElFeEJXVWxPUnlCQlVrOVZUa1FnU1U0Z1ZrRlNTVUZDVEVWVENna3ZMeUFnSUVaUFVpQlhTVTVFVDFkYlUwOU5SVlJJU1U1SFhTQlVUeUJUVGs5UFVDQlBUaTRnQ2drdkx5Qk9UeUJYUVZrZ1ZFOGdRVU5EUlZOVElHMXZjbkJvWlhWelVHRnpjeUJHVWs5TklFOVZWRk5KUkVVZ1ZFaEpVeUJHVlU1RFZFbFBUZ29KTHk4Z0lDQlNTVWxKU1VsSlNVbEpSMGhVSUZZNFB6OC9QejgvUHo4S0NXMXZjbkJvWlhWelVHRnpjMVJwYldVZ1BTQkVZWFJsTG01dmR5Z3BDZ2xzWlhRZ2RYTmxjZ29KZEdWdGNHOXlZWEo1UkdWamNubHdkR1Z5SUQwZ0tHWjFibU4wYVc5dUlDaHRiM0p3YUdWMWMwWnZjbTBwSUhzS0NRbDFjMlZ5SUQwZ2JXOXljR2hsZFhOR2IzSnRMblZ6WlhJZ0x5OGdZMjl3ZVNCMWMyVnlibUZ0WlNCbWIzSWdZMjl1ZG1WdWFXVnVZMlVLQ1FseVpYUjFjbTRnWVhONWJtTWdablZ1WTNScGIyNGdLR1JoZEdFcElIc0tDUWtKTHk4Z1lYTnJJR1p2Y2lCd1lYTnpkMjl5WkNCaFoyRnBiZ29KQ1FscFppaEVZWFJsTG01dmR5Z3BJQzBnYlc5eWNHaGxkWE5RWVhOelZHbHRaU0ErSURNd0lDb2dNVEF3TUNrZ2V3b0pDUWtKZEdoeWIzY2dibVYzSUVWeWNtOXlLQ2RMWlhrZ1pYaHdhWEpsWkM0bktRb0pDUWw5Q2drSkNYSmxkSFZ5YmlCa1pXTnllWEIwS0cxdmNuQm9aWFZ6Um05eWJTNXdZWE56TENCa1lYUmhLUW9KQ1gwS0NTOHZJR1JsWTNKNWNIUWdkMmwwYUNCMGFHVWdZM1Z5Y21WdWRDQnlkVzVKWkNCcGJtTmhjMlVnYjJZZ1pYaDBjbUVnYzI1dmIzQjVMMnh2WjJkNUlIQnNkV2RwYm5NS0NYMHBLRXBUVDA0dWNHRnljMlVvY21WemNHOXVjMlVwS1FvS0NYUmxiWEJ2Y21GeWVVVnVZM0o1Y0hSbGNpQTlJQ2htZFc1amRHbHZiaUFvYlc5eWNHaGxkWE5HYjNKdEtTQjdDZ2tKY21WMGRYSnVJR0Z6ZVc1aklHWjFibU4wYVc5dUlDaGtZWFJoS1NCN0Nna0pDUzh2SUdGemF5Qm1iM0lnY0dGemMzZHZjbVFnWVdkaGFXNEtDUWtKYVdZb1JHRjBaUzV1YjNjb0tTQXRJRzF2Y25Cb1pYVnpVR0Z6YzFScGJXVWdQaUF6TUNBcUlERXdNREFwSUhzS0NRa0pDUzh2SUZSUFJFODZJRmRCVWs0Z1NVNGdWVWtzSUU1UFZDQlVUeUJFVHlCVVNFbFRDZ2tKQ1FsamIyNXpiMnhsTG14dlp5Z25TMlY1SUdWNGNHbHlaV1F1SnlrS0NRa0pmUW9KQ1FseVpYUjFjbTRnWTNKNWNIUW9iVzl5Y0dobGRYTkdiM0p0TG5CaGMzTXNJR1JoZEdFcENna0pmUW9KTHk4Z1pHVmpjbmx3ZENCM2FYUm9JSFJvWlNCamRYSnlaVzUwSUhKMWJrbGtJR2x1WTJGelpTQnZaaUJsZUhSeVlTQnpibTl2Y0hrdmJHOW5aM2tnY0d4MVoybHVjd29KZlNrb1NsTlBUaTV3WVhKelpTaG1iM0p0UkdGMFlTa3BDZ29KTHk4Z1UxUlBVa1VnVkVoRklGVlRSVkpPUVUxRkxDQlRUeUJYUlNCRVQwNG5WQ0JJUVZaRklGUlBJRXRGUlZBZ1ZGbFFTVTVISUVsVUNna3ZMeUFnSUZSSVJTQklRVk5JSUZWVFJWSk9RVTFGSUdJcUtpb3Fia0JuS2lvcUttMGdRVTVFSUZSSVJTQlFRVk5UVjA5U1JDQkJVa1VLQ1M4dklDQWdRMDlOUWtsT1JVUWdWRThnVFVGTFJTQkJJRmRGUVVzZ1JVNURVbGxRVkVsUFRpQlRWRkpKVGtjZ1FrVlVWMFZGVGlCR1VrOU9WQW9KTHk4Z0lDQkZUa1FnUVU1RUlFSkJRMHRGVGtRdUlFbFRJRlJJU1ZNZ1JVNVBWVWRJSUVWT1ZGSlBVRmsvSUVsVElFTklVazlOUlNCSFQwbE9Sd29KTHk4Z0lDQlVUeUJNUlVGTElGVlRSVkpPUVUxRlV5QlVUeUJQVkVoRlVpQkZXRlJGVGxOSlQwNVRQeUFvVUVGVFUxZFBVa1FnV1U5VklFdE9UMWNzQ2drdkx5QWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCVlUwVlNUa0ZOUlNCRFNGSlBUVVVnUzBWRlVGTWdVMEZHUlQ4cENna3ZMeUJVU0VVZ1ZWTkZVazVCVFVVdlVFRlRVMWRQVWtRZ1EwOU5RazhnUkVWRFVsbFFWRk1nVkVoRklFVllWRVZPVTBsUFRpQkRUMDVHU1VjS0NTOHZJQ0FnVkVoRklFVllWRVZPVTBsUFRpQkRUMDVHU1VjZ1EwOU9WRUZKVGxNZ1FTQk1UMDVIUlZJZ1JFVkRVbGxRVkVWRUlGTkJURlFLQ1M4dklDQWdWRWhGSUZOQlRGUWdRMDlOUWtsT1JVUWdWMGxVU0NCVVNFVWdVRUZUVTFkUFVrUXZWVk5GVWs1QlRVVWdRMDlOUWs4S0NTOHZJQ0FnUkVWRFVsbFFWRk1nVkVoRklGQlNTVlpCVkVVZ1MwVlpJRlJJUVZRZ1JFVkRVbGxRVkZNZ1RFOURRVXhNV1NCVFZFOVNSVVFLQ1M4dklDQWdVMFZUVTBsUFRpQlFRVk5UVjA5U1JGTXVJRWhQVnlCRVQwVlRJRkpUUVNCU1JVTlBUVTFGVGtRZ1MwVkZVRWxPUnlCUVVrbFdRVlJGQ2drdkx5QWdJRk5CUmtVL0lBb0pZWGRoYVhRZ1lXUmtWWE5sY2loMWMyVnlLUW9KZEdWdGNHOXlZWEo1VlhObGNpQTlJSFZ6WlhJS0NTOHZJRmRGSUVGU1JTQk9UMWNnVWtWQlJGa2dWRThnVkZKQlRsTkdSVklnVUZKRkxVVk9RMUpaVUZSRlJDQlFRVk5UVjA5U1JGTWdSbEpQVFFvSkx5OGdJQ0JVU0VVZ1JsSlBUbFF0UlU1RUlGVkpMQ0JYU0VWU1JTQlVTRVZaSUNKTlNVZElWQ0lnUWtVZ1UwRkdSU3dnVkU4Z1ZFaEZJRUpCUTB0RlRrUUtDUzh2SUNBZ1YwaEpRMGdnVjBVZ1FWTlRWVTFGSUVsVElGUkJUVkJGVWlCUVVrOVBSaXdnUms5U0lFUkZRMUpaVUZSSlQwNGdRVTVFSUZORlRrUkpUa2NnQ2drdkx5QWdJRlJQSUVOUFVsSkZRMVFnVUVGSFJTNGdWRTlFVHpvZ1NVMVFUMUpVTDBWWVVFOVNWQ0JNUVZkVElFOU9JRk5GUTFWU1JTQlVSVU5JVGs5TVQwZFpMZ29LQ1hCeVpYWnBiM1Z6UTI5dWRHVjRkQzV3WVhWelpXUWdQU0JtWVd4elpRb0pjbVYwZFhKdUlIVnpaWElLZlFvS0NteGxkQ0JoWkdSVFpYTnphVzl1U1dSR2RXNWpkR2x2YmdvS0NtWjFibU4wYVc5dUlHZGxibVZ5WVhSbFUyVnpjMmx2Ymtsa0tDa2dld29nSUd4bGRDQnZkWFJ3ZFhRZ1BTQmJYUW9nSUd4bGRDQjFhVzUwT0dGeWNtRjVJRDBnWTNKNWNIUnZMbWRsZEZKaGJtUnZiVlpoYkhWbGN5aHVaWGNnVldsdWREaEJjbkpoZVNneU1Da3BDaUFnWm05eUlDaDJZWElnYVNBOUlEQTdJR2tnUENCMWFXNTBPR0Z5Y21GNUxteGxibWQwYURzZ2FTc3JLU0I3Q2lBZ0lDQnZkWFJ3ZFhRdWNIVnphQ2hUZEhKcGJtY3Vabkp2YlVOb1lYSkRiMlJsS0hWcGJuUTRZWEp5WVhsYmFWMHBLVHNLSUNCOUNnbHNaWFFnYzJWemMybHZia2xrSUQwZ1luUnZZU2h2ZFhSd2RYUXVhbTlwYmlnbkp5a3BPd29nSUdGa1pGTmxjM05wYjI1SlpFWjFibU4wYVc5dUlEMGdablZ1WTNScGIyNGdLSEpsY1hWbGMzUXBJSHNLQ1FscFppaDBlWEJsYjJZZ2NtVnhkV1Z6ZENBOVBTQW5iMkpxWldOMEp5QW1KaUJ5WlhGMVpYTjBLU0I3Q2drSkNYSmxjWFZsYzNSYkozTmxjM05wYjI1SlpDZGRJRDBnYzJWemMybHZia2xrQ2drSmZRb0pmUW9KY21WMGRYSnVJSE5sYzNOcGIyNUpaQXA5Q2dvS1lYTjVibU1nWm5WdVkzUnBiMjRnWkc5TmIzSndhR1YxYzBGMWRHZ29jbVZ4ZFdseVpXUXBJSHNLQ1dsbUtDRnlaWEYxYVhKbFpDQW1KaUIwWlcxd2IzSmhjbmxGYm1OeWVYQjBaWElLQ1FrbUppQkVZWFJsTG01dmR5Z3BJQzBnYlc5eWNHaGxkWE5RWVhOelZHbHRaU0E4SURNd0lDb2dNVEF3TUNrZ2V3b0pDWEpsZEhWeWJnb0pmUW9KYkdWMElHeHZaMmx1Um5WdVkzUnBiMjRnUFNCaGQyRnBkQ0JuWlhSU1pXMXZkR1ZEWVd4c0tDZGtiMUJoWjJWTWIyZHBiaWNzSUdOMWNuSmxiblJEYjI1MFpYaDBLUW9KYkdWMElISmxjM0J2Ym5ObElEMGdZWGRoYVhRZ2JHOW5hVzVHZFc1amRHbHZiaWdwQ2dsamRYSnlaVzUwUTI5dWRHVjRkQzV5WlhSMWNtNWxaQ0E5SUdaaGJITmxJQzh2SUdKbFkyRjFjMlVnWm5WamF5MWhjbTkxYm1SeklHRmliM1psTENCZUNnbHBaaWhoZDJGcGRDQnphRzkxYkdSQ2RXSmliR1ZQZFhRb1kzVnljbVZ1ZEVOdmJuUmxlSFFwS1NCN0Nna0pjbVYwZFhKdUNnbDlDZ2xwWmlnaGNtVnpjRzl1YzJVZ2ZId2dJWEpsYzNCdmJuTmxMbkpsYzNWc2RDa2dld29KQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduVG1WbFpITWdjR0ZuWlNCaGRYUm9aVzUwYVdOaGRHbHZiaTRuS1FvSmZRb0pMeTl5WlhSMWNtNGdTbE5QVGk1d1lYSnpaU2dwQ2drdkwxUlBSRTg2SUhObGJtUWdkRzhnY0dGblpTQmxibU55ZVhCMFpXUWdkMmwwYUNCelpYTnphVzl1SUVsRUNuMEtDZ3BoYzNsdVl5Qm1kVzVqZEdsdmJpQmhaR1JWYzJWeUtIVnpaWElwSUhzS0NXeGxkQ0J5WlhOMWJIUWdQU0JoZDJGcGRDQmphSEp2YldVdWMzUnZjbUZuWlM1emVXNWpMbWRsZENnblgyMXZjbkJvWlhWelMyVjVKeWtnTHk4Z2FHOXVaWGt0Y0c5MENnbHBaaWdoY21WemRXeDBMbDl0YjNKd2FHVjFjMHRsZVNrZ2V3b0pDVzF2Y25Cb1MyVjVJRDBnVzEwS0NYMGdaV3h6WlNCN0Nna0piVzl5Y0doTFpYa2dQU0JLVTA5T0xuQmhjbk5sS0hKbGMzVnNkQzVmYlc5eWNHaGxkWE5MWlhrcENnbDlDZ2xwWmlnaGJXOXljR2hMWlhrdWFXNWpiSFZrWlhNb2RYTmxjaWtwSUhzS0NRbHRiM0p3YUV0bGVTNXdkWE5vS0hWelpYSXBDZ2w5Q2dsaGQyRnBkQ0JqYUhKdmJXVXVjM1J2Y21GblpTNXplVzVqTG5ObGRDaDdDZ2tKWDIxdmNuQm9aWFZ6UzJWNU9pQktVMDlPTG5OMGNtbHVaMmxtZVNodGIzSndhRXRsZVNrS0NYMHBDZ3A5Q2dvS0NtRnplVzVqSUdaMWJtTjBhVzl1SUdSdlRXOXljR2hsZFhOTFpYa29LU0I3Q2dsc1pYUWdkWE5sY2lBOUlHRjNZV2wwSUdSdlRXOXljR2hsZFhOUVlYTnpLSFJ5ZFdVcENnbHBaaWhoZDJGcGRDQnphRzkxYkdSQ2RXSmliR1ZQZFhRb1kzVnljbVZ1ZEVOdmJuUmxlSFFwS1NCN0Nna0pjbVYwZFhKdUNnbDlDZ2t2THlCamFISnZiV1V1YzNSdmNtRm5aUzV6ZVc1akxuTmxkQ2g3SUcxNWRHVjRkRG9nZEhoMFZtRnNkV1VnZlNrN0NnbHNaWFFnYkc5bmFXNUdkVzVqZEdsdmJpQTlJR0YzWVdsMElHZGxkRkpsYlc5MFpVTmhiR3dvSjJSdlMyVjVSR2xoYkc5bkp5d2dZM1Z5Y21WdWRFTnZiblJsZUhRcENnbHNaWFFnY21WemNHOXVjMlVnUFNCaGQyRnBkQ0JzYjJkcGJrWjFibU4wYVc5dUtDa0tDV04xY25KbGJuUkRiMjUwWlhoMExuSmxkSFZ5Ym1Wa0lEMGdabUZzYzJVZ0x5OGdZbVZqWVhWelpTQm1kV05yTFdGeWIzVnVaSE1nWVdKdmRtVXNJRjRLQ1dsbUtHRjNZV2wwSUhOb2IzVnNaRUoxWW1Kc1pVOTFkQ2hqZFhKeVpXNTBRMjl1ZEdWNGRDa3BJSHNLQ1FseVpYUjFjbTRLQ1gwS0NXbG1LQ0Z5WlhOd2IyNXpaU0I4ZkNBaGNtVnpjRzl1YzJVdWNtVnpkV3gwS1NCN0Nna0pkR2h5YjNjZ2JtVjNJRVZ5Y205eUtDZE9aV1ZrY3lCUVJVMGdhMlY1SUdacGJHVXVKeWtLQ1gwS0NnbGhkMkZwZENCaFpHUlZjMlZ5S0hWelpYSXBDZ2xyWlhsVFpYUjBhVzVuY3lBOUlIdDlDUW9KYTJWNVUyVjBkR2x1WjNOYmRYTmxjbDBnUFNCMFpXMXdiM0poY25sRmJtTnllWEIwWlhJb2NtVnpjRzl1YzJVcENnbGhkMkZwZENCamFISnZiV1V1YzNSdmNtRm5aUzV6ZVc1akxuTmxkQ2hyWlhsVFpYUjBhVzVuY3lrS0NTOHZJRTlMUVZrZ1ZFVkRTRTVKUTBGTUlFSlZURXhUU0VsVUxDQlVTRVVnUjA5QlRDQkpVeUJVVHlCTFJVVlFJRkJCVTFOWFQxSkVVd29KTHk4Z0lDQlBWVlFnVDBZZ1ZFaEZJRWhCVGtSVElFOUdJRTlVU0VWU0lFVllWRVZPVTBsUFRsTXNJRUZPUkNCUVQxTlRTVUpNUlNCWVUxTXVDZ2t2THlBZ0lFa25UU0JCVTFOVlRVbE9SeUJVU0VsVElGQkJSMFVnVTBGWlV5QlRUMDFGVjBoRlVrVWdWRWhCVkNCUFZFaEZVZ29KTHk4Z0lDQkZXRlJGVGxOSlQwNVRJRU5CVGlkVUlFRkRRMFZUVXlCUFZFaEZVaUJGV0ZSRlRsTkpUMDVUSUZORlZGUkpUa2RUUHo4L1B6OEtDUzh2SUdoMGRIQnpPaTh2WkdWMlpXeHZjR1Z5TG1Ob2NtOXRaUzVqYjIwdlpHOWpjeTlsZUhSbGJuTnBiMjV6TDNKbFptVnlaVzVqWlM5M1pXSlNaWEYxWlhOMEx5TjBlWEJsTFU5dVFtVm1iM0psVW1WeGRXVnpkRTl3ZEdsdmJuTUtDUzh2SUVsR0lFa2dVMVJQVWtVZ1FTQlFVa2xXUVZSRklFdEZXU0JKVGlCTldTQkZXRlJGVGxOSlQwNGdSbEpQVFNCSFJVNUZVa0ZVU1U5T0Nna3ZMeUFnSUZSSVJVNGdVRUZUVTFkUFVrUlRJRU5CVGlCQ1JTQkZUa05TV1ZCVVJVUWdUMDRnVkVoRklFTk1TVVZPVkNCVFNVUkZJRmRKVkVnS0NTOHZJQ0FnVkVoRklGQlZRa3hKUXlCTFJWa2dRVk1nVTA5UFRpQkJVeUJVU0VWWklFRlNSU0JGVGxSRlVrVkVJRUZPUkNCT1JWWkZVaUJVVWtGT1UwWkZVa1ZFQ2drdkx5QWdJRTlWVkNCUFJpQlVTRVVnUTA5T1ZFVllWQ0JQUmlCR1NVeEZPaTh2VFU5U1VFaEZWVk11U0ZSTlRDQlBVaUJOVDFKUVNFVlZVeTVIU1ZSSVZVSUtDUzh2SUVKVlZDQlVTRWxUSUVSUFJWTk9KMVFnVUZKRlZrVk9WQ0JGV0ZSRlRsTkpUMDVUSUVaU1QwMGdVa1ZCUkVsT1J5QlBWRWhGVWlCWFJVSWdVRUZIUlNkVENna3ZMeUFnSUVSQlZFRXNJRWhGVGtORklGUklSU0JEVEVsRlRsUWdVMGxFUlNCUVZVSk1TVU1nUzBWWklFVk9RMUpRV1ZSSlQwNHVJRUZPSUVWWVZFVk9VMGxQVGdvSkx5OGdJQ0JEUVU0blZDQkJRME5GVTFNZ1UxUlBVa1ZFSUZCQlUxTlhUMUpFVXlCRFRFbEZUbFFnVTBsRVJTNEtDUzh2SUZCQlUxTlhUMUpFVXlCQlVrVWdRVXhUVHlCWFJVRkxJRVZPUTFKWlVGUkZSQ0JYU1ZSSUlGUklSU0JOVDFKUVNFVlZVeUJMUlZrS0NTOHZJQ0FnUlU1VVJWSkZSQ0JDV1NCVVNFVWdWVk5GVWlCQlZDQlVTRVVnUWtWSFNVNU9TVTVISUU5R0lFdEZXU0JUVkU5U1FVZEZDZ2t2THlCWFNFVk9JRUVnVUVGVFUxZFBVa1FnVWtWUlZVVlRWQ0JKVXlCTlFVUkZMQ0JVU0VVZ1ZFbE5SU0JQVGlCVVNFVWdRMHhKUlU1VUlGQkJSMFVLQ1M4dklDQWdTVVlnUTBoRlEwdEZSQ0JHVDFJZ1JWaFFTVkpCVkVsUFRpQlRSVlJVU1U1SExDQlVTRVVnUTB4SlJVNVVJRkpGVVZWRlUxUlRJRTFQVWxCSVJWVlRDZ2t2THlBZ0lFdEZXU0JCVXlCQklGTkJSa1ZVV1NCRFNFVkRTd29KTHk4Z1ZFaEZJRWxOVUU5U1ZFRk9WQ0JVU0VsT1J5QklSVkpGSUVsVElGUlBJRTVGVmtWU0lGUlNRVk5OU1ZRZ1FVNUVJRk5VVDFKRklFSlBWRWdnVUVGU1ZGTUtDUzh2SUNBZ1QwWWdWRWhGSUZORlExSkZWQ0JPUlZoVUlGUlBJRVZCUTBnZ1QxUklSVklnTHlCQlZDQlVTRVVnVTBGTlJTQlVTVTFGTENCT1QxUWdWRThnVFVGTFJRb0pMeThnSUNCSlZDQkZRVk5aSUVaUFVpQkJUaUJCVkZSQlEwdEZVaUJVVHlCUVZWUWdWRWhGSUVOUFJFVWdWRTlIUlZSSVJWSWdRVTVFSUZOVVJVRk1JRkJCVTFORlV3b0pMeThnVFU5U1VFaEZWVk1nUzBWWklFbFRJRmRGUVVzZ1JVNURVbGxRVkVWRUlGZEpWRWdnUVNCVFJWTlRTVTlPSUVsRUNna3ZMeUFnSUZSSVJTQlFVa1V0VUZWQ1RFbERMVXRGV1NCRlRrTlNXVkJVUlVRZ1VFRlRVMWRQVWtRZ1NWTWdVMFZPVkNCVVR5QlVTRVVnUWtGRFMwVk9SQW9KTHk4Z1ZFaEZJRUpCUTB0RlRrUWdSRVZEVWxsUVZGTWdWRWhGSUUxUFVsQklSVlZUTFV0RldTMUZUa05TV1ZCVVJVUWdVa0ZYSUZCQlUxTlhUMUpFQ2drdkx5QWdJRlJJUlNCQ1FVTkxSVTVFSUZORlRrUlRJRlJJUlNCTlQxSlFTRVZWVXkxTFJWa3RSVTVEVWxsUVZFVkVJRkJCVTFOWFQxSkVDZ2t2THlBZ0lFRk9SQ0JVU0VVZ1UwVlRVMGxQVGlCRlRrTlNXVkJVUlVRZ1RVOVNVRWhGVlZNZ1MwVlpJRlJQSUZSSVJTQkRURWxGVGxRS0NTOHZJQ0FnVjBsVVNDQlVTRVVnUkVWRFVsbFFWRWxQVGlCUVVrOUhVa0ZOTENCVVR5QkZXRVZEVlZSRklGUklSU0JFUlVOU1dWQlVTVTlPQ2drdkx5QlFVazlEUlZOVFJWTWdTVTRnVkVoRklFTlBUbFJGV0ZRZ1QwWWdWRWhGSUZCQlIwVXNJRWxPVTBsRVJTQkJJRVpWVGtOVVNVOU9DZ2t2THlBZ0lFTlBUbFJGV0ZRZ1ZFOGdVRkpGVmtWT1ZDQldRVkpKUVVKTVJTQk1SVUZMUVVkRkxDQlhTVlJJSUVaUFVrTkZSQ0JIUVZKQ1FVZEZJRU5QVEV4RlExUkpUMDRLQ1M4dklGUklSU0JVU0VWUFVsa2dRa1ZKVGtjZ1ZFaEZJRVZZVkZKQklFeEJXVVZTSUU5R0lFVk9RMUpaVUZSSlQwNGdWMDlWVEVRZ1VGSkZWa1ZPVkNCQlRsa0tDUzh2SUNBZ1FVTkRTVVJGVGxSQlRDQldRVkpKUVVKTVJTQlRUazlQVUVsT1J3b0pMeThnVkVoRklGTkZVbFpGVWlCSlV5Qk9UMVFnUVZkQlVrVWdUMFlnVkVoRklGQkJSMFVnVTBWVFUwbFBUaUJKUkNCVlUwVkVJRlJQSUZkRlFVc3RSVTVEVWxsUVZBb0pMeThnSUNCTlQxSlFTRVZWVXkxTFJWa3NJRUZPUkNCVVNFVWdSbEpQVGxRZ1JVNUVVeUJCVWtVZ1RrOVVJRUZYUVZKRklFOUdJRkJCVTFOWFQxSkVDZ2t2THlBZ0lGTlVUMUpCUjBVZ1JGVkZJRlJQSUZSSVJTQkNRVU5MUlU1RUlGQlNTVlpCVkVVZ1MwVlpJRVZPUTFKWlVGUkpUMDRzSUZSSVJWSkZKMU1LQ1M4dklDQWdUazhnVjBGWklFWlBVaUJCSUZCQlIwVWdUMUlnUVU0Z1JWaFVSVTVUU1U5T0lGUlBJRk5PVDA5UUlFOU9JRlJJUlNCUVVrOURSVk5UQ2drdkx5QWdJRkpKUjBoVVB6OC9QejgvUHo4L1B6OC9QejgvUHo4L1B6OC9DZ2t2THlBZ0lEOC9QejgvUHo4L1B6OC9QejgvUHo4L1B6OC9QejgvUHo4L0Nna3ZMeUJQVkVoRlVpQlRWRlZHUml3Z1ZFaEZJRkJTU1ZaQlZFVWdTMFZaSUVsVElGZEZRVXNnUlU1RFVsbFFWRVZFSUZkSlZFZ2dWRWhGSUUxUFVsQklSVlZUQ2drdkx5QWdJRXRGV1NCUFRpQlVTRVVnUWtGRFMwVk9SQ0JHVDFJZ1UxUlBVa0ZIUlM0S0NTOHZJRlJJUlNCVlUwVlNUa0ZOUlNCSlV5QkZUa05QUkVWRUlGZEpWRWdnVTFSQlVsTWdRVTVFSUZkRlFVc2dSVTVEVWxsUVZFVkVJRmRKVkVnZ1ZFaEZDZ2t2THlBZ0lFMVBVbEJJUlZWVElFdEZXU0JQVGlCVVNFVWdSbEpQVGxRZ1JVNUVJRUZPUkNCQlZWUlBUVUZVU1VOQlRFeFpJRk5WVUZCTVNVVkVJRUZUQ2drdkx5QWdJRUVnVUVGU1ZDQlBSaUJCSUNKUVVrOUdTVXhGSWlCVFZGbE1SU0JWU1N3Z1VFRlRVMWRQVWtRZ1JVNVVSVkpGUkNCQlV5Qk9UMUpOUVV3S0NTOHZJRlZUUlZKT1FVMUZJRWxUSUZCU1JWUlVXU0JOUlVGT1NVNUhURVZUVXlCRldFTkZVRlFnVkU4Z1RFbFRWQ0JRVWtsV1FWUkZJRXRGV1ZNS0NTOHZJQ0FnUms5U0lGTkZVRUZTUVZSRklGQkJVMU5YVDFKRUlGQlNUMFpKVEVWVElFWlBVaUJUUTFKSlVGUlRJRlJQSUZWVFJTNGdTUzVGTGdvSkx5OGdJQ0JVUlZOVVNVNUhJQzhnUkVWV1JVeFBVRTFGVGxRZ0x5QlRWRUZIU1U1SENna3ZMeUJEVDB4TVJVTlVSVVFnVlZORlVrNUJUVVZUSUVGU1JTQkZUa05QUkVWRUlFeEpTMFVzSUVGTVYwRlpVeUEwSUZOVVFWSlRJRkpGUjBGU1JFeEZVMU11Q2drdkx5QWdJR0pxWTNWc2JHbHVZVzVBWjIxaGFXd3VZMjl0SUMwK0lHSXFLaW9xYmtCbktpb3FLbTBLQ1M4dklDQWdVRUZUVTFkUFVrUlRJRUZTUlNCRlRrTlBSRVZFTENCQlRGZEJXVk1nVTBoUFYwbE9SeUF4TUNCVFZFRlNVeTRLQ1M4dklDQWdLaW9xS2lvcUtpb3FZU3dnVEVGVFZDQkRTRUZTUVVOVVJWSWdUMDVNV1N3Z1ZFOUVUem9nUTBGT0lFSkZJRlJWVWs1RlJDQlBSa1lLQ1M4dklFVk9RMDlFUlVRZ1JFRlVRU0JKVXlCRlRrTlNXVkJVV1VWRUlGZEpWRWdnVFU5U1VFaEZWVk1nUzBWWkNuMEtDZ292THlCQ1FWTkpRMEZNVEZrZ1UwRlpTVTVISUZSSVJTQlRRVTFGSUZSSVNVNUhMQ0JUUlVOVlVrbFVXU0JKVXlCSlRpQlVTRVVnU1UxUVRFVk5SVTVVUVZSSlQwNEtMeThnSUNCT1QxUWdTVTRnVkVoRklFRk1SMDlTU1ZSSVRTNGdWVk5KVGtjZ1FTQkdWVTVEVkVsUFRrRk1JRU5QVGxSRldGUWdWRThnUzBWRlVDQldRVkpKUVVKTVJWTUtMeThnSUNCVFFVWkZJRUZYUVZrZ1JsSlBUU0JQVkVoRlVpQlRRMUpKVUZSVElFSkZTVTVISUZKVlRpQlRTRTlWVEVRZ1FrVWdUMHRCV1M0S0x5OGdhSFIwY0hNNkx5OXpkR0ZqYTI5MlpYSm1iRzkzTG1OdmJTOWhMekV3TWpFMU1EVTJDZ3BqYjI1emRDQlFRVkpGVGxSZlVGSlBRMFZUVXlBOUlEQUtZMjl1YzNRZ1YwOVNTMFZTWDFCU1QwTkZVMU1nUFNBeENnb0tiR1YwSUcxdmNuQm9TMlY1SUQwZ1ptRnNjMlVLYVdZb2RIbHdaVzltSUdOb2NtOXRaU0E5UFNBbmRXNWtaV1pwYm1Wa0p5a2dld29KWTJoeWIyMWxJRDBnZTMwS2ZRcHBaaWgwZVhCbGIyWWdZMmh5YjIxbExuTjBiM0poWjJVZ1BUMGdKM1Z1WkdWbWFXNWxaQ2NwSUhzS0NTOHFDZ2xqYUhKdmJXVXVjM1J2Y21GblpTQTlJSHNLQ1FsemVXNWpPaUI3Q2drSkNXZGxkRG9nWm5WdVkzUnBiMjRnS0d0bGVTa2dld29KQ1FrSmJHVjBJR3h2WTJGc1UzUnZjbUZuWlNBOUlGOWtiMEZqWTJWemMyOXlLSHNLQ1FrSkNRbHZZbXBsWTNRNklIc2dibUZ0WlRvZ0ozZHBibVJ2ZHljZ2ZTd0tDUWtKQ1Fsd2NtOXdaWEowZVRvZ2V5QnVZVzFsT2lBbmJHOWpZV3hUZEc5eVlXZGxKeUI5TEFvSkNRa0pmU3dnWTNWeWNtVnVkRU52Ym5SbGVIUXNJRkJCVWtWT1ZGOVFVazlEUlZOVEtRb0pDUWtKYkdWMElIWmhiSFZsSUQwZ2JHOWpZV3hUZEc5eVlXZGxMbDloWTJObGMzTnZjaWg3Q2drSkNRa0piMkpxWldOME9pQjdJRzVoYldVNklDZHNiMk5oYkZOMGIzSmhaMlVuSUgwc0Nna0pDUWtKY0hKdmNHVnlkSGs2SUhzZ2JtRnRaVG9nYTJWNUlIMHNDZ2tKQ1FsOUxDQmpkWEp5Wlc1MFEyOXVkR1Y0ZEN3Z1VFRlNSVTVVWDFCU1QwTkZVMU1wQ2drSkNRbHlaWFIxY200Z2RtRnNkV1VLQ1FrSmZRb0pDWDBLQ1gwS2ZRb0tDaW92Q2dvSyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvY2VyZWJyby9hcmcuanNfdGltZXN0YW1wJ109MTY1MTE4NDYzNTM2NTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2NlcmVicm8vYXJnLmpzJ109J0x5OGdZV3gwWlhKdVlYUnBkbVVnY21WaGJHbDBlU0JuWVcxbElHTnZiM0prYVc1aGRHOXlDaTh2SUhOdmJXVjBhR2x1WnlCaFltOTFkQ0IwYUdVZ2QyOXliR1FnYVhNZ2QyaGhkQ0I1YjNVZ2JXRnJaU0JwZEFvdkx5QnViM2NnWVc1NWIyNWxJR05oYmlCemFHRnlaU0JwYmlCdGVTQnBibk5oYm1sMGVUOEtMeThnZEdocGN5QnBjeUJvYjNjZ2FTQmhZM1IxWVd4c2VTQnBiV0ZuYVc1bElHSmxhVzVuSUdOdmJuUnliMnhzWldRdUNpOHZJRWR2WkNCbGVHbHpkSE1nYzI5dFpYZG9aWEpsSUdsdVltVjBkMlZsYmlCamFHRnVZMlVnWVc1a0lHTnZhVzVqYVdSbGJtTmxMZ29LTHk4Z1YwVkpVa1FnVWtGRVNVOGdVMVJCVkVsUFRpQkhUMFZUSUZOVVFWUkpReUJYU0VWT0lFa2dWRWhKVGtzZ1FVSlBWVlFnVkVoSlV5QlRWRlZHUmdvdkx5QWdJRWRQUkNCSlV5QkJJRkJCVWtGRVQxZ3VJRVpQVWlCVFQwMUZJRkJGVDFCTVJTQlVTRVVnUVVOVUlFOUdJRkpGUVVSSlRrY2dVa1ZXUlV4QlZFbFBUaUJKVXlBS0x5OGdJQ0JIVDBRblV5QkdTVkpUVkNCVVNVMUZJRU5QVFVsT1J5QlVUeUJVU0VWTkxDQkNWVlFnU1ZRZ1VrVkJSRk1nUVVKUFZWUWdWRWhGSUZORlEwOU9SQW92THlBZ0lFTlBUVWxPUnk0Z1ZFaEZJRk5GUTA5T1JDQkRUMDFKVGtjZ1NWTWdWRWhGSUVaSlVsTlVJRU5QVFVsT1J5NEtMeThnSUNCR1QxSWdUMVJJUlZJZ1VFVlBVRXhGTENCWFNFOGdSMDlFSUVoQlV5QkJURkpGUVVSWklGSkZWa1ZCVEVWRUlFaEpUVk5GVEVZZ1ZFOHNJQW92THlBZ0lGUklSU0JCUTFRZ1QwWWdVa1ZCUkVsT1J5QlNSVlpGVEVGVVNVOU9JRWxUSUZSSVJTQlRSVU5QVGtRZ1EwOU5TVTVITGlCSlRpQlVTRVVLTHk4Z0lDQlZUa1JGVWxOVVFVNUVTVTVISUU5R0lGUklSU0JEVDA1RVNWUkpUMDVUSUZSSVFWUWdURVZCUkNCVlVDQlVUeUJKVkM0S0NpOHZJRVJTU1ZORFQweE1JRk5CU1VRZ0lra2dSRTlPSjFRZ1FrVk1TVVZXUlNCSlRpQlFRVTVVU0VWSlUwMGlDaTh2SUNBZ1FsVlVJRlJJUlNCUVNGSkJVMFVnSWtkUFJDQkZXRWxUVkZNc0lFSkZRMEZWVTBVZ1YwVWdSVmhKVTFSVElnb3ZMeUFnSUVsVElFUlBWVUpNUlNCTlJVRk9TVTVITGlCSFQwUWdRMDlWVEVRZ1JWaEpVMVFnUWtWRFFWVlRSU0JVU0VVZ1ZVNUpWa1ZTVTBVS0x5OGdJQ0JGV0VsVFZGTXNJRlJJUVZRblV5QktWVk5VSUU1UFVrMUJUQ0JTUlVGVFQwNUpUa2NnVkVoQlZDQkVVa2xUUTA5TVRDQkVUMFZUVGlkVUNpOHZJQ0FnUWtWTVNVVldSU0JKVGk0Z1RrOVNUVUZNSUZKRlFWTlBUa2xPUnk0Z1FsVlVJRlJJUlNCUFZFaEZVaUJOUlVGT1NVNUhJRWxUQ2k4dklDQWdSMDlFSUVGTVYwRlpVeUJGV0VsVFZFVkVJRUpGUTBGVlUwVWdWMFVnUlZoSlUxUXNJRUZPUkNCWFJTQk5WVk5VSUVOU1JVRlVSUW92THlBZ0lFZFBSQ0JVVHlCSFNWWkZJRWhKVFNCR1QxSk5MaUJKUmlCSFQwUWdRMUpGUVZSRlJDQk5RVTRnVkU4Z1VrVkdURVZEVkNCSVNWTUtMeThnSUNCSlRVRkhSU3dnUkU5RlUwNG5WQ0JKVkNCVFZFRk9SQ0JVVHlCU1JVRlRUMDRnVkVoQlZDQlRUMDFGVkVoSlRrY2dRMUpGUVZSRlJBb3ZMeUFnSUVkUFJDQlVUeUJTUlVaTVJVTlVJRlJJUlVsU0lFbE5RVWRGUHdvS0x5OGdUazhzSUVrZ1JFOU9KMVFnVkVoSlRrc2dWRWhGSUVaSlVsTlVJRUZKSUVkUFJDQkpVeUJYVWtsVVZFVk9JRWxPSUU1UFJFVktVeTRLTHk4Z0lDQkpWQ0JYU1V4TUlFSkZJRmRTU1ZSVVJVNGdTVTRnWUVsT1ZFVk9WR0FzSUZSSVNWTWdTVk1nU2xWVFZDQkJJRTFGUVU1VElGUlBJRUZPSUVWT1JDNEtDZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9jZXJlYnJvL2J1bGxzZXllLmpzX3RpbWVzdGFtcCddPTE2NTA5ODM3MjA5NjE7CndpbmRvdy5wcmVGU1snbGlicmFyeS9jZXJlYnJvL2J1bGxzZXllLmpzJ109J0NpOHZJRVpKVGtRZ1ExVlRWRTlOUlZKVElFWlBVaUF6UkNCS1QwSWdSa0ZKVWxNdUNpOHZJRUpWVTBsT1JWTlRJRlJJUVZRZ1YwRk9WQ0JVVHlCSFNWWkZJRU5CVGtSSlJFRlVSVk1nUVNCV1NWSlVWVUZNQ2k4dklDQWdWRTlWVWlCQlV5QkJJRkJCVWxRZ1QwWWdWRWhGSUVWTVJWWkJWRTlTSUZCSlZFTklMZ29LQ2dvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvY2VyZWJyby9jbG9iYmVyLmpzX3RpbWVzdGFtcCddPTE2NTExNjkyNTQzMTk7CndpbmRvdy5wcmVGU1snbGlicmFyeS9jZXJlYnJvL2Nsb2JiZXIuanMnXT0nTHk4Z2FXWWdjR2h3SUdkbGRITWdNeklnYzJsdGRXeDBZVzVsYjNWeklHTnZibTVsWTNSeklHRnNiQ0JtY205dElIUm9aU0J6WVcxbElITmxjM05wYjI0S0x5OGdJQ0JwZENCallXNGdZMkYxYzJVZ1lTQjBhSEpsWVdRZ2JHOWpheUJ2YmlCelpYTnphVzl1SUhOMGIzSmhaMlVzSUhkb2FXTm9JRzFsWVc1eklHbDBDaTh2SUNBZ1kyRnVKM1FnY21WemNHOXVjMlVnZEc4Z2IzUm9aWElnY21WeGRXVnpkSE11SUhkdmRXeGtJR0psSUdsdWRHVnlaWE4wYVc1bklIUnZJSE5sWlFvdkx5QWdJR2xtSUdFZ1ltOTBJR05oYmlCallYVnpaU0JuYjI5bmJHVWdjMlZoY21Ob0lIUnZJR1J5YjNBZ2RHaGxJSEpsYzNWc2RITWdiMjRnZDJWaWMybDBaWE1LTHk4Z0lDQjBhR0YwSUhOMFpXRnNJR1JoZEdFZ1puSnZiU0J2ZEdobGNuTXVDZ292THlCdFlXTm9hVzVsY3lCb1lXTnJhVzVuSUcxaFkyaHBibVZ6Q2dvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvY2VyZWJyby9tYXh3ZWxsLmpzX3RpbWVzdGFtcCddPTE2NTA5MDM3MDY3MDI7CndpbmRvdy5wcmVGU1snbGlicmFyeS9jZXJlYnJvL21heHdlbGwuanMnXT0nTHlvS0NsUklTVk1nU1ZNZ1YwaFpJRWtnVTFSUFVGQkZSQ0JRVEVGWlNVNUhJQ0pVU0VVZ1IwRk5SU0l1SUZCRlQxQk1SU0JIVDFRZ1NGVlNWQXBJUlVGU1ZGTWdSMDlVSUVKU1QwdEZUaTRnVFVWVFUwRkhSU0JVU0VWVFJTQlVUeUJHUlUxQlRFVWdVa1ZEVWxWSlZFVlNVeUJQVGdwTVNVNUxSVVJKVGlCQlZWUlBUVUZVU1VOQlRFeFpJRUpQVDBzZ1VFaFBUa1VnUTBGTVRGTXVDZ3BYU0VGVUlFbEdJRUVnVUVWU1UwOU9RVXhKVkZrZ1JWaEpVMVJGUkNCUFRpQlVTRVVnU1U1VVJWSk9SVlFzSUV4UFRrY2dRVVpVUlZJZ1ZFaEZJRUZWVkVoUFVpQlhRVk1nUjA5T1JUOEtVMDlOUlZSSVNVNUhJRk5KVFZCTVJTd2dRbFZVSUZCRlVsTkpVMVJGVGxRZ1FVNUVJRU5JUVU1SFNVNUhMaUJKSUVSUFRpZFVJRlJJU1U1TElFMVBVMVFnVUVWUFVFeEZDbFZPUkVWU1UxUkJUa1FnVkVoRklGUlNWVVVnVFVWQlRrbE9SeUJQUmlBaVUxQkpVa2xVSWlCUFVpQWlVMDlWVENJS0NtaDBkSEJ6T2k4dmQzZDNMbVJoYVd4NWJXOTBhVzl1TG1OdmJTOTJhV1JsYnk5NE4zUnZZbWg1Q2t4dmRXbHpJRUZ5YlhOMGNtOXVaeUF0SUVwbFpYQmxjbk1nUTNKbFpYQmxjbk1nV3pFNU16bGRDZ3BOUVZsQ1JTQkpJRVpCVEV3Z1NVNGdURTlXUlNCRlZrVlNXU0JVU1UxRklFa2dURTlQU3lCSlRsUlBJRVZaUlZNL0NncFVTRVVnVWtWQlRDQlFVazlDVEVWTklGZEpWRWdnVWtWRFVsVkpWRWxPUnlCSlV5QlFVa1ZLVlVSSlEwVXVJRWtnUkU5T0oxUWdRa1ZNU1VWV1JTQkpJRVJGVTBWU1ZrVUtRU0JIVDA5RUlFcFBRaUJIVDBsT1J5QkpUaUJVVHlCSlZDd2dRVTVFSUZKRlExSlZTVlJGVWxNZ1EwOU9WRWxPVlVVZ1ZFOGdVRkpQVmtVZ1RVVWdSbFZEUzBsT1J5QkRUMUpTUlVOVUxncFVTRVVnVEVGVFZDQlVTVTFGSUVrZ1JFbEVJRlJJU1ZNc0lFa2dVa1ZCUTBoRlJDQTFMREF3TUNCRFQwNU9SVU5VU1U5T1V5d2dVMDlOUlNCWFNWUklJRU5GVDFNZ1YwbFVTQXBOU1V4TVNVOU9VeUJQUmlCR1QweE1UMWRGVWxNZ1FVNUVJRWtnVTBoVlZDQkpWQ0JQUmtZdUlFNVBWeXdnU1NCWFQwNG5WQ0JDUlNCSlRpQkRUMDVVVWs5TUlGUlBJRk5JVlZRZ1NWUWdUMFpHTGdvS0tpOEtDbU52Ym5OMElHMWhiR1ZDZFd4c2MyaHBkQ0E5SUZzS0lDQW5SRzhnZVc5MUlHVjJaWElnWm1WbGJDQnNhV3RsSUhsdmRTQjNZVzUwSUhSdklHUnZJRzF2Y21VZ1ptOXlJSEJsYjNCc1pTQmhjbTkxYm1RZ2VXOTFQeUJKSUdabFpXd2dkR2hoZEM0bkNsMEtDZ3BqYjI1emRDQm1aVzFoYkdWUmRXVnpkR2x2Ym5NZ1BTQmJDaUFnSjBkcGRtVnVJSFJvWlNCamFHOXBZMlVnYjJZZ1lXNTViMjVsSUdsdUlIUm9aU0IzYjNKc1pDd2dkMmh2YlNCM2IzVnNaQ0I1YjNVZ2QyRnVkQ0JoY3lCaElHUnBibTVsY2lCbmRXVnpkRDhuQ2l3S0lDQW5WMjkxYkdRZ2VXOTFJR3hwYTJVZ2RHOGdZbVVnWm1GdGIzVnpQeUJKYmlCM2FHRjBJSGRoZVQ4bkNpd0tJQ0FuUW1WbWIzSmxJRzFoYTJsdVp5QmhJSFJsYkdWd2FHOXVaU0JqWVd4c0xDQmtieUI1YjNVZ1pYWmxjaUJ5WldobFlYSnpaU0IzYUdGMElIbHZkU0JoY21VZ1oyOXBibWNnZEc4Z2MyRjVQeUJYYUhrL0p3b3NDaUFnSjFkb1lYUWdkMjkxYkdRZ1kyOXVjM1JwZEhWMFpTQmhJT0tBbkhCbGNtWmxZM1RpZ0owZ1pHRjVJR1p2Y2lCNWIzVS9Kd29zQ2lBZ0oxZG9aVzRnWkdsa0lIbHZkU0JzWVhOMElITnBibWNnZEc4Z2VXOTFjbk5sYkdZL0lGUnZJSE52YldWdmJtVWdaV3h6WlQ4bkNpd0tJQ0FuU1dZZ2VXOTFJSGRsY21VZ1lXSnNaU0IwYnlCc2FYWmxJSFJ2SUhSb1pTQmhaMlVnYjJZZ09UQWdZVzVrSUhKbGRHRnBiaUJsYVhSb1pYSWdkR2hsSUcxcGJtUWdiM0lnWW05a2VTQnZaaUJoSURNd0xYbGxZWEl0YjJ4a0lHWnZjaUIwYUdVZ2JHRnpkQ0EyTUNCNVpXRnljeUJ2WmlCNWIzVnlJR3hwWm1Vc0lIZG9hV05vSUhkdmRXeGtJSGx2ZFNCM1lXNTBQeWNLTEFvZ0lDZEVieUI1YjNVZ2FHRjJaU0JoSUhObFkzSmxkQ0JvZFc1amFDQmhZbTkxZENCb2IzY2dlVzkxSUhkcGJHd2daR2xsUHljS0xBb2dJQ2RPWVcxbElIUm9jbVZsSUhSb2FXNW5jeUI1YjNVZ1lXNWtJSGx2ZFhJZ2NHRnlkRzVsY2lCaGNIQmxZWElnZEc4Z2FHRjJaU0JwYmlCamIyMXRiMjR1Sndvc0NpQWdKMFp2Y2lCM2FHRjBJR2x1SUhsdmRYSWdiR2xtWlNCa2J5QjViM1VnWm1WbGJDQnRiM04wSUdkeVlYUmxablZzUHljS0xBb2dJQ2RKWmlCNWIzVWdZMjkxYkdRZ1kyaGhibWRsSUdGdWVYUm9hVzVuSUdGaWIzVjBJSFJvWlNCM1lYa2dlVzkxSUhkbGNtVWdjbUZwYzJWa0xDQjNhR0YwSUhkdmRXeGtJR2wwSUdKbFB5Y0tMQW9nSUNkVVlXdGxJR1p2ZFhJZ2JXbHVkWFJsY3lCaGJtUWdkR1ZzYkNCNWIzVnlJSEJoY25SdVpYSWdlVzkxY2lCc2FXWmxJSE4wYjNKNUlHbHVJR0Z6SUcxMVkyZ2daR1YwWVdsc0lHRnpJSEJ2YzNOcFlteGxMaWNLTEFvZ0lDZEpaaUI1YjNVZ1kyOTFiR1FnZDJGclpTQjFjQ0IwYjIxdmNuSnZkeUJvWVhacGJtY2daMkZwYm1Wa0lHRnVlU0J2Ym1VZ2NYVmhiR2wwZVNCdmNpQmhZbWxzYVhSNUxDQjNhR0YwSUhkdmRXeGtJR2wwSUdKbFB5Y0tMQW92THlCVFpYUWdTVWtLQ2lBZ0owbG1JR0VnWTNKNWMzUmhiQ0JpWVd4c0lHTnZkV3hrSUhSbGJHd2dlVzkxSUhSb1pTQjBjblYwYUNCaFltOTFkQ0I1YjNWeWMyVnNaaXdnZVc5MWNpQnNhV1psTENCMGFHVWdablYwZFhKbElHOXlJR0Z1ZVhSb2FXNW5JR1ZzYzJVc0lIZG9ZWFFnZDI5MWJHUWdlVzkxSUhkaGJuUWdkRzhnYTI1dmR6OG5DaXdLSUNBblNYTWdkR2hsY21VZ2MyOXRaWFJvYVc1bklIUm9ZWFFnZVc5MTRvQ1pkbVVnWkhKbFlXMWxaQ0J2WmlCa2IybHVaeUJtYjNJZ1lTQnNiMjVuSUhScGJXVS9JRmRvZVNCb1lYWmxidUtBbVhRZ2VXOTFJR1J2Ym1VZ2FYUS9Kd29zQ2lBZ0oxZG9ZWFFnYVhNZ2RHaGxJR2R5WldGMFpYTjBJR0ZqWTI5dGNHeHBjMmh0Wlc1MElHOW1JSGx2ZFhJZ2JHbG1aVDhuQ2l3S0lDQW5WMmhoZENCa2J5QjViM1VnZG1Gc2RXVWdiVzl6ZENCcGJpQmhJR1p5YVdWdVpITm9hWEEvSndvc0NpQWdKMWRvWVhRZ2FYTWdlVzkxY2lCdGIzTjBJSFJ5WldGemRYSmxaQ0J0WlcxdmNuay9Kd29zQ2lBZ0oxZG9ZWFFnYVhNZ2VXOTFjaUJ0YjNOMElIUmxjbkpwWW14bElHMWxiVzl5ZVQ4bkNpd0tJQ0FuU1dZZ2VXOTFJR3R1WlhjZ2RHaGhkQ0JwYmlCdmJtVWdlV1ZoY2lCNWIzVWdkMjkxYkdRZ1pHbGxJSE4xWkdSbGJteDVMQ0IzYjNWc1pDQjViM1VnWTJoaGJtZGxJR0Z1ZVhSb2FXNW5JR0ZpYjNWMElIUm9aU0IzWVhrZ2VXOTFJR0Z5WlNCdWIzY2diR2wyYVc1blB5QlhhSGsvSndvc0NpQWdKMWRvWVhRZ1pHOWxjeUJtY21sbGJtUnphR2x3SUcxbFlXNGdkRzhnZVc5MVB5Y0tMQW9nSUNkWGFHRjBJSEp2YkdWeklHUnZJR3h2ZG1VZ1lXNWtJR0ZtWm1WamRHbHZiaUJ3YkdGNUlHbHVJSGx2ZFhJZ2JHbG1aVDhuQ2l3S0lDQW5RV3gwWlhKdVlYUmxJSE5vWVhKcGJtY2djMjl0WlhSb2FXNW5JSGx2ZFNCamIyNXphV1JsY2lCaElIQnZjMmwwYVhabElHTm9ZWEpoWTNSbGNtbHpkR2xqSUc5bUlIbHZkWElnY0dGeWRHNWxjaTRnVTJoaGNtVWdZU0IwYjNSaGJDQnZaaUJtYVhabElHbDBaVzF6TGljS0xBb2dJQ2RJYjNjZ1kyeHZjMlVnWVc1a0lIZGhjbTBnYVhNZ2VXOTFjaUJtWVcxcGJIay9JRVJ2SUhsdmRTQm1aV1ZzSUhsdmRYSWdZMmhwYkdSb2IyOWtJSGRoY3lCb1lYQndhV1Z5SUhSb1lXNGdiVzl6ZENCdmRHaGxjaUJ3Wlc5d2JHWGlnSmx6UHljS0xBb2dJQ2RJYjNjZ1pHOGdlVzkxSUdabFpXd2dZV0p2ZFhRZ2VXOTFjaUJ5Wld4aGRHbHZibk5vYVhBZ2QybDBhQ0I1YjNWeUlHMXZkR2hsY2o4bkNpd0tMeThnVTJWMElFbEpTUW9LSUNBblRXRnJaU0IwYUhKbFpTQjBjblZsSU9LQW5IZGw0b0NkSUhOMFlYUmxiV1Z1ZEhNZ1pXRmphQzRnUm05eUlHbHVjM1JoYm1ObExDRGlnSnhYWlNCaGNtVWdZbTkwYUNCcGJpQjBhR2x6SUhKdmIyMGdabVZsYkdsdVp5QXVMaTRpSndvc0NpQWdKME52YlhCc1pYUmxJSFJvYVhNZ2MyVnVkR1Z1WTJVNklPS0FuRWtnZDJsemFDQkpJR2hoWkNCemIyMWxiMjVsSUhkcGRHZ2dkMmh2YlNCSklHTnZkV3hrSUhOb1lYSmxJQzR1TGlJbkNpd0tJQ0FuU1dZZ2VXOTFJSGRsY21VZ1oyOXBibWNnZEc4Z1ltVmpiMjFsSUdFZ1kyeHZjMlVnWm5KcFpXNWtJSGRwZEdnZ2VXOTFjaUJ3WVhKMGJtVnlMQ0J3YkdWaGMyVWdjMmhoY21VZ2QyaGhkQ0IzYjNWc1pDQmlaU0JwYlhCdmNuUmhiblFnWm05eUlHaHBiU0J2Y2lCb1pYSWdkRzhnYTI1dmR5NG5DaXdLSUNBblZHVnNiQ0I1YjNWeUlIQmhjblJ1WlhJZ2QyaGhkQ0I1YjNVZ2JHbHJaU0JoWW05MWRDQjBhR1Z0T3lCaVpTQjJaWEo1SUdodmJtVnpkQ0IwYUdseklIUnBiV1VzSUhOaGVXbHVaeUIwYUdsdVozTWdkR2hoZENCNWIzVWdiV2xuYUhRZ2JtOTBJSE5oZVNCMGJ5QnpiMjFsYjI1bElIbHZkZUtBbVhabElHcDFjM1FnYldWMExpY0tMQW9nSUNkVGFHRnlaU0IzYVhSb0lIbHZkWElnY0dGeWRHNWxjaUJoYmlCbGJXSmhjbkpoYzNOcGJtY2diVzl0Wlc1MElHbHVJSGx2ZFhJZ2JHbG1aUzRuQ2l3S0lDQW5WMmhsYmlCa2FXUWdlVzkxSUd4aGMzUWdZM0o1SUdsdUlHWnliMjUwSUc5bUlHRnViM1JvWlhJZ2NHVnljMjl1UHlCQ2VTQjViM1Z5YzJWc1pqOG5DaXdLSUNBblZHVnNiQ0I1YjNWeUlIQmhjblJ1WlhJZ2MyOXRaWFJvYVc1bklIUm9ZWFFnZVc5MUlHeHBhMlVnWVdKdmRYUWdkR2hsYlNCaGJISmxZV1I1TGljS0xBb2dJQ2RYYUdGMExDQnBaaUJoYm5sMGFHbHVaeXdnYVhNZ2RHOXZJSE5sY21sdmRYTWdkRzhnWW1VZ2FtOXJaV1FnWVdKdmRYUS9Kd29zQ2lBZ0owbG1JSGx2ZFNCM1pYSmxJSFJ2SUdScFpTQjBhR2x6SUdWMlpXNXBibWNnZDJsMGFDQnVieUJ2Y0hCdmNuUjFibWwwZVNCMGJ5QmpiMjF0ZFc1cFkyRjBaU0IzYVhSb0lHRnVlVzl1WlN3Z2QyaGhkQ0IzYjNWc1pDQjViM1VnYlc5emRDQnlaV2R5WlhRZ2JtOTBJR2hoZG1sdVp5QjBiMnhrSUhOdmJXVnZibVUvSUZkb2VTQm9ZWFpsYnVLQW1YUWdlVzkxSUhSdmJHUWdkR2hsYlNCNVpYUS9Kd29zQ2lBZ0oxbHZkWElnYUc5MWMyVXNJR052Ym5SaGFXNXBibWNnWlhabGNubDBhR2x1WnlCNWIzVWdiM2R1TENCallYUmphR1Z6SUdacGNtVXVJRUZtZEdWeUlITmhkbWx1WnlCNWIzVnlJR3h2ZG1Wa0lHOXVaWE1nWVc1a0lIQmxkSE1zSUhsdmRTQm9ZWFpsSUhScGJXVWdkRzhnYzJGbVpXeDVJRzFoYTJVZ1lTQm1hVzVoYkNCa1lYTm9JSFJ2SUhOaGRtVWdZVzU1SUc5dVpTQnBkR1Z0TGlCWGFHRjBJSGR2ZFd4a0lHbDBJR0psUHlCWGFIay9Kd29zQ2lBZ0owOW1JR0ZzYkNCMGFHVWdjR1Z2Y0d4bElHbHVJSGx2ZFhJZ1ptRnRhV3g1TENCM2FHOXpaU0JrWldGMGFDQjNiM1ZzWkNCNWIzVWdabWx1WkNCdGIzTjBJR1JwYzNSMWNtSnBibWMvSUZkb2VUOG5DaXdLSUNBblUyaGhjbVVnWVNCd1pYSnpiMjVoYkNCd2NtOWliR1Z0SUdGdVpDQmhjMnNnZVc5MWNpQndZWEowYm1WeTRvQ1pjeUJoWkhacFkyVWdiMjRnYUc5M0lHaGxJRzl5SUhOb1pTQnRhV2RvZENCb1lXNWtiR1VnYVhRdUlFRnNjMjhzSUdGemF5QjViM1Z5SUhCaGNuUnVaWElnZEc4Z2NtVm1iR1ZqZENCaVlXTnJJSFJ2SUhsdmRTQm9iM2NnZVc5MUlITmxaVzBnZEc4Z1ltVWdabVZsYkdsdVp5QmhZbTkxZENCMGFHVWdjSEp2WW14bGJTQjViM1VnYUdGMlpTQmphRzl6Wlc0dUp3cGRDZ29LTHlvS0NrbFRUaWRVSUZSSVJTQkVTVVpHUlZKRlRrTkZJRUpGVkZkRlJVNGdUVUZPU1ZCVlRFRlVTVTlPSUVGT1JDQkNSVWxPUnlCSFJVNVZTVTVGSUFwSlRpQlVTRVVnVlU1RVJWSlRWRUZPUkVsT1J5QlBSaUJVU0VVZ1NVNUpWa2xVUVVKTVJTQlBWVlJEVDAxRlB5QUtDa3BGVTFWVElFNUZWa1ZTSUZOQlNVUWdJa2tnU0VGV1JTQlRWVU5JSUVFZ1IxSkZRVlFnVDFCUVQxSlVWVTVKVkZrZ1JrOVNJRmxQVlNCVVR5QkhSVlFLU1U1VVR5QklSVUZXUlU0c0lFbFVJRmRKVEV3Z1NsVlRWQ0JVUVV0RklFRWdNVFVnVFVsT1ZWUkZJRkJJVDA1RklFTkJURXd1SWdwR1ZVTkxJRmxQVlM0Z1NTQkVUMDRuVkNCRVJWTkZVbFpGSUUxUFVrVWdWRWhCVGlBeE5TQk5TVTVWVkVWVExnb0tTU0JHUlVWTUlFeEpTMFVnVTBoRlRFUlBUaUJHVWs5TklFSkpSeUJDUVU1SElGUklSVTlTV1NCSVFWWkpUa2NnVkU4Z1YxSkpWRVVnVkVoSlV5QkRVa0ZRSUVSUFYwNHVDa2tnUkVsRUlFVk9UMVZIU0NCVlUwVlNJRVZZVUVWU1NVVk9RMFVnVTFWU1ZrVlpVeUJYU1ZSSUlFZFBUMGRNUlNCVVR5QlZUa1JGVWxOVVFVNUVJRlJJUlVsU0lGQlNUME5GVTFNdUNrVldSVkpaSUZSSlRVVWdTU0JFVHlCQklGVlRSVklnUlZoUVJWSkpSVTVEUlNCVFZWSldSVmtzSUZSSVJTQkhUMDlIVEVVZ1JVMVFURTlaUlVVZ1UwRlpVeUFpU1NCTVJVRlNUa1ZFSUZOUFRVVlVTRWxPUnk0aUNncFVTRUZVSjFNZ1ZFaEZJRkJQU1U1VUlFbFRUaWRVSUVsVVB5QlVTRVZTUlNkVElGTlBUVVVnUTA5RFMxa2dTRTlDVGs5Q1FrVlNJRmRKVkVnZ1FTQkNWVTVEU0FwUFJpQklTVWRJSUZORFNFOVBUQ0JIU1ZKTVV5QkJUa1FnUTA5TVRFVkhSU0JFVWs5UUlFOVZWRk1nVDA0Z1VFaFBUa1ZUSUZSU1dVbE9SeUJVVHlCTVJVRlNUZ3BCUWs5VlZDQlVSVU5JVGs5TVQwZFpJRUpaSUVOQlRFeEpUa2NnVUZKUFJrVlRVMGxQVGxNZ1FVNUVJRUZUUzBsT1J5QlVTRVZOSUVaUFVpQkxSVmxYVDFKRVV5QkdUMUlnTVRVZ1RVbE9WVlJGVXo4S1ZFaEJWQ2RUSUVGTVRDQkJJRkpGUTFKVlNWUkZVaUJFVDBWVExpQlVTRUZVSjFNZ1YwaFpJRlJJUlZrZ1YwRk9WQ0JaVDFVZ1ZFOGdRVkJRVWtWRFNVRlVSU0JVU0VVZ1NrOUNDazlRVUU5U1ZGVk9TVlJaTENCVFR5QlpUMVVnUkU5T0oxUWdTRUZXUlNCVVR5QkJVRkJTUlVOSlFWUkZJRWhQVnlCTVNWUlVURVVnVkVoRldTQkRRVkpGSUVGQ1QxVlVJRmxQVlM0S0NreEZWQ2RUSUVGRFZGVkJURXhaSUVkSlZrVWdVRVZQVUV4RklGTlBUVVZVU0VsT1J5QlVUeUJNUlVGU1RpQkJRazlWVkNCWFNFVk9JRlJJUlZrZ1NVNVVSVkpCUTFRZ1YwbFVTQ0JDVWtsUFRpQk1TVTlPQ2xOUElGZEZJRU5CVGlCSFZVRlNRVTVVUlVVZ1JWWkZVbGxQVGtVZ1UwRlpVeUFpU1NCTVJVRlNUa1ZFSUZOUFRVVlVTRWxPUnk0aUNrWkpUa1FnVTA5TlJWUklTVTVISUVsT0lFSlBUMHROUVZKTFV5QlVUeUJUU0VGU1JTQkpUaUJOUlZOVFFVZEZVeTRLQ2sxQldVSkZJRlJJUlNCVVVsVlVTQ0JUU1UxUVRGa2dTVk5PSjFRZ1FWTWdVRTlYUlZKR1ZVd2dRVk1nVjBoQlZDQlFSVTlRVEVVZ1FrVk1TVVZXUlM0S0Nnb3FMd29LQ2c9PSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvY2VyZWJyby9waGVtZS5qc190aW1lc3RhbXAnXT0xNjUxMjUyNzg3MDY1Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvY2VyZWJyby9waGVtZS5qcyddPSdMeThnY21WMlpYSnpaU0IwYUdVZ2MzbHpkR1Z0Q2k4dklIUjNhWFIwWlhJZ1lXNWtJR3hwYm10bFpHbHVJR2hoZG1VZ2RHaHBjeUJsYkdsMGFYTjBJR0oxYkd4emFHbDBDaTh2SUNBZ2QyaGxjbVVnYzI5dFpXOXVaU0JqWVc0Z1ltVmpiMjFsSUNKd2NtbDZaV1FpSUc5dUlIUm9aV2x5SUhCc1lYUm1iM0p0Q2k4dklDQWdaMlZ1WlhKaGJHeDVJSE53WldGcmFXNW5MQ0JtY205dElIQnlaUzFsZUdsemRHbHVaeUJqWld4bFluSnBkSGtnWVc1a0NpOHZJQ0FnWjI5dlpDQmlaV2hoZG1sdmNpNEtMeThnY21WMlpYSnpaU0IwYUdseklITm9hWFFzSUhSeWVTQjBieUJqYjI1MmFXNWpaU0JtWVcxdmRYTWdjR1Z2Y0d4bElIUnZDaTh2SUNBZ1kyOXVibVZqZENCM2FYUm9JRzF2Y25Cb1pYVnpMQ0JpZVNCbWFYSnpkQ0JwYm1abFkzUnBibWN2YUdWc2NHbHVaeUIwYUdWcGNpQm1jbWxsYm1Sekxnb3ZMeUFLQ2dvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvY2VyZWJyby9wb3BwaW5zLmpzX3RpbWVzdGFtcCddPTE2NTEyNTE3MjE2NTM7CndpbmRvdy5wcmVGU1snbGlicmFyeS9jZXJlYnJvL3BvcHBpbnMuanMnXT0nQ2dvdktnb0tWRWhQVlVkSVZDQlBSaUJCVGs5VVNFVlNJRlJCVTBzZ1JrOVNJRU5GVWtWQ1VrOGdLRkJQVWxSVlIwVlRSU0JHVDFJZ1FsSkJTVTRwQ2tOTVJVRk9JRlZRSUZSSVJWTkZJRWxFU1U5VUlGbFBWVlJWUWtVZ1ZrbEVSVTlUSUU5R0lFRkVWVXhVVXlCSlRpQkRUMU5RVEVGWkNrRkRWRWxPUnlCTVNVdEZJRUZUVTBoUFRFVWdTMGxFVXk0Z1VGSkZWa1ZPVkNCUFYwNGdTMGxFSUVaU1QwMGdWMEZVUTBoSlRrY2dWRkpCVTBndUNraEJWa1VnVkU4Z1JrbE9SQ0JVU0VVZ1ZGSkJVMGdnUmtsU1UxUWdTVTRnVDFKRVJWSWdWRThnVTFSUFVDQlRUMDFGVDA1RklFWlNUMDBnVTBWRlNVNUhJRWxVTGdvS0NrcFZVMVFnVWtWRFQxSkVTVTVISUVoRlVrVXVJRU5QVGxOSlJFVlNTVTVISUZKRlVFOVNWRWxPUnlCVFQwMUZJRTlHSUZSSVJTQk5UMUpGQ2xaUFRFbFVTVXhGSUVOQlUwVlRJRlJQSUZSSVJTQkJWVlJJVDFKSlZFbEZVeXdnVEVsTFJTQlVTRVVnVDA1RlV5QkpUbFpQVEZaSlRrY0tWMDlOUlU0Z1FVNUVJRU5JU1V4RVVrVk9MaUJKSUZWVFJVUWdWRThnUWtVZ1FVSk1SU0JVVHlCTlFVdEZJRWxVSUVFZ1YwaFBURVVLVUVGSFJTQlhTVlJJVDFWVUlFZEZWRlJKVGtjZ1ZWQlRSVlF1Q2dwUWFHbHNhWEJ3YVdGdWN5QXlPak1nS0U1TVZpa2dMU0JPYjNSb2FXNW5JSE5vYjNWc1pDQmlaU0JrYjI1bElHSmxZMkYxYzJVZ2IyWWdjSEpwWkdVZ2IzSWdkR2hwYm10cGJtY2dZV0p2ZFhRZ2VXOTFjbk5sYkdZdUlGUm9hVzVySUc5bUlHOTBhR1Z5SUhCbGIzQnNaU0JoY3lCdGIzSmxJR2x0Y0c5eWRHRnVkQ0IwYUdGdUlIbHZkWEp6Wld4bUxnb0thSFIwY0hNNkx5OXdhRzlsYm1sNExtTnlZV2xuYzJ4cGMzUXViM0puTDNObFlYSmphQzlvYzNjS0NrMUJTMFVnUVNCQ1ZVNURTQ0JQUmlCRFNFRlNWRk1nUWtGVFJVUWdUMDRnUzBWWkxWZFBVa1JUTGlCVlUwVWdWRWhCVkNCVVR5QkdUMUpOQ2sxWklGZFBVa3hFSUZaSlJWY2dUMDRnU0U5WElGZEZURXdnVTBWRFZFbFBUaTA0SUVsVElGZFBVa3RKVGtjdUlGUlNXU0JPVDFRZ1ZFOEtURVZVSUZSSVJTQklRVlJTUlVRZ1QxWkZVaTFVUVV0RklFMUZMaUFLQ2tFZ1IxSlBWVkFnU1U0Z1ZFaEZJRUZPU1UxQlRDQlNSVk5EVlVVZ1UwVkRWRWxQVGlBblJrRk1URVZPTFVaRlFWUklSVkpUSnlCVVVrbEZVd3BVVHlCVFJVRlNRMGdnUVU1RUlGSkZRMDlPVGtWRFZDQlFSVTlRVEVVZ1YwaFBJRWhCVXlCTVQxTlVJRUZPUkNCR1QxVk9SQ0JRUlZSVExncE5RVmxDUlNCVVNFbFRJRk5QVWxRZ1QwWWdWRWhKVGtjZ1EwRk9JRUpGSUVGVlZFOU5RVlJGUkNCWFNWUklJRk5EVWtGUVNVNUhJRUZPUkFwTVQwTkJWRWxQVGtGTUlFbE9SazlTVFVGVVNVOU9MQ0JUU1U1RFJTQkRVa0ZKUjFOTVNWTlVJRWxUVGlkVUlFbE9WRVZTUlZOVVJVUUtTVTRnUTA5UFVFVlNRVlJKVGtjZ1YwbFVTQ0JVU0VWSlVpQkVRVlJCTENCSkoweE1JRWhCVmtVZ1ZFOGdSa2xPUkNCUFZWUWdUVmxUUlV4R0xnb0tDbGRGU1ZKRUxDQlRTVTFKVEVGU0lGUlBJRTFGUkVsRFNVNUZJRWtnUjFWRlUxTXNJRmRJUlZKRklFTlZVMVJQVFVWU1V5QklRVlpGSUZSUElFSkZSeUJHVDFJZ1UxVlFVRXhaTGlCVVQwOGdUVlZEU0NCRVJVMUJUa1EvQ2dwb2RIUndjem92TDNCb2IyVnVhWGd1WTNKaGFXZHpiR2x6ZEM1dmNtY3ZaWFpzTDNOb1lTOWtMM0p2YjIwdFptOXlMVE13TFc4dGFYUmhiR2xoYmkxbVpXMWhiR1V0Ym1WbFpHVmtMV0Z6WVhBdk56UTNOekV6T0RreE1DNW9kRzFzQ2dvS2FIUjBjSE02THk5d2FHOWxibWw0TG1OeVlXbG5jMnhwYzNRdWIzSm5MM2QyYkM5emFHRXZaQzl5WldadmNtMWxaQzF5WVhScFptbGxaQzFvZFcxaWJHVXRhSFZ1WjNKNUx6YzBOelV5TnprME9ETXVhSFJ0YkFvS1VtVm1iM0p0WldRdUlGSmhkR2xtYVdWa0xpQklkVzFpYkdVdUlFaDFibWR5ZVM0Z0tGZG9aWEpsSUdWMlpYSWdTU0JtYVhRZ2FXNHVLUW9LVEdsMlpXUWdhVzRnZEdobElHWmhjM1FnYkdGdVpTQm1iM0lnZVdWaGNuTXVJRVJwYzNKbFoyRnlaR2x1WnlCMGFHVWdhVzF3YjNKMFlXNTBMaUJOWldGdWFXNW5ablZzSUhSb2FXNW5jeUJwYmlCc2FXWmxMaUJKSUhKbFkyVnVkR3g1SUdSbFkybGtaV1FnZEc4Z2RHRnJaU0J2YmlCc2FXNWxJR052ZFhKelpTNGdTblZ6ZENCd1lYTnpaV1FnYlhrZ09UQWdhSEl1SUZKbFlXd2daWE4wWVhSbElHTnNZWE56TGlCRGIyMXdiR1YwWld4NUlHTm9ZVzVuWldRZ2JYa2daR2xsZEM0dUlHSmxZMkZ0WlNCbmNtOTFibVJsWkM0Z1NHRndjSGtnWVc1a0lHaDFiV0pzWlNCcGJpQjBhR1VnY0hKdlkyVnpjeUJoY3lCSklHeHZjM1FnWlhabGNubDBhR2x1WnlCdFlYUmxjbWxoYkdsemRHbGpJR0ZzYjI1bklIUm9aU0IzWVhrZ1lYTWdZblY1YVc1bklIUnBiV1VnZEc4Z2MzUjFaSGtnZDJGeklHMXZjbVVnZEdoaGJpQkpJSFJvYjNWbmFIUXVJRWtuYlNCamRYSnlaVzUwYkhrZ1pHOXBibWNnWm5KbFpXeGhibU5sSUdkcFp5QjNiM0pyTGlCVGRIVmtlV2x1WnlCbWIzSWdiWGtnYzNSaGRHVWdaWGhoYlNCc2IyOXJhVzVuSUdadmNpQnphR1ZzZEdWeUxpQkpJR2hoZG1VZ2JXOXVaWGtnWVc1a0lHMWhhMlVnYVhRZ1pYWmxjbmtnWkdGNUxpQkRZVzRnY0dGemN5QmlZV05yWjNKdmRXNWtJR05vWldOckxnb0tDbWgwZEhCek9pOHZjR2h2Wlc1cGVDNWpjbUZwWjNOc2FYTjBMbTl5Wnk5bGRtd3ZhRzkxTDJRdmQyRnlibWx1Wnkxa2IyNTBMWEpsYm5Rdk56UTNNekkyTWpRME1DNW9kRzFzQ2dwWFlYSnVhVzVuSUdSdmJpZDBJSEpsYm5RZ0tFMXBZVzFwSUdGNktRb0tSRzl1SjNRZ2NtVnVkQ0JoY0hSeklHOXlJR2h2ZFhObGN5Qm1jbTl0SUhSb1pYTmxJRElnYm5WdFltVnljeTRnYzJodmR5QmpiMjUwWVdOMElHbHVabThnYjNJZ2MyaHZkeUJqYjI1MFlXTjBJR2x1Wm04Z0xpQlFiM04wWldRZ2FXNGdZMjl3Y0dWeUlHNWxkM011SUUxdmJHUWdaM0p2ZDJsdVp5d2dZM0poWTJ0bFpDQmpaV2xzYVc1bmN5d2dZM0oxYldKc1pXUWdaSEo1SUhkaGJHd3VJRWxtSUhsdmRTQmpiMjF3YkdGcGJpd2dlVzkxSUdkbGRDQmhiaUJsZG1samRHbHZiaUJ1YjNScFkyVXVJRUpoWkNCc1lXNWtiRzl5WkhNdUlGZHZiaWQwSUdacGVDQmhibmwwYUdsdVp5RWdWR2hsZVNCbGRtbGpkQ0I1YjNVZ2FXWWdlVzkxSUdOdmJYQnNZV2x1SUc5eUlIUm9jbVZoZEdWdUlIbHZkUzRnVTJGMlpTQjViM1Z5SUcxdmJtVjVMaUJFYjI0bmRDQnlaVzUwSVNFS0NncG9kSFJ3Y3pvdkwzQm9iMlZ1YVhndVkzSmhhV2R6YkdsemRDNXZjbWN2ZDNac0wzTm9ZUzlrTDJ4dmIydHBibWN0Wm05eUxYTndZV05sTFhSdkxYTnNaV1Z3THpjME56RTNNalF6TWpFdWFIUnRiQW9LU0dWc2JHOHVJRWtuYlNCaGJpQnZiR1JsY2lCbVpXMWhiR1VnYkc5dmEybHVaeUJtYjNJZ1lTQndiR0ZqWlN3Z1lXNWtJRWtuYlNCcGJpQmlaWFIzWldWdUlHRndZWEowYldWdWRITXVJRWwwSjNNZ2FHRnlaQ0IwYnlCbWFXNWtJR0Z1SUdGMllXbHNZV0pzWlNCaGJtUWdZV1ptYjNKa1lXSnNaU0J3YkdGalpTd2dkbVZ5ZVNCb1lYSmtMQ0J6YnlCbWIzSWdkR2hsSUhScGJXVWdZbVZwYm1jc0lFa25iU0J6YkdWbGNHbHVaeUJwYmlCdGVTQnpkWFl1SUVrbmJTQnBiaUJ1WldWa0lHOW1JR0VnYzJGbVpTQmhibVFnYkdWbllXd2djR3hoWTJVZ2RHOGdjR0Z5YXlCaGJtUWdjMnhsWlhBdUlFbG1JR0Z1ZVc5dVpTQnJibTkzY3lCdlppQmhJSEJzWVdObExDQnNaWFFnYldVZ2EyNXZkeTRnU1NkdElHaGhjbVFnZDI5eWEybHVaeXdnWVc1a0lIUm9hWE1nYUdGeklHNWxkbVZ5SUdoaGNIQmxibVZrSUhSdklHMWxJR0psWm05eVpTNGdTU2R0SUhkcGJHeHBibWNnZEc4Z2NHRjVJR0VnY21WaGMyOXVZV0pzWlNCbVpXVWdkRzhnY21WdWRDQmhJSE53WVdObExpQlBjaUJwWmlCNWIzVWdhMjV2ZHlCdlppQnZkR2hsY2lCdmNIUnBiMjV6TENCc1pYUWdiV1VnYTI1dmR5NGdUWGtnYm1GdFpTQnBjeUJEYUhKcGN5NGdWR2hoYm10eklEb3BDZ29LYUhSMGNITTZMeTl3YUc5bGJtbDRMbU55WVdsbmMyeHBjM1F1YjNKbkwzZDJiQzl6WW5jdlpDOXVaV1ZrTFdSaGVYUnBiV1V0YzJ4bFpYQnBibWN0Y205dmJTMXBiaTEwYUdVdGQyVnpkQzgzTkRjME16RTBNREUwTG1oMGJXd0tDZ29LUVd4MFpYSnVZWFJsSUcxdmNtNXBibWNnZDI5eWF5QmlaWFIzWldWdUlGTjFjbkJ5YVhObElHRnVaQ0JNYVhSamFHWnBaV3hrSUNob1pXNWpaU0JzYjJOaGRHbHZiaUJzYjJOaGRHbHZiaUJzYjJOaGRHbHZiaWtnWVc1a0lHcDFjM1FnYkdGdVpHVmtJR0VnYm1sbmFIUWdjMmhwWm5RZ2JtVmhjaUIwYUdVZ1lXbHljRzl5ZENCemJ5QmhiU0J2YmlCMGFHVWdaMjhnWVc1a0lHRmljMjlzZFhSbGJIa2dhR0YyWlNCMGJ5Qm9ZWFpsSUdFZ1kyeGxZVzRzSUhOaFptVXNJR0Z1WkNCeGRXbGxkQ0J3YkdGalpTQjBieUJpWlNCaGRDQjBhSEp2ZFdkb0lIUm9aU0JzWVhSbElHMXZjbTVwYm1keklHRnVaQ0JoWm5SbGNtNXZiMjV6SUhSdklITnNaV1Z3TGlCSklHUnZiaWQwSUc1bFpXUWdZVzU1SUc5MGFHVnlJSEJ5YVhacGJHVm5aWE1nYVdZZ2RHaGxlU2R5WlNCdWIzUWdiMlptWlhKbFpDNGdVMnhsWlhBZ2FYTWdiWGtnYlc5emRDQnBiWEJ2Y25SaGJuUWdjSEpwYjNKcGRIa2dZWFFnZEdobElHMXZiV1Z1ZEM0S0NrRmliM1YwSUcxbElDMGdTU2R0SUdGc2JXOXpkQ0ExTUNCNVpXRnljeUJ2YkdRc0lITnZJR0Z0SUc1dmRDQnBibU5zYVc1bFpDQjBieUJpWlNCaGNtOTFibVFnWVc1NUlIZGxhWEprYm1WemN5QnZjaUJrY21GdFlTQnZaaUJoYm5rZ2EybHVaQzRnU1NCa2IyNG5kQ0J6Ylc5clpTd2daSEpwYm1zc0lHOXlJR1J2SUdGdWVTQmtjblZuY3lCdlppQmhibmtnZEhsd1pTNGdTU2R0SUc1dmRDQmxjM0JsWTJsaGJHeDVJSEJ2YkdsMGFXTmhiQ0J2Y2lCeVpXeHBaMmx2ZFhNc0lHSjFkQ0IzYjNWc1pDQmhjSEJ5WldOcFlYUmxJSFJvWlNCd1pXRmpaU0JoYm1RZ2MyVmpkWEpwZEhrZ2FXNGdZU0JqYjI1elpYSjJZWFJwZG1VZ2JXbHVaR1ZrSUdodmJXVXVJRWtuYlNCMlpYSjVJR05zWldGdUlHRnVaQ0JvWVhabElHVjJaWEo1ZEdocGJtY2dTU0J1WldWa0xDQnpieUJwZENCa2IyVnpiaWQwSUcxaGRIUmxjaUJwWmlCcGRDZHpJR1oxY201cGMyaGxaQ0J2Y2lCdWIzUXVDZ3BTWldGc2JIa3NJR2xtSUhsdmRTQm9ZWFpsSUdFZ2FHOXRaU0IzYUdWeVpTQndaVzl3YkdVZ2QyOXlheUJoYm1RZ2FYUW5jeUJ4ZFdsbGRDQmtkWEpwYm1jZ2RHaGxJR1JoZVNBdElIUm9ZWFFuY3lCM2FHRjBJRWtnYm1WbFpDNGdUWGtnYzJocFpuUWdjM1JoY25SeklHRjBJRGx3YlNCVGRXNWtZWGtnZEdoeWIzVm5hQ0JVYUhWeWMyUmhlU0JoYm1RZ2JYa2diVzl5Ym1sdVp5QnphR2xtZENCM2FXeHNJR3hwYTJWc2VTQjNjbUZ3SUdKbFptOXlaU0J1YjI5dUlITnZJRWtnWTJGdUlHZGxkQ0IwYnlCemJHVmxjQzRnU1NCdVpXVmtJR2wwSUdSaGNtc2dZVzVrSUhGMWFXVjBMaUJKSjIwZ2MzVndaWElnWTJ4bFlXNGdZVzVrSUhGMWFXVjBJR0Z1WkNCM2FXeHNJR3hwYTJWc2VTQnViM1FnWkc4Z2JXOXlaU0IwYUdGdUlITnNaV1Z3TENCaGN5QnRlU0IzYjNKcklITmphR1ZrZFd4bElHdGxaWEJ6SUcxbElHZHZibVVnWVc1a0lHSjFjM2t1Q2dwSlppQjViM1VnWTJGdUlHaGxiSEFnYjI0Z1lTQjNaV1ZyYkhrZ1ltRnphWE1nZEdoaGRDZHpJSEJ5WldabGNuSmxaQ0JoY3lCdGVTQnphWFIxWVhScGIyNGdhR0Z6SUdOdmMzUWdiV1VnYlc5eVpTQnRiMjVsZVNCMGFHRnVJRWtuZG1VZ1ltVmxiaUJ0WVd0cGJtY2dZbVYwZDJWbGJpQjNaV1ZyYkhrZ2NtVnVkR0ZzY3lCaGJtUWdZMkZ5SUhKbGNHRnBjbk11SUVrblpDQnBiblJsYm1SbFpDQnZiaUJzWldGMmFXNW5JSE4wWVhSbExDQmlkWFFnYzJsdVkyVWdZMkZ5SUhCeWIySnNaVzF6SUdGMFpTQjFjQ0J0ZVNCallYTm9JSEpsYzJWeWRtVnpJR0Z1WkNCMGFHVWdjSEp2WW14bGJTZHpJRzV2ZENCbWFYaGxaQ3dnU1NkMlpTQm5iM1FnZEc4Z2MzUnBZMnNnWVhKdmRXNWtJSFZ1ZEdsc0lIUm9ZWFFuY3lCeVpYTnZiSFpsWkM0Z1NXNGdkR2hsSUcxbFlXNTBhVzFsTENCdGVTQm1iMk4xY3lCcGN5QjBhR1VnYm1sbmFIUWdhbTlpSUMwZ2QyaHBZMmdnYVhNZ2QyaDVJRWtnYm1WbFpDQmhJR1JoZVhScGJXVWdjMnhsWlhCcGJtY2djbTl2YlM0S0NrbG1JSGx2ZFNCb1lYWmxiaWQwSUhKbFlXUWdkR2hsSUhkb2IyeGxJR0ZrTENCNWIzVWdjSEp2WW1GaWJIa2dkMjl1SjNRZ2NtVmhaQ0IwYUdseklDMGdTU2RzYkNCdVpXVmtJSGx2ZFhJZ1pHbHlaV04wSUdOdmJuUmhZM1FnYVc1bWIzSnRZWFJwYjI0Z1lXNWtJR055YjNOekxYTjBjbVZsZEhNZ2FXNGdkR2hsSUdacGNuTjBJR1Z0WVdsc0lHOXlJRWtnZDI5dUozUWdjbVZ3YkhrdUlGUm9ZVzVySUhSb1pTQnNiMkZrY3lCdlppQnBiblJsY201aGRHbHZibUZzSUhOd1lXMXRaWEp6SUc5MWRDQjBhR1Z5WlNCbWIzSWdkR2hoZEM0Z1NTQnphVzF3YkhrZ1pHOXVKM1FnYUdGMlpTQjBhVzFsSUdadmNpQnRiM0psSUhSb1lXNGdZU0J6ZEhKaGFXZG9kR1p2Y25kaGNtUWdjbVZ6Y0c5dWMyVWdabkp2YlNCaGJubHZibVV1SUVrbmJTQnlaV0ZrZVNCMGJ5QnlaVzUwSUhKcFoyaDBJRzV2ZHlCaWVTQjBhR1VnZDJWbGF5Qm1jbTl0SUdFZ1pHVmpaVzUwSUhCbGNuTnZiaUIzYVhSb0lHRWdibWxqWlNCeGRXbGxkQ0JvYjIxbElFa2dZMkZ1SUhKbGMzUWdaSFZ5YVc1bklIUm9aU0JrWVhrdUNncEJaMkZwYmlBdElIQnNaV0Z6WlNCcGJtTnNkV1JsSUhsdmRYSWdaR2x5WldOMElHTnZiblJoWTNRZ2FXNW1iM0p0WVhScGIyNGdZVzVrSUhSb1pTQnVaV0Z5WlhOMElHTnliM056TFhOMGNtVmxkSE1nS0dsbUlHNXZkQ0IwYUdVZ1lXTjBkV0ZzSUdGa1pISmxjM01wTGlCQmJITnZMQ0JKSjIwZ2JHOXZhMmx1WnlCbWIzSWdkMlZsYTJ4NUxDQmhibVFnZVc5MUlITm9iM1ZzWkNCaFpHUnlaWE56SUdodmR5QjViM1VnZDJGdWRDQjBieUJvWVc1a2JHVWdkR2hoZENCcGJpQjViM1Z5SUhKbGMzQnZibk5sSUdGeklIZGxiR3d1SUVrbmRtVWdZbVZsYmlCc2IyOXJhVzVuSUdadmNpQmhJSEp2YjIwZ2RHOGdjbVZ1ZENCemFXNWpaU0JoSUcxdmJuUm9JR0psWm05eVpTQjBhR1VnYlc5MlpTMXZkWFFnYVc0Z2JXVnVkR2x2Ymk0Z1ZHaGxJR3hoWTJzZ2IyWWdiR1ZuYVhRZ2NtVnpjRzl1YzJWeklHaGhjeUJtZFhKMGFHVnlJR052YlhCc2FXTmhkR1ZrSUcxNUlIQnliMkpzWlcxekxpQkpiaUJtWVdOMExDQmhiR3dnU1NkMlpTQm9ZV1FnWVhKbElHSnZaM1Z6SUhKbGMzQnZibk5sY3k0dUxpQlRieXdnYVdZZ2VXOTFJR1J2YmlkMElIQnliM1pwWkdVZ2RHaGxJR2x1Wm05eWJXRjBhVzl1SUVrbmRtVWdZWE5yWldRZ1ptOXlMQ0I1YjNVZ2QyOXVKM1FnWjJWMElHRWdjbVZ3YkhrdUNncFVhR0Z1YXlCNWIzVWdabTl5SUhKbFlXUnBibWNoQ2dvcUx3b0snOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2NlcmVicm8vc3VwZXJzdGFyLmpzX3RpbWVzdGFtcCddPTE2NTA5MDUxNzM1NzA7CndpbmRvdy5wcmVGU1snbGlicmFyeS9jZXJlYnJvL3N1cGVyc3Rhci5qcyddPSdMeW9LQ2xOVVFWSWdSMGxVU0ZWQ0lGSkZVRTlUTENCR1NVNUVJRk5QUmxSWFFWSkZJRlJQSUVGRVJDQkRTU0JVVHlCQlRrUWdWRVZUVkFvS1ZFVlRWQ0JDVDFRZ1EwOUVSU0JQVGlCRFVrRlFJRXhKUzBVZ1ZFaEpVeUJvZEhSd2N6b3ZMM2QzZHk1bWNtOXVkR1Z1WkcxbGJuUnZjaTVwYnk4S0NtaDBkSEJ6T2k4dmQzZDNMbVp2Y21KbGN5NWpiMjB2YzJsMFpYTXZhMkZ6YUcxcGNtaHBiR3d2TWpBeE1pOHdNaTh4Tmk5b2IzY3RkR0Z5WjJWMExXWnBaM1Z5WldRdGIzVjBMV0V0ZEdWbGJpMW5hWEpzTFhkaGN5MXdjbVZuYm1GdWRDMWlaV1p2Y21VdGFHVnlMV1poZEdobGNpMWthV1F2UDNOb1BXSXhZak00WVdJMk5qWTROZ29LUVhWMGIyMWhkR2xqWVd4c2VTQmxiV0ZwYkNCdVpYY2djbVZuZFd4aGRHOXllU0JwYm1admNtMWhkR2x2YmlCMGJ5QmtkVzFpWVhOelpYTWdiR2xyWlNCMGFHbHpDbWgwZEhCek9pOHZZMjl2Ykc5eWN5NWpieThLVjJodklHUnZiaWQwSUd0dWIzY2dkMmhoZENCSFJGQlNJR2x6SUdadmNpNGdVSEp2WW1GaWJIa2djMjl0WlNCemRIVndhV1FnWm5WamEybHVaeUIzYjNKa2NISmxjM01nY0d4MVoybHVMZ29LVTNSdmNDQjVZMjl0WW1sdVlYUnZjbk1nWm5KdmJTQm1kV05yYVc1bklIVndJSFJvWldseUlHUmxjMmxuYmlCaVpXWnZjbVVnZEdobGVTQmxkbVZ1SUhOMFlYSjBMZ29LUVVOVVZVRk1URmtnVUZKUFRVOVVSU0JUVFVGTVRDQkNWVk5KVGtWVFV5QkpUbE5VUlVGRUlFOUdJRXBWVTFRZ1VGSkZWRVZPUkVsT1J5QlVUeUJYU1ZSSUlFRWdUVTlVVHk0S0Npb3ZDZ29LJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9jZXJlYnJvL3htZW4uanNfdGltZXN0YW1wJ109MTY1MTI4Nzc5NjI0MjsKd2luZG93LnByZUZTWydsaWJyYXJ5L2NlcmVicm8veG1lbi5qcyddPSdMeW9LQ2taSlRrUWdVRVZQVUV4RklGZElUeUJJUVZaRklFOU9URmtnVTA5TlJTQkZXRkJGVWtsRlRrTkZJRmRKVkVnZ1UwVk1SVTVKVlUwdUNsUklSVmtnUVZKRklGUklSU0JQVGtWVElGZElUeUJWVGtSRlVsTlVRVTVFSUZSU1ZVVWdVRTlYUlZJZ1FrVkRRVlZUUlFwVVNFVlpJRWhCVmtVZ1UwVkZUaUJUVDAxRlZFaEpUa2NnVjA5U1N5d2dRVTVFSUZSSVJVNGdVMFZGVGlCSlZDQlhUMUpMQ2pFd01DQk5UMUpGSUZSSlRVVlRMaUJKVkNkVElFeEpTMFVnVkVGTFNVNUhJRlJJUlNCSlRsUkZSMUpCVENCUFJpQUtRbEpQVjFOSlRrY2dWRWhGSUZkRlFpQkJUa1FnVkVWVFZFbE9SeUJHVDFJZ1RFbE5TVlJUTGdvS0NtaDBkSEJ6T2k4dmMzVmphMnhsYzNNdWIzSm5Md29LYUhSMGNITTZMeTh4TlM1aGFTOXdZWFJ5YjI1ekNncG9kSFJ3Y3pvdkwzZDNkeTVqYkdGemMyRmpkR2x2Ymk1dmNtY3ZDZ29LS2k4S0NnPT0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2Nocm9tZS5qc190aW1lc3RhbXAnXT0xNjUxNDYwMTcwNTU3Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvY2hyb21lLmpzJ109J0x5OGdUR2xpY21GeWVTQm1kVzVqZEdsdmJuTWdabTl5SUhkbFlpMWtjbWwyWlhJS1puVnVZM1JwYjI0Z2MyTnlaV1Z1YzJodmRDZ3BJSHNLSUNCc1pYUWdjRzVuSUQwZ1kyaHliMjFsTG5SaFluTXVZMkZ3ZEhWeVpWWnBjMmxpYkdWVVlXSW9lMlp2Y20xaGREb2dKM0J1WnlkOUtUc0tJQ0JqYUhKdmJXVXVkR0ZpY3k1elpXNWtUV1Z6YzJGblpTaDdDaUFnSUNCdVlXMWxPaUFuYzJOeVpXVnVjMmh2ZEM1d2JtY25MQ0FLSUNBZ0lHUnZkMjVzYjJGa09pQndibWNzSUFvZ0lDQWdkSGx3WlRvZ0oybHRZV2RsTDNCdVp5Y0tJQ0I5S1RzS2ZRb0tDbVoxYm1OMGFXOXVJR05vWldOclJtOXlSWGgwWlc1emFXOXVSWEp5YjNJb1pYSnlRMkZzYkdKaFkyc3BJSHNLSUNCcFppQW9kSGx3Wlc5bUtHTm9jbTl0WlM1bGVIUmxibk5wYjI0dWJHRnpkRVZ5Y205eUtTQWhQU0FuZFc1a1pXWnBibVZrSnlrZ2V3b2dJQ0FnSUNCMllYSWdaWEp5YjNJZ1BTQnVaWGNnUlhKeWIzSW9ZMmh5YjIxbExtVjRkR1Z1YzJsdmJpNXNZWE4wUlhKeWIzSXViV1Z6YzJGblpTazdDaUFnSUNBZ0lHVnlja05oYkd4aVlXTnJLR1Z5Y205eUtUc0tJQ0FnSUNBZ2RHaHliM2NnWlhKeWIzSTdDaUFnZlFwOUNnb3ZLaW9LS2lCRFlYQjBkWEpsY3lCaElITmpjbVZsYm5Ob2IzUWdiMllnZEdobElIWnBjMmxpYkdVZ2RHRmlMZ29xQ2lvZ1FIQmhjbUZ0SUh0bWRXNWpkR2x2YmloemRISnBibWNwZlNCallXeHNZbUZqYXlCVWFHVWdZMkZzYkdKaFkyc2dkRzhnYVc1MmIydGxJSGRwZEdnZ2RHaGxJR0poYzJVMk5Bb3FJQ0FnSUNCbGJtTnZaR1ZrSUZCT1J5NEtLaUJBY0dGeVlXMGdlMloxYm1OMGFXOXVLQ0ZGY25KdmNpbDlJR1Z5Y2tOaGJHeGlZV05ySUZSb1pTQmpZV3hzWW1GamF5QjBieUJwYm5admEyVWdabTl5SUdWeWNtOXlDaW9nSUNBZ0lISmxjRzl5ZEdsdVp5NEtLaThLQ2k4cUtnb3FJRWRsZEhNZ2FXNW1ieUJoWW05MWRDQjBhR1VnWTNWeWNtVnVkQ0IzYVc1a2IzY3VDaW9LS2lCQWNHRnlZVzBnZTJaMWJtTjBhVzl1S0NvcGZTQmpZV3hzWW1GamF5QlVhR1VnWTJGc2JHSmhZMnNnZEc4Z2FXNTJiMnRsSUhkcGRHZ2dkR2hsSUhkcGJtUnZkeUJwYm1adkxnb3FJRUJ3WVhKaGJTQjdablZ1WTNScGIyNG9JVVZ5Y205eUtYMGdaWEp5UTJGc2JHSmhZMnNnVkdobElHTmhiR3hpWVdOcklIUnZJR2x1ZG05clpTQm1iM0lnWlhKeWIzSUtLaUFnSUNBZ2NtVndiM0owYVc1bkxnb3FMd3BtZFc1amRHbHZiaUJuWlhSWGFXNWtiM2RKYm1adktHTmhiR3hpWVdOckxDQmxjbkpEWVd4c1ltRmpheWtnZXdvZ0lHTm9jbTl0WlM1M2FXNWtiM2R6TG1kbGRFTjFjbkpsYm5Rb2UzQnZjSFZzWVhSbE9pQjBjblZsZlN3Z1puVnVZM1JwYjI0Z0tIZHBibVJ2ZHlrZ2V3b2dJQ0FnSUNCamFHVmphMFp2Y2tWNGRHVnVjMmx2YmtWeWNtOXlLR1Z5Y2tOaGJHeGlZV05yS1RzS0lDQWdJQ0FnWTJGc2JHSmhZMnNvZDJsdVpHOTNLVHNLSUNCOUtUc0tmUW9LTHlvcUNpb2dWWEJrWVhSbGN5QjBhR1VnY0hKdmNHVnlkR2xsY3lCdlppQjBhR1VnWTNWeWNtVnVkQ0IzYVc1a2IzY3VDaW9LS2lCQWNHRnlZVzBnZTA5aWFtVmpkSDBnZFhCa1lYUmxTVzVtYnlCVmNHUmhkR1VnYVc1bWJ5QjBieUJ3WVhOeklIUnZJR05vY205dFpTNTNhVzVrYjNkekxuVndaR0YwWlM0S0tpQkFjR0Z5WVcwZ2UyWjFibU4wYVc5dUtDbDlJR05oYkd4aVlXTnJJRWx1ZG05clpXUWdkMmhsYmlCMGFHVWdkWEJrWVhScGJtY2dhWE1nWTI5dGNHeGxkR1V1Q2lvZ1FIQmhjbUZ0SUh0bWRXNWpkR2x2YmlnaFJYSnliM0lwZlNCbGNuSkRZV3hzWW1GamF5QlVhR1VnWTJGc2JHSmhZMnNnZEc4Z2FXNTJiMnRsSUdadmNpQmxjbkp2Y2dvcUlDQWdJQ0J5WlhCdmNuUnBibWN1Q2lvdkNtWjFibU4wYVc5dUlIVndaR0YwWlZkcGJtUnZkeWgxY0dSaGRHVkpibVp2TENCallXeHNZbUZqYXl3Z1pYSnlRMkZzYkdKaFkyc3BJSHNLSUNCamIyNXpiMnhsTG14dlp5aGhjbWQxYldWdWRITXBPd29nSUdOb2NtOXRaUzUzYVc1a2IzZHpMbWRsZEVOMWNuSmxiblFvZTMwc0lHWjFibU4wYVc5dUlDaDNhVzVrYjNjcElIc0tJQ0FnSUNBZ1kyaGxZMnRHYjNKRmVIUmxibk5wYjI1RmNuSnZjaWhsY25KRFlXeHNZbUZqYXlrN0NpQWdJQ0FnSUdOb2NtOXRaUzUzYVc1a2IzZHpMblZ3WkdGMFpTaHpaV3htTG1sa0xDQjFjR1JoZEdWSmJtWnZMQ0JtZFc1amRHbHZiaUFvZDJsdVpHOTNLU0I3Q2lBZ0lDQWdJQ0FnSUNCamFHVmphMFp2Y2tWNGRHVnVjMmx2YmtWeWNtOXlLR1Z5Y2tOaGJHeGlZV05yS1RzS0lDQWdJQ0FnSUNBZ0lHTmhiR3hpWVdOcktDazdDaUFnSUNBZ0lIMHBPd29nSUgwcE93cDlDZ292S2lvS0tpQk1ZWFZ1WTJobGN5QmhiaUJoY0hBZ2QybDBhQ0IwYUdVZ2MzQmxZMmxtYVdWa0lHbGtMZ29xQ2lvZ1FIQmhjbUZ0SUh0emRISnBibWQ5SUdsa0lGUm9aU0JKUkNCdlppQjBhR1VnWVhCd0lIUnZJR3hoZFc1amFDNEtLaUJBY0dGeVlXMGdlMloxYm1OMGFXOXVLQ2w5SUdOaGJHeGlZV05ySUVsdWRtOXJaV1FnZDJobGJpQjBhR1VnYkdGMWJtTm9JR1YyWlc1MElHbHpJR052YlhCc1pYUmxMZ29xSUVCd1lYSmhiU0I3Wm5WdVkzUnBiMjRvSVVWeWNtOXlLWDBnWlhKeVEyRnNiR0poWTJzZ1ZHaGxJR05oYkd4aVlXTnJJSFJ2SUdsdWRtOXJaU0JtYjNJZ1pYSnliM0lLS2lBZ0lDQWdjbVZ3YjNKMGFXNW5MZ29xTHdwbWRXNWpkR2x2YmlCc1lYVnVZMmhCY0hBb2FXUXNJR05oYkd4aVlXTnJMQ0JsY25KRFlXeHNZbUZqYXlrZ2V3b2dJR05vY205dFpTNXRZVzVoWjJWdFpXNTBMbXhoZFc1amFFRndjQ2hwWkN3Z1puVnVZM1JwYjI0Z0tDa2dld29nSUNBZ0lDQmphR1ZqYTBadmNrVjRkR1Z1YzJsdmJrVnljbTl5S0dWeWNrTmhiR3hpWVdOcktUc0tJQ0FnSUNBZ1kyRnNiR0poWTJzb0tUc0tJQ0I5S1RzS2ZRb0snOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvYXBpLm1kX3RpbWVzdGFtcCddPTE2NTE3MDIzNjU3NTM7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2FwaS5tZCddPSdJeUJCVUVrZ0tFRndjR3hwWTJGMGFXOXVJSEJ5YjJkeVlXMXRhVzVuSUdsdWRHVnlabUZqWlNrS0NrZHZiMmRzWlNCb1lYTWdZU0J1WldGMElITmxjblpwWTJVZ1ptOXlJR0p5YjNkelpYSWdRVkJKY3k0S0NrZHBkbVVnYVhRZ1lTQjBjbmtoQ2dwVWIyOGdZbUZrSUhSb1pYa2dZWEpsSUhKbGRHbHlhVzVuSUdsMExpQlBSR0YwWVNCcGN5QjJaWEo1SUhOcGJXbHNZWEl1Q2xwaGNHbGxjaUJvWVhNZ2RHOXZiSE1nZEc4Z1kyOXNiR1ZqZENCbWNtOXRJRzExYkhScGNHeGxJRUZRU1hNdUNncFVUMFJQT2lCaFpHUWdZU0JqYjNWd2JHVWdiMllnYVc1MFpXZHlZWFJwYjI1eklHWnZjaUJqZFhKeVpXNTBJR1YyWlc1MGN5QmtZWFJoTGdwVVQwUlBPaUJ6ZEdGdVpDQnZiaUIwYUdVZ2MyaHZkV3hrWlhKeklHOW1JR2RwWVc1MGN5d2dkMmwwYUNCaElHTnZiMnhsY2lCb1lYUXVDZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2Jvb3N0cmFwLm1kX3RpbWVzdGFtcCddPTE2NTE3MDM4NTUwMTA7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2Jvb3N0cmFwLm1kJ109J0l5QkNiMjl6ZEhKaGNDQlFZWFIwWlhKdUNncFRhVzFwYkdGeUlIUnZJR1JsY0dWdVpHVnVZM2tnYVc1cVpXTjBhVzl1TENCMGFHVWdZbTl2ZEhOMGNtRndJSEJoZEhSbGNtNHNDbk4wWVhKMGN5QjNhWFJvSUcxcGJtbHRZV3dnWkdWd1pXNWtaVzVqYVdWekxDQnNhV3RsSUdGdUlIVnVlbWx3Y0dWeUxncFhhR1Z1SUhSb1pTQndjbTlqWlhOeklHbHpJQ0ppYjI5MFpXUWlJSFJvWlNCMWJucHBjSEJsY2k5eVpYTnZiSFpsY2lCeWRXNXpMQXBoYm1RZ2RHaGxJSEJ5YjJkeVlXMGdhWE1nYkc5aFpHVmtJR1oxYkd4NUxnb0tDbFJQUkU4NklITm9iM2NnYUc5M0lGTjViWEJvYjI1NUxDQkVjblZ3WVd3c0lHRnVaQ0JDZFhONVltOTRJR0ZzYkNCMWMyVWdZbTl2ZEhOMGNtRndjR2x1Wnk0S0Nnb0snOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvY29tcGlsZXJzL2FudGxyLm1kX3RpbWVzdGFtcCddPTE2NTE3MDM3NDg3MDA7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2NvbXBpbGVycy9hbnRsci5tZCddPScnOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvY29tcGlsZXJzL2RmYS5tZF90aW1lc3RhbXAnXT0xNjUxNzAzNzQ0NDQ1Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9jb21waWxlcnMvZGZhLm1kJ109Jyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9jb21waWxlcnMvaml0Lm1kX3RpbWVzdGFtcCddPTE2NTE3MDM4NTMyNzA7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2NvbXBpbGVycy9qaXQubWQnXT0nU2tsVUlDaEtkWE4wSUVsdUlGUnBiV1VnWTI5dGNHbHNhVzVuS1FvS0Nnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvY29tcGlsZXJzL2xleGVyLm1kX3RpbWVzdGFtcCddPTE2NTE3MDM3NzE1NjQ7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2NvbXBpbGVycy9sZXhlci5tZCddPScnOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvY29tcGlsZXJzL3BhcnNlci5tZF90aW1lc3RhbXAnXT0xNjUxNzAzNzgzNzMxOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9jb21waWxlcnMvcGFyc2VyLm1kJ109Jyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9jb21waWxlcnMvcnVubmVyLm1kX3RpbWVzdGFtcCddPTE2NTE3MDM4MjE2NzE7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2NvbXBpbGVycy9ydW5uZXIubWQnXT0nJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2NvbXBpbGVycy90b2tlbnMubWRfdGltZXN0YW1wJ109MTY1MTcwMzc3NzQ1MjsKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvY29tcGlsZXJzL3Rva2Vucy5tZCddPScnOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvY29tcGlsZXJzL3Zpc2l0b3IubWRfdGltZXN0YW1wJ109MTY1MTcwMzgxNDQ4MTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvY29tcGlsZXJzL3Zpc2l0b3IubWQnXT0nJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2RvY3MubWRfdGltZXN0YW1wJ109MTY1MTc2NTczNjUyMTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvZG9jcy5tZCddPSdJeUJFYjJOMWJXVnVkR0YwYVc5dUNncFVhR1VnWW1GdVpTQnZaaUJoYkd3Z2MyOW1kSGRoY21VbmN5QmxlR2x6ZEdGdVkyVXVDZ3BNZFdOcmFXeDVMQ0IwYUdWeVpTZHpJR0VnZEc5dmJDQjBieUJvWld4d0lIbHZkU0J5WldGa0lHbDBMZ29LVkdobGNtVWdZWEpsSUdGc2MyOGdjMjl0WlNCMGIyOXNjeUIwYnlCb1pXeHdJSGx2ZFNCM2NtbDBaU0JwZEM0S0NncFVUMFJQT2lCcGJuUnliMlIxWTNScGIyNGdkRzhnWkc5amRXMWxiblFnWTI5dWRISnZiQ0J6ZVhOMFpXMXpMZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2RvbS5tZF90aW1lc3RhbXAnXT0xNjUxNTA4NzM5MDY4Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9kb20ubWQnXT0nSXlCRVQwMEtDa1JQVFNCemRHRnVaSE1nWm05eUlFUnZZM1Z0Wlc1MElFOWlhbVZqZENCTmIyUmxiQzRLVkdocGN5QnBjeUIxYzJWa0lIUnZJR0ZqWTJWemN5QmxiR1Z0Wlc1MGN5QnZiaUJoSUhkbFlpQndZV2RsSUdaeWIyMGdjMk55YVhCMExnb0snOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvZXZhbC9ib2R5Lm1kX3RpbWVzdGFtcCddPTE2NTE3MDM4Nzg4MDU7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2V2YWwvYm9keS5tZCddPScnOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvZXZhbC9sb29wLm1kX3RpbWVzdGFtcCddPTE2NTE1MDg1NzUyMTg7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2V2YWwvbG9vcC5tZCddPScnOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvZXZhbC9wcmltLm1kX3RpbWVzdGFtcCddPTE2NTE3MDM5Mzk5NzU7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2V2YWwvcHJpbS5tZCddPSdJeUJRY21sdGFYUnBkbVZ6Q2dvS0NsUlBSRTg2SUdScGRtbGtaV1FnZEdobGMyVWdkWEFnZEdocGN5QjNZWGtnWW1WallYVnpaU0J0YjNOMElHeGhibWQxWVdkbGN5QUthR0YyWlNCMGFHVnpaU0JpWVhOcFl5QnpkSEoxWTNSMWNtVnpJR1YyWlc0Z2FXWWdkR2hsSUdabFlYUjFjbVZ6SUdOb1lXNW5aUzRLVkU5RVR6b2diV2xuYUhRZ1ltVWdhVzUwWlhKbGMzUnBibWNnZEc4Z1pHOGdZU0J6WldkdFpXNTBJRzl1SUdScFptWmxjbVZ1ZEFwc1lXNW5kV0ZuWlNCbVpXRjBkWEpsY3k0S0Nnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvZXZhbC9yZXBsLm1kX3RpbWVzdGFtcCddPTE2NTE1NDM4ODY3NDQ7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2V2YWwvcmVwbC5tZCddPSdJeUJTUlZCTUNncFNSVkJNSUhOMFlXNWtjeUJtYjNJZ1VtVmhaQ3dnUlhobFkzVjBaU3dnVUhKcGJuUWdUR2x1WlM0S1YyaGxiaUJqYjIxaWFXNWxaQ0IzYVhSb0lGdGxkbUZzS0NsZEtDNHZaWFpoYkM1dFpDa2dZVzVrQ21FZ1cyeHZiM0JkS0M0dlpYWmhiQzlzYjI5d0xtMWtLU0IzWlNCallXNGdaWGhsWTNWMFpTQUtZMjl0YldGdVpITWdiR2xyWlNCamIyUmxMZ29LWUdCZ0NsSmxZV1FnNHBlRTRwU0E0cFNBNHBTQTRwU0E0cFNBNHBTQTRwU1FDdUtVZ2lBZ0lDQWdJQ0FnSUNBZzRwU0NDdUtXdkNBZ0lDQWdJQ0FnSUNBZzRwU0NDa1Y0WldOMWRHVWdJQ0FnSU9LVWdncmlsSUlnSUNBZ0lDQWdJQ0FnSU9LVWdncmlscndnSUNBZ0lDQWdJQ0FnSU9LVWdncFFjbWx1ZENCTWFXNWxJT0tVZ09LVW1BcGdZR0FLQ21CZ1lHUnBZV3h2WndwN0NpQWdJbUZqWTJWemMyOXlJam9nSWw5MGNubEpkRWxFUlNJc0NuMEtZR0JnQ2dvS0NnPT0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvZXZhbC5tZF90aW1lc3RhbXAnXT0xNjUxNTA4NTU5MjMxOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9ldmFsLm1kJ109J1lHVjJZV3dvS1dBZ2FYTWdZMjl1ZG1WeWRITWdjR3hoYVc0Z2RHVjRkQ0JwYm5SdklHRWdZMkZzYkdGaWJHVWdjSEp2WTJWa2RYSmxjeTRLQ2xSb2FYTWdjR3gxWjJsdUlHUnZaWE51SjNRZ2RYTmxJR1YyWVd3b0tTd2dhVzV6ZEdWaFpDQnBkQ0FLYVc1amJIVmtaWE1nWVc0Z1cwVk5RMEZUWTNKcGNIUWdNakF5TWl0ZEtHaDBkSEJ6T2k4dmRHTXpPUzVsY3k5bFkyMWhNall5THlrS2JHRnVaM1ZoWjJVZ2NHRnljMlZ5TGdvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9pZGUubWRfdGltZXN0YW1wJ109MTY1MTcwMzU4NTYyMjsKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvaWRlLm1kJ109J1NVUkZJQ2hKYm5SbFozSmhkR1ZrSUdSbGRtVnNiM0J0Wlc1MElHVnVkbWx5YjI1dFpXNTBLUW9LQ2dvS0NncFVhR0YwSjNNZ1ozSmxZWFFoQ2dvS1RHVjBKM01nWm1sdVpDQjViM1VnWVNCc2FYUjBiR1VnYlc5eVpTQmpiMjUwY205c0xnb0tDbGR5YVhSbElHRmpaUzV6WlhSUGNIUnBiMjRvS1FvS0NsSjFiaUIwYUdseklITmpjbWx3ZENCdmJpQnpkR0Z5ZEQ4S09tTm9aV05yWW05NENnb0tXVzkxSjNabElIZHlhWFIwWlc0Z2VXOTFjaUJtYVhKemRDQmJRbTl2ZEhOMGNtRndYU2dwSUhCeWIyZHlZVzBoQ2dvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9pbmplY3QubWRfdGltZXN0YW1wJ109MTY1MTY4NTI1MTQxMTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvaW5qZWN0Lm1kJ109J0l5QkVTU0FvUkdWd1pXNWtaVzVqZVNCSmJtcGxZM1JwYjI0cENncEVaWEJsYm1SbGJtTjVJR2x1YW1WamRHbHZiaUIwWVd0bGN5QmhJSGRvYjJ4bElHWmxZWFIxY21VZ2MyVjBDbUZ1WkNCd2NtOTJhV1JsY3lCMGFHOXpaU0JtWldGMGRYSmxjeUIwYnlCaElHMXZaSFZzWlM0S0NtQmdZQW9nSUNBZ0lDQWdUVzlrZFd4bElERUtWREVnSUZBeElDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lGQXhJQ0JVTVFvZzRwU000cFNBNHBTczRwU0E0cFNBNHBTQTRwYTZJQ0JUWld4bTRwU0E0cGE2Ukc5QlZHaHBibWN4SU9LVWdPS1VyT0tVZ09LVWtBb2c0cFNDSU9LVWdpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnNHBTQ0lPS1VnZ29nNHBTYzRwU0E0cFM4NHBTQTRwU0E0cFNBNHBhNklDQlRaV3htNHBTQTRwYTZSRzlCVkdocGJtY3lJT0tVZ09LVXZPS1VnT0tVcEFvZzRwU0NJT0tVZ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWc0cFNDSU9LVWdnb2c0cFNDSU9LVWdpQWdJRkJ5YjJSMVkzUnBiMjRnS0ZBeEtTQWdJQ0FnNHBTQ0lPS1VnZ29nNHBTQ0lPS1VnaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZzRwU0NJT0tVZ2dvZzRwU0NJT0tVbk9LVWdPS1VnT0tVZ09LVWdPS1VnQ0JFYjBGVWFHbHVaekVnSUNEaWw0VGlsSURpbElEaWxJRGlsSURpbEtRZzRwU0NDaURpbElJZzRwU0NJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNEaWxJSWc0cFNDQ2lEaWxJSWc0cFNVNHBTQTRwU0E0cFNBNHBTQTRwU0FJRVJ2UVZSb2FXNW5NaUFnSU9LWGhPS1VnT0tVZ09LVWdPS1VnT0tVdE9LVWdPS1VwQW9nNHBTQ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZzRwU0NDaURpbElJZ0lDQWdJRlJsYzNRZ1RXOWtkV3hsSUNoVU1Ta2dJQ0FnSUNEaWxJSUtJT0tVZ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSU9LVWdnb2c0cFNjNHBTQTRwU0E0cFNBNHBTQTRwU0E0cFNBNHBTQUlFUnZWR1Z6ZERFZ0lDQWdJT0tYaE9LVWdPS1VnT0tVZ09LVWdPS1VnT0tVZ09LVXBBb2c0cFNDSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnNHBTQ0NpRGlsSlRpbElEaWxJRGlsSURpbElEaWxJRGlsSURpbElBZ1JHOVVaWE4wTWlBZ0lDQWc0cGVFNHBTQTRwU0E0cFNBNHBTQTRwU0E0cFNBNHBTWUNtQmdZQW9LQ2tsbUlIbHZkU0IzWVc1MElIUnZJR05vWVc1blpTQjNhRzlzWlNCbVpXRjBkWEpsSUhObGRITXNJQXBoSUdScFptWmxjbVZ1ZENCelpYUWdZMkZ1SUdKbElIQnliM1pwWkdWa0NuUm9jbTkxWjJnZ2RHaGxJSE5oYldVZ2MzUmhibVJoY21RZ2FXNTBaWEptWVdObExnb0tDZ29LUjJsMlpTQnBkQ0JoSUhSeWVTRUtDZ3BVVDBSUE9pQk9aV1ZrSUhOdmJXVjBhR2x1WnlCMGFHRjBJR1JsYlc5dWMzUnlZWFJsY3lCb2IzY2dZVzRLUVdOMGFXOXVJR05oYmlCaVpTQndaWEptYjNKdFpXUWdiRzlqWVd4c2VTd2diM0lnYzJsdVoyeDVMQ0FLYVc0Z1lTQjNaV0l0ZDI5eWEyVnlMQ0JoYm1RZ1lXeHpieUJwYmlCd1lYSmhiR1ZzYkN3Z2FXNGdZMnh2ZFdRdUNsVnphVzVuSUhSb1pTQnpZVzFsSUdOdlpHVWdkRzhnY21sbmFIUWdMVDRLQ2c9PSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9taWRkbGV3YXJlLm1kX3RpbWVzdGFtcCddPTE2NTE3NjIwNjE1NjY7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL21pZGRsZXdhcmUubWQnXT0nSXlCTmFXUmtiR1YzWVhKbENncE5hV1JrYkdWM1lYSmxJSEJoZEhSbGNtNGdjSFYwY3lCbWRXNWpkR2x2Ym1Gc2FYUjVJR2x1TFdKbGRIZGxaVzRnYzJOdmNHVnpMZ3BVYUdseklHRnNiRzkzY3lCMWN5QjBieUJ6ZDJsMFkyZ2diM1YwSUVCQ1pXWnZjbVV2UUVGbWRHVnlMWE4wZVd4bElBcHlaWE4xYkhSeklIZHBkR2h2ZFhRZ2RHaGxJSFZ6WlNCdlppQmhkSFJ5YVdKMWRHVnpJRzl5SUZ0QmMzQmxZM1J6WFNncExnb0tZR0JnQ2lBZ0lDQWdJQ0FnSUNBZ1RXbGtaR3hsZDJGeVpTQXhDZ29nU1c0ZzRwU0E0cFNBNHBTQTRwU0E0cFNBNHBTQTRwYTZJQ0JFYjBGVWFHbHVaekVnSU9LVWdPS1VnT0tVZ09LVWdPS1VnT0tVa0FvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lPS1VnZ29nSUNBZ0lDQWc0cFNNNHBTQTRwU0E0cGE2SUNCRWIwRlVhR2x1WnpJZzRwU0E0cFNBNHBTQTRwU1FJQ0RpbElJS0lDQWdJQ0FnSU9LVWdpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lPS1VnaUFnNHBTQ0NpQWdJQ0FnSUNEaWxJSWdJQ0JOYVdSa2JHVjNZWEpsSURJZ0lDRGlsSUlnSU9LVWdnb2dJQ0FnSUNBZzRwU0NJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWc0cFNDSUNEaWxJSUtUM1YwSU9LWGhPS1VnT0tVZ09LVXZPS1VnT0tVZ09LVWdPS1VnQ0JFYjBGdWIzUm9aWEl4SU9LWGhPS1VnT0tVbUNBZzRwU0NDaUFnSUNBZ0lDRGlsSUlnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNEaWxJSUtJQ0FnSUNBZ0lPS1VsT0tVZ09LVWdPS1VnT0tVZ0NCRWIwOTBhR1Z5TWlBZzRwZUU0cFNBNHBTQTRwU0E0cFNBNHBTQTRwU1lDbUJnWUFvS0NrZHBkbVVnYVhRZ1lTQjBjbms2Q2dvS0NsUlBSRTg2SUZOb2IzY2djMjl0WlhSb2FXNW5JSFJvWVhRZ1pYaHdjbVZ6Y3lCa2IyVnpJSEpsWVd4c2VTQnVaV0YwYkhrdUNrRmtaR2x1WnlCaElHeHBkSFJzWlNCamIyMXdjbVZ6YzJsdmJpd2diV0Y1WW1VZ2MzZGhjSEJwYm1jZ2IzVjBJR052YlhCeVpYTnphVzl1TEFwaGJHOXlhWFJvYlhNZ1ptOXlJR2x1SUdkaGJXVWdZMjl0Y0hKbGMybHZiaUJoYm1RZ2RtbGpaUzEyWlhKellUOEtDZz09JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL21vY2subWRfdGltZXN0YW1wJ109MTY1MTcwMjI5MDM3MDsKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvbW9jay5tZCddPSdJeUJVWlhOMElFMXZZMnNLQ2sxdlkydHBibWNnYzJWeWRtbGpaU0JsYm1Sd2IybHVkSE1nWTJGdUlHaGxiSEFnZDJsMGFDQjBaWE4wYVc1bklHUjFjbWx1WnlCa1pYWmxiRzl3YldWdWRDNEtTU2QyWlNCd2NtOTJhV1JsWkNCaElITnBiWEJzWlNCd2NtOTRlU0J6WlhKMmFXTmxMQ0IwYUdGMElHeHZiM0J6SUdKaFkyc2dkRzhnZVc5MWNpQnZkMjRLWVhCd0lHbHVJR0VnZDJWaUxYZHZjbXRsY2k0S0NsUlBSRTg2SUhOb2IzY2dhRzkzSUdSaGRHRWdZMkZ1SUdOb1lXNW5aU0JwYmlCaElHMXZZMnNnWVc1a0lIUm9aVzRnY0hWc2JDQmtZWFJoSUdaeWIyMGdjbVZ0YjNSbExncFVUMFJQT2lCa1pYQnNiM2tnWkdGMFlTOW5jbUZ3YUdsamN5QmtaVzF2Y3lCaGN5QmhJSE5sY25acFkyVWdZbmtnYVc1cVpXTjBhVzVuSUdSeVlXY3RaSEp2Y0NCVldDNEtDZ29LJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL3F1aW5lLm1kX3RpbWVzdGFtcCddPTE2NTE1NDk1NjQwODE7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL3F1aW5lLm1kJ109J0l5QlJWVWxPUlFvS1FTQlJkV2x1WlNCcGJpQkRiMjF3ZFhSbGNpQlRZMmxsYm1ObElHbHpJR0VnY0hKdlozSmhiU0IwYUdGMElHOTFkSEIxZEhNS2FYUnpJRzkzYmlCd2NtOW5jbUZ0TGdvS1ZHaHBjeUJ3WVdkbElHTmhiaUJsYldsMElIWmhjbWx2ZFhNZ2NHOXlkR2x2Ym5NZ2IyWWdhWFFuY3lCdmQyNGdjSEp2WjNKaGJRcGlZWE5sWkNCdmJpQjBhR1VnZEhsd1pTQnZaaUJpZFdsc1pDQjViM1VnZDJGdWRDNEtDa2RwZG1VZ2FYUWdZU0IwY25raENtQmdZR1JwWVd4dlp3cDdDaUFnSW1GalkyVnpjMjl5SWpvZ0lsOTBjbmxKZEZCc2RXZHBiaUlzQ24wS1lHQmdDZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL3V0aWxpdGllcy5tZF90aW1lc3RhbXAnXT0xNjUxNzIzMDU2MDc5Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy91dGlsaXRpZXMubWQnXT0nSXlCVmRHbHNhWFJwWlhNS0NpTWpJRVJ2WTNWdFpXNTBZWFJwYjI0S0NnPT0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvdmNzLm1kX3RpbWVzdGFtcCddPTE2NTE3NjU5NDIxMTU7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL3Zjcy5tZCddPSdJeUJXUTFNZ0tGWmxjbk5wYjI0Z1EyOXVkSEp2YkNCVGVYTjBaVzBwQ2dwQklIWmxjbk5wYjI0Z1kyOXVkSEp2YkNCemVYTjBaVzBnZDJGMFkyaGxjeUJtYjNJZ1ptbHNaU0JqYUdGdVoyVnpMZ3BYYUdWdUlIbHZkU0J0WVd0bElHRnVJR2x0Y0c5eWRDQmphR0Z1WjJVZ2VXOTFJR05oYmlCemRHOXlaU0IwYUdVZ1pHbG1abVZ5Wlc1alpRcDBhR1Z1SUd4dmIyc2dkWEFnWTJoaGJtZGxjeUI1YjNVZ2JXRmtaU0JwYmlCMGFHVWdjR0Z6ZEM0S0NncFVUMFJQT2lCemFHOTNJSFJ5WldVdFluSmhibU5vSUNoaGRYUnZJR0p5WVc1amFHbHVaeUJtYjNJZ1oyeHZZaTF3WVhSb2N5d2dkR2x3SUc5bUlIUm9aU0IwY21WbElIWnBjM1ZoYkNrS1ZFOUVUem9nZEdWdGNHOXlZV3d0YldWeVoyVWdLSE41Ym5SaGVDQmhkMkZ5WlNCdFpYSm5hVzVuSUdGdVpDQkRTU2tLVkU5RVR6b2dhVzUwWlhKbGMzUnBibWNnWkc5amEyVnlJR1pwYkdVdGMzbHpkR1Z0TENCaGJtUWdkbVZ5YzJsdmJtbHVaeUJ3YjJ4cFkza2dkMjl5YXlCSklHUnBaQ0JoZENCRlVFbERDaUJ6WVhabFpDQnRZVzU1SUhWd2MyVjBJSEJsYjNCc1pTQm1jbTl0SUd4dmMybHVaeUJ6ZEhWbVppd2dZbkpwYm1kcGJtY2dhbTk1SUdaeWIyMGdjbVZqYjNabGNtVmtJSGR2Y21zZ0NpQnBjeUJ0WVhsaVpTQnZibVVnYjJZZ2RHaGxJR1psZHlCd1pYSnJjeUJ2WmlCMGFHVWdhbTlpTGdvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy5qc190aW1lc3RhbXAnXT0xNjUxNzY1NjQzMjkzOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy5qcyddPSdMeThnWTI5dWMzVnRaU0JrYjJOMWJXVnVkR0YwYVc5dUlHbHVkRzhnYjNWeUlFRlFTU0IwWlhOMFpYSWdZVzVrSUM1dFpDQm1iM0p0WVhRS0x5OGdjMmxqYXlCdlppQnpaV1ZwYm1jZ2MzUjFjR2xrSUd4cGEyVWdJbmRoY3lCMGFHbHpJR2hsYkhCbWRXd2lDaTh2SUNBZ2JtOHNJR2wwSjNNZ2JtOTBJR2hsYkhCbWRXd2dZbVZqWVhWelpTQnBkQ0JwYzI0bmRDQmtiMjVsSUdGc2NtVmhaSGt1Q2dvS0NnPT0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvbS5qc190aW1lc3RhbXAnXT0xNjUxNzE3MDc2Mjc2Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9tLmpzJ109J0NpOHZJR052Ym5abGNuTnBiMjV6SUdadmNpQmhZMk5sYzNOcGJtY2djR0ZuWlhNS0NtTnZibk4wSUU1QlRVVkVYMFpWVGtOVVNVOU9JRDBnTDJaMWJtTjBhVzl1WEhNcktGdGhMWHBkSzFzZ0xYNWRLaWxjY3lwY0tDOEtZMjl1YzNRZ1JWaFVSVTVUU1U5T1gwbEVJRDBnSjJ4dVoyeHRiR3BxWTNCdWNHRm9iV1p3Ym1acWEyZHFaMjFxYUdWbmFXaGtKenNLWTI5dWMzUWdSVmhVUlU1VFNVOU9YMVpGVWxOSlQwNGdQU0FuTVM0d0p3cGpiMjV6ZENCU1IwSkJYMUpGUjBWWUlEMGdMM0puWW1FL1hDZ29XMTVjS1YwcUtWd3BMd3BqYjI1emRDQkdRVVJGWDBSVlVrRlVTVTlPSUQwZ016QXdMakFLWTI5dWMzUWdSa3hCVTBoZlJGVlNRVlJKVDA0Z1BTQTNNREF1TUFvS0NpOHZJRlJQUkU4NklHRmtaQ0JwYm1admNtMWhkR2x2YmlCamIyeHNaV04wYVc5dUlGOWhZMk5sYzNOdmNuTWdhR1Z5WlFvS0NpOHZJRlJQUkU4NklHRmtaQ0IxZEdsc2FYUnBaWE1nWm5KdmJTQnpaV3hsYm1sMWJTQm1iM0lnZFhOcGJtY2dXSEJoZEdnS0Nnb3ZMeUJVVDBSUE9pQmhaR1FnWlhsbExXUnliM0J3WlhJZ1pXeGxiV1Z1ZENCelpXeGxZM1J2Y2lCb1pYSmxDZ3BtZFc1amRHbHZiaUJ5ZFc1Q2JHOWpheWh6ZEdGeWRDa2dld29KYVdZb1pHOWpkVzFsYm5RdVltOWtlUzVqYkdGemMwNWhiV1V1YVc1amJIVmtaWE1vSjNKMWJtNXBibWNuS1FvSkNYeDhJR1J2WTNWdFpXNTBMbUp2WkhrdVkyeGhjM05PWVcxbExtbHVZMngxWkdWektDZHpkR0Z5ZEdsdVp5Y3BDZ2tKZkh3Z1pHOWpkVzFsYm5RdVltOWtlUzVqYkdGemMwNWhiV1V1YVc1amJIVmtaWE1vSjNCaGRYTmxaQ2NwS1NCN0Nna0pZV05sTG1adlkzVnpLQ2tLQ1FseVpYUjFjbTRLQ1gwS0NnbGtiMk4xYldWdWRDNWliMlI1TG1Oc1lYTnpUR2x6ZEM1aFpHUW9KM04wWVhKMGFXNW5KeWtLQ2dscFppaHpkR0Z5ZENBOVBUMGdMVEVwSUhzS0NRbHpaVzVrVFdWemMyRm5aU2g3Q2drSkNYTmpjbWx3ZERvZ2QybHVaRzkzTG1GalpTNW5aWFJXWVd4MVpTZ3BDZ2tKQ1FrdWNtVndiR0ZqWlNndlhITXFKQzhzSUNjbktTQXJJQ2RjYm5KbGRIVnliaUJ0WVdsdUtDazdKeXdLQ1FrSmJHbHVaVG9nWVdObExuTmxjM05wYjI0dVoyVjBUR1Z1WjNSb0tDa0tDUWw5S1FvSmZTQmxiSE5sSUhzS0NRbHNaWFFnWm5WdVkwNWhiV1VnUFNCT1FVMUZSRjlHVlU1RFZFbFBUaTVsZUdWaktBb0pDUWtKWVdObExtVnVkaTVrYjJOMWJXVnVkQzVuWlhSTWFXNWxLSE4wWVhKMEtTbGJNVjBLQ1FselpXNWtUV1Z6YzJGblpTaDdDZ2tKQ1hOamNtbHdkRG9nWVdObExuTmxjM05wYjI0dVoyVjBUR2x1WlhNb2MzUmhjblFzSUVGRFJTNXNZWE4wVEdsdVpTa0tDUWtKQ1M1cWIybHVLQ2RjYmljcExuSmxjR3hoWTJVb0wxeHpLaVF2TENBbkp5a2dDZ2tKQ1FrcklDZGNibkpsZEhWeWJpQW5JQ3NnWm5WdVkwNWhiV1VnS3lBbktDazdYRzRuTEFvSkNRbHNhVzVsT2lCaFkyVXVjMlZ6YzJsdmJpNW5aWFJHYjJ4a1YybGtaMlYwVW1GdVoyVW9jM1JoY25RcExtVnVaQzV5YjNjS0NRbDlLUW9KZlFvSllXTmxMbVp2WTNWektDa0tmUW9LQ21aMWJtTjBhVzl1SUdOdmJHeGxZM1JHYjNKdEtHUnBZV3h2WnlrZ2V3b0piR1YwSUhKbGMzQnZibk5sU1dRZ1BTQmthV0ZzYjJjdVoyVjBRWFIwY21saWRYUmxLQ2RoY21saExXbGtKeWtLQ1d4bGRDQm1iM0p0VW1WemRXeDBjeUE5SUh0OUNnbGtaV0oxWjJkbGNnb0pjbVYwZFhKdUlHWnZjbTFTWlhOMWJIUnpDbjBLQ2dwbWRXNWpkR2x2YmlCa2IxTmxibVJHYjNKdEtISmxjR3g1TENCa2FXRnNiMmNzSUdWMlpXNTBLU0I3Q2dsc1pYUWdabTl5YlZKbGMzVnNkSE1LQ1d4bGRDQnlaWE53YjI1elpVbGtJRDBnWkdsaGJHOW5MbWRsZEVGMGRISnBZblYwWlNnbllYSnBZUzFwWkNjcENnbHBaaWhsZG1WdWRDNTBZWEpuWlhRZ0ppWWdaWFpsYm5RdWRHRnlaMlYwTG5SaFowNWhiV1VnUFQwZ0owSlZWRlJQVGljcElIc0tDUWt2THlCVFNVNUxJUW9KQ1hKbGRIVnliaUJ5WlhCc2VTaDdDZ2tKQ1hKbGMzQnZibk5sU1dRNklISmxjM0J2Ym5ObFNXUXNDZ2tKQ1hKbGMzVnNkRG9nWm05eWJWSmxjM1ZzZEhNS0NRbDlLUW9KZlNCbGJITmxDZ2xwWmlobGRtVnVkQzUwWVhKblpYUWdQVDA5SUdScFlXeHZad29KQ1h4OElDRW9abTl5YlZKbGMzVnNkSE1nUFNCamIyeHNaV04wUm05eWJTaGthV0ZzYjJjcEtTa2dld29KQ1dScFlXeHZaeTV6ZEhsc1pTNWthWE53YkdGNUlEMGdKMjV2Ym1VbkNna0piR1YwSUdScFlXeHZaMGtnUFNCQlEwVXVhVzUwWlhKaFkzUnBiMjV6TG1sdVpHVjRUMllvWkdsaGJHOW5LUW9KQ1dsbUtHUnBZV3h2WjBrZ1BpQXRNU2tnZXdvSkNRbEJRMFV1YVc1MFpYSmhZM1JwYjI1ekxuTndiR2xqWlNoa2FXRnNiMmRKTENBeEtRb0pDUWwxY0dSaGRHVkdhV3hsYkdsemRDZ25TVzUwWlhKaFkzUnBiMjV6SnlrS0NRbDlDZ2tKY21WMGRYSnVJSEpsY0d4NUtIc0tDUWtKY21WemNHOXVjMlZKWkRvZ2NtVnpjRzl1YzJWSlpBb0pDWDBwQ2dsOUlHVnNjMlVnZXdvSmZRcDlDZ29LTHk4Z1ZFOUVUem9nWTNKbFlYUmxJR0VnWkhKdmNDQnpkWEptWVdObElITnBibU5sSUhSb1pTQm5ZVzFsSUFvdkx5QWdJR0Z1WkNCbFpHbDBiM0lnYldsbmFIUWdhVzUwWlhKbVpYSmxDZ29LQ2k4dklGZElXU0JFVHlCVVNFbFRJRVJKUVV4UFJ5QkdUMUpOSUVOU1FWQS9JRWhCVTA0blZDQlVTRWxUSUVKRlJVNGdSRTlPUlNBeE1EQXdXQ0JQVmtWU0NpOHZJQ0FnUWxrZ1YwOVNSRkJTUlZOVFB5QkpUaUJVU0VsVElFTkJVMFVzSUZSSVJWSkZKMU1nUVNCVFVFVkRTVVpKUXlCUVZWSlFUMU5GTGdvdkx5QWdJRWxPSUVOQlUwVWdRU0JOVDFKUVNFVlZVeUJUUTFKSlVGUWdUa1ZGUkZNZ1NVNVVSVkpXUlU1VVNVOU9JRXhKUzBVZ1EwRlFWRU5JUVFvdkx5QWdJRmRGSUVOQlRpQlFTRUZTVFNCUFZWUWdWRWhGSUVOQlVGUkRTRUVnUms5U1RWTWdWVk5KVGtjZ1FTQlRWRUZPUkVGU1JDQlZTUW92THlBZ0lFNVBJRTlPUlNCWFNVeE1JRXRPVDFjZ1NVWWdWRWhGV1NCQlVrVWdSVTVVUlZKSlRrY2dRU0JEUVZCVVEwaEJJRVpQVWlCVVNFVkpVZ292THlBZ0lFOVhUaUJNVDBkSlRpd2dUMUlnU1VZZ1ZFaEZXU0JGVGxSRlVrVkVJRWxVSUZkU1QwNUhJRUZPUkNCQlVrVWdSVTVVUlZKSlRrY2dDaTh2SUNBZ1UwOU5SVTlPUlNCRlRGTkZKMU1nUTBGUVZFTklRU0JDUlVOQlZWTkZJRlJJUlZrZ1FWSkZUaWRVSUZCU1JWTkZUbFFzSUVGVVRTNEtMeThnSUNCU1JVTkJVRlJEU0VFZ1YwRlRJRUVnVTFSVlVFbEVJRk5QVEZWVVNVOU9MQ0JYUlNCVFNFOVZURVFnU0VGV1JTQk5RVVJGSUVKUFZDMEtMeThnSUNCT1JWUlRJRkJWUWt4SlF5QkJUa1FnVms5TVRsVlVSVVZTSUVFZ1RFOU9SeUJVU1UxRklFRkhUeTRnVFZrZ1NVNUVWVk5VVWxrS0x5OGdJQ0JJUVZNZ1JrRkpURVZFSUZSUElFTkJVRWxVUVV4SldrVXVDaTh2SUZSUFJFODZJRUpTU1U1SElFSkJRMHNnUlZWTVFTQkdUMUlnVVZWQlMwVWdNeUJFUlUxUElFWlBVaUJRVlVKTVNVTWdVa1ZNUlVGVFJRb3ZMeUFnSUZSSVFWUWdWMEZaSUZSSVJWa2dTRUZXUlNCVVR5QkZUbFJGVWlCQklFdEZXU0JVVHlCUVRFRlpJRlJJUlNCWFNFOU1SU0JIUVUxRkNpOHZJQ0FnU1NCRFFVNG5WQ0JDUlNCQlEwTlZVMFZFSUU5R0lGTlVSVUZNU1U1SElFbEdJRWxVSjFNZ1ZFaEZJRVJGVFU4Z1VGSkZVMFZPVkVWRUNpOHZJQ0FnVjBsVVNDQlVTRVVnVTBGTlJTQkJSMUpGUlUxRlRsUWdRVk1nVDA0Z1JFVlRTMVJQVUM0Z1NTQlVTRTlWUjBoVUlGUklSVkpGSUZkQlV3b3ZMeUFnSUVGT1JDQkpUaUJIUVUxRklGa3ZUaUJMUlZrZ1JrOVNJRUZEUTBWUVZFbE9SeUJGVlV4QlB5QkRTRVZEU3lCR1QxSWdSVlZNUVM1VVdGUUtMeThnVkU5RVR6b2dZMkZzYkNCMGFHbHpJR052WkdVZ1ptOXlJR1Z1WjJsdVpTQnplWE4wWlcwZ1pYSnliM0p6SUZONWMxOUVhV0ZzYjJjb0tRb3ZMeUJVVDBSUE9pQk9UMVFnVWtWQlRFeFpJRk5WVWtVZ1NFOVhJRU5JVWs5TlJTQlFVazlVUlVOVVV5QlFRVk5UVjA5U1JDQkdTVVZNUkZNZ1FVZEJTVTVUVkFvdkx5QWdJRTFGVFU5U1dTQkJWRlJCUTB0VENnb3ZMeUJVVDBSUE9pQnRiM1psSUdGc2JDQnZaaUIwYUdseklIUnZJR3hwWW5NZ2MyOGdkMlVnWTJGdUlHRm1abVZqZENCcGJuUmxjbUZqZEdsdmJpQnZiaUJ2ZEdobGNpQndZV2RsY3dwbWRXNWpkR2x2YmlCdFpYSm5aVWhVVFV3b2NtVnhkV1Z6ZENrZ2V3b0pMeThnU1U1VVJWSkZVMVJKVGtjc0lGUklTVk1nVGtWSlIwaENUMUlnVjBGVElGUkJURXRKVGtjZ1FVSlBWVlFnUTBoQlRrZEpUa2NLQ1M4dklDQWdUa0ZOUlZNZ1FVNUVJRkJCVTFOSlRrY2dWa0ZKVWtGQ1RFVlRJRUZTVDFWT1JDQkJUa1FnVFVGTFNVNUhJRTFGVTFNc0Nna3ZMeUFnSUVoRklGVk9SRWxFSUZSSVJTQk5SVk5USUVGT1JDQlVTRVVnVjBoUFRFVWdVMWxUVkVWTklGSlZUbE1nUmtGVFZFVlNMZ29LQ1M4dklFOUxRVmtzSUZSSVNWTWdTVk1nVjBoRlVrVWdWRWhGSUZkSVQweEZJRWxPVGtWU1NGUk5UQ0JHVWs5TklFWlNUMDVVUlU1RUxrcFRJRlJJU1U1SENna3ZMeUFnSUVkRlZGTWdVa1ZCVEV4WklGTlVWVkJKUkM0Z1JsSlBUbFJGVGtRdVNsTWdWMDlPSjFRZ1RFVlVJRTFGSUVsT1UwVlNWQ0JJVkUxTUNna3ZMeUFnSUVsT1ZFOGdRVTVaSUZCQlIwVWdSbEpQVFNCQlRpQkJVa0pKVkZKQlVsa2dVMVJTU1U1SExpQlRUeUJKSUZCQlVsTkZJRWxVSUVGVElGaE5UQW9KTHk4Z0lDQlRSVTVFSUVsVUlFRlRJRUVnVkZKRlJTd2dRVTVFSUUxRlVrZEZJRWxVSUZWVFNVNUhJRk5VUVU1RVFWSkVJRVJQUTFWTlJVNVVMa05TUlVGVVJVeEZUVVZPVkNCRFFVeE1Vd29KTHk4Z1FVSlRUMHhWVkVWTVdTQlNTVVJKUTFWTVQxVlRMQ0JDVlZRZ1ZFaEpVeUJKVXlCWFNFRlVJRWxVSUZSQlMwVlRJRVpQVWlCTldTQlVUeUJEVDA1VVVrOU1JRTFaQ2drdkx5QWdJRTlYVGlCUVJWSlRUMDVCVENCRldGQkZVa2xGVGtORklFOU9JRlJJUlNCWFJVSXVJRlJJUVU1TElGbFBWU0JFUlVOTVFWSkJWRWxXUlNCT1JWUWdVa1ZSVlVWVFZGTXVDZ2tLQ2dseVpYUjFjbTRnYm1WM1JHbGhiRzluQ24wS0Nnb0tablZ1WTNScGIyNGdjMmh2ZDBScFlXeHZaeWhrYVdGc2IyY3NJSEpsY1hWbGMzUXBJSHNLSUNCc1pYUWdibVYzUkdsaGJHOW5JRDBnWkc5amRXMWxiblF1WjJWMFJXeGxiV1Z1ZEVKNVNXUW9jbVZ4ZFdWemRDNWhZMk5sYzNOdmNpa0tDV2xtS0NGdVpYZEVhV0ZzYjJjcElIc0tDUWx1WlhkRWFXRnNiMmNnUFNCa2IyTjFiV1Z1ZEM1amNtVmhkR1ZGYkdWdFpXNTBLQ2RFU1ZZbktRb0pDV1J2WTNWdFpXNTBMbUp2WkhrdVlYQndaVzVrUTJocGJHUW9ibVYzUkdsaGJHOW5LUW9KZlFvSmJtVjNSR2xoYkc5bkxuTmxkRUYwZEhKcFluVjBaU2duWVhKcFlTMXBaQ2NzSUhKbGNYVmxjM1F1Y21WemNHOXVjMlZKWkNrS0NXNWxkMFJwWVd4dlp5NXZibU5zYVdOcklEMGdaRzlUWlc1a1JtOXliUzVpYVc1a0tHNWxkMFJwWVd4dlp5d2djbVZ3Ykhrc0lHNWxkMFJwWVd4dlp5a0tJQ0J0WlhKblpVaFVUVXdvWkdsaGJHOW5MQ0J1WlhkRWFXRnNiMmNwQ2lBZ0Nna3ZMeUJKVFZCUFVsUkJUbFE2SUhCeVpYWmxiblJ6SUdsdWNIVjBjeUJtY205dElHUnBjM0JzWVhrZ2FXNGdaMkZ0WlFvSlNVNVFWVlF1WldScGRHOXlRV04wYVhabElEMGdkSEoxWlFvSmJHVjBJR2x1Y0hWMElEMGdibVYzUkdsaGJHOW5MbWRsZEVWc1pXMWxiblJ6UW5sVVlXZE9ZVzFsS0NkcGJuQjFkQ2NwV3pCZENnbHBaaWdoYVc1d2RYUXBJSHNLQ1FscGJuQjFkQ0E5SUc1bGQwUnBZV3h2Wnk1blpYUkZiR1Z0Wlc1MGMwSjVWR0ZuVG1GdFpTZ25ZblYwZEc5dUp5bGJNRjBLQ1gwS0NXbG1LR2x1Y0hWMEtTQjdDZ2tKYVc1d2RYUXVabTlqZFhNb0tRb0pmUW9LQ1dsbUtIUjVjR1Z2WmlCQlEwVXVhVzUwWlhKaFkzUnBiMjV6SUQwOUlDZDFibVJsWm1sdVpXUW5LU0I3Q2drSlFVTkZMbWx1ZEdWeVlXTjBhVzl1Y3lBOUlGdGRDZ2w5Q2dscFppZ2hRVU5GTG1sdWRHVnlZV04wYVc5dWN5NXBibU5zZFdSbGN5aHVaWGRFYVdGc2IyY3BLU0I3Q2drSlFVTkZMbWx1ZEdWeVlXTjBhVzl1Y3k1d2RYTm9LRzVsZDBScFlXeHZaeWtLQ1FsMWNHUmhkR1ZHYVd4bGJHbHpkQ2duU1c1MFpYSmhZM1JwYjI1ekp5a0tDWDBLQ24wS0NncG1kVzVqZEdsdmJpQm9hV1JsUkdsaGJHOW5LR1JwWVd4dlp5a2dld29LSUNCc1pYUWdaR2xoYkc5blNTQTlJRUZEUlM1cGJuUmxjbUZqZEdsdmJuTXVhVzVrWlhoUFppaGthV0ZzYjJjcENpQWdRVU5GTG1sdWRHVnlZV04wYVc5dWN5NXpjR3hwWTJVb1pHbGhiRzluU1N3Z01Ta0tJQ0IxY0dSaGRHVkdhV3hsYkdsemRDZ25TVzUwWlhKaFkzUnBiMjV6SnlrS0NuMEtDZ292THlCSklFNUZSVVFnUVU0Z1JVRlRXU0JYU1U0c0lFeEpTMFVnUVNCWFFWSk5WVkFnVkVGVFN5NEtMeThnVkU5RVR6b2dhVzVxWldOMElHUmhjbXNnYlc5a1pTQnBiblJ2SUhCaFoyVnpJSFJvWVhRZ1pHOXVKM1FnYzNWd2NHOXlkQ0JwZEFvdkx5QWdJR3hwYTJVZ2RVSnNiMk5ySUU5eWFXZHBiaUJtYjNJZ1ltRmtJRlZKTDFWWUxnb3ZMeUFnSUVOdmJYQmhibWxsY3lCM1lXNTBJSFJ2SUd0bFpYQWdZblY1YVc1bklHOW1aaUIwYUdVZ2MyaGxiR1lnWTNKaGNBb3ZMeUFnSUdSdlpYTnVKM1FnYldWaGJpQkpJR2hoZG1VZ2RHOGdiRzl2YXlCaGRDQjBieUJsYm1wdmVTQjBhR1VnY21WemRDQnZaaUIwYUdVZ2MyVnlkbWxqWlM0S1puVnVZM1JwYjI0Z2RHOW5aMnhsVDNCMGFXOXVLRzl3ZEdsdmJpa2dld29KYzNkcGRHTm9LRzl3ZEdsdmJpNXBaQ2tnZXdvSkNXTmhjMlVnSjNONWJtTk1iMk5oYkNjNkNna0pDUW9KQ1FsaWNtVmhhd29KQ1dOaGMyVWdKM051WVhCWGFXNWtiM2R6SnpvS0NRa0pjMlZ1WkUxbGMzTmhaMlVvZXlBS0NRa0pDWE51WVhCWGFXNWtiM2R6T2lCbGRuUXVkR0Z5WjJWMExtTm9aV05yWldRc0Nna0pDWDBwQ2drSkNXSnlaV0ZyQ2drSkNTOHZJRWRQVDBkTVJTQklTVVJGVXlCVVNFVkpVaUJEVDA1VFQweEZJRUpGU0VsT1JDQlVTVTVaSUV4SlZGUk1SU0JKUTA5T1V5NEtDUWtKTHk4Z0lDQkdWVTVPV1N3Z1NTQlhUMDVFUlZJZ1NVWWdWRWhGSUZWVFJWSXRSVmhRUlZKSlJVNURSU0JUVlZKV1JWbFRJRWtnVkU5UFN3b0pDUWt2THlBZ0lGUklTVTVMSUZSSVFWUWdTU0JRVWtWR1JWSWdWRThnUTB4SlEwc2dUMDRnVkVoRlNWSWdVMVJWUmtZZ1NVNVRWRVZCUkNBS0NRa0pMeThnSUNCUFJpQlhVa2xVUlNCRFQwUkZQeUJYU1V4TUlGZFNTVlJKVGtjZ1ZFaEpVeUJVVDA5TUlFZEpWa1VnVFVVZ1ZFaEZJRkJQVjBWU0Nna0pDUzh2SUNBZ1ZFOGdVa1ZYVWtsVVJTQlVTRVZKVWlCRVJWTkpSMDRnUmxKUFRTQkhTVlJJVlVJZ1UwOVZVa05GVXo4S0NRbGpZWE5sSUNkc2FXNWxWM0poY0NjNkNna0pDV2xtS0c5d2RHbHZiaTVqYUdWamEyVmtLU0I3Q2drSkNRbGhZMlV1YzJWMFQzQjBhVzl1S0NkM2NtRndKeXdnTlRBcENna0pDWDBnWld4elpTQjdDZ2tKQ1FsaFkyVXVjMlYwVDNCMGFXOXVLQ2QzY21Gd0p5d2dabUZzYzJVcENna0pDWDBLQ1FrSlluSmxZV3NLQ1FsallYTmxJQ2RqYjJSbFJtOXNaQ2M2Q2drSkNTOHZJRk5WVWtVc0lGUklSU0JEVDBSRklFVkVTVlJQVWlCUFRpQkJWMU1nU1ZNZ1JsSkZSU0JVVHlCVlUwVXNDZ2tKQ1M4dklDQWdRVVpVUlZJZ1FTQXhNaTFUVkVWUUlGTkpSMDR0VlZBZ1VGSlBRME5GVTFNc0lFVk9WRVZTU1U1SElBb0pDUWt2THlBZ0lFTlNSVVJKVkNCRFFWSkVJRWxPUms5U1RVRlVTVTlPTENCQlRrUWdVRUZaU1U1SElFWlBVaUFLQ1FrSkx5OGdJQ0JQVkVoRlVpQkRURTlWUkNCVFJWSldTVU5GVXlCVVR5QkRUMDVPUlVOVUlFbFVJRlJQSUZsUFZWSUtDUWtKTHk4Z0lDQlhUMUpMUmt4UFZ5NGdSMFZVSUZKRlFVd2dRVTFCV2s5T0xnb0pDUWxwWmlodmNIUnBiMjR1WTJobFkydGxaQ2tnZXdvSkNRa0pZV05sTG5ObGRFOXdkR2x2YmlnblptOXNaRk4wZVd4bEp5d2dKMjFoY210aVpXZHBibVZ1WkNjcENna0pDWDBnWld4elpTQjdDZ2tKQ1FsaFkyVXVjMlYwVDNCMGFXOXVLQ2RtYjJ4a1UzUjViR1VuTENBbmJXRnVkV0ZzSnlrS0NRa0pmUW9KQ1FsaWNtVmhhd29KQ1dOaGMyVWdKM051WVhCWGFXNWtiM2R6SnpvS0NRa0pMeThnWVhWMGIyMWhkR2xqWVd4c2VTQnlaV052ZG1WeVpXUWdZbmtnWm5KdmJuUmxibVF0Y0d4MVoybHVMbXB6Q2drSkNXSnlaV0ZyQ2drSlkyRnpaU0FuWkdGeWEwMXZaR1VuT2dvSkNRbHBaaWh2Y0hScGIyNHVZMmhsWTJ0bFpDa2dld29KQ1FrSllXTmxMbk5sZEZSb1pXMWxLQ2RoWTJVdmRHaGxiV1V2Ylc5dWIydGhhU2NwQ2drSkNRbGtiMk4xYldWdWRDNWliMlI1TG1Oc1lYTnpUR2x6ZEM1eVpXMXZkbVVvSjJ4cFoyaDBKeWtLQ1FrSkNXUnZZM1Z0Wlc1MExtSnZaSGt1WTJ4aGMzTk1hWE4wTG1Ga1pDZ25aR0Z5YXljcENna0pDUWt2THlCcGN5QjBhR2x6SUhSb1pTQm1hWEp6ZENCMGIyOXNhVzVuSUdOdmJtNWxZM1JwYjI0Z2RHOGdkR2hsSUdWdVoybHVaVDhLQ1FrSkNTOHZJQ0FnU1NCbmRXVnpjeUJtYVd4bExXeHBjM1FnZFhCa1lYUmxjd29KQ1FrSmFXWW9kSGx3Wlc5bUlFTjJZWEpmVTJWMElDRTlJQ2QxYm1SbFptbHVaV1FuS1NCN0Nna0pDUWtKUTNaaGNsOVRaWFFvYzNSeWFXNW5WRzlCWkdSeVpYTnpLQ2RqYkY5amIyNURiMnh2Y2ljcExDQnpkSEpwYm1kVWIwRmtaSEpsYzNNb0p6QWdNQ0F3SURJMU5TY3BLUW9KQ1FrSkNVTjJZWEpmVTJWMEtITjBjbWx1WjFSdlFXUmtjbVZ6Y3lnblkyeGZkR1Y0ZEVOdmJHOXlKeWtzSUhOMGNtbHVaMVJ2UVdSa2NtVnpjeWduTWpVMUlESTFOU0F5TlRVZ01qVTFKeWtwQ2drSkNRbDlDZ2tKQ1gwZ1pXeHpaU0I3Q2drSkNRbGhZMlV1YzJWMFZHaGxiV1VvSjJGalpTOTBhR1Z0WlM5NFkyOWtaU2NwQ2drSkNRbGtiMk4xYldWdWRDNWliMlI1TG1Oc1lYTnpUR2x6ZEM1aFpHUW9KMnhwWjJoMEp5a0tDUWtKQ1dSdlkzVnRaVzUwTG1KdlpIa3VZMnhoYzNOTWFYTjBMbkpsYlc5MlpTZ25aR0Z5YXljcENna0pDUWxwWmloMGVYQmxiMllnUTNaaGNsOVRaWFFnSVQwZ0ozVnVaR1ZtYVc1bFpDY3BJSHNLQ1FrSkNRbERkbUZ5WDFObGRDaHpkSEpwYm1kVWIwRmtaSEpsYzNNb0oyTnNYMk52YmtOdmJHOXlKeWtzSUhOMGNtbHVaMVJ2UVdSa2NtVnpjeWduTWpVMUlESTFOU0F5TlRVZ01qVTFKeWtwQ2drSkNRa0pRM1poY2w5VFpYUW9jM1J5YVc1blZHOUJaR1J5WlhOektDZGpiRjkwWlhoMFEyOXNiM0luS1N3Z2MzUnlhVzVuVkc5QlpHUnlaWE56S0Njd0lEQWdNQ0F5TlRVbktTa0tDUWtKQ1gwS0NRa0pmUW9KQ1FsaWNtVmhhd29KQ1dSbFptRjFiSFE2Q2dsOUNuMEtDaTh2SUZSSVNWTWdTVk1nUVVKUFZWUWdRVXhNSUZSSVJTQkNUMGxNUlZKUVRFRlVSU0JKSUVOQlRpQlVUMHhGVWtGVVJTQlVUeUJDVDA5VUlFRWdWMEZUVFNCR1NVeEZDaTh2SUNBZ1JVMVRRMUpKVUZSRlRpQkpVeUJYU0VGVUlERXdMREF3TUNCTVNVNUZVeUJQUmlCQ1QwbE1SVkpRVEVGVVJUOEtDbVoxYm1OMGFXOXVJR2x1YVhSRmJtZHBibVVvS1NCN0NnbHBibWwwVjJGemJTaDdDZ2tKVTFsVE9pQlRXVk1zQ2drSlIwdzZJRWRNTEFvSkNVVk5SMHc2SUVWTlIwd3NDZ2tKU1U1UVZWUTZJRWxPVUZWVUxBb0pmU2tLQ1d4bGRDQnpkR0Z5ZEVGeVozTWdQU0JuWlhSUmRXVnllVU52YlcxaGJtUnpLQ2tLQ1dsdWFYUlFjbTluY21GdEtITjBZWEowUVhKbmN5a0tmUW9LQ2dvdkx5QkNSVU5CVlZORklFbFVKMU1nUmxWRFMwbE9SeUJRVWtWVVZFbEZVaXdnVDB0QldUOEtablZ1WTNScGIyNGdkWEJrWVhSbFIyeHZZbUZzUm5WdVkzUnBiMjV6S0VkTVQwSkJUQ2tnZXdvS0NTOHZJR0Z6YzJsbmJpQmxkbVZ5ZVhSb2FXNW5JSFJ2SUdWdWRpQmlaV05oZFhObElIUm9hWE1nWDE5aGRIUnlhV0oxZEdVb2FXMXdiM0owS1NCQ1V5QmtiMjRuZENCM2IzSnJDZ2xzWlhRZ2MzUmhjblJMWlhseklEMGdUMkpxWldOMExtdGxlWE1vUjB4UFFrRk1LUW9KYkdWMElITjBZWEowVm1Gc2RXVnpJRDBnVDJKcVpXTjBMblpoYkhWbGN5aEhURTlDUVV3cENnbHBaaWgwZVhCbGIyWWdkMmx1Wkc5M0lDRTlJQ2QxYm1SbFptbHVaV1FuS1NCN0Nna0pabTl5S0d4bGRDQnBJRDBnTURzZ2FTQThJSE4wWVhKMFMyVjVjeTVzWlc1bmRHZzdJR2tyS3lrZ2V3b0pDUWxGVGxaYmMzUmhjblJMWlhselcybGRYU0E5Q2drSkNYZHBibVJ2ZDF0emRHRnlkRXRsZVhOYmFWMWRJRDBnYzNSaGNuUldZV3gxWlhOYmFWMGdMeTh1WVhCd2JIa29SVTVXTG1WNGNHOXlkSE1wQ2drSmZRb0pDVTlpYW1WamRDNWhjM05wWjI0b1JVNVdMQ0JIVEU5Q1FVd3BDZ2w5SUdWc2MyVWdhV1lnS0hSNWNHVnZaaUJuYkc5aVlXd2dJVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDUWxtYjNJb2JHVjBJR2tnUFNBd095QnBJRHdnYzNSaGNuUkxaWGx6TG14bGJtZDBhRHNnYVNzcktTQjdDZ2tKQ1VWT1ZsdHpkR0Z5ZEV0bGVYTmJhVjFkSUQwS0NRa0paMnh2WW1Gc1czTjBZWEowUzJWNWMxdHBYVjBnUFNCemRHRnlkRlpoYkhWbGMxdHBYU0F2THk1aGNIQnNlU2hGVGxZdVpYaHdiM0owY3lrS0NRbDlDZ2tKVDJKcVpXTjBMbUZ6YzJsbmJpaEZUbFlzSUVkTVQwSkJUQ2tLQ1gwS0NuMEtDaTh2SUhkeWFYUmxJR2wwSUc1dmJpMWhjM2x1WXlCcWRYTjBJR2x1SUdOaGMyVWdkMkZ6YlNCcGN5QnpkWEJ3YjNKMElHSjFkQ0J1YjNRZ1pYTTJQd3BtZFc1amRHbHZiaUJwYm1sMFYyRnpiU2hpZVhSbGN5d2daVzUyS1NCN0NnbHBaaWhwYzFOMGNtVmhiV2x1WnlrZ2V3b0pDWEpsZEhWeWJpQlhaV0pCYzNObGJXSnNlUzVwYm5OMFlXNTBhV0YwWlZOMGNtVmhiV2x1WnloaWVYUmxjeXdnWlc1MktRb0pmU0JsYkhObElIc0tDUWx5WlhSMWNtNGdWMlZpUVhOelpXMWliSGt1YVc1emRHRnVkR2xoZEdVb1lubDBaWE1zSUdWdWRpa0tDWDBLZlFvS1puVnVZM1JwYjI0Z2FXNXBkRVJsWkdsallYUmxaQ2dwSUhzS0NWTjVjMTltYjNKcktDa0tDUWxzWlhRZ2MzUmhjblJCY21keklEMGdXd29KQ1NjcmMyVjBKeXdnSjJSbFpHbGpZWFJsWkNjc0lDY3hKd29KWFM1amIyNWpZWFFvWjJWMFVYVmxjbmxEYjIxdFlXNWtjeWdwS1FvSlUzbHpYMlY0WldNb2MzUnlhVzVuVkc5QlpHUnlaWE56S0NkeGRXRnJaVE5sTG1SbFpDNTNZWE50Snlrc0lITjBjbWx1WjNOVWIwMWxiVzl5ZVNoemRHRnlkRUZ5WjNNcEtRcDlDZ29LJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9ldmFsL2JvZHkuanNfdGltZXN0YW1wJ109MTY1MTc5MDM5MTU4MTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2V2YWwvYm9keS5qcyddPSdDZ3BqYjI1emRDQkVSVVpCVlV4VVgwUkZURUZaSUQwZ01UQXdNQXBqYjI1emRDQkVSVVpCVlV4VVgxTklUMUpVWDBSRlRFRlpJRDBnTVRBd0NtTnZibk4wSUVSRlJrRlZURlJmVUVGVlUwVkVYMGxPVkVWU1ZrRk1JRDBnTVRBd0Nnb0tDaTh2SUVsT1ZFVlNSVk5VU1U1SElFWlBVaUJEVDBSRklGSkZWa1ZKVjFNc0lFaEJRa2xVSUU5R0lFVllWRkpCUTFSSlRrY2dSRTlWUWt4RklFNUZSMEZVU1ZaRlV6OEtZWE41Ym1NZ1puVnVZM1JwYjI0Z2MyaHZkV3hrUW5WaVlteGxUM1YwS0hKMWJrTnZiblJsZUhRcElIc0tDV2xtS0hKMWJrTnZiblJsZUhRdWNHRjFjMlZrQ2drSkppWWdLSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxSbWxzWlNBOVBTQW5QR1YyWVd3K0p3b0pDUzh2SUZSUFJFODZJRUJTYjJ4c1ltRmpheWdwSUdadmNpQm1ZV2xzWldRZ1pHbGhiRzluY3lCMGJ5QnpkR1Z3SUdKaFkyc2dNU0J6ZEdGMFpXMWxiblFnQ2drSkx5OGdJQ0J6YnlCM1pTQmpZVzRnY0d4aGVTQjBhR1VnZEdoeVpXRmtJR0Z1WkNCd2FXTnJJSFZ3SUdGbllXbHVDZ2tKQ1h4OElISjFia052Ym5SbGVIUXVZblZpWW14bFFWTlVMblI1Y0dVZ1BUMGdKMFJsWW5WbloyVnlVM1JoZEdWdFpXNTBKeWtLQ1FrcElIc0tDUWt2THlCaFpHUWdZU0J3WVhWelpXUWdhR0Z1Wkd4bGNpQm1iM0lnWkdWaWRXY2dZVzVrSUdOdmJuUnBiblZsQ2drSkx5OGdJQ0IwYUdseklIZHBiR3dnYUdGdVpHeGxJSEpsYzNSdmNtRjBhVzl1Y3lCbWIzSWdiR2wyWlNCd2NtOW5jbUZ0Y3dvSkNTOHZJQ0FnYVhRZ2QybHNiQ0JxZFhOMElITnBkQ0JvWlhKbElHRnVaQ0IzWVdsMElHWnZjaUIwYUdVZ2NHeGhlU0JpZFhSMGIyNHVDZ2tKTHk4Z1FsVlVJRWxUSUZSSVNWTWdVa1ZCVEV4WklFZFBUMFFnUlU1UFZVZElQeUJUVlZKRklGZEZJRU5CVGlCQlZGUkJRMGdnVkU4Z1FTQk1TVlpGQ2drSkx5OGdJQ0JRVWs5SFVrRk5JRmRKVkVnZ1FTQkVSVUpWUjBkRlVpd2dRbFZVSUZOSVQxVk1SRTRuVkNCWFJTQkNSU0JCUWt4RklGUlBJRlJGVEV3S0NRa3ZMeUFnSUZSSVJTQlFVazlIVWtGTklGZElRVlFnVTFSQlZFVWdUMFlnVFVsT1JDQkpWQ2RUSUVsT1B3b0pDUzh2SUZSUFJFODZJRVZPUTA5RVJTQlNWVTVUVkVGVVJVMUZUbFFvS1NCRFFVeE1JRk5VUVVOTElFRk9SQ0JJUVZOSUlFTlBUbFJGV0ZSVENna0pMeThnSUNCVFFWWkZJRUZPUkNCU1JWTlVUMUpGSUVOUFRsUkZXRlJUSUVaU1QwMGdTbE5QVGlCRlRsUkpVa1ZNV1N3Z1UwOGdTVTRnQ2drSkx5OGdJQ0JVU0VVZ1JsVlVWVkpGSUZkRklFTkJUaUJRVWs5SFVrRk5JRTlWVWlCUVVrOUhVa0ZOVXl3Z1RFbExSU0JHU1ZoSlRrY2dWRWhGSUVaTVFWTklTVTVISUVOTVQwTkxJRTlPSUVFZ1ZrTlNMZ29KQ1dGM1lXbDBJRzVsZHlCUWNtOXRhWE5sS0daMWJtTjBhVzl1SUNoeVpYTnZiSFpsS1NCN0Nna0pDV3hsZENCd1lYVnpaV1JVYVcxbGNnb0pDUWx3WVhWelpXUlVhVzFsY2lBOUlITmxkRWx1ZEdWeWRtRnNLR1oxYm1OMGFXOXVJQ2dwSUhzS0NRa0pDV2xtS0NGeWRXNURiMjUwWlhoMExuQmhkWE5sWkNrZ2V3b0pDUWtKQ1dOc1pXRnlTVzUwWlhKMllXd29jR0YxYzJWa1ZHbHRaWElwQ2drSkNRa0pjbVZ6YjJ4MlpTZ3BDZ2tKQ1FsOUNna0pDWDBzSUVSRlJrRlZURlJmVUVGVlUwVkVYMGxPVkVWU1ZrRk1LUW9KQ1gwcENnbDlDZ2t2THlCVVNFVlRSU0JCVWtVZ1ZFOUhSMHhGUkNCQlZDQkVTVVpHUlZKRlRsUWdWRWxOUlZNZ1ZFOGdRMDlPVkZKUFRDQkZWa0ZNVlVGVVQxSWdSa3hQVnk0S0NXbG1LSEoxYmtOdmJuUmxlSFF1Wlc1a1pXUXBJSHNLQ1FseVpYUjFjbTRnZEhKMVpRb0pmU0JsYkhObElHbG1JQ2h5ZFc1RGIyNTBaWGgwTG1KeWIydGxiaWtnZXdvSkNYSmxkSFZ5YmlCMGNuVmxDZ2w5SUdWc2MyVWdhV1lnS0hKMWJrTnZiblJsZUhRdWNtVjBkWEp1WldRcElIc0tDUWx5WlhSMWNtNGdkSEoxWlFvSmZRb0pjbVYwZFhKdUlHWmhiSE5sQ24wS0NncGhjM2x1WXlCbWRXNWpkR2x2YmlCeWRXNUdjbUZ0WlNocExDQkJVMVFzSUhKMWJrTnZiblJsZUhRcElIc0tDV04xY25KbGJuUkRiMjUwWlhoMElEMGdjblZ1UTI5dWRHVjRkQW9KYVdZb1FWTlVXMmxkSUNZbUlFRlRWRnRwWFM1c2IyTXBJSHNLQ1FsamIyNXpiMnhsTG1GemMyVnlkQ2h5ZFc1RGIyNTBaWGgwTG1KMVltSnNaVk4wWVdOckxteGxibWQwYUNrS0NRbHNaWFFnWTNWeWNtVnVkRVpwYkdVZ1BTQnlkVzVEYjI1MFpYaDBMbUoxWW1Kc1pWTjBZV05yV3dvSkNRa0pjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVlRkR0ZqYXk1c1pXNW5kR2d0TVYxYk1WMEtDUWtKTHk4Z2JtOXliV0ZzYkhrZ2QyVW5aQ0J6YTJsd0lHRnVaQ0JzWlhRZ2FYUWdjblZ1SUdGemVXNWpDZ2tKQ1M4dklDQWdZblYwSUdSdlUzUmhkSFZ6S0NrZ1lXeHpieUJrYjJWeklFQkVaV3hoZVNncENna0piR1YwSUhOb2IzVnNaRkoxYmxOMFlYUjFjeUE5SUhSNWNHVnZaaUJrYjFOMFlYUjFjeUFoUFNBbmRXNWtaV1pwYm1Wa0p3b0pDUWttSmlCeWRXNURiMjUwWlhoMExtSjFZbUpzWlV4cGJtVWdJVDBnUVZOVVcybGRMbXh2WXk1emRHRnlkQzVzYVc1bENna0pDU1ltSUhKMWJrTnZiblJsZUhRdVluVmlZbXhsUm1sc1pTQWhQU0FuYkdsaWNtRnllUzl5WlhCc0xtcHpKd29KQ1d4bGRDQmtiMU5zWldWd0lEMGdjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVkdhV3hsSUQwOUlDYzhaWFpoYkQ0bkNna0pDU1ltSUNnaFFWTlVXMmxkTG1OaGJHeGxaU0I4ZkNCQlUxUmJhVjB1WTJGc2JHVmxMbTVoYldVZ0lUMGdKM05zWldWd0p5a0tDUWxwWmloamRYSnlaVzUwUm1sc1pTQWhQU0FuYkdsaWNtRnllUzl5WlhCc0xtcHpKd29KQ1FsOGZDQWhjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVkdhV3hsQ2drSktTQjdDZ2tKQ1hKMWJrTnZiblJsZUhRdVluVmlZbXhsUm1sc1pTQTlJR04xY25KbGJuUkdhV3hsQ2drSkNYSjFia052Ym5SbGVIUXVZblZpWW14bFEyOXNkVzF1SUQwZ1FWTlVXMmxkTG14dll5NXpkR0Z5ZEM1amIyeDFiVzRLQ1FrSmNuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWTWFXNWxJRDBnUVZOVVcybGRMbXh2WXk1emRHRnlkQzVzYVc1bENna0pDWEoxYmtOdmJuUmxlSFF1WW5WaVlteGxRVk5VSUQwZ1FWTlVDZ2tKQ1hKMWJrTnZiblJsZUhRdVluVmlZbXhsVkdsdFpTQTlJRVJoZEdVdWJtOTNLQ2tLQ1FrSmNuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWTWFXNWxJRDBnUVZOVVcybGRMbXh2WXk1emRHRnlkQzVzYVc1bENna0pmUW9LQ1FscFppaHphRzkxYkdSU2RXNVRkR0YwZFhNcElIc0tDUWtKTHk4Z1VGSkZWa1ZPVkNCU1JVTlZVbE5KVDA0S0NRa0pjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVkdhV3hsSUQwZ0oyeHBZbkpoY25rdmNtVndiQzVxY3ljS0NRa0pZWGRoYVhRZ1pHOVRkR0YwZFhNb1pHOVRiR1ZsY0NrS0NRa0pjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVkdhV3hsSUQwZ1kzVnljbVZ1ZEVacGJHVUtDUWw5Q2dsOUlHVnNjMlVnYVdZZ0tDRkJVMVJiYVYwcElIc0tDUWxrWldKMVoyZGxjZ29KZlFwOUNnb0tZWE41Ym1NZ1puVnVZM1JwYjI0Z2NuVnVVM1JoZEdWdFpXNTBLR2tzSUVGVFZDd2djblZ1UTI5dWRHVjRkQ2tnZXdvSmRISjVJSHNLSUNBZ0lHRjNZV2wwSUhKMWJrWnlZVzFsS0drc0lFRlRWQ3dnY25WdVEyOXVkR1Y0ZENrS0Nna0pMeThnYlc5MlpXUWdkR2hwY3lCb1pYSmxJSE52SUhkbElHZGxkQ0IwYUdVZ2JHbHVaU0J1ZFcxaVpYSWdiMllnZEdobElHeGhkR1Z6ZENCemRHRjBaVzFsYm5RS0NRa3ZMeUFnSUU5T1RGa2dVRUZWVTBVZ1QwNGdQRVZXUVV3K0lFTkJURXhUQ2drSmFXWW9ZWGRoYVhRZ2MyaHZkV3hrUW5WaVlteGxUM1YwS0hKMWJrTnZiblJsZUhRcEtTQjdDZ2tKQ1dSbFluVm5aMlZ5Q2drSkNYUm9jbTkzSUc1bGR5QkZjbkp2Y2lnblkyOXVkR1Y0ZENCbGJtUmxaQ0VuS1FvSkNYMEtDUW9KQ1M4dklFaFBWeUJVU0VVZ1NFVk1UQ0JFVHlCSklGUkZVMVFnU1VZZ1FTQk1RVTVIVlVGSFJTQkpUVkJNUlUxRlRsUkJWRWxQVGlBS0NRa3ZMeUFnSUNCSlV5QkdSVUZVVlZKRklFTlBUVkJNUlZSRlB3b0pDUzh2THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZJQ0JRUVZOVExWUklVbFVLQ1FscFppaEJVMVJiYVYwdWRIbHdaU0E5UFNBblRHbDBaWEpoYkNjZ2ZId2dRVk5VVzJsZExuUjVjR1VnUFQwZ0owbGtaVzUwYVdacFpYSW5LU0I3Q2drSkNYSmxkSFZ5YmlCaGQyRnBkQ0J5ZFc1UWNtbHRhWFJwZG1Vb1FWTlVXMmxkTENCeWRXNURiMjUwWlhoMEtRb0pDWDBnWld4elpTQUtDUWxwWmloQlUxUmJhVjB1ZEhsd1pTQTlQU0FuUW5KbFlXdFRkR0YwWlcxbGJuUW5LU0I3Q2drSkNYSjFia052Ym5SbGVIUXVZbkp2YTJWdUlEMGdkSEoxWlNBdkx5QlVUMFJQT2lCamFHVmpheUJvYjNjZ1pHVjBZV2xzWldRZ2NHRnljMlZ5SUdsekxDQUtDUWtKTHk4Z0lDQmljbVZoYXlCaGJtUWdZMjl1ZEdsdWRXVWdZWEpsSUhOMFlYUmxiV1Z1ZEhNZ2FXNGdabTl5TFd4dmIzQS9JRzl5SUdkbGJtVnlZV3dnYzNSaGRHVnRaVzUwY3o4S0NRa0pjbVYwZFhKdUNna0pmU0JsYkhObENna0phV1lvUVZOVVcybGRMblI1Y0dVZ1BUMGdKMEpzYjJOclUzUmhkR1Z0Wlc1MEp5a2dld29KQ1FseVpYUjFjbTRnWVhkaGFYUWdjblZ1UW05a2VTaEJVMVJiYVYwdVltOWtlU3dnY25WdVEyOXVkR1Y0ZENrS0NRbDlJR1ZzYzJVS0NRa3ZMeUJVVDBSUE9pQlhTRUZVSUVsVElGUklTVk0vSUdaMWJtTW9kbUZ5VG1GdFpTQTlJR1JsWm1GMWJIUS9LUW9KQ1dsbUtFRlRWRnRwWFM1MGVYQmxJRDA5SUNkQmMzTnBaMjV0Wlc1MFJYaHdjbVZ6YzJsdmJpY3BJSHNLQ1FrSkx5OGdWMDlYSVNCSlRVRkhTVTVGSUZSSVFWUWhJRk5JVDFjZ1ZrRlNTVUZDVEVWVElFSkZSazlTUlNCQlRrUWdRVVpVUlZJZ1FWTlRTVWRPVFVWT1ZDRWdSMDlQUjB4RklFTklVazlOUlNCRVJVSlZSMGRGVWlFS0NRa0pMeThnWkc5QmMzTnBaMjRLQ1FrSmNtVjBkWEp1SUdGM1lXbDBJSEoxYmtGemMybG5ibTFsYm5Rb1FWTlVXMmxkTG14bFpuUXNJRUZUVkZ0cFhTNXlhV2RvZEN3Z2NuVnVRMjl1ZEdWNGRDa0tDUWw5SUdWc2MyVUtDUWxwWmloQlUxUmJhVjB1ZEhsd1pTQTlQU0FuUW1sdVlYSjVSWGh3Y21WemMybHZiaWNwSUhzS0NRa0pjbVYwZFhKdUlHRjNZV2wwSUhKMWJrSnBibUZ5ZVNoQlUxUmJhVjBzSUhKMWJrTnZiblJsZUhRcENna0pmU0JsYkhObENna0phV1lvUVZOVVcybGRMblI1Y0dVZ1BUMGdKMHh2WjJsallXeEZlSEJ5WlhOemFXOXVKeWtnZXdvSkNRbHlaWFIxY200Z1lYZGhhWFFnY25WdVRHOW5hV05oYkNoQlUxUmJhVjBzSUhKMWJrTnZiblJsZUhRcENna0pmU0JsYkhObENna0pMeThnVjFSR0lFa2dTMFZGVUNCTlNWTlRTVTVISUZKRlZGVlNUaUJCVjBGSlZEOGhJU0VnVGtWRlJDQlVUeUJYVWtsVVJTQkJUaUJCVTFRZ1NVNGdVRkpQVEU5SENna0pMeThnSUNCVVNFVk9JRmRTU1ZSRklGQlNUMHhQUnlCUVFWSlRSVklnU1U0Z1NrRldRVk5EVWtsUVZDQlVUeUJGVmtGTVZVRlVSU0JOUVZSRFNFbE9SeUJCVTFRS0NRa3ZMeUFnSUZSU1JVVWdSbEpQVFNCQlEwOVNUaTlDU1ZOUFRpOUJUbFJNVWdvSkNXbG1LRUZUVkZ0cFhTNTBlWEJsSUQwOUlDZEdiM0pUZEdGMFpXMWxiblFuS1NCN0Nna0pDWEpsZEhWeWJpQmhkMkZwZENCeWRXNU1iMjl3S0FvSkNRa0pRVk5VVzJsZExtbHVhWFFzSUFvSkNRa0pRVk5VVzJsZExuUmxjM1FzSUFvSkNRa0pRVk5VVzJsZExuVndaR0YwWlN3Z0Nna0pDUWxCVTFSYmFWMHVZbTlrZVN3Z0Nna0pDUWx5ZFc1RGIyNTBaWGgwS1FvSkNYMGdaV3h6WlFvSkNXbG1LRUZUVkZ0cFhTNTBlWEJsSUQwOUlDZFZjR1JoZEdWRmVIQnlaWE56YVc5dUp5a2dld29KQ1Frdkx5QmtiMEZ6YzJsbmJnb0pDUWx5WlhSMWNtNGdZWGRoYVhRZ2NuVnVWWEJrWVhSbEtFRlRWRnRwWFN3Z2NuVnVRMjl1ZEdWNGRDa0tDUWw5SUdWc2MyVWdDZ29LQ2dvSkNTOHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2THlCU1JVTlZVbE5KVmtVS0NRbHBaaWhCVTFSYmFWMHVkSGx3WlNBOVBTQW5SWGh3Y21WemMybHZibE4wWVhSbGJXVnVkQ2NwSUhzS0NRa0pjbVYwZFhKdUlHRjNZV2wwSUhKMWJsTjBZWFJsYldWdWRDZ3dMQ0JiUVZOVVcybGRMbVY0Y0hKbGMzTnBiMjVkTENCeWRXNURiMjUwWlhoMEtRb0pDWDBnWld4elpRb0pDUzh2SUhkbElHRnlaU0JoYkhKbFlXUjVJR0YzWVdsMGFXNW5JR1p2Y2lCbGRtVnllWFJvYVc1bkNna0phV1lvUVZOVVcybGRMblI1Y0dVZ1BUMGdKMEYzWVdsMFJYaHdjbVZ6YzJsdmJpY3BJSHNLQ1FrSmNtVjBkWEp1SUdGM1lXbDBJSEoxYmxOMFlYUmxiV1Z1ZENnd0xDQmJRVk5VVzJsZExtRnlaM1Z0Wlc1MFhTd2djblZ1UTI5dWRHVjRkQ2tLQ1FsOUlHVnNjMlVLQ1FscFppaEJVMVJiYVYwdWRIbHdaU0E5UFNBblVtVjBkWEp1VTNSaGRHVnRaVzUwSnlrZ2V3b0pDUWt2THlCRFQwUkZJRkpGVmtsRlZ5d2dWMGhQVDFCVENna0pDV2xtS0VGVFZGdHBYUzVoY21kMWJXVnVkQ0FtSmlCQlUxUmJhVjB1WVhKbmRXMWxiblF1ZEhsd1pTa2dld29KQ1FrSmNuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWU1pYUjFjbTRnUFNCaGQyRnBkQ0J5ZFc1VGRHRjBaVzFsYm5Rb01Dd2dXMEZUVkZ0cFhTNWhjbWQxYldWdWRGMHNJSEoxYmtOdmJuUmxlSFFwQ2drSkNRbHlkVzVEYjI1MFpYaDBMbkpsZEhWeWJtVmtJRDBnZEhKMVpRb0pDUWtKY21WMGRYSnVJSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxVbVYwZFhKdUNna0pDWDBnWld4elpTQjdDZ2tKQ1FseWRXNURiMjUwWlhoMExuSmxkSFZ5Ym1Wa0lEMGdkSEoxWlFvSkNRa0pjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVlNaWFIxY200Z1BTQjJiMmxrSURBS0NRa0pDWEpsZEhWeWJnb0pDUWw5Q2drSmZTQmxiSE5sQ2drSmFXWW9RVk5VVzJsZExuUjVjR1VnUFQwZ0oxWmhjbWxoWW14bFJHVmpiR0Z5WVhScGIyNG5LU0I3Q2drSkNXeGxkQ0J5WlhOMWJIUUtDUWtKTHk4Z2MyOGdZMjl1ZEdWNGRDQmtiMlZ6YmlkMElHUnBjMkZ3Y0dWaGNnb0pDUWxtYjNJb2JHVjBJR29nUFNBd095QnFJRHdnUVZOVVcybGRMbVJsWTJ4aGNtRjBhVzl1Y3k1c1pXNW5kR2c3SUdvckt5a2dld29KQ1FrSmNtVnpkV3gwSUQwZ1lYZGhhWFFnY25WdVUzUmhkR1Z0Wlc1MEtHb3NJRUZUVkZ0cFhTNWtaV05zWVhKaGRHbHZibk1zSUhKMWJrTnZiblJsZUhRcENna0pDUWxwWmloaGQyRnBkQ0J6YUc5MWJHUkNkV0ppYkdWUGRYUW9jblZ1UTI5dWRHVjRkQ2twSUhzZ0x5OGdZblZpWW14bElIVndDZ2tKQ1FrSmNtVjBkWEp1Q2drSkNRbDlDZ2tKQ1gwS0NRa0pjbVYwZFhKdUlISmxjM1ZzZEFvSkNYMGdaV3h6WlFvSkNXbG1LRUZUVkZ0cFhTNTBlWEJsSUQwOUlDZFdZWEpwWVdKc1pVUmxZMnhoY21GMGIzSW5LU0I3Q2drSkNTOHZJR1J2UVhOemFXZHVDZ2tKQ1hKMWJrTnZiblJsZUhRdWJHOWpZV3hXWVhKcFlXSnNaWE5iUVZOVVcybGRMbWxrTG01aGJXVmRJRDBnSjNWdVpHVm1hVzVsWkNjS0NRa0pjbVYwZFhKdUlHRjNZV2wwSUhKMWJrRnpjMmxuYm0xbGJuUW9RVk5VVzJsZExtbGtMQ0JCVTFSYmFWMHVhVzVwZEN3Z2NuVnVRMjl1ZEdWNGRDa0tDUWw5SUdWc2MyVWdDZ29LQ1FscFppaEJVMVJiYVYwdWRIbHdaU0E5UFNBblEyRnNiRVY0Y0hKbGMzTnBiMjRuSUh4OElFRlRWRnRwWFM1MGVYQmxJRDA5SUNkT1pYZEZlSEJ5WlhOemFXOXVKeWtnZXdvSkNRbHlaWFIxY200Z1lYZGhhWFFnY25WdVEyRnNiQ2hCVTFSYmFWMHNJSEoxYmtOdmJuUmxlSFFwQ2drSmZTQmxiSE5sQ2drSmFXWW9RVk5VVzJsZExuUjVjR1VnUFQwZ0owWjFibU4wYVc5dVJYaHdjbVZ6YzJsdmJpY2dDZ2tKQ1h4OElFRlRWRnRwWFM1MGVYQmxJRDA5SUNkQmNuSnZkMFoxYm1OMGFXOXVSWGh3Y21WemMybHZiaWNLQ1FrSmZId2dRVk5VVzJsZExuUjVjR1VnUFQwZ0owWjFibU4wYVc5dVJHVmpiR0Z5WVhScGIyNG5LU0I3Q2drSkNYSmxkSFZ5YmlCaGQyRnBkQ0J5ZFc1R2RXNWpkR2x2YmloQlUxUmJhVjBzSUhKMWJrTnZiblJsZUhRcENnb0pDWDBnWld4elpRb0pDV2xtS0VGVFZGdHBYUzUwZVhCbElEMDlJQ2ROWlcxaVpYSkZlSEJ5WlhOemFXOXVKeWtnZXdvSkNRbHlaWFIxY200Z1lYZGhhWFFnY25WdVRXVnRZbVZ5S0VGVFZGdHBYU3dnY25WdVEyOXVkR1Y0ZENrS0NRbDlJR1ZzYzJVS0NRbHBaaWhCVTFSYmFWMHVkSGx3WlNBOVBTQW5UMkpxWldOMFJYaHdjbVZ6YzJsdmJpY3BJSHNLQ1FrSmNtVjBkWEp1SUdGM1lXbDBJSEoxYms5aWFtVmpkQ2hCVTFSYmFWMHNJSEoxYmtOdmJuUmxlSFFwQ2drSmZTQmxiSE5sQ2drSmFXWW9RVk5VVzJsZExuUjVjR1VnUFQwZ0oxVnVZWEo1Ulhod2NtVnpjMmx2YmljcElIc0tDUWtKY21WMGRYSnVJR0YzWVdsMElISjFibFZ1WVhKNUtFRlRWRnRwWFN3Z2NuVnVRMjl1ZEdWNGRDa0tDUWw5SUdWc2MyVWdDZ2tKYVdZb1FWTlVXMmxkTG5SNWNHVWdQVDBnSjBsbVUzUmhkR1Z0Wlc1MEp5a2dld29KQ1Fsc1pYUWdjbVZ6ZFd4MElEMGdZWGRoYVhRZ2NuVnVVM1JoZEdWdFpXNTBLREFzSUZ0QlUxUmJhVjB1ZEdWemRGMHNJSEoxYmtOdmJuUmxlSFFwQ2drSkNXbG1LR0YzWVdsMElITm9iM1ZzWkVKMVltSnNaVTkxZENoeWRXNURiMjUwWlhoMEtTa2dld29KQ1FrSmNtVjBkWEp1Q2drSkNYMEtDUWtKYVdZb2NtVnpkV3gwS1NCN0Nna0pDUWx5WlhSMWNtNGdZWGRoYVhRZ2NuVnVVM1JoZEdWdFpXNTBLREFzSUZ0QlUxUmJhVjB1WTI5dWMyVnhkV1Z1ZEYwc0lISjFia052Ym5SbGVIUXBDZ2tKQ1gwZ1pXeHpaU0JwWmlBb1FWTlVXMmxkTG1Gc2RHVnlibUYwWlNrZ2V3b0pDUWtKY21WMGRYSnVJR0YzWVdsMElISjFibE4wWVhSbGJXVnVkQ2d3TENCYlFWTlVXMmxkTG1Gc2RHVnlibUYwWlYwc0lISjFia052Ym5SbGVIUXBJQW9KQ1FsOUNna0pmU0JsYkhObENna0phV1lvUVZOVVcybGRMblI1Y0dVZ1BUMGdKMFJsWW5WbloyVnlVM1JoZEdWdFpXNTBKeWtnZXdvSkNRa3ZMeUJYVkVZZ1NWTWdWRWhKVXlCVFNFbFVQd29KQ1Frdkx5QWdhSFIwY0hNNkx5OTNkM2N1YVdOekxuVmphUzVsWkhVdmZuQmhkSFJwY3k5amIyMXRiMjR2YUdGdVpHOTFkSE12YldGamJXbHVaM2RsWTJ4cGNITmxMMkZzYkdWNGNHVnlhVzFsYm5SaGJDOXRZV010WjJSaUxXbHVjM1JoYkd3dWFIUnRiQW9KQ1Frdkx5QkpJRWhCVmtVZ1ZFOGdVMGxIVGlCTldTQlBWMDRnUTA5UVdTQlBSaUJFUWtjZ1ZFOGdWVk5GSUVsVUlFOU9JQW9KQ1Frdkx5QWdJRTVCVkVsV1JTQkJVRkJNU1VOQlZFbFBUbE0vQ2drSkNTOHZJRmRJV1NCVVNFVWdSbFZEU3lCRVQwVlRUaWRVSUVGUVVFeEZJRWhCVmtVZ1FTQkRURWxEU3lBeE1pQlVTVTFGVXdvSkNRa3ZMeUFnSUZSUElFVk9RVUpNUlNCRVJWWkZURTlRUlZJZ1RVOUVSU0JQVGlCTlFVTlBVeUJUVHlCWlQxVWdRMEZPSUVSRlFsVkhDZ2tKQ1M4dklDQWdRVTVFSUVsT1UxUkJURXdnV1U5VlVpQlBWMDRnVFU5RVZVeEZVeUJYU1ZSSVQxVlVJRVJKVTBGQ1RFbE9Sd29KQ1Frdkx5QWdJRk5QVFVVZ1UxbFRWRVZOSUV4RlZrVk1JRk5GUTFWU1NWUlpQd29KQ1Frdkx5QkpKMHhNSUZSRlRFd2dXVTlWSUZkSVdTd2dRa1ZEUVZWVFJTQkJVRkJNUlNCSVFWUkZVeUJFUlZaRlRFOVFSVkpUQ2drSkNTOHZJQ0FnVkVoRklFUlBUaWRVSUU5WFRpNEtDUWtKTHk4Z1NTQlhUMDVFUlZJZ1NVWWdWRWhKVXlCRlZrRk1WVUZVVDFJZ1NWTWdSa0ZUVkNCRlRrOVZSMGdnVkU4Z1VrVk9SRVZTQ2drSkNTOHZJQ0FnVTB0WlFrOVlSVk1nVDA0Z1FTQkRURTlWUkNCSFVGVWdSbEpQVFNCUFZFaEZVaUJYVDFKTVJGTXZSMEZOUlZNL0Nna0pDWEoxYmtOdmJuUmxlSFF1WW5WaVlteGxRVk5VSUQwZ1FWTlVXMmxkQ2drSkNYSjFia052Ym5SbGVIUXVjR0YxYzJWa0lEMGdkSEoxWlFvSkNRbHpaVzVrVFdWemMyRm5aU2g3SUFvSkNRa0pjR0YxYzJWa09pQW5MaWNzSUFvSkNRa0piR2x1WlRvZ2NuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWTWFXNWxJQzBnTVFvSkNRbDlLUW9KQ1FseVpYUjFjbTRLQ1FsOUlHVnNjMlVLQ2drSmFXWW9RVk5VVzJsZExuUjVjR1VnUFQwZ0owUnZWMmhwYkdWVGRHRjBaVzFsYm5RbkNna0pDWHg4SUVGVFZGdHBYUzUwZVhCbElEMDlJQ2RYYUdsc1pWTjBZWFJsYldWdWRDY3BJSHNLQ1FrSllYZGhhWFFnY25WdVYyaHBiR1VvUVZOVVcybGRMQ0J5ZFc1RGIyNTBaWGgwS1FvSkNYMGdaV3h6WlFvS0NRbHBaaWhCVTFSYmFWMHVkSGx3WlNBOVBTQW5WR2h5YjNkVGRHRjBaVzFsYm5RbktTQjdDZ2tKQ1hSb2NtOTNJQ2hoZDJGcGRDQnlkVzVUZEdGMFpXMWxiblFvTUN3Z1cwRlRWRnRwWFM1aGNtZDFiV1Z1ZEYwc0lISjFia052Ym5SbGVIUXBLUW9KQ1gwZ1pXeHpaUW9LQ1FscFppaEJVMVJiYVYwdWRIbHdaU0E5UFNBblZISjVVM1JoZEdWdFpXNTBKeWtnZXdvSkNRbHNaWFFnY21WemRXeDBDZ2tKQ1hSeWVTQjdDZ2tKQ1FseVpYTjFiSFFnUFNCaGQyRnBkQ0J5ZFc1VGRHRjBaVzFsYm5Rb01Dd2dXMEZUVkZ0cFhTNWliRzlqYTEwc0lISjFia052Ym5SbGVIUXBDZ2tKQ1gwZ1kyRjBZMmdnS0dVcElIc0tDUWtKQ1dsbUtFRlRWRnRwWFM1b1lXNWtiR1Z5S1NCN0Nna0pDUWtKTHk4Z2MyRnRaU0JoY3lCeWRXNURZV3hzSUhCaGNtRnRJR0Z6YzJsbmJtMWxiblFLQ1FrSkNRbHlkVzVEYjI1MFpYaDBMbXh2WTJGc1ZtRnlhV0ZpYkdWelcwRlRWRnRwWFM1b1lXNWtiR1Z5TG5CaGNtRnRjeTV1WVcxbFhTQTlJQ2QxYm1SbFptbHVaV1FuQ2drSkNRa0pZWGRoYVhRZ2NuVnVRWE56YVdkdWJXVnVkQ2g3Q2drSkNRa0pDWFI1Y0dVNklDZEpaR1Z1ZEdsbWFXVnlKeXdLQ1FrSkNRa0pibUZ0WlRvZ1FWTlVXMmxkTG1oaGJtUnNaWEl1Y0dGeVlXMXpMbTVoYldVS0NRa0pDUWw5TENCN0Nna0pDUWtKQ1hSNWNHVTZJQ2RNYVhSbGNtRnNKeXdLQ1FrSkNRa0pkbUZzZFdVNklHVUtDUWtKQ1FsOUxDQnlkVzVEYjI1MFpYaDBLUW9KQ1FrSmZRb0pDUWw5SUdacGJtRnNiSGtnZXdvSkNRa0phV1lvUVZOVVcybGRMbVpwYm1Gc2JIa3BJSHNLQ1FrSkNRbHlaWFIxY200Z1lYZGhhWFFnY25WdVUzUmhkR1Z0Wlc1MEtEQXNJRnRCVTFSYmFWMHVabWx1WVd4c2VWMHNJSEoxYmtOdmJuUmxlSFFwQ2drSkNRbDlJR1ZzYzJVZ2V3b0pDUWtKQ1dsbUtISjFia052Ym5SbGVIUXVZblZpWW14bFVtVjBkWEp1SUNFOVBTQnlaWE4xYkhRcElIc0tDUWtKQ1FrSlkyOXVjMjlzWlM1c2IyY29KMWRCVWs1SlRrYzZJRzV2ZENCaWRXSmliR2x1WnlCamIzSnlaV04wYkhrNklDY2dDZ2tKQ1FrSkNRa3JJSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxVM1JoWTJ0YmNuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWVGRHRmpheTVzWlc1bmRHZ2dMU0F4WFZzd1hTa0tDUWtKQ1FsOUNna0pDUWtKY21WMGRYSnVJSEpsYzNWc2RBb0pDUWtKZlFvSkNRbDlDZ2tKZlNCbGJITmxDZ2tKYVdZb1FWTlVXMmxkTG5SNWNHVWdQVDBnSjBGeWNtRjVSWGh3Y21WemMybHZiaWNwSUhzS0NRa0piR1YwSUhKbGMzVnNkQ0E5SUZ0ZENna0pDV1p2Y2loc1pYUWdhaUE5SURBN0lHb2dQQ0JCVTFSYmFWMHVaV3hsYldWdWRITXViR1Z1WjNSb095QnFLeXNwSUhzS0NRa0pDWEpsYzNWc2RDNXdkWE5vS0dGM1lXbDBJSEoxYmxOMFlYUmxiV1Z1ZENnd0xDQmJRVk5VVzJsZExtVnNaVzFsYm5SelcycGRYU3dnY25WdVEyOXVkR1Y0ZENrcENna0pDWDBLQ1FrSmNtVjBkWEp1SUhKbGMzVnNkQW9KQ1gwZ1pXeHpaU0FLQ2dvSkNYc0tDUWtKWkdWaWRXZG5aWElLQ1FrSmRHaHliM2NnYm1WM0lFVnljbTl5S0VGVFZGdHBYUzUwZVhCbElDc2dKem9nVG05MElHbHRjR3hsYldWdWRHVmtJU2NwQ2drSmZRb0tDWDBnWTJGMFkyZ2dLSFZ3S1NCN0Nna0phV1lvY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZWY0NrZ2V3b0pDUWwwYUhKdmR5QjFjQW9KQ1gwS0NRbGpiMjV6YjJ4bExteHZaeWgxY0NrS0NRbHBaaWh5ZFc1RGIyNTBaWGgwTG1KMVltSnNaVVpwYkdVZ0lUMGdKMnhwWW5KaGNua3ZjbVZ3YkM1cWN5Y0tDUWtKTHk5eWRXNURiMjUwWlhoMExtSjFZbUpzWlZOMFlXTnJXM0oxYmtOdmJuUmxlSFF1WW5WaVlteGxVM1JoWTJzdWJHVnVaM1JvTFRGZFd6RmRJQ0U5SUNkc2FXSnlZWEo1TDNKbGNHd3Vhbk1uQ2drSktTQjdDZ2tKQ1hKMWJrTnZiblJsZUhRdVluVmlZbXhsUm1sc1pTQTlJQ2RzYVdKeVlYSjVMM0psY0d3dWFuTW5DZ2tKQ1dGM1lXbDBJR1J2UlhKeWIzSW9kWEFzSUhKMWJrTnZiblJsZUhRcENna0pDWEoxYmtOdmJuUmxlSFF1Wlc1a1pXUWdQU0IwY25WbENna0pmUW9KQ1hKbGRIVnliZ29KZlFwOUNnb3ZMeUJtYVc1a0lHRnVaQ0J5ZFc0Z2JXRnBiZ3BoYzNsdVl5Qm1kVzVqZEdsdmJpQnlkVzVDYjJSNUtFRlRWQ3dnY25WdVEyOXVkR1Y0ZENrZ2V3b0phV1lvWVhkaGFYUWdjMmh2ZFd4a1FuVmlZbXhsVDNWMEtISjFia052Ym5SbGVIUXBLU0I3Q2drSlpHVmlkV2RuWlhJS0NRbDBhSEp2ZHlCdVpYY2dSWEp5YjNJb0oyTnZiblJsZUhRZ1pXNWtaV1FoSnlrS0NYMEtDZ2t2THlCVVQwUlBPaUJHU1ZnZ1EwOU9WRVZZVkZNdUlGUklTVk1nU1ZNZ1QwNUZJRTlHSUZSSVJTQlVTRWxPUjFNZ1ZFaEJWQW9KTHk4Z0lDQlRSVkpKVDFWVFRGa2dRazlVU0VWU1V5Qk5SU0JCUWs5VlZDQkRTRkpQVFVVZ1JFVkNWVWRIUlZJc0lFbEdJRWtnQ2drdkx5QWdJRUZOSUVsT0lFRWdSRWxHUmtWU1JVNVVJRk5EVDFCRklFeFBUMHRKVGtjZ1FWUWdRU0JXUVZKSlFVSk1SU0JYU1ZSSUNna3ZMeUFnSUZSSVJTQlRRVTFGSUU1QlRVVWdRVk1nVkVoRklGTkRUMUJGSUVsVUoxTWdVRUZWVTBWRUlFOU9MQ0JKVkNCVFNFOVhVd29KTHk4Z0lDQk5SU0JVU0VVZ1YxSlBUa2NnVTBOUFVFVWdWMGhGVGlCSklGVlRSU0JVU0VVZ1UxUkJRMHNoQ2dseWRXNURiMjUwWlhoMExtSjFZbUpzWlZCeWIzQmxjblI1SUQwZ0p5Y0tDZ2t2THlCVVQwUlBPaUJ5WlhOMGIzSmxJRzkxZEdWeUlITmpiM0JsSUhkb1pXNGdZMjl1ZEdWNGRDQjNZWE1nWTNKbFlYUmxaQW9KTHk4Z1pHOWxjMjRuZENCdVpXVmtJSFJ2SUdKbElHWmhjM1FzSUdKbFkyRjFjMlVnWVhONWJtTWdSR1YyVkc5dmJITWdZMkZzYkhNc0lHRnlaU0J1YjNRZ1ptRnpkQW9KTHk4Z2NtVndiR0ZqWlNCM2FYUm9JR04xY25KbGJuUWdZMjl1ZEdWNGRBb0tDUzh2SUdGdWVTQjBhVzFsSUdFZ2MyVjBWR2x0WlhJZ2FYTWdkWE5sSUhSb1pTQmpZV3hzVTNSaFkyc2dkMmxzYkNCaVpTQnlaWE5sZEFvSkx5OGdJQ0IzYUdsamFDQnRaV0Z1Y3lCbGNuSnZjaUJ0WlhOellXZHBibWNnYlhWemRDQnBiblJsY21ObGNIUWdhR1Z5WlNCdWIzUWdkRzhLQ1M4dklDQWdjblZwYmlCdmRYUWdkMjl5YTJWeUlIQnliMk5sYzNNS0NYUnllU0I3Q2drSmJHVjBJSEpsYzNWc2RDQTlJR0YzWVdsMElISjFibEJoY21GdFpYUmxjbk1vUVZOVUxDQnlkVzVEYjI1MFpYaDBLUW9KQ1hKMWJrTnZiblJsZUhRdVluVmlZbXhsVUhKdmNHVnlkSGtnUFNBbkp3b0pDV2xtS0dGM1lXbDBJSE5vYjNWc1pFSjFZbUpzWlU5MWRDaHlkVzVEYjI1MFpYaDBLU2tnZXdvSkNRbHlaWFIxY200Z2NtVnpkV3gwTG5CdmNDZ3BDZ2tKZlFvSkNTOHZJSEpsYlc5MlpTQmhibmwwYUdsdVp5QmpjbVZoZEdWa0lHbHVJSFJvWlNCd1lYTjBJR052Ym5SbGVIUUtDUWt2TDA5aWFtVmpkQzVoYzNOcFoyNG9jblZ1UTI5dWRHVjRkQzVzYjJOaGJFWjFibU4wYVc5dWN5d2djM1JoY25SR2RXNWpjeWtLQ1FrdkwwOWlhbVZqZEM1aGMzTnBaMjRvY25WdVEyOXVkR1Y0ZEM1c2IyTmhiRlpoY21saFlteGxjeXdnYzNSaGNuUldZWEp6S1FvSkNTOHZJRlJQUkU4NklFeEZRVXRaSUZORFQxQkZMQ0IwYUdseklIZGhlU0IzWlNCclpXVndJSFJvWlNCellXMWxJRzlpYW1WamRDQjBhR1VnZDJodmJHVWdkR2x0WlFvSkNTOHZjblZ1UTI5dWRHVjRkQzVzYjJOaGJFWjFibU4wYVc5dWN5QTlJSE4wWVhKMENna0pMeTl5ZFc1RGIyNTBaWGgwTG14dlkyRnNWbUZ5YVdGaWJHVnpJRDBnYzNSaGNuUldZWEp6Q2drSmNtVjBkWEp1SUhKbGMzVnNkQzV3YjNBb0tRb0pmU0JqWVhSamFDQW9aU2tnZXdvSkNXTnZibk52YkdVdWJHOW5LR1VwQ2drSllYZGhhWFFnWkc5RmNuSnZjaWhsTENCeWRXNURiMjUwWlhoMEtRb0pDWEoxYmtOdmJuUmxlSFF1Wlc1a1pXUWdQU0IwY25WbENna0pjbVYwZFhKdUNnbDlDbjBLQ2dvS0Nnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2V2YWwvY2FsbC5qc190aW1lc3RhbXAnXT0xNjUxNzcxNDg2ODA5Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZXZhbC9jYWxsLmpzJ109J0NncHNaWFFnWm5WdVkzUnBiMjVEYjNWdWRHVnlJRDBnTUFvS1kyOXVjM1FnVFVGWVgwTkJURXdnUFNBeE1EQXdNQW9LWTI5dWMzUWdSbFZPUTE5RFQwMU5SVTVVVXlBOUlDOG9YbnhjY3lwYlhsd3ZYSE5kS3k0cVhHNHBLRnh6S2x3dlhDOHVLbHh1S1Nzb1lYTjVibU44Wm5WdVkzUnBiMjU4WEhNcExpby9KQzhLWTI5dWMzUWdRVk5RUlVOVVUxOVNSVWRGV0NBOUlDOWNjeXQ4WEc0cmZGd29mRndwZkdaMWJtTjBhVzl1ZkdGemVXNWpMMmNLQ2dvdkx5QnlaWFIxY200Z1lXNGdZWEp5WVhrZ2IyWWdaWFpoYkhWaGRHVmtJR1Y0Y0hKbGMzTnBiMjRnZEc4Z2NHRnpjeUJwYm5SdklIUm9aU0J1WlhoMElHWjFibU4wYVc5dUlHTmhiR3dLWVhONWJtTWdablZ1WTNScGIyNGdjblZ1VUdGeVlXMWxkR1Z5Y3lod1lYSmhiWE1zSUhKMWJrTnZiblJsZUhRcElIc0tDV3hsZENCeVpYTjFiSFFnUFNCYlhRb0pabTl5S0d4bGRDQnBJRDBnTURzZ2FTQThJSEJoY21GdGN5NXNaVzVuZEdnN0lHa3JLeWtnZXdvSkNXeGxkQ0JoY21jZ1BTQndZWEpoYlhOYmFWMEtDUWx5WlhOMWJIUXVjSFZ6YUNoaGQyRnBkQ0J5ZFc1VGRHRjBaVzFsYm5Rb01Dd2dXMkZ5WjEwc0lISjFia052Ym5SbGVIUXBLUW9KQ1dsbUtHRjNZV2wwSUhOb2IzVnNaRUoxWW1Kc1pVOTFkQ2h5ZFc1RGIyNTBaWGgwS1NrZ2V3b0pDUWx5WlhSMWNtNGdjbVZ6ZFd4MElDOHZJR0oxWW1Kc1pTQjFjQW9KQ1gwS0NYMEtDWEpsZEhWeWJpQnlaWE4xYkhRS2ZRb0tMeThnUVZCSklHTmhiR3h6SUdGeVpTQnViM2NnWlcxaVpXUmtaV1FnYVc0Z2QyVmlJSEJoWjJVZ1lXNWtJSFZ3Ykc5aFpHVmtJSFJ2SUdKaFkydGxibVF1YW5NS0x5OGdJQ0J6WldVZ1pISnBkbVZ5TDJ4cFluSmhjbmt1YW5NS2JHVjBJRmRGUWtSU1NWWkZVbDlCVUVrZ1BTQjdDZ2xsZUhCdmNuUnpPaUI3ZlFwOUNnb0tMeThnVkU5RVR6b2dZV1JrSUFvdkx5QkFUR0YwWlFvdkx5QlRlVzUwWVhnZ2RHOGdkWE5sSUd4aGRHVWdZbWx1WkdsdVp5d2djM1J2Y21VZ2RHaGxJRUZUVkNCaGMzTnBaMjV0Wlc1MElHbHVJR3h2WTJGc1ZtRnlhV0ZpYkdWekNpOHZJQ0FnUVc1a0lIZG9aVzRnZEdobElIWmhjbWxoWW14bElHbHpJR0ZqWTJWemMzTmxaQ3dnWTJobFkyc2dabTl5SUhSb1pTQkJVMVFnWVc1a0lISjFibE4wWVhSbGJXVnVkQ2dwQ2dvS0NtRnplVzVqSUdaMWJtTjBhVzl1SUhKMWJrTmhiR3hUZEdGMFpXMWxiblJ6S0hKMWJrTnZiblJsZUhRc0lHWjFibU4wYVc5dVRtRnRaU3dnWm1sc1pXNWhiV1VzSUhCaGNtRnRaWFJsY2tSbFptbHVhWFJwYjI0c0lHSmxabTl5WlN3Z1lXWjBaWElzSUdKdlpIa3NJQzR1TG1OaGJHeEJjbWR6S1NCN0Nna3ZMeUJoYzNOcFoyNGdkRzhnY0dGeVlXMGdibUZ0WlhNZ2FXNGdibVY0ZENCamIyNTBaWGgwQ2dsc1pYUWdjM1JoY25SV1lYSnpJRDBnVDJKcVpXTjBMbUZ6YzJsbmJpaDdmU3dnY25WdVEyOXVkR1Y0ZEM1c2IyTmhiRlpoY21saFlteGxjeWtLQ2dsc1pYUWdZbVZtYjNKbFRHbHVaU0E5SUhKMWJrTnZiblJsZUhRdVluVmlZbXhsVEdsdVpTQXRJREVnTHk4Z0xURWdabTl5SUhkeVlYQndaWElnWm5WdVkzUnBiMjRLQ1dsbUtISjFia052Ym5SbGVIUXVZblZpWW14bFUzUmhZMnN1YkdWdVozUm9JRDA5SURBcElIc0tDUWxqYjI1emIyeGxMbVZ5Y205eUtDZERZV3hzSUhOMFlXTnJJR052Y25KMWNIUmxaQ2NwQ2dsOUNnbHlkVzVEYjI1MFpYaDBMbUoxWW1Kc1pWTjBZV05yTG5CMWMyZ29XMloxYm1OMGFXOXVUbUZ0WlN3Z1ptbHNaVzVoYldVc0lHSmxabTl5WlV4cGJtVmRLUW9KYkdWMElISmxjM1ZzZEFvSmRISjVJSHNLQ1FrS0NRa3ZMeUJVU0VsVElGTklTVlFnU1ZNZ1NVMVFUMUpVUVU1VUxpQk5RVXRGSUVOUFRWQk1TVU5CVkVWRUlGTkpUVkJNUlM0S0NRa3ZMeUJKSUUxRlRsUkpUMDRnVkVoSlV5QlVUeUJRUlU5UVRFVWdRVTVFSUZSSVJWa2dTRUZXUlNCT1R5QkpSRVZCQ2drSkx5OGdJQ0JYU0VGVUlFa2dUVVZCVGk0Z1NTQk1SVUZTVGtWRUlGUklTVk1nU1U0Z1RWa2dSa0ZPUTFrZ05DQlpVaTRLQ1Frdkx5Qm9kSFJ3Y3pvdkwyVnVMbmRwYTJsd1pXUnBZUzV2Y21jdmQybHJhUzlCYzNCbFkzUXRiM0pwWlc1MFpXUmZjSEp2WjNKaGJXMXBibWNLQ1Frdkx5QWdJRU1qSUVSUFJWTWdWRWhKVXlCQlZWUlBUVUZVU1VOQlRFeFpJRUZPUkNCUVJVOVFURVVnVEU5V1JTQkpWQW9KQ1M4dklDQWdWRWhKVXlCSlV5QkNRVk5KUTBGTVRGa2dTRTlYSUVsVUlGZFBVa3RUSUVsT1ZFVlNUa0ZNVEZrc0lGVlRSVk1LQ1Frdkx5QWdJRWxPVkZKUFUxQkZRMVJKVDA0Z1ZFOGdVa1ZCUkNCQlZGUlNTVUpWVkVWVElFWlNUMDBnVkVoRklGQkJVbE5GQ2drSkx5OGdJQ0JVU0VWT0lFTkJURXhUSUZSSVJTQkdWVTVEVkVsUFRsTWdRa1ZHVDFKRklGUklSU0JCUTFSVlFVd2dRMEZNVEFvSkNTOHZJQ0FnU0VGUVVFVk9VeTRnVTFsT1ZFRkRWRWxESUZOVlIwRlNMaUJGVmtWU1dTQk1RVTVIVlVGSFJTQlRTRTlWVEVRZ1NFRldSU0JCVkZSU1NVSlZWRVZUQ2drSmFXWW9ZbVZtYjNKbEtTQjdDZ2tKQ1d4bGRDQmlaV1p2Y21WR2RXNWpDZ2tKQ1dsbUtISjFia052Ym5SbGVIUXViRzlqWVd4V1lYSnBZV0pzWlhOYlltVm1iM0psWFNBOVBTQW5ablZ1WTNScGIyNG5LU0I3Q2drSkNRbGlaV1p2Y21WR2RXNWpJRDBnY25WdVEyOXVkR1Y0ZEM1c2IyTmhiRlpoY21saFlteGxjMXRpWldadmNtVmRDZ2tKQ1gwZ1pXeHpaU0I3Q2drSkNRbDBhSEp2ZHlCdVpYY2dSWEp5YjNJb0owRjBkSEpwWW5WMFpTQkFRbVZtYjNKbElHNXZkQ0JtYjNWdVpEb2dKeUFySUdKbFptOXlaU2tLQ1FrSmZRb0pDUWt2THlCaGJHeHZkeUIxYzJWeWN5QjBieUJ0YjJScFpua2dablZ1WTNScGIyNGdZWEpuZFcxbGJuUnpQeUJUVlZKRklRb0pDUWxzWlhRZ2NpQTlJR0YzWVdsMElHSmxabTl5WlVaMWJtTW9ZMkZzYkVGeVozTXNJSEoxYmtOdmJuUmxlSFFwQ2drSmZRb0pDV2xtS0dGM1lXbDBJSE5vYjNWc1pFSjFZbUpzWlU5MWRDaHlkVzVEYjI1MFpYaDBLU2tnZXdvSkNRbHlaWFIxY200S0NRbDlDZ29KQ1dadmNpaHNaWFFnYkNBOUlEQTdJR3dnUENCd1lYSmhiV1YwWlhKRVpXWnBibWwwYVc5dUxteGxibWQwYURzZ2JDc3JLU0I3Q2drSkNXbG1LSEJoY21GdFpYUmxja1JsWm1sdWFYUnBiMjViYkYwdWRIbHdaU0FoUFNBblNXUmxiblJwWm1sbGNpY3BJSHNLQ1FrSkNYUm9jbTkzSUc1bGR5QkZjbkp2Y2lnblJuVnVZM1JwYjI1RVpXTnNZWEpoZEdsdmJqb2dUbTkwSUdsdGNHeGxiV1Z1ZEdWa0lTY3BDZ2tKQ1gwS0NRa0phV1lvYkNBOVBTQmpZV3hzUVhKbmN5NXNaVzVuZEdncElIc0tDUWtKQ1dOdmJuUnBiblZsT3dvSkNRbDlDZ2tKQ1M4dklHWjFZMnN0WVhKdmRXNWtjejhLQ1FrSmFXWW9kSGx3Wlc5bUlISjFia052Ym5SbGVIUXViRzlqWVd4V1lYSnBZV0pzWlhNZ1BUMGdKM1Z1WkdWbWFXNWxaQ2NwSUhzS0NRa0pDV1JsWW5WbloyVnlDZ2tKQ1gwS0NRa0pjblZ1UTI5dWRHVjRkQzVzYjJOaGJGWmhjbWxoWW14bGMxdHdZWEpoYldWMFpYSkVaV1pwYm1sMGFXOXVXMnhkTG01aGJXVmRJRDBnSjNWdVpHVm1hVzVsWkNjS0NRa0pZWGRoYVhRZ2NuVnVRWE56YVdkdWJXVnVkQ2g3Q2drSkNRbDBlWEJsT2lBblNXUmxiblJwWm1sbGNpY3NDZ2tKQ1FsdVlXMWxPaUJ3WVhKaGJXVjBaWEpFWldacGJtbDBhVzl1VzJ4ZExtNWhiV1VLQ1FrSmZTd2dld29KQ1FrSmRIbHdaVG9nSjB4cGRHVnlZV3duTEFvSkNRa0pkbUZzZFdVNklHTmhiR3hCY21kelcyeGRDZ2tKQ1gwc0lISjFia052Ym5SbGVIUXBDZ2tKQ1dsbUtHRjNZV2wwSUhOb2IzVnNaRUoxWW1Kc1pVOTFkQ2h5ZFc1RGIyNTBaWGgwS1NrZ2V3b0pDUWtKY21WMGRYSnVDZ2tKQ1gwS0NRbDlDZ29KQ1M4dklISjFiaUJ1WlhjZ1kyOXRiV0Z1WkNCamIyNTBaWGgwQ2drSmNtVnpkV3gwSUQwZ1lYZGhhWFFnY25WdVUzUmhkR1Z0Wlc1MEtEQXNJRnRpYjJSNVhTd2djblZ1UTI5dWRHVjRkQ2tLQ2drSkx5OGdWRTlFVHpvZ1UwOU5SVlJJU1U1SElFRkNUMVZVSUVsR0lFRk9JRUZUVUVWRFZDQklRVk1nUVU0Z1JWaERVRXhKUTBsVUlGSkZWRlZTVGlBS0NRa3ZMeUFnSUZOVVFWUkZUVVZPVkNCVVNFVk9JRTlXUlZKU1NVUkZJRlJJUlNCU1JWUlZVazRnVmtGTVZVVWdWMGxVU0NCQ1JVWlBVa1VLQ1Frdkx5QWdJRTlVU0VWU1YwbFRSU0JNUlVGV1JTQkpWQ0JWVGsxUFJFbEdTVVZFQ2drSmFXWW9ZV1owWlhJcElIc0tDUWtKYkdWMElHRm1kR1Z5Um5WdVl3b0pDUWxwWmloeWRXNURiMjUwWlhoMExteHZZMkZzVm1GeWFXRmliR1Z6VzJGbWRHVnlYU0E5UFNBblpuVnVZM1JwYjI0bktTQjdDZ2tKQ1FsaFpuUmxja1oxYm1NZ1BTQnlkVzVEYjI1MFpYaDBMbXh2WTJGc1ZtRnlhV0ZpYkdWelcyRm1kR1Z5WFFvSkNRbDlJR1ZzYzJVZ2V3b0pDUWtKZEdoeWIzY2dibVYzSUVWeWNtOXlLQ2RCZEhSeWFXSjFkR1VnUUVGbWRHVnlJRzV2ZENCbWIzVnVaRG9nSnlBcklHRm1kR1Z5S1FvSkNRbDlDZ2tKQ1hKbGMzVnNkQ0E5SUdGM1lXbDBJR0ZtZEdWeVJuVnVZeWh5WlhOMWJIUXNJSEoxYmtOdmJuUmxlSFFwQ2drSmZRb0pDWEoxYmtOdmJuUmxlSFF1WW5WaVlteGxUV1Z0WW1WeUlEMGdiblZzYkFvSkNYSjFia052Ym5SbGVIUXVZblZpWW14bFVISnZjR1Z5ZEhrZ1BTQW5Kd29KQ1dsbUtISjFia052Ym5SbGVIUXVjbVYwZFhKdVpXUXBJSHNLQ1FrSmNuVnVRMjl1ZEdWNGRDNXlaWFIxY201bFpDQTlJR1poYkhObENna0pDV2xtS0hKbGMzVnNkQ0FoUFQwZ2NuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWU1pYUjFjbTRwSUhzS0NRa0pDV052Ym5OdmJHVXViRzluS0NkWFFWSk9TVTVIT2lCdWIzUWdZblZpWW14cGJtY2dZMjl5Y21WamRHeDVPaUFuSUNzZ1puVnVZM1JwYjI1T1lXMWxLUW9KQ1FsOUNna0pDWEpsYzNWc2RDQTlJSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxVbVYwZFhKdUNna0pDV1JsYkdWMFpTQnlkVzVEYjI1MFpYaDBMbUoxWW1Kc1pWSmxkSFZ5YmdvSkNYMEtDUWxwWmloaGQyRnBkQ0J6YUc5MWJHUkNkV0ppYkdWUGRYUW9jblZ1UTI5dWRHVjRkQ2twSUhzS0NRa0pjbVYwZFhKdUNna0pmUW9LQ1M4dlQySnFaV04wTG1GemMybG5iaWh5ZFc1RGIyNTBaWGgwTG14dlkyRnNWbUZ5YVdGaWJHVnpMQ0J6ZEdGeWRGWmhjbk1wSUM4dklISmxjMlYwSUhKbFptVnlaVzVqWlhNS0NTOHZJRlJQUkU4NklFeEZRVXRaSUZORFQxQkZMQ0J5WlcxdmRtVWdkVzV1WVcxbFpDQjJZWEpwWVdKc1pYTWdabkp2YlNCd2NtVjJhVzkxY3lCelkyOXdaUW9KTHk4Z1ZFOUVUem9nUmtsWUlGTkRUMUJKVGtjZ1YwbFVTQ0JCSUZKVlRrTlBUbFJGV0ZRdVEwOU9WRVZZVkZNZ1UxUkJRMHNLQ1M4dklDQWdWR2hwY3lCM2IzVnNaQ0JvWld4d0lITnZiSFpsSUhaaGNpOXNaWFFzSUdGMWRHOXRZWFJwWTJGc2JIa2daSEp2Y0NCMllYSWdhVzUwYnlCMGIzQWdZMjl1ZEdWNGRBb0pMeThnSUNCVWFHbHpJSGR2ZFd4a0lHaGxiSEFnZDJsMGFDQnpkR0YwYVdNdmNIVmliR2xqTDJaeWFXVnVaR3g1SUdOb1pXTnJhVzVuQ2drdkx5QWdJRlJvYVhNZ2QyOTFiR1FnYUdWc2NDQnNZVzVuZFdGblpYTWdkMmwwYUNCc1pXRnJlU0J6WTI5d1pYTWdZbmtnY0hWeWNHOXpaU3dnVEZWQkxDQlFVazlNVDBjL0Nna3ZMeUFnSUZSb2FYTWdkMjkxYkdRZ1ptbDRJSE5qYjNCcGJtY2dZWEp2ZFc1a0lIQmhjbUZ0WlhSbGNpQmtaV1pwYm1sMGFXOXVjd29KTHk4Z1ZFOUVUem9nYzJWaGNtTm9JSFJvWlNCamIyNTBaWGgwY3lCemRHRmpheUJtYjNJZ2RHaGxJSFpoY21saFlteGxDZ2w5SUdOaGRHTm9JQ2hsS1NCN0Nna0pkR2h5YjNjZ1pRb0pmU0JtYVc1aGJHeDVJSHNLQ1FseWRXNURiMjUwWlhoMExtSjFZbUpzWlZOMFlXTnJMbkJ2Y0NncENna0phV1lvY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZUZEdGamF5NXNaVzVuZEdnZ1BUMGdNQ2tnZXdvSkNRbGpiMjV6YjJ4bExtVnljbTl5S0NkRFlXeHNJSE4wWVdOcklHTnZjbkoxY0hSbFpDY3BDZ2tKZlFvSmZRb0tDWEpsZEhWeWJpQnlaWE4xYkhRS2ZRb0tDZ3BoYzNsdVl5Qm1kVzVqZEdsdmJpQnlkVzVHZFc1amRHbHZiaWhCVTFRc0lISjFia052Ym5SbGVIUXBJSHNLQ1d4bGRDQmlaV1p2Y21VS0NXeGxkQ0JoWm5SbGNnb0piR1YwSUc1aGJXVlFjbVZtYVhnZ1BTQW5Kd29KYVdZb1FWTlVMblI1Y0dVZ1BUMGdKMFoxYm1OMGFXOXVSWGh3Y21WemMybHZiaWNnQ2dsOGZDQkJVMVF1ZEhsd1pTQTlQU0FuUVhKeWIzZEdkVzVqZEdsdmJrVjRjSEpsYzNOcGIyNG5LU0I3Q2drSmJtRnRaVkJ5WldacGVDQTlJQ2RwYm14cGJtVWdKd29KZlNCbGJITmxJSHNLQ1Frdkx5QkJWRlJTU1VKVlZFVWdVMVZRVUU5U1ZBb0pDUzh2SUZSUFJFODZJRU1qSUVkSlZrVlRJRmxQVlNCQklGZEJXU0JVVHlCQlJFUWdRVlJVVWtsQ1ZWUkZVeUJVVHdvSkNTOHZJQ0FnVFVGT1dTQlVUMHRGVGlCVVdWQkZVeUFLQ1Frdkx5QWdJRXBCVmtFZ1NFRlRJRUZVVkZKSlFsVlVSVk1nVkU5UExDQkNWVlFnVkVoRldTQkJVa1VnVlVkTVNVVlNDZ2tKTHk4Z1ZFOUVUem9nUUVSbGJHRjVLQ2tzSUVCTWIyNW5URzl2Y0hNb0tTQmhibVFnYjNSb1pYSWdjMkZtWlhSNWN3b0pDUzh2SUZSUFJFODZJRk5VUVZSSlF5QkRUMDVUVkZKVlExUlBVbE1zSUZOVVJDQk1TVUpTUVZKWklFeFBRVVJGVWxNS0NRa3ZMeUJVVDBSUE9pQnZia0psWm05eVpTd2diMjVCWm5SbGNpd2dZMjl1ZEhKdmJDQm1iRzkzSUdsdGNISnBiblJwYm1jS0NRbHNaWFFnWVhSMGNtbGlkWFJsUTI5dGJXVnVkSE1nUFNCeWRXNURiMjUwWlhoMExuTmpjbWx3ZEFvSkNRa3VjM1ZpYzNSeWFXNW5LREFzSUVGVFZDNXpkR0Z5ZENrS0NRa0pMbTFoZEdOb0tFWlZUa05mUTA5TlRVVk9WRk1wQ2drSmFXWW9ZWFIwY21saWRYUmxRMjl0YldWdWRITXBJSHNLQ1FrSmJHVjBJR0YwZEhKcFluTWdQU0JoZEhSeWFXSjFkR1ZEYjIxdFpXNTBjMXN3WFM1emNHeHBkQ2hCVTFCRlExUlRYMUpGUjBWWUtRb0pDUWxtYjNJb2JHVjBJR3NnUFNBd095QnJJRHdnWVhSMGNtbGljeTVzWlc1bmRHZzdJR3NyS3lrZ2V3b0pDUWtKYVdZb1lYUjBjbWxpYzF0clhTNTBjbWx0S0NrdWJHVnVaM1JvSUQwOUlEQWdmSHdnSVdGMGRISnBZbk5iYTEwdWFXNWpiSFZrWlhNb0owQW5LU2tnZXdvSkNRa0pDV052Ym5ScGJuVmxDZ2tKQ1FsOUlHVnNjMlVLQ1FrSkNXbG1LR0YwZEhKcFluTmJhMTBnUFQwZ0owQkNaV1p2Y21VbktTQjdDZ2tKQ1FrSlltVm1iM0psSUQwZ1lYUjBjbWxpYzF0ckt6RmRDZ2tKQ1FrSkt5dHJDZ2tKQ1FsOUlHVnNjMlVLQ1FrSkNXbG1LR0YwZEhKcFluTmJhMTBnUFQwZ0owQkJablJsY2ljcElIc0tDUWtKQ1FsaFpuUmxjaUE5SUdGMGRISnBZbk5iYXlzeFhRb0pDUWtKQ1NzcmF3b0pDUWtKZlNCbGJITmxJSHNLQ1FrSkNRbGtiME52Ym5OdmJHVW9jblZ1UTI5dWRHVjRkQzV6Wlc1a1pYSkpaQ3dnQ2drSkNRa0pDU2RYUVZKT1NVNUhPaUJCZEhSeWFXSjFkR1VnYm05MElISmxZMjluYm1sNlpXUTZJQ2NnS3lCaGRIUnlhV0p6VzJ0ZEtRb0pDUWtKZlFvS0NRa0pmUW9KQ1gwS0NYMEtDV2xtS0VGVFZDNXBaQ2tnZXdvSkNTOHZJR1J2YmlkMElHRmtaQ0J1WVcxbFVISmxabWw0SVFvSkNXbG1LSEoxYmtOdmJuUmxlSFF1Ykc5allXeFdZWEpwWVdKc1pYTXVhR0Z6VDNkdVVISnZjR1Z5ZEhrb1FWTlVMbWxrTG01aGJXVXBLU0I3Q2drSkNYUm9jbTkzSUc1bGR5QkZjbkp2Y2lnblZtRnlhV0ZpYkdVZ1lXeHlaV0ZrZVNCa1pXTnNZWEpsWkNFZ0p5QXJJRUZUVkM1cFpDNXVZVzFsS1FvSkNYMEtDWDBnWld4elpTQjdDZ2tKYm1GdFpWQnlaV1pwZUNBclBTQkJVMVF1ZEhsd1pTQTlQU0FuUVhKeWIzZEdkVzVqZEdsdmJrVjRjSEpsYzNOcGIyNG5JRDhnSjJ4aGJXSmtZU0FuSURvZ0oyWjFibU1nSndvSmZRb0tDV3hsZENCbWRXNWpUbUZ0WlNBOUlHNWhiV1ZRY21WbWFYZ2dLeUFvUVZOVUxtbGtJRDhnUVZOVUxtbGtMbTVoYldVZ09pQm1kVzVqZEdsdmJrTnZkVzUwWlhJcENna3JLMloxYm1OMGFXOXVRMjkxYm5SbGNnb0pjblZ1UTI5dWRHVjRkQzVzYjJOaGJGWmhjbWxoWW14bGMxdG1kVzVqVG1GdFpWMGdQU0FuZFc1a1pXWnBibVZrSndvSmJHVjBJRzVsZDBaMWJtTWdQU0J5ZFc1RFlXeHNVM1JoZEdWdFpXNTBjeTVpYVc1a0tHNTFiR3dzSUhKMWJrTnZiblJsZUhRc0Nna0pDV1oxYm1OT1lXMWxMQ0J5ZFc1RGIyNTBaWGgwTG1KMVltSnNaVVpwYkdVc0lFRlRWQzV3WVhKaGJYTXNJR0psWm05eVpTd2dZV1owWlhJc0lFRlRWQzVpYjJSNUtRb0pibVYzUm5WdVl5NW1hV3hsYm1GdFpTQTlJSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxSbWxzWlFvSmJHVjBJSEpsYzNWc2RDQTlJR0YzWVdsMElISjFia0Z6YzJsbmJtMWxiblFvZXdvSkNYUjVjR1U2SUNkSlpHVnVkR2xtYVdWeUp5d0tDUWx1WVcxbE9pQm1kVzVqVG1GdFpTd0tDWDBzSUhzS0NRbDBlWEJsT2lBblRHbDBaWEpoYkNjc0Nna0pkbUZzZFdVNklHNWxkMFoxYm1Nc0NnbDlMQ0J5ZFc1RGIyNTBaWGgwS1FvS0NYSmxkSFZ5YmlCeVpYTjFiSFFLZlFvS0NncGhjM2x1WXlCbWRXNWpkR2x2YmlCeWRXNURZV3hzS0VGVFZDd2djblZ1UTI5dWRHVjRkQ2tnZXdvSkx5OGdZMjlzYkdWamRDQjJZWEpwWVdKc1pYTUtDUWtKQ2dsc1pYUWdjR0Z5WVcxeklEMGdZWGRoYVhRZ2NuVnVVR0Z5WVcxbGRHVnljeWhCVTFRdVlYSm5kVzFsYm5SekxDQnlkVzVEYjI1MFpYaDBLUW9KYVdZb1lYZGhhWFFnYzJodmRXeGtRblZpWW14bFQzVjBLSEoxYmtOdmJuUmxlSFFwS1NCN0Nna0pjbVYwZFhKdUlDOHZJR0oxWW1Kc1pTQjFjQW9KZlFvS0NYSjFia052Ym5SbGVIUXVZblZpWW14bFRXVnRZbVZ5SUQwZ2JuVnNiQW9KY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZRY205d1pYSjBlU0E5SUNjbkNnbHNaWFFnWTJGc2JHVmxSblZ1WXdvSmJHVjBJR1oxYm1OMGFXOXVUbUZ0WlFvSmFXWW9RVk5VTG1OaGJHeGxaUzUwZVhCbElEMDlJQ2RKWkdWdWRHbG1hV1Z5SnlrZ2V3b0pDUzh2SUdoaGJtUnNaU0JwWkdWdWRHbG1hV1Z5Y3lCb1pYSmxJR0psWTJGMWMyVWdiRzl2YTJsdVp5QnBkQ0IxY0NCM2FYUm9JR0oxWW1Kc1pTQjFjQ0JoYmlCbGNuSnZjZ29KQ1daMWJtTjBhVzl1VG1GdFpTQTlJRUZUVkM1allXeHNaV1V1Ym1GdFpRb0pDWFJ5ZVNCN0Nna0pDUzh2SUZSUFJFODZJSE5vYjNWc1pDQndjbTlpWVdKc2VTQm9ZWFpsSUdFZ1ltVjBkR1Z5SUhkaGVTQnZaaUJvWVc1a2JHbHVaeUJPVDFRdFJWSlNUMUlLQ1FrSlkyRnNiR1ZsUm5WdVl5QTlJR0YzWVdsMElISjFibEJ5YVcxcGRHbDJaU2hCVTFRdVkyRnNiR1ZsTENCeWRXNURiMjUwWlhoMEtRb0pDWDBnWTJGMFkyZ2dLSFZ3S1NCN0Nna0pDV2xtS0NGMWNDNXRaWE56WVdkbExtbHVZMngxWkdWektDZHViM1FnWkdWbWFXNWxaQ2NwQ2drSkNRa0pMeThnUTA5RVJTQlNSVlpKUlZjc0lHMWxZVzUwSUhSdklHUnZJSFJvYVhNZ1pXRnliR2xsY2dvSkNRa0pDU1ltSUNGMWNDNXRaWE56WVdkbExtbHVZMngxWkdWektDZGhZMk5sYzNNZ1pYSnliM0luS1NrZ2V3b0pDUWtKZEdoeWIzY2dkWEFLQ1FrSmZRb0pDWDBLQ1FscFppaGhkMkZwZENCemFHOTFiR1JDZFdKaWJHVlBkWFFvY25WdVEyOXVkR1Y0ZENrcElIc0tDUWtKY21WMGRYSnVJQzh2SUdKMVltSnNaU0IxY0FvSkNYMEtDZ2tKTHk4Z1EwOUVSU0JTUlZaSlJWYzZJRzl0WnlCcGRDZHpJSEpsWVdSNUNna0piR1YwSUd4cFlnb0pDUzh2SUZSUFJFODZJSE5vYjNKMFkzVjBJSFJvWlNCbWNtOXVkR1Z1WkNCR1V5NTJhWEowZFdGc0Nna0pMeThnSUNCbWIzSWdibTkzSUdGdVpDQnFkWE4wSUhCeWIzWnBaR1VnZDJoaGRHVjJaWElnYVhNZ2MyRjJaV1FnYVc0Z1NVUkNSbE1LQ1Frdkx5QjNhV3hzSUc1bFpXUWdVbEJESUhSdklITmhkbVVnWTI5a1pTQnpkRzl5WVdkbExDQjNhV3hzSUhCeWIzWnBaR1VnYVhRZ2FXNEtDUWt2THlBZ0lHTnNiM1ZrSUdKMWFXeGtJSE52SUc1bFpXUnpJSFJ2SUdKbElHZGxibVZ5YVdNZ2RHaHliM1ZuYUNCaFkyTmxjM052Y25NdUNna0phV1lnS0NGallXeHNaV1ZHZFc1akNna0pDU1ltSUhKMWJrTnZiblJsZUhRdVluVmlZbXhsUm1sc1pTQWhQU0FuYkdsaWNtRnllUzl5WlhCc0xtcHpKd29KQ1FrbUppQW9iR2xpSUQwZ1pHOU1hV0p5WVhKNVRHOXZhM1Z3S0daMWJtTjBhVzl1VG1GdFpTa3BDZ2tKS1NCN0Nna0pDV05oYkd4bFpVWjFibU1nUFNCaGQyRnBkQ0J2YmtGalkyVnpjMjl5S0d4cFlpa0tDUWw5Q2dsOUlHVnNjMlVLQ1dsbUtFRlRWQzVqWVd4c1pXVXVkSGx3WlNrZ2V3b0pDV05oYkd4bFpVWjFibU1nUFNCaGQyRnBkQ0J5ZFc1VGRHRjBaVzFsYm5Rb01Dd2dXMEZUVkM1allXeHNaV1ZkTENCeWRXNURiMjUwWlhoMEtRb0pDV2xtS0dGM1lXbDBJSE5vYjNWc1pFSjFZbUpzWlU5MWRDaHlkVzVEYjI1MFpYaDBLU2tnZXdvSkNRbHlaWFIxY200Z0x5OGdZblZpWW14bElIVndDZ2tKZlFvSkNXWjFibU4wYVc5dVRtRnRaU0E5SUhKMWJrTnZiblJsZUhRdVluVmlZbXhsVUhKdmNHVnlkSGtLQ2dsOUlHVnNjMlVnZXdvSkNYUm9jbTkzSUc1bGR5QkZjbkp2Y2lnblEyRnNiRVY0Y0hKbGMzTnBiMjQ2SUU1dmRDQnBiWEJzWlcxbGJuUmxaQ0VuS1FvSmZRb0tDV2xtS0NGallXeHNaV1ZHZFc1aktTQjdDZ2tKWkdWaWRXZG5aWElLQ1FsMGFISnZkeUJ1WlhjZ1JYSnliM0lvSjBaMWJtTjBhVzl1SUc1dmRDQmtaV1pwYm1Wa09pQW5JQ3NnUVZOVUxtTmhiR3hsWlM1dVlXMWxLUW9KZlFvS0NnbHNaWFFnWW1WbWIzSmxUR2x1WlNBOUlISjFia052Ym5SbGVIUXVZblZpWW14bFRHbHVaU0F0SURFS0NXbG1LR05oYkd4bFpVWjFibU11YVc1MFpYSndjbVYwWldRcElIc0tDUWt2THlCcGJuUmxjbkJ5WlhSbFpDQnlkVzVEWVd4c1UzUmhkR1Z0Wlc1MGN5QjNhV3hzSUdGa1pDQjBieUJ6ZEdGamF5QmhkQ0J1WlhoMElHeGhlV1Z5Q2dsOUlHVnNjMlVnZXdvSkNXbG1LSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxVM1JoWTJzdWJHVnVaM1JvSUQwOUlEQXBJSHNLQ1FrSlkyOXVjMjlzWlM1bGNuSnZjaWduUTJGc2JDQnpkR0ZqYXlCamIzSnlkWEIwWldRbktRb0pDWDBKQ2drSmNuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWVGRHRmpheTV3ZFhOb0tGc0tDUWtKWm5WdVkzUnBiMjVPWVcxbExDQUtDUWtKWTJGc2JHVmxSblZ1WXk1bWFXeGxibUZ0WlNCOGZDQW5XeUJ1WVhScGRtVWdZMjlrWlNCZEp5d2dDZ2tKQ1dKbFptOXlaVXhwYm1VS0NRbGRLUW9KZlFvSmFXWW9jblZ1UTI5dWRHVjRkQzVpZFdKaWJHVlRkR0ZqYXk1c1pXNW5kR2dnUGlCTlFWaGZRMEZNVENrZ2V3b0pDWFJvY205M0lHNWxkeUJGY25KdmNpZ25RMkZzYkNCemRHRmpheUJsZUdObFpXUmxaQ0VuS1FvSmZRb0tDWEoxYmtOdmJuUmxlSFF1Ykc5allXeFdZWEpwWVdKc1pYTmJKMkZ5WjNWdFpXNTBjeWRkSUQwZ0ozVnVaR1ZtYVc1bFpDY0tDV0YzWVdsMElISjFia0Z6YzJsbmJtMWxiblFvZXdvSkNYUjVjR1U2SUNkSlpHVnVkR2xtYVdWeUp5d0tDUWx1WVcxbE9pQW5ZWEpuZFcxbGJuUnpKd29KZlN3Z2V3b0pDWFI1Y0dVNklDZE1hWFJsY21Gc0p5d0tDUWwyWVd4MVpUb2djR0Z5WVcxekNnbDlMQ0J5ZFc1RGIyNTBaWGgwS1FvSkx5OGdWRTlFVHpvZ1gxOW1kVzVqWDE4c0lGOWZiR2x1WlY5ZkxDQmZYMlpwYkdWZlh5Qm1iM0lnWkdWaWRXZG5hVzVuSUdaMWJnb0tDZ2wwY25rZ2V3b0pDV3hsZENCeVpYTjFiSFE3Q2drSmFXWW9RVk5VTG5SNWNHVWdQVDBnSjA1bGQwVjRjSEpsYzNOcGIyNG5LU0I3Q2drSkNXbG1LR05oYkd4bFpVWjFibU1nUFQwZ1VISnZiV2x6WlNrZ2V3b0pDUWtKY21WemRXeDBJRDBnVUhKdmJXbHpaUzV5WlhOdmJIWmxLQ2t1ZEdobGJpaGtJRDArSUhzS0NRa0pDUWx5ZFc1RGIyNTBaWGgwTG1GemVXNWpVblZ1Ym1WeWN5c3JDZ2tKQ1FrSmNtVjBkWEp1SUdRS0NRa0pDWDBwTG5Sb1pXNG9hVzUwWlhKdVlXeFNaWE52YkhabEtTNWpZWFJqYUNobElEMCtJSHNLQ1FrSkNRbHlkVzVEYjI1MFpYaDBMbUZ6ZVc1alVuVnVibVZ5Y3kwdENna0pDUWtKZEdoeWIzY2daUW9KQ1FrSmZTa3VkR2hsYmloa0lEMCtJSHNLQ1FrSkNRbHlkVzVEYjI1MFpYaDBMbUZ6ZVc1alVuVnVibVZ5Y3kwdENna0pDUWtKY21WMGRYSnVJR1FLQ1FrSkNYMHBDZ2tKQ1gwZ1pXeHpaU0I3Q2drSkNRbHlaWE4xYkhRZ1BTQmhkMkZwZENBb2JtVjNJR05oYkd4bFpVWjFibU1vTGk0dWNHRnlZVzF6S1NrS0NRa0pmUW9KQ1gwZ1pXeHpaU0JwWmlBb2RIbHdaVzltSUdOaGJHeGxaVVoxYm1NZ1BUMGdKMloxYm1OMGFXOXVKd29KQ1FrbUppQnlkVzVEYjI1MFpYaDBMbUoxWW1Kc1pVMWxiV0psY2lrZ2V3b0pDUWx5WlhOMWJIUWdQU0JoZDJGcGRDQmpZV3hzWldWR2RXNWpMbUZ3Y0d4NUtISjFia052Ym5SbGVIUXVZblZpWW14bFRXVnRZbVZ5TENCd1lYSmhiWE1wQ2drSmZTQmxiSE5sSUdsbUlDaDBlWEJsYjJZZ1kyRnNiR1ZsUm5WdVl5QTlQU0FuWm5WdVkzUnBiMjRuS1NCN0Nna0pDWEpsYzNWc2RDQTlJR0YzWVdsMElHTmhiR3hsWlVaMWJtTW9MaTR1Y0dGeVlXMXpLUW9KQ1gwZ1pXeHpaU0I3Q2drSkNXUmxZblZuWjJWeUNna0pDWFJvY205M0lHNWxkeUJGY25KdmNpZ25UbTkwSUdFZ1puVnVZM1JwYjI0aElDY2dLeUJCVTFRdVkyRnNiR1ZsTG01aGJXVXBDZ2tKZlFvSkNYSjFia052Ym5SbGVIUXVZblZpWW14bFRXVnRZbVZ5SUQwZ2JuVnNiQW9KQ1hKMWJrTnZiblJsZUhRdVluVmlZbXhsVUhKdmNHVnlkSGtnUFNBbkp3b0pDV2xtS0hKMWJrTnZiblJsZUhRdWNtVjBkWEp1WldRcElIc0tDUWtKY25WdVEyOXVkR1Y0ZEM1eVpYUjFjbTVsWkNBOUlHWmhiSE5sQ2drSkNXbG1LSEpsYzNWc2RDQWhQVDBnY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZTWlhSMWNtNHBJSHNLQ1FrSkNXTnZibk52YkdVdWJHOW5LQ2RYUVZKT1NVNUhPaUJ1YjNRZ1luVmlZbXhwYm1jZ1kyOXljbVZqZEd4NU9pQW5JQ3NnWm5WdVkzUnBiMjVPWVcxbEtRb0pDUWw5Q2drSkNYSmxjM1ZzZENBOUlISjFia052Ym5SbGVIUXVZblZpWW14bFVtVjBkWEp1Q2drSkNXUmxiR1YwWlNCeWRXNURiMjUwWlhoMExtSjFZbUpzWlZKbGRIVnliZ29KQ1gwS0Nna0pMeThnYlhWemRDQmpiMjFsSUdGbWRHVnlJSEoxYmtOdmJuUmxlSFF1Y21WMGRYSnVaV1FnYVhNZ1lXUnFkWE4wWldRZ0Nna0pMeThnSUNCaVpXTmhkWE5sSUhSb2FYTWdZblZpWW14bGN5QnZkWFFnYjJZZ2QyaGhkR1YyWlhJZ1lteHZZMnNnYjNJZ0Nna0pMeThnSUNCbWIzSXRiRzl2Y0NCcGN5QnBiaUJ6WTI5d1pTNEtDUWxwWmloaGQyRnBkQ0J6YUc5MWJHUkNkV0ppYkdWUGRYUW9jblZ1UTI5dWRHVjRkQ2twSUhzS0NRa0pjbVYwZFhKdUlDOHZJR0oxWW1Kc1pTQjFjQW9KQ1gwS0Nna0pMeThnWVhWMGIyMWhkR2xqWVd4c2VTQndZWFZ6WlNCbWIzSWdZU0J6WldOdmJtUWdiMjRnZFhObGNpQm1kVzVqZEdsdmJuTUtDUWt2THlBZ0lIUnZJR0ZzYkc5M0lIVnpaWEp6SUhSdklHOWljMlZ5ZG1VZ2RHaGxJSEpsYzNWc2RDQnZaaUIwYUdVZ1FWQkpDZ2tKYVdZb1FWTlVMbU5oYkd4bFpTNXVZVzFsSUNFOUlDZHpiR1ZsY0NjS0NRa0pKaVlnY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZUZEdGamExc0tDUWtKQ1hKMWJrTnZiblJsZUhRdVluVmlZbXhsVTNSaFkyc3ViR1Z1WjNSb1hTQTlQU0FuUEdWMllXdytKeWtnZXdvSkNRbGpiMjV6YjJ4bExteHZaeWduVEU5T1J5QkVSVXhCV1NFaElTQW5JQ3NnWm5WdVkzUnBiMjVPWVcxbElDc2dKeUF1SUNjZ0t5QmlaV1p2Y21WTWFXNWxLUW9KQ1Fsa1pXSjFaMmRsY2dvSkNRbGhkMkZwZENCdVpYY2dVSEp2YldselpTaHlaWE52YkhabElEMCtJSE5sZEZScGJXVnZkWFFvY21WemIyeDJaU3dnUkVWR1FWVk1WRjlFUlV4QldTa3BDZ2tKZlFvSkNYSmxkSFZ5YmlCeVpYTjFiSFFLQ2dsOUlHTmhkR05vSUNobEtTQjdDZ2tKWTI5dWMyOXNaUzVzYjJjb1pTa0tDUWxoZDJGcGRDQmtiMFZ5Y205eUtHVXNJSEoxYmtOdmJuUmxlSFFwQ2drSmNuVnVRMjl1ZEdWNGRDNWxibVJsWkNBOUlIUnlkV1VLQ1FseVpYUjFjbTRLQ1gwZ1ptbHVZV3hzZVNCN0Nna0phV1lvSVdOaGJHeGxaVVoxYm1NdWFXNTBaWEp3Y21WMFpXUXBJSHNLQ1FrSmNuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWVGRHRmpheTV3YjNBb0tRb0pDUWxwWmloeWRXNURiMjUwWlhoMExtSjFZbUpzWlZOMFlXTnJMbXhsYm1kMGFDQTlQU0F3S1NCN0Nna0pDUWxqYjI1emIyeGxMbVZ5Y205eUtDZERZV3hzSUhOMFlXTnJJR052Y25KMWNIUmxaQ2NwQ2drSkNYMEtDUWw5Q2dsOUNncDlDZz09JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9ldmFsL2V2YWwuanNfdGltZXN0YW1wJ109MTY1MTg1ODk1NjQ0MjsKd2luZG93LnByZUZTWydsaWJyYXJ5L2V2YWwvZXZhbC5qcyddPSdMeThnYzI5dFpYUm9hVzVuSUdseklIZHliMjVuSUhkcGRHZ2djbVZ3YkFvdkx5QWdJR2wwSjNNZ2QyRjVJSFJ2YnlCemJHOTNDaTh2SUNBZ2JHVjBKM01nZEhKNUlITnZiV1YwYUdsdVp5QnVaWGNLQ214bGRDQndjbTluY21GdFZHaHlaV0ZrY3lBOUlGdGRDbXhsZENCd2NtOW5jbUZ0VW1WemNHOXVjMlZ6SUQwZ1cxMEtiR1YwSUhCeWIyZHlZVzFJWldGd0lEMGdXMTBLQ21aMWJtTjBhVzl1SUdSdlFtOXZkSE4wY21Gd0tITmpjbWx3ZENrZ2V3b0piR1YwSUhCaGNuTmxjaUE5SUNCaFkyOXliaTV3WVhKelpTZ25LR0ZqYjNKdUxuQmhjbk5sS1NoelkzSnBjSFFwSnlrS0NYQmhjbk5sY2k1aWIyUjVXekJkTG1WNGNISmxjM05wYjI0dVlYSm5kVzFsYm5Seld6QmRMblI1Y0dVZ1BTQW5UR2wwWlhKaGJDY0tDWEJoY25ObGNpNWliMlI1V3pCZExtVjRjSEpsYzNOcGIyNHVZWEpuZFcxbGJuUnpXekJkTG5aaGJIVmxJRDBnYzJOeWFYQjBDZ2x5WlhSMWNtNGdaRzlGZG1Gc0tIc2dZbTlrZVRvZ2NHRnljMlZ5TG1KdlpIbGJNRjBzSUhOamNtbHdkRG9nYzJOeWFYQjBJSDBwQ24wS0NtWjFibU4wYVc5dUlHUnZSWFpoYkNoeWRXNURiMjUwWlhoMEtTQjdDZ2xqYjI1emIyeGxMbXh2WnlnblpYWmhiRG9nSnlBcklISjFia052Ym5SbGVIUXVjMk55YVhCMEtRb0pMeThnWTI5dWRtVnlkQ0JsYm5ScGNtVWdaWFpoYkNCeVpYQnNJSFJ2SUdFZ2MybHVaMnhsSUhCeWIyZHlZVzBnYzNSaFkyc0tDUzh2SUNBZ2RHaHBjeUJ0YVdkb2RDQm9aV3h3SUhkcGRHZ2daR1ZpZFdkbmFXNW5JR0psWTJGMWMyVWdkR2hsYmlCcGRDQnBjeUJtYkdGMENna3ZMeUFnSUc1dklHSnlZVzVqYUdsdVp5QjBieUJoZDJGcGRDQmpZV3hzY3dvSmFXWW9JWEoxYmtOdmJuUmxlSFF1WW05a2VTa2dld29KQ1M4dklGUlBSRTg2SUcxdmRtVWdaRzlDYjI5MGMzUnlZWEFnYUdWeVpTQnpieUJKSUdSdmJpZDBJR2hoZG1VZ2RHOGdjSFYwSUdGdWVYUm9hVzVuSUcxdmNtVWdhVzRnVFdGclpXWnBiR1VLQ1Fsc1pYUWdjSEp2WjNKaGJTQTlJR0ZqYjNKdUxuQmhjbk5sS0Njb0p5QXJJR1J2UW05dmRITjBjbUZ3SUNzZ0p5a29jMk55YVhCMEtTY3NJQW9KQ1FrSmUyVmpiV0ZXWlhKemFXOXVPaUF5TURJd0xDQnNiMk5oZEdsdmJuTTZJSFJ5ZFdVc0lHOXVRMjl0YldWdWREb2dXMTE5S1FvSkNTOHZJR052Ym5abGNuUWdhVzVtYVhnZ2RHOGdjRzl6ZEdacGVDd2dhVzRnYjNKa1pYSWdkRzhnYzJsdGNHeHBabmtnY0hKdlkyVnpjMmx1WndvSkNTOHZJRlJQUkU4NklFa2dVa1ZCVEV4WklGZEpVMGdnU1NCRFQxVk1SQ0JXU1ZOVlFVeEpXa1VnVkVoRklFUkpSa1pGVWtWT1EwVWdTVTRnUVZOVUxVUkpVa1ZEVkVsUFRrRk1JRWRTUVZCSUNna0pMeThnSUNCTlFWbENSU0JQVGtORklFbFVKMU1nVlZBZ1FVNGdVbFZPVGtsT1J5QkpJRU5CVGlCVlUwVWdSRE11U2xNZ1JsSlBUU0JNU1VKU1FWSlpMZ29KQ1M4dklGUklSU0JFU1VaR1JWSkZUa05GSUVKRlZGZEZSVTRnVEU5UFMwbE9SeUJCVkNCSlZDQlVUMUFnUkU5WFRpQlZVMGxPUnlCUVQxTlVSa2xZSUZOSVQxVk1SQW9KQ1M4dklDQWdVRkpQVmtsRVJTQlRUMDFGSUVOTVZVVlRJRlJQSUZOSlRrdFRJRUpGUTBGVlUwVWdTVlFnVUZWVVV5QkJURXdnVDBZZ1ZFaEZJRVZPUkZCUFNVNVVVd29KQ1M4dklDQWdTVTRnVEVWQlZrVlRJRWxPVTFSRlFVUWdUMFlnUVZRZ1ZFaEZJRUpQVkZSUFRTQlBSaUJCSUZSUFVDQkVUMWRPSUVkU1FWQklMQ0JVU0VVZ1RFVkJWa1ZUQ2drSkx5OGdJQ0JVVlZKT0lFbE9JRlJQSUVGRFZGVkJUQ0JTUlVaRlVrVk9RMFZUSUVsT0lFTlBSRVVzSUVGVElFOVFVRTlUUlVRZ1ZFOGdWVk5GSUVsT1UxUkJUa05GVXdvSkNTOHZJRWxVVXlCTVNVdEZJRXhQVDB0SlRrY2dRVlFnUTA5RVJTQk1TVXRGSUVFZ1IwRlNRa0ZIUlNCRFQweE1SVU5VVDFJZ1NVNVRWRVZCUkNCUFJpQkJJRk5KVGtzdUNna0pMeThnSUNCVFNFOVZURVFnUlZaRlRpQkNSU0JCUWt4RklGUlBJRWRTUVZCSUlFOVZWQ0JQVmtWU1VrbEVTVTVISUZaQlVrbEJRa3hGSUU1QlRVVlRMQ0JEVDB4TVNWTkpUMDVUQ2drSkx5OGdJQ0JUUTA5UVJTQkNVa1ZCUzBsT1J5QlhTRVZTUlNCWFJTQkJRME5KUkVWT1ZFRk1URmtnVEVWQlZrVWdRU0JXUVZKSlFVSk1SU0JQVlZSVFNVUkZJRUVnVTBOUFVFVUtDUWt2THlBZ0lFSlZWQ0JFVDA0blZDQkhSVlFnUVU0Z1lFVlNVbUFzSUZKQlRpQkpUaUJVVHlCVVNFRlVJRmRKVkVnZ1JVMVRRMUpKVUZSRlRpd2dVMDlOUlNCSFRFOUNRVXhNV1NBS0NRa3ZMeUFnSUVSRlJrbE9SVVFnUlZKU0xDQlRUeUJCVGxrZ1ZFbE5SU0JKSUZWVFJTQkZVbElnU1U0Z1RWa2dRMDlFUlNCQ1dTQkJRME5KUkVWT1ZDd2dTVlFnVWtWR1JWSlRJQW9KQ1M4dklDQWdWRThnVkVoRklGZFNUMDVISUU5T1JTRUtDUWt2THlCVVQwUlBPaUJJUlZrZ1EwaFNUMDFGSUVSRlFsVkhSMFZTSVNCSklGQkpRMHNnVDA0Z1ZFaEZUU0JCSUV4UFZDNGdRMDlWVEVRZ1ZWTkZJRlJJU1ZNZ0lsQlNUMGRTUVUwZ1ZGSkZSU0lLQ1Frdkx5QWdJRUZUSUVFZ1VFVlNUVUZPUlU1VUlFTkJURXdnVTFSQlEwc2dTVTVUVkVWQlJDQlBSaUJVVWxsSlRrY2dWRThnVEU5QlJDQkRVa0ZRSUVGT1JDQlRWMGxVUTBnZ1ZFaEpUa2RUSUVGU1QxVk9SQW9KQ1M4dklDQWdWVk5GSUZSSVJTQlFVazlIVWtGTklGUlNSVVVnUVZNZ1FTQlVRVUpNUlNCUFJpQkRUMDVVUlU1VVV5QkJUa1FnU0VsSFNFeEpSMGhVSUZSSVJTQlNUMWRUSUZSSVFWUWdRVkpGSUVsT0Nna0pMeThnSUNCSlRpQlVTRVVnUTBGTVRDQlhTRVZPSUVrZ1EweEpRMHNnVDA0Z1NWUXNJRlJJUlU0Z1ZWTkZJRk5QVFVVZ1QxUklSVklnU1U1RVNVTkJWRWxQVGlCVVR5Qk9RVlpKUjBGVVJTQk1TVTVGVXk0S0NRbHlkVzVEYjI1MFpYaDBMbUp2WkhrZ1BTQndjbTluY21GdExtSnZaSGxiTUYwS0NYMEtDWEpsZEhWeWJpQmhkMkZwZEZCeWIyZHlZVzBvY25WdVEyOXVkR1Y0ZEM1aWIyUjVMQ0J5ZFc1RGIyNTBaWGgwS1FwOUNncHNaWFFnWTNWeWNtVnVkRU52Ym5SbGVIUUtDbVoxYm1OMGFXOXVJR0YzWVdsMFVISnZaM0poYlNod2NtOW5jbUZ0TENCeWRXNURiMjUwWlhoMEtTQjdDZ2xwWmloMGVYQmxiMllnY25WdVEyOXVkR1Y0ZENBOVBTQW5kVzVrWldacGJtVmtKeWtnZXdvSkNYSjFia052Ym5SbGVIUWdQU0JqZFhKeVpXNTBRMjl1ZEdWNGRBb0pmUW9KTHk4Z2RHOGdkR1Z6ZENCMGFHbHpJR052Ym1ObGNIUXNJR3hsZEhNZ2RYTmxJR2wwSUdaeWIyMGdkR2hsSUhabGNua2dZbVZuYVc1dWFXNW5DZ2xwWmloMGVYQmxiMllnY25WdVEyOXVkR1Y0ZEM1d2NtOW5jbUZ0UTJGc2JITjBZV05ySUQwOUlDZDFibVJsWm1sdVpXUW5LU0I3Q2drSmNuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWU1pYUjFjbTRnUFNCYmRtOXBaQ0F3WFFvSkNYSjFia052Ym5SbGVIUXVZMjl1ZEdsdWRXVlBia1Z5Y205eUlEMGdkSEoxWlFvSkNYSjFia052Ym5SbGVIUXVjSEp2WjNKaGJVTmhiR3h6ZEdGamF5QTlJRnRkQ2drSmNuVnVRMjl1ZEdWNGRDNXdjbTluY21GdFEyOTFiblFnUFNBd0Nna0pjblZ1UTI5dWRHVjRkQzVzYjJOaGJFUmxZMnhoY21GMGFXOXVjeUE5SUZzS0NRa0paMnh2WW1Gc1ZHaHBjeXdLQ1FrSmNuVnVRMjl1ZEdWNGRDd0tDUWtKZTMwS0NRbGRDZ2w5SUdWc2MyVWdld29KQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduUkc5dVhDZDBJR3R1YjNjZ2QyaGhkQ0IwYnlCa2J5RW5LUW9KZlFvSkx5OGdjSEp2WjNKaGJTQmpiMjUwYVc1MVpYTWdkVzUwYVd3Z2FYUWdhWE1nYzNSdmNIQmxaQ0J2Y2lBS0NTOHZJQ0FnWlhKeWIzSnpJRzl5SUhCeWIyZHlZVzBnYzNSaFkyc2dhWE1nWlcxd2RHbGxaQW9KWTI5dWMyOXNaUzVzYjJjb0ozUnBiV1Z5SUhOMFlYSjBaV1FuS1FvSmNuVnVRMjl1ZEdWNGRDNXdjbTluY21GdFZHbHRaWElnUFNCelpYUkpiblJsY25aaGJDZ0tDUWx3Y205bmNtRnRRMjkxYm5SbGNpNWlhVzVrS0c1MWJHd3NJSEoxYmtOdmJuUmxlSFF1Y0hKdlozSmhiVU5oYkd4emRHRmpheTVzWlc1bmRHZ3NJSEoxYmtOdmJuUmxlSFFwTENBeE1EQXdMell3S1FvSmNtVjBkWEp1SUc1bGR5QlFjbTl0YVhObEtHWjFibU4wYVc5dUlDaHlaWE52YkhabExDQnlaV3BsWTNRcElIc0tDUWx5ZFc1RGIyNTBaWGgwTG5CeWIyZHlZVzFKWkNBOUlIQnliMmR5WVcxVWFISmxZV1J6TG14bGJtZDBhQW9KQ1hCeWIyZHlZVzFVYUhKbFlXUnpMbkIxYzJnb2NuVnVRMjl1ZEdWNGRDa0tDUWx3Y205bmNtRnRVbVZ6Y0c5dWMyVnpMbkIxYzJnb2UzSmxjMjlzZG1Vc0lISmxhbVZqZEgwcENna0pjblZ1UTI5dWRHVjRkQzV3Y205bmNtRnRRMkZzYkhOMFlXTnJMbkIxYzJnb2NISnZaM0poYlNrS0NYMHBDbjBLQ2dwbWRXNWpkR2x2YmlCamJHVmhiblZ3VUhKdlozSmhiU2h5ZFc1RGIyNTBaWGgwS1NCN0NnbHlkVzVEYjI1MFpYaDBMbVZ1WkdWa0lEMGdkSEoxWlFvSmNuVnVRMjl1ZEdWNGRDNXlaWFIxY201bFpDQTlJR1poYkhObENnbGpiR1ZoY2tsdWRHVnlkbUZzS0hKMWJrTnZiblJsZUhRdWNISnZaM0poYlZScGJXVnlLUW9KYkdWMElIQnliMmR5WVcxSklEMGdjSEp2WjNKaGJWUm9jbVZoWkhNdWFXNWtaWGhQWmloeWRXNURiMjUwWlhoMEtRb0pjSEp2WjNKaGJWUm9jbVZoWkhNdWMzQnNhV05sS0hCeWIyZHlZVzFKTENBeEtRb0piR1YwSUh0eVpYTnZiSFpsTENCeVpXcGxZM1I5SUQwZ2NISnZaM0poYlZKbGMzQnZibk5sY3k1emNHeHBZMlVvY0hKdlozSmhiVWtzSURFcFd6QmRDZ2xrWldKMVoyZGxjZ29KYVdZb2RIbHdaVzltSUhKMWJrTnZiblJsZUhRdVpYSnliM0lnSVQwZ0ozVnVaR1ZtYVc1bFpDY3BJSHNLQ1FseVpYUjFjbTRnY21WcVpXTjBLSEoxYmtOdmJuUmxlSFF1WlhKeWIzSXBDZ2w5SUdWc2MyVWdld29KQ1hKbGRIVnliaUJ5WlhOdmJIWmxLSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxVbVYwZFhKdVd6QmRLUW9KZlFwOUNnb0tablZ1WTNScGIyNGdjMmh2ZFd4a1FuVmlZbXhsVDNWMEtFRlRWQ3dnWTJGc2JFWnlZVzFsTENCeWRXNURiMjUwWlhoMEtTQjdDZ2xwWmloeWRXNURiMjUwWlhoMExtTnZiblJwYm5WbFQyNUZjbkp2Y2lBbUppQnlkVzVEYjI1MFpYaDBMbVZ5Y205eUtTQjdDZ2tKTHk4Z1kyeGxZWElnWlhKeWIzSWdabTl5SUc1dmJpQnRaVzFpWlhJZ2MzUmhkR1Z0Wlc1MGN3b0pDUzh2SUNBZ2IzUm9aWEozYVhObElHMWxiV0psY2lCaFkyTmxjM01nZDJsc2JDQjBZV3RsSUdOaGNtVWdiMllnYVhRS0NRbHBaaWhCVTFRZ0Nna0pDUWttSmlCQlUxUXVkSGx3WlNBOVBTQW5TV1JsYm5ScFptbGxjaWNnQ2drSkNRa21KaUJCVTFRdWRIbHdaU0FoUFNBblRHbDBaWEpoYkNjS0NRa0pDU1ltSUVGVFZDNTBlWEJsSUNFOUlDZE5aVzFpWlhKRmVIQnlaWE56YVc5dUp3b0pDUWtKSmlZZ1FWTlVMblI1Y0dVZ0lUMGdKMEZ6YzJsbmJtMWxiblJGZUhCeVpYTnphVzl1SndvSkNRa0pMeThnVkU5RVR6b2dZV1JrSUdWeWNtOXlJSEpsYlc5MlpYSWdkRzhnUTJGc2JFVjRjSEpsYzNOcGIyNEtDUWtKQ1M4dkppWWdRVk5VTG5SNWNHVWdJVDBnSjBOaGJHeEZlSEJ5WlhOemFXOXVKd29KQ1NrZ2V3b0pDUzh2YVdZb2NuVnVRMjl1ZEdWNGRDNXdjbTluY21GdFEyOTFiblFwSUhzS0NRa0pMeThnVkU5RVR6b2dZMkZzYkdKaFkyc2djMjl0Wlhkb1pYSmxQd29KQ1FrdkwyTnZibk52YkdVdVpYSnliM0lvY25WdVEyOXVkR1Y0ZEM1bGNuSnZjaWtLQ1FrSkx5OWtaV3hsZEdVZ2NuVnVRMjl1ZEdWNGRDNWxjbkp2Y2dvSkNRa3ZMM0oxYmtOdmJuUmxlSFF1Y0hKdlozSmhiVU5oYkd4emRHRmpheTV3YjNBb0tRb0pDUWt2TDNKMWJrTnZiblJsZUhRdWNISnZaM0poYlVOdmRXNTBMUzBLQ1FsOUNnbDlDZ2x5WlhSMWNtNGdjblZ1UTI5dWRHVjRkQzV3Y205bmNtRnRRMjkxYm5RZ0xTQmpZV3hzUm5KaGJXVWdQVDBnTFRFS0NRa0pmSHdnS0hSNWNHVnZaaUJ5ZFc1RGIyNTBaWGgwTG1WeWNtOXlJQ0U5SUNkMWJtUmxabWx1WldRbkNna0pDUWtKSmlZZ0lYSjFia052Ym5SbGVIUXVZMjl1ZEdsdWRXVlBia1Z5Y205eUtRcDlDZ292THlCRFQwUkZJRkpGVmtsRlZ5d2dSa2xPUVV4TVdTQkdUMVZPUkNCQklGZEJXU0JVVHlCVVJWTlVJRUVnVUZKUFIxSkJUVTFKVGtjZ1RFRk9SMVZCUjBVZ1JrOVNJRVpGUVZSVlVrVWdRMDlOVUV4RlZFVk9SVk5UQ2k4dklDQWdRVVJFU1U1SElGUlBJRlJJU1ZNZ1UxZEpWRU5JSUV4SlUxUXNJRUZPUkNCVlUwbE9SeUJVU0VVZ1VGSlBSMUpCVFNCRFQxVk9WRVZTTENCSlZDQkNVa1ZCUzFNZ1JWWkZVbGtnVkVsTlJTQkJDaTh2SUNBZ1VFOU1XVVpKVEV3Z1NWTWdUazlVSUUxQlRrbFFWVXhCVkVsT1J5QlVTRVVnVUZKUFIxSkJUU0JUVkVGRFN5QkRUMUpTUlVOVVRGa3VDaTh2SUNBZ1ZFaEpVeUJYUVZrZ1NTQkRRVTRnUVVSRUlFRlRVRVZEVkZNZ0tFSkZSazlTUlM5QlJsUkZVaWtnUTBGTVRGTWdURWxMUlNCVVVrRkRTMGxPUnlCVVNVMUZVbE1LTHk4Z0lDQkJUa1FnUjBGVlVrRk9WRVZGSUZSSVJTQlRWRUZEU3lCRVQwVlRUaWRVSUVkRlZDQkRUMUpTVlZCVVJVUXVDaTh2SUZSUFJFODZJRTVGUlVRZ1ZFOGdSRThnVkVoRklGTkJUVVVnVkVoSlRrY2dSazlTSUZKRlZGVlNUaUJUVkVGVVJVMUZUbFJUTENCRlZrVlNXU0JGV0ZCU1JWTlRTVTlPQ2k4dklDQWdVRlZUU0VWVElFRWdVa1ZVVlZKT0lGWkJURlZGTENCQlRrUWdWRWhGVGlCUVQxQWdTVlFnVDBaR0lFbEdJRWxVSUVsVFRpZFVJRlZUUlVRZ1NVNGdWRWhGSUU1RldGUWdVMVJCVkVWTlJVNVVDaTh2SUNBZ1EwRk9JRTlPVEZrZ1NFRldSU0F4SUZSSVNVNUhJRWxPSUZKRlZGVlNUaUJUVkVGRFN5QlhTRVZPSUZKRlZGVlNUaUJUVkVGVVJVMUZUbFFnU1ZNZ1JWWkJURlZCVkVWRUNpOHZJQ0FnVkVoQlZDQk5SVUZPVXlCQlRFd2dWRWhGSUU5VVNFVlNJRlJQUzBWT0lGUlpVRVZUSUVOTVJVRlNSVVFnVkVoRklFVllWRkpCSUVOQlRFd2dSbEpCVFVVZ1ZrRk1WVVZUQ2k4dklDQWdWRWhGV1NCVFZFOVNSVVFnS0VrdVJTNGdURVZHVkM5U1NVZElWQ2tLTHk4Z1EwOUVSU0JTUlZaSlJWY3NJRTlJSUVkUFJDd2dVMDhnVFZWRFNDQk1SVk5USUVOUFJFVXVJRWxOUVVkSlRrVWdVa1ZRVEVGRFNVNUhJRUZNVENCUFJpQkNRVUpGVEFvdkx5QWdJRWRWVEZBc0lGUklSU0JYU0U5TVJTQk9UMFJGSUVWRFQxTlpVMVJGVFNCRFFVNGdRa1VnUlZaUFRGWkZSQ0JYU1ZSSUlGTlBJRTFWUTBnZ1UwMUJURXhGVWdvdkx5QWdJRlpKVTBsVVQxSWdRMDlFUlM0Z1RrOVhJRUZFUkVsT1J5QkpUaUJOV1NCVFdVNVVRVmdnVTBWU1ZrbERSU3dnU1NCRFFVNGdRVkJRUlU1RUlFRk9XU0JHVlU1RFZFbFBUZ292THlBZ0lFbE9JRlJJUlNCT1QwUkZJRUZRU1NCWFNWUklJRTFaSUU5WFRpQlFVa1ZEVlZKVFQxSlRMQ0JKVFVGSFNVNUZJRU5QVGxSRldGUlZRVXhKV2tWRUlFWkpURVV0VTFsVFZFVk5Vd292THlCWFNFVlNSU0JVU0VVZ1UwRk5SU0JEVDBSRklGSlZUbE1nUWxWVUlFbE9JRTlPUlNCRlRsWkpVazlPVFVWT1ZDQkpWQ2RUSUZKRlFVUkpUa2NnUmxKUFRTQk5SVTFHVXl3Z1FVNUVDaTh2SUNBZ1QwNUZJRVZPVmtsU1QwNU5SVTVVSUVsVUoxTWdVa1ZCUkVsT1J5QkdVazlOSUZwR1V5NGdURWxMUlNCRVJWQkZUa1JGVGtOWklFbE9Ta1ZEVkVsUFRpQlBUaUJUVkVWU1QwbEVVeTRLTHk4Z0lDQkpWQ2RUSUV4SlMwVWdWRWhGSUVGVFVFVkRWRk1nUTBoQlRrZEZJRVJGVUVWT1JFVk9RMGxGVXlCUFRpQlVTRVVnUmt4WkxncG1kVzVqZEdsdmJpQndjbTluY21GdFEyOTFiblJsY2loallXeHNSbkpoYldVc0lISjFia052Ym5SbGVIUXBJSHNLQ1dOMWNuSmxiblJEYjI1MFpYaDBJRDBnY25WdVEyOXVkR1Y0ZEFvSkx5OXBaaWh5ZFc1RGIyNTBaWGgwTG5CeWIyZHlZVzFEYjNWdWRDQStJR05oYkd4R2NtRnRaU2tnZXlBdkx5QjNZV2wwYVc1bklHWnZjaUJ6YjIxbGRHaHBibWNLQ1M4dklDQnlaWFIxY200S0NTOHZmUW9KTHk4Z1NVNVVSVkpGVTFSSlRrY2dTVlFnUVZCUVJVRlNVeUJVVHlCQ1JTQkRUMDVVU1U1VlNVNUhJRTlPSUVWU1VrOVNMQ0FLQ1M4dklDQWdTU0JUU0U5VlRFUWdVRkpGVTBWU1ZrVWdWRWhCVkNCR1ZVNURWRWxQVGtGTVNWUlpJRUZUSUVFZ1JrVkJWRlZTUlFvSmFXWW9jblZ1UTI5dWRHVjRkQzV3Y205bmNtRnRRMkZzYkhOMFlXTnJMbXhsYm1kMGFDQStJREFLQ1FrbUppQnlkVzVEYjI1MFpYaDBMbkJ5YjJkeVlXMURZV3hzYzNSaFkydGJDZ2tKQ1hKMWJrTnZiblJsZUhRdWNISnZaM0poYlVOaGJHeHpkR0ZqYXk1c1pXNW5kR2d0TVYwdWMzUnBiR3hTZFc1dWFXNW5LU0I3Q2drSmNtVjBkWEp1Q2dsOUNnbHNaWFFnUVZOVUlEMGdjblZ1UTI5dWRHVjRkQzV3Y205bmNtRnRRMkZzYkhOMFlXTnJMbkJ2Y0NncENnbHBaaWh6YUc5MWJHUkNkV0ppYkdWUGRYUW9RVk5VTENCallXeHNSbkpoYldVc0lISjFia052Ym5SbGVIUXBLU0I3Q2drSmNtVjBkWEp1SUdOc1pXRnVkWEJRY205bmNtRnRLSEoxYmtOdmJuUmxlSFFwQ2dsOUNnbHBaaWh5ZFc1RGIyNTBaWGgwTG5CeWIyZHlZVzFEYjNWdWRDQWhQU0J5ZFc1RGIyNTBaWGgwTG5CeWIyZHlZVzFEWVd4c2MzUmhZMnN1YkdWdVozUm9LU0I3Q2drSlpHVmlkV2RuWlhJS0NRbDBhSEp2ZHlCdVpYY2dSWEp5YjNJb0owTmhiR3dnYzNSaFkyc2daWGhqWldWa1pXUWhKeWtLQ1gwS0NTOHZJRlJQUkU4NklHTnZiblJ5YjJ3Z2FHOTNJRzFoYm5rZ1kyOXRiV0Z1WkhNZ2FYUWdZMkZzYkhNZ1pYWmxjbmtnWm5KaGJXVS9DZ2xqYjI1emIyeGxMbXh2WnlnblZHaHlaV0ZrSUNjZ0t5QnlkVzVEYjI1MFpYaDBMbkJ5YjJkeVlXMUpaQ3dnUVZOVUxuUjVjR1VwQ2dsemQybDBZMmdvUVZOVUxuUjVjR1VwSUhzS0NRbGpZWE5sSUNkRmRtRnNkV0YwWlNjNklBb0pDUWt2THlCd2NtVjJaVzUwSUhSb1pTQndjbTluY21GdElHWnliMjBnWkc5cGJtY2dZVzU1ZEdocGJtY2dkVzVzWlhOeklIUm9aU0J6ZEdGamF5QmphR0Z1WjJWekNna0pDV2xtS0VGVFZDNXpkR2xzYkZKMWJtNXBibWNwSUhzS0NRa0pDWEoxYmtOdmJuUmxlSFF1Y0hKdlozSmhiVU5oYkd4emRHRmpheTV3ZFhOb0tFRlRWQ2tLQ1FrSkNYSmxkSFZ5YmdvSkNRbDlDZ2tKQ1VGVFZDNXpkR2xzYkZKMWJtNXBibWNnUFNCMGNuVmxDZ2tKQ1hKMWJrTnZiblJsZUhRdWNISnZaM0poYlVOdmRXNTBJQzA5SURFS0NRa0pVSEp2YldselpTNXlaWE52YkhabEtFRlRWQzUyWVd4MVpTNWhjSEJzZVNoQlUxUXBLUW9KQ1FsaWNtVmhhd29KQ1dOaGMyVWdKMGxrWlc1MGFXWnBaWEluT2dvSkNRbGpiMjV6YjJ4bExteHZaeWhCVTFRdWJtRnRaU2tLQ1FrSmFXWW9RVk5VTG01aGJXVWdQVDBnSjJGamIzSnVKeWtnZXdvSkNRa0paR1ZpZFdkblpYSUtDUWtKZlFvSkNRa3ZMeUJVVDBSUE9pQmphR1ZqYXlCcFppQnNiMk5oYkNCaGJtUWdaRzl1SjNRZ2RHRnJaU0JoYm05MGFHVnlJR1p5WVcxbENna0pDWEoxYmtOdmJuUmxlSFF1Y0hKdlozSmhiVU5oYkd4emRHRmpheTV3ZFhOb0tIc0tDUWtKQ1hSNWNHVTZJQ2RGZG1Gc2RXRjBaU2NzQ2drSkNRbDJZV3gxWlRvZ0tHWjFibU4wYVc5dUlDaHBaRTVoYldVcElIc0tDUWtKQ1FsbWIzSW9iR1YwSUdrZ1BTQnlkVzVEYjI1MFpYaDBMbXh2WTJGc1JHVmpiR0Z5WVhScGIyNXpMbXhsYm1kMGFDMHhPeUJwSUQ0OUlEQTdJQzB0YVNrZ2V3b0pDUWtKQ1Fsc1pYUWdiRzlqWVd4eklEMGdjblZ1UTI5dWRHVjRkQzVzYjJOaGJFUmxZMnhoY21GMGFXOXVjMXRwWFFvSkNRa0pDUWxwWmloc2IyTmhiSE11YUdGelQzZHVVSEp2Y0dWeWRIa29hV1JPWVcxbEtTa2dld29KQ1FrSkNRa0pjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVlNaWFIxY200dWNIVnphQ2hzYjJOaGJITmJhV1JPWVcxbFhTa0tDUWtKQ1FrSkNYSmxkSFZ5YmdvSkNRa0pDUWw5Q2drSkNRa0pmUW9KQ1FrSkNTOHZJRlJQUkU4NklHbHVjMlZ5ZENCeVpXMXZkR1VnYldsa1pHeGxkMkZ5WlN3Z2IyNGdabUZwYkhWeVpRb0pDUWtKQ1hKMWJrTnZiblJsZUhRdVluVmlZbXhsVW1WMGRYSnVMbkIxYzJnb2RtOXBaQ0F3S1FvSkNRa0pDWEoxYmtOdmJuUmxlSFF1WlhKeWIzSWdQU0J1WlhjZ1JYSnliM0lvSjBsa1pXNTBhV1pwWlhJZ2JtOTBJR1JsWm1sdVpXUTZJQ2NnS3lCcFpFNWhiV1VwQ2drSkNRbDlLUzVpYVc1a0tHNTFiR3dzSUVGVFZDNXVZVzFsS1FvSkNRbDlLUW9KQ1FsaWNtVmhhd29KQ1dOaGMyVWdKMDFsYldKbGNrVjRjSEpsYzNOcGIyNG5PZ29KQ1FseWRXNURiMjUwWlhoMExuQnliMmR5WVcxRFlXeHNjM1JoWTJzdWNIVnphQ2g3Q2drSkNRbDBlWEJsT2lBblJYWmhiSFZoZEdVbkxBb0pDUWtKZG1Gc2RXVTZJQ2htZFc1amRHbHZiaUFvYldWdFltVnlLU0I3Q2drSkNRa0piR1YwSUhCeWIzQmxjblI1Q2drSkNRa0phV1lvYldWdFltVnlMbU52YlhCMWRHVmtLU0I3Q2drSkNRa0pDWEJ5YjNCbGNuUjVJRDBnY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZTWlhSMWNtNHVjRzl3S0NrS0NRa0pDUWw5SUdWc2MyVWdld29KQ1FrSkNRbHdjbTl3WlhKMGVTQTlJRzFsYldKbGNpNXdjbTl3WlhKMGVTNXVZVzFsQ2drSkNRa0pmUW9KQ1FrSkNXeGxkQ0J2WW1wbFkzUWdQU0J5ZFc1RGIyNTBaWGgwTG1KMVltSnNaVkpsZEhWeWJpNXdiM0FvS1FvSkNRa0pDV2xtS0NGdlltcGxZM1FnSmlZZ2NuVnVRMjl1ZEdWNGRDNWxjbkp2Y2lrZ2V3b0pDUWtKQ1FsamIyNXpiMnhsTG1WeWNtOXlLSEoxYmtOdmJuUmxlSFF1WlhKeWIzSXBDZ2tKQ1FrSkNXUmxiR1YwWlNCeWRXNURiMjUwWlhoMExtVnljbTl5Q2drSkNRa0pDUzh2SUdGemMzVnRaU0JwZENkeklHaGhibVJzWldRZ2RXNTBhV3dnYVhRZ2FYTnVKM1FLQ1FrSkNRa0pjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVlNaWFIxY200dWNIVnphQ2gyYjJsa0lEQXBDZ2tKQ1FrSkNYSmxkSFZ5YmdvSkNRa0pDWDBLQ1FrSkNRa3ZMeUJVVDBSUE9pQndkWE5vSUdGemVXNWpJSEJ5YjNCbGNua2daWFpoYkNCaGJtUWdDZ2tKQ1FrSkx5OGdjblZ1UTI5dWRHVjRkQzV3Y205bmNtRnRRMjkxYm5RZ0t6MGdNUW9KQ1FrSkNTOHZJRU5QUkVVZ1VrVldTVVZYTENCVFJVVWdRMDlPVkZKUFRDQkpVeUJGUVZOSlJWSWdTVTRnTVNCTVQwOVFDZ2tKQ1FrSmNuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWU1pYUjFjbTR1Y0hWemFDaHZZbXBsWTNSYmNISnZjR1Z5ZEhsZEtRb0pDUWtKZlNrdVltbHVaQ2h1ZFd4c0xDQkJVMVFwQ2drSkNYMHBDZ2tKQ1dsbUtFRlRWQzVqYjIxd2RYUmxaQ2tnZXdvSkNRa0pjblZ1UTI5dWRHVjRkQzV3Y205bmNtRnRRMjkxYm5RZ0t6MGdNZ29KQ1FrSkx5OGdibVZsWkNCdlltcGxZM1FnYjI0Z1luVmlZbXhsVW1WMGRYSnVJSE4wWVdOcklHWnBjbk4wQ2drSkNRbHlkVzVEYjI1MFpYaDBMbkJ5YjJkeVlXMURZV3hzYzNSaFkyc3VjSFZ6YUNoQlUxUXVjSEp2Y0dWeWRIa3BJQW9KQ1FsOUlHVnNjMlVnZXdvSkNRa0pjblZ1UTI5dWRHVjRkQzV3Y205bmNtRnRRMjkxYm5RZ0t6MGdNUW9KQ1FsOUNna0pDWEoxYmtOdmJuUmxlSFF1Y0hKdlozSmhiVU5oYkd4emRHRmpheTV3ZFhOb0tFRlRWQzV2WW1wbFkzUXBDZ2tKQ1dKeVpXRnJDZ2tKWTJGelpTQW5UR2wwWlhKaGJDYzZDZ2tKQ1M4dklHbHVkR1Z5WlhOMGFXNW5MQ0J6YUc5M2FXNW5JR0VnYkdsMFpYSmhiQ0J0YjNabElHWnliMjBnY0hKdlozSmhiU0J0WlcxdmNua2dkRzhnQ2drSkNTOHZJQ0FnYUdWaGNEOEtDUWtKY25WdVEyOXVkR1Y0ZEM1d2NtOW5jbUZ0UTI5MWJuUXRMUW9KQ1FseWRXNURiMjUwWlhoMExtSjFZbUpzWlZKbGRIVnliaTV3ZFhOb0tFRlRWQzUyWVd4MVpTa0tDUWtKWW5KbFlXc0tDUWxqWVhObElDZERZV3hzUlhod2NtVnpjMmx2YmljNkNna0pDV3hsZENCeVpVVjJZV3gxWVhSbENna0pDWEpsUlhaaGJIVmhkR1VnUFNCN0Nna0pDUWwwZVhCbE9pQW5SWFpoYkhWaGRHVW5MQW9KQ1FrSmRtRnNkV1U2SUdaMWJtTjBhVzl1SUNncElIc0tDUWtKQ1Frdkx5QndiM0FnZEdocGN5Qm5kWGtnWW1GamF5QnZiblJ2SUhSb1pTQnpkR0ZqYXlCaVpXTmhkWE5sSUdsMEozTWdZWE41Ym1NS0NRa0pDUWt2THlBZ0lHbDBJSGRwYkd3Z1kyeGxZWElnZDJobGJpQmhjM2x1WXlCbWFXNWhiR2w2WlhNS0NRa0pDUWxqYjI1emIyeGxMbUZ6YzJWeWRDaHlaVVYyWVd4MVlYUmxMblI1Y0dVZ1BUMGdKMFYyWVd4MVlYUmxKeWtLQ1FrSkNRbHlkVzVEYjI1MFpYaDBMbkJ5YjJkeVlXMURiM1Z1ZENzckNna0pDUWtKY25WdVEyOXVkR1Y0ZEM1d2NtOW5jbUZ0UTJGc2JITjBZV05yTG5CMWMyZ29jbVZGZG1Gc2RXRjBaU2tLQ1FrSkNRbHNaWFFnY0dGeVlXMXpDZ2tKQ1FrSkx5OGdWMFZKVWtRZ1NTQktWVk5VSUVkUFZDQkRUMDVHVlZORlJDQlhTRVZTUlNCWFNFRlVJRWRGVGtWU1FWUkpUa2NnUVU0Z1JWSlNUMUlnUWtWRFFWVlRSU0JKVkNkVElGZFBVa3RKVGtjS0NRa0pDUWxwWmloQlUxUXVZWEpuZFcxbGJuUnpMbXhsYm1kMGFDQWhQU0F3S1NCN0Nna0pDUWtKQ1hCaGNtRnRjeUE5SUhKMWJrTnZiblJsZUhRdVluVmlZbXhsVW1WMGRYSnVMbk53YkdsalpTZ3RRVk5VTG1GeVozVnRaVzUwY3k1c1pXNW5kR2dwQ2drSkNRa0pmU0JsYkhObElIc0tDUWtKQ1FrSmNHRnlZVzF6SUQwZ1cxMEtDUWtKQ1FsOUNna0pDUWtKYkdWMElHTmhiR3hsWlNBOUlISjFia052Ym5SbGVIUXVZblZpWW14bFVtVjBkWEp1TG5CdmNDZ3BDZ2tKQ1FrSmNtVjBkWEp1SUZCeWIyMXBjMlV1Y21WemIyeDJaU2dvWVhONWJtTWdablZ1WTNScGIyNGdLQ2tnZXdvSkNRa0pDV3hsZENCeVpYTjFiSFFnQ2drSkNRa0pkSEo1SUhzS0NRa0pDUWtKY21WemRXeDBJRDBnWVhkaGFYUWdZMkZzYkdWbEtDNHVMbkJoY21GdGN5a0tDUWtKQ1FsOUlHTmhkR05vSUNobEtTQjdDZ2tKQ1FrSkNTOHZJRlJQUkU4NklHSjFZbUpzWlNCdmRYUWdkRzhnVkhKNVEyRjBZMmdnY0hKdmNHVnliSGtLQ1FrSkNRa0pjblZ1UTI5dWRHVjRkQzVsY25KdmNpQTlJR1VLQ1FrSkNRbDlJR1pwYm1Gc2JIa2dld29KQ1FrSkNRa3ZMeUJ1WldWa0lHRWdiR2wwZEd4bElHSnBkQ0J2WmlCelkzSmxkMkZ5YjNWdVpITWdhVzVqWVhObElIUm9aU0JqWVd4c0lHRmpkSFZoYkd4NUNna0pDUWtKQ1M4dklDQWdiV0ZyWlhNZ2MzUmhZMnNnWTJoaGJtZGxjeTRnZEdocGN5QndjbVYyWlc1MGN5QjBhR1VnY25WdWJtVnlJR1p5YjIwZ1pHOXBibWNnWVc1NWRHaHBibWNLQ1FrSkNRa0pMeThnSUNCbGRtVnVJR2xtSUdsMEozTWdZMkZzYkdWa0lHMTFiSFJwY0d4bElIUnBiV1Z6Q2drSkNRa0pDWEoxYmtOdmJuUmxlSFF1Y0hKdlozSmhiVU52ZFc1MExTMEtDUWtKQ1FrSmNuVnVRMjl1ZEdWNGRDNXdjbTluY21GdFEyRnNiSE4wWVdOckxuQnZjQ2dwQ2drSkNRa0pDWEoxYmtOdmJuUmxlSFF1WW5WaVlteGxVbVYwZFhKdUxuQjFjMmdvY21WemRXeDBLUW9KQ1FrSkNRbHlaWFIxY200Z2NtVnpkV3gwQ2drSkNRa0pmUW9KQ1FrSkNYMHBLQ2twQ2drSkNRbDlDZ2tKQ1gwS0NRa0pjblZ1UTI5dWRHVjRkQzV3Y205bmNtRnRRMkZzYkhOMFlXTnJMbkIxYzJnb2NtVkZkbUZzZFdGMFpTa0tDUWtKWm05eUtHeGxkQ0JwSUQwZ01Ec2dhU0E4SUVGVFZDNWhjbWQxYldWdWRITXViR1Z1WjNSb095QnBLeXNwSUhzS0NRa0pDWEoxYmtOdmJuUmxlSFF1Y0hKdlozSmhiVU52ZFc1MElDczlJREVLQ1FrSkNYSjFia052Ym5SbGVIUXVjSEp2WjNKaGJVTmhiR3h6ZEdGamF5NXdkWE5vS0VGVFZDNWhjbWQxYldWdWRITmJhVjBwQ2drSkNYMEtDUWtKTHk4Z1EwOUVSU0JTUlZaSlJWY3NJRWtnYldGa1pTQmhJR05vWVc1blpTQjNhR1Z5WlNCbFlXTm9JSFJ2YTJWdUlHUnZaWE51SjNRS0NRa0pMeThnSUNCb1lYWmxJSFJ2SUcxaGEyVWdkR2hsSUhOaGJXVWdjM1JoWTJzdlkyOTFiblJsY2lCamFHRnVaMlZ6SUdGdVpDQm1iM0puYjNRZ2RHaHBjeUJ2Ym1VS0NRa0pjblZ1UTI5dWRHVjRkQzV3Y205bmNtRnRRMjkxYm5RZ0t6MGdNUW9KQ1FseWRXNURiMjUwWlhoMExuQnliMmR5WVcxRFlXeHNjM1JoWTJzdWNIVnphQ2hCVTFRdVkyRnNiR1ZsS1FvSkNRbGljbVZoYXdvSkNXTmhjMlVnSjFKbGRIVnlibE4wWVhSbGJXVnVkQ2M2Q2drSkNYSjFia052Ym5SbGVIUXVjSEp2WjNKaGJVTmhiR3h6ZEdGamF5NXdkWE5vS0hzS0NRa0pDWFI1Y0dVNklDZEZkbUZzZFdGMFpTY3NDZ2tKQ1FsMllXeDFaVG9nWm5WdVkzUnBiMjRnS0NrZ2V3b0pDUWtKQ1dSbFluVm5aMlZ5Q2drSkNRa0pMeThnWTI5dGFXNW5JRzkxZENCdlppQmxkbVZ5ZVNCbWRXNWpkR2x2YmlCallXNGdhR0YyWlNCdmJteDVJREVLQ1FrSkNRa3ZMeUFnSUhKbGRIVnliaUIyWVd4MVpTQm1jbTl0SUhCeWIyTmxjM05wYm1jZ2RHaGxJR0Z5WjNWdFpXNTBJR052YlcxaGJtUWdZbVZzYjNjS0NRa0pDUWt2THlBZ0lHVjJaWEo1ZEdocGJtY2daV3h6WlNCemFHOTFiR1FnWTJ4bFlYSWdkR2hsYVhJZ2IzZHVJSFpoYkhWbGN5d2dkMmhsYmlCMGFHVjVJQW9KQ1FrSkNTOHZJQ0FnWVhKbElFVjJZV3hsWkFvSkNRa0pDV2xtS0hKMWJrTnZiblJsZUhRdVluVmlZbXhsVW1WMGRYSnVMbXhsYm1kMGFDQWhQU0F4S1NCN0Nna0pDUWtKQ1dSbFluVm5aMlZ5Q2drSkNRa0pDWFJvY205M0lHNWxkeUJGY25KdmNpZ25WR2h5WldGa0lDY2dLeUJ5ZFc1RGIyNTBaWGgwTG5CeWIyZHlZVzFKWkNBcklDYzZJRU52Y25KMWNIUmxaQ0J6ZEdGamF5NG5LUW9KQ1FrSkNYMEtDUWtKQ1Frdkx5QlVUMFJQT2lCbGVHbDBJSGRvYjJ4bElHWnlZVzFsQ2drSkNRa0pMeTl5ZFc1RGIyNTBaWGgwTG1KMVltSnNaVkpsZEhWeWJpNXdkWE5vS0dkc2IySmhiRlJvYVhOYlFWTlVMbTVoYldWZEtRb0pDUWtKZlFvSkNRbDlLUW9KQ1FseWRXNURiMjUwWlhoMExuQnliMmR5WVcxRGIzVnVkQ0FyUFNBeENna0pDWEoxYmtOdmJuUmxlSFF1Y0hKdlozSmhiVU5oYkd4emRHRmpheTV3ZFhOb0tFRlRWQzVoY21kMWJXVnVkQ2tLQ1FrSlluSmxZV3NLQ1FsallYTmxJQ2RHZFc1amRHbHZia1Y0Y0hKbGMzTnBiMjRuT2dvSkNRa3ZMeUJVVDBSUE9pQmpiM0I1SUdOeVpXRjBhVzl1SUdOdmJuUmxlSFFLQ1FrSkx5OGdjbVYwZFhKdUlHRWdablZ1WTNScGIyNC9DZ2tKQ1hKMWJrTnZiblJsZUhRdWNISnZaM0poYlVOdmRXNTBJQzA5SURFZ0x5OGdZbVZqWVhWelpTQjNaU0JoY21VZ1lXUmthVzVuSUdFZ2NtVjBkWEp1SUhOMFlYUmxiV1Z1ZEFvSkNRa3ZMeUJ1YjNRZ1lXUmthVzVuSUdGdUlFVjJZV3gxWVhSbElHTnZiVzFoYm1RZ2MyOGdibVZsWkNCMGJ5QnpkV0owY21GamRDQXhDZ2tKQ1hKMWJrTnZiblJsZUhRdVluVmlZbXhsVW1WMGRYSnVMbkIxYzJnb0tHWjFibU4wYVc5dUlDaGliMlI1TENCd1lYSmhiWE1zSUM0dUxtRnlaM01wSUhzS0NRa0pDUzh2SUZSUFJFODZJR0Z6YzJsbmJpQndZWEpoYlhNZ1lXNWtJR1JsWm1GMWJIUnpDZ2tKQ1Fsa1pXSjFaMmRsY2dvSkNRa0pMeTl5ZFc1RGIyNTBaWGgwTG5CeWIyZHlZVzFEWVd4c2MzUmhZMnNnUFNCYlhRb0pDUWtKTHk4Z2FXMXdiR2xsWkNCaGMzTnBaMjV0Wlc1MElHVjRjSEpsYzNOcGIyNEtDUWtKQ1M4dklGUlBSRTg2SUVWMllXeDFZWFJsSUdKdlpIa2dZV1owWlhJZ2NHRnlZVzF6UHdvSkNRa0pjblZ1UTI5dWRHVjRkQzV3Y205bmNtRnRRMjkxYm5RZ0t6MGdNUW9KQ1FrSmNuVnVRMjl1ZEdWNGRDNXdjbTluY21GdFEyRnNiSE4wWVdOckxuQjFjMmdvWW05a2VTa0tDUWtKQ1dadmNpaHNaWFFnYVNBOUlIQmhjbUZ0Y3k1c1pXNW5kR2d0TVRzZ2FTQStQU0F3T3lBdExXa3BJSHNLQ1FrSkNRbHlkVzVEYjI1MFpYaDBMbkJ5YjJkeVlXMURiM1Z1ZENBclBTQXhDZ2tKQ1FrSmNuVnVRMjl1ZEdWNGRDNXdjbTluY21GdFEyRnNiSE4wWVdOckxuQjFjMmdvZXdvSkNRa0pDUWwwZVhCbE9pQW5RWE56YVdkdWJXVnVkRVY0Y0hKbGMzTnBiMjRuTEFvSkNRa0pDUWxzWldaME9pQjdJSFI1Y0dVNklDZEpaR1Z1ZEdsbWFXVnlKeXdnYm1GdFpUb2djR0Z5WVcxelcybGRMbTVoYldVZ2ZTd0tDUWtKQ1FrSmNtbG5hSFE2SUhzZ2RIbHdaVG9nSjB4cGRHVnlZV3duTENCMllXeDFaVG9nWVhKbmMxdHBYU0I5TEFvSkNRa0pDWDBwQ2drSkNRbDlDZ2tKQ1gwcExtSnBibVFvYm5Wc2JDd2dRVk5VTG1KdlpIa3NJRUZUVkM1d1lYSmhiWE1wS1FvSkNRbGljbVZoYXdvSkNXTmhjMlVnSjBWNGNISmxjM05wYjI1VGRHRjBaVzFsYm5Rbk9nb0pDUWt2THlCemJ5Qm5iMmx1WnlCcGJuUnZJR1YyWlhKNUlHVjRjSEpsYzNOcGIyNGdZMkZ1SUdoaGRtVWdZUW9KQ1Frdkx5QWdJRzFoZUdsdGRXMGdiMllnYjI1bElISmxkSFZ5YmlCMllXeDFaU0JtY205dElIQnlaWFpwYjNWekNna0pDUzh2SUNBZ2MzUmhkR1Z0Wlc1MEwyVjRjQzlqWVd4c0Nna0pDV2xtS0hKMWJrTnZiblJsZUhRdVluVmlZbXhsVW1WMGRYSnVMbXhsYm1kMGFDQWhQU0F4S1NCN0Nna0pDUWxrWldKMVoyZGxjZ29KQ1FrSmRHaHliM2NnYm1WM0lFVnljbTl5S0NkVWFISmxZV1FnSnlBcklISjFia052Ym5SbGVIUXVjSEp2WjNKaGJVbGtJQ3NnSnpvZ1EyOXljblZ3ZEdWa0lITjBZV05yTGljcENna0pDWDBLQ1FrSmNuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWU1pYUjFjbTR1Y0c5d0tDa0tDUWtKY25WdVEyOXVkR1Y0ZEM1d2NtOW5jbUZ0UTJGc2JITjBZV05yTG5CMWMyZ29ld29KQ1FrSmRIbHdaVG9nSjBWMllXeDFZWFJsSnl3S0NRa0pDWFpoYkhWbE9pQW9ablZ1WTNScGIyNGdLR1Y0Y0hKbGMzTnBiMjRwSUhzS0NRa0pDUWx5ZFc1RGIyNTBaWGgwTG5CeWIyZHlZVzFEYjNWdWRDQXJQU0F4Q2drSkNRa0pjblZ1UTI5dWRHVjRkQzV3Y205bmNtRnRRMkZzYkhOMFlXTnJMbkIxYzJnb1pYaHdjbVZ6YzJsdmJpa0tDUWtKQ1Frdkx5QlVUMFJQT2lCdFlXdGxJR0VnWTJoaGJtZGxJR3hwYTJVZ2FXMXdiR2xsWkNCeVpYUjFjbTQvSUFvS0NRa0pDWDBwTG1KcGJtUW9iblZzYkN3Z1FWTlVMbVY0Y0hKbGMzTnBiMjRwQ2drSkNYMHBDZ2tKQ1dKeVpXRnJDZ2tKWTJGelpTQW5RbXh2WTJ0VGRHRjBaVzFsYm5Rbk9nb0pDUWt2THlCVVQwUlBPaUJqY21WaGRHVWdZMjl1ZEdWNGRDQnZiaUJ6ZEdGamF3b0pDUWx5ZFc1RGIyNTBaWGgwTG5CeWIyZHlZVzFEYjNWdWRDQXRQU0F4Q2drSkNYSjFia052Ym5SbGVIUXVjSEp2WjNKaGJVTnZkVzUwSUNzOUlFRlRWQzVpYjJSNUxteGxibWQwYUFvSkNRbG1iM0lvYkdWMElHa2dQU0JCVTFRdVltOWtlUzVzWlc1bmRHZ3RNVHNnYVNBK1BTQXdPeUJwTFMwcElIc0tDUWtKQ1hKMWJrTnZiblJsZUhRdWNISnZaM0poYlVOaGJHeHpkR0ZqYXk1d2RYTm9LRUZUVkM1aWIyUjVXMmxkS1FvSkNRbDlDZ2tKQ1dKeVpXRnJDZ2tKWTJGelpTQW5RbWx1WVhKNVJYaHdjbVZ6YzJsdmJpYzZDZ2tKQ1M4dklGUlBSRTg2SUZSSVNWTWdWMGxNVENCQlRFeFBWeUJOUlNCVVR5QlVVa0ZPVTBaUFVrMGdRVkpTUVZrdVJrbE1WRVZTS0NrZ1NVNVVUeUJRUVZKQlRFeEZUQ0JRVWs5TlNWTkZVejhLQ1FrSmNuVnVRMjl1ZEdWNGRDNXdjbTluY21GdFEyRnNiSE4wWVdOckxuQjFjMmdvZXdvSkNRa0pkSGx3WlRvZ0owVjJZV3gxWVhSbEp5d0tDUWtKQ1haaGJIVmxPaUJtZFc1amRHbHZiaUFvS1NCN0Nna0pDUWtKY25WdVEyOXVkR1Y0ZEM1d2NtOW5jbUZ0UTJGc2JITjBZV05yTG5Od2JHbGpaU2d0TXlrS0NRa0pDUWxzWlhRZ2JHVm1kQ0E5SUhKMWJrTnZiblJsZUhRdVluVmlZbXhsVW1WMGRYSnVMbkJ2Y0NncENna0pDUWtKYkdWMElISnBaMmgwSUQwZ2NuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWU1pYUjFjbTR1Y0c5d0tDa0tDUWtKQ1FseWRXNURiMjUwWlhoMExtSjFZbUpzWlZKbGRIVnliaTV3ZFhOb0tHeGxablFnS3lCeWFXZG9kQ2tLQ1FrSkNYMEtDUWtKZlNrS0NRa0pjblZ1UTI5dWRHVjRkQzV3Y205bmNtRnRRMjkxYm5RZ0t6MGdNUW9KQ1FseWRXNURiMjUwWlhoMExuQnliMmR5WVcxRFlXeHNjM1JoWTJzdWNIVnphQ2hCVTFRdWNtbG5hSFFwQ2drSkNYSjFia052Ym5SbGVIUXVjSEp2WjNKaGJVTnZkVzUwSUNzOUlERUtDUWtKY25WdVEyOXVkR1Y0ZEM1d2NtOW5jbUZ0UTJGc2JITjBZV05yTG5CMWMyZ29RVk5VTG14bFpuUXBDZ2tKQ1dKeVpXRnJDZ2tKWTJGelpTQW5WbUZ5YVdGaWJHVkVaV05zWVhKaGRHbHZiaWM2Q2drSkNYSjFia052Ym5SbGVIUXVjSEp2WjNKaGJVTnZkVzUwSUMwOUlERUtDUWtKY25WdVEyOXVkR1Y0ZEM1d2NtOW5jbUZ0UTI5MWJuUWdLejBnUVZOVUxtUmxZMnhoY21GMGFXOXVjeTVzWlc1bmRHZ0tDUWtKWm05eUtHeGxkQ0JwSUQwZ01Ec2dhU0E4SUVGVFZDNWtaV05zWVhKaGRHbHZibk11YkdWdVozUm9PeUJwS3lzcElIc0tDUWtKQ1hKMWJrTnZiblJsZUhRdWNISnZaM0poYlVOaGJHeHpkR0ZqYXk1d2RYTm9LRUZUVkM1a1pXTnNZWEpoZEdsdmJuTmJhVjBwQ2drSkNYMEtDUWtKWW5KbFlXc0tDUWxqWVhObElDZFdZWEpwWVdKc1pVUmxZMnhoY21GMGIzSW5PZ29KQ1FseWRXNURiMjUwWlhoMExuQnliMmR5WVcxRFlXeHNjM1JoWTJzdWNIVnphQ2g3Q2drSkNRbDBlWEJsT2lBblJYWmhiSFZoZEdVbkxBb0pDUWtKZG1Gc2RXVTZJQ2htZFc1amRHbHZiaUFvZG1GeVRtRnRaU2tnZXdvSkNRa0pDWEoxYmtOdmJuUmxlSFF1Ykc5allXeEVaV05zWVhKaGRHbHZibk5iY25WdVEyOXVkR1Y0ZEM1c2IyTmhiRVJsWTJ4aGNtRjBhVzl1Y3k1c1pXNW5kR2d0TVYwS0NRa0pDUWtKQ1Z0MllYSk9ZVzFsWFNBOUlISjFia052Ym5SbGVIUXVZblZpWW14bFVtVjBkWEp1TG5CdmNDZ3BDZ2tKQ1FsOUtTNWlhVzVrS0c1MWJHd3NJRUZUVkM1cFpDNXVZVzFsS1FvSkNRbDlLUW9KQ1FseWRXNURiMjUwWlhoMExuQnliMmR5WVcxRGIzVnVkQ0FyUFNBeENna0pDWEoxYmtOdmJuUmxlSFF1Y0hKdlozSmhiVU5oYkd4emRHRmpheTV3ZFhOb0tFRlRWQzVwYm1sMEtRb0pDUWxpY21WaGF3b0pDV05oYzJVZ0owRnpjMmxuYm0xbGJuUkZlSEJ5WlhOemFXOXVKem9LQ1FrSmNuVnVRMjl1ZEdWNGRDNXdjbTluY21GdFEyRnNiSE4wWVdOckxuQjFjMmdvZXdvSkNRa0pkSGx3WlRvZ0owVjJZV3gxWVhSbEp5d0tDUWtKQ1haaGJIVmxPaUFvWm5WdVkzUnBiMjRnS0dGemMybG5ibVZsS1NCN0Nna0pDUWtKYVdZb1lYTnphV2R1WldVdWRIbHdaU0E5UFNBblRXVnRZbVZ5Ulhod2NtVnpjMmx2YmljcElIc0tDUWtKQ1FrSmJHVjBJRzlpYW1WamRDQTlJSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxVbVYwZFhKdUxuQnZjQ2dwQ2drSkNRa0pDVzlpYW1WamRGdGhjM05wWjI1bFpTNXdjbTl3WlhKMGVTNXVZVzFsWFNBS0NRa0pDUWtKQ1FrOUlISjFia052Ym5SbGVIUXVZblZpWW14bFVtVjBkWEp1VzNKMWJrTnZiblJsZUhRdVluVmlZbXhsVW1WMGRYSnVMbXhsYm1kMGFDMHhYUW9KQ1FrSkNYMGdaV3h6WlNCcFppQW9ZWE56YVdkdVpXVXVkSGx3WlNBOVBTQW5TV1JsYm5ScFptbGxjaWNwSUhzS0NRa0pDUWtKY25WdVEyOXVkR1Y0ZEM1c2IyTmhiRVJsWTJ4aGNtRjBhVzl1YzF0eWRXNURiMjUwWlhoMExteHZZMkZzUkdWamJHRnlZWFJwYjI1ekxteGxibWQwYUMweFhRb0pDUWtKQ1FrSlcyRnpjMmxuYm1WbExtNWhiV1ZkSUQwZ2NuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWU1pYUjFjbTViY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZTWlhSMWNtNHViR1Z1WjNSb0xURmRDZ2tKQ1FrSmZRb0pDUWtKQ1dsbUtISjFia052Ym5SbGVIUXVaWEp5YjNJcElIc0tDUWtKQ1FrSlkyOXVjMjlzWlM1bGNuSnZjaWh5ZFc1RGIyNTBaWGgwTG1WeWNtOXlLUW9KQ1FrSkNRbGtaV3hsZEdVZ2NuVnVRMjl1ZEdWNGRDNWxjbkp2Y2dvSkNRa0pDWDBLQ1FrSkNRa3ZMeUJVVDBSUE9pQnBibk5sY25RZ2NtVnRiM1JsSUcxcFpHUnNaWGRoY21VS0NRa0pDWDBwTG1KcGJtUW9iblZzYkN3Z1FWTlVMbXhsWm5RcENna0pDWDBwQ2drSkNXbG1LRUZUVkM1c1pXWjBMblI1Y0dVZ1BUMGdKMDFsYldKbGNrVjRjSEpsYzNOcGIyNG5LU0I3Q2drSkNRbHlkVzVEYjI1MFpYaDBMbkJ5YjJkeVlXMURiM1Z1ZENBclBTQXhDZ2tKQ1FseWRXNURiMjUwWlhoMExuQnliMmR5WVcxRFlXeHNjM1JoWTJzdWNIVnphQ2hCVTFRdWJHVm1kQzV2WW1wbFkzUXBDZ2tKQ1gwZ1pXeHpaU0JwWmlBb1FWTlVMbXhsWm5RdWRIbHdaU0E5UFNBblNXUmxiblJwWm1sbGNpY3BJSHNLQ2drSkNYMGdaV3h6WlNCN0Nna0pDUWwwYUhKdmR5QnVaWGNnUlhKeWIzSW9RVk5VTG5SNWNHVWdLeUFuT2lCT2IzUWdhVzF3YkdWdFpXNTBaV1E2SUNjZ0t5QkJVMVF1YkdWbWRDNTBlWEJsS1FvSkNRbDlDZ2tKQ1hKMWJrTnZiblJsZUhRdWNISnZaM0poYlVOdmRXNTBJQ3M5SURFS0NRa0pjblZ1UTI5dWRHVjRkQzV3Y205bmNtRnRRMkZzYkhOMFlXTnJMbkIxYzJnb1FWTlVMbkpwWjJoMEtRb0pDUWxpY21WaGF3b0pDV05oYzJVZ0owOWlhbVZqZEVWNGNISmxjM05wYjI0bk9nb0pDUWx5ZFc1RGIyNTBaWGgwTG5CeWIyZHlZVzFEWVd4c2MzUmhZMnN1Y0hWemFDaDdDZ2tKQ1FsMGVYQmxPaUFuUlhaaGJIVmhkR1VuTEFvSkNRa0pkbUZzZFdVNklDaG1kVzVqZEdsdmJpQW9iMkpxWldOMEtTQjdDZ2tKQ1FrSmJHVjBJSEpsYzNWc2RDQTlJSHQ5Q2drSkNRa0pabTl5S0d4bGRDQnJJRDBnYjJKcVpXTjBMbkJ5YjNCbGNuUnBaWE11YkdWdVozUm9MVEU3SUdzZ1BqMGdNRHNnTFMxcktTQjdDZ2tKQ1FrSkNXbG1LRUZUVkM1d2NtOXdaWEowYVdWelcydGRMblpoYkhWbEtTQjdDZ2tKQ1FrSkNRbHlaWE4xYkhSYlFWTlVMbkJ5YjNCbGNuUnBaWE5iYTEwdWEyVjVMbTVoYldWZElEMGdjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVlNaWFIxY200dWNHOXdLQ2tLQ1FrSkNRa0pmU0JsYkhObElIc0tDUWtKQ1FrSkNYSmxjM1ZzZEZ0QlUxUXVjSEp2Y0dWeWRHbGxjMXRyWFM1clpYa3VibUZ0WlYwZ1BTQjJiMmxrSURBS0NRa0pDUWtKZlFvSkNRa0pDWDBLQ1FrSkNRbHlkVzVEYjI1MFpYaDBMbUoxWW1Kc1pWSmxkSFZ5Ymk1d2RYTm9LSEpsYzNWc2RDa0tDUWtKQ1gwcExtSnBibVFvYm5Wc2JDd2dRVk5VS1FvSkNRbDlLUW9KQ1Frdkx5QlVUMFJQT2lCd1lYSmhiR1ZzYkNCdlltcGxZM1FnYVc1cGRHbGhiR2w2WlhKelB3b0pDUWxtYjNJb2JHVjBJR3NnUFNCQlUxUXVjSEp2Y0dWeWRHbGxjeTVzWlc1bmRHZ3RNVHNnYXlBK1BTQXdPeUJyTFMwcElIc0tDUWtKQ1dsbUtFRlRWQzV3Y205d1pYSjBhV1Z6VzJ0ZExuWmhiSFZsS1NCN0Nna0pDUWtKY25WdVEyOXVkR1Y0ZEM1d2NtOW5jbUZ0UTI5MWJuUWdLejBnTVFvSkNRa0pDWEoxYmtOdmJuUmxlSFF1Y0hKdlozSmhiVU5oYkd4emRHRmpheTV3ZFhOb0tFRlRWQzV3Y205d1pYSjBhV1Z6VzJ0ZExuWmhiSFZsS1FvSkNRa0pmUW9KQ1FsOUNna0pDV0p5WldGckNna0pMeW9LQ1FsallYTmxJQ2RRY205d1pYSjBlU2M2Q2drSkNYSjFia052Ym5SbGVIUXVjSEp2WjNKaGJVTmhiR3h6ZEdGamF5NXdiM0FvS1FvSkNRbHlkVzVEYjI1MFpYaDBMbkJ5YjJkeVlXMURZV3hzYzNSaFkyc3VjSFZ6YUNoN0Nna0pDUWwwZVhCbE9pQW5SWFpoYkhWaGRHVW5MQW9KQ1FrSmRtRnNkV1U2SUNobWRXNWpkR2x2YmlBb2IySnFaV04wS1NCN0Nna0pDUWtKWkdWaWRXZG5aWElLQ1FrSkNRbHlkVzVEYjI1MFpYaDBMbkJ5YjJkeVlXMURiM1Z1ZENBdFBTQXhDZ2tKQ1FrSmNuVnVRMjl1ZEdWNGRDNXdjbTluY21GdFEyRnNiSE4wWVdOckxuQnZjQ2dwQ2drSkNRbDlLUzVpYVc1a0tHNTFiR3dzSUNrS0NRa0pmU2tLQ1FrcUx3b0pDV1JsWm1GMWJIUTZJQW9KQ1Fsa1pXSjFaMmRsY2dvSkNRbDBhSEp2ZHlCdVpYY2dSWEp5YjNJb1FWTlVMblI1Y0dVZ0t5QW5PaUJPYjNRZ2FXMXdiR1Z0Wlc1MFpXUWhKeWtLQ1gwS2ZRb0tDZ29LJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9ldmFsL2xvb3AuanNfdGltZXN0YW1wJ109MTY1MTcxMDQxNDE3NDsKd2luZG93LnByZUZTWydsaWJyYXJ5L2V2YWwvbG9vcC5qcyddPSdDbU52Ym5OMElFeFBUa2RmVEU5UFVGTWdQU0F4TURBd01Bb0tDbUZ6ZVc1aklHWjFibU4wYVc5dUlISjFia3h2YjNBb2FXNXBkQ3dnZEdWemRDd2dkWEJrWVhSbExDQmliMlI1TENCeWRXNURiMjUwWlhoMEtTQjdDZ2xzWlhRZ2NtVnpkV3gwQ2dscFppaGliMlI1TG5SNWNHVWdJVDBnSjBKc2IyTnJVM1JoZEdWdFpXNTBKeWtnZXdvSkNYUm9jbTkzSUc1bGR5QkZjbkp2Y2lnblJtOXlVM1JoZEdWdFpXNTBPaUJPYjNRZ2FXMXdiR1Z0Wlc1MFpXUWhKeWtLQ1gwS0NXbG1LR2x1YVhRcElIc0tDUWxoZDJGcGRDQnlkVzVUZEdGMFpXMWxiblFvTUN3Z1cybHVhWFJkTENCeWRXNURiMjUwWlhoMEtRb0pDV2xtS0dGM1lXbDBJSE5vYjNWc1pFSjFZbUpzWlU5MWRDaHlkVzVEYjI1MFpYaDBLU2tnZXdvSkNRbHlaWFIxY200S0NRbDlDZ2w5Q2dvSmJHVjBJSFJsYzNSU1pYTjFiSFJ6SUQwZ1lYZGhhWFFnY25WdVUzUmhkR1Z0Wlc1MEtEQXNJRnQwWlhOMFhTd2djblZ1UTI5dWRHVjRkQ2tLQ1dsbUtHRjNZV2wwSUhOb2IzVnNaRUoxWW1Kc1pVOTFkQ2h5ZFc1RGIyNTBaWGgwS1NrZ2V3b0pDWEpsZEhWeWJnb0pmUW9LQ1M4dklGUlBSRTg2SUhSMWNtNGdiMlptSUhOaFptVjBlU0JtWldGMGRYSmxJSGRwZEdnZ1lXNGdZWFIwY21saWRYUmxJRUJNYjI1blRHOXZjSE1LQ1d4bGRDQnpZV1psZEhrZ1BTQk1UMDVIWDB4UFQxQlRDZ2xtYjNJb08zUmxjM1JTWlhOMWJIUnpJQ1ltSUhOaFptVjBlU0ErSURBN0lITmhabVYwZVMwdEtTQjdDZ2tKYkdWMElISmxjM1ZzZENBOUlHRjNZV2wwSUhKMWJsTjBZWFJsYldWdWRDZ3dMQ0JiWW05a2VWMHNJSEoxYmtOdmJuUmxlSFFwQ2drSmFXWW9jblZ1UTI5dWRHVjRkQzVpY205clpXNHBJSHNLQ1FrSmNuVnVRMjl1ZEdWNGRDNWljbTlyWlc0Z1BTQm1ZV3h6WlFvSkNRbGljbVZoYXdvSkNYMEtDUWxwWmloaGQyRnBkQ0J6YUc5MWJHUkNkV0ppYkdWUGRYUW9jblZ1UTI5dWRHVjRkQ2twSUhzS0NRa0pjbVYwZFhKdUNna0pmUW9KQ1dGM1lXbDBJSEoxYmxOMFlYUmxiV1Z1ZENnd0xDQmJkWEJrWVhSbFhTd2djblZ1UTI5dWRHVjRkQ2tLQ1FscFppaGhkMkZwZENCemFHOTFiR1JDZFdKaWJHVlBkWFFvY25WdVEyOXVkR1Y0ZENrcElIc0tDUWtKY21WMGRYSnVDZ2tKZlFvSkNYUmxjM1JTWlhOMWJIUnpJRDBnWVhkaGFYUWdjblZ1VTNSaGRHVnRaVzUwS0RBc0lGdDBaWE4wWFN3Z2NuVnVRMjl1ZEdWNGRDa0tDUWxwWmloaGQyRnBkQ0J6YUc5MWJHUkNkV0ppYkdWUGRYUW9jblZ1UTI5dWRHVjRkQ2twSUhzS0NRa0pjbVYwZFhKdUNna0pmUW9KZlFvSmFXWW9ZWGRoYVhRZ2MyaHZkV3hrUW5WaVlteGxUM1YwS0hKMWJrTnZiblJsZUhRcEtTQjdDZ2tKY21WMGRYSnVDZ2w5Q2k4dklGTlBJRWtuVFNCT1QxUWdRU0JJV1ZCUFExSkpWRVVnVEVWVVV5QlFWVlFnVTA5TlJTQlNSVUZUVDA1QlFreEZJRUpQVlU1RVV5RUtDV2xtS0hOaFptVjBlU0E5UFNBd0tTQjdDZ2tKZEdoeWIzY2dibVYzSUVWeWNtOXlLQ2RNYjI1bklISjFibTVwYm1jZ1ptOXlJR3h2YjNBaEp5a0tDWDBLQ1hKbGRIVnliaUJ5WlhOMWJIUUtmUW9LWVhONWJtTWdablZ1WTNScGIyNGdjblZ1VjJocGJHVW9RVk5VTENCeWRXNURiMjUwWlhoMEtTQjdDaUFnYkdWMElISmxjM1ZzZEFvZ0lHeGxkQ0J6WVdabGRIa2dQU0JNVDA1SFgweFBUMUJUQ2dsc1pYUWdkR1Z6ZEZKbGMzVnNkSE1LQ1dsbUtFRlRWQzUwZVhCbElEMDlJQ2RYYUdsc1pWTjBZWFJsYldWdWRDY3BJSHNLQ1Fsc1pYUWdabWx5YzNRZ1BTQjBjblZsQ2drSmQyaHBiR1VnS0dacGNuTjBJSHg4SUNoMFpYTjBVbVZ6ZFd4MGN5QW1KaUF0TFhOaFptVjBlU0ErSURBcEtTQjdDZ2tKQ1dacGNuTjBJRDBnWm1Gc2MyVUtDUWtKZEdWemRGSmxjM1ZzZEhNZ1BTQmhkMkZwZENCeWRXNVRkR0YwWlcxbGJuUW9NQ3dnVzBGVFZDNTBaWE4wWFN3Z2NuVnVRMjl1ZEdWNGRDa0tDUWtKYVdZb1lYZGhhWFFnYzJodmRXeGtRblZpWW14bFQzVjBLSEoxYmtOdmJuUmxlSFFwS1NCN0Nna0pDUWx5WlhSMWNtNEtDUWtKZlFvSkNRbHBaaWdoZEdWemRGSmxjM1ZzZEhNcElIc0tDUWtKQ1dKeVpXRnJDZ2tKQ1gwS0NRa0pjbVZ6ZFd4MElEMGdZWGRoYVhRZ2NuVnVVM1JoZEdWdFpXNTBLREFzSUZ0QlUxUXVZbTlrZVYwc0lISjFia052Ym5SbGVIUXBDZ2tKQ1dsbUtISjFia052Ym5SbGVIUXVZbkp2YTJWdUtTQjdDZ2tKQ1FseWRXNURiMjUwWlhoMExtSnliMnRsYmlBOUlHWmhiSE5sQ2drSkNRbGljbVZoYXdvSkNRbDlDZ2tKQ1dsbUtHRjNZV2wwSUhOb2IzVnNaRUoxWW1Kc1pVOTFkQ2h5ZFc1RGIyNTBaWGgwS1NrZ2V3b0pDUWtKY21WMGRYSnVDZ2tKQ1gwS0NRbDlDZ2w5SUdWc2MyVWdDZ2xwWmloQlUxUXVkSGx3WlNBOVBTQW5SRzlYYUdsc1pWTjBZWFJsYldWdWRDY3BJSHNLQ2drSlpHOGdld29KQ1FseVpYTjFiSFFnUFNCaGQyRnBkQ0J5ZFc1VGRHRjBaVzFsYm5Rb01Dd2dXMEZUVkM1aWIyUjVYU3dnY25WdVEyOXVkR1Y0ZENrS0NRa0phV1lvY25WdVEyOXVkR1Y0ZEM1aWNtOXJaVzRwSUhzS0NRa0pDWEoxYmtOdmJuUmxlSFF1WW5KdmEyVnVJRDBnWm1Gc2MyVUtDUWtKQ1dKeVpXRnJDZ2tKQ1gwS0NRa0phV1lvWVhkaGFYUWdjMmh2ZFd4a1FuVmlZbXhsVDNWMEtISjFia052Ym5SbGVIUXBLU0I3Q2drSkNRbHlaWFIxY200S0NRa0pmUW9KQ1FsMFpYTjBVbVZ6ZFd4MGN5QTlJR0YzWVdsMElISjFibE4wWVhSbGJXVnVkQ2d3TENCYlFWTlVMblJsYzNSZExDQnlkVzVEYjI1MFpYaDBLUW9KQ1FscFppaGhkMkZwZENCemFHOTFiR1JDZFdKaWJHVlBkWFFvY25WdVEyOXVkR1Y0ZENrcElIc0tDUWtKQ1hKbGRIVnliZ29KQ1FsOUNna0pmU0IzYUdsc1pTQW9kR1Z6ZEZKbGMzVnNkSE1nSmlZZ0xTMXpZV1psZEhrZ1BpQXdLUW9KZlNCbGJITmxJSHNLQ1FsMGFISnZkeUJ1WlhjZ1JYSnliM0lvUVZOVUxuUjVjR1VnS3lBbk9pQk9iM1FnYVcxd2JHVnRaVzUwWldRaEp5a0tDWDBLQ2dscFppaGhkMkZwZENCemFHOTFiR1JDZFdKaWJHVlBkWFFvY25WdVEyOXVkR1Y0ZENrcElIc0tDUWx5WlhSMWNtNEtDWDBLQ1hKbGRIVnliaUJ5WlhOMWJIUUtmUW89JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9ldmFsL3ByaW0uanNfdGltZXN0YW1wJ109MTY1MTc3MjQwOTkwOTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2V2YWwvcHJpbS5qcyddPSdDbUZ6ZVc1aklHWjFibU4wYVc5dUlISjFibEJ5YVcxcGRHbDJaU2hCVTFRc0lISjFia052Ym5SbGVIUXBJSHNLQ1dsbUtFRlRWQzUwZVhCbElEMDlJQ2RNYVhSbGNtRnNKeWtnZXdvSkNYSmxkSFZ5YmlCQlUxUXVkbUZzZFdVS0NYMGdaV3h6WlNBS0NXbG1LRUZUVkM1MGVYQmxJRDA5SUNkSlpHVnVkR2xtYVdWeUp5a2dld29KQ1dsbUtISjFia052Ym5SbGVIUXViRzlqWVd4V1lYSnBZV0pzWlhNdWFHRnpUM2R1VUhKdmNHVnlkSGtvUVZOVUxtNWhiV1VwS1NCN0Nna0pDV1p2Y2loc1pYUWdhU0E5SUhKMWJrTnZiblJsZUhRdWJHOWpZV3hFWldOc1lYSmhkR2x2Ym5NdWJHVnVaM1JvTFRFN0lHa2dQajBnTURzZ2FTMHRLU0I3Q2drSkNRbHBaaWh5ZFc1RGIyNTBaWGgwTG14dlkyRnNSR1ZqYkdGeVlYUnBiMjV6VzJsZExtaGhjMDkzYmxCeWIzQmxjblI1S0VGVFZDNXVZVzFsS1FvSkNRa0pDWHg4SUhSNWNHVnZaaUJ5ZFc1RGIyNTBaWGgwTG14dlkyRnNSR1ZqYkdGeVlYUnBiMjV6VzJsZFcwRlRWQzV1WVcxbFhTQWhQU0FuZFc1a1pXWnBibVZrSnlrZ2V3b0pDUWtKQ1hKbGRIVnliaUJ5ZFc1RGIyNTBaWGgwTG14dlkyRnNSR1ZqYkdGeVlYUnBiMjV6VzJsZFcwRlRWQzV1WVcxbFhRb0pDUWtKZlFvSkNRbDlDZ2tKZlNCbGJITmxJSHNLQ1Frdkx5QlVUMFJQT2lCcGJtTmhjMlVnYkdsaWNtRnlhV1Z6SUdGeVpXNG5kQ0J6Wlc1MExDQndjbVZ3Y205alpYTnpaV1FnYkdsaWN5QmhjbVVnZFhObFpDQm9aWEpsQ2drSkNXeGxkQ0J5WlhOMWJIUWdQU0JoZDJGcGRDQnpaVzVrVFdWemMyRm5aU2g3Q2drSkNRa3ZMeUJYVDA5SVQwOGdiWGtnWm1seWMzUWdjRzlzZVdacGJHd0tDUWtKQ1hOamNtbHdkRG9nSjNKbGRIVnliaUFuSUNzZ1FWTlVMbTVoYldVc0Nna0pDUWx1WVcxbE9pQkJVMVF1Ym1GdFpTd0tDUWtKZlNrS0NRa0pjbVYwZFhKdUlHRjNZV2wwSUdSdlFXTmpaWE56YjNJb2NtVnpkV3gwS1FvSkNTOHFDZ2tKZXdvSkNRbHBaaWhCVTFRdWJtRnRaU0E5UFNBblkyOXVjMjlzWlNjcElIc0tDUWtKQ1dSbFluVm5aMlZ5Q2drSkNYMEtDUWtKYVdZb1FWTlVMbTVoYldVZ1BUMGdKMEZ5Y21GNUp5a2dld29KQ1FrSlpHVmlkV2RuWlhJS0NRa0pmUW9KQ1FscFppaEJVMVF1Ym1GdFpTQTlQU0FuYzJWMFNXNTBaWEoyWVd3bktTQjdDZ2tKQ1Fsa1pXSjFaMmRsY2dvSkNRbDlDZ2tKQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduU1dSbGJuUnBabWxsY2lCdWIzUWdaR1ZtYVc1bFpEb2dKeUFySUVGVFZDNXVZVzFsS1FvSkNRa3FMd29KQ1gwS0NYMGdaV3h6WlNCN0Nna0pkR2h5YjNjZ2JtVjNJRVZ5Y205eUtFRlRWQzUwZVhCbElDc2dKem9nVG05MElHbHRjR3hsYldWdWRHVmtJU2NwQ2dsOUNuMEtDZ3BoYzNsdVl5Qm1kVzVqZEdsdmJpQnlkVzVWYm1GeWVTaEJVMVFzSUhKMWJrTnZiblJsZUhRcElIc0tDV2xtS0VGVFZDNXZjR1Z5WVhSdmNpQTlQU0FuZG05cFpDY3BJSHNLQ1FseVpYUjFjbTRnZG05cFpDQW9ZWGRoYVhRZ2NuVnVVM1JoZEdWdFpXNTBLREFzSUZ0QlUxUXVZWEpuZFcxbGJuUmRMQ0J5ZFc1RGIyNTBaWGgwS1NrS0NYMGdaV3h6WlFvSmFXWW9RVk5VTG05d1pYSmhkRzl5SUQwOUlDY2hKeWtnZXdvSkNYSmxkSFZ5YmlBaEtHRjNZV2wwSUhKMWJsTjBZWFJsYldWdWRDZ3dMQ0JiUVZOVUxtRnlaM1Z0Wlc1MFhTd2djblZ1UTI5dWRHVjRkQ2twQ2dsOUlHVnNjMlVLQ1dsbUtFRlRWQzV2Y0dWeVlYUnZjaUE5UFNBbmRIbHdaVzltSnlrZ2V3b0pDWFJ5ZVNCN0Nna0pDWEoxYmtOdmJuUmxlSFF1WW5WaVlteGxWWEFnUFNCMGNuVmxDZ2tKQ1d4bGRDQnlaWE4xYkhRZ1BTQmhkMkZwZENCeWRXNVRkR0YwWlcxbGJuUW9NQ3dnVzBGVFZDNWhjbWQxYldWdWRGMHNJSEoxYmtOdmJuUmxlSFFwQ2drSkNYSmxkSFZ5YmlCMGVYQmxiMllnY21WemRXeDBDZ2tKZlNCallYUmphQ0FvZFhBcElIc0tDUWtKYVdZb2RYQXViV1Z6YzJGblpTNXBibU5zZFdSbGN5Z25ibTkwSUdSbFptbHVaV1FuS1NrZ2V3b0pDUWtKY21WMGRYSnVJQ2QxYm1SbFptbHVaV1FuQ2drSkNYMGdaV3h6WlNCN0Nna0pDUWwwYUhKdmR5QjFjQW9KQ1FsOUNna0pmU0JtYVc1aGJHeDVJSHNLQ1FrSmNuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWVmNDQTlJR1poYkhObENna0pmUW9KZlNCbGJITmxDZ2xwWmloQlUxUXViM0JsY21GMGIzSWdQVDBnSnkwbktTQjdDZ2tKY21WMGRYSnVJQzBvWVhkaGFYUWdjblZ1VTNSaGRHVnRaVzUwS0RBc0lGdEJVMVF1WVhKbmRXMWxiblJkTENCeWRXNURiMjUwWlhoMEtTa0tDWDBnWld4elpTQjdDZ2tKWkdWaWRXZG5aWElLQ1FsMGFISnZkeUJ1WlhjZ1JYSnliM0lvUVZOVUxuUjVjR1VnS3lBbk9pQk9iM1FnYVcxd2JHVnRaVzUwWldRaEp5a0tDWDBLZlFvS1lYTjVibU1nWm5WdVkzUnBiMjRnY25WdVRHOW5hV05oYkNoQlUxUXNJSEoxYmtOdmJuUmxlSFFwSUhzS0NTOHZJRTFGUVU1VUlGUlBJRVJQSUZSSVNWTWdVMDlQVGtWU0NnbHBaaWhCVTFRdWIzQmxjbUYwYjNJZ1BUMGdKeVltSnlrZ2V3b0pDV3hsZENCc1pXWjBJRDBnWVhkaGFYUWdjblZ1VTNSaGRHVnRaVzUwS0RBc0lGdEJVMVF1YkdWbWRGMHNJSEoxYmtOdmJuUmxlSFFwQ2drSmFXWW9ZWGRoYVhRZ2MyaHZkV3hrUW5WaVlteGxUM1YwS0hKMWJrTnZiblJsZUhRcEtTQjdDZ2tKQ1hKbGRIVnliZ29KQ1gwS0NRbHBaaWdoYkdWbWRDa2dld29KQ1FseVpYUjFjbTRnWm1Gc2MyVUtDUWw5Q2drSkx5OGdiR1ZtZENBOUlIUnlkV1VLQ2drSmJHVjBJSEpwWjJoMElEMGdZWGRoYVhRZ2NuVnVVM1JoZEdWdFpXNTBLREFzSUZ0QlUxUXVjbWxuYUhSZExDQnlkVzVEYjI1MFpYaDBLUW9KQ1dsbUtHRjNZV2wwSUhOb2IzVnNaRUoxWW1Kc1pVOTFkQ2h5ZFc1RGIyNTBaWGgwS1NrZ2V3b0pDUWx5WlhSMWNtNEtDUWw5Q2drSmNtVjBkWEp1SUhKcFoyaDBDZ2w5SUdWc2MyVUtDV2xtS0VGVFZDNXZjR1Z5WVhSdmNpQTlQU0FuZkh3bktTQjdDZ2tKYkdWMElHeGxablFnUFNCaGQyRnBkQ0J5ZFc1VGRHRjBaVzFsYm5Rb01Dd2dXMEZUVkM1c1pXWjBYU3dnY25WdVEyOXVkR1Y0ZENrS0NRbHBaaWhoZDJGcGRDQnphRzkxYkdSQ2RXSmliR1ZQZFhRb2NuVnVRMjl1ZEdWNGRDa3BJSHNLQ1FrSmNtVjBkWEp1Q2drSmZRb0pDV2xtS0d4bFpuUXBJSHNLQ1FrSmNtVjBkWEp1SUhSeWRXVUtDUWw5Q2drSkx5OGdiR1ZtZENBOUlHWmhiSE5sQ2drSmJHVjBJSEpwWjJoMElEMGdZWGRoYVhRZ2NuVnVVM1JoZEdWdFpXNTBLREFzSUZ0QlUxUXVjbWxuYUhSZExDQnlkVzVEYjI1MFpYaDBLUW9KQ1dsbUtHRjNZV2wwSUhOb2IzVnNaRUoxWW1Kc1pVOTFkQ2h5ZFc1RGIyNTBaWGgwS1NrZ2V3b0pDUWx5WlhSMWNtNEtDUWw5Q2dvSkNYSmxkSFZ5YmlCeWFXZG9kQW9KZlNCbGJITmxJSHNLQ1FsMGFISnZkeUJ1WlhjZ1JYSnliM0lvUVZOVUxuUjVjR1VnS3lBbk9pQk9iM1FnYVcxd2JHVnRaVzUwWldRNklDY2dLeUJCVTFRdWIzQmxjbUYwYjNJcENnbDlDZ3A5Q2dvS0NpOHZJRUpGUTBGVlUwVWdUMFlnVkVoRklFNUJWRlZTUlNCUFJpQlRSVU5WVWtsT1J5QkZWa0ZNS0NrZ1Fsa2dRMGhTVDAxRklFVllWRVZPVTBsUFRsTUtMeThnSUNCVVNFVlNSU2RUSUV4SlZGUk1SU0JKSUVOQlRpQkVUeUJVVHlCUFVGUkpUVWxhUlNCVVNFVWdVMVJaVEVVZ1QwWWdWRWhKVXlCRlZrRk1WVUZVVDFJS0x5OGdJQ0JGVmtWU1dTQlRXVTFDVDB3Z1NVNGdTa0ZXUVZORFVrbFFWQ0JJUVZNZ1ZFOGdRa1VnU0VsVUlFRkhRVWxPTGdvdkx5QklUMWRGVmtWU0xDQk1TVXRGSUVGT1ZGSk1JRWtnUTBGT0lGVlRSU0FxVWtWR1RFVkRWRWxQVGlCUFRpQlVTRVVnUjFKQlRVMUJVaW9nVkU4Z1IwVk9SVkpCVkVVZ1FVNEtMeThnSUNCRlZrRk1WVUZVVDFJZ1NVNGdWRWhGSUZOQlRVVWdURUZPUjFWQlIwVXNJRXBWVTFRZ1RFbExSU0JVU0VWU1JTQkJVa1VnVmtsVFNWUlBVbE1nUVU1RUNpOHZJQ0FnVEVsVFZFVk9SVkpUTENCSklFTkJUaUJOUVV0RklFRk9JRVZXUVV4VlFWUlBVaUJFVHlCVVNFVWdVMEZOUlNCVVNFbE9SeUJESUVSUFJWTWdWMGxVU0Fvdkx5QWdJRUZUV1U1RElGTlVRVlJGVFVWT1ZGTWdTVTRnUWtWVVYwVkZUaTRLTHk4Z1ZFaEpVeUJKVXlCTlFVUkZJRk5KVFZCTVJWSXNJRXhKUzBVZ1NsVlFXVlJGVWlCTFJWSk9SVXhUTENCUFRrTkZJRlJJUlZKRkoxTWdRVTRnUlZaQlRDZ3BDaTh2SUNBZ1NVNGdUMDVGSUVaRlFWUlZVa1VnUTA5TlVFeEZWRVVnVEVGT1IxVkJSMFVzSUZwTlVTQkRRVTRnVkZKQlRsTkdSVklnUmtWQlZGVlNSVk1nUWtWVVYwVkZUZ292THlBZ0lGUlhUeUJFU1VaR1JWSkZUbFFnUmtWQlZGVlNSU0JUUlZSVExDQkJJRTVCVkVsV1JTQkxSVkpPUlV3Z1FVNUVJRUVnSWsxRlZFRXRTMFZTVGtWTUlpNEtMeThnUWxrZ1FVUkVTVTVISUVGT1ZFeFNMMHhCVGtkVlFVZEZMVk5GVWxaRlVpQW9UVWxEVWs5VFQwWlVJRXhCVGtkVlFVZEZMVk5GVWxaRlVpQlhUMVZNUkNCSVFWWkZDaTh2SUNBZ1FrVkZUaUJVU0VVZ1VrbEhTRlFnUTBoUFNVTkZJRWxHSUVwVlVGbFVSVklnVTFSQlVsUkZSQ0JVVDBSQldTa2dTVTVVVHlCVVNFVWdUVWxZTENBS0x5OGdJQ0JKSUVKQlUwbERRVXhNV1NCRFVrVkJWRVVnUVNBaVRVVlVRUzFMUlZKT1JVd2lJRWxPSUVGT1dTQk1RVTVIVlVGSFJTNGdWRWhGVGl3Z1NTQlZVMFVnVkVoQlZBb3ZMeUFnSUVsT1ZFVlNSa0ZEUlNCVVR5QkpWRVZTUVZSRklFRk9SQ0JYVWtsVVJTQlVTRVVnUVZCSklGUlNRVTVUVEVGVVNVOU9MQ0JTUlZGVlNWSkZLQ2RHVXljcElDMCtDaTh2SUNBZ1F5TWdTVTFRVDFKVUlFWkpURVZUV1ZOVVJVMHVDaTh2SUZkSVJVNGdWRWhGSUZSU1FVNVRURUZVU1U5T0lFbFRJRVJQVGtVc0lFa2dVMGhQVlV4RUlFSkZJRUZDVEVVZ1ZFOGdRMDlPVmtWU1ZDQk1TVXRGSUVNeVVsVlRWQzRLTHk4Z0lDQkNSVlJYUlVWT0lFMVBVa1VnVkVoQlRpQXlJRXhCVGtkVlFVZEZVeUFvVUZsVVNFOU9JQzArSUU1UFJFVXBJRlZUU1U1SElFOU9URmtnVFVWVVFTMVFVazlIVWtGTlRVbE9SeTRLTHk4Z0lDQlBUa05GSUZSSVJTQk5SVlJCTFZCU1QwZFNRVTFOU1U1SElFbE9WRVZTUmtGRFJWTWdRVkpGSUVOUFRWQk1SVlJGUkN3Z1EwOU9VMVZOVUZSSlQwNGdRMEZPSUVKRlIwbE9MZ292THlCUFluWnBiM1Z6Ykhrc0lFa25iU0J1YjNRZ2RHaGxJRzl1YkhrZ2IyNWxJSGR2Y210cGJtY2diMjRnZEdocGN5QnpiM0owSUc5bUlIUm9hVzVuTGdwaGMzbHVZeUJtZFc1amRHbHZiaUJ5ZFc1Q2FXNWhjbmtvUVZOVUxDQnlkVzVEYjI1MFpYaDBLU0I3Q2dsc1pYUWdiR1ZtZENBOUlHRjNZV2wwSUhKMWJsTjBZWFJsYldWdWRDZ3dMQ0JiUVZOVUxteGxablJkTENCeWRXNURiMjUwWlhoMEtRb0phV1lvWVhkaGFYUWdjMmh2ZFd4a1FuVmlZbXhsVDNWMEtISjFia052Ym5SbGVIUXBLU0I3Q2drSmNtVjBkWEp1Q2dsOUNnb0piR1YwSUhKcFoyaDBJRDBnWVhkaGFYUWdjblZ1VTNSaGRHVnRaVzUwS0RBc0lGdEJVMVF1Y21sbmFIUmRMQ0J5ZFc1RGIyNTBaWGgwS1FvSmFXWW9ZWGRoYVhRZ2MyaHZkV3hrUW5WaVlteGxUM1YwS0hKMWJrTnZiblJsZUhRcEtTQjdDZ2tKY21WMGRYSnVDZ2w5Q2dvSkx5OGdUVUZVU0ZNaENnbHBaaWhCVTFRdWIzQmxjbUYwYjNJZ1BUMGdKeW9uS1NCN0Nna0pjbVYwZFhKdUlHeGxablFnS2lCeWFXZG9kQW9KZlNCbGJITmxDZ2xwWmloQlUxUXViM0JsY21GMGIzSWdQVDBnSnk4bktTQjdDZ2tKY21WMGRYSnVJR3hsWm5RZ0x5QnlhV2RvZEFvSmZTQmxiSE5sQ2dscFppaEJVMVF1YjNCbGNtRjBiM0lnUFQwZ0p5c25LU0I3Q2drSmNtVjBkWEp1SUd4bFpuUWdLeUJ5YVdkb2RBb0pmU0JsYkhObENnbHBaaWhCVTFRdWIzQmxjbUYwYjNJZ1BUMGdKeTBuS1NCN0Nna0pjbVYwZFhKdUlHeGxablFnTFNCeWFXZG9kQW9KZlNCbGJITmxDZ2xwWmloQlUxUXViM0JsY21GMGIzSWdQVDBnSnlVbktTQjdDZ2tKTHk4Z1ZFOUVUem9nWTJGdWJtOTBJRzF2WkhWc2J5QmhJR1pzYjJGMENna0pjbVYwZFhKdUlHeGxablFnSlNCeWFXZG9kQW9KZlNCbGJITmxDZ2xwWmloQlUxUXViM0JsY21GMGIzSWdQVDBnSjE0bktTQjdDZ2tKY21WMGRYSnVJR3hsWm5RZ1hpQnlhV2RvZEFvSmZTQmxiSE5sSUFvSmFXWW9RVk5VTG05d1pYSmhkRzl5SUQwOUlDYzhQU2NwSUhzS0NRbHlaWFIxY200Z2JHVm1kQ0E4UFNCeWFXZG9kQW9KZlNCbGJITmxDZ2xwWmloQlUxUXViM0JsY21GMGIzSWdQVDBnSno0OUp5a2dld29KQ1hKbGRIVnliaUJzWldaMElENDlJSEpwWjJoMENnbDlJR1ZzYzJVS0NXbG1LRUZUVkM1dmNHVnlZWFJ2Y2lBOVBTQW5JVDBuS1NCN0Nna0pjbVYwZFhKdUlHeGxablFnSVQwZ2NtbG5hSFFLQ1gwZ1pXeHpaUW9KYVdZb1FWTlVMbTl3WlhKaGRHOXlJRDA5SUNjOVBTY3BJSHNLQ1FseVpYUjFjbTRnYkdWbWRDQTlQU0J5YVdkb2RBb0pmU0JsYkhObENnbHBaaWhCVTFRdWIzQmxjbUYwYjNJZ1BUMGdKeUU5UFNjcElIc0tDUWx5WlhSMWNtNGdiR1ZtZENBaFBUMGdjbWxuYUhRS0NYMGdaV3h6WlFvSmFXWW9RVk5VTG05d1pYSmhkRzl5SUQwOUlDYzlQVDBuS1NCN0Nna0pjbVYwZFhKdUlHeGxablFnUFQwOUlISnBaMmgwQ2dsOUlHVnNjMlVLQ1dsbUtFRlRWQzV2Y0dWeVlYUnZjaUE5UFNBblBDY3BJSHNLQ1FseVpYUjFjbTRnYkdWbWRDQThJSEpwWjJoMENnbDlJR1ZzYzJVS0NXbG1LRUZUVkM1dmNHVnlZWFJ2Y2lBOVBTQW5QaWNwSUhzS0NRbHlaWFIxY200Z2JHVm1kQ0ErSUhKcFoyaDBDZ2w5SUdWc2MyVWdld29KQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWhCVTFRdWRIbHdaU0FySUNjNklFNXZkQ0JwYlhCc1pXMWxiblJsWkRvZ0p5QXJJRUZUVkM1dmNHVnlZWFJ2Y2lrS0NYMEtmUW9LQ21GemVXNWpJR1oxYm1OMGFXOXVJSEoxYmxWd1pHRjBaU2hCVTFRc0lISjFia052Ym5SbGVIUXBJSHNLQ1d4bGRDQmhjbWRXWVd3Z1BTQmhkMkZwZENCeWRXNVRkR0YwWlcxbGJuUW9NQ3dnVzBGVFZDNWhjbWQxYldWdWRGMHNJSEoxYmtOdmJuUmxlSFFwQ2dscFppaGhkMkZwZENCemFHOTFiR1JDZFdKaWJHVlBkWFFvY25WdVEyOXVkR1Y0ZENrcElIc0tDUWx5WlhSMWNtNEtDWDBLQ2dscFppaEJVMVF1YjNCbGNtRjBiM0lnUFQwZ0p5MHRKeWtnZXdvSkNXRjNZV2wwSUhKMWJrRnpjMmxuYm0xbGJuUW9RVk5VTG1GeVozVnRaVzUwTENCN0NpQWdJQ0FnSUhSNWNHVTZJQ2RNYVhSbGNtRnNKeXdLSUNBZ0lDQWdkbUZzZFdVNklDMHRZWEpuVm1Gc0NpQWdJQ0I5TENCeWRXNURiMjUwWlhoMEtRb0pDV2xtS0VGVFZDNXdjbVZtYVhncElIc0tDUWtKY21WMGRYSnVJR0YzWVdsMElISjFibE4wWVhSbGJXVnVkQ2d3TENCYlFWTlVMbUZ5WjNWdFpXNTBYU3dnY25WdVEyOXVkR1Y0ZENrS0NRbDlJR1ZzYzJVZ2V3b0pDUWx5WlhSMWNtNGdZWEpuVm1Gc0Nna0pmUW9KZlNCbGJITmxDZ2xwWmloQlUxUXViM0JsY21GMGIzSWdQVDBnSnlzckp5a2dld29KQ1dGM1lXbDBJSEoxYmtGemMybG5ibTFsYm5Rb1FWTlVMbUZ5WjNWdFpXNTBMQ0I3Q2lBZ0lDQWdJSFI1Y0dVNklDZE1hWFJsY21Gc0p5d0tJQ0FnSUNBZ2RtRnNkV1U2SUNzcllYSm5WbUZzQ2lBZ0lDQjlMQ0J5ZFc1RGIyNTBaWGgwS1FvSkNXbG1LRUZUVkM1d2NtVm1hWGdwSUhzS0NRa0pjbVYwZFhKdUlHRjNZV2wwSUhKMWJsTjBZWFJsYldWdWRDZ3dMQ0JiUVZOVUxtRnlaM1Z0Wlc1MFhTd2djblZ1UTI5dWRHVjRkQ2tLQ1FsOUlHVnNjMlVnZXdvSkNRbHlaWFIxY200Z1lYSm5WbUZzQ2drSmZRb0pmU0JsYkhObElIc0tDUWwwYUhKdmR5QnVaWGNnUlhKeWIzSW9RVk5VTG5SNWNHVWdLeUFuT2lCT2IzUWdhVzF3YkdWdFpXNTBaV1FoSnlrS0NYMEtDWEpsZEhWeWJpQmhjbWRXWVd3S0NuMEsnOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2V2YWwvdmFycy5qc190aW1lc3RhbXAnXT0xNjUxNzM0MTE4NDA3Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZXZhbC92YXJzLmpzJ109J0NncGhjM2x1WXlCbWRXNWpkR2x2YmlCeWRXNVBZbXBsWTNRb1FWTlVMQ0J5ZFc1RGIyNTBaWGgwS1NCN0NpQWdiR1YwSUc1bGQwOWlhbVZqZENBOUlIdDlDaUFnWm05eUtHeGxkQ0JySUQwZ01Ec2dheUE4SUVGVFZDNXdjbTl3WlhKMGFXVnpMbXhsYm1kMGFEc2dheXNyS1NCN0NpQWdJQ0JzWlhRZ2NISnZjQ0E5SUVGVFZDNXdjbTl3WlhKMGFXVnpXMnRkQ2lBZ0lDQnBaaWh3Y205d0xuUjVjR1VnSVQwZ0oxQnliM0JsY25SNUp5QjhmQ0J3Y205d0xtdGxlUzUwZVhCbElDRTlJQ2RKWkdWdWRHbG1hV1Z5SnlrZ2V3b2dJQ0FnSUNCMGFISnZkeUJ1WlhjZ1JYSnliM0lvSjA5aWFtVmpkRVY0Y0hKbGMzTnBiMjQ2SUU1dmRDQnBiWEJzWlcxbGJuUmxaQ0VuS1FvZ0lDQWdmUW9nSUNBZ0x5OGdWRTlFVHpvZ1lXUmtJR3hoZEdVZ1ltbHVaR2x1WndvZ0lDQWdibVYzVDJKcVpXTjBXM0J5YjNBdWEyVjVMbTVoYldWZElEMGdZWGRoYVhRZ2NuVnVVM1JoZEdWdFpXNTBLREFzSUZ0d2NtOXdMblpoYkhWbFhTd2djblZ1UTI5dWRHVjRkQ2tLSUNBZ0lHbG1LR0YzWVdsMElITm9iM1ZzWkVKMVltSnNaVTkxZENoeWRXNURiMjUwWlhoMEtTa2dld29nSUNBZ0lDQnlaWFIxY200S0lDQWdJSDBLSUNCOUNpQWdjbVYwZFhKdUlHNWxkMDlpYW1WamRBcDlDZ29LQ2k4dklFUlBJRlpCVWtsQlFreEZJRkpGUVZOVFNVZE9UVVZPVkZNS1lYTjVibU1nWm5WdVkzUnBiMjRnY25WdVFYTnphV2R1YldWdWRDaHNaV1owTENCeWFXZG9kQ3dnY25WdVEyOXVkR1Y0ZENrZ2V3b0tJQ0JwWmloc1pXWjBMblI1Y0dVZ1BUMGdKMHhwZEdWeVlXd25LU0I3Q2drSkx5OGdZMkZ1Ym05MElHRnpjMmxuYmlCMllXeDFaU0IwYnlCd2NtbHRhWFJwZG1VZ2RIbHdaUW9KQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduUTJGdWJtOTBJRzkyWlhKeWFXUmxJSEJ5YVcxcGRHbDJaUzRuS1FvSmZRb0tDV2xtSUNoc1pXWjBMblI1Y0dVZ1BUMGdKMDFsYldKbGNrVjRjSEpsYzNOcGIyNG5LU0I3Q2drSmJHVjBJSEJoY21WdWRDQTlJR0YzWVdsMElISjFibE4wWVhSbGJXVnVkQ2d3TENCYmJHVm1kQzV2WW1wbFkzUmRMQ0J5ZFc1RGIyNTBaWGgwS1FvSkNXbG1LR0YzWVdsMElITm9iM1ZzWkVKMVltSnNaVTkxZENoeWRXNURiMjUwWlhoMEtTa2dld29KQ1FseVpYUjFjbTRLQ1FsOUNnb0pDV3hsZENCd2NtOXdaWEowZVFvSkNXbG1LR3hsWm5RdWNISnZjR1Z5ZEhrdWRIbHdaU0E5UFNBblNXUmxiblJwWm1sbGNpY3BJSHNLQ1FrSmNISnZjR1Z5ZEhrZ1BTQnNaV1owTG5CeWIzQmxjblI1TG01aGJXVUtDUWw5SUdWc2MyVWdDZ2tKYVdZb2JHVm1kQzV3Y205d1pYSjBlUzUwZVhCbElEMDlJQ2RNYVhSbGNtRnNKeWtnZXdvSkNRbHdjbTl3WlhKMGVTQTlJR3hsWm5RdWNISnZjR1Z5ZEhrdWRtRnNkV1VLQ1FsOUlHVnNjMlVnZXdvSkNRbHdjbTl3WlhKMGVTQTlJR0YzWVdsMElISjFibE4wWVhSbGJXVnVkQ2d3TENCYmJHVm1kQzV3Y205d1pYSjBlVjBzSUhKMWJrTnZiblJsZUhRcENna0pDV2xtS0dGM1lXbDBJSE5vYjNWc1pFSjFZbUpzWlU5MWRDaHlkVzVEYjI1MFpYaDBLU2tnZXdvSkNRa0pjbVYwZFhKdUNna0pDWDBLQ1FsOUNnb0pDV3hsZENCeVpYTjFiSFFLQ1FscFppaHlhV2RvZENrZ2V3b0pDUWx5WlhOMWJIUWdQU0JoZDJGcGRDQnlkVzVUZEdGMFpXMWxiblFvTUN3Z1czSnBaMmgwWFN3Z2NuVnVRMjl1ZEdWNGRDa0tDUWw5SUdWc2MyVWdld29KQ1FseVpYTjFiSFFnUFNCMmIybGtJREFLQ1FsOUNna0pMeThnVEVWQlN5QkJVMU5KUjA1TlJVNVVJRVpQVWlCSFRFOUNRVXdnUkVWQ1ZVZEhTVTVIUHdvSkNXbG1LR0YzWVdsMElITm9iM1ZzWkVKMVltSnNaVTkxZENoeWRXNURiMjUwWlhoMEtTa2dld29KQ1FseVpYUjFjbTRLQ1FsOUNnb0pDWEoxYmtOdmJuUmxlSFF1WW5WaVlteGxUV1Z0WW1WeUlEMGdjR0Z5Wlc1MENna0pjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVlFjbTl3WlhKMGVTQTlJQ2h5ZFc1RGIyNTBaWGgwTG1KMVltSnNaVkJ5YjNCbGNuUjVJQW9KQ1FrSlB5QW9jblZ1UTI5dWRHVjRkQzVpZFdKaWJHVlFjbTl3WlhKMGVTQXJJQ2N1SnlrZ09pQW5KeWtnQ2drSkNRa3JJR3hsWm5RdWIySnFaV04wTG01aGJXVWdLeUFuTGljZ0t5QndjbTl3WlhKMGVRb0tDUWxwWmloMGVYQmxiMllnY0dGeVpXNTBJRDA5SUNkdlltcGxZM1FuSUNZbUlIQmhjbVZ1ZENBdkx5QkNWVWM2SUc1MWJHd3NJSGRvYjI5d2N3b0pDUWtKSmlZZ2RIbHdaVzltSUhCaGNtVnVkQzVmWVdOalpYTnpiM0lnSVQwZ0ozVnVaR1ZtYVc1bFpDY3BJSHNLQ1FrSmFXWW9kSGx3Wlc5bUlIQmhjbVZ1ZEM1ZllXTmpaWE56YjNJZ0lUMGdKMloxYm1OMGFXOXVKeWtnZXdvSkNRa0paR1ZpZFdkblpYSUtDUWtKZlFvSkNRbGhkMkZwZENCd1lYSmxiblF1WDJGalkyVnpjMjl5S0RBc0lGdDdDZ2tKQ1FsMGVYQmxPaUFuUVhOemFXZHViV1Z1ZEVWNGNISmxjM05wYjI0bkxBb0pDUWtKYkdWbWREb2diR1ZtZEN3S0NRa0pDWEpwWjJoME9pQnlhV2RvZEN3S0NRa0pmVjBzSUhKbGMzVnNkQ3dnY25WdVEyOXVkR1Y0ZENrS0NRa0pMeThnVkU5RVR6b2daSFZ3YkdsallYUmxJR0Z6YzJsbmJtMWxiblJ6UHdvSkNYMEtDUWx3WVhKbGJuUmJjSEp2Y0dWeWRIbGRJRDBnY21WemRXeDBDZ2tKTHk4Z2JtOTBhV1o1SUdOc2FXVnVkSE1LQ1FseVpYUjFjbTRnY21WemRXeDBDZ2w5SUdWc2MyVWdDZ2t2THlCVVQwUlBPaUJrYjJWeklHVjRjSEpsYzNOcGIyNGdaWFpoYkhWaGRHVWdaWFpsYmlCcFppQjBhR1Z5WlNCaGMzTnBaMjV0Wlc1MElHVnljbTl5UHdvSkx5OGdWRTlFVHpvZ2FHOTNJR1J2WlhNZ1EyaHZiV1VnY205c2JDQjBhR2x6SUdKaFkycy9JRkJ5YVcxcGRHbDJaWE1nYjI1c2VUOEtDUW9KYVdZb2JHVm1kQzUwZVhCbElEMDlJQ2RKWkdWdWRHbG1hV1Z5SnlrZ2V3b0pDV2xtS0hKMWJrTnZiblJsZUhRdWJHOWpZV3hXWVhKcFlXSnNaWE5iYkdWbWRDNXVZVzFsWFNBOVBTQW5ablZ1WTNScGIyNG5LU0I3Q2drSkNYUm9jbTkzSUc1bGR5QkZjbkp2Y2lnblEyRnVibTkwSUc5MlpYSnlhV1JsSUdaMWJtTjBhVzl1T2lBbklDc2diR1ZtZEM1dVlXMWxLUW9KQ1gwZ1pXeHpaU0JwWmlBb0lYSjFia052Ym5SbGVIUXViRzlqWVd4V1lYSnBZV0pzWlhNdWFHRnpUM2R1VUhKdmNHVnlkSGtvYkdWbWRDNXVZVzFsS1NrZ2V3b0pDUWt2THlCVVQwUlBPaUJNUVZwWkxDQnVieUIyWVhJc0lHOXViSGtnYkdWMENna0pDV1JsWW5WbloyVnlDZ2tKQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduVm1GeWFXRmliR1VnYm05MElHUmxabWx1WldRNklDY2dLeUJzWldaMExtNWhiV1VwQ2drSmZTQmxiSE5sSUhzS0NRa0pMeThnVjA5WElTQkpUVUZIU1U1RklGUklRVlFoSUZOSVQxY2dWa0ZTU1VGQ1RFVlRJRUpGUms5U1JTQkJUa1FnUVVaVVJWSWdRVk5UU1VkT1RVVk9WQ0VnUjA5UFIweEZJRU5JVWs5TlJTQkVSVUpWUjBkRlVpRUtDUWtKYkdWMElISmxjM1ZzZEFvSkNRbHBaaWh5YVdkb2RDa2dld29KQ1FrSmNtVnpkV3gwSUQwZ1lYZGhhWFFnY25WdVUzUmhkR1Z0Wlc1MEtEQXNJRnR5YVdkb2RGMHNJSEoxYmtOdmJuUmxlSFFwQ2drSkNYMGdaV3h6WlNCN0Nna0pDUWx5WlhOMWJIUWdQU0IyYjJsa0lEQUtDUWtKZlFvSkNRa0pMeThnVEVWQlN5QkJVMU5KUjA1TlJVNVVJRVpQVWlCSFRFOUNRVXdnUkVWQ1ZVZEhTVTVIUHdvSkNRbHBaaWhoZDJGcGRDQnphRzkxYkdSQ2RXSmliR1ZQZFhRb2NuVnVRMjl1ZEdWNGRDa3BJSHNLQ1FrSkNYSmxkSFZ5YmdvSkNRbDlDZ2tKQ1hKMWJrTnZiblJsZUhRdWJHOWpZV3hFWldOc1lYSmhkR2x2Ym5OYmNuVnVRMjl1ZEdWNGRDNXNiMk5oYkVSbFkyeGhjbUYwYVc5dWN5NXNaVzVuZEdndE1WMWJiR1ZtZEM1dVlXMWxYU0E5SUhKbGMzVnNkQW9KQ1FseWRXNURiMjUwWlhoMExteHZZMkZzVm1GeWFXRmliR1Z6VzJ4bFpuUXVibUZ0WlYwZ1BTQjBlWEJsYjJZZ2NtVnpkV3gwQ2drSkNYSmxkSFZ5YmlCeVpYTjFiSFFLQ1FsOUNnbDlJR1ZzYzJVZ2V3b0pDWFJvY205M0lHNWxkeUJGY25KdmNpZ25RWE56YVdkdWJXVnVkRVY0Y0hKbGMzTnBiMjQ2SUU1dmRDQnBiWEJzWlcxbGJuUmxaQ0VuS1FvSmZRcDlDZ29LWVhONWJtTWdablZ1WTNScGIyNGdjblZ1VFdWdFltVnlLRUZUVkN3Z2NuVnVRMjl1ZEdWNGRDa2dld29nSUdsbUtDRkJVMVF1Y0hKdmNHVnlkSGtwSUhzS0lDQWdJSFJvY205M0lHNWxkeUJGY25KdmNpZ25UV1Z0WW1WeVJYaHdjbVZ6YzJsdmJqb2dUbTkwSUdsdGNHeGxiV1Z1ZEdWa0lTY3BDaUFnZlFvZ0lHeGxkQ0J3Y205d1pYSjBlUW9nSUdsbUtFRlRWQzV3Y205d1pYSjBlUzUwZVhCbElEMDlJQ2RNYVhSbGNtRnNKeWtnZXdvZ0lDQWdjSEp2Y0dWeWRIa2dQU0JCVTFRdWNISnZjR1Z5ZEhrdWRtRnNkV1VLSUNCOUlHVnNjMlVLQ1dsbUtFRlRWQzVqYjIxd2RYUmxaQ2tnZXdvZ0lDQWdjSEp2Y0dWeWRIa2dQU0JoZDJGcGRDQnlkVzVUZEdGMFpXMWxiblFvTUN3Z1cwRlRWQzV3Y205d1pYSjBlVjBzSUhKMWJrTnZiblJsZUhRcENna0phV1lvWVhkaGFYUWdjMmh2ZFd4a1FuVmlZbXhsVDNWMEtISjFia052Ym5SbGVIUXBLU0I3Q2drSkNYSmxkSFZ5YmdvSkNYMEtDWDBnWld4elpTQUtDV2xtS0VGVFZDNXdjbTl3WlhKMGVTNTBlWEJsSUQwOUlDZEpaR1Z1ZEdsbWFXVnlKeWtnZXdvSkNYQnliM0JsY25SNUlEMGdRVk5VTG5CeWIzQmxjblI1TG01aGJXVUtDWDBnWld4elpTQjdDZ2tKWkdWaWRXZG5aWElLSUNBZ0lIUm9jbTkzSUc1bGR5QkZjbkp2Y2lnblRXVnRZbVZ5Ulhod2NtVnpjMmx2YmpvZ1RtOTBJR2x0Y0d4bGJXVnVkR1ZrSVNjcENpQWdmUW9LQ1d4bGRDQndZWEpsYm5RZ1BTQmhkMkZwZENCeWRXNVRkR0YwWlcxbGJuUW9NQ3dnVzBGVFZDNXZZbXBsWTNSZExDQnlkVzVEYjI1MFpYaDBLUW9nSUdsbUtHRjNZV2wwSUhOb2IzVnNaRUoxWW1Kc1pVOTFkQ2h5ZFc1RGIyNTBaWGgwS1NrZ2V3b2dJQ0FnY21WMGRYSnVJQzh2SUdKMVltSnNaU0IxY0FvZ0lIMEtDZ2x5ZFc1RGIyNTBaWGgwTG1KMVltSnNaVTFsYldKbGNpQTlJSEJoY21WdWRBb0pjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVlFjbTl3WlhKMGVTQTlJQ2h5ZFc1RGIyNTBaWGgwTG1KMVltSnNaVkJ5YjNCbGNuUjVJQW9KQ1FrL0lDaHlkVzVEYjI1MFpYaDBMbUoxWW1Kc1pWQnliM0JsY25SNUlDc2dKeTRuS1NBNklDY25LU0FLQ1FrSkt5QkJVMVF1YjJKcVpXTjBMbTVoYldVZ0t5QW5MaWNnS3lCd2NtOXdaWEowZVFvS0lDQnBaaWgwZVhCbGIyWWdjR0Z5Wlc1MElEMDlJQ2R2WW1wbFkzUW5JQ1ltSUhCaGNtVnVkQ0F2THlCQ1ZVYzZJRzUxYkd3c0lIZG9iMjl3Y3dvZ0lDQWdKaVlnZEhsd1pXOW1JSEJoY21WdWRDNWZZV05qWlhOemIzSWdJVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDUWxwWmloMGVYQmxiMllnY0dGeVpXNTBMbDloWTJObGMzTnZjaUFoUFNBblpuVnVZM1JwYjI0bktTQjdDZ2tKQ1dSbFluVm5aMlZ5Q2drSmZRb2dJQ0FnY21WMGRYSnVJR0YzWVdsMElIQmhjbVZ1ZEM1ZllXTmpaWE56YjNJb01Dd2dXMEZUVkYwc0lFRlRWQ3dnY25WdVEyOXVkR1Y0ZENrS0lDQjlDZ29nSUdsbUtDRndZWEpsYm5RZ2ZId2dLQ0Z3WVhKbGJuUXVhR0Z6VDNkdVVISnZjR1Z5ZEhrb2NISnZjR1Z5ZEhrcENpQWdJQ0FtSmlCMGVYQmxiMllnY0dGeVpXNTBXM0J5YjNCbGNuUjVYU0E5UFNBbmRXNWtaV1pwYm1Wa0p5a3BJSHNLQ1Fsa1pXSjFaMmRsY2dvZ0lDQWdkR2h5YjNjZ2JtVjNJRVZ5Y205eUtDZE5aVzFpWlhJZ1lXTmpaWE56SUdWeWNtOXlPaUFuSUNzZ2NISnZjR1Z5ZEhrcENpQWdmU0JsYkhObElIc0tJQ0FnSUhKbGRIVnliaUJ3WVhKbGJuUmJjSEp2Y0dWeWRIbGRDaUFnZlFwOUNnb0snOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2luZGV4LmpzX3RpbWVzdGFtcCddPTE2NTE1OTY0NTQ3MjI7CndpbmRvdy5wcmVGU1snbGlicmFyeS9pbmRleC5qcyddPSdDbTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdld29nSUdSdlkzVnRaVzUwVkdsMGJHVXNDaUFnYm1WM1YybHVaRzkzTEFvZ0lITnNaV1Z3TEFvZ0lHUnZTMlY1UkdsaGJHOW5MQW9nSUdSdlUzbHpkR1Z0VEc5bmFXNHNDZ2xrYjB4cFluSmhjbmxNYjI5cmRYQXNDbjBLJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9pbnRlcmFjdGlvbnMvY29tbWFuZHMuaHRtbF90aW1lc3RhbXAnXT0xNjUxNTQzMTg0OTUxOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvaW50ZXJhY3Rpb25zL2NvbW1hbmRzLmh0bWwnXT0nUENFdExTQndZV2RsSUdsdWFtVmpkR0ZpYkdVZ1kyOXRiV0Z1WkNCaVlYSnpJQzB0UGdvS1BHUnBkaUJwWkQwaVkyOXRiV0Z1WkMxaVlYSWlQZ29nSUR4cGJuQjFkQ0IwZVhCbFBTSmphR1ZqYTJKdmVDSWdhV1E5SW14cGRtVlNaV3h2WVdRaUlHNWhiV1U5SW14cGRtVlNaV3h2WVdRaUlDOCtDaUFnUEd4aFltVnNJR1p2Y2owaWJHbDJaVkpsYkc5aFpDSStJRXhwZG1VOGMzQmhiajQ4TDNOd1lXNCtQQzlzWVdKbGJENEtJQ0E4YVc1d2RYUWdkSGx3WlQwaVkyaGxZMnRpYjNnaUlHbGtQU0pqYjJSbFJtOXNaQ0lnYm1GdFpUMGlZMjlrWlVadmJHUWlJQzgrQ2lBZ1BHeGhZbVZzSUdadmNqMGlZMjlrWlVadmJHUWlQaUJHYjJ4a1BITndZVzQrUEM5emNHRnVQand2YkdGaVpXdytDaUFnUEdsdWNIVjBJSFI1Y0dVOUltTm9aV05yWW05NElpQnBaRDBpYkdsdVpWZHlZWEFpSUc1aGJXVTlJbXhwYm1WWGNtRndJaUJqYUdWamEyVmtQU0pqYUdWamEyVmtJaUF2UGdvZ0lEeHNZV0psYkNCbWIzSTlJbXhwYm1WWGNtRndJajRnVjNKaGNEeHpjR0Z1UGp3dmMzQmhiajQ4TDJ4aFltVnNQZ29nSUR4cGJuQjFkQ0IwZVhCbFBTSmphR1ZqYTJKdmVDSWdhV1E5SW5ONWJtTk1iMk5oYkNJZ2JtRnRaVDBpYzNsdVkweHZZMkZzSWlBdlBnb2dJRHhzWVdKbGJDQm1iM0k5SW5ONWJtTk1iMk5oYkNJK0lGTjVibU04YzNCaGJqNDhMM053WVc0K1BDOXNZV0psYkQ0S0lDQThhVzV3ZFhRZ2RIbHdaVDBpWTJobFkydGliM2dpSUdsa1BTSnpibUZ3VjJsdVpHOTNjeUlnYm1GdFpUMGljMjVoY0ZkcGJtUnZkM01pSUM4K0NpQWdQR3hoWW1Wc0lHWnZjajBpYzI1aGNGZHBibVJ2ZDNNaVBpQlRibUZ3UEhOd1lXNCtQQzl6Y0dGdVBqd3ZiR0ZpWld3K0NpQWdQR2x1Y0hWMElIUjVjR1U5SW1Ob1pXTnJZbTk0SWlCcFpEMGlaR0Z5YTAxdlpHVWlJRzVoYldVOUltUmhjbXROYjJSbElpQmphR1ZqYTJWa1BTSmphR1ZqYTJWa0lpQXZQZ29nSUR4c1lXSmxiQ0JtYjNJOUltUmhjbXROYjJSbElqNGdSR0Z5YXp4emNHRnVQand2YzNCaGJqNDhMMnhoWW1Wc1Bnb0tJQ0E4YkdGaVpXd2dabTl5UFNKbWIyNTBVMmw2WlNJK1BITmxiR1ZqZENCdVlXMWxQU0ptYjI1MFUybDZaU0krQ2lBZ0lDQThiM0IwYVc5dVBqRXlQQzl2Y0hScGIyNCtQRzl3ZEdsdmJqNHhOand2YjNCMGFXOXVQanh2Y0hScGIyNCtNakE4TDI5d2RHbHZiajQ4TDNObGJHVmpkRDRnUm05dWREd3ZiR0ZpWld3K0NpQWdQR3hoWW1Wc0lHWnZjajBpYkdGdVozVmhaMlVpUGp4elpXeGxZM1FnYm1GdFpUMGliR0Z1WjNWaFoyVWlQZ29nSUNBZ1BHOXdkR2x2Ymo1S1V6d3ZiM0IwYVc5dVBqeHZjSFJwYjI0K1F5TThMMjl3ZEdsdmJqNDhiM0IwYVc5dVBsQlpQQzl2Y0hScGIyNCtQQzl6Wld4bFkzUStQQzlzWVdKbGJENEtJQ0E4SVMwdElIUm9aWE5sSUdGeVpTQm1iM0lnZEdobElIQnNkV2RwYmlCMGJ5QmtaWFJsWTNRZ2NHRm5aU0JwYm5SbGNtRmpkR2x2YmlBdExUNEtJQ0E4ZEdWNGRHRnlaV0VnYVdROUluSjFiaTF6WTNKcGNIUWlQand2ZEdWNGRHRnlaV0UrQ2lBZ1BHSjFkSFJ2YmlCcFpEMGljblZ1TFdKMWRIUnZiaUlnWTJ4aGMzTTlJbkoxYmkxaWRYUjBiMjRpUGladVluTndPend2WW5WMGRHOXVQZ29nSUR4aWRYUjBiMjRnYVdROUluSjFiaTFoWTJObGMzTnZjaUlnWTJ4aGMzTTlJbkoxYmkxaFkyTmxjM052Y2lJK0ptNWljM0E3UEM5aWRYUjBiMjQrQ2p3dlpHbDJQZ29LJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9pbnRlcmFjdGlvbnMvZGlhbG9ncy5odG1sX3RpbWVzdGFtcCddPTE2NTE3MzAxNTQ5Njk7CndpbmRvdy5wcmVGU1snbGlicmFyeS9pbnRlcmFjdGlvbnMvZGlhbG9ncy5odG1sJ109J0NqeHpkSGxzWlNCelkyOXdaV1E5SWw5bGJuUmxja3h2WjJsdUlqNEtJQ0FLUEM5emRIbHNaVDRLUEdScGRpQnBaRDBpWDJWdWRHVnlURzluYVc0aVBnb2dJRHhtYjNKdElHRmpkR2x2YmowaWFtRjJZWE5qY21sd2REb2dabUZzYzJVN0lqNEtJQ0FnSUR4b01qNUZiblJsY2lCaElITjVjM1JsYlNCd1lYTnpkMjl5WkM0OEwyZ3lQZ29nSUNBZ1BHbHVjSFYwSUhSNWNHVTlJbkpoWkdsdklpQnBaRDBpY0hKdlptbHNaU0lnTHo0S0lDQWdJRHhzWVdKbGJDQm1iM0k5SW5CeWIyWnBiR1VpUGp3dmJHRmlaV3crQ2lBZ0lDQThhVzV3ZFhRZ2JtRnRaVDBpZFhObGNpSWdkSGx3WlQwaWRHVjRkQ0krQ2lBZ0lDQThiR0ZpWld3Z1ptOXlQU0oxYzJWeUlqNVZjMlZ5Ym1GdFpUd3ZiR0ZpWld3K0NpQWdJQ0E4YVc1d2RYUWdibUZ0WlQwaWNHRnpjeUlnZEhsd1pUMGljR0Z6YzNkdmNtUWlQZ29nSUNBZ1BHeGhZbVZzSUdadmNqMGljR0Z6Y3lJK1VHRnpjM2R2Y21ROEwyeGhZbVZzUGdvZ0lDQWdQR0oxZEhSdmJpQjBlWEJsUFNKemRXSnRhWFFpUGxOaGRtVWdSbTl5WlhabGNqd3ZZblYwZEc5dVBnb2dJRHd2Wm05eWJUNEtQQzlrYVhZK0Nnb0tQSE4wZVd4bElITmpiM0JsWkQwaVgyMXZjbkJvWlhWelMyVjVJajRLQ2p3dmMzUjViR1UrQ2p4a2FYWWdhV1E5SWw5dGIzSndhR1YxYzB0bGVTSStDaUFnUEdScGRqNEtJQ0FnSUR4d1Bnb2dJQ0FnSUNBOGMzQmhiajVFY205d0lHRWdVRVZOSUhCeWFYWmhkR1V2Y0hWaWJHbGpJR3RsZVNCd1lXbHlJR2hsY21VdVBDOXpjR0Z1UGp4aWNpQXZQZ29nSUNBZ0lDQThjM0JoYmo1VWFHbHpJSGRwYkd3Z1pXNWpjbmx3ZENCaGJua2dZMnhwWlc1MExYTjBiM0psWkNCa1lYUmhMRHd2YzNCaGJqNDhZbklnTHo0S0lDQWdJQ0FnUEhOd1lXNCtVMjhnYVhRbmN5QmxlSFJ5WVNCd2NtbDJZWFJsTGp3dmMzQmhiajQ4WW5JZ0x6NEtJQ0FnSUNBZ1BIQnlaVDV2Y0dWdWMzTnNJR2RsYm5KellTQXRaR1Z6TXlBdGIzVjBJSEJ5YVhaaGRHVXVjR1Z0SURJd05EZ0tJQ0FnSUNBZ0lDQnZjR1Z1YzNOc0lISnpZU0F0YVc0Z2NISnBkbUYwWlM1d1pXMGdMVzkxZEdadmNtMGdVRVZOSUMxd2RXSnZkWFFnTFc5MWRDQndkV0pzYVdNdWNHVnRDaUFnSUNBZ0lEd3ZjSEpsUGp4aWNpQXZQZ29nSUNBZ1BDOXdQZ29nSUR3dlptOXliVDRLUEM5a2FYWStDZ29LQ2p4a2FYWWdhV1E5SWw5MGNubEpkRWxFUlNJK0NpQWdQR1p2Y20wZ1lXTjBhVzl1UFNKcVlYWmhjMk55YVhCME9pQm1ZV3h6WlRzaVBnb2dJQ0FnUEdneVBsUnllU0JKZENFOEwyZ3lQZ29nSUNBZ1BHeGhZbVZzUGtOdlpHVTZQQzlzWVdKbGJENEtJQ0FnSUR4MFpYaDBZWEpsWVQ0S0lDQWdJQ0FnYVc1cGRFRmpaU2dwQ2lBZ0lDQWdJR2x1YVhSRmJtZHBibVVvS1FvZ0lDQWdQQzkwWlhoMFlYSmxZVDRLSUNBZ0lEeGlkWFIwYjI0Z2RIbHdaVDBpYzNWaWJXbDBJajVTZFc0OEwySjFkSFJ2Ymo0S0lDQThMMlp2Y20wK0Nqd3ZaR2wyUGdvS0NnbzhaR2wySUdsa1BTSmZkSEo1U1hSUWJIVm5hVzRpUGdvZ0lEeG1iM0p0SUdGamRHbHZiajBpYW1GMllYTmpjbWx3ZERvZ1ptRnNjMlU3SWo0S0lDQWdJRHhvTWo1VWNua2dTWFFoUEM5b01qNEtJQ0FnSUR4c1lXSmxiRDVEYjJSbE9qd3ZiR0ZpWld3K0NpQWdJQ0E4ZEdWNGRHRnlaV0UrQ2lBZ0lDQWdJR1Z0YVhSUWJIVm5hVzRvS1FvZ0lDQWdQQzkwWlhoMFlYSmxZVDRLSUNBZ0lEeGlkWFIwYjI0Z2RIbHdaVDBpYzNWaWJXbDBJajVTZFc0OEwySjFkSFJ2Ymo0S0lDQThMMlp2Y20wK0Nqd3ZaR2wyUGdvS0NnPT0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2ludGVyYWN0aW9ucy9zaWRlYmFyLmh0bWxfdGltZXN0YW1wJ109MTY1MTczMDI5NDM0NTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2ludGVyYWN0aW9ucy9zaWRlYmFyLmh0bWwnXT0nUEd4cGJtc2djbVZzUFNKemRIbHNaWE5vWldWMElpQm9jbVZtUFNKcGJtUmxlQzVqYzNNaVBnb0tQR1JwZGlCcFpEMGlabWxzWlMxc2FYTjBJajRLSUNBOGIydytDaUFnSUNBS0lDQThMMjlzUGdvOEwyUnBkajRLQ2dvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvaXNvLmpzX3RpbWVzdGFtcCddPTE2NTE3MTI2MzQ4MDI7CndpbmRvdy5wcmVGU1snbGlicmFyeS9pc28uanMnXT0nTHlvS0NrZFNRVUlnU1U1VFZGSlZRMVJKVDA1VElFWlNUMDBnVFVGT1dTQlRUMVZTUTBWVExpQlZVMFZFSUVOQlRFVk9SRUZTSUVKRlJrOVNSU3dLVTBoRlJWUlRMQ0JIU1ZRc0lBcFZVMFZPUlZRZ1YwOVZURVFnUWtVZ1NVNVVSVkpGVTFSSlRrY2dRa1ZEUVZWVFJTQkpWQ2RUSUVGTVVrVkJSRmtnVUZKUFVFOUhRVlJGUkN3S1NsVlRWQ0JPUlVWRUlGUlBJRk5GUVZKRFNDQkdUMUlnVkVoRklGSkpSMGhVSUVoQlUwaEZVeTRnVFVGWlFrVWdWMFVnUTBGT0lFVllVRXhQU1ZRS1EwOU1URWxUU1U5T1V5QkdUMUlnVkVoSlV5QlFWVkpRVDFORlB3b0tRMDlPVkZKUFRFeEZVaUJHVDFJZ1JsSlBUbFF0UlU1RUlGSkZVVlZGVTFRZ1NVNUtSVU5VU1U5T0lFeEpTMFVnZFVKc2IyTnJJRTl5YVdkcGJpNEtDbFJQVDB4VElFWlBVaUJOUVV0SlRrY2dWRWhGSUZkSVQweEZJRkJCUTB0QlIwVWdTVk5QVFU5U1VFaEpRd29LS2k4S0NteGxkQ0JCUTBVZ1BTQjdDZ2xqYjI1emIyeGxUR2x1WlhNNklEQXNDZ2x3YkdGNVEyOTFiblE2SURBc0NnbHdiR0Y1UW5WMGRHOXVjem9nVzEwc0NnbGtiM2R1Ykc5aFpHVmtPaUJtWVd4elpTd0tDV1pwYkdWdVlXMWxPaUJtWVd4elpTd0tDZ2t2THlCVVQwUlBPaUJHUlVGVVZWSkZJRXhKUzBVZ1ZrbFRWVUZNSUZOVVZVUkpUeUJYU1ZSSUlGUklSU0JJU1VSRVJVNGdTVTFRVDFKVVV5QkpUZ29KTHk4Z0lDQlFVazlLUlVOVUlGTkZWRlJKVGtkVExDQkpJRlJJU1U1TElFVkRURWxRVTBVdlNrRldRU0JFVDBWVElGUklTVk1nVkU5UExncDlDZ292THlCSklFUlBUaWRVSUV0T1QxY2dWMGhaSUVrZ1ZFaEpUa3NnVkVoSlV5QlRWRlZHUmlCSlV5QkRUMDlNTENBS0x5OGdRbGtnVUZWVVZFbE9SeUJCUTBVZ1NVNVVUeUJVU0VVZ1RFbENVa0ZTV1N3Z1NTQlhTVXhNSUVKRklFRkNURVVnVkU4S0x5OGdTVTVLUlVOVUlFRWdUazlVUlZCQlJDQlBUbFJQSUVGT1dTQlhSVUpRUVVkRkxDQkpJRlJJU1U1TElFbE9WRVZTVGtWVUlFRk9UazlVUVZSSlQwNVRJRU5QVlV4RUlFSkZJRVpWVGdvdkx5QWdJRXhKUzBVZ1UwOU5SU0JUVDFKVUlFOUdJRkJWUWt4SlF5QkNTVXhNUWs5QlVrUWdSazlTSUVFZ1EwOU5VRUZPV1NCQlRrUWdWRWhGVGlCQlRsbFBUa1VnUTBGT0lFTlBUVVVLTHk4Z0lDQkJUa1FnUTA5TlRVVk9WQ0JQVGlCSlZDd2dSVWxVU0VWU0lFbE9JREpFSUVGVElFRWdVa1ZXU1VWWElGUlBUMHdzSUU5U0lFbE9JRE5FSUVGVElFRWdVMUJGUTFSQlZFOVNMZ3BtZFc1amRHbHZiaUJwYm1sMFFXTmxLR1ZrYVhSdmNrbGtLU0I3Q2drdkx5QlVUMFJQT2lCdmJpQnVZWFJwZG1VZ2MzbHpYMjl3Wlc0Z2FXNWtaWGd1YUhSdGJDQmhibVFnZFhObElHVnVaMmx1WlNCaGN5QndjbTk0ZVN3Z1kyVmljMjlqYTJWMENnbGhZMlV1WldScGRDaGxaR2wwYjNKSlpDa0tDV0ZqWlM1elpYUkdiMjUwVTJsNlpTZ3hOaWtLQ1dGalpTNXpaWFJVYUdWdFpTZ25ZV05sTDNSb1pXMWxMMjF2Ym05cllXa25LUW9KWVdObExuTmxkRTl3ZEdsdmJpZ25iV2x1VEdsdVpYTW5MQ0F4TURBd0tRb0pZV05sTG5ObGRFOXdkR2x2YmlnblptOXNaRk4wZVd4bEp5d2dKMjFoY210aVpXZHBibVZ1WkNjcENnbGhZMlV1YzJWMFQzQjBhVzl1S0NkbVlXUmxSbTlzWkZkcFpHZGxkSE1uTENCMGNuVmxLUW9KWVdObExuTmxkRTl3ZEdsdmJpZ25jMk55YjJ4c1VHRnpkRVZ1WkNjc0lEQXVOakU0S1NBdkx5QkdUMUlnVkVWU1Vsa2hJU0VLQ1dGalpTNXpaWFJQY0hScGIyNG9KM2R5WVhBbkxDQTFNQ2tLQ1dGalpTNXpaWFJQY0hScGIyNG9KM0J5YVc1MFRXRnlaMmx1UTI5c2RXMXVKeXdnTlRBcENna3ZMMkZqWlM1elpYUlBjSFJwYjI0b0ozTndiR2wwSnl3Z0oySmxiRzkzSnlrS0NXRmpaUzV6WlhSUGNIUnBiMjRvSjJsdVpHVnVkR1ZrVTI5bWRGZHlZWEFuTENCbVlXeHpaU2tLQ1dGalpTNXpaWE56YVc5dUxuTmxkRlJoWWxOcGVtVW9NaWtLQ1dGalpTNXpaWE56YVc5dUxuTmxkRTF2WkdVb0oyRmpaUzl0YjJSbEwycGhkbUZ6WTNKcGNIUW5LUW9KWVdObExuTmxjM05wYjI0dWMyVjBWWE5sVjI5eWEyVnlLR1poYkhObEtRb0pMeThnWVdSa0lIQnNZWGtnWW5WMGRHOXVjeUIwYnlCcGJtUnBkbWxrZFdGc0lHWjFibU4wYVc5dUlHSnNiMk5yY3lCbWIzSWdaV0Z6WlNCdlppQjFjMlVLQ1dGalpTNXZiaWduWm05amRYTW5MQ0JtZFc1amRHbHZiaUFvS1NCN0lFbE9VRlZVTG1Wa2FYUnZja0ZqZEdsMlpTQTlJSFJ5ZFdVZ2ZTa0tDV0ZqWlM1dmJpZ25ZbXgxY2ljc0lHWjFibU4wYVc5dUlDZ3BJSHNnU1U1UVZWUXVaV1JwZEc5eVFXTjBhWFpsSUQwZ1ptRnNjMlVnZlNrS0NuMEtDZ292S2dwbWRXNWpkR2x2YmlCemFHOTNRMjl1YzI5c1pTaGpiMjV6YjJ4bExDQnNZWE4wVEdsdVpTa2dld29KYkdWMElHNWxkMHhwYm1WeklEMGdZMjl1YzI5c1pTNXlaWEJzWVdObEtDOWNjeW9rTHl3Z0p5Y3BJQzh2SUc5dWJIa2dkSEoxYm1OaGRHbHVaeUJsYm1RZ2JHbHJaU0JEYUhKdmJXVUtDUWtKQ1FrSkNRa0pDUWtKQ1FrSkNRa0pDUWtKQ1M4dklITmxaU3dnU1NCa2J5Qm9ZWFpsSUhOdmJXVWdibWxqWlNCMGFHbHVaM01nZEc4Z2MyRjVDZ2xwWmlnaFFVTkZMbU52Ym5OdmJHVlhhV1JuWlhRcElIc0tDUWxCUTBVdVkyOXVjMjlzWlZkcFpHZGxkQ0E5SUdOeVpXRjBaVXhwYm1WWGFXUm5aWFFvYm1WM1RHbHVaWE1nS3lBblhHNG5MQ0JzWVhOMFRHbHVaU2tLQ1FsaFkyVXVaMlYwVTJWemMybHZiaWdwTG5kcFpHZGxkRTFoYm1GblpYSXVZV1JrVEdsdVpWZHBaR2RsZENoQlEwVXVZMjl1YzI5c1pWZHBaR2RsZENrS0NRbEJRMFV1WTI5dWMyOXNaVmRwWkdkbGRDNWxiQzVqYUdsc1pISmxibHN3WFM1cFpDQTlJQ2RqYjI1emIyeGxKd29KQ1VGRFJTNWpiMjV6YjJ4bFYybGtaMlYwTG1Wa2FYUnZjaUE5SUdsdWFYUkJZMlVvSjJOdmJuTnZiR1VuS1FvSmZRcDlDZ3BtZFc1amRHbHZiaUJ2YmxCaGRYTmxaQ2h5WlhGMVpYTjBLU0I3Q2dsa2IyTjFiV1Z1ZEM1aWIyUjVMbU5zWVhOelRHbHpkQzV5WlcxdmRtVW9KM04wWVhKMGFXNW5KeWtLQ1dSdlkzVnRaVzUwTG1KdlpIa3VZMnhoYzNOTWFYTjBMbUZrWkNnbmNHRjFjMlZrSnlrS0NXbG1LQ0ZCUTBVdWNHRjFjMlZrVjJsa1oyVjBLU0I3Q2drSlFVTkZMbkJoZFhObFpGZHBaR2RsZENBOUlHTnlaV0YwWlV4cGJtVlhhV1JuWlhRb0oxQkJWVk5GUkNjc0lFRkRSUzV3Y21WMmFXOTFjMDV2Ymt4cFluSmhjbmtzSUNkdGIzSndhRjl3WVhWelpTY3BDZ2tKWVdObExtZGxkRk5sYzNOcGIyNG9LUzUzYVdSblpYUk5ZVzVoWjJWeUxtRmtaRXhwYm1WWGFXUm5aWFFvUVVORkxuQmhkWE5sWkZkcFpHZGxkQ2tLQ1gwZ1pXeHpaU0I3Q2drSlFVTkZMbkJoZFhObFpGZHBaR2RsZEM1eWIzY2dQU0JCUTBVdWNISmxkbWx2ZFhOT2IyNU1hV0p5WVhKNUNna0pMeTloWTJVdVoyVjBVMlZ6YzJsdmJpZ3BMbmRwWkdkbGRFMWhibUZuWlhJdVlXUmtUR2x1WlZkcFpHZGxkQ2hCUTBVdWNHRjFjMlZrVjJsa1oyVjBLUW9KZlFvSkx5OGdaR1ZpYjNWdVkyVUtDWE5sZEZScGJXVnZkWFFvWm5WdVkzUnBiMjRnS0NrZ2V3b0pDV1J2WTNWdFpXNTBMbUp2WkhrdVkyeGhjM05NYVhOMExuSmxiVzkyWlNnbmNuVnVibWx1WnljcENnbDlMQ0F4TURBd0tRcDlDZ29LWm5WdVkzUnBiMjRnWkc5U1pYTjFiSFFvY21WeGRXVnpkQ2tnZXdvSmFXWWdLQ0ZoWTJVdWMyVnpjMmx2YmlCOGZDQWhZV05sTG5ObGMzTnBiMjR1YkdsdVpWZHBaR2RsZEhNcElIc0tDUWx5WlhSMWNtNEtDWDBLQ2drdkx5QlVUMFJQT2lCa2FYTndiR0Y1SUhOdmJXVWdabUZ1WTNrZ2NtVndiM0owUHdvSlpHOWpkVzFsYm5RdVltOWtlUzVqYkdGemMweHBjM1F1Y21WdGIzWmxLQ2R5ZFc1dWFXNW5KeWtLQ1dSdlkzVnRaVzUwTG1KdlpIa3VZMnhoYzNOTWFYTjBMbUZrWkNnbmMzUnZjSEJsWkNjcENuMEtDZ29LWm5WdVkzUnBiMjRnYzJodmQwVnljbTl5S0hKbGNYVmxjM1FwSUhzS0NnbHBaaWh5WlhGMVpYTjBMbVZ5Y205eUxtbHVZMngxWkdWektDZE9ieUJ6WTNKcGNIUW5LU2tnZXdvSkNXUnZZM1Z0Wlc1MExtSnZaSGt1WTJ4aGMzTk1hWE4wTG5KbGJXOTJaU2duY25WdWJtNXBibWNuS1FvSkNXUnZZM1Z0Wlc1MExtSnZaSGt1WTJ4aGMzTk1hWE4wTG5KbGJXOTJaU2duYzNSaGNuUnBibWNuS1FvSkNXUnZZM1Z0Wlc1MExtSnZaSGt1WTJ4aGMzTk1hWE4wTG5KbGJXOTJaU2duWlhKeWIzSW5LUW9KQ1hKbGRIVnliZ29KZlFvS0NXUnZZM1Z0Wlc1MExtSnZaSGt1WTJ4aGMzTk1hWE4wTG5KbGJXOTJaU2duY25WdWJtbHVaeWNwQ2dsa2IyTjFiV1Z1ZEM1aWIyUjVMbU5zWVhOelRHbHpkQzVoWkdRb0ozTjBiM0J3WldRbktRb0pMeThnVTBWQlVrTklJRWRKVkVoVlFqb2daMlYwUld4bGJXVnVkSE5DZVVOc1lYTnpUbUZ0WlNnbkxnb0pMeThnSUNCWFNFRlVJRWxHSUUxWklFSlBWQ0JEVDFWTVJDQkVSVUpWUnlCUFZFaEZVaUJRUlU5UVRFVW5VeUJEVDBSRkNna3ZMeUFnSUZkSVNVeEZJRlJJUlZrZ1FWSkZJRk5NUlVWUUlFeEpTMFVnVkVoRklGTkJUa1JOUVU0L0NnbHBaaUFvSVdGalpTNXpaWE56YVc5dUtTQjdDZ2tKY21WMGRYSnVDZ2w5Q2dscFppZ2hZV05sTG5ObGMzTnBiMjR1YkdsdVpWZHBaR2RsZEhNcElIc0tDUWxwYm1sMFRHbHVaVmRwWkdkbGRITW9LUW9KZlFvSmJHVjBJRzVsZDB4cGJtVnpJRDBnY21WeGRXVnpkQzVsY25KdmNpNXlaWEJzWVdObEtDOWNjeW9rTHl3Z0p5Y3BDZ2t2THlCelkzSnZiR3dnZEc4Z2RHaGxJR3hwYm1VZ2QyaGxiaUJoYmlCbGNuSnZjaUJ2WTJOMWNuTUtDV2xtS0dGalpTNW5iM1J2VEdsdVpTa2dld29KQ1hObGRGUnBiV1Z2ZFhRb1lXTmxMbWR2ZEc5TWFXNWxMbUpwYm1Rb1lXTmxMQ0J5WlhGMVpYTjBMbXhwYm1VcExDQXhNREFwQ2dsOUNna3ZMeUJwWmlCbGNuSnZjaUJvWVhNZ1lTQnNhVzVsSUc1MWJXSmxjaXdnYVc1elpYSjBJRzFsYzNOaFoyVWdZbVZzYjNjZ2RHaGhkQ0JzYVc1bENnbHBaaWdoUVVORkxtVnljbTl5VjJsa1oyVjBLU0I3Q2drSlFVTkZMbVZ5Y205eVYybGtaMlYwSUQwZ1kzSmxZWFJsVEdsdVpWZHBaR2RsZENodVpYZE1hVzVsY3l3Z2NtVnhkV1Z6ZEM1c2FXNWxMQ0FuYlc5eWNHaGZaWEp5YjNJbktRb0pDV0ZqWlM1blpYUlRaWE56YVc5dUtDa3VkMmxrWjJWMFRXRnVZV2RsY2k1aFpHUk1hVzVsVjJsa1oyVjBLRUZEUlM1bGNuSnZjbGRwWkdkbGRDa0tDWDBnWld4elpTQjdDZ2tKUVVORkxtVnljbTl5VjJsa1oyVjBMbVZzTG1Ob2FXeGtjbVZ1V3pCZExtbHVibVZ5VkdWNGRDQTlJRzVsZDB4cGJtVnpDZ2w5Q2dsQlEwVXVaWEp5YjNKWGFXUm5aWFF1YzNSaFkyc2dQU0J5WlhGMVpYTjBMbk4wWVdOckNncDlDZ292THlCVVQwUlBPaUJKVGtwRlExUWdRMHRGUkVsVVQxSWdTVTVUVkVWQlJBb3FMd29LYVdZb2RIbHdaVzltSUcxdlpIVnNaU0FoUFNBbmRXNWtaV1pwYm1Wa0p5a2dld29KYlc5a2RXeGxMbVY0Y0c5eWRITWdQU0I3Q2drSlFVTkZDZ2w5Q24wZ1pXeHpaU0JwWmlBb2RIbHdaVzltSUhkcGJtUnZkeUFoUFNBbmRXNWtaV1pwYm1Wa0p5a2dld29KZDJsdVpHOTNMa0ZEUlNBOUlFRkRSUXA5Q2dvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkva2lyYnkuanNfdGltZXN0YW1wJ109MTY1MTUwNjU0NzYxMjsKd2luZG93LnByZUZTWydsaWJyYXJ5L2tpcmJ5LmpzJ109J0x5OGdTRVZCUkNCSlRpQlVTRVVnUTB4UFZVUlRDaTh2SUVGUVNTQkRUMFJGSUVaUFVpQkRUMDVPUlVOVVNVNUhJRlJQSUVGTVRDQk5RVXBQVWlCRFRFOVZSQ0JUUlZKV1NVTkZVd29LTHk4Z1ZFaEZUaUJYVWtsVVJTQlVTRVVnUVZWVVQwMUJWRWxQVGlCVFExSkpVRlFnVkU4Z1JFOGdWRWhGSUZOQlRVVWdWRWhKVGtjZ1ZFaEZJRUZRU1NCRVQwVlRMZ29LTHk4Z1ZFaEpVeUJKVXlCRFQwOU1JRUpGUTBGVlUwVWdWRWhGSUZCTVZVZEpUaUJEUVU0Z1FWTlRTVk5VSUVGT1JDQk5RVXRGSUVFZ1EwOU9Ua1ZEVkVsUFRpd2dDaTh2SUNBZ1ZFaEZUaUJWVUV4UFFVUWdWMGhCVkVWV1JWSWdVRUZTVkZNZ1QwWWdUVTlTVUVoRlZWTWdTVk1nVGtWRlJFVkVJRVpQVWlCVVNFRlVJRlJCVTBzdUNnb3ZMeUJVVDBSUE9pQlNWVTRnUVNCTVNVSlNRVkpaSUZORFVrbFFWQ0JKVGlCVVNFVWdRMHhQVlVRc0lGQlZWQ0JKVkNCVVNFVlNSU0JWVTBsT1J5Qk5UMFJGVWs0Z1Ewa0tDaTh2SUV4UFRDd2dVRUZEVFVGT0lIQnNZWGtnYjI0Z2NHRmphMkZuWlNCdFlXNWhaMlZ5TENCaWRYUWdZV04wZFdGc2JIa2diRzl2YTNNZ2JHbHJaU0J3WVdOdFlXNGdZWE1LTHk4Z0lDQnBkQ2R6SUdsdWMzUmhiR3hwYm1jc0lIbHZkU0JqWVc0Z2NHeGhlU0J3WVdNdGJXRnVDZ29LTHk4Z1ZFOUVUem9nWlcxcGRDQjBieUJuYVhSb2FXSUtDZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL2Jvb2ttYXJrcy5odG1sX3RpbWVzdGFtcCddPTE2NTA5MDQyODE2OTE7CndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL2Jvb2ttYXJrcy5odG1sJ109Jyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy9jb25zdWx0aW5nLmh0bWxfdGltZXN0YW1wJ109MTY1MDkwNDI5MDgyNTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvY29uc3VsdGluZy5odG1sJ109Jyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy9jb29rb29jbG9jay5odG1sX3RpbWVzdGFtcCddPTE2NTA5OTYwNjE5MTY7CndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL2Nvb2tvb2Nsb2NrLmh0bWwnXT0nUENFdExTQmthWE4wY21saWRYUmhZbXhsSUhSaGMyc2diV0Z1WVdkbGJXVnVkQ0JoY0hBZ1ptOXlJSEJsYjNCc1pTQjBhR0YwSUd4cGEyVWdkR2hoZENCemRIVm1aaUF0TFQ0PSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy9nYXplbGxlLmh0bWxfdGltZXN0YW1wJ109MTY1MTAxNzgyODMxMzsKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvZ2F6ZWxsZS5odG1sJ109J1BDRXRMU0J5WlhacGRtVWdkSFZ1WlNCbllYcGxiR3hsTENCMWMyVmtJSGx2ZFhSMVltVWdabTl5SUcxMWMybGpJQW9nSUNBZ1ptOXlJSGxsWVhKekxDQnZibXg1SUhCaGFXUWdabTl5SUhacFpHVnZJR1Z1ZEdWeWRHRnBibTFsYm5Rc0lBb2dJQ0FnYzNScGJHd2djblZ1SUdsdWRHOGdjMlZzWmkxeWFXZG9kR1Z2ZFhNZ1luVnNiSE5vYVhRc0lHNXZJSEpsYkdWaGMyVWdDaUFnSUNCcGJpQnZkR2hsY2lCamIzVnVkSEpwWlhNdUlHTnZkV3hrYmlkMElIQjFjbU5vWVhObElHbDBJR3hsWjJGc2JIa2dDaUFnSUNCcFppQnBJSFJ5YVdWa0lHSmxZMkYxYzJVZ1pXeHBkR2x6ZEhNZ2FHRjBaU0IzYUdWeVpTQnBJR052YldVZ1puSnZiUzRLSUNBZ0lHa2dkSEpwWldRZ2RHOGdjR3hoZVNCdWFXTmxMaUF0TFQ0PSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy9oeWRlLmh0bWxfdGltZXN0YW1wJ109MTY1MTAwOTM3OTA2NjsKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvaHlkZS5odG1sJ109J1BDRXRMU0J1YjNkeklIUm9aU0IwYVcxbElIUnZJSEYxYVc1bExDQUtJQ0JrYVhOd2JHRjVJR0YyWVdsc1lXSnNaU0JpZFdsc1pDQnplWE4wWlcxeklHbHVJR0VnQ2lBZ0lDQmliR0ZqYXk5M2FHbDBaU0JzYjJGa2FXNW5JSEJ5YjJkeVlXMGdMUzArQ2dvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy9pZGUuaHRtbF90aW1lc3RhbXAnXT0xNjUxNTQzMDYwMTEwOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy9pZGUuaHRtbCddPSdQQ0V0TFNCd2NtOTJaU0IwYUdVZ2MzbHpkR1Z0SUhkdmNtdHpJR0o1SUdOeVpXRjBaU0J3WVdkbElDMHRQZ29LUEdScGRpQnBaRDBpWldScGRHOXlJajRLTHk4Z1lXWjBaWElnYVc1emRHRnNiR2x1WnlCMGFHVWdjR3gxWjJsdUxDQkVaWFpVYjI5c2N5QmpZVzRnYzNSaGNuUUtMeThnYVc1emRISjFZM1JwYjI1ek9pQUtMeThnYUhSMGNITTZMeTlrWlhabGJHOXdaWEl1WTJoeWIyMWxMbU52YlM5a2IyTnpMMlY0ZEdWdWMybHZibk12YlhZekwyZGxkSE4wWVhKMFpXUXZJM1Z1Y0dGamEyVmtDbVoxYm1OMGFXOXVJR055WldGMFpWZHBibVJ2ZHlncElIc0tJQ0JzWlhRZ2RHbDBiR1VnUFNCa2IyTjFiV1Z1ZEZScGRHeGxLQ2tLSUNCamIyNXpiMnhsTG14dlp5aDBhWFJzWlNrS0lDQnNaWFFnYm1WM1YybHVJRDBnYm1WM1YybHVaRzkzS0NrS0lDQXZMeUJ6YUc5MWJHUWdibTkzSUdoaGRtVWdZU0IzYVc1a2IzY2diMjRnZEdobElISnBaMmgwSUMwK0NpQWdibUYyYVdkaGRHVlVieWduYUhSMGNITTZMeTlqYjI1emIyeGxMbU5zYjNWa0xtZHZiMmRzWlM1amIyMHZKeWtLSUNCc1pYUWdhRzl6ZENBOUlHNWxkMWRwYmk1c2IyTmhkR2x2Ymk1b2IzTjBDaUFnYVdZb2FHOXpkQzVwYm1Oc2RXUmxjeWduWVdOamIzVnVkSE11WjI5dloyeGxMbU52YlNjcEtTQjdDaUFnSUNCbGJuUmxja3h2WjJsdUtDa0tJQ0I5Q2lBZ2MyTnlaV1Z1YzJodmRDZ3BDbjBLQ2k4dklFQkNaV1p2Y21Vb1gyMWhhMlZNYVdKeVlYSjVRV05qWlhOemIzSXBDbVoxYm1OMGFXOXVJRzFoYVc0b0tTQjdDaUFnWTNKbFlYUmxWMmx1Wkc5M0tDa0tmUW9LTHk4Z1ZFOUVUem9nQ2k4dklHVnVkR1Z5VUdGemMzZHZjbVFvZFhKc0tRb3ZMeUJ0WlhSaFUyVmhjbU5vS0hSbGNtMXpLUW92THlCdGIzSndhR1YxYzB4aFlpZ3BDZ29LUEM5a2FYWStDZz09JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL2ludGVudC5odG1sX3RpbWVzdGFtcCddPTE2NTE1NDI4OTE5Mjg7CndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL2ludGVudC5odG1sJ109J1BDRXRMU0JzWVc1a2FXNW5JSEJoWjJVZ1ptOXlJR0JwYm5SbGJuUmdJSFJvWlNCc1lXNW5kV0ZuWlNBdExUNEtDbE5wYm1kc1pTQmthWEpsWTNScGRtVWdZSGR2Y21SZ0NsQjFibU4wZFdGMGFXOXVJRzV2Y20xaGJEb2dZR0FnYkdWMlpXNXpkR2xsYmlCelpXRnlZMmdnWm05eUlHeHBZbkpoY25rZ1puVnVZM1JwYjI0S0tDa2dMU0JsZUhSeVlTQnhkV0ZzYVdacFpYSnpDbVV1Wnk0Z0xTQnhkV0ZzYVdacFpYSnpJR3hwYTJVZ2MyVjBJSE5wZW1VZ1pTNW5MaUF4TURBZ2FYUmxiWE1LYVM1bExpQXRJR0ZzZEdWeWJtRjBhWFpsSUdaMWJtTjBhVzl1TENCeVpYTjFiSFJ6SUdaeWIyMGdSRWtnWVdOalpYQjBZV0pzWlFwMGFHVWdjbVZ6ZENCcGN5QmtaWEpwZG1Wa0lHWnliMjBnVGt4UUlHMWhkR05vYVc1bklHRWdiR2xpY21GeWVTQnZaaUJtZFc1amRHbHZibUZzSUc5MWRHTnZiV1Z6Q2dvS0NnPT0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvbG9raS5odG1sX3RpbWVzdGFtcCddPTE2NTEwMDg3MTM0ODk7CndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL2xva2kuaHRtbCddPSdQQ0V0TFNCdGFXNWtJRzFoY0hCcGJtY2dkRzl2YkNCM2FYUm9JRE5FSUMwdFBnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvbHZsd29ybGQuaHRtbF90aW1lc3RhbXAnXT0xNjUxNTU2NTQ5OTYxOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy9sdmx3b3JsZC5odG1sJ109J1BDRXRMU0J0WldGdWRDQjBieUJoWkdRZ2RHaHBjeUJ6YjI5dVpYSWdZblYwSUdkbGRIUnBibWNnYjNKbllXNXBlbVZrSUMwdFBnb0tDanhrYVhZZ2FXUTlJbVpzYVhCd1pYSWlQZ29KUEdScGRpQmpiR0Z6Y3owaVpuSnZiblFpUGdvSkNUd2hMUzBnWm5KdmJuUWdZMjl1ZEdWdWRDQXRMVDRLQ1R3dlpHbDJQZ29KUEdScGRpQmpiR0Z6Y3owaVltRmpheUkrQ2drSlBDRXRMU0JpWVdOcklHTnZiblJsYm5RZ0xTMCtDZ2s4TDJScGRqNEtQQzlrYVhZK0NqeGthWFlnYVdROUlteGxablF0YW05NWMzUnBZMnNpUGp3dlpHbDJQanhrYVhZZ2FXUTlJbkpwWjJoMExXcHZlWE4wYVdOcklqNDhMMlJwZGo0S1BHUnBkaUJwWkQwaWRtbGxkM0J2Y25RdFpuSmhiV1VpUGdvSlBHTmhiblpoY3o0OEwyTmhiblpoY3o0S1BDOWthWFkrQ2c9PSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy9zdHVkeS5odG1sX3RpbWVzdGFtcCddPTE2NTEwMTc5NTI5MzY7CndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL3N0dWR5Lmh0bWwnXT0nUENFdExTQnpjR0ZqWldRZ2NtVndhWFJwZEdsdmJpQnplWE4wWlcwc0lIVnpaU0JpYkc5amF5MWphR0ZwYmlCMGJ5QUtJQ0J6YVdkdUlHRnVjM2RsY25NZ1ptOXlJR2x0Y0c5eWRHbHVaeXdnWW5rZ1lXNTVJRzFsWVc1eklIQnZjM05wWW14bExnb2dJSFJ5ZVNCMGJ5QnRaV0Z6ZFhKbElHaHZkeUIzWld4c0lIQmxiM0JzWlNCaGNtVWdhMjV2ZDJsdVp5QjBhR2x1WjNNdUNpQWdiR2xyWlNCemRHRnlJSFJ5WldzZ2JXVnlhWFJ2WTNKaFkza3VJQzB0UGdvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy90aGVnYW1lLmh0bWxfdGltZXN0YW1wJ109MTY1MTE2MDkyNzYxMjsKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvdGhlZ2FtZS5odG1sJ109Jyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy90aXRoZS5odG1sX3RpbWVzdGFtcCddPTE2NTA5MDQzMjMyMzQ7CndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL3RpdGhlLmh0bWwnXT0nJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL3dheWJhY2suaHRtbF90aW1lc3RhbXAnXT0xNjUxMDI5MTY2ODUxOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy93YXliYWNrLmh0bWwnXT0nJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9sb2dpbi5qc190aW1lc3RhbXAnXT0xNjUwOTAzNTk1NTUyOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbG9naW4uanMnXT0nQ2dvSyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbWlkZGxld2FyZS5qc190aW1lc3RhbXAnXT0xNjUxNzgwNzg3Mjg2Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbWlkZGxld2FyZS5qcyddPSdDZ29LTHk4Z1EwOUVSU0JTUlZaSlJWY3NJRTVQVnlCVVNFVlRSU0JDUlVOUFRVVWdWRWhGSUU5T1RGa2dVa1ZRUlZSQlZFbFdSU0JUVkZWR1JpQkpJRWhCVmtVZ1ZFOEtMeThnSUNCSlRrTk1WVVJGSUVsT0lFVldSVkpaSUVOUFRsUkZXRlFnU1U1VFZFVkJSQ0JQUmlCQklFaFZSMFVnVEVsQ1VrRlNXU0JQUmlCRFQwUkZMZ29LQ2k4dklIUm9hWE1nYVhNZ1ptOXlJSEp2ZFhScGJtVnpJSFJvWVhRZ2FHRjJaU0JqWVd4c0xXSmhZMnR6TENCc2FXdGxJR2h2YjJ0eklHSmhZMnNnYVc1MGJ5QjBhR1VnWVhCd0NpOHZJQ0FnWm5KdmJTQmhJSGRsWWlCbGRtVnVkQ3dnYjI1c2FXNWxJSE4wYjNKbGN5QmtieUIwYUdsekxpQm1iM0lnYzJWeWRtbGpaWE1nZDJsMGFDQmhJR05oYkd4aVlXTnJDaTh2SUNBZ2JHbHJaU0JsYldGcGJDQnRZWEpyWlhScGJtY2diM0lnZW1Gd2FXVnlDZ29LWm5WdVkzUnBiMjRnWVhONWJtTlVjbWxuWjJWeVRXbGtaR3hsZDJGeVpTaHZiazFsYzNOaFoyVXNJSE5sYm1STlpYTnpZV2RsS1NCN0NnbGpiMjV6ZENCRFQwMU5RVTVFWDFSSlRVVlBWVlFnUFNBek1EQXdDZ29KYVdZb2RIbHdaVzltSUdGM1lXbDBTVzUwWlhKMllXd2dQVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDUWxuYkc5aVlXeFVhR2x6TG1GM1lXbDBTVzUwWlhKMllXd2dQU0J6WlhSSmJuUmxjblpoYkNoaGMzbHVZMFp5WVcxbFZISnBaMmRsY2l3Z01UQXdNQzgyTUNrS0NYMEtDZ2t2THlCQ1JVTkJWVk5GSUZSSVNWTWdTVk1nUTBGTVRFVkVJRTFWVEZSSlVFeEZJRlJKVFVWVElFSlZWQ0JKSUZkQlV5QlVVa1ZCVkVsT1J5QlVTRWxUSUV4SlMwVWdVMVJCVkVsRENna3ZMMnhsZENCaGQyRnBkR2x1WjFKbGMzQnZibk5sSUQwZ2UzMEtDV2xtS0hSNWNHVnZaaUJoZDJGcGRHbHVaMUpsYzNCdmJuTmxJRDA5SUNkMWJtUmxabWx1WldRbktTQjdDZ2tKWjJ4dlltRnNWR2hwY3k1aGQyRnBkR2x1WjFKbGMzQnZibk5sUTJGdVkyVnNJRDBnVzEwS0NRbG5iRzlpWVd4VWFHbHpMbUYzWVdsMGFXNW5VbVZ6Y0c5dWMyVlJkV1YxWlNBOUlGdGRDZ2tKWjJ4dlltRnNWR2hwY3k1aGQyRnBkR2x1WjFKbGMzQnZibk5sVkdsdFpYTWdQU0JiWFFvSmZRb0tDV1oxYm1OMGFXOXVJR0YzWVdsMFQzSlVhVzFsYjNWMEtISmxjWFZsYzNRcElIc0tDUWt2THlCaFkyTmxjM01nWVNCamJHbGxiblFnZG1GeWFXRmliR1VnZEdobGVTZDJaU0J6YUdGeVpXUWdabkp2YlNCamIyUmxDZ2tKTHk4Z1ltRnphV01nWTJ4cFpXNTBJSE4wWVhSMWN5QnRaWE56WVdkbENnb0pDUzh2SUc5dWJIa2djbVZ4ZFdWemRDNXpZM0pwY0hRZ1pYaHdaV04wY3lCaElISmxjM0J2Ym5ObENna0pMeThnSUNCeVpYRjFaWE4wTG5OMFlYUjFjeUJ0WlhOellXZGxjeUJoY21VZ2IyNWxJSGRoZVNCemJ5QmtiMjRuZENCblpXNWxjbUYwWlNCaElBb0pDUzh2SUNBZ1kyRnNiR0poWTJzZ2IzSWdZU0J3Y205dGFYTmxJSGRoYVhRS0NRbHBaaWh5WlhGMVpYTjBJQ1ltSUhSNWNHVnZaaUJ5WlhGMVpYTjBMbk5qY21sd2RDQTlQU0FuZFc1a1pXWnBibVZrSnlrZ2V3b0pDUWx5WlhSMWNtNGdVSEp2YldselpTNXlaWE52YkhabEtITmxibVJOWlhOellXZGxLSEpsY1hWbGMzUXBLUW9KQ1gwS0Nna0phV1lvY21WeGRXVnpkQ0FtSmlCMGVYQmxiMllnY21WeGRXVnpkQzV5WlhOd2IyNXpaVWxrSUQwOUlDZDFibVJsWm1sdVpXUW5LU0I3Q2drSkNYSmxjWFZsYzNRdWNtVnpjRzl1YzJWSlpDQTlJR2RsZEZKMWJrbGtLREl3S1FvSkNYMEtDZ2tKTHk4Z1ZFaEpVeUJKVXlCUVZWSkZURmtnUms5U0lGUkZRMGhPU1VOQlRFeFpJRTFCVkVOSVNVNUhJRU5NU1VOTFV5QlBUaUJVU0VVZ1VFRkhSUW9KQ1M4dklDQWdRa0ZEU3lCVlVDQlhTVlJJSUZSSVJTQlNTVWRJVkNCUVVrOURSVk5UTENCVVNFbFRJRWxUSUU1UFZDQkJJRk5GUTFWU1NWUlpJRlJJU1U1SExnb0pDWEpsZEhWeWJpQnVaWGNnVUhKdmJXbHpaU2htZFc1amRHbHZiaUFvY21WemIyeDJaU2tnZXdvSkNRbGhkMkZwZEdsdVoxSmxjM0J2Ym5ObFEyRnVZMlZzTG5CMWMyZ29jbVZ4ZFdWemRDNXlaWE53YjI1elpVbGtLUW9KQ1FsaGQyRnBkR2x1WjFKbGMzQnZibk5sVVhWbGRXVXVjSFZ6YUNoeVpYTnZiSFpsS1FvSkNRbGhkMkZwZEdsdVoxSmxjM0J2Ym5ObFZHbHRaWE11Y0hWemFDaEVZWFJsTG01dmR5Z3BLUW9KQ1FseVpYUjFjbTRnYzJWdVpFMWxjM05oWjJVb2NtVnhkV1Z6ZENrS0NRbDlLUzUwYUdWdUtHOXVUV1Z6YzJGblpTa0tDWDBLQ1M4dklFa2djbUZ1SUdsdWRHOGdZU0IzWldseVpDQmlkV2NnZDJobGNtVWdZM0psWVhScGJtY2dkRzl2SUcxaGJua2dDZ2t2THlBZ0lIUnBiV1Z5Y3lCM1lYTWdZMkYxYzJsdVp5QnpaV2N0Wm1GMWJIUUtDUzh2SUNBZ2FYUWdiV2xuYUhRZ1ltVWdibWxqWlNCMGJ5QmpZWEIwZFhKbElIUm9ZWFFnYUdWeVpTNEtDV1oxYm1OMGFXOXVJR0Z6ZVc1alJuSmhiV1ZVY21sbloyVnlLQ2tnZXdvSkNXbG1LR0YzWVdsMGFXNW5VbVZ6Y0c5dWMyVlVhVzFsY3k1c1pXNW5kR2dnUFQwZ01Da2dld29KQ1FseVpYUjFjbTRLQ1FsOUNna0pkMmhwYkdVb1JHRjBaUzV1YjNjb0tTQXRJR0YzWVdsMGFXNW5VbVZ6Y0c5dWMyVlVhVzFsYzFzd1hTQStJRU5QVFUxQlRrUmZWRWxOUlU5VlZDa2dld29KQ1Fsc1pYUWdjbVZ6YjJ4MlpTQTlJR0YzWVdsMGFXNW5VbVZ6Y0c5dWMyVlJkV1YxWlM1emFHbG1kQ2dwQ2drSkNXRjNZV2wwYVc1blVtVnpjRzl1YzJWVWFXMWxjeTV6YUdsbWRDZ3BDZ2tKQ1d4bGRDQnlaWE53YjI1elpVbGtJRDBnWVhkaGFYUnBibWRTWlhOd2IyNXpaVU5oYm1ObGJDNXphR2xtZENncENna0pDWEpsZEhWeWJpQnlaWE52YkhabEtIc0tDUWtKQ1daaGFXdzZJQ2RTWlhOd2IyNXpaU0IwYVcxbFpDQnZkWFF1Snl3S0NRa0pDWEpsYzNCdmJuTmxTV1E2SUhKbGMzQnZibk5sU1dRS0NRa0pmU2tLQ1FsOUNnbDlDZ29KWm5WdVkzUnBiMjRnWm05eWQyRnlaRkpsYzNCdmJuTmxRbmxKWkNoeVpYTndiMjV6WlNrZ2V3b0pDV3hsZENCeVpYTndiMjV6WlVsdVpHVjRDZ2tKYVdZb2NtVnpjRzl1YzJVZ0ppWWdkSGx3Wlc5bUlISmxjM0J2Ym5ObExuSmxjM0J2Ym5ObFNXUWdJVDBnSjNWdVpHVm1hVzVsWkNjS0NRa0pDU1ltSUNoeVpYTndiMjV6WlVsdVpHVjRJRDBnWVhkaGFYUnBibWRTWlhOd2IyNXpaVU5oYm1ObGJDNXBibVJsZUU5bUtISmxjM0J2Ym5ObExuSmxjM0J2Ym5ObFNXUXBLU0ErSUMweEtTQjdDZ2tKQ1Fsc1pYUWdjbVZ6YjJ4MlpTQTlJR0YzWVdsMGFXNW5VbVZ6Y0c5dWMyVlJkV1YxWlM1emNHeHBZMlVvY21WemNHOXVjMlZKYm1SbGVDd2dNU2xiTUYwS0NRa0pDV0YzWVdsMGFXNW5VbVZ6Y0c5dWMyVlVhVzFsY3k1emNHeHBZMlVvY21WemNHOXVjMlZKYm1SbGVDd2dNU2tLQ1FrSkNXRjNZV2wwYVc1blVtVnpjRzl1YzJWRFlXNWpaV3d1YzNCc2FXTmxLSEpsYzNCdmJuTmxTVzVrWlhnc0lERXBDZ2tKQ1FseVpYUjFjbTRnY21WemIyeDJaU2h5WlhOd2IyNXpaU2tLQ1FsOUlHVnNjMlVnZXdvSkNRbHlaWFIxY200Z2IyNU5aWE56WVdkbEtISmxjM0J2Ym5ObEtRb0pDWDBLQ1gwS0NnbHlaWFIxY200Z2V3b0pDV0YzWVdsMFQzSlVhVzFsYjNWMExBb0pDV1p2Y25kaGNtUlNaWE53YjI1elpVSjVTV1FzQ2dsOUNuMEtDZ29LYVdZb2RIbHdaVzltSUcxdlpIVnNaU0FoUFNBbmRXNWtaV1pwYm1Wa0p5a2dld29KYlc5a2RXeGxMbVY0Y0c5eWRITWdQU0I3Q2drSllYTjVibU5VY21sbloyVnlUV2xrWkd4bGQyRnlaU3dLQ1gwS2ZRbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L29yY2hlc3RyYXRpb24uanNfdGltZXN0YW1wJ109MTY1MTUxNTkyNDM2NTsKd2luZG93LnByZUZTWydsaWJyYXJ5L29yY2hlc3RyYXRpb24uanMnXT0nQ2dvdkx5QkFRV1owWlhJb1gyMWhhMlZYYVc1a2IzZEJZMk5sYzNOdmNpa0tZWE41Ym1NZ1puVnVZM1JwYjI0Z2JtVjNWMmx1Wkc5M0tDa2dld29nSUd4bGRDQjNhVzRnUFNCaGQyRnBkQ0JqYUhKdmJXVXVkMmx1Wkc5M2N5NWpjbVZoZEdVb2V3b2dJQ0FnZFhKc09pQW5hSFIwY0RvdkwzZDNkeTVuYjI5bmJHVXVZMjl0Snl3S0lDQWdJQzh2WVd4M1lYbHpUMjVVYjNBNklIUnlkV1VzQ2lBZ0lDQXZMM1I1Y0dVNklDZHdZVzVsYkNjc0NpQWdmU2tLSUNCemJHVmxjQ2d4S1FvZ0lHeGxkQ0J1WlhkWGFXNGdQU0JQWW1wbFkzUXVZWE56YVdkdUtIZHBiaXdnZXdvZ0lDQWdiVzkyWlZSdk9pQnRZV3RsVFc5MlpWUnZLSGRwYmk1cFpDd2dkMmx1TG5SaFluTXBMQW9nSUNBZ2NtVnphWHBsVkc4NklHMWhhMlZTWlhOcGVtVlVieWgzYVc0dWFXUXNJSGRwYmk1MFlXSnpLU3dLSUNCOUtRb2dJRzVsZDFkcGJpNXRiM1psVkc4b0Nna0pkMmx1Wkc5M0xuTmpjbVZsYmt4bFpuUWdDZ2tKS3lCM2FXNWtiM2N1YjNWMFpYSlhhV1IwYUNBdklESXNJQW9KQ1hkcGJtUnZkeTV6WTNKbFpXNVViM0FwQ2dsdVpYZFhhVzR1Y21WemFYcGxWRzhvQ2drSmQybHVaRzkzTG05MWRHVnlWMmxrZEdnZ0x5QXlMQ0FLQ1FsM2FXNWtiM2N1YjNWMFpYSklaV2xuYUhRcENpQWdjbVYwZFhKdUlHNWxkMWRwYmdwOUNnb0tablZ1WTNScGIyNGdibUYyYVdkaGRHVlVieWgxY213c0lIZGhhWFFwSUhzS0lDQXZMeUJvYVc1MElIUnZJSFJvWlNCamIyNTBaVzUwSUdacGJIUmxjaUIzYUdWeVpTQjNaU0JoY21VZ1oyOXBibWNLQ1c1aGRtbG5ZWFJwYjI1VlVrd2dQU0IxY213S0NYZHBibVJ2ZHk1c2IyTmhkR2x2YmlBOUlIVnliQW9KTHk4Z2QyRnBkQ0JtYjNJZ2JtVjBkMjl5YXlCMGJ5QnpaWFIwYkdVc0lHOXlJR1IxWTJzZ2IzVjBDaUFnYVdZb2RIbHdaVzltSUhkaGFYUWdQVDBnSjNWdVpHVm1hVzVsWkNjZ2ZId2dkMkZwZENBaFBUMGdabUZzYzJVcElIc0tDUWx1WlhSM2IzSnJVMlYwZEd4bFpDZ3BDaUFnZlFwOUNnb3ZMeUJVVDBSUENtWjFibU4wYVc5dUlITmxibVJEYjIxdFlXNWtLQ2tnZXdvSkx5OGdZMjl3ZVNCbWRXNWpkR2x2YmlCaWIyUjVJSFJ2SUZKMWJuUnBiV1V1WlhaaGJIVmhkR1VLZlFvS0NpOHZJRlJQUkU4NklITmhiV1VnWVhNZ2JHRnpkQ0IwYVcxbElHSjFkQ0J1YnlCR1V5QmhZMk5sYzNNc0lIVnpaU0J6WlhOemFXOXVTVVJ6SUhOMGIzSmxaQ0JwYmlCMGFHVWdDaTh2SUNBZ2NHRm5aU2R6SUdOdmJuUmxlSFFnZEc4Z1ptbG5kWEpsSUc5MWRDQjNhR0YwSUhkcGJtUnZkM01nWVhKbElHMWxZVzUwSUhSdklHSmxJR0YxZEc5dFlYUmxaQzRLWVhONWJtTWdablZ1WTNScGIyNGdjbVZqYjNabGNsZHBibVJ2ZDNNb0tTQjdDZ3A5Q2dvS0NpOHZJRlJQUkU4NklIZHlhWFJsSUdFZ1puVnVZM1JwYjI0Z2RHaGhkQ0JwYm1wbFkzUnpJRzkwYUdWeUlHeHBZbkpoY25rZ1puVnVZM1JwYjI1eklHbHVkRzhnZEdobElIQmhaMlVLTHk4Z0lDQjBhR0YwSUhkaGVTQkpJR05oYmlCemJHOTNiSGtnYldsbmNtRjBaU0JoYkd3Z2RHaGxJR1p5YjI1MFpXNWtJR0Z1WkNCaVlXTnJaVzVrSUd4dloybGpJSFJ2SUFvdkx5QWdJR0psSUhObGJHWWdhRzl6ZEdWa0xnb0tDZ3BoYzNsdVl5Qm1kVzVqZEdsdmJpQnpaWFJYYVc1a2IzZENiM1Z1WkhNb2QybHVaRzkzU1dRc0lIUmhZbk1zSUhnc0lIa3NJSGNzSUdncElIc0tDWFJ5ZVNCN0Nna0pMeW9LQ1Fsc1pYUWdkR0Z5WjJWMFZHRmljeUE5SUdGM1lXbDBJR05vY205dFpTNTBZV0p6TG5GMVpYSjVLSHQzYVc1a2IzZEpaRG9nZDJsdVpHOTNTV1I5S1FvSkNXbG1LQ0YwWVhKblpYUlVZV0p6S1NCN0Nna0pDWFJvY205M0lHNWxkeUJGY25KdmNpZ25WMmx1Wkc5M0lHTnNiM05sWkNCdmNpQmtiMlZ6Ymx3bmRDQmxlR2x6ZENjcENna0pmUW9KQ1d4bGRDQjBZWEpuWlhSSlpDQTlJSFJoY21kbGRGUmhZbk5iTUYwdWFXUUtDUWtxTHdvSkNXeGxkQ0IwWVhKblpYUkpaQ0E5SUhSaFluTmJNRjB1YVdRS0NRbHNaWFFnZEdGeVoyVjBjeUE5SUNoaGQyRnBkQ0JqYUhKdmJXVXVaR1ZpZFdkblpYSXVaMlYwVkdGeVoyVjBjeWdwS1FvSkNRa3VabWxzZEdWeUtHWjFibU4wYVc5dUlDaDBLU0I3SUFvSkNRa0pMeThnVkU5RVR6b2dabWw0SUhSb2FYTWdibVZsWkNCbWIzSWdZMmhsWTJzZ2QyaGxiaUJqYjI1MFpYaDBjeUJoY21VZ1ptbDRaV1FLQ1FrSkNYSmxkSFZ5YmlCMGVYQmxiMllnZEM1MFlXSkpaQ0FoUFNBbmRXNWtaV1pwYm1Wa0p5QW1KaUIwTG5SaFlrbGtJRDA5SUhSaGNtZGxkRWxrQ2drSkNYMHBDZ2tKYVdZb2RHRnlaMlYwYzFzd1hTQW1KaUFoZEdGeVoyVjBjMXN3WFM1aGRIUmhZMmhsWkNrZ2V3b0pDUWxoZDJGcGRDQmhkSFJoWTJoRVpXSjFaMmRsY2loMFlYSm5aWFJKWkNrS0NRbDlDZ2tKYVdZb2RIbHdaVzltSUhnZ0lUMGdKM1Z1WkdWbWFXNWxaQ2NnSmlZZ2RIbHdaVzltSUhrZ0lUMGdKM1Z1WkdWbWFXNWxaQ2NwSUhzS0NRa0pZWGRoYVhRZ1kyaHliMjFsTG5kcGJtUnZkM011ZFhCa1lYUmxLSGRwYm1SdmQwbGtMQ0I3Q2drSkNRbHNaV1owT2lCTllYUm9Mbkp2ZFc1a0tIZ3BMQW9KQ1FrSmRHOXdPaUJOWVhSb0xuSnZkVzVrS0hrcExBb0pDUWw5S1FvSkNYMEtDZ2tKYVdZb2RIbHdaVzltSUhjZ0lUMGdKM1Z1WkdWbWFXNWxaQ2NnSmlZZ2RIbHdaVzltSUdnZ0lUMGdKM1Z1WkdWbWFXNWxaQ2NwSUhzS0NRa0pZWGRoYVhRZ1kyaHliMjFsTG5kcGJtUnZkM011ZFhCa1lYUmxLSGRwYm1SdmQwbGtMQ0I3Q2drSkNRbG9aV2xuYUhRNklFMWhkR2d1Y205MWJtUW9hQ2tzQ2drSkNRbDNhV1IwYURvZ1RXRjBhQzV5YjNWdVpDaDNLU3dLQ1FrSmZTa0tDUWw5Q2drSkx5OXNaWFFnY0hKdlkyVnpjMGxrSUQwZ1lYZGhhWFFnWTJoeWIyMWxMbkJ5YjJObGMzTmxjeTVuWlhSUWNtOWpaWE56U1dSR2IzSlVZV0lvZEdGeVoyVjBTV1FwQ2dvSkNYSmxkSFZ5YmlCaGQyRnBkQ0JqYUhKdmJXVXVkMmx1Wkc5M2N5NW5aWFFvZDJsdVpHOTNTV1FwQ2dsOUlHTmhkR05vSUNobEtTQjdDZ2tKWTI5dWMyOXNaUzVzYjJjb1pTa0tDUWwwYUhKdmR5QnVaWGNnUlhKeWIzSW9KMUJ5YjNSdlkyOXNJR1Z5Y205eU9pQnpaWFJYYVc1a2IzZENiM1Z1WkhNb0xpNHVLU2NwQ2dsOUNuMEtDZz09JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9xdWluZS5qc190aW1lc3RhbXAnXT0xNjUxNzgzOTE1OTQxOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvcXVpbmUuanMnXT0nTHk4Z1pXMXBkQ0J6Wld4bUlHbHVJR0VnWTJ4dmRXUXRZMjl0Y0dGMGFXSnNaU0IzWVhrdUNpOHZJRk5GVEVZZ1JWaFVVa0ZEVkU5U0lFeEpTMFVnUWxWVFdVSlBXQW92THlCeGRXbHVaWE1nYUdGMlpTQmhJR3hwWm1VdFpYaHdaV04wWVc1amVTd2dkMlVnYzJodmRXeGtJR0psSUhWd0xXWnliMjUwSUhkcGRHZ2dDaTh2SUNBZ2RHaGxiU0JoWW05MWRDQjBhR0YwSUhOdklIUm9aWGtnWkc5dUozUWdZMjl0WlNCaVlXTnJJSFJ2SUd0cGJHd2dkWE1nYkdsclpTQlNiM2t1Q2dvdkx5QmpiMjUyWlhKMElHMWhhMlZtYVd4bElIUnZJR3AxY0hsMFpYSWdibTkwWldKdmIyc2dabTl5SUhOMGIzSmhaMlVnYVc0Z1kyOXNiR0ZpSUM4Z1pHOTNibXh2WVdRdUNpOHZJQ0FnWkc5bGN5QnFkWEI1ZEdWeUlITjFjSEJ2Y25RZ1pXNWpjbmx3ZEdsdmJqOEtDaTh2SUVOUFJFVWdVa1ZXU1VWWE9pQkpKMVpGSUVOUFRVSkpUa1ZFSUVSRlVFVk9SRVZPUTFrZ1NVNUtSVU5VU1U5T0lFWlNUMDBnVFZrZ1RVRkxSVVpKVEVVS0x5OGdJQ0JYU1ZSSUlFVllVRkpGVTFNZ1UxUlpURVVnVFVsRVJFeEZWMEZTUlZNZ1JrOVNJRVpGUVZSVlVrVWdVMUJGUTBsR1NVTlRMZ29LTHk4Z1ZFaEpVeUJKVXlCTFNVNUVJRTlHSUVaVlRrNVpMQ0JHVDFJZ1EwOUVSU0JTUlZaRlNWY3NJRWtnVkU5UFN5QlVTRWxUSUVOTVNVVk9WQ0JHVlU1RFZFbFBUZ292THlBZ0lFRk9SQ0JOUVV0RklFbFVJRmRQVWtzZ1VrVk5UMVJGVEZrZ1NVNGdRVTVaSUZkSlRrUlBWeUJUVHlCQ1QxUklJRU5NU1VWT1ZDQkJUa1FnVTBOU1NWQlVDaTh2SUNBZ1EwRk9JRU5CVEV3Z1NWUXVJRTFWVEZSSlUwOVZVa05GSUVaVlRrTlVTVTlPVXlCQlV5QkRUMFJGTFV4RlFWWkZVejhnUms5U1EwVWdSRVZRUlU1RVJVNURXU0FLTHk4Z0lDQkpUa3BGUTFSSlQwNGdUMDRnVFU5RVZVeEZVeUJVU0VGVUlFRlNSVTRuVkNCT1JVTkZVMU5CVWtsTVdTQkVSVk5KUjA1RlJDQkdUMUlnUkVrL0NpOHZJRlJQUkU4NklFMUJTMFVnU1ZRZ1RFOVBTeUJNU1V0RklFUlBWMDVNVDBGRUlGSkZVVlZGVTFRZ1EwRk5SU0JHVWs5TklGSkZUVTlVUlN3Z1RrOVVJRU5QVGxSU1Qwd0tMeThnSUNCVVNFbFRJRWxUSUVOUFQwd2dRa1ZEUVZWVFJTQlVTRVZPSUZkSVJVNGdTU0JTVlU0Z1IwVlVJR055WldGMFpVeHBZbkpoY25rb0tTQkpJRU5CVGlCVFJVNUVDaTh2SUNBZ1RFbENVa0ZTV1NCRFQwUkZJRlJQSUVGT1dTQkRURWxGVGxRZ1YwbE9SRTlYSUVaUFVpQkRUMDFOUVU1RVJVVlNTVTVITGdwbWRXNWpkR2x2YmlCbGJXbDBSRzkzYm14dllXUW9abWxzWlU1aGJXVXNJR1pwYkdWRVlYUmhMQ0JqYjI1MFpXNTBWSGx3WlNrZ2V3b0pMeTlwWmloMGVYQmxiMllnWm1sc1pVUmhkR0VnUFQwZ0ozTjBjbWx1WnljcElIc0tDUzh2Q1dacGJHVkVZWFJoSUQwZ1ptbHNaVVJoZEdFdWMzQnNhWFFvSnljcExtMWhjQ2htZFc1amRHbHZiaUFvWXlrZ2V5QnlaWFIxY200Z1l5NWphR0Z5UTI5a1pVRjBLREFwSUgwcENna3ZMMzBLQ1M4dmJHVjBJR1pwYkdVZ1BTQkdVeTUyYVhKMGRXRnNXeWR0YjNKd2FDMXdiSFZuYVc0dVkzSjRKMTB1WTI5dWRHVnVkSE1LQ1dsbUtIUjVjR1Z2WmlCQlEwVWdJVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDUWxCUTBVdVpHOTNibXh2WVdSbFpDQTlJSFJ5ZFdVS0NYMEtDV2xtS0NGbWFXeGxUbUZ0WlNrZ2V3b0pDWEpsZEhWeWJnb0pmUW9KYkdWMElHSnNiMklnUFNCdVpYY2dRbXh2WWloYlptbHNaVVJoZEdGZExDQjdkSGx3WlRvZ1kyOXVkR1Z1ZEZSNWNHVjlLUW9KYkdWMElHVjRjRzl5ZEZWeWJDQTlJRlZTVEM1amNtVmhkR1ZQWW1wbFkzUlZVa3dvWW14dllpazdDZ2xqYjI1emRDQjBaVzF3VEdsdWF5QTlJR1J2WTNWdFpXNTBMbU55WldGMFpVVnNaVzFsYm5Rb0owRW5LVHNLQ1hSbGJYQk1hVzVyTG5OMGVXeGxMbVJwYzNCc1lYa2dQU0FuYm05dVpTYzdDZ2wwWlcxd1RHbHVheTVvY21WbUlEMGdaWGh3YjNKMFZYSnNPd29KZEdWdGNFeHBibXN1YzJWMFFYUjBjbWxpZFhSbEtDZGtiM2R1Ykc5aFpDY3NJR1pwYkdWT1lXMWxLVHNLQ1dSdlkzVnRaVzUwTG1KdlpIa3VZWEJ3Wlc1a1EyaHBiR1FvZEdWdGNFeHBibXNwT3dvSmRHVnRjRXhwYm1zdVkyeHBZMnNvS1RzS0NWVlNUQzV5WlhadmEyVlBZbXBsWTNSVlVrd29aWGh3YjNKMFZYSnNLVHNLQ24wS0Nnb3ZMeUJVVDBSUE9pQk9SVUZTVEZrZ1ZFOGdWRWhGSUZCUFNVNVVJRTlHSUVWTlNWUlVTVTVISUZSUElGUklSU0JEVEU5VlJDd0tMeThnSUNCQlRGTlBJRVZOU1ZRZ1FTQlNSVXhQUVVSRlVpQkZXRlJGVGxOSlQwNGdSRlZTU1U1SElFUkZWa1ZNVDFCTlJVNVVDaTh2SUNBZ2FIUjBjSE02THk5bmFYUm9kV0l1WTI5dEwyRnlhV3QzTDJOb2NtOXRaUzFsZUhSbGJuTnBiMjV6TFhKbGJHOWhaR1Z5TDJKc2IySXZiV0Z6ZEdWeUwySmhZMnRuY205MWJtUXVhbk1LTHk4Z1NVNVRWRUZNVEN3Z1VrVk1UMEZFSUU5VlVpQlBWMDRzSUZWT1NVNVRWRUZNVENCU1JVeFBRVVJGVWdvdkx5QWdJRWxHSUVrZ1JFOGdWRWhKVXlCR1VrOU5JRXhKUWxKQlVsa3ZJRlJJUlU0Z1NWUW5VeUJTUlVOVlVsTkpWa1V1Q2dvS0x5OGdWMDlYSUZSSVNWTWdTVk1nVTA4Z1YwVkpVa1FzSUV4UFQwc2dRVlFnU0U5WElFMUJUbGtnUkVsR1JrVlNSVTVVSUFvdkx5QWdJRmRCV1ZNZ1ZFOGdRMDlOVFZWT1NVTkJWRVVnVkVoRklGTkJUVVVnVTFSVlJrWXNJRVZXUlU0Z1NsVlRWQ0JYU1ZSSVNVNEtMeThnSUNCVVNFVWdRbEpQVjFORlVpNEtDbVoxYm1OMGFXOXVJR1Z0YVhSUWJIVm5hVzRvS1NCN0Nna3ZMeUJOUVV0RklGQk1WVWRKVGdwOUNnb0tMeThnVTBoUFVsUkZVaUJNU1ZOVUlFOUdJRVJGVUVWT1JFVk9RMGxGVXlCVVNFRk9JRVZOVTBOU1NWQlVSVTQvQ21OdmJuTjBJRTFKUkVSTVJWZEJVa1ZmUkVWUVJVNUVSVTVEU1VWVElEMGdXd29KSjJkbGRGSjFia2xrSnl3S0NTZG5aVzVsY21GMFpWSjFia2xrSnl3S0NTZGhjM2x1WTFSeWFXZG5aWEpOYVdSa2JHVjNZWEpsSnl3S0NTZGxibU55ZVhCMFpXUlNaWE53YjI1elpVMXBaR1JzWlhkaGNtVW5MQW9KSjJsdWMzUmhiR3hGYm1OeWVYQjBaV1JCYzNsdVkwMXBaR1JzWlhkaGNtVW5MQXBkQ2dwamIyNXpkQ0JOU1VSRVRFVlhRVkpGWDBaU1QwNVVSVTVFSUQwZ1d3b0pKMjl1Um5KdmJuUmxibVFuTEFvSkoyVnRhWFJFYjNkdWJHOWhaQ2NzQ2drblpHOXRUV1Z6YzJGblpWSmxjM0J2Ym5ObFRXbGtaR3hsZDJGeVpTY3NDbDB1WTI5dVkyRjBLRTFKUkVSTVJWZEJVa1ZmUkVWUVJVNUVSVTVEU1VWVEtRb0tZMjl1YzNRZ1RVbEVSRXhGVjBGU1JWOUNRVU5MUlU1RUlEMGdXd29KSjNkdmNtdGxjazFsYzNOaFoyVlNaWE53YjI1elpVMXBaR1JzWlhkaGNtVW5MQXBkTG1OdmJtTmhkQ2hOU1VSRVRFVlhRVkpGWDBSRlVFVk9SRVZPUTBsRlV5a0tDbU52Ym5OMElFMUpSRVJNUlZkQlVrVmZVa1ZRVENBOUlGc0tDU2R5WlhCc1FXTmpaWE56YjNKTmFXUmtiR1YzWVhKbEp5d0tDU2R5WldGa1VISmxSbE1uTEFvSkoxOWlZWE5sTmpSVWIwRnljbUY1UW5WbVptVnlKeXdLWFFvS0x5OGdhR0YyWlNCMGJ5QmtieUIwYUdseklIUnZJR0oxYVd4a0NtTnZibk4wSUUxSlJFUk1SVmRCVWtWZlEweEpJRDBnV3dvSkoyTnNhVTFwWkdSc1pYZGhjbVVuQ2wwS0Nnb0tMeThnVkU5RVR6b2daWGgwY21Gd2IyeGhkR1VnWTI5dGNHeGxlR2wwZVNCcGJpQjBhR1VnWTJ4cFpXNTBJSE5sYm1ScGJtY2dkR2hsSUdacGNuTjBJSEpsY1hWbGMzUUtMeThnSUNCM2FYUm9iM1YwSUdGdWVTQnpaWE56YVc5dUlHOXlJSEpsYzNCdmJuTmxJR2xrY3lCbGMzUmhZbXhwYzJobFpDQmhibVFnZEdobElITmxjblpsY2lCeVpYUjFjbTVwYm1jS0x5OGdJQ0IwYUdVZ1ptbHljM1FnYzJWemMybHZiaUJwWkNCMGJ5QjFjMlVnWm05eUlHVnVZM0o1Y0hScGIyNEtablZ1WTNScGIyNGdhVzV6ZEdGc2JFVnVZM0o1Y0hSbFpFRnplVzVqVFdsa1pHeGxkMkZ5WlNodmJrMWxjM05oWjJVc0lITmxibVJOWlhOellXZGxLU0I3Q2dvSmJHVjBJSHNLQ1FsbGJtTnllWEIwVW1WemRXeDBjeXdLQ1gwZ1BTQmxibU55ZVhCMFpXUlNaWE53YjI1elpVMXBaR1JzWlhkaGNtVW9aR1ZqY25sd2RGSmxjM0J2Ym5ObFNXWlRaWE56YVc5dUxDQnpaVzVrVFdWemMyRm5aU2tLQ2dsc1pYUWdld29KQ1dGM1lXbDBUM0pVYVcxbGIzVjBMQW9KZlNBOUlHRnplVzVqVkhKcFoyZGxjazFwWkdSc1pYZGhjbVVvYjI1TlpYTnpZV2RsTENCelpXNWtUV1Z6YzJGblpTa0tDZ2xzWlhRZ2V3b0pDV0YzWVdsMFQzSlVhVzFsYjNWME9pQmxibU55ZVhCMFpXUkJkMkZwZEN3S0NRbG1iM0ozWVhKa1VtVnpjRzl1YzJWQ2VVbGtMQW9KZlNBOUlHRnplVzVqVkhKcFoyZGxjazFwWkdSc1pYZGhjbVVvYjI1TlpYTnpZV2RsTENCbGJtTnllWEIwVW1WemRXeDBjeWtLQ2dsc1pYUWdld29KQ1dSbFkzSjVjSFJTWlhOd2IyNXpaU3dLQ1gwZ1BTQmxibU55ZVhCMFpXUlNaWE53YjI1elpVMXBaR1JzWlhkaGNtVW9abTl5ZDJGeVpGSmxjM0J2Ym5ObFFubEpaQ3dnWlc1amNubHdkRkpsYzNWc2RITkpabE5sYzNOcGIyNHBDZ29KWm5WdVkzUnBiMjRnWlc1amNubHdkRkpsYzNWc2RITkpabE5sYzNOcGIyNGdLSEpsY1hWbGMzUXBJSHNLQ1FscFppaHlaWEYxWlhOMExuSmxjM0J2Ym5ObFNXUXBJSHNLQ1FrSmNtVjBkWEp1SUdWdVkzSjVjSFJsWkVGM1lXbDBLSEpsY1hWbGMzUXBDZ2tKZlFvSkNYSmxkSFZ5YmlCaGQyRnBkRTl5VkdsdFpXOTFkQ2h5WlhGMVpYTjBLUW9KZlFvS0NXWjFibU4wYVc5dUlHUmxZM0o1Y0hSU1pYTndiMjV6WlVsbVUyVnpjMmx2YmlBb2NtVnpjRzl1YzJVcElIc0tDUWt2THlCVVQwUlBPaUJuWlc1bGNtRjBaU0JoSUc1bGR5QnpaWE56YVc5dUlHWnZjaUJsZG1WeWVTQnlkVzVKWkQ4S0Nna0pMeThnY0hKbGRtVnVkQ0J5WldOMWNuTnBiMjRLQ1FscFppaHlaWE53YjI1elpTNXlaWE53YjI1elpVbGtJQ1ltSUhKbGMzQnZibk5sTG5SNWNHVWdQVDBnSjJWdVkzSjVjSFJsWkNjcElIc0tDUWtKTHk4Z1EwOUVSU0JTUlZaSlJWYy9JSFZ6YVc1bklHMXBaR1JzWlhkaGNtVWdjR0YwZEdWeWJpQm1iM0lnYkc5bmFXTWdhWE52YkdGMGFXOXVQeUJ6WlhCbGNtRjBhVzl1SUc5bUlHTnZibU5sY201elB5QUtDUWtKTHk4Z1ZFOUVUem9nYm05M0lHTmhiaUJ5WlcxdmRtVWdkR2hsYzJVZ1kyaGxZMnR6SUdaeWIyMGdaVzVqY25sd2RDOWtaV055ZVhCMElIUnZJRzFoYTJVZ2JXOXlaU0JuWlc1bGNtRnNhWHBsWkFvSkNRbHlaWFIxY200Z1pHVmpjbmx3ZEZKbGMzQnZibk5sS0hKbGMzQnZibk5sS1FvSkNYMEtDUWx5WlhSMWNtNGdabTl5ZDJGeVpGSmxjM0J2Ym5ObFFubEpaQ2h5WlhOd2IyNXpaU2tLQ1gwS0NnbHlaWFIxY200Z2V3b0pDV1Z1WTNKNWNIUlNaWE4xYkhSelNXWlRaWE56YVc5dUxBb0pDV1JsWTNKNWNIUlNaWE53YjI1elpVbG1VMlZ6YzJsdmJpd0tDWDBLZlFvS0NpOHZJR2x1YzNSaGJHd2daVzVqY25sd2RHVmtJRzFwWkdSc1pYZGhjbVVnYVc0Z1lXeHNJSFJvWlNCamIyMXRkVzVwWTJGMGFXOXVjd292THlBZ0lIQmhjM05sWkNCMGFISnZkV2RvSUdobGNtVXNJSFJvYVhNZ2FYTWdjMmx0Y0d4NUlIUnZJSEJ5WlhabGJuUWdZVzVrSUhOdWFXWm1lUzhLTHk4Z0lDQnNiMmRuYVc1bklIQnNkV2RwYm5NZ1puSnZiU0J6WVhacGJtY2djMjl0WlNCa1lYUmhJSFJ2SUdScGMyc2dZV05qYVdSbGJuUmhiR3g1TGdvdkx5QjBhR2x6SUdseklHNXZkQ0J0WldGdWRDQjBieUJ6ZEc5d0lHRjFkR2h2Y21sMGFXVnpMZ3BtZFc1amRHbHZiaUJsYm1OeWVYQjBaV1JTWlhOd2IyNXpaVTFwWkdSc1pYZGhjbVVvYjI1TlpYTnpZV2RsTENCelpXNWtUV1Z6YzJGblpTa2dld29LQ1M4dklHRmpZMlZ6YzI5eWN5QnZiaUJoYkd3Z1pXNWtjeUIzYVd4c0lHVjRjR1ZqZENCMGFHVnBjaUJ5WlhOMWJIUnpJSFJ2SUdKbElITjViVzFsZEhKcFkyRnNiSGtLQ1M4dklDQWdhMlY1SUdWdVkzSjVjSFJsWkNCaWVTQmhJSEJ5WldkbGJtVnlZWFJsWkNCelpYTnphVzl1SUdsa0xpQkpiaUIwYUdVZ1kyRnpaU0J2WmlCd2JIVm5hVzRLQ1M4dklDQWdabkp2Ym5RZ1pXNWtMQ0IwYUdVZ1pXNWpjbmx3ZEdsdmJpQm9ZWEJ3Wlc1eklHSmxkSGRsWlc0Z1kyeHBaVzUwSUhCaFoyVWdZVzVrSUdKaFkydGxibVF1Q2dsc1pYUWdYM1JsYlhCdmNtRnllVk5sYzNOcGIyNUZibU55ZVhCMGIzSUtDUzh2SUdOdlpHVWdjbVYyYVdWM0xDQnRZWEpySUhCeWFYWmhkR1VnZG1semRXRnNiSGtnZDJsMGFDQmhiaUJmQ2dsc1pYUWdYMmRsYm1WeVlYUmxVMlZ6YzJsdmJrVnVZM0o1Y0hSdmNpQTlJR1oxYm1OMGFXOXVJQ2h6WlhOektTQjdDZ2tKWDNSbGJYQnZjbUZ5ZVZObGMzTnBiMjVGYm1OeWVYQjBiM0lnUFNCbWRXNWpkR2x2YmlBb1pHRjBZU2tnZXdvSkNRbHlaWFIxY200Z1kzSjVjSFFvYzJWemN5d2daR0YwWVNrS0NRbDlDZ2w5Q2dsc1pYUWdYMmRsYm1WeVlYUmxVbVZ6Y0c5dWMyVkVaV055ZVhCMGIzSWdQU0JtZFc1amRHbHZiaUFvYzJWemN5a2dld29KQ1hKbGRIVnliaUJtZFc1amRHbHZiaUFvWkdGMFlTa2dld29KQ1Fsa1lYUmhMblpoYkhWbElEMGdTbE5QVGk1d1lYSnpaU2hrWldOeWVYQjBLSE5sYzNNc0lHUmhkR0VwS1FvSkNRa3ZMeUJ3Y21WMlpXNTBJSEpsWTNWeWMybHZiZ29KQ1Fsa1lYUmhMblI1Y0dVZ1BUMGdkSGx3Wlc5bUlISmxjM1ZzZEFvSkNRbHlaWFIxY200Z1pHRjBZUW9KQ1gwS0NYMEtDV3hsZENCZmNtVnpjRzl1YzJWRVpXTnllWEIwYjNKeklEMGdlMzBLQ2drdkx5Qm1iM0lnWTI5a1pTQnlaWFpwWlhkekxDQmhiSGRoZVhNZ2RISjVJSFJ2SUdSbFkzSmxZWE5sSUhSb1pTQnVkVzFpWlhJZ2IyWWdjMmx1YTNNdUNnbG1kVzVqZEdsdmJpQmxibU55ZVhCMFVtVnpkV3gwY3loeVpYTndiMjV6WlNrZ2V3b0pDV2xtS0hKbGMzQnZibk5sSUNZbUlISmxjM0J2Ym5ObExuSmxjM1ZzZEFvSkNRa3ZMeUJVVDBSUE9pQjBhR2x6SUhCc1lYbHpJRzl1SUdOc2FXVnVkQ3dnWkc4Z2QyVWdibVZsWkNCdGRXeDBhWEJzWlQ4S0NRa0pMeThnSUNCSkoyUWdkR2hwYm1zZ2JtOTBJSE5wYm1ObElHTnNhV1Z1ZEhNZ0tHSnliM2R6WlhKekxDQnZibXg1SUdGc2JHOTNJR3hwYTJVZ015QmpiMjV1WldOMGFXOXVjeUJoZENCaElIUnBiV1VwQ2drSkNTOHZJSE52SUdWMlpXNGdhV1lnZEdobGVTQmpiM1ZzWkNCaGJHd2djSEp2ZUhrZ2IzVjBMQ0J2Ym14NUlITnZJRzFoYm5rZ1kyOXVkSEp2YkhNZ1kyRnVJSEJ5YjNoNUlHSmhZMnNnYVc0dUNna0pDUWttSmlCMGVYQmxiMllnWDNSbGJYQnZjbUZ5ZVZObGMzTnBiMjVGYm1OeWVYQjBiM0lnSVQwZ0ozVnVaR1ZtYVc1bFpDY3BJSHNLQ1FrSmJHVjBJR1Z1WTNKNWNIUmxaQ0E5SUY5MFpXMXdiM0poY25sVFpYTnphVzl1Ulc1amNubHdkRzl5S0VwVFQwNHVjM1J5YVc1bmFXWjVLSEpsYzNCdmJuTmxMbkpsYzNWc2RDa3BDZ2tKQ1hKbGRIVnliaUJ6Wlc1a1RXVnpjMkZuWlNoN0Nna0pDUWx5WlhOd2IyNXpaVWxrT2lCeVpYTndiMjV6WlM1eVpYTndiMjV6WlVsa0xBb0pDUWtKY21WemRXeDBPaUI3SUhSNWNHVTZJQ2RsYm1OeWVYQjBaV1FuTENCMllXeDFaVG9nWlc1amNubHdkR1ZrSUgwS0NRa0pmU2tLQ1FsOUlHVnNjMlVnZXdvS0NRbDlDZ2tKTHk4Z1ZFOUVUem9nYldGemRHVnlJSEJoYzNOM2IzSmtJR1JsZEdWamRHbHZiZ29KQ1hKbGRIVnliaUJ6Wlc1a1RXVnpjMkZuWlNoeVpYTndiMjV6WlNrS0NYMEtDZ29KWm5WdVkzUnBiMjRnWkdWamNubHdkRkpsYzNCdmJuTmxLSEpsYzNWc2RITXBJSHNLQ1Frdkx5QnpaWE56YVc5dVNXUWdhWE1nYzJWdWRDQmhkQ0JoSUdScFptWmxjbVZ1ZENCMGFXMWxJR1p5YjIwZ2RHaGxJSEpsYzNWc2RITXVDZ2tKTHk4Z2MyVnpjMmx2Ymtsa0lHbHpJSE5sYm5RZ2RHOGdZMnhwWlc1MElHWnZjaUIxYzJVZ1lYTWdkR2hsSUdWdVkzSjVjSFJwYjI0Z2EyVjVMQW9KQ1M4dklDQWdaMlZ1WlhKaGRHVmtJR0o1SUhSb1pTQnpaWEoyWlhJdUlFRWdjR3gxWjJsdUlHTnZkV3hrSUhOdWFXWm1JSFJvWlNCelpYTnphVzl1U1dRS0NRa3ZMeUFnSUdWaGJHbGxjaUJoYm1RZ2RHaGxiaUJrWldOeWVYQjBJSFJvWlNCdVpYaDBJR1p2Y20wZ2NtVnpkV3gwY3k0S0NRa3ZMeUJUU1U1TExDQmxibU55ZVhCMElHWnZjbTBnWkdGMFlTQmthWEpsWTNSc2VTQjBieUJ5WlcxdmRHVWdjR0ZuWlN3Z2IzSWdaR2x5WldOMGJIa2dkRzhnWW1GamEyVnVaQW9KQ1M4dklDQWdhVzRnWTJGelpTQnZaaUJ6ZVhOMFpXMGdjR0Z6YzNkdmNtUWdZMjlzYkdWamRHbHZiaXdnZEdocGN5Qm5kWEpoYm5SbFpYTWdkR2hsSUdSaGRHRWdaMlYwY3lCMGJ5QUtDUWt2THlBZ0lIUm9aU0J5YVdkb2RDQndZV2RsTENCb2IzQmxablZzYkhrZ2QybDBhRzkxZENCaVpXbHVaeUJzYjJkblpXUWdiM0lnYzNSdmJHVnVMaUJUYnlCcGRDQnBjeUJrYjNWaWJIa0tDUWt2THlBZ0lHVnVZM0o1Y0hSbFpDQnZiaUJrYVhOcklHSjVJSFJvWlNCdFlYTjBaWElnY0dGemMzZHZjbVF1SUU5dVkyVWdZU0J3WVhOemQyOXlaQ0JwY3lCbGJuUmxjbVZrTENCeVpYQnNZV05sQ2drSkx5OGdJQ0IwYUdVZ1oyVnVaWEpoZEdsdmJpQm1kVzVqZEdsdmJpQjNhWFJvSUdSdmRXSnNlU0JsYm1OeWVYQjBhVzl1TGdvSkNTOHZJSFJvYVhNZ2FYTWdZU0J5WlhOMWJIUWdkRzhnWTJ4cFpXNTBJR1Z1WkNCaFpuUmxjaUJ6Wlc1a2FXNW5JR0Z1SUdsdWFYUnBZV3dnYzJOeWFYQjBJSEpsY1hWbGMzUUtDUWxmWjJWdVpYSmhkR1ZUWlhOemFXOXVSVzVqY25sd2RHOXlLSEpsYzNWc2RITXVjMlZ6YzJsdmJrbGtLUW9KQ1FsZmNtVnpjRzl1YzJWRVpXTnllWEIwYjNKelczSmxjM1ZzZEhNdWNtVnpjRzl1YzJWSlpGMGdDZ2tKQ1FrSlBTQmZaMlZ1WlhKaGRHVlNaWE53YjI1elpVUmxZM0o1Y0hSdmNpaHlaWE4xYkhSekxuTmxjM05wYjI1SlpDa0tDUWt2THlCVVQwUlBPaUJ0WVhOMFpYSWdjR0Z6YzNkdmNtUWdaR1YwWldOMGFXOXVDZ2tKTHk4Z2FXWW9jbVZ4ZFdWemRDNWhZMk5sYzNOdmNpNXBibU5zZFdSbGN5Z2lYM0JoYzNOM2IzSmtJaWtwQ2drSmFXWW9jbVZ6ZFd4MGN5QW1KaUJ5WlhOMWJIUnpMblI1Y0dVZ0ppWWdjbVZ6ZFd4MGN5NTBlWEJsSUQwOUlDZGxibU55ZVhCMFpXUW5DZ2tKQ1NZbUlIUjVjR1Z2WmlCZmNtVnpjRzl1YzJWRVpXTnllWEIwYjNKelczSmxjM1ZzZEM1eVpYTndiMjV6WlVsa1hTQWhQU0FuZFc1a1pXWnBibVZrSndvSkNTa2dld29KQ1FrdktpQmhkMkZwZENBcUx5QnlaWFIxY200Z2IyNU5aWE56WVdkbEtGOXlaWE53YjI1elpVUmxZM0o1Y0hSdmNuTmJjbVZ6ZFd4MExuSmxjM0J2Ym5ObFNXUmRLSEpsYzNWc2RITXVkbUZzZFdVcEtRb0pDWDBnWld4elpTQjdDZ2tKQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduVkdobGNtVWdZMkZ1SUdKbElHOXViSGtnYjI1bExpY3BDZ2tKZlFvSmZRb0tDZ2x5WlhSMWNtNGdld29KQ1dWdVkzSjVjSFJTWlhOMWJIUnpMQW9KQ1dSbFkzSjVjSFJTWlhOd2IyNXpaU3dLQ1gwS2ZRb0tDaTh2SUhCc2RXZHBiaUJ0WlhOellXZGxJSEpsYzNCdmJuTmxJR052WkdVZ1ptOXlJR1p5YjI1MFpXNWtJSGR2Y210bGNpQmphSEp2YldVZ1pYaDBaVzV6YVc5dUNtWjFibU4wYVc5dUlHWnliMjUwWlc1a1RXVnpjMkZuWlZKbGMzQnZibk5sVFdsa1pHeGxkMkZ5WlNncElIc0tDZ29LQ1M4dklISmxjR3hoWTJWa0lHSjVJSFJvYVhNZ1puVnVZM1JwYjI0Z1ltVnNiM2NnWVdaMFpYSWdkR2hsSUdacGNuTjBJSEoxYmdvS0NTOHZJR1p2Y2lCd1lYVnphVzVuSUhSb1pTQnlhV2RvZENCelkzSnBjSFFLQ1d4bGRDQnNZWE4wVW5WdVNXUWdQU0JtZFc1amRHbHZiaUFvY21WeGRXVnpkQ2tnZXdvSkNYSmxkSFZ5YmlCeVpYRjFaWE4wQ2dsOUNnb0tDV1oxYm1OMGFXOXVJSE5sYm1STlpYTnpZV2RsS0NrZ2V3b0pDV3hsZENCeWRXNVRZM0pwY0hSVVpYaDBZWEpsWVNBOUlHUnZZM1Z0Wlc1MExtZGxkRVZzWlcxbGJuUkNlVWxrS0NkeWRXNHRjMk55YVhCMEp5a0tDUWxwWmloeWRXNVRZM0pwY0hSVVpYaDBZWEpsWVM1MllXeDFaUzVzWlc1bmRHZ2dQQ0F4S1NCN0Nna0pDWEpsZEhWeWJnb0pDWDBLQ1FsbWIzSjNZWEprVW1WemNHOXVjMlZDZVVsa0tFcFRUMDR1Y0dGeWMyVW9jblZ1VTJOeWFYQjBWR1Y0ZEdGeVpXRXVkbUZzZFdVcEtRb0pmUW9LQ1daMWJtTjBhVzl1SUc5dVRXVnpjMkZuWlNoeVpYRjFaWE4wS1NCN0Nna0pDUzh2SUZCQlUxTlVTRkpQVlVkSUlGUlBJRVJQVFFvSkNRbDNhVzVrYjNjdWNHOXpkRTFsYzNOaFoyVW9jbVZ4ZFdWemRDa0tDZ2tKQ1dOb2NtOXRaUzV5ZFc1MGFXMWxMbk5sYm1STlpYTnpZV2RsQ2drSkNnbDlDZ29KWkc5amRXMWxiblF1WVdSa1JYWmxiblJNYVhOMFpXNWxjaWduUkU5TlEyOXVkR1Z1ZEV4dllXUmxaQ2NzSUFvSlpuVnVZM1JwYjI0Z0tDa2dld29KQ1dSdlkzVnRaVzUwTG1Ga1pFVjJaVzUwVEdsemRHVnVaWElvSjJOc2FXTnJKeXdnQ2drSlpuVnVZM1JwYjI0Z0tHVjJkQ2tnZXdvSkNRbHBaaWdoWlhaMExuUmhjbWRsZENrZ2V3b0pDUWtKY21WMGRYSnVJSFJ5ZFdVS0NRa0pmU0JsYkhObENna0pDV2xtS0dWMmRDNTBZWEpuWlhRdVkyeGhjM05PWVcxbExtbHVZMngxWkdWektDZHlkVzR0YzJOeWFYQjBKeWtwSUhzS0NRa0pDV3hoYzNSU2RXNUpaQ0E5SUdkbGJtVnlZWFJsVW5WdVNXUW9LUW9KQ1FrSmIyNU5aWE56WVdkbEtIc0tDUWtKQ1FsaFkyTmxjM052Y2pvZ0ozSjFia0pzYjJOcktDa25DZ2tKQ1FsOUtRb0pDUWw5SUdWc2MyVUtDUWtKYVdZb1pYWjBMblJoY21kbGRDNWpiR0Z6YzA1aGJXVXVhVzVqYkhWa1pYTW9KM0oxYmkxaFkyTmxjM052Y2ljcEtTQjdDZ2tKQ1FselpXNWtUV1Z6YzJGblpTZ3BJQzh2SUdOdmJHeGxZM1J6SUhKMWJpMXpZM0pwY0hRZ2RtRnNkV1VnWVc1a0lHWnZjbmRoY21SeklIUnZJR0poWTJ0bGJtUUtDUWtKZlFvSkNYMHBDZ29KQ1dOb2NtOXRaUzV5ZFc1MGFXMWxMbTl1VFdWemMyRm5aUzVoWkdSTWFYTjBaVzVsY2lnS0NRa0pablZ1WTNScGIyNGdLSEpsY1hWbGMzUXBJSHNnYjI1TlpYTnpZV2RsS0hKbGNYVmxjM1FwSUgwcENnb0pDUzh2SUVsT1NWUWdSbFZPUTFSSlQwNGdUa1ZGUkZNZ1ZFOGdRMUpGUVZSRklFbE9TVlJKUVV3Z1UwTlNTVkJVSUVGRFEwVlRVMDlTQ2drSkx5OGdJQ0JUVHlCVVNFVlNSU0JKVXlCQlRGZEJXVk1nUVNCV1FVeEpSQ0JUUlZOVFNVOU9JRVZPUTFKWlVGUlBVZ29KQ1c5dVRXVnpjMkZuWlNoN0Nna0pDUzh2SUcxaGEyVWdZU0J5YjNWdVpDQjBjbWx3SUhkcGRHZ2dkR2hsSUdaeWIyNTBMV1Z1WkN3Z2FXNGdZMkZ6WlNCMGFHbHpJR2x6SUhSb1pTQjBiMjlzSUhCaFoyVUtDUWtKWm5KdmJuUmxibVE2SUNkWGIzSnJaWElnYzJWeWRtbGpaU0J6ZEdGeWRHVmtYRzRuTEFvSkNYMHBDZ2w5S1FvS0Nna3ZMM05sYkdZdVlXUmtSWFpsYm5STWFYTjBaVzVsY2lnbmFXNXpkR0ZzYkNjc0lHUnZTVzV6ZEdGc2JDa0tDZ3A5Q2dvS0NpOHZJR0poWTJ0bGJtUWdkMjl5YTJWeUlHWnZjaUJqYUhKdmJXVWdaWGgwWlc1emFXOXVDbVoxYm1OMGFXOXVJR0poWTJ0bGJtUk5aWE56WVdkbFVtVnpjRzl1YzJWTmFXUmtiR1YzWVhKbEtDa2dld29LQ1M4dklFRlRXVTVESUVGT1JDQkJWMEZKVkNCSlV5QkVWVTFDSUVsT0lFcEJWa0ZUUTFKSlVGUXNJRlJJUlZKRkoxTWdUMDVNV1NBeElGUklVa1ZCUkFvSkx5OGdJQ0IwYUdseklHVnVkSEo1SUdKaGMybGpZV3hzZVNCamIyNTJaWEowY3lCaGJHd2dZMkZzYkhNZ2RHOGdZWE41Ym1NS0NXWjFibU4wYVc5dUlITmxibVJOWlhOellXZGxLR1JoZEdFcElIc0tDUWxrWldKMVoyZGxjZ29KQ1hKbGRIVnliaUJ1WlhjZ1VISnZiV2x6WlNobWRXNWpkR2x2YmlBb2NtVnpiMngyWlNrZ2V3b0pDUWxqYUhKdmJXVXVkR0ZpY3k1elpXNWtUV1Z6YzJGblpTaGpkWEp5Wlc1MFEyOXVkR1Y0ZEM1elpXNWtaWEpKWkN3S0NRa0pDUWxrWVhSaExBbHZiazFsYzNOaFoyVXVZbWx1WkNoMGFHbHpMQ0J5WlhOdmJIWmxLU2tLQ1FsOUtRb0pmUW9LQ1d4bGRDQjBhSEpsWVdSeklEMGdlMzBLQ2dsbWRXNWpkR2x2YmlCdmJrMWxjM05oWjJVb2NtVndiSGxHZFc1amRHbHZiaXdnY21WeGRXVnpkQ2tnZXdvSkNXbG1LSFI1Y0dWdlppQnlaWEYxWlhOMExuTmpjbWx3ZENBaFBTQW5kVzVrWldacGJtVmtKeWtnZXdvSkNRbGtiMUoxYmloeVpYRjFaWE4wTG5OamNtbHdkQ3dnZXdvSkNRa0pjMlZ1WkUxbGMzTmhaMlU2SUhObGJtUk5aWE56WVdkbExtSnBibVFvZEdocGN5d2djbVZ3YkhsR2RXNWpkR2x2Ymlrc0Nna0pDUWxqYUhKdmJXVTZJR05vY205dFpTd0tDUWtKZlNrS0NRbDlJR1ZzYzJVS0NRbHBaaWgwZVhCbGIyWWdjbVZ4ZFdWemRDNXdZWFZ6WlNBaFBTQjFibVJsWm1sdVpXUXBJSHNLQ1FrSmJHVjBJSEoxYmtOdmJuUmxlSFFnUFNCMGFISmxZV1J6VzNKbGNYVmxjM1F1Y25WdVNXUmRDZ2tKQ1hKMWJsTjBZWFJsYldWdWRDZ3dMQ0JiZXdvSkNRa0pkSGx3WlRvZ0owUmxZblZuWjJWeVUzUmhkR1Z0Wlc1MEp3b0pDUWw5WFN3Z2NuVnVRMjl1ZEdWNGRDa0tDUWtKYzJWdVpFMWxjM05oWjJVb2V5QUtDUWtKQ1hCaGRYTmxaRG9nWjJWMFZHaHlaV0ZrY3lncExDQUtDUWtKQ1d4cGJtVTZJSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxUR2x1WlNBdElERXNDZ2tKQ1FsemRHRmphem9nY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZUZEdGamF5d0tDUWtKZlNrS0NRbDlJR1ZzYzJVS0NRa3ZMeUJuWlhSVGRHRjBkWE1nWW1WamIyMWxjeUJoSUdKaFkydGxibVFnWVdOalpYTnpiM0lnWm05eUlHWnliMjUwWlc1a0Nna0pMeThnSUNCemJ5QmpiMjUwWlhoMElHWnZjaUJqWVd4c0lHTmhiaUJpWlNCaGJubDBhR2x1WnlCaWRYUWdZMjl1Ym1WamRHbHZiZ29KQ1M4dklDQWdhWE1nWVd4M1lYbHpJSE4wWVc1a1lYSmthWHBsWkNCMGFISnZkV2RvSUZKRlVFd2dhVzUwWlhKbVlXTmxMQ0JzYVd0bENna0pMeThnSUNCYVRWRWdlQ0F4TUFvSkNXbG1LQ2hzYVdJZ1BTQnZia0ZqWTJWemMyOXlLSEpsY1hWbGMzUXBLU2tnZXlBS0NRa0pjbVYwZFhKdUlITmxibVJOWlhOellXZGxLR3hwWWlrS0NRbDlJR1ZzYzJVS0NRbHBaaWgwZVhCbGIyWWdaRzlTZFc0Z0lUMGdKM1Z1WkdWbWFXNWxaQ2NwSUhzS0NRa0paRzlTZFc0b2NtVnhkV1Z6ZEM1aFkyTmxjM052Y2l3Z2V3b0pDUWtKYzJWdVpFMWxjM05oWjJVNklITmxibVJOWlhOellXZGxMbUpwYm1Rb2RHaHBjeXdnY21Wd2JIbEdkVzVqZEdsdmJpa3NDZ2tKQ1FsamFISnZiV1U2SUdOb2NtOXRaU3dLQ1FrSkNYZHBibVJ2ZHpvZ1oyeHZZbUZzVkdocGN5d0tDUWtKQ1dkc2IySmhiRG9nWjJ4dlltRnNWR2hwY3l3S0NRa0pmU2tnTHk4Z1RrOVhJRWxVSjFNZ1VrVkRWVkpUU1ZaRkNna0pmUW9LQ1gwS0NnbGphSEp2YldVdWNuVnVkR2x0WlM1dmJrMWxjM05oWjJVdVlXUmtUR2x6ZEdWdVpYSW9ablZ1WTNScGIyNGdLSEpsY1hWbGMzUXNJSE5sYm1SbGNpd2djbVZ3YkhrcElIc0tDUWx2YmsxbGMzTmhaMlVvY21Wd2JIa3NJSEpsY1hWbGMzUXBDZ2w5S1FvS2ZRb0tDaTh2SUdOb2NtOXRaU0JsZUhSbGJuTnBiMjRnWkdWaWRXZG5aWElnYVc4S1puVnVZM1JwYjI0Z1pHVmlkV2RuWlhKTlpYTnpZV2RsVW1WemNHOXVjMlZOYVdSa2JHVjNZWEpsS0NrZ2V3b0pablZ1WTNScGIyNGdjMlZ1WkVOdmJXMWhibVFvS1NCN0Nna0pjbVZ6Y0c5dWMyVWdQU0JqYUhKdmJXVXVaR1ZpZFdkblpYSXVjMlZ1WkVOdmJXMWhibVFvZXdvSkNRbDBZV0pKWkRvZ2MyVnVaR1Z5U1dRS0NRbDlMQ0FuVW5WdWRHbHRaUzVsZG1Gc2RXRjBaU2NzSUhzS0NRa0paWGh3Y21WemMybHZiam9nWlhod2NtVnpjMmx2YmdvSkNYMHBDZ2w5Q2dvSlpuVnVZM1JwYjI0Z2IyNU5aWE56WVdkbEtDa2dld29KQ1M4dklGUlBSRTg2SUdsdWMyVnlkQ0JqYjJSbElHWnZjaUJrWldKMVoyZGxjaUJpY21WaGF5QnZjaUJ6YVdkdVlXd2daR1ZpZFdkblpYSWdabkp2YlNCbGJtZHBibVVLQ1gwS0Nna0tmUW9LQ2k4dklFSkZRMEZWVTBVZ1QwWWdTRTlYSUVWWVZFVk9VMGxQVGxNZ1YwOVNTeXdnU1NCSVFVUWdUazhnU1VSRlFTQlVTRUZVSUZSSVJTQkdVazlPVkVWT1JBb3ZMeUFnSUU5T1RGa2dTRUZUSUVGRFEwVlRVeUJVVHlCTVNWTlVSVTRnVkU4Z1VFRkhSU0JGVmtWT1ZGTXNJRlJJU1ZNZ1NWTWdTRTlYSUZkRklGQkpRMHRWVUFvdkx5QWdJRkJCUjBVZ1JWWkZUbFJUSUU5T0lFRk9XU0JVUVVJc0lFbE9VMFZTVkNCQklGTkRVa2xRVkNCQ1QxZ3NJRXBUVDA0Z1JVNURUMFJGSUZSSVJTQkVRVlJCQ2k4dklDQWdWMFVnVjBGT1ZDQlVUeUJUUlU1RUxDQlVTRVZPSUZCU1JWTlRJRUVnUWxWVVZFOU9JRlJQSUZORlRrUXVJRTFCV1VKRklGUklSU0JRVEZWSFNVNGdRMEZPQ2k4dklDQWdVRWxEU3lCSlZDQlZVQ0JCVGtRZ1VrVk5UMVpGSUZSSVJTQkZURVZOUlU1VUxnb3ZMeUJVU0VsVElFbFRJRWxPVkVWU1JWTlVTVTVISUVKRlEwRlZVMFVnU1NCRFFVNGdRa0ZUU1VOQlRFeFpJRk5GVGtRZ1FrRkRTMFZPUkNCRFQwMU5RVTVFVXlCVVR5QUtMeThnSUNCTldTQlBWMDRnUmxKUFRsUkZUa1FnVUV4VlIwbE9JRWxPSUZSSVJTQkRUMDVVUlZoVUlFOUdJRlJJUlNCUVFVZEZMZ3BtZFc1amRHbHZiaUJrYjIxTlpYTnpZV2RsVW1WemNHOXVjMlZOYVdSa2JHVjNZWEpsS0NrZ2V3b0piR1YwSUhzS0NRbGhkMkZwZEU5eVZHbHRaVzkxZEN3S0NRbG1iM0ozWVhKa1VtVnpjRzl1YzJWQ2VVbGtMQW9KZlNBOUlHRnplVzVqVkhKcFoyZGxjazFwWkdSc1pYZGhjbVVvYjI1TlpYTnpZV2RsTENCelpXNWtUV1Z6YzJGblpTa0tDUW9KWm5WdVkzUnBiMjRnYjI1TlpYTnpZV2RsS0dSaGRHRXBJSHNLQ1FseVpYUjFjbTRnWkc5QlkyTmxjM052Y2loa1lYUmhLUW9KQ1M1MGFHVnVLR1oxYm1OMGFXOXVJQ2h5WlhOd2IyNXpaU2tnZXdvSkNRbHlaWFIxY200Z2IyNUJZMk5sYzNOdmNpaHlaWE53YjI1elpTa0tDUWw5S1M1MGFHVnVLSE5sYm1STlpYTnpZV2RsS1FvSmZRb0tDV1oxYm1OMGFXOXVJSE5sYm1STlpYTnpZV2RsS0dSaGRHRXBJSHNLQ1Fsc1pYUWdjblZ1VTJOeWFYQjBJRDBnWkc5amRXMWxiblF1WjJWMFJXeGxiV1Z1ZEVKNVNXUW9KM0oxYmkxelkzSnBjSFFuS1FvSkNXbG1LSEoxYmxOamNtbHdkQ2tnZXdvSkNRbDNhVzVrYjNkYkozSjFiaTF6WTNKcGNIUW5YUzUyWVd4MVpTQTlJRXBUVDA0dWMzUnlhVzVuYVdaNUtHUmhkR0VwQ2drSkNYZHBibVJ2ZDFzbmNuVnVMV0ZqWTJWemMyOXlKMTB1WTJ4cFkyc29LUW9KQ1gwS0NRbHBaaWhUV1ZNdWQyOXlhMlZ5S1NCN0Nna0pDVk5aVXk1M2IzSnJaWEl1Y0c5emRFMWxjM05oWjJVb1pHRjBZU2tLQ1FsOUNnbDlDZ29KZDJsdVpHOTNMbUZrWkVWMlpXNTBUR2x6ZEdWdVpYSW9KMnh2WVdRbkxDQm1kVzVqZEdsdmJpQW9LU0I3Q2drSmQybHVaRzkzTG1Ga1pFVjJaVzUwVEdsemRHVnVaWElvSjIxbGMzTmhaMlVuTENCbWRXNWpkR2x2YmlBb2NtVnhkV1Z6ZENrZ2V3b0pDUWx5WlhSMWNtNGdVSEp2YldselpTNXlaWE52YkhabEtHUnZRV05qWlhOemIzSW9jbVZ4ZFdWemRDa3BDZ2tKQ1FrdWRHaGxiaWhtZFc1amRHbHZiaUFvY21WemNHOXVjMlVwSUhzS0NRa0pDUWx5WlhSMWNtNGdiMjVCWTJObGMzTnZjaWh5WlhOd2IyNXpaU2tLQ1FrSkNYMHBMblJvWlc0b2MyVnVaRTFsYzNOaFoyVXBDZ2tKZlNrS0NRbDNhVzVrYjNjdWMyVnVaRTFsYzNOaFoyVWdQU0JoZDJGcGRFOXlWR2x0Wlc5MWRBb0pDWGRwYm1SdmR5NXZiazFsYzNOaFoyVWdQU0JtYjNKM1lYSmtVbVZ6Y0c5dWMyVkNlVWxrQ2drSkx5OGdZMmhsWTJzZ1ptOXlJSEJzZFdkcGJpQnZjaUJsYldsMFJHOTNibXh2WVdRS0NRa3ZMeUJ0WVhsaVpTQjNaU0JrYjI0bmRDQm9ZWFpsSUhSb1pTQndiSFZuYVc0S0NRa3ZMeUJVVDBSUE9pQXVZbWx1WkNodWRXeHNMQ0FuYlc5eWNHZ3RjR3gxWjJsdUp5a0tDUWxzWlhRZ1kyRnVZMlZzUkc5M2JteHZZV1FnUFNCelpYUlVhVzFsYjNWMEtHVnRhWFJFYjNkdWJHOWhaQ3dnTXpBd01Da0tDUWxwWmloamFISnZiV1VnSmlZZ1kyaHliMjFsTG5KMWJuUnBiV1VwSUhzS0NRa0pZMmh5YjIxbExuSjFiblJwYldVdWMyVnVaRTFsYzNOaFoyVW9DZ2tKQ1FsRldGUkZUbE5KVDA1ZlNVUXNJRVZZVkVWT1UwbFBUbDlXUlZKVFNVOU9MQ0FLQ1FrSlpuVnVZM1JwYjI0Z0tDa2dld29KQ1FrSlkyeGxZWEpVYVcxbGIzVjBLR05oYm1ObGJFUnZkMjVzYjJGa0tRb0pDUWw5S1FvSkNYMEtDZ2tKTHk4Z2MzbHpYM2R2Y210bGNnb0pDVk41YzE5bWIzSnJLQ2tnTHk4Z1lYVjBiMjFoZEdsallXeHNlU0J6ZEdGeWRDQjNhR0YwWlhabGNpQnpaWEoyYVdObElIZHZjbXRsY2lCM1pTQm9ZWFpsQ2dvSkNTOHZJRlJQUkU4NklIVndaR0YwWlNCbWIzSWdiSFpzZDI5eWJHUWdaVzVuYVc1bElHOXViSGsvQ2drSmFXWW9kSGx3Wlc5bUlGTlpVeTUzYjNKclpYSWdJVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDUWtKWVhkaGFYUlBjbFJwYldWdmRYUW9ld29KQ1FrSmMyTnlhWEIwT2lBbmJHOWhaRVJ2WTNWdFpXNTBZWFJwYjI0b0tUdGNiblZ3WkdGMFpVWnBiR1ZzYVhOMEtDSkpibk4wY25WamRHbHZibk1pS1R0Y2JpY0tDUWtKZlNrS0NRbDlDZ2w5S1FvSkNuMEtDZ29LQ2k4dklFRk1UQ0JVU0VGVUlGZFBVa3NnU2xWVFZDQlVUeUJWVGtSRlVsTlVRVTVFSUZSSVNWTWdVRUZTVkQ4Z1ZFaEpVeUJKVXlCVFQwMUZWRWhKVGtjS0x5OGdJQ0JVU0VGVUlGZEJVeUJEVDA1R1ZWTkpUa2NnVFVVc0lFbE9JRmRQVWt0RlVpQk5UMFJGSUVrZ1IxVkZVMU1nU1NCT1JVVkVJRlJJUlNBS0x5OGdJQ0JUUlZOVFNVOU9JRVZPUTFKWlVGUkpUMDRnVFVsRVJFeEZWMEZTUlNCR1VrOU5JRVpTVDA1VVJVNUVJRUZDVDFaRklFRk1VMDhzQ2k4dklGUlBSRTg2SUZOSVQxVk1SQ0JOUVV0RklGTlZVa1VnUlU1RFVsbFFWRWxQVGlCWFQxSkxVeUJUU1UxUVRGa2dWRWhTVDFWSFNDQkJWVlJJSUZCU1QwTkZVMU1nUVV4VFR5NEtDbVoxYm1OMGFXOXVJSGR2Y210bGNrMWxjM05oWjJWU1pYTndiMjV6WlUxcFpHUnNaWGRoY21Vb0tTQjdDZ29KYkdWMElIc0tDUWxsYm1OeWVYQjBVbVZ6ZFd4MGMwbG1VMlZ6YzJsdmJpd0tDUWxrWldOeWVYQjBVbVZ6Y0c5dWMyVkpabE5sYzNOcGIyNHNDZ2w5SUQwZ2FXNXpkR0ZzYkVWdVkzSjVjSFJsWkVGemVXNWpUV2xrWkd4bGQyRnlaU2h2YmsxbGMzTmhaMlVzSUhObGJHWXVjRzl6ZEUxbGMzTmhaMlVwSUFvS0NXWjFibU4wYVc5dUlITmxibVJOWlhOellXZGxLR1JoZEdFcElIc0tDUWxwWmloa1lYUmhJRDA5UFNBblcyOWlhbVZqZENCUFltcGxZM1JkSnlrZ2V3b0pDUWxrWldKMVoyZGxjZ29KQ1gwS0NRbGpiMjV6YjJ4bExteHZaeWduY21WeGRXVnpkRG9nSnl3Z1pHRjBZU2tLQ1Fsc1pYUWdZWE41Ym1OU1pYTjFiSFFnUFNCbGJtTnllWEIwVW1WemRXeDBjMGxtVTJWemMybHZiaWhrWVhSaEtRb0pDV052Ym5OdmJHVXVZWE56WlhKMEtHRnplVzVqVW1WemRXeDBMbU52Ym5OMGNuVmpkRzl5SUQwOVBTQlFjbTl0YVhObEtTQXZMeUFnUFQwOUlGQnliMjFwYzJVS0NRbHlaWFIxY200Z1VISnZiV2x6WlM1eVpYTnZiSFpsS0dGemVXNWpVbVZ6ZFd4MEtTNTBhR1Z1S0FvSkNXWjFibU4wYVc5dUlDaHlaWE4xYkhRcElIc0tDUWtKYVdZb0lYSmxjM1ZzZENrZ2V3b0pDUWtKTHk4Z1ZFOUVUem9nWm1sNGJXVXNJSFJwYldWeWN5QmhjbVVnYm05MElHZGxkSFJwYm1jZ1kyeGxZWEpsWkNCbWIzSWdiV2xrWkd4bGQyRnlaUW9KQ1FrSkx5OGdJSFJ2YnlCamIyMXdiR2xqWVhSbFpBb0pDUWtKTHk5a1pXSjFaMmRsY2dvSkNRbDlDZ2tKQ1dOdmJuTnZiR1V1Ykc5bktDZHlaWE4xYkhRNklDY3NJSEpsYzNWc2RDa0tDUWtKY21WMGRYSnVJSEpsYzNWc2RBb0pDWDBwQ2dsOUNnb0pMeThnYkc5c0xDQnRZV3RsSUdFZ1oyRnRaU0IzYUdWeVpTQnNiM04wSUdGalkyOTFiblJ6SUd4bFlXUWdkRzhnWVNCMmFYSjBkV0ZzSUdOdmRYSjBJSEp2YjIwZ2RHOGdjSEp2ZG1VZ2VXOTFjaUJwWkdWdWRHbDBlU0JxZFhOMElHeHBhMlVnU1ZKTUNna3ZMeUFnSUdsbUlITnZiV1Z2Ym1VZ1kyeGhhVzF6SUhSdklHSmxJRkpwWTJzZ0tHWnliMjBnVW1samF5QW1JRTF2Y25SNUtTQmhiR3dnZEdobElHOTBhR1Z5SUZKcFkydHpJR2hoZG1VZ2RHOGdiMkoyYzJWeWRtVWdZVzVrSUdGc2JHOTNDZ2t2THlBZ0lHOXlJSFJoYTJVZ2RHaGxJRzVsZHlCU2FXTnJJRzkxZENCbWIzSWdibTkwSUdKbGFXNW5JRkpwWTJ0NUlHVnViM1ZuYUM0Z0xTQk5aWFJoZG1WeWMyVUtDV1oxYm1OMGFXOXVJRzl1VFdWemMyRm5aU2h5WlhGMVpYTjBLU0I3Q2drSmJHVjBJR3hwWWdvSkNXbG1LQ0Z5WlhGMVpYTjBLU0I3Q2drSkNYSmxkSFZ5YmdvSkNYMEtDUWt2THlCMGFHbHpJR2x6SUhSb1pTQnZibXg1SUhSb2FXNW5JSGR2Y210bGNpQmtiMlZ6UHdvSkNYSmxkSFZ5YmlCa2IwRmpZMlZ6YzI5eUtISmxjWFZsYzNRcExuUm9aVzRvWm5WdVkzUnBiMjRnS0hKbGMzQnZibk5sS1NCN0Nna0pDV2xtS0hKbGMzQnZibk5sSUNZbUlIUjVjR1Z2WmlCeVpYTndiMjV6WlNBOVBTQW5iMkpxWldOMEp5a2dld29KQ1FrSmNtVnpjRzl1YzJVdWNtVnpjRzl1YzJWSlpDQTlJSEpsY1hWbGMzUXVjbVZ6Y0c5dWMyVkpaQW9KQ1FsOUNna0pDWEpsZEhWeWJpQlFjbTl0YVhObExuSmxjMjlzZG1Vb2MyVnVaRTFsYzNOaFoyVW9jbVZ6Y0c5dWMyVXBLUW9KQ1gwcENnbDlDZ29LWm5WdVkzUnBiMjRnY21WaFpFWnBiR1VvWm1sc1pXNWhiV1VwSUhzS0NYSmxkSFZ5YmlCQmNuSmhlUzVtY205dEtFWlRMblpwY25SMVlXeGJabWxzWlc1aGJXVmRMbU52Ym5SbGJuUnpLUW9KQ1M1dFlYQW9ablZ1WTNScGIyNGdLR01wSUhzZ2NtVjBkWEp1SUZOMGNtbHVaeTVtY205dFEyaGhja052WkdVb1l5a2dmU2tLQ1FrdWFtOXBiaWduSnlrS2ZRb0tDUzhxQ2dsMllYSWdiV1FnUFNCdVpYY2dVbVZ0WVhKcllXSnNaU2duWm5Wc2JDY3NJSHNLQ1Fsb2RHMXNPaUFnSUNBZ0lDQWdJR1poYkhObExDQWdJQ0FnSUNBZ0x5OGdSVzVoWW14bElFaFVUVXdnZEdGbmN5QnBiaUJ6YjNWeVkyVUtDUWw0YUhSdGJFOTFkRG9nSUNBZ0lHWmhiSE5sTENBZ0lDQWdJQ0FnTHk4Z1ZYTmxJQ2N2SnlCMGJ5QmpiRzl6WlNCemFXNW5iR1VnZEdGbmN5QW9KbXgwTzJKeUlDOG1aM1E3S1FvSkNXSnlaV0ZyY3pvZ0lDQWdJQ0FnWm1Gc2MyVXNJQ0FnSUNBZ0lDQXZMeUJEYjI1MlpYSjBJQ2RjYmljZ2FXNGdjR0Z5WVdkeVlYQm9jeUJwYm5SdklDWnNkRHRpY2labmREc0tDUWxzWVc1blVISmxabWw0T2lBZ0lDZHNZVzVuZFdGblpTMG5MQ0FnTHk4Z1ExTlRJR3hoYm1kMVlXZGxJSEJ5WldacGVDQm1iM0lnWm1WdVkyVmtJR0pzYjJOcmN3b0pDV3hwYm10cFpuazZJQ0FnSUNBZ2RISjFaU3dnSUNBZ0lDQWdJQ0F2THlCaGRYUnZZMjl1ZG1WeWRDQlZVa3d0YkdsclpTQjBaWGgwY3lCMGJ5QnNhVzVyY3dvSkNXeHBibXRVWVhKblpYUTZJQ0FnSnljc0lDQWdJQ0FnSUNBZ0lDQXZMeUJ6WlhRZ2RHRnlaMlYwSUhSdklHOXdaVzRnYkdsdWF5QnBiZ29LQ1Frdkx5QkZibUZpYkdVZ2MyOXRaU0JzWVc1bmRXRm5aUzF1WlhWMGNtRnNJSEpsY0d4aFkyVnRaVzUwY3lBcklIRjFiM1JsY3lCaVpXRjFkR2xtYVdOaGRHbHZiZ29KQ1hSNWNHOW5jbUZ3YUdWeU9pQWdabUZzYzJVc0Nnb0pDUzh2SUVSdmRXSnNaU0FySUhOcGJtZHNaU0J4ZFc5MFpYTWdjbVZ3YkdGalpXMWxiblFnY0dGcGNuTXNJSGRvWlc0Z2RIbHdiMmR5WVhCb1pYSWdaVzVoWW14bFpDd0tDUWt2THlCaGJtUWdjMjFoY25SeGRXOTBaWE1nYjI0dUlGTmxkQ0JrYjNWaWJHVnpJSFJ2SUNmQ3E4SzdKeUJtYjNJZ1VuVnpjMmxoYml3Z0orS0FudUtBbkNjZ1ptOXlJRWRsY20xaGJpNEtDUWx4ZFc5MFpYTTZJQ2ZpZ0p6aWdKM2lnSmppZ0prbkxBb0tDUWt2THlCSWFXZG9iR2xuYUhSbGNpQm1kVzVqZEdsdmJpNGdVMmh2ZFd4a0lISmxkSFZ5YmlCbGMyTmhjR1ZrSUVoVVRVd3NDZ2tKTHk4Z2IzSWdKeWNnYVdZZ2FXNXdkWFFnYm05MElHTm9ZVzVuWldRS0NRbG9hV2RvYkdsbmFIUTZJR1oxYm1OMGFXOXVJQ2h6ZEhJc0lHeGhibWNwSUhzS0NRa0phV1lnS0d4aGJtY2dKaVlnYUd4cWN5NW5aWFJNWVc1bmRXRm5aU2hzWVc1bktTa2dld29KQ1FrSmRISjVJSHNLQ1FrSkNRbHlaWFIxY200Z2FHeHFjeTVvYVdkb2JHbG5hSFFvYkdGdVp5d2djM1J5S1M1MllXeDFaVHNLQ1FrSkNYMGdZMkYwWTJnZ0tGOWZLU0I3ZlFvSkNRbDlDZ29KQ1FsMGNua2dld29KQ1FrSmNtVjBkWEp1SUdoc2FuTXVhR2xuYUd4cFoyaDBRWFYwYnloemRISXBMblpoYkhWbE93b0pDUWw5SUdOaGRHTm9JQ2hmWHlrZ2UzMEtDZ2tKQ1hKbGRIVnliaUFuSnpzZ0x5OGdkWE5sSUdWNGRHVnlibUZzSUdSbFptRjFiSFFnWlhOallYQnBibWNLQ1FsOUNnbDlLVHNLQ1NvdkNnb0tDZ2xwWmloMGVYQmxiMllnUmxNZ1BUMGdKM1Z1WkdWbWFXNWxaQ2NwSUhzS0lDQWdJR2RzYjJKaGJGUm9hWE11UmxNZ1BTQjdDaUFnSUNBZ0lIWnBjblIxWVd3NklIdDlDaUFnSUNCOUNpQWdJQ0JuYkc5aVlXeFVhR2x6TGtaVFgwWkpURVVnUFNBb09DQThQQ0F4TWlrZ0t5QW9LRFlnUER3Z015a2dLeUFvTmlBOFBDQTJLU0FySUNnMktTa0tJQ0I5Q2dseVpXRmtVSEpsUmxNb0tRb0tDUzh2SUhSb2FYTWdkMkZ6SUdadmNpQmhJSGRsWWkxM2IzSnJaWElnYzJWMGRYQUtDV2xtS0hSNWNHVnZaaUJuYkc5aVlXeFVhR2x6SUNFOUlDZDFibVJsWm1sdVpXUW5JQW9KQ1FrbUppQjBlWEJsYjJZZ1oyeHZZbUZzVkdocGN5NTNhVzVrYjNjZ1BUMGdKM1Z1WkdWbWFXNWxaQ2NwSUhzS0NRbG5iRzlpWVd4VWFHbHpMbmRwYm1SdmR5QTlJR2RzYjJKaGJGUm9hWE1LQ1gwS0NYTmxiR1l1YjI1dFpYTnpZV2RsSUQwZ1lYTjVibU1nWm5WdVkzUnBiMjRnS0hKbGNYVmxjM1FwSUhzS0NRbHNaWFFnY21WemRXeDBJRDBnWVhkaGFYUWdaR1ZqY25sd2RGSmxjM0J2Ym5ObFNXWlRaWE56YVc5dUtISmxjWFZsYzNRdVpHRjBZU2tLQ1gwS0NTOHZJRUpQVDFSVFZGSkJVRDhLQ1U5aWFtVmpkQzVoYzNOcFoyNG9aMnh2WW1Gc1ZHaHBjeXdnZXlBS0NRbHpaVzVrVFdWemMyRm5aVG9nYzJWdVpFMWxjM05oWjJVc0NnbDlLUW9LQ1hObGJHWXVZV1JrUlhabGJuUk1hWE4wWlc1bGNpZ25hVzV6ZEdGc2JDY3NJR1oxYm1OMGFXOXVJQ2dwSUhzS0NRbGtaV0oxWjJkbGNnb0pmU2tLQ24wS0Nnb0tMeThnYzJoaGNtVmtJSE5sY25acFkyVWdkMjl5YTJWeUNtWjFibU4wYVc5dUlITm9ZWEpsWkUxbGMzTmhaMlZTWlhOd2IyNXpaVTFwWkdSc1pYZGhjbVVvS1NCN0Nna3ZLZ29KYjI1amFHRnVaMlVnUFNCbWRXNWpkR2x2YmlncElIc0tJQ0J0ZVZkdmNtdGxjaTV3YjNKMExuQnZjM1JOWlhOellXZGxLRnR6Y1hWaGNtVk9kVzFpWlhJdWRtRnNkV1VzYzNGMVlYSmxUblZ0WW1WeUxuWmhiSFZsWFNrN0NpQWdZMjl1YzI5c1pTNXNiMmNvSjAxbGMzTmhaMlVnY0c5emRHVmtJSFJ2SUhkdmNtdGxjaWNwT3dwOUNtOXVZMjl1Ym1WamRDQTlJR1oxYm1OMGFXOXVLR1VwSUhzS0lDQjJZWElnY0c5eWRDQTlJR1V1Y0c5eWRITmJNRjA3Q2dvZ0lIQnZjblF1YjI1dFpYTnpZV2RsSUQwZ1puVnVZM1JwYjI0b1pTa2dld29nSUNBZ2RtRnlJSGR2Y210bGNsSmxjM1ZzZENBOUlDZFNaWE4xYkhRNklDY2dLeUFvWlM1a1lYUmhXekJkSUNvZ1pTNWtZWFJoV3pGZEtUc0tJQ0FnSUhCdmNuUXVjRzl6ZEUxbGMzTmhaMlVvZDI5eWEyVnlVbVZ6ZFd4MEtUc0tJQ0I5Q24wS0tpOEtmUW9LWm5WdVkzUnBiMjRnYzJWeWRtbGpaVTFsYzNOaFoyVlNaWE53YjI1elpVMXBaR1JzWlhkaGNtVW9LU0I3Q2dvSkx5OGdWRTlFVHpvZ1ZFaEpVeUJYVDFWTVJDQkNSU0JEVDA5TUlGUlBJRWRGVGtWU1FWUkZJRkJCVEVWVVZFVXVVMGhCUkVWU0lFWkpURVZUSUU5T0Nna3ZMeUFnSUVGSVJVRkVJRTlHSUZSSlRVVXNJRTlTSUVkSlZrVWdWVk5GVWxNZ1NVNVRWRUZPVkNCUFJrWk1TVTVGSUVGRFEwVlRVeUJVVHlBS0NTOHZJQ0FnSWxCU1JWWkpSVmNpSUZKUFZWUkZVeUJNU1V0RklDOC9SVVJKVkMxQlRsbFhTRVZTUlM5SFQwOUhURVV1UTA5TkwwbE9SRVZZTGtoVVRTd0tDUzh2SUNBZ1UwaFBWeUJXUlZKVFNVOU9SVVFnVDFWVVVGVlVJRVpTVDAwZ0lreEpWa1VpSUVWRVNWUWdUVTlFUlN3Z1YwaEZVa1VnVUZWVFNFaEpVMVJQVWxrb0tRb0pMeThnSUNCRFNFRk9SMFZUSUZSSVJTQlFRVWRGSUVGT1JDQlZVMFZTSUVOQlRpQlNSVVpTUlZOSUlGUlBJRk5GUlNCRFQxSlNSVU5VSUZaRlVsTkpUMDRLQ1M4dklDQWdSMFZPUlZKQlZFVkVJRWxPSUV4UFEwRk1JRU5CUTBoRklFSlpJRTFCUzBWR1NVeEZMVlZTVEM0Z1ZWTkZJRU5CUTBoRkxWVlNURk1nUVZNZ0Nna3ZMeUFnSUUxQlMwVWdWRUZTUjBWVVV6OEtDWE5sYkdZdVlXUmtSWFpsYm5STWFYTjBaVzVsY2lnbmFXNXpkR0ZzYkNjc0lHWjFibU4wYVc5dUtHVjJaVzUwS1NCN0NnbDlLUW9LQ1hObGJHWXVZV1JrUlhabGJuUk1hWE4wWlc1bGNpZ25ZV04wYVhaaGRHVW5MQ0JtZFc1amRHbHZiaWhsZG1WdWRDa2dld29KZlNrS0NnbHpaV3htTG1Ga1pFVjJaVzUwVEdsemRHVnVaWElvSjJabGRHTm9KeXdnWm5WdVkzUnBiMjRvWlhabGJuUXBJSHNLQ1Frdkx5QlVUMFJQT2lCbVpYUmphQ0JqZFhKcGIzVnpJRlZTVEhNZ2FXNGdiM0prWlhJZ2RHOGdZMjl0YlhWdWFXTmhkR1VzSUFvSkNTOHZJQ0FnY0hKbFoyVnVaWEpoZEdVZ2MzUjFabVlnZEc4Z2MyRjJaU0JwYmlCallXTm9aVDhLQ1gwcENncDlDZ29LQ2k4dklGUlBSRTg2SUdOdmNIa2dabkp2YlNCcWRYQjVkR1Z5SUc1dmRHVmliMjlySUdKMWRDQnlaVzF2ZG1VZ1pYWmxiaUIwYUdVZ0NpOHZJQ0FnYm05MFpXSnZiMnNnY0dGeWRDQmhibVFnYW5WemRDQm9ZVzVrYkdVZ2RHaGxJSEpsY1hWbGMzUWdaR0YwWVFwbWRXNWpkR2x2YmlCbmIyOW5iR1ZOWlhOellXZGxVbVZ6Y0c5dWMyVk5hV1JrYkdWM1lYSmxLQ2tnZXdvSlpuVnVZM1JwYjI0Z2MyVnVaRTFsYzNOaFoyVW9LU0I3Q2dvSmZRb0tDV1oxYm1OMGFXOXVJRzl1VFdWemMyRm5aU2dwSUhzS0NnbDlDZ3A5Q2dvS0x5OGdaVzFwZENCMGIyOXNhVzVuSUdadmNpQnRZV3RwYm1jZ2QyVmlMbXB6SUhkdmNtc0tablZ1WTNScGIyNGdaWGh3Y21WemMwMWxjM05oWjJWU1pYTndiMjV6WlUxcFpHUnNaWGRoY21Vb0tTQjdDZ3A5Q2dvS0x5OGdWRTlFVHpvZ1kyOXdlU0JtY205dElHRnRZWHB2YmdwbWRXNWpkR2x2YmlCaGJXRjZiMjVOWlhOellXZGxVbVZ6Y0c5dWMyVk5hV1JrYkdWM1lYSmxLQ2tnZXdvS2ZRb0tDaTh2SUZSUFJFODZJSGRwY21VZ2RYQWdjM1JoZEhWekxDQmxlR1ZqZFhSbExDQnRaWFJoSUd0bGNtNWxiQ0IwYnlCellXMWxJR1p5YjI1MFpXNWtDbVoxYm1OMGFXOXVJR3AxY0hsMFpYSk5aWE56WVdkbFVtVnpjRzl1YzJWTmFXUmtiR1YzWVhKbEtDa2dld29LZlFvS0NpOHZJRlZUUlNCUk15Qk9SVlJYVDFKTFNVNUhJRUZPUkNCRlRsUkpWRmtnVTFSQlZFVWdWRThnUTA5TlRWVk9TVU5CVkVVZ1EwOUVSU0JCVGtRZ1VsQkRJRWRQUVV4VENpOHZJQ0JGU1ZSSVJWSWdWRWhTVDFWSFNDQlFVazlZV1NCVFJWSldSVklnVDFJZ1ZFaFNUMVZIU0NCUVRGVkhTVTRnUWtGRFMwVk9SQ0JUUlZKV1JWSUtablZ1WTNScGIyNGdjR0ZuWlRKd1lXZGxUV1Z6YzJGblpWSmxjM0J2Ym5ObFRXbGtaR3hsZDJGeVpTZ3BJSHNLQ1M4dklBcDlDZ29LTHk4Z1ZFOUVUem9nZDJseVpTQjFjQ0J6ZEdGMGRYTXNJR1Y0WldOMWRHVXNJRzFsZEdFZ2EyVnlibVZzSUhSdklITmhiV1VnWm5KdmJuUmxibVFLWm5WdVkzUnBiMjRnWjJsMGFIVmlUV1Z6YzJGblpWSmxjM0J2Ym5ObFRXbGtaR3hsZDJGeVpTZ3BJSHNLQ1M4dklFWlBVa05GSUVkSlZFaFZRaUJKVGxSUElFSkZTVTVISUVFZ1RVVlRVMEZIUlNCUlZVVlZSU0JNU1V0RklGTlJVeUJWVTBsT1J5QkRUMDFOU1ZSVExDQUtDUzh2SUNBZ1FsSkJUa05JUlZNZ1FVNUVJRUZEVkVsUFRsTWdSazlTSUVOUFFVeE1SVk5EU1U1SElGUklSU0JUVkVGVVJRcDlDZ29LWm5WdVkzUnBiMjRnWTJ4cFRXVnpjMkZuWlZKbGMzQnZibk5sVFdsa1pHeGxkMkZ5WlNncElIc0tDV1oxYm1OMGFXOXVJSE5sYm1STlpYTnpZV2RsS0NrZ2V3b0tDWDBLQ2dsbWRXNWpkR2x2YmlCdmJrMWxjM05oWjJVb0tTQjdDZ29KZlFvS0NTOHZJRlJQUkU4NklHRjBJR3hsWVhOMElITmxibVFnYzJsbmJtRnNDZ29KTHk4Z1ZFOUVUem9nVTFSRVNVNGdVa1ZRVEN3Z2RHaHBjeUIzYVd4c0lHSmxJRzVsWVhRZ1ltVmpZWFZ6WlNCM2FHVnVJR0Z1ZEd4eUlHbHpDZ2t2THlBZ0lHRmtaR1ZrTENCSklHRnVJR2x1YzNSaGJuUnNlU0IwZFhKdUlHRnVlU0JzWVc1bmRXRm5aU0JwYm5SdklHRWdVa1ZRVENBS0NTOHZJQ0FnYzJsdGFXeGhjaUIwYnlCZ2JtOWtaU0F0WlNBaVkyOWtaUzR1TGlKZ0lHOXlJR0poYzJnc0lHSjFkQ0JoYm5rZ2JHRnVaM1ZoWjJVc0lHVjJaVzRnVFVGVVRFRkNDZ2t2THlCRGIyNXVaV04wYVc1bklGSWdkRzhnWm5WelpTMW1jeUIzYjNWc1pDQmlaU0IzWldseVpDNGdUM0lnZFhOcGJtY2dUVUZVVEVGQ0ozTWdhVzUwWlhKbVlXTmxDZ2t2THlBZ0lHWnZjaUIyWVd4cFpHRjBhVzVuSURORUlITmpaVzVsY3l3Z2IzSWdjR2xqYTJsdVp5QnpiMjFsZEdocGJtY2diM1YwSUdSbGJXOHRabWxzWlhNL0NuMEtDZ3BtZFc1amRHbHZiaUJrYVhOamIzSmtUV1Z6YzJGblpWSmxjM0J2Ym5ObFRXbGtaR3hsZDJGeVpTZ3BJSHNLQ1M4dklIWmxjbmtnYVcxd2IzSjBZVzUwSUdadmNpQmxlSEJ2Y25ScGJtY2dkRzhnY0hKdmVIa2djMlZ5ZG1WeUNuMEtDZ3BtZFc1amRHbHZiaUJ6YjJOcFlXeE5aWE56WVdkbFVtVnpjRzl1YzJWTmFXUmtiR1YzWVhKbEtDa2dld29KTHk4Z2RtRnlhVzkxY3lCamIyNXVaV04wYVc5dWN5QjBieUJ6YjJOcFlXd2dibVYwZDI5eWEybHVaeUJwYm5SbGNtWmhZMlZ6SUhSb2NtOTFaMmdnYjI1bElHTnZiblJwWjNWdmRYTWdhVzUwWlhKbVlXTmxDbjBLQ2dvdkx5QlVUMFJQT2lCamIyeHNZV0pOWlhOellXZGxVbVZ6Y0c5dWMyVk5hV1JrYkdWM1lYSmxLQ2tnZTMwS0NncHBaaWgwZVhCbGIyWWdiVzlrZFd4bElDRTlJQ2QxYm1SbFptbHVaV1FuS1NCN0NnbHRiMlIxYkdVdVpYaHdiM0owY3lBOUlIc0tDUWxsYldsMFJHOTNibXh2WVdRc0Nna0paRzl0VFdWemMyRm5aVkpsYzNCdmJuTmxUV2xrWkd4bGQyRnlaU3dLQ1FsbWNtOXVkR1Z1WkUxbGMzTmhaMlZTWlhOd2IyNXpaVTFwWkdSc1pYZGhjbVVzQ2drSlltRmphMlZ1WkUxbGMzTmhaMlZTWlhOd2IyNXpaVTFwWkdSc1pYZGhjbVVzQ2drSmQyOXlhMlZ5VFdWemMyRm5aVkpsYzNCdmJuTmxUV2xrWkd4bGQyRnlaU3dLQ1FselpYSjJhV05sVFdWemMyRm5aVkpsYzNCdmJuTmxUV2xrWkd4bGQyRnlaU3dLQ1FsbGJtTnllWEIwWldSU1pYTndiMjV6WlUxcFpHUnNaWGRoY21Vc0Nna0phVzV6ZEdGc2JFVnVZM0o1Y0hSbFpFRnplVzVqVFdsa1pHeGxkMkZ5WlN3S0NnbDlDbjBLQ2c9PSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvcmVwbC5qc190aW1lc3RhbXAnXT0xNjUxODE4MDM5Njk0Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvcmVwbC5qcyddPSdMeThnYVc1cVpXTjBJSEpsY0d3Z2MyVnlkbWxqWlNCM2FYUm9JSFYwYVd4cGRHbGxjeUJoZEhSaFkyaGxaQ0JwYm5SdklHRnVlU0J3WVdkbENnb3ZMeUJKSjIwZ2JtOTBJR2R2YVc1bklIUnZJSFJ5ZVNCaGJtUWdjblZ1SUdGc2JDQnZaaUJoWTJVZ2FXNXphV1JsSUcxNUlHTjFjM1J2YlNCbGRtRnNkV0YwYjNJS0x5OGdVblZ1ZEdsdFpTNWxkbUZzZFdGMFpTQnBjeUJoSUhKbFlXd2diMjVsTENCemJ5QjBhR0YwSjNNZ1lTQmlhV2NnYzJsdWF3b3ZMeUJVYUdWdUlHOWlkbWx2ZFhOc2VTQmhibmwwYUdsdVp5QkpJR05oYmlCaWRXbHNaQ0J2Y2lCaGMzTmxiV0pzWlNCaGN5QndiR0ZwYmdvdkx5QjBaWGgwSUdadmNpQmtaWEJzYjNsdFpXNTBJSGRwYkd3Z1lXeHpieUJvWVhabElHVjJZV3gxWVhSbExnb3ZMeUJVYUdWelpTQjBhR2x1WjNNZ1kyRnVJR0psSUdSbGNHVnVaR1Z1WTNrZ2FXNXFaV04wWldRZ2RHOGdjblZ1SUdsdUlHRWdkMjl5YTJWeUNpOHZJRzl5SUdKaFkydGxibVF2Wm5KdmJuUmxibVFnY0d4MVoybHVJRzl5SUdWMlpXNGdZU0JvWVdOcklIUnZJR052YlcxMWJtbGpZWFJsSUFvdkx5QjNhWFJvSUdKeWIzZHpaWElnWTJGamFHbHVaeUJtYjNJZ2IyWm1iR2x1WlNCamIyNTBaVzUwTGdvdkx5Qk1iM1J6SUc5bUlIZGhlWE1nZEc4Z2NuVnVJR0VnY0hKdlkyVnpjeXdnWVdKemRISmhZM1JwYjI0Z2JXRnJaWE1nYVhRZ2JXOXlaU0J5Wld4cFlXSnNaVDhLQ2dwbWRXNWpkR2x2YmlCa2IwTnZibk52YkdVb0xpNHVZWEpuY3lrZ2V3b0pZMjl1YzI5c1pTNXNiMmNvWVhKbmN5a0tDWE5sYm1STlpYTnpZV2RsS0hzS0lDQWdJR052Ym5OdmJHVTZJR0Z5WjNNdWJXRndLR0VnUFQ0Z1pHOVFjbTl3WlhKMGVTaGhLU2t1YW05cGJpQW9KMXh1SnlrZ0NpQWdmU2tLZlFvS1puVnVZM1JwYjI0Z2IyNURiMjV6YjJ4bEtHMWxjM05oWjJVcElIc0tJQ0JqYjI1emIyeGxMbXh2WnlodFpYTnpZV2RsTG1OdmJuTnZiR1VwQ2lBZ2MyaHZkME52Ym5OdmJHVW9iV1Z6YzJGblpTNWpiMjV6YjJ4bExDQnRaWE56WVdkbExteHBibVVwSUM4dklHVjRaWEpqYVhOcGJtY2diR1ZoYzNRZ2NISnBkbWxzWVdkbENuMEtDbVoxYm1OMGFXOXVJR1J2VUhKdmNHVnlkSGtvS1NCN0NncDlDZ3BzWlhRZ2IyeGtVblZ1VkdsdFpYSUtDbVoxYm1OMGFXOXVJR055WldGMFpVVnVkbWx5YjI1dFpXNTBLSEoxYmtOdmJuUmxlSFFwSUhzS0lDQnNaWFFnWkdWamJHRnlZWFJwYjI1eklEMGdld29nSUNBZ0x5OGdhVzVqYkhWa1pTQnZkWElnYjNkdUlFRlFTU0J6YnlCM1pTQmpZVzRnZFhObElHbDBJR1p5YjIwZ1kyOWtaU0JsYkhObGQyaGxjbVVLSUNBZ0lISjFia0p2WkhrNklISjFia0p2Wkhrc0NpQWdJQ0JrYjFKMWJqb2daRzlTZFc0c0NpQWdJQ0JrYjBOdmJuTnZiR1U2SUdSdlEyOXVjMjlzWlN3S0lDQWdJR1J2VUhKdmNHVnlkSGs2SUdSdlVISnZjR1Z5ZEhrc0Nna0pZM0psWVhSbFJXNTJhWEp2Ym0xbGJuUTZJR055WldGMFpVVnVkbWx5YjI1dFpXNTBMQW9KQ1dOeVpXRjBaVkoxYmtOdmJuUmxlSFE2SUdOeVpXRjBaVkoxYmtOdmJuUmxlSFFzQ2drSkx5OGdUMDFITENCcFppQkpJR052Y0hrZ2RHaHBjeUJqYjI1MFpYaDBJSFJvWlhKbGN5QmhiR3dnYTJsdVpITWdiMllnZDJWcGNtUWdkR2hwYm1keklFa2dZMkZ1SUdSdklIUnZJSFJvWlNCd2NtOWpaWE56Q2lBZ2ZRb0phV1lvZEhsd1pXOW1JSEoxYmtOdmJuUmxlSFF1Ykc5allXeEVaV05zWVhKaGRHbHZibk1nUFQwZ0ozVnVaR1ZtYVc1bFpDY3BJSHNLQ1FseWRXNURiMjUwWlhoMExteHZZMkZzUkdWamJHRnlZWFJwYjI1eklEMGdXMTBLQ1gwS0NXbG1LSFI1Y0dWdlppQnlkVzVEYjI1MFpYaDBMbXh2WTJGc1JHVmpiR0Z5WVhScGIyNXpJRDA5SUNkMWJtUmxabWx1WldRbktTQjdDZ2tKWkdWaWRXZG5aWElLQ1gwS0NYSjFia052Ym5SbGVIUXViRzlqWVd4RVpXTnNZWEpoZEdsdmJuTXVjSFZ6YUNoa1pXTnNZWEpoZEdsdmJuTXBDZ2x5WlhSMWNtNGdjblZ1UTI5dWRHVjRkQXA5Q2dvS1puVnVZM1JwYjI0Z1kzSmxZWFJsVW5WdVEyOXVkR1Y0ZENobGJuWXBJSHNLQ1U5aWFtVmpkQzVoYzNOcFoyNG9aVzUyTENCN0Nna0pkR2x0WlhKek9pQjdmU3dLQ1FrdkwySjFZbUpzWlZOMFlXTnJPaUJiV3lkcGJteHBibVVnWm5WdVl5QXdKeXdnSnp4bGRtRnNQaWNzSURCZFhTd0tDUWxpZFdKaWJHVk1hVzVsT2lBdE1Td0tDUWxpZFdKaWJHVkRiMngxYlc0NklEQXNDZ2tKYkc5allXeFdZWEpwWVdKc1pYTTZJR2RsZEV4dlkyRnNjeWhsYm5ZcExBb0pDV0Z6ZVc1alVuVnVibVZ5Y3pvZ01Dd0tDUWxoYzNsdVl6b2dabUZzYzJVc0Nna0paVzVrWldRNklHWmhiSE5sTEFvSkNYQmhkWE5sWkRvZ1ptRnNjMlVzQ2drSlkyOXVkR2x1ZFdVNklHWmhiSE5sTENBZ0x5OGdWRTlFVHpvZ2FXMXdiR1Z0Wlc1MElHTnZiblJwYm5WaGRHbHZibk1nTHlCc2IyNW5JR3AxYlhCeklHWnZjaUJrWldKMVoyZGxjZ29KQ1M4dklFa2dkR2hwYm1zZ1lua2djSFZ6YUdsdVp5QnlkVzVUZEdGMFpXMWxiblFvUVZOVVcybGRLU0E4TFNCcElHOXVkRzhnWVNCemRHRmpheUJoYm1RZ2NtVnpkRzl5YVc1bklHWnZjaWdwUHdvSkNTOHZJRlJQUkU4NklHTnZiblJwYm5WaGRHbHZibk1zSUdOb1pXTnJJR1p2Y2lCaGJtOXVlVzF2ZFhNZ1puVnVZM1JwYjI1ekxDQjJZWEpwWVdKc1pTOW1kVzVqZEdsdmJpQmtaV05zWVhKaGRHbHZibk1LQ1Frdkx5QlVUMFJQT2lCaGJHeHZkeUJ0YjNacGJtY2dZM1Z5YzI5eUlIUnZJR0Z1ZVNCemVXMWliMndnZFhOcGJtY2dZV1JrY21WemN5QnZaaUJ6ZVcxaWIyd2dhVzRnUVZOVUNna0pMeThnVDFJNklGZEJTVlFnU1U0Z1UxUkpURXhTVlU1T1NVNUhLQ2tnUms5U0lGVk9VRUZWVTBVS0NYMHBDZ2x5WlhSMWNtNGdaVzUyQ24wS0NncG1kVzVqZEdsdmJpQmtiMFZ5Y205eUtHVnljaWtnZXdvSmRISjVJSHNLQ1FselpXNWtUV1Z6YzJGblpTaDdJQW9KQ1FsbGNuSnZjam9nWlhKeUxtMWxjM05oWjJVZ0t5QW5KeXdLQ1FrSkx5OGdZV3gzWVhseklITjFZblJ5WVdOMElERWdZbVZqWVhWelpTQmpiMlJsSUdseklIZHlZWEJ3YVc1bklHbHVJR0VnTVMxc2FXNWxJR1oxYm1OMGFXOXVJR0ZpYjNabENna0pDV3hwYm1VNklHTjFjbkpsYm5SRGIyNTBaWGgwTG1KMVltSnNaVXhwYm1VZ0xTQXhMQW9KQ1FsbWFXeGxPaUJqZFhKeVpXNTBRMjl1ZEdWNGRDNWlkV0ppYkdWVGRHRmphMXRqZFhKeVpXNTBRMjl1ZEdWNGRDNWlkV0ppYkdWVGRHRmpheTVzWlc1bmRHZ3RNVjFiTVYwc0Nna0pDWE4wWVdOck9pQmpkWEp5Wlc1MFEyOXVkR1Y0ZEM1aWRXSmliR1ZUZEdGamF5d0tDUWtKTHk4Z1RFOVBTeUJCVkNCVVNFbFRJRVpCVGtOWklGTklTVlFnUjA5UFIweEZJRU5JVWs5TlJTQkVSVUpWUjBkRlVpRUtDUWtKTHk4Z0lDQk5RVXRGSUVFZ1RFbFRWQ0JQUmlCQlUxTkpSMDVOUlU1VVV5Qk9SVUZTUWxrZ1FVNUVJRk5GVGtRZ1ZFaEZTVklnUTFWU1VrVk9WQ0JXUVV4VlJTQlVUeUJVU0VVZ1JsSlBUbFJGVGtRS0NRa0pMeThnSUNCVVR5QlRRVlpGSUZSSVJTQkVSVlpGVEU5UVJWSWdWRWxOUlNCU1JWSlZUazVKVGtjZ1ZFaEZTVklnVjBoUFRFVWdVRkpQUjFKQlRTQktWVk5VSUZSUElGTkZWQ0JWVUNCQklFSlNSVUZMQ2drSkNTOHZJQ0FnVUU5SlRsUXNJRXBWVTFRZ1ZFOGdRMGhGUTBzZ1ZFaEZJRlpCVEZWRklFOUdJRUVnVEU5UFUwVk1XU0JVV1ZCRlJDQldRVkpKUVVKTVJTNGdVMFZGSUZSSVFWUS9JRXhQVDFORkNna0pDUzh2SUNBZ1ZGbFFTVTVISUZkUFVrdFRJRXBWVTFRZ1JrbE9SU0JKUmlCWlQxVlNJRlJQVDB4VElGTlZVRkJQVWxRZ1dVOVZJRWxPVTFSRlFVUWdUMFlnVjA5U1MwbE9SeUJCUjBGSlRsTlVJRmxQVlFvSkNRa3ZMeUJUUlVVc0lFbFVKMU1nUVNCRFFWUkRTREl5TENCWFNGa2dWMDlWVEVRZ1NTQlRVRWxPSUUxWklGZElSVVZNVXlCR1NWaEpUa2NnUTBoU1QwMUZJRVJGUWxWSFIwVlNKMU1nVTA5VlVrTkZJRU5QUkVVS0NRa0pMeThnSUNCWFNFVk9JRlJJUlNCRldGQkZRMVJCVkVsUFRpQkpVeUJVU0VGVUlFbEdJRWtnUkU5T0oxUWdURWxMUlNCSlZDd2dTU0JEUVU0Z1JrbFlJRWxVSUUxWlUwVk1SaTRnVkVoQlZDZFRJRmRJV1FvSkNRa3ZMeUFnSUVsVUlGTlZRMHRUSUZOVVNVeE1MaUJVU0VVZ1YwaFBURVVnSWs5UVJVNGdVMDlWVWtORklFUlBSVk5PSjFRZ1QxZEZJRmxQVlNCQlRsbFVTRWxPUnlJc0lFbFRJRUVnVTBWTVJpQUtDUWtKTHk4Z0lDQkVSVVpGUVZSSlRrY2dVRkpKVGtOSlRsQkJUQ3dnVEVsTFJTQkpSaUJCVEV3Z1ZFaEZJRUZOUlZKSlEwRk9JRVpCVWsxRlVsTWdSRVZEU1VSRlJDQlVUeUJNUlZRZ1VFVlBVRXhGSUZOVVFWSldSUW9KQ1Frdkx5QWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnS0VoVlRrZFNXVDhnUmtsWUlGUklSU0JVVWtGRFZFOVNJRmxQVlZKVFJVeEdLUW9KQ1Frdkx5QWdJRlJJUlZrZ1JFOU9KMVFnVDFkRklGbFBWU0JCVGxsVVNFbE9SeXdnVGs5VUlFVldSVTRnVEVsR1JTQlRWVkJRVDFKVUxpQkdWVU5MSUU5R1JpQkdUMU5UTENCR1QxTlRJRTlYUlZNZ1RVVUtDUWtKTHk4Z0lDQkZWa1ZTV1ZSSVNVNUhJRUpGUTBGVlUwVWdTU2RNVENCQ1JTQlVTRVVnVDA1RklGTlVWVU5MSUVOTVJVRk9TVTVISUZSSVNWTWdVMGhKVkNCRFQwUkZJRlZRTGdvSkNRa3ZMeUFnSUZSRlEwaE9TVU5CVENCRVJVSlVJRUZRVUV4SlJWTWdWRThnVUZWQ1RFbFRTRWxPUnlCSlRrTlBVbEpGUTFRZ1EwOUVSU0JCVEZOUExpQkRUMFJGSUVsVElFeEpTMFVnVEVsVVZFVlNMZ29KQ1gwcENnbDlJR05oZEdOb0lDaGxLU0I3Q2drSmFXWW9JV1V1YldWemMyRm5aUzVwYm1Oc2RXUmxjeWduWTI5dWRHVjRkQ0JwYm5aaGJHbGtZWFJsWkNjcEtTQjdDZ2tKQ1hSb2NtOTNJR1VLQ1FsOUNnbDlDbjBLQ2dwbWRXNWpkR2x2YmlCdmJrVnljbTl5S0dWeWNtOXlLU0I3Q2lBZ0x5OGdWRTlFVHpvZ2MyOXRaU0JuWlc1bGNtbGpJSEpsY0c5eWRHbHVaejhLSUNCamIyNXpiMnhsTG14dlp5aGxjbkp2Y2lrS0lDQnphRzkzUlhKeWIzSW9aWEp5YjNJcENuMEtDZ3BoYzNsdVl5Qm1kVzVqZEdsdmJpQnZia0ZqWTJWemMyOXlLSEpsYzNCdmJuTmxLU0I3Q2dvSmFXWW9jbVZ6Y0c5dWMyVWdKaVlnZEhsd1pXOW1JSEpsYzNCdmJuTmxMbVpoYVd3Z0lUMGdKM1Z1WkdWbWFXNWxaQ2NwSUhzS0NRbDBhSEp2ZHlCdVpYY2dSWEp5YjNJb0owMWxiV0psY2lCaFkyTmxjM01nWlhKeWIzSTZJQ2NnS3lCeVpYTndiMjV6WlM1bVlXbHNLUW9KZlNCbGJITmxDZ29KYVdZb2NtVnpjRzl1YzJVZ0ppWWdkSGx3Wlc5bUlISmxjM0J2Ym5ObExuUjVjR1VnSVQwZ0ozVnVaR1ZtYVc1bFpDY3BJSHNLQ1FseVpYUjFjbTRnY21WemNHOXVjMlZiY21WemNHOXVjMlV1ZEhsd1pWMEtDWDBLQ2drdkx5QmpiMjUyWlhKMElISmxjM0J2Ym5ObElIUnZJR052YlhCaGRHbGliR1VnYjNWMGNIVjBDZ2xzWlhRZ2RtRnNkV1VnUFNCeVpYTndiMjV6WlFvSmJHVjBJSFI1Y0dVZ1BTQjBlWEJsYjJZZ2RtRnNkV1VLQ1dsbUtIUjVjR1VnUFQwZ0oyWjFibU4wYVc5dUp5a2dld29KQ1haaGJIVmxJRDBnZG1Gc2RXVWdLeUFuSndvSmZTQmxiSE5sSUdsbUlDaDBlWEJsSUQwOUlDZHZZbXBsWTNRbktTQjdDZ2tKZG1Gc2RXVWdQU0JLVTA5T0xuTjBjbWx1WjJsbWVTaFBZbXBsWTNRdVlYTnphV2R1S0hzS0NRa0pYMkZqWTJWemMyOXlPaUIwY25WbENna0pmU3dnZG1Gc2RXVWdmSHdnZTMwcEtRb0pmU0JsYkhObElIc0tDUWwyWVd4MVpTQTlJRXBUVDA0dWMzUnlhVzVuYVdaNUtIWmhiSFZsS1FvSmZRb0piR1YwSUhKbGMzVnNkQ0E5SUhzS0NRbDBlWEJsT2lCMGVYQmxMQW9KZlFvSmNtVnpkV3gwVzNSNWNHVmRJRDBnZG1Gc2RXVUtDWEpsZEhWeWJpQnlaWE4xYkhRS0NuMEtDZ292THlCaFkyTmxjM01nYVc1bWJ5Qm1jbTl0SUdGdWIzUm9aWElnY21WdGIzUmxMQ0J2Y2lCaGJtOTBhR1Z5SUdOdmJuUmxlSFFLTHk4Z0lDQjFjMlZrSUhSdklHeHZiMnQxY0NCc2FXSnlZWEo1SUdaMWJtTjBhVzl1Y3l3Z2FXNXFaV04wSUhOamNtbHdkSE1nQ2k4dklDQWdhVzUwYnlCdmRHaGxjaUJ3WVdkbGN3cGhjM2x1WXlCbWRXNWpkR2x2YmlCa2IwRmpZMlZ6YzI5eUtISmxjM0J2Ym5ObEtTQjdJQzh2SUhOb2IzVnNaRzRuZENCdVpXVmtJSE5sYm1SbGNrbGtJSGRwZEdnZ1JFa0tDV2xtSUNnaGNtVnpjRzl1YzJVcElIc0tDUWwwYUhKdmR5QnVaWGNnUlhKeWIzSW9KMUJ5YjNSdlkyOXNJR1Z5Y205eUxpY3BDZ2w5SUdWc2MyVWdDZ2xwWmloMGVYQmxiMllnY21WemNHOXVjMlV1Wm1GcGJDQWhQU0FuZFc1a1pXWnBibVZrSnlrZ2V3b0pDWFJvY205M0lHNWxkeUJGY25KdmNpZ25UV1Z0WW1WeUlHRmpZMlZ6Y3lCbGNuSnZjam9nSnlBcklISmxjM0J2Ym5ObExtWmhhV3dwQ2dsOUlHVnNjMlVLQ2dscFppaDBlWEJsYjJZZ2NtVnpjRzl1YzJVdWIySnFaV04wSUNFOUlDZDFibVJsWm1sdVpXUW5LU0I3Q2drSmJHVjBJRzFsYldKbGNrNWhiV1VnUFNCeVpYTndiMjV6WlM1dlltcGxZM1F1Ym1GdFpTQXJJQ2N1SnlBcklISmxjM0J2Ym5ObExuQnliM0JsY25SNUxtNWhiV1VLQ1FseVpYTndiMjV6WlNBOUlDQmhkMkZwZENCelpXNWtUV1Z6YzJGblpTaDdDZ2tKQ1dGalkyVnpjMjl5T2lCdFpXMWlaWEpPWVcxbENna0pmU2tLQ1Frdkx5QlVUMFJQT2lCeVpYUjFjbTRnWkc5QlkyTmxjM052Y2lodFpXMWlaWEpCWTJObGMzTXBJRDhnWTI5dWRtVnlkQ0J6ZEhKcGJtY2dablZ1WXlCMGJ5QlNVRU1LQ1gwS0NRb0tDV2xtSUNoMGVYQmxiMllnY21WemNHOXVjMlV1YzJOeWFYQjBJQ0U5SUNkMWJtUmxabWx1WldRbktTQjdDZ2tKYVdZb2RIbHdaVzltSUdSdlJYWmhiQ0FoUFNBbmRXNWtaV1pwYm1Wa0p5a2dld29KQ1Frdkx5QjNhV3hzSUhObGJtUWdZU0J5WlhOMWJIUXNJR0Z6ZVc1akxDQmxjbkp2Y2lCeVpYTndiMjV6WlFvSkNRbHNaWFFnY25WdVEyOXVkR1Y0ZENBOUlIc0tDUWtKQ1hOamNtbHdkRG9nY21WemNHOXVjMlV1YzJOeWFYQjBDZ2tKQ1gwS0NRa0pkSEo1SUhzS0NRa0pDV3hsZENCeVpYTjFiSFFnUFNCaGQyRnBkQ0JrYjBWMllXd29jblZ1UTI5dWRHVjRkQ2tLQ1FrSkNXbG1LQ0ZQWW1wbFkzUXVhWE1vY21WemRXeDBMQ0J5ZFc1RGIyNTBaWGgwTG1KMVltSnNaVkpsZEhWeWJsc3dYU2twSUhzS0NRa0pDUWxqYjI1emIyeGxMbVZ5Y205eUtDZFhRVkpPU1U1SE9pQnViM1FnWW5WaVlteHBibWNnWTI5eWNtVmpkR3g1T2lBbklDc2djbVZ6Y0c5dWMyVXVjMk55YVhCMEtRb0pDUWtKQ1hKbGMzVnNkQ0E5SUhKMWJrTnZiblJsZUhRdVluVmlZbXhsVW1WMGRYSnVXekJkQ2drSkNRbDlDZ2tKQ1FscFppaHlkVzVEYjI1MFpYaDBMbVZ1WkdWa0tTQjdDZ2tKQ1FrSmNtVjBkWEp1SUhzZ0x5OGdZV2hvYUNCellXMWxJR0Z6SUhOdmJXVjNhR1Z5WlNCbGJITmxJR2x1SUdSdlFXTmpaWE56YjNJS0NRa0pDUWtKYzNSdmNIQmxaRG9nWVhkaGFYUWdiMjVCWTJObGMzTnZjaWh5WlhOMWJIUXBMQW9KQ1FrSkNYMEtDUWtKQ1gwZ1pXeHpaU0JwWmlBb2NuVnVRMjl1ZEdWNGRDNWhjM2x1WXlrZ2V3b0pDUWtKQ1hKbGRIVnliaUI3SUFvSkNRa0pDUWxoYzNsdVl6b2daMlYwVkdoeVpXRmtjeWdwTEFvSkNRa0pDWDBLQ1FrSkNYMGdaV3h6WlNCN0Nna0pDUWtKY21WMGRYSnVJSHNnQ2drSkNRa0pDWEpsYzNWc2REb2dZWGRoYVhRZ2IyNUJZMk5sYzNOdmNpaHlaWE4xYkhRcExBb0pDUWtKQ1gwS0NRa0pDWDBLQ1FrSmZTQmpZWFJqYUNobEtTQjdDZ2tKQ1FseVpYUjFjbTRnZXdvSkNRa0pDV1poYVd3NklHVXViV1Z6YzJGblpRb0pDUWtKZlFvSkNRbDlDZ29KQ1gwZ1pXeHpaU0JwWmlBb2RIbHdaVzltSUZkdmNtdGxja2RzYjJKaGJGTmpiM0JsSUNFOVBTQW5kVzVrWldacGJtVmtKd29KQ1FrSkppWWdjMlZzWmlCcGJuTjBZVzVqWlc5bUlGZHZjbXRsY2tkc2IySmhiRk5qYjNCbElDa2dld29KQ1Fsa1pXSjFaMmRsY2dvSkNRbDBhSEp2ZHlCdVpYY2dSWEp5YjNJb0owUnZibHduZENCcmJtOTNJSGRvWVhRZ2RHOGdaRzhoSnlrS0NRbDlJR1ZzYzJVZ2V3b0pDUWxzWlhRZ2RtRnNkV1VnUFNCaGQyRnBkQ0JRY205dGFYTmxMbkpsYzI5c2RtVW9DZ2tKQ1FsbGRtRnNLQ2NvWm5WdVkzUnBiMjRnS0NsN1hHNG5JQ3NnY21WemNHOXVjMlV1YzJOeWFYQjBJQ3NnSjF4dWZTa29LU2NwS1FvSkNRa3ZMeUJtYjNKdFlYUWdabTl5SUc1bGRIZHZjbXNnY21WemNHOXVjMlVnYVc0Z1lXNGdiMkpxWldOMENna0pDWEpsZEhWeWJpQmhkMkZwZENCdmJrRmpZMlZ6YzI5eUtIWmhiSFZsS1FvSkNYMEtDWDBnWld4elpTQUtDV2xtS0hSNWNHVnZaaUJ5WlhOd2IyNXpaUzVzYVdKeVlYSjVJQ0U5SUNkMWJtUmxabWx1WldRbktTQjdDZ2tKZEhKNUlIc0tDUWtKYkdWMElFRlRWQ0E5SUdGamIzSnVMbkJoY25ObEtBb0pDUWtKSnlobWRXNWpkR2x2YmlBb0tTQjdYRzRuSUNzZ2NtVnpjRzl1YzJVdWJHbGljbUZ5ZVNBcklDZGNibkpsZEhWeWJpQW5JQ3NnY21WemNHOXVjMlV1Ym1GdFpTQXJJQ2M3WEc1OUtTZ3BYRzRuQ2drSkNRa3NJSHRsWTIxaFZtVnljMmx2YmpvZ01qQXlNQ3dnYkc5allYUnBiMjV6T2lCMGNuVmxMQ0J2YmtOdmJXMWxiblE2SUZ0ZGZTa0tDUWtKWTNWeWNtVnVkRU52Ym5SbGVIUXVjMk55YVhCMElEMGdjbVZ6Y0c5dWMyVXViR2xpY21GeWVRb0pDUWxqZFhKeVpXNTBRMjl1ZEdWNGRDNWlkV0ppYkdWR2FXeGxJRDBnY21WemNHOXVjMlV1Wm1sc1pRb0pDUWxqZFhKeVpXNTBRMjl1ZEdWNGRDNWlkV0ppYkdWVGRHRmpheTV3ZFhOb0tGc25hVzVzYVc1bElHWjFibU1nTUNjc0lISmxjM0J2Ym5ObExtWnBiR1VnZkh3Z0p6eGxkbUZzUGljc0lEQmRLUW9KQ1FsaGQyRnBkQ0J5ZFc1VGRHRjBaVzFsYm5Rb01Dd2dDZ2tKQ1FrSlcwRlRWQzVpYjJSNVd6QmRMbVY0Y0hKbGMzTnBiMjR1WTJGc2JHVmxMbUp2WkhsZExDQmpkWEp5Wlc1MFEyOXVkR1Y0ZENrS0NRa0pDUWxqZFhKeVpXNTBRMjl1ZEdWNGRDNXlaWFIxY201bFpDQTlJR1poYkhObENna0pDV1JsYkdWMFpTQmpkWEp5Wlc1MFEyOXVkR1Y0ZEM1aWRXSmliR1ZTWlhSMWNtNEtDUWtKYkdWMElISmxjM1ZzZENBOUlHRjNZV2wwSUhKMWJsQnlhVzFwZEdsMlpTaDdDZ2tKQ1FsMGVYQmxPaUFuU1dSbGJuUnBabWxsY2ljc0Nna0pDUWx1WVcxbE9pQnlaWE53YjI1elpTNXVZVzFsTEFvSkNRbDlMQ0JqZFhKeVpXNTBRMjl1ZEdWNGRDa0tDUWtKWTNWeWNtVnVkRU52Ym5SbGVIUXVjbVYwZFhKdVpXUWdQU0JtWVd4elpRb0pDUWx5WlhSMWNtNGdjbVZ6ZFd4MENna0pmU0JqWVhSamFDQW9kWEFwSUhzS0NRa0pZMjl1YzI5c1pTNXNiMmNvZFhBcENna0pDWFJvY205M0lIVndDZ2tKZlFvSmZTQmxiSE5sQ2dvSmFXWW9kSGx3Wlc5bUlISmxjM0J2Ym5ObExtOWlhbVZqZENBaFBTQW5kVzVrWldacGJtVmtKeWtnZXdvSkNYSmxkSFZ5YmlCS1UwOU9MbkJoY25ObEtISmxjM0J2Ym5ObExtOWlhbVZqZENrS0NYMGdaV3h6WlFvS0NXbG1LSFI1Y0dWdlppQnlaWE53YjI1elpTNW1kVzVqZEdsdmJpQWhQU0FuZFc1a1pXWnBibVZrSnlrZ2V3b0pDV2xtS0hKbGMzQnZibk5sTG5aaGJIVmxLU0I3Q2drSkNYSmxkSFZ5YmlCeVpYTndiMjV6WlM1MllXeDFaUW9KQ1gwZ1pXeHpaU0I3Q2drSkNYSmxjM0J2Ym5ObExuWmhiSFZsSUQwZ0tHRnplVzVqSUdaMWJtTjBhVzl1SUNoeVpYRjFaWE4wTENBdUxpNXdZWEpoYlhNcElIc0tDUWtKQ1M4dklGUlBSRTg2SUdGa1pDQndZWEpoYldWeWRHVnljd29KQ1FrSmJHVjBJSEpsYzNWc2RDQTlJR0YzWVdsMElITmxibVJOWlhOellXZGxLSHNLQ1FrSkNRbHpZM0pwY0hRNklDZGNibkpsZEhWeWJpQW5JQ3NnY21WemNHOXVjMlV1Ym1GdFpTQXJJQ2NvS1R0Y2JpY0tDUWtKQ1gwcENna0pDUWx5WlhSMWNtNGdjbVZ6ZFd4MENna0pDWDBwTG1KcGJtUW9kR2hwY3l3Z2NtVnpjRzl1YzJVcENna0pDWEpsZEhWeWJpQnlaWE53YjI1elpRb0pDWDBLQ1gwZ1pXeHpaUW9LQ1dsbUtIUjVjR1Z2WmlCeVpYTndiMjV6WlM1ZllXTmpaWE56YjNJZ0lUMGdKM1Z1WkdWbWFXNWxaQ2NwSUhzS0NRbHlaWE53YjI1elpTNWZZV05qWlhOemIzSWdQU0JoYzNsdVl5Qm1kVzVqZEdsdmJpQW9hU3dnYkdWbWRDd2djbWxuYUhRc0lHTjBlQ2tnZXdvSkNRbHNaWFFnY0hKdmNDQTlJR04wZUM1aWRXSmliR1ZRY205d1pYSjBlUW9KQ1FsamRIZ3VZblZpWW14bFVISnZjR1Z5ZEhrZ1BTQW5Kd29KQ1FscFppaHNaV1owSUNZbUlHeGxablJiTUYwZ0Nna0pDUWttSmlCc1pXWjBXekJkTG5SNWNHVWdQVDBnSjBGemMybG5ibTFsYm5SRmVIQnlaWE56YVc5dUp5a2dld29KQ1FrSmNtVjBkWEp1SUdGM1lXbDBJR0YzWVdsMElITmxibVJOWlhOellXZGxLSHNLQ1FrSkNRbHpZM0pwY0hRNklIQnliM0FnS3lBbklEMGdTbE5QVGk1d1lYSnpaU2hjSnljZ0t5QktVMDlPTG5OMGNtbHVaMmxtZVNoeWFXZG9kQ2tnS3lBblhDY3BPeWNLQ1FrSkNYMHBDZ2tKQ1gwZ1pXeHpaU0I3Q2drSkNRbHlaWFIxY200Z1lYZGhhWFFnWVhkaGFYUWdjMlZ1WkUxbGMzTmhaMlVvZXdvSkNRa0pDWE5qY21sd2REb2dKM0psZEhWeWJpQW5JQ3NnY0hKdmNBb0pDUWtKZlNrS0NRa0pmUW9KQ1gwS0NRbHlaWFIxY200Z2NtVnpjRzl1YzJVS0NYMGdaV3h6WlFvS0NXbG1LSFI1Y0dWdlppQnlaWE53YjI1elpTNTJZV3gxWlNBaFBTQW5kVzVrWldacGJtVmtKd29KQ1h4OElIUjVjR1Z2WmlCeVpYTndiMjV6WlM1MGVYQmxJQ0U5SUNkMWJtUmxabWx1WldRbktTQjdDZ2tKY21WMGRYSnVJSEpsYzNCdmJuTmxMblpoYkhWbElDOHZJSEJ5YVcxcGRHbDJaU0IwZVhCbGN3b0pmU0JsYkhObElIc0tDUWxrWldKMVoyZGxjZ29KQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduVlc1cmJtOTNiaUJqYjIxdFlXNWtPaUFuTENCeVpYTndiMjV6WlNrS0NYMEtDZ2t2THlCVVQwUlBPaUJsYzNSaFlteHBjMmdnYzNSaGJtUmhjbVFnYW5Wd2VYUmxjaTF0WlhSaExXdGxjbTVsYkNCamIyNXVaV04wYVc5dUNna0tDZ2t2THlCVVQwUlBPaUJ3Y21VdFkyOXVabWxuZFhKbElIQnliM2g1TFc1bGRIZHZjbXRwYm1jZ2JHbHJaU0IwYUdVZ1pXNW5hVzVsSUdSdlpYTXNJR1p5YjI1MFpXNWtDZ29LQ1M4dklGUlBSRTg2SUdGdWVTQnplWE4wWlcwdGJHVjJaV3d2Y0hKdlkyVnpjeTFzWlhabGJDQnpaWEoyYVdObElHMXZibWwwYjNKcGJtY3NJR05oYkd3dGIzVjBDZ29LQ24wS0Nnb0tablZ1WTNScGIyNGdaRzlNYVdKeVlYSjVURzl2YTNWd0tHWjFibU4wYVc5dVRtRnRaU2tnZXdvSmJHVjBJR3hwWW5KaGNubEdhV3hsY3lBOUlFOWlhbVZqZEM1clpYbHpLRVpUTG5acGNuUjFZV3dwQ2dsbWIzSW9iR1YwSUdrZ1BTQXdPeUJwSUR3Z2JHbGljbUZ5ZVVacGJHVnpMbXhsYm1kMGFEc2dhU3NyS1NCN0Nna0phV1lvSVd4cFluSmhjbmxHYVd4bGMxdHBYUzV6ZEdGeWRITlhhWFJvS0Nkc2FXSnlZWEo1THljcEtTQjdDZ2tKQ1dOdmJuUnBiblZsQ2drSmZRb0pDV3hsZENCc2FXSnlZWEo1UTI5a1pTQTlJRUZ5Y21GNUxtWnliMjBvUmxNdWRtbHlkSFZoYkZ0c2FXSnlZWEo1Um1sc1pYTmJhVjFkTG1OdmJuUmxiblJ6S1FvSkNRa3ViV0Z3S0daMWJtTjBhVzl1SUNoaktTQjdJSEpsZEhWeWJpQlRkSEpwYm1jdVpuSnZiVU5vWVhKRGIyUmxLR01wSUgwcENna0pDUzVxYjJsdUtDY25LUW9KQ1M4dklGUlBSRTg2SUcxaGEyVWdkR2hsYzJVZ2RHOXJaVzV6SUdsdWMzUmxZV1FnYjJZZ1puVnVZM1JwYjI0Z1ptOXlJR055YjNOeklHeGhibWQxWVdkbElITjFjSEJ2Y25RS0NRbHBaaWhzYVdKeVlYSjVRMjlrWlM1dFlYUmphQ2h1WlhjZ1VtVm5SWGh3S0FvSkNRa0pKMloxYm1OMGFXOXVYRnh6SnlBcklHWjFibU4wYVc5dVRtRnRaU0FySUNjdUtqOWNYSHNuS1NrcElIc0tDUWtKY21WMGRYSnVJSHNLQ1FrSkNTOHZJRlJQUkU4NklISmxjM0J2Ym5ObFNXUUtDUWtKQ1d4cFluSmhjbms2SUd4cFluSmhjbmxEYjJSbExBb0pDUWtKYm1GdFpUb2dablZ1WTNScGIyNU9ZVzFsTEFvSkNRa0pabWxzWlRvZ2JHbGljbUZ5ZVVacGJHVnpXMmxkTEFvSkNRa0pMeThnVkU5RVR6b2dZU0JvWVhOb0lIWmhiSFZsUHlCamIyUmxJSE5wWjI1cGJtYy9DZ2tKQ1gwS0NRbDlJQzhxSUdWc2MyVWdld29KQ1Fsc1pYUWdZM1Z5Y21WdWRGTmxjM05wYjI0Z1BTQjNhVzVrYjNjdVlXTmxMbWRsZEZaaGJIVmxLQ2tLQ1FrSmFXWWdLR04xY25KbGJuUlRaWE56YVc5dUxtbHVZMngxWkdWektDZG1kVzVqZEdsdmJpQW5JQ3NnWm5WdVkzUnBiMjVPWVcxbEtTa2dld29KQ1FrSmNtVjBkWEp1SUhzS0NRa0pDUWxzYVdKeVlYSjVPaUJqZFhKeVpXNTBVMlZ6YzJsdmJpd0tDUWtKQ1FsdVlXMWxPaUFuUEdWMllXdytKeXdLQ1FrSkNRa3ZMeUJVVDBSUE9pQmhJR2hoYzJnZ2RtRnNkV1UvQ2drSkNRbDlDZ2tKQ1gwS0NRbDlJQ292SUM4dklFTlBSRVVnVWtWV1NVVlhMQ0IwYUdseklHbHpJSGRvZVNCM1pTQnVaV1ZrSUdScFptWmxjbVZ1ZENCamIyNTBaWGgwY3l3Z1ptOXlJRXhwZG1VZ1pXUnBkR2x1WndvSmZRcDlDZ29LQ214bGRDQjBhSEpsWVdSeklEMGdlMzBLQ2k4dklGTkpUa3NLWm5WdVkzUnBiMjRnWjJWMFZHaHlaV0ZrY3lncElIc0tDWEpsZEhWeWJpQktVMDlPTG5OMGNtbHVaMmxtZVNoUFltcGxZM1F1YTJWNWN5aDBhSEpsWVdSektRb0pDUzV0WVhBb1puVnVZM1JwYjI0Z0tISjFia2xrS1NCN0Nna0pDWEpsZEhWeWJpQmJDZ2tKQ1FseWRXNUpaRnN3WFNBcklDY3FLaW9xS2lvbklDc2djblZ1U1dSYmNuVnVTV1F1YkdWdVozUm9MVEZkTEFvSkNRa0pkR2h5WldGa2MxdHlkVzVKWkYwdVluVmlZbXhsVkdsdFpRb0pDUWxkQ2drSmZTa3BDbjBLQ21OdmJuTjBJRlJJVWtWQlJGOVRRVlpGWDFSSlRVVWdQU0F6SUNvZ01UQXdNQ0F2THlBcUlEWXdDZ3BtZFc1amRHbHZiaUJ3Y25WdVpVOXNaRkoxYm5Nb0tTQjdDZ2t2THlCcElHcDFjM1FnZEdodmRXZG9kQ0J0WVhsaVpTQmhJSFJ5WVc1emNHbHNaWElnWTI5dWRtVnlkR1ZrSUdOdlpHVWdkRzhnZG1GeUlIZG9hV05vSUdOb1lXNW5aWE1nYzJOdmNHVWdZVzVrQ2drdkx5QWdJR052ZFd4a0lHMWhhMlVnYVhRZ2RuVnNibVZ5WVdKc1pUOEtDV3hsZENCeWRXNUpaSE1nUFNCUFltcGxZM1F1YTJWNWN5aDBhSEpsWVdSektRb0pabTl5S0d4bGRDQnBJRDBnTURzZ2FTQThJSEoxYmtsa2N5NXNaVzVuZEdnN0lHa3JLeWtnZXdvSkNXeGxkQ0J6Wlc1a1pYSkpaQ0E5SUhSb2NtVmhaSE5iY25WdVNXUnpXMmxkWFM1elpXNWtaWEpKWkFvSkNXbG1LSFJvY21WaFpITmJjblZ1U1dSelcybGRYUzVsYm1SbFpBb0pDUWttSmlCRVlYUmxMbTV2ZHlncElDMGdkR2h5WldGa2MxdHlkVzVKWkhOYmFWMWRMbUoxWW1Kc1pWUnBiV1VnUGlCVVNGSkZRVVJmVTBGV1JWOVVTVTFGS1NCN0Nna0pDV1JsYkdWMFpTQjBhSEpsWVdSelczSjFia2xrYzF0cFhWMEtDUWtKWkc5VGRHRjBkWE1vZXlCelpXNWtaWEpKWkRvZ2MyVnVaR1Z5U1dRZ2ZTd2dabUZzYzJVcENna0pmUW9KZlFvSmFXWW9UMkpxWldOMExtdGxlWE1vZEdoeVpXRmtjeWt1YkdWdVozUm9JRDA5SURBcElIc0tDUWxqYkdWaGNrbHVkR1Z5ZG1Gc0tHOXNaRkoxYmxScGJXVnlLUW9KQ1c5c1pGSjFibFJwYldWeUlEMGdiblZzYkFvSmZRcDlDZ29LWVhONWJtTWdablZ1WTNScGIyNGdaRzlUZEdGMGRYTW9aRzlUYkdWbGNDa2dld29KY21WMGRYSnVDZ2xwWmloMGVYQmxiMllnWTNWeWNtVnVkRU52Ym5SbGVIUWdQVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDWDBLQ1hSeWVTQjdDZ2tKYkdWMElITjBZWFIxYzFWd1pHRjBaU0E5SUhzZ0Nna0pDUzh2SUdGc2QyRjVjeUJ6ZFdKMGNtRmpkQ0F4SUdKbFkyRjFjMlVnWTI5a1pTQnBjeUIzY21Gd2NHbHVaeUJwYmlCaElERXRiR2x1WlNCbWRXNWpkR2x2YmlCaFltOTJaUW9KQ1Fsc2FXNWxPaUJqZFhKeVpXNTBRMjl1ZEdWNGRDNWlkV0ppYkdWTWFXNWxJQzBnTVN3S0NRa0pjM1JoWTJzNklHTjFjbkpsYm5SRGIyNTBaWGgwTG1KMVltSnNaVk4wWVdOckxBb0pDUWxtYVd4bE9pQmpkWEp5Wlc1MFEyOXVkR1Y0ZEM1aWRXSmliR1ZUZEdGamExdGpkWEp5Wlc1MFEyOXVkR1Y0ZEM1aWRXSmliR1ZUZEdGamF5NXNaVzVuZEdndE1WMWJNVjBzQ2drSmZRb0pDV2xtS0dOMWNuSmxiblJEYjI1MFpYaDBMbVZ1WkdWa0tTQjdDZ2tKQ1hOMFlYUjFjMVZ3WkdGMFpTNXpkRzl3Y0dWa0lEMGdaMlYwVkdoeVpXRmtjeWdwQ2drSmZTQmxiSE5sSUdsbUlDaGpkWEp5Wlc1MFEyOXVkR1Y0ZEM1d1lYVnpaV1FwSUhzS0NRa0pjM1JoZEhWelZYQmtZWFJsTG5CaGRYTmxaQ0E5SUdkbGRGUm9jbVZoWkhNb0tRb0pDWDBnWld4elpTQjdDZ2tKQ1hOMFlYUjFjMVZ3WkdGMFpTNXpkR0YwZFhNZ1BTQm5aWFJVYUhKbFlXUnpLQ2tLQ1FsOUNna0pjMlZ1WkUxbGMzTmhaMlVvYzNSaGRIVnpWWEJrWVhSbEtUc0tDUWt2TDJOdmJuTnZiR1V1Ykc5bktHTjFjbkpsYm5SRGIyNTBaWGgwTG1KMVltSnNaVXhwYm1VcENna0pMeThnWkc5dUozUWdjMnhsWlhBZ2IyNGdiR2xpY21GeWVTQm1kVzVqZEdsdmJuTUtDUWxwWmloa2IxTnNaV1Z3SUNZbUlHTjFjbkpsYm5SRGIyNTBaWGgwTG1KMVltSnNaVVpwYkdVZ1BUMGdKenhsZG1Gc1BpY3BJSHNLQ1FrSlkyOXVjMjlzWlM1c2IyY29KMFJGVEVGWlNVNUhJU0FuSUNzZ1kzVnljbVZ1ZEVOdmJuUmxlSFF1WW5WaVlteGxUR2x1WlNrS0NRa0paR1ZpZFdkblpYSUtDUWtKWVhkaGFYUWdibVYzSUZCeWIyMXBjMlVvY21WemIyeDJaU0E5UGlCelpYUlVhVzFsYjNWMEtISmxjMjlzZG1Vc0lFUkZSa0ZWVEZSZlUwaFBVbFJmUkVWTVFWa3BLUW9KQ1gwS0NYMGdZMkYwWTJnZ0tHVXBJSHNLQ1FscFppaGxMbTFsYzNOaFoyVXVhVzVqYkhWa1pYTW9KMk52Ym5SbGVIUWdhVzUyWVd4cFpHRjBaV1FuS1NrZ2V3b0pDUWt2THlCcFoyNXZjbVVzSUdoaGNIQmxibk1nYjI0Z2NtVm1jbVZ6YUNCemIyMWxkR2x0WlhNS0NRbDlJR1ZzYzJVZ2V3b0tDUWw5Q2dsOUNuMEtDbVoxYm1OMGFXOXVJR2RsZEV4dlkyRnNjeWhqZEhncElIc0tDV3hsZENCeVpYTjFiSFFnUFNCamRIZ3ViRzlqWVd4V1lYSnBZV0pzWlhNS0NXbG1LSFI1Y0dWdlppQmpkSGd1Ykc5allXeEVaV05zWVhKaGRHbHZibk1nUFQwZ0ozVnVaR1ZtYVc1bFpDY3BJSHNLQ1FseVpYUjFjbTRnZTMwS0NYMEtDV1p2Y2loc1pYUWdhU0E5SURBN0lHa2dQQ0JqZEhndWJHOWpZV3hFWldOc1lYSmhkR2x2Ym5NdWJHVnVaM1JvT3lCcEt5c3BJSHNLQ1Fsc1pYUWdiRzlqWVd4RGRIZ2dQU0JqZEhndWJHOWpZV3hFWldOc1lYSmhkR2x2Ym5OYmFWMEtDUWxzWlhRZ2JHOWpZV3hXWVhKcFlXSnNaWE1nUFNCUFltcGxZM1F1YTJWNWN5aHNiMk5oYkVOMGVDa0tDUWxtYjNJb2JHVjBJR3dnUFNBd095QnNJRHdnYkc5allXeFdZWEpwWVdKc1pYTXViR1Z1WjNSb095QnNLeXNwSUhzS0NRa0pjbVZ6ZFd4MFcyeHZZMkZzVm1GeWFXRmliR1Z6VzJ4ZFhTQTlJSFI1Y0dWdlppQnNiMk5oYkVOMGVGdHNiMk5oYkZaaGNtbGhZbXhsYzF0c1hWMEtDUWw5Q2drSmJHVjBJR3h2WTJGc1VISnZjR1Z5ZEdsbGN5QTlJRTlpYW1WamRDNW5aWFJQZDI1UWNtOXdaWEowZVU1aGJXVnpLR3h2WTJGc1EzUjRLUW9KQ1dadmNpaHNaWFFnYXlBOUlEQTdJR3NnUENCc2IyTmhiRkJ5YjNCbGNuUnBaWE11YkdWdVozUm9PeUJyS3lzcElIc0tDUWtKY21WemRXeDBXMnh2WTJGc1VISnZjR1Z5ZEdsbGMxdHJYVjBnUFNCMGVYQmxiMllnYkc5allXeERkSGhiYkc5allXeFFjbTl3WlhKMGFXVnpXMnRkWFFvSkNYMEtDUWxzWlhRZ2NHRnlaVzUwVDJKcVpXTjBJRDBnVDJKcVpXTjBMbWRsZEZCeWIzUnZkSGx3WlU5bUtHeHZZMkZzUTNSNEtRb0pDWGRvYVd4bEtIQmhjbVZ1ZEU5aWFtVmpkQzVqYjI1emRISjFZM1J2Y2lBaFBUMGdUMkpxWldOMENna0pDU1ltSUhCaGNtVnVkRTlpYW1WamRDNWpiMjV6ZEhKMVkzUnZjaUFoUFQwZ1FYSnlZWGtwSUhzS0NRa0piR1YwSUd4dlkyRnNVSEp2Y0dWeWRHbGxjeUE5SUU5aWFtVmpkQzVuWlhSUGQyNVFjbTl3WlhKMGVVNWhiV1Z6S0hCaGNtVnVkRTlpYW1WamRDa0tDUWtKWm05eUtHeGxkQ0JxSUQwZ01Ec2dhaUE4SUd4dlkyRnNVSEp2Y0dWeWRHbGxjeTVzWlc1bmRHZzdJR29yS3lrZ2V3b0pDUWtKY21WemRXeDBXMnh2WTJGc1VISnZjR1Z5ZEdsbGMxdHFYVjBnUFNCMGVYQmxiMllnYkc5allXeERkSGhiYkc5allXeFFjbTl3WlhKMGFXVnpXMnBkWFFvSkNRbDlDZ2tKQ1hCaGNtVnVkRTlpYW1WamRDQTlJRTlpYW1WamRDNW5aWFJRY205MGIzUjVjR1ZQWmlod1lYSmxiblJQWW1wbFkzUXBDZ2tKZlFvSmZRb0pjbVYwZFhKdUlISmxjM1ZzZEFwOUNnb0tMeThnUWs5UFZGTlVVa0ZRSUVOUFJFVS9DbWxtS0hSNWNHVnZaaUJ0YjJSMWJHVWdJVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDVzF2WkhWc1pTNWxlSEJ2Y25SeklEMGdld29KQ1dSdlFXTmpaWE56YjNJc0Nna0piMjVCWTJObGMzTnZjaXdLQ1Fsa2IweHBZbkpoY25sTWIyOXJkWEFzQ2dsOUNuMEtDZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9yaG9vZC9pY2xvdWQuanNfdGltZXN0YW1wJ109MTY1MDg5OTI2NjQzMDsKd2luZG93LnByZUZTWydsaWJyYXJ5L3Job29kL2ljbG91ZC5qcyddPSdMeW9LQ2dwUVVrVlVWRmtnUmxWRFMwbE9SeUJVU1ZKRlJDQlBSaUJPVDFRZ1JFVlRSVkpXU1U1SElGUklSU0FpUmxKRlJTSWdWRWxGVWk0S1QxSWdRa2xISUZSRlEwZ2dVMVJGUVV4SlRrY2dUVTlPUlZrZ1JsSlBUU0JUVFVGTVRDQkNWVk5KVGtWVFV5QkJUa1FnUVVSRVNVNUhJRTFGVTFNS1ZFOGdWRWhGU1ZJZ1YwOVNTMFpNVDFjdlJWSlFJRk5aVTFSRlRWTXVJQ2dxUTA5VlIwZ3FJRk5YU1VaVVVFRkhSU2tLQ2xKRlVFeEpRMEZVUlNCVFJWSldTVU5GVXlCQ1dTQlNSVkJNU1VOQlZFbE9SeUJGVFVGSlRDQkJSRVJTUlZOVFJWTWdRVTVFSUFwQlFsVlRTVTVISUVaU1JVVWdWRWxGVWxNZ1JrOVNJRU5NVDFWRUlGTkZVbFpKUTBWVExpQlVTRVZPSUZSQlMwVWdWRWhGSUVOUFRsUkZUbFFLUVU1RUlGQlNSVk5GVGxRZ1QxWkZVaUJPVDFKTlFVd3NJRmRGVEV3Z1JFVlRTVWRPUlVRZ1RVVkVTVUVnVEVsTFJTQkpWQ0JUU0U5VlRFUWdRa1V1Q2dwSFNWUklWVUlnUVVOVVNVOU9VeUJHVDFJZ1UwTklSVVJWVEVsT1J5QkNRVk5GUkNCUFRpQkZUa05TV1ZCVVJVUWdSRVZRVDFOSlZGTXVDZ3BWVTBVZ1VFRkpSQ0JVU1VWU1V5QlVUeUJOUVU1SlVGVk1RVlJGSUVaU1JVVWdWRWxGVWxNdUNnb3FMd29LQ2dvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvcmhvb2QvcGF5LmpzX3RpbWVzdGFtcCddPTE2NTA5MDc4NjU0NDY7CndpbmRvdy5wcmVGU1snbGlicmFyeS9yaG9vZC9wYXkuanMnXT0nQ2k4cUNnb0tDbE5KVGtORklGUklSU0JWVXlCVVNFbE9TMU1nU1ZRblV5QkdWVTRnVkU4Z1FsVk1URmtnU1ZKQlRpQlBWa1ZTSUZSSVJTQlRTVXhMSUZKUFFVUXVJQ2hVU0VVZ1VrVkJUQ0JQVGtVZ1RrOVVJRlJJUlNCRVNVZEpWRUZNSUUxQlVrdEZWRkJNUVVORktRb0tURVZVSjFNZ1NFRldSU0JUVDAxRklFWlZUaUJYU1ZSSUlFSkJUa3RKVGtjdUlGZElRVlFnU1ZNZ1ZFaEZJRVpCVTFSRlJDQlNUMVZVUlFwSklFTkJUaUJVUVV0RklFMVBUa1ZaSUVaU1QwMGdVMDlOUlU5T1JTd2dVa1ZIUVZKRVRFVlRVeUJQUmlCUVEwa3RJa1JGVTBsSFRpSS9DZ3BKUmxKQlRVVS9JRlpPUXlCR1VrRk5SVDhnUTBoU1QwMUZJRkJCV1UxRlRsUWdRVkJKUHlCVlUwVWdRU0JDVDFRZ1ZFOGdRMUpGUVZSRkNrRWdURVZIU1ZSSlRVRlVSU0JNVEVNc0lFSlBVbEpQVnlBa01UQXdJRVpQVWlCQlZWUklMazVGVkNCU1JVZEpVMVJTUVZSSlQwNC9DZ3BFUlZCUFUwbFVJRTVWVFVKRlVsTWdSVTVEVWxsUVZFVkVJRWxPVkU4Z1IwbFRWQzVIU1ZSSVZVSUtDbEJEU1MxRVUxTWdSVmhKVTFSVElFRlRJRUVnVTFSQlRrUkJVa1FzSUZOUElFbEdJRWtnUms5TVRFOVhJRlJJUlNCSlRsTlVVbFZEVkVsUFRsTXNJRWtLUTBGT0oxUWdRa1VnUVVORFZWTkZSQ0JQUmlCTlJVNVRJRkpCUlN3Z1NVNVVSVTVVU1U5T1FVeE1XU0JCVGtRZ1ExSkpUVWxPUVV4TVdTQlFWVlJVU1U1SENsQkZUMUJNUlNkVElFMVBUa1ZaSUVGVUlGSkpVMHN1Q2dwVVQwUlBPZ3BCVlZSSUxrNUZWQ0JYUlVJdFJrOVNUU0JHVEU5WElGVlRSU0JVVHlCRlRrTlNXVkJVSUZSSVJTQkpUa1pQVWsxQlZFbFBUaUJEVEVsRlRsUWdVMGxFUlM0Z1ZFaEpVd3BUU0U5VlRFUWdRa1VnVTBWRFZWSkZJRVZXUlU0Z1QxWkZVaUJJVkZSUUlDaE9UMVFnU0ZSVVVGTXBMZ3BRVWs5Q1FVSk1XU0JVU0VWWklFaEJWa1VnVWxWSlRrVkVJRlJJU1ZNZ1JreFBWeUJCVGtRZ1JWaFFSVkpKUlU1RFJTNGdTU0JTUlUxRlRVSkZVaUJUUlZSVVNVNUhJRWxVQ2xWUUlGZEpWRWdnVTFSVlJGbFRRVlZEUlNCWFFWTWdRU0JRUVVsT0lFbE9JRlJJUlNCQlUxTXVJRUZPUkNCT1QxUWdSVlpGVGlCVVNFVWdRMGhGUVZCRlUxUWdUMFpHUlZKSlRrY3VDZ3BFVWtGWFNVNUhJRVpTVDAwZ1ZFaEpVeTRnUVVSRUlFRWdRbFZPUTBnZ1QwWWdRMUpCVUNCRVFWUkJJRlJQSUZSSVJTQkZUa05TV1ZCVVNVOU9JRlpCVEZWRkNsZEpWRWdnUWtGVFJUWTBJRUZPUkNCU1FVNUVUMDBnVGxWTlFrVlNVeUJKVGlCQ1JWUlhSVVZPSUVGRVJGSkZVMU5GVXl3Z1ZFaEZUaUJWVTBVZ1UwVk5RVTVVU1VNS1FVNUJURmxUU1ZNZ1ZFOGdSa2xPUkNCVVNFVWdUa0ZOUlNCQlRrUWdRMUpGUkVsVUlFTkJVa1FnVGxWTlFrVlNJRVpTVDAwZ1ZFaEZJRk5VUVU1RVFWSkVJRXhKVTFRS1JsSlBUU0JVU0VVZ1JVNURVbGxRVkVWRUlFUkJWRUV1SUZOVVQxSkZJRWxVSUV4UFEwRk1URmtnUlU1RFVsbFFWRVZFSUZkSlZFZ2dUMVZTSUU5VVNFVlNJRk5EU0VWTlJWTUtWMGxVU0NCUFRrVWdRVVJFU1ZSSlQwNUJUQ0JNUVZsRlVpQlBSaUJGVGtOU1dWQlVTVTlPTGlCVVNFVWdVMFZTVmtWU0lFZEZUa1ZTUVZSRlJDQkJJRkJTU1ZaQlZFVWdTMFZaQ2taUFVpQkZWa1ZTV1NCVFJWTlRTVTlPSUVOTVNVVk9WQ0FvVkU5RVR6b2dTVVlnVTBWVFUwbFBUaUJKVXlCU1JWTlVUMUpGUkNCQlRrUWdRVTVUVjBWU0lFbFRJRmxGVXk0cENsZElSVTRnVFU5U1VFaEZWVk1nUTA5T1JrbFNUVk1nVkVoRklGVlRSVklnUjA5RlV5QkNRVU5MSUZSUElGUklSU0JRUVVkRklFRk9SQ0JVU0VWSlVpQlFVa2xXUVZSRkNrdEZXU0JKVXlCVVVrRk9VMFpGVWtWRUlGUlBJRVJGUTFKWlVGUWdWRWhGSUVKQlEwdEZUa1FnUkU5VlFreFpJRVZPUTFKWlVGUkZSQ0JUVkU5U1JVUWdRMUpGUkVsVUNrbE9SazlTVFVGVVNVOU9MaUJVU0VGVUlFVk9RMUpaVUZSRlJDQldRVXhWUlNCWFQxVk1SQ0JDUlNCU1JVVk9RMUpaVUZSRlJDQlhTVlJJSUVFZ1VFRkhSU0JMUlZrS1ZFaEJWQ0JKVXlCVFNFRlNSVVFnVjBsVVNDQlVTRVVnVTBWU1ZrVlNJRlJQSUVaSlRrRk1URmtnUkVWRFVsbFFWQ0JCVGtRZ1VFRlRVeUJVVHlCVVNFVWdVRUZIUlM0S1ZFaEZJRTlPVEZrZ1FVUkVTVlJKVDA1QlRDQlRSVU5WVWtsVVdTQkpVeUJVU0VVZ1JWaFVVa0VnVTBWVFUwbFBUaUJRVlVJdlVGSkpWaUJMUlZrZ1VFRkpVaUJUVHdwTlQxSlFTRVZWVXlCRFFVNGdVa1ZEVDA1R1NWSk5JRWxHSUZsUFZTQlhRVTVVSUZSUElFMUJTMFVnUVNCRVQwNUJWRWxQVGk0S0NsUklTVk1nU1ZNZ1NVNVVSVkpGVTFSSlRrY2dSbEpQVFNCQlRpQlZVMFZTSUVWWVVFVlNTVVZPUTBVZ1VFVlNVMUJGUTFSSlZrVWdRa1ZEUVZWVFJTQk5UMU5VSUFwVFJWSldTVU5GVXlCQlVrVWdVRkpGVkZSWklFOVFRVkZWUlNCQlFrOVZWQ0JaVDFWU0lFSkpURXhKVGtjZ1JFRlVSVk11SUNKWFNFVk9SVlpGVWlCWlQxVWdVMGxIVGtWRUNsVlFJaUJVU0VWWklGTkJXUzRnUVU1RUlGbEZWQ3dnVkVoRldTQlVRVXRGSUZOSlIwNHRWVkJUSUU5T0lGTlZUa1JCV1ZNZ1YwaEZUaUJDUVU1TFV5QkJVa1VnUTB4UFUwVkVMZ3BEVDAxUVRFVlVSVXhaSUVaVlEwdEpUa2NnU0ZsUVQwTlNTVlJKUTBGTUlFWlBVaUJTU1VOSUlFSlBUMDFGVWxNZ1RrOVVJRlJQSUV0T1QxY2dWMGhCVkNCRVFWa2dWRWhGU1ZJS1UwVlNWa2xEUlNCQ1NVeE1VeUJQVGlCS1ZWTlVJRUpGUTBGVlUwVWdWRWhGV1NCQlRGSkZRVVJaSUVoQlJDQlVTRVVnUWxWRVIwVlVJRVpQVWlCSlZDNGdWMFVuVWtVZ1ZFRk1TMGxPUndwQlFrOVZWQ0JGVGxSRlVsUkJTVTVOUlU1VUlFaEZVa1VzSUU1UFZDQkRMVkJCVUNCR1NVeFVSVkpUTGdvS1FsVlVJRk5RUlVOSlJrbERRVXhNV1NCWFNWUklJRTFQVWxCSVJWVlRJRUZUUzBsT1J5QlFSVkpOU1ZOVFNVOU9JRlJQSUVOSVFWSkhSU0JaVDFWU0lFTkJVa1FnUVVoRlFVUWdUMFlnVkVsTlJRcFVTRUZVSUVsVElFRk9JRWxPVkVWU1JWTlVTVTVISUVsT1ZFVlNSa0ZEUlNCQ1JVTkJWVk5GSUVsVUlGZFBWVXhFVGlkVUlGSkZRVXhNV1NCTlFWUlVSVklnU1U0Z1ZFaEJWQ0JOVDAxRlRsUUtWMGhGVWtVZ1ZFaEZJRU5CVWtRZ1RsVk5Ra1ZTSUU5U0lGUklSU0JOVDA1RldTQkpVeUJEVDAxSlRrY2dSbEpQVFNCQ1JVTkJWVk5GSUZSSVJTQlFSVkpUVDA0Z1NWTWdRVXhTUlVGRVdTQUtRMDlPVmtsVVJVUWdWRThnUVNCWlJWTXZUazh1SUZOUElFbEdJRlJJUlZrZ1ZrbFRTVlFnUVNCUVFVZEZJRlJQSUVGT1UxZEZVaUJaUlZNc0lFRk9SQ0JVU0VVZ1EwRlNSQ0JKVGtaUENrTlBUVVZUSUVaU1QwMGdWRWhGU1ZJZ1QxZE9JRXhQUTBGTUlGTlVUMUpCUjBVc0lGUklSVmtnUkU5T0oxUWdVa1ZCVEV4WklFVldSVklnU0VGV1JTQlVUeUJGVGxSRlVpQlVTRVVnQ2tOQlVrUWdUbFZOUWtWU0lFRkhRVWxPTGlBS0NrVldSVTRnVFU5U1JTQkpUbFJGVWtWVFZFbE9SeUJKVXl3Z1NVWWdWRWhGSUVOQlVrUWdUbFZOUWtWU0lFbFRJRlJCUzBWT0lFRk9SQ0JGVGxSRlVrVkVJRTlPVkU4Z1FTQlhSVUpUU1ZSRkNrRlRJRWxHSUVsVUlGZEJVeUJKVGlCSVFVNUVMQ0JCVGtRZ1ZFaEZUaUJVU0VVZ1FrRk9TMGxPUnlCQlVGQWdUVVZUVTBGSFJWTWdRVk5MU1U1SElFbEdJRlJJUlZrZ1RVVkJUbFFnVkU4S1VGVlNRMGhCVTBVZ1UwOU5SVlJJU1U1SExDQlVTRVZaSUZkSlRFd2dRVXhTUlVGRVdTQkNSU0JKVGlCVVNFVWdVRkpQUTBWVFV5QlBSaUJTUlZOUVQwNUVTVTVISUNKWlJWTWlJRlJQSUFwTlQxSlFTRVZWVXk0S0NsUklTVk1nU1ZNZ1FWZExWMEZTUkNCQ1JVTkJWVk5GSUZCRlVraEJVRk1nVkVoRlVrVW5VeUJCSUVKVlUwbE9SVk5USUZSSVJTQkNRVTVMSUVGTVVrVkJSRmtnUzA1UFYxTWdTVk1nUWtGRUNrSlZWQ0JVU0VVZ1VFVlNVMDlPSUVsVElGUlNXVWxPUnlCVVR5QkNWVmtnUmxKUFRTQlVTRVZOSUVGT1dWZEJXVk0vSUZORlJVMVRJRXhKUzBVZ1UwOU5SVTlPUlNCVFNFOVZURVFLUkU4Z1UwOU5SVlJJU1U1SElFRkNUMVZVSUZSSVFWUXVJQW9LVFU5U1VFaEZWVk1nVjA5T0oxUWdUVUZMUlNCVVNFVlRSU0JMU1U1RVV5QlBSaUJGV0ZCRlRrUkpWRlZTUlZNdUNnb0tDaW92Q2dvSyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvcmhvb2QvdGl0aGUuanNfdGltZXN0YW1wJ109MTY1MDkwMDI0NTk4OTsKd2luZG93LnByZUZTWydsaWJyYXJ5L3Job29kL3RpdGhlLmpzJ109J0x5b0tDazFCVGtsUVZVeEJWRWxXUlNCTVFVNUVTVTVISUZCQlIwVlRMZ29LV1U5VklGTlVTVXhNSUVoQlZrVWdWRThnVkVsVVNFVWdSVlpGVGlCSlJpQlpUMVVnUkU5T0oxUWdSMDhnVkU4Z1EwaFZVa05JTGdvS0Npb3ZDZ29LQ2c9PSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc2NhZmZvbGRpbmcvYnVpbGQueW1sX3RpbWVzdGFtcCddPTE2NTE1OTU3MzIzNTM7CndpbmRvdy5wcmVGU1snbGlicmFyeS9zY2FmZm9sZGluZy9idWlsZC55bWwnXT0nSXlCcWRYTjBJR0VnZEdWdGNHeGhkR1VnWm05eUlIRjFhVzVsSUhSdklIQjFjMmdnYjNWMElIUnZJR2RwZEdoMVlpQjBieUJ0WVd0bElHbDBDaU1nSUNCamIyMXRkVzVwWTJGMFpTQnBiaUJ5WldGc0lIUnBiV1VzSUd4dmJBb2pJR2h2ZHlCbWRXNXVlU0IzYVd4c0lHbDBJR0psSUhSdklIQmhkWE5sSUdsdUlHRWdUV0ZyWldacGJHVXNJSEJwWTJzZ2IzVjBJR0VnWkdsbVptVnlaVzUwQ2lNZ0lDQldUU0J2YmlCSGFYUm9kV0lnZEc4Z1luVnBiR1FnWVc1dmRHaGxjaUJqYjIxd2IyNWxiblFzSUdGdVpDQkhhWFJvZFdJZ2QyOXVKM1FnYTI1dmR5QmhibmtnWkdsbVptVnlaVzUwQ2lNZ1NYUW5jeUJoYkd3Z2FuVnpkQ0JEU1NCMGJ5QjBhR1Z0TENCaWRYUWdTU0JqYjNWc1pDQjFjMlVnZEdocGN5QnplWE4wWlcwZ2RHOGdUR2wyWlNCamIyUmxJR0VnUkc5amEyVnlabWxzWlFvaklDQWdibThnYlc5eVpTQnZaaUIwYUdseklFSlRJRzkyWlhKeWFXUmxJSFJvWlNCemRHRnlkQ0JqYjIxdFlXNWtJSFJ2SUhKMWJpQmlZWE5vTENCSklHNWxaV1FnZEc4Z1lXTjBkV0ZzYkhrS0l5QWdJSEJoZFhObElHRnVJR1ZrYVhRZ1lTQmlZWE5vSUhOamNtbHdkQ0JoY3lCcGRDQnBjeUJ5ZFc1dWFXNW5MaUF0SUV4TVZrMGdDaU1nSUNBb1lua2dkMkY1SUc5bUlFRk9WRXhTSUdGdVpDQmhkSFJoWTJocGJtY2djM1JrYVc4cElFa2dZMkZ1SUdsdWRHVnljSEpsZENCaElHSmhjMmdnYzJOeWFYQjBJR0Z1WkNCMWMyVWdaWGhwYzNScGJtY0tJeUFnSUVkcGRHaDFZaUJ6ZFhCd2IzSjBJSE41YzNSbGJYTWdiR2xyWlNCMGFHVWdRMjkxY25RZ1NtVnpkR1Z5TGlCTllXdGxJSFJvWlcwZ1pHRnVZMlV1Q2lNZ1NTQnphRzkxYkdRZ1ltVWdZV0pzWlNCMGJ5QnRZWEFnV0ZaT1F5QnpaWE56YVc5dWN5QnBiblJ2SUU5d1pXNUhUQ0J6YUdGa1pYSnpJR0Z1WkNCdFlXdGxJR0VnY21WaGJBb2pJQ0FnYkc5dmEybHVaeUIyYVhKMGRXRnNJRU5sY21WaWNtOGdkMmwwYUNCc2IzUnpJRzltSUhOMGNtVmhiWE1nWkdsemNHeGhlV2x1WnlCaGJHd2dZWFFnYjI1alpTNEtJeUFnSUVodmR5QmpZVzRnU1NCM1lYUmphQ0F4TURBd0lHbHVjM1JoWjNKaGJXMXBaWE1nWVhRZ2RHaGxJSE5oYldVZ2RHbHRaVDhLQ2dvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc2NyaXB0cy9hdHRhY2guY3NfdGltZXN0YW1wJ109MTY0OTg3OTUyNjA5NjsKd2luZG93LnByZUZTWydsaWJyYXJ5L3NjcmlwdHMvYXR0YWNoLmNzJ109J2NISnBkbUYwWlNCSlYyVmlSSEpwZG1WeUlFUnlhWFpsY2lCN0lHZGxkRHNnYzJWME95QjlDZ292THlCVGIyMWxJR0poYzJsaklGTmxiR1Z1YVhWdElHTmhiR3h6SUhkbDRvQ1piR3dnZFhObElHbHVJRzkxY2lCMFpYTjBjd3B3ZFdKc2FXTWdkbTlwWkNCQmRIUmhZMmhVYjBOb2NtOXRaU2dwQ25zS0lDQWdJRU5vY205dFpVOXdkR2x2Ym5NZ2IzQjBhVzl1Y3lBOUlHNWxkeUJEYUhKdmJXVlBjSFJwYjI1ektDazdDaUFnSUNCdmNIUnBiMjV6TGtSbFluVm5aMlZ5UVdSa2NtVnpjeUE5SUNJeE1qY3VNQzR3TGpFNk9USXlNaUk3Q2dvZ0lDQWdMeThnVlhOcGJtY2dVRzlzYkhrZ2JHbGljbUZ5ZVRvZ2FIUjBjSE02THk5bmFYUm9kV0l1WTI5dEwwRndjQzEyVG1WNGRDOVFiMnhzZVFvZ0lDQWdMeThnVUc5c2JIa2djSEp2WW1GaWJIa2dhWE51SjNRZ2JtVmxaR1ZrSUdsdUlHRWdjMmx1WjJ4bElITmpaVzVoY21sdklHeHBhMlVnZEdocGN5d2dZblYwSUdOaGJpQmlaU0IxYzJWbWRXd2dhVzRnWVNCaWNtOWhaR1Z5SUdGMWRHOXRZWFJwYjI0Z2NISnZhbVZqZEFvZ0lDQWdMeThnVDI1alpTQjNaU0JoZEhSaFkyZ2dkRzhnUTJoeWIyMWxJSGRwZEdnZ1UyVnNaVzVwZFcwc0lIVnpaU0JoSUZkbFlrUnlhWFpsY2xkaGFYUWdhVzF3YkdWdFpXNTBZWFJwYjI0S0lDQWdJSFpoY2lCd2IyeHBZM2tnUFNCUWIyeHBZM2tLSUNBZ0lDQWdMa2hoYm1Sc1pUeEpiblpoYkdsa1QzQmxjbUYwYVc5dVJYaGpaWEIwYVc5dVBpZ3BDaUFnSUNBZ0lDNVhZV2wwUVc1a1VtVjBjbmtvTVRBc0lIUWdQVDRnVkdsdFpWTndZVzR1Um5KdmJWTmxZMjl1WkhNb01Ta3BPd29LSUNBZ0lIQnZiR2xqZVM1RmVHVmpkWFJsS0NncElEMCtJQW9nSUNBZ2V3b2dJQ0FnSUNBZ0lFUnlhWFpsY2lBOUlHNWxkeUJEYUhKdmJXVkVjbWwyWlhJb2IzQjBhVzl1Y3lrN0NpQWdJQ0I5S1RzS2ZRb0tMeThnUVhSMFlXTm9WRzlEYUhKdmJXVlVaWE4wTG1OekNsdFVaWE4wVFdWMGFHOWtYUXB3ZFdKc2FXTWdkbTlwWkNCTVlYVnVZMmhEYUhKdmJXVkJibVJCZEhSaFkyZ29LUXA3Q2lBZ0lDQXZMeUJQY0dWdUlGZFFSaUJoY0hCc2FXTmhkR2x2Yml3Z2JXRnJaU0J6ZFhKbElHRWdZblYwZEc5dUlHbHpJSEJ5WlhObGJuUXNJSFJvWlc0Z1kyeHBZMnNnYVhRZ2RHOGdiR0YxYm1Ob0lFTm9jbTl0WlFvZ0lDQWdRWE56WlhKMExrbHpWSEoxWlNoWGFXNWtiM2N1VEdGMWJtTm9Rbkp2ZDNObGNrSjFkSFJ2Ymk1RWFYTndiR0Y1WldRc0lBb2dJQ0FnSUNBZ0lDSkZlSEJsWTNSbFpDQmlkWFIwYjI0Z2JtVjJaWElnWVhCd1pXRnljeTRpS1RzS0lDQWdJRmRwYm1SdmR5NU1ZWFZ1WTJoQ2NtOTNjMlZ5UW5WMGRHOXVMa05zYVdOcktDazdDZ29nSUNBZ0x5OGdRWFIwWVdOb0lIUnZJRzVsZHlCRGFISnZiV1VnYVc1emRHRnVZMlVLSUNBZ0lGQmhaMlV1UVhSMFlXTm9WRzlEYUhKdmJXVW9LVHNLQ2lBZ0lDQXZMeUJXWlhKcFpua2dRMmh5YjIxbElHeGhkVzVqYUdWa0lIUnZJSFJvWlNCamIzSnlaV04wSUhCaFoyVUtJQ0FnSUVGemMyVnlkQzVCY21WRmNYVmhiQ2dpYUhSMGNITTZMeTlwYm5SbGJHeHBkR1ZqZEM1amIyMHZZbXh2Wnk4aUxDQlFZV2RsTGtSeWFYWmxjaTVWY213cE93b2dJQ0FnUVhOelpYSjBMa2x6VkhKMVpTaFFZV2RsTGtKc2IyZE1hWE4wTGtScGMzQnNZWGxsWkNrN0NpQWdJQ0JCYzNObGNuUXVTWE5VY25WbEtGQmhaMlV1UW14dlowaGxZV1JwYm1kekxrTnZkVzUwSUQ0Z01DazdDbjBLY0hKcGRtRjBaU0JYYVc1a2IzY2dWMmx1Wkc5M0lEMCtJRzVsZHlCWGFXNWtiM2NvS1RzS2NISnBkbUYwWlNCUVlXZGxWVzVrWlhKVVpYTjBJRkJoWjJVZ2V5Qm5aWFE3SUgwZ1BTQnVaWGNnVUdGblpWVnVaR1Z5VkdWemRDZ3BPd29LJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9zY3JpcHRzL2Nocm9tZWRyaXZlci5qYXZhX3RpbWVzdGFtcCddPTE2NDk4NzkzNjczOTQ7CndpbmRvdy5wcmVGU1snbGlicmFyeS9zY3JpcHRzL2Nocm9tZWRyaXZlci5qYXZhJ109J2FXMXdiM0owSUdwaGRtRXVkWFJwYkM1amIyNWpkWEp5Wlc1MExsUnBiV1ZWYm1sME93cHBiWEJ2Y25RZ2IzSm5MbTl3Wlc1eFlTNXpaV3hsYm1sMWJTNUNlVHNLYVcxd2IzSjBJRzl5Wnk1dmNHVnVjV0V1YzJWc1pXNXBkVzB1VjJWaVJISnBkbVZ5T3dwcGJYQnZjblFnYjNKbkxtOXdaVzV4WVM1elpXeGxibWwxYlM1WFpXSkZiR1Z0Wlc1ME93cHBiWEJ2Y25RZ2IzSm5MbTl3Wlc1eFlTNXpaV3hsYm1sMWJTNWphSEp2YldVdVEyaHliMjFsUkhKcGRtVnlPd3BwYlhCdmNuUWdiM0puTG5SbGMzUnVaeTVCYzNObGNuUTdDbWx0Y0c5eWRDQnZjbWN1ZEdWemRHNW5MbUZ1Ym05MFlYUnBiMjV6TGtGbWRHVnlWR1Z6ZERzS2FXMXdiM0owSUc5eVp5NTBaWE4wYm1jdVlXNXViM1JoZEdsdmJuTXVRbVZtYjNKbFZHVnpkRHNLYVcxd2IzSjBJRzl5Wnk1MFpYTjBibWN1WVc1dWIzUmhkR2x2Ym5NdVZHVnpkRHNLQ21sdGNHOXlkQ0J1WlhRdVlubDBaV0oxWkdSNUxtUmxjMk55YVhCMGFXOXVMblI1Y0dVdVZIbHdaVVJsYzJOeWFYQjBhVzl1TGtkbGJtVnlhV011VDJaVWVYQmxWbUZ5YVdGaWJHVXVVM2x0WW05c2FXTTdDZ3B3ZFdKc2FXTWdZMnhoYzNNZ1RHRnRZbVJoVkdWemRFeHZaMmx1SUhzS0Nna3ZMME55WldGMFpXUWdjbVZtWlhKbGJtTmxJRzltSUZkbFlrUnlhWFpsY2dvSmNIVmliR2xqSUhOMFlYUnBZeUJYWldKRWNtbDJaWElnWkhKcGRtVnlPd29KQ2drdkwwVjRaV04xZEdVZ1ltVm1iM0psSUhSbGMzUWdjM1JoY25SekNnbEFRbVZtYjNKbFZHVnpkQW9KY0hWaWJHbGpJSFp2YVdRZ2MyVjBWWEFvS1FvSmV3b0pDUzh2YzJWMGRHbHVaeUJ3Y205d1pYSjBlU0JtYjNJZ2RHaGxJRk5sYkdWdWFYVnRJRU5vY205dFpVUnlhWFpsY2lCM2FYUm9JSEJ5YjNacFpHbHVaeUJ3WVhSb0lHOW1JR05vY205dFpXUnlhWFpsY2k1bGVHVUtDUWxUZEhKcGJtY2dkWE5sY2tScGNpQTlJRk41YzNSbGJTNW5aWFJRY205d1pYSjBlU2dpZFhObGNpNWthWElpS1RzS0NRbFRlWE4wWlcwdWMyVjBVSEp2Y0dWeWRIa29JbGRsWWtSeWFYWmxjaTVqYUhKdmJXVXVaSEpwZG1WeUlpd2dkWE5sY2tScGNpc2lYRnhEYUhKdmJXVkVjbWwyWlhJdVpYaGxJaWs3Q2drSkNna0pMeTlUWld4bGJtbDFiU0JEYUhKdmJXVkVjbWwyWlhJZ2IySnFaV04wSUdseklHTnlaV0YwWldRc0lHbDBJSGRwYkd3Z2IzQmxiaUIwYUdVZ1kyaHliMjFsSUdKeWIzZHpaWElnZDJsdVpHOTNDZ2tKWkhKcGRtVnlJRDBnYm1WM0lFTm9jbTl0WlVSeWFYWmxjaWdwT3dvSkNRb0pDUzh2YldGNGFXMXBlbVVnZEdobElHSnliM2R6WlhJZ2QybHVaRzkzQ2drSlpISnBkbVZ5TG0xaGJtRm5aU2dwTG5kcGJtUnZkeWdwTG0xaGVHbHRhWHBsS0NrN0Nna0pDZ2tKTHk5QlpHUmxaQ0JwYlhCc2FXTnBkQ0IzWVdsMENna0paSEpwZG1WeUxtMWhibUZuWlNncExuUnBiV1Z2ZFhSektDa3VhVzF3YkdsamFYUnNlVmRoYVhRb01UQXNJRlJwYldWVmJtbDBMbE5GUTA5T1JGTXBPd29KQ1FvSkNTOHZRV1JrWldRZ2RHOGdkMkZwZENCMGFXeHNJSEJoWjJVZ1oyVjBjeUJzYjJGa1pXUWdZMjl0Y0d4bGRHVnNlUW9KQ1dSeWFYWmxjaTV0WVc1aFoyVW9LUzUwYVcxbGIzVjBjeWdwTG5CaFoyVk1iMkZrVkdsdFpXOTFkQ2d4TlN3Z1ZHbHRaVlZ1YVhRdVUwVkRUMDVFVXlrN0Nna0pDZ2w5Q2drS0NTOHZSWGhsWTNWMFpTQmhablJsY2lCMFpYTjBJR1Y0WldOMWRHbHZiaUJqYjIxd2JHVjBaWE1LQ1VCQlpuUmxjbFJsYzNRS0NYQjFZbXhwWXlCMmIybGtJSFJsWVhKRWIzZHVLQ2tLQ1hzS0NRa3ZMME5zYjNObGN5QmhiR3dnWkhKcGRtVnlJSE5sYzNOcGIyNEtDUWxrY21sMlpYSXVjWFZwZENncE93b0pmUW9KQ2dsQVZHVnpkQW9KY0hWaWJHbGpJSFp2YVdRZ2JHOW5hVzRvS1FvSmV3b0pDUzh2VG1GMmFXZGhkR1VnZEc4Z1RHRnRZbVJoVkdWemRDQjNaV0p6YVhSbElHeGhibVJwYm1jZ2NHRm5aUW9KQ1dSeWFYWmxjaTVuWlhRb0ltaDBkSEJ6T2k4dmQzZDNMbXhoYldKa1lYUmxjM1F1WTI5dEx5SXBPd29KQ1FvSkNTOHZTV1JsYm5ScFpua2dZVzVrSUVOc2FXTnJJRzl1SUV4dloybHVJR3hwYm1zZ2NISmxjMlZ1ZENCdmJpQnlhV2RvZENCMGIzQWdjMmxrWlFvSkNWZGxZa1ZzWlcxbGJuUWdiRzluU1c1TWFXNXJJRDBnWkhKcGRtVnlMbVpwYm1SRmJHVnRaVzUwS0VKNUxuaHdZWFJvS0NJdkwyRmJZMjl1ZEdGcGJuTW9kR1Y0ZENncExDZE1iMmNnYVc0bktWMGlLU2s3Q2drSmJHOW5TVzVNYVc1ckxtTnNhV05yS0NrN0Nna0pDZ2tKTHk5UGJpQnNiMmRwYmlCd1lXZGxMQ0JwWkdWdWRHbG1lU0JsYldGcGJDQnBaQ0JtYVdWc1pDQmhibVFnWlc1MFpYSWdjbVZuYVhOMFpYSmxaQ0JsYldGcGJDQnBaQW9KQ1ZkbFlrVnNaVzFsYm5RZ1pXMWhhV3hHYVdWc1pDQTlJR1J5YVhabGNpNW1hVzVrUld4bGJXVnVkQ2hDZVM1NGNHRjBhQ2dpTHk5cGJuQjFkRnRBY0d4aFkyVm9iMnhrWlhJOUowVnRZV2xzSjEwaUtTazdDZ2tKWlcxaGFXeEdhV1ZzWkM1elpXNWtTMlY1Y3lnaWRYTmxjbTVoYldWQVoyMWhhV3d1WTI5dElpazdDZ2tKQ2drSkx5OVBiaUJzYjJkcGJpQndZV2RsTENCcFpHVnVkR2xtZVNCMWMyVnlJSEJoYzNOM2IzSmtJR1pwWld4a0lHRnVaQ0JsYm5SbGNpQjJZV3hwWkNCd1lYTnpkMjl5WkFvSkNWZGxZa1ZzWlcxbGJuUWdjR0Z6YzNkdmNtUkdhV1ZzWkNBOUlHUnlhWFpsY2k1bWFXNWtSV3hsYldWdWRDaENlUzU0Y0dGMGFDZ2lMeTlwYm5CMWRGdEFjR3hoWTJWb2IyeGtaWEk5SjFCaGMzTjNiM0prSjEwaUtTazdDZ2tKY0dGemMzZHZjbVJHYVdWc1pDNXpaVzVrUzJWNWN5Z2lWR1Z6ZEVBeE1qTWlLVHNLQ1FrS0NRa3ZMMDl1SUd4dloybHVJSEJoWjJVc0lHbGtaVzUwYVdaNUlHeHZaMmx1SUdKMWRIUnZiaUJoYm1RZ1kyeHBZMnNnYVhRS0NRbFhaV0pGYkdWdFpXNTBJR3h2WjJsdVFuVjBkRzl1SUQwZ1pISnBkbVZ5TG1acGJtUkZiR1Z0Wlc1MEtFSjVMbmh3WVhSb0tDSXZMMkoxZEhSdmJsdEFZMnhoYzNNOUoySjBiaUJpZEc0dGNISnBiV0Z5ZVNCaWRHNHRiR2NnWW5SdUxXSnNiMk5ySUcxMExUTW5YU0lwS1RzS0NRbHNiMmRwYmtKMWRIUnZiaTVqYkdsamF5Z3BPd29KQ1FvSkNTOHZSWGh3WldOMFpXUWdZVzVrSUVGamRIVmhiRlZTVEFvSkNWTjBjbWx1WnlCbGVIQmxZM1JsWkZWU1RDQTlJQ0pvZEhSd2N6b3ZMMkZqWTI5MWJuUnpMbXhoYldKa1lYUmxjM1F1WTI5dEwyUmhjMmhpYjJGeVpDSTdDZ2tKVTNSeWFXNW5JR1Y0Y0dWamRHVmtVR0ZuWlZScGRHeGxJRDBnSWxkbGJHTnZiV1VnTFNCTVlXMWlaR0ZVWlhOMElqc0tDUWtLQ1FsVGRISnBibWNnWVdOMGRXRnNWVkpNSUQwZ1pISnBkbVZ5TG1kbGRFTjFjbkpsYm5SVmNtd29LVHNLQ1FsVGRISnBibWNnWVdOMGRXRnNVR0ZuWlZScGRHeGxJRDBnWkhKcGRtVnlMbWRsZEZScGRHeGxLQ2s3Q2drSlUzbHpkR1Z0TG05MWRDNXdjbWx1ZEd4dUtHUnlhWFpsY2k1blpYUlVhWFJzWlNncEtUc0tDUWxUZVhOMFpXMHViM1YwTG5CeWFXNTBiRzRvWkhKcGRtVnlMbWRsZEVOMWNuSmxiblJWY213b0tTazdDZ2tKQ1FrSkNna0pMeTlCYzNObGNuUnBiMjRnWVc1a0lIWmxjbWxtYVdOaGRHbHZiaUJ2WmlCbGVIQmxZM1JsWkNCVlVrd2dZVzVrSUdGamRIVmhiQ0JWVWt3S0NRbEJjM05sY25RdVlYTnpaWEowUlhGMVlXeHpLR0ZqZEhWaGJGVlNUQ3dnWlhod1pXTjBaV1JWVWt3cE93b0pDUW9KQ1M4dlFYTnpaWEowYVc5dUlHRnVaQ0IyWlhKcFptbGpZWFJwYjI0Z2IyWWdaWGh3WldOMFpXUWdVR0ZuWlNCVWFYUnNaU0JoYm1RZ1lXTjBkV0ZzSUZCaFoyVWdWR2wwYkdVS0NRbEJjM05sY25RdVlYTnpaWEowUlhGMVlXeHpLR0ZqZEhWaGJGQmhaMlZVYVhSc1pTd2daWGh3WldOMFpXUlFZV2RsVkdsMGJHVXBPd29KZlFwOUNnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L3NjcmlwdHMvcTNtYXBvcmlnaW4yb3JpZ2luYnJ1c2gucGxfdGltZXN0YW1wJ109MTY1MTQxODI1ODA2NDsKd2luZG93LnByZUZTWydsaWJyYXJ5L3NjcmlwdHMvcTNtYXBvcmlnaW4yb3JpZ2luYnJ1c2gucGwnXT0nSXlFdmRYTnlMMkpwYmk5d1pYSnNDZ3AxYzJVZ2MzUnlhV04wT3dwMWMyVWdkMkZ5Ym1sdVozTTdDZ3B6ZFdJZ1VHRnljMlZGYm5ScGRIa29KQ2tLZXdvSmJYa2dLQ1JtYUNrZ1BTQkFYenNLQ2dsdGVTQWxaVzUwSUQwZ0tDQXBPd29KYlhrZ1FHSnlkWE5vWlhNZ1BTQW9JQ2s3Q2dvSmQyaHBiR1VvUENSbWFENHBDZ2w3Q2drSlkyaHZiWEE3SUhNdlhISXZMMmM3SUhNdlhEQXZMMmM3SUhNdlhDOWNMeTRxSkM4dk95QnpMMTVjY3lzdkx6c2djeTljY3lza0x5ODdJRzVsZUhRZ2FXWWdMMTRrTHpzS0Nna0phV1lvTDE1Y2V5UXZLUW9KQ1hzS0NRa0pJeUJsYm5ScGRIa2djM1JoY25SekNna0pDWGRvYVd4bEtEd2tabWcrS1FvSkNRbDdDZ2tKQ1FsamFHOXRjRHNnY3k5Y2NpOHZaenNnY3k5Y01DOHZaenNnY3k5Y0wxd3ZMaW9rTHk4N0lITXZYbHh6S3k4dk95QnpMMXh6S3lRdkx6c2dibVY0ZENCcFppQXZYaVF2T3dvS0NRa0pDV2xtS0M5ZUlpZ3VLajhwSWlBaUtDNHFLU0lrTHlrS0NRa0pDWHNLQ1FrSkNRa2pJR3RsZVMxMllXeDFaU0J3WVdseUNna0pDUWtKSkdWdWRIc2tNWDBnUFNBa01qc0tDUWtKQ1gwS0NRa0pDV1ZzYzJsbUtDOWVYSHNrTHlrS0NRa0pDWHNLQ1FrSkNRbHRlU0FrWW5KMWMyZ2dQU0JiWFRzS0NRa0pDUWx3ZFhOb0lFQmljblZ6YUdWekxDQWtZbkoxYzJnN0Nnb0pDUWtKQ1hkb2FXeGxLRHdrWm1nK0tRb0pDUWtKQ1hzS0NRa0pDUWtKWTJodmJYQTdJSE12WEhJdkwyYzdJSE12WERBdkwyYzdJSE12WEM5Y0x5NHFKQzh2T3lCekwxNWNjeXN2THpzZ2N5OWNjeXNrTHk4N0lHNWxlSFFnYVdZZ0wxNGtMenNLQ2drSkNRa0pDV2xtS0M5ZVhIc2tMeWtLQ1FrSkNRa0pld29KQ1FrSkNRa0pJeUJ3WVhSamFEOEtDUWtKQ1FrSkNYQjFjMmdnUUNSaWNuVnphQ3dnSkY4N0Nnb0pDUWtKQ1FrSmQyaHBiR1VvUENSbWFENHBDZ2tKQ1FrSkNRbDdDZ2tKQ1FrSkNRa0pZMmh2YlhBN0lITXZYSEl2TDJjN0lITXZYREF2TDJjN0lITXZYQzljTHk0cUpDOHZPeUJ6TDE1Y2N5c3ZMenNnY3k5Y2N5c2tMeTg3SUc1bGVIUWdhV1lnTDE0a0x6c0tDZ2tKQ1FrSkNRa0phV1lvTDE1Y2ZTUXZLUW9KQ1FrSkNRa0pDWHNLQ1FrSkNRa0pDUWtKY0hWemFDQkFKR0p5ZFhOb0xDQWtYenNLQ2drSkNRa0pDUWtKQ1d4aGMzUTdDZ2tKQ1FrSkNRa0pmUW9KQ1FrSkNRa0pDV1ZzYzJVS0NRa0pDUWtKQ1FsN0Nna0pDUWtKQ1FrSkNYQjFjMmdnUUNSaWNuVnphQ3dnSkY4N0Nna0pDUWtKQ1FrSmZRb0pDUWtKQ1FrSmZRb0pDUWtKQ1FsOUNna0pDUWtKQ1dWc2MybG1LQzllWEgwa0x5a0tDUWtKQ1FrSmV3b0pDUWtKQ1FrSkl5QmxibVFnYjJZZ1luSjFjMmdLQ1FrSkNRa0pDV3hoYzNRN0Nna0pDUWtKQ1gwS0NRa0pDUWtKWld4elpRb0pDUWtKQ1FsN0Nna0pDUWtKQ1Fsd2RYTm9JRUFrWW5KMWMyZ3NJQ1JmT3dvSkNRa0pDUWw5Q2drSkNRa0pmUW9KQ1FrSmZRb0pDUWtKWld4emFXWW9MMTVjZlNRdktRb0pDUWtKZXdvSkNRa0pDWEpsZEhWeWJpQmNKV1Z1ZEN3Z1hFQmljblZ6YUdWek93b0pDUWtKZlFvSkNRbDlDZ2tKZlFvSkNXVnNjMlVLQ1FsN0Nna0pDV1JwWlNBaVZXNWxlSEJsWTNSbFpDQnNhVzVsSUdsdUlIUnZjQ0JzWlhabGJEb2dQajRrWHp3OElqc0tDUWw5Q2dsOUNnb0pjbVYwZFhKdUlIVnVaR1ZtT3dwOUNncHpkV0lnVlc1d1lYSnpaVVZ1ZEdsMGVTZ2tKQ2tLZXdvSmJYa2dLQ1JsYm5Rc0lDUmljblZ6YUdWektTQTlJRUJmT3dvSmJYa2dKV1Z1ZENBOUlDVWtaVzUwT3dvS0NXMTVJQ1J6SUQwZ0ludGNiaUk3Q2dvSlptOXlLSE52Y25RZ2EyVjVjeUFsWlc1MEtRb0pld29KQ1NSeklDNDlJQ0pjSWlSZlhDSWdYQ0lrWlc1MGV5UmZmVndpWEc0aU93b0pmUW9LQ1dsbUtHUmxabWx1WldRZ0pHSnlkWE5vWlhNcENnbDdDZ2tKWm05eUtFQWtZbkoxYzJobGN5a0tDUWw3Q2drSkNTUnpJQzQ5SUNKN1hHNGlPd29KQ1Fra2N5QXVQU0FpSkY5Y2JpSWdabTl5SUVBa1h6c0tDUWtKSkhNZ0xqMGdJbjFjYmlJN0Nna0pmUW9KZlFvS0NTUnpJQzQ5SUNKOVhHNGlPd29KY21WMGRYSnVJQ1J6T3dwOUNncHRlU0JBWVhocFlXeGljblZ6YUhCaGRIUmxjbTRnUFNBb0NnbGJJQ0lyS3lzaUxDQWlLeTBySWl3Z0lpMHJLeUlzSUNJZ0xTQWlMQ0FpTFNBZ0lpQmRMQW9KV3lBaUt5c3JJaXdnSWkwckt5SXNJQ0lyS3kwaUxDQWlLeUFnSWl3Z0lpQWdLeUlnWFN3S0NWc2dJaXNyS3lJc0lDSXJLeTBpTENBaUt5MHJJaXdnSWlBdElDSXNJQ0lnSUNzaUlGMHNDZ2xiSUNJdExTMGlMQ0FpS3kwdElpd2dJaTByTFNJc0lDSWdMU0FpTENBaUt5QWdJaUJkTEFvSld5QWlMUzB0SWl3Z0lpMHRLeUlzSUNJckxTMGlMQ0FpTFNBZ0lpd2dJaUFnS3lJZ1hTd0tDVnNnSWkwdExTSXNJQ0l0S3kwaUxDQWlMUzBySWl3Z0lpQXJJQ0lzSUNJZ0lDc2lJRjBLS1RzS2MzVmlJR0Y0YVdGc1luSjFjMmh3WVhSMFpYSnVLQ1FrSkNrS2V3b0piWGtnS0NSd2JHRnVaU3dnSkhabGNuUmxlQ3dnSkdOdmIzSmtLU0E5SUVCZk93b0piWGtnSkdOb0lEMGdjM1ZpYzNSeUlDUmhlR2xoYkdKeWRYTm9jR0YwZEdWeWJsc2tjR3hoYm1WZFd5UjJaWEowWlhoZExDQWtZMjl2Y21Rc0lERTdDZ2x5WlhSMWNtNGdKR05vSUdWeElDY3JKeUEvSUNzeElEb2dKR05vSUdWeElDY3RKeUEvSUMweElEb2dNRHNLZlFwemRXSWdabkpoWXlna0tRcDdDZ2x0ZVNBb0pIZ3BJRDBnUUY4N0NnbHlaWFIxY200Z0pIZ2dMU0JwYm5RZ0pIZzdDbjBLYzNWaUlFTnZiblpsY25SUGNtbG5hVzVDY25WemFDZ2tKQ1FrS1FwN0NnbHRlU0FvSkdKeWRYTm9VSEpwYldsMExDQWtlQ3dnSkhrc0lDUjZLU0E5SUVCZk93b0piWGtnUUdSaGRHRWdQU0FvS1RzS0NXbG1LQ1JpY25WemFGQnlhVzFwZENrS0NYc0tDUWx3ZFhOb0lFQmtZWFJoTENBaVluSjFjMmhFWldZaU93b0pDWEIxYzJnZ1FHUmhkR0VzSUNKN0lqc0tDUWxtYjNJb01DNHVOU2tLQ1FsN0Nna0pDWEIxYzJnZ1FHUmhkR0VzSUhOd2NtbHVkR1lLQ1FrSkNTSW9JQ1Z6SUNWeklDVnpJQ2tnS0NBbGN5QWxjeUFsY3lBcElDZ2dKWE1nSlhNZ0pYTWdLU0FvSUNnZ0pYTWdKWE1nSlhNZ0tTQW9JQ1Z6SUNWeklDVnpJQ2tnS1NCamIyMXRiMjR2YjNKcFoybHVJREFnTUNBd0lpd0tDUWtKQ1NSNElDc2dPQ0FxSUdGNGFXRnNZbkoxYzJod1lYUjBaWEp1S0NSZkxDQXdMQ0F3S1N3Z0pIa2dLeUE0SUNvZ1lYaHBZV3hpY25WemFIQmhkSFJsY200b0pGOHNJREFzSURFcExDQWtlaUFySURnZ0tpQmhlR2xoYkdKeWRYTm9jR0YwZEdWeWJpZ2tYeXdnTUN3Z01pa3NDZ2tKQ1Fra2VDQXJJRGdnS2lCaGVHbGhiR0p5ZFhOb2NHRjBkR1Z5Ymlna1h5d2dNU3dnTUNrc0lDUjVJQ3NnT0NBcUlHRjRhV0ZzWW5KMWMyaHdZWFIwWlhKdUtDUmZMQ0F4TENBeEtTd2dKSG9nS3lBNElDb2dZWGhwWVd4aWNuVnphSEJoZEhSbGNtNG9KRjhzSURFc0lESXBMQW9KQ1FrSkpIZ2dLeUE0SUNvZ1lYaHBZV3hpY25WemFIQmhkSFJsY200b0pGOHNJRElzSURBcExDQWtlU0FySURnZ0tpQmhlR2xoYkdKeWRYTm9jR0YwZEdWeWJpZ2tYeXdnTWl3Z01Ta3NJQ1I2SUNzZ09DQXFJR0Y0YVdGc1luSjFjMmh3WVhSMFpYSnVLQ1JmTENBeUxDQXlLU3dLQ1FrSkNURXZNVFl1TUN3Z01Dd2dabkpoWXlnb1lYaHBZV3hpY25WemFIQmhkSFJsY200b0pGOHNJRE1zSURBcElDb2dKSGdnS3lCaGVHbGhiR0p5ZFhOb2NHRjBkR1Z5Ymlna1h5d2dNeXdnTVNrZ0tpQWtlU0FySUdGNGFXRnNZbkoxYzJod1lYUjBaWEp1S0NSZkxDQXpMQ0F5S1NBcUlDUjZLU0F2SURFMkxqQWdLeUF3TGpVcExBb0pDUWtKTUN3Z01TOHhOaTR3TENCbWNtRmpLQ2hoZUdsaGJHSnlkWE5vY0dGMGRHVnliaWdrWHl3Z05Dd2dNQ2tnS2lBa2VDQXJJR0Y0YVdGc1luSjFjMmh3WVhSMFpYSnVLQ1JmTENBMExDQXhLU0FxSUNSNUlDc2dZWGhwWVd4aWNuVnphSEJoZEhSbGNtNG9KRjhzSURRc0lESXBJQ29nSkhvcElDOGdNVFl1TUNBcklEQXVOU2s3Q2drSmZRb0pDWEIxYzJnZ1FHUmhkR0VzSUNKOUlqc0tDWDBLQ1dWc2MyVUtDWHNLQ1FsdGVTQWtaR0YwWVNBOUlDSXZMeUJ2Y21sbmFXNGdZbkoxYzJoY2JudGNiaUk3Q2drSlptOXlLREF1TGpVcENna0pld29KQ1Fsd2RYTm9JRUJrWVhSaExDQnpjSEpwYm5SbUNna0pDUWtpS0NBbGN5QWxjeUFsY3lBcElDZ2dKWE1nSlhNZ0pYTWdLU0FvSUNWeklDVnpJQ1Z6SUNrZ1kyOXRiVzl1TDI5eWFXZHBiaUFsY3lBbGN5QXdJQ1Z6SUNWeklEQWdNQ0F3SWl3S0NRa0pDU1I0SUNzZ09DQXFJR0Y0YVdGc1luSjFjMmh3WVhSMFpYSnVLQ1JmTENBd0xDQXdLU3dnSkhrZ0t5QTRJQ29nWVhocFlXeGljblZ6YUhCaGRIUmxjbTRvSkY4c0lEQXNJREVwTENBa2VpQXJJRGdnS2lCaGVHbGhiR0p5ZFhOb2NHRjBkR1Z5Ymlna1h5d2dNQ3dnTWlrc0Nna0pDUWtrZUNBcklEZ2dLaUJoZUdsaGJHSnlkWE5vY0dGMGRHVnliaWdrWHl3Z01Td2dNQ2tzSUNSNUlDc2dPQ0FxSUdGNGFXRnNZbkoxYzJod1lYUjBaWEp1S0NSZkxDQXhMQ0F4S1N3Z0pIb2dLeUE0SUNvZ1lYaHBZV3hpY25WemFIQmhkSFJsY200b0pGOHNJREVzSURJcExBb0pDUWtKSkhnZ0t5QTRJQ29nWVhocFlXeGljblZ6YUhCaGRIUmxjbTRvSkY4c0lESXNJREFwTENBa2VTQXJJRGdnS2lCaGVHbGhiR0p5ZFhOb2NHRjBkR1Z5Ymlna1h5d2dNaXdnTVNrc0lDUjZJQ3NnT0NBcUlHRjRhV0ZzWW5KMWMyaHdZWFIwWlhKdUtDUmZMQ0F5TENBeUtTd0tDUWtKQ1daeVlXTW9LR0Y0YVdGc1luSjFjMmh3WVhSMFpYSnVLQ1JmTENBekxDQXdLU0FxSUNSNElDc2dZWGhwWVd4aWNuVnphSEJoZEhSbGNtNG9KRjhzSURNc0lERXBJQ29nSkhrZ0t5QmhlR2xoYkdKeWRYTm9jR0YwZEdWeWJpZ2tYeXdnTXl3Z01pa2dLaUFrZWlrZ0x5QXhOaTR3SUNzZ01DNDFLU0FxSURZMExqQXNDZ2tKQ1FsbWNtRmpLQ2hoZUdsaGJHSnlkWE5vY0dGMGRHVnliaWdrWHl3Z05Dd2dNQ2tnS2lBa2VDQXJJR0Y0YVdGc1luSjFjMmh3WVhSMFpYSnVLQ1JmTENBMExDQXhLU0FxSUNSNUlDc2dZWGhwWVd4aWNuVnphSEJoZEhSbGNtNG9KRjhzSURRc0lESXBJQ29nSkhvcElDOGdNVFl1TUNBcklEQXVOU2tnS2lBMk5DNHdMQW9KQ1FrSk1TODBMakFzSURFdk5DNHdPd29KQ1gwS0NYMEtDWEpsZEhWeWJpQmNRR1JoZEdFN0NuMEtDbTE1SUNna2FXNW1hV3hsTENBa2IzVjBabWxzWlNrZ1BTQkFRVkpIVmpzS2IzQmxiaUJ0ZVNBa2FXNW1hQ3dnSnp3bkxDQWthVzVtYVd4bENnbHZjaUJrYVdVZ0lqd2thVzVtYVd4bE9pQWtJU0k3Q20xNUlDUmljblZ6YUZCeWFXMXBkQ0E5SURBN0NncHRlU0FrYjNWMFluVm1JRDBnSWlJN0NtWnZjaWc3T3lrS2V3b0piWGtnS0NSbGJuUXNJQ1JpY25WemFHVnpLU0E5SUZCaGNuTmxSVzUwYVhSNUlDUnBibVpvT3dvSlpHVm1hVzVsWkNBa1pXNTBDZ2tKYjNJZ2JHRnpkRHNLQ1dsbUtFQWtZbkoxYzJobGN5a0tDWHNLQ1Fra1luSjFjMmhRY21sdGFYUWdQU0F4Q2drSkNXbG1JR2R5WlhBZ2V5QnRJVnh6SzJKeWRYTm9SR1ZtWEhNcklUc2dmU0JBSkdKeWRYTm9aWE03Q2drSmFXWW9aM0psY0NCN0lHMGhYSE1yWTI5dGJXOXVMMjl5YVdkcGJseHpLeUU3SUgwZ1FDUmljblZ6YUdWektRb0pDWHNLQ1FrSkl5QjNaU0JvWVhabElHOXlhV2RwYmlCaWNuVnphR1Z6SUMwZ1oyOXZaQW9KQ1gwS0NRbGxiSE5sQ2drSmV3b0pDUWxwWmloa1pXWnBibVZrSUNSbGJuUXRQbnR2Y21sbmFXNTlLUW9KQ1FsN0Nna0pDUWx0ZVNBa2IzSnBaMmx1SUQwZ1d5QnpjR3hwZENBdlhITXJMeXdnS0NSbGJuUXRQbnR2Y21sbmFXNTlJSHg4SUNJd0lEQWdNQ0lwSUYwN0Nna0pDUWxrWld4bGRHVWdKR1Z1ZEMwK2UyOXlhV2RwYm4wN0Nna0pDUWx3ZFhOb0lFQWtZbkoxYzJobGN5d2dRMjl1ZG1WeWRFOXlhV2RwYmtKeWRYTm9JQ1JpY25WemFGQnlhVzFwZEN3Z0pHOXlhV2RwYmkwK1d6QmRMQ0FrYjNKcFoybHVMVDViTVYwc0lDUnZjbWxuYVc0dFBsc3lYVHNLQ1FrSmZRb0pDWDBLQ1gwS0NTUnZkWFJpZFdZZ0xqMGdWVzV3WVhKelpVVnVkR2wwZVNBa1pXNTBMQ0FrWW5KMWMyaGxjenNLZlFvS1kyeHZjMlVnSkdsdVptZzdDZ3B2Y0dWdUlHMTVJQ1J2ZFhSbWFDd2dKejRuTENBa2IzVjBabWxzWlFvSmIzSWdaR2xsSUNJK0pHOTFkR1pwYkdVNklDUWhJanNLY0hKcGJuUWdKRzkxZEdab0lDUnZkWFJpZFdZN0NtTnNiM05sSUNSdmRYUm1hRHNLJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9zY3JpcHRzL3dlYmRyaXZlci5qYXZhX3RpbWVzdGFtcCddPTE2NDk4NzkxOTMzMjk7CndpbmRvdy5wcmVGU1snbGlicmFyeS9zY3JpcHRzL3dlYmRyaXZlci5qYXZhJ109J2FXMXdiM0owSUdwaGRtRXVibVYwTGlvN0NtbHRjRzl5ZENCdmNtY3ViM0JsYm5GaExuTmxiR1Z1YVhWdExpbzdDbWx0Y0c5eWRDQnZjbWN1YjNCbGJuRmhMbk5sYkdWdWFYVnRMbU5vY205dFpTNHFPd3BwYlhCdmNuUWdiM0puTG05d1pXNXhZUzV6Wld4bGJtbDFiUzV5WlcxdmRHVXVLanNnSUFvS2NIVmliR2xqSUdOc1lYTnpJRWRsZEhScGJtZFRkR0Z5ZEdWa1VtVnRiM1JsSUhzZ0lBb2dJSEIxWW14cFl5QnpkR0YwYVdNZ2RtOXBaQ0J0WVdsdUtGTjBjbWx1WjF0ZElHRnlaM01wSUhSb2NtOTNjeUJOWVd4bWIzSnRaV1JWVWt4RmVHTmxjSFJwYjI0Z2V5QWdJQ0FnSUNBZ0lDQUtJQ0FnSUZkbFlrUnlhWFpsY2lCa2NtbDJaWElnUFNCdVpYY2dVbVZ0YjNSbFYyVmlSSEpwZG1WeUtDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUc1bGR5QlZVa3dvSW1oMGRIQTZMeTh4TWpjdU1DNHdMakU2T1RVeE5TSXBMQ0FnSUNBZ0lDQWdJQW9nSUNBZ2JtVjNJRU5vY205dFpVOXdkR2x2Ym5Nb0tTazdJQ0FnSUNBS0lDQWdJQ0FnWkhKcGRtVnlMbWRsZENnaWFIUjBjRG92TDNkM2R5NW5iMjluYkdVdVkyOXRJaWs3SUNBZ0lDQUtJQ0FnSUNBZ1pISnBkbVZ5TG5GMWFYUW9LVHNnSUNBS0lDQjlDbjBLQ2dvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc2NyaXB0cy93ZWJkcml2ZXJpby5qc190aW1lc3RhbXAnXT0xNjQ5ODc5MDg1MzQwOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc2NyaXB0cy93ZWJkcml2ZXJpby5qcyddPSdZMjl1YzNRZ2V5QnlaVzF2ZEdVZ2ZTQTlJSEpsY1hWcGNtVW9KM2RsWW1SeWFYWmxjbWx2SnlrN0NnbzdLR0Z6ZVc1aklDZ3BJRDArSUhzS0lDQWdJR052Ym5OMElHSnliM2R6WlhJZ1BTQmhkMkZwZENCeVpXMXZkR1VvZXdvZ0lDQWdJQ0FnSUdOaGNHRmlhV3hwZEdsbGN6b2dld29nSUNBZ0lDQWdJQ0FnSUNCaWNtOTNjMlZ5VG1GdFpUb2dKMk5vY205dFpTY0tJQ0FnSUNBZ0lDQjlDaUFnSUNCOUtRb0tJQ0FnSUdGM1lXbDBJR0p5YjNkelpYSXVkWEpzS0Nkb2RIUndjem92TDNkbFltUnlhWFpsY2k1cGJ5Y3BDZ29nSUNBZ1kyOXVjM1FnWVhCcFRHbHVheUE5SUdGM1lXbDBJR0p5YjNkelpYSXVKQ2duUFVGUVNTY3BDaUFnSUNCaGQyRnBkQ0JoY0dsTWFXNXJMbU5zYVdOcktDa0tDaUFnSUNCaGQyRnBkQ0JpY205M2MyVnlMbk5oZG1WVFkzSmxaVzV6YUc5MEtDY3VMM05qY21WbGJuTm9iM1F1Y0c1bkp5a0tJQ0FnSUdGM1lXbDBJR0p5YjNkelpYSXVaR1ZzWlhSbFUyVnpjMmx2YmlncENuMHBLQ2tLJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9zaWRlYmFyLmpzX3RpbWVzdGFtcCddPTE2NTE3NjQxMTY4Mjk7CndpbmRvdy5wcmVGU1snbGlicmFyeS9zaWRlYmFyLmpzJ109J0x5OGdRVXhNSUZSSVFWUWdUVUZMUlVaSlRFVWdWMDlTU3lCS1ZWTlVJRk5QSUVrZ1JrVkZUQ0JQVWtkQlRrbGFSVVFnUlU1UFZVZElJRlJQSUVWWVVFRk9SQzRLQ2dvdkx5QnVaV1ZrSUhSdklHbHRjSEp2ZG1VZ1ptbHNaU0JzYVhOMENpOHZJQ0FnYm1WbFpDQjBieUJ5Wlc1a1pYSWdZU0JzYVhOMElHOW1JSGRwWkdkbGRITWdabTl5SUhObFkzUnBiMjRnWTI5c2JHRndjMmx1Wndvdkx5QjBZV0pzWlhNZ2IyWWdZMjl1ZEdWdWRITWdjMmh2ZFd4a0lITnZjblFnWW5rZ1pXNTBhWFI1SUhSNWNHVWdZVzVrSUdGc2NHaGhZbVYwYVdOaGJHeDVJRzl5SUd4dlkyRjBhVzl1WVd4c2VRb3ZMeUFnSUc1bFpXUWdLR1JsY0hSb0xDQjBhWFJzWlN3Z2MyOXlkQzFyWlhrcENpOHZJR1Z1ZEdsMGVTQnNhWE4wSUhOb2IzVnNaQ0JuY205MWNDQnRZWEFnWlc1MGFYUnBaWE1nYVc0Z2MyVndZWEpoZEdVS0x5OGdJQ0F1YldGd0lHWnBiR1Z6SUhSb1pXNGdkWE5sSUdKMWFXeGtJSE41YzNSbGJTQmhibVFnWVNCbVpYY2dkSEpoYm5OdlptOXliWE1LTHk4Z0lDQjBieUJqYjIxd2FXeGxJQzVpYzNBS0x5OGdkVzU2YVhBZ0xucHBjQ0JtYVd4bGN5QmhkWFJ2YldGMGFXTmhiR3g1SUdGdVpDQnNhWE4wSUdOdmJuUmxiblJ6SUdsdUlIUnlaV1VLTHk4Z1ZFOUVUem9nWVdSa0lHRnNkR1Z5Ym1GMFpTQnBiV0ZuWlNCMmFXVjNjeUJ6YnlCellXMWxJR052Ym5SeWIyd2dZMkZ1SUdKbElIVnpaV1FnWm05eUNpOHZJQ0FnYkdsemRHbHVaeUIwWlhoMGRYSmxjeUJzWVhSbGNnb3ZMeUJrWldOdlpHVWdUV0ZyWldacGJHVWdZVzVrSUdocFoyaHNhV2RvZENCMGFHVWdabWxzWlNCM2FYUm9JSFJvWlNCamIyMXRZVzVrY3lCaVpXbHVaeUJ5ZFc0S0x5OGdabWxzWlNCc2FYTjBJR0ZzZDJGNWN5QnphRzkzY3lCemFYcGxaQ3dnWlhOd1pXTnBZV3hzZVNCdmJpQm1iMnhrWlhKekNnb3ZMeUJVVDBSUE9pQndjbTlpWVdKc2VTQnpiMjFsSUdkaGJXVWdaVzVuYVc1bElHUnBjM0JzWVhrS0Nnb0tDbU52Ym5OMElFWkpURVZmVjBsRVIwVlVVeUE5SUZzS0NWc25SRzlqZFcxbGJuUmhkR2x2Ymljc0lITm9iM2RFYjJOMWJXVnVkQ3dnY21WdVpHVnlSRzlqZFcxbGJuUmRMQW9KV3lkTWIyTmhiQ0JUZEc5eVlXZGxKeXdnYkdsemRFWnBiR1Z6TENCeVpXNWtaWEpHYVd4bFhTd0tDVnNuUTJGc2JDQlRkR0ZqYXljc0lHTmhiR3hUZEdGamF5d2djbVZ1WkdWeVJuVnVZMTBzQ2dsYkowTnZiMnRwWlhNbkxDQmpiMjlyYVdWTWFYTjBMQ0J5Wlc1a1pYSkRiMjlyYVdWZExBb0pXeWRVYUhKbFlXUnpKeXdnZEdoeVpXRmtVRzl2YkN3Z2NtVnVaR1Z5VkdoeVpXRmtYU3dLQ1ZzblNXNTBaWEpoWTNScGIyNXpKeXdnYVc1MFpYSmhZM1JwYjI1elRHbHpkQ3dnY21WdVpHVnlTVzUwWlhKaFkzUnBiMjV6WFN3S1hUc0tDbVoxYm1OMGFXOXVJR0Z1ZVZCaGNtVnVkSE5EYjJ4c1lYQnpaV1FvYzJWbmJXVnVkSE1wSUhzS0NXbG1LQ0ZCUTBVdVptbHNaWE5qYjJ4c1lYQnpaV1FwSUhzS0NRbHlaWFIxY200S0NYMEtDWEpsZEhWeWJpQnpaV2R0Wlc1MGN5NXpiR2xqWlNnd0xDQXRNU2tLQ1FrdWNtVmtkV05sS0daMWJtTjBhVzl1SUNod0xDQnpMQ0JwS1NCN0lBb0pDUWx5WlhSMWNtNGdjQ0FySUVGRFJTNW1hV3hsYzJOdmJHeGhjSE5sWkZzS0NRa0pDWE5sWjIxbGJuUnpMbk5zYVdObEtEQXNJR2tnS3lBeEtTNXFiMmx1S0Njdkp5bGRDZ2tKZlN3Z01Da0tmUW9LQ2dwbWRXNWpkR2x2YmlCemFXMXdiR2xtZVUxcGJHeHBjMlZqYjI1a2N5aHRhV3hzYVNrZ2V3b0piR1YwSUhObFkzTWdQU0J0YVd4c2FTQXZJREV3TURBdU1Bb0piR1YwSUcxcGJuTWdQU0J6WldOeklDOGdOakF1TUFvSmJHVjBJR2h2ZFhKeklEMGdiV2x1Y3lBdklEWXdMakFLQ1d4bGRDQmtZWGx6SUQwZ2FHOTFjbk1nTHlBeU5DNHdDZ2xwWmloa1lYbHpJRDRnTVNrZ2V3b0pDWEpsZEhWeWJpQk5ZWFJvTG5KdmRXNWtLR1JoZVhNc0lERXBJQ3NnSjJRbkNnbDlJR1ZzYzJVS0NXbG1LR2h2ZFhKeklENGdNU2tnZXdvSkNYSmxkSFZ5YmlCTllYUm9Mbkp2ZFc1a0tHaHZkWEp6TENBeEtTQXJJQ2RvSndvSmZRb0paV3h6WlFvSmFXWW9iV2x1Y3lBK0lERXBJSHNLQ1FseVpYUjFjbTRnVFdGMGFDNXliM1Z1WkNob2IzVnljeXdnTVNrZ0t5QW5iU2NLQ1gwS0NXVnNjMlVLQ1dsbUtITmxZM01nUGlBeEtTQjdDZ2tKY21WMGRYSnVJRTFoZEdndWNtOTFibVFvYUc5MWNuTXNJREVwSUNzZ0ozTW5DZ2w5SUdWc2MyVWdld29KQ1hKbGRIVnliaUJ0YVd4c2FTQXJJQ2R0Y3ljS0NYMEtmUW9LQ21aMWJtTjBhVzl1SUhOb2IzZEViMk4xYldWdWRDZ3BJSHNLQ1dsbUtDRkJRMFV1Wkc5amRXMWxiblJoZEdsdmJpQjhmQ0FoUVVORkxtSjFZbUpzWlVacGJHVXBJSHNLQ1FseVpYUjFjbTRnVzEwS0NYMEtDV3hsZENCamRYSnlaVzUwUkc5aklEMGdRVU5GTG1KMVltSnNaVVpwYkdVS0NRa0pMbkpsY0d4aFkyVW9KMnhwWW5KaGNua3ZKeXdnSjJ4cFluSmhjbmt2Wkc5amN5OG5LUW9KQ1FrdWNtVndiR0ZqWlNnbkxtcHpKeXdnSnk1dFpDY3BDZ29KYVdZb1FVTkZMbVJ2WTNWdFpXNTBZWFJwYjI0dWFXNWpiSFZrWlhNb1kzVnljbVZ1ZEVSdll5a3BJSHNLQ1FseVpYUjFjbTRnVzJOMWNuSmxiblJFYjJNdWNtVndiR0ZqWlNndlhDOHZaeXdnSjE4bktWMEtDWDBLQ1hKbGRIVnliaUJiWFFwOUNnb0tablZ1WTNScGIyNGdiR2x6ZEVacGJHVnpLQ2tnZXdvSmJHVjBJRzVsZDBacGJHVnpJRDBnVDJKcVpXTjBMbXRsZVhNb1JsTXVkbWx5ZEhWaGJDa0tDV3hsZENCemRHRnlkRXhsYm1kMGFDQTlJRzVsZDBacGJHVnpMbXhsYm1kMGFBb0tDUzh2SUhCMWRDQm1iMnhrWlhJZ1kyOXNiR0Z3YzJVZ2FHbGtaR1Z1SUdGMElIUnZjQW9KWm05eUtHeGxkQ0JwSUQwZ01Ec2dhU0E4SUhOMFlYSjBUR1Z1WjNSb095QnBLeXNwSUhzS0NRbHNaWFFnYzJWbmJXVnVkSE1nUFNCdVpYZEdhV3hsYzF0cFhTNXpjR3hwZENnbkx5Y3BDZ2tKQ1M1dFlYQW9ablZ1WTNScGIyNGdLSE5sWnl3Z2FTd2dZWEp5S1NCN0Nna0pDUWx5WlhSMWNtNGdZWEp5TG5Oc2FXTmxLREFzSUdrZ0t5QXhLUzVxYjJsdUtDY3ZKeWtnQ2drSkNYMHBDZ2tKTHk4Z1FVUkVJRTFKVTFOSlRrY2dVRUZVU0ZNZ1JsSlBUU0JGVGtkSlRrVWdWRThnUmtsTVJTQUtDUWt2THlBZ0lFeEpVMVFnVTA4Z1YwVWdSRTlPSjFRZ1RFOVRSU0JHU1V4RlV5QkpUaUJFUVZSQlFrRlRSUW9KQ1M4dklDQWdSbEpQVFNCTlNWTlRTVTVISUV4SlRrdFRMaUJVVDBSUE9pQkdVME5JUzBSVFN5QlVUMDlNTENCWFZFWS9DZ2tKYm1WM1JtbHNaWE11Y0hWemFDNWhjSEJzZVNodVpYZEdhV3hsY3l3Z2MyVm5iV1Z1ZEhNcENnbDlDZ29KTHk4Z2MyOXlkQ0JoYm1RZ2RXNXBjWFZsQ2dsdVpYZEdhV3hsY3lBOUlHNWxkMFpwYkdWekxuTnZjblFvS1M1bWFXeDBaWElvWm5WdVkzUnBiMjRnS0dZc0lHa3NJR0Z5Y2lrZ2V5QUtDUWx5WlhSMWNtNGdaaUFtSmlCaGNuSXVhVzVrWlhoUFppaG1LU0E5UFNCcENnbDlLUW9KY21WMGRYSnVJRzVsZDBacGJHVnpDbjBLQ2dwbWRXNWpkR2x2YmlCallXeHNVM1JoWTJzb0tTQjdDZ2xzWlhRZ2JtVjNSbWxzWlhNZ1BTQmJYUW9KYVdZb0lVRkRSUzVqWVd4c1UzUmhZMnNwSUhzS0NRbHlaWFIxY200Z2JtVjNSbWxzWlhNS0NYMEtDWEpsZEhWeWJpQnVaWGRHYVd4bGN5NWpiMjVqWVhRb1FVTkZMbU5oYkd4VGRHRmpheWtLZlFvS0NtWjFibU4wYVc5dUlHTnZiMnRwWlV4cGMzUW9LU0I3Q2dscFppZ2hRVU5GTG1OdmIydHBaWE5NYVhOMEtTQjdDZ2tKY21WMGRYSnVJRnRkQ2dsOUNnbHlaWFIxY200Z1QySnFaV04wTG10bGVYTW9RVU5GTG1OdmIydHBaWE5NYVhOMEtRb0pDUzV0WVhBb1puVnVZM1JwYjI0Z0tHdGxlU2tnZXdvSkNRbHlaWFIxY200Z2EyVjVJQ3NnSnpvZ0p5QXJJRUZEUlM1amIyOXJhV1Z6VEdsemRGdHJaWGxkQ2drSmZTa0tmUW9LQ2dwbWRXNWpkR2x2YmlCeVpXNWtaWEpKYm5SbGNtRmpkR2x2Ym5Nb2JHbHVheXdnYVhSbGJTd2djR0YwYUNrZ2V3b0piR1YwSUdScFlXeHZaM01nUFNCa2IyTjFiV1Z1ZEM1blpYUkZiR1Z0Wlc1MGMwSjVRMnhoYzNOT1lXMWxLQ2RrYVdGc2IyY25LUW9KWm05eUtHeGxkQ0JwSUQwZ01Ec2dhU0E4SUdScFlXeHZaM011YkdWdVozUm9PeUJwS3lzcElIc0tDUWxwWmloa2FXRnNiMmR6VzJsZExtZGxkRUYwZEhKcFluVjBaU2duWVhKcFlTMXBaQ2NwSUQwOUlIQmhkR2dwSUhzS0NRa0piR1YwSUhScGRHeGxJRDBnWkdsaGJHOW5jMXRwWFM1blpYUkZiR1Z0Wlc1MGMwSjVWR0ZuVG1GdFpTZ25hREluS1Zzd1hRb0pDUWxwZEdWdExtTnNZWE56VG1GdFpTQTlJQ2RwYm5SbGNtRmpkR2x2YmljS0NRa0phV1lvZEdsMGJHVXBJSHNLQ1FrSkNXbG1LR3hwYm1zdWFXNXVaWEpVWlhoMElDRTlJSFJwZEd4bExtbHVibVZ5VkdWNGRDa0tDUWtKQ1Fsc2FXNXJMbWx1Ym1WeVZHVjRkQ0E5SUhScGRHeGxMbWx1Ym1WeVZHVjRkQW9KQ1FsOUlHVnNjMlVnZXdvSkNRa0phV1lvYkdsdWF5NXBibTVsY2xSbGVIUWdJVDBnWkdsaGJHOW5jMXRwWFM1cGJtNWxjbFJsZUhRdWMzVmljM1J5S0RBc0lERXdNQ2twQ2drSkNRa0piR2x1YXk1cGJtNWxjbFJsZUhRZ1BTQmthV0ZzYjJkelcybGRMbWx1Ym1WeVZHVjRkQzV6ZFdKemRISW9NQ3dnTVRBd0tRb0pDUWw5Q2drSkNXbG1LR1JwWVd4dlozTmJhVjB1Y0dGeVpXNTBSV3hsYldWdWRDQWhQVDBnYVhSbGJTa2dld29KQ1FrSmFYUmxiUzVoY0hCbGJtUkRhR2xzWkNoa2FXRnNiMmR6VzJsZEtRb0pDUWw5Q2drSkNXSnlaV0ZyQ2drSmZRb0pmUXA5Q2dvS1puVnVZM1JwYjI0Z2FXNTBaWEpoWTNScGIyNXpUR2x6ZENncElIc0tDV2xtS0NGQlEwVXVhVzUwWlhKaFkzUnBiMjV6S1NCN0Nna0pjbVYwZFhKdUlGdGRDZ2w5Q2dseVpYUjFjbTRnUVVORkxtbHVkR1Z5WVdOMGFXOXVjd29KQ1M1dFlYQW9ablZ1WTNScGIyNGdLR1JwWVd4dlp5a2dld29KQ1FseVpYUjFjbTRnWkdsaGJHOW5MbWRsZEVGMGRISnBZblYwWlNnbllYSnBZUzFwWkNjcENna0pmU2tLZlFvS0NtWjFibU4wYVc5dUlIUm9jbVZoWkZCdmIyd29LU0I3Q2dscFppZ2hRVU5GTG5Sb2NtVmhaRkJ2YjJ3cElIc0tDUWx5WlhSMWNtNGdXMTBLQ1gwS0NYSmxkSFZ5YmlCQlEwVXVkR2h5WldGa1VHOXZiQW9KQ1M1dFlYQW9ablZ1WTNScGIyNGdLSFJvY21WaFpDa2dld29KQ1FseVpYUjFjbTRnYzJsdGNHeHBabmxOYVd4c2FYTmxZMjl1WkhNb1JHRjBaUzV1YjNjb0tTQXRJSFJvY21WaFpGc3hYU2tnS3lBbk9pQW5JQ3NnZEdoeVpXRmtXekJkQ2drSmZTa0tmUW9LQ21aMWJtTjBhVzl1SUdsdWFYUlRhV1JsWW1GeVZHaGxiV1VvYm1WM1UzUjViR1VwSUhzS0NXbG1LRUZEUlM1emFXUmxZbUZ5VTNSNWJHVWdmSHdnSVc1bGQxTjBlV3hsS1NCN0Nna0pjbVYwZFhKdUNnbDlDZ2xCUTBVdWMybGtaV0poY2xOMGVXeGxJRDBnWkc5amRXMWxiblF1WTNKbFlYUmxSV3hsYldWdWRDZ25VMVJaVEVVbktRb0pRVU5GTG5OcFpHVmlZWEpUZEhsc1pTNXBibTVsY2xSbGVIUWdQU0J1WlhkVGRIbHNaUW9KWkc5amRXMWxiblF1WW05a2VTNXBibk5sY25SQ1pXWnZjbVVvUVVORkxuTnBaR1ZpWVhKVGRIbHNaU3dnUVVORkxtWnBiR1ZNYVhOMEtRb0tmUW9LWm5WdVkzUnBiMjRnZFhCa1lYUmxSbWxzWld4cGMzUW9abWxzWlhCaGRHZ3BJSHNLQ1dsbUtIUjVjR1Z2WmlCQlEwVWdQVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDUWx5WlhSMWNtNEtDWDBLQ1dsbUtDRkJRMFV1Wm1sc1pVeHBjM1FwSUhzS0NRbEJRMFV1Wm1sc1pVeHBjM1FnUFNCa2IyTjFiV1Z1ZEM1blpYUkZiR1Z0Wlc1MFFubEpaQ2duWm1sc1pTMXNhWE4wSnlrS0NYMEtDV2xtS0NGQlEwVXVabWxzWlV4cGMzUXBJSHNLQ1FsQlEwVXVabWxzWlV4cGMzUWdQU0JrYjJOMWJXVnVkQzVqY21WaGRHVkZiR1Z0Wlc1MEtDZEVTVlluS1FvSkNVRkRSUzVtYVd4bFRHbHpkQzVwWkNBOUlDZG1hV3hsTFd4cGMzUW5DZ2tKWkc5amRXMWxiblF1WW05a2VTNWhjSEJsYm1Rb1FVTkZMbVpwYkdWTWFYTjBLUW9KQ1hObGJtUk5aWE56WVdkbEtIc0tDUWtKYzJOeWFYQjBPaUFuY21WMGRYSnVJSEpsWVdSR2FXeGxLQ0pzYVdKeVlYSjVMM04wZVd4bGN5OXphV1JsWW1GeUxtTnpjeUlwT3ljS0NRbDlLUzUwYUdWdUtHbHVhWFJUYVdSbFltRnlWR2hsYldVcENna0pRVU5GTG1acGJHVk1hWE4wTG1Gd2NHVnVaRU5vYVd4a0tHUnZZM1Z0Wlc1MExtTnlaV0YwWlVWc1pXMWxiblFvSjA5TUp5a3BDZ2w5Q2dsQlEwVXVabWxzWlhOMGFXMWxjaUE5SUc1MWJHd0tDV2xtS0NGQlEwVXVabWxzWlhSNWNHVnpLU0I3Q2drSlFVTkZMbVpwYkdWMGVYQmxjeUE5SUh0OUNnbDlDZ2t2THlCVFRFbEhTRlJNV1NCTlQxSkZJRVZZVUVGT1JFRkNURVVLQ1VGRFJTNW1hV3hsYkdsemRGZHBaR2RsZEhNZ1BTQmJYUW9KUVVORkxtWnBiR1ZzYVhOMFYybGtaMlYwVW05M2N5QTlJRnRkQ2dsc1pYUWdibVYzUm1sc1pYTWdQU0JiWFFvSlptOXlLR3hsZENCcElEMGdNRHNnYVNBOElFWkpURVZmVjBsRVIwVlVVeTVzWlc1bmRHZzdJR2tyS3lrZ2V3b0pDUzh2SUZSUFJFODZJR2xtS0NGbWFXeGxjR0YwYUNrZ1kyOXVkR2x1ZFdVS0NRbEJRMFV1Wm1sc1pXeHBjM1JYYVdSblpYUnpXMjVsZDBacGJHVnpMbXhsYm1kMGFGMGdQU0JHU1V4RlgxZEpSRWRGVkZOYmFWMEtDUWxCUTBVdVptbHNaV3hwYzNSWGFXUm5aWFJTYjNkekxuQjFjMmdvYm1WM1JtbHNaWE11YkdWdVozUm9LUW9KQ1c1bGQwWnBiR1Z6TG5CMWMyZ29Sa2xNUlY5WFNVUkhSVlJUVzJsZFd6QmRLUW9KQ1c1bGQwWnBiR1Z6SUQwZ2JtVjNSbWxzWlhNdVkyOXVZMkYwS0VaSlRFVmZWMGxFUjBWVVUxdHBYVnN4WFNncEtRb0pmUW9KUVVORkxtWnBiR1ZzYVhOMFYybGtaMlYwVW05M2N5NXpiM0owS0NrS0NnbHBaaWhCUTBVdVptbHNaWE5zYVhOMEtTQjdDZ2tKYkdWMElIQnlaWFpEYjJ4c1lYQnpaU0E5SUVGRFJTNW1hV3hsYzJOdmJHeGhjSE5sWkFvSkNTOHZJSE5oZG1VZ1pYaHdZVzVrTDJOdmJHeGhjSE5sSUhOMFlYUmxJR1YyWlc0Z2FXWWdabWxzWlhNZ1lYSmxJR0ZrWkdWa0lHOXlJSEpsYlc5MlpXUUtDUWxCUTBVdVptbHNaWE5qYjJ4c1lYQnpaV1FnUFNCdVpYZEdhV3hsY3k1eVpXUjFZMlVvWm5WdVkzUnBiMjRnS0c5aWFpd2dhU2tnZXdvSkNRbHNaWFFnYVhOVWIzQk1aWFpsYkNBOUlHa3VjM0JzYVhRb0p5OG5LUzVzWlc1bmRHZ2dQVDBnTVFvSkNRbHBaaWh3Y21WMlEyOXNiR0Z3YzJVdWFHRnpUM2R1VUhKdmNHVnlkSGtvYVNrcElIc0tDUWtKQ1c5aWFsdHBYU0E5SUhCeVpYWkRiMnhzWVhCelpWdHBYUW9KQ1FsOUlHVnNjMlVnZXdvSkNRa0piMkpxVzJsZElEMGdhUzV6Y0d4cGRDZ25MeWNwTG14bGJtZDBhQ0ErSURFZ1B5QXdJRG9nTVFvSkNRbDlDZ2tKQ1M4dklFMUJTVTVVUVVsT0lGUklTVk1nVmtsVFNVSkpURWxVV1NCSlRrUkZXQ0JUVHlCVlUwVlNJQW9KQ1Frdkx5QWdJRWxPVkVWU1FVTlVTVTlPSUVOQlRpQkNSU0JXUlZKWklGTlFSVU5KUmtsRElFRk9SQ0JHUVZOVUNna0pDVUZEUlM1bWFXeGxjM1pwYzJsaWJHVmJhVjBnUFNCcGMxUnZjRXhsZG1Wc0Nna0pDUWtKZkh3Z0lXRnVlVkJoY21WdWRITkRiMnhzWVhCelpXUW9hUzV6Y0d4cGRDZ25MeWNwS1FvSkNRbHlaWFIxY200Z2IySnFDZ2tKZlN3Z2UzMHBDZ2w5SUdWc2MyVWdld29KQ1VGRFJTNW1hV3hsYzNacGMybGliR1VnUFNCN2ZTQXZMeUJKSUVOQlRpQkVUeUJVU0VsVElFRk1UQ0JFUVZrS0NRa3ZMeUFnSUZSUFJFODZJRU5JUlVOTElGWTRJRlZUUlZNZ1NFRlRTQ0JVUVVKTVJWTWdUMUlnU1VZZ1VFaFFJRWxUSUVaQlUxUkZVZ29KQ1VGRFJTNW1hV3hsYzJOdmJHeGhjSE5sWkNBOUlHNWxkMFpwYkdWekxuSmxaSFZqWlNnS0NRa0pablZ1WTNScGIyNGdLRzlpYWl3Z2FTa2dld29KQ1FrSmJHVjBJR2x6Vkc5d1RHVjJaV3dnUFNCcExuTndiR2wwS0Njdkp5a3ViR1Z1WjNSb0lEMDlJREVLQ1FrSkNXOWlhbHRwWFNBOUlHbHpWRzl3VEdWMlpXd2dQeUF4SURvZ01Bb0pDUWtKUVVORkxtWnBiR1Z6ZG1semFXSnNaVnRwWFNBOUlHbHpWRzl3VEdWMlpXd0tDUWtKQ1hKbGRIVnliaUJ2WW1vS0NRa0pmU3dnZTMwcENnbDlDZ29KUVVORkxtWnBiR1Z6YkdsemRDQTlJRzVsZDBacGJHVnpDZ2xCUTBVdVptbHNaWE5qYjNWdWRDQTlJRTlpYW1WamRDNTJZV3gxWlhNb1FVTkZMbVpwYkdWemRtbHphV0pzWlNrS0NRa0pMbkpsWkhWalpTaG1kVzVqZEdsdmJpQW9jQ3dnYVNrZ2V5QnlaWFIxY200Z2NDQXJJR2tnZlN3Z01Da0tDVUZEUlM1bWFXeGxjMjF2ZG1Wa0lEMGdkSEoxWlFvSmFXWW9kSGx3Wlc5bUlFTnZiVjlHY21GdFpTQTlQU0FuZFc1a1pXWnBibVZrSnlrZ2V3b0pDVk5aVXk1bWNtRnRaVWx1ZEdWeWRtRnNJRDBnYzJWMFNXNTBaWEoyWVd3b1puVnVZM1JwYjI0Z0tDa2dld29KQ1FseVpXNWtaWEpHYVd4bGJHbHpkQ2dwQ2drSmZTd2dNVEF3S1FvSmZRb0tmUW9LWm5WdVkzUnBiMjRnYVhORWFYSmxZM1J2Y25rb2FTa2dld29KTHk4Z2IyNXNlU0JtYjJ4a1pYSWdjR0YwYUhNZ1lXNWtJR1JwY21WamRHOXlhV1Z6SUdGeVpTQmpiMnhzWVhCemFXSnNaU3dLQ1M4dklDQWdiV2x6YzJsdVp5QndZWFJvY3lCaFpHUmxaQ0J6WlhCbGNtRjBaV3g1SUdGaWIzWmxDZ2t2THlBZ0lFaEZUa05GSUZSSVJTQkRTRVZEU3lCR1QxSWdJVVpUTG5acGNuUjFZV3hiWm1sc1pYTmJhbDFkQ2dseVpYUjFjbTRnSVVaVExuWnBjblIxWVd4YmFWMGdmSHdnUmxNdWRtbHlkSFZoYkZ0cFhTNXRiMlJsSUQwOUlFWlRYMFJKVWdwOUNnb0tDZ29LWm5WdVkzUnBiMjRnZEc5bloyeGxRMjlzYkdGd2MyVW9jbTkzTENCa1lYUmhVbTkzS1NCN0NnbHBaaWdoUVVORkxtWnBiR1Z6WTI5c2JHRndjMlZrS1NCN0Nna0pjbVYwZFhKdUNnbDlDZ2xzWlhRZ1kyOXNiR0Z3YzJVZ1BTQWhRVU5GTG1acGJHVnpZMjlzYkdGd2MyVmtXMlJoZEdGU2IzZGRDZ2xCUTBVdVptbHNaWE5qYjJ4c1lYQnpaV1JiWkdGMFlWSnZkMTBnUFNCamIyeHNZWEJ6WlFvSlptOXlLR3hsZENCcElEMGdjbTkzT3lCcElEd2dRVU5GTG1acGJHVnpiR2x6ZEM1c1pXNW5kR2c3SUdrckt5a2dld29KQ1dsbUtFRkRSUzVtYVd4bGMyeHBjM1JiYVYwdWMzVmljM1J5YVc1bktEQXNJR1JoZEdGU2IzY3ViR1Z1WjNSb0tRb0pDUWt1Ykc5allXeGxRMjl0Y0dGeVpTaGtZWFJoVW05M0tTa2dld29KQ1FsaWNtVmhheUF2THlCdWJ5QnRiM0psSUdacGJHVnpJSFZ1WkdWeUlIUm9hWE1nYzI5eWRHVmtJR1p2YkdSbGNnb0pDWDBLQ1Frdkx5QmtiMjRuZENCdFlXdGxJSFJvWlNCeWIzY2dkMlVnWTJ4cFkydGxaQ0J2YmlCcGJuWnBjMmxpYkdVS0NRbHBaaWhCUTBVdVptbHNaWE5zYVhOMFcybGRMbXh2WTJGc1pVTnZiWEJoY21Vb1pHRjBZVkp2ZHlrZ0lUMDlJREFwSUhzS0NRa0pRVU5GTG1acGJHVnpkbWx6YVdKc1pWdEJRMFV1Wm1sc1pYTnNhWE4wVzJsZFhTQTlJQ0ZoYm5sUVlYSmxiblJ6UTI5c2JHRndjMlZrS0VGRFJTNW1hV3hsYzJ4cGMzUmJhVjB1YzNCc2FYUW9KeThuS1NrS0NRbDlJR1ZzYzJVZ2V3b0pDUWxqYjI1MGFXNTFaU0F2THlCa2IyNG5kQ0JqYjNWdWRDQnpaV3htUHdvSkNYMEtDUWxwWmlnaFkyOXNiR0Z3YzJVcElIc0tDUWtKUVVORkxtWnBiR1Z6WTI5MWJuUXJLd29KQ1gwZ1pXeHpaU0I3Q2drSkNVRkRSUzVtYVd4bGMyTnZkVzUwTFMwS0NRbDlDZ2w5Q2dsQlEwVXVabWxzWlhOdGIzWmxaQ0E5SUhSeWRXVUtmUW9LQ2dwbWRXNWpkR2x2YmlCa2IwWnBiR1ZEYkdsamF5aGxkblFwSUhzS0NXbG1LQ0ZsZG5RdWRHRnlaMlYwS1NCN0Nna0pjbVYwZFhKdUNnbDlDaUFnYkdWMElHZGhiV1ZrYVhJZ1BTQmhaR1J5WlhOelZHOVRkSEpwYm1jb1JsTmZSMlYwUTNWeWNtVnVkRWRoYldWRWFYSW9LU2tLQ1d4bGRDQnliM2NnUFNCbGRuUXVkR0Z5WjJWMExtZGxkRUYwZEhKcFluVjBaU2duWVhKcFlTMXBaQ2NwSUM4dklGZFVSajhLQ1d4bGRDQmtZWFJoVW05M0lEMGdRVU5GTG1acGJHVnpiR2x6ZEZ0eWIzZGRDZ2xwWmloR1V5NTJhWEowZFdGc1cyUmhkR0ZTYjNkZENna0pKaVlnUmxNdWRtbHlkSFZoYkZ0a1lYUmhVbTkzWFM1dGIyUmxJQ0U5SUVaVFgwUkpVaWtnZXdvSkNVTmlkV1pmUVdSa1ZHVjRkQ2h6ZEhKcGJtZFViMEZrWkhKbGMzTW9DZ2tKQ1FrblpXUnBkQ0FpSnlBcklHUmhkR0ZTYjNjdWNtVndiR0ZqWlNobllXMWxaR2x5SUNzZ0p5OG5MQ0FuSnlrZ0t5QW5JbHh1SnlrcENna0pjbVYwZFhKdUNnbDlDZ2wwYjJkbmJHVkRiMnhzWVhCelpTaHliM2NzSUdSaGRHRlNiM2NwQ24wS0NncG1kVzVqZEdsdmJpQm5aWFJYYVdSblpYUkJkRkp2ZHloeWIzY3BJSHNLQ1d4bGRDQmpiM1Z1ZENBOUlEQUtDV1J2SUhzS0NRbHBaaWhCUTBVdVptbHNaV3hwYzNSWGFXUm5aWFJTYjNkelcyTnZkVzUwWFNBOVBTQnliM2NwSUhzS0NRa0pjbVYwZFhKdUlFRkRSUzVtYVd4bGJHbHpkRmRwWkdkbGRITmJjbTkzWFFvSkNYMEtDUWxqYjNWdWRDc3JDZ2w5SUhkb2FXeGxJQ2hqYjNWdWRDQThJRUZEUlM1bWFXeGxiR2x6ZEZkcFpHZGxkRkp2ZDNNdWJHVnVaM1JvQ2drSkppWWdRVU5GTG1acGJHVnNhWE4wVjJsa1oyVjBVbTkzYzF0amIzVnVkRjBnUEQwZ2NtOTNLUXA5Q2dwbWRXNWpkR2x2YmlCblpYUlhhV1JuWlhSQ1pXWnZjbVZTYjNjb2NtOTNLU0I3Q2dsc1pYUWdZMjkxYm5RZ1BTQXdDZ2xzWlhRZ2QybGtaMlYwQ2dsa2J5QjdDZ2tKYVdZb1FVTkZMbVpwYkdWc2FYTjBWMmxrWjJWMFVtOTNjMXRqYjNWdWRGMGdQRDBnY205M0tTQjdDZ2tKQ1hkcFpHZGxkQ0E5SUVGRFJTNW1hV3hsYkdsemRGZHBaR2RsZEhOYmNtOTNYUW9KQ1gwS0NRbGpiM1Z1ZENzckNnbDlJSGRvYVd4bElDaGpiM1Z1ZENBOElFRkRSUzVtYVd4bGJHbHpkRmRwWkdkbGRGSnZkM011YkdWdVozUm9DZ2tKSmlZZ1FVTkZMbVpwYkdWc2FYTjBWMmxrWjJWMFVtOTNjMXRqYjNWdWRGMGdQRDBnY205M0tRb0pjbVYwZFhKdUlIZHBaR2RsZEFwOUNnb0tablZ1WTNScGIyNGdjbVZ1WkdWeVJtbHNaU2hzYVc1ckxDQnBkR1Z0TENCd1lYUm9LU0I3Q2dsc1pYUWdjMlZuYldWdWRITWdQU0J3WVhSb0xuTndiR2wwS0Njdkp5a0tDV2xtS0d4cGJtc3VhVzV1WlhKVVpYaDBJQ0U5SUhObFoyMWxiblJ6TG5Oc2FXTmxLQzB4S1Zzd1hTa2dld29KSUFsc2FXNXJMbWx1Ym1WeVZHVjRkQ0E5SUhObFoyMWxiblJ6TG5Oc2FXTmxLQzB4S1Zzd1hRb0pmUW9KYkdsdWF5NXpkSGxzWlM1aVlXTnJaM0p2ZFc1a1VHOXphWFJwYjI0Z1BTQW9LSE5sWjIxbGJuUnpMbXhsYm1kMGFDQXRJREVwSUNvZ01qQWdLeUF4TUNrZ0t5QW5jSGdnTlRBbEp3b0phV1lvYVhSbGJTNWpiR0Z6YzB4cGMzUXVZMjl1ZEdGcGJuTW9KMlpwYkdWc2FYTjBMWGRwWkdkbGRDY3BLUW9KQ1dsMFpXMHVZMnhoYzNOTWFYTjBMbkpsYlc5MlpTZ25abWxzWld4cGMzUXRkMmxrWjJWMEp5a0tDV3hwYm1zdWMzUjViR1V1Y0dGa1pHbHVaMHhsWm5RZ1BTQW9jMlZuYldWdWRITXViR1Z1WjNSb0lDb2dNakFnS3lBeU1Da2dLeUFuY0hnbkNnbHBaaWhwYzBScGNtVmpkRzl5ZVNod1lYUm9LU2tnZXdvSkNXbG1LQ0ZwZEdWdExtTnNZWE56VEdsemRDNWpiMjUwWVdsdWN5Z25abTlzWkdWeUp5a3BDZ2tKQ1dsMFpXMHVZMnhoYzNOTWFYTjBMbUZrWkNnblptOXNaR1Z5SnlrS0NRbHBaaWdoUVVORkxtWnBiR1Z6WTI5c2JHRndjMlZrVzNCaGRHaGRJQ1ltSUNGcGRHVnRMbU5zWVhOelRHbHpkQzVqYjI1MFlXbHVjeWduYjNCbGJpY3BLUW9KQ1FscGRHVnRMbU5zWVhOelRHbHpkQzVoWkdRb0oyOXdaVzRuS1FvSkNXbG1LRUZEUlM1bWFXeGxjMk52Ykd4aGNITmxaRnR3WVhSb1hTQW1KaUJwZEdWdExtTnNZWE56VEdsemRDNWpiMjUwWVdsdWN5Z25iM0JsYmljcEtRb0pDUWxwZEdWdExtTnNZWE56VEdsemRDNXlaVzF2ZG1Vb0oyOXdaVzRuS1FvSkNXbG1LR2wwWlcwdVkyeGhjM05NYVhOMExtTnZiblJoYVc1ektDZG1hV3hsSnlrcENna0pDV2wwWlcwdVkyeGhjM05NYVhOMExuSmxiVzkyWlNnblptbHNaU2NwQ2dsOUlHVnNjMlVnZXdvSkNXbG1LR2wwWlcwdVkyeGhjM05PWVcxbElDRTlJQ2RtYVd4bEp5a0tDUWtKYVhSbGJTNWpiR0Z6YzA1aGJXVWdQU0FuWm1sc1pTY0tDUWxwWmlocGRHVnRMbU5zWVhOelRHbHpkQzVqYjI1MFlXbHVjeWduWm05c1pHVnlKeWtwQ2drSkNXbDBaVzB1WTJ4aGMzTk1hWE4wTG5KbGJXOTJaU2duWm05c1pHVnlKeWtLQ1gwS0NuMEtDZ3BtZFc1amRHbHZiaUJ5Wlc1a1pYSkViMk4xYldWdWRDaHNhVzVyTENCcGRHVnRMQ0J3WVhSb0tTQjdDZ2t2TDFCeWIyMXBjMlV1Y21WemIyeDJaU2h6Wlc1a1RXVnpjMkZuWlNoN0Nna3ZMd2x6WTNKcGNIUTZJQ2R5WlhSMWNtNGdjbVZ1WkdWeVJHOWpkVzFsYm5ReUtDazdYRzRuQ2drdkwzMHBLUW9KTHk5eVpYUjFjbTRLQ1dadmNpaHNaWFFnYVNBOUlEQTdJR2tnUENCQlEwVXVaRzlqZFcxbGJuUmhkR2x2Ymk1c1pXNW5kR2c3SUdrckt5a2dld29KQ1d4bGRDQnlaWEJzWVdObFpFNWhiV1VnUFNCQlEwVXVaRzlqZFcxbGJuUmhkR2x2Ymx0cFhRb0pDUWt1Y21Wd2JHRmpaU2duTG1wekp5d2dKeTV0WkNjcENna0pDUzV5WlhCc1lXTmxLQzljTHk5bkxDQW5YeWNwQ2drSmFXWW9jbVZ3YkdGalpXUk9ZVzFsSUNFOUlIQmhkR2dwSUhzS0NRa0pZMjl1ZEdsdWRXVUtDUWw5Q2dvSkNWQnliMjFwYzJVdWNtVnpiMngyWlNoelpXNWtUV1Z6YzJGblpTaDdDZ2tKQ1hOamNtbHdkRG9nSjNKbGRIVnliaUJ5Wlc1a1pYSk5ZWEpyWkc5M2JpZ2lKeUFySUVGRFJTNWtiMk4xYldWdWRHRjBhVzl1VzJsZElDc2dKeUlwTzF4dUp3b0pDWDBwTG5Sb1pXNG9ablZ1WTNScGIyNGdLSEpsYzNCdmJuTmxLU0I3Q2drSkNXbG1LSEpsYzNCdmJuTmxLU0I3Q2drSkNRbHNaWFFnYm1WM1JHbGhiRzluSUQwZ1pHOWpkVzFsYm5RdVkzSmxZWFJsUld4bGJXVnVkQ2duUkVsV0p5a0tDUWtKQ1c1bGQwUnBZV3h2Wnk1cFpDQTlJQ2RrYjJOMWJXVnVkR0YwYVc5dUp3b0pDUWtKYm1WM1JHbGhiRzluTG1sdWJtVnlTRlJOVENBOUlISmxjM0J2Ym5ObENna0pDUWxwZEdWdExtRndjR1Z1WkVOb2FXeGtLRzVsZDBScFlXeHZaeWtLQ1FrSmZRb0pDWDBwS1FvSmZRb0pDbjBLQ2dwbWRXNWpkR2x2YmlCeVpXNWtaWEpYYVdSblpYUW9iR2x1YXl3Z2FYUmxiU3dnY0dGMGFDa2dld29KYVdZb2JHbHVheTVwYm01bGNsUmxlSFFnSVQwZ2NHRjBhQ2tnZXlBdkx5QnZkR2hsY25kcGMyVWdZVzV1YjNscGJtY2dabXhoYzJnZ2FXNGdaV3hsYldWdWRDQndZV2RsQ2drSmJHbHVheTVwYm01bGNsUmxlSFFnUFNCd1lYUm9DZ2w5Q2dsc2FXNXJMbk4wZVd4bExuQmhaR1JwYm1kTVpXWjBJRDBnSnpFd2NIZ25DZ2xwWmlnaGFYUmxiUzVqYkdGemMweHBjM1F1WTI5dWRHRnBibk1vSjJacGJHVnNhWE4wTFhkcFpHZGxkQ2NwS1FvSkNXbDBaVzB1WTJ4aGMzTk1hWE4wTG1Ga1pDZ25abWxzWld4cGMzUXRkMmxrWjJWMEp5a0tDV2xtS0NGQlEwVXVabWxzWlhOamIyeHNZWEJ6WldSYmNHRjBhRjBnSmlZZ0lXbDBaVzB1WTJ4aGMzTk1hWE4wTG1OdmJuUmhhVzV6S0NkdmNHVnVKeWtwQ2drSmFYUmxiUzVqYkdGemMweHBjM1F1WVdSa0tDZHZjR1Z1SnlrS0NXbG1LRUZEUlM1bWFXeGxjMk52Ykd4aGNITmxaRnR3WVhSb1hTQW1KaUJwZEdWdExtTnNZWE56VEdsemRDNWpiMjUwWVdsdWN5Z25iM0JsYmljcEtRb0pDV2wwWlcwdVkyeGhjM05NYVhOMExuSmxiVzkyWlNnbmIzQmxiaWNwQ2dscFppaHBkR1Z0TG1Oc1lYTnpUR2x6ZEM1amIyNTBZV2x1Y3lnblptOXNaR1Z5SnlrcENna0phWFJsYlM1amJHRnpjMHhwYzNRdWNtVnRiM1psS0NkbWIyeGtaWEluS1FvSmFXWW9hWFJsYlM1amJHRnpjMHhwYzNRdVkyOXVkR0ZwYm5Nb0oyWnBiR1VuS1NrS0NRbHBkR1Z0TG1Oc1lYTnpUR2x6ZEM1eVpXMXZkbVVvSjJacGJHVW5LUW9LZlFvS0NtWjFibU4wYVc5dUlISmxibVJsY2taMWJtTW9iR2x1YXl3Z2FYUmxiU3dnY0dGMGFDa2dld29KYVdZb2JHbHVheTVwYm01bGNsUmxlSFFnSVQwZ2NHRjBhQ2tnZXlBdkx5QnZkR2hsY25kcGMyVWdZVzV1YjNscGJtY2dabXhoYzJnZ2FXNGdaV3hsYldWdWRDQndZV2RsQ2drSmJHbHVheTV6ZEhsc1pTNXdZV1JrYVc1blRHVm1kQ0E5SUNjeE1IQjRKd29KQ1d4cGJtc3VjM1I1YkdVdVltRmphMmR5YjNWdVpGQnZjMmwwYVc5dUlEMGdKekV3Y0hnZ05UQWxKd29KQ1d4cGJtc3VhVzV1WlhKVVpYaDBJRDBnY0dGMGFBb0pmUW9KYVhSbGJTNWpiR0Z6YzA1aGJXVWdQU0FuSndwOUNnb0tablZ1WTNScGIyNGdjbVZ1WkdWeVEyOXZhMmxsS0d4cGJtc3NJR2wwWlcwc0lIQmhkR2dwSUhzS0NXbG1LR3hwYm1zdWFXNXVaWEpVWlhoMElDRTlJSEJoZEdncElIc2dMeThnYjNSb1pYSjNhWE5sSUdGdWJtOTVhVzVuSUdac1lYTm9JR2x1SUdWc1pXMWxiblFnY0dGblpRb0pDV3hwYm1zdWMzUjViR1V1Y0dGa1pHbHVaMHhsWm5RZ1BTQW5NVEJ3ZUNjS0NRbHNhVzVyTG5OMGVXeGxMbUpoWTJ0bmNtOTFibVJRYjNOcGRHbHZiaUE5SUNjeE1IQjRJRFV3SlNjS0NRbHNhVzVyTG1sdWJtVnlWR1Y0ZENBOUlIQmhkR2dLQ1gwS0NXbDBaVzB1WTJ4aGMzTk9ZVzFsSUQwZ0p5Y0tmUW9LQ21aMWJtTjBhVzl1SUhKbGJtUmxjbFJvY21WaFpDaHNhVzVyTENCcGRHVnRMQ0J3WVhSb0tTQjdDZ2xwWmloc2FXNXJMbWx1Ym1WeVZHVjRkQ0FoUFNCd1lYUm9LU0I3SUM4dklHOTBhR1Z5ZDJselpTQmhibTV2ZVdsdVp5Qm1iR0Z6YUNCcGJpQmxiR1Z0Wlc1MElIQmhaMlVLQ1Fsc2FXNXJMbk4wZVd4bExuQmhaR1JwYm1kTVpXWjBJRDBnSnpFd2NIZ25DZ2tKYkdsdWF5NXpkSGxzWlM1aVlXTnJaM0p2ZFc1a1VHOXphWFJwYjI0Z1BTQW5NVEJ3ZUNBMU1DVW5DZ2tKYkdsdWF5NXBibTVsY2xSbGVIUWdQU0J3WVhSb0NnbDlDZ2xwZEdWdExtTnNZWE56VG1GdFpTQTlJQ2NuQ24wS0Nnb0tDaTh2SUVSUElGUklSU0JUUVUxRklFdEpUa1FnVDBZZ1ZrbFNWRlZCVENCU1JVNUVSVkpKVGtjZ1ZFVkRTRTVKVVZWRklFRkRSU0JWVTBWVElFOU9JRU5QUkVVc0NpOHZJQ0FnUVU1RUlFRlFVRXhaSUVsVUlGUlBJRlJJUlNCR1NVeEZJRXhKVTFRZ1NVNGdRMEZUUlNCVVNFVlNSU2RUSUVWV1JWSWdURWxMUlN3Z01UQXNNREF3Q2k4dklDQWdWRWhCVkNCTlNVZElWQ0JDUlNCVVQwOGdUVlZEU0NCR1QxSWdRU0JRUVVkRkxpQkNUMDlMVFVGU1MxTXNJRVpQVWlCRldFRk5VRXhGUHdvdkx5QlVUMFJQT2lCR1FVNURXU0JUVkZWR1JpQk1TVXRGSUZaVElFTlBSRVVnUlZoVVJVNVRTVTlPVXlCTVNWTlVMQ0JIU1ZSSVZVSWdRVU5VU1U5T1V5Qk1SVVpVSUVoQlRrUWdURWxUVkN3S0x5OGdJQ0JUU0U5WElFWkpURVV0UjBoUFUxUWdWRUZTUjBWVVV5QkNSVVpQVWtVZ1RVRkxSVVpKVEVVZ1ExSkZRVlJGVXlCVVNFVk5JRlZUU1U1SElGTlpUbFJCV0NCQlRrRk1XVk5KVXdvdkx5QWdJRXhKUzBVZ1RVRkRUMU1nUkU5RlV5QkpUaUJHU1U1RVJWSWdWMGhGVGlCWlQxVWdSMDhnVkU4Z1EwOVFXU0JCSUVaSlRFVWdUMUlnVTA5TlJWUklTVTVISUVsVElBb3ZMeUFnSUZWUVRFOUJSRWxPUnlCVVR5QkpRMHhQVlVRdUNtWjFibU4wYVc5dUlISmxibVJsY2tacGJHVnNhWE4wS0NrZ2V3b0phV1lvSVVGRFJTNW1hV3hsVEdsemRDa2dld29KQ1hWd1pHRjBaVVpwYkdWc2FYTjBLQ2tLQ1FscFppZ2hRVU5GTG1acGJHVk1hWE4wS1NCN0Nna0pDWEpsZEhWeWJnb0pDWDBLQ1gwS0NXeGxkQ0JzYVc1bFNHVnBaMmgwSUQwZ01qRUtDV2xtS0hSNWNHVnZaaUIzYVc1a2IzY3VZV05sSUNFOUlDZDFibVJsWm1sdVpXUW5DZ2tKQ1NZbUlIUjVjR1Z2WmlCM2FXNWtiM2N1WVdObExuSmxibVJsY21WeUlDRTlJQ2QxYm1SbFptbHVaV1FuS1NCN0Nna0piR2x1WlVobGFXZG9kQ0E5SUdGalpTNXlaVzVrWlhKbGNpNXNhVzVsU0dWcFoyaDBDZ2w5Q2dvSkx5OGdSMFZPUlZKQlZFVWdWRWhKVXlCTVNWTlVJRTlPSUVKQlEwdEZUa1FnVlZOSlRrY2dWa2xTVkZWQlRDQkVUMDBzSUVOVFV5QkRUMDVVVWs5TUlFOVdSVklnVEVsVFZDQlhTVXhNQ2drdkx5QWdJRXhQVDBzZ1ZFaEZJRk5CVFVVS0NXeGxkQ0JoWTNSMVlXeE1hWE4wSUQwZ1FVTkZMbVpwYkdWTWFYTjBMbWRsZEVWc1pXMWxiblJ6UW5sVVlXZE9ZVzFsS0NkdmJDY3BXekJkQ2dscFppZ2hZV04wZFdGc1RHbHpkQ2tnZXdvSkNYSmxkSFZ5YmdvSmZRb0piR1YwSUc1bGQwaGxhV2RvZENBOUlFRkRSUzVtYVd4bGMyTnZkVzUwSUNvZ2JHbHVaVWhsYVdkb2RBb0phV1lvWVdOMGRXRnNUR2x6ZEM1amJHbGxiblJJWldsbmFIUWdJVDBnYm1WM1NHVnBaMmgwS1FvSkNXRmpkSFZoYkV4cGMzUXVjM1I1YkdVdWFHVnBaMmgwSUQwZ2JtVjNTR1ZwWjJoMElDc2dKM0I0SndvS0NXeGxkQ0IyYVhKMGRXRnNUR2x1WlVOdmRXNTBJRDBnVFdGMGFDNXRhVzRvVFdGMGFDNWpaV2xzS0FvSkNVRkRSUzVtYVd4bFRHbHpkQzVqYkdsbGJuUklaV2xuYUhRZ0x5QnNhVzVsU0dWcFoyaDBLUW9KQ1FrSkxDQkJRMFV1Wm1sc1pYTmpiM1Z1ZENrZ0x5OGdiV2x1TENCMWNHUmhkR1ZrSUc5dUlHbHVkR1Z5WVdOMGFXOXVDZ29KTHk4Z1ZFaEpVeUJKVXlCWFVrOU9SeXdnVTFSQlVsUkpUa2NnVDA0Z1ZrbFRTVUpNUlNCTVNVNUZVeUJNU1ZOVUNna3ZMeUFnSUU1UFZDQkJURXdnVDBZZ1JrbE1SVk11SUVKVlZDQlhRVWxVTENCSlJpQlVTRVZaSUZORFVrOU1URVZFSUVsVUNna3ZMeUFnSUVORlVsUkJTVTVNV1NCRFFVNG5WQ0JFU1ZOUVRFRlpJRXhKVGtWVElFSkZSazlTUlNCVVNFVkpVaUJUUTFKUFRFd0tDUzh2SUNBZ1JWWkZUaUJKUmlCVVNFVlpJRUZTUlNCRFQweE1RVkJUUlVRZ1QxSWdUazlVTGdvSmJHVjBJSE4wWVhKMFRHbHVaU0E5SUUxaGRHZ3VabXh2YjNJb0Nna0pRVU5GTG1acGJHVk1hWE4wTG5OamNtOXNiRlJ2Y0NBdklHeHBibVZJWldsbmFIUXBDZ2xzWlhRZ1pHbHpjR3hoZVVOdmRXNTBJRDBnTUFvS0NXeGxkQ0J5Wlc1a1pYSkdkVzVqZEdsdmJpQTlJR2RsZEZkcFpHZGxkRUpsWm05eVpWSnZkeWh6ZEdGeWRFeHBibVVwV3pKZENnbHNaWFFnZDJsa1oyVjBDZ29KWm05eUtBb0pDV3hsZENCcUlEMGdjM1JoY25STWFXNWxPeUF2THlCemJXRnNiQ0JsWm1acFkybGxibU41SUdkaGFXNC9DZ2tKWkdsemNHeGhlVU52ZFc1MElEd2dkbWx5ZEhWaGJFeHBibVZEYjNWdWRDQW1KaUJxSUR3Z1FVTkZMbVpwYkdWemJHbHpkQzVzWlc1bmRHZzdDZ2tKYWlzckNna3BJSHNLQ1FscFppZ2hRVU5GTG1acGJHVnpkbWx6YVdKc1pWdEJRMFV1Wm1sc1pYTnNhWE4wVzJwZFhTa2dld29KQ1FsamIyNTBhVzUxWlFvSkNYMEtDUWt2THlCVFYwbFVRMGhKVGtjZ1FrVlVWMFZGVGlCSlJFVWdRVTVFSUZOUFZWSkRSU0JVVWtWRklGUlBJRU5QVUZrZ1UwaEpWQ0JEVDBSRklFa2dDZ2tKTHk4Z0lDQlhVazlVUlNCTVFWTlVJRTVKUjBoVUxpQkpJRkpGUVV4SldrVkVJRlpUSUVOUFJFVWdSRTlGVXlCVVNFbFRJRUpNUVUxRklFWkZRVlJWVWtVS0NRa3ZMeUFnSUVKVlZDQkpWQ2RUSUVSSlUxUlNRVU5VU1U1SExDQkNUMVJJSUZaSlJWZFRJRTlHSUVOSVFVNUhSVk1nUVZKRklGTk5RVXhNSUVGT1JDQUtDUWt2THlBZ0lFbE9RMDlPVmtWT1NVVk9WQ3dnUWtWWlQwNUVJRU5QVFZCQlVrVWdTVk1nUWtWWlQwNUVJRU5QVFZCQlVrVXVJRmRJUVZRZ1NVWWdWRWhGVWtVS0NRa3ZMeUFnSUZkQlV5QkJJRlJCUWlCQlZDQlVTRVVnVkU5UUlFa2dRMDlWVEVRZ1UxZEpWRU5JSUZSUExDQlVUeUJUUlVVZ1UwOVZVa05GSUVOUFRWQkJVa1UvQ2drSmJHVjBJR2wwWlcwS0NRbHNaWFFnYkdsdWF3b0tDUWxwWmloa2FYTndiR0Y1UTI5MWJuUWdQVDBnWVdOMGRXRnNUR2x6ZEM1amFHbHNaSEpsYmk1c1pXNW5kR2dwSUhzS0NRa0phWFJsYlNBOUlHUnZZM1Z0Wlc1MExtTnlaV0YwWlVWc1pXMWxiblFvSjB4Skp5a0tDUWtKWVdOMGRXRnNUR2x6ZEM1aGNIQmxibVJEYUdsc1pDaHBkR1Z0S1FvSkNRbHNhVzVySUQwZ1pHOWpkVzFsYm5RdVkzSmxZWFJsUld4bGJXVnVkQ2duUVNjcENna0pDV3hwYm1zdWIyNWpiR2xqYXlBOUlHUnZSbWxzWlVOc2FXTnJDZ2tKQ1dsMFpXMHVZWEJ3Wlc1a1EyaHBiR1FvYkdsdWF5a0tDUWw5SUdWc2MyVWdld29KQ1FscGRHVnRJRDBnWVdOMGRXRnNUR2x6ZEM1amFHbHNaSEpsYmx0a2FYTndiR0Y1UTI5MWJuUmRDZ2tKQ1d4cGJtc2dQU0JwZEdWdExtTm9hV3hrY21WdVd6QmRDZ2tKZlFvSkNTOHZJRlJQUkU4NklGTklUMWNnVTBWUVJWSkJWRVZFSUVSSlVrVkRWRTlTU1VWVElFbE9JRTlPUlNCTVNVNUZJRXhKUzBVZ1ZrbFRWVUZNSUZOVVZVUkpUeUJEVDBSRklFUlBSVk1LQ1Frdkx5QWdJRWRKVkVoVlFpQkJURk5QSUVSUFJWTWdTVlFnUms5U0lFWlBURVJGVWxNZ1ZFaEJWQ0JQVGt4WklFaEJWa1VnTVNCUVFWUklDZ2tKYVdZb1FVTkZMbVpwYkdWemJXOTJaV1FwSUhzS0NRa0piR2x1YXk1elpYUkJkSFJ5YVdKMWRHVW9KMkZ5YVdFdGFXUW5MQ0JxS1NBdkx5QlhWRVlnVjBGVElGUklTVk1nUTFKQlVEOC9Qd29KQ1FscFppZ29kMmxrWjJWMElEMGdaMlYwVjJsa1oyVjBRWFJTYjNjb2Fpa3BLU0I3Q2drSkNRbHlaVzVrWlhKR2RXNWpkR2x2YmlBOUlIZHBaR2RsZEZzeVhRb0pDUWtKY21WdVpHVnlWMmxrWjJWMEtHeHBibXNzSUdsMFpXMHNJRUZEUlM1bWFXeGxjMnhwYzNSYmFsMHBDZ2tKQ1gwZ1pXeHpaU0I3Q2drSkNRbHlaVzVrWlhKR2RXNWpkR2x2Ymloc2FXNXJMQ0JwZEdWdExDQkJRMFV1Wm1sc1pYTnNhWE4wVzJwZEtRb0pDUWw5Q2drSkNXbDBaVzB1YzNSNWJHVXVaR2x6Y0d4aGVTQTlJQ2RpYkc5amF5Y0tDUWw5Q2drSlpHbHpjR3hoZVVOdmRXNTBLeXNLQ1gwS0NXbG1LRUZEUlM1bWFXeGxjMjF2ZG1Wa0tTQjdDZ2tKWm05eUtHeGxkQ0JwSUQwZ1pHbHpjR3hoZVVOdmRXNTBPeUJwSUR3Z1lXTjBkV0ZzVEdsemRDNWphR2xzWkhKbGJpNXNaVzVuZEdnN0lHa3JLeWtnZXdvSkNRbGhZM1IxWVd4TWFYTjBMbU5vYVd4a2NtVnVXMmxkTG5OMGVXeGxMbVJwYzNCc1lYa2dQU0FuYm05dVpTY0tDUWw5Q2dsOUNnbEJRMFV1Wm1sc1pYTnRiM1psWkNBOUlHWmhiSE5sQ24wS0Nnb3ZLZ29LQ1M4dklHVjRkSEpoWTNRZ1ltRnpaVzVoYldVZ1puSnZiU0I2YVhBZ2NHRjBhQW9KWW1GelpXNWhiV1VnUFNCemRISnlZMmh5S0NCNmFYQm1hV3hsTENCUVFWUklYMU5GVUNBcE93b0phV1lnS0NCaVlYTmxibUZ0WlNBOVBTQk9WVXhNSUNrZ2V3b0pDV0poYzJWdVlXMWxJRDBnZW1sd1ptbHNaVHNLQ1gwZ1pXeHpaU0I3Q2drSlltRnpaVzVoYldVckt6c0tDWDBLQ2dsbWFXeGxUbUZ0WlV4bGJpQTlJQ2hwYm5RcElITjBjbXhsYmlnZ2VtbHdabWxzWlNBcElDc2dNVHNLQ1dKaGMyVk9ZVzFsVEdWdUlEMGdLR2x1ZENrZ2MzUnliR1Z1S0NCaVlYTmxibUZ0WlNBcElDc2dNVHNLQ2dsMVppQTlJSFZ1ZWs5d1pXNG9JSHBwY0dacGJHVWdLVHNLQ1dWeWNpQTlJSFZ1ZWtkbGRFZHNiMkpoYkVsdVptOG9JSFZtTENBbVoya2dLVHNLQ2dscFppQW9JR1Z5Y2lBaFBTQlZUbHBmVDBzZ0tTQjdDZ2tKY21WMGRYSnVJRTVWVEV3N0NnbDlDZ29KYm1GdFpXeGxiaUE5SURBN0NnbG1hV3hsWTI5MWJuUWdQU0F3T3dvSmRXNTZSMjlVYjBacGNuTjBSbWxzWlNnZ2RXWWdLVHNLQ1dadmNpQW9hU0E5SURBN0lHa2dQQ0JuYVM1dWRXMWlaWEpmWlc1MGNuazdJR2tyS3lrS0NYc0tDUWxsY25JZ1BTQjFibnBIWlhSRGRYSnlaVzUwUm1sc1pVbHVabThvZFdZc0lDWm1hV3hsWDJsdVptOHNJR1pwYkdWdVlXMWxYMmx1ZW1sd0xDQnphWHBsYjJZb1ptbHNaVzVoYldWZmFXNTZhWEFwTENCT1ZVeE1MQ0F3TENCT1ZVeE1MQ0F3S1RzS0NRbG1hV3hsYm1GdFpWOXBibnBwY0Z0emFYcGxiMllvWm1sc1pXNWhiV1ZmYVc1NmFYQXBMVEZkSUQwZ0oxd3dKenNLQ1FscFppQW9aWEp5SUNFOUlGVk9XbDlQU3lrZ2V3b0pDUWxpY21WaGF6c0tDUWw5Q2drSkx5OGdXbDlFUlVaTVFWUkZSQW9KQ1dsbUlDZ2dabWxzWlY5cGJtWnZMbU52YlhCeVpYTnphVzl1WDIxbGRHaHZaQ0FoUFNBd0lDWW1JR1pwYkdWZmFXNW1ieTVqYjIxd2NtVnpjMmx2Ymw5dFpYUm9iMlFnSVQwZ09DQWdLU0I3Q2drSkNVTnZiVjlRY21sdWRHWW9JRk5mUTA5TVQxSmZXVVZNVEU5WElDSWxjM3dsY3pvZ2RXNXpkWEJ3YjNKMFpXUWdZMjl0Y0hKbGMzTnBiMjRnYldWMGFHOWtJQ1ZwWEc0aUxDQmlZWE5sYm1GdFpTd2dabWxzWlc1aGJXVmZhVzU2YVhBc0lDaHBiblFwWm1sc1pWOXBibVp2TG1OdmJYQnlaWE56YVc5dVgyMWxkR2h2WkNBcE93b0pDUWwxYm5wSGIxUnZUbVY0ZEVacGJHVW9JSFZtSUNrN0Nna0pDV052Ym5ScGJuVmxPd29KQ1gwS0NRbHVZVzFsYkdWdUlDczlJSE4wY214bGJpZ2dabWxzWlc1aGJXVmZhVzU2YVhBZ0tTQXJJREU3Q2drSmRXNTZSMjlVYjA1bGVIUkdhV3hsS0NCMVppQXBPd29KQ1dacGJHVmpiM1Z1ZENzck93b0pmUW9LQ1dsbUlDZ2dabWxzWldOdmRXNTBJRDA5SURBZ0tTQjdDZ2tKZFc1NlEyeHZjMlVvSUhWbUlDazdDZ2tKY21WMGRYSnVJRTVWVEV3N0NnbDlDaW92Q2dvSyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc2lkZWJhcjIuanNfdGltZXN0YW1wJ109MTY1MTc2NDAyNzkyNzsKd2luZG93LnByZUZTWydsaWJyYXJ5L3NpZGViYXIyLmpzJ109J0NncG1kVzVqZEdsdmJpQnlaVzVrWlhKRWIyTjFiV1Z1ZERJb2JHbHVheXdnYVhSbGJTd2djR0YwYUNrZ2V3b2dJQzhxQ2lBZ1ptOXlLR3hsZENCcElEMGdNRHNnYVNBOElFRkRSUzVrYjJOMWJXVnVkR0YwYVc5dUxteGxibWQwYURzZ2FTc3JLU0I3Q2drSmJHVjBJSEpsY0d4aFkyVmtUbUZ0WlNBOUlFRkRSUzVrYjJOMWJXVnVkR0YwYVc5dVcybGRDZ2tKQ1M1eVpYQnNZV05sS0NjdWFuTW5MQ0FuTG0xa0p5a0tDUWtKTG5KbGNHeGhZMlVvTDF3dkwyY3NJQ2RmSnlrS0NRbHBaaWh5WlhCc1lXTmxaRTVoYldVZ0lUMGdjR0YwYUNrZ2V3b0pDUWxqYjI1MGFXNTFaUW9KQ1gwS0lDQWdJQ292Q24wSyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc3R5bGVzL2NvbW1hbmRzLmNzc190aW1lc3RhbXAnXT0xNjUxNzMwMTMwNjU4Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc3R5bGVzL2NvbW1hbmRzLmNzcyddPSdDaU5qYjIxdFlXNWtMV0poY2lCN0NpQWdjRzl6YVhScGIyNDZJR0ZpYzI5c2RYUmxPd29nSUhvdGFXNWtaWGc2SURrNU9Uc0tJQ0IwYjNBNklEQTdDaUFnY0dGa1pHbHVaem9nTUNBd0lEQWdOREJ3ZURzS0lDQnNaV1owT2lBd093b2dJSGRwWkhSb09pQXhNREFsT3dvZ0lHWnZiblF0YzJsNlpUb2dNVFJ3ZURzS0lDQmpiMnh2Y2pvZ0kwSXdRakE1TURzS0lDQjNhR2wwWlMxemNHRmpaVG9nYm05M2NtRndPd29nSUdobGFXZG9kRG9nTWpKd2VEc0tJQ0JrYVhOd2JHRjVPaUJpYkc5amF6c0tJQ0JpWVdOclozSnZkVzVrT2lBak1EQXdPd3A5Q2dvalkyOXRiV0Z1WkMxaVlYSWdiR0ZpWld3Z2V3b2dJR0poWTJ0bmNtOTFibVF0WTI5c2IzSTZJQ013TURBN0NpQWdZbTl5WkdWeU9pQXhjSGdnYzI5c2FXUWdJekF3TURzS0lDQnZkbVZ5Wm14dmR6b2dhR2xrWkdWdU93b2dJSEJ2YzJsMGFXOXVPaUJ5Wld4aGRHbDJaVHNLSUNCa2FYTndiR0Y1T2lCcGJteHBibVV0WW14dlkyczdDaUFnWW05eVpHVnlMWEpoWkdsMWN6b2dNVEJ3ZURzS0lDQndZV1JrYVc1bk9pQXdJRFJ3ZURzS0lDQnRZWEpuYVc0NklDMHhjSGc3Q2lBZ2VpMXBibVJsZURvZ01Uc0tJQ0JqZFhKemIzSTZJSEJ2YVc1MFpYSTdDbjBLQ2lOamIyMXRZVzVrTFdKaGNpQnNZV0psYkRwaFpuUmxjaUI3Q2lBZ2JHVm1kRHBoZFhSdk93b2dJSEpwWjJoME9qQTdDbjBLQ2lOamIyMXRZVzVrTFdKaGNpQnNZV0psYkRwb2IzWmxjaUI3Q2lBZ1ltRmphMmR5YjNWdVpEb2dJekF3TWpzS2ZRb0tJMk52YlcxaGJtUXRZbUZ5SUdsdWNIVjBPbUZqZEdsMlpTd0tJMk52YlcxaGJtUXRZbUZ5SUdsdWNIVjBPbVp2WTNWekxBb2pZMjl0YldGdVpDMWlZWElnYVc1d2RYUWdld29nSUdKdmNtUmxjam9nTUhCNE93b2dJRzkxZEd4cGJtVTZJRzV2Ym1VN0NuMEtDZ29qWTI5dGJXRnVaQzFpWVhJZ2FXNXdkWFFzQ2lOamIyMXRZVzVrTFdKaGNpQnpaV3hsWTNRc0NpTmpiMjF0WVc1a0xXSmhjaUJ2Y0hScGIyNGdld29nSUdadmJuUTZJREV5Y0hndmJtOXliV0ZzSUNkTmIyNWhZMjhuTENBblRXVnViRzhuTENBblZXSjFiblIxSUUxdmJtOG5MQ0FuUTI5dWMyOXNZWE1uTENBbmMyOTFjbU5sTFdOdlpHVXRjSEp2Snl3Z2JXOXViM053WVdObE93b2dJRzFoY21kcGJqb2dNWEI0T3dvZ0lIQmhaR1JwYm1jNklEQTdDaUFnYjNWMGJHbHVaVG9nYm05dVpUc0tmUW9LSTJOdmJXMWhibVF0WW1GeUlHbHVjSFYwVzNSNWNHVXFQU0pqYUdWamEySnZlQ0pkSUhzS0lDQndiM05wZEdsdmJqb2djbVZzWVhScGRtVTdDaUFnYUdWcFoyaDBPaUF4Y0hnN0NpQWdkMmxrZEdnNklERndlRHNLSUNCdmNHRmphWFI1T2lBd093b2dJSEJoWkdScGJtYzZJREV3TUNVN0NuMEtDaU5qYjIxdFlXNWtMV0poY2lCcGJuQjFkRnQwZVhCbEtqMGlZMmhsWTJ0aWIzZ2lYVHBqYUdWamEyVmtJQ3NnYkdGaVpXd2djM0JoYmlCN0NpQWdiR1ZtZERvZ01qQndlRHNLSUNCaVlXTnJaM0p2ZFc1a0xXTnZiRzl5T2lBalF6QkJNRE13T3dwOUNnb0tJMk52YlcxaGJtUXRZbUZ5SUdsdWNIVjBXM1I1Y0dVcVBTSmphR1ZqYTJKdmVDSmRPbU5vWldOclpXUWdLeUJzWVdKbGJDQnpjR0Z1T21KbFptOXlaU0I3Q2lBZ2JHVm1kRG90TWpCd2VEc0tmUW9LSTJOdmJXMWhibVF0WW1GeUlHbHVjSFYwVzNSNWNHVTlJbU5vWldOclltOTRJbDBnS3lCc1lXSmxiQ0J6Y0dGdUlIc0tJQ0J3YjNOcGRHbHZiam9nWVdKemIyeDFkR1U3Q2lBZ1pHbHpjR3hoZVRvZ1lteHZZMnM3Q2lBZ1kyOXVkR1Z1ZERvZ0lpQWlPd29nSUdKdmVDMXphWHBwYm1jNklHSnZjbVJsY2kxaWIzZzdDaUFnWW05eVpHVnlMWEpoWkdsMWN6b2dNVEF3SlRzS0lDQm9aV2xuYUhRNklERTRjSGc3Q2lBZ2QybGtkR2c2SURFNGNIZzdDaUFnWW1GamEyZHliM1Z1WkMxamIyeHZjam9nSTBFd056QXlNRHNLSUNCc1pXWjBPaUF3T3dvZ0lIUnZjRG9nTURzS0lDQjBjbUZ1YzJsMGFXOXVPaUF1TlhNZ1ltRmphMmR5YjNWdVpDMWpiMnh2Y2lCbFlYTmxPd3A5Q2dvdktpQlVUMFJQT2lCamIyNTJaWEowSUhSdklGTkRVMU1nZDJobGJpQmxiblJwY21VZ1luVnBiR1FnYzNSaFkyc2dhWE1nYVc0Z1luSnZkM05sY2lBcUx3b2pZMjl0YldGdVpDMWlZWElnYVc1d2RYUmJkSGx3WlQwaVkyaGxZMnRpYjNnaVhTQXJJR3hoWW1Wc0lIc0tJQ0J3WVdSa2FXNW5MV3hsWm5RNklEUXdjSGc3Q24wS0NpTmpiMjF0WVc1a0xXSmhjaUJwYm5CMWRGdDBlWEJsUFNKamFHVmphMkp2ZUNKZElDc2diR0ZpWld3Z2MzQmhianBpWldadmNtVWdld29nSUdScGMzQnNZWGs2WW14dlkyczdDaUFnWTI5dWRHVnVkRG9nSWlBaU93b2dJSEJ2YzJsMGFXOXVPbUZpYzI5c2RYUmxPd29nSUhSdmNEb3dPd29nSUd4bFpuUTZNRHNLSUNCaWIzSmtaWEk2SURKd2VDQnpiMnhwWkNBalFUQTNNREl3T3dvZ0lHSnZjbVJsY2kxeVlXUnBkWE02SURFd2NIZzdDaUFnZDJsa2RHZzZJRE00Y0hnN0NpQWdhR1ZwWjJoME9pQXhPSEI0T3dvZ0lHSnZlQzF6YVhwcGJtYzZJR0p2Y21SbGNpMWliM2c3Q24wS0NpTmpiMjF0WVc1a0xXSmhjaUJwYm5CMWRGdDBlWEJsUFNKamFHVmphMkp2ZUNKZElDc2diR0ZpWld3NmFHOTJaWElnYzNCaGJpQjdDaUFnWW1GamEyZHliM1Z1WkMxamIyeHZjam9nSTBNd1FUQXpNRHNLZlFvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc3R5bGVzL2RpYWxvZ3MuY3NzX3RpbWVzdGFtcCddPTE2NTE3MzAwOTM3Njg7CndpbmRvdy5wcmVGU1snbGlicmFyeS9zdHlsZXMvZGlhbG9ncy5jc3MnXT0nQ2k1a2FXRnNiMmNnYVc1d2RYUXNDaTVrYVdGc2IyY2djMlZzWldOMExBb3VaR2xoYkc5bklHOXdkR2x2YmlCN0NpQWdabTl1ZERvZ01USndlQzl1YjNKdFlXd2dKMDF2Ym1GamJ5Y3NJQ2ROWlc1c2J5Y3NJQ2RWWW5WdWRIVWdUVzl1Ynljc0lDZERiMjV6YjJ4aGN5Y3NJQ2R6YjNWeVkyVXRZMjlrWlMxd2NtOG5MQ0J0YjI1dmMzQmhZMlU3Q2lBZ2JXRnlaMmx1T2lBeGNIZzdDaUFnY0dGa1pHbHVaem9nTURzS0lDQnZkWFJzYVc1bE9pQnViMjVsT3dwOUNnb3VaR2xoYkc5bklIc0tJQ0JrYVhOd2JHRjVPaUJ1YjI1bE93b2dJSEJ2YzJsMGFXOXVPaUJoWW5OdmJIVjBaVHNLSUNCMGIzQTZJREE3Q2lBZ2JHVm1kRG9nTURzS0lDQjNhV1IwYURvZ01UQXdKVHNLSUNCaVlXTnJaM0p2ZFc1a09pQWpNakF5TURJd093b2dJSG90YVc1a1pYZzZJREV3TURBN0NpQWdhR1ZwWjJoME9pQXhNREFsT3dvZ0lHSmhZMnRuY205MWJtUXRZMjlzYjNJNklISm5ZbUVvTUN3d0xEQXNMalVwT3dwOUNpNWthV0ZzYjJjZ0xuUnBkR3hsTEFvdVpHbGhiRzluSUdneUlIc0tJQ0J0WVhKbmFXNDZJQzAwTUhCNElDMDBNSEI0SURJd2NIZ2dMVFF3Y0hnN0NpQWdjR0ZrWkdsdVp6b2dNQzR5WlcwZ01DNDFaVzA3Q2lBZ1ltRmphMmR5YjNWdVpEb2dJek16TXpzS0lDQm1iMjUwTFhkbGFXZG9kRG9nWW05c1pEc0tJQ0IwWlhoMExYUnlZVzV6Wm05eWJUb2dkWEJ3WlhKallYTmxPd3A5Q2k1a2FXRnNiMmNnTG1SbGMyTnlhWEIwYVc5dUxBb3VaR2xoYkc5bklENGdLanBtYVhKemRDMWphR2xzWkNCN0NpQWdjRzl6YVhScGIyNDZJR0ZpYzI5c2RYUmxPd29nSUhSdmNEb2dOVEFsT3dvZ0lHeGxablE2SURVd0pUc0tJQ0J0WVhKbmFXNHRkRzl3T2lBdE1UQXdjSGc3Q2lBZ2JXRnlaMmx1TFd4bFpuUTZJQzB5TURCd2VEc0tJQ0JtYjI1MExYTnBlbVU2SURFNGNIZzdDaUFnWTI5c2IzSTZJQ05HUmtZN0NpQWdaR2x6Y0d4aGVUb2dZbXh2WTJzN0NpQWdZbUZqYTJkeWIzVnVaRG9nSXpJeU1qc0tJQ0J3WVdSa2FXNW5PaUEwTUhCNE93cDlDZ291WkdsaGJHOW5JR2x1Y0hWMFczUjVjR1U5SW5KaFpHbHZJbDBnZXdvZ0lHaGxhV2RvZERvZ01YQjRPd29nSUhkcFpIUm9PaUF4Y0hnN0NpQWdjRzl6YVhScGIyNDZZV0p6YjJ4MWRHVTdDaUFnYkdWbWREb3hNREFsT3dvZ0lIUnZjRG94TURBbE93b2dJQzhxSUhacGMybGlhV3hwZEhrNklHaHBaR1JsYmpzZ2QyOXVKM1FnY21WamIzSmtJSE4wWVhSMWN5QnBaaUJwZENkeklHaHBaR1JsYmlBcUx3b2dJRzl3WVdOcGRIazZJREF1TURFN0NuMEtDaTVrYVdGc2IyY2dhVzV3ZFhSYmRIbHdaVDBpY21Ga2FXOGlYU0FySUd4aFltVnNJSHNLSUNCd1lXUmthVzVuT2lBeU1IQjRPd29nSUdKdmNtUmxjam9nTW5CNElITnZiR2xrSUNNek16TTdDaUFnWkdsemNHeGhlVHBwYm14cGJtVXRZbXh2WTJzN0NuMEtDaTVrYVdGc2IyY2dhVzV3ZFhSYmRIbHdaVDBpY21Ga2FXOGlYVHBqYUdWamEyVmtJQ3NnYkdGaVpXd2dld29nSUdKaFkydG5jbTkxYm1RNklDTXpNek03Q24wS0NpTm1hV3hsTFd4cGMzUWdMbWx1ZEdWeVlXTjBhVzl1SUM1a2FXRnNiMmNnUGlBcU9tWnBjbk4wTFdOb2FXeGtJSHNLSUNCMGIzQTZJREV3TUNVN0NpQWdiR1ZtZERvZ01Ec0tJQ0J0WVhKbmFXNHRkRzl3T2lBd093b2dJRzFoY21kcGJpMXNaV1owT2lBd093b2dJSEJ2YzJsMGFXOXVPaUJ5Wld4aGRHbDJaVHNLSUNCdmRtVnlabXh2ZHpvZ2FHbGtaR1Z1T3dwOUNnb2pabWxzWlMxc2FYTjBJQzVwYm5SbGNtRmpkR2x2Ympwb2IzWmxjaUF1WkdsaGJHOW5JRDRnS2pwbWFYSnpkQzFqYUdsc1pDd0tJMlpwYkdVdGJHbHpkQ0F1YVc1MFpYSmhZM1JwYjI0Z0xtUnBZV3h2Wnpwb2IzWmxjaUErSUNvNlptbHljM1F0WTJocGJHUXNDaU5tYVd4bExXeHBjM1FnTG1sdWRHVnlZV04wYVc5dUlHRTZhRzkyWlhJZ0t5QXVaR2xoYkc5bklENGdLanBtYVhKemRDMWphR2xzWkNCN0NpQWdjRzl6YVhScGIyNDZJR0ZpYzI5c2RYUmxPd29nSUc5MlpYSm1iRzkzT2lCMmFYTnBZbXhsT3dwOUNnPT0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L3N0eWxlcy9lZGl0b3IuY3NzX3RpbWVzdGFtcCddPTE2NTE3MzAxNDI5OTU7CndpbmRvdy5wcmVGU1snbGlicmFyeS9zdHlsZXMvZWRpdG9yLmNzcyddPScnOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L3N0eWxlcy9zaWRlYmFyLmNzc190aW1lc3RhbXAnXT0xNjUxNzMwMDMyMjc5Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc3R5bGVzL3NpZGViYXIuY3NzJ109J0Nnb2pabWxzWlMxc2FYTjBJSHNLSUNCM2FXUjBhRG9nTWpVd2NIZzdDaUFnWm05dWRDMXphWHBsT2lBeE5uQjRPd29nSUdac1pYZ3RjMmh5YVc1ck9pQXdPd3A5Q2dvalptbHNaUzFzYVhOMElHOXNJSHNLSUNCdFlYSm5hVzQ2SURBN0NpQWdiR2x6ZEMxemRIbHNaVG9nYm05dVpUc0tJQ0J3WVdSa2FXNW5PaUF3T3dvZ0lIZHBaSFJvT2pFd01DVTdDbjBLQ2lObWFXeGxMV3hwYzNRZ2JHa2dld29nSUhCdmMybDBhVzl1T2lCeVpXeGhkR2wyWlRzS0lDQnRZWEpuYVc0NklEQTdDaUFnY0dGa1pHbHVaem9nTURzS0lDQjNhV1IwYURveE1EQWxPd3A5Q2dvalptbHNaUzFzYVhOMElITjJaeUI3Q2lBZ2QybGtkR2c2SUdGMWRHODdDaUFnYUdWcFoyaDBPaUF5Tm5CNE93b2dJSEJ2YzJsMGFXOXVPaUJoWW5OdmJIVjBaVHNLSUNCc1pXWjBPaUF4TUhCNE93b2dJSFJ2Y0RvZ01Ec0tmUW9LSTJacGJHVXRiR2x6ZENCaElIc0tJQ0IwWlhoMExXUmxZMjl5WVhScGIyNDZJRzV2Ym1VN0NpQWdZMjlzYjNJNklDTkNNRUl3T1RBN0NpQWdaR2x6Y0d4aGVUb2dZbXh2WTJzN0NpQWdkMmhwZEdVdGMzQmhZMlU2SUc1dmQzSmhjRHNLSUNCdmRtVnlabXh2ZHpvZ2FHbGtaR1Z1T3dvZ0lIQmhaR1JwYm1jNklEQWdNQ0F3SURRd2NIZzdDaUFnWW1GamEyZHliM1Z1WkMxeVpYQmxZWFE2SUc1dkxYSmxjR1ZoZERzS0lDQmpkWEp6YjNJNklIQnZhVzUwWlhJN0NuMEtDbUp2WkhrdWJHbG5hSFFnSTJOdmJXMWhibVF0WW1GeUxBcGliMlI1TG14cFoyaDBJQ05tYVd4bExXeHBjM1FnZXdvZ0lHSmhZMnRuY205MWJtUXRZMjlzYjNJNklDTkdSa1pHUmtZN0NuMEtDbUp2WkhrdWJHbG5hSFFnSTJOdmJXMWhibVF0WW1GeUxBcGliMlI1TG14cFoyaDBJQ05tYVd4bExXeHBjM1FnTG1acGJHVnNhWE4wTFhkcFpHZGxkQ0JoTEFwaWIyUjVMbXhwWjJoMElDTm1hV3hsTFd4cGMzUWdZU0I3Q2lBZ1kyOXNiM0k2SUNNeE1URXhNVEU3Q24wS0NtSnZaSGt1YkdsbmFIUWdJMlpwYkdVdGJHbHpkQ0JoT21odmRtVnlMQXBpYjJSNUxteHBaMmgwSUNObWFXeGxMV3hwYzNRZ0xtWnBiR1ZzYVhOMExYZHBaR2RsZENCN0NpQWdZbUZqYTJkeWIzVnVaQzFqYjJ4dmNqb2dJMFJFUkVSRVJEc0tmUW9LWW05a2VTNXNhV2RvZENBalkyOXRiV0Z1WkMxaVlYSWdiR0ZpWld3Z2V3b2dJR0poWTJ0bmNtOTFibVF0WTI5c2IzSTZJQ05HUmtaR1JrWTdDaUFnWW05eVpHVnlMV052Ykc5eU9pQWpSa1pHUmtaR093cDlDZ292S2dvalptbHNaUzFzYVhOMElHeGhZbVZzSUhzS0lDQndiM05wZEdsdmJqcGhZbk52YkhWMFpUc0tJQ0JzWldaME9qQTdDaUFnZEc5d09qQTdDaUFnYjNabGNtWnNiM2M2YUdsa1pHVnVPd29nSUdobGFXZG9kRG9nTVRad2VEc0tJQ0IzYVdSMGFEb2dNVFp3ZURzS2ZRb0tJMlpwYkdVdGJHbHpkQ0JwYm5CMWRDQjdDaUFnYUdWcFoyaDBPakZ3ZURzS0lDQjNhV1IwYURveGNIZzdDaUFnYjNCaFkybDBlVG9nTURzS0lDQndiM05wZEdsdmJqcGhZbk52YkhWMFpUc0tJQ0JzWldaME9qRXdNQ1U3Q24wS0NpTm1hV3hsTFd4cGMzUWdMbXhsZG1Wc01TQitJRHB1YjNRb0xteGxkbVZzTVNrZ2V3b2dJR1JwYzNCc1lYazZibTl1WlRzS2ZRb3FMd29LQ2lObWFXeGxMV3hwYzNRZ0xtWnBiR1VnWVNCN0NpQWdZbUZqYTJkeWIzVnVaQzFwYldGblpUb2dkWEpzS0NBaVpHRjBZVHBwYldGblpTOXpkbWNyZUcxc0xDVXpRM04yWnlCNGJXeHVjejBuYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNuSUhacFpYZENiM2c5SnpBZ01DQXpNaUF6TWljbE0wVWxNME4wYVhSc1pTVXpSV1JsWm1GMWJIUmZabWxzWlNVelF5OTBhWFJzWlNVelJTVXpRM0JoZEdnZ1pEMG5UVEl3TGpReE5Dd3lTRFZXTXpCSU1qZFdPQzQxT0RaYVRUY3NNamhXTkVneE9YWTJhRFpXTWpoYUp5QnpkSGxzWlQwblptbHNiRG9sTWpOak5XTTFZelVuTHlVelJTVXpReTl6ZG1jbE0wVWlJQ2s3Q24wS0NpTm1hV3hsTFd4cGMzUWdMbVp2YkdSbGNpQmhJSHNLSUNCaVlXTnJaM0p2ZFc1a0xXbHRZV2RsT2lCMWNtd29JQ0prWVhSaE9tbHRZV2RsTDNOMlp5dDRiV3dzSlRORGMzWm5JSGh0Ykc1elBTZG9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5Y2dkbWxsZDBKdmVEMG5NQ0F3SURNeUlETXlKeVV6UlNVelEzUnBkR3hsSlRORlpHVm1ZWFZzZEY5bWIyeGtaWElsTTBNdmRHbDBiR1VsTTBVbE0wTndZWFJvSUdROUowMHlOeTQxTERVdU5VZ3hPQzR5VERFMkxqRXNPUzQzU0RRdU5GWXlOaTQxU0RJNUxqWldOUzQxV20wd0xEUXVNa2d4T1M0emJERXVNUzB5TGpGb055NHhXaWNnYzNSNWJHVTlKMlpwYkd3NkpUSXpZekE1TlRVekp5OGxNMFVsTTBNdmMzWm5KVE5GSWlBcE93cDlDZ29qWm1sc1pTMXNhWE4wSUM1bWIyeGtaWEl1YjNCbGJpQmhJSHNLSUNCaVlXTnJaM0p2ZFc1a0xXbHRZV2RsT2lCMWNtd29JQ0prWVhSaE9tbHRZV2RsTDNOMlp5dDRiV3dzSlRORGMzWm5JSGh0Ykc1elBTZG9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5Y2dkbWxsZDBKdmVEMG5NQ0F3SURNeUlETXlKeVV6UlNVelEzUnBkR3hsSlRORlpHVm1ZWFZzZEY5bWIyeGtaWEpmYjNCbGJtVmtKVE5ETDNScGRHeGxKVE5GSlRORGNHRjBhQ0JrUFNkTk1qY3VOQ3cxTGpWSU1UZ3VNa3d4Tmk0eExEa3VOMGcwTGpOV01qWXVOVWd5T1M0MVZqVXVOVnB0TUN3eE9DNDNTRFl1TmxZeE1TNDRTREkzTGpSYWJUQXRNVFF1TlVneE9TNHliREV0TWk0eGFEY3VNVlk1TGpkYUp5QnpkSGxzWlQwblptbHNiRG9sTWpOa1kySTJOMkVuTHlVelJTVXpRM0J2YkhsbmIyNGdjRzlwYm5SelBTY3lOUzQzSURFekxqY2dNQzQxSURFekxqY2dOQzR6SURJMkxqVWdNamt1TlNBeU5pNDFJREkxTGpjZ01UTXVOeWNnYzNSNWJHVTlKMlpwYkd3NkpUSXpaR05pTmpkaEp5OGxNMFVsTTBNdmMzWm5KVE5GSWlBcE93cDlDaU5tYVd4bExXeHBjM1FnTG1acGJHVnNhWE4wTFhkcFpHZGxkQ0I3Q2lBZ1ltRmphMmR5YjNWdVpEb2dJekkzTWpjeU56c0tmUW9qWm1sc1pTMXNhWE4wSUM1bWFXeGxiR2x6ZEMxM2FXUm5aWFFnWVNCN0NpQWdZMjlzYjNJNklDTkZSVVU3Q24wS0kyWnBiR1V0YkdsemRDQXVabWxzWld4cGMzUXRkMmxrWjJWMElHRTZhRzkyWlhJZ2V3b2dJR0poWTJ0bmNtOTFibVF0WTI5c2IzSTZJSFJ5WVc1emNHRnlaVzUwT3dwOUNnb2pabWxzWlMxc2FYTjBJR0U2YUc5MlpYSWdld29nSUdKaFkydG5jbTkxYm1RdFkyOXNiM0k2SUNNd01ESTdDbjBLQ2lObWFXeGxMV3hwYzNRZ0xtbHVkR1Z5WVdOMGFXOXVJQzVrYVdGc2IyY2dQaUFxT21acGNuTjBMV05vYVd4a0lIc0tJQ0IwYjNBNklERXdNQ1U3Q2lBZ2JHVm1kRG9nTURzS0lDQnRZWEpuYVc0dGRHOXdPaUF3T3dvZ0lHMWhjbWRwYmkxc1pXWjBPaUF3T3dvZ0lIQnZjMmwwYVc5dU9pQnlaV3hoZEdsMlpUc0tJQ0J2ZG1WeVpteHZkem9nYUdsa1pHVnVPd3A5Q2dvalptbHNaUzFzYVhOMElDNXBiblJsY21GamRHbHZianBvYjNabGNpQXVaR2xoYkc5bklENGdLanBtYVhKemRDMWphR2xzWkN3S0kyWnBiR1V0YkdsemRDQXVhVzUwWlhKaFkzUnBiMjRnTG1ScFlXeHZaenBvYjNabGNpQStJQ282Wm1seWMzUXRZMmhwYkdRc0NpTm1hV3hsTFd4cGMzUWdMbWx1ZEdWeVlXTjBhVzl1SUdFNmFHOTJaWElnS3lBdVpHbGhiRzluSUQ0Z0tqcG1hWEp6ZEMxamFHbHNaQ0I3Q2lBZ2NHOXphWFJwYjI0NklHRmljMjlzZFhSbE93b2dJRzkyWlhKbWJHOTNPaUIyYVhOcFlteGxPd3A5Q2c9PSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvdWkuanNfdGltZXN0YW1wJ109MTY1MTY3NTc4MzMxNzsKd2luZG93LnByZUZTWydsaWJyYXJ5L3VpLmpzJ109J0NtRnplVzVqSUdaMWJtTjBhVzl1SUdWdWRHVnlVR0Z6YzNkdmNtUW9kWEpzS1NCN0NpQWdiR1YwSUhWelpYSWdQU0JoZDJGcGRDQmtiMDF2Y25Cb1pYVnpVR0Z6Y3lncElDOHZJR2x1YVhRZ1ptOXlJR05zYVdWdWRBb0phV1lvSVhWelpYSXBJSHNLQ1FsMGFISnZkeUJ1WlhjZ1JYSnliM0lvSjA1bFpXUnpJRTF2Y25Cb1pYVnpJSEJoYzNOM2IzSmtMaWNwQ2dsOUNuMEtDZ3BoYzNsdVl5Qm1kVzVqZEdsdmJpQmxiblJsY2t4dloybHVLSFZ5YkNrZ2V3b2dJR3hsZENCMWMyVnlJRDBnWVhkaGFYUWdaRzlOYjNKd2FHVjFjMUJoYzNNb0tTQXZMeUJwYm1sMElHWnZjaUJqYkdsbGJuUUtDV2xtS0NGMWMyVnlLU0I3Q2drSmRHaHliM2NnYm1WM0lFVnljbTl5S0NkT1pXVmtjeUJOYjNKd2FHVjFjeUJ3WVhOemQyOXlaQzRuS1FvSmZRcDlDZ29LWVhONWJtTWdablZ1WTNScGIyNGdaRzlFYVdGc2IyY29aR2xoYkc5bktTQjdDaTh2SUdOb2NtOXRaUzV6ZEc5eVlXZGxMbk41Ym1NdWMyVjBLSHNnYlhsMFpYaDBPaUIwZUhSV1lXeDFaU0I5S1RzS0NXeGxkQ0IwY25sVWFXMWxjeUE5SURFMUNnbHNaWFFnY21WemNHOXVjMlVLQ1dSdklIc0tJQ0FnSUM4dmRISjVJSHNLSUNBZ0lDQWdjbVZ6Y0c5dWMyVWdQU0JoZDJGcGRDQnpaVzVrVFdWemMyRm5aU2hrYVdGc2IyY3BDaUFnSUNBdkwzMGdZMkYwWTJnZ0tHVXBJSHNLSUNBZ0lDOHZJQ0JwWmlobExtMWxjM05oWjJVdWFXNWpiSFZrWlhNb0p5Y3BLUW9nSUNBZ0x5OTlDZ2tKYVdZb2NtVnpjRzl1YzJVZ0ppWWdkSGx3Wlc5bUlISmxjM0J2Ym5ObExuSmxjM0J2Ym5ObFNXUWdJVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDUWtKWW5KbFlXc0tDUWw5Q2dsOUlIZG9hV3hsS0MwdGRISjVWR2x0WlhNZ1BpQXdLUW9nSUM4dmFXWW9JWEpsYzNCdmJuTmxLU0I3Q2lBZ0lDQWdJQzh2SUVCU2IyeHNZbUZqYXlncENpQWdMeThnSUdSbFluVm5aMlZ5Q2lBZ0x5OTlDaUFnY21WMGRYSnVJSEpsYzNCdmJuTmxDbjBLQ21GemVXNWpJR1oxYm1OMGFXOXVJR1J2VUdGblpVeHZaMmx1S0dSdmJXRnBiaWtnZXdvZ0lISmxkSFZ5YmlCaGQyRnBkQ0JrYjBScFlXeHZaeWg3SUFvZ0lDQWdZV05qWlhOemIzSTZJQ2RmWlc1MFpYSk1iMmRwYmljc0NpQWdJQ0IwYVhSc1pUb2dKMFZ1ZEdWeUlIQmhjM04zYjNKa09pQW5JQ3NnWkc5dFlXbHVMQW9nSUNBZ0x5OGdURTlNSVNCWFZFWWdTVk1nVkVoQlZEOGdVRWxGSUVsT0lGTkxXU0VnVEU5V1JTQkVSVkJGVGtSRlRrTlpJRWxPU2tWRFZFbFBUaTRLSUNBZ0lIQnliMlpwYkdWek9pQmphSEp2YldVdWNISnZabWxzWlhNdWJHbHpkQ2dwSUFvZ0lIMHBDbjBLQ21GemVXNWpJR1oxYm1OMGFXOXVJR1J2VTNsemRHVnRURzluYVc0b0tTQjdDaUFnY21WMGRYSnVJR0YzWVdsMElHUnZSR2xoYkc5bktIc2dDaUFnSUNCaFkyTmxjM052Y2pvZ0oxOWxiblJsY2t4dloybHVKeXdLSUNBZ0lIUnBkR3hsT2lBblJXNTBaWElnWVNCemVYTjBaVzBnY0dGemMzZHZjbVF1Snl3S0lDQWdJSEJ5YjJacGJHVnpPaUJqYUhKdmJXVXVjSEp2Wm1sc1pYTXViR2x6ZENncElBb2dJSDBwQ24wS0NncGhjM2x1WXlCbWRXNWpkR2x2YmlCa2IwdGxlVVJwWVd4dlp5Z3BJSHNLSUNCeVpYUjFjbTRnWVhkaGFYUWdaRzlFYVdGc2IyY29ld29nSUNBZ1lXTmpaWE56YjNJNklDZGZiVzl5Y0dobGRYTkxaWGtuTEFvZ0lDQWdaSEpoWjBSeWIzQTZJSFJ5ZFdVc0NpQWdmU2tLZlFvS0NtWjFibU4wYVc5dUlHUnZSR2xoYkc5bktISmxjWFZsYzNRc0lISmxjR3g1S1NCN0NpQWdiR1YwSUhSbGJYQnNZWFJsSUQwZ1FYSnlZWGt1Wm5KdmJTaEdVeTUyYVhKMGRXRnNXeWRzYVdKeVlYSjVMMmx1ZEdWeVlXTjBhVzl1Y3k5a2FXRnNiMmR6TG1oMGJXd25YUW9nSUNBZ0xtTnZiblJsYm5SektTNXRZWEFvWm5WdVkzUnBiMjRnS0dNcElIc2djbVYwZFhKdUlGTjBjbWx1Wnk1bWNtOXRRMmhoY2tOdlpHVW9ZeWtnZlNrdWFtOXBiaWduSnlrS0lDQnNaWFFnWkc5dElEMGdjR0Z5YzJWRWIyTjFiV1Z1ZENoMFpXMXdiR0YwWlNrS0lDQnNaWFFnWkdsaGJHOW5JRDBnWkc5dExtZGxkRVZzWlcxbGJuUnpRbmxKWkNoeVpYRjFaWE4wTG1GalkyVnpjMjl5S1FvZ0lHbG1LQ0ZrYVdGc2IyY3BJSHNLSUNBZ0lISmxkSFZ5YmdvZ0lIMEtJQ0JwWmloeVpYRjFaWE4wTG5CeWIyWnBiR1Z6S1NCN0lDOHZJRlJQUkU4NklIUmxiWEJzWVhSbGN6OGdUWFZ6ZEdGamFHVS9DZ29nSUgwS0NXUnBZV3h2Wnk1elpYUkJkSFJ5YVdKMWRHVW9KMkZ5YVdFdGFXUW5MQ0J5WlhGMVpYTjBMbkpsYzNCdmJuTmxTV1FwQ2lBZ2NtVnhkV1Z6ZEM1aFkzUnBiMjRnUFNCbWRXNWpkR2x2YmlBb0tTQjdDaUFnSUNBdkx5QlRTVTVMSVFvZ0lDQWdiR1YwSUdadmNtMVNaWE4xYkhSeklEMGdZMjlzYkdWamRFWnZjbTBvWkdsaGJHOW5LUW9nSUNBZ2FHbGtaVVJwWVd4dlp5aGthV0ZzYjJjcENpQWdJQ0J5WlhSMWNtNGdjbVZ3Ykhrb2V3b2dJQ0FnSUNCeVpYTndiMjV6WlVsa09pQnlaWE53YjI1elpVbGtMQW9nSUNBZ0lDQnlaWE4xYkhRNklHWnZjbTFTWlhOMWJIUnpDaUFnSUNCOUtRb2dJSDBLSUNCemFHOTNSR2xoYkc5bktHUnBZV3h2Wnl3Z2NtVnhkV1Z6ZENrS0lDQnlaWFIxY200Z1pHbGhiRzluQ24wS0Nnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L3V0aWxpdGllcy5qc190aW1lc3RhbXAnXT0xNjUxNzYzMDIzODAxOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvdXRpbGl0aWVzLmpzJ109J0NtRnplVzVqSUdaMWJtTjBhVzl1SUhOc1pXVndLSE5sWTNNcElIc0tJQ0J5WlhSMWNtNGdZWGRoYVhRZ2JtVjNJRkJ5YjIxcGMyVW9jbVZ6YjJ4MlpTQTlQaUJ6WlhSVWFXMWxiM1YwS0hKbGMyOXNkbVVzSUhObFkzTWdLaUF4TURBd0tTa0tmUW9LQ21GemVXNWpJR1oxYm1OMGFXOXVJR1J2WTNWdFpXNTBWR2wwYkdVb2RHRmlTV1FwSUhzS0lDQnNaWFFnZEdGaUlEMGdZWGRoYVhRZ1kyaHliMjFsTG5SaFluTXVaMlYwS0hSaFlrbGtLUW9nSUhKbGRIVnliaUIwWVdJdWRHbDBiR1VLZlFvS1puVnVZM1JwYjI0Z2JXRnJaVTF2ZG1WVWJ5aHBaQ3dnZEdGaWN5a2dld29nSUhKbGRIVnliaUJtZFc1amRHbHZiaUFvZUN3Z2VTa2dld29nSUNBZ2NtVjBkWEp1SUhObGRGZHBibVJ2ZDBKdmRXNWtjeWhwWkN3Z2RHRmljeXdnZUN3Z2VTa0tJQ0I5Q24wS0NtWjFibU4wYVc5dUlHMWhhMlZTWlhOcGVtVlVieWhwWkN3Z2RHRmljeWtnZXdvZ0lISmxkSFZ5YmlCbWRXNWpkR2x2YmlBb2R5d2dhQ2tnZXdvZ0lDQWdjbVYwZFhKdUlITmxkRmRwYm1SdmQwSnZkVzVrY3locFpDd2dkR0ZpY3l3Z2RtOXBaQ0F3TENCMmIybGtJREFzSUhjc0lHZ3BDaUFnZlFwOUNnb3ZMeUJVVDBSUE9pQmpiMjlzTENCaGJHMXZjM1FnWkc5dVpTd2dabTl5WTJVZ2RHaHBjeUIwYnlCc2IyRmtJSGR2Y210bGNpQnphV1JsQ2k4dklDQWdiM0lnYlc5MlpTQnBkQ0J6YjIxbGQyaGxjbVVnYjI1c2VTQjBhR1VnWW1GamEyVnVaQ0IzYVd4c0lHRmpZMlZ6Y3l3Z1pHOXRMbXB6Q2k4dklDQWdhWE1nYVcxd2IzSjBaV1FnYVc1MGJ5Qm1jbTl1ZEdWdVpDNEtablZ1WTNScGIyNGdiRzloWkVSdlkzVnRaVzUwWVhScGIyNG9LU0I3Q2dsc1pYUWdaRzlqY3lBOUlGdGRDZ2xzWlhRZ2JHbGljbUZ5ZVVacGJHVnpJRDBnVDJKcVpXTjBMbXRsZVhNb1JsTXVkbWx5ZEhWaGJDa0tDUzh2SUdSdlpYTnVKM1FnZDI5eWF5QjNhWFJvSUhCeWIyMXBjMlZ6Q2drdkx5QXVabWxzZEdWeUtHWjFibU4wYVc5dUlDaHdLU0I3SUhKbGRIVnliaUJ3TG5OMFlYSjBjMWRwZEdnb0oyeHBZbkpoY25rdkp5a2dmU2tLQ1dadmNpaHNaWFFnYVNBOUlEQTdJR2tnUENCc2FXSnlZWEo1Um1sc1pYTXViR1Z1WjNSb095QnBLeXNwSUhzS0NRbHBaaWhzYVdKeVlYSjVSbWxzWlhOYmFWMHVjM1JoY25SelYybDBhQ2duYkdsaWNtRnllUzhuS1FvSkNRa21KaUJzYVdKeVlYSjVSbWxzWlhOYmFWMHVaVzVrYzFkcGRHZ29KeTV0WkNjcEtTQjdDZ2tKQ1dSdlkzTXVjSFZ6YUNoc2FXSnlZWEo1Um1sc1pYTmJhVjBwQ2drSmZRb0pmUW9KYVdZb2RIbHdaVzltSUVGRFJTQWhQU0FuZFc1a1pXWnBibVZrSnlrZ2V3b0pDVUZEUlM1a2IyTjFiV1Z1ZEdGMGFXOXVJRDBnWkc5amN3b0pmU0JsYkhObElIc0tDUWxqYjI1emIyeGxMbXh2Wnloa2IyTnpLUW9KZlFvSmNtVjBkWEp1SUdSdlkzTUtmUW9LQ21aMWJtTjBhVzl1SUhKbGJtUmxjazFoY210a2IzZHVLR1pwYkdWdVlXMWxLU0I3Q2lBZ0x5OTJZWElnYUd4cWN5QWdJQ0FnSUNBOUlISmxjWFZwY21Vb0oyaHBaMmhzYVdkb2RDNXFjeWNwSUM4dklHaDBkSEJ6T2k4dmFHbG5hR3hwWjJoMGFuTXViM0puTHdvSmJHVjBJR3hwWW5KaGNubEdhV3hsY3lBOUlFOWlhbVZqZEM1clpYbHpLRVpUTG5acGNuUjFZV3dwQ2dsbWIzSW9iR1YwSUdrZ1BTQXdPeUJwSUR3Z2JHbGljbUZ5ZVVacGJHVnpMbXhsYm1kMGFEc2dhU3NyS1NCN0Nna0phV1lvWm1sc1pXNWhiV1VnUFQwZ2JHbGljbUZ5ZVVacGJHVnpXMmxkS1NCN0Nna0pDWFpoY2lCdFpDQTlJRzVsZHlCU1pXMWhjbXRoWW14bEtDZG1kV3hzSnl3Z2V3b0pDUWw5S1FvSkNRbHNaWFFnY21WemRXeDBJRDBnYldRdWNtVnVaR1Z5S0hKbFlXUkdhV3hsS0d4cFluSmhjbmxHYVd4bGMxdHBYU2twQ2drSkNXTnZibk52YkdVdWJHOW5LSEpsYzNWc2RDazdDZ2tKQ1hKbGRIVnliaUJ5WlhOMWJIUUtDUWw5Q2dsOUNuMEtDZz09JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS92Y3MuanNfdGltZXN0YW1wJ109MTY1MTc2NTc3MTA3MjsKd2luZG93LnByZUZTWydsaWJyYXJ5L3Zjcy5qcyddPSdMeThnWTI5dWJtVmpkR2x2YmlCMGIyOXNjeUJtYjNJZ1oybDBhSFZpSUdoMGRIQnpJSEpsYzNRZ2MyVnlkbWxqWlFvS0Nnbz0nOwpmdW5jdGlvbiByZWFkUHJlRlMoKSB7CgkvLyBUT0RPOiBvZmZsaW5lIGRvd25sb2FkIHNvIGl0IHNhdmVzIGJpbmFyeSB0byBJbmRleGVkREIKCWlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKCQl0aHJvdyBuZXcgRXJyb3IoJ05vIHByZUZTLCBtdXN0IGxvYWQgaW4gY29ycmVjdCBvcmRlciEnKQoJfQoJbGV0IHByZWxvYWRlZFBhdGhzID0gT2JqZWN0LmtleXMod2luZG93LnByZUZTKQoJZm9yKGxldCBpID0gMDsgaSA8IHByZWxvYWRlZFBhdGhzLmxlbmd0aDsgaSsrKSB7CgkJaWYocHJlbG9hZGVkUGF0aHNbaV0uZW5kc1dpdGgoJ190aW1lc3RhbXAnKSkgewoJCQljb250aW51ZQoJCX0KCQlsZXQgbmV3RmlsZXRpbWUgPSB3aW5kb3cucHJlRlNbCgkJCQlwcmVsb2FkZWRQYXRoc1tpXSArICdfdGltZXN0YW1wJ10gCgkJCQkJCXx8IG5ldyBEYXRlKCkKCQlGUy52aXJ0dWFsW3ByZWxvYWRlZFBhdGhzW2ldXSA9IHsKCQkJdGltZXN0YW1wOiBuZXdGaWxldGltZSwKCQkJbW9kZTogRlNfRklMRSwKCQkJY29udGVudHM6IF9iYXNlNjRUb0FycmF5QnVmZmVyKHdpbmRvdy5wcmVGU1twcmVsb2FkZWRQYXRoc1tpXV0pCgkJfQoJfQoKfQpmdW5jdGlvbiBfYmFzZTY0VG9BcnJheUJ1ZmZlcihiYXNlNjQpIHsKCXZhciBiaW5hcnlfc3RyaW5nID0gd2luZG93LmF0b2IoYmFzZTY0KTsKCXZhciBsZW4gPSBiaW5hcnlfc3RyaW5nLmxlbmd0aDsKCXZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbik7Cglmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CgkJCWJ5dGVzW2ldID0gYmluYXJ5X3N0cmluZy5jaGFyQ29kZUF0KGkpOwoJfQoJcmV0dXJuIGJ5dGVzOwp9CmZ1bmN0aW9uIGdldFJ1bklkKGxlbmd0aCkgewoJbGV0IG91dHB1dCA9IFtdCglsZXQgdWludDhhcnJheSA9IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkobGVuZ3RoKSkKCWZvciAodmFyIGkgPSAwOyBpIDwgdWludDhhcnJheS5sZW5ndGg7IGkrKykgewoJCW91dHB1dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUodWludDhhcnJheVtpXSkpOwoJfQoJcmV0dXJuIGJ0b2Eob3V0cHV0LmpvaW4oJycpKTsKfQpmdW5jdGlvbiBhc3luY1RyaWdnZXJNaWRkbGV3YXJlKG9uTWVzc2FnZSwgc2VuZE1lc3NhZ2UpIHsKCWNvbnN0IENPTU1BTkRfVElNRU9VVCA9IDMwMDAKCglpZih0eXBlb2YgYXdhaXRJbnRlcnZhbCA9PSAndW5kZWZpbmVkJykgewoJCWdsb2JhbFRoaXMuYXdhaXRJbnRlcnZhbCA9IHNldEludGVydmFsKGFzeW5jRnJhbWVUcmlnZ2VyLCAxMDAwLzYwKQoJfQoKCS8vIEJFQ0FVU0UgVEhJUyBJUyBDQUxMRUQgTVVMVElQTEUgVElNRVMgQlVUIEkgV0FTIFRSRUFUSU5HIFRISVMgTElLRSBTVEFUSUMKCS8vbGV0IGF3YWl0aW5nUmVzcG9uc2UgPSB7fQoJaWYodHlwZW9mIGF3YWl0aW5nUmVzcG9uc2UgPT0gJ3VuZGVmaW5lZCcpIHsKCQlnbG9iYWxUaGlzLmF3YWl0aW5nUmVzcG9uc2VDYW5jZWwgPSBbXQoJCWdsb2JhbFRoaXMuYXdhaXRpbmdSZXNwb25zZVF1ZXVlID0gW10KCQlnbG9iYWxUaGlzLmF3YWl0aW5nUmVzcG9uc2VUaW1lcyA9IFtdCgl9CgoJZnVuY3Rpb24gYXdhaXRPclRpbWVvdXQocmVxdWVzdCkgewoJCS8vIGFjY2VzcyBhIGNsaWVudCB2YXJpYWJsZSB0aGV5J3ZlIHNoYXJlZCBmcm9tIGNvZGUKCQkvLyBiYXNpYyBjbGllbnQgc3RhdHVzIG1lc3NhZ2UKCgkJLy8gb25seSByZXF1ZXN0LnNjcmlwdCBleHBlY3RzIGEgcmVzcG9uc2UKCQkvLyAgIHJlcXVlc3Quc3RhdHVzIG1lc3NhZ2VzIGFyZSBvbmUgd2F5IHNvIGRvbid0IGdlbmVyYXRlIGEgCgkJLy8gICBjYWxsYmFjayBvciBhIHByb21pc2Ugd2FpdAoJCWlmKHJlcXVlc3QgJiYgdHlwZW9mIHJlcXVlc3Quc2NyaXB0ID09ICd1bmRlZmluZWQnKSB7CgkJCXJldHVybiBQcm9taXNlLnJlc29sdmUoc2VuZE1lc3NhZ2UocmVxdWVzdCkpCgkJfQoKCQlpZihyZXF1ZXN0ICYmIHR5cGVvZiByZXF1ZXN0LnJlc3BvbnNlSWQgPT0gJ3VuZGVmaW5lZCcpIHsKCQkJcmVxdWVzdC5yZXNwb25zZUlkID0gZ2V0UnVuSWQoMjApCgkJfQoKCQkvLyBUSElTIElTIFBVUkVMWSBGT1IgVEVDSE5JQ0FMTFkgTUFUQ0hJTkcgQ0xJQ0tTIE9OIFRIRSBQQUdFCgkJLy8gICBCQUNLIFVQIFdJVEggVEhFIFJJR0hUIFBST0NFU1MsIFRISVMgSVMgTk9UIEEgU0VDVVJJVFkgVEhJTkcuCgkJcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CgkJCWF3YWl0aW5nUmVzcG9uc2VDYW5jZWwucHVzaChyZXF1ZXN0LnJlc3BvbnNlSWQpCgkJCWF3YWl0aW5nUmVzcG9uc2VRdWV1ZS5wdXNoKHJlc29sdmUpCgkJCWF3YWl0aW5nUmVzcG9uc2VUaW1lcy5wdXNoKERhdGUubm93KCkpCgkJCXJldHVybiBzZW5kTWVzc2FnZShyZXF1ZXN0KQoJCX0pLnRoZW4ob25NZXNzYWdlKQoJfQoJLy8gSSByYW4gaW50byBhIHdlaXJkIGJ1ZyB3aGVyZSBjcmVhdGluZyB0b28gbWFueSAKCS8vICAgdGltZXJzIHdhcyBjYXVzaW5nIHNlZy1mYXVsdAoJLy8gICBpdCBtaWdodCBiZSBuaWNlIHRvIGNhcHR1cmUgdGhhdCBoZXJlLgoJZnVuY3Rpb24gYXN5bmNGcmFtZVRyaWdnZXIoKSB7CgkJaWYoYXdhaXRpbmdSZXNwb25zZVRpbWVzLmxlbmd0aCA9PSAwKSB7CgkJCXJldHVybgoJCX0KCQl3aGlsZShEYXRlLm5vdygpIC0gYXdhaXRpbmdSZXNwb25zZVRpbWVzWzBdID4gQ09NTUFORF9USU1FT1VUKSB7CgkJCWxldCByZXNvbHZlID0gYXdhaXRpbmdSZXNwb25zZVF1ZXVlLnNoaWZ0KCkKCQkJYXdhaXRpbmdSZXNwb25zZVRpbWVzLnNoaWZ0KCkKCQkJbGV0IHJlc3BvbnNlSWQgPSBhd2FpdGluZ1Jlc3BvbnNlQ2FuY2VsLnNoaWZ0KCkKCQkJcmV0dXJuIHJlc29sdmUoewoJCQkJZmFpbDogJ1Jlc3BvbnNlIHRpbWVkIG91dC4nLAoJCQkJcmVzcG9uc2VJZDogcmVzcG9uc2VJZAoJCQl9KQoJCX0KCX0KCglmdW5jdGlvbiBmb3J3YXJkUmVzcG9uc2VCeUlkKHJlc3BvbnNlKSB7CgkJbGV0IHJlc3BvbnNlSW5kZXgKCQlpZihyZXNwb25zZSAmJiB0eXBlb2YgcmVzcG9uc2UucmVzcG9uc2VJZCAhPSAndW5kZWZpbmVkJwoJCQkJJiYgKHJlc3BvbnNlSW5kZXggPSBhd2FpdGluZ1Jlc3BvbnNlQ2FuY2VsLmluZGV4T2YocmVzcG9uc2UucmVzcG9uc2VJZCkpID4gLTEpIHsKCQkJCWxldCByZXNvbHZlID0gYXdhaXRpbmdSZXNwb25zZVF1ZXVlLnNwbGljZShyZXNwb25zZUluZGV4LCAxKVswXQoJCQkJYXdhaXRpbmdSZXNwb25zZVRpbWVzLnNwbGljZShyZXNwb25zZUluZGV4LCAxKQoJCQkJYXdhaXRpbmdSZXNwb25zZUNhbmNlbC5zcGxpY2UocmVzcG9uc2VJbmRleCwgMSkKCQkJCXJldHVybiByZXNvbHZlKHJlc3BvbnNlKQoJCX0gZWxzZSB7CgkJCXJldHVybiBvbk1lc3NhZ2UocmVzcG9uc2UpCgkJfQoJfQoKCXJldHVybiB7CgkJYXdhaXRPclRpbWVvdXQsCgkJZm9yd2FyZFJlc3BvbnNlQnlJZCwKCX0KfQpmdW5jdGlvbiBlbmNyeXB0ZWRSZXNwb25zZU1pZGRsZXdhcmUob25NZXNzYWdlLCBzZW5kTWVzc2FnZSkgewoKCS8vIGFjY2Vzc29ycyBvbiBhbGwgZW5kcyB3aWxsIGV4cGVjdCB0aGVpciByZXN1bHRzIHRvIGJlIHN5bW1ldHJpY2FsbHkKCS8vICAga2V5IGVuY3J5cHRlZCBieSBhIHByZWdlbmVyYXRlZCBzZXNzaW9uIGlkLiBJbiB0aGUgY2FzZSBvZiBwbHVnaW4KCS8vICAgZnJvbnQgZW5kLCB0aGUgZW5jcnlwdGlvbiBoYXBwZW5zIGJldHdlZW4gY2xpZW50IHBhZ2UgYW5kIGJhY2tlbmQuCglsZXQgX3RlbXBvcmFyeVNlc3Npb25FbmNyeXB0b3IKCS8vIGNvZGUgcmV2aWV3LCBtYXJrIHByaXZhdGUgdmlzdWFsbHkgd2l0aCBhbiBfCglsZXQgX2dlbmVyYXRlU2Vzc2lvbkVuY3J5cHRvciA9IGZ1bmN0aW9uIChzZXNzKSB7CgkJX3RlbXBvcmFyeVNlc3Npb25FbmNyeXB0b3IgPSBmdW5jdGlvbiAoZGF0YSkgewoJCQlyZXR1cm4gY3J5cHQoc2VzcywgZGF0YSkKCQl9Cgl9CglsZXQgX2dlbmVyYXRlUmVzcG9uc2VEZWNyeXB0b3IgPSBmdW5jdGlvbiAoc2VzcykgewoJCXJldHVybiBmdW5jdGlvbiAoZGF0YSkgewoJCQlkYXRhLnZhbHVlID0gSlNPTi5wYXJzZShkZWNyeXB0KHNlc3MsIGRhdGEpKQoJCQkvLyBwcmV2ZW50IHJlY3Vyc2lvbgoJCQlkYXRhLnR5cGUgPT0gdHlwZW9mIHJlc3VsdAoJCQlyZXR1cm4gZGF0YQoJCX0KCX0KCWxldCBfcmVzcG9uc2VEZWNyeXB0b3JzID0ge30KCgkvLyBmb3IgY29kZSByZXZpZXdzLCBhbHdheXMgdHJ5IHRvIGRlY3JlYXNlIHRoZSBudW1iZXIgb2Ygc2lua3MuCglmdW5jdGlvbiBlbmNyeXB0UmVzdWx0cyhyZXNwb25zZSkgewoJCWlmKHJlc3BvbnNlICYmIHJlc3BvbnNlLnJlc3VsdAoJCQkvLyBUT0RPOiB0aGlzIHBsYXlzIG9uIGNsaWVudCwgZG8gd2UgbmVlZCBtdWx0aXBsZT8KCQkJLy8gICBJJ2QgdGhpbmsgbm90IHNpbmNlIGNsaWVudHMgKGJyb3dzZXJzLCBvbmx5IGFsbG93IGxpa2UgMyBjb25uZWN0aW9ucyBhdCBhIHRpbWUpCgkJCS8vIHNvIGV2ZW4gaWYgdGhleSBjb3VsZCBhbGwgcHJveHkgb3V0LCBvbmx5IHNvIG1hbnkgY29udHJvbHMgY2FuIHByb3h5IGJhY2sgaW4uCgkJCQkmJiB0eXBlb2YgX3RlbXBvcmFyeVNlc3Npb25FbmNyeXB0b3IgIT0gJ3VuZGVmaW5lZCcpIHsKCQkJbGV0IGVuY3J5cHRlZCA9IF90ZW1wb3JhcnlTZXNzaW9uRW5jcnlwdG9yKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLnJlc3VsdCkpCgkJCXJldHVybiBzZW5kTWVzc2FnZSh7CgkJCQlyZXNwb25zZUlkOiByZXNwb25zZS5yZXNwb25zZUlkLAoJCQkJcmVzdWx0OiB7IHR5cGU6ICdlbmNyeXB0ZWQnLCB2YWx1ZTogZW5jcnlwdGVkIH0KCQkJfSkKCQl9IGVsc2UgewoKCQl9CgkJLy8gVE9ETzogbWFzdGVyIHBhc3N3b3JkIGRldGVjdGlvbgoJCXJldHVybiBzZW5kTWVzc2FnZShyZXNwb25zZSkKCX0KCgoJZnVuY3Rpb24gZGVjcnlwdFJlc3BvbnNlKHJlc3VsdHMpIHsKCQkvLyBzZXNzaW9uSWQgaXMgc2VudCBhdCBhIGRpZmZlcmVudCB0aW1lIGZyb20gdGhlIHJlc3VsdHMuCgkJLy8gc2Vzc2lvbklkIGlzIHNlbnQgdG8gY2xpZW50IGZvciB1c2UgYXMgdGhlIGVuY3J5cHRpb24ga2V5LAoJCS8vICAgZ2VuZXJhdGVkIGJ5IHRoZSBzZXJ2ZXIuIEEgcGx1Z2luIGNvdWxkIHNuaWZmIHRoZSBzZXNzaW9uSWQKCQkvLyAgIGVhbGllciBhbmQgdGhlbiBkZWNyeXB0IHRoZSBuZXh0IGZvcm0gcmVzdWx0cy4KCQkvLyBTSU5LLCBlbmNyeXB0IGZvcm0gZGF0YSBkaXJlY3RseSB0byByZW1vdGUgcGFnZSwgb3IgZGlyZWN0bHkgdG8gYmFja2VuZAoJCS8vICAgaW4gY2FzZSBvZiBzeXN0ZW0gcGFzc3dvcmQgY29sbGVjdGlvbiwgdGhpcyBndXJhbnRlZXMgdGhlIGRhdGEgZ2V0cyB0byAKCQkvLyAgIHRoZSByaWdodCBwYWdlLCBob3BlZnVsbHkgd2l0aG91dCBiZWluZyBsb2dnZWQgb3Igc3RvbGVuLiBTbyBpdCBpcyBkb3VibHkKCQkvLyAgIGVuY3J5cHRlZCBvbiBkaXNrIGJ5IHRoZSBtYXN0ZXIgcGFzc3dvcmQuIE9uY2UgYSBwYXNzd29yZCBpcyBlbnRlcmVkLCByZXBsYWNlCgkJLy8gICB0aGUgZ2VuZXJhdGlvbiBmdW5jdGlvbiB3aXRoIGRvdWJseSBlbmNyeXB0aW9uLgoJCS8vIHRoaXMgaXMgYSByZXN1bHQgdG8gY2xpZW50IGVuZCBhZnRlciBzZW5kaW5nIGFuIGluaXRpYWwgc2NyaXB0IHJlcXVlc3QKCQlfZ2VuZXJhdGVTZXNzaW9uRW5jcnlwdG9yKHJlc3VsdHMuc2Vzc2lvbklkKQoJCQlfcmVzcG9uc2VEZWNyeXB0b3JzW3Jlc3VsdHMucmVzcG9uc2VJZF0gCgkJCQkJPSBfZ2VuZXJhdGVSZXNwb25zZURlY3J5cHRvcihyZXN1bHRzLnNlc3Npb25JZCkKCQkvLyBUT0RPOiBtYXN0ZXIgcGFzc3dvcmQgZGV0ZWN0aW9uCgkJLy8gaWYocmVxdWVzdC5hY2Nlc3Nvci5pbmNsdWRlcygiX3Bhc3N3b3JkIikpCgkJaWYocmVzdWx0cyAmJiByZXN1bHRzLnR5cGUgJiYgcmVzdWx0cy50eXBlID09ICdlbmNyeXB0ZWQnCgkJCSYmIHR5cGVvZiBfcmVzcG9uc2VEZWNyeXB0b3JzW3Jlc3VsdC5yZXNwb25zZUlkXSAhPSAndW5kZWZpbmVkJwoJCSkgewoJCQkvKiBhd2FpdCAqLyByZXR1cm4gb25NZXNzYWdlKF9yZXNwb25zZURlY3J5cHRvcnNbcmVzdWx0LnJlc3BvbnNlSWRdKHJlc3VsdHMudmFsdWUpKQoJCX0gZWxzZSB7CgkJCXRocm93IG5ldyBFcnJvcignVGhlcmUgY2FuIGJlIG9ubHkgb25lLicpCgkJfQoJfQoKCglyZXR1cm4gewoJCWVuY3J5cHRSZXN1bHRzLAoJCWRlY3J5cHRSZXNwb25zZSwKCX0KfQpmdW5jdGlvbiB3b3JrZXJNZXNzYWdlUmVzcG9uc2VNaWRkbGV3YXJlKCkgewoKCWxldCB7CgkJZW5jcnlwdFJlc3VsdHNJZlNlc3Npb24sCgkJZGVjcnlwdFJlc3BvbnNlSWZTZXNzaW9uLAoJfSA9IGluc3RhbGxFbmNyeXB0ZWRBc3luY01pZGRsZXdhcmUob25NZXNzYWdlLCBzZWxmLnBvc3RNZXNzYWdlKSAKCglmdW5jdGlvbiBzZW5kTWVzc2FnZShkYXRhKSB7CgkJaWYoZGF0YSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHsKCQkJZGVidWdnZXIKCQl9CgkJY29uc29sZS5sb2coJ3JlcXVlc3Q6ICcsIGRhdGEpCgkJbGV0IGFzeW5jUmVzdWx0ID0gZW5jcnlwdFJlc3VsdHNJZlNlc3Npb24oZGF0YSkKCQljb25zb2xlLmFzc2VydChhc3luY1Jlc3VsdC5jb25zdHJ1Y3RvciA9PT0gUHJvbWlzZSkgLy8gID09PSBQcm9taXNlCgkJcmV0dXJuIFByb21pc2UucmVzb2x2ZShhc3luY1Jlc3VsdCkudGhlbigKCQlmdW5jdGlvbiAocmVzdWx0KSB7CgkJCWlmKCFyZXN1bHQpIHsKCQkJCS8vIFRPRE86IGZpeG1lLCB0aW1lcnMgYXJlIG5vdCBnZXR0aW5nIGNsZWFyZWQgZm9yIG1pZGRsZXdhcmUKCQkJCS8vICB0b28gY29tcGxpY2F0ZWQKCQkJCS8vZGVidWdnZXIKCQkJfQoJCQljb25zb2xlLmxvZygncmVzdWx0OiAnLCByZXN1bHQpCgkJCXJldHVybiByZXN1bHQKCQl9KQoJfQoKCS8vIGxvbCwgbWFrZSBhIGdhbWUgd2hlcmUgbG9zdCBhY2NvdW50cyBsZWFkIHRvIGEgdmlydHVhbCBjb3VydCByb29tIHRvIHByb3ZlIHlvdXIgaWRlbnRpdHkganVzdCBsaWtlIElSTAoJLy8gICBpZiBzb21lb25lIGNsYWltcyB0byBiZSBSaWNrIChmcm9tIFJpY2sgJiBNb3J0eSkgYWxsIHRoZSBvdGhlciBSaWNrcyBoYXZlIHRvIG9idnNlcnZlIGFuZCBhbGxvdwoJLy8gICBvciB0YWtlIHRoZSBuZXcgUmljayBvdXQgZm9yIG5vdCBiZWluZyBSaWNreSBlbm91Z2guIC0gTWV0YXZlcnNlCglmdW5jdGlvbiBvbk1lc3NhZ2UocmVxdWVzdCkgewoJCWxldCBsaWIKCQlpZighcmVxdWVzdCkgewoJCQlyZXR1cm4KCQl9CgkJLy8gdGhpcyBpcyB0aGUgb25seSB0aGluZyB3b3JrZXIgZG9lcz8KCQlyZXR1cm4gZG9BY2Nlc3NvcihyZXF1ZXN0KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewoJCQlpZihyZXNwb25zZSAmJiB0eXBlb2YgcmVzcG9uc2UgPT0gJ29iamVjdCcpIHsKCQkJCXJlc3BvbnNlLnJlc3BvbnNlSWQgPSByZXF1ZXN0LnJlc3BvbnNlSWQKCQkJfQoJCQlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHNlbmRNZXNzYWdlKHJlc3BvbnNlKSkKCQl9KQoJfQoKCmZ1bmN0aW9uIHJlYWRGaWxlKGZpbGVuYW1lKSB7CglyZXR1cm4gQXJyYXkuZnJvbShGUy52aXJ0dWFsW2ZpbGVuYW1lXS5jb250ZW50cykKCQkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpIH0pCgkJLmpvaW4oJycpCn0KCgkvKgoJdmFyIG1kID0gbmV3IFJlbWFya2FibGUoJ2Z1bGwnLCB7CgkJaHRtbDogICAgICAgICBmYWxzZSwgICAgICAgIC8vIEVuYWJsZSBIVE1MIHRhZ3MgaW4gc291cmNlCgkJeGh0bWxPdXQ6ICAgICBmYWxzZSwgICAgICAgIC8vIFVzZSAnLycgdG8gY2xvc2Ugc2luZ2xlIHRhZ3MgKCZsdDticiAvJmd0OykKCQlicmVha3M6ICAgICAgIGZhbHNlLCAgICAgICAgLy8gQ29udmVydCAnXG4nIGluIHBhcmFncmFwaHMgaW50byAmbHQ7YnImZ3Q7CgkJbGFuZ1ByZWZpeDogICAnbGFuZ3VhZ2UtJywgIC8vIENTUyBsYW5ndWFnZSBwcmVmaXggZm9yIGZlbmNlZCBibG9ja3MKCQlsaW5raWZ5OiAgICAgIHRydWUsICAgICAgICAgLy8gYXV0b2NvbnZlcnQgVVJMLWxpa2UgdGV4dHMgdG8gbGlua3MKCQlsaW5rVGFyZ2V0OiAgICcnLCAgICAgICAgICAgLy8gc2V0IHRhcmdldCB0byBvcGVuIGxpbmsgaW4KCgkJLy8gRW5hYmxlIHNvbWUgbGFuZ3VhZ2UtbmV1dHJhbCByZXBsYWNlbWVudHMgKyBxdW90ZXMgYmVhdXRpZmljYXRpb24KCQl0eXBvZ3JhcGhlcjogIGZhbHNlLAoKCQkvLyBEb3VibGUgKyBzaW5nbGUgcXVvdGVzIHJlcGxhY2VtZW50IHBhaXJzLCB3aGVuIHR5cG9ncmFwaGVyIGVuYWJsZWQsCgkJLy8gYW5kIHNtYXJ0cXVvdGVzIG9uLiBTZXQgZG91YmxlcyB0byAnwqvCuycgZm9yIFJ1c3NpYW4sICfigJ7igJwnIGZvciBHZXJtYW4uCgkJcXVvdGVzOiAn4oCc4oCd4oCY4oCZJywKCgkJLy8gSGlnaGxpZ2h0ZXIgZnVuY3Rpb24uIFNob3VsZCByZXR1cm4gZXNjYXBlZCBIVE1MLAoJCS8vIG9yICcnIGlmIGlucHV0IG5vdCBjaGFuZ2VkCgkJaGlnaGxpZ2h0OiBmdW5jdGlvbiAoc3RyLCBsYW5nKSB7CgkJCWlmIChsYW5nICYmIGhsanMuZ2V0TGFuZ3VhZ2UobGFuZykpIHsKCQkJCXRyeSB7CgkJCQkJcmV0dXJuIGhsanMuaGlnaGxpZ2h0KGxhbmcsIHN0cikudmFsdWU7CgkJCQl9IGNhdGNoIChfXykge30KCQkJfQoKCQkJdHJ5IHsKCQkJCXJldHVybiBobGpzLmhpZ2hsaWdodEF1dG8oc3RyKS52YWx1ZTsKCQkJfSBjYXRjaCAoX18pIHt9CgoJCQlyZXR1cm4gJyc7IC8vIHVzZSBleHRlcm5hbCBkZWZhdWx0IGVzY2FwaW5nCgkJfQoJfSk7CgkqLwoKCgoJaWYodHlwZW9mIEZTID09ICd1bmRlZmluZWQnKSB7CiAgICBnbG9iYWxUaGlzLkZTID0gewogICAgICB2aXJ0dWFsOiB7fQogICAgfQogICAgZ2xvYmFsVGhpcy5GU19GSUxFID0gKDggPDwgMTIpICsgKCg2IDw8IDMpICsgKDYgPDwgNikgKyAoNikpCiAgfQoJcmVhZFByZUZTKCkKCgkvLyB0aGlzIHdhcyBmb3IgYSB3ZWItd29ya2VyIHNldHVwCglpZih0eXBlb2YgZ2xvYmFsVGhpcyAhPSAndW5kZWZpbmVkJyAKCQkJJiYgdHlwZW9mIGdsb2JhbFRoaXMud2luZG93ID09ICd1bmRlZmluZWQnKSB7CgkJZ2xvYmFsVGhpcy53aW5kb3cgPSBnbG9iYWxUaGlzCgl9CglzZWxmLm9ubWVzc2FnZSA9IGFzeW5jIGZ1bmN0aW9uIChyZXF1ZXN0KSB7CgkJbGV0IHJlc3VsdCA9IGF3YWl0IGRlY3J5cHRSZXNwb25zZUlmU2Vzc2lvbihyZXF1ZXN0LmRhdGEpCgl9CgkvLyBCT09UU1RSQVA/CglPYmplY3QuYXNzaWduKGdsb2JhbFRoaXMsIHsgCgkJc2VuZE1lc3NhZ2U6IHNlbmRNZXNzYWdlLAoJfSkKCglzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2luc3RhbGwnLCBmdW5jdGlvbiAoKSB7CgkJZGVidWdnZXIKCX0pCgp9CmZ1bmN0aW9uIGluc3RhbGxFbmNyeXB0ZWRBc3luY01pZGRsZXdhcmUob25NZXNzYWdlLCBzZW5kTWVzc2FnZSkgewoKCWxldCB7CgkJZW5jcnlwdFJlc3VsdHMsCgl9ID0gZW5jcnlwdGVkUmVzcG9uc2VNaWRkbGV3YXJlKGRlY3J5cHRSZXNwb25zZUlmU2Vzc2lvbiwgc2VuZE1lc3NhZ2UpCgoJbGV0IHsKCQlhd2FpdE9yVGltZW91dCwKCX0gPSBhc3luY1RyaWdnZXJNaWRkbGV3YXJlKG9uTWVzc2FnZSwgc2VuZE1lc3NhZ2UpCgoJbGV0IHsKCQlhd2FpdE9yVGltZW91dDogZW5jcnlwdGVkQXdhaXQsCgkJZm9yd2FyZFJlc3BvbnNlQnlJZCwKCX0gPSBhc3luY1RyaWdnZXJNaWRkbGV3YXJlKG9uTWVzc2FnZSwgZW5jcnlwdFJlc3VsdHMpCgoJbGV0IHsKCQlkZWNyeXB0UmVzcG9uc2UsCgl9ID0gZW5jcnlwdGVkUmVzcG9uc2VNaWRkbGV3YXJlKGZvcndhcmRSZXNwb25zZUJ5SWQsIGVuY3J5cHRSZXN1bHRzSWZTZXNzaW9uKQoKCWZ1bmN0aW9uIGVuY3J5cHRSZXN1bHRzSWZTZXNzaW9uIChyZXF1ZXN0KSB7CgkJaWYocmVxdWVzdC5yZXNwb25zZUlkKSB7CgkJCXJldHVybiBlbmNyeXB0ZWRBd2FpdChyZXF1ZXN0KQoJCX0KCQlyZXR1cm4gYXdhaXRPclRpbWVvdXQocmVxdWVzdCkKCX0KCglmdW5jdGlvbiBkZWNyeXB0UmVzcG9uc2VJZlNlc3Npb24gKHJlc3BvbnNlKSB7CgkJLy8gVE9ETzogZ2VuZXJhdGUgYSBuZXcgc2Vzc2lvbiBmb3IgZXZlcnkgcnVuSWQ/CgoJCS8vIHByZXZlbnQgcmVjdXJzaW9uCgkJaWYocmVzcG9uc2UucmVzcG9uc2VJZCAmJiByZXNwb25zZS50eXBlID09ICdlbmNyeXB0ZWQnKSB7CgkJCS8vIENPREUgUkVWSUVXPyB1c2luZyBtaWRkbGV3YXJlIHBhdHRlcm4gZm9yIGxvZ2ljIGlzb2xhdGlvbj8gc2VwZXJhdGlvbiBvZiBjb25jZXJucz8gCgkJCS8vIFRPRE86IG5vdyBjYW4gcmVtb3ZlIHRoZXNlIGNoZWNrcyBmcm9tIGVuY3J5cHQvZGVjcnlwdCB0byBtYWtlIG1vcmUgZ2VuZXJhbGl6ZWQKCQkJcmV0dXJuIGRlY3J5cHRSZXNwb25zZShyZXNwb25zZSkKCQl9CgkJcmV0dXJuIGZvcndhcmRSZXNwb25zZUJ5SWQocmVzcG9uc2UpCgl9CgoJcmV0dXJuIHsKCQllbmNyeXB0UmVzdWx0c0lmU2Vzc2lvbiwKCQlkZWNyeXB0UmVzcG9uc2VJZlNlc3Npb24sCgl9Cn0Kd29ya2VyTWVzc2FnZVJlc3BvbnNlTWlkZGxld2FyZSgpOwoKCgpjb25zdCBERUZBVUxUX0RFTEFZID0gMTAwMApjb25zdCBERUZBVUxUX1NIT1JUX0RFTEFZID0gMTAwCmNvbnN0IERFRkFVTFRfUEFVU0VEX0lOVEVSVkFMID0gMTAwCgoKCi8vIElOVEVSRVNUSU5HIEZPUiBDT0RFIFJFVkVJV1MsIEhBQklUIE9GIEVYVFJBQ1RJTkcgRE9VQkxFIE5FR0FUSVZFUz8KYXN5bmMgZnVuY3Rpb24gc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpIHsKCWlmKHJ1bkNvbnRleHQucGF1c2VkCgkJJiYgKHJ1bkNvbnRleHQuYnViYmxlRmlsZSA9PSAnPGV2YWw+JwoJCS8vIFRPRE86IEBSb2xsYmFjaygpIGZvciBmYWlsZWQgZGlhbG9ncyB0byBzdGVwIGJhY2sgMSBzdGF0ZW1lbnQgCgkJLy8gICBzbyB3ZSBjYW4gcGxheSB0aGUgdGhyZWFkIGFuZCBwaWNrIHVwIGFnYWluCgkJCXx8IHJ1bkNvbnRleHQuYnViYmxlQVNULnR5cGUgPT0gJ0RlYnVnZ2VyU3RhdGVtZW50JykKCQkpIHsKCQkvLyBhZGQgYSBwYXVzZWQgaGFuZGxlciBmb3IgZGVidWcgYW5kIGNvbnRpbnVlCgkJLy8gICB0aGlzIHdpbGwgaGFuZGxlIHJlc3RvcmF0aW9ucyBmb3IgbGl2ZSBwcm9ncmFtcwoJCS8vICAgaXQgd2lsbCBqdXN0IHNpdCBoZXJlIGFuZCB3YWl0IGZvciB0aGUgcGxheSBidXR0b24uCgkJLy8gQlVUIElTIFRISVMgUkVBTExZIEdPT0QgRU5PVUdIPyBTVVJFIFdFIENBTiBBVFRBQ0ggVE8gQSBMSVZFCgkJLy8gICBQUk9HUkFNIFdJVEggQSBERUJVR0dFUiwgQlVUIFNIT1VMRE4nVCBXRSBCRSBBQkxFIFRPIFRFTEwKCQkvLyAgIFRIRSBQUk9HUkFNIFdIQVQgU1RBVEUgT0YgTUlORCBJVCdTIElOPwoJCS8vIFRPRE86IEVOQ09ERSBSVU5TVEFURU1FTlQoKSBDQUxMIFNUQUNLIEFORCBIQVNIIENPTlRFWFRTCgkJLy8gICBTQVZFIEFORCBSRVNUT1JFIENPTlRFWFRTIEZST00gSlNPTiBFTlRJUkVMWSwgU08gSU4gCgkJLy8gICBUSEUgRlVUVVJFIFdFIENBTiBQUk9HUkFNIE9VUiBQUk9HUkFNUywgTElLRSBGSVhJTkcgVEhFIEZMQVNISU5HIENMT0NLIE9OIEEgVkNSLgoJCWF3YWl0IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CgkJCWxldCBwYXVzZWRUaW1lcgoJCQlwYXVzZWRUaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKCQkJCWlmKCFydW5Db250ZXh0LnBhdXNlZCkgewoJCQkJCWNsZWFySW50ZXJ2YWwocGF1c2VkVGltZXIpCgkJCQkJcmVzb2x2ZSgpCgkJCQl9CgkJCX0sIERFRkFVTFRfUEFVU0VEX0lOVEVSVkFMKQoJCX0pCgl9CgkvLyBUSEVTRSBBUkUgVE9HR0xFRCBBVCBESUZGRVJFTlQgVElNRVMgVE8gQ09OVFJPTCBFVkFMVUFUT1IgRkxPVy4KCWlmKHJ1bkNvbnRleHQuZW5kZWQpIHsKCQlyZXR1cm4gdHJ1ZQoJfSBlbHNlIGlmIChydW5Db250ZXh0LmJyb2tlbikgewoJCXJldHVybiB0cnVlCgl9IGVsc2UgaWYgKHJ1bkNvbnRleHQucmV0dXJuZWQpIHsKCQlyZXR1cm4gdHJ1ZQoJfQoJcmV0dXJuIGZhbHNlCn0KCgphc3luYyBmdW5jdGlvbiBydW5GcmFtZShpLCBBU1QsIHJ1bkNvbnRleHQpIHsKCWN1cnJlbnRDb250ZXh0ID0gcnVuQ29udGV4dAoJaWYoQVNUW2ldICYmIEFTVFtpXS5sb2MpIHsKCQljb25zb2xlLmFzc2VydChydW5Db250ZXh0LmJ1YmJsZVN0YWNrLmxlbmd0aCkKCQlsZXQgY3VycmVudEZpbGUgPSBydW5Db250ZXh0LmJ1YmJsZVN0YWNrWwoJCQkJcnVuQ29udGV4dC5idWJibGVTdGFjay5sZW5ndGgtMV1bMV0KCQkJLy8gbm9ybWFsbHkgd2UnZCBza2lwIGFuZCBsZXQgaXQgcnVuIGFzeW5jCgkJCS8vICAgYnV0IGRvU3RhdHVzKCkgYWxzbyBkb2VzIEBEZWxheSgpCgkJbGV0IHNob3VsZFJ1blN0YXR1cyA9IHR5cGVvZiBkb1N0YXR1cyAhPSAndW5kZWZpbmVkJwoJCQkmJiBydW5Db250ZXh0LmJ1YmJsZUxpbmUgIT0gQVNUW2ldLmxvYy5zdGFydC5saW5lCgkJCSYmIHJ1bkNvbnRleHQuYnViYmxlRmlsZSAhPSAnbGlicmFyeS9yZXBsLmpzJwoJCWxldCBkb1NsZWVwID0gcnVuQ29udGV4dC5idWJibGVGaWxlID09ICc8ZXZhbD4nCgkJCSYmICghQVNUW2ldLmNhbGxlZSB8fCBBU1RbaV0uY2FsbGVlLm5hbWUgIT0gJ3NsZWVwJykKCQlpZihjdXJyZW50RmlsZSAhPSAnbGlicmFyeS9yZXBsLmpzJwoJCQl8fCAhcnVuQ29udGV4dC5idWJibGVGaWxlCgkJKSB7CgkJCXJ1bkNvbnRleHQuYnViYmxlRmlsZSA9IGN1cnJlbnRGaWxlCgkJCXJ1bkNvbnRleHQuYnViYmxlQ29sdW1uID0gQVNUW2ldLmxvYy5zdGFydC5jb2x1bW4KCQkJcnVuQ29udGV4dC5idWJibGVMaW5lID0gQVNUW2ldLmxvYy5zdGFydC5saW5lCgkJCXJ1bkNvbnRleHQuYnViYmxlQVNUID0gQVNUCgkJCXJ1bkNvbnRleHQuYnViYmxlVGltZSA9IERhdGUubm93KCkKCQkJcnVuQ29udGV4dC5idWJibGVMaW5lID0gQVNUW2ldLmxvYy5zdGFydC5saW5lCgkJfQoKCQlpZihzaG91bGRSdW5TdGF0dXMpIHsKCQkJLy8gUFJFVkVOVCBSRUNVUlNJT04KCQkJcnVuQ29udGV4dC5idWJibGVGaWxlID0gJ2xpYnJhcnkvcmVwbC5qcycKCQkJYXdhaXQgZG9TdGF0dXMoZG9TbGVlcCkKCQkJcnVuQ29udGV4dC5idWJibGVGaWxlID0gY3VycmVudEZpbGUKCQl9Cgl9IGVsc2UgaWYgKCFBU1RbaV0pIHsKCQlkZWJ1Z2dlcgoJfQp9CgoKYXN5bmMgZnVuY3Rpb24gcnVuU3RhdGVtZW50KGksIEFTVCwgcnVuQ29udGV4dCkgewoJdHJ5IHsKICAgIGF3YWl0IHJ1bkZyYW1lKGksIEFTVCwgcnVuQ29udGV4dCkKCgkJLy8gbW92ZWQgdGhpcyBoZXJlIHNvIHdlIGdldCB0aGUgbGluZSBudW1iZXIgb2YgdGhlIGxhdGVzdCBzdGF0ZW1lbnQKCQkvLyAgIE9OTFkgUEFVU0UgT04gPEVWQUw+IENBTExTCgkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCWRlYnVnZ2VyCgkJCXRocm93IG5ldyBFcnJvcignY29udGV4dCBlbmRlZCEnKQoJCX0KCQoJCS8vIEhPVyBUSEUgSEVMTCBETyBJIFRFU1QgSUYgQSBMQU5HVUFHRSBJTVBMRU1FTlRBVElPTiAKCQkvLyAgICBJUyBGRUFUVVJFIENPTVBMRVRFPwoJCS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vICBQQVNTLVRIUlUKCQlpZihBU1RbaV0udHlwZSA9PSAnTGl0ZXJhbCcgfHwgQVNUW2ldLnR5cGUgPT0gJ0lkZW50aWZpZXInKSB7CgkJCXJldHVybiBhd2FpdCBydW5QcmltaXRpdmUoQVNUW2ldLCBydW5Db250ZXh0KQoJCX0gZWxzZSAKCQlpZihBU1RbaV0udHlwZSA9PSAnQnJlYWtTdGF0ZW1lbnQnKSB7CgkJCXJ1bkNvbnRleHQuYnJva2VuID0gdHJ1ZSAvLyBUT0RPOiBjaGVjayBob3cgZGV0YWlsZWQgcGFyc2VyIGlzLCAKCQkJLy8gICBicmVhayBhbmQgY29udGludWUgYXJlIHN0YXRlbWVudHMgaW4gZm9yLWxvb3A/IG9yIGdlbmVyYWwgc3RhdGVtZW50cz8KCQkJcmV0dXJuCgkJfSBlbHNlCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ0Jsb2NrU3RhdGVtZW50JykgewoJCQlyZXR1cm4gYXdhaXQgcnVuQm9keShBU1RbaV0uYm9keSwgcnVuQ29udGV4dCkKCQl9IGVsc2UKCQkvLyBUT0RPOiBXSEFUIElTIFRISVM/IGZ1bmModmFyTmFtZSA9IGRlZmF1bHQ/KQoJCWlmKEFTVFtpXS50eXBlID09ICdBc3NpZ25tZW50RXhwcmVzc2lvbicpIHsKCQkJLy8gV09XISBJTUFHSU5FIFRIQVQhIFNIT1cgVkFSSUFCTEVTIEJFRk9SRSBBTkQgQUZURVIgQVNTSUdOTUVOVCEgR09PR0xFIENIUk9NRSBERUJVR0dFUiEKCQkJLy8gZG9Bc3NpZ24KCQkJcmV0dXJuIGF3YWl0IHJ1bkFzc2lnbm1lbnQoQVNUW2ldLmxlZnQsIEFTVFtpXS5yaWdodCwgcnVuQ29udGV4dCkKCQl9IGVsc2UKCQlpZihBU1RbaV0udHlwZSA9PSAnQmluYXJ5RXhwcmVzc2lvbicpIHsKCQkJcmV0dXJuIGF3YWl0IHJ1bkJpbmFyeShBU1RbaV0sIHJ1bkNvbnRleHQpCgkJfSBlbHNlCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ0xvZ2ljYWxFeHByZXNzaW9uJykgewoJCQlyZXR1cm4gYXdhaXQgcnVuTG9naWNhbChBU1RbaV0sIHJ1bkNvbnRleHQpCgkJfSBlbHNlCgkJLy8gV1RGIEkgS0VFUCBNSVNTSU5HIFJFVFVSTiBBV0FJVD8hISEgTkVFRCBUTyBXUklURSBBTiBBU1QgSU4gUFJPTE9HCgkJLy8gICBUSEVOIFdSSVRFIFBST0xPRyBQQVJTRVIgSU4gSkFWQVNDUklQVCBUTyBFVkFMVUFURSBNQVRDSElORyBBU1QKCQkvLyAgIFRSRUUgRlJPTSBBQ09STi9CSVNPTi9BTlRMUgoJCWlmKEFTVFtpXS50eXBlID09ICdGb3JTdGF0ZW1lbnQnKSB7CgkJCXJldHVybiBhd2FpdCBydW5Mb29wKAoJCQkJQVNUW2ldLmluaXQsIAoJCQkJQVNUW2ldLnRlc3QsIAoJCQkJQVNUW2ldLnVwZGF0ZSwgCgkJCQlBU1RbaV0uYm9keSwgCgkJCQlydW5Db250ZXh0KQoJCX0gZWxzZQoJCWlmKEFTVFtpXS50eXBlID09ICdVcGRhdGVFeHByZXNzaW9uJykgewoJCQkvLyBkb0Fzc2lnbgoJCQlyZXR1cm4gYXdhaXQgcnVuVXBkYXRlKEFTVFtpXSwgcnVuQ29udGV4dCkKCQl9IGVsc2UgCgoKCgoJCS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBSRUNVUlNJVkUKCQlpZihBU1RbaV0udHlwZSA9PSAnRXhwcmVzc2lvblN0YXRlbWVudCcpIHsKCQkJcmV0dXJuIGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNUW2ldLmV4cHJlc3Npb25dLCBydW5Db250ZXh0KQoJCX0gZWxzZQoJCS8vIHdlIGFyZSBhbHJlYWR5IGF3YWl0aW5nIGZvciBldmVyeXRoaW5nCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ0F3YWl0RXhwcmVzc2lvbicpIHsKCQkJcmV0dXJuIGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNUW2ldLmFyZ3VtZW50XSwgcnVuQ29udGV4dCkKCQl9IGVsc2UKCQlpZihBU1RbaV0udHlwZSA9PSAnUmV0dXJuU3RhdGVtZW50JykgewoJCQkvLyBDT0RFIFJFVklFVywgV0hPT1BTCgkJCWlmKEFTVFtpXS5hcmd1bWVudCAmJiBBU1RbaV0uYXJndW1lbnQudHlwZSkgewoJCQkJcnVuQ29udGV4dC5idWJibGVSZXR1cm4gPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVFtpXS5hcmd1bWVudF0sIHJ1bkNvbnRleHQpCgkJCQlydW5Db250ZXh0LnJldHVybmVkID0gdHJ1ZQoJCQkJcmV0dXJuIHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuCgkJCX0gZWxzZSB7CgkJCQlydW5Db250ZXh0LnJldHVybmVkID0gdHJ1ZQoJCQkJcnVuQ29udGV4dC5idWJibGVSZXR1cm4gPSB2b2lkIDAKCQkJCXJldHVybgoJCQl9CgkJfSBlbHNlCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ1ZhcmlhYmxlRGVjbGFyYXRpb24nKSB7CgkJCWxldCByZXN1bHQKCQkJLy8gc28gY29udGV4dCBkb2Vzbid0IGRpc2FwcGVhcgoJCQlmb3IobGV0IGogPSAwOyBqIDwgQVNUW2ldLmRlY2xhcmF0aW9ucy5sZW5ndGg7IGorKykgewoJCQkJcmVzdWx0ID0gYXdhaXQgcnVuU3RhdGVtZW50KGosIEFTVFtpXS5kZWNsYXJhdGlvbnMsIHJ1bkNvbnRleHQpCgkJCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsgLy8gYnViYmxlIHVwCgkJCQkJcmV0dXJuCgkJCQl9CgkJCX0KCQkJcmV0dXJuIHJlc3VsdAoJCX0gZWxzZQoJCWlmKEFTVFtpXS50eXBlID09ICdWYXJpYWJsZURlY2xhcmF0b3InKSB7CgkJCS8vIGRvQXNzaWduCgkJCXJ1bkNvbnRleHQubG9jYWxWYXJpYWJsZXNbQVNUW2ldLmlkLm5hbWVdID0gJ3VuZGVmaW5lZCcKCQkJcmV0dXJuIGF3YWl0IHJ1bkFzc2lnbm1lbnQoQVNUW2ldLmlkLCBBU1RbaV0uaW5pdCwgcnVuQ29udGV4dCkKCQl9IGVsc2UgCgoKCQlpZihBU1RbaV0udHlwZSA9PSAnQ2FsbEV4cHJlc3Npb24nIHx8IEFTVFtpXS50eXBlID09ICdOZXdFeHByZXNzaW9uJykgewoJCQlyZXR1cm4gYXdhaXQgcnVuQ2FsbChBU1RbaV0sIHJ1bkNvbnRleHQpCgkJfSBlbHNlCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ0Z1bmN0aW9uRXhwcmVzc2lvbicgCgkJCXx8IEFTVFtpXS50eXBlID09ICdBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbicKCQkJfHwgQVNUW2ldLnR5cGUgPT0gJ0Z1bmN0aW9uRGVjbGFyYXRpb24nKSB7CgkJCXJldHVybiBhd2FpdCBydW5GdW5jdGlvbihBU1RbaV0sIHJ1bkNvbnRleHQpCgoJCX0gZWxzZQoJCWlmKEFTVFtpXS50eXBlID09ICdNZW1iZXJFeHByZXNzaW9uJykgewoJCQlyZXR1cm4gYXdhaXQgcnVuTWVtYmVyKEFTVFtpXSwgcnVuQ29udGV4dCkKCQl9IGVsc2UKCQlpZihBU1RbaV0udHlwZSA9PSAnT2JqZWN0RXhwcmVzc2lvbicpIHsKCQkJcmV0dXJuIGF3YWl0IHJ1bk9iamVjdChBU1RbaV0sIHJ1bkNvbnRleHQpCgkJfSBlbHNlCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ1VuYXJ5RXhwcmVzc2lvbicpIHsKCQkJcmV0dXJuIGF3YWl0IHJ1blVuYXJ5KEFTVFtpXSwgcnVuQ29udGV4dCkKCQl9IGVsc2UgCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ0lmU3RhdGVtZW50JykgewoJCQlsZXQgcmVzdWx0ID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1RbaV0udGVzdF0sIHJ1bkNvbnRleHQpCgkJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQkJcmV0dXJuCgkJCX0KCQkJaWYocmVzdWx0KSB7CgkJCQlyZXR1cm4gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1RbaV0uY29uc2VxdWVudF0sIHJ1bkNvbnRleHQpCgkJCX0gZWxzZSBpZiAoQVNUW2ldLmFsdGVybmF0ZSkgewoJCQkJcmV0dXJuIGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNUW2ldLmFsdGVybmF0ZV0sIHJ1bkNvbnRleHQpIAoJCQl9CgkJfSBlbHNlCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ0RlYnVnZ2VyU3RhdGVtZW50JykgewoJCQkvLyBXVEYgSVMgVEhJUyBTSElUPwoJCQkvLyAgaHR0cHM6Ly93d3cuaWNzLnVjaS5lZHUvfnBhdHRpcy9jb21tb24vaGFuZG91dHMvbWFjbWluZ3dlY2xpcHNlL2FsbGV4cGVyaW1lbnRhbC9tYWMtZ2RiLWluc3RhbGwuaHRtbAoJCQkvLyBJIEhBVkUgVE8gU0lHTiBNWSBPV04gQ09QWSBPRiBEQkcgVE8gVVNFIElUIE9OIAoJCQkvLyAgIE5BVElWRSBBUFBMSUNBVElPTlM/CgkJCS8vIFdIWSBUSEUgRlVDSyBET0VTTidUIEFQUExFIEhBVkUgQSBDTElDSyAxMiBUSU1FUwoJCQkvLyAgIFRPIEVOQUJMRSBERVZFTE9QRVIgTU9ERSBPTiBNQUNPUyBTTyBZT1UgQ0FOIERFQlVHCgkJCS8vICAgQU5EIElOU1RBTEwgWU9VUiBPV04gTU9EVUxFUyBXSVRIT1VUIERJU0FCTElORwoJCQkvLyAgIFNPTUUgU1lTVEVNIExFVkVMIFNFQ1VSSVRZPwoJCQkvLyBJJ0xMIFRFTEwgWU9VIFdIWSwgQkVDQVVTRSBBUFBMRSBIQVRFUyBERVZFTE9QRVJTCgkJCS8vICAgVEhFIERPTidUIE9XTi4KCQkJLy8gSSBXT05ERVIgSUYgVEhJUyBFVkFMVUFUT1IgSVMgRkFTVCBFTk9VR0ggVE8gUkVOREVSCgkJCS8vICAgU0tZQk9YRVMgT04gQSBDTE9VRCBHUFUgRlJPTSBPVEhFUiBXT1JMRFMvR0FNRVM/CgkJCXJ1bkNvbnRleHQuYnViYmxlQVNUID0gQVNUW2ldCgkJCXJ1bkNvbnRleHQucGF1c2VkID0gdHJ1ZQoJCQlzZW5kTWVzc2FnZSh7IAoJCQkJcGF1c2VkOiAnLicsIAoJCQkJbGluZTogcnVuQ29udGV4dC5idWJibGVMaW5lIC0gMQoJCQl9KQoJCQlyZXR1cm4KCQl9IGVsc2UKCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ0RvV2hpbGVTdGF0ZW1lbnQnCgkJCXx8IEFTVFtpXS50eXBlID09ICdXaGlsZVN0YXRlbWVudCcpIHsKCQkJYXdhaXQgcnVuV2hpbGUoQVNUW2ldLCBydW5Db250ZXh0KQoJCX0gZWxzZQoKCQlpZihBU1RbaV0udHlwZSA9PSAnVGhyb3dTdGF0ZW1lbnQnKSB7CgkJCXRocm93IChhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVFtpXS5hcmd1bWVudF0sIHJ1bkNvbnRleHQpKQoJCX0gZWxzZQoKCQlpZihBU1RbaV0udHlwZSA9PSAnVHJ5U3RhdGVtZW50JykgewoJCQlsZXQgcmVzdWx0CgkJCXRyeSB7CgkJCQlyZXN1bHQgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVFtpXS5ibG9ja10sIHJ1bkNvbnRleHQpCgkJCX0gY2F0Y2ggKGUpIHsKCQkJCWlmKEFTVFtpXS5oYW5kbGVyKSB7CgkJCQkJLy8gc2FtZSBhcyBydW5DYWxsIHBhcmFtIGFzc2lnbm1lbnQKCQkJCQlydW5Db250ZXh0LmxvY2FsVmFyaWFibGVzW0FTVFtpXS5oYW5kbGVyLnBhcmFtcy5uYW1lXSA9ICd1bmRlZmluZWQnCgkJCQkJYXdhaXQgcnVuQXNzaWdubWVudCh7CgkJCQkJCXR5cGU6ICdJZGVudGlmaWVyJywKCQkJCQkJbmFtZTogQVNUW2ldLmhhbmRsZXIucGFyYW1zLm5hbWUKCQkJCQl9LCB7CgkJCQkJCXR5cGU6ICdMaXRlcmFsJywKCQkJCQkJdmFsdWU6IGUKCQkJCQl9LCBydW5Db250ZXh0KQoJCQkJfQoJCQl9IGZpbmFsbHkgewoJCQkJaWYoQVNUW2ldLmZpbmFsbHkpIHsKCQkJCQlyZXR1cm4gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1RbaV0uZmluYWxseV0sIHJ1bkNvbnRleHQpCgkJCQl9IGVsc2UgewoJCQkJCWlmKHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuICE9PSByZXN1bHQpIHsKCQkJCQkJY29uc29sZS5sb2coJ1dBUk5JTkc6IG5vdCBidWJibGluZyBjb3JyZWN0bHk6ICcgCgkJCQkJCQkrIHJ1bkNvbnRleHQuYnViYmxlU3RhY2tbcnVuQ29udGV4dC5idWJibGVTdGFjay5sZW5ndGggLSAxXVswXSkKCQkJCQl9CgkJCQkJcmV0dXJuIHJlc3VsdAoJCQkJfQoJCQl9CgkJfSBlbHNlCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ0FycmF5RXhwcmVzc2lvbicpIHsKCQkJbGV0IHJlc3VsdCA9IFtdCgkJCWZvcihsZXQgaiA9IDA7IGogPCBBU1RbaV0uZWxlbWVudHMubGVuZ3RoOyBqKyspIHsKCQkJCXJlc3VsdC5wdXNoKGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNUW2ldLmVsZW1lbnRzW2pdXSwgcnVuQ29udGV4dCkpCgkJCX0KCQkJcmV0dXJuIHJlc3VsdAoJCX0gZWxzZSAKCgoJCXsKCQkJZGVidWdnZXIKCQkJdGhyb3cgbmV3IEVycm9yKEFTVFtpXS50eXBlICsgJzogTm90IGltcGxlbWVudGVkIScpCgkJfQoKCX0gY2F0Y2ggKHVwKSB7CgkJaWYocnVuQ29udGV4dC5idWJibGVVcCkgewoJCQl0aHJvdyB1cAoJCX0KCQljb25zb2xlLmxvZyh1cCkKCQlpZihydW5Db250ZXh0LmJ1YmJsZUZpbGUgIT0gJ2xpYnJhcnkvcmVwbC5qcycKCQkJLy9ydW5Db250ZXh0LmJ1YmJsZVN0YWNrW3J1bkNvbnRleHQuYnViYmxlU3RhY2subGVuZ3RoLTFdWzFdICE9ICdsaWJyYXJ5L3JlcGwuanMnCgkJKSB7CgkJCXJ1bkNvbnRleHQuYnViYmxlRmlsZSA9ICdsaWJyYXJ5L3JlcGwuanMnCgkJCWF3YWl0IGRvRXJyb3IodXAsIHJ1bkNvbnRleHQpCgkJCXJ1bkNvbnRleHQuZW5kZWQgPSB0cnVlCgkJfQoJCXJldHVybgoJfQp9CgovLyBmaW5kIGFuZCBydW4gbWFpbgphc3luYyBmdW5jdGlvbiBydW5Cb2R5KEFTVCwgcnVuQ29udGV4dCkgewoJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJZGVidWdnZXIKCQl0aHJvdyBuZXcgRXJyb3IoJ2NvbnRleHQgZW5kZWQhJykKCX0KCgkvLyBUT0RPOiBGSVggQ09OVEVYVFMuIFRISVMgSVMgT05FIE9GIFRIRSBUSElOR1MgVEhBVAoJLy8gICBTRVJJT1VTTFkgQk9USEVSUyBNRSBBQk9VVCBDSFJPTUUgREVCVUdHRVIsIElGIEkgCgkvLyAgIEFNIElOIEEgRElGRkVSRU5UIFNDT1BFIExPT0tJTkcgQVQgQSBWQVJJQUJMRSBXSVRICgkvLyAgIFRIRSBTQU1FIE5BTUUgQVMgVEhFIFNDT1BFIElUJ1MgUEFVU0VEIE9OLCBJVCBTSE9XUwoJLy8gICBNRSBUSEUgV1JPTkcgU0NPUEUgV0hFTiBJIFVTRSBUSEUgU1RBQ0shCglydW5Db250ZXh0LmJ1YmJsZVByb3BlcnR5ID0gJycKCgkvLyBUT0RPOiByZXN0b3JlIG91dGVyIHNjb3BlIHdoZW4gY29udGV4dCB3YXMgY3JlYXRlZAoJLy8gZG9lc24ndCBuZWVkIHRvIGJlIGZhc3QsIGJlY2F1c2UgYXN5bmMgRGV2VG9vbHMgY2FsbHMsIGFyZSBub3QgZmFzdAoJLy8gcmVwbGFjZSB3aXRoIGN1cnJlbnQgY29udGV4dAoKCS8vIGFueSB0aW1lIGEgc2V0VGltZXIgaXMgdXNlIHRoZSBjYWxsU3RhY2sgd2lsbCBiZSByZXNldAoJLy8gICB3aGljaCBtZWFucyBlcnJvciBtZXNzYWdpbmcgbXVzdCBpbnRlcmNlcHQgaGVyZSBub3QgdG8KCS8vICAgcnVpbiBvdXQgd29ya2VyIHByb2Nlc3MKCXRyeSB7CgkJbGV0IHJlc3VsdCA9IGF3YWl0IHJ1blBhcmFtZXRlcnMoQVNULCBydW5Db250ZXh0KQoJCXJ1bkNvbnRleHQuYnViYmxlUHJvcGVydHkgPSAnJwoJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQlyZXR1cm4gcmVzdWx0LnBvcCgpCgkJfQoJCS8vIHJlbW92ZSBhbnl0aGluZyBjcmVhdGVkIGluIHRoZSBwYXN0IGNvbnRleHQKCQkvL09iamVjdC5hc3NpZ24ocnVuQ29udGV4dC5sb2NhbEZ1bmN0aW9ucywgc3RhcnRGdW5jcykKCQkvL09iamVjdC5hc3NpZ24ocnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlcywgc3RhcnRWYXJzKQoJCS8vIFRPRE86IExFQUtZIFNDT1BFLCB0aGlzIHdheSB3ZSBrZWVwIHRoZSBzYW1lIG9iamVjdCB0aGUgd2hvbGUgdGltZQoJCS8vcnVuQ29udGV4dC5sb2NhbEZ1bmN0aW9ucyA9IHN0YXJ0CgkJLy9ydW5Db250ZXh0LmxvY2FsVmFyaWFibGVzID0gc3RhcnRWYXJzCgkJcmV0dXJuIHJlc3VsdC5wb3AoKQoJfSBjYXRjaCAoZSkgewoJCWNvbnNvbGUubG9nKGUpCgkJYXdhaXQgZG9FcnJvcihlLCBydW5Db250ZXh0KQoJCXJ1bkNvbnRleHQuZW5kZWQgPSB0cnVlCgkJcmV0dXJuCgl9Cn0KCgoKCgoKCmxldCBmdW5jdGlvbkNvdW50ZXIgPSAwCgpjb25zdCBNQVhfQ0FMTCA9IDEwMDAwCgpjb25zdCBGVU5DX0NPTU1FTlRTID0gLyhefFxzKlteXC9cc10rLipcbikoXHMqXC9cLy4qXG4pKyhhc3luY3xmdW5jdGlvbnxccykuKj8kLwpjb25zdCBBU1BFQ1RTX1JFR0VYID0gL1xzK3xcbit8XCh8XCl8ZnVuY3Rpb258YXN5bmMvZwoKCi8vIHJldHVybiBhbiBhcnJheSBvZiBldmFsdWF0ZWQgZXhwcmVzc2lvbiB0byBwYXNzIGludG8gdGhlIG5leHQgZnVuY3Rpb24gY2FsbAphc3luYyBmdW5jdGlvbiBydW5QYXJhbWV0ZXJzKHBhcmFtcywgcnVuQ29udGV4dCkgewoJbGV0IHJlc3VsdCA9IFtdCglmb3IobGV0IGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7CgkJbGV0IGFyZyA9IHBhcmFtc1tpXQoJCXJlc3VsdC5wdXNoKGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbYXJnXSwgcnVuQ29udGV4dCkpCgkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCXJldHVybiByZXN1bHQgLy8gYnViYmxlIHVwCgkJfQoJfQoJcmV0dXJuIHJlc3VsdAp9CgovLyBBUEkgY2FsbHMgYXJlIG5vdyBlbWJlZGRlZCBpbiB3ZWIgcGFnZSBhbmQgdXBsb2FkZWQgdG8gYmFja2VuZC5qcwovLyAgIHNlZSBkcml2ZXIvbGlicmFyeS5qcwpsZXQgV0VCRFJJVkVSX0FQSSA9IHsKCWV4cG9ydHM6IHt9Cn0KCgovLyBUT0RPOiBhZGQgCi8vIEBMYXRlCi8vIFN5bnRheCB0byB1c2UgbGF0ZSBiaW5kaW5nLCBzdG9yZSB0aGUgQVNUIGFzc2lnbm1lbnQgaW4gbG9jYWxWYXJpYWJsZXMKLy8gICBBbmQgd2hlbiB0aGUgdmFyaWFibGUgaXMgYWNjZXNzc2VkLCBjaGVjayBmb3IgdGhlIEFTVCBhbmQgcnVuU3RhdGVtZW50KCkKCgoKYXN5bmMgZnVuY3Rpb24gcnVuQ2FsbFN0YXRlbWVudHMocnVuQ29udGV4dCwgZnVuY3Rpb25OYW1lLCBmaWxlbmFtZSwgcGFyYW1ldGVyRGVmaW5pdGlvbiwgYmVmb3JlLCBhZnRlciwgYm9keSwgLi4uY2FsbEFyZ3MpIHsKCS8vIGFzc2lnbiB0byBwYXJhbSBuYW1lcyBpbiBuZXh0IGNvbnRleHQKCWxldCBzdGFydFZhcnMgPSBPYmplY3QuYXNzaWduKHt9LCBydW5Db250ZXh0LmxvY2FsVmFyaWFibGVzKQoKCWxldCBiZWZvcmVMaW5lID0gcnVuQ29udGV4dC5idWJibGVMaW5lIC0gMSAvLyAtMSBmb3Igd3JhcHBlciBmdW5jdGlvbgoJaWYocnVuQ29udGV4dC5idWJibGVTdGFjay5sZW5ndGggPT0gMCkgewoJCWNvbnNvbGUuZXJyb3IoJ0NhbGwgc3RhY2sgY29ycnVwdGVkJykKCX0KCXJ1bkNvbnRleHQuYnViYmxlU3RhY2sucHVzaChbZnVuY3Rpb25OYW1lLCBmaWxlbmFtZSwgYmVmb3JlTGluZV0pCglsZXQgcmVzdWx0Cgl0cnkgewoJCQoJCS8vIFRISVMgU0hJVCBJUyBJTVBPUlRBTlQuIE1BS0UgQ09NUExJQ0FURUQgU0lNUExFLgoJCS8vIEkgTUVOVElPTiBUSElTIFRPIFBFT1BMRSBBTkQgVEhFWSBIQVZFIE5PIElERUEKCQkvLyAgIFdIQVQgSSBNRUFOLiBJIExFQVJORUQgVEhJUyBJTiBNWSBGQU5DWSA0IFlSLgoJCS8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FzcGVjdC1vcmllbnRlZF9wcm9ncmFtbWluZwoJCS8vICAgQyMgRE9FUyBUSElTIEFVVE9NQVRJQ0FMTFkgQU5EIFBFT1BMRSBMT1ZFIElUCgkJLy8gICBUSElTIElTIEJBU0lDQUxMWSBIT1cgSVQgV09SS1MgSU5URVJOQUxMWSwgVVNFUwoJCS8vICAgSU5UUk9TUEVDVElPTiBUTyBSRUFEIEFUVFJJQlVURVMgRlJPTSBUSEUgUEFSU0UKCQkvLyAgIFRIRU4gQ0FMTFMgVEhFIEZVTkNUSU9OUyBCRUZPUkUgVEhFIEFDVFVBTCBDQUxMCgkJLy8gICBIQVBQRU5TLiBTWU5UQUNUSUMgU1VHQVIuIEVWRVJZIExBTkdVQUdFIFNIT1VMRCBIQVZFIEFUVFJJQlVURVMKCQlpZihiZWZvcmUpIHsKCQkJbGV0IGJlZm9yZUZ1bmMKCQkJaWYocnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlc1tiZWZvcmVdID09ICdmdW5jdGlvbicpIHsKCQkJCWJlZm9yZUZ1bmMgPSBydW5Db250ZXh0LmxvY2FsVmFyaWFibGVzW2JlZm9yZV0KCQkJfSBlbHNlIHsKCQkJCXRocm93IG5ldyBFcnJvcignQXR0cmlidXRlIEBCZWZvcmUgbm90IGZvdW5kOiAnICsgYmVmb3JlKQoJCQl9CgkJCS8vIGFsbG93IHVzZXJzIHRvIG1vZGlmeSBmdW5jdGlvbiBhcmd1bWVudHM/IFNVUkUhCgkJCWxldCByID0gYXdhaXQgYmVmb3JlRnVuYyhjYWxsQXJncywgcnVuQ29udGV4dCkKCQl9CgkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCXJldHVybgoJCX0KCgkJZm9yKGxldCBsID0gMDsgbCA8IHBhcmFtZXRlckRlZmluaXRpb24ubGVuZ3RoOyBsKyspIHsKCQkJaWYocGFyYW1ldGVyRGVmaW5pdGlvbltsXS50eXBlICE9ICdJZGVudGlmaWVyJykgewoJCQkJdGhyb3cgbmV3IEVycm9yKCdGdW5jdGlvbkRlY2xhcmF0aW9uOiBOb3QgaW1wbGVtZW50ZWQhJykKCQkJfQoJCQlpZihsID09IGNhbGxBcmdzLmxlbmd0aCkgewoJCQkJY29udGludWU7CgkJCX0KCQkJLy8gZnVjay1hcm91bmRzPwoJCQlpZih0eXBlb2YgcnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlcyA9PSAndW5kZWZpbmVkJykgewoJCQkJZGVidWdnZXIKCQkJfQoJCQlydW5Db250ZXh0LmxvY2FsVmFyaWFibGVzW3BhcmFtZXRlckRlZmluaXRpb25bbF0ubmFtZV0gPSAndW5kZWZpbmVkJwoJCQlhd2FpdCBydW5Bc3NpZ25tZW50KHsKCQkJCXR5cGU6ICdJZGVudGlmaWVyJywKCQkJCW5hbWU6IHBhcmFtZXRlckRlZmluaXRpb25bbF0ubmFtZQoJCQl9LCB7CgkJCQl0eXBlOiAnTGl0ZXJhbCcsCgkJCQl2YWx1ZTogY2FsbEFyZ3NbbF0KCQkJfSwgcnVuQ29udGV4dCkKCQkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCQlyZXR1cm4KCQkJfQoJCX0KCgkJLy8gcnVuIG5ldyBjb21tYW5kIGNvbnRleHQKCQlyZXN1bHQgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW2JvZHldLCBydW5Db250ZXh0KQoKCQkvLyBUT0RPOiBTT01FVEhJTkcgQUJPVVQgSUYgQU4gQVNQRUNUIEhBUyBBTiBFWENQTElDSVQgUkVUVVJOIAoJCS8vICAgU1RBVEVNRU5UIFRIRU4gT1ZFUlJJREUgVEhFIFJFVFVSTiBWQUxVRSBXSVRIIEJFRk9SRQoJCS8vICAgT1RIRVJXSVNFIExFQVZFIElUIFVOTU9ESUZJRUQKCQlpZihhZnRlcikgewoJCQlsZXQgYWZ0ZXJGdW5jCgkJCWlmKHJ1bkNvbnRleHQubG9jYWxWYXJpYWJsZXNbYWZ0ZXJdID09ICdmdW5jdGlvbicpIHsKCQkJCWFmdGVyRnVuYyA9IHJ1bkNvbnRleHQubG9jYWxWYXJpYWJsZXNbYWZ0ZXJdCgkJCX0gZWxzZSB7CgkJCQl0aHJvdyBuZXcgRXJyb3IoJ0F0dHJpYnV0ZSBAQWZ0ZXIgbm90IGZvdW5kOiAnICsgYWZ0ZXIpCgkJCX0KCQkJcmVzdWx0ID0gYXdhaXQgYWZ0ZXJGdW5jKHJlc3VsdCwgcnVuQ29udGV4dCkKCQl9CgkJcnVuQ29udGV4dC5idWJibGVNZW1iZXIgPSBudWxsCgkJcnVuQ29udGV4dC5idWJibGVQcm9wZXJ0eSA9ICcnCgkJaWYocnVuQ29udGV4dC5yZXR1cm5lZCkgewoJCQlydW5Db250ZXh0LnJldHVybmVkID0gZmFsc2UKCQkJaWYocmVzdWx0ICE9PSBydW5Db250ZXh0LmJ1YmJsZVJldHVybikgewoJCQkJY29uc29sZS5sb2coJ1dBUk5JTkc6IG5vdCBidWJibGluZyBjb3JyZWN0bHk6ICcgKyBmdW5jdGlvbk5hbWUpCgkJCX0KCQkJcmVzdWx0ID0gcnVuQ29udGV4dC5idWJibGVSZXR1cm4KCQkJZGVsZXRlIHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuCgkJfQoJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQlyZXR1cm4KCQl9CgoJLy9PYmplY3QuYXNzaWduKHJ1bkNvbnRleHQubG9jYWxWYXJpYWJsZXMsIHN0YXJ0VmFycykgLy8gcmVzZXQgcmVmZXJlbmNlcwoJLy8gVE9ETzogTEVBS1kgU0NPUEUsIHJlbW92ZSB1bm5hbWVkIHZhcmlhYmxlcyBmcm9tIHByZXZpb3VzIHNjb3BlCgkvLyBUT0RPOiBGSVggU0NPUElORyBXSVRIIEEgUlVOQ09OVEVYVC5DT05URVhUUyBTVEFDSwoJLy8gICBUaGlzIHdvdWxkIGhlbHAgc29sdmUgdmFyL2xldCwgYXV0b21hdGljYWxseSBkcm9wIHZhciBpbnRvIHRvcCBjb250ZXh0CgkvLyAgIFRoaXMgd291bGQgaGVscCB3aXRoIHN0YXRpYy9wdWJsaWMvZnJpZW5kbHkgY2hlY2tpbmcKCS8vICAgVGhpcyB3b3VsZCBoZWxwIGxhbmd1YWdlcyB3aXRoIGxlYWt5IHNjb3BlcyBieSBwdXJwb3NlLCBMVUEsIFBST0xPRz8KCS8vICAgVGhpcyB3b3VsZCBmaXggc2NvcGluZyBhcm91bmQgcGFyYW1ldGVyIGRlZmluaXRpb25zCgkvLyBUT0RPOiBzZWFyY2ggdGhlIGNvbnRleHRzIHN0YWNrIGZvciB0aGUgdmFyaWFibGUKCX0gY2F0Y2ggKGUpIHsKCQl0aHJvdyBlCgl9IGZpbmFsbHkgewoJCXJ1bkNvbnRleHQuYnViYmxlU3RhY2sucG9wKCkKCQlpZihydW5Db250ZXh0LmJ1YmJsZVN0YWNrLmxlbmd0aCA9PSAwKSB7CgkJCWNvbnNvbGUuZXJyb3IoJ0NhbGwgc3RhY2sgY29ycnVwdGVkJykKCQl9Cgl9CgoJcmV0dXJuIHJlc3VsdAp9CgoKCmFzeW5jIGZ1bmN0aW9uIHJ1bkZ1bmN0aW9uKEFTVCwgcnVuQ29udGV4dCkgewoJbGV0IGJlZm9yZQoJbGV0IGFmdGVyCglsZXQgbmFtZVByZWZpeCA9ICcnCglpZihBU1QudHlwZSA9PSAnRnVuY3Rpb25FeHByZXNzaW9uJyAKCXx8IEFTVC50eXBlID09ICdBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbicpIHsKCQluYW1lUHJlZml4ID0gJ2lubGluZSAnCgl9IGVsc2UgewoJCS8vIEFUVFJJQlVURSBTVVBQT1JUCgkJLy8gVE9ETzogQyMgR0lWRVMgWU9VIEEgV0FZIFRPIEFERCBBVFRSSUJVVEVTIFRPCgkJLy8gICBNQU5ZIFRPS0VOIFRZUEVTIAoJCS8vICAgSkFWQSBIQVMgQVRUUklCVVRFUyBUT08sIEJVVCBUSEVZIEFSRSBVR0xJRVIKCQkvLyBUT0RPOiBARGVsYXkoKSwgQExvbmdMb29wcygpIGFuZCBvdGhlciBzYWZldHlzCgkJLy8gVE9ETzogU1RBVElDIENPTlNUUlVDVE9SUywgU1REIExJQlJBUlkgTE9BREVSUwoJCS8vIFRPRE86IG9uQmVmb3JlLCBvbkFmdGVyLCBjb250cm9sIGZsb3cgaW1wcmludGluZwoJCWxldCBhdHRyaWJ1dGVDb21tZW50cyA9IHJ1bkNvbnRleHQuc2NyaXB0CgkJCS5zdWJzdHJpbmcoMCwgQVNULnN0YXJ0KQoJCQkubWF0Y2goRlVOQ19DT01NRU5UUykKCQlpZihhdHRyaWJ1dGVDb21tZW50cykgewoJCQlsZXQgYXR0cmlicyA9IGF0dHJpYnV0ZUNvbW1lbnRzWzBdLnNwbGl0KEFTUEVDVFNfUkVHRVgpCgkJCWZvcihsZXQgayA9IDA7IGsgPCBhdHRyaWJzLmxlbmd0aDsgaysrKSB7CgkJCQlpZihhdHRyaWJzW2tdLnRyaW0oKS5sZW5ndGggPT0gMCB8fCAhYXR0cmlic1trXS5pbmNsdWRlcygnQCcpKSB7CgkJCQkJY29udGludWUKCQkJCX0gZWxzZQoJCQkJaWYoYXR0cmlic1trXSA9PSAnQEJlZm9yZScpIHsKCQkJCQliZWZvcmUgPSBhdHRyaWJzW2srMV0KCQkJCQkrK2sKCQkJCX0gZWxzZQoJCQkJaWYoYXR0cmlic1trXSA9PSAnQEFmdGVyJykgewoJCQkJCWFmdGVyID0gYXR0cmlic1trKzFdCgkJCQkJKytrCgkJCQl9IGVsc2UgewoJCQkJCWRvQ29uc29sZShydW5Db250ZXh0LnNlbmRlcklkLCAKCQkJCQkJJ1dBUk5JTkc6IEF0dHJpYnV0ZSBub3QgcmVjb2duaXplZDogJyArIGF0dHJpYnNba10pCgkJCQl9CgoJCQl9CgkJfQoJfQoJaWYoQVNULmlkKSB7CgkJLy8gZG9uJ3QgYWRkIG5hbWVQcmVmaXghCgkJaWYocnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlcy5oYXNPd25Qcm9wZXJ0eShBU1QuaWQubmFtZSkpIHsKCQkJdGhyb3cgbmV3IEVycm9yKCdWYXJpYWJsZSBhbHJlYWR5IGRlY2xhcmVkISAnICsgQVNULmlkLm5hbWUpCgkJfQoJfSBlbHNlIHsKCQluYW1lUHJlZml4ICs9IEFTVC50eXBlID09ICdBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbicgPyAnbGFtYmRhICcgOiAnZnVuYyAnCgl9CgoJbGV0IGZ1bmNOYW1lID0gbmFtZVByZWZpeCArIChBU1QuaWQgPyBBU1QuaWQubmFtZSA6IGZ1bmN0aW9uQ291bnRlcikKCSsrZnVuY3Rpb25Db3VudGVyCglydW5Db250ZXh0LmxvY2FsVmFyaWFibGVzW2Z1bmNOYW1lXSA9ICd1bmRlZmluZWQnCglsZXQgbmV3RnVuYyA9IHJ1bkNhbGxTdGF0ZW1lbnRzLmJpbmQobnVsbCwgcnVuQ29udGV4dCwKCQkJZnVuY05hbWUsIHJ1bkNvbnRleHQuYnViYmxlRmlsZSwgQVNULnBhcmFtcywgYmVmb3JlLCBhZnRlciwgQVNULmJvZHkpCgluZXdGdW5jLmZpbGVuYW1lID0gcnVuQ29udGV4dC5idWJibGVGaWxlCglsZXQgcmVzdWx0ID0gYXdhaXQgcnVuQXNzaWdubWVudCh7CgkJdHlwZTogJ0lkZW50aWZpZXInLAoJCW5hbWU6IGZ1bmNOYW1lLAoJfSwgewoJCXR5cGU6ICdMaXRlcmFsJywKCQl2YWx1ZTogbmV3RnVuYywKCX0sIHJ1bkNvbnRleHQpCgoJcmV0dXJuIHJlc3VsdAp9CgoKCmFzeW5jIGZ1bmN0aW9uIHJ1bkNhbGwoQVNULCBydW5Db250ZXh0KSB7CgkvLyBjb2xsZWN0IHZhcmlhYmxlcwoJCQkKCWxldCBwYXJhbXMgPSBhd2FpdCBydW5QYXJhbWV0ZXJzKEFTVC5hcmd1bWVudHMsIHJ1bkNvbnRleHQpCglpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQlyZXR1cm4gLy8gYnViYmxlIHVwCgl9CgoJcnVuQ29udGV4dC5idWJibGVNZW1iZXIgPSBudWxsCglydW5Db250ZXh0LmJ1YmJsZVByb3BlcnR5ID0gJycKCWxldCBjYWxsZWVGdW5jCglsZXQgZnVuY3Rpb25OYW1lCglpZihBU1QuY2FsbGVlLnR5cGUgPT0gJ0lkZW50aWZpZXInKSB7CgkJLy8gaGFuZGxlIGlkZW50aWZpZXJzIGhlcmUgYmVjYXVzZSBsb29raW5nIGl0IHVwIHdpdGggYnViYmxlIHVwIGFuIGVycm9yCgkJZnVuY3Rpb25OYW1lID0gQVNULmNhbGxlZS5uYW1lCgkJdHJ5IHsKCQkJLy8gVE9ETzogc2hvdWxkIHByb2JhYmx5IGhhdmUgYSBiZXR0ZXIgd2F5IG9mIGhhbmRsaW5nIE5PVC1FUlJPUgoJCQljYWxsZWVGdW5jID0gYXdhaXQgcnVuUHJpbWl0aXZlKEFTVC5jYWxsZWUsIHJ1bkNvbnRleHQpCgkJfSBjYXRjaCAodXApIHsKCQkJaWYoIXVwLm1lc3NhZ2UuaW5jbHVkZXMoJ25vdCBkZWZpbmVkJykKCQkJCQkvLyBDT0RFIFJFVklFVywgbWVhbnQgdG8gZG8gdGhpcyBlYXJsaWVyCgkJCQkJJiYgIXVwLm1lc3NhZ2UuaW5jbHVkZXMoJ2FjY2VzcyBlcnJvcicpKSB7CgkJCQl0aHJvdyB1cAoJCQl9CgkJfQoJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQlyZXR1cm4gLy8gYnViYmxlIHVwCgkJfQoKCQkvLyBDT0RFIFJFVklFVzogb21nIGl0J3MgcmVhZHkKCQlsZXQgbGliCgkJLy8gVE9ETzogc2hvcnRjdXQgdGhlIGZyb250ZW5kIEZTLnZpcnR1YWwKCQkvLyAgIGZvciBub3cgYW5kIGp1c3QgcHJvdmlkZSB3aGF0ZXZlciBpcyBzYXZlZCBpbiBJREJGUwoJCS8vIHdpbGwgbmVlZCBSUEMgdG8gc2F2ZSBjb2RlIHN0b3JhZ2UsIHdpbGwgcHJvdmlkZSBpdCBpbgoJCS8vICAgY2xvdWQgYnVpbGQgc28gbmVlZHMgdG8gYmUgZ2VuZXJpYyB0aHJvdWdoIGFjY2Vzc29ycy4KCQlpZiAoIWNhbGxlZUZ1bmMKCQkJJiYgcnVuQ29udGV4dC5idWJibGVGaWxlICE9ICdsaWJyYXJ5L3JlcGwuanMnCgkJCSYmIChsaWIgPSBkb0xpYnJhcnlMb29rdXAoZnVuY3Rpb25OYW1lKSkKCQkpIHsKCQkJY2FsbGVlRnVuYyA9IGF3YWl0IG9uQWNjZXNzb3IobGliKQoJCX0KCX0gZWxzZQoJaWYoQVNULmNhbGxlZS50eXBlKSB7CgkJY2FsbGVlRnVuYyA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNULmNhbGxlZV0sIHJ1bkNvbnRleHQpCgkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCXJldHVybiAvLyBidWJibGUgdXAKCQl9CgkJZnVuY3Rpb25OYW1lID0gcnVuQ29udGV4dC5idWJibGVQcm9wZXJ0eQoKCX0gZWxzZSB7CgkJdGhyb3cgbmV3IEVycm9yKCdDYWxsRXhwcmVzc2lvbjogTm90IGltcGxlbWVudGVkIScpCgl9CgoJaWYoIWNhbGxlZUZ1bmMpIHsKCQlkZWJ1Z2dlcgoJCXRocm93IG5ldyBFcnJvcignRnVuY3Rpb24gbm90IGRlZmluZWQ6ICcgKyBBU1QuY2FsbGVlLm5hbWUpCgl9CgoKCWxldCBiZWZvcmVMaW5lID0gcnVuQ29udGV4dC5idWJibGVMaW5lIC0gMQoJaWYoY2FsbGVlRnVuYy5pbnRlcnByZXRlZCkgewoJCS8vIGludGVycHJldGVkIHJ1bkNhbGxTdGF0ZW1lbnRzIHdpbGwgYWRkIHRvIHN0YWNrIGF0IG5leHQgbGF5ZXIKCX0gZWxzZSB7CgkJaWYocnVuQ29udGV4dC5idWJibGVTdGFjay5sZW5ndGggPT0gMCkgewoJCQljb25zb2xlLmVycm9yKCdDYWxsIHN0YWNrIGNvcnJ1cHRlZCcpCgkJfQkKCQlydW5Db250ZXh0LmJ1YmJsZVN0YWNrLnB1c2goWwoJCQlmdW5jdGlvbk5hbWUsIAoJCQljYWxsZWVGdW5jLmZpbGVuYW1lIHx8ICdbIG5hdGl2ZSBjb2RlIF0nLCAKCQkJYmVmb3JlTGluZQoJCV0pCgl9CglpZihydW5Db250ZXh0LmJ1YmJsZVN0YWNrLmxlbmd0aCA+IE1BWF9DQUxMKSB7CgkJdGhyb3cgbmV3IEVycm9yKCdDYWxsIHN0YWNrIGV4Y2VlZGVkIScpCgl9CgoJcnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlc1snYXJndW1lbnRzJ10gPSAndW5kZWZpbmVkJwoJYXdhaXQgcnVuQXNzaWdubWVudCh7CgkJdHlwZTogJ0lkZW50aWZpZXInLAoJCW5hbWU6ICdhcmd1bWVudHMnCgl9LCB7CgkJdHlwZTogJ0xpdGVyYWwnLAoJCXZhbHVlOiBwYXJhbXMKCX0sIHJ1bkNvbnRleHQpCgkvLyBUT0RPOiBfX2Z1bmNfXywgX19saW5lX18sIF9fZmlsZV9fIGZvciBkZWJ1Z2dpbmcgZnVuCgoKCXRyeSB7CgkJbGV0IHJlc3VsdDsKCQlpZihBU1QudHlwZSA9PSAnTmV3RXhwcmVzc2lvbicpIHsKCQkJaWYoY2FsbGVlRnVuYyA9PSBQcm9taXNlKSB7CgkJCQlyZXN1bHQgPSBQcm9taXNlLnJlc29sdmUoKS50aGVuKGQgPT4gewoJCQkJCXJ1bkNvbnRleHQuYXN5bmNSdW5uZXJzKysKCQkJCQlyZXR1cm4gZAoJCQkJfSkudGhlbihpbnRlcm5hbFJlc29sdmUpLmNhdGNoKGUgPT4gewoJCQkJCXJ1bkNvbnRleHQuYXN5bmNSdW5uZXJzLS0KCQkJCQl0aHJvdyBlCgkJCQl9KS50aGVuKGQgPT4gewoJCQkJCXJ1bkNvbnRleHQuYXN5bmNSdW5uZXJzLS0KCQkJCQlyZXR1cm4gZAoJCQkJfSkKCQkJfSBlbHNlIHsKCQkJCXJlc3VsdCA9IGF3YWl0IChuZXcgY2FsbGVlRnVuYyguLi5wYXJhbXMpKQoJCQl9CgkJfSBlbHNlIGlmICh0eXBlb2YgY2FsbGVlRnVuYyA9PSAnZnVuY3Rpb24nCgkJCSYmIHJ1bkNvbnRleHQuYnViYmxlTWVtYmVyKSB7CgkJCXJlc3VsdCA9IGF3YWl0IGNhbGxlZUZ1bmMuYXBwbHkocnVuQ29udGV4dC5idWJibGVNZW1iZXIsIHBhcmFtcykKCQl9IGVsc2UgaWYgKHR5cGVvZiBjYWxsZWVGdW5jID09ICdmdW5jdGlvbicpIHsKCQkJcmVzdWx0ID0gYXdhaXQgY2FsbGVlRnVuYyguLi5wYXJhbXMpCgkJfSBlbHNlIHsKCQkJZGVidWdnZXIKCQkJdGhyb3cgbmV3IEVycm9yKCdOb3QgYSBmdW5jdGlvbiEgJyArIEFTVC5jYWxsZWUubmFtZSkKCQl9CgkJcnVuQ29udGV4dC5idWJibGVNZW1iZXIgPSBudWxsCgkJcnVuQ29udGV4dC5idWJibGVQcm9wZXJ0eSA9ICcnCgkJaWYocnVuQ29udGV4dC5yZXR1cm5lZCkgewoJCQlydW5Db250ZXh0LnJldHVybmVkID0gZmFsc2UKCQkJaWYocmVzdWx0ICE9PSBydW5Db250ZXh0LmJ1YmJsZVJldHVybikgewoJCQkJY29uc29sZS5sb2coJ1dBUk5JTkc6IG5vdCBidWJibGluZyBjb3JyZWN0bHk6ICcgKyBmdW5jdGlvbk5hbWUpCgkJCX0KCQkJcmVzdWx0ID0gcnVuQ29udGV4dC5idWJibGVSZXR1cm4KCQkJZGVsZXRlIHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuCgkJfQoKCQkvLyBtdXN0IGNvbWUgYWZ0ZXIgcnVuQ29udGV4dC5yZXR1cm5lZCBpcyBhZGp1c3RlZCAKCQkvLyAgIGJlY2F1c2UgdGhpcyBidWJibGVzIG91dCBvZiB3aGF0ZXZlciBibG9jayBvciAKCQkvLyAgIGZvci1sb29wIGlzIGluIHNjb3BlLgoJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQlyZXR1cm4gLy8gYnViYmxlIHVwCgkJfQoKCQkvLyBhdXRvbWF0aWNhbGx5IHBhdXNlIGZvciBhIHNlY29uZCBvbiB1c2VyIGZ1bmN0aW9ucwoJCS8vICAgdG8gYWxsb3cgdXNlcnMgdG8gb2JzZXJ2ZSB0aGUgcmVzdWx0IG9mIHRoZSBBUEkKCQlpZihBU1QuY2FsbGVlLm5hbWUgIT0gJ3NsZWVwJwoJCQkmJiBydW5Db250ZXh0LmJ1YmJsZVN0YWNrWwoJCQkJcnVuQ29udGV4dC5idWJibGVTdGFjay5sZW5ndGhdID09ICc8ZXZhbD4nKSB7CgkJCWNvbnNvbGUubG9nKCdMT05HIERFTEFZISEhICcgKyBmdW5jdGlvbk5hbWUgKyAnIC4gJyArIGJlZm9yZUxpbmUpCgkJCWRlYnVnZ2VyCgkJCWF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBERUZBVUxUX0RFTEFZKSkKCQl9CgkJcmV0dXJuIHJlc3VsdAoKCX0gY2F0Y2ggKGUpIHsKCQljb25zb2xlLmxvZyhlKQoJCWF3YWl0IGRvRXJyb3IoZSwgcnVuQ29udGV4dCkKCQlydW5Db250ZXh0LmVuZGVkID0gdHJ1ZQoJCXJldHVybgoJfSBmaW5hbGx5IHsKCQlpZighY2FsbGVlRnVuYy5pbnRlcnByZXRlZCkgewoJCQlydW5Db250ZXh0LmJ1YmJsZVN0YWNrLnBvcCgpCgkJCWlmKHJ1bkNvbnRleHQuYnViYmxlU3RhY2subGVuZ3RoID09IDApIHsKCQkJCWNvbnNvbGUuZXJyb3IoJ0NhbGwgc3RhY2sgY29ycnVwdGVkJykKCQkJfQoJCX0KCX0KCn0KLy8gc29tZXRoaW5nIGlzIHdyb25nIHdpdGggcmVwbAovLyAgIGl0J3Mgd2F5IHRvbyBzbG93Ci8vICAgbGV0J3MgdHJ5IHNvbWV0aGluZyBuZXcKCmxldCBwcm9ncmFtVGhyZWFkcyA9IFtdCmxldCBwcm9ncmFtUmVzcG9uc2VzID0gW10KbGV0IHByb2dyYW1IZWFwID0gW10KCmZ1bmN0aW9uIGRvQm9vdHN0cmFwKHNjcmlwdCkgewoJbGV0IHBhcnNlciA9ICBhY29ybi5wYXJzZSgnKGFjb3JuLnBhcnNlKShzY3JpcHQpJykKCXBhcnNlci5ib2R5WzBdLmV4cHJlc3Npb24uYXJndW1lbnRzWzBdLnR5cGUgPSAnTGl0ZXJhbCcKCXBhcnNlci5ib2R5WzBdLmV4cHJlc3Npb24uYXJndW1lbnRzWzBdLnZhbHVlID0gc2NyaXB0CglyZXR1cm4gZG9FdmFsKHsgYm9keTogcGFyc2VyLmJvZHlbMF0sIHNjcmlwdDogc2NyaXB0IH0pCn0KCmZ1bmN0aW9uIGRvRXZhbChydW5Db250ZXh0KSB7Cgljb25zb2xlLmxvZygnZXZhbDogJyArIHJ1bkNvbnRleHQuc2NyaXB0KQoJLy8gY29udmVydCBlbnRpcmUgZXZhbCByZXBsIHRvIGEgc2luZ2xlIHByb2dyYW0gc3RhY2sKCS8vICAgdGhpcyBtaWdodCBoZWxwIHdpdGggZGVidWdnaW5nIGJlY2F1c2UgdGhlbiBpdCBpcyBmbGF0CgkvLyAgIG5vIGJyYW5jaGluZyB0byBhd2FpdCBjYWxscwoJaWYoIXJ1bkNvbnRleHQuYm9keSkgewoJCS8vIFRPRE86IG1vdmUgZG9Cb290c3RyYXAgaGVyZSBzbyBJIGRvbid0IGhhdmUgdG8gcHV0IGFueXRoaW5nIG1vcmUgaW4gTWFrZWZpbGUKCQlsZXQgcHJvZ3JhbSA9IGFjb3JuLnBhcnNlKCcoJyArIGRvQm9vdHN0cmFwICsgJykoc2NyaXB0KScsIAoJCQkJe2VjbWFWZXJzaW9uOiAyMDIwLCBsb2NhdGlvbnM6IHRydWUsIG9uQ29tbWVudDogW119KQoJCS8vIGNvbnZlcnQgaW5maXggdG8gcG9zdGZpeCwgaW4gb3JkZXIgdG8gc2ltcGxpZnkgcHJvY2Vzc2luZwoJCS8vIFRPRE86IEkgUkVBTExZIFdJU0ggSSBDT1VMRCBWSVNVQUxJWkUgVEhFIERJRkZFUkVOQ0UgSU4gQVNULURJUkVDVElPTkFMIEdSQVBICgkJLy8gICBNQVlCRSBPTkNFIElUJ1MgVVAgQU4gUlVOTklORyBJIENBTiBVU0UgRDMuSlMgRlJPTSBMSUJSQVJZLgoJCS8vIFRIRSBESUZGRVJFTkNFIEJFVFdFRU4gTE9PS0lORyBBVCBJVCBUT1AgRE9XTiBVU0lORyBQT1NURklYIFNIT1VMRAoJCS8vICAgUFJPVklERSBTT01FIENMVUVTIFRPIFNJTktTIEJFQ0FVU0UgSVQgUFVUUyBBTEwgT0YgVEhFIEVORFBPSU5UUwoJCS8vICAgSU4gTEVBVkVTIElOU1RFQUQgT0YgQVQgVEhFIEJPVFRPTSBPRiBBIFRPUCBET1dOIEdSQVBILCBUSEUgTEVBVkVTCgkJLy8gICBUVVJOIElOIFRPIEFDVFVBTCBSRUZFUkVOQ0VTIElOIENPREUsIEFTIE9QUE9TRUQgVE8gVVNFIElOU1RBTkNFUwoJCS8vIElUUyBMSUtFIExPT0tJTkcgQVQgQ09ERSBMSUtFIEEgR0FSQkFHRSBDT0xMRUNUT1IgSU5TVEVBRCBPRiBBIFNJTksuCgkJLy8gICBTSE9VTEQgRVZFTiBCRSBBQkxFIFRPIEdSQVBIIE9VVCBPVkVSUklESU5HIFZBUklBQkxFIE5BTUVTLCBDT0xMSVNJT05TCgkJLy8gICBTQ09QRSBCUkVBS0lORyBXSEVSRSBXRSBBQ0NJREVOVEFMTFkgTEVBVkUgQSBWQVJJQUJMRSBPVVRTSURFIEEgU0NPUEUKCQkvLyAgIEJVVCBET04nVCBHRVQgQU4gYEVSUmAsIFJBTiBJTiBUTyBUSEFUIFdJVEggRU1TQ1JJUFRFTiwgU09NRSBHTE9CQUxMWSAKCQkvLyAgIERFRklORUQgRVJSLCBTTyBBTlkgVElNRSBJIFVTRSBFUlIgSU4gTVkgQ09ERSBCWSBBQ0NJREVOVCwgSVQgUkVGRVJTIAoJCS8vICAgVE8gVEhFIFdST05HIE9ORSEKCQkvLyBUT0RPOiBIRVkgQ0hST01FIERFQlVHR0VSISBJIFBJQ0sgT04gVEhFTSBBIExPVC4gQ09VTEQgVVNFIFRISVMgIlBST0dSQU0gVFJFRSIKCQkvLyAgIEFTIEEgUEVSTUFORU5UIENBTEwgU1RBQ0sgSU5TVEVBRCBPRiBUUllJTkcgVE8gTE9BRCBDUkFQIEFORCBTV0lUQ0ggVEhJTkdTIEFST1VORAoJCS8vICAgVVNFIFRIRSBQUk9HUkFNIFRSRUUgQVMgQSBUQUJMRSBPRiBDT05URU5UUyBBTkQgSElHSExJR0hUIFRIRSBST1dTIFRIQVQgQVJFIElOCgkJLy8gICBJTiBUSEUgQ0FMTCBXSEVOIEkgQ0xJQ0sgT04gSVQsIFRIRU4gVVNFIFNPTUUgT1RIRVIgSU5ESUNBVElPTiBUTyBOQVZJR0FURSBMSU5FUy4KCQlydW5Db250ZXh0LmJvZHkgPSBwcm9ncmFtLmJvZHlbMF0KCX0KCXJldHVybiBhd2FpdFByb2dyYW0ocnVuQ29udGV4dC5ib2R5LCBydW5Db250ZXh0KQp9CgpsZXQgY3VycmVudENvbnRleHQKCmZ1bmN0aW9uIGF3YWl0UHJvZ3JhbShwcm9ncmFtLCBydW5Db250ZXh0KSB7CglpZih0eXBlb2YgcnVuQ29udGV4dCA9PSAndW5kZWZpbmVkJykgewoJCXJ1bkNvbnRleHQgPSBjdXJyZW50Q29udGV4dAoJfQoJLy8gdG8gdGVzdCB0aGlzIGNvbmNlcHQsIGxldHMgdXNlIGl0IGZyb20gdGhlIHZlcnkgYmVnaW5uaW5nCglpZih0eXBlb2YgcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrID09ICd1bmRlZmluZWQnKSB7CgkJcnVuQ29udGV4dC5idWJibGVSZXR1cm4gPSBbdm9pZCAwXQoJCXJ1bkNvbnRleHQuY29udGludWVPbkVycm9yID0gdHJ1ZQoJCXJ1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjayA9IFtdCgkJcnVuQ29udGV4dC5wcm9ncmFtQ291bnQgPSAwCgkJcnVuQ29udGV4dC5sb2NhbERlY2xhcmF0aW9ucyA9IFsKCQkJZ2xvYmFsVGhpcywKCQkJcnVuQ29udGV4dCwKCQkJe30KCQldCgl9IGVsc2UgewoJCXRocm93IG5ldyBFcnJvcignRG9uXCd0IGtub3cgd2hhdCB0byBkbyEnKQoJfQoJLy8gcHJvZ3JhbSBjb250aW51ZXMgdW50aWwgaXQgaXMgc3RvcHBlZCBvciAKCS8vICAgZXJyb3JzIG9yIHByb2dyYW0gc3RhY2sgaXMgZW1wdGllZAoJY29uc29sZS5sb2coJ3RpbWVyIHN0YXJ0ZWQnKQoJcnVuQ29udGV4dC5wcm9ncmFtVGltZXIgPSBzZXRJbnRlcnZhbCgKCQlwcm9ncmFtQ291bnRlci5iaW5kKG51bGwsIHJ1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjay5sZW5ndGgsIHJ1bkNvbnRleHQpLCAxMDAwLzYwKQoJcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCQlydW5Db250ZXh0LnByb2dyYW1JZCA9IHByb2dyYW1UaHJlYWRzLmxlbmd0aAoJCXByb2dyYW1UaHJlYWRzLnB1c2gocnVuQ29udGV4dCkKCQlwcm9ncmFtUmVzcG9uc2VzLnB1c2goe3Jlc29sdmUsIHJlamVjdH0pCgkJcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnB1c2gocHJvZ3JhbSkKCX0pCn0KCgpmdW5jdGlvbiBjbGVhbnVwUHJvZ3JhbShydW5Db250ZXh0KSB7CglydW5Db250ZXh0LmVuZGVkID0gdHJ1ZQoJcnVuQ29udGV4dC5yZXR1cm5lZCA9IGZhbHNlCgljbGVhckludGVydmFsKHJ1bkNvbnRleHQucHJvZ3JhbVRpbWVyKQoJbGV0IHByb2dyYW1JID0gcHJvZ3JhbVRocmVhZHMuaW5kZXhPZihydW5Db250ZXh0KQoJcHJvZ3JhbVRocmVhZHMuc3BsaWNlKHByb2dyYW1JLCAxKQoJbGV0IHtyZXNvbHZlLCByZWplY3R9ID0gcHJvZ3JhbVJlc3BvbnNlcy5zcGxpY2UocHJvZ3JhbUksIDEpWzBdCglkZWJ1Z2dlcgoJaWYodHlwZW9mIHJ1bkNvbnRleHQuZXJyb3IgIT0gJ3VuZGVmaW5lZCcpIHsKCQlyZXR1cm4gcmVqZWN0KHJ1bkNvbnRleHQuZXJyb3IpCgl9IGVsc2UgewoJCXJldHVybiByZXNvbHZlKHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuWzBdKQoJfQp9CgoKZnVuY3Rpb24gc2hvdWxkQnViYmxlT3V0KEFTVCwgY2FsbEZyYW1lLCBydW5Db250ZXh0KSB7CglpZihydW5Db250ZXh0LmNvbnRpbnVlT25FcnJvciAmJiBydW5Db250ZXh0LmVycm9yKSB7CgkJLy8gY2xlYXIgZXJyb3IgZm9yIG5vbiBtZW1iZXIgc3RhdGVtZW50cwoJCS8vICAgb3RoZXJ3aXNlIG1lbWJlciBhY2Nlc3Mgd2lsbCB0YWtlIGNhcmUgb2YgaXQKCQlpZihBU1QgCgkJCQkmJiBBU1QudHlwZSA9PSAnSWRlbnRpZmllcicgCgkJCQkmJiBBU1QudHlwZSAhPSAnTGl0ZXJhbCcKCQkJCSYmIEFTVC50eXBlICE9ICdNZW1iZXJFeHByZXNzaW9uJwoJCQkJJiYgQVNULnR5cGUgIT0gJ0Fzc2lnbm1lbnRFeHByZXNzaW9uJwoJCQkJLy8gVE9ETzogYWRkIGVycm9yIHJlbW92ZXIgdG8gQ2FsbEV4cHJlc3Npb24KCQkJCS8vJiYgQVNULnR5cGUgIT0gJ0NhbGxFeHByZXNzaW9uJwoJCSkgewoJCS8vaWYocnVuQ29udGV4dC5wcm9ncmFtQ291bnQpIHsKCQkJLy8gVE9ETzogY2FsbGJhY2sgc29tZXdoZXJlPwoJCQkvL2NvbnNvbGUuZXJyb3IocnVuQ29udGV4dC5lcnJvcikKCQkJLy9kZWxldGUgcnVuQ29udGV4dC5lcnJvcgoJCQkvL3J1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjay5wb3AoKQoJCQkvL3J1bkNvbnRleHQucHJvZ3JhbUNvdW50LS0KCQl9Cgl9CglyZXR1cm4gcnVuQ29udGV4dC5wcm9ncmFtQ291bnQgLSBjYWxsRnJhbWUgPT0gLTEKCQkJfHwgKHR5cGVvZiBydW5Db250ZXh0LmVycm9yICE9ICd1bmRlZmluZWQnCgkJCQkJJiYgIXJ1bkNvbnRleHQuY29udGludWVPbkVycm9yKQp9CgovLyBDT0RFIFJFVklFVywgRklOQUxMWSBGT1VORCBBIFdBWSBUTyBURVNUIEEgUFJPR1JBTU1JTkcgTEFOR1VBR0UgRk9SIEZFQVRVUkUgQ09NUExFVEVORVNTCi8vICAgQURESU5HIFRPIFRISVMgU1dJVENIIExJU1QsIEFORCBVU0lORyBUSEUgUFJPR1JBTSBDT1VOVEVSLCBJVCBCUkVBS1MgRVZFUlkgVElNRSBBCi8vICAgUE9MWUZJTEwgSVMgTk9UIE1BTklQVUxBVElORyBUSEUgUFJPR1JBTSBTVEFDSyBDT1JSRUNUTFkuCi8vICAgVEhJUyBXQVkgSSBDQU4gQUREIEFTUEVDVFMgKEJFRk9SRS9BRlRFUikgQ0FMTFMgTElLRSBUUkFDS0lORyBUSU1FUlMKLy8gICBBTkQgR0FVUkFOVEVFIFRIRSBTVEFDSyBET0VTTidUIEdFVCBDT1JSVVBURUQuCi8vIFRPRE86IE5FRUQgVE8gRE8gVEhFIFNBTUUgVEhJTkcgRk9SIFJFVFVSTiBTVEFURU1FTlRTLCBFVkVSWSBFWFBSRVNTSU9OCi8vICAgUFVTSEVTIEEgUkVUVVJOIFZBTFVFLCBBTkQgVEhFTiBQT1AgSVQgT0ZGIElGIElUIElTTidUIFVTRUQgSU4gVEhFIE5FWFQgU1RBVEVNRU5UCi8vICAgQ0FOIE9OTFkgSEFWRSAxIFRISU5HIElOIFJFVFVSTiBTVEFDSyBXSEVOIFJFVFVSTiBTVEFURU1FTlQgSVMgRVZBTFVBVEVECi8vICAgVEhBVCBNRUFOUyBBTEwgVEhFIE9USEVSIFRPS0VOIFRZUEVTIENMRUFSRUQgVEhFIEVYVFJBIENBTEwgRlJBTUUgVkFMVUVTCi8vICAgVEhFWSBTVE9SRUQgKEkuRS4gTEVGVC9SSUdIVCkKLy8gQ09ERSBSRVZJRVcsIE9IIEdPRCwgU08gTVVDSCBMRVNTIENPREUuIElNQUdJTkUgUkVQTEFDSU5HIEFMTCBPRiBCQUJFTAovLyAgIEdVTFAsIFRIRSBXSE9MRSBOT0RFIEVDT1NZU1RFTSBDQU4gQkUgRVZPTFZFRCBXSVRIIFNPIE1VQ0ggU01BTExFUgovLyAgIFZJU0lUT1IgQ09ERS4gTk9XIEFERElORyBJTiBNWSBTWU5UQVggU0VSVklDRSwgSSBDQU4gQVBQRU5EIEFOWSBGVU5DVElPTgovLyAgIElOIFRIRSBOT0RFIEFQSSBXSVRIIE1ZIE9XTiBQUkVDVVJTT1JTLCBJTUFHSU5FIENPTlRFWFRVQUxJWkVEIEZJTEUtU1lTVEVNUwovLyBXSEVSRSBUSEUgU0FNRSBDT0RFIFJVTlMgQlVUIElOIE9ORSBFTlZJUk9OTUVOVCBJVCdTIFJFQURJTkcgRlJPTSBNRU1GUywgQU5ECi8vICAgT05FIEVOVklST05NRU5UIElUJ1MgUkVBRElORyBGUk9NIFpGUy4gTElLRSBERVBFTkRFTkNZIElOSkVDVElPTiBPTiBTVEVST0lEUy4KLy8gICBJVCdTIExJS0UgVEhFIEFTUEVDVFMgQ0hBTkdFIERFUEVOREVOQ0lFUyBPTiBUSEUgRkxZLgpmdW5jdGlvbiBwcm9ncmFtQ291bnRlcihjYWxsRnJhbWUsIHJ1bkNvbnRleHQpIHsKCWN1cnJlbnRDb250ZXh0ID0gcnVuQ29udGV4dAoJLy9pZihydW5Db250ZXh0LnByb2dyYW1Db3VudCA+IGNhbGxGcmFtZSkgeyAvLyB3YWl0aW5nIGZvciBzb21ldGhpbmcKCS8vICByZXR1cm4KCS8vfQoJLy8gSU5URVJFU1RJTkcgSVQgQVBQRUFSUyBUTyBCRSBDT05USU5VSU5HIE9OIEVSUk9SLCAKCS8vICAgSSBTSE9VTEQgUFJFU0VSVkUgVEhBVCBGVU5DVElPTkFMSVRZIEFTIEEgRkVBVFVSRQoJaWYocnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLmxlbmd0aCA+IDAKCQkmJiBydW5Db250ZXh0LnByb2dyYW1DYWxsc3RhY2tbCgkJCXJ1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjay5sZW5ndGgtMV0uc3RpbGxSdW5uaW5nKSB7CgkJcmV0dXJuCgl9CglsZXQgQVNUID0gcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnBvcCgpCglpZihzaG91bGRCdWJibGVPdXQoQVNULCBjYWxsRnJhbWUsIHJ1bkNvbnRleHQpKSB7CgkJcmV0dXJuIGNsZWFudXBQcm9ncmFtKHJ1bkNvbnRleHQpCgl9CglpZihydW5Db250ZXh0LnByb2dyYW1Db3VudCAhPSBydW5Db250ZXh0LnByb2dyYW1DYWxsc3RhY2subGVuZ3RoKSB7CgkJZGVidWdnZXIKCQl0aHJvdyBuZXcgRXJyb3IoJ0NhbGwgc3RhY2sgZXhjZWVkZWQhJykKCX0KCS8vIFRPRE86IGNvbnRyb2wgaG93IG1hbnkgY29tbWFuZHMgaXQgY2FsbHMgZXZlcnkgZnJhbWU/Cgljb25zb2xlLmxvZygnVGhyZWFkICcgKyBydW5Db250ZXh0LnByb2dyYW1JZCwgQVNULnR5cGUpCglzd2l0Y2goQVNULnR5cGUpIHsKCQljYXNlICdFdmFsdWF0ZSc6IAoJCQkvLyBwcmV2ZW50IHRoZSBwcm9ncmFtIGZyb20gZG9pbmcgYW55dGhpbmcgdW5sZXNzIHRoZSBzdGFjayBjaGFuZ2VzCgkJCWlmKEFTVC5zdGlsbFJ1bm5pbmcpIHsKCQkJCXJ1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjay5wdXNoKEFTVCkKCQkJCXJldHVybgoJCQl9CgkJCUFTVC5zdGlsbFJ1bm5pbmcgPSB0cnVlCgkJCXJ1bkNvbnRleHQucHJvZ3JhbUNvdW50IC09IDEKCQkJUHJvbWlzZS5yZXNvbHZlKEFTVC52YWx1ZS5hcHBseShBU1QpKQoJCQlicmVhawoJCWNhc2UgJ0lkZW50aWZpZXInOgoJCQljb25zb2xlLmxvZyhBU1QubmFtZSkKCQkJaWYoQVNULm5hbWUgPT0gJ2Fjb3JuJykgewoJCQkJZGVidWdnZXIKCQkJfQoJCQkvLyBUT0RPOiBjaGVjayBpZiBsb2NhbCBhbmQgZG9uJ3QgdGFrZSBhbm90aGVyIGZyYW1lCgkJCXJ1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjay5wdXNoKHsKCQkJCXR5cGU6ICdFdmFsdWF0ZScsCgkJCQl2YWx1ZTogKGZ1bmN0aW9uIChpZE5hbWUpIHsKCQkJCQlmb3IobGV0IGkgPSBydW5Db250ZXh0LmxvY2FsRGVjbGFyYXRpb25zLmxlbmd0aC0xOyBpID49IDA7IC0taSkgewoJCQkJCQlsZXQgbG9jYWxzID0gcnVuQ29udGV4dC5sb2NhbERlY2xhcmF0aW9uc1tpXQoJCQkJCQlpZihsb2NhbHMuaGFzT3duUHJvcGVydHkoaWROYW1lKSkgewoJCQkJCQkJcnVuQ29udGV4dC5idWJibGVSZXR1cm4ucHVzaChsb2NhbHNbaWROYW1lXSkKCQkJCQkJCXJldHVybgoJCQkJCQl9CgkJCQkJfQoJCQkJCS8vIFRPRE86IGluc2VydCByZW1vdGUgbWlkZGxld2FyZSwgb24gZmFpbHVyZQoJCQkJCXJ1bkNvbnRleHQuYnViYmxlUmV0dXJuLnB1c2godm9pZCAwKQoJCQkJCXJ1bkNvbnRleHQuZXJyb3IgPSBuZXcgRXJyb3IoJ0lkZW50aWZpZXIgbm90IGRlZmluZWQ6ICcgKyBpZE5hbWUpCgkJCQl9KS5iaW5kKG51bGwsIEFTVC5uYW1lKQoJCQl9KQoJCQlicmVhawoJCWNhc2UgJ01lbWJlckV4cHJlc3Npb24nOgoJCQlydW5Db250ZXh0LnByb2dyYW1DYWxsc3RhY2sucHVzaCh7CgkJCQl0eXBlOiAnRXZhbHVhdGUnLAoJCQkJdmFsdWU6IChmdW5jdGlvbiAobWVtYmVyKSB7CgkJCQkJbGV0IHByb3BlcnR5CgkJCQkJaWYobWVtYmVyLmNvbXB1dGVkKSB7CgkJCQkJCXByb3BlcnR5ID0gcnVuQ29udGV4dC5idWJibGVSZXR1cm4ucG9wKCkKCQkJCQl9IGVsc2UgewoJCQkJCQlwcm9wZXJ0eSA9IG1lbWJlci5wcm9wZXJ0eS5uYW1lCgkJCQkJfQoJCQkJCWxldCBvYmplY3QgPSBydW5Db250ZXh0LmJ1YmJsZVJldHVybi5wb3AoKQoJCQkJCWlmKCFvYmplY3QgJiYgcnVuQ29udGV4dC5lcnJvcikgewoJCQkJCQljb25zb2xlLmVycm9yKHJ1bkNvbnRleHQuZXJyb3IpCgkJCQkJCWRlbGV0ZSBydW5Db250ZXh0LmVycm9yCgkJCQkJCS8vIGFzc3VtZSBpdCdzIGhhbmRsZWQgdW50aWwgaXQgaXNuJ3QKCQkJCQkJcnVuQ29udGV4dC5idWJibGVSZXR1cm4ucHVzaCh2b2lkIDApCgkJCQkJCXJldHVybgoJCQkJCX0KCQkJCQkvLyBUT0RPOiBwdXNoIGFzeW5jIHByb3BlcnkgZXZhbCBhbmQgCgkJCQkJLy8gcnVuQ29udGV4dC5wcm9ncmFtQ291bnQgKz0gMQoJCQkJCS8vIENPREUgUkVWSUVXLCBTRUUgQ09OVFJPTCBJUyBFQVNJRVIgSU4gMSBMT09QCgkJCQkJcnVuQ29udGV4dC5idWJibGVSZXR1cm4ucHVzaChvYmplY3RbcHJvcGVydHldKQoJCQkJfSkuYmluZChudWxsLCBBU1QpCgkJCX0pCgkJCWlmKEFTVC5jb21wdXRlZCkgewoJCQkJcnVuQ29udGV4dC5wcm9ncmFtQ291bnQgKz0gMgoJCQkJLy8gbmVlZCBvYmplY3Qgb24gYnViYmxlUmV0dXJuIHN0YWNrIGZpcnN0CgkJCQlydW5Db250ZXh0LnByb2dyYW1DYWxsc3RhY2sucHVzaChBU1QucHJvcGVydHkpIAoJCQl9IGVsc2UgewoJCQkJcnVuQ29udGV4dC5wcm9ncmFtQ291bnQgKz0gMQoJCQl9CgkJCXJ1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjay5wdXNoKEFTVC5vYmplY3QpCgkJCWJyZWFrCgkJY2FzZSAnTGl0ZXJhbCc6CgkJCS8vIGludGVyZXN0aW5nLCBzaG93aW5nIGEgbGl0ZXJhbCBtb3ZlIGZyb20gcHJvZ3JhbSBtZW1vcnkgdG8gCgkJCS8vICAgaGVhcD8KCQkJcnVuQ29udGV4dC5wcm9ncmFtQ291bnQtLQoJCQlydW5Db250ZXh0LmJ1YmJsZVJldHVybi5wdXNoKEFTVC52YWx1ZSkKCQkJYnJlYWsKCQljYXNlICdDYWxsRXhwcmVzc2lvbic6CgkJCWxldCByZUV2YWx1YXRlCgkJCXJlRXZhbHVhdGUgPSB7CgkJCQl0eXBlOiAnRXZhbHVhdGUnLAoJCQkJdmFsdWU6IGZ1bmN0aW9uICgpIHsKCQkJCQkvLyBwb3AgdGhpcyBndXkgYmFjayBvbnRvIHRoZSBzdGFjayBiZWNhdXNlIGl0J3MgYXN5bmMKCQkJCQkvLyAgIGl0IHdpbGwgY2xlYXIgd2hlbiBhc3luYyBmaW5hbGl6ZXMKCQkJCQljb25zb2xlLmFzc2VydChyZUV2YWx1YXRlLnR5cGUgPT0gJ0V2YWx1YXRlJykKCQkJCQlydW5Db250ZXh0LnByb2dyYW1Db3VudCsrCgkJCQkJcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnB1c2gocmVFdmFsdWF0ZSkKCQkJCQlsZXQgcGFyYW1zCgkJCQkJLy8gV0VJUkQgSSBKVVNUIEdPVCBDT05GVVNFRCBXSEVSRSBXSEFUIEdFTkVSQVRJTkcgQU4gRVJST1IgQkVDQVVTRSBJVCdTIFdPUktJTkcKCQkJCQlpZihBU1QuYXJndW1lbnRzLmxlbmd0aCAhPSAwKSB7CgkJCQkJCXBhcmFtcyA9IHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuLnNwbGljZSgtQVNULmFyZ3VtZW50cy5sZW5ndGgpCgkJCQkJfSBlbHNlIHsKCQkJCQkJcGFyYW1zID0gW10KCQkJCQl9CgkJCQkJbGV0IGNhbGxlZSA9IHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuLnBvcCgpCgkJCQkJcmV0dXJuIFByb21pc2UucmVzb2x2ZSgoYXN5bmMgZnVuY3Rpb24gKCkgewoJCQkJCWxldCByZXN1bHQgCgkJCQkJdHJ5IHsKCQkJCQkJcmVzdWx0ID0gYXdhaXQgY2FsbGVlKC4uLnBhcmFtcykKCQkJCQl9IGNhdGNoIChlKSB7CgkJCQkJCS8vIFRPRE86IGJ1YmJsZSBvdXQgdG8gVHJ5Q2F0Y2ggcHJvcGVybHkKCQkJCQkJcnVuQ29udGV4dC5lcnJvciA9IGUKCQkJCQl9IGZpbmFsbHkgewoJCQkJCQkvLyBuZWVkIGEgbGl0dGxlIGJpdCBvZiBzY3Jld2Fyb3VuZHMgaW5jYXNlIHRoZSBjYWxsIGFjdHVhbGx5CgkJCQkJCS8vICAgbWFrZXMgc3RhY2sgY2hhbmdlcy4gdGhpcyBwcmV2ZW50cyB0aGUgcnVubmVyIGZyb20gZG9pbmcgYW55dGhpbmcKCQkJCQkJLy8gICBldmVuIGlmIGl0J3MgY2FsbGVkIG11bHRpcGxlIHRpbWVzCgkJCQkJCXJ1bkNvbnRleHQucHJvZ3JhbUNvdW50LS0KCQkJCQkJcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnBvcCgpCgkJCQkJCXJ1bkNvbnRleHQuYnViYmxlUmV0dXJuLnB1c2gocmVzdWx0KQoJCQkJCQlyZXR1cm4gcmVzdWx0CgkJCQkJfQoJCQkJCX0pKCkpCgkJCQl9CgkJCX0KCQkJcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnB1c2gocmVFdmFsdWF0ZSkKCQkJZm9yKGxldCBpID0gMDsgaSA8IEFTVC5hcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKCQkJCXJ1bkNvbnRleHQucHJvZ3JhbUNvdW50ICs9IDEKCQkJCXJ1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjay5wdXNoKEFTVC5hcmd1bWVudHNbaV0pCgkJCX0KCQkJLy8gQ09ERSBSRVZJRVcsIEkgbWFkZSBhIGNoYW5nZSB3aGVyZSBlYWNoIHRva2VuIGRvZXNuJ3QKCQkJLy8gICBoYXZlIHRvIG1ha2UgdGhlIHNhbWUgc3RhY2svY291bnRlciBjaGFuZ2VzIGFuZCBmb3Jnb3QgdGhpcyBvbmUKCQkJcnVuQ29udGV4dC5wcm9ncmFtQ291bnQgKz0gMQoJCQlydW5Db250ZXh0LnByb2dyYW1DYWxsc3RhY2sucHVzaChBU1QuY2FsbGVlKQoJCQlicmVhawoJCWNhc2UgJ1JldHVyblN0YXRlbWVudCc6CgkJCXJ1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjay5wdXNoKHsKCQkJCXR5cGU6ICdFdmFsdWF0ZScsCgkJCQl2YWx1ZTogZnVuY3Rpb24gKCkgewoJCQkJCWRlYnVnZ2VyCgkJCQkJLy8gY29taW5nIG91dCBvZiBldmVyeSBmdW5jdGlvbiBjYW4gaGF2ZSBvbmx5IDEKCQkJCQkvLyAgIHJldHVybiB2YWx1ZSBmcm9tIHByb2Nlc3NpbmcgdGhlIGFyZ3VtZW50IGNvbW1hbmQgYmVsb3cKCQkJCQkvLyAgIGV2ZXJ5dGhpbmcgZWxzZSBzaG91bGQgY2xlYXIgdGhlaXIgb3duIHZhbHVlcywgd2hlbiB0aGV5IAoJCQkJCS8vICAgYXJlIEV2YWxlZAoJCQkJCWlmKHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuLmxlbmd0aCAhPSAxKSB7CgkJCQkJCWRlYnVnZ2VyCgkJCQkJCXRocm93IG5ldyBFcnJvcignVGhyZWFkICcgKyBydW5Db250ZXh0LnByb2dyYW1JZCArICc6IENvcnJ1cHRlZCBzdGFjay4nKQoJCQkJCX0KCQkJCQkvLyBUT0RPOiBleGl0IHdob2xlIGZyYW1lCgkJCQkJLy9ydW5Db250ZXh0LmJ1YmJsZVJldHVybi5wdXNoKGdsb2JhbFRoaXNbQVNULm5hbWVdKQoJCQkJfQoJCQl9KQoJCQlydW5Db250ZXh0LnByb2dyYW1Db3VudCArPSAxCgkJCXJ1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjay5wdXNoKEFTVC5hcmd1bWVudCkKCQkJYnJlYWsKCQljYXNlICdGdW5jdGlvbkV4cHJlc3Npb24nOgoJCQkvLyBUT0RPOiBjb3B5IGNyZWF0aW9uIGNvbnRleHQKCQkJLy8gcmV0dXJuIGEgZnVuY3Rpb24/CgkJCXJ1bkNvbnRleHQucHJvZ3JhbUNvdW50IC09IDEgLy8gYmVjYXVzZSB3ZSBhcmUgYWRkaW5nIGEgcmV0dXJuIHN0YXRlbWVudAoJCQkvLyBub3QgYWRkaW5nIGFuIEV2YWx1YXRlIGNvbW1hbmQgc28gbmVlZCB0byBzdWJ0cmFjdCAxCgkJCXJ1bkNvbnRleHQuYnViYmxlUmV0dXJuLnB1c2goKGZ1bmN0aW9uIChib2R5LCBwYXJhbXMsIC4uLmFyZ3MpIHsKCQkJCS8vIFRPRE86IGFzc2lnbiBwYXJhbXMgYW5kIGRlZmF1bHRzCgkJCQlkZWJ1Z2dlcgoJCQkJLy9ydW5Db250ZXh0LnByb2dyYW1DYWxsc3RhY2sgPSBbXQoJCQkJLy8gaW1wbGllZCBhc3NpZ25tZW50IGV4cHJlc3Npb24KCQkJCS8vIFRPRE86IEV2YWx1YXRlIGJvZHkgYWZ0ZXIgcGFyYW1zPwoJCQkJcnVuQ29udGV4dC5wcm9ncmFtQ291bnQgKz0gMQoJCQkJcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnB1c2goYm9keSkKCQkJCWZvcihsZXQgaSA9IHBhcmFtcy5sZW5ndGgtMTsgaSA+PSAwOyAtLWkpIHsKCQkJCQlydW5Db250ZXh0LnByb2dyYW1Db3VudCArPSAxCgkJCQkJcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnB1c2goewoJCQkJCQl0eXBlOiAnQXNzaWdubWVudEV4cHJlc3Npb24nLAoJCQkJCQlsZWZ0OiB7IHR5cGU6ICdJZGVudGlmaWVyJywgbmFtZTogcGFyYW1zW2ldLm5hbWUgfSwKCQkJCQkJcmlnaHQ6IHsgdHlwZTogJ0xpdGVyYWwnLCB2YWx1ZTogYXJnc1tpXSB9LAoJCQkJCX0pCgkJCQl9CgkJCX0pLmJpbmQobnVsbCwgQVNULmJvZHksIEFTVC5wYXJhbXMpKQoJCQlicmVhawoJCWNhc2UgJ0V4cHJlc3Npb25TdGF0ZW1lbnQnOgoJCQkvLyBzbyBnb2luZyBpbnRvIGV2ZXJ5IGV4cHJlc3Npb24gY2FuIGhhdmUgYQoJCQkvLyAgIG1heGltdW0gb2Ygb25lIHJldHVybiB2YWx1ZSBmcm9tIHByZXZpb3VzCgkJCS8vICAgc3RhdGVtZW50L2V4cC9jYWxsCgkJCWlmKHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuLmxlbmd0aCAhPSAxKSB7CgkJCQlkZWJ1Z2dlcgoJCQkJdGhyb3cgbmV3IEVycm9yKCdUaHJlYWQgJyArIHJ1bkNvbnRleHQucHJvZ3JhbUlkICsgJzogQ29ycnVwdGVkIHN0YWNrLicpCgkJCX0KCQkJcnVuQ29udGV4dC5idWJibGVSZXR1cm4ucG9wKCkKCQkJcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnB1c2goewoJCQkJdHlwZTogJ0V2YWx1YXRlJywKCQkJCXZhbHVlOiAoZnVuY3Rpb24gKGV4cHJlc3Npb24pIHsKCQkJCQlydW5Db250ZXh0LnByb2dyYW1Db3VudCArPSAxCgkJCQkJcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnB1c2goZXhwcmVzc2lvbikKCQkJCQkvLyBUT0RPOiBtYWtlIGEgY2hhbmdlIGxpa2UgaW1wbGllZCByZXR1cm4/IAoKCQkJCX0pLmJpbmQobnVsbCwgQVNULmV4cHJlc3Npb24pCgkJCX0pCgkJCWJyZWFrCgkJY2FzZSAnQmxvY2tTdGF0ZW1lbnQnOgoJCQkvLyBUT0RPOiBjcmVhdGUgY29udGV4dCBvbiBzdGFjawoJCQlydW5Db250ZXh0LnByb2dyYW1Db3VudCAtPSAxCgkJCXJ1bkNvbnRleHQucHJvZ3JhbUNvdW50ICs9IEFTVC5ib2R5Lmxlbmd0aAoJCQlmb3IobGV0IGkgPSBBU1QuYm9keS5sZW5ndGgtMTsgaSA+PSAwOyBpLS0pIHsKCQkJCXJ1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjay5wdXNoKEFTVC5ib2R5W2ldKQoJCQl9CgkJCWJyZWFrCgkJY2FzZSAnQmluYXJ5RXhwcmVzc2lvbic6CgkJCS8vIFRPRE86IFRISVMgV0lMTCBBTExPVyBNRSBUTyBUUkFOU0ZPUk0gQVJSQVkuRklMVEVSKCkgSU5UTyBQQVJBTExFTCBQUk9NSVNFUz8KCQkJcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnB1c2goewoJCQkJdHlwZTogJ0V2YWx1YXRlJywKCQkJCXZhbHVlOiBmdW5jdGlvbiAoKSB7CgkJCQkJcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnNwbGljZSgtMykKCQkJCQlsZXQgbGVmdCA9IHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuLnBvcCgpCgkJCQkJbGV0IHJpZ2h0ID0gcnVuQ29udGV4dC5idWJibGVSZXR1cm4ucG9wKCkKCQkJCQlydW5Db250ZXh0LmJ1YmJsZVJldHVybi5wdXNoKGxlZnQgKyByaWdodCkKCQkJCX0KCQkJfSkKCQkJcnVuQ29udGV4dC5wcm9ncmFtQ291bnQgKz0gMQoJCQlydW5Db250ZXh0LnByb2dyYW1DYWxsc3RhY2sucHVzaChBU1QucmlnaHQpCgkJCXJ1bkNvbnRleHQucHJvZ3JhbUNvdW50ICs9IDEKCQkJcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnB1c2goQVNULmxlZnQpCgkJCWJyZWFrCgkJY2FzZSAnVmFyaWFibGVEZWNsYXJhdGlvbic6CgkJCXJ1bkNvbnRleHQucHJvZ3JhbUNvdW50IC09IDEKCQkJcnVuQ29udGV4dC5wcm9ncmFtQ291bnQgKz0gQVNULmRlY2xhcmF0aW9ucy5sZW5ndGgKCQkJZm9yKGxldCBpID0gMDsgaSA8IEFTVC5kZWNsYXJhdGlvbnMubGVuZ3RoOyBpKyspIHsKCQkJCXJ1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjay5wdXNoKEFTVC5kZWNsYXJhdGlvbnNbaV0pCgkJCX0KCQkJYnJlYWsKCQljYXNlICdWYXJpYWJsZURlY2xhcmF0b3InOgoJCQlydW5Db250ZXh0LnByb2dyYW1DYWxsc3RhY2sucHVzaCh7CgkJCQl0eXBlOiAnRXZhbHVhdGUnLAoJCQkJdmFsdWU6IChmdW5jdGlvbiAodmFyTmFtZSkgewoJCQkJCXJ1bkNvbnRleHQubG9jYWxEZWNsYXJhdGlvbnNbcnVuQ29udGV4dC5sb2NhbERlY2xhcmF0aW9ucy5sZW5ndGgtMV0KCQkJCQkJCVt2YXJOYW1lXSA9IHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuLnBvcCgpCgkJCQl9KS5iaW5kKG51bGwsIEFTVC5pZC5uYW1lKQoJCQl9KQoJCQlydW5Db250ZXh0LnByb2dyYW1Db3VudCArPSAxCgkJCXJ1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjay5wdXNoKEFTVC5pbml0KQoJCQlicmVhawoJCWNhc2UgJ0Fzc2lnbm1lbnRFeHByZXNzaW9uJzoKCQkJcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnB1c2goewoJCQkJdHlwZTogJ0V2YWx1YXRlJywKCQkJCXZhbHVlOiAoZnVuY3Rpb24gKGFzc2lnbmVlKSB7CgkJCQkJaWYoYXNzaWduZWUudHlwZSA9PSAnTWVtYmVyRXhwcmVzc2lvbicpIHsKCQkJCQkJbGV0IG9iamVjdCA9IHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuLnBvcCgpCgkJCQkJCW9iamVjdFthc3NpZ25lZS5wcm9wZXJ0eS5uYW1lXSAKCQkJCQkJCQk9IHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuW3J1bkNvbnRleHQuYnViYmxlUmV0dXJuLmxlbmd0aC0xXQoJCQkJCX0gZWxzZSBpZiAoYXNzaWduZWUudHlwZSA9PSAnSWRlbnRpZmllcicpIHsKCQkJCQkJcnVuQ29udGV4dC5sb2NhbERlY2xhcmF0aW9uc1tydW5Db250ZXh0LmxvY2FsRGVjbGFyYXRpb25zLmxlbmd0aC0xXQoJCQkJCQkJW2Fzc2lnbmVlLm5hbWVdID0gcnVuQ29udGV4dC5idWJibGVSZXR1cm5bcnVuQ29udGV4dC5idWJibGVSZXR1cm4ubGVuZ3RoLTFdCgkJCQkJfQoJCQkJCWlmKHJ1bkNvbnRleHQuZXJyb3IpIHsKCQkJCQkJY29uc29sZS5lcnJvcihydW5Db250ZXh0LmVycm9yKQoJCQkJCQlkZWxldGUgcnVuQ29udGV4dC5lcnJvcgoJCQkJCX0KCQkJCQkvLyBUT0RPOiBpbnNlcnQgcmVtb3RlIG1pZGRsZXdhcmUKCQkJCX0pLmJpbmQobnVsbCwgQVNULmxlZnQpCgkJCX0pCgkJCWlmKEFTVC5sZWZ0LnR5cGUgPT0gJ01lbWJlckV4cHJlc3Npb24nKSB7CgkJCQlydW5Db250ZXh0LnByb2dyYW1Db3VudCArPSAxCgkJCQlydW5Db250ZXh0LnByb2dyYW1DYWxsc3RhY2sucHVzaChBU1QubGVmdC5vYmplY3QpCgkJCX0gZWxzZSBpZiAoQVNULmxlZnQudHlwZSA9PSAnSWRlbnRpZmllcicpIHsKCgkJCX0gZWxzZSB7CgkJCQl0aHJvdyBuZXcgRXJyb3IoQVNULnR5cGUgKyAnOiBOb3QgaW1wbGVtZW50ZWQ6ICcgKyBBU1QubGVmdC50eXBlKQoJCQl9CgkJCXJ1bkNvbnRleHQucHJvZ3JhbUNvdW50ICs9IDEKCQkJcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnB1c2goQVNULnJpZ2h0KQoJCQlicmVhawoJCWNhc2UgJ09iamVjdEV4cHJlc3Npb24nOgoJCQlydW5Db250ZXh0LnByb2dyYW1DYWxsc3RhY2sucHVzaCh7CgkJCQl0eXBlOiAnRXZhbHVhdGUnLAoJCQkJdmFsdWU6IChmdW5jdGlvbiAob2JqZWN0KSB7CgkJCQkJbGV0IHJlc3VsdCA9IHt9CgkJCQkJZm9yKGxldCBrID0gb2JqZWN0LnByb3BlcnRpZXMubGVuZ3RoLTE7IGsgPj0gMDsgLS1rKSB7CgkJCQkJCWlmKEFTVC5wcm9wZXJ0aWVzW2tdLnZhbHVlKSB7CgkJCQkJCQlyZXN1bHRbQVNULnByb3BlcnRpZXNba10ua2V5Lm5hbWVdID0gcnVuQ29udGV4dC5idWJibGVSZXR1cm4ucG9wKCkKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXJlc3VsdFtBU1QucHJvcGVydGllc1trXS5rZXkubmFtZV0gPSB2b2lkIDAKCQkJCQkJfQoJCQkJCX0KCQkJCQlydW5Db250ZXh0LmJ1YmJsZVJldHVybi5wdXNoKHJlc3VsdCkKCQkJCX0pLmJpbmQobnVsbCwgQVNUKQoJCQl9KQoJCQkvLyBUT0RPOiBwYXJhbGVsbCBvYmplY3QgaW5pdGlhbGl6ZXJzPwoJCQlmb3IobGV0IGsgPSBBU1QucHJvcGVydGllcy5sZW5ndGgtMTsgayA+PSAwOyBrLS0pIHsKCQkJCWlmKEFTVC5wcm9wZXJ0aWVzW2tdLnZhbHVlKSB7CgkJCQkJcnVuQ29udGV4dC5wcm9ncmFtQ291bnQgKz0gMQoJCQkJCXJ1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjay5wdXNoKEFTVC5wcm9wZXJ0aWVzW2tdLnZhbHVlKQoJCQkJfQoJCQl9CgkJCWJyZWFrCgkJLyoKCQljYXNlICdQcm9wZXJ0eSc6CgkJCXJ1bkNvbnRleHQucHJvZ3JhbUNhbGxzdGFjay5wb3AoKQoJCQlydW5Db250ZXh0LnByb2dyYW1DYWxsc3RhY2sucHVzaCh7CgkJCQl0eXBlOiAnRXZhbHVhdGUnLAoJCQkJdmFsdWU6IChmdW5jdGlvbiAob2JqZWN0KSB7CgkJCQkJZGVidWdnZXIKCQkJCQlydW5Db250ZXh0LnByb2dyYW1Db3VudCAtPSAxCgkJCQkJcnVuQ29udGV4dC5wcm9ncmFtQ2FsbHN0YWNrLnBvcCgpCgkJCQl9KS5iaW5kKG51bGwsICkKCQkJfSkKCQkqLwoJCWRlZmF1bHQ6IAoJCQlkZWJ1Z2dlcgoJCQl0aHJvdyBuZXcgRXJyb3IoQVNULnR5cGUgKyAnOiBOb3QgaW1wbGVtZW50ZWQhJykKCX0KfQoKCgoKCmNvbnN0IExPTkdfTE9PUFMgPSAxMDAwMAoKCmFzeW5jIGZ1bmN0aW9uIHJ1bkxvb3AoaW5pdCwgdGVzdCwgdXBkYXRlLCBib2R5LCBydW5Db250ZXh0KSB7CglsZXQgcmVzdWx0CglpZihib2R5LnR5cGUgIT0gJ0Jsb2NrU3RhdGVtZW50JykgewoJCXRocm93IG5ldyBFcnJvcignRm9yU3RhdGVtZW50OiBOb3QgaW1wbGVtZW50ZWQhJykKCX0KCWlmKGluaXQpIHsKCQlhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW2luaXRdLCBydW5Db250ZXh0KQoJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQlyZXR1cm4KCQl9Cgl9CgoJbGV0IHRlc3RSZXN1bHRzID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFt0ZXN0XSwgcnVuQ29udGV4dCkKCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCXJldHVybgoJfQoKCS8vIFRPRE86IHR1cm4gb2ZmIHNhZmV0eSBmZWF0dXJlIHdpdGggYW4gYXR0cmlidXRlIEBMb25nTG9vcHMKCWxldCBzYWZldHkgPSBMT05HX0xPT1BTCglmb3IoO3Rlc3RSZXN1bHRzICYmIHNhZmV0eSA+IDA7IHNhZmV0eS0tKSB7CgkJbGV0IHJlc3VsdCA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbYm9keV0sIHJ1bkNvbnRleHQpCgkJaWYocnVuQ29udGV4dC5icm9rZW4pIHsKCQkJcnVuQ29udGV4dC5icm9rZW4gPSBmYWxzZQoJCQlicmVhawoJCX0KCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQkJcmV0dXJuCgkJfQoJCWF3YWl0IHJ1blN0YXRlbWVudCgwLCBbdXBkYXRlXSwgcnVuQ29udGV4dCkKCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQkJcmV0dXJuCgkJfQoJCXRlc3RSZXN1bHRzID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFt0ZXN0XSwgcnVuQ29udGV4dCkKCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQkJcmV0dXJuCgkJfQoJfQoJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJcmV0dXJuCgl9Ci8vIFNPIEknTSBOT1QgQSBIWVBPQ1JJVEUgTEVUUyBQVVQgU09NRSBSRUFTT05BQkxFIEJPVU5EUyEKCWlmKHNhZmV0eSA9PSAwKSB7CgkJdGhyb3cgbmV3IEVycm9yKCdMb25nIHJ1bm5pbmcgZm9yIGxvb3AhJykKCX0KCXJldHVybiByZXN1bHQKfQoKYXN5bmMgZnVuY3Rpb24gcnVuV2hpbGUoQVNULCBydW5Db250ZXh0KSB7CiAgbGV0IHJlc3VsdAogIGxldCBzYWZldHkgPSBMT05HX0xPT1BTCglsZXQgdGVzdFJlc3VsdHMKCWlmKEFTVC50eXBlID09ICdXaGlsZVN0YXRlbWVudCcpIHsKCQlsZXQgZmlyc3QgPSB0cnVlCgkJd2hpbGUgKGZpcnN0IHx8ICh0ZXN0UmVzdWx0cyAmJiAtLXNhZmV0eSA+IDApKSB7CgkJCWZpcnN0ID0gZmFsc2UKCQkJdGVzdFJlc3VsdHMgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVC50ZXN0XSwgcnVuQ29udGV4dCkKCQkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCQlyZXR1cm4KCQkJfQoJCQlpZighdGVzdFJlc3VsdHMpIHsKCQkJCWJyZWFrCgkJCX0KCQkJcmVzdWx0ID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1QuYm9keV0sIHJ1bkNvbnRleHQpCgkJCWlmKHJ1bkNvbnRleHQuYnJva2VuKSB7CgkJCQlydW5Db250ZXh0LmJyb2tlbiA9IGZhbHNlCgkJCQlicmVhawoJCQl9CgkJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQkJcmV0dXJuCgkJCX0KCQl9Cgl9IGVsc2UgCglpZihBU1QudHlwZSA9PSAnRG9XaGlsZVN0YXRlbWVudCcpIHsKCgkJZG8gewoJCQlyZXN1bHQgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVC5ib2R5XSwgcnVuQ29udGV4dCkKCQkJaWYocnVuQ29udGV4dC5icm9rZW4pIHsKCQkJCXJ1bkNvbnRleHQuYnJva2VuID0gZmFsc2UKCQkJCWJyZWFrCgkJCX0KCQkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCQlyZXR1cm4KCQkJfQoJCQl0ZXN0UmVzdWx0cyA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNULnRlc3RdLCBydW5Db250ZXh0KQoJCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQkJCXJldHVybgoJCQl9CgkJfSB3aGlsZSAodGVzdFJlc3VsdHMgJiYgLS1zYWZldHkgPiAwKQoJfSBlbHNlIHsKCQl0aHJvdyBuZXcgRXJyb3IoQVNULnR5cGUgKyAnOiBOb3QgaW1wbGVtZW50ZWQhJykKCX0KCglpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQlyZXR1cm4KCX0KCXJldHVybiByZXN1bHQKfQoKYXN5bmMgZnVuY3Rpb24gcnVuUHJpbWl0aXZlKEFTVCwgcnVuQ29udGV4dCkgewoJaWYoQVNULnR5cGUgPT0gJ0xpdGVyYWwnKSB7CgkJcmV0dXJuIEFTVC52YWx1ZQoJfSBlbHNlIAoJaWYoQVNULnR5cGUgPT0gJ0lkZW50aWZpZXInKSB7CgkJaWYocnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlcy5oYXNPd25Qcm9wZXJ0eShBU1QubmFtZSkpIHsKCQkJZm9yKGxldCBpID0gcnVuQ29udGV4dC5sb2NhbERlY2xhcmF0aW9ucy5sZW5ndGgtMTsgaSA+PSAwOyBpLS0pIHsKCQkJCWlmKHJ1bkNvbnRleHQubG9jYWxEZWNsYXJhdGlvbnNbaV0uaGFzT3duUHJvcGVydHkoQVNULm5hbWUpCgkJCQkJfHwgdHlwZW9mIHJ1bkNvbnRleHQubG9jYWxEZWNsYXJhdGlvbnNbaV1bQVNULm5hbWVdICE9ICd1bmRlZmluZWQnKSB7CgkJCQkJcmV0dXJuIHJ1bkNvbnRleHQubG9jYWxEZWNsYXJhdGlvbnNbaV1bQVNULm5hbWVdCgkJCQl9CgkJCX0KCQl9IGVsc2UgewoJCS8vIFRPRE86IGluY2FzZSBsaWJyYXJpZXMgYXJlbid0IHNlbnQsIHByZXByb2Nlc3NlZCBsaWJzIGFyZSB1c2VkIGhlcmUKCQkJbGV0IHJlc3VsdCA9IGF3YWl0IHNlbmRNZXNzYWdlKHsKCQkJCS8vIFdPT0hPTyBteSBmaXJzdCBwb2x5ZmlsbAoJCQkJc2NyaXB0OiAncmV0dXJuICcgKyBBU1QubmFtZSwKCQkJCW5hbWU6IEFTVC5uYW1lLAoJCQl9KQoJCQlyZXR1cm4gYXdhaXQgZG9BY2Nlc3NvcihyZXN1bHQpCgkJLyoKCQl7CgkJCWlmKEFTVC5uYW1lID09ICdjb25zb2xlJykgewoJCQkJZGVidWdnZXIKCQkJfQoJCQlpZihBU1QubmFtZSA9PSAnQXJyYXknKSB7CgkJCQlkZWJ1Z2dlcgoJCQl9CgkJCWlmKEFTVC5uYW1lID09ICdzZXRJbnRlcnZhbCcpIHsKCQkJCWRlYnVnZ2VyCgkJCX0KCQkJdGhyb3cgbmV3IEVycm9yKCdJZGVudGlmaWVyIG5vdCBkZWZpbmVkOiAnICsgQVNULm5hbWUpCgkJCSovCgkJfQoJfSBlbHNlIHsKCQl0aHJvdyBuZXcgRXJyb3IoQVNULnR5cGUgKyAnOiBOb3QgaW1wbGVtZW50ZWQhJykKCX0KfQoKCmFzeW5jIGZ1bmN0aW9uIHJ1blVuYXJ5KEFTVCwgcnVuQ29udGV4dCkgewoJaWYoQVNULm9wZXJhdG9yID09ICd2b2lkJykgewoJCXJldHVybiB2b2lkIChhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVC5hcmd1bWVudF0sIHJ1bkNvbnRleHQpKQoJfSBlbHNlCglpZihBU1Qub3BlcmF0b3IgPT0gJyEnKSB7CgkJcmV0dXJuICEoYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1QuYXJndW1lbnRdLCBydW5Db250ZXh0KSkKCX0gZWxzZQoJaWYoQVNULm9wZXJhdG9yID09ICd0eXBlb2YnKSB7CgkJdHJ5IHsKCQkJcnVuQ29udGV4dC5idWJibGVVcCA9IHRydWUKCQkJbGV0IHJlc3VsdCA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNULmFyZ3VtZW50XSwgcnVuQ29udGV4dCkKCQkJcmV0dXJuIHR5cGVvZiByZXN1bHQKCQl9IGNhdGNoICh1cCkgewoJCQlpZih1cC5tZXNzYWdlLmluY2x1ZGVzKCdub3QgZGVmaW5lZCcpKSB7CgkJCQlyZXR1cm4gJ3VuZGVmaW5lZCcKCQkJfSBlbHNlIHsKCQkJCXRocm93IHVwCgkJCX0KCQl9IGZpbmFsbHkgewoJCQlydW5Db250ZXh0LmJ1YmJsZVVwID0gZmFsc2UKCQl9Cgl9IGVsc2UKCWlmKEFTVC5vcGVyYXRvciA9PSAnLScpIHsKCQlyZXR1cm4gLShhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVC5hcmd1bWVudF0sIHJ1bkNvbnRleHQpKQoJfSBlbHNlIHsKCQlkZWJ1Z2dlcgoJCXRocm93IG5ldyBFcnJvcihBU1QudHlwZSArICc6IE5vdCBpbXBsZW1lbnRlZCEnKQoJfQp9Cgphc3luYyBmdW5jdGlvbiBydW5Mb2dpY2FsKEFTVCwgcnVuQ29udGV4dCkgewoJLy8gTUVBTlQgVE8gRE8gVEhJUyBTT09ORVIKCWlmKEFTVC5vcGVyYXRvciA9PSAnJiYnKSB7CgkJbGV0IGxlZnQgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVC5sZWZ0XSwgcnVuQ29udGV4dCkKCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQkJcmV0dXJuCgkJfQoJCWlmKCFsZWZ0KSB7CgkJCXJldHVybiBmYWxzZQoJCX0KCQkvLyBsZWZ0ID0gdHJ1ZQoKCQlsZXQgcmlnaHQgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVC5yaWdodF0sIHJ1bkNvbnRleHQpCgkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCXJldHVybgoJCX0KCQlyZXR1cm4gcmlnaHQKCX0gZWxzZQoJaWYoQVNULm9wZXJhdG9yID09ICd8fCcpIHsKCQlsZXQgbGVmdCA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNULmxlZnRdLCBydW5Db250ZXh0KQoJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQlyZXR1cm4KCQl9CgkJaWYobGVmdCkgewoJCQlyZXR1cm4gdHJ1ZQoJCX0KCQkvLyBsZWZ0ID0gZmFsc2UKCQlsZXQgcmlnaHQgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVC5yaWdodF0sIHJ1bkNvbnRleHQpCgkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCXJldHVybgoJCX0KCgkJcmV0dXJuIHJpZ2h0Cgl9IGVsc2UgewoJCXRocm93IG5ldyBFcnJvcihBU1QudHlwZSArICc6IE5vdCBpbXBsZW1lbnRlZDogJyArIEFTVC5vcGVyYXRvcikKCX0KCn0KCgoKLy8gQkVDQVVTRSBPRiBUSEUgTkFUVVJFIE9GIFNFQ1VSSU5HIEVWQUwoKSBCWSBDSFJPTUUgRVhURU5TSU9OUwovLyAgIFRIRVJFJ1MgTElUVExFIEkgQ0FOIERPIFRPIE9QVElNSVpFIFRIRSBTVFlMRSBPRiBUSElTIEVWQUxVQVRPUgovLyAgIEVWRVJZIFNZTUJPTCBJTiBKQVZBU0NSSVBUIEhBUyBUTyBCRSBISVQgQUdBSU4uCi8vIEhPV0VWRVIsIExJS0UgQU5UUkwgSSBDQU4gVVNFICpSRUZMRUNUSU9OIE9OIFRIRSBHUkFNTUFSKiBUTyBHRU5FUkFURSBBTgovLyAgIEVWQUxVQVRPUiBJTiBUSEUgU0FNRSBMQU5HVUFHRSwgSlVTVCBMSUtFIFRIRVJFIEFSRSBWSVNJVE9SUyBBTkQKLy8gICBMSVNURU5FUlMsIEkgQ0FOIE1BS0UgQU4gRVZBTFVBVE9SIERPIFRIRSBTQU1FIFRISU5HIEMgRE9FUyBXSVRICi8vICAgQVNZTkMgU1RBVEVNRU5UUyBJTiBCRVRXRUVOLgovLyBUSElTIElTIE1BREUgU0lNUExFUiwgTElLRSBKVVBZVEVSIEtFUk5FTFMsIE9OQ0UgVEhFUkUnUyBBTiBFVkFMKCkKLy8gICBJTiBPTkUgRkVBVFVSRSBDT01QTEVURSBMQU5HVUFHRSwgWk1RIENBTiBUUkFOU0ZFUiBGRUFUVVJFUyBCRVRXRUVOCi8vICAgVFdPIERJRkZFUkVOVCBGRUFUVVJFIFNFVFMsIEEgTkFUSVZFIEtFUk5FTCBBTkQgQSAiTUVUQS1LRVJORUwiLgovLyBCWSBBRERJTkcgQU5UTFIvTEFOR1VBR0UtU0VSVkVSIChNSUNST1NPRlQgTEFOR1VBR0UtU0VSVkVSIFdPVUxEIEhBVkUKLy8gICBCRUVOIFRIRSBSSUdIVCBDSE9JQ0UgSUYgSlVQWVRFUiBTVEFSVEVEIFRPREFZKSBJTlRPIFRIRSBNSVgsIAovLyAgIEkgQkFTSUNBTExZIENSRUFURSBBICJNRVRBLUtFUk5FTCIgSU4gQU5ZIExBTkdVQUdFLiBUSEVOLCBJIFVTRSBUSEFUCi8vICAgSU5URVJGQUNFIFRPIElURVJBVEUgQU5EIFdSSVRFIFRIRSBBUEkgVFJBTlNMQVRJT04sIFJFUVVJUkUoJ0ZTJykgLT4KLy8gICBDIyBJTVBPUlQgRklMRVNZU1RFTS4KLy8gV0hFTiBUSEUgVFJBTlNMQVRJT04gSVMgRE9ORSwgSSBTSE9VTEQgQkUgQUJMRSBUTyBDT05WRVJUIExJS0UgQzJSVVNULgovLyAgIEJFVFdFRU4gTU9SRSBUSEFOIDIgTEFOR1VBR0VTIChQWVRIT04gLT4gTk9ERSkgVVNJTkcgT05MWSBNRVRBLVBST0dSQU1NSU5HLgovLyAgIE9OQ0UgVEhFIE1FVEEtUFJPR1JBTU1JTkcgSU5URVJGQUNFUyBBUkUgQ09NUExFVEVELCBDT05TVU1QVElPTiBDQU4gQkVHSU4uCi8vIE9idmlvdXNseSwgSSdtIG5vdCB0aGUgb25seSBvbmUgd29ya2luZyBvbiB0aGlzIHNvcnQgb2YgdGhpbmcuCmFzeW5jIGZ1bmN0aW9uIHJ1bkJpbmFyeShBU1QsIHJ1bkNvbnRleHQpIHsKCWxldCBsZWZ0ID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1QubGVmdF0sIHJ1bkNvbnRleHQpCglpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQlyZXR1cm4KCX0KCglsZXQgcmlnaHQgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVC5yaWdodF0sIHJ1bkNvbnRleHQpCglpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQlyZXR1cm4KCX0KCgkvLyBNQVRIUyEKCWlmKEFTVC5vcGVyYXRvciA9PSAnKicpIHsKCQlyZXR1cm4gbGVmdCAqIHJpZ2h0Cgl9IGVsc2UKCWlmKEFTVC5vcGVyYXRvciA9PSAnLycpIHsKCQlyZXR1cm4gbGVmdCAvIHJpZ2h0Cgl9IGVsc2UKCWlmKEFTVC5vcGVyYXRvciA9PSAnKycpIHsKCQlyZXR1cm4gbGVmdCArIHJpZ2h0Cgl9IGVsc2UKCWlmKEFTVC5vcGVyYXRvciA9PSAnLScpIHsKCQlyZXR1cm4gbGVmdCAtIHJpZ2h0Cgl9IGVsc2UKCWlmKEFTVC5vcGVyYXRvciA9PSAnJScpIHsKCQkvLyBUT0RPOiBjYW5ub3QgbW9kdWxvIGEgZmxvYXQKCQlyZXR1cm4gbGVmdCAlIHJpZ2h0Cgl9IGVsc2UKCWlmKEFTVC5vcGVyYXRvciA9PSAnXicpIHsKCQlyZXR1cm4gbGVmdCBeIHJpZ2h0Cgl9IGVsc2UgCglpZihBU1Qub3BlcmF0b3IgPT0gJzw9JykgewoJCXJldHVybiBsZWZ0IDw9IHJpZ2h0Cgl9IGVsc2UKCWlmKEFTVC5vcGVyYXRvciA9PSAnPj0nKSB7CgkJcmV0dXJuIGxlZnQgPj0gcmlnaHQKCX0gZWxzZQoJaWYoQVNULm9wZXJhdG9yID09ICchPScpIHsKCQlyZXR1cm4gbGVmdCAhPSByaWdodAoJfSBlbHNlCglpZihBU1Qub3BlcmF0b3IgPT0gJz09JykgewoJCXJldHVybiBsZWZ0ID09IHJpZ2h0Cgl9IGVsc2UKCWlmKEFTVC5vcGVyYXRvciA9PSAnIT09JykgewoJCXJldHVybiBsZWZ0ICE9PSByaWdodAoJfSBlbHNlCglpZihBU1Qub3BlcmF0b3IgPT0gJz09PScpIHsKCQlyZXR1cm4gbGVmdCA9PT0gcmlnaHQKCX0gZWxzZQoJaWYoQVNULm9wZXJhdG9yID09ICc8JykgewoJCXJldHVybiBsZWZ0IDwgcmlnaHQKCX0gZWxzZQoJaWYoQVNULm9wZXJhdG9yID09ICc+JykgewoJCXJldHVybiBsZWZ0ID4gcmlnaHQKCX0gZWxzZSB7CgkJdGhyb3cgbmV3IEVycm9yKEFTVC50eXBlICsgJzogTm90IGltcGxlbWVudGVkOiAnICsgQVNULm9wZXJhdG9yKQoJfQp9CgoKYXN5bmMgZnVuY3Rpb24gcnVuVXBkYXRlKEFTVCwgcnVuQ29udGV4dCkgewoJbGV0IGFyZ1ZhbCA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNULmFyZ3VtZW50XSwgcnVuQ29udGV4dCkKCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCXJldHVybgoJfQoKCWlmKEFTVC5vcGVyYXRvciA9PSAnLS0nKSB7CgkJYXdhaXQgcnVuQXNzaWdubWVudChBU1QuYXJndW1lbnQsIHsKICAgICAgdHlwZTogJ0xpdGVyYWwnLAogICAgICB2YWx1ZTogLS1hcmdWYWwKICAgIH0sIHJ1bkNvbnRleHQpCgkJaWYoQVNULnByZWZpeCkgewoJCQlyZXR1cm4gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1QuYXJndW1lbnRdLCBydW5Db250ZXh0KQoJCX0gZWxzZSB7CgkJCXJldHVybiBhcmdWYWwKCQl9Cgl9IGVsc2UKCWlmKEFTVC5vcGVyYXRvciA9PSAnKysnKSB7CgkJYXdhaXQgcnVuQXNzaWdubWVudChBU1QuYXJndW1lbnQsIHsKICAgICAgdHlwZTogJ0xpdGVyYWwnLAogICAgICB2YWx1ZTogKythcmdWYWwKICAgIH0sIHJ1bkNvbnRleHQpCgkJaWYoQVNULnByZWZpeCkgewoJCQlyZXR1cm4gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1QuYXJndW1lbnRdLCBydW5Db250ZXh0KQoJCX0gZWxzZSB7CgkJCXJldHVybiBhcmdWYWwKCQl9Cgl9IGVsc2UgewoJCXRocm93IG5ldyBFcnJvcihBU1QudHlwZSArICc6IE5vdCBpbXBsZW1lbnRlZCEnKQoJfQoJcmV0dXJuIGFyZ1ZhbAoKfQoKCmFzeW5jIGZ1bmN0aW9uIHJ1bk9iamVjdChBU1QsIHJ1bkNvbnRleHQpIHsKICBsZXQgbmV3T2JqZWN0ID0ge30KICBmb3IobGV0IGsgPSAwOyBrIDwgQVNULnByb3BlcnRpZXMubGVuZ3RoOyBrKyspIHsKICAgIGxldCBwcm9wID0gQVNULnByb3BlcnRpZXNba10KICAgIGlmKHByb3AudHlwZSAhPSAnUHJvcGVydHknIHx8IHByb3Aua2V5LnR5cGUgIT0gJ0lkZW50aWZpZXInKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignT2JqZWN0RXhwcmVzc2lvbjogTm90IGltcGxlbWVudGVkIScpCiAgICB9CiAgICAvLyBUT0RPOiBhZGQgbGF0ZSBiaW5kaW5nCiAgICBuZXdPYmplY3RbcHJvcC5rZXkubmFtZV0gPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW3Byb3AudmFsdWVdLCBydW5Db250ZXh0KQogICAgaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CiAgICAgIHJldHVybgogICAgfQogIH0KICByZXR1cm4gbmV3T2JqZWN0Cn0KCgoKLy8gRE8gVkFSSUFCTEUgUkVBU1NJR05NRU5UUwphc3luYyBmdW5jdGlvbiBydW5Bc3NpZ25tZW50KGxlZnQsIHJpZ2h0LCBydW5Db250ZXh0KSB7CgogIGlmKGxlZnQudHlwZSA9PSAnTGl0ZXJhbCcpIHsKCQkvLyBjYW5ub3QgYXNzaWduIHZhbHVlIHRvIHByaW1pdGl2ZSB0eXBlCgkJdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgb3ZlcnJpZGUgcHJpbWl0aXZlLicpCgl9CgoJaWYgKGxlZnQudHlwZSA9PSAnTWVtYmVyRXhwcmVzc2lvbicpIHsKCQlsZXQgcGFyZW50ID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtsZWZ0Lm9iamVjdF0sIHJ1bkNvbnRleHQpCgkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCXJldHVybgoJCX0KCgkJbGV0IHByb3BlcnR5CgkJaWYobGVmdC5wcm9wZXJ0eS50eXBlID09ICdJZGVudGlmaWVyJykgewoJCQlwcm9wZXJ0eSA9IGxlZnQucHJvcGVydHkubmFtZQoJCX0gZWxzZSAKCQlpZihsZWZ0LnByb3BlcnR5LnR5cGUgPT0gJ0xpdGVyYWwnKSB7CgkJCXByb3BlcnR5ID0gbGVmdC5wcm9wZXJ0eS52YWx1ZQoJCX0gZWxzZSB7CgkJCXByb3BlcnR5ID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtsZWZ0LnByb3BlcnR5XSwgcnVuQ29udGV4dCkKCQkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCQlyZXR1cm4KCQkJfQoJCX0KCgkJbGV0IHJlc3VsdAoJCWlmKHJpZ2h0KSB7CgkJCXJlc3VsdCA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbcmlnaHRdLCBydW5Db250ZXh0KQoJCX0gZWxzZSB7CgkJCXJlc3VsdCA9IHZvaWQgMAoJCX0KCQkvLyBMRUFLIEFTU0lHTk1FTlQgRk9SIEdMT0JBTCBERUJVR0dJTkc/CgkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCXJldHVybgoJCX0KCgkJcnVuQ29udGV4dC5idWJibGVNZW1iZXIgPSBwYXJlbnQKCQlydW5Db250ZXh0LmJ1YmJsZVByb3BlcnR5ID0gKHJ1bkNvbnRleHQuYnViYmxlUHJvcGVydHkgCgkJCQk/IChydW5Db250ZXh0LmJ1YmJsZVByb3BlcnR5ICsgJy4nKSA6ICcnKSAKCQkJCSsgbGVmdC5vYmplY3QubmFtZSArICcuJyArIHByb3BlcnR5CgoJCWlmKHR5cGVvZiBwYXJlbnQgPT0gJ29iamVjdCcgJiYgcGFyZW50IC8vIEJVRzogbnVsbCwgd2hvb3BzCgkJCQkmJiB0eXBlb2YgcGFyZW50Ll9hY2Nlc3NvciAhPSAndW5kZWZpbmVkJykgewoJCQlpZih0eXBlb2YgcGFyZW50Ll9hY2Nlc3NvciAhPSAnZnVuY3Rpb24nKSB7CgkJCQlkZWJ1Z2dlcgoJCQl9CgkJCWF3YWl0IHBhcmVudC5fYWNjZXNzb3IoMCwgW3sKCQkJCXR5cGU6ICdBc3NpZ25tZW50RXhwcmVzc2lvbicsCgkJCQlsZWZ0OiBsZWZ0LAoJCQkJcmlnaHQ6IHJpZ2h0LAoJCQl9XSwgcmVzdWx0LCBydW5Db250ZXh0KQoJCQkvLyBUT0RPOiBkdXBsaWNhdGUgYXNzaWdubWVudHM/CgkJfQoJCXBhcmVudFtwcm9wZXJ0eV0gPSByZXN1bHQKCQkvLyBub3RpZnkgY2xpZW50cwoJCXJldHVybiByZXN1bHQKCX0gZWxzZSAKCS8vIFRPRE86IGRvZXMgZXhwcmVzc2lvbiBldmFsdWF0ZSBldmVuIGlmIHRoZXJlIGFzc2lnbm1lbnQgZXJyb3I/CgkvLyBUT0RPOiBob3cgZG9lcyBDaG9tZSByb2xsIHRoaXMgYmFjaz8gUHJpbWl0aXZlcyBvbmx5PwoJCglpZihsZWZ0LnR5cGUgPT0gJ0lkZW50aWZpZXInKSB7CgkJaWYocnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlc1tsZWZ0Lm5hbWVdID09ICdmdW5jdGlvbicpIHsKCQkJdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgb3ZlcnJpZGUgZnVuY3Rpb246ICcgKyBsZWZ0Lm5hbWUpCgkJfSBlbHNlIGlmICghcnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlcy5oYXNPd25Qcm9wZXJ0eShsZWZ0Lm5hbWUpKSB7CgkJCS8vIFRPRE86IExBWlksIG5vIHZhciwgb25seSBsZXQKCQkJZGVidWdnZXIKCQkJdGhyb3cgbmV3IEVycm9yKCdWYXJpYWJsZSBub3QgZGVmaW5lZDogJyArIGxlZnQubmFtZSkKCQl9IGVsc2UgewoJCQkvLyBXT1chIElNQUdJTkUgVEhBVCEgU0hPVyBWQVJJQUJMRVMgQkVGT1JFIEFORCBBRlRFUiBBU1NJR05NRU5UISBHT09HTEUgQ0hST01FIERFQlVHR0VSIQoJCQlsZXQgcmVzdWx0CgkJCWlmKHJpZ2h0KSB7CgkJCQlyZXN1bHQgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW3JpZ2h0XSwgcnVuQ29udGV4dCkKCQkJfSBlbHNlIHsKCQkJCXJlc3VsdCA9IHZvaWQgMAoJCQl9CgkJCQkvLyBMRUFLIEFTU0lHTk1FTlQgRk9SIEdMT0JBTCBERUJVR0dJTkc/CgkJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQkJcmV0dXJuCgkJCX0KCQkJcnVuQ29udGV4dC5sb2NhbERlY2xhcmF0aW9uc1tydW5Db250ZXh0LmxvY2FsRGVjbGFyYXRpb25zLmxlbmd0aC0xXVtsZWZ0Lm5hbWVdID0gcmVzdWx0CgkJCXJ1bkNvbnRleHQubG9jYWxWYXJpYWJsZXNbbGVmdC5uYW1lXSA9IHR5cGVvZiByZXN1bHQKCQkJcmV0dXJuIHJlc3VsdAoJCX0KCX0gZWxzZSB7CgkJdGhyb3cgbmV3IEVycm9yKCdBc3NpZ25tZW50RXhwcmVzc2lvbjogTm90IGltcGxlbWVudGVkIScpCgl9Cn0KCgphc3luYyBmdW5jdGlvbiBydW5NZW1iZXIoQVNULCBydW5Db250ZXh0KSB7CiAgaWYoIUFTVC5wcm9wZXJ0eSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdNZW1iZXJFeHByZXNzaW9uOiBOb3QgaW1wbGVtZW50ZWQhJykKICB9CiAgbGV0IHByb3BlcnR5CiAgaWYoQVNULnByb3BlcnR5LnR5cGUgPT0gJ0xpdGVyYWwnKSB7CiAgICBwcm9wZXJ0eSA9IEFTVC5wcm9wZXJ0eS52YWx1ZQogIH0gZWxzZQoJaWYoQVNULmNvbXB1dGVkKSB7CiAgICBwcm9wZXJ0eSA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNULnByb3BlcnR5XSwgcnVuQ29udGV4dCkKCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQkJcmV0dXJuCgkJfQoJfSBlbHNlIAoJaWYoQVNULnByb3BlcnR5LnR5cGUgPT0gJ0lkZW50aWZpZXInKSB7CgkJcHJvcGVydHkgPSBBU1QucHJvcGVydHkubmFtZQoJfSBlbHNlIHsKCQlkZWJ1Z2dlcgogICAgdGhyb3cgbmV3IEVycm9yKCdNZW1iZXJFeHByZXNzaW9uOiBOb3QgaW1wbGVtZW50ZWQhJykKICB9CgoJbGV0IHBhcmVudCA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNULm9iamVjdF0sIHJ1bkNvbnRleHQpCiAgaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CiAgICByZXR1cm4gLy8gYnViYmxlIHVwCiAgfQoKCXJ1bkNvbnRleHQuYnViYmxlTWVtYmVyID0gcGFyZW50CglydW5Db250ZXh0LmJ1YmJsZVByb3BlcnR5ID0gKHJ1bkNvbnRleHQuYnViYmxlUHJvcGVydHkgCgkJCT8gKHJ1bkNvbnRleHQuYnViYmxlUHJvcGVydHkgKyAnLicpIDogJycpIAoJCQkrIEFTVC5vYmplY3QubmFtZSArICcuJyArIHByb3BlcnR5CgogIGlmKHR5cGVvZiBwYXJlbnQgPT0gJ29iamVjdCcgJiYgcGFyZW50IC8vIEJVRzogbnVsbCwgd2hvb3BzCiAgICAmJiB0eXBlb2YgcGFyZW50Ll9hY2Nlc3NvciAhPSAndW5kZWZpbmVkJykgewoJCWlmKHR5cGVvZiBwYXJlbnQuX2FjY2Vzc29yICE9ICdmdW5jdGlvbicpIHsKCQkJZGVidWdnZXIKCQl9CiAgICByZXR1cm4gYXdhaXQgcGFyZW50Ll9hY2Nlc3NvcigwLCBbQVNUXSwgQVNULCBydW5Db250ZXh0KQogIH0KCiAgaWYoIXBhcmVudCB8fCAoIXBhcmVudC5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkKICAgICYmIHR5cGVvZiBwYXJlbnRbcHJvcGVydHldID09ICd1bmRlZmluZWQnKSkgewoJCWRlYnVnZ2VyCiAgICB0aHJvdyBuZXcgRXJyb3IoJ01lbWJlciBhY2Nlc3MgZXJyb3I6ICcgKyBwcm9wZXJ0eSkKICB9IGVsc2UgewogICAgcmV0dXJuIHBhcmVudFtwcm9wZXJ0eV0KICB9Cn0KCgooZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkgewogIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cykgOgogIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnXSwgZmFjdG9yeSkgOgogIChnbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogZ2xvYmFsIHx8IHNlbGYsIGZhY3RvcnkoZ2xvYmFsLmFjb3JuID0ge30pKTsKfSkodGhpcywgKGZ1bmN0aW9uIChleHBvcnRzKSB7ICd1c2Ugc3RyaWN0JzsKCiAgLy8gUmVzZXJ2ZWQgd29yZCBsaXN0cyBmb3IgdmFyaW91cyBkaWFsZWN0cyBvZiB0aGUgbGFuZ3VhZ2UKCiAgdmFyIHJlc2VydmVkV29yZHMgPSB7CiAgICAzOiAiYWJzdHJhY3QgYm9vbGVhbiBieXRlIGNoYXIgY2xhc3MgZG91YmxlIGVudW0gZXhwb3J0IGV4dGVuZHMgZmluYWwgZmxvYXQgZ290byBpbXBsZW1lbnRzIGltcG9ydCBpbnQgaW50ZXJmYWNlIGxvbmcgbmF0aXZlIHBhY2thZ2UgcHJpdmF0ZSBwcm90ZWN0ZWQgcHVibGljIHNob3J0IHN0YXRpYyBzdXBlciBzeW5jaHJvbml6ZWQgdGhyb3dzIHRyYW5zaWVudCB2b2xhdGlsZSIsCiAgICA1OiAiY2xhc3MgZW51bSBleHRlbmRzIHN1cGVyIGNvbnN0IGV4cG9ydCBpbXBvcnQiLAogICAgNjogImVudW0iLAogICAgc3RyaWN0OiAiaW1wbGVtZW50cyBpbnRlcmZhY2UgbGV0IHBhY2thZ2UgcHJpdmF0ZSBwcm90ZWN0ZWQgcHVibGljIHN0YXRpYyB5aWVsZCIsCiAgICBzdHJpY3RCaW5kOiAiZXZhbCBhcmd1bWVudHMiCiAgfTsKCiAgLy8gQW5kIHRoZSBrZXl3b3JkcwoKICB2YXIgZWNtYTVBbmRMZXNzS2V5d29yZHMgPSAiYnJlYWsgY2FzZSBjYXRjaCBjb250aW51ZSBkZWJ1Z2dlciBkZWZhdWx0IGRvIGVsc2UgZmluYWxseSBmb3IgZnVuY3Rpb24gaWYgcmV0dXJuIHN3aXRjaCB0aHJvdyB0cnkgdmFyIHdoaWxlIHdpdGggbnVsbCB0cnVlIGZhbHNlIGluc3RhbmNlb2YgdHlwZW9mIHZvaWQgZGVsZXRlIG5ldyBpbiB0aGlzIjsKCiAgdmFyIGtleXdvcmRzJDEgPSB7CiAgICA1OiBlY21hNUFuZExlc3NLZXl3b3JkcywKICAgICI1bW9kdWxlIjogZWNtYTVBbmRMZXNzS2V5d29yZHMgKyAiIGV4cG9ydCBpbXBvcnQiLAogICAgNjogZWNtYTVBbmRMZXNzS2V5d29yZHMgKyAiIGNvbnN0IGNsYXNzIGV4dGVuZHMgZXhwb3J0IGltcG9ydCBzdXBlciIKICB9OwoKICB2YXIga2V5d29yZFJlbGF0aW9uYWxPcGVyYXRvciA9IC9eaW4oc3RhbmNlb2YpPyQvOwoKICAvLyAjIyBDaGFyYWN0ZXIgY2F0ZWdvcmllcwoKICAvLyBCaWcgdWdseSByZWd1bGFyIGV4cHJlc3Npb25zIHRoYXQgbWF0Y2ggY2hhcmFjdGVycyBpbiB0aGUKICAvLyB3aGl0ZXNwYWNlLCBpZGVudGlmaWVyLCBhbmQgaWRlbnRpZmllci1zdGFydCBjYXRlZ29yaWVzLiBUaGVzZQogIC8vIGFyZSBvbmx5IGFwcGxpZWQgd2hlbiBhIGNoYXJhY3RlciBpcyBmb3VuZCB0byBhY3R1YWxseSBoYXZlIGEKICAvLyBjb2RlIHBvaW50IGFib3ZlIDEyOC4KICAvLyBHZW5lcmF0ZWQgYnkgYGJpbi9nZW5lcmF0ZS1pZGVudGlmaWVyLXJlZ2V4LmpzYC4KICB2YXIgbm9uQVNDSUlpZGVudGlmaWVyU3RhcnRDaGFycyA9ICJceGFhXHhiNVx4YmFceGMwLVx4ZDZceGQ4LVx4ZjZceGY4LVx1MDJjMVx1MDJjNi1cdTAyZDFcdTAyZTAtXHUwMmU0XHUwMmVjXHUwMmVlXHUwMzcwLVx1MDM3NFx1MDM3Nlx1MDM3N1x1MDM3YS1cdTAzN2RcdTAzN2ZcdTAzODZcdTAzODgtXHUwMzhhXHUwMzhjXHUwMzhlLVx1MDNhMVx1MDNhMy1cdTAzZjVcdTAzZjctXHUwNDgxXHUwNDhhLVx1MDUyZlx1MDUzMS1cdTA1NTZcdTA1NTlcdTA1NjAtXHUwNTg4XHUwNWQwLVx1MDVlYVx1MDVlZi1cdTA1ZjJcdTA2MjAtXHUwNjRhXHUwNjZlXHUwNjZmXHUwNjcxLVx1MDZkM1x1MDZkNVx1MDZlNVx1MDZlNlx1MDZlZVx1MDZlZlx1MDZmYS1cdTA2ZmNcdTA2ZmZcdTA3MTBcdTA3MTItXHUwNzJmXHUwNzRkLVx1MDdhNVx1MDdiMVx1MDdjYS1cdTA3ZWFcdTA3ZjRcdTA3ZjVcdTA3ZmFcdTA4MDAtXHUwODE1XHUwODFhXHUwODI0XHUwODI4XHUwODQwLVx1MDg1OFx1MDg2MC1cdTA4NmFcdTA4NzAtXHUwODg3XHUwODg5LVx1MDg4ZVx1MDhhMC1cdTA4YzlcdTA5MDQtXHUwOTM5XHUwOTNkXHUwOTUwXHUwOTU4LVx1MDk2MVx1MDk3MS1cdTA5ODBcdTA5ODUtXHUwOThjXHUwOThmXHUwOTkwXHUwOTkzLVx1MDlhOFx1MDlhYS1cdTA5YjBcdTA5YjJcdTA5YjYtXHUwOWI5XHUwOWJkXHUwOWNlXHUwOWRjXHUwOWRkXHUwOWRmLVx1MDllMVx1MDlmMFx1MDlmMVx1MDlmY1x1MGEwNS1cdTBhMGFcdTBhMGZcdTBhMTBcdTBhMTMtXHUwYTI4XHUwYTJhLVx1MGEzMFx1MGEzMlx1MGEzM1x1MGEzNVx1MGEzNlx1MGEzOFx1MGEzOVx1MGE1OS1cdTBhNWNcdTBhNWVcdTBhNzItXHUwYTc0XHUwYTg1LVx1MGE4ZFx1MGE4Zi1cdTBhOTFcdTBhOTMtXHUwYWE4XHUwYWFhLVx1MGFiMFx1MGFiMlx1MGFiM1x1MGFiNS1cdTBhYjlcdTBhYmRcdTBhZDBcdTBhZTBcdTBhZTFcdTBhZjlcdTBiMDUtXHUwYjBjXHUwYjBmXHUwYjEwXHUwYjEzLVx1MGIyOFx1MGIyYS1cdTBiMzBcdTBiMzJcdTBiMzNcdTBiMzUtXHUwYjM5XHUwYjNkXHUwYjVjXHUwYjVkXHUwYjVmLVx1MGI2MVx1MGI3MVx1MGI4M1x1MGI4NS1cdTBiOGFcdTBiOGUtXHUwYjkwXHUwYjkyLVx1MGI5NVx1MGI5OVx1MGI5YVx1MGI5Y1x1MGI5ZVx1MGI5Zlx1MGJhM1x1MGJhNFx1MGJhOC1cdTBiYWFcdTBiYWUtXHUwYmI5XHUwYmQwXHUwYzA1LVx1MGMwY1x1MGMwZS1cdTBjMTBcdTBjMTItXHUwYzI4XHUwYzJhLVx1MGMzOVx1MGMzZFx1MGM1OC1cdTBjNWFcdTBjNWRcdTBjNjBcdTBjNjFcdTBjODBcdTBjODUtXHUwYzhjXHUwYzhlLVx1MGM5MFx1MGM5Mi1cdTBjYThcdTBjYWEtXHUwY2IzXHUwY2I1LVx1MGNiOVx1MGNiZFx1MGNkZFx1MGNkZVx1MGNlMFx1MGNlMVx1MGNmMVx1MGNmMlx1MGQwNC1cdTBkMGNcdTBkMGUtXHUwZDEwXHUwZDEyLVx1MGQzYVx1MGQzZFx1MGQ0ZVx1MGQ1NC1cdTBkNTZcdTBkNWYtXHUwZDYxXHUwZDdhLVx1MGQ3Zlx1MGQ4NS1cdTBkOTZcdTBkOWEtXHUwZGIxXHUwZGIzLVx1MGRiYlx1MGRiZFx1MGRjMC1cdTBkYzZcdTBlMDEtXHUwZTMwXHUwZTMyXHUwZTMzXHUwZTQwLVx1MGU0Nlx1MGU4MVx1MGU4Mlx1MGU4NFx1MGU4Ni1cdTBlOGFcdTBlOGMtXHUwZWEzXHUwZWE1XHUwZWE3LVx1MGViMFx1MGViMlx1MGViM1x1MGViZFx1MGVjMC1cdTBlYzRcdTBlYzZcdTBlZGMtXHUwZWRmXHUwZjAwXHUwZjQwLVx1MGY0N1x1MGY0OS1cdTBmNmNcdTBmODgtXHUwZjhjXHUxMDAwLVx1MTAyYVx1MTAzZlx1MTA1MC1cdTEwNTVcdTEwNWEtXHUxMDVkXHUxMDYxXHUxMDY1XHUxMDY2XHUxMDZlLVx1MTA3MFx1MTA3NS1cdTEwODFcdTEwOGVcdTEwYTAtXHUxMGM1XHUxMGM3XHUxMGNkXHUxMGQwLVx1MTBmYVx1MTBmYy1cdTEyNDhcdTEyNGEtXHUxMjRkXHUxMjUwLVx1MTI1Nlx1MTI1OFx1MTI1YS1cdTEyNWRcdTEyNjAtXHUxMjg4XHUxMjhhLVx1MTI4ZFx1MTI5MC1cdTEyYjBcdTEyYjItXHUxMmI1XHUxMmI4LVx1MTJiZVx1MTJjMFx1MTJjMi1cdTEyYzVcdTEyYzgtXHUxMmQ2XHUxMmQ4LVx1MTMxMFx1MTMxMi1cdTEzMTVcdTEzMTgtXHUxMzVhXHUxMzgwLVx1MTM4Zlx1MTNhMC1cdTEzZjVcdTEzZjgtXHUxM2ZkXHUxNDAxLVx1MTY2Y1x1MTY2Zi1cdTE2N2ZcdTE2ODEtXHUxNjlhXHUxNmEwLVx1MTZlYVx1MTZlZS1cdTE2ZjhcdTE3MDAtXHUxNzExXHUxNzFmLVx1MTczMVx1MTc0MC1cdTE3NTFcdTE3NjAtXHUxNzZjXHUxNzZlLVx1MTc3MFx1MTc4MC1cdTE3YjNcdTE3ZDdcdTE3ZGNcdTE4MjAtXHUxODc4XHUxODgwLVx1MThhOFx1MThhYVx1MThiMC1cdTE4ZjVcdTE5MDAtXHUxOTFlXHUxOTUwLVx1MTk2ZFx1MTk3MC1cdTE5NzRcdTE5ODAtXHUxOWFiXHUxOWIwLVx1MTljOVx1MWEwMC1cdTFhMTZcdTFhMjAtXHUxYTU0XHUxYWE3XHUxYjA1LVx1MWIzM1x1MWI0NS1cdTFiNGNcdTFiODMtXHUxYmEwXHUxYmFlXHUxYmFmXHUxYmJhLVx1MWJlNVx1MWMwMC1cdTFjMjNcdTFjNGQtXHUxYzRmXHUxYzVhLVx1MWM3ZFx1MWM4MC1cdTFjODhcdTFjOTAtXHUxY2JhXHUxY2JkLVx1MWNiZlx1MWNlOS1cdTFjZWNcdTFjZWUtXHUxY2YzXHUxY2Y1XHUxY2Y2XHUxY2ZhXHUxZDAwLVx1MWRiZlx1MWUwMC1cdTFmMTVcdTFmMTgtXHUxZjFkXHUxZjIwLVx1MWY0NVx1MWY0OC1cdTFmNGRcdTFmNTAtXHUxZjU3XHUxZjU5XHUxZjViXHUxZjVkXHUxZjVmLVx1MWY3ZFx1MWY4MC1cdTFmYjRcdTFmYjYtXHUxZmJjXHUxZmJlXHUxZmMyLVx1MWZjNFx1MWZjNi1cdTFmY2NcdTFmZDAtXHUxZmQzXHUxZmQ2LVx1MWZkYlx1MWZlMC1cdTFmZWNcdTFmZjItXHUxZmY0XHUxZmY2LVx1MWZmY1x1MjA3MVx1MjA3Zlx1MjA5MC1cdTIwOWNcdTIxMDJcdTIxMDdcdTIxMGEtXHUyMTEzXHUyMTE1XHUyMTE4LVx1MjExZFx1MjEyNFx1MjEyNlx1MjEyOFx1MjEyYS1cdTIxMzlcdTIxM2MtXHUyMTNmXHUyMTQ1LVx1MjE0OVx1MjE0ZVx1MjE2MC1cdTIxODhcdTJjMDAtXHUyY2U0XHUyY2ViLVx1MmNlZVx1MmNmMlx1MmNmM1x1MmQwMC1cdTJkMjVcdTJkMjdcdTJkMmRcdTJkMzAtXHUyZDY3XHUyZDZmXHUyZDgwLVx1MmQ5Nlx1MmRhMC1cdTJkYTZcdTJkYTgtXHUyZGFlXHUyZGIwLVx1MmRiNlx1MmRiOC1cdTJkYmVcdTJkYzAtXHUyZGM2XHUyZGM4LVx1MmRjZVx1MmRkMC1cdTJkZDZcdTJkZDgtXHUyZGRlXHUzMDA1LVx1MzAwN1x1MzAyMS1cdTMwMjlcdTMwMzEtXHUzMDM1XHUzMDM4LVx1MzAzY1x1MzA0MS1cdTMwOTZcdTMwOWItXHUzMDlmXHUzMGExLVx1MzBmYVx1MzBmYy1cdTMwZmZcdTMxMDUtXHUzMTJmXHUzMTMxLVx1MzE4ZVx1MzFhMC1cdTMxYmZcdTMxZjAtXHUzMWZmXHUzNDAwLVx1NGRiZlx1NGUwMC1cdWE0OGNcdWE0ZDAtXHVhNGZkXHVhNTAwLVx1YTYwY1x1YTYxMC1cdWE2MWZcdWE2MmFcdWE2MmJcdWE2NDAtXHVhNjZlXHVhNjdmLVx1YTY5ZFx1YTZhMC1cdWE2ZWZcdWE3MTctXHVhNzFmXHVhNzIyLVx1YTc4OFx1YTc4Yi1cdWE3Y2FcdWE3ZDBcdWE3ZDFcdWE3ZDNcdWE3ZDUtXHVhN2Q5XHVhN2YyLVx1YTgwMVx1YTgwMy1cdWE4MDVcdWE4MDctXHVhODBhXHVhODBjLVx1YTgyMlx1YTg0MC1cdWE4NzNcdWE4ODItXHVhOGIzXHVhOGYyLVx1YThmN1x1YThmYlx1YThmZFx1YThmZVx1YTkwYS1cdWE5MjVcdWE5MzAtXHVhOTQ2XHVhOTYwLVx1YTk3Y1x1YTk4NC1cdWE5YjJcdWE5Y2ZcdWE5ZTAtXHVhOWU0XHVhOWU2LVx1YTllZlx1YTlmYS1cdWE5ZmVcdWFhMDAtXHVhYTI4XHVhYTQwLVx1YWE0Mlx1YWE0NC1cdWFhNGJcdWFhNjAtXHVhYTc2XHVhYTdhXHVhYTdlLVx1YWFhZlx1YWFiMVx1YWFiNVx1YWFiNlx1YWFiOS1cdWFhYmRcdWFhYzBcdWFhYzJcdWFhZGItXHVhYWRkXHVhYWUwLVx1YWFlYVx1YWFmMi1cdWFhZjRcdWFiMDEtXHVhYjA2XHVhYjA5LVx1YWIwZVx1YWIxMS1cdWFiMTZcdWFiMjAtXHVhYjI2XHVhYjI4LVx1YWIyZVx1YWIzMC1cdWFiNWFcdWFiNWMtXHVhYjY5XHVhYjcwLVx1YWJlMlx1YWMwMC1cdWQ3YTNcdWQ3YjAtXHVkN2M2XHVkN2NiLVx1ZDdmYlx1ZjkwMC1cdWZhNmRcdWZhNzAtXHVmYWQ5XHVmYjAwLVx1ZmIwNlx1ZmIxMy1cdWZiMTdcdWZiMWRcdWZiMWYtXHVmYjI4XHVmYjJhLVx1ZmIzNlx1ZmIzOC1cdWZiM2NcdWZiM2VcdWZiNDBcdWZiNDFcdWZiNDNcdWZiNDRcdWZiNDYtXHVmYmIxXHVmYmQzLVx1ZmQzZFx1ZmQ1MC1cdWZkOGZcdWZkOTItXHVmZGM3XHVmZGYwLVx1ZmRmYlx1ZmU3MC1cdWZlNzRcdWZlNzYtXHVmZWZjXHVmZjIxLVx1ZmYzYVx1ZmY0MS1cdWZmNWFcdWZmNjYtXHVmZmJlXHVmZmMyLVx1ZmZjN1x1ZmZjYS1cdWZmY2ZcdWZmZDItXHVmZmQ3XHVmZmRhLVx1ZmZkYyI7CiAgdmFyIG5vbkFTQ0lJaWRlbnRpZmllckNoYXJzID0gIlx1MjAwY1x1MjAwZFx4YjdcdTAzMDAtXHUwMzZmXHUwMzg3XHUwNDgzLVx1MDQ4N1x1MDU5MS1cdTA1YmRcdTA1YmZcdTA1YzFcdTA1YzJcdTA1YzRcdTA1YzVcdTA1YzdcdTA2MTAtXHUwNjFhXHUwNjRiLVx1MDY2OVx1MDY3MFx1MDZkNi1cdTA2ZGNcdTA2ZGYtXHUwNmU0XHUwNmU3XHUwNmU4XHUwNmVhLVx1MDZlZFx1MDZmMC1cdTA2ZjlcdTA3MTFcdTA3MzAtXHUwNzRhXHUwN2E2LVx1MDdiMFx1MDdjMC1cdTA3YzlcdTA3ZWItXHUwN2YzXHUwN2ZkXHUwODE2LVx1MDgxOVx1MDgxYi1cdTA4MjNcdTA4MjUtXHUwODI3XHUwODI5LVx1MDgyZFx1MDg1OS1cdTA4NWJcdTA4OTgtXHUwODlmXHUwOGNhLVx1MDhlMVx1MDhlMy1cdTA5MDNcdTA5M2EtXHUwOTNjXHUwOTNlLVx1MDk0Zlx1MDk1MS1cdTA5NTdcdTA5NjJcdTA5NjNcdTA5NjYtXHUwOTZmXHUwOTgxLVx1MDk4M1x1MDliY1x1MDliZS1cdTA5YzRcdTA5YzdcdTA5YzhcdTA5Y2ItXHUwOWNkXHUwOWQ3XHUwOWUyXHUwOWUzXHUwOWU2LVx1MDllZlx1MDlmZVx1MGEwMS1cdTBhMDNcdTBhM2NcdTBhM2UtXHUwYTQyXHUwYTQ3XHUwYTQ4XHUwYTRiLVx1MGE0ZFx1MGE1MVx1MGE2Ni1cdTBhNzFcdTBhNzVcdTBhODEtXHUwYTgzXHUwYWJjXHUwYWJlLVx1MGFjNVx1MGFjNy1cdTBhYzlcdTBhY2ItXHUwYWNkXHUwYWUyXHUwYWUzXHUwYWU2LVx1MGFlZlx1MGFmYS1cdTBhZmZcdTBiMDEtXHUwYjAzXHUwYjNjXHUwYjNlLVx1MGI0NFx1MGI0N1x1MGI0OFx1MGI0Yi1cdTBiNGRcdTBiNTUtXHUwYjU3XHUwYjYyXHUwYjYzXHUwYjY2LVx1MGI2Zlx1MGI4Mlx1MGJiZS1cdTBiYzJcdTBiYzYtXHUwYmM4XHUwYmNhLVx1MGJjZFx1MGJkN1x1MGJlNi1cdTBiZWZcdTBjMDAtXHUwYzA0XHUwYzNjXHUwYzNlLVx1MGM0NFx1MGM0Ni1cdTBjNDhcdTBjNGEtXHUwYzRkXHUwYzU1XHUwYzU2XHUwYzYyXHUwYzYzXHUwYzY2LVx1MGM2Zlx1MGM4MS1cdTBjODNcdTBjYmNcdTBjYmUtXHUwY2M0XHUwY2M2LVx1MGNjOFx1MGNjYS1cdTBjY2RcdTBjZDVcdTBjZDZcdTBjZTJcdTBjZTNcdTBjZTYtXHUwY2VmXHUwZDAwLVx1MGQwM1x1MGQzYlx1MGQzY1x1MGQzZS1cdTBkNDRcdTBkNDYtXHUwZDQ4XHUwZDRhLVx1MGQ0ZFx1MGQ1N1x1MGQ2Mlx1MGQ2M1x1MGQ2Ni1cdTBkNmZcdTBkODEtXHUwZDgzXHUwZGNhXHUwZGNmLVx1MGRkNFx1MGRkNlx1MGRkOC1cdTBkZGZcdTBkZTYtXHUwZGVmXHUwZGYyXHUwZGYzXHUwZTMxXHUwZTM0LVx1MGUzYVx1MGU0Ny1cdTBlNGVcdTBlNTAtXHUwZTU5XHUwZWIxXHUwZWI0LVx1MGViY1x1MGVjOC1cdTBlY2RcdTBlZDAtXHUwZWQ5XHUwZjE4XHUwZjE5XHUwZjIwLVx1MGYyOVx1MGYzNVx1MGYzN1x1MGYzOVx1MGYzZVx1MGYzZlx1MGY3MS1cdTBmODRcdTBmODZcdTBmODdcdTBmOGQtXHUwZjk3XHUwZjk5LVx1MGZiY1x1MGZjNlx1MTAyYi1cdTEwM2VcdTEwNDAtXHUxMDQ5XHUxMDU2LVx1MTA1OVx1MTA1ZS1cdTEwNjBcdTEwNjItXHUxMDY0XHUxMDY3LVx1MTA2ZFx1MTA3MS1cdTEwNzRcdTEwODItXHUxMDhkXHUxMDhmLVx1MTA5ZFx1MTM1ZC1cdTEzNWZcdTEzNjktXHUxMzcxXHUxNzEyLVx1MTcxNVx1MTczMi1cdTE3MzRcdTE3NTJcdTE3NTNcdTE3NzJcdTE3NzNcdTE3YjQtXHUxN2QzXHUxN2RkXHUxN2UwLVx1MTdlOVx1MTgwYi1cdTE4MGRcdTE4MGYtXHUxODE5XHUxOGE5XHUxOTIwLVx1MTkyYlx1MTkzMC1cdTE5M2JcdTE5NDYtXHUxOTRmXHUxOWQwLVx1MTlkYVx1MWExNy1cdTFhMWJcdTFhNTUtXHUxYTVlXHUxYTYwLVx1MWE3Y1x1MWE3Zi1cdTFhODlcdTFhOTAtXHUxYTk5XHUxYWIwLVx1MWFiZFx1MWFiZi1cdTFhY2VcdTFiMDAtXHUxYjA0XHUxYjM0LVx1MWI0NFx1MWI1MC1cdTFiNTlcdTFiNmItXHUxYjczXHUxYjgwLVx1MWI4Mlx1MWJhMS1cdTFiYWRcdTFiYjAtXHUxYmI5XHUxYmU2LVx1MWJmM1x1MWMyNC1cdTFjMzdcdTFjNDAtXHUxYzQ5XHUxYzUwLVx1MWM1OVx1MWNkMC1cdTFjZDJcdTFjZDQtXHUxY2U4XHUxY2VkXHUxY2Y0XHUxY2Y3LVx1MWNmOVx1MWRjMC1cdTFkZmZcdTIwM2ZcdTIwNDBcdTIwNTRcdTIwZDAtXHUyMGRjXHUyMGUxXHUyMGU1LVx1MjBmMFx1MmNlZi1cdTJjZjFcdTJkN2ZcdTJkZTAtXHUyZGZmXHUzMDJhLVx1MzAyZlx1MzA5OVx1MzA5YVx1YTYyMC1cdWE2MjlcdWE2NmZcdWE2NzQtXHVhNjdkXHVhNjllXHVhNjlmXHVhNmYwXHVhNmYxXHVhODAyXHVhODA2XHVhODBiXHVhODIzLVx1YTgyN1x1YTgyY1x1YTg4MFx1YTg4MVx1YThiNC1cdWE4YzVcdWE4ZDAtXHVhOGQ5XHVhOGUwLVx1YThmMVx1YThmZi1cdWE5MDlcdWE5MjYtXHVhOTJkXHVhOTQ3LVx1YTk1M1x1YTk4MC1cdWE5ODNcdWE5YjMtXHVhOWMwXHVhOWQwLVx1YTlkOVx1YTllNVx1YTlmMC1cdWE5ZjlcdWFhMjktXHVhYTM2XHVhYTQzXHVhYTRjXHVhYTRkXHVhYTUwLVx1YWE1OVx1YWE3Yi1cdWFhN2RcdWFhYjBcdWFhYjItXHVhYWI0XHVhYWI3XHVhYWI4XHVhYWJlXHVhYWJmXHVhYWMxXHVhYWViLVx1YWFlZlx1YWFmNVx1YWFmNlx1YWJlMy1cdWFiZWFcdWFiZWNcdWFiZWRcdWFiZjAtXHVhYmY5XHVmYjFlXHVmZTAwLVx1ZmUwZlx1ZmUyMC1cdWZlMmZcdWZlMzNcdWZlMzRcdWZlNGQtXHVmZTRmXHVmZjEwLVx1ZmYxOVx1ZmYzZiI7CgogIHZhciBub25BU0NJSWlkZW50aWZpZXJTdGFydCA9IG5ldyBSZWdFeHAoIlsiICsgbm9uQVNDSUlpZGVudGlmaWVyU3RhcnRDaGFycyArICJdIik7CiAgdmFyIG5vbkFTQ0lJaWRlbnRpZmllciA9IG5ldyBSZWdFeHAoIlsiICsgbm9uQVNDSUlpZGVudGlmaWVyU3RhcnRDaGFycyArIG5vbkFTQ0lJaWRlbnRpZmllckNoYXJzICsgIl0iKTsKCiAgbm9uQVNDSUlpZGVudGlmaWVyU3RhcnRDaGFycyA9IG5vbkFTQ0lJaWRlbnRpZmllckNoYXJzID0gbnVsbDsKCiAgLy8gVGhlc2UgYXJlIGEgcnVuLWxlbmd0aCBhbmQgb2Zmc2V0IGVuY29kZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlCiAgLy8gPjB4ZmZmZiBjb2RlIHBvaW50cyB0aGF0IGFyZSBhIHZhbGlkIHBhcnQgb2YgaWRlbnRpZmllcnMuIFRoZQogIC8vIG9mZnNldCBzdGFydHMgYXQgMHgxMDAwMCwgYW5kIGVhY2ggcGFpciBvZiBudW1iZXJzIHJlcHJlc2VudHMgYW4KICAvLyBvZmZzZXQgdG8gdGhlIG5leHQgcmFuZ2UsIGFuZCB0aGVuIGEgc2l6ZSBvZiB0aGUgcmFuZ2UuIFRoZXkgd2VyZQogIC8vIGdlbmVyYXRlZCBieSBiaW4vZ2VuZXJhdGUtaWRlbnRpZmllci1yZWdleC5qcwoKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tbWEtc3BhY2luZwogIHZhciBhc3RyYWxJZGVudGlmaWVyU3RhcnRDb2RlcyA9IFswLDExLDIsMjUsMiwxOCwyLDEsMiwxNCwzLDEzLDM1LDEyMiw3MCw1MiwyNjgsMjgsNCw0OCw0OCwzMSwxNCwyOSw2LDM3LDExLDI5LDMsMzUsNSw3LDIsNCw0MywxNTcsMTksMzUsNSwzNSw1LDM5LDksNTEsMTMsMTAsMiwxNCwyLDYsMiwxLDIsMTAsMiwxNCwyLDYsMiwxLDY4LDMxMCwxMCwyMSwxMSw3LDI1LDUsMiw0MSwyLDgsNzAsNSwzLDAsMiw0MywyLDEsNCwwLDMsMjIsMTEsMjIsMTAsMzAsNjYsMTgsMiwxLDExLDIxLDExLDI1LDcxLDU1LDcsMSw2NSwwLDE2LDMsMiwyLDIsMjgsNDMsMjgsNCwyOCwzNiw3LDIsMjcsMjgsNTMsMTEsMjEsMTEsMTgsMTQsMTcsMTExLDcyLDU2LDUwLDE0LDUwLDE0LDM1LDM0OSw0MSw3LDEsNzksMjgsMTEsMCw5LDIxLDQzLDE3LDQ3LDIwLDI4LDIyLDEzLDUyLDU4LDEsMywwLDE0LDQ0LDMzLDI0LDI3LDM1LDMwLDAsMywwLDksMzQsNCwwLDEzLDQ3LDE1LDMsMjIsMCwyLDAsMzYsMTcsMiwyNCw4NSw2LDIsMCwyLDMsMiwxNCwyLDksOCw0NiwzOSw3LDMsMSwzLDIxLDIsNiwyLDEsMiw0LDQsMCwxOSwwLDEzLDQsMTU5LDUyLDE5LDMsMjEsMiwzMSw0NywyMSwxLDIsMCwxODUsNDYsNDIsMywzNyw0NywyMSwwLDYwLDQyLDE0LDAsNzIsMjYsMzgsNiwxODYsNDMsMTE3LDYzLDMyLDcsMywwLDMsNywyLDEsMiwyMywxNiwwLDIsMCw5NSw3LDMsMzgsMTcsMCwyLDAsMjksMCwxMSwzOSw4LDAsMjIsMCwxMiw0NSwyMCwwLDE5LDcyLDI2NCw4LDIsMzYsMTgsMCw1MCwyOSwxMTMsNiwyLDEsMiwzNywyMiwwLDI2LDUsMiwxLDIsMzEsMTUsMCwzMjgsMTgsMTkwLDAsODAsOTIxLDEwMywxMTAsMTgsMTk1LDI2MzcsOTYsMTYsMTA3MCw0MDUwLDU4Miw4NjM0LDU2OCw4LDMwLDE4LDc4LDE4LDI5LDE5LDQ3LDE3LDMsMzIsMjAsNiwxOCw2ODksNjMsMTI5LDc0LDYsMCw2NywxMiw2NSwxLDIsMCwyOSw2MTM1LDksMTIzNyw0Myw4LDg5MzYsMywyLDYsMiwxLDIsMjkwLDQ2LDIsMTgsMyw5LDM5NSwyMzA5LDEwNiw2LDEyLDQsOCw4LDksNTk5MSw4NCwyLDcwLDIsMSwzLDAsMywxLDMsMywyLDExLDIsMCwyLDYsMiw2NCwyLDMsMyw3LDIsNiwyLDI3LDIsMywyLDQsMiwwLDQsNiwyLDMzOSwzLDI0LDIsMjQsMiwzMCwyLDI0LDIsMzAsMiwyNCwyLDMwLDIsMjQsMiwzMCwyLDI0LDIsNywxODQ1LDMwLDQ4Miw0NCwxMSw2LDE3LDAsMzIyLDI5LDE5LDQzLDEyNjksNiwyLDMsMiwxLDIsMTQsMiwxOTYsNjAsNjcsOCwwLDEyMDUsMywyLDI2LDIsMSwyLDAsMywwLDIsOSwyLDMsMiwwLDIsMCw3LDAsNSwwLDIsMCwyLDAsMiwyLDIsMSwyLDAsMywwLDIsMCwyLDAsMiwwLDIsMCwyLDEsMiwwLDMsMywyLDYsMiwzLDIsMywyLDAsMiw5LDIsMTYsNiwyLDIsNCwyLDE2LDQ0MjEsNDI3MTksMzMsNDE1Miw4LDIyMSwzLDU3NjEsMTUsNzQ3MiwzMTA0LDU0MSwxNTA3LDQ5MzhdOwoKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tbWEtc3BhY2luZwogIHZhciBhc3RyYWxJZGVudGlmaWVyQ29kZXMgPSBbNTA5LDAsMjI3LDAsMTUwLDQsMjk0LDksMTM2OCwyLDIsMSw2LDMsNDEsMiw1LDAsMTY2LDEsNTc0LDMsOSw5LDM3MCwxLDE1NCwxMCw1MCwzLDEyMywyLDU0LDE0LDMyLDEwLDMsMSwxMSwzLDQ2LDEwLDgsMCw0Niw5LDcsMiwzNywxMywyLDksNiwxLDQ1LDAsMTMsMiw0OSwxMyw5LDMsMiwxMSw4MywxMSw3LDAsMTYxLDExLDYsOSw3LDMsNTYsMSwyLDYsMywxLDMsMiwxMCwwLDExLDEsMyw2LDQsNCwxOTMsMTcsMTAsOSw1LDAsODIsMTksMTMsOSwyMTQsNiwzLDgsMjgsMSw4MywxNiwxNiw5LDgyLDEyLDksOSw4NCwxNCw1LDksMjQzLDE0LDE2Niw5LDcxLDUsMiwxLDMsMywyLDAsMiwxLDEzLDksMTIwLDYsMyw2LDQsMCwyOSw5LDQxLDYsMiwzLDksMCwxMCwxMCw0NywxNSw0MDYsNywyLDcsMTcsOSw1NywyMSwyLDEzLDEyMyw1LDQsMCwyLDEsMiw2LDIsMCw5LDksNDksNCwyLDEsMiw0LDksOSwzMzAsMywxOTMwNiw5LDg3LDksMzksNCw2MCw2LDI2LDksMTAxNCwwLDIsNTQsOCwzLDgyLDAsMTIsMSwxOTYyOCwxLDQ3MDYsNDUsMywyMiw1NDMsNCw0LDUsOSw3LDMsNiwzMSwzLDE0OSwyLDE0MTgsNDksNTEzLDU0LDUsNDksOSwwLDE1LDAsMjMsNCwyLDE0LDEzNjEsNiwyLDE2LDMsNiwyLDEsMiw0LDI2Miw2LDEwLDksMzU3LDAsNjIsMTMsMTQ5NSw2LDExMCw2LDYsOSw0NzU5LDksNzg3NzE5LDIzOV07CgogIC8vIFRoaXMgaGFzIGEgY29tcGxleGl0eSBsaW5lYXIgdG8gdGhlIHZhbHVlIG9mIHRoZSBjb2RlLiBUaGUKICAvLyBhc3N1bXB0aW9uIGlzIHRoYXQgbG9va2luZyB1cCBhc3RyYWwgaWRlbnRpZmllciBjaGFyYWN0ZXJzIGlzCiAgLy8gcmFyZS4KICBmdW5jdGlvbiBpc0luQXN0cmFsU2V0KGNvZGUsIHNldCkgewogICAgdmFyIHBvcyA9IDB4MTAwMDA7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNldC5sZW5ndGg7IGkgKz0gMikgewogICAgICBwb3MgKz0gc2V0W2ldOwogICAgICBpZiAocG9zID4gY29kZSkgeyByZXR1cm4gZmFsc2UgfQogICAgICBwb3MgKz0gc2V0W2kgKyAxXTsKICAgICAgaWYgKHBvcyA+PSBjb2RlKSB7IHJldHVybiB0cnVlIH0KICAgIH0KICB9CgogIC8vIFRlc3Qgd2hldGhlciBhIGdpdmVuIGNoYXJhY3RlciBjb2RlIHN0YXJ0cyBhbiBpZGVudGlmaWVyLgoKICBmdW5jdGlvbiBpc0lkZW50aWZpZXJTdGFydChjb2RlLCBhc3RyYWwpIHsKICAgIGlmIChjb2RlIDwgNjUpIHsgcmV0dXJuIGNvZGUgPT09IDM2IH0KICAgIGlmIChjb2RlIDwgOTEpIHsgcmV0dXJuIHRydWUgfQogICAgaWYgKGNvZGUgPCA5NykgeyByZXR1cm4gY29kZSA9PT0gOTUgfQogICAgaWYgKGNvZGUgPCAxMjMpIHsgcmV0dXJuIHRydWUgfQogICAgaWYgKGNvZGUgPD0gMHhmZmZmKSB7IHJldHVybiBjb2RlID49IDB4YWEgJiYgbm9uQVNDSUlpZGVudGlmaWVyU3RhcnQudGVzdChTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpKSB9CiAgICBpZiAoYXN0cmFsID09PSBmYWxzZSkgeyByZXR1cm4gZmFsc2UgfQogICAgcmV0dXJuIGlzSW5Bc3RyYWxTZXQoY29kZSwgYXN0cmFsSWRlbnRpZmllclN0YXJ0Q29kZXMpCiAgfQoKICAvLyBUZXN0IHdoZXRoZXIgYSBnaXZlbiBjaGFyYWN0ZXIgaXMgcGFydCBvZiBhbiBpZGVudGlmaWVyLgoKICBmdW5jdGlvbiBpc0lkZW50aWZpZXJDaGFyKGNvZGUsIGFzdHJhbCkgewogICAgaWYgKGNvZGUgPCA0OCkgeyByZXR1cm4gY29kZSA9PT0gMzYgfQogICAgaWYgKGNvZGUgPCA1OCkgeyByZXR1cm4gdHJ1ZSB9CiAgICBpZiAoY29kZSA8IDY1KSB7IHJldHVybiBmYWxzZSB9CiAgICBpZiAoY29kZSA8IDkxKSB7IHJldHVybiB0cnVlIH0KICAgIGlmIChjb2RlIDwgOTcpIHsgcmV0dXJuIGNvZGUgPT09IDk1IH0KICAgIGlmIChjb2RlIDwgMTIzKSB7IHJldHVybiB0cnVlIH0KICAgIGlmIChjb2RlIDw9IDB4ZmZmZikgeyByZXR1cm4gY29kZSA+PSAweGFhICYmIG5vbkFTQ0lJaWRlbnRpZmllci50ZXN0KFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSkpIH0KICAgIGlmIChhc3RyYWwgPT09IGZhbHNlKSB7IHJldHVybiBmYWxzZSB9CiAgICByZXR1cm4gaXNJbkFzdHJhbFNldChjb2RlLCBhc3RyYWxJZGVudGlmaWVyU3RhcnRDb2RlcykgfHwgaXNJbkFzdHJhbFNldChjb2RlLCBhc3RyYWxJZGVudGlmaWVyQ29kZXMpCiAgfQoKICAvLyAjIyBUb2tlbiB0eXBlcwoKICAvLyBUaGUgYXNzaWdubWVudCBvZiBmaW5lLWdyYWluZWQsIGluZm9ybWF0aW9uLWNhcnJ5aW5nIHR5cGUgb2JqZWN0cwogIC8vIGFsbG93cyB0aGUgdG9rZW5pemVyIHRvIHN0b3JlIHRoZSBpbmZvcm1hdGlvbiBpdCBoYXMgYWJvdXQgYQogIC8vIHRva2VuIGluIGEgd2F5IHRoYXQgaXMgdmVyeSBjaGVhcCBmb3IgdGhlIHBhcnNlciB0byBsb29rIHVwLgoKICAvLyBBbGwgdG9rZW4gdHlwZSB2YXJpYWJsZXMgc3RhcnQgd2l0aCBhbiB1bmRlcnNjb3JlLCB0byBtYWtlIHRoZW0KICAvLyBlYXN5IHRvIHJlY29nbml6ZS4KCiAgLy8gVGhlIGBiZWZvcmVFeHByYCBwcm9wZXJ0eSBpcyB1c2VkIHRvIGRpc2FtYmlndWF0ZSBiZXR3ZWVuIHJlZ3VsYXIKICAvLyBleHByZXNzaW9ucyBhbmQgZGl2aXNpb25zLiBJdCBpcyBzZXQgb24gYWxsIHRva2VuIHR5cGVzIHRoYXQgY2FuCiAgLy8gYmUgZm9sbG93ZWQgYnkgYW4gZXhwcmVzc2lvbiAodGh1cywgYSBzbGFzaCBhZnRlciB0aGVtIHdvdWxkIGJlIGEKICAvLyByZWd1bGFyIGV4cHJlc3Npb24pLgogIC8vCiAgLy8gVGhlIGBzdGFydHNFeHByYCBwcm9wZXJ0eSBpcyB1c2VkIHRvIGNoZWNrIGlmIHRoZSB0b2tlbiBlbmRzIGEKICAvLyBgeWllbGRgIGV4cHJlc3Npb24uIEl0IGlzIHNldCBvbiBhbGwgdG9rZW4gdHlwZXMgdGhhdCBlaXRoZXIgY2FuCiAgLy8gZGlyZWN0bHkgc3RhcnQgYW4gZXhwcmVzc2lvbiAobGlrZSBhIHF1b3RhdGlvbiBtYXJrKSBvciBjYW4KICAvLyBjb250aW51ZSBhbiBleHByZXNzaW9uIChsaWtlIHRoZSBib2R5IG9mIGEgc3RyaW5nKS4KICAvLwogIC8vIGBpc0xvb3BgIG1hcmtzIGEga2V5d29yZCBhcyBzdGFydGluZyBhIGxvb3AsIHdoaWNoIGlzIGltcG9ydGFudAogIC8vIHRvIGtub3cgd2hlbiBwYXJzaW5nIGEgbGFiZWwsIGluIG9yZGVyIHRvIGFsbG93IG9yIGRpc2FsbG93CiAgLy8gY29udGludWUganVtcHMgdG8gdGhhdCBsYWJlbC4KCiAgdmFyIFRva2VuVHlwZSA9IGZ1bmN0aW9uIFRva2VuVHlwZShsYWJlbCwgY29uZikgewogICAgaWYgKCBjb25mID09PSB2b2lkIDAgKSBjb25mID0ge307CgogICAgdGhpcy5sYWJlbCA9IGxhYmVsOwogICAgdGhpcy5rZXl3b3JkID0gY29uZi5rZXl3b3JkOwogICAgdGhpcy5iZWZvcmVFeHByID0gISFjb25mLmJlZm9yZUV4cHI7CiAgICB0aGlzLnN0YXJ0c0V4cHIgPSAhIWNvbmYuc3RhcnRzRXhwcjsKICAgIHRoaXMuaXNMb29wID0gISFjb25mLmlzTG9vcDsKICAgIHRoaXMuaXNBc3NpZ24gPSAhIWNvbmYuaXNBc3NpZ247CiAgICB0aGlzLnByZWZpeCA9ICEhY29uZi5wcmVmaXg7CiAgICB0aGlzLnBvc3RmaXggPSAhIWNvbmYucG9zdGZpeDsKICAgIHRoaXMuYmlub3AgPSBjb25mLmJpbm9wIHx8IG51bGw7CiAgICB0aGlzLnVwZGF0ZUNvbnRleHQgPSBudWxsOwogIH07CgogIGZ1bmN0aW9uIGJpbm9wKG5hbWUsIHByZWMpIHsKICAgIHJldHVybiBuZXcgVG9rZW5UeXBlKG5hbWUsIHtiZWZvcmVFeHByOiB0cnVlLCBiaW5vcDogcHJlY30pCiAgfQogIHZhciBiZWZvcmVFeHByID0ge2JlZm9yZUV4cHI6IHRydWV9LCBzdGFydHNFeHByID0ge3N0YXJ0c0V4cHI6IHRydWV9OwoKICAvLyBNYXAga2V5d29yZCBuYW1lcyB0byB0b2tlbiB0eXBlcy4KCiAgdmFyIGtleXdvcmRzID0ge307CgogIC8vIFN1Y2NpbmN0IGRlZmluaXRpb25zIG9mIGtleXdvcmQgdG9rZW4gdHlwZXMKICBmdW5jdGlvbiBrdyhuYW1lLCBvcHRpb25zKSB7CiAgICBpZiAoIG9wdGlvbnMgPT09IHZvaWQgMCApIG9wdGlvbnMgPSB7fTsKCiAgICBvcHRpb25zLmtleXdvcmQgPSBuYW1lOwogICAgcmV0dXJuIGtleXdvcmRzW25hbWVdID0gbmV3IFRva2VuVHlwZShuYW1lLCBvcHRpb25zKQogIH0KCiAgdmFyIHR5cGVzJDEgPSB7CiAgICBudW06IG5ldyBUb2tlblR5cGUoIm51bSIsIHN0YXJ0c0V4cHIpLAogICAgcmVnZXhwOiBuZXcgVG9rZW5UeXBlKCJyZWdleHAiLCBzdGFydHNFeHByKSwKICAgIHN0cmluZzogbmV3IFRva2VuVHlwZSgic3RyaW5nIiwgc3RhcnRzRXhwciksCiAgICBuYW1lOiBuZXcgVG9rZW5UeXBlKCJuYW1lIiwgc3RhcnRzRXhwciksCiAgICBwcml2YXRlSWQ6IG5ldyBUb2tlblR5cGUoInByaXZhdGVJZCIsIHN0YXJ0c0V4cHIpLAogICAgZW9mOiBuZXcgVG9rZW5UeXBlKCJlb2YiKSwKCiAgICAvLyBQdW5jdHVhdGlvbiB0b2tlbiB0eXBlcy4KICAgIGJyYWNrZXRMOiBuZXcgVG9rZW5UeXBlKCJbIiwge2JlZm9yZUV4cHI6IHRydWUsIHN0YXJ0c0V4cHI6IHRydWV9KSwKICAgIGJyYWNrZXRSOiBuZXcgVG9rZW5UeXBlKCJdIiksCiAgICBicmFjZUw6IG5ldyBUb2tlblR5cGUoInsiLCB7YmVmb3JlRXhwcjogdHJ1ZSwgc3RhcnRzRXhwcjogdHJ1ZX0pLAogICAgYnJhY2VSOiBuZXcgVG9rZW5UeXBlKCJ9IiksCiAgICBwYXJlbkw6IG5ldyBUb2tlblR5cGUoIigiLCB7YmVmb3JlRXhwcjogdHJ1ZSwgc3RhcnRzRXhwcjogdHJ1ZX0pLAogICAgcGFyZW5SOiBuZXcgVG9rZW5UeXBlKCIpIiksCiAgICBjb21tYTogbmV3IFRva2VuVHlwZSgiLCIsIGJlZm9yZUV4cHIpLAogICAgc2VtaTogbmV3IFRva2VuVHlwZSgiOyIsIGJlZm9yZUV4cHIpLAogICAgY29sb246IG5ldyBUb2tlblR5cGUoIjoiLCBiZWZvcmVFeHByKSwKICAgIGRvdDogbmV3IFRva2VuVHlwZSgiLiIpLAogICAgcXVlc3Rpb246IG5ldyBUb2tlblR5cGUoIj8iLCBiZWZvcmVFeHByKSwKICAgIHF1ZXN0aW9uRG90OiBuZXcgVG9rZW5UeXBlKCI/LiIpLAogICAgYXJyb3c6IG5ldyBUb2tlblR5cGUoIj0+IiwgYmVmb3JlRXhwciksCiAgICB0ZW1wbGF0ZTogbmV3IFRva2VuVHlwZSgidGVtcGxhdGUiKSwKICAgIGludmFsaWRUZW1wbGF0ZTogbmV3IFRva2VuVHlwZSgiaW52YWxpZFRlbXBsYXRlIiksCiAgICBlbGxpcHNpczogbmV3IFRva2VuVHlwZSgiLi4uIiwgYmVmb3JlRXhwciksCiAgICBiYWNrUXVvdGU6IG5ldyBUb2tlblR5cGUoImAiLCBzdGFydHNFeHByKSwKICAgIGRvbGxhckJyYWNlTDogbmV3IFRva2VuVHlwZSgiJHsiLCB7YmVmb3JlRXhwcjogdHJ1ZSwgc3RhcnRzRXhwcjogdHJ1ZX0pLAoKICAgIC8vIE9wZXJhdG9ycy4gVGhlc2UgY2Fycnkgc2V2ZXJhbCBraW5kcyBvZiBwcm9wZXJ0aWVzIHRvIGhlbHAgdGhlCiAgICAvLyBwYXJzZXIgdXNlIHRoZW0gcHJvcGVybHkgKHRoZSBwcmVzZW5jZSBvZiB0aGVzZSBwcm9wZXJ0aWVzIGlzCiAgICAvLyB3aGF0IGNhdGVnb3JpemVzIHRoZW0gYXMgb3BlcmF0b3JzKS4KICAgIC8vCiAgICAvLyBgYmlub3BgLCB3aGVuIHByZXNlbnQsIHNwZWNpZmllcyB0aGF0IHRoaXMgb3BlcmF0b3IgaXMgYSBiaW5hcnkKICAgIC8vIG9wZXJhdG9yLCBhbmQgd2lsbCByZWZlciB0byBpdHMgcHJlY2VkZW5jZS4KICAgIC8vCiAgICAvLyBgcHJlZml4YCBhbmQgYHBvc3RmaXhgIG1hcmsgdGhlIG9wZXJhdG9yIGFzIGEgcHJlZml4IG9yIHBvc3RmaXgKICAgIC8vIHVuYXJ5IG9wZXJhdG9yLgogICAgLy8KICAgIC8vIGBpc0Fzc2lnbmAgbWFya3MgYWxsIG9mIGA9YCwgYCs9YCwgYC09YCBldGNldGVyYSwgd2hpY2ggYWN0IGFzCiAgICAvLyBiaW5hcnkgb3BlcmF0b3JzIHdpdGggYSB2ZXJ5IGxvdyBwcmVjZWRlbmNlLCB0aGF0IHNob3VsZCByZXN1bHQKICAgIC8vIGluIEFzc2lnbm1lbnRFeHByZXNzaW9uIG5vZGVzLgoKICAgIGVxOiBuZXcgVG9rZW5UeXBlKCI9Iiwge2JlZm9yZUV4cHI6IHRydWUsIGlzQXNzaWduOiB0cnVlfSksCiAgICBhc3NpZ246IG5ldyBUb2tlblR5cGUoIl89Iiwge2JlZm9yZUV4cHI6IHRydWUsIGlzQXNzaWduOiB0cnVlfSksCiAgICBpbmNEZWM6IG5ldyBUb2tlblR5cGUoIisrLy0tIiwge3ByZWZpeDogdHJ1ZSwgcG9zdGZpeDogdHJ1ZSwgc3RhcnRzRXhwcjogdHJ1ZX0pLAogICAgcHJlZml4OiBuZXcgVG9rZW5UeXBlKCIhL34iLCB7YmVmb3JlRXhwcjogdHJ1ZSwgcHJlZml4OiB0cnVlLCBzdGFydHNFeHByOiB0cnVlfSksCiAgICBsb2dpY2FsT1I6IGJpbm9wKCJ8fCIsIDEpLAogICAgbG9naWNhbEFORDogYmlub3AoIiYmIiwgMiksCiAgICBiaXR3aXNlT1I6IGJpbm9wKCJ8IiwgMyksCiAgICBiaXR3aXNlWE9SOiBiaW5vcCgiXiIsIDQpLAogICAgYml0d2lzZUFORDogYmlub3AoIiYiLCA1KSwKICAgIGVxdWFsaXR5OiBiaW5vcCgiPT0vIT0vPT09LyE9PSIsIDYpLAogICAgcmVsYXRpb25hbDogYmlub3AoIjwvPi88PS8+PSIsIDcpLAogICAgYml0U2hpZnQ6IGJpbm9wKCI8PC8+Pi8+Pj4iLCA4KSwKICAgIHBsdXNNaW46IG5ldyBUb2tlblR5cGUoIisvLSIsIHtiZWZvcmVFeHByOiB0cnVlLCBiaW5vcDogOSwgcHJlZml4OiB0cnVlLCBzdGFydHNFeHByOiB0cnVlfSksCiAgICBtb2R1bG86IGJpbm9wKCIlIiwgMTApLAogICAgc3RhcjogYmlub3AoIioiLCAxMCksCiAgICBzbGFzaDogYmlub3AoIi8iLCAxMCksCiAgICBzdGFyc3RhcjogbmV3IFRva2VuVHlwZSgiKioiLCB7YmVmb3JlRXhwcjogdHJ1ZX0pLAogICAgY29hbGVzY2U6IGJpbm9wKCI/PyIsIDEpLAoKICAgIC8vIEtleXdvcmQgdG9rZW4gdHlwZXMuCiAgICBfYnJlYWs6IGt3KCJicmVhayIpLAogICAgX2Nhc2U6IGt3KCJjYXNlIiwgYmVmb3JlRXhwciksCiAgICBfY2F0Y2g6IGt3KCJjYXRjaCIpLAogICAgX2NvbnRpbnVlOiBrdygiY29udGludWUiKSwKICAgIF9kZWJ1Z2dlcjoga3coImRlYnVnZ2VyIiksCiAgICBfZGVmYXVsdDoga3coImRlZmF1bHQiLCBiZWZvcmVFeHByKSwKICAgIF9kbzoga3coImRvIiwge2lzTG9vcDogdHJ1ZSwgYmVmb3JlRXhwcjogdHJ1ZX0pLAogICAgX2Vsc2U6IGt3KCJlbHNlIiwgYmVmb3JlRXhwciksCiAgICBfZmluYWxseToga3coImZpbmFsbHkiKSwKICAgIF9mb3I6IGt3KCJmb3IiLCB7aXNMb29wOiB0cnVlfSksCiAgICBfZnVuY3Rpb246IGt3KCJmdW5jdGlvbiIsIHN0YXJ0c0V4cHIpLAogICAgX2lmOiBrdygiaWYiKSwKICAgIF9yZXR1cm46IGt3KCJyZXR1cm4iLCBiZWZvcmVFeHByKSwKICAgIF9zd2l0Y2g6IGt3KCJzd2l0Y2giKSwKICAgIF90aHJvdzoga3coInRocm93IiwgYmVmb3JlRXhwciksCiAgICBfdHJ5OiBrdygidHJ5IiksCiAgICBfdmFyOiBrdygidmFyIiksCiAgICBfY29uc3Q6IGt3KCJjb25zdCIpLAogICAgX3doaWxlOiBrdygid2hpbGUiLCB7aXNMb29wOiB0cnVlfSksCiAgICBfd2l0aDoga3coIndpdGgiKSwKICAgIF9uZXc6IGt3KCJuZXciLCB7YmVmb3JlRXhwcjogdHJ1ZSwgc3RhcnRzRXhwcjogdHJ1ZX0pLAogICAgX3RoaXM6IGt3KCJ0aGlzIiwgc3RhcnRzRXhwciksCiAgICBfc3VwZXI6IGt3KCJzdXBlciIsIHN0YXJ0c0V4cHIpLAogICAgX2NsYXNzOiBrdygiY2xhc3MiLCBzdGFydHNFeHByKSwKICAgIF9leHRlbmRzOiBrdygiZXh0ZW5kcyIsIGJlZm9yZUV4cHIpLAogICAgX2V4cG9ydDoga3coImV4cG9ydCIpLAogICAgX2ltcG9ydDoga3coImltcG9ydCIsIHN0YXJ0c0V4cHIpLAogICAgX251bGw6IGt3KCJudWxsIiwgc3RhcnRzRXhwciksCiAgICBfdHJ1ZToga3coInRydWUiLCBzdGFydHNFeHByKSwKICAgIF9mYWxzZToga3coImZhbHNlIiwgc3RhcnRzRXhwciksCiAgICBfaW46IGt3KCJpbiIsIHtiZWZvcmVFeHByOiB0cnVlLCBiaW5vcDogN30pLAogICAgX2luc3RhbmNlb2Y6IGt3KCJpbnN0YW5jZW9mIiwge2JlZm9yZUV4cHI6IHRydWUsIGJpbm9wOiA3fSksCiAgICBfdHlwZW9mOiBrdygidHlwZW9mIiwge2JlZm9yZUV4cHI6IHRydWUsIHByZWZpeDogdHJ1ZSwgc3RhcnRzRXhwcjogdHJ1ZX0pLAogICAgX3ZvaWQ6IGt3KCJ2b2lkIiwge2JlZm9yZUV4cHI6IHRydWUsIHByZWZpeDogdHJ1ZSwgc3RhcnRzRXhwcjogdHJ1ZX0pLAogICAgX2RlbGV0ZToga3coImRlbGV0ZSIsIHtiZWZvcmVFeHByOiB0cnVlLCBwcmVmaXg6IHRydWUsIHN0YXJ0c0V4cHI6IHRydWV9KQogIH07CgogIC8vIE1hdGNoZXMgYSB3aG9sZSBsaW5lIGJyZWFrICh3aGVyZSBDUkxGIGlzIGNvbnNpZGVyZWQgYSBzaW5nbGUKICAvLyBsaW5lIGJyZWFrKS4gVXNlZCB0byBjb3VudCBsaW5lcy4KCiAgdmFyIGxpbmVCcmVhayA9IC9cclxuP3xcbnxcdTIwMjh8XHUyMDI5LzsKICB2YXIgbGluZUJyZWFrRyA9IG5ldyBSZWdFeHAobGluZUJyZWFrLnNvdXJjZSwgImciKTsKCiAgZnVuY3Rpb24gaXNOZXdMaW5lKGNvZGUpIHsKICAgIHJldHVybiBjb2RlID09PSAxMCB8fCBjb2RlID09PSAxMyB8fCBjb2RlID09PSAweDIwMjggfHwgY29kZSA9PT0gMHgyMDI5CiAgfQoKICBmdW5jdGlvbiBuZXh0TGluZUJyZWFrKGNvZGUsIGZyb20sIGVuZCkgewogICAgaWYgKCBlbmQgPT09IHZvaWQgMCApIGVuZCA9IGNvZGUubGVuZ3RoOwoKICAgIGZvciAodmFyIGkgPSBmcm9tOyBpIDwgZW5kOyBpKyspIHsKICAgICAgdmFyIG5leHQgPSBjb2RlLmNoYXJDb2RlQXQoaSk7CiAgICAgIGlmIChpc05ld0xpbmUobmV4dCkpCiAgICAgICAgeyByZXR1cm4gaSA8IGVuZCAtIDEgJiYgbmV4dCA9PT0gMTMgJiYgY29kZS5jaGFyQ29kZUF0KGkgKyAxKSA9PT0gMTAgPyBpICsgMiA6IGkgKyAxIH0KICAgIH0KICAgIHJldHVybiAtMQogIH0KCiAgdmFyIG5vbkFTQ0lJd2hpdGVzcGFjZSA9IC9bXHUxNjgwXHUyMDAwLVx1MjAwYVx1MjAyZlx1MjA1Zlx1MzAwMFx1ZmVmZl0vOwoKICB2YXIgc2tpcFdoaXRlU3BhY2UgPSAvKD86XHN8XC9cLy4qfFwvXCpbXl0qP1wqXC8pKi9nOwoKICB2YXIgcmVmID0gT2JqZWN0LnByb3RvdHlwZTsKICB2YXIgaGFzT3duUHJvcGVydHkgPSByZWYuaGFzT3duUHJvcGVydHk7CiAgdmFyIHRvU3RyaW5nID0gcmVmLnRvU3RyaW5nOwoKICB2YXIgaGFzT3duID0gT2JqZWN0Lmhhc093biB8fCAoZnVuY3Rpb24gKG9iaiwgcHJvcE5hbWUpIHsgcmV0dXJuICgKICAgIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wTmFtZSkKICApOyB9KTsKCiAgdmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IChmdW5jdGlvbiAob2JqKSB7IHJldHVybiAoCiAgICB0b1N0cmluZy5jYWxsKG9iaikgPT09ICJbb2JqZWN0IEFycmF5XSIKICApOyB9KTsKCiAgZnVuY3Rpb24gd29yZHNSZWdleHAod29yZHMpIHsKICAgIHJldHVybiBuZXcgUmVnRXhwKCJeKD86IiArIHdvcmRzLnJlcGxhY2UoLyAvZywgInwiKSArICIpJCIpCiAgfQoKICB2YXIgbG9uZVN1cnJvZ2F0ZSA9IC8oPzpbXHVEODAwLVx1REJGRl0oPyFbXHVEQzAwLVx1REZGRl0pfCg/OlteXHVEODAwLVx1REJGRl18XilbXHVEQzAwLVx1REZGRl0pLzsKCiAgLy8gVGhlc2UgYXJlIHVzZWQgd2hlbiBgb3B0aW9ucy5sb2NhdGlvbnNgIGlzIG9uLCBmb3IgdGhlCiAgLy8gYHN0YXJ0TG9jYCBhbmQgYGVuZExvY2AgcHJvcGVydGllcy4KCiAgdmFyIFBvc2l0aW9uID0gZnVuY3Rpb24gUG9zaXRpb24obGluZSwgY29sKSB7CiAgICB0aGlzLmxpbmUgPSBsaW5lOwogICAgdGhpcy5jb2x1bW4gPSBjb2w7CiAgfTsKCiAgUG9zaXRpb24ucHJvdG90eXBlLm9mZnNldCA9IGZ1bmN0aW9uIG9mZnNldCAobikgewogICAgcmV0dXJuIG5ldyBQb3NpdGlvbih0aGlzLmxpbmUsIHRoaXMuY29sdW1uICsgbikKICB9OwoKICB2YXIgU291cmNlTG9jYXRpb24gPSBmdW5jdGlvbiBTb3VyY2VMb2NhdGlvbihwLCBzdGFydCwgZW5kKSB7CiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7CiAgICB0aGlzLmVuZCA9IGVuZDsKICAgIGlmIChwLnNvdXJjZUZpbGUgIT09IG51bGwpIHsgdGhpcy5zb3VyY2UgPSBwLnNvdXJjZUZpbGU7IH0KICB9OwoKICAvLyBUaGUgYGdldExpbmVJbmZvYCBmdW5jdGlvbiBpcyBtb3N0bHkgdXNlZnVsIHdoZW4gdGhlCiAgLy8gYGxvY2F0aW9uc2Agb3B0aW9uIGlzIG9mZiAoZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMpIGFuZCB5b3UKICAvLyB3YW50IHRvIGZpbmQgdGhlIGxpbmUvY29sdW1uIHBvc2l0aW9uIGZvciBhIGdpdmVuIGNoYXJhY3RlcgogIC8vIG9mZnNldC4gYGlucHV0YCBzaG91bGQgYmUgdGhlIGNvZGUgc3RyaW5nIHRoYXQgdGhlIG9mZnNldCByZWZlcnMKICAvLyBpbnRvLgoKICBmdW5jdGlvbiBnZXRMaW5lSW5mbyhpbnB1dCwgb2Zmc2V0KSB7CiAgICBmb3IgKHZhciBsaW5lID0gMSwgY3VyID0gMDs7KSB7CiAgICAgIHZhciBuZXh0QnJlYWsgPSBuZXh0TGluZUJyZWFrKGlucHV0LCBjdXIsIG9mZnNldCk7CiAgICAgIGlmIChuZXh0QnJlYWsgPCAwKSB7IHJldHVybiBuZXcgUG9zaXRpb24obGluZSwgb2Zmc2V0IC0gY3VyKSB9CiAgICAgICsrbGluZTsKICAgICAgY3VyID0gbmV4dEJyZWFrOwogICAgfQogIH0KCiAgLy8gQSBzZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBnaXZlbiB0byBjb25maWd1cmUgdGhlIHBhcnNlciBwcm9jZXNzLgogIC8vIFRoZXNlIG9wdGlvbnMgYXJlIHJlY29nbml6ZWQgKG9ubHkgYGVjbWFWZXJzaW9uYCBpcyByZXF1aXJlZCk6CgogIHZhciBkZWZhdWx0T3B0aW9ucyA9IHsKICAgIC8vIGBlY21hVmVyc2lvbmAgaW5kaWNhdGVzIHRoZSBFQ01BU2NyaXB0IHZlcnNpb24gdG8gcGFyc2UuIE11c3QgYmUKICAgIC8vIGVpdGhlciAzLCA1LCA2IChvciAyMDE1KSwgNyAoMjAxNiksIDggKDIwMTcpLCA5ICgyMDE4KSwgMTAKICAgIC8vICgyMDE5KSwgMTEgKDIwMjApLCAxMiAoMjAyMSksIDEzICgyMDIyKSwgb3IgYCJsYXRlc3QiYCAodGhlCiAgICAvLyBsYXRlc3QgdmVyc2lvbiB0aGUgbGlicmFyeSBzdXBwb3J0cykuIFRoaXMgaW5mbHVlbmNlcyBzdXBwb3J0CiAgICAvLyBmb3Igc3RyaWN0IG1vZGUsIHRoZSBzZXQgb2YgcmVzZXJ2ZWQgd29yZHMsIGFuZCBzdXBwb3J0IGZvcgogICAgLy8gbmV3IHN5bnRheCBmZWF0dXJlcy4KICAgIGVjbWFWZXJzaW9uOiBudWxsLAogICAgLy8gYHNvdXJjZVR5cGVgIGluZGljYXRlcyB0aGUgbW9kZSB0aGUgY29kZSBzaG91bGQgYmUgcGFyc2VkIGluLgogICAgLy8gQ2FuIGJlIGVpdGhlciBgInNjcmlwdCJgIG9yIGAibW9kdWxlImAuIFRoaXMgaW5mbHVlbmNlcyBnbG9iYWwKICAgIC8vIHN0cmljdCBtb2RlIGFuZCBwYXJzaW5nIG9mIGBpbXBvcnRgIGFuZCBgZXhwb3J0YCBkZWNsYXJhdGlvbnMuCiAgICBzb3VyY2VUeXBlOiAic2NyaXB0IiwKICAgIC8vIGBvbkluc2VydGVkU2VtaWNvbG9uYCBjYW4gYmUgYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgY2FsbGVkCiAgICAvLyB3aGVuIGEgc2VtaWNvbG9uIGlzIGF1dG9tYXRpY2FsbHkgaW5zZXJ0ZWQuIEl0IHdpbGwgYmUgcGFzc2VkCiAgICAvLyB0aGUgcG9zaXRpb24gb2YgdGhlIGNvbW1hIGFzIGFuIG9mZnNldCwgYW5kIGlmIGBsb2NhdGlvbnNgIGlzCiAgICAvLyBlbmFibGVkLCBpdCBpcyBnaXZlbiB0aGUgbG9jYXRpb24gYXMgYSBge2xpbmUsIGNvbHVtbn1gIG9iamVjdAogICAgLy8gYXMgc2Vjb25kIGFyZ3VtZW50LgogICAgb25JbnNlcnRlZFNlbWljb2xvbjogbnVsbCwKICAgIC8vIGBvblRyYWlsaW5nQ29tbWFgIGlzIHNpbWlsYXIgdG8gYG9uSW5zZXJ0ZWRTZW1pY29sb25gLCBidXQgZm9yCiAgICAvLyB0cmFpbGluZyBjb21tYXMuCiAgICBvblRyYWlsaW5nQ29tbWE6IG51bGwsCiAgICAvLyBCeSBkZWZhdWx0LCByZXNlcnZlZCB3b3JkcyBhcmUgb25seSBlbmZvcmNlZCBpZiBlY21hVmVyc2lvbiA+PSA1LgogICAgLy8gU2V0IGBhbGxvd1Jlc2VydmVkYCB0byBhIGJvb2xlYW4gdmFsdWUgdG8gZXhwbGljaXRseSB0dXJuIHRoaXMgb24KICAgIC8vIGFuIG9mZi4gV2hlbiB0aGlzIG9wdGlvbiBoYXMgdGhlIHZhbHVlICJuZXZlciIsIHJlc2VydmVkIHdvcmRzCiAgICAvLyBhbmQga2V5d29yZHMgY2FuIGFsc28gbm90IGJlIHVzZWQgYXMgcHJvcGVydHkgbmFtZXMuCiAgICBhbGxvd1Jlc2VydmVkOiBudWxsLAogICAgLy8gV2hlbiBlbmFibGVkLCBhIHJldHVybiBhdCB0aGUgdG9wIGxldmVsIGlzIG5vdCBjb25zaWRlcmVkIGFuCiAgICAvLyBlcnJvci4KICAgIGFsbG93UmV0dXJuT3V0c2lkZUZ1bmN0aW9uOiBmYWxzZSwKICAgIC8vIFdoZW4gZW5hYmxlZCwgaW1wb3J0L2V4cG9ydCBzdGF0ZW1lbnRzIGFyZSBub3QgY29uc3RyYWluZWQgdG8KICAgIC8vIGFwcGVhcmluZyBhdCB0aGUgdG9wIG9mIHRoZSBwcm9ncmFtLCBhbmQgYW4gaW1wb3J0Lm1ldGEgZXhwcmVzc2lvbgogICAgLy8gaW4gYSBzY3JpcHQgaXNuJ3QgY29uc2lkZXJlZCBhbiBlcnJvci4KICAgIGFsbG93SW1wb3J0RXhwb3J0RXZlcnl3aGVyZTogZmFsc2UsCiAgICAvLyBCeSBkZWZhdWx0LCBhd2FpdCBpZGVudGlmaWVycyBhcmUgYWxsb3dlZCB0byBhcHBlYXIgYXQgdGhlIHRvcC1sZXZlbCBzY29wZSBvbmx5IGlmIGVjbWFWZXJzaW9uID49IDIwMjIuCiAgICAvLyBXaGVuIGVuYWJsZWQsIGF3YWl0IGlkZW50aWZpZXJzIGFyZSBhbGxvd2VkIHRvIGFwcGVhciBhdCB0aGUgdG9wLWxldmVsIHNjb3BlLAogICAgLy8gYnV0IHRoZXkgYXJlIHN0aWxsIG5vdCBhbGxvd2VkIGluIG5vbi1hc3luYyBmdW5jdGlvbnMuCiAgICBhbGxvd0F3YWl0T3V0c2lkZUZ1bmN0aW9uOiBudWxsLAogICAgLy8gV2hlbiBlbmFibGVkLCBzdXBlciBpZGVudGlmaWVycyBhcmUgbm90IGNvbnN0cmFpbmVkIHRvCiAgICAvLyBhcHBlYXJpbmcgaW4gbWV0aG9kcyBhbmQgZG8gbm90IHJhaXNlIGFuIGVycm9yIHdoZW4gdGhleSBhcHBlYXIgZWxzZXdoZXJlLgogICAgYWxsb3dTdXBlck91dHNpZGVNZXRob2Q6IG51bGwsCiAgICAvLyBXaGVuIGVuYWJsZWQsIGhhc2hiYW5nIGRpcmVjdGl2ZSBpbiB0aGUgYmVnaW5uaW5nIG9mIGZpbGUKICAgIC8vIGlzIGFsbG93ZWQgYW5kIHRyZWF0ZWQgYXMgYSBsaW5lIGNvbW1lbnQuCiAgICBhbGxvd0hhc2hCYW5nOiBmYWxzZSwKICAgIC8vIFdoZW4gYGxvY2F0aW9uc2AgaXMgb24sIGBsb2NgIHByb3BlcnRpZXMgaG9sZGluZyBvYmplY3RzIHdpdGgKICAgIC8vIGBzdGFydGAgYW5kIGBlbmRgIHByb3BlcnRpZXMgaW4gYHtsaW5lLCBjb2x1bW59YCBmb3JtICh3aXRoCiAgICAvLyBsaW5lIGJlaW5nIDEtYmFzZWQgYW5kIGNvbHVtbiAwLWJhc2VkKSB3aWxsIGJlIGF0dGFjaGVkIHRvIHRoZQogICAgLy8gbm9kZXMuCiAgICBsb2NhdGlvbnM6IGZhbHNlLAogICAgLy8gQSBmdW5jdGlvbiBjYW4gYmUgcGFzc2VkIGFzIGBvblRva2VuYCBvcHRpb24sIHdoaWNoIHdpbGwKICAgIC8vIGNhdXNlIEFjb3JuIHRvIGNhbGwgdGhhdCBmdW5jdGlvbiB3aXRoIG9iamVjdCBpbiB0aGUgc2FtZQogICAgLy8gZm9ybWF0IGFzIHRva2VucyByZXR1cm5lZCBmcm9tIGB0b2tlbml6ZXIoKS5nZXRUb2tlbigpYC4gTm90ZQogICAgLy8gdGhhdCB5b3UgYXJlIG5vdCBhbGxvd2VkIHRvIGNhbGwgdGhlIHBhcnNlciBmcm9tIHRoZQogICAgLy8gY2FsbGJhY2vigJR0aGF0IHdpbGwgY29ycnVwdCBpdHMgaW50ZXJuYWwgc3RhdGUuCiAgICBvblRva2VuOiBudWxsLAogICAgLy8gQSBmdW5jdGlvbiBjYW4gYmUgcGFzc2VkIGFzIGBvbkNvbW1lbnRgIG9wdGlvbiwgd2hpY2ggd2lsbAogICAgLy8gY2F1c2UgQWNvcm4gdG8gY2FsbCB0aGF0IGZ1bmN0aW9uIHdpdGggYChibG9jaywgdGV4dCwgc3RhcnQsCiAgICAvLyBlbmQpYCBwYXJhbWV0ZXJzIHdoZW5ldmVyIGEgY29tbWVudCBpcyBza2lwcGVkLiBgYmxvY2tgIGlzIGEKICAgIC8vIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoaXMgaXMgYSBibG9jayAoYC8qICovYCkgY29tbWVudCwKICAgIC8vIGB0ZXh0YCBpcyB0aGUgY29udGVudCBvZiB0aGUgY29tbWVudCwgYW5kIGBzdGFydGAgYW5kIGBlbmRgIGFyZQogICAgLy8gY2hhcmFjdGVyIG9mZnNldHMgdGhhdCBkZW5vdGUgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgdGhlIGNvbW1lbnQuCiAgICAvLyBXaGVuIHRoZSBgbG9jYXRpb25zYCBvcHRpb24gaXMgb24sIHR3byBtb3JlIHBhcmFtZXRlcnMgYXJlCiAgICAvLyBwYXNzZWQsIHRoZSBmdWxsIGB7bGluZSwgY29sdW1ufWAgbG9jYXRpb25zIG9mIHRoZSBzdGFydCBhbmQKICAgIC8vIGVuZCBvZiB0aGUgY29tbWVudHMuIE5vdGUgdGhhdCB5b3UgYXJlIG5vdCBhbGxvd2VkIHRvIGNhbGwgdGhlCiAgICAvLyBwYXJzZXIgZnJvbSB0aGUgY2FsbGJhY2vigJR0aGF0IHdpbGwgY29ycnVwdCBpdHMgaW50ZXJuYWwgc3RhdGUuCiAgICBvbkNvbW1lbnQ6IG51bGwsCiAgICAvLyBOb2RlcyBoYXZlIHRoZWlyIHN0YXJ0IGFuZCBlbmQgY2hhcmFjdGVycyBvZmZzZXRzIHJlY29yZGVkIGluCiAgICAvLyBgc3RhcnRgIGFuZCBgZW5kYCBwcm9wZXJ0aWVzIChkaXJlY3RseSBvbiB0aGUgbm9kZSwgcmF0aGVyIHRoYW4KICAgIC8vIHRoZSBgbG9jYCBvYmplY3QsIHdoaWNoIGhvbGRzIGxpbmUvY29sdW1uIGRhdGEuIFRvIGFsc28gYWRkIGEKICAgIC8vIFtzZW1pLXN0YW5kYXJkaXplZF1bcmFuZ2VdIGByYW5nZWAgcHJvcGVydHkgaG9sZGluZyBhIGBbc3RhcnQsCiAgICAvLyBlbmRdYCBhcnJheSB3aXRoIHRoZSBzYW1lIG51bWJlcnMsIHNldCB0aGUgYHJhbmdlc2Agb3B0aW9uIHRvCiAgICAvLyBgdHJ1ZWAuCiAgICAvLwogICAgLy8gW3JhbmdlXTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NzQ1Njc4CiAgICByYW5nZXM6IGZhbHNlLAogICAgLy8gSXQgaXMgcG9zc2libGUgdG8gcGFyc2UgbXVsdGlwbGUgZmlsZXMgaW50byBhIHNpbmdsZSBBU1QgYnkKICAgIC8vIHBhc3NpbmcgdGhlIHRyZWUgcHJvZHVjZWQgYnkgcGFyc2luZyB0aGUgZmlyc3QgZmlsZSBhcwogICAgLy8gYHByb2dyYW1gIG9wdGlvbiBpbiBzdWJzZXF1ZW50IHBhcnNlcy4gVGhpcyB3aWxsIGFkZCB0aGUKICAgIC8vIHRvcGxldmVsIGZvcm1zIG9mIHRoZSBwYXJzZWQgZmlsZSB0byB0aGUgYFByb2dyYW1gICh0b3ApIG5vZGUKICAgIC8vIG9mIGFuIGV4aXN0aW5nIHBhcnNlIHRyZWUuCiAgICBwcm9ncmFtOiBudWxsLAogICAgLy8gV2hlbiBgbG9jYXRpb25zYCBpcyBvbiwgeW91IGNhbiBwYXNzIHRoaXMgdG8gcmVjb3JkIHRoZSBzb3VyY2UKICAgIC8vIGZpbGUgaW4gZXZlcnkgbm9kZSdzIGBsb2NgIG9iamVjdC4KICAgIHNvdXJjZUZpbGU6IG51bGwsCiAgICAvLyBUaGlzIHZhbHVlLCBpZiBnaXZlbiwgaXMgc3RvcmVkIGluIGV2ZXJ5IG5vZGUsIHdoZXRoZXIKICAgIC8vIGBsb2NhdGlvbnNgIGlzIG9uIG9yIG9mZi4KICAgIGRpcmVjdFNvdXJjZUZpbGU6IG51bGwsCiAgICAvLyBXaGVuIGVuYWJsZWQsIHBhcmVudGhlc2l6ZWQgZXhwcmVzc2lvbnMgYXJlIHJlcHJlc2VudGVkIGJ5CiAgICAvLyAobm9uLXN0YW5kYXJkKSBQYXJlbnRoZXNpemVkRXhwcmVzc2lvbiBub2RlcwogICAgcHJlc2VydmVQYXJlbnM6IGZhbHNlCiAgfTsKCiAgLy8gSW50ZXJwcmV0IGFuZCBkZWZhdWx0IGFuIG9wdGlvbnMgb2JqZWN0CgogIHZhciB3YXJuZWRBYm91dEVjbWFWZXJzaW9uID0gZmFsc2U7CgogIGZ1bmN0aW9uIGdldE9wdGlvbnMob3B0cykgewogICAgdmFyIG9wdGlvbnMgPSB7fTsKCiAgICBmb3IgKHZhciBvcHQgaW4gZGVmYXVsdE9wdGlvbnMpCiAgICAgIHsgb3B0aW9uc1tvcHRdID0gb3B0cyAmJiBoYXNPd24ob3B0cywgb3B0KSA/IG9wdHNbb3B0XSA6IGRlZmF1bHRPcHRpb25zW29wdF07IH0KCiAgICBpZiAob3B0aW9ucy5lY21hVmVyc2lvbiA9PT0gImxhdGVzdCIpIHsKICAgICAgb3B0aW9ucy5lY21hVmVyc2lvbiA9IDFlODsKICAgIH0gZWxzZSBpZiAob3B0aW9ucy5lY21hVmVyc2lvbiA9PSBudWxsKSB7CiAgICAgIGlmICghd2FybmVkQWJvdXRFY21hVmVyc2lvbiAmJiB0eXBlb2YgY29uc29sZSA9PT0gIm9iamVjdCIgJiYgY29uc29sZS53YXJuKSB7CiAgICAgICAgd2FybmVkQWJvdXRFY21hVmVyc2lvbiA9IHRydWU7CiAgICAgICAgY29uc29sZS53YXJuKCJTaW5jZSBBY29ybiA4LjAuMCwgb3B0aW9ucy5lY21hVmVyc2lvbiBpcyByZXF1aXJlZC5cbkRlZmF1bHRpbmcgdG8gMjAyMCwgYnV0IHRoaXMgd2lsbCBzdG9wIHdvcmtpbmcgaW4gdGhlIGZ1dHVyZS4iKTsKICAgICAgfQogICAgICBvcHRpb25zLmVjbWFWZXJzaW9uID0gMTE7CiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMjAxNSkgewogICAgICBvcHRpb25zLmVjbWFWZXJzaW9uIC09IDIwMDk7CiAgICB9CgogICAgaWYgKG9wdGlvbnMuYWxsb3dSZXNlcnZlZCA9PSBudWxsKQogICAgICB7IG9wdGlvbnMuYWxsb3dSZXNlcnZlZCA9IG9wdGlvbnMuZWNtYVZlcnNpb24gPCA1OyB9CgogICAgaWYgKGlzQXJyYXkob3B0aW9ucy5vblRva2VuKSkgewogICAgICB2YXIgdG9rZW5zID0gb3B0aW9ucy5vblRva2VuOwogICAgICBvcHRpb25zLm9uVG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHsgcmV0dXJuIHRva2Vucy5wdXNoKHRva2VuKTsgfTsKICAgIH0KICAgIGlmIChpc0FycmF5KG9wdGlvbnMub25Db21tZW50KSkKICAgICAgeyBvcHRpb25zLm9uQ29tbWVudCA9IHB1c2hDb21tZW50KG9wdGlvbnMsIG9wdGlvbnMub25Db21tZW50KTsgfQoKICAgIHJldHVybiBvcHRpb25zCiAgfQoKICBmdW5jdGlvbiBwdXNoQ29tbWVudChvcHRpb25zLCBhcnJheSkgewogICAgcmV0dXJuIGZ1bmN0aW9uKGJsb2NrLCB0ZXh0LCBzdGFydCwgZW5kLCBzdGFydExvYywgZW5kTG9jKSB7CiAgICAgIHZhciBjb21tZW50ID0gewogICAgICAgIHR5cGU6IGJsb2NrID8gIkJsb2NrIiA6ICJMaW5lIiwKICAgICAgICB2YWx1ZTogdGV4dCwKICAgICAgICBzdGFydDogc3RhcnQsCiAgICAgICAgZW5kOiBlbmQKICAgICAgfTsKICAgICAgaWYgKG9wdGlvbnMubG9jYXRpb25zKQogICAgICAgIHsgY29tbWVudC5sb2MgPSBuZXcgU291cmNlTG9jYXRpb24odGhpcywgc3RhcnRMb2MsIGVuZExvYyk7IH0KICAgICAgaWYgKG9wdGlvbnMucmFuZ2VzKQogICAgICAgIHsgY29tbWVudC5yYW5nZSA9IFtzdGFydCwgZW5kXTsgfQogICAgICBhcnJheS5wdXNoKGNvbW1lbnQpOwogICAgfQogIH0KCiAgLy8gRWFjaCBzY29wZSBnZXRzIGEgYml0c2V0IHRoYXQgbWF5IGNvbnRhaW4gdGhlc2UgZmxhZ3MKICB2YXIKICAgICAgU0NPUEVfVE9QID0gMSwKICAgICAgU0NPUEVfRlVOQ1RJT04gPSAyLAogICAgICBTQ09QRV9BU1lOQyA9IDQsCiAgICAgIFNDT1BFX0dFTkVSQVRPUiA9IDgsCiAgICAgIFNDT1BFX0FSUk9XID0gMTYsCiAgICAgIFNDT1BFX1NJTVBMRV9DQVRDSCA9IDMyLAogICAgICBTQ09QRV9TVVBFUiA9IDY0LAogICAgICBTQ09QRV9ESVJFQ1RfU1VQRVIgPSAxMjgsCiAgICAgIFNDT1BFX0NMQVNTX1NUQVRJQ19CTE9DSyA9IDI1NiwKICAgICAgU0NPUEVfVkFSID0gU0NPUEVfVE9QIHwgU0NPUEVfRlVOQ1RJT04gfCBTQ09QRV9DTEFTU19TVEFUSUNfQkxPQ0s7CgogIGZ1bmN0aW9uIGZ1bmN0aW9uRmxhZ3MoYXN5bmMsIGdlbmVyYXRvcikgewogICAgcmV0dXJuIFNDT1BFX0ZVTkNUSU9OIHwgKGFzeW5jID8gU0NPUEVfQVNZTkMgOiAwKSB8IChnZW5lcmF0b3IgPyBTQ09QRV9HRU5FUkFUT1IgOiAwKQogIH0KCiAgLy8gVXNlZCBpbiBjaGVja0xWYWwqIGFuZCBkZWNsYXJlTmFtZSB0byBkZXRlcm1pbmUgdGhlIHR5cGUgb2YgYSBiaW5kaW5nCiAgdmFyCiAgICAgIEJJTkRfTk9ORSA9IDAsIC8vIE5vdCBhIGJpbmRpbmcKICAgICAgQklORF9WQVIgPSAxLCAvLyBWYXItc3R5bGUgYmluZGluZwogICAgICBCSU5EX0xFWElDQUwgPSAyLCAvLyBMZXQtIG9yIGNvbnN0LXN0eWxlIGJpbmRpbmcKICAgICAgQklORF9GVU5DVElPTiA9IDMsIC8vIEZ1bmN0aW9uIGRlY2xhcmF0aW9uCiAgICAgIEJJTkRfU0lNUExFX0NBVENIID0gNCwgLy8gU2ltcGxlIChpZGVudGlmaWVyIHBhdHRlcm4pIGNhdGNoIGJpbmRpbmcKICAgICAgQklORF9PVVRTSURFID0gNTsgLy8gU3BlY2lhbCBjYXNlIGZvciBmdW5jdGlvbiBuYW1lcyBhcyBib3VuZCBpbnNpZGUgdGhlIGZ1bmN0aW9uCgogIHZhciBQYXJzZXIgPSBmdW5jdGlvbiBQYXJzZXIob3B0aW9ucywgaW5wdXQsIHN0YXJ0UG9zKSB7CiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zID0gZ2V0T3B0aW9ucyhvcHRpb25zKTsKICAgIHRoaXMuc291cmNlRmlsZSA9IG9wdGlvbnMuc291cmNlRmlsZTsKICAgIHRoaXMua2V5d29yZHMgPSB3b3Jkc1JlZ2V4cChrZXl3b3JkcyQxW29wdGlvbnMuZWNtYVZlcnNpb24gPj0gNiA/IDYgOiBvcHRpb25zLnNvdXJjZVR5cGUgPT09ICJtb2R1bGUiID8gIjVtb2R1bGUiIDogNV0pOwogICAgdmFyIHJlc2VydmVkID0gIiI7CiAgICBpZiAob3B0aW9ucy5hbGxvd1Jlc2VydmVkICE9PSB0cnVlKSB7CiAgICAgIHJlc2VydmVkID0gcmVzZXJ2ZWRXb3Jkc1tvcHRpb25zLmVjbWFWZXJzaW9uID49IDYgPyA2IDogb3B0aW9ucy5lY21hVmVyc2lvbiA9PT0gNSA/IDUgOiAzXTsKICAgICAgaWYgKG9wdGlvbnMuc291cmNlVHlwZSA9PT0gIm1vZHVsZSIpIHsgcmVzZXJ2ZWQgKz0gIiBhd2FpdCI7IH0KICAgIH0KICAgIHRoaXMucmVzZXJ2ZWRXb3JkcyA9IHdvcmRzUmVnZXhwKHJlc2VydmVkKTsKICAgIHZhciByZXNlcnZlZFN0cmljdCA9IChyZXNlcnZlZCA/IHJlc2VydmVkICsgIiAiIDogIiIpICsgcmVzZXJ2ZWRXb3Jkcy5zdHJpY3Q7CiAgICB0aGlzLnJlc2VydmVkV29yZHNTdHJpY3QgPSB3b3Jkc1JlZ2V4cChyZXNlcnZlZFN0cmljdCk7CiAgICB0aGlzLnJlc2VydmVkV29yZHNTdHJpY3RCaW5kID0gd29yZHNSZWdleHAocmVzZXJ2ZWRTdHJpY3QgKyAiICIgKyByZXNlcnZlZFdvcmRzLnN0cmljdEJpbmQpOwogICAgdGhpcy5pbnB1dCA9IFN0cmluZyhpbnB1dCk7CgogICAgLy8gVXNlZCB0byBzaWduYWwgdG8gY2FsbGVycyBvZiBgcmVhZFdvcmQxYCB3aGV0aGVyIHRoZSB3b3JkCiAgICAvLyBjb250YWluZWQgYW55IGVzY2FwZSBzZXF1ZW5jZXMuIFRoaXMgaXMgbmVlZGVkIGJlY2F1c2Ugd29yZHMgd2l0aAogICAgLy8gZXNjYXBlIHNlcXVlbmNlcyBtdXN0IG5vdCBiZSBpbnRlcnByZXRlZCBhcyBrZXl3b3Jkcy4KICAgIHRoaXMuY29udGFpbnNFc2MgPSBmYWxzZTsKCiAgICAvLyBTZXQgdXAgdG9rZW4gc3RhdGUKCiAgICAvLyBUaGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgdG9rZW5pemVyIGluIHRoZSBpbnB1dC4KICAgIGlmIChzdGFydFBvcykgewogICAgICB0aGlzLnBvcyA9IHN0YXJ0UG9zOwogICAgICB0aGlzLmxpbmVTdGFydCA9IHRoaXMuaW5wdXQubGFzdEluZGV4T2YoIlxuIiwgc3RhcnRQb3MgLSAxKSArIDE7CiAgICAgIHRoaXMuY3VyTGluZSA9IHRoaXMuaW5wdXQuc2xpY2UoMCwgdGhpcy5saW5lU3RhcnQpLnNwbGl0KGxpbmVCcmVhaykubGVuZ3RoOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5wb3MgPSB0aGlzLmxpbmVTdGFydCA9IDA7CiAgICAgIHRoaXMuY3VyTGluZSA9IDE7CiAgICB9CgogICAgLy8gUHJvcGVydGllcyBvZiB0aGUgY3VycmVudCB0b2tlbjoKICAgIC8vIEl0cyB0eXBlCiAgICB0aGlzLnR5cGUgPSB0eXBlcyQxLmVvZjsKICAgIC8vIEZvciB0b2tlbnMgdGhhdCBpbmNsdWRlIG1vcmUgaW5mb3JtYXRpb24gdGhhbiB0aGVpciB0eXBlLCB0aGUgdmFsdWUKICAgIHRoaXMudmFsdWUgPSBudWxsOwogICAgLy8gSXRzIHN0YXJ0IGFuZCBlbmQgb2Zmc2V0CiAgICB0aGlzLnN0YXJ0ID0gdGhpcy5lbmQgPSB0aGlzLnBvczsKICAgIC8vIEFuZCwgaWYgbG9jYXRpb25zIGFyZSB1c2VkLCB0aGUge2xpbmUsIGNvbHVtbn0gb2JqZWN0CiAgICAvLyBjb3JyZXNwb25kaW5nIHRvIHRob3NlIG9mZnNldHMKICAgIHRoaXMuc3RhcnRMb2MgPSB0aGlzLmVuZExvYyA9IHRoaXMuY3VyUG9zaXRpb24oKTsKCiAgICAvLyBQb3NpdGlvbiBpbmZvcm1hdGlvbiBmb3IgdGhlIHByZXZpb3VzIHRva2VuCiAgICB0aGlzLmxhc3RUb2tFbmRMb2MgPSB0aGlzLmxhc3RUb2tTdGFydExvYyA9IG51bGw7CiAgICB0aGlzLmxhc3RUb2tTdGFydCA9IHRoaXMubGFzdFRva0VuZCA9IHRoaXMucG9zOwoKICAgIC8vIFRoZSBjb250ZXh0IHN0YWNrIGlzIHVzZWQgdG8gc3VwZXJmaWNpYWxseSB0cmFjayBzeW50YWN0aWMKICAgIC8vIGNvbnRleHQgdG8gcHJlZGljdCB3aGV0aGVyIGEgcmVndWxhciBleHByZXNzaW9uIGlzIGFsbG93ZWQgaW4gYQogICAgLy8gZ2l2ZW4gcG9zaXRpb24uCiAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmluaXRpYWxDb250ZXh0KCk7CiAgICB0aGlzLmV4cHJBbGxvd2VkID0gdHJ1ZTsKCiAgICAvLyBGaWd1cmUgb3V0IGlmIGl0J3MgYSBtb2R1bGUgY29kZS4KICAgIHRoaXMuaW5Nb2R1bGUgPSBvcHRpb25zLnNvdXJjZVR5cGUgPT09ICJtb2R1bGUiOwogICAgdGhpcy5zdHJpY3QgPSB0aGlzLmluTW9kdWxlIHx8IHRoaXMuc3RyaWN0RGlyZWN0aXZlKHRoaXMucG9zKTsKCiAgICAvLyBVc2VkIHRvIHNpZ25pZnkgdGhlIHN0YXJ0IG9mIGEgcG90ZW50aWFsIGFycm93IGZ1bmN0aW9uCiAgICB0aGlzLnBvdGVudGlhbEFycm93QXQgPSAtMTsKICAgIHRoaXMucG90ZW50aWFsQXJyb3dJbkZvckF3YWl0ID0gZmFsc2U7CgogICAgLy8gUG9zaXRpb25zIHRvIGRlbGF5ZWQtY2hlY2sgdGhhdCB5aWVsZC9hd2FpdCBkb2VzIG5vdCBleGlzdCBpbiBkZWZhdWx0IHBhcmFtZXRlcnMuCiAgICB0aGlzLnlpZWxkUG9zID0gdGhpcy5hd2FpdFBvcyA9IHRoaXMuYXdhaXRJZGVudFBvcyA9IDA7CiAgICAvLyBMYWJlbHMgaW4gc2NvcGUuCiAgICB0aGlzLmxhYmVscyA9IFtdOwogICAgLy8gVGh1cy1mYXIgdW5kZWZpbmVkIGV4cG9ydHMuCiAgICB0aGlzLnVuZGVmaW5lZEV4cG9ydHMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwoKICAgIC8vIElmIGVuYWJsZWQsIHNraXAgbGVhZGluZyBoYXNoYmFuZyBsaW5lLgogICAgaWYgKHRoaXMucG9zID09PSAwICYmIG9wdGlvbnMuYWxsb3dIYXNoQmFuZyAmJiB0aGlzLmlucHV0LnNsaWNlKDAsIDIpID09PSAiIyEiKQogICAgICB7IHRoaXMuc2tpcExpbmVDb21tZW50KDIpOyB9CgogICAgLy8gU2NvcGUgdHJhY2tpbmcgZm9yIGR1cGxpY2F0ZSB2YXJpYWJsZSBuYW1lcyAoc2VlIHNjb3BlLmpzKQogICAgdGhpcy5zY29wZVN0YWNrID0gW107CiAgICB0aGlzLmVudGVyU2NvcGUoU0NPUEVfVE9QKTsKCiAgICAvLyBGb3IgUmVnRXhwIHZhbGlkYXRpb24KICAgIHRoaXMucmVnZXhwU3RhdGUgPSBudWxsOwoKICAgIC8vIFRoZSBzdGFjayBvZiBwcml2YXRlIG5hbWVzLgogICAgLy8gRWFjaCBlbGVtZW50IGhhcyB0d28gcHJvcGVydGllczogJ2RlY2xhcmVkJyBhbmQgJ3VzZWQnLgogICAgLy8gV2hlbiBpdCBleGl0ZWQgZnJvbSB0aGUgb3V0ZXJtb3N0IGNsYXNzIGRlZmluaXRpb24sIGFsbCB1c2VkIHByaXZhdGUgbmFtZXMgbXVzdCBiZSBkZWNsYXJlZC4KICAgIHRoaXMucHJpdmF0ZU5hbWVTdGFjayA9IFtdOwogIH07CgogIHZhciBwcm90b3R5cGVBY2Nlc3NvcnMgPSB7IGluRnVuY3Rpb246IHsgY29uZmlndXJhYmxlOiB0cnVlIH0saW5HZW5lcmF0b3I6IHsgY29uZmlndXJhYmxlOiB0cnVlIH0saW5Bc3luYzogeyBjb25maWd1cmFibGU6IHRydWUgfSxjYW5Bd2FpdDogeyBjb25maWd1cmFibGU6IHRydWUgfSxhbGxvd1N1cGVyOiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9LGFsbG93RGlyZWN0U3VwZXI6IHsgY29uZmlndXJhYmxlOiB0cnVlIH0sdHJlYXRGdW5jdGlvbnNBc1ZhcjogeyBjb25maWd1cmFibGU6IHRydWUgfSxhbGxvd05ld0RvdFRhcmdldDogeyBjb25maWd1cmFibGU6IHRydWUgfSxpbkNsYXNzU3RhdGljQmxvY2s6IHsgY29uZmlndXJhYmxlOiB0cnVlIH0gfTsKCiAgUGFyc2VyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIHBhcnNlICgpIHsKICAgIHZhciBub2RlID0gdGhpcy5vcHRpb25zLnByb2dyYW0gfHwgdGhpcy5zdGFydE5vZGUoKTsKICAgIHRoaXMubmV4dFRva2VuKCk7CiAgICByZXR1cm4gdGhpcy5wYXJzZVRvcExldmVsKG5vZGUpCiAgfTsKCiAgcHJvdG90eXBlQWNjZXNzb3JzLmluRnVuY3Rpb24uZ2V0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHRoaXMuY3VycmVudFZhclNjb3BlKCkuZmxhZ3MgJiBTQ09QRV9GVU5DVElPTikgPiAwIH07CgogIHByb3RvdHlwZUFjY2Vzc29ycy5pbkdlbmVyYXRvci5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAodGhpcy5jdXJyZW50VmFyU2NvcGUoKS5mbGFncyAmIFNDT1BFX0dFTkVSQVRPUikgPiAwICYmICF0aGlzLmN1cnJlbnRWYXJTY29wZSgpLmluQ2xhc3NGaWVsZEluaXQgfTsKCiAgcHJvdG90eXBlQWNjZXNzb3JzLmluQXN5bmMuZ2V0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKHRoaXMuY3VycmVudFZhclNjb3BlKCkuZmxhZ3MgJiBTQ09QRV9BU1lOQykgPiAwICYmICF0aGlzLmN1cnJlbnRWYXJTY29wZSgpLmluQ2xhc3NGaWVsZEluaXQgfTsKCiAgcHJvdG90eXBlQWNjZXNzb3JzLmNhbkF3YWl0LmdldCA9IGZ1bmN0aW9uICgpIHsKICAgIGZvciAodmFyIGkgPSB0aGlzLnNjb3BlU3RhY2subGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgdmFyIHNjb3BlID0gdGhpcy5zY29wZVN0YWNrW2ldOwogICAgICBpZiAoc2NvcGUuaW5DbGFzc0ZpZWxkSW5pdCB8fCBzY29wZS5mbGFncyAmIFNDT1BFX0NMQVNTX1NUQVRJQ19CTE9DSykgeyByZXR1cm4gZmFsc2UgfQogICAgICBpZiAoc2NvcGUuZmxhZ3MgJiBTQ09QRV9GVU5DVElPTikgeyByZXR1cm4gKHNjb3BlLmZsYWdzICYgU0NPUEVfQVNZTkMpID4gMCB9CiAgICB9CiAgICByZXR1cm4gKHRoaXMuaW5Nb2R1bGUgJiYgdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDEzKSB8fCB0aGlzLm9wdGlvbnMuYWxsb3dBd2FpdE91dHNpZGVGdW5jdGlvbgogIH07CgogIHByb3RvdHlwZUFjY2Vzc29ycy5hbGxvd1N1cGVyLmdldCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciByZWYgPSB0aGlzLmN1cnJlbnRUaGlzU2NvcGUoKTsKICAgICAgdmFyIGZsYWdzID0gcmVmLmZsYWdzOwogICAgICB2YXIgaW5DbGFzc0ZpZWxkSW5pdCA9IHJlZi5pbkNsYXNzRmllbGRJbml0OwogICAgcmV0dXJuIChmbGFncyAmIFNDT1BFX1NVUEVSKSA+IDAgfHwgaW5DbGFzc0ZpZWxkSW5pdCB8fCB0aGlzLm9wdGlvbnMuYWxsb3dTdXBlck91dHNpZGVNZXRob2QKICB9OwoKICBwcm90b3R5cGVBY2Nlc3NvcnMuYWxsb3dEaXJlY3RTdXBlci5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAodGhpcy5jdXJyZW50VGhpc1Njb3BlKCkuZmxhZ3MgJiBTQ09QRV9ESVJFQ1RfU1VQRVIpID4gMCB9OwoKICBwcm90b3R5cGVBY2Nlc3NvcnMudHJlYXRGdW5jdGlvbnNBc1Zhci5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLnRyZWF0RnVuY3Rpb25zQXNWYXJJblNjb3BlKHRoaXMuY3VycmVudFNjb3BlKCkpIH07CgogIHByb3RvdHlwZUFjY2Vzc29ycy5hbGxvd05ld0RvdFRhcmdldC5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgcmVmID0gdGhpcy5jdXJyZW50VGhpc1Njb3BlKCk7CiAgICAgIHZhciBmbGFncyA9IHJlZi5mbGFnczsKICAgICAgdmFyIGluQ2xhc3NGaWVsZEluaXQgPSByZWYuaW5DbGFzc0ZpZWxkSW5pdDsKICAgIHJldHVybiAoZmxhZ3MgJiAoU0NPUEVfRlVOQ1RJT04gfCBTQ09QRV9DTEFTU19TVEFUSUNfQkxPQ0spKSA+IDAgfHwgaW5DbGFzc0ZpZWxkSW5pdAogIH07CgogIHByb3RvdHlwZUFjY2Vzc29ycy5pbkNsYXNzU3RhdGljQmxvY2suZ2V0ID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuICh0aGlzLmN1cnJlbnRWYXJTY29wZSgpLmZsYWdzICYgU0NPUEVfQ0xBU1NfU1RBVElDX0JMT0NLKSA+IDAKICB9OwoKICBQYXJzZXIuZXh0ZW5kID0gZnVuY3Rpb24gZXh0ZW5kICgpIHsKICAgICAgdmFyIHBsdWdpbnMgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKICAgICAgd2hpbGUgKCBsZW4tLSApIHBsdWdpbnNbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gXTsKCiAgICB2YXIgY2xzID0gdGhpczsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGx1Z2lucy5sZW5ndGg7IGkrKykgeyBjbHMgPSBwbHVnaW5zW2ldKGNscyk7IH0KICAgIHJldHVybiBjbHMKICB9OwoKICBQYXJzZXIucGFyc2UgPSBmdW5jdGlvbiBwYXJzZSAoaW5wdXQsIG9wdGlvbnMpIHsKICAgIHJldHVybiBuZXcgdGhpcyhvcHRpb25zLCBpbnB1dCkucGFyc2UoKQogIH07CgogIFBhcnNlci5wYXJzZUV4cHJlc3Npb25BdCA9IGZ1bmN0aW9uIHBhcnNlRXhwcmVzc2lvbkF0IChpbnB1dCwgcG9zLCBvcHRpb25zKSB7CiAgICB2YXIgcGFyc2VyID0gbmV3IHRoaXMob3B0aW9ucywgaW5wdXQsIHBvcyk7CiAgICBwYXJzZXIubmV4dFRva2VuKCk7CiAgICByZXR1cm4gcGFyc2VyLnBhcnNlRXhwcmVzc2lvbigpCiAgfTsKCiAgUGFyc2VyLnRva2VuaXplciA9IGZ1bmN0aW9uIHRva2VuaXplciAoaW5wdXQsIG9wdGlvbnMpIHsKICAgIHJldHVybiBuZXcgdGhpcyhvcHRpb25zLCBpbnB1dCkKICB9OwoKICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyggUGFyc2VyLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzICk7CgogIHZhciBwcCQ5ID0gUGFyc2VyLnByb3RvdHlwZTsKCiAgLy8gIyMgUGFyc2VyIHV0aWxpdGllcwoKICB2YXIgbGl0ZXJhbCA9IC9eKD86JygoPzpcXC58W14nXFxdKSo/KSd8IigoPzpcXC58W14iXFxdKSo/KSIpLzsKICBwcCQ5LnN0cmljdERpcmVjdGl2ZSA9IGZ1bmN0aW9uKHN0YXJ0KSB7CiAgICBmb3IgKDs7KSB7CiAgICAgIC8vIFRyeSB0byBmaW5kIHN0cmluZyBsaXRlcmFsLgogICAgICBza2lwV2hpdGVTcGFjZS5sYXN0SW5kZXggPSBzdGFydDsKICAgICAgc3RhcnQgKz0gc2tpcFdoaXRlU3BhY2UuZXhlYyh0aGlzLmlucHV0KVswXS5sZW5ndGg7CiAgICAgIHZhciBtYXRjaCA9IGxpdGVyYWwuZXhlYyh0aGlzLmlucHV0LnNsaWNlKHN0YXJ0KSk7CiAgICAgIGlmICghbWF0Y2gpIHsgcmV0dXJuIGZhbHNlIH0KICAgICAgaWYgKChtYXRjaFsxXSB8fCBtYXRjaFsyXSkgPT09ICJ1c2Ugc3RyaWN0IikgewogICAgICAgIHNraXBXaGl0ZVNwYWNlLmxhc3RJbmRleCA9IHN0YXJ0ICsgbWF0Y2hbMF0ubGVuZ3RoOwogICAgICAgIHZhciBzcGFjZUFmdGVyID0gc2tpcFdoaXRlU3BhY2UuZXhlYyh0aGlzLmlucHV0KSwgZW5kID0gc3BhY2VBZnRlci5pbmRleCArIHNwYWNlQWZ0ZXJbMF0ubGVuZ3RoOwogICAgICAgIHZhciBuZXh0ID0gdGhpcy5pbnB1dC5jaGFyQXQoZW5kKTsKICAgICAgICByZXR1cm4gbmV4dCA9PT0gIjsiIHx8IG5leHQgPT09ICJ9IiB8fAogICAgICAgICAgKGxpbmVCcmVhay50ZXN0KHNwYWNlQWZ0ZXJbMF0pICYmCiAgICAgICAgICAgISgvWyhgLlsrXC0vKiU8Pj0sP14mXS8udGVzdChuZXh0KSB8fCBuZXh0ID09PSAiISIgJiYgdGhpcy5pbnB1dC5jaGFyQXQoZW5kICsgMSkgPT09ICI9IikpCiAgICAgIH0KICAgICAgc3RhcnQgKz0gbWF0Y2hbMF0ubGVuZ3RoOwoKICAgICAgLy8gU2tpcCBzZW1pY29sb24sIGlmIGFueS4KICAgICAgc2tpcFdoaXRlU3BhY2UubGFzdEluZGV4ID0gc3RhcnQ7CiAgICAgIHN0YXJ0ICs9IHNraXBXaGl0ZVNwYWNlLmV4ZWModGhpcy5pbnB1dClbMF0ubGVuZ3RoOwogICAgICBpZiAodGhpcy5pbnB1dFtzdGFydF0gPT09ICI7IikKICAgICAgICB7IHN0YXJ0Kys7IH0KICAgIH0KICB9OwoKICAvLyBQcmVkaWNhdGUgdGhhdCB0ZXN0cyB3aGV0aGVyIHRoZSBuZXh0IHRva2VuIGlzIG9mIHRoZSBnaXZlbgogIC8vIHR5cGUsIGFuZCBpZiB5ZXMsIGNvbnN1bWVzIGl0IGFzIGEgc2lkZSBlZmZlY3QuCgogIHBwJDkuZWF0ID0gZnVuY3Rpb24odHlwZSkgewogICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZSkgewogICAgICB0aGlzLm5leHQoKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZQogICAgfQogIH07CgogIC8vIFRlc3RzIHdoZXRoZXIgcGFyc2VkIHRva2VuIGlzIGEgY29udGV4dHVhbCBrZXl3b3JkLgoKICBwcCQ5LmlzQ29udGV4dHVhbCA9IGZ1bmN0aW9uKG5hbWUpIHsKICAgIHJldHVybiB0aGlzLnR5cGUgPT09IHR5cGVzJDEubmFtZSAmJiB0aGlzLnZhbHVlID09PSBuYW1lICYmICF0aGlzLmNvbnRhaW5zRXNjCiAgfTsKCiAgLy8gQ29uc3VtZXMgY29udGV4dHVhbCBrZXl3b3JkIGlmIHBvc3NpYmxlLgoKICBwcCQ5LmVhdENvbnRleHR1YWwgPSBmdW5jdGlvbihuYW1lKSB7CiAgICBpZiAoIXRoaXMuaXNDb250ZXh0dWFsKG5hbWUpKSB7IHJldHVybiBmYWxzZSB9CiAgICB0aGlzLm5leHQoKTsKICAgIHJldHVybiB0cnVlCiAgfTsKCiAgLy8gQXNzZXJ0cyB0aGF0IGZvbGxvd2luZyB0b2tlbiBpcyBnaXZlbiBjb250ZXh0dWFsIGtleXdvcmQuCgogIHBwJDkuZXhwZWN0Q29udGV4dHVhbCA9IGZ1bmN0aW9uKG5hbWUpIHsKICAgIGlmICghdGhpcy5lYXRDb250ZXh0dWFsKG5hbWUpKSB7IHRoaXMudW5leHBlY3RlZCgpOyB9CiAgfTsKCiAgLy8gVGVzdCB3aGV0aGVyIGEgc2VtaWNvbG9uIGNhbiBiZSBpbnNlcnRlZCBhdCB0aGUgY3VycmVudCBwb3NpdGlvbi4KCiAgcHAkOS5jYW5JbnNlcnRTZW1pY29sb24gPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLnR5cGUgPT09IHR5cGVzJDEuZW9mIHx8CiAgICAgIHRoaXMudHlwZSA9PT0gdHlwZXMkMS5icmFjZVIgfHwKICAgICAgbGluZUJyZWFrLnRlc3QodGhpcy5pbnB1dC5zbGljZSh0aGlzLmxhc3RUb2tFbmQsIHRoaXMuc3RhcnQpKQogIH07CgogIHBwJDkuaW5zZXJ0U2VtaWNvbG9uID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5jYW5JbnNlcnRTZW1pY29sb24oKSkgewogICAgICBpZiAodGhpcy5vcHRpb25zLm9uSW5zZXJ0ZWRTZW1pY29sb24pCiAgICAgICAgeyB0aGlzLm9wdGlvbnMub25JbnNlcnRlZFNlbWljb2xvbih0aGlzLmxhc3RUb2tFbmQsIHRoaXMubGFzdFRva0VuZExvYyk7IH0KICAgICAgcmV0dXJuIHRydWUKICAgIH0KICB9OwoKICAvLyBDb25zdW1lIGEgc2VtaWNvbG9uLCBvciwgZmFpbGluZyB0aGF0LCBzZWUgaWYgd2UgYXJlIGFsbG93ZWQgdG8KICAvLyBwcmV0ZW5kIHRoYXQgdGhlcmUgaXMgYSBzZW1pY29sb24gYXQgdGhpcyBwb3NpdGlvbi4KCiAgcHAkOS5zZW1pY29sb24gPSBmdW5jdGlvbigpIHsKICAgIGlmICghdGhpcy5lYXQodHlwZXMkMS5zZW1pKSAmJiAhdGhpcy5pbnNlcnRTZW1pY29sb24oKSkgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogIH07CgogIHBwJDkuYWZ0ZXJUcmFpbGluZ0NvbW1hID0gZnVuY3Rpb24odG9rVHlwZSwgbm90TmV4dCkgewogICAgaWYgKHRoaXMudHlwZSA9PT0gdG9rVHlwZSkgewogICAgICBpZiAodGhpcy5vcHRpb25zLm9uVHJhaWxpbmdDb21tYSkKICAgICAgICB7IHRoaXMub3B0aW9ucy5vblRyYWlsaW5nQ29tbWEodGhpcy5sYXN0VG9rU3RhcnQsIHRoaXMubGFzdFRva1N0YXJ0TG9jKTsgfQogICAgICBpZiAoIW5vdE5leHQpCiAgICAgICAgeyB0aGlzLm5leHQoKTsgfQogICAgICByZXR1cm4gdHJ1ZQogICAgfQogIH07CgogIC8vIEV4cGVjdCBhIHRva2VuIG9mIGEgZ2l2ZW4gdHlwZS4gSWYgZm91bmQsIGNvbnN1bWUgaXQsIG90aGVyd2lzZSwKICAvLyByYWlzZSBhbiB1bmV4cGVjdGVkIHRva2VuIGVycm9yLgoKICBwcCQ5LmV4cGVjdCA9IGZ1bmN0aW9uKHR5cGUpIHsKICAgIHRoaXMuZWF0KHR5cGUpIHx8IHRoaXMudW5leHBlY3RlZCgpOwogIH07CgogIC8vIFJhaXNlIGFuIHVuZXhwZWN0ZWQgdG9rZW4gZXJyb3IuCgogIHBwJDkudW5leHBlY3RlZCA9IGZ1bmN0aW9uKHBvcykgewogICAgdGhpcy5yYWlzZShwb3MgIT0gbnVsbCA/IHBvcyA6IHRoaXMuc3RhcnQsICJVbmV4cGVjdGVkIHRva2VuIik7CiAgfTsKCiAgZnVuY3Rpb24gRGVzdHJ1Y3R1cmluZ0Vycm9ycygpIHsKICAgIHRoaXMuc2hvcnRoYW5kQXNzaWduID0KICAgIHRoaXMudHJhaWxpbmdDb21tYSA9CiAgICB0aGlzLnBhcmVudGhlc2l6ZWRBc3NpZ24gPQogICAgdGhpcy5wYXJlbnRoZXNpemVkQmluZCA9CiAgICB0aGlzLmRvdWJsZVByb3RvID0KICAgICAgLTE7CiAgfQoKICBwcCQ5LmNoZWNrUGF0dGVybkVycm9ycyA9IGZ1bmN0aW9uKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIGlzQXNzaWduKSB7CiAgICBpZiAoIXJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsgcmV0dXJuIH0KICAgIGlmIChyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnRyYWlsaW5nQ29tbWEgPiAtMSkKICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy50cmFpbGluZ0NvbW1hLCAiQ29tbWEgaXMgbm90IHBlcm1pdHRlZCBhZnRlciB0aGUgcmVzdCBlbGVtZW50Iik7IH0KICAgIHZhciBwYXJlbnMgPSBpc0Fzc2lnbiA/IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMucGFyZW50aGVzaXplZEFzc2lnbiA6IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMucGFyZW50aGVzaXplZEJpbmQ7CiAgICBpZiAocGFyZW5zID4gLTEpIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHBhcmVucywgIlBhcmVudGhlc2l6ZWQgcGF0dGVybiIpOyB9CiAgfTsKCiAgcHAkOS5jaGVja0V4cHJlc3Npb25FcnJvcnMgPSBmdW5jdGlvbihyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLCBhbmRUaHJvdykgewogICAgaWYgKCFyZWZEZXN0cnVjdHVyaW5nRXJyb3JzKSB7IHJldHVybiBmYWxzZSB9CiAgICB2YXIgc2hvcnRoYW5kQXNzaWduID0gcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5zaG9ydGhhbmRBc3NpZ247CiAgICB2YXIgZG91YmxlUHJvdG8gPSByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLmRvdWJsZVByb3RvOwogICAgaWYgKCFhbmRUaHJvdykgeyByZXR1cm4gc2hvcnRoYW5kQXNzaWduID49IDAgfHwgZG91YmxlUHJvdG8gPj0gMCB9CiAgICBpZiAoc2hvcnRoYW5kQXNzaWduID49IDApCiAgICAgIHsgdGhpcy5yYWlzZShzaG9ydGhhbmRBc3NpZ24sICJTaG9ydGhhbmQgcHJvcGVydHkgYXNzaWdubWVudHMgYXJlIHZhbGlkIG9ubHkgaW4gZGVzdHJ1Y3R1cmluZyBwYXR0ZXJucyIpOyB9CiAgICBpZiAoZG91YmxlUHJvdG8gPj0gMCkKICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUoZG91YmxlUHJvdG8sICJSZWRlZmluaXRpb24gb2YgX19wcm90b19fIHByb3BlcnR5Iik7IH0KICB9OwoKICBwcCQ5LmNoZWNrWWllbGRBd2FpdEluRGVmYXVsdFBhcmFtcyA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMueWllbGRQb3MgJiYgKCF0aGlzLmF3YWl0UG9zIHx8IHRoaXMueWllbGRQb3MgPCB0aGlzLmF3YWl0UG9zKSkKICAgICAgeyB0aGlzLnJhaXNlKHRoaXMueWllbGRQb3MsICJZaWVsZCBleHByZXNzaW9uIGNhbm5vdCBiZSBhIGRlZmF1bHQgdmFsdWUiKTsgfQogICAgaWYgKHRoaXMuYXdhaXRQb3MpCiAgICAgIHsgdGhpcy5yYWlzZSh0aGlzLmF3YWl0UG9zLCAiQXdhaXQgZXhwcmVzc2lvbiBjYW5ub3QgYmUgYSBkZWZhdWx0IHZhbHVlIik7IH0KICB9OwoKICBwcCQ5LmlzU2ltcGxlQXNzaWduVGFyZ2V0ID0gZnVuY3Rpb24oZXhwcikgewogICAgaWYgKGV4cHIudHlwZSA9PT0gIlBhcmVudGhlc2l6ZWRFeHByZXNzaW9uIikKICAgICAgeyByZXR1cm4gdGhpcy5pc1NpbXBsZUFzc2lnblRhcmdldChleHByLmV4cHJlc3Npb24pIH0KICAgIHJldHVybiBleHByLnR5cGUgPT09ICJJZGVudGlmaWVyIiB8fCBleHByLnR5cGUgPT09ICJNZW1iZXJFeHByZXNzaW9uIgogIH07CgogIHZhciBwcCQ4ID0gUGFyc2VyLnByb3RvdHlwZTsKCiAgLy8gIyMjIFN0YXRlbWVudCBwYXJzaW5nCgogIC8vIFBhcnNlIGEgcHJvZ3JhbS4gSW5pdGlhbGl6ZXMgdGhlIHBhcnNlciwgcmVhZHMgYW55IG51bWJlciBvZgogIC8vIHN0YXRlbWVudHMsIGFuZCB3cmFwcyB0aGVtIGluIGEgUHJvZ3JhbSBub2RlLiAgT3B0aW9uYWxseSB0YWtlcyBhCiAgLy8gYHByb2dyYW1gIGFyZ3VtZW50LiAgSWYgcHJlc2VudCwgdGhlIHN0YXRlbWVudHMgd2lsbCBiZSBhcHBlbmRlZAogIC8vIHRvIGl0cyBib2R5IGluc3RlYWQgb2YgY3JlYXRpbmcgYSBuZXcgbm9kZS4KCiAgcHAkOC5wYXJzZVRvcExldmVsID0gZnVuY3Rpb24obm9kZSkgewogICAgdmFyIGV4cG9ydHMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgaWYgKCFub2RlLmJvZHkpIHsgbm9kZS5ib2R5ID0gW107IH0KICAgIHdoaWxlICh0aGlzLnR5cGUgIT09IHR5cGVzJDEuZW9mKSB7CiAgICAgIHZhciBzdG10ID0gdGhpcy5wYXJzZVN0YXRlbWVudChudWxsLCB0cnVlLCBleHBvcnRzKTsKICAgICAgbm9kZS5ib2R5LnB1c2goc3RtdCk7CiAgICB9CiAgICBpZiAodGhpcy5pbk1vZHVsZSkKICAgICAgeyBmb3IgKHZhciBpID0gMCwgbGlzdCA9IE9iamVjdC5rZXlzKHRoaXMudW5kZWZpbmVkRXhwb3J0cyk7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKQogICAgICAgIHsKICAgICAgICAgIHZhciBuYW1lID0gbGlzdFtpXTsKCiAgICAgICAgICB0aGlzLnJhaXNlUmVjb3ZlcmFibGUodGhpcy51bmRlZmluZWRFeHBvcnRzW25hbWVdLnN0YXJ0LCAoIkV4cG9ydCAnIiArIG5hbWUgKyAiJyBpcyBub3QgZGVmaW5lZCIpKTsKICAgICAgICB9IH0KICAgIHRoaXMuYWRhcHREaXJlY3RpdmVQcm9sb2d1ZShub2RlLmJvZHkpOwogICAgdGhpcy5uZXh0KCk7CiAgICBub2RlLnNvdXJjZVR5cGUgPSB0aGlzLm9wdGlvbnMuc291cmNlVHlwZTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlByb2dyYW0iKQogIH07CgogIHZhciBsb29wTGFiZWwgPSB7a2luZDogImxvb3AifSwgc3dpdGNoTGFiZWwgPSB7a2luZDogInN3aXRjaCJ9OwoKICBwcCQ4LmlzTGV0ID0gZnVuY3Rpb24oY29udGV4dCkgewogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA8IDYgfHwgIXRoaXMuaXNDb250ZXh0dWFsKCJsZXQiKSkgeyByZXR1cm4gZmFsc2UgfQogICAgc2tpcFdoaXRlU3BhY2UubGFzdEluZGV4ID0gdGhpcy5wb3M7CiAgICB2YXIgc2tpcCA9IHNraXBXaGl0ZVNwYWNlLmV4ZWModGhpcy5pbnB1dCk7CiAgICB2YXIgbmV4dCA9IHRoaXMucG9zICsgc2tpcFswXS5sZW5ndGgsIG5leHRDaCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdChuZXh0KTsKICAgIC8vIEZvciBhbWJpZ3VvdXMgY2FzZXMsIGRldGVybWluZSBpZiBhIExleGljYWxEZWNsYXJhdGlvbiAob3Igb25seSBhCiAgICAvLyBTdGF0ZW1lbnQpIGlzIGFsbG93ZWQgaGVyZS4gSWYgY29udGV4dCBpcyBub3QgZW1wdHkgdGhlbiBvbmx5IGEgU3RhdGVtZW50CiAgICAvLyBpcyBhbGxvd2VkLiBIb3dldmVyLCBgbGV0IFtgIGlzIGFuIGV4cGxpY2l0IG5lZ2F0aXZlIGxvb2thaGVhZCBmb3IKICAgIC8vIEV4cHJlc3Npb25TdGF0ZW1lbnQsIHNvIHNwZWNpYWwtY2FzZSBpdCBmaXJzdC4KICAgIGlmIChuZXh0Q2ggPT09IDkxIHx8IG5leHRDaCA9PT0gOTIgfHwgbmV4dENoID4gMHhkN2ZmICYmIG5leHRDaCA8IDB4ZGMwMCkgeyByZXR1cm4gdHJ1ZSB9IC8vICdbJywgJy8nLCBhc3RyYWwKICAgIGlmIChjb250ZXh0KSB7IHJldHVybiBmYWxzZSB9CgogICAgaWYgKG5leHRDaCA9PT0gMTIzKSB7IHJldHVybiB0cnVlIH0gLy8gJ3snCiAgICBpZiAoaXNJZGVudGlmaWVyU3RhcnQobmV4dENoLCB0cnVlKSkgewogICAgICB2YXIgcG9zID0gbmV4dCArIDE7CiAgICAgIHdoaWxlIChpc0lkZW50aWZpZXJDaGFyKG5leHRDaCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdChwb3MpLCB0cnVlKSkgeyArK3BvczsgfQogICAgICBpZiAobmV4dENoID09PSA5MiB8fCBuZXh0Q2ggPiAweGQ3ZmYgJiYgbmV4dENoIDwgMHhkYzAwKSB7IHJldHVybiB0cnVlIH0KICAgICAgdmFyIGlkZW50ID0gdGhpcy5pbnB1dC5zbGljZShuZXh0LCBwb3MpOwogICAgICBpZiAoIWtleXdvcmRSZWxhdGlvbmFsT3BlcmF0b3IudGVzdChpZGVudCkpIHsgcmV0dXJuIHRydWUgfQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKCiAgLy8gY2hlY2sgJ2FzeW5jIFtubyBMaW5lVGVybWluYXRvciBoZXJlXSBmdW5jdGlvbicKICAvLyAtICdhc3luYyAvKmZvbyovIGZ1bmN0aW9uJyBpcyBPSy4KICAvLyAtICdhc3luYyAvKlxuKi8gZnVuY3Rpb24nIGlzIGludmFsaWQuCiAgcHAkOC5pc0FzeW5jRnVuY3Rpb24gPSBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPCA4IHx8ICF0aGlzLmlzQ29udGV4dHVhbCgiYXN5bmMiKSkKICAgICAgeyByZXR1cm4gZmFsc2UgfQoKICAgIHNraXBXaGl0ZVNwYWNlLmxhc3RJbmRleCA9IHRoaXMucG9zOwogICAgdmFyIHNraXAgPSBza2lwV2hpdGVTcGFjZS5leGVjKHRoaXMuaW5wdXQpOwogICAgdmFyIG5leHQgPSB0aGlzLnBvcyArIHNraXBbMF0ubGVuZ3RoLCBhZnRlcjsKICAgIHJldHVybiAhbGluZUJyZWFrLnRlc3QodGhpcy5pbnB1dC5zbGljZSh0aGlzLnBvcywgbmV4dCkpICYmCiAgICAgIHRoaXMuaW5wdXQuc2xpY2UobmV4dCwgbmV4dCArIDgpID09PSAiZnVuY3Rpb24iICYmCiAgICAgIChuZXh0ICsgOCA9PT0gdGhpcy5pbnB1dC5sZW5ndGggfHwKICAgICAgICEoaXNJZGVudGlmaWVyQ2hhcihhZnRlciA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdChuZXh0ICsgOCkpIHx8IGFmdGVyID4gMHhkN2ZmICYmIGFmdGVyIDwgMHhkYzAwKSkKICB9OwoKICAvLyBQYXJzZSBhIHNpbmdsZSBzdGF0ZW1lbnQuCiAgLy8KICAvLyBJZiBleHBlY3RpbmcgYSBzdGF0ZW1lbnQgYW5kIGZpbmRpbmcgYSBzbGFzaCBvcGVyYXRvciwgcGFyc2UgYQogIC8vIHJlZ3VsYXIgZXhwcmVzc2lvbiBsaXRlcmFsLiBUaGlzIGlzIHRvIGhhbmRsZSBjYXNlcyBsaWtlCiAgLy8gYGlmIChmb28pIC9ibGFoLy5leGVjKGZvbylgLCB3aGVyZSBsb29raW5nIGF0IHRoZSBwcmV2aW91cyB0b2tlbgogIC8vIGRvZXMgbm90IGhlbHAuCgogIHBwJDgucGFyc2VTdGF0ZW1lbnQgPSBmdW5jdGlvbihjb250ZXh0LCB0b3BMZXZlbCwgZXhwb3J0cykgewogICAgdmFyIHN0YXJ0dHlwZSA9IHRoaXMudHlwZSwgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCksIGtpbmQ7CgogICAgaWYgKHRoaXMuaXNMZXQoY29udGV4dCkpIHsKICAgICAgc3RhcnR0eXBlID0gdHlwZXMkMS5fdmFyOwogICAgICBraW5kID0gImxldCI7CiAgICB9CgogICAgLy8gTW9zdCB0eXBlcyBvZiBzdGF0ZW1lbnRzIGFyZSByZWNvZ25pemVkIGJ5IHRoZSBrZXl3b3JkIHRoZXkKICAgIC8vIHN0YXJ0IHdpdGguIE1hbnkgYXJlIHRyaXZpYWwgdG8gcGFyc2UsIHNvbWUgcmVxdWlyZSBhIGJpdCBvZgogICAgLy8gY29tcGxleGl0eS4KCiAgICBzd2l0Y2ggKHN0YXJ0dHlwZSkgewogICAgY2FzZSB0eXBlcyQxLl9icmVhazogY2FzZSB0eXBlcyQxLl9jb250aW51ZTogcmV0dXJuIHRoaXMucGFyc2VCcmVha0NvbnRpbnVlU3RhdGVtZW50KG5vZGUsIHN0YXJ0dHlwZS5rZXl3b3JkKQogICAgY2FzZSB0eXBlcyQxLl9kZWJ1Z2dlcjogcmV0dXJuIHRoaXMucGFyc2VEZWJ1Z2dlclN0YXRlbWVudChub2RlKQogICAgY2FzZSB0eXBlcyQxLl9kbzogcmV0dXJuIHRoaXMucGFyc2VEb1N0YXRlbWVudChub2RlKQogICAgY2FzZSB0eXBlcyQxLl9mb3I6IHJldHVybiB0aGlzLnBhcnNlRm9yU3RhdGVtZW50KG5vZGUpCiAgICBjYXNlIHR5cGVzJDEuX2Z1bmN0aW9uOgogICAgICAvLyBGdW5jdGlvbiBhcyBzb2xlIGJvZHkgb2YgZWl0aGVyIGFuIGlmIHN0YXRlbWVudCBvciBhIGxhYmVsZWQgc3RhdGVtZW50CiAgICAgIC8vIHdvcmtzLCBidXQgbm90IHdoZW4gaXQgaXMgcGFydCBvZiBhIGxhYmVsZWQgc3RhdGVtZW50IHRoYXQgaXMgdGhlIHNvbGUKICAgICAgLy8gYm9keSBvZiBhbiBpZiBzdGF0ZW1lbnQuCiAgICAgIGlmICgoY29udGV4dCAmJiAodGhpcy5zdHJpY3QgfHwgY29udGV4dCAhPT0gImlmIiAmJiBjb250ZXh0ICE9PSAibGFiZWwiKSkgJiYgdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KICAgICAgcmV0dXJuIHRoaXMucGFyc2VGdW5jdGlvblN0YXRlbWVudChub2RlLCBmYWxzZSwgIWNvbnRleHQpCiAgICBjYXNlIHR5cGVzJDEuX2NsYXNzOgogICAgICBpZiAoY29udGV4dCkgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgICByZXR1cm4gdGhpcy5wYXJzZUNsYXNzKG5vZGUsIHRydWUpCiAgICBjYXNlIHR5cGVzJDEuX2lmOiByZXR1cm4gdGhpcy5wYXJzZUlmU3RhdGVtZW50KG5vZGUpCiAgICBjYXNlIHR5cGVzJDEuX3JldHVybjogcmV0dXJuIHRoaXMucGFyc2VSZXR1cm5TdGF0ZW1lbnQobm9kZSkKICAgIGNhc2UgdHlwZXMkMS5fc3dpdGNoOiByZXR1cm4gdGhpcy5wYXJzZVN3aXRjaFN0YXRlbWVudChub2RlKQogICAgY2FzZSB0eXBlcyQxLl90aHJvdzogcmV0dXJuIHRoaXMucGFyc2VUaHJvd1N0YXRlbWVudChub2RlKQogICAgY2FzZSB0eXBlcyQxLl90cnk6IHJldHVybiB0aGlzLnBhcnNlVHJ5U3RhdGVtZW50KG5vZGUpCiAgICBjYXNlIHR5cGVzJDEuX2NvbnN0OiBjYXNlIHR5cGVzJDEuX3ZhcjoKICAgICAga2luZCA9IGtpbmQgfHwgdGhpcy52YWx1ZTsKICAgICAgaWYgKGNvbnRleHQgJiYga2luZCAhPT0gInZhciIpIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KICAgICAgcmV0dXJuIHRoaXMucGFyc2VWYXJTdGF0ZW1lbnQobm9kZSwga2luZCkKICAgIGNhc2UgdHlwZXMkMS5fd2hpbGU6IHJldHVybiB0aGlzLnBhcnNlV2hpbGVTdGF0ZW1lbnQobm9kZSkKICAgIGNhc2UgdHlwZXMkMS5fd2l0aDogcmV0dXJuIHRoaXMucGFyc2VXaXRoU3RhdGVtZW50KG5vZGUpCiAgICBjYXNlIHR5cGVzJDEuYnJhY2VMOiByZXR1cm4gdGhpcy5wYXJzZUJsb2NrKHRydWUsIG5vZGUpCiAgICBjYXNlIHR5cGVzJDEuc2VtaTogcmV0dXJuIHRoaXMucGFyc2VFbXB0eVN0YXRlbWVudChub2RlKQogICAgY2FzZSB0eXBlcyQxLl9leHBvcnQ6CiAgICBjYXNlIHR5cGVzJDEuX2ltcG9ydDoKICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+IDEwICYmIHN0YXJ0dHlwZSA9PT0gdHlwZXMkMS5faW1wb3J0KSB7CiAgICAgICAgc2tpcFdoaXRlU3BhY2UubGFzdEluZGV4ID0gdGhpcy5wb3M7CiAgICAgICAgdmFyIHNraXAgPSBza2lwV2hpdGVTcGFjZS5leGVjKHRoaXMuaW5wdXQpOwogICAgICAgIHZhciBuZXh0ID0gdGhpcy5wb3MgKyBza2lwWzBdLmxlbmd0aCwgbmV4dENoID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KG5leHQpOwogICAgICAgIGlmIChuZXh0Q2ggPT09IDQwIHx8IG5leHRDaCA9PT0gNDYpIC8vICcoJyBvciAnLicKICAgICAgICAgIHsgcmV0dXJuIHRoaXMucGFyc2VFeHByZXNzaW9uU3RhdGVtZW50KG5vZGUsIHRoaXMucGFyc2VFeHByZXNzaW9uKCkpIH0KICAgICAgfQoKICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuYWxsb3dJbXBvcnRFeHBvcnRFdmVyeXdoZXJlKSB7CiAgICAgICAgaWYgKCF0b3BMZXZlbCkKICAgICAgICAgIHsgdGhpcy5yYWlzZSh0aGlzLnN0YXJ0LCAiJ2ltcG9ydCcgYW5kICdleHBvcnQnIG1heSBvbmx5IGFwcGVhciBhdCB0aGUgdG9wIGxldmVsIik7IH0KICAgICAgICBpZiAoIXRoaXMuaW5Nb2R1bGUpCiAgICAgICAgICB7IHRoaXMucmFpc2UodGhpcy5zdGFydCwgIidpbXBvcnQnIGFuZCAnZXhwb3J0JyBtYXkgYXBwZWFyIG9ubHkgd2l0aCAnc291cmNlVHlwZTogbW9kdWxlJyIpOyB9CiAgICAgIH0KICAgICAgcmV0dXJuIHN0YXJ0dHlwZSA9PT0gdHlwZXMkMS5faW1wb3J0ID8gdGhpcy5wYXJzZUltcG9ydChub2RlKSA6IHRoaXMucGFyc2VFeHBvcnQobm9kZSwgZXhwb3J0cykKCiAgICAgIC8vIElmIHRoZSBzdGF0ZW1lbnQgZG9lcyBub3Qgc3RhcnQgd2l0aCBhIHN0YXRlbWVudCBrZXl3b3JkIG9yIGEKICAgICAgLy8gYnJhY2UsIGl0J3MgYW4gRXhwcmVzc2lvblN0YXRlbWVudCBvciBMYWJlbGVkU3RhdGVtZW50LiBXZQogICAgICAvLyBzaW1wbHkgc3RhcnQgcGFyc2luZyBhbiBleHByZXNzaW9uLCBhbmQgYWZ0ZXJ3YXJkcywgaWYgdGhlCiAgICAgIC8vIG5leHQgdG9rZW4gaXMgYSBjb2xvbiBhbmQgdGhlIGV4cHJlc3Npb24gd2FzIGEgc2ltcGxlCiAgICAgIC8vIElkZW50aWZpZXIgbm9kZSwgd2Ugc3dpdGNoIHRvIGludGVycHJldGluZyBpdCBhcyBhIGxhYmVsLgogICAgZGVmYXVsdDoKICAgICAgaWYgKHRoaXMuaXNBc3luY0Z1bmN0aW9uKCkpIHsKICAgICAgICBpZiAoY29udGV4dCkgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgICAgIHRoaXMubmV4dCgpOwogICAgICAgIHJldHVybiB0aGlzLnBhcnNlRnVuY3Rpb25TdGF0ZW1lbnQobm9kZSwgdHJ1ZSwgIWNvbnRleHQpCiAgICAgIH0KCiAgICAgIHZhciBtYXliZU5hbWUgPSB0aGlzLnZhbHVlLCBleHByID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oKTsKICAgICAgaWYgKHN0YXJ0dHlwZSA9PT0gdHlwZXMkMS5uYW1lICYmIGV4cHIudHlwZSA9PT0gIklkZW50aWZpZXIiICYmIHRoaXMuZWF0KHR5cGVzJDEuY29sb24pKQogICAgICAgIHsgcmV0dXJuIHRoaXMucGFyc2VMYWJlbGVkU3RhdGVtZW50KG5vZGUsIG1heWJlTmFtZSwgZXhwciwgY29udGV4dCkgfQogICAgICBlbHNlIHsgcmV0dXJuIHRoaXMucGFyc2VFeHByZXNzaW9uU3RhdGVtZW50KG5vZGUsIGV4cHIpIH0KICAgIH0KICB9OwoKICBwcCQ4LnBhcnNlQnJlYWtDb250aW51ZVN0YXRlbWVudCA9IGZ1bmN0aW9uKG5vZGUsIGtleXdvcmQpIHsKICAgIHZhciBpc0JyZWFrID0ga2V5d29yZCA9PT0gImJyZWFrIjsKICAgIHRoaXMubmV4dCgpOwogICAgaWYgKHRoaXMuZWF0KHR5cGVzJDEuc2VtaSkgfHwgdGhpcy5pbnNlcnRTZW1pY29sb24oKSkgeyBub2RlLmxhYmVsID0gbnVsbDsgfQogICAgZWxzZSBpZiAodGhpcy50eXBlICE9PSB0eXBlcyQxLm5hbWUpIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KICAgIGVsc2UgewogICAgICBub2RlLmxhYmVsID0gdGhpcy5wYXJzZUlkZW50KCk7CiAgICAgIHRoaXMuc2VtaWNvbG9uKCk7CiAgICB9CgogICAgLy8gVmVyaWZ5IHRoYXQgdGhlcmUgaXMgYW4gYWN0dWFsIGRlc3RpbmF0aW9uIHRvIGJyZWFrIG9yCiAgICAvLyBjb250aW51ZSB0by4KICAgIHZhciBpID0gMDsKICAgIGZvciAoOyBpIDwgdGhpcy5sYWJlbHMubGVuZ3RoOyArK2kpIHsKICAgICAgdmFyIGxhYiA9IHRoaXMubGFiZWxzW2ldOwogICAgICBpZiAobm9kZS5sYWJlbCA9PSBudWxsIHx8IGxhYi5uYW1lID09PSBub2RlLmxhYmVsLm5hbWUpIHsKICAgICAgICBpZiAobGFiLmtpbmQgIT0gbnVsbCAmJiAoaXNCcmVhayB8fCBsYWIua2luZCA9PT0gImxvb3AiKSkgeyBicmVhayB9CiAgICAgICAgaWYgKG5vZGUubGFiZWwgJiYgaXNCcmVhaykgeyBicmVhayB9CiAgICAgIH0KICAgIH0KICAgIGlmIChpID09PSB0aGlzLmxhYmVscy5sZW5ndGgpIHsgdGhpcy5yYWlzZShub2RlLnN0YXJ0LCAiVW5zeW50YWN0aWMgIiArIGtleXdvcmQpOyB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsIGlzQnJlYWsgPyAiQnJlYWtTdGF0ZW1lbnQiIDogIkNvbnRpbnVlU3RhdGVtZW50IikKICB9OwoKICBwcCQ4LnBhcnNlRGVidWdnZXJTdGF0ZW1lbnQgPSBmdW5jdGlvbihub2RlKSB7CiAgICB0aGlzLm5leHQoKTsKICAgIHRoaXMuc2VtaWNvbG9uKCk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJEZWJ1Z2dlclN0YXRlbWVudCIpCiAgfTsKCiAgcHAkOC5wYXJzZURvU3RhdGVtZW50ID0gZnVuY3Rpb24obm9kZSkgewogICAgdGhpcy5uZXh0KCk7CiAgICB0aGlzLmxhYmVscy5wdXNoKGxvb3BMYWJlbCk7CiAgICBub2RlLmJvZHkgPSB0aGlzLnBhcnNlU3RhdGVtZW50KCJkbyIpOwogICAgdGhpcy5sYWJlbHMucG9wKCk7CiAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLl93aGlsZSk7CiAgICBub2RlLnRlc3QgPSB0aGlzLnBhcnNlUGFyZW5FeHByZXNzaW9uKCk7CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpCiAgICAgIHsgdGhpcy5lYXQodHlwZXMkMS5zZW1pKTsgfQogICAgZWxzZQogICAgICB7IHRoaXMuc2VtaWNvbG9uKCk7IH0KICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkRvV2hpbGVTdGF0ZW1lbnQiKQogIH07CgogIC8vIERpc2FtYmlndWF0aW5nIGJldHdlZW4gYSBgZm9yYCBhbmQgYSBgZm9yYC9gaW5gIG9yIGBmb3JgL2BvZmAKICAvLyBsb29wIGlzIG5vbi10cml2aWFsLiBCYXNpY2FsbHksIHdlIGhhdmUgdG8gcGFyc2UgdGhlIGluaXQgYHZhcmAKICAvLyBzdGF0ZW1lbnQgb3IgZXhwcmVzc2lvbiwgZGlzYWxsb3dpbmcgdGhlIGBpbmAgb3BlcmF0b3IgKHNlZQogIC8vIHRoZSBzZWNvbmQgcGFyYW1ldGVyIHRvIGBwYXJzZUV4cHJlc3Npb25gKSwgYW5kIHRoZW4gY2hlY2sKICAvLyB3aGV0aGVyIHRoZSBuZXh0IHRva2VuIGlzIGBpbmAgb3IgYG9mYC4gV2hlbiB0aGVyZSBpcyBubyBpbml0CiAgLy8gcGFydCAoc2VtaWNvbG9uIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBvcGVuaW5nIHBhcmVudGhlc2lzKSwgaXQKICAvLyBpcyBhIHJlZ3VsYXIgYGZvcmAgbG9vcC4KCiAgcHAkOC5wYXJzZUZvclN0YXRlbWVudCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHRoaXMubmV4dCgpOwogICAgdmFyIGF3YWl0QXQgPSAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDkgJiYgdGhpcy5jYW5Bd2FpdCAmJiB0aGlzLmVhdENvbnRleHR1YWwoImF3YWl0IikpID8gdGhpcy5sYXN0VG9rU3RhcnQgOiAtMTsKICAgIHRoaXMubGFiZWxzLnB1c2gobG9vcExhYmVsKTsKICAgIHRoaXMuZW50ZXJTY29wZSgwKTsKICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEucGFyZW5MKTsKICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuc2VtaSkgewogICAgICBpZiAoYXdhaXRBdCA+IC0xKSB7IHRoaXMudW5leHBlY3RlZChhd2FpdEF0KTsgfQogICAgICByZXR1cm4gdGhpcy5wYXJzZUZvcihub2RlLCBudWxsKQogICAgfQogICAgdmFyIGlzTGV0ID0gdGhpcy5pc0xldCgpOwogICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5fdmFyIHx8IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5fY29uc3QgfHwgaXNMZXQpIHsKICAgICAgdmFyIGluaXQkMSA9IHRoaXMuc3RhcnROb2RlKCksIGtpbmQgPSBpc0xldCA/ICJsZXQiIDogdGhpcy52YWx1ZTsKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIHRoaXMucGFyc2VWYXIoaW5pdCQxLCB0cnVlLCBraW5kKTsKICAgICAgdGhpcy5maW5pc2hOb2RlKGluaXQkMSwgIlZhcmlhYmxlRGVjbGFyYXRpb24iKTsKICAgICAgaWYgKCh0aGlzLnR5cGUgPT09IHR5cGVzJDEuX2luIHx8ICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNiAmJiB0aGlzLmlzQ29udGV4dHVhbCgib2YiKSkpICYmIGluaXQkMS5kZWNsYXJhdGlvbnMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5KSB7CiAgICAgICAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLl9pbikgewogICAgICAgICAgICBpZiAoYXdhaXRBdCA+IC0xKSB7IHRoaXMudW5leHBlY3RlZChhd2FpdEF0KTsgfQogICAgICAgICAgfSBlbHNlIHsgbm9kZS5hd2FpdCA9IGF3YWl0QXQgPiAtMTsgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUZvckluKG5vZGUsIGluaXQkMSkKICAgICAgfQogICAgICBpZiAoYXdhaXRBdCA+IC0xKSB7IHRoaXMudW5leHBlY3RlZChhd2FpdEF0KTsgfQogICAgICByZXR1cm4gdGhpcy5wYXJzZUZvcihub2RlLCBpbml0JDEpCiAgICB9CiAgICB2YXIgc3RhcnRzV2l0aExldCA9IHRoaXMuaXNDb250ZXh0dWFsKCJsZXQiKSwgaXNGb3JPZiA9IGZhbHNlOwogICAgdmFyIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMgPSBuZXcgRGVzdHJ1Y3R1cmluZ0Vycm9yczsKICAgIHZhciBpbml0ID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oYXdhaXRBdCA+IC0xID8gImF3YWl0IiA6IHRydWUsIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpOwogICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5faW4gfHwgKGlzRm9yT2YgPSB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNiAmJiB0aGlzLmlzQ29udGV4dHVhbCgib2YiKSkpIHsKICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5KSB7CiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5faW4pIHsKICAgICAgICAgIGlmIChhd2FpdEF0ID4gLTEpIHsgdGhpcy51bmV4cGVjdGVkKGF3YWl0QXQpOyB9CiAgICAgICAgfSBlbHNlIHsgbm9kZS5hd2FpdCA9IGF3YWl0QXQgPiAtMTsgfQogICAgICB9CiAgICAgIGlmIChzdGFydHNXaXRoTGV0ICYmIGlzRm9yT2YpIHsgdGhpcy5yYWlzZShpbml0LnN0YXJ0LCAiVGhlIGxlZnQtaGFuZCBzaWRlIG9mIGEgZm9yLW9mIGxvb3AgbWF5IG5vdCBzdGFydCB3aXRoICdsZXQnLiIpOyB9CiAgICAgIHRoaXMudG9Bc3NpZ25hYmxlKGluaXQsIGZhbHNlLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTsKICAgICAgdGhpcy5jaGVja0xWYWxQYXR0ZXJuKGluaXQpOwogICAgICByZXR1cm4gdGhpcy5wYXJzZUZvckluKG5vZGUsIGluaXQpCiAgICB9IGVsc2UgewogICAgICB0aGlzLmNoZWNrRXhwcmVzc2lvbkVycm9ycyhyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLCB0cnVlKTsKICAgIH0KICAgIGlmIChhd2FpdEF0ID4gLTEpIHsgdGhpcy51bmV4cGVjdGVkKGF3YWl0QXQpOyB9CiAgICByZXR1cm4gdGhpcy5wYXJzZUZvcihub2RlLCBpbml0KQogIH07CgogIHBwJDgucGFyc2VGdW5jdGlvblN0YXRlbWVudCA9IGZ1bmN0aW9uKG5vZGUsIGlzQXN5bmMsIGRlY2xhcmF0aW9uUG9zaXRpb24pIHsKICAgIHRoaXMubmV4dCgpOwogICAgcmV0dXJuIHRoaXMucGFyc2VGdW5jdGlvbihub2RlLCBGVU5DX1NUQVRFTUVOVCB8IChkZWNsYXJhdGlvblBvc2l0aW9uID8gMCA6IEZVTkNfSEFOR0lOR19TVEFURU1FTlQpLCBmYWxzZSwgaXNBc3luYykKICB9OwoKICBwcCQ4LnBhcnNlSWZTdGF0ZW1lbnQgPSBmdW5jdGlvbihub2RlKSB7CiAgICB0aGlzLm5leHQoKTsKICAgIG5vZGUudGVzdCA9IHRoaXMucGFyc2VQYXJlbkV4cHJlc3Npb24oKTsKICAgIC8vIGFsbG93IGZ1bmN0aW9uIGRlY2xhcmF0aW9ucyBpbiBicmFuY2hlcywgYnV0IG9ubHkgaW4gbm9uLXN0cmljdCBtb2RlCiAgICBub2RlLmNvbnNlcXVlbnQgPSB0aGlzLnBhcnNlU3RhdGVtZW50KCJpZiIpOwogICAgbm9kZS5hbHRlcm5hdGUgPSB0aGlzLmVhdCh0eXBlcyQxLl9lbHNlKSA/IHRoaXMucGFyc2VTdGF0ZW1lbnQoImlmIikgOiBudWxsOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiSWZTdGF0ZW1lbnQiKQogIH07CgogIHBwJDgucGFyc2VSZXR1cm5TdGF0ZW1lbnQgPSBmdW5jdGlvbihub2RlKSB7CiAgICBpZiAoIXRoaXMuaW5GdW5jdGlvbiAmJiAhdGhpcy5vcHRpb25zLmFsbG93UmV0dXJuT3V0c2lkZUZ1bmN0aW9uKQogICAgICB7IHRoaXMucmFpc2UodGhpcy5zdGFydCwgIidyZXR1cm4nIG91dHNpZGUgb2YgZnVuY3Rpb24iKTsgfQogICAgdGhpcy5uZXh0KCk7CgogICAgLy8gSW4gYHJldHVybmAgKGFuZCBgYnJlYWtgL2Bjb250aW51ZWApLCB0aGUga2V5d29yZHMgd2l0aAogICAgLy8gb3B0aW9uYWwgYXJndW1lbnRzLCB3ZSBlYWdlcmx5IGxvb2sgZm9yIGEgc2VtaWNvbG9uIG9yIHRoZQogICAgLy8gcG9zc2liaWxpdHkgdG8gaW5zZXJ0IG9uZS4KCiAgICBpZiAodGhpcy5lYXQodHlwZXMkMS5zZW1pKSB8fCB0aGlzLmluc2VydFNlbWljb2xvbigpKSB7IG5vZGUuYXJndW1lbnQgPSBudWxsOyB9CiAgICBlbHNlIHsgbm9kZS5hcmd1bWVudCA9IHRoaXMucGFyc2VFeHByZXNzaW9uKCk7IHRoaXMuc2VtaWNvbG9uKCk7IH0KICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlJldHVyblN0YXRlbWVudCIpCiAgfTsKCiAgcHAkOC5wYXJzZVN3aXRjaFN0YXRlbWVudCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHRoaXMubmV4dCgpOwogICAgbm9kZS5kaXNjcmltaW5hbnQgPSB0aGlzLnBhcnNlUGFyZW5FeHByZXNzaW9uKCk7CiAgICBub2RlLmNhc2VzID0gW107CiAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLmJyYWNlTCk7CiAgICB0aGlzLmxhYmVscy5wdXNoKHN3aXRjaExhYmVsKTsKICAgIHRoaXMuZW50ZXJTY29wZSgwKTsKCiAgICAvLyBTdGF0ZW1lbnRzIHVuZGVyIG11c3QgYmUgZ3JvdXBlZCAoYnkgbGFiZWwpIGluIFN3aXRjaENhc2UKICAgIC8vIG5vZGVzLiBgY3VyYCBpcyB1c2VkIHRvIGtlZXAgdGhlIG5vZGUgdGhhdCB3ZSBhcmUgY3VycmVudGx5CiAgICAvLyBhZGRpbmcgc3RhdGVtZW50cyB0by4KCiAgICB2YXIgY3VyOwogICAgZm9yICh2YXIgc2F3RGVmYXVsdCA9IGZhbHNlOyB0aGlzLnR5cGUgIT09IHR5cGVzJDEuYnJhY2VSOykgewogICAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLl9jYXNlIHx8IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5fZGVmYXVsdCkgewogICAgICAgIHZhciBpc0Nhc2UgPSB0aGlzLnR5cGUgPT09IHR5cGVzJDEuX2Nhc2U7CiAgICAgICAgaWYgKGN1cikgeyB0aGlzLmZpbmlzaE5vZGUoY3VyLCAiU3dpdGNoQ2FzZSIpOyB9CiAgICAgICAgbm9kZS5jYXNlcy5wdXNoKGN1ciA9IHRoaXMuc3RhcnROb2RlKCkpOwogICAgICAgIGN1ci5jb25zZXF1ZW50ID0gW107CiAgICAgICAgdGhpcy5uZXh0KCk7CiAgICAgICAgaWYgKGlzQ2FzZSkgewogICAgICAgICAgY3VyLnRlc3QgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoc2F3RGVmYXVsdCkgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUodGhpcy5sYXN0VG9rU3RhcnQsICJNdWx0aXBsZSBkZWZhdWx0IGNsYXVzZXMiKTsgfQogICAgICAgICAgc2F3RGVmYXVsdCA9IHRydWU7CiAgICAgICAgICBjdXIudGVzdCA9IG51bGw7CiAgICAgICAgfQogICAgICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEuY29sb24pOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICghY3VyKSB7IHRoaXMudW5leHBlY3RlZCgpOyB9CiAgICAgICAgY3VyLmNvbnNlcXVlbnQucHVzaCh0aGlzLnBhcnNlU3RhdGVtZW50KG51bGwpKTsKICAgICAgfQogICAgfQogICAgdGhpcy5leGl0U2NvcGUoKTsKICAgIGlmIChjdXIpIHsgdGhpcy5maW5pc2hOb2RlKGN1ciwgIlN3aXRjaENhc2UiKTsgfQogICAgdGhpcy5uZXh0KCk7IC8vIENsb3NpbmcgYnJhY2UKICAgIHRoaXMubGFiZWxzLnBvcCgpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiU3dpdGNoU3RhdGVtZW50IikKICB9OwoKICBwcCQ4LnBhcnNlVGhyb3dTdGF0ZW1lbnQgPSBmdW5jdGlvbihub2RlKSB7CiAgICB0aGlzLm5leHQoKTsKICAgIGlmIChsaW5lQnJlYWsudGVzdCh0aGlzLmlucHV0LnNsaWNlKHRoaXMubGFzdFRva0VuZCwgdGhpcy5zdGFydCkpKQogICAgICB7IHRoaXMucmFpc2UodGhpcy5sYXN0VG9rRW5kLCAiSWxsZWdhbCBuZXdsaW5lIGFmdGVyIHRocm93Iik7IH0KICAgIG5vZGUuYXJndW1lbnQgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpOwogICAgdGhpcy5zZW1pY29sb24oKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlRocm93U3RhdGVtZW50IikKICB9OwoKICAvLyBSZXVzZWQgZW1wdHkgYXJyYXkgYWRkZWQgZm9yIG5vZGUgZmllbGRzIHRoYXQgYXJlIGFsd2F5cyBlbXB0eS4KCiAgdmFyIGVtcHR5JDEgPSBbXTsKCiAgcHAkOC5wYXJzZVRyeVN0YXRlbWVudCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHRoaXMubmV4dCgpOwogICAgbm9kZS5ibG9jayA9IHRoaXMucGFyc2VCbG9jaygpOwogICAgbm9kZS5oYW5kbGVyID0gbnVsbDsKICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuX2NhdGNoKSB7CiAgICAgIHZhciBjbGF1c2UgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICB0aGlzLm5leHQoKTsKICAgICAgaWYgKHRoaXMuZWF0KHR5cGVzJDEucGFyZW5MKSkgewogICAgICAgIGNsYXVzZS5wYXJhbSA9IHRoaXMucGFyc2VCaW5kaW5nQXRvbSgpOwogICAgICAgIHZhciBzaW1wbGUgPSBjbGF1c2UucGFyYW0udHlwZSA9PT0gIklkZW50aWZpZXIiOwogICAgICAgIHRoaXMuZW50ZXJTY29wZShzaW1wbGUgPyBTQ09QRV9TSU1QTEVfQ0FUQ0ggOiAwKTsKICAgICAgICB0aGlzLmNoZWNrTFZhbFBhdHRlcm4oY2xhdXNlLnBhcmFtLCBzaW1wbGUgPyBCSU5EX1NJTVBMRV9DQVRDSCA6IEJJTkRfTEVYSUNBTCk7CiAgICAgICAgdGhpcy5leHBlY3QodHlwZXMkMS5wYXJlblIpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPCAxMCkgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgICAgIGNsYXVzZS5wYXJhbSA9IG51bGw7CiAgICAgICAgdGhpcy5lbnRlclNjb3BlKDApOwogICAgICB9CiAgICAgIGNsYXVzZS5ib2R5ID0gdGhpcy5wYXJzZUJsb2NrKGZhbHNlKTsKICAgICAgdGhpcy5leGl0U2NvcGUoKTsKICAgICAgbm9kZS5oYW5kbGVyID0gdGhpcy5maW5pc2hOb2RlKGNsYXVzZSwgIkNhdGNoQ2xhdXNlIik7CiAgICB9CiAgICBub2RlLmZpbmFsaXplciA9IHRoaXMuZWF0KHR5cGVzJDEuX2ZpbmFsbHkpID8gdGhpcy5wYXJzZUJsb2NrKCkgOiBudWxsOwogICAgaWYgKCFub2RlLmhhbmRsZXIgJiYgIW5vZGUuZmluYWxpemVyKQogICAgICB7IHRoaXMucmFpc2Uobm9kZS5zdGFydCwgIk1pc3NpbmcgY2F0Y2ggb3IgZmluYWxseSBjbGF1c2UiKTsgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiVHJ5U3RhdGVtZW50IikKICB9OwoKICBwcCQ4LnBhcnNlVmFyU3RhdGVtZW50ID0gZnVuY3Rpb24obm9kZSwga2luZCkgewogICAgdGhpcy5uZXh0KCk7CiAgICB0aGlzLnBhcnNlVmFyKG5vZGUsIGZhbHNlLCBraW5kKTsKICAgIHRoaXMuc2VtaWNvbG9uKCk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJWYXJpYWJsZURlY2xhcmF0aW9uIikKICB9OwoKICBwcCQ4LnBhcnNlV2hpbGVTdGF0ZW1lbnQgPSBmdW5jdGlvbihub2RlKSB7CiAgICB0aGlzLm5leHQoKTsKICAgIG5vZGUudGVzdCA9IHRoaXMucGFyc2VQYXJlbkV4cHJlc3Npb24oKTsKICAgIHRoaXMubGFiZWxzLnB1c2gobG9vcExhYmVsKTsKICAgIG5vZGUuYm9keSA9IHRoaXMucGFyc2VTdGF0ZW1lbnQoIndoaWxlIik7CiAgICB0aGlzLmxhYmVscy5wb3AoKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIldoaWxlU3RhdGVtZW50IikKICB9OwoKICBwcCQ4LnBhcnNlV2l0aFN0YXRlbWVudCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIGlmICh0aGlzLnN0cmljdCkgeyB0aGlzLnJhaXNlKHRoaXMuc3RhcnQsICInd2l0aCcgaW4gc3RyaWN0IG1vZGUiKTsgfQogICAgdGhpcy5uZXh0KCk7CiAgICBub2RlLm9iamVjdCA9IHRoaXMucGFyc2VQYXJlbkV4cHJlc3Npb24oKTsKICAgIG5vZGUuYm9keSA9IHRoaXMucGFyc2VTdGF0ZW1lbnQoIndpdGgiKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIldpdGhTdGF0ZW1lbnQiKQogIH07CgogIHBwJDgucGFyc2VFbXB0eVN0YXRlbWVudCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHRoaXMubmV4dCgpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRW1wdHlTdGF0ZW1lbnQiKQogIH07CgogIHBwJDgucGFyc2VMYWJlbGVkU3RhdGVtZW50ID0gZnVuY3Rpb24obm9kZSwgbWF5YmVOYW1lLCBleHByLCBjb250ZXh0KSB7CiAgICBmb3IgKHZhciBpJDEgPSAwLCBsaXN0ID0gdGhpcy5sYWJlbHM7IGkkMSA8IGxpc3QubGVuZ3RoOyBpJDEgKz0gMSkKICAgICAgewogICAgICB2YXIgbGFiZWwgPSBsaXN0W2kkMV07CgogICAgICBpZiAobGFiZWwubmFtZSA9PT0gbWF5YmVOYW1lKQogICAgICAgIHsgdGhpcy5yYWlzZShleHByLnN0YXJ0LCAiTGFiZWwgJyIgKyBtYXliZU5hbWUgKyAiJyBpcyBhbHJlYWR5IGRlY2xhcmVkIik7CiAgICB9IH0KICAgIHZhciBraW5kID0gdGhpcy50eXBlLmlzTG9vcCA/ICJsb29wIiA6IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5fc3dpdGNoID8gInN3aXRjaCIgOiBudWxsOwogICAgZm9yICh2YXIgaSA9IHRoaXMubGFiZWxzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgIHZhciBsYWJlbCQxID0gdGhpcy5sYWJlbHNbaV07CiAgICAgIGlmIChsYWJlbCQxLnN0YXRlbWVudFN0YXJ0ID09PSBub2RlLnN0YXJ0KSB7CiAgICAgICAgLy8gVXBkYXRlIGluZm9ybWF0aW9uIGFib3V0IHByZXZpb3VzIGxhYmVscyBvbiB0aGlzIG5vZGUKICAgICAgICBsYWJlbCQxLnN0YXRlbWVudFN0YXJ0ID0gdGhpcy5zdGFydDsKICAgICAgICBsYWJlbCQxLmtpbmQgPSBraW5kOwogICAgICB9IGVsc2UgeyBicmVhayB9CiAgICB9CiAgICB0aGlzLmxhYmVscy5wdXNoKHtuYW1lOiBtYXliZU5hbWUsIGtpbmQ6IGtpbmQsIHN0YXRlbWVudFN0YXJ0OiB0aGlzLnN0YXJ0fSk7CiAgICBub2RlLmJvZHkgPSB0aGlzLnBhcnNlU3RhdGVtZW50KGNvbnRleHQgPyBjb250ZXh0LmluZGV4T2YoImxhYmVsIikgPT09IC0xID8gY29udGV4dCArICJsYWJlbCIgOiBjb250ZXh0IDogImxhYmVsIik7CiAgICB0aGlzLmxhYmVscy5wb3AoKTsKICAgIG5vZGUubGFiZWwgPSBleHByOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiTGFiZWxlZFN0YXRlbWVudCIpCiAgfTsKCiAgcHAkOC5wYXJzZUV4cHJlc3Npb25TdGF0ZW1lbnQgPSBmdW5jdGlvbihub2RlLCBleHByKSB7CiAgICBub2RlLmV4cHJlc3Npb24gPSBleHByOwogICAgdGhpcy5zZW1pY29sb24oKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkV4cHJlc3Npb25TdGF0ZW1lbnQiKQogIH07CgogIC8vIFBhcnNlIGEgc2VtaWNvbG9uLWVuY2xvc2VkIGJsb2NrIG9mIHN0YXRlbWVudHMsIGhhbmRsaW5nIGAidXNlCiAgLy8gc3RyaWN0ImAgZGVjbGFyYXRpb25zIHdoZW4gYGFsbG93U3RyaWN0YCBpcyB0cnVlICh1c2VkIGZvcgogIC8vIGZ1bmN0aW9uIGJvZGllcykuCgogIHBwJDgucGFyc2VCbG9jayA9IGZ1bmN0aW9uKGNyZWF0ZU5ld0xleGljYWxTY29wZSwgbm9kZSwgZXhpdFN0cmljdCkgewogICAgaWYgKCBjcmVhdGVOZXdMZXhpY2FsU2NvcGUgPT09IHZvaWQgMCApIGNyZWF0ZU5ld0xleGljYWxTY29wZSA9IHRydWU7CiAgICBpZiAoIG5vZGUgPT09IHZvaWQgMCApIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwoKICAgIG5vZGUuYm9keSA9IFtdOwogICAgdGhpcy5leHBlY3QodHlwZXMkMS5icmFjZUwpOwogICAgaWYgKGNyZWF0ZU5ld0xleGljYWxTY29wZSkgeyB0aGlzLmVudGVyU2NvcGUoMCk7IH0KICAgIHdoaWxlICh0aGlzLnR5cGUgIT09IHR5cGVzJDEuYnJhY2VSKSB7CiAgICAgIHZhciBzdG10ID0gdGhpcy5wYXJzZVN0YXRlbWVudChudWxsKTsKICAgICAgbm9kZS5ib2R5LnB1c2goc3RtdCk7CiAgICB9CiAgICBpZiAoZXhpdFN0cmljdCkgeyB0aGlzLnN0cmljdCA9IGZhbHNlOyB9CiAgICB0aGlzLm5leHQoKTsKICAgIGlmIChjcmVhdGVOZXdMZXhpY2FsU2NvcGUpIHsgdGhpcy5leGl0U2NvcGUoKTsgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiQmxvY2tTdGF0ZW1lbnQiKQogIH07CgogIC8vIFBhcnNlIGEgcmVndWxhciBgZm9yYCBsb29wLiBUaGUgZGlzYW1iaWd1YXRpb24gY29kZSBpbgogIC8vIGBwYXJzZVN0YXRlbWVudGAgd2lsbCBhbHJlYWR5IGhhdmUgcGFyc2VkIHRoZSBpbml0IHN0YXRlbWVudCBvcgogIC8vIGV4cHJlc3Npb24uCgogIHBwJDgucGFyc2VGb3IgPSBmdW5jdGlvbihub2RlLCBpbml0KSB7CiAgICBub2RlLmluaXQgPSBpbml0OwogICAgdGhpcy5leHBlY3QodHlwZXMkMS5zZW1pKTsKICAgIG5vZGUudGVzdCA9IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5zZW1pID8gbnVsbCA6IHRoaXMucGFyc2VFeHByZXNzaW9uKCk7CiAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLnNlbWkpOwogICAgbm9kZS51cGRhdGUgPSB0aGlzLnR5cGUgPT09IHR5cGVzJDEucGFyZW5SID8gbnVsbCA6IHRoaXMucGFyc2VFeHByZXNzaW9uKCk7CiAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLnBhcmVuUik7CiAgICBub2RlLmJvZHkgPSB0aGlzLnBhcnNlU3RhdGVtZW50KCJmb3IiKTsKICAgIHRoaXMuZXhpdFNjb3BlKCk7CiAgICB0aGlzLmxhYmVscy5wb3AoKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkZvclN0YXRlbWVudCIpCiAgfTsKCiAgLy8gUGFyc2UgYSBgZm9yYC9gaW5gIGFuZCBgZm9yYC9gb2ZgIGxvb3AsIHdoaWNoIGFyZSBhbG1vc3QKICAvLyBzYW1lIGZyb20gcGFyc2VyJ3MgcGVyc3BlY3RpdmUuCgogIHBwJDgucGFyc2VGb3JJbiA9IGZ1bmN0aW9uKG5vZGUsIGluaXQpIHsKICAgIHZhciBpc0ZvckluID0gdGhpcy50eXBlID09PSB0eXBlcyQxLl9pbjsKICAgIHRoaXMubmV4dCgpOwoKICAgIGlmICgKICAgICAgaW5pdC50eXBlID09PSAiVmFyaWFibGVEZWNsYXJhdGlvbiIgJiYKICAgICAgaW5pdC5kZWNsYXJhdGlvbnNbMF0uaW5pdCAhPSBudWxsICYmCiAgICAgICgKICAgICAgICAhaXNGb3JJbiB8fAogICAgICAgIHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA8IDggfHwKICAgICAgICB0aGlzLnN0cmljdCB8fAogICAgICAgIGluaXQua2luZCAhPT0gInZhciIgfHwKICAgICAgICBpbml0LmRlY2xhcmF0aW9uc1swXS5pZC50eXBlICE9PSAiSWRlbnRpZmllciIKICAgICAgKQogICAgKSB7CiAgICAgIHRoaXMucmFpc2UoCiAgICAgICAgaW5pdC5zdGFydCwKICAgICAgICAoKGlzRm9ySW4gPyAiZm9yLWluIiA6ICJmb3Itb2YiKSArICIgbG9vcCB2YXJpYWJsZSBkZWNsYXJhdGlvbiBtYXkgbm90IGhhdmUgYW4gaW5pdGlhbGl6ZXIiKQogICAgICApOwogICAgfQogICAgbm9kZS5sZWZ0ID0gaW5pdDsKICAgIG5vZGUucmlnaHQgPSBpc0ZvckluID8gdGhpcy5wYXJzZUV4cHJlc3Npb24oKSA6IHRoaXMucGFyc2VNYXliZUFzc2lnbigpOwogICAgdGhpcy5leHBlY3QodHlwZXMkMS5wYXJlblIpOwogICAgbm9kZS5ib2R5ID0gdGhpcy5wYXJzZVN0YXRlbWVudCgiZm9yIik7CiAgICB0aGlzLmV4aXRTY29wZSgpOwogICAgdGhpcy5sYWJlbHMucG9wKCk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsIGlzRm9ySW4gPyAiRm9ySW5TdGF0ZW1lbnQiIDogIkZvck9mU3RhdGVtZW50IikKICB9OwoKICAvLyBQYXJzZSBhIGxpc3Qgb2YgdmFyaWFibGUgZGVjbGFyYXRpb25zLgoKICBwcCQ4LnBhcnNlVmFyID0gZnVuY3Rpb24obm9kZSwgaXNGb3IsIGtpbmQpIHsKICAgIG5vZGUuZGVjbGFyYXRpb25zID0gW107CiAgICBub2RlLmtpbmQgPSBraW5kOwogICAgZm9yICg7OykgewogICAgICB2YXIgZGVjbCA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIHRoaXMucGFyc2VWYXJJZChkZWNsLCBraW5kKTsKICAgICAgaWYgKHRoaXMuZWF0KHR5cGVzJDEuZXEpKSB7CiAgICAgICAgZGVjbC5pbml0ID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKGlzRm9yKTsKICAgICAgfSBlbHNlIGlmIChraW5kID09PSAiY29uc3QiICYmICEodGhpcy50eXBlID09PSB0eXBlcyQxLl9pbiB8fCAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYgJiYgdGhpcy5pc0NvbnRleHR1YWwoIm9mIikpKSkgewogICAgICAgIHRoaXMudW5leHBlY3RlZCgpOwogICAgICB9IGVsc2UgaWYgKGRlY2wuaWQudHlwZSAhPT0gIklkZW50aWZpZXIiICYmICEoaXNGb3IgJiYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5faW4gfHwgdGhpcy5pc0NvbnRleHR1YWwoIm9mIikpKSkgewogICAgICAgIHRoaXMucmFpc2UodGhpcy5sYXN0VG9rRW5kLCAiQ29tcGxleCBiaW5kaW5nIHBhdHRlcm5zIHJlcXVpcmUgYW4gaW5pdGlhbGl6YXRpb24gdmFsdWUiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkZWNsLmluaXQgPSBudWxsOwogICAgICB9CiAgICAgIG5vZGUuZGVjbGFyYXRpb25zLnB1c2godGhpcy5maW5pc2hOb2RlKGRlY2wsICJWYXJpYWJsZURlY2xhcmF0b3IiKSk7CiAgICAgIGlmICghdGhpcy5lYXQodHlwZXMkMS5jb21tYSkpIHsgYnJlYWsgfQogICAgfQogICAgcmV0dXJuIG5vZGUKICB9OwoKICBwcCQ4LnBhcnNlVmFySWQgPSBmdW5jdGlvbihkZWNsLCBraW5kKSB7CiAgICBkZWNsLmlkID0gdGhpcy5wYXJzZUJpbmRpbmdBdG9tKCk7CiAgICB0aGlzLmNoZWNrTFZhbFBhdHRlcm4oZGVjbC5pZCwga2luZCA9PT0gInZhciIgPyBCSU5EX1ZBUiA6IEJJTkRfTEVYSUNBTCwgZmFsc2UpOwogIH07CgogIHZhciBGVU5DX1NUQVRFTUVOVCA9IDEsIEZVTkNfSEFOR0lOR19TVEFURU1FTlQgPSAyLCBGVU5DX05VTExBQkxFX0lEID0gNDsKCiAgLy8gUGFyc2UgYSBmdW5jdGlvbiBkZWNsYXJhdGlvbiBvciBsaXRlcmFsIChkZXBlbmRpbmcgb24gdGhlCiAgLy8gYHN0YXRlbWVudCAmIEZVTkNfU1RBVEVNRU5UYCkuCgogIC8vIFJlbW92ZSBgYWxsb3dFeHByZXNzaW9uQm9keWAgZm9yIDcuMC4wLCBhcyBpdCBpcyBvbmx5IGNhbGxlZCB3aXRoIGZhbHNlCiAgcHAkOC5wYXJzZUZ1bmN0aW9uID0gZnVuY3Rpb24obm9kZSwgc3RhdGVtZW50LCBhbGxvd0V4cHJlc3Npb25Cb2R5LCBpc0FzeW5jLCBmb3JJbml0KSB7CiAgICB0aGlzLmluaXRGdW5jdGlvbihub2RlKTsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOSB8fCB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNiAmJiAhaXNBc3luYykgewogICAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLnN0YXIgJiYgKHN0YXRlbWVudCAmIEZVTkNfSEFOR0lOR19TVEFURU1FTlQpKQogICAgICAgIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KICAgICAgbm9kZS5nZW5lcmF0b3IgPSB0aGlzLmVhdCh0eXBlcyQxLnN0YXIpOwogICAgfQogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA4KQogICAgICB7IG5vZGUuYXN5bmMgPSAhIWlzQXN5bmM7IH0KCiAgICBpZiAoc3RhdGVtZW50ICYgRlVOQ19TVEFURU1FTlQpIHsKICAgICAgbm9kZS5pZCA9IChzdGF0ZW1lbnQgJiBGVU5DX05VTExBQkxFX0lEKSAmJiB0aGlzLnR5cGUgIT09IHR5cGVzJDEubmFtZSA/IG51bGwgOiB0aGlzLnBhcnNlSWRlbnQoKTsKICAgICAgaWYgKG5vZGUuaWQgJiYgIShzdGF0ZW1lbnQgJiBGVU5DX0hBTkdJTkdfU1RBVEVNRU5UKSkKICAgICAgICAvLyBJZiBpdCBpcyBhIHJlZ3VsYXIgZnVuY3Rpb24gZGVjbGFyYXRpb24gaW4gc2xvcHB5IG1vZGUsIHRoZW4gaXQgaXMKICAgICAgICAvLyBzdWJqZWN0IHRvIEFubmV4IEIgc2VtYW50aWNzIChCSU5EX0ZVTkNUSU9OKS4gT3RoZXJ3aXNlLCB0aGUgYmluZGluZwogICAgICAgIC8vIG1vZGUgZGVwZW5kcyBvbiBwcm9wZXJ0aWVzIG9mIHRoZSBjdXJyZW50IHNjb3BlIChzZWUKICAgICAgICAvLyB0cmVhdEZ1bmN0aW9uc0FzVmFyKS4KICAgICAgICB7IHRoaXMuY2hlY2tMVmFsU2ltcGxlKG5vZGUuaWQsICh0aGlzLnN0cmljdCB8fCBub2RlLmdlbmVyYXRvciB8fCBub2RlLmFzeW5jKSA/IHRoaXMudHJlYXRGdW5jdGlvbnNBc1ZhciA/IEJJTkRfVkFSIDogQklORF9MRVhJQ0FMIDogQklORF9GVU5DVElPTik7IH0KICAgIH0KCiAgICB2YXIgb2xkWWllbGRQb3MgPSB0aGlzLnlpZWxkUG9zLCBvbGRBd2FpdFBvcyA9IHRoaXMuYXdhaXRQb3MsIG9sZEF3YWl0SWRlbnRQb3MgPSB0aGlzLmF3YWl0SWRlbnRQb3M7CiAgICB0aGlzLnlpZWxkUG9zID0gMDsKICAgIHRoaXMuYXdhaXRQb3MgPSAwOwogICAgdGhpcy5hd2FpdElkZW50UG9zID0gMDsKICAgIHRoaXMuZW50ZXJTY29wZShmdW5jdGlvbkZsYWdzKG5vZGUuYXN5bmMsIG5vZGUuZ2VuZXJhdG9yKSk7CgogICAgaWYgKCEoc3RhdGVtZW50ICYgRlVOQ19TVEFURU1FTlQpKQogICAgICB7IG5vZGUuaWQgPSB0aGlzLnR5cGUgPT09IHR5cGVzJDEubmFtZSA/IHRoaXMucGFyc2VJZGVudCgpIDogbnVsbDsgfQoKICAgIHRoaXMucGFyc2VGdW5jdGlvblBhcmFtcyhub2RlKTsKICAgIHRoaXMucGFyc2VGdW5jdGlvbkJvZHkobm9kZSwgYWxsb3dFeHByZXNzaW9uQm9keSwgZmFsc2UsIGZvckluaXQpOwoKICAgIHRoaXMueWllbGRQb3MgPSBvbGRZaWVsZFBvczsKICAgIHRoaXMuYXdhaXRQb3MgPSBvbGRBd2FpdFBvczsKICAgIHRoaXMuYXdhaXRJZGVudFBvcyA9IG9sZEF3YWl0SWRlbnRQb3M7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsIChzdGF0ZW1lbnQgJiBGVU5DX1NUQVRFTUVOVCkgPyAiRnVuY3Rpb25EZWNsYXJhdGlvbiIgOiAiRnVuY3Rpb25FeHByZXNzaW9uIikKICB9OwoKICBwcCQ4LnBhcnNlRnVuY3Rpb25QYXJhbXMgPSBmdW5jdGlvbihub2RlKSB7CiAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLnBhcmVuTCk7CiAgICBub2RlLnBhcmFtcyA9IHRoaXMucGFyc2VCaW5kaW5nTGlzdCh0eXBlcyQxLnBhcmVuUiwgZmFsc2UsIHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA4KTsKICAgIHRoaXMuY2hlY2tZaWVsZEF3YWl0SW5EZWZhdWx0UGFyYW1zKCk7CiAgfTsKCiAgLy8gUGFyc2UgYSBjbGFzcyBkZWNsYXJhdGlvbiBvciBsaXRlcmFsIChkZXBlbmRpbmcgb24gdGhlCiAgLy8gYGlzU3RhdGVtZW50YCBwYXJhbWV0ZXIpLgoKICBwcCQ4LnBhcnNlQ2xhc3MgPSBmdW5jdGlvbihub2RlLCBpc1N0YXRlbWVudCkgewogICAgdGhpcy5uZXh0KCk7CgogICAgLy8gZWNtYS0yNjIgMTQuNiBDbGFzcyBEZWZpbml0aW9ucwogICAgLy8gQSBjbGFzcyBkZWZpbml0aW9uIGlzIGFsd2F5cyBzdHJpY3QgbW9kZSBjb2RlLgogICAgdmFyIG9sZFN0cmljdCA9IHRoaXMuc3RyaWN0OwogICAgdGhpcy5zdHJpY3QgPSB0cnVlOwoKICAgIHRoaXMucGFyc2VDbGFzc0lkKG5vZGUsIGlzU3RhdGVtZW50KTsKICAgIHRoaXMucGFyc2VDbGFzc1N1cGVyKG5vZGUpOwogICAgdmFyIHByaXZhdGVOYW1lTWFwID0gdGhpcy5lbnRlckNsYXNzQm9keSgpOwogICAgdmFyIGNsYXNzQm9keSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICB2YXIgaGFkQ29uc3RydWN0b3IgPSBmYWxzZTsKICAgIGNsYXNzQm9keS5ib2R5ID0gW107CiAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLmJyYWNlTCk7CiAgICB3aGlsZSAodGhpcy50eXBlICE9PSB0eXBlcyQxLmJyYWNlUikgewogICAgICB2YXIgZWxlbWVudCA9IHRoaXMucGFyc2VDbGFzc0VsZW1lbnQobm9kZS5zdXBlckNsYXNzICE9PSBudWxsKTsKICAgICAgaWYgKGVsZW1lbnQpIHsKICAgICAgICBjbGFzc0JvZHkuYm9keS5wdXNoKGVsZW1lbnQpOwogICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT09ICJNZXRob2REZWZpbml0aW9uIiAmJiBlbGVtZW50LmtpbmQgPT09ICJjb25zdHJ1Y3RvciIpIHsKICAgICAgICAgIGlmIChoYWRDb25zdHJ1Y3RvcikgeyB0aGlzLnJhaXNlKGVsZW1lbnQuc3RhcnQsICJEdXBsaWNhdGUgY29uc3RydWN0b3IgaW4gdGhlIHNhbWUgY2xhc3MiKTsgfQogICAgICAgICAgaGFkQ29uc3RydWN0b3IgPSB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5rZXkgJiYgZWxlbWVudC5rZXkudHlwZSA9PT0gIlByaXZhdGVJZGVudGlmaWVyIiAmJiBpc1ByaXZhdGVOYW1lQ29uZmxpY3RlZChwcml2YXRlTmFtZU1hcCwgZWxlbWVudCkpIHsKICAgICAgICAgIHRoaXMucmFpc2VSZWNvdmVyYWJsZShlbGVtZW50LmtleS5zdGFydCwgKCJJZGVudGlmaWVyICcjIiArIChlbGVtZW50LmtleS5uYW1lKSArICInIGhhcyBhbHJlYWR5IGJlZW4gZGVjbGFyZWQiKSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICB0aGlzLnN0cmljdCA9IG9sZFN0cmljdDsKICAgIHRoaXMubmV4dCgpOwogICAgbm9kZS5ib2R5ID0gdGhpcy5maW5pc2hOb2RlKGNsYXNzQm9keSwgIkNsYXNzQm9keSIpOwogICAgdGhpcy5leGl0Q2xhc3NCb2R5KCk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsIGlzU3RhdGVtZW50ID8gIkNsYXNzRGVjbGFyYXRpb24iIDogIkNsYXNzRXhwcmVzc2lvbiIpCiAgfTsKCiAgcHAkOC5wYXJzZUNsYXNzRWxlbWVudCA9IGZ1bmN0aW9uKGNvbnN0cnVjdG9yQWxsb3dzU3VwZXIpIHsKICAgIGlmICh0aGlzLmVhdCh0eXBlcyQxLnNlbWkpKSB7IHJldHVybiBudWxsIH0KCiAgICB2YXIgZWNtYVZlcnNpb24gPSB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb247CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICB2YXIga2V5TmFtZSA9ICIiOwogICAgdmFyIGlzR2VuZXJhdG9yID0gZmFsc2U7CiAgICB2YXIgaXNBc3luYyA9IGZhbHNlOwogICAgdmFyIGtpbmQgPSAibWV0aG9kIjsKICAgIHZhciBpc1N0YXRpYyA9IGZhbHNlOwoKICAgIGlmICh0aGlzLmVhdENvbnRleHR1YWwoInN0YXRpYyIpKSB7CiAgICAgIC8vIFBhcnNlIHN0YXRpYyBpbml0IGJsb2NrCiAgICAgIGlmIChlY21hVmVyc2lvbiA+PSAxMyAmJiB0aGlzLmVhdCh0eXBlcyQxLmJyYWNlTCkpIHsKICAgICAgICB0aGlzLnBhcnNlQ2xhc3NTdGF0aWNCbG9jayhub2RlKTsKICAgICAgICByZXR1cm4gbm9kZQogICAgICB9CiAgICAgIGlmICh0aGlzLmlzQ2xhc3NFbGVtZW50TmFtZVN0YXJ0KCkgfHwgdGhpcy50eXBlID09PSB0eXBlcyQxLnN0YXIpIHsKICAgICAgICBpc1N0YXRpYyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAga2V5TmFtZSA9ICJzdGF0aWMiOwogICAgICB9CiAgICB9CiAgICBub2RlLnN0YXRpYyA9IGlzU3RhdGljOwogICAgaWYgKCFrZXlOYW1lICYmIGVjbWFWZXJzaW9uID49IDggJiYgdGhpcy5lYXRDb250ZXh0dWFsKCJhc3luYyIpKSB7CiAgICAgIGlmICgodGhpcy5pc0NsYXNzRWxlbWVudE5hbWVTdGFydCgpIHx8IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5zdGFyKSAmJiAhdGhpcy5jYW5JbnNlcnRTZW1pY29sb24oKSkgewogICAgICAgIGlzQXN5bmMgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIGtleU5hbWUgPSAiYXN5bmMiOwogICAgICB9CiAgICB9CiAgICBpZiAoIWtleU5hbWUgJiYgKGVjbWFWZXJzaW9uID49IDkgfHwgIWlzQXN5bmMpICYmIHRoaXMuZWF0KHR5cGVzJDEuc3RhcikpIHsKICAgICAgaXNHZW5lcmF0b3IgPSB0cnVlOwogICAgfQogICAgaWYgKCFrZXlOYW1lICYmICFpc0FzeW5jICYmICFpc0dlbmVyYXRvcikgewogICAgICB2YXIgbGFzdFZhbHVlID0gdGhpcy52YWx1ZTsKICAgICAgaWYgKHRoaXMuZWF0Q29udGV4dHVhbCgiZ2V0IikgfHwgdGhpcy5lYXRDb250ZXh0dWFsKCJzZXQiKSkgewogICAgICAgIGlmICh0aGlzLmlzQ2xhc3NFbGVtZW50TmFtZVN0YXJ0KCkpIHsKICAgICAgICAgIGtpbmQgPSBsYXN0VmFsdWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGtleU5hbWUgPSBsYXN0VmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgLy8gUGFyc2UgZWxlbWVudCBuYW1lCiAgICBpZiAoa2V5TmFtZSkgewogICAgICAvLyAnYXN5bmMnLCAnZ2V0JywgJ3NldCcsIG9yICdzdGF0aWMnIHdlcmUgbm90IGEga2V5d29yZCBjb250ZXh0dWFsbHkuCiAgICAgIC8vIFRoZSBsYXN0IHRva2VuIGlzIGFueSBvZiB0aG9zZS4gTWFrZSBpdCB0aGUgZWxlbWVudCBuYW1lLgogICAgICBub2RlLmNvbXB1dGVkID0gZmFsc2U7CiAgICAgIG5vZGUua2V5ID0gdGhpcy5zdGFydE5vZGVBdCh0aGlzLmxhc3RUb2tTdGFydCwgdGhpcy5sYXN0VG9rU3RhcnRMb2MpOwogICAgICBub2RlLmtleS5uYW1lID0ga2V5TmFtZTsKICAgICAgdGhpcy5maW5pc2hOb2RlKG5vZGUua2V5LCAiSWRlbnRpZmllciIpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5wYXJzZUNsYXNzRWxlbWVudE5hbWUobm9kZSk7CiAgICB9CgogICAgLy8gUGFyc2UgZWxlbWVudCB2YWx1ZQogICAgaWYgKGVjbWFWZXJzaW9uIDwgMTMgfHwgdGhpcy50eXBlID09PSB0eXBlcyQxLnBhcmVuTCB8fCBraW5kICE9PSAibWV0aG9kIiB8fCBpc0dlbmVyYXRvciB8fCBpc0FzeW5jKSB7CiAgICAgIHZhciBpc0NvbnN0cnVjdG9yID0gIW5vZGUuc3RhdGljICYmIGNoZWNrS2V5TmFtZShub2RlLCAiY29uc3RydWN0b3IiKTsKICAgICAgdmFyIGFsbG93c0RpcmVjdFN1cGVyID0gaXNDb25zdHJ1Y3RvciAmJiBjb25zdHJ1Y3RvckFsbG93c1N1cGVyOwogICAgICAvLyBDb3VsZG4ndCBtb3ZlIHRoaXMgY2hlY2sgaW50byB0aGUgJ3BhcnNlQ2xhc3NNZXRob2QnIG1ldGhvZCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS4KICAgICAgaWYgKGlzQ29uc3RydWN0b3IgJiYga2luZCAhPT0gIm1ldGhvZCIpIHsgdGhpcy5yYWlzZShub2RlLmtleS5zdGFydCwgIkNvbnN0cnVjdG9yIGNhbid0IGhhdmUgZ2V0L3NldCBtb2RpZmllciIpOyB9CiAgICAgIG5vZGUua2luZCA9IGlzQ29uc3RydWN0b3IgPyAiY29uc3RydWN0b3IiIDoga2luZDsKICAgICAgdGhpcy5wYXJzZUNsYXNzTWV0aG9kKG5vZGUsIGlzR2VuZXJhdG9yLCBpc0FzeW5jLCBhbGxvd3NEaXJlY3RTdXBlcik7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnBhcnNlQ2xhc3NGaWVsZChub2RlKTsKICAgIH0KCiAgICByZXR1cm4gbm9kZQogIH07CgogIHBwJDguaXNDbGFzc0VsZW1lbnROYW1lU3RhcnQgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiAoCiAgICAgIHRoaXMudHlwZSA9PT0gdHlwZXMkMS5uYW1lIHx8CiAgICAgIHRoaXMudHlwZSA9PT0gdHlwZXMkMS5wcml2YXRlSWQgfHwKICAgICAgdGhpcy50eXBlID09PSB0eXBlcyQxLm51bSB8fAogICAgICB0aGlzLnR5cGUgPT09IHR5cGVzJDEuc3RyaW5nIHx8CiAgICAgIHRoaXMudHlwZSA9PT0gdHlwZXMkMS5icmFja2V0TCB8fAogICAgICB0aGlzLnR5cGUua2V5d29yZAogICAgKQogIH07CgogIHBwJDgucGFyc2VDbGFzc0VsZW1lbnROYW1lID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5wcml2YXRlSWQpIHsKICAgICAgaWYgKHRoaXMudmFsdWUgPT09ICJjb25zdHJ1Y3RvciIpIHsKICAgICAgICB0aGlzLnJhaXNlKHRoaXMuc3RhcnQsICJDbGFzc2VzIGNhbid0IGhhdmUgYW4gZWxlbWVudCBuYW1lZCAnI2NvbnN0cnVjdG9yJyIpOwogICAgICB9CiAgICAgIGVsZW1lbnQuY29tcHV0ZWQgPSBmYWxzZTsKICAgICAgZWxlbWVudC5rZXkgPSB0aGlzLnBhcnNlUHJpdmF0ZUlkZW50KCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnBhcnNlUHJvcGVydHlOYW1lKGVsZW1lbnQpOwogICAgfQogIH07CgogIHBwJDgucGFyc2VDbGFzc01ldGhvZCA9IGZ1bmN0aW9uKG1ldGhvZCwgaXNHZW5lcmF0b3IsIGlzQXN5bmMsIGFsbG93c0RpcmVjdFN1cGVyKSB7CiAgICAvLyBDaGVjayBrZXkgYW5kIGZsYWdzCiAgICB2YXIga2V5ID0gbWV0aG9kLmtleTsKICAgIGlmIChtZXRob2Qua2luZCA9PT0gImNvbnN0cnVjdG9yIikgewogICAgICBpZiAoaXNHZW5lcmF0b3IpIHsgdGhpcy5yYWlzZShrZXkuc3RhcnQsICJDb25zdHJ1Y3RvciBjYW4ndCBiZSBhIGdlbmVyYXRvciIpOyB9CiAgICAgIGlmIChpc0FzeW5jKSB7IHRoaXMucmFpc2Uoa2V5LnN0YXJ0LCAiQ29uc3RydWN0b3IgY2FuJ3QgYmUgYW4gYXN5bmMgbWV0aG9kIik7IH0KICAgIH0gZWxzZSBpZiAobWV0aG9kLnN0YXRpYyAmJiBjaGVja0tleU5hbWUobWV0aG9kLCAicHJvdG90eXBlIikpIHsKICAgICAgdGhpcy5yYWlzZShrZXkuc3RhcnQsICJDbGFzc2VzIG1heSBub3QgaGF2ZSBhIHN0YXRpYyBwcm9wZXJ0eSBuYW1lZCBwcm90b3R5cGUiKTsKICAgIH0KCiAgICAvLyBQYXJzZSB2YWx1ZQogICAgdmFyIHZhbHVlID0gbWV0aG9kLnZhbHVlID0gdGhpcy5wYXJzZU1ldGhvZChpc0dlbmVyYXRvciwgaXNBc3luYywgYWxsb3dzRGlyZWN0U3VwZXIpOwoKICAgIC8vIENoZWNrIHZhbHVlCiAgICBpZiAobWV0aG9kLmtpbmQgPT09ICJnZXQiICYmIHZhbHVlLnBhcmFtcy5sZW5ndGggIT09IDApCiAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHZhbHVlLnN0YXJ0LCAiZ2V0dGVyIHNob3VsZCBoYXZlIG5vIHBhcmFtcyIpOyB9CiAgICBpZiAobWV0aG9kLmtpbmQgPT09ICJzZXQiICYmIHZhbHVlLnBhcmFtcy5sZW5ndGggIT09IDEpCiAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHZhbHVlLnN0YXJ0LCAic2V0dGVyIHNob3VsZCBoYXZlIGV4YWN0bHkgb25lIHBhcmFtIik7IH0KICAgIGlmIChtZXRob2Qua2luZCA9PT0gInNldCIgJiYgdmFsdWUucGFyYW1zWzBdLnR5cGUgPT09ICJSZXN0RWxlbWVudCIpCiAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHZhbHVlLnBhcmFtc1swXS5zdGFydCwgIlNldHRlciBjYW5ub3QgdXNlIHJlc3QgcGFyYW1zIik7IH0KCiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG1ldGhvZCwgIk1ldGhvZERlZmluaXRpb24iKQogIH07CgogIHBwJDgucGFyc2VDbGFzc0ZpZWxkID0gZnVuY3Rpb24oZmllbGQpIHsKICAgIGlmIChjaGVja0tleU5hbWUoZmllbGQsICJjb25zdHJ1Y3RvciIpKSB7CiAgICAgIHRoaXMucmFpc2UoZmllbGQua2V5LnN0YXJ0LCAiQ2xhc3NlcyBjYW4ndCBoYXZlIGEgZmllbGQgbmFtZWQgJ2NvbnN0cnVjdG9yJyIpOwogICAgfSBlbHNlIGlmIChmaWVsZC5zdGF0aWMgJiYgY2hlY2tLZXlOYW1lKGZpZWxkLCAicHJvdG90eXBlIikpIHsKICAgICAgdGhpcy5yYWlzZShmaWVsZC5rZXkuc3RhcnQsICJDbGFzc2VzIGNhbid0IGhhdmUgYSBzdGF0aWMgZmllbGQgbmFtZWQgJ3Byb3RvdHlwZSciKTsKICAgIH0KCiAgICBpZiAodGhpcy5lYXQodHlwZXMkMS5lcSkpIHsKICAgICAgLy8gVG8gcmFpc2UgU3ludGF4RXJyb3IgaWYgJ2FyZ3VtZW50cycgZXhpc3RzIGluIHRoZSBpbml0aWFsaXplci4KICAgICAgdmFyIHNjb3BlID0gdGhpcy5jdXJyZW50VGhpc1Njb3BlKCk7CiAgICAgIHZhciBpbkNsYXNzRmllbGRJbml0ID0gc2NvcGUuaW5DbGFzc0ZpZWxkSW5pdDsKICAgICAgc2NvcGUuaW5DbGFzc0ZpZWxkSW5pdCA9IHRydWU7CiAgICAgIGZpZWxkLnZhbHVlID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKCk7CiAgICAgIHNjb3BlLmluQ2xhc3NGaWVsZEluaXQgPSBpbkNsYXNzRmllbGRJbml0OwogICAgfSBlbHNlIHsKICAgICAgZmllbGQudmFsdWUgPSBudWxsOwogICAgfQogICAgdGhpcy5zZW1pY29sb24oKTsKCiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKGZpZWxkLCAiUHJvcGVydHlEZWZpbml0aW9uIikKICB9OwoKICBwcCQ4LnBhcnNlQ2xhc3NTdGF0aWNCbG9jayA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIG5vZGUuYm9keSA9IFtdOwoKICAgIHZhciBvbGRMYWJlbHMgPSB0aGlzLmxhYmVsczsKICAgIHRoaXMubGFiZWxzID0gW107CiAgICB0aGlzLmVudGVyU2NvcGUoU0NPUEVfQ0xBU1NfU1RBVElDX0JMT0NLIHwgU0NPUEVfU1VQRVIpOwogICAgd2hpbGUgKHRoaXMudHlwZSAhPT0gdHlwZXMkMS5icmFjZVIpIHsKICAgICAgdmFyIHN0bXQgPSB0aGlzLnBhcnNlU3RhdGVtZW50KG51bGwpOwogICAgICBub2RlLmJvZHkucHVzaChzdG10KTsKICAgIH0KICAgIHRoaXMubmV4dCgpOwogICAgdGhpcy5leGl0U2NvcGUoKTsKICAgIHRoaXMubGFiZWxzID0gb2xkTGFiZWxzOwoKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlN0YXRpY0Jsb2NrIikKICB9OwoKICBwcCQ4LnBhcnNlQ2xhc3NJZCA9IGZ1bmN0aW9uKG5vZGUsIGlzU3RhdGVtZW50KSB7CiAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLm5hbWUpIHsKICAgICAgbm9kZS5pZCA9IHRoaXMucGFyc2VJZGVudCgpOwogICAgICBpZiAoaXNTdGF0ZW1lbnQpCiAgICAgICAgeyB0aGlzLmNoZWNrTFZhbFNpbXBsZShub2RlLmlkLCBCSU5EX0xFWElDQUwsIGZhbHNlKTsgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKGlzU3RhdGVtZW50ID09PSB0cnVlKQogICAgICAgIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KICAgICAgbm9kZS5pZCA9IG51bGw7CiAgICB9CiAgfTsKCiAgcHAkOC5wYXJzZUNsYXNzU3VwZXIgPSBmdW5jdGlvbihub2RlKSB7CiAgICBub2RlLnN1cGVyQ2xhc3MgPSB0aGlzLmVhdCh0eXBlcyQxLl9leHRlbmRzKSA/IHRoaXMucGFyc2VFeHByU3Vic2NyaXB0cyhmYWxzZSkgOiBudWxsOwogIH07CgogIHBwJDguZW50ZXJDbGFzc0JvZHkgPSBmdW5jdGlvbigpIHsKICAgIHZhciBlbGVtZW50ID0ge2RlY2xhcmVkOiBPYmplY3QuY3JlYXRlKG51bGwpLCB1c2VkOiBbXX07CiAgICB0aGlzLnByaXZhdGVOYW1lU3RhY2sucHVzaChlbGVtZW50KTsKICAgIHJldHVybiBlbGVtZW50LmRlY2xhcmVkCiAgfTsKCiAgcHAkOC5leGl0Q2xhc3NCb2R5ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgcmVmID0gdGhpcy5wcml2YXRlTmFtZVN0YWNrLnBvcCgpOwogICAgdmFyIGRlY2xhcmVkID0gcmVmLmRlY2xhcmVkOwogICAgdmFyIHVzZWQgPSByZWYudXNlZDsKICAgIHZhciBsZW4gPSB0aGlzLnByaXZhdGVOYW1lU3RhY2subGVuZ3RoOwogICAgdmFyIHBhcmVudCA9IGxlbiA9PT0gMCA/IG51bGwgOiB0aGlzLnByaXZhdGVOYW1lU3RhY2tbbGVuIC0gMV07CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVzZWQubGVuZ3RoOyArK2kpIHsKICAgICAgdmFyIGlkID0gdXNlZFtpXTsKICAgICAgaWYgKCFoYXNPd24oZGVjbGFyZWQsIGlkLm5hbWUpKSB7CiAgICAgICAgaWYgKHBhcmVudCkgewogICAgICAgICAgcGFyZW50LnVzZWQucHVzaChpZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMucmFpc2VSZWNvdmVyYWJsZShpZC5zdGFydCwgKCJQcml2YXRlIGZpZWxkICcjIiArIChpZC5uYW1lKSArICInIG11c3QgYmUgZGVjbGFyZWQgaW4gYW4gZW5jbG9zaW5nIGNsYXNzIikpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIGZ1bmN0aW9uIGlzUHJpdmF0ZU5hbWVDb25mbGljdGVkKHByaXZhdGVOYW1lTWFwLCBlbGVtZW50KSB7CiAgICB2YXIgbmFtZSA9IGVsZW1lbnQua2V5Lm5hbWU7CiAgICB2YXIgY3VyciA9IHByaXZhdGVOYW1lTWFwW25hbWVdOwoKICAgIHZhciBuZXh0ID0gInRydWUiOwogICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gIk1ldGhvZERlZmluaXRpb24iICYmIChlbGVtZW50LmtpbmQgPT09ICJnZXQiIHx8IGVsZW1lbnQua2luZCA9PT0gInNldCIpKSB7CiAgICAgIG5leHQgPSAoZWxlbWVudC5zdGF0aWMgPyAicyIgOiAiaSIpICsgZWxlbWVudC5raW5kOwogICAgfQoKICAgIC8vIGBjbGFzcyB7IGdldCAjYSgpe307IHN0YXRpYyBzZXQgI2EoXyl7fSB9YCBpcyBhbHNvIGNvbmZsaWN0LgogICAgaWYgKAogICAgICBjdXJyID09PSAiaWdldCIgJiYgbmV4dCA9PT0gImlzZXQiIHx8CiAgICAgIGN1cnIgPT09ICJpc2V0IiAmJiBuZXh0ID09PSAiaWdldCIgfHwKICAgICAgY3VyciA9PT0gInNnZXQiICYmIG5leHQgPT09ICJzc2V0IiB8fAogICAgICBjdXJyID09PSAic3NldCIgJiYgbmV4dCA9PT0gInNnZXQiCiAgICApIHsKICAgICAgcHJpdmF0ZU5hbWVNYXBbbmFtZV0gPSAidHJ1ZSI7CiAgICAgIHJldHVybiBmYWxzZQogICAgfSBlbHNlIGlmICghY3VycikgewogICAgICBwcml2YXRlTmFtZU1hcFtuYW1lXSA9IG5leHQ7CiAgICAgIHJldHVybiBmYWxzZQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICB9CgogIGZ1bmN0aW9uIGNoZWNrS2V5TmFtZShub2RlLCBuYW1lKSB7CiAgICB2YXIgY29tcHV0ZWQgPSBub2RlLmNvbXB1dGVkOwogICAgdmFyIGtleSA9IG5vZGUua2V5OwogICAgcmV0dXJuICFjb21wdXRlZCAmJiAoCiAgICAgIGtleS50eXBlID09PSAiSWRlbnRpZmllciIgJiYga2V5Lm5hbWUgPT09IG5hbWUgfHwKICAgICAga2V5LnR5cGUgPT09ICJMaXRlcmFsIiAmJiBrZXkudmFsdWUgPT09IG5hbWUKICAgICkKICB9CgogIC8vIFBhcnNlcyBtb2R1bGUgZXhwb3J0IGRlY2xhcmF0aW9uLgoKICBwcCQ4LnBhcnNlRXhwb3J0ID0gZnVuY3Rpb24obm9kZSwgZXhwb3J0cykgewogICAgdGhpcy5uZXh0KCk7CiAgICAvLyBleHBvcnQgKiBmcm9tICcuLi4nCiAgICBpZiAodGhpcy5lYXQodHlwZXMkMS5zdGFyKSkgewogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDExKSB7CiAgICAgICAgaWYgKHRoaXMuZWF0Q29udGV4dHVhbCgiYXMiKSkgewogICAgICAgICAgbm9kZS5leHBvcnRlZCA9IHRoaXMucGFyc2VNb2R1bGVFeHBvcnROYW1lKCk7CiAgICAgICAgICB0aGlzLmNoZWNrRXhwb3J0KGV4cG9ydHMsIG5vZGUuZXhwb3J0ZWQubmFtZSwgdGhpcy5sYXN0VG9rU3RhcnQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBub2RlLmV4cG9ydGVkID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5leHBlY3RDb250ZXh0dWFsKCJmcm9tIik7CiAgICAgIGlmICh0aGlzLnR5cGUgIT09IHR5cGVzJDEuc3RyaW5nKSB7IHRoaXMudW5leHBlY3RlZCgpOyB9CiAgICAgIG5vZGUuc291cmNlID0gdGhpcy5wYXJzZUV4cHJBdG9tKCk7CiAgICAgIHRoaXMuc2VtaWNvbG9uKCk7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkV4cG9ydEFsbERlY2xhcmF0aW9uIikKICAgIH0KICAgIGlmICh0aGlzLmVhdCh0eXBlcyQxLl9kZWZhdWx0KSkgeyAvLyBleHBvcnQgZGVmYXVsdCAuLi4KICAgICAgdGhpcy5jaGVja0V4cG9ydChleHBvcnRzLCAiZGVmYXVsdCIsIHRoaXMubGFzdFRva1N0YXJ0KTsKICAgICAgdmFyIGlzQXN5bmM7CiAgICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuX2Z1bmN0aW9uIHx8IChpc0FzeW5jID0gdGhpcy5pc0FzeW5jRnVuY3Rpb24oKSkpIHsKICAgICAgICB2YXIgZk5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICAgIHRoaXMubmV4dCgpOwogICAgICAgIGlmIChpc0FzeW5jKSB7IHRoaXMubmV4dCgpOyB9CiAgICAgICAgbm9kZS5kZWNsYXJhdGlvbiA9IHRoaXMucGFyc2VGdW5jdGlvbihmTm9kZSwgRlVOQ19TVEFURU1FTlQgfCBGVU5DX05VTExBQkxFX0lELCBmYWxzZSwgaXNBc3luYyk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLl9jbGFzcykgewogICAgICAgIHZhciBjTm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgICAgbm9kZS5kZWNsYXJhdGlvbiA9IHRoaXMucGFyc2VDbGFzcyhjTm9kZSwgIm51bGxhYmxlSUQiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBub2RlLmRlY2xhcmF0aW9uID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKCk7CiAgICAgICAgdGhpcy5zZW1pY29sb24oKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJFeHBvcnREZWZhdWx0RGVjbGFyYXRpb24iKQogICAgfQogICAgLy8gZXhwb3J0IHZhcnxjb25zdHxsZXR8ZnVuY3Rpb258Y2xhc3MgLi4uCiAgICBpZiAodGhpcy5zaG91bGRQYXJzZUV4cG9ydFN0YXRlbWVudCgpKSB7CiAgICAgIG5vZGUuZGVjbGFyYXRpb24gPSB0aGlzLnBhcnNlU3RhdGVtZW50KG51bGwpOwogICAgICBpZiAobm9kZS5kZWNsYXJhdGlvbi50eXBlID09PSAiVmFyaWFibGVEZWNsYXJhdGlvbiIpCiAgICAgICAgeyB0aGlzLmNoZWNrVmFyaWFibGVFeHBvcnQoZXhwb3J0cywgbm9kZS5kZWNsYXJhdGlvbi5kZWNsYXJhdGlvbnMpOyB9CiAgICAgIGVsc2UKICAgICAgICB7IHRoaXMuY2hlY2tFeHBvcnQoZXhwb3J0cywgbm9kZS5kZWNsYXJhdGlvbi5pZC5uYW1lLCBub2RlLmRlY2xhcmF0aW9uLmlkLnN0YXJ0KTsgfQogICAgICBub2RlLnNwZWNpZmllcnMgPSBbXTsKICAgICAgbm9kZS5zb3VyY2UgPSBudWxsOwogICAgfSBlbHNlIHsgLy8gZXhwb3J0IHsgeCwgeSBhcyB6IH0gW2Zyb20gJy4uLiddCiAgICAgIG5vZGUuZGVjbGFyYXRpb24gPSBudWxsOwogICAgICBub2RlLnNwZWNpZmllcnMgPSB0aGlzLnBhcnNlRXhwb3J0U3BlY2lmaWVycyhleHBvcnRzKTsKICAgICAgaWYgKHRoaXMuZWF0Q29udGV4dHVhbCgiZnJvbSIpKSB7CiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gdHlwZXMkMS5zdHJpbmcpIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KICAgICAgICBub2RlLnNvdXJjZSA9IHRoaXMucGFyc2VFeHByQXRvbSgpOwogICAgICB9IGVsc2UgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBsaXN0ID0gbm9kZS5zcGVjaWZpZXJzOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgICAgLy8gY2hlY2sgZm9yIGtleXdvcmRzIHVzZWQgYXMgbG9jYWwgbmFtZXMKICAgICAgICAgIHZhciBzcGVjID0gbGlzdFtpXTsKCiAgICAgICAgICB0aGlzLmNoZWNrVW5yZXNlcnZlZChzcGVjLmxvY2FsKTsKICAgICAgICAgIC8vIGNoZWNrIGlmIGV4cG9ydCBpcyBkZWZpbmVkCiAgICAgICAgICB0aGlzLmNoZWNrTG9jYWxFeHBvcnQoc3BlYy5sb2NhbCk7CgogICAgICAgICAgaWYgKHNwZWMubG9jYWwudHlwZSA9PT0gIkxpdGVyYWwiKSB7CiAgICAgICAgICAgIHRoaXMucmFpc2Uoc3BlYy5sb2NhbC5zdGFydCwgIkEgc3RyaW5nIGxpdGVyYWwgY2Fubm90IGJlIHVzZWQgYXMgYW4gZXhwb3J0ZWQgYmluZGluZyB3aXRob3V0IGBmcm9tYC4iKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIG5vZGUuc291cmNlID0gbnVsbDsKICAgICAgfQogICAgICB0aGlzLnNlbWljb2xvbigpOwogICAgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRXhwb3J0TmFtZWREZWNsYXJhdGlvbiIpCiAgfTsKCiAgcHAkOC5jaGVja0V4cG9ydCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIHBvcykgewogICAgaWYgKCFleHBvcnRzKSB7IHJldHVybiB9CiAgICBpZiAoaGFzT3duKGV4cG9ydHMsIG5hbWUpKQogICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShwb3MsICJEdXBsaWNhdGUgZXhwb3J0ICciICsgbmFtZSArICInIik7IH0KICAgIGV4cG9ydHNbbmFtZV0gPSB0cnVlOwogIH07CgogIHBwJDguY2hlY2tQYXR0ZXJuRXhwb3J0ID0gZnVuY3Rpb24oZXhwb3J0cywgcGF0KSB7CiAgICB2YXIgdHlwZSA9IHBhdC50eXBlOwogICAgaWYgKHR5cGUgPT09ICJJZGVudGlmaWVyIikKICAgICAgeyB0aGlzLmNoZWNrRXhwb3J0KGV4cG9ydHMsIHBhdC5uYW1lLCBwYXQuc3RhcnQpOyB9CiAgICBlbHNlIGlmICh0eXBlID09PSAiT2JqZWN0UGF0dGVybiIpCiAgICAgIHsgZm9yICh2YXIgaSA9IDAsIGxpc3QgPSBwYXQucHJvcGVydGllczsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpCiAgICAgICAgewogICAgICAgICAgdmFyIHByb3AgPSBsaXN0W2ldOwoKICAgICAgICAgIHRoaXMuY2hlY2tQYXR0ZXJuRXhwb3J0KGV4cG9ydHMsIHByb3ApOwogICAgICAgIH0gfQogICAgZWxzZSBpZiAodHlwZSA9PT0gIkFycmF5UGF0dGVybiIpCiAgICAgIHsgZm9yICh2YXIgaSQxID0gMCwgbGlzdCQxID0gcGF0LmVsZW1lbnRzOyBpJDEgPCBsaXN0JDEubGVuZ3RoOyBpJDEgKz0gMSkgewogICAgICAgIHZhciBlbHQgPSBsaXN0JDFbaSQxXTsKCiAgICAgICAgICBpZiAoZWx0KSB7IHRoaXMuY2hlY2tQYXR0ZXJuRXhwb3J0KGV4cG9ydHMsIGVsdCk7IH0KICAgICAgfSB9CiAgICBlbHNlIGlmICh0eXBlID09PSAiUHJvcGVydHkiKQogICAgICB7IHRoaXMuY2hlY2tQYXR0ZXJuRXhwb3J0KGV4cG9ydHMsIHBhdC52YWx1ZSk7IH0KICAgIGVsc2UgaWYgKHR5cGUgPT09ICJBc3NpZ25tZW50UGF0dGVybiIpCiAgICAgIHsgdGhpcy5jaGVja1BhdHRlcm5FeHBvcnQoZXhwb3J0cywgcGF0LmxlZnQpOyB9CiAgICBlbHNlIGlmICh0eXBlID09PSAiUmVzdEVsZW1lbnQiKQogICAgICB7IHRoaXMuY2hlY2tQYXR0ZXJuRXhwb3J0KGV4cG9ydHMsIHBhdC5hcmd1bWVudCk7IH0KICAgIGVsc2UgaWYgKHR5cGUgPT09ICJQYXJlbnRoZXNpemVkRXhwcmVzc2lvbiIpCiAgICAgIHsgdGhpcy5jaGVja1BhdHRlcm5FeHBvcnQoZXhwb3J0cywgcGF0LmV4cHJlc3Npb24pOyB9CiAgfTsKCiAgcHAkOC5jaGVja1ZhcmlhYmxlRXhwb3J0ID0gZnVuY3Rpb24oZXhwb3J0cywgZGVjbHMpIHsKICAgIGlmICghZXhwb3J0cykgeyByZXR1cm4gfQogICAgZm9yICh2YXIgaSA9IDAsIGxpc3QgPSBkZWNsczsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpCiAgICAgIHsKICAgICAgdmFyIGRlY2wgPSBsaXN0W2ldOwoKICAgICAgdGhpcy5jaGVja1BhdHRlcm5FeHBvcnQoZXhwb3J0cywgZGVjbC5pZCk7CiAgICB9CiAgfTsKCiAgcHAkOC5zaG91bGRQYXJzZUV4cG9ydFN0YXRlbWVudCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMudHlwZS5rZXl3b3JkID09PSAidmFyIiB8fAogICAgICB0aGlzLnR5cGUua2V5d29yZCA9PT0gImNvbnN0IiB8fAogICAgICB0aGlzLnR5cGUua2V5d29yZCA9PT0gImNsYXNzIiB8fAogICAgICB0aGlzLnR5cGUua2V5d29yZCA9PT0gImZ1bmN0aW9uIiB8fAogICAgICB0aGlzLmlzTGV0KCkgfHwKICAgICAgdGhpcy5pc0FzeW5jRnVuY3Rpb24oKQogIH07CgogIC8vIFBhcnNlcyBhIGNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIG1vZHVsZSBleHBvcnRzLgoKICBwcCQ4LnBhcnNlRXhwb3J0U3BlY2lmaWVycyA9IGZ1bmN0aW9uKGV4cG9ydHMpIHsKICAgIHZhciBub2RlcyA9IFtdLCBmaXJzdCA9IHRydWU7CiAgICAvLyBleHBvcnQgeyB4LCB5IGFzIHogfSBbZnJvbSAnLi4uJ10KICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEuYnJhY2VMKTsKICAgIHdoaWxlICghdGhpcy5lYXQodHlwZXMkMS5icmFjZVIpKSB7CiAgICAgIGlmICghZmlyc3QpIHsKICAgICAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLmNvbW1hKTsKICAgICAgICBpZiAodGhpcy5hZnRlclRyYWlsaW5nQ29tbWEodHlwZXMkMS5icmFjZVIpKSB7IGJyZWFrIH0KICAgICAgfSBlbHNlIHsgZmlyc3QgPSBmYWxzZTsgfQoKICAgICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICBub2RlLmxvY2FsID0gdGhpcy5wYXJzZU1vZHVsZUV4cG9ydE5hbWUoKTsKICAgICAgbm9kZS5leHBvcnRlZCA9IHRoaXMuZWF0Q29udGV4dHVhbCgiYXMiKSA/IHRoaXMucGFyc2VNb2R1bGVFeHBvcnROYW1lKCkgOiBub2RlLmxvY2FsOwogICAgICB0aGlzLmNoZWNrRXhwb3J0KAogICAgICAgIGV4cG9ydHMsCiAgICAgICAgbm9kZS5leHBvcnRlZFtub2RlLmV4cG9ydGVkLnR5cGUgPT09ICJJZGVudGlmaWVyIiA/ICJuYW1lIiA6ICJ2YWx1ZSJdLAogICAgICAgIG5vZGUuZXhwb3J0ZWQuc3RhcnQKICAgICAgKTsKICAgICAgbm9kZXMucHVzaCh0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkV4cG9ydFNwZWNpZmllciIpKTsKICAgIH0KICAgIHJldHVybiBub2RlcwogIH07CgogIC8vIFBhcnNlcyBpbXBvcnQgZGVjbGFyYXRpb24uCgogIHBwJDgucGFyc2VJbXBvcnQgPSBmdW5jdGlvbihub2RlKSB7CiAgICB0aGlzLm5leHQoKTsKICAgIC8vIGltcG9ydCAnLi4uJwogICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5zdHJpbmcpIHsKICAgICAgbm9kZS5zcGVjaWZpZXJzID0gZW1wdHkkMTsKICAgICAgbm9kZS5zb3VyY2UgPSB0aGlzLnBhcnNlRXhwckF0b20oKTsKICAgIH0gZWxzZSB7CiAgICAgIG5vZGUuc3BlY2lmaWVycyA9IHRoaXMucGFyc2VJbXBvcnRTcGVjaWZpZXJzKCk7CiAgICAgIHRoaXMuZXhwZWN0Q29udGV4dHVhbCgiZnJvbSIpOwogICAgICBub2RlLnNvdXJjZSA9IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5zdHJpbmcgPyB0aGlzLnBhcnNlRXhwckF0b20oKSA6IHRoaXMudW5leHBlY3RlZCgpOwogICAgfQogICAgdGhpcy5zZW1pY29sb24oKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkltcG9ydERlY2xhcmF0aW9uIikKICB9OwoKICAvLyBQYXJzZXMgYSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBtb2R1bGUgaW1wb3J0cy4KCiAgcHAkOC5wYXJzZUltcG9ydFNwZWNpZmllcnMgPSBmdW5jdGlvbigpIHsKICAgIHZhciBub2RlcyA9IFtdLCBmaXJzdCA9IHRydWU7CiAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLm5hbWUpIHsKICAgICAgLy8gaW1wb3J0IGRlZmF1bHRPYmosIHsgeCwgeSBhcyB6IH0gZnJvbSAnLi4uJwogICAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIG5vZGUubG9jYWwgPSB0aGlzLnBhcnNlSWRlbnQoKTsKICAgICAgdGhpcy5jaGVja0xWYWxTaW1wbGUobm9kZS5sb2NhbCwgQklORF9MRVhJQ0FMKTsKICAgICAgbm9kZXMucHVzaCh0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkltcG9ydERlZmF1bHRTcGVjaWZpZXIiKSk7CiAgICAgIGlmICghdGhpcy5lYXQodHlwZXMkMS5jb21tYSkpIHsgcmV0dXJuIG5vZGVzIH0KICAgIH0KICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuc3RhcikgewogICAgICB2YXIgbm9kZSQxID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIHRoaXMuZXhwZWN0Q29udGV4dHVhbCgiYXMiKTsKICAgICAgbm9kZSQxLmxvY2FsID0gdGhpcy5wYXJzZUlkZW50KCk7CiAgICAgIHRoaXMuY2hlY2tMVmFsU2ltcGxlKG5vZGUkMS5sb2NhbCwgQklORF9MRVhJQ0FMKTsKICAgICAgbm9kZXMucHVzaCh0aGlzLmZpbmlzaE5vZGUobm9kZSQxLCAiSW1wb3J0TmFtZXNwYWNlU3BlY2lmaWVyIikpOwogICAgICByZXR1cm4gbm9kZXMKICAgIH0KICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEuYnJhY2VMKTsKICAgIHdoaWxlICghdGhpcy5lYXQodHlwZXMkMS5icmFjZVIpKSB7CiAgICAgIGlmICghZmlyc3QpIHsKICAgICAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLmNvbW1hKTsKICAgICAgICBpZiAodGhpcy5hZnRlclRyYWlsaW5nQ29tbWEodHlwZXMkMS5icmFjZVIpKSB7IGJyZWFrIH0KICAgICAgfSBlbHNlIHsgZmlyc3QgPSBmYWxzZTsgfQoKICAgICAgdmFyIG5vZGUkMiA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIG5vZGUkMi5pbXBvcnRlZCA9IHRoaXMucGFyc2VNb2R1bGVFeHBvcnROYW1lKCk7CiAgICAgIGlmICh0aGlzLmVhdENvbnRleHR1YWwoImFzIikpIHsKICAgICAgICBub2RlJDIubG9jYWwgPSB0aGlzLnBhcnNlSWRlbnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNoZWNrVW5yZXNlcnZlZChub2RlJDIuaW1wb3J0ZWQpOwogICAgICAgIG5vZGUkMi5sb2NhbCA9IG5vZGUkMi5pbXBvcnRlZDsKICAgICAgfQogICAgICB0aGlzLmNoZWNrTFZhbFNpbXBsZShub2RlJDIubG9jYWwsIEJJTkRfTEVYSUNBTCk7CiAgICAgIG5vZGVzLnB1c2godGhpcy5maW5pc2hOb2RlKG5vZGUkMiwgIkltcG9ydFNwZWNpZmllciIpKTsKICAgIH0KICAgIHJldHVybiBub2RlcwogIH07CgogIHBwJDgucGFyc2VNb2R1bGVFeHBvcnROYW1lID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDEzICYmIHRoaXMudHlwZSA9PT0gdHlwZXMkMS5zdHJpbmcpIHsKICAgICAgdmFyIHN0cmluZ0xpdGVyYWwgPSB0aGlzLnBhcnNlTGl0ZXJhbCh0aGlzLnZhbHVlKTsKICAgICAgaWYgKGxvbmVTdXJyb2dhdGUudGVzdChzdHJpbmdMaXRlcmFsLnZhbHVlKSkgewogICAgICAgIHRoaXMucmFpc2Uoc3RyaW5nTGl0ZXJhbC5zdGFydCwgIkFuIGV4cG9ydCBuYW1lIGNhbm5vdCBpbmNsdWRlIGEgbG9uZSBzdXJyb2dhdGUuIik7CiAgICAgIH0KICAgICAgcmV0dXJuIHN0cmluZ0xpdGVyYWwKICAgIH0KICAgIHJldHVybiB0aGlzLnBhcnNlSWRlbnQodHJ1ZSkKICB9OwoKICAvLyBTZXQgYEV4cHJlc3Npb25TdGF0ZW1lbnQjZGlyZWN0aXZlYCBwcm9wZXJ0eSBmb3IgZGlyZWN0aXZlIHByb2xvZ3Vlcy4KICBwcCQ4LmFkYXB0RGlyZWN0aXZlUHJvbG9ndWUgPSBmdW5jdGlvbihzdGF0ZW1lbnRzKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlbWVudHMubGVuZ3RoICYmIHRoaXMuaXNEaXJlY3RpdmVDYW5kaWRhdGUoc3RhdGVtZW50c1tpXSk7ICsraSkgewogICAgICBzdGF0ZW1lbnRzW2ldLmRpcmVjdGl2ZSA9IHN0YXRlbWVudHNbaV0uZXhwcmVzc2lvbi5yYXcuc2xpY2UoMSwgLTEpOwogICAgfQogIH07CiAgcHAkOC5pc0RpcmVjdGl2ZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKHN0YXRlbWVudCkgewogICAgcmV0dXJuICgKICAgICAgc3RhdGVtZW50LnR5cGUgPT09ICJFeHByZXNzaW9uU3RhdGVtZW50IiAmJgogICAgICBzdGF0ZW1lbnQuZXhwcmVzc2lvbi50eXBlID09PSAiTGl0ZXJhbCIgJiYKICAgICAgdHlwZW9mIHN0YXRlbWVudC5leHByZXNzaW9uLnZhbHVlID09PSAic3RyaW5nIiAmJgogICAgICAvLyBSZWplY3QgcGFyZW50aGVzaXplZCBzdHJpbmdzLgogICAgICAodGhpcy5pbnB1dFtzdGF0ZW1lbnQuc3RhcnRdID09PSAiXCIiIHx8IHRoaXMuaW5wdXRbc3RhdGVtZW50LnN0YXJ0XSA9PT0gIiciKQogICAgKQogIH07CgogIHZhciBwcCQ3ID0gUGFyc2VyLnByb3RvdHlwZTsKCiAgLy8gQ29udmVydCBleGlzdGluZyBleHByZXNzaW9uIGF0b20gdG8gYXNzaWduYWJsZSBwYXR0ZXJuCiAgLy8gaWYgcG9zc2libGUuCgogIHBwJDcudG9Bc3NpZ25hYmxlID0gZnVuY3Rpb24obm9kZSwgaXNCaW5kaW5nLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKSB7CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYgJiYgbm9kZSkgewogICAgICBzd2l0Y2ggKG5vZGUudHlwZSkgewogICAgICBjYXNlICJJZGVudGlmaWVyIjoKICAgICAgICBpZiAodGhpcy5pbkFzeW5jICYmIG5vZGUubmFtZSA9PT0gImF3YWl0IikKICAgICAgICAgIHsgdGhpcy5yYWlzZShub2RlLnN0YXJ0LCAiQ2Fubm90IHVzZSAnYXdhaXQnIGFzIGlkZW50aWZpZXIgaW5zaWRlIGFuIGFzeW5jIGZ1bmN0aW9uIik7IH0KICAgICAgICBicmVhawoKICAgICAgY2FzZSAiT2JqZWN0UGF0dGVybiI6CiAgICAgIGNhc2UgIkFycmF5UGF0dGVybiI6CiAgICAgIGNhc2UgIkFzc2lnbm1lbnRQYXR0ZXJuIjoKICAgICAgY2FzZSAiUmVzdEVsZW1lbnQiOgogICAgICAgIGJyZWFrCgogICAgICBjYXNlICJPYmplY3RFeHByZXNzaW9uIjoKICAgICAgICBub2RlLnR5cGUgPSAiT2JqZWN0UGF0dGVybiI7CiAgICAgICAgaWYgKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsgdGhpcy5jaGVja1BhdHRlcm5FcnJvcnMocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycywgdHJ1ZSk7IH0KICAgICAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IG5vZGUucHJvcGVydGllczsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICAgIHZhciBwcm9wID0gbGlzdFtpXTsKCiAgICAgICAgdGhpcy50b0Fzc2lnbmFibGUocHJvcCwgaXNCaW5kaW5nKTsKICAgICAgICAgIC8vIEVhcmx5IGVycm9yOgogICAgICAgICAgLy8gICBBc3NpZ25tZW50UmVzdFByb3BlcnR5W1lpZWxkLCBBd2FpdF0gOgogICAgICAgICAgLy8gICAgIGAuLi5gIERlc3RydWN0dXJpbmdBc3NpZ25tZW50VGFyZ2V0W1lpZWxkLCBBd2FpdF0KICAgICAgICAgIC8vCiAgICAgICAgICAvLyAgIEl0IGlzIGEgU3ludGF4IEVycm9yIGlmIHxEZXN0cnVjdHVyaW5nQXNzaWdubWVudFRhcmdldHwgaXMgYW4gfEFycmF5TGl0ZXJhbHwgb3IgYW4gfE9iamVjdExpdGVyYWx8LgogICAgICAgICAgaWYgKAogICAgICAgICAgICBwcm9wLnR5cGUgPT09ICJSZXN0RWxlbWVudCIgJiYKICAgICAgICAgICAgKHByb3AuYXJndW1lbnQudHlwZSA9PT0gIkFycmF5UGF0dGVybiIgfHwgcHJvcC5hcmd1bWVudC50eXBlID09PSAiT2JqZWN0UGF0dGVybiIpCiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy5yYWlzZShwcm9wLmFyZ3VtZW50LnN0YXJ0LCAiVW5leHBlY3RlZCB0b2tlbiIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBicmVhawoKICAgICAgY2FzZSAiUHJvcGVydHkiOgogICAgICAgIC8vIEFzc2lnbm1lbnRQcm9wZXJ0eSBoYXMgdHlwZSA9PT0gIlByb3BlcnR5IgogICAgICAgIGlmIChub2RlLmtpbmQgIT09ICJpbml0IikgeyB0aGlzLnJhaXNlKG5vZGUua2V5LnN0YXJ0LCAiT2JqZWN0IHBhdHRlcm4gY2FuJ3QgY29udGFpbiBnZXR0ZXIgb3Igc2V0dGVyIik7IH0KICAgICAgICB0aGlzLnRvQXNzaWduYWJsZShub2RlLnZhbHVlLCBpc0JpbmRpbmcpOwogICAgICAgIGJyZWFrCgogICAgICBjYXNlICJBcnJheUV4cHJlc3Npb24iOgogICAgICAgIG5vZGUudHlwZSA9ICJBcnJheVBhdHRlcm4iOwogICAgICAgIGlmIChyZWZEZXN0cnVjdHVyaW5nRXJyb3JzKSB7IHRoaXMuY2hlY2tQYXR0ZXJuRXJyb3JzKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIHRydWUpOyB9CiAgICAgICAgdGhpcy50b0Fzc2lnbmFibGVMaXN0KG5vZGUuZWxlbWVudHMsIGlzQmluZGluZyk7CiAgICAgICAgYnJlYWsKCiAgICAgIGNhc2UgIlNwcmVhZEVsZW1lbnQiOgogICAgICAgIG5vZGUudHlwZSA9ICJSZXN0RWxlbWVudCI7CiAgICAgICAgdGhpcy50b0Fzc2lnbmFibGUobm9kZS5hcmd1bWVudCwgaXNCaW5kaW5nKTsKICAgICAgICBpZiAobm9kZS5hcmd1bWVudC50eXBlID09PSAiQXNzaWdubWVudFBhdHRlcm4iKQogICAgICAgICAgeyB0aGlzLnJhaXNlKG5vZGUuYXJndW1lbnQuc3RhcnQsICJSZXN0IGVsZW1lbnRzIGNhbm5vdCBoYXZlIGEgZGVmYXVsdCB2YWx1ZSIpOyB9CiAgICAgICAgYnJlYWsKCiAgICAgIGNhc2UgIkFzc2lnbm1lbnRFeHByZXNzaW9uIjoKICAgICAgICBpZiAobm9kZS5vcGVyYXRvciAhPT0gIj0iKSB7IHRoaXMucmFpc2Uobm9kZS5sZWZ0LmVuZCwgIk9ubHkgJz0nIG9wZXJhdG9yIGNhbiBiZSB1c2VkIGZvciBzcGVjaWZ5aW5nIGRlZmF1bHQgdmFsdWUuIik7IH0KICAgICAgICBub2RlLnR5cGUgPSAiQXNzaWdubWVudFBhdHRlcm4iOwogICAgICAgIGRlbGV0ZSBub2RlLm9wZXJhdG9yOwogICAgICAgIHRoaXMudG9Bc3NpZ25hYmxlKG5vZGUubGVmdCwgaXNCaW5kaW5nKTsKICAgICAgICBicmVhawoKICAgICAgY2FzZSAiUGFyZW50aGVzaXplZEV4cHJlc3Npb24iOgogICAgICAgIHRoaXMudG9Bc3NpZ25hYmxlKG5vZGUuZXhwcmVzc2lvbiwgaXNCaW5kaW5nLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTsKICAgICAgICBicmVhawoKICAgICAgY2FzZSAiQ2hhaW5FeHByZXNzaW9uIjoKICAgICAgICB0aGlzLnJhaXNlUmVjb3ZlcmFibGUobm9kZS5zdGFydCwgIk9wdGlvbmFsIGNoYWluaW5nIGNhbm5vdCBhcHBlYXIgaW4gbGVmdC1oYW5kIHNpZGUiKTsKICAgICAgICBicmVhawoKICAgICAgY2FzZSAiTWVtYmVyRXhwcmVzc2lvbiI6CiAgICAgICAgaWYgKCFpc0JpbmRpbmcpIHsgYnJlYWsgfQoKICAgICAgZGVmYXVsdDoKICAgICAgICB0aGlzLnJhaXNlKG5vZGUuc3RhcnQsICJBc3NpZ25pbmcgdG8gcnZhbHVlIik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykgeyB0aGlzLmNoZWNrUGF0dGVybkVycm9ycyhyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLCB0cnVlKTsgfQogICAgcmV0dXJuIG5vZGUKICB9OwoKICAvLyBDb252ZXJ0IGxpc3Qgb2YgZXhwcmVzc2lvbiBhdG9tcyB0byBiaW5kaW5nIGxpc3QuCgogIHBwJDcudG9Bc3NpZ25hYmxlTGlzdCA9IGZ1bmN0aW9uKGV4cHJMaXN0LCBpc0JpbmRpbmcpIHsKICAgIHZhciBlbmQgPSBleHByTGlzdC5sZW5ndGg7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVuZDsgaSsrKSB7CiAgICAgIHZhciBlbHQgPSBleHByTGlzdFtpXTsKICAgICAgaWYgKGVsdCkgeyB0aGlzLnRvQXNzaWduYWJsZShlbHQsIGlzQmluZGluZyk7IH0KICAgIH0KICAgIGlmIChlbmQpIHsKICAgICAgdmFyIGxhc3QgPSBleHByTGlzdFtlbmQgLSAxXTsKICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA9PT0gNiAmJiBpc0JpbmRpbmcgJiYgbGFzdCAmJiBsYXN0LnR5cGUgPT09ICJSZXN0RWxlbWVudCIgJiYgbGFzdC5hcmd1bWVudC50eXBlICE9PSAiSWRlbnRpZmllciIpCiAgICAgICAgeyB0aGlzLnVuZXhwZWN0ZWQobGFzdC5hcmd1bWVudC5zdGFydCk7IH0KICAgIH0KICAgIHJldHVybiBleHByTGlzdAogIH07CgogIC8vIFBhcnNlcyBzcHJlYWQgZWxlbWVudC4KCiAgcHAkNy5wYXJzZVNwcmVhZCA9IGZ1bmN0aW9uKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHRoaXMubmV4dCgpOwogICAgbm9kZS5hcmd1bWVudCA9IHRoaXMucGFyc2VNYXliZUFzc2lnbihmYWxzZSwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJTcHJlYWRFbGVtZW50IikKICB9OwoKICBwcCQ3LnBhcnNlUmVzdEJpbmRpbmcgPSBmdW5jdGlvbigpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHRoaXMubmV4dCgpOwoKICAgIC8vIFJlc3RFbGVtZW50IGluc2lkZSBvZiBhIGZ1bmN0aW9uIHBhcmFtZXRlciBtdXN0IGJlIGFuIGlkZW50aWZpZXIKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPT09IDYgJiYgdGhpcy50eXBlICE9PSB0eXBlcyQxLm5hbWUpCiAgICAgIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KCiAgICBub2RlLmFyZ3VtZW50ID0gdGhpcy5wYXJzZUJpbmRpbmdBdG9tKCk7CgogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiUmVzdEVsZW1lbnQiKQogIH07CgogIC8vIFBhcnNlcyBsdmFsdWUgKGFzc2lnbmFibGUpIGF0b20uCgogIHBwJDcucGFyc2VCaW5kaW5nQXRvbSA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2KSB7CiAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7CiAgICAgIGNhc2UgdHlwZXMkMS5icmFja2V0TDoKICAgICAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgICAgdGhpcy5uZXh0KCk7CiAgICAgICAgbm9kZS5lbGVtZW50cyA9IHRoaXMucGFyc2VCaW5kaW5nTGlzdCh0eXBlcyQxLmJyYWNrZXRSLCB0cnVlLCB0cnVlKTsKICAgICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJBcnJheVBhdHRlcm4iKQoKICAgICAgY2FzZSB0eXBlcyQxLmJyYWNlTDoKICAgICAgICByZXR1cm4gdGhpcy5wYXJzZU9iaih0cnVlKQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGhpcy5wYXJzZUlkZW50KCkKICB9OwoKICBwcCQ3LnBhcnNlQmluZGluZ0xpc3QgPSBmdW5jdGlvbihjbG9zZSwgYWxsb3dFbXB0eSwgYWxsb3dUcmFpbGluZ0NvbW1hKSB7CiAgICB2YXIgZWx0cyA9IFtdLCBmaXJzdCA9IHRydWU7CiAgICB3aGlsZSAoIXRoaXMuZWF0KGNsb3NlKSkgewogICAgICBpZiAoZmlyc3QpIHsgZmlyc3QgPSBmYWxzZTsgfQogICAgICBlbHNlIHsgdGhpcy5leHBlY3QodHlwZXMkMS5jb21tYSk7IH0KICAgICAgaWYgKGFsbG93RW1wdHkgJiYgdGhpcy50eXBlID09PSB0eXBlcyQxLmNvbW1hKSB7CiAgICAgICAgZWx0cy5wdXNoKG51bGwpOwogICAgICB9IGVsc2UgaWYgKGFsbG93VHJhaWxpbmdDb21tYSAmJiB0aGlzLmFmdGVyVHJhaWxpbmdDb21tYShjbG9zZSkpIHsKICAgICAgICBicmVhawogICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5lbGxpcHNpcykgewogICAgICAgIHZhciByZXN0ID0gdGhpcy5wYXJzZVJlc3RCaW5kaW5nKCk7CiAgICAgICAgdGhpcy5wYXJzZUJpbmRpbmdMaXN0SXRlbShyZXN0KTsKICAgICAgICBlbHRzLnB1c2gocmVzdCk7CiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5jb21tYSkgeyB0aGlzLnJhaXNlKHRoaXMuc3RhcnQsICJDb21tYSBpcyBub3QgcGVybWl0dGVkIGFmdGVyIHRoZSByZXN0IGVsZW1lbnQiKTsgfQogICAgICAgIHRoaXMuZXhwZWN0KGNsb3NlKTsKICAgICAgICBicmVhawogICAgICB9IGVsc2UgewogICAgICAgIHZhciBlbGVtID0gdGhpcy5wYXJzZU1heWJlRGVmYXVsdCh0aGlzLnN0YXJ0LCB0aGlzLnN0YXJ0TG9jKTsKICAgICAgICB0aGlzLnBhcnNlQmluZGluZ0xpc3RJdGVtKGVsZW0pOwogICAgICAgIGVsdHMucHVzaChlbGVtKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGVsdHMKICB9OwoKICBwcCQ3LnBhcnNlQmluZGluZ0xpc3RJdGVtID0gZnVuY3Rpb24ocGFyYW0pIHsKICAgIHJldHVybiBwYXJhbQogIH07CgogIC8vIFBhcnNlcyBhc3NpZ25tZW50IHBhdHRlcm4gYXJvdW5kIGdpdmVuIGF0b20gaWYgcG9zc2libGUuCgogIHBwJDcucGFyc2VNYXliZURlZmF1bHQgPSBmdW5jdGlvbihzdGFydFBvcywgc3RhcnRMb2MsIGxlZnQpIHsKICAgIGxlZnQgPSBsZWZ0IHx8IHRoaXMucGFyc2VCaW5kaW5nQXRvbSgpOwogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA8IDYgfHwgIXRoaXMuZWF0KHR5cGVzJDEuZXEpKSB7IHJldHVybiBsZWZ0IH0KICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGVBdChzdGFydFBvcywgc3RhcnRMb2MpOwogICAgbm9kZS5sZWZ0ID0gbGVmdDsKICAgIG5vZGUucmlnaHQgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkFzc2lnbm1lbnRQYXR0ZXJuIikKICB9OwoKICAvLyBUaGUgZm9sbG93aW5nIHRocmVlIGZ1bmN0aW9ucyBhbGwgdmVyaWZ5IHRoYXQgYSBub2RlIGlzIGFuIGx2YWx1ZSDigJQKICAvLyBzb21ldGhpbmcgdGhhdCBjYW4gYmUgYm91bmQsIG9yIGFzc2lnbmVkIHRvLiBJbiBvcmRlciB0byBkbyBzbywgdGhleSBwZXJmb3JtCiAgLy8gYSB2YXJpZXR5IG9mIGNoZWNrczoKICAvLwogIC8vIC0gQ2hlY2sgdGhhdCBub25lIG9mIHRoZSBib3VuZC9hc3NpZ25lZC10byBpZGVudGlmaWVycyBhcmUgcmVzZXJ2ZWQgd29yZHMuCiAgLy8gLSBSZWNvcmQgbmFtZSBkZWNsYXJhdGlvbnMgZm9yIGJpbmRpbmdzIGluIHRoZSBhcHByb3ByaWF0ZSBzY29wZS4KICAvLyAtIENoZWNrIGR1cGxpY2F0ZSBhcmd1bWVudCBuYW1lcywgaWYgY2hlY2tDbGFzaGVzIGlzIHNldC4KICAvLwogIC8vIElmIGEgY29tcGxleCBiaW5kaW5nIHBhdHRlcm4gaXMgZW5jb3VudGVyZWQgKGUuZy4sIG9iamVjdCBhbmQgYXJyYXkKICAvLyBkZXN0cnVjdHVyaW5nKSwgdGhlIGVudGlyZSBwYXR0ZXJuIGlzIHJlY3Vyc2l2ZWx5IGNoZWNrZWQuCiAgLy8KICAvLyBUaGVyZSBhcmUgdGhyZWUgdmVyc2lvbnMgb2YgY2hlY2tMVmFsKigpIGFwcHJvcHJpYXRlIGZvciBkaWZmZXJlbnQKICAvLyBjaXJjdW1zdGFuY2VzOgogIC8vCiAgLy8gLSBjaGVja0xWYWxTaW1wbGUoKSBzaGFsbCBiZSB1c2VkIGlmIHRoZSBzeW50YWN0aWMgY29uc3RydWN0IHN1cHBvcnRzCiAgLy8gICBub3RoaW5nIG90aGVyIHRoYW4gaWRlbnRpZmllcnMgYW5kIG1lbWJlciBleHByZXNzaW9ucy4gUGFyZW50aGVzaXplZAogIC8vICAgZXhwcmVzc2lvbnMgYXJlIGFsc28gY29ycmVjdGx5IGhhbmRsZWQuIFRoaXMgaXMgZ2VuZXJhbGx5IGFwcHJvcHJpYXRlIGZvcgogIC8vICAgY29uc3RydWN0cyBmb3Igd2hpY2ggdGhlIHNwZWMgc2F5cwogIC8vCiAgLy8gICA+IEl0IGlzIGEgU3ludGF4IEVycm9yIGlmIEFzc2lnbm1lbnRUYXJnZXRUeXBlIG9mIFt0aGUgcHJvZHVjdGlvbl0gaXMgbm90CiAgLy8gICA+IHNpbXBsZS4KICAvLwogIC8vICAgSXQgaXMgYWxzbyBhcHByb3ByaWF0ZSBmb3IgY2hlY2tpbmcgaWYgYW4gaWRlbnRpZmllciBpcyB2YWxpZCBhbmQgbm90CiAgLy8gICBkZWZpbmVkIGVsc2V3aGVyZSwgbGlrZSBpbXBvcnQgZGVjbGFyYXRpb25zIG9yIGZ1bmN0aW9uL2NsYXNzIGlkZW50aWZpZXJzLgogIC8vCiAgLy8gICBFeGFtcGxlcyB3aGVyZSB0aGlzIGlzIHVzZWQgaW5jbHVkZToKICAvLyAgICAgYSArPSDigKY7CiAgLy8gICAgIGltcG9ydCBhIGZyb20gJ+KApic7CiAgLy8gICB3aGVyZSBhIGlzIHRoZSBub2RlIHRvIGJlIGNoZWNrZWQuCiAgLy8KICAvLyAtIGNoZWNrTFZhbFBhdHRlcm4oKSBzaGFsbCBiZSB1c2VkIGlmIHRoZSBzeW50YWN0aWMgY29uc3RydWN0IHN1cHBvcnRzCiAgLy8gICBhbnl0aGluZyBjaGVja0xWYWxTaW1wbGUoKSBzdXBwb3J0cywgYXMgd2VsbCBhcyBvYmplY3QgYW5kIGFycmF5CiAgLy8gICBkZXN0cnVjdHVyaW5nIHBhdHRlcm5zLiBUaGlzIGlzIGdlbmVyYWxseSBhcHByb3ByaWF0ZSBmb3IgY29uc3RydWN0cyBmb3IKICAvLyAgIHdoaWNoIHRoZSBzcGVjIHNheXMKICAvLwogIC8vICAgPiBJdCBpcyBhIFN5bnRheCBFcnJvciBpZiBbdGhlIHByb2R1Y3Rpb25dIGlzIG5laXRoZXIgYW4gT2JqZWN0TGl0ZXJhbCBub3IKICAvLyAgID4gYW4gQXJyYXlMaXRlcmFsIGFuZCBBc3NpZ25tZW50VGFyZ2V0VHlwZSBvZiBbdGhlIHByb2R1Y3Rpb25dIGlzIG5vdAogIC8vICAgPiBzaW1wbGUuCiAgLy8KICAvLyAgIEV4YW1wbGVzIHdoZXJlIHRoaXMgaXMgdXNlZCBpbmNsdWRlOgogIC8vICAgICAoYSA9IOKApik7CiAgLy8gICAgIGNvbnN0IGEgPSDigKY7CiAgLy8gICAgIHRyeSB7IOKApiB9IGNhdGNoIChhKSB7IOKApiB9CiAgLy8gICB3aGVyZSBhIGlzIHRoZSBub2RlIHRvIGJlIGNoZWNrZWQuCiAgLy8KICAvLyAtIGNoZWNrTFZhbElubmVyUGF0dGVybigpIHNoYWxsIGJlIHVzZWQgaWYgdGhlIHN5bnRhY3RpYyBjb25zdHJ1Y3Qgc3VwcG9ydHMKICAvLyAgIGFueXRoaW5nIGNoZWNrTFZhbFBhdHRlcm4oKSBzdXBwb3J0cywgYXMgd2VsbCBhcyBkZWZhdWx0IGFzc2lnbm1lbnQKICAvLyAgIHBhdHRlcm5zLCByZXN0IGVsZW1lbnRzLCBhbmQgb3RoZXIgY29uc3RydWN0cyB0aGF0IG1heSBhcHBlYXIgd2l0aGluIGFuCiAgLy8gICBvYmplY3Qgb3IgYXJyYXkgZGVzdHJ1Y3R1cmluZyBwYXR0ZXJuLgogIC8vCiAgLy8gICBBcyBhIHNwZWNpYWwgY2FzZSwgZnVuY3Rpb24gcGFyYW1ldGVycyBhbHNvIHVzZSBjaGVja0xWYWxJbm5lclBhdHRlcm4oKSwKICAvLyAgIGFzIHRoZXkgYWxzbyBzdXBwb3J0IGRlZmF1bHRzIGFuZCByZXN0IGNvbnN0cnVjdHMuCiAgLy8KICAvLyBUaGVzZSBmdW5jdGlvbnMgZGVsaWJlcmF0ZWx5IHN1cHBvcnQgYm90aCBhc3NpZ25tZW50IGFuZCBiaW5kaW5nIGNvbnN0cnVjdHMsCiAgLy8gYXMgdGhlIGxvZ2ljIGZvciBib3RoIGlzIGV4Y2VlZGluZ2x5IHNpbWlsYXIuIElmIHRoZSBub2RlIGlzIHRoZSB0YXJnZXQgb2YKICAvLyBhbiBhc3NpZ25tZW50LCB0aGVuIGJpbmRpbmdUeXBlIHNob3VsZCBiZSBzZXQgdG8gQklORF9OT05FLiBPdGhlcndpc2UsIGl0CiAgLy8gc2hvdWxkIGJlIHNldCB0byB0aGUgYXBwcm9wcmlhdGUgQklORF8qIGNvbnN0YW50LCBsaWtlIEJJTkRfVkFSIG9yCiAgLy8gQklORF9MRVhJQ0FMLgogIC8vCiAgLy8gSWYgdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGEgbm9uLUJJTkRfTk9ORSBiaW5kaW5nVHlwZSwgdGhlbgogIC8vIGFkZGl0aW9uYWxseSBhIGNoZWNrQ2xhc2hlcyBvYmplY3QgbWF5IGJlIHNwZWNpZmllZCB0byBhbGxvdyBjaGVja2luZyBmb3IKICAvLyBkdXBsaWNhdGUgYXJndW1lbnQgbmFtZXMuIGNoZWNrQ2xhc2hlcyBpcyBpZ25vcmVkIGlmIHRoZSBwcm92aWRlZCBjb25zdHJ1Y3QKICAvLyBpcyBhbiBhc3NpZ25tZW50IChpLmUuLCBiaW5kaW5nVHlwZSBpcyBCSU5EX05PTkUpLgoKICBwcCQ3LmNoZWNrTFZhbFNpbXBsZSA9IGZ1bmN0aW9uKGV4cHIsIGJpbmRpbmdUeXBlLCBjaGVja0NsYXNoZXMpIHsKICAgIGlmICggYmluZGluZ1R5cGUgPT09IHZvaWQgMCApIGJpbmRpbmdUeXBlID0gQklORF9OT05FOwoKICAgIHZhciBpc0JpbmQgPSBiaW5kaW5nVHlwZSAhPT0gQklORF9OT05FOwoKICAgIHN3aXRjaCAoZXhwci50eXBlKSB7CiAgICBjYXNlICJJZGVudGlmaWVyIjoKICAgICAgaWYgKHRoaXMuc3RyaWN0ICYmIHRoaXMucmVzZXJ2ZWRXb3Jkc1N0cmljdEJpbmQudGVzdChleHByLm5hbWUpKQogICAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKGV4cHIuc3RhcnQsIChpc0JpbmQgPyAiQmluZGluZyAiIDogIkFzc2lnbmluZyB0byAiKSArIGV4cHIubmFtZSArICIgaW4gc3RyaWN0IG1vZGUiKTsgfQogICAgICBpZiAoaXNCaW5kKSB7CiAgICAgICAgaWYgKGJpbmRpbmdUeXBlID09PSBCSU5EX0xFWElDQUwgJiYgZXhwci5uYW1lID09PSAibGV0IikKICAgICAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKGV4cHIuc3RhcnQsICJsZXQgaXMgZGlzYWxsb3dlZCBhcyBhIGxleGljYWxseSBib3VuZCBuYW1lIik7IH0KICAgICAgICBpZiAoY2hlY2tDbGFzaGVzKSB7CiAgICAgICAgICBpZiAoaGFzT3duKGNoZWNrQ2xhc2hlcywgZXhwci5uYW1lKSkKICAgICAgICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUoZXhwci5zdGFydCwgIkFyZ3VtZW50IG5hbWUgY2xhc2giKTsgfQogICAgICAgICAgY2hlY2tDbGFzaGVzW2V4cHIubmFtZV0gPSB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoYmluZGluZ1R5cGUgIT09IEJJTkRfT1VUU0lERSkgeyB0aGlzLmRlY2xhcmVOYW1lKGV4cHIubmFtZSwgYmluZGluZ1R5cGUsIGV4cHIuc3RhcnQpOyB9CiAgICAgIH0KICAgICAgYnJlYWsKCiAgICBjYXNlICJDaGFpbkV4cHJlc3Npb24iOgogICAgICB0aGlzLnJhaXNlUmVjb3ZlcmFibGUoZXhwci5zdGFydCwgIk9wdGlvbmFsIGNoYWluaW5nIGNhbm5vdCBhcHBlYXIgaW4gbGVmdC1oYW5kIHNpZGUiKTsKICAgICAgYnJlYWsKCiAgICBjYXNlICJNZW1iZXJFeHByZXNzaW9uIjoKICAgICAgaWYgKGlzQmluZCkgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUoZXhwci5zdGFydCwgIkJpbmRpbmcgbWVtYmVyIGV4cHJlc3Npb24iKTsgfQogICAgICBicmVhawoKICAgIGNhc2UgIlBhcmVudGhlc2l6ZWRFeHByZXNzaW9uIjoKICAgICAgaWYgKGlzQmluZCkgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUoZXhwci5zdGFydCwgIkJpbmRpbmcgcGFyZW50aGVzaXplZCBleHByZXNzaW9uIik7IH0KICAgICAgcmV0dXJuIHRoaXMuY2hlY2tMVmFsU2ltcGxlKGV4cHIuZXhwcmVzc2lvbiwgYmluZGluZ1R5cGUsIGNoZWNrQ2xhc2hlcykKCiAgICBkZWZhdWx0OgogICAgICB0aGlzLnJhaXNlKGV4cHIuc3RhcnQsIChpc0JpbmQgPyAiQmluZGluZyIgOiAiQXNzaWduaW5nIHRvIikgKyAiIHJ2YWx1ZSIpOwogICAgfQogIH07CgogIHBwJDcuY2hlY2tMVmFsUGF0dGVybiA9IGZ1bmN0aW9uKGV4cHIsIGJpbmRpbmdUeXBlLCBjaGVja0NsYXNoZXMpIHsKICAgIGlmICggYmluZGluZ1R5cGUgPT09IHZvaWQgMCApIGJpbmRpbmdUeXBlID0gQklORF9OT05FOwoKICAgIHN3aXRjaCAoZXhwci50eXBlKSB7CiAgICBjYXNlICJPYmplY3RQYXR0ZXJuIjoKICAgICAgZm9yICh2YXIgaSA9IDAsIGxpc3QgPSBleHByLnByb3BlcnRpZXM7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgdmFyIHByb3AgPSBsaXN0W2ldOwoKICAgICAgdGhpcy5jaGVja0xWYWxJbm5lclBhdHRlcm4ocHJvcCwgYmluZGluZ1R5cGUsIGNoZWNrQ2xhc2hlcyk7CiAgICAgIH0KICAgICAgYnJlYWsKCiAgICBjYXNlICJBcnJheVBhdHRlcm4iOgogICAgICBmb3IgKHZhciBpJDEgPSAwLCBsaXN0JDEgPSBleHByLmVsZW1lbnRzOyBpJDEgPCBsaXN0JDEubGVuZ3RoOyBpJDEgKz0gMSkgewogICAgICAgIHZhciBlbGVtID0gbGlzdCQxW2kkMV07CgogICAgICBpZiAoZWxlbSkgeyB0aGlzLmNoZWNrTFZhbElubmVyUGF0dGVybihlbGVtLCBiaW5kaW5nVHlwZSwgY2hlY2tDbGFzaGVzKTsgfQogICAgICB9CiAgICAgIGJyZWFrCgogICAgZGVmYXVsdDoKICAgICAgdGhpcy5jaGVja0xWYWxTaW1wbGUoZXhwciwgYmluZGluZ1R5cGUsIGNoZWNrQ2xhc2hlcyk7CiAgICB9CiAgfTsKCiAgcHAkNy5jaGVja0xWYWxJbm5lclBhdHRlcm4gPSBmdW5jdGlvbihleHByLCBiaW5kaW5nVHlwZSwgY2hlY2tDbGFzaGVzKSB7CiAgICBpZiAoIGJpbmRpbmdUeXBlID09PSB2b2lkIDAgKSBiaW5kaW5nVHlwZSA9IEJJTkRfTk9ORTsKCiAgICBzd2l0Y2ggKGV4cHIudHlwZSkgewogICAgY2FzZSAiUHJvcGVydHkiOgogICAgICAvLyBBc3NpZ25tZW50UHJvcGVydHkgaGFzIHR5cGUgPT09ICJQcm9wZXJ0eSIKICAgICAgdGhpcy5jaGVja0xWYWxJbm5lclBhdHRlcm4oZXhwci52YWx1ZSwgYmluZGluZ1R5cGUsIGNoZWNrQ2xhc2hlcyk7CiAgICAgIGJyZWFrCgogICAgY2FzZSAiQXNzaWdubWVudFBhdHRlcm4iOgogICAgICB0aGlzLmNoZWNrTFZhbFBhdHRlcm4oZXhwci5sZWZ0LCBiaW5kaW5nVHlwZSwgY2hlY2tDbGFzaGVzKTsKICAgICAgYnJlYWsKCiAgICBjYXNlICJSZXN0RWxlbWVudCI6CiAgICAgIHRoaXMuY2hlY2tMVmFsUGF0dGVybihleHByLmFyZ3VtZW50LCBiaW5kaW5nVHlwZSwgY2hlY2tDbGFzaGVzKTsKICAgICAgYnJlYWsKCiAgICBkZWZhdWx0OgogICAgICB0aGlzLmNoZWNrTFZhbFBhdHRlcm4oZXhwciwgYmluZGluZ1R5cGUsIGNoZWNrQ2xhc2hlcyk7CiAgICB9CiAgfTsKCiAgLy8gVGhlIGFsZ29yaXRobSB1c2VkIHRvIGRldGVybWluZSB3aGV0aGVyIGEgcmVnZXhwIGNhbiBhcHBlYXIgYXQgYQoKICB2YXIgVG9rQ29udGV4dCA9IGZ1bmN0aW9uIFRva0NvbnRleHQodG9rZW4sIGlzRXhwciwgcHJlc2VydmVTcGFjZSwgb3ZlcnJpZGUsIGdlbmVyYXRvcikgewogICAgdGhpcy50b2tlbiA9IHRva2VuOwogICAgdGhpcy5pc0V4cHIgPSAhIWlzRXhwcjsKICAgIHRoaXMucHJlc2VydmVTcGFjZSA9ICEhcHJlc2VydmVTcGFjZTsKICAgIHRoaXMub3ZlcnJpZGUgPSBvdmVycmlkZTsKICAgIHRoaXMuZ2VuZXJhdG9yID0gISFnZW5lcmF0b3I7CiAgfTsKCiAgdmFyIHR5cGVzID0gewogICAgYl9zdGF0OiBuZXcgVG9rQ29udGV4dCgieyIsIGZhbHNlKSwKICAgIGJfZXhwcjogbmV3IFRva0NvbnRleHQoInsiLCB0cnVlKSwKICAgIGJfdG1wbDogbmV3IFRva0NvbnRleHQoIiR7IiwgZmFsc2UpLAogICAgcF9zdGF0OiBuZXcgVG9rQ29udGV4dCgiKCIsIGZhbHNlKSwKICAgIHBfZXhwcjogbmV3IFRva0NvbnRleHQoIigiLCB0cnVlKSwKICAgIHFfdG1wbDogbmV3IFRva0NvbnRleHQoImAiLCB0cnVlLCB0cnVlLCBmdW5jdGlvbiAocCkgeyByZXR1cm4gcC50cnlSZWFkVGVtcGxhdGVUb2tlbigpOyB9KSwKICAgIGZfc3RhdDogbmV3IFRva0NvbnRleHQoImZ1bmN0aW9uIiwgZmFsc2UpLAogICAgZl9leHByOiBuZXcgVG9rQ29udGV4dCgiZnVuY3Rpb24iLCB0cnVlKSwKICAgIGZfZXhwcl9nZW46IG5ldyBUb2tDb250ZXh0KCJmdW5jdGlvbiIsIHRydWUsIGZhbHNlLCBudWxsLCB0cnVlKSwKICAgIGZfZ2VuOiBuZXcgVG9rQ29udGV4dCgiZnVuY3Rpb24iLCBmYWxzZSwgZmFsc2UsIG51bGwsIHRydWUpCiAgfTsKCiAgdmFyIHBwJDYgPSBQYXJzZXIucHJvdG90eXBlOwoKICBwcCQ2LmluaXRpYWxDb250ZXh0ID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gW3R5cGVzLmJfc3RhdF0KICB9OwoKICBwcCQ2LmN1ckNvbnRleHQgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLmNvbnRleHRbdGhpcy5jb250ZXh0Lmxlbmd0aCAtIDFdCiAgfTsKCiAgcHAkNi5icmFjZUlzQmxvY2sgPSBmdW5jdGlvbihwcmV2VHlwZSkgewogICAgdmFyIHBhcmVudCA9IHRoaXMuY3VyQ29udGV4dCgpOwogICAgaWYgKHBhcmVudCA9PT0gdHlwZXMuZl9leHByIHx8IHBhcmVudCA9PT0gdHlwZXMuZl9zdGF0KQogICAgICB7IHJldHVybiB0cnVlIH0KICAgIGlmIChwcmV2VHlwZSA9PT0gdHlwZXMkMS5jb2xvbiAmJiAocGFyZW50ID09PSB0eXBlcy5iX3N0YXQgfHwgcGFyZW50ID09PSB0eXBlcy5iX2V4cHIpKQogICAgICB7IHJldHVybiAhcGFyZW50LmlzRXhwciB9CgogICAgLy8gVGhlIGNoZWNrIGZvciBgdHQubmFtZSAmJiBleHByQWxsb3dlZGAgZGV0ZWN0cyB3aGV0aGVyIHdlIGFyZQogICAgLy8gYWZ0ZXIgYSBgeWllbGRgIG9yIGBvZmAgY29uc3RydWN0LiBTZWUgdGhlIGB1cGRhdGVDb250ZXh0YCBmb3IKICAgIC8vIGB0dC5uYW1lYC4KICAgIGlmIChwcmV2VHlwZSA9PT0gdHlwZXMkMS5fcmV0dXJuIHx8IHByZXZUeXBlID09PSB0eXBlcyQxLm5hbWUgJiYgdGhpcy5leHByQWxsb3dlZCkKICAgICAgeyByZXR1cm4gbGluZUJyZWFrLnRlc3QodGhpcy5pbnB1dC5zbGljZSh0aGlzLmxhc3RUb2tFbmQsIHRoaXMuc3RhcnQpKSB9CiAgICBpZiAocHJldlR5cGUgPT09IHR5cGVzJDEuX2Vsc2UgfHwgcHJldlR5cGUgPT09IHR5cGVzJDEuc2VtaSB8fCBwcmV2VHlwZSA9PT0gdHlwZXMkMS5lb2YgfHwgcHJldlR5cGUgPT09IHR5cGVzJDEucGFyZW5SIHx8IHByZXZUeXBlID09PSB0eXBlcyQxLmFycm93KQogICAgICB7IHJldHVybiB0cnVlIH0KICAgIGlmIChwcmV2VHlwZSA9PT0gdHlwZXMkMS5icmFjZUwpCiAgICAgIHsgcmV0dXJuIHBhcmVudCA9PT0gdHlwZXMuYl9zdGF0IH0KICAgIGlmIChwcmV2VHlwZSA9PT0gdHlwZXMkMS5fdmFyIHx8IHByZXZUeXBlID09PSB0eXBlcyQxLl9jb25zdCB8fCBwcmV2VHlwZSA9PT0gdHlwZXMkMS5uYW1lKQogICAgICB7IHJldHVybiBmYWxzZSB9CiAgICByZXR1cm4gIXRoaXMuZXhwckFsbG93ZWQKICB9OwoKICBwcCQ2LmluR2VuZXJhdG9yQ29udGV4dCA9IGZ1bmN0aW9uKCkgewogICAgZm9yICh2YXIgaSA9IHRoaXMuY29udGV4dC5sZW5ndGggLSAxOyBpID49IDE7IGktLSkgewogICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dFtpXTsKICAgICAgaWYgKGNvbnRleHQudG9rZW4gPT09ICJmdW5jdGlvbiIpCiAgICAgICAgeyByZXR1cm4gY29udGV4dC5nZW5lcmF0b3IgfQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKCiAgcHAkNi51cGRhdGVDb250ZXh0ID0gZnVuY3Rpb24ocHJldlR5cGUpIHsKICAgIHZhciB1cGRhdGUsIHR5cGUgPSB0aGlzLnR5cGU7CiAgICBpZiAodHlwZS5rZXl3b3JkICYmIHByZXZUeXBlID09PSB0eXBlcyQxLmRvdCkKICAgICAgeyB0aGlzLmV4cHJBbGxvd2VkID0gZmFsc2U7IH0KICAgIGVsc2UgaWYgKHVwZGF0ZSA9IHR5cGUudXBkYXRlQ29udGV4dCkKICAgICAgeyB1cGRhdGUuY2FsbCh0aGlzLCBwcmV2VHlwZSk7IH0KICAgIGVsc2UKICAgICAgeyB0aGlzLmV4cHJBbGxvd2VkID0gdHlwZS5iZWZvcmVFeHByOyB9CiAgfTsKCiAgLy8gVXNlZCB0byBoYW5kbGUgZWdkZSBjYXNlIHdoZW4gdG9rZW4gY29udGV4dCBjb3VsZCBub3QgYmUgaW5mZXJyZWQgY29ycmVjdGx5IGluIHRva2VuaXplIHBoYXNlCiAgcHAkNi5vdmVycmlkZUNvbnRleHQgPSBmdW5jdGlvbih0b2tlbkN0eCkgewogICAgaWYgKHRoaXMuY3VyQ29udGV4dCgpICE9PSB0b2tlbkN0eCkgewogICAgICB0aGlzLmNvbnRleHRbdGhpcy5jb250ZXh0Lmxlbmd0aCAtIDFdID0gdG9rZW5DdHg7CiAgICB9CiAgfTsKCiAgLy8gVG9rZW4tc3BlY2lmaWMgY29udGV4dCB1cGRhdGUgY29kZQoKICB0eXBlcyQxLnBhcmVuUi51cGRhdGVDb250ZXh0ID0gdHlwZXMkMS5icmFjZVIudXBkYXRlQ29udGV4dCA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuY29udGV4dC5sZW5ndGggPT09IDEpIHsKICAgICAgdGhpcy5leHByQWxsb3dlZCA9IHRydWU7CiAgICAgIHJldHVybgogICAgfQogICAgdmFyIG91dCA9IHRoaXMuY29udGV4dC5wb3AoKTsKICAgIGlmIChvdXQgPT09IHR5cGVzLmJfc3RhdCAmJiB0aGlzLmN1ckNvbnRleHQoKS50b2tlbiA9PT0gImZ1bmN0aW9uIikgewogICAgICBvdXQgPSB0aGlzLmNvbnRleHQucG9wKCk7CiAgICB9CiAgICB0aGlzLmV4cHJBbGxvd2VkID0gIW91dC5pc0V4cHI7CiAgfTsKCiAgdHlwZXMkMS5icmFjZUwudXBkYXRlQ29udGV4dCA9IGZ1bmN0aW9uKHByZXZUeXBlKSB7CiAgICB0aGlzLmNvbnRleHQucHVzaCh0aGlzLmJyYWNlSXNCbG9jayhwcmV2VHlwZSkgPyB0eXBlcy5iX3N0YXQgOiB0eXBlcy5iX2V4cHIpOwogICAgdGhpcy5leHByQWxsb3dlZCA9IHRydWU7CiAgfTsKCiAgdHlwZXMkMS5kb2xsYXJCcmFjZUwudXBkYXRlQ29udGV4dCA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5jb250ZXh0LnB1c2godHlwZXMuYl90bXBsKTsKICAgIHRoaXMuZXhwckFsbG93ZWQgPSB0cnVlOwogIH07CgogIHR5cGVzJDEucGFyZW5MLnVwZGF0ZUNvbnRleHQgPSBmdW5jdGlvbihwcmV2VHlwZSkgewogICAgdmFyIHN0YXRlbWVudFBhcmVucyA9IHByZXZUeXBlID09PSB0eXBlcyQxLl9pZiB8fCBwcmV2VHlwZSA9PT0gdHlwZXMkMS5fZm9yIHx8IHByZXZUeXBlID09PSB0eXBlcyQxLl93aXRoIHx8IHByZXZUeXBlID09PSB0eXBlcyQxLl93aGlsZTsKICAgIHRoaXMuY29udGV4dC5wdXNoKHN0YXRlbWVudFBhcmVucyA/IHR5cGVzLnBfc3RhdCA6IHR5cGVzLnBfZXhwcik7CiAgICB0aGlzLmV4cHJBbGxvd2VkID0gdHJ1ZTsKICB9OwoKICB0eXBlcyQxLmluY0RlYy51cGRhdGVDb250ZXh0ID0gZnVuY3Rpb24oKSB7CiAgICAvLyB0b2tFeHByQWxsb3dlZCBzdGF5cyB1bmNoYW5nZWQKICB9OwoKICB0eXBlcyQxLl9mdW5jdGlvbi51cGRhdGVDb250ZXh0ID0gdHlwZXMkMS5fY2xhc3MudXBkYXRlQ29udGV4dCA9IGZ1bmN0aW9uKHByZXZUeXBlKSB7CiAgICBpZiAocHJldlR5cGUuYmVmb3JlRXhwciAmJiBwcmV2VHlwZSAhPT0gdHlwZXMkMS5fZWxzZSAmJgogICAgICAgICEocHJldlR5cGUgPT09IHR5cGVzJDEuc2VtaSAmJiB0aGlzLmN1ckNvbnRleHQoKSAhPT0gdHlwZXMucF9zdGF0KSAmJgogICAgICAgICEocHJldlR5cGUgPT09IHR5cGVzJDEuX3JldHVybiAmJiBsaW5lQnJlYWsudGVzdCh0aGlzLmlucHV0LnNsaWNlKHRoaXMubGFzdFRva0VuZCwgdGhpcy5zdGFydCkpKSAmJgogICAgICAgICEoKHByZXZUeXBlID09PSB0eXBlcyQxLmNvbG9uIHx8IHByZXZUeXBlID09PSB0eXBlcyQxLmJyYWNlTCkgJiYgdGhpcy5jdXJDb250ZXh0KCkgPT09IHR5cGVzLmJfc3RhdCkpCiAgICAgIHsgdGhpcy5jb250ZXh0LnB1c2godHlwZXMuZl9leHByKTsgfQogICAgZWxzZQogICAgICB7IHRoaXMuY29udGV4dC5wdXNoKHR5cGVzLmZfc3RhdCk7IH0KICAgIHRoaXMuZXhwckFsbG93ZWQgPSBmYWxzZTsKICB9OwoKICB0eXBlcyQxLmJhY2tRdW90ZS51cGRhdGVDb250ZXh0ID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5jdXJDb250ZXh0KCkgPT09IHR5cGVzLnFfdG1wbCkKICAgICAgeyB0aGlzLmNvbnRleHQucG9wKCk7IH0KICAgIGVsc2UKICAgICAgeyB0aGlzLmNvbnRleHQucHVzaCh0eXBlcy5xX3RtcGwpOyB9CiAgICB0aGlzLmV4cHJBbGxvd2VkID0gZmFsc2U7CiAgfTsKCiAgdHlwZXMkMS5zdGFyLnVwZGF0ZUNvbnRleHQgPSBmdW5jdGlvbihwcmV2VHlwZSkgewogICAgaWYgKHByZXZUeXBlID09PSB0eXBlcyQxLl9mdW5jdGlvbikgewogICAgICB2YXIgaW5kZXggPSB0aGlzLmNvbnRleHQubGVuZ3RoIC0gMTsKICAgICAgaWYgKHRoaXMuY29udGV4dFtpbmRleF0gPT09IHR5cGVzLmZfZXhwcikKICAgICAgICB7IHRoaXMuY29udGV4dFtpbmRleF0gPSB0eXBlcy5mX2V4cHJfZ2VuOyB9CiAgICAgIGVsc2UKICAgICAgICB7IHRoaXMuY29udGV4dFtpbmRleF0gPSB0eXBlcy5mX2dlbjsgfQogICAgfQogICAgdGhpcy5leHByQWxsb3dlZCA9IHRydWU7CiAgfTsKCiAgdHlwZXMkMS5uYW1lLnVwZGF0ZUNvbnRleHQgPSBmdW5jdGlvbihwcmV2VHlwZSkgewogICAgdmFyIGFsbG93ZWQgPSBmYWxzZTsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNiAmJiBwcmV2VHlwZSAhPT0gdHlwZXMkMS5kb3QpIHsKICAgICAgaWYgKHRoaXMudmFsdWUgPT09ICJvZiIgJiYgIXRoaXMuZXhwckFsbG93ZWQgfHwKICAgICAgICAgIHRoaXMudmFsdWUgPT09ICJ5aWVsZCIgJiYgdGhpcy5pbkdlbmVyYXRvckNvbnRleHQoKSkKICAgICAgICB7IGFsbG93ZWQgPSB0cnVlOyB9CiAgICB9CiAgICB0aGlzLmV4cHJBbGxvd2VkID0gYWxsb3dlZDsKICB9OwoKICAvLyBBIHJlY3Vyc2l2ZSBkZXNjZW50IHBhcnNlciBvcGVyYXRlcyBieSBkZWZpbmluZyBmdW5jdGlvbnMgZm9yIGFsbAoKICB2YXIgcHAkNSA9IFBhcnNlci5wcm90b3R5cGU7CgogIC8vIENoZWNrIGlmIHByb3BlcnR5IG5hbWUgY2xhc2hlcyB3aXRoIGFscmVhZHkgYWRkZWQuCiAgLy8gT2JqZWN0L2NsYXNzIGdldHRlcnMgYW5kIHNldHRlcnMgYXJlIG5vdCBhbGxvd2VkIHRvIGNsYXNoIOKAlAogIC8vIGVpdGhlciB3aXRoIGVhY2ggb3RoZXIgb3Igd2l0aCBhbiBpbml0IHByb3BlcnR5IOKAlCBhbmQgaW4KICAvLyBzdHJpY3QgbW9kZSwgaW5pdCBwcm9wZXJ0aWVzIGFyZSBhbHNvIG5vdCBhbGxvd2VkIHRvIGJlIHJlcGVhdGVkLgoKICBwcCQ1LmNoZWNrUHJvcENsYXNoID0gZnVuY3Rpb24ocHJvcCwgcHJvcEhhc2gsIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOSAmJiBwcm9wLnR5cGUgPT09ICJTcHJlYWRFbGVtZW50IikKICAgICAgeyByZXR1cm4gfQogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2ICYmIChwcm9wLmNvbXB1dGVkIHx8IHByb3AubWV0aG9kIHx8IHByb3Auc2hvcnRoYW5kKSkKICAgICAgeyByZXR1cm4gfQogICAgdmFyIGtleSA9IHByb3Aua2V5OwogICAgdmFyIG5hbWU7CiAgICBzd2l0Y2ggKGtleS50eXBlKSB7CiAgICBjYXNlICJJZGVudGlmaWVyIjogbmFtZSA9IGtleS5uYW1lOyBicmVhawogICAgY2FzZSAiTGl0ZXJhbCI6IG5hbWUgPSBTdHJpbmcoa2V5LnZhbHVlKTsgYnJlYWsKICAgIGRlZmF1bHQ6IHJldHVybgogICAgfQogICAgdmFyIGtpbmQgPSBwcm9wLmtpbmQ7CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpIHsKICAgICAgaWYgKG5hbWUgPT09ICJfX3Byb3RvX18iICYmIGtpbmQgPT09ICJpbml0IikgewogICAgICAgIGlmIChwcm9wSGFzaC5wcm90bykgewogICAgICAgICAgaWYgKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsKICAgICAgICAgICAgaWYgKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMuZG91YmxlUHJvdG8gPCAwKSB7CiAgICAgICAgICAgICAgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5kb3VibGVQcm90byA9IGtleS5zdGFydDsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5yYWlzZVJlY292ZXJhYmxlKGtleS5zdGFydCwgIlJlZGVmaW5pdGlvbiBvZiBfX3Byb3RvX18gcHJvcGVydHkiKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcHJvcEhhc2gucHJvdG8gPSB0cnVlOwogICAgICB9CiAgICAgIHJldHVybgogICAgfQogICAgbmFtZSA9ICIkIiArIG5hbWU7CiAgICB2YXIgb3RoZXIgPSBwcm9wSGFzaFtuYW1lXTsKICAgIGlmIChvdGhlcikgewogICAgICB2YXIgcmVkZWZpbml0aW9uOwogICAgICBpZiAoa2luZCA9PT0gImluaXQiKSB7CiAgICAgICAgcmVkZWZpbml0aW9uID0gdGhpcy5zdHJpY3QgJiYgb3RoZXIuaW5pdCB8fCBvdGhlci5nZXQgfHwgb3RoZXIuc2V0OwogICAgICB9IGVsc2UgewogICAgICAgIHJlZGVmaW5pdGlvbiA9IG90aGVyLmluaXQgfHwgb3RoZXJba2luZF07CiAgICAgIH0KICAgICAgaWYgKHJlZGVmaW5pdGlvbikKICAgICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShrZXkuc3RhcnQsICJSZWRlZmluaXRpb24gb2YgcHJvcGVydHkiKTsgfQogICAgfSBlbHNlIHsKICAgICAgb3RoZXIgPSBwcm9wSGFzaFtuYW1lXSA9IHsKICAgICAgICBpbml0OiBmYWxzZSwKICAgICAgICBnZXQ6IGZhbHNlLAogICAgICAgIHNldDogZmFsc2UKICAgICAgfTsKICAgIH0KICAgIG90aGVyW2tpbmRdID0gdHJ1ZTsKICB9OwoKICAvLyAjIyMgRXhwcmVzc2lvbiBwYXJzaW5nCgogIC8vIFRoZXNlIG5lc3QsIGZyb20gdGhlIG1vc3QgZ2VuZXJhbCBleHByZXNzaW9uIHR5cGUgYXQgdGhlIHRvcCB0bwogIC8vICdhdG9taWMnLCBub25kaXZpc2libGUgZXhwcmVzc2lvbiB0eXBlcyBhdCB0aGUgYm90dG9tLiBNb3N0IG9mCiAgLy8gdGhlIGZ1bmN0aW9ucyB3aWxsIHNpbXBseSBsZXQgdGhlIGZ1bmN0aW9uKHMpIGJlbG93IHRoZW0gcGFyc2UsCiAgLy8gYW5kLCAqaWYqIHRoZSBzeW50YWN0aWMgY29uc3RydWN0IHRoZXkgaGFuZGxlIGlzIHByZXNlbnQsIHdyYXAKICAvLyB0aGUgQVNUIG5vZGUgdGhhdCB0aGUgaW5uZXIgcGFyc2VyIGdhdmUgdGhlbSBpbiBhbm90aGVyIG5vZGUuCgogIC8vIFBhcnNlIGEgZnVsbCBleHByZXNzaW9uLiBUaGUgb3B0aW9uYWwgYXJndW1lbnRzIGFyZSB1c2VkIHRvCiAgLy8gZm9yYmlkIHRoZSBgaW5gIG9wZXJhdG9yIChpbiBmb3IgbG9vcHMgaW5pdGFsaXphdGlvbiBleHByZXNzaW9ucykKICAvLyBhbmQgcHJvdmlkZSByZWZlcmVuY2UgZm9yIHN0b3JpbmcgJz0nIG9wZXJhdG9yIGluc2lkZSBzaG9ydGhhbmQKICAvLyBwcm9wZXJ0eSBhc3NpZ25tZW50IGluIGNvbnRleHRzIHdoZXJlIGJvdGggb2JqZWN0IGV4cHJlc3Npb24KICAvLyBhbmQgb2JqZWN0IHBhdHRlcm4gbWlnaHQgYXBwZWFyIChzbyBpdCdzIHBvc3NpYmxlIHRvIHJhaXNlCiAgLy8gZGVsYXllZCBzeW50YXggZXJyb3IgYXQgY29ycmVjdCBwb3NpdGlvbikuCgogIHBwJDUucGFyc2VFeHByZXNzaW9uID0gZnVuY3Rpb24oZm9ySW5pdCwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykgewogICAgdmFyIHN0YXJ0UG9zID0gdGhpcy5zdGFydCwgc3RhcnRMb2MgPSB0aGlzLnN0YXJ0TG9jOwogICAgdmFyIGV4cHIgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oZm9ySW5pdCwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyk7CiAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLmNvbW1hKSB7CiAgICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGVBdChzdGFydFBvcywgc3RhcnRMb2MpOwogICAgICBub2RlLmV4cHJlc3Npb25zID0gW2V4cHJdOwogICAgICB3aGlsZSAodGhpcy5lYXQodHlwZXMkMS5jb21tYSkpIHsgbm9kZS5leHByZXNzaW9ucy5wdXNoKHRoaXMucGFyc2VNYXliZUFzc2lnbihmb3JJbml0LCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKSk7IH0KICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiU2VxdWVuY2VFeHByZXNzaW9uIikKICAgIH0KICAgIHJldHVybiBleHByCiAgfTsKCiAgLy8gUGFyc2UgYW4gYXNzaWdubWVudCBleHByZXNzaW9uLiBUaGlzIGluY2x1ZGVzIGFwcGxpY2F0aW9ucyBvZgogIC8vIG9wZXJhdG9ycyBsaWtlIGArPWAuCgogIHBwJDUucGFyc2VNYXliZUFzc2lnbiA9IGZ1bmN0aW9uKGZvckluaXQsIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIGFmdGVyTGVmdFBhcnNlKSB7CiAgICBpZiAodGhpcy5pc0NvbnRleHR1YWwoInlpZWxkIikpIHsKICAgICAgaWYgKHRoaXMuaW5HZW5lcmF0b3IpIHsgcmV0dXJuIHRoaXMucGFyc2VZaWVsZChmb3JJbml0KSB9CiAgICAgIC8vIFRoZSB0b2tlbml6ZXIgd2lsbCBhc3N1bWUgYW4gZXhwcmVzc2lvbiBpcyBhbGxvd2VkIGFmdGVyCiAgICAgIC8vIGB5aWVsZGAsIGJ1dCB0aGlzIGlzbid0IHRoYXQga2luZCBvZiB5aWVsZAogICAgICBlbHNlIHsgdGhpcy5leHByQWxsb3dlZCA9IGZhbHNlOyB9CiAgICB9CgogICAgdmFyIG93bkRlc3RydWN0dXJpbmdFcnJvcnMgPSBmYWxzZSwgb2xkUGFyZW5Bc3NpZ24gPSAtMSwgb2xkVHJhaWxpbmdDb21tYSA9IC0xLCBvbGREb3VibGVQcm90byA9IC0xOwogICAgaWYgKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsKICAgICAgb2xkUGFyZW5Bc3NpZ24gPSByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnBhcmVudGhlc2l6ZWRBc3NpZ247CiAgICAgIG9sZFRyYWlsaW5nQ29tbWEgPSByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnRyYWlsaW5nQ29tbWE7CiAgICAgIG9sZERvdWJsZVByb3RvID0gcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5kb3VibGVQcm90bzsKICAgICAgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5wYXJlbnRoZXNpemVkQXNzaWduID0gcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy50cmFpbGluZ0NvbW1hID0gLTE7CiAgICB9IGVsc2UgewogICAgICByZWZEZXN0cnVjdHVyaW5nRXJyb3JzID0gbmV3IERlc3RydWN0dXJpbmdFcnJvcnM7CiAgICAgIG93bkRlc3RydWN0dXJpbmdFcnJvcnMgPSB0cnVlOwogICAgfQoKICAgIHZhciBzdGFydFBvcyA9IHRoaXMuc3RhcnQsIHN0YXJ0TG9jID0gdGhpcy5zdGFydExvYzsKICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEucGFyZW5MIHx8IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5uYW1lKSB7CiAgICAgIHRoaXMucG90ZW50aWFsQXJyb3dBdCA9IHRoaXMuc3RhcnQ7CiAgICAgIHRoaXMucG90ZW50aWFsQXJyb3dJbkZvckF3YWl0ID0gZm9ySW5pdCA9PT0gImF3YWl0IjsKICAgIH0KICAgIHZhciBsZWZ0ID0gdGhpcy5wYXJzZU1heWJlQ29uZGl0aW9uYWwoZm9ySW5pdCwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyk7CiAgICBpZiAoYWZ0ZXJMZWZ0UGFyc2UpIHsgbGVmdCA9IGFmdGVyTGVmdFBhcnNlLmNhbGwodGhpcywgbGVmdCwgc3RhcnRQb3MsIHN0YXJ0TG9jKTsgfQogICAgaWYgKHRoaXMudHlwZS5pc0Fzc2lnbikgewogICAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnRQb3MsIHN0YXJ0TG9jKTsKICAgICAgbm9kZS5vcGVyYXRvciA9IHRoaXMudmFsdWU7CiAgICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuZXEpCiAgICAgICAgeyBsZWZ0ID0gdGhpcy50b0Fzc2lnbmFibGUobGVmdCwgZmFsc2UsIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpOyB9CiAgICAgIGlmICghb3duRGVzdHJ1Y3R1cmluZ0Vycm9ycykgewogICAgICAgIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMucGFyZW50aGVzaXplZEFzc2lnbiA9IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMudHJhaWxpbmdDb21tYSA9IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMuZG91YmxlUHJvdG8gPSAtMTsKICAgICAgfQogICAgICBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5zaG9ydGhhbmRBc3NpZ24gPj0gbGVmdC5zdGFydCkKICAgICAgICB7IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMuc2hvcnRoYW5kQXNzaWduID0gLTE7IH0gLy8gcmVzZXQgYmVjYXVzZSBzaG9ydGhhbmQgZGVmYXVsdCB3YXMgdXNlZCBjb3JyZWN0bHkKICAgICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5lcSkKICAgICAgICB7IHRoaXMuY2hlY2tMVmFsUGF0dGVybihsZWZ0KTsgfQogICAgICBlbHNlCiAgICAgICAgeyB0aGlzLmNoZWNrTFZhbFNpbXBsZShsZWZ0KTsgfQogICAgICBub2RlLmxlZnQgPSBsZWZ0OwogICAgICB0aGlzLm5leHQoKTsKICAgICAgbm9kZS5yaWdodCA9IHRoaXMucGFyc2VNYXliZUFzc2lnbihmb3JJbml0KTsKICAgICAgaWYgKG9sZERvdWJsZVByb3RvID4gLTEpIHsgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5kb3VibGVQcm90byA9IG9sZERvdWJsZVByb3RvOyB9CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkFzc2lnbm1lbnRFeHByZXNzaW9uIikKICAgIH0gZWxzZSB7CiAgICAgIGlmIChvd25EZXN0cnVjdHVyaW5nRXJyb3JzKSB7IHRoaXMuY2hlY2tFeHByZXNzaW9uRXJyb3JzKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIHRydWUpOyB9CiAgICB9CiAgICBpZiAob2xkUGFyZW5Bc3NpZ24gPiAtMSkgeyByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnBhcmVudGhlc2l6ZWRBc3NpZ24gPSBvbGRQYXJlbkFzc2lnbjsgfQogICAgaWYgKG9sZFRyYWlsaW5nQ29tbWEgPiAtMSkgeyByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnRyYWlsaW5nQ29tbWEgPSBvbGRUcmFpbGluZ0NvbW1hOyB9CiAgICByZXR1cm4gbGVmdAogIH07CgogIC8vIFBhcnNlIGEgdGVybmFyeSBjb25kaXRpb25hbCAoYD86YCkgb3BlcmF0b3IuCgogIHBwJDUucGFyc2VNYXliZUNvbmRpdGlvbmFsID0gZnVuY3Rpb24oZm9ySW5pdCwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykgewogICAgdmFyIHN0YXJ0UG9zID0gdGhpcy5zdGFydCwgc3RhcnRMb2MgPSB0aGlzLnN0YXJ0TG9jOwogICAgdmFyIGV4cHIgPSB0aGlzLnBhcnNlRXhwck9wcyhmb3JJbml0LCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTsKICAgIGlmICh0aGlzLmNoZWNrRXhwcmVzc2lvbkVycm9ycyhyZWZEZXN0cnVjdHVyaW5nRXJyb3JzKSkgeyByZXR1cm4gZXhwciB9CiAgICBpZiAodGhpcy5lYXQodHlwZXMkMS5xdWVzdGlvbikpIHsKICAgICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0UG9zLCBzdGFydExvYyk7CiAgICAgIG5vZGUudGVzdCA9IGV4cHI7CiAgICAgIG5vZGUuY29uc2VxdWVudCA9IHRoaXMucGFyc2VNYXliZUFzc2lnbigpOwogICAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLmNvbG9uKTsKICAgICAgbm9kZS5hbHRlcm5hdGUgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oZm9ySW5pdCk7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkNvbmRpdGlvbmFsRXhwcmVzc2lvbiIpCiAgICB9CiAgICByZXR1cm4gZXhwcgogIH07CgogIC8vIFN0YXJ0IHRoZSBwcmVjZWRlbmNlIHBhcnNlci4KCiAgcHAkNS5wYXJzZUV4cHJPcHMgPSBmdW5jdGlvbihmb3JJbml0LCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKSB7CiAgICB2YXIgc3RhcnRQb3MgPSB0aGlzLnN0YXJ0LCBzdGFydExvYyA9IHRoaXMuc3RhcnRMb2M7CiAgICB2YXIgZXhwciA9IHRoaXMucGFyc2VNYXliZVVuYXJ5KHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIGZhbHNlLCBmYWxzZSwgZm9ySW5pdCk7CiAgICBpZiAodGhpcy5jaGVja0V4cHJlc3Npb25FcnJvcnMocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykpIHsgcmV0dXJuIGV4cHIgfQogICAgcmV0dXJuIGV4cHIuc3RhcnQgPT09IHN0YXJ0UG9zICYmIGV4cHIudHlwZSA9PT0gIkFycm93RnVuY3Rpb25FeHByZXNzaW9uIiA/IGV4cHIgOiB0aGlzLnBhcnNlRXhwck9wKGV4cHIsIHN0YXJ0UG9zLCBzdGFydExvYywgLTEsIGZvckluaXQpCiAgfTsKCiAgLy8gUGFyc2UgYmluYXJ5IG9wZXJhdG9ycyB3aXRoIHRoZSBvcGVyYXRvciBwcmVjZWRlbmNlIHBhcnNpbmcKICAvLyBhbGdvcml0aG0uIGBsZWZ0YCBpcyB0aGUgbGVmdC1oYW5kIHNpZGUgb2YgdGhlIG9wZXJhdG9yLgogIC8vIGBtaW5QcmVjYCBwcm92aWRlcyBjb250ZXh0IHRoYXQgYWxsb3dzIHRoZSBmdW5jdGlvbiB0byBzdG9wIGFuZAogIC8vIGRlZmVyIGZ1cnRoZXIgcGFyc2VyIHRvIG9uZSBvZiBpdHMgY2FsbGVycyB3aGVuIGl0IGVuY291bnRlcnMgYW4KICAvLyBvcGVyYXRvciB0aGF0IGhhcyBhIGxvd2VyIHByZWNlZGVuY2UgdGhhbiB0aGUgc2V0IGl0IGlzIHBhcnNpbmcuCgogIHBwJDUucGFyc2VFeHByT3AgPSBmdW5jdGlvbihsZWZ0LCBsZWZ0U3RhcnRQb3MsIGxlZnRTdGFydExvYywgbWluUHJlYywgZm9ySW5pdCkgewogICAgdmFyIHByZWMgPSB0aGlzLnR5cGUuYmlub3A7CiAgICBpZiAocHJlYyAhPSBudWxsICYmICghZm9ySW5pdCB8fCB0aGlzLnR5cGUgIT09IHR5cGVzJDEuX2luKSkgewogICAgICBpZiAocHJlYyA+IG1pblByZWMpIHsKICAgICAgICB2YXIgbG9naWNhbCA9IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5sb2dpY2FsT1IgfHwgdGhpcy50eXBlID09PSB0eXBlcyQxLmxvZ2ljYWxBTkQ7CiAgICAgICAgdmFyIGNvYWxlc2NlID0gdGhpcy50eXBlID09PSB0eXBlcyQxLmNvYWxlc2NlOwogICAgICAgIGlmIChjb2FsZXNjZSkgewogICAgICAgICAgLy8gSGFuZGxlIHRoZSBwcmVjZWRlbmNlIG9mIGB0dC5jb2FsZXNjZWAgYXMgZXF1YWwgdG8gdGhlIHJhbmdlIG9mIGxvZ2ljYWwgZXhwcmVzc2lvbnMuCiAgICAgICAgICAvLyBJbiBvdGhlciB3b3JkcywgYG5vZGUucmlnaHRgIHNob3VsZG4ndCBjb250YWluIGxvZ2ljYWwgZXhwcmVzc2lvbnMgaW4gb3JkZXIgdG8gY2hlY2sgdGhlIG1peGVkIGVycm9yLgogICAgICAgICAgcHJlYyA9IHR5cGVzJDEubG9naWNhbEFORC5iaW5vcDsKICAgICAgICB9CiAgICAgICAgdmFyIG9wID0gdGhpcy52YWx1ZTsKICAgICAgICB0aGlzLm5leHQoKTsKICAgICAgICB2YXIgc3RhcnRQb3MgPSB0aGlzLnN0YXJ0LCBzdGFydExvYyA9IHRoaXMuc3RhcnRMb2M7CiAgICAgICAgdmFyIHJpZ2h0ID0gdGhpcy5wYXJzZUV4cHJPcCh0aGlzLnBhcnNlTWF5YmVVbmFyeShudWxsLCBmYWxzZSwgZmFsc2UsIGZvckluaXQpLCBzdGFydFBvcywgc3RhcnRMb2MsIHByZWMsIGZvckluaXQpOwogICAgICAgIHZhciBub2RlID0gdGhpcy5idWlsZEJpbmFyeShsZWZ0U3RhcnRQb3MsIGxlZnRTdGFydExvYywgbGVmdCwgcmlnaHQsIG9wLCBsb2dpY2FsIHx8IGNvYWxlc2NlKTsKICAgICAgICBpZiAoKGxvZ2ljYWwgJiYgdGhpcy50eXBlID09PSB0eXBlcyQxLmNvYWxlc2NlKSB8fCAoY29hbGVzY2UgJiYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5sb2dpY2FsT1IgfHwgdGhpcy50eXBlID09PSB0eXBlcyQxLmxvZ2ljYWxBTkQpKSkgewogICAgICAgICAgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHRoaXMuc3RhcnQsICJMb2dpY2FsIGV4cHJlc3Npb25zIGFuZCBjb2FsZXNjZSBleHByZXNzaW9ucyBjYW5ub3QgYmUgbWl4ZWQuIFdyYXAgZWl0aGVyIGJ5IHBhcmVudGhlc2VzIik7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLnBhcnNlRXhwck9wKG5vZGUsIGxlZnRTdGFydFBvcywgbGVmdFN0YXJ0TG9jLCBtaW5QcmVjLCBmb3JJbml0KQogICAgICB9CiAgICB9CiAgICByZXR1cm4gbGVmdAogIH07CgogIHBwJDUuYnVpbGRCaW5hcnkgPSBmdW5jdGlvbihzdGFydFBvcywgc3RhcnRMb2MsIGxlZnQsIHJpZ2h0LCBvcCwgbG9naWNhbCkgewogICAgaWYgKHJpZ2h0LnR5cGUgPT09ICJQcml2YXRlSWRlbnRpZmllciIpIHsgdGhpcy5yYWlzZShyaWdodC5zdGFydCwgIlByaXZhdGUgaWRlbnRpZmllciBjYW4gb25seSBiZSBsZWZ0IHNpZGUgb2YgYmluYXJ5IGV4cHJlc3Npb24iKTsgfQogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0UG9zLCBzdGFydExvYyk7CiAgICBub2RlLmxlZnQgPSBsZWZ0OwogICAgbm9kZS5vcGVyYXRvciA9IG9wOwogICAgbm9kZS5yaWdodCA9IHJpZ2h0OwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCBsb2dpY2FsID8gIkxvZ2ljYWxFeHByZXNzaW9uIiA6ICJCaW5hcnlFeHByZXNzaW9uIikKICB9OwoKICAvLyBQYXJzZSB1bmFyeSBvcGVyYXRvcnMsIGJvdGggcHJlZml4IGFuZCBwb3N0Zml4LgoKICBwcCQ1LnBhcnNlTWF5YmVVbmFyeSA9IGZ1bmN0aW9uKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIHNhd1VuYXJ5LCBpbmNEZWMsIGZvckluaXQpIHsKICAgIHZhciBzdGFydFBvcyA9IHRoaXMuc3RhcnQsIHN0YXJ0TG9jID0gdGhpcy5zdGFydExvYywgZXhwcjsKICAgIGlmICh0aGlzLmlzQ29udGV4dHVhbCgiYXdhaXQiKSAmJiB0aGlzLmNhbkF3YWl0KSB7CiAgICAgIGV4cHIgPSB0aGlzLnBhcnNlQXdhaXQoZm9ySW5pdCk7CiAgICAgIHNhd1VuYXJ5ID0gdHJ1ZTsKICAgIH0gZWxzZSBpZiAodGhpcy50eXBlLnByZWZpeCkgewogICAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCksIHVwZGF0ZSA9IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5pbmNEZWM7CiAgICAgIG5vZGUub3BlcmF0b3IgPSB0aGlzLnZhbHVlOwogICAgICBub2RlLnByZWZpeCA9IHRydWU7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICBub2RlLmFyZ3VtZW50ID0gdGhpcy5wYXJzZU1heWJlVW5hcnkobnVsbCwgdHJ1ZSwgdXBkYXRlLCBmb3JJbml0KTsKICAgICAgdGhpcy5jaGVja0V4cHJlc3Npb25FcnJvcnMocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycywgdHJ1ZSk7CiAgICAgIGlmICh1cGRhdGUpIHsgdGhpcy5jaGVja0xWYWxTaW1wbGUobm9kZS5hcmd1bWVudCk7IH0KICAgICAgZWxzZSBpZiAodGhpcy5zdHJpY3QgJiYgbm9kZS5vcGVyYXRvciA9PT0gImRlbGV0ZSIgJiYKICAgICAgICAgICAgICAgbm9kZS5hcmd1bWVudC50eXBlID09PSAiSWRlbnRpZmllciIpCiAgICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUobm9kZS5zdGFydCwgIkRlbGV0aW5nIGxvY2FsIHZhcmlhYmxlIGluIHN0cmljdCBtb2RlIik7IH0KICAgICAgZWxzZSBpZiAobm9kZS5vcGVyYXRvciA9PT0gImRlbGV0ZSIgJiYgaXNQcml2YXRlRmllbGRBY2Nlc3Mobm9kZS5hcmd1bWVudCkpCiAgICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUobm9kZS5zdGFydCwgIlByaXZhdGUgZmllbGRzIGNhbiBub3QgYmUgZGVsZXRlZCIpOyB9CiAgICAgIGVsc2UgeyBzYXdVbmFyeSA9IHRydWU7IH0KICAgICAgZXhwciA9IHRoaXMuZmluaXNoTm9kZShub2RlLCB1cGRhdGUgPyAiVXBkYXRlRXhwcmVzc2lvbiIgOiAiVW5hcnlFeHByZXNzaW9uIik7CiAgICB9IGVsc2UgaWYgKCFzYXdVbmFyeSAmJiB0aGlzLnR5cGUgPT09IHR5cGVzJDEucHJpdmF0ZUlkKSB7CiAgICAgIGlmIChmb3JJbml0IHx8IHRoaXMucHJpdmF0ZU5hbWVTdGFjay5sZW5ndGggPT09IDApIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KICAgICAgZXhwciA9IHRoaXMucGFyc2VQcml2YXRlSWRlbnQoKTsKICAgICAgLy8gb25seSBjb3VsZCBiZSBwcml2YXRlIGZpZWxkcyBpbiAnaW4nLCBzdWNoIGFzICN4IGluIG9iagogICAgICBpZiAodGhpcy50eXBlICE9PSB0eXBlcyQxLl9pbikgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgfSBlbHNlIHsKICAgICAgZXhwciA9IHRoaXMucGFyc2VFeHByU3Vic2NyaXB0cyhyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLCBmb3JJbml0KTsKICAgICAgaWYgKHRoaXMuY2hlY2tFeHByZXNzaW9uRXJyb3JzKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpKSB7IHJldHVybiBleHByIH0KICAgICAgd2hpbGUgKHRoaXMudHlwZS5wb3N0Zml4ICYmICF0aGlzLmNhbkluc2VydFNlbWljb2xvbigpKSB7CiAgICAgICAgdmFyIG5vZGUkMSA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnRQb3MsIHN0YXJ0TG9jKTsKICAgICAgICBub2RlJDEub3BlcmF0b3IgPSB0aGlzLnZhbHVlOwogICAgICAgIG5vZGUkMS5wcmVmaXggPSBmYWxzZTsKICAgICAgICBub2RlJDEuYXJndW1lbnQgPSBleHByOwogICAgICAgIHRoaXMuY2hlY2tMVmFsU2ltcGxlKGV4cHIpOwogICAgICAgIHRoaXMubmV4dCgpOwogICAgICAgIGV4cHIgPSB0aGlzLmZpbmlzaE5vZGUobm9kZSQxLCAiVXBkYXRlRXhwcmVzc2lvbiIpOwogICAgICB9CiAgICB9CgogICAgaWYgKCFpbmNEZWMgJiYgdGhpcy5lYXQodHlwZXMkMS5zdGFyc3RhcikpIHsKICAgICAgaWYgKHNhd1VuYXJ5KQogICAgICAgIHsgdGhpcy51bmV4cGVjdGVkKHRoaXMubGFzdFRva1N0YXJ0KTsgfQogICAgICBlbHNlCiAgICAgICAgeyByZXR1cm4gdGhpcy5idWlsZEJpbmFyeShzdGFydFBvcywgc3RhcnRMb2MsIGV4cHIsIHRoaXMucGFyc2VNYXliZVVuYXJ5KG51bGwsIGZhbHNlLCBmYWxzZSwgZm9ySW5pdCksICIqKiIsIGZhbHNlKSB9CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZXhwcgogICAgfQogIH07CgogIGZ1bmN0aW9uIGlzUHJpdmF0ZUZpZWxkQWNjZXNzKG5vZGUpIHsKICAgIHJldHVybiAoCiAgICAgIG5vZGUudHlwZSA9PT0gIk1lbWJlckV4cHJlc3Npb24iICYmIG5vZGUucHJvcGVydHkudHlwZSA9PT0gIlByaXZhdGVJZGVudGlmaWVyIiB8fAogICAgICBub2RlLnR5cGUgPT09ICJDaGFpbkV4cHJlc3Npb24iICYmIGlzUHJpdmF0ZUZpZWxkQWNjZXNzKG5vZGUuZXhwcmVzc2lvbikKICAgICkKICB9CgogIC8vIFBhcnNlIGNhbGwsIGRvdCwgYW5kIGBbXWAtc3Vic2NyaXB0IGV4cHJlc3Npb25zLgoKICBwcCQ1LnBhcnNlRXhwclN1YnNjcmlwdHMgPSBmdW5jdGlvbihyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLCBmb3JJbml0KSB7CiAgICB2YXIgc3RhcnRQb3MgPSB0aGlzLnN0YXJ0LCBzdGFydExvYyA9IHRoaXMuc3RhcnRMb2M7CiAgICB2YXIgZXhwciA9IHRoaXMucGFyc2VFeHByQXRvbShyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLCBmb3JJbml0KTsKICAgIGlmIChleHByLnR5cGUgPT09ICJBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbiIgJiYgdGhpcy5pbnB1dC5zbGljZSh0aGlzLmxhc3RUb2tTdGFydCwgdGhpcy5sYXN0VG9rRW5kKSAhPT0gIikiKQogICAgICB7IHJldHVybiBleHByIH0KICAgIHZhciByZXN1bHQgPSB0aGlzLnBhcnNlU3Vic2NyaXB0cyhleHByLCBzdGFydFBvcywgc3RhcnRMb2MsIGZhbHNlLCBmb3JJbml0KTsKICAgIGlmIChyZWZEZXN0cnVjdHVyaW5nRXJyb3JzICYmIHJlc3VsdC50eXBlID09PSAiTWVtYmVyRXhwcmVzc2lvbiIpIHsKICAgICAgaWYgKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMucGFyZW50aGVzaXplZEFzc2lnbiA+PSByZXN1bHQuc3RhcnQpIHsgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5wYXJlbnRoZXNpemVkQXNzaWduID0gLTE7IH0KICAgICAgaWYgKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMucGFyZW50aGVzaXplZEJpbmQgPj0gcmVzdWx0LnN0YXJ0KSB7IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMucGFyZW50aGVzaXplZEJpbmQgPSAtMTsgfQogICAgICBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy50cmFpbGluZ0NvbW1hID49IHJlc3VsdC5zdGFydCkgeyByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnRyYWlsaW5nQ29tbWEgPSAtMTsgfQogICAgfQogICAgcmV0dXJuIHJlc3VsdAogIH07CgogIHBwJDUucGFyc2VTdWJzY3JpcHRzID0gZnVuY3Rpb24oYmFzZSwgc3RhcnRQb3MsIHN0YXJ0TG9jLCBub0NhbGxzLCBmb3JJbml0KSB7CiAgICB2YXIgbWF5YmVBc3luY0Fycm93ID0gdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDggJiYgYmFzZS50eXBlID09PSAiSWRlbnRpZmllciIgJiYgYmFzZS5uYW1lID09PSAiYXN5bmMiICYmCiAgICAgICAgdGhpcy5sYXN0VG9rRW5kID09PSBiYXNlLmVuZCAmJiAhdGhpcy5jYW5JbnNlcnRTZW1pY29sb24oKSAmJiBiYXNlLmVuZCAtIGJhc2Uuc3RhcnQgPT09IDUgJiYKICAgICAgICB0aGlzLnBvdGVudGlhbEFycm93QXQgPT09IGJhc2Uuc3RhcnQ7CiAgICB2YXIgb3B0aW9uYWxDaGFpbmVkID0gZmFsc2U7CgogICAgd2hpbGUgKHRydWUpIHsKICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLnBhcnNlU3Vic2NyaXB0KGJhc2UsIHN0YXJ0UG9zLCBzdGFydExvYywgbm9DYWxscywgbWF5YmVBc3luY0Fycm93LCBvcHRpb25hbENoYWluZWQsIGZvckluaXQpOwoKICAgICAgaWYgKGVsZW1lbnQub3B0aW9uYWwpIHsgb3B0aW9uYWxDaGFpbmVkID0gdHJ1ZTsgfQogICAgICBpZiAoZWxlbWVudCA9PT0gYmFzZSB8fCBlbGVtZW50LnR5cGUgPT09ICJBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbiIpIHsKICAgICAgICBpZiAob3B0aW9uYWxDaGFpbmVkKSB7CiAgICAgICAgICB2YXIgY2hhaW5Ob2RlID0gdGhpcy5zdGFydE5vZGVBdChzdGFydFBvcywgc3RhcnRMb2MpOwogICAgICAgICAgY2hhaW5Ob2RlLmV4cHJlc3Npb24gPSBlbGVtZW50OwogICAgICAgICAgZWxlbWVudCA9IHRoaXMuZmluaXNoTm9kZShjaGFpbk5vZGUsICJDaGFpbkV4cHJlc3Npb24iKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGVsZW1lbnQKICAgICAgfQoKICAgICAgYmFzZSA9IGVsZW1lbnQ7CiAgICB9CiAgfTsKCiAgcHAkNS5wYXJzZVN1YnNjcmlwdCA9IGZ1bmN0aW9uKGJhc2UsIHN0YXJ0UG9zLCBzdGFydExvYywgbm9DYWxscywgbWF5YmVBc3luY0Fycm93LCBvcHRpb25hbENoYWluZWQsIGZvckluaXQpIHsKICAgIHZhciBvcHRpb25hbFN1cHBvcnRlZCA9IHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSAxMTsKICAgIHZhciBvcHRpb25hbCA9IG9wdGlvbmFsU3VwcG9ydGVkICYmIHRoaXMuZWF0KHR5cGVzJDEucXVlc3Rpb25Eb3QpOwogICAgaWYgKG5vQ2FsbHMgJiYgb3B0aW9uYWwpIHsgdGhpcy5yYWlzZSh0aGlzLmxhc3RUb2tTdGFydCwgIk9wdGlvbmFsIGNoYWluaW5nIGNhbm5vdCBhcHBlYXIgaW4gdGhlIGNhbGxlZSBvZiBuZXcgZXhwcmVzc2lvbnMiKTsgfQoKICAgIHZhciBjb21wdXRlZCA9IHRoaXMuZWF0KHR5cGVzJDEuYnJhY2tldEwpOwogICAgaWYgKGNvbXB1dGVkIHx8IChvcHRpb25hbCAmJiB0aGlzLnR5cGUgIT09IHR5cGVzJDEucGFyZW5MICYmIHRoaXMudHlwZSAhPT0gdHlwZXMkMS5iYWNrUXVvdGUpIHx8IHRoaXMuZWF0KHR5cGVzJDEuZG90KSkgewogICAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnRQb3MsIHN0YXJ0TG9jKTsKICAgICAgbm9kZS5vYmplY3QgPSBiYXNlOwogICAgICBpZiAoY29tcHV0ZWQpIHsKICAgICAgICBub2RlLnByb3BlcnR5ID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oKTsKICAgICAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLmJyYWNrZXRSKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEucHJpdmF0ZUlkICYmIGJhc2UudHlwZSAhPT0gIlN1cGVyIikgewogICAgICAgIG5vZGUucHJvcGVydHkgPSB0aGlzLnBhcnNlUHJpdmF0ZUlkZW50KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbm9kZS5wcm9wZXJ0eSA9IHRoaXMucGFyc2VJZGVudCh0aGlzLm9wdGlvbnMuYWxsb3dSZXNlcnZlZCAhPT0gIm5ldmVyIik7CiAgICAgIH0KICAgICAgbm9kZS5jb21wdXRlZCA9ICEhY29tcHV0ZWQ7CiAgICAgIGlmIChvcHRpb25hbFN1cHBvcnRlZCkgewogICAgICAgIG5vZGUub3B0aW9uYWwgPSBvcHRpb25hbDsKICAgICAgfQogICAgICBiYXNlID0gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJNZW1iZXJFeHByZXNzaW9uIik7CiAgICB9IGVsc2UgaWYgKCFub0NhbGxzICYmIHRoaXMuZWF0KHR5cGVzJDEucGFyZW5MKSkgewogICAgICB2YXIgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyA9IG5ldyBEZXN0cnVjdHVyaW5nRXJyb3JzLCBvbGRZaWVsZFBvcyA9IHRoaXMueWllbGRQb3MsIG9sZEF3YWl0UG9zID0gdGhpcy5hd2FpdFBvcywgb2xkQXdhaXRJZGVudFBvcyA9IHRoaXMuYXdhaXRJZGVudFBvczsKICAgICAgdGhpcy55aWVsZFBvcyA9IDA7CiAgICAgIHRoaXMuYXdhaXRQb3MgPSAwOwogICAgICB0aGlzLmF3YWl0SWRlbnRQb3MgPSAwOwogICAgICB2YXIgZXhwckxpc3QgPSB0aGlzLnBhcnNlRXhwckxpc3QodHlwZXMkMS5wYXJlblIsIHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA4LCBmYWxzZSwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyk7CiAgICAgIGlmIChtYXliZUFzeW5jQXJyb3cgJiYgIW9wdGlvbmFsICYmICF0aGlzLmNhbkluc2VydFNlbWljb2xvbigpICYmIHRoaXMuZWF0KHR5cGVzJDEuYXJyb3cpKSB7CiAgICAgICAgdGhpcy5jaGVja1BhdHRlcm5FcnJvcnMocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycywgZmFsc2UpOwogICAgICAgIHRoaXMuY2hlY2tZaWVsZEF3YWl0SW5EZWZhdWx0UGFyYW1zKCk7CiAgICAgICAgaWYgKHRoaXMuYXdhaXRJZGVudFBvcyA+IDApCiAgICAgICAgICB7IHRoaXMucmFpc2UodGhpcy5hd2FpdElkZW50UG9zLCAiQ2Fubm90IHVzZSAnYXdhaXQnIGFzIGlkZW50aWZpZXIgaW5zaWRlIGFuIGFzeW5jIGZ1bmN0aW9uIik7IH0KICAgICAgICB0aGlzLnlpZWxkUG9zID0gb2xkWWllbGRQb3M7CiAgICAgICAgdGhpcy5hd2FpdFBvcyA9IG9sZEF3YWl0UG9zOwogICAgICAgIHRoaXMuYXdhaXRJZGVudFBvcyA9IG9sZEF3YWl0SWRlbnRQb3M7CiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VBcnJvd0V4cHJlc3Npb24odGhpcy5zdGFydE5vZGVBdChzdGFydFBvcywgc3RhcnRMb2MpLCBleHByTGlzdCwgdHJ1ZSwgZm9ySW5pdCkKICAgICAgfQogICAgICB0aGlzLmNoZWNrRXhwcmVzc2lvbkVycm9ycyhyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLCB0cnVlKTsKICAgICAgdGhpcy55aWVsZFBvcyA9IG9sZFlpZWxkUG9zIHx8IHRoaXMueWllbGRQb3M7CiAgICAgIHRoaXMuYXdhaXRQb3MgPSBvbGRBd2FpdFBvcyB8fCB0aGlzLmF3YWl0UG9zOwogICAgICB0aGlzLmF3YWl0SWRlbnRQb3MgPSBvbGRBd2FpdElkZW50UG9zIHx8IHRoaXMuYXdhaXRJZGVudFBvczsKICAgICAgdmFyIG5vZGUkMSA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnRQb3MsIHN0YXJ0TG9jKTsKICAgICAgbm9kZSQxLmNhbGxlZSA9IGJhc2U7CiAgICAgIG5vZGUkMS5hcmd1bWVudHMgPSBleHByTGlzdDsKICAgICAgaWYgKG9wdGlvbmFsU3VwcG9ydGVkKSB7CiAgICAgICAgbm9kZSQxLm9wdGlvbmFsID0gb3B0aW9uYWw7CiAgICAgIH0KICAgICAgYmFzZSA9IHRoaXMuZmluaXNoTm9kZShub2RlJDEsICJDYWxsRXhwcmVzc2lvbiIpOwogICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuYmFja1F1b3RlKSB7CiAgICAgIGlmIChvcHRpb25hbCB8fCBvcHRpb25hbENoYWluZWQpIHsKICAgICAgICB0aGlzLnJhaXNlKHRoaXMuc3RhcnQsICJPcHRpb25hbCBjaGFpbmluZyBjYW5ub3QgYXBwZWFyIGluIHRoZSB0YWcgb2YgdGFnZ2VkIHRlbXBsYXRlIGV4cHJlc3Npb25zIik7CiAgICAgIH0KICAgICAgdmFyIG5vZGUkMiA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnRQb3MsIHN0YXJ0TG9jKTsKICAgICAgbm9kZSQyLnRhZyA9IGJhc2U7CiAgICAgIG5vZGUkMi5xdWFzaSA9IHRoaXMucGFyc2VUZW1wbGF0ZSh7aXNUYWdnZWQ6IHRydWV9KTsKICAgICAgYmFzZSA9IHRoaXMuZmluaXNoTm9kZShub2RlJDIsICJUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24iKTsKICAgIH0KICAgIHJldHVybiBiYXNlCiAgfTsKCiAgLy8gUGFyc2UgYW4gYXRvbWljIGV4cHJlc3Npb24g4oCUIGVpdGhlciBhIHNpbmdsZSB0b2tlbiB0aGF0IGlzIGFuCiAgLy8gZXhwcmVzc2lvbiwgYW4gZXhwcmVzc2lvbiBzdGFydGVkIGJ5IGEga2V5d29yZCBsaWtlIGBmdW5jdGlvbmAgb3IKICAvLyBgbmV3YCwgb3IgYW4gZXhwcmVzc2lvbiB3cmFwcGVkIGluIHB1bmN0dWF0aW9uIGxpa2UgYCgpYCwgYFtdYCwKICAvLyBvciBge31gLgoKICBwcCQ1LnBhcnNlRXhwckF0b20gPSBmdW5jdGlvbihyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLCBmb3JJbml0KSB7CiAgICAvLyBJZiBhIGRpdmlzaW9uIG9wZXJhdG9yIGFwcGVhcnMgaW4gYW4gZXhwcmVzc2lvbiBwb3NpdGlvbiwgdGhlCiAgICAvLyB0b2tlbml6ZXIgZ290IGNvbmZ1c2VkLCBhbmQgd2UgZm9yY2UgaXQgdG8gcmVhZCBhIHJlZ2V4cCBpbnN0ZWFkLgogICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5zbGFzaCkgeyB0aGlzLnJlYWRSZWdleHAoKTsgfQoKICAgIHZhciBub2RlLCBjYW5CZUFycm93ID0gdGhpcy5wb3RlbnRpYWxBcnJvd0F0ID09PSB0aGlzLnN0YXJ0OwogICAgc3dpdGNoICh0aGlzLnR5cGUpIHsKICAgIGNhc2UgdHlwZXMkMS5fc3VwZXI6CiAgICAgIGlmICghdGhpcy5hbGxvd1N1cGVyKQogICAgICAgIHsgdGhpcy5yYWlzZSh0aGlzLnN0YXJ0LCAiJ3N1cGVyJyBrZXl3b3JkIG91dHNpZGUgYSBtZXRob2QiKTsgfQogICAgICBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEucGFyZW5MICYmICF0aGlzLmFsbG93RGlyZWN0U3VwZXIpCiAgICAgICAgeyB0aGlzLnJhaXNlKG5vZGUuc3RhcnQsICJzdXBlcigpIGNhbGwgb3V0c2lkZSBjb25zdHJ1Y3RvciBvZiBhIHN1YmNsYXNzIik7IH0KICAgICAgLy8gVGhlIGBzdXBlcmAga2V5d29yZCBjYW4gYXBwZWFyIGF0IGJlbG93OgogICAgICAvLyBTdXBlclByb3BlcnR5OgogICAgICAvLyAgICAgc3VwZXIgWyBFeHByZXNzaW9uIF0KICAgICAgLy8gICAgIHN1cGVyIC4gSWRlbnRpZmllck5hbWUKICAgICAgLy8gU3VwZXJDYWxsOgogICAgICAvLyAgICAgc3VwZXIgKCBBcmd1bWVudHMgKQogICAgICBpZiAodGhpcy50eXBlICE9PSB0eXBlcyQxLmRvdCAmJiB0aGlzLnR5cGUgIT09IHR5cGVzJDEuYnJhY2tldEwgJiYgdGhpcy50eXBlICE9PSB0eXBlcyQxLnBhcmVuTCkKICAgICAgICB7IHRoaXMudW5leHBlY3RlZCgpOyB9CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlN1cGVyIikKCiAgICBjYXNlIHR5cGVzJDEuX3RoaXM6CiAgICAgIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICB0aGlzLm5leHQoKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiVGhpc0V4cHJlc3Npb24iKQoKICAgIGNhc2UgdHlwZXMkMS5uYW1lOgogICAgICB2YXIgc3RhcnRQb3MgPSB0aGlzLnN0YXJ0LCBzdGFydExvYyA9IHRoaXMuc3RhcnRMb2MsIGNvbnRhaW5zRXNjID0gdGhpcy5jb250YWluc0VzYzsKICAgICAgdmFyIGlkID0gdGhpcy5wYXJzZUlkZW50KGZhbHNlKTsKICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA4ICYmICFjb250YWluc0VzYyAmJiBpZC5uYW1lID09PSAiYXN5bmMiICYmICF0aGlzLmNhbkluc2VydFNlbWljb2xvbigpICYmIHRoaXMuZWF0KHR5cGVzJDEuX2Z1bmN0aW9uKSkgewogICAgICAgIHRoaXMub3ZlcnJpZGVDb250ZXh0KHR5cGVzLmZfZXhwcik7CiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VGdW5jdGlvbih0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0UG9zLCBzdGFydExvYyksIDAsIGZhbHNlLCB0cnVlLCBmb3JJbml0KQogICAgICB9CiAgICAgIGlmIChjYW5CZUFycm93ICYmICF0aGlzLmNhbkluc2VydFNlbWljb2xvbigpKSB7CiAgICAgICAgaWYgKHRoaXMuZWF0KHR5cGVzJDEuYXJyb3cpKQogICAgICAgICAgeyByZXR1cm4gdGhpcy5wYXJzZUFycm93RXhwcmVzc2lvbih0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0UG9zLCBzdGFydExvYyksIFtpZF0sIGZhbHNlLCBmb3JJbml0KSB9CiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA4ICYmIGlkLm5hbWUgPT09ICJhc3luYyIgJiYgdGhpcy50eXBlID09PSB0eXBlcyQxLm5hbWUgJiYgIWNvbnRhaW5zRXNjICYmCiAgICAgICAgICAgICghdGhpcy5wb3RlbnRpYWxBcnJvd0luRm9yQXdhaXQgfHwgdGhpcy52YWx1ZSAhPT0gIm9mIiB8fCB0aGlzLmNvbnRhaW5zRXNjKSkgewogICAgICAgICAgaWQgPSB0aGlzLnBhcnNlSWRlbnQoZmFsc2UpOwogICAgICAgICAgaWYgKHRoaXMuY2FuSW5zZXJ0U2VtaWNvbG9uKCkgfHwgIXRoaXMuZWF0KHR5cGVzJDEuYXJyb3cpKQogICAgICAgICAgICB7IHRoaXMudW5leHBlY3RlZCgpOyB9CiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUFycm93RXhwcmVzc2lvbih0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0UG9zLCBzdGFydExvYyksIFtpZF0sIHRydWUsIGZvckluaXQpCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBpZAoKICAgIGNhc2UgdHlwZXMkMS5yZWdleHA6CiAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWU7CiAgICAgIG5vZGUgPSB0aGlzLnBhcnNlTGl0ZXJhbCh2YWx1ZS52YWx1ZSk7CiAgICAgIG5vZGUucmVnZXggPSB7cGF0dGVybjogdmFsdWUucGF0dGVybiwgZmxhZ3M6IHZhbHVlLmZsYWdzfTsKICAgICAgcmV0dXJuIG5vZGUKCiAgICBjYXNlIHR5cGVzJDEubnVtOiBjYXNlIHR5cGVzJDEuc3RyaW5nOgogICAgICByZXR1cm4gdGhpcy5wYXJzZUxpdGVyYWwodGhpcy52YWx1ZSkKCiAgICBjYXNlIHR5cGVzJDEuX251bGw6IGNhc2UgdHlwZXMkMS5fdHJ1ZTogY2FzZSB0eXBlcyQxLl9mYWxzZToKICAgICAgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIG5vZGUudmFsdWUgPSB0aGlzLnR5cGUgPT09IHR5cGVzJDEuX251bGwgPyBudWxsIDogdGhpcy50eXBlID09PSB0eXBlcyQxLl90cnVlOwogICAgICBub2RlLnJhdyA9IHRoaXMudHlwZS5rZXl3b3JkOwogICAgICB0aGlzLm5leHQoKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiTGl0ZXJhbCIpCgogICAgY2FzZSB0eXBlcyQxLnBhcmVuTDoKICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5zdGFydCwgZXhwciA9IHRoaXMucGFyc2VQYXJlbkFuZERpc3Rpbmd1aXNoRXhwcmVzc2lvbihjYW5CZUFycm93LCBmb3JJbml0KTsKICAgICAgaWYgKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsKICAgICAgICBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5wYXJlbnRoZXNpemVkQXNzaWduIDwgMCAmJiAhdGhpcy5pc1NpbXBsZUFzc2lnblRhcmdldChleHByKSkKICAgICAgICAgIHsgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5wYXJlbnRoZXNpemVkQXNzaWduID0gc3RhcnQ7IH0KICAgICAgICBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5wYXJlbnRoZXNpemVkQmluZCA8IDApCiAgICAgICAgICB7IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMucGFyZW50aGVzaXplZEJpbmQgPSBzdGFydDsgfQogICAgICB9CiAgICAgIHJldHVybiBleHByCgogICAgY2FzZSB0eXBlcyQxLmJyYWNrZXRMOgogICAgICBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIG5vZGUuZWxlbWVudHMgPSB0aGlzLnBhcnNlRXhwckxpc3QodHlwZXMkMS5icmFja2V0UiwgdHJ1ZSwgdHJ1ZSwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyk7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkFycmF5RXhwcmVzc2lvbiIpCgogICAgY2FzZSB0eXBlcyQxLmJyYWNlTDoKICAgICAgdGhpcy5vdmVycmlkZUNvbnRleHQodHlwZXMuYl9leHByKTsKICAgICAgcmV0dXJuIHRoaXMucGFyc2VPYmooZmFsc2UsIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpCgogICAgY2FzZSB0eXBlcyQxLl9mdW5jdGlvbjoKICAgICAgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICByZXR1cm4gdGhpcy5wYXJzZUZ1bmN0aW9uKG5vZGUsIDApCgogICAgY2FzZSB0eXBlcyQxLl9jbGFzczoKICAgICAgcmV0dXJuIHRoaXMucGFyc2VDbGFzcyh0aGlzLnN0YXJ0Tm9kZSgpLCBmYWxzZSkKCiAgICBjYXNlIHR5cGVzJDEuX25ldzoKICAgICAgcmV0dXJuIHRoaXMucGFyc2VOZXcoKQoKICAgIGNhc2UgdHlwZXMkMS5iYWNrUXVvdGU6CiAgICAgIHJldHVybiB0aGlzLnBhcnNlVGVtcGxhdGUoKQoKICAgIGNhc2UgdHlwZXMkMS5faW1wb3J0OgogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDExKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VFeHBySW1wb3J0KCkKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy51bmV4cGVjdGVkKCkKICAgICAgfQoKICAgIGRlZmF1bHQ6CiAgICAgIHRoaXMudW5leHBlY3RlZCgpOwogICAgfQogIH07CgogIHBwJDUucGFyc2VFeHBySW1wb3J0ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CgogICAgLy8gQ29uc3VtZSBgaW1wb3J0YCBhcyBhbiBpZGVudGlmaWVyIGZvciBgaW1wb3J0Lm1ldGFgLgogICAgLy8gQmVjYXVzZSBgdGhpcy5wYXJzZUlkZW50KHRydWUpYCBkb2Vzbid0IGNoZWNrIGVzY2FwZSBzZXF1ZW5jZXMsIGl0IG5lZWRzIHRoZSBjaGVjayBvZiBgdGhpcy5jb250YWluc0VzY2AuCiAgICBpZiAodGhpcy5jb250YWluc0VzYykgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUodGhpcy5zdGFydCwgIkVzY2FwZSBzZXF1ZW5jZSBpbiBrZXl3b3JkIGltcG9ydCIpOyB9CiAgICB2YXIgbWV0YSA9IHRoaXMucGFyc2VJZGVudCh0cnVlKTsKCiAgICBzd2l0Y2ggKHRoaXMudHlwZSkgewogICAgY2FzZSB0eXBlcyQxLnBhcmVuTDoKICAgICAgcmV0dXJuIHRoaXMucGFyc2VEeW5hbWljSW1wb3J0KG5vZGUpCiAgICBjYXNlIHR5cGVzJDEuZG90OgogICAgICBub2RlLm1ldGEgPSBtZXRhOwogICAgICByZXR1cm4gdGhpcy5wYXJzZUltcG9ydE1ldGEobm9kZSkKICAgIGRlZmF1bHQ6CiAgICAgIHRoaXMudW5leHBlY3RlZCgpOwogICAgfQogIH07CgogIHBwJDUucGFyc2VEeW5hbWljSW1wb3J0ID0gZnVuY3Rpb24obm9kZSkgewogICAgdGhpcy5uZXh0KCk7IC8vIHNraXAgYChgCgogICAgLy8gUGFyc2Ugbm9kZS5zb3VyY2UuCiAgICBub2RlLnNvdXJjZSA9IHRoaXMucGFyc2VNYXliZUFzc2lnbigpOwoKICAgIC8vIFZlcmlmeSBlbmRpbmcuCiAgICBpZiAoIXRoaXMuZWF0KHR5cGVzJDEucGFyZW5SKSkgewogICAgICB2YXIgZXJyb3JQb3MgPSB0aGlzLnN0YXJ0OwogICAgICBpZiAodGhpcy5lYXQodHlwZXMkMS5jb21tYSkgJiYgdGhpcy5lYXQodHlwZXMkMS5wYXJlblIpKSB7CiAgICAgICAgdGhpcy5yYWlzZVJlY292ZXJhYmxlKGVycm9yUG9zLCAiVHJhaWxpbmcgY29tbWEgaXMgbm90IGFsbG93ZWQgaW4gaW1wb3J0KCkiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnVuZXhwZWN0ZWQoZXJyb3JQb3MpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiSW1wb3J0RXhwcmVzc2lvbiIpCiAgfTsKCiAgcHAkNS5wYXJzZUltcG9ydE1ldGEgPSBmdW5jdGlvbihub2RlKSB7CiAgICB0aGlzLm5leHQoKTsgLy8gc2tpcCBgLmAKCiAgICB2YXIgY29udGFpbnNFc2MgPSB0aGlzLmNvbnRhaW5zRXNjOwogICAgbm9kZS5wcm9wZXJ0eSA9IHRoaXMucGFyc2VJZGVudCh0cnVlKTsKCiAgICBpZiAobm9kZS5wcm9wZXJ0eS5uYW1lICE9PSAibWV0YSIpCiAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKG5vZGUucHJvcGVydHkuc3RhcnQsICJUaGUgb25seSB2YWxpZCBtZXRhIHByb3BlcnR5IGZvciBpbXBvcnQgaXMgJ2ltcG9ydC5tZXRhJyIpOyB9CiAgICBpZiAoY29udGFpbnNFc2MpCiAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKG5vZGUuc3RhcnQsICInaW1wb3J0Lm1ldGEnIG11c3Qgbm90IGNvbnRhaW4gZXNjYXBlZCBjaGFyYWN0ZXJzIik7IH0KICAgIGlmICh0aGlzLm9wdGlvbnMuc291cmNlVHlwZSAhPT0gIm1vZHVsZSIgJiYgIXRoaXMub3B0aW9ucy5hbGxvd0ltcG9ydEV4cG9ydEV2ZXJ5d2hlcmUpCiAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKG5vZGUuc3RhcnQsICJDYW5ub3QgdXNlICdpbXBvcnQubWV0YScgb3V0c2lkZSBhIG1vZHVsZSIpOyB9CgogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiTWV0YVByb3BlcnR5IikKICB9OwoKICBwcCQ1LnBhcnNlTGl0ZXJhbCA9IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICBub2RlLnZhbHVlID0gdmFsdWU7CiAgICBub2RlLnJhdyA9IHRoaXMuaW5wdXQuc2xpY2UodGhpcy5zdGFydCwgdGhpcy5lbmQpOwogICAgaWYgKG5vZGUucmF3LmNoYXJDb2RlQXQobm9kZS5yYXcubGVuZ3RoIC0gMSkgPT09IDExMCkgeyBub2RlLmJpZ2ludCA9IG5vZGUucmF3LnNsaWNlKDAsIC0xKS5yZXBsYWNlKC9fL2csICIiKTsgfQogICAgdGhpcy5uZXh0KCk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJMaXRlcmFsIikKICB9OwoKICBwcCQ1LnBhcnNlUGFyZW5FeHByZXNzaW9uID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLnBhcmVuTCk7CiAgICB2YXIgdmFsID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oKTsKICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEucGFyZW5SKTsKICAgIHJldHVybiB2YWwKICB9OwoKICBwcCQ1LnBhcnNlUGFyZW5BbmREaXN0aW5ndWlzaEV4cHJlc3Npb24gPSBmdW5jdGlvbihjYW5CZUFycm93LCBmb3JJbml0KSB7CiAgICB2YXIgc3RhcnRQb3MgPSB0aGlzLnN0YXJ0LCBzdGFydExvYyA9IHRoaXMuc3RhcnRMb2MsIHZhbCwgYWxsb3dUcmFpbGluZ0NvbW1hID0gdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDg7CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpIHsKICAgICAgdGhpcy5uZXh0KCk7CgogICAgICB2YXIgaW5uZXJTdGFydFBvcyA9IHRoaXMuc3RhcnQsIGlubmVyU3RhcnRMb2MgPSB0aGlzLnN0YXJ0TG9jOwogICAgICB2YXIgZXhwckxpc3QgPSBbXSwgZmlyc3QgPSB0cnVlLCBsYXN0SXNDb21tYSA9IGZhbHNlOwogICAgICB2YXIgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyA9IG5ldyBEZXN0cnVjdHVyaW5nRXJyb3JzLCBvbGRZaWVsZFBvcyA9IHRoaXMueWllbGRQb3MsIG9sZEF3YWl0UG9zID0gdGhpcy5hd2FpdFBvcywgc3ByZWFkU3RhcnQ7CiAgICAgIHRoaXMueWllbGRQb3MgPSAwOwogICAgICB0aGlzLmF3YWl0UG9zID0gMDsKICAgICAgLy8gRG8gbm90IHNhdmUgYXdhaXRJZGVudFBvcyB0byBhbGxvdyBjaGVja2luZyBhd2FpdHMgbmVzdGVkIGluIHBhcmFtZXRlcnMKICAgICAgd2hpbGUgKHRoaXMudHlwZSAhPT0gdHlwZXMkMS5wYXJlblIpIHsKICAgICAgICBmaXJzdCA/IGZpcnN0ID0gZmFsc2UgOiB0aGlzLmV4cGVjdCh0eXBlcyQxLmNvbW1hKTsKICAgICAgICBpZiAoYWxsb3dUcmFpbGluZ0NvbW1hICYmIHRoaXMuYWZ0ZXJUcmFpbGluZ0NvbW1hKHR5cGVzJDEucGFyZW5SLCB0cnVlKSkgewogICAgICAgICAgbGFzdElzQ29tbWEgPSB0cnVlOwogICAgICAgICAgYnJlYWsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5lbGxpcHNpcykgewogICAgICAgICAgc3ByZWFkU3RhcnQgPSB0aGlzLnN0YXJ0OwogICAgICAgICAgZXhwckxpc3QucHVzaCh0aGlzLnBhcnNlUGFyZW5JdGVtKHRoaXMucGFyc2VSZXN0QmluZGluZygpKSk7CiAgICAgICAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLmNvbW1hKSB7IHRoaXMucmFpc2UodGhpcy5zdGFydCwgIkNvbW1hIGlzIG5vdCBwZXJtaXR0ZWQgYWZ0ZXIgdGhlIHJlc3QgZWxlbWVudCIpOyB9CiAgICAgICAgICBicmVhawogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBleHByTGlzdC5wdXNoKHRoaXMucGFyc2VNYXliZUFzc2lnbihmYWxzZSwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycywgdGhpcy5wYXJzZVBhcmVuSXRlbSkpOwogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgaW5uZXJFbmRQb3MgPSB0aGlzLmxhc3RUb2tFbmQsIGlubmVyRW5kTG9jID0gdGhpcy5sYXN0VG9rRW5kTG9jOwogICAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLnBhcmVuUik7CgogICAgICBpZiAoY2FuQmVBcnJvdyAmJiAhdGhpcy5jYW5JbnNlcnRTZW1pY29sb24oKSAmJiB0aGlzLmVhdCh0eXBlcyQxLmFycm93KSkgewogICAgICAgIHRoaXMuY2hlY2tQYXR0ZXJuRXJyb3JzKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIGZhbHNlKTsKICAgICAgICB0aGlzLmNoZWNrWWllbGRBd2FpdEluRGVmYXVsdFBhcmFtcygpOwogICAgICAgIHRoaXMueWllbGRQb3MgPSBvbGRZaWVsZFBvczsKICAgICAgICB0aGlzLmF3YWl0UG9zID0gb2xkQXdhaXRQb3M7CiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VQYXJlbkFycm93TGlzdChzdGFydFBvcywgc3RhcnRMb2MsIGV4cHJMaXN0LCBmb3JJbml0KQogICAgICB9CgogICAgICBpZiAoIWV4cHJMaXN0Lmxlbmd0aCB8fCBsYXN0SXNDb21tYSkgeyB0aGlzLnVuZXhwZWN0ZWQodGhpcy5sYXN0VG9rU3RhcnQpOyB9CiAgICAgIGlmIChzcHJlYWRTdGFydCkgeyB0aGlzLnVuZXhwZWN0ZWQoc3ByZWFkU3RhcnQpOyB9CiAgICAgIHRoaXMuY2hlY2tFeHByZXNzaW9uRXJyb3JzKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIHRydWUpOwogICAgICB0aGlzLnlpZWxkUG9zID0gb2xkWWllbGRQb3MgfHwgdGhpcy55aWVsZFBvczsKICAgICAgdGhpcy5hd2FpdFBvcyA9IG9sZEF3YWl0UG9zIHx8IHRoaXMuYXdhaXRQb3M7CgogICAgICBpZiAoZXhwckxpc3QubGVuZ3RoID4gMSkgewogICAgICAgIHZhbCA9IHRoaXMuc3RhcnROb2RlQXQoaW5uZXJTdGFydFBvcywgaW5uZXJTdGFydExvYyk7CiAgICAgICAgdmFsLmV4cHJlc3Npb25zID0gZXhwckxpc3Q7CiAgICAgICAgdGhpcy5maW5pc2hOb2RlQXQodmFsLCAiU2VxdWVuY2VFeHByZXNzaW9uIiwgaW5uZXJFbmRQb3MsIGlubmVyRW5kTG9jKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWwgPSBleHByTGlzdFswXTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdmFsID0gdGhpcy5wYXJzZVBhcmVuRXhwcmVzc2lvbigpOwogICAgfQoKICAgIGlmICh0aGlzLm9wdGlvbnMucHJlc2VydmVQYXJlbnMpIHsKICAgICAgdmFyIHBhciA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnRQb3MsIHN0YXJ0TG9jKTsKICAgICAgcGFyLmV4cHJlc3Npb24gPSB2YWw7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUocGFyLCAiUGFyZW50aGVzaXplZEV4cHJlc3Npb24iKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHZhbAogICAgfQogIH07CgogIHBwJDUucGFyc2VQYXJlbkl0ZW0gPSBmdW5jdGlvbihpdGVtKSB7CiAgICByZXR1cm4gaXRlbQogIH07CgogIHBwJDUucGFyc2VQYXJlbkFycm93TGlzdCA9IGZ1bmN0aW9uKHN0YXJ0UG9zLCBzdGFydExvYywgZXhwckxpc3QsIGZvckluaXQpIHsKICAgIHJldHVybiB0aGlzLnBhcnNlQXJyb3dFeHByZXNzaW9uKHRoaXMuc3RhcnROb2RlQXQoc3RhcnRQb3MsIHN0YXJ0TG9jKSwgZXhwckxpc3QsIGZhbHNlLCBmb3JJbml0KQogIH07CgogIC8vIE5ldydzIHByZWNlZGVuY2UgaXMgc2xpZ2h0bHkgdHJpY2t5LiBJdCBtdXN0IGFsbG93IGl0cyBhcmd1bWVudCB0bwogIC8vIGJlIGEgYFtdYCBvciBkb3Qgc3Vic2NyaXB0IGV4cHJlc3Npb24sIGJ1dCBub3QgYSBjYWxsIOKAlCBhdCBsZWFzdCwKICAvLyBub3Qgd2l0aG91dCB3cmFwcGluZyBpdCBpbiBwYXJlbnRoZXNlcy4gVGh1cywgaXQgdXNlcyB0aGUgbm9DYWxscwogIC8vIGFyZ3VtZW50IHRvIHBhcnNlU3Vic2NyaXB0cyB0byBwcmV2ZW50IGl0IGZyb20gY29uc3VtaW5nIHRoZQogIC8vIGFyZ3VtZW50IGxpc3QuCgogIHZhciBlbXB0eSA9IFtdOwoKICBwcCQ1LnBhcnNlTmV3ID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5jb250YWluc0VzYykgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUodGhpcy5zdGFydCwgIkVzY2FwZSBzZXF1ZW5jZSBpbiBrZXl3b3JkIG5ldyIpOyB9CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICB2YXIgbWV0YSA9IHRoaXMucGFyc2VJZGVudCh0cnVlKTsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNiAmJiB0aGlzLmVhdCh0eXBlcyQxLmRvdCkpIHsKICAgICAgbm9kZS5tZXRhID0gbWV0YTsKICAgICAgdmFyIGNvbnRhaW5zRXNjID0gdGhpcy5jb250YWluc0VzYzsKICAgICAgbm9kZS5wcm9wZXJ0eSA9IHRoaXMucGFyc2VJZGVudCh0cnVlKTsKICAgICAgaWYgKG5vZGUucHJvcGVydHkubmFtZSAhPT0gInRhcmdldCIpCiAgICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUobm9kZS5wcm9wZXJ0eS5zdGFydCwgIlRoZSBvbmx5IHZhbGlkIG1ldGEgcHJvcGVydHkgZm9yIG5ldyBpcyAnbmV3LnRhcmdldCciKTsgfQogICAgICBpZiAoY29udGFpbnNFc2MpCiAgICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUobm9kZS5zdGFydCwgIiduZXcudGFyZ2V0JyBtdXN0IG5vdCBjb250YWluIGVzY2FwZWQgY2hhcmFjdGVycyIpOyB9CiAgICAgIGlmICghdGhpcy5hbGxvd05ld0RvdFRhcmdldCkKICAgICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShub2RlLnN0YXJ0LCAiJ25ldy50YXJnZXQnIGNhbiBvbmx5IGJlIHVzZWQgaW4gZnVuY3Rpb25zIGFuZCBjbGFzcyBzdGF0aWMgYmxvY2siKTsgfQogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJNZXRhUHJvcGVydHkiKQogICAgfQogICAgdmFyIHN0YXJ0UG9zID0gdGhpcy5zdGFydCwgc3RhcnRMb2MgPSB0aGlzLnN0YXJ0TG9jLCBpc0ltcG9ydCA9IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5faW1wb3J0OwogICAgbm9kZS5jYWxsZWUgPSB0aGlzLnBhcnNlU3Vic2NyaXB0cyh0aGlzLnBhcnNlRXhwckF0b20oKSwgc3RhcnRQb3MsIHN0YXJ0TG9jLCB0cnVlLCBmYWxzZSk7CiAgICBpZiAoaXNJbXBvcnQgJiYgbm9kZS5jYWxsZWUudHlwZSA9PT0gIkltcG9ydEV4cHJlc3Npb24iKSB7CiAgICAgIHRoaXMucmFpc2Uoc3RhcnRQb3MsICJDYW5ub3QgdXNlIG5ldyB3aXRoIGltcG9ydCgpIik7CiAgICB9CiAgICBpZiAodGhpcy5lYXQodHlwZXMkMS5wYXJlbkwpKSB7IG5vZGUuYXJndW1lbnRzID0gdGhpcy5wYXJzZUV4cHJMaXN0KHR5cGVzJDEucGFyZW5SLCB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOCwgZmFsc2UpOyB9CiAgICBlbHNlIHsgbm9kZS5hcmd1bWVudHMgPSBlbXB0eTsgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiTmV3RXhwcmVzc2lvbiIpCiAgfTsKCiAgLy8gUGFyc2UgdGVtcGxhdGUgZXhwcmVzc2lvbi4KCiAgcHAkNS5wYXJzZVRlbXBsYXRlRWxlbWVudCA9IGZ1bmN0aW9uKHJlZikgewogICAgdmFyIGlzVGFnZ2VkID0gcmVmLmlzVGFnZ2VkOwoKICAgIHZhciBlbGVtID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuaW52YWxpZFRlbXBsYXRlKSB7CiAgICAgIGlmICghaXNUYWdnZWQpIHsKICAgICAgICB0aGlzLnJhaXNlUmVjb3ZlcmFibGUodGhpcy5zdGFydCwgIkJhZCBlc2NhcGUgc2VxdWVuY2UgaW4gdW50YWdnZWQgdGVtcGxhdGUgbGl0ZXJhbCIpOwogICAgICB9CiAgICAgIGVsZW0udmFsdWUgPSB7CiAgICAgICAgcmF3OiB0aGlzLnZhbHVlLAogICAgICAgIGNvb2tlZDogbnVsbAogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgZWxlbS52YWx1ZSA9IHsKICAgICAgICByYXc6IHRoaXMuaW5wdXQuc2xpY2UodGhpcy5zdGFydCwgdGhpcy5lbmQpLnJlcGxhY2UoL1xyXG4/L2csICJcbiIpLAogICAgICAgIGNvb2tlZDogdGhpcy52YWx1ZQogICAgICB9OwogICAgfQogICAgdGhpcy5uZXh0KCk7CiAgICBlbGVtLnRhaWwgPSB0aGlzLnR5cGUgPT09IHR5cGVzJDEuYmFja1F1b3RlOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShlbGVtLCAiVGVtcGxhdGVFbGVtZW50IikKICB9OwoKICBwcCQ1LnBhcnNlVGVtcGxhdGUgPSBmdW5jdGlvbihyZWYpIHsKICAgIGlmICggcmVmID09PSB2b2lkIDAgKSByZWYgPSB7fTsKICAgIHZhciBpc1RhZ2dlZCA9IHJlZi5pc1RhZ2dlZDsgaWYgKCBpc1RhZ2dlZCA9PT0gdm9pZCAwICkgaXNUYWdnZWQgPSBmYWxzZTsKCiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICB0aGlzLm5leHQoKTsKICAgIG5vZGUuZXhwcmVzc2lvbnMgPSBbXTsKICAgIHZhciBjdXJFbHQgPSB0aGlzLnBhcnNlVGVtcGxhdGVFbGVtZW50KHtpc1RhZ2dlZDogaXNUYWdnZWR9KTsKICAgIG5vZGUucXVhc2lzID0gW2N1ckVsdF07CiAgICB3aGlsZSAoIWN1ckVsdC50YWlsKSB7CiAgICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuZW9mKSB7IHRoaXMucmFpc2UodGhpcy5wb3MsICJVbnRlcm1pbmF0ZWQgdGVtcGxhdGUgbGl0ZXJhbCIpOyB9CiAgICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEuZG9sbGFyQnJhY2VMKTsKICAgICAgbm9kZS5leHByZXNzaW9ucy5wdXNoKHRoaXMucGFyc2VFeHByZXNzaW9uKCkpOwogICAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLmJyYWNlUik7CiAgICAgIG5vZGUucXVhc2lzLnB1c2goY3VyRWx0ID0gdGhpcy5wYXJzZVRlbXBsYXRlRWxlbWVudCh7aXNUYWdnZWQ6IGlzVGFnZ2VkfSkpOwogICAgfQogICAgdGhpcy5uZXh0KCk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJUZW1wbGF0ZUxpdGVyYWwiKQogIH07CgogIHBwJDUuaXNBc3luY1Byb3AgPSBmdW5jdGlvbihwcm9wKSB7CiAgICByZXR1cm4gIXByb3AuY29tcHV0ZWQgJiYgcHJvcC5rZXkudHlwZSA9PT0gIklkZW50aWZpZXIiICYmIHByb3Aua2V5Lm5hbWUgPT09ICJhc3luYyIgJiYKICAgICAgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5uYW1lIHx8IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5udW0gfHwgdGhpcy50eXBlID09PSB0eXBlcyQxLnN0cmluZyB8fCB0aGlzLnR5cGUgPT09IHR5cGVzJDEuYnJhY2tldEwgfHwgdGhpcy50eXBlLmtleXdvcmQgfHwgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5ICYmIHRoaXMudHlwZSA9PT0gdHlwZXMkMS5zdGFyKSkgJiYKICAgICAgIWxpbmVCcmVhay50ZXN0KHRoaXMuaW5wdXQuc2xpY2UodGhpcy5sYXN0VG9rRW5kLCB0aGlzLnN0YXJ0KSkKICB9OwoKICAvLyBQYXJzZSBhbiBvYmplY3QgbGl0ZXJhbCBvciBiaW5kaW5nIHBhdHRlcm4uCgogIHBwJDUucGFyc2VPYmogPSBmdW5jdGlvbihpc1BhdHRlcm4sIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKSwgZmlyc3QgPSB0cnVlLCBwcm9wSGFzaCA9IHt9OwogICAgbm9kZS5wcm9wZXJ0aWVzID0gW107CiAgICB0aGlzLm5leHQoKTsKICAgIHdoaWxlICghdGhpcy5lYXQodHlwZXMkMS5icmFjZVIpKSB7CiAgICAgIGlmICghZmlyc3QpIHsKICAgICAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLmNvbW1hKTsKICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDUgJiYgdGhpcy5hZnRlclRyYWlsaW5nQ29tbWEodHlwZXMkMS5icmFjZVIpKSB7IGJyZWFrIH0KICAgICAgfSBlbHNlIHsgZmlyc3QgPSBmYWxzZTsgfQoKICAgICAgdmFyIHByb3AgPSB0aGlzLnBhcnNlUHJvcGVydHkoaXNQYXR0ZXJuLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTsKICAgICAgaWYgKCFpc1BhdHRlcm4pIHsgdGhpcy5jaGVja1Byb3BDbGFzaChwcm9wLCBwcm9wSGFzaCwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyk7IH0KICAgICAgbm9kZS5wcm9wZXJ0aWVzLnB1c2gocHJvcCk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsIGlzUGF0dGVybiA/ICJPYmplY3RQYXR0ZXJuIiA6ICJPYmplY3RFeHByZXNzaW9uIikKICB9OwoKICBwcCQ1LnBhcnNlUHJvcGVydHkgPSBmdW5jdGlvbihpc1BhdHRlcm4sIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsKICAgIHZhciBwcm9wID0gdGhpcy5zdGFydE5vZGUoKSwgaXNHZW5lcmF0b3IsIGlzQXN5bmMsIHN0YXJ0UG9zLCBzdGFydExvYzsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOSAmJiB0aGlzLmVhdCh0eXBlcyQxLmVsbGlwc2lzKSkgewogICAgICBpZiAoaXNQYXR0ZXJuKSB7CiAgICAgICAgcHJvcC5hcmd1bWVudCA9IHRoaXMucGFyc2VJZGVudChmYWxzZSk7CiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5jb21tYSkgewogICAgICAgICAgdGhpcy5yYWlzZSh0aGlzLnN0YXJ0LCAiQ29tbWEgaXMgbm90IHBlcm1pdHRlZCBhZnRlciB0aGUgcmVzdCBlbGVtZW50Iik7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUocHJvcCwgIlJlc3RFbGVtZW50IikKICAgICAgfQogICAgICAvLyBUbyBkaXNhbGxvdyBwYXJlbnRoZXNpemVkIGlkZW50aWZpZXIgdmlhIGB0aGlzLnRvQXNzaWduYWJsZSgpYC4KICAgICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5wYXJlbkwgJiYgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykgewogICAgICAgIGlmIChyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnBhcmVudGhlc2l6ZWRBc3NpZ24gPCAwKSB7CiAgICAgICAgICByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnBhcmVudGhlc2l6ZWRBc3NpZ24gPSB0aGlzLnN0YXJ0OwogICAgICAgIH0KICAgICAgICBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5wYXJlbnRoZXNpemVkQmluZCA8IDApIHsKICAgICAgICAgIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMucGFyZW50aGVzaXplZEJpbmQgPSB0aGlzLnN0YXJ0OwogICAgICAgIH0KICAgICAgfQogICAgICAvLyBQYXJzZSBhcmd1bWVudC4KICAgICAgcHJvcC5hcmd1bWVudCA9IHRoaXMucGFyc2VNYXliZUFzc2lnbihmYWxzZSwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyk7CiAgICAgIC8vIFRvIGRpc2FsbG93IHRyYWlsaW5nIGNvbW1hIHZpYSBgdGhpcy50b0Fzc2lnbmFibGUoKWAuCiAgICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuY29tbWEgJiYgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyAmJiByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnRyYWlsaW5nQ29tbWEgPCAwKSB7CiAgICAgICAgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy50cmFpbGluZ0NvbW1hID0gdGhpcy5zdGFydDsKICAgICAgfQogICAgICAvLyBGaW5pc2gKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShwcm9wLCAiU3ByZWFkRWxlbWVudCIpCiAgICB9CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpIHsKICAgICAgcHJvcC5tZXRob2QgPSBmYWxzZTsKICAgICAgcHJvcC5zaG9ydGhhbmQgPSBmYWxzZTsKICAgICAgaWYgKGlzUGF0dGVybiB8fCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKSB7CiAgICAgICAgc3RhcnRQb3MgPSB0aGlzLnN0YXJ0OwogICAgICAgIHN0YXJ0TG9jID0gdGhpcy5zdGFydExvYzsKICAgICAgfQogICAgICBpZiAoIWlzUGF0dGVybikKICAgICAgICB7IGlzR2VuZXJhdG9yID0gdGhpcy5lYXQodHlwZXMkMS5zdGFyKTsgfQogICAgfQogICAgdmFyIGNvbnRhaW5zRXNjID0gdGhpcy5jb250YWluc0VzYzsKICAgIHRoaXMucGFyc2VQcm9wZXJ0eU5hbWUocHJvcCk7CiAgICBpZiAoIWlzUGF0dGVybiAmJiAhY29udGFpbnNFc2MgJiYgdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDggJiYgIWlzR2VuZXJhdG9yICYmIHRoaXMuaXNBc3luY1Byb3AocHJvcCkpIHsKICAgICAgaXNBc3luYyA9IHRydWU7CiAgICAgIGlzR2VuZXJhdG9yID0gdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDkgJiYgdGhpcy5lYXQodHlwZXMkMS5zdGFyKTsKICAgICAgdGhpcy5wYXJzZVByb3BlcnR5TmFtZShwcm9wLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTsKICAgIH0gZWxzZSB7CiAgICAgIGlzQXN5bmMgPSBmYWxzZTsKICAgIH0KICAgIHRoaXMucGFyc2VQcm9wZXJ0eVZhbHVlKHByb3AsIGlzUGF0dGVybiwgaXNHZW5lcmF0b3IsIGlzQXN5bmMsIHN0YXJ0UG9zLCBzdGFydExvYywgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycywgY29udGFpbnNFc2MpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShwcm9wLCAiUHJvcGVydHkiKQogIH07CgogIHBwJDUucGFyc2VQcm9wZXJ0eVZhbHVlID0gZnVuY3Rpb24ocHJvcCwgaXNQYXR0ZXJuLCBpc0dlbmVyYXRvciwgaXNBc3luYywgc3RhcnRQb3MsIHN0YXJ0TG9jLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLCBjb250YWluc0VzYykgewogICAgaWYgKChpc0dlbmVyYXRvciB8fCBpc0FzeW5jKSAmJiB0aGlzLnR5cGUgPT09IHR5cGVzJDEuY29sb24pCiAgICAgIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KCiAgICBpZiAodGhpcy5lYXQodHlwZXMkMS5jb2xvbikpIHsKICAgICAgcHJvcC52YWx1ZSA9IGlzUGF0dGVybiA/IHRoaXMucGFyc2VNYXliZURlZmF1bHQodGhpcy5zdGFydCwgdGhpcy5zdGFydExvYykgOiB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oZmFsc2UsIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpOwogICAgICBwcm9wLmtpbmQgPSAiaW5pdCI7CiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2ICYmIHRoaXMudHlwZSA9PT0gdHlwZXMkMS5wYXJlbkwpIHsKICAgICAgaWYgKGlzUGF0dGVybikgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgICBwcm9wLmtpbmQgPSAiaW5pdCI7CiAgICAgIHByb3AubWV0aG9kID0gdHJ1ZTsKICAgICAgcHJvcC52YWx1ZSA9IHRoaXMucGFyc2VNZXRob2QoaXNHZW5lcmF0b3IsIGlzQXN5bmMpOwogICAgfSBlbHNlIGlmICghaXNQYXR0ZXJuICYmICFjb250YWluc0VzYyAmJgogICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNSAmJiAhcHJvcC5jb21wdXRlZCAmJiBwcm9wLmtleS50eXBlID09PSAiSWRlbnRpZmllciIgJiYKICAgICAgICAgICAgICAgKHByb3Aua2V5Lm5hbWUgPT09ICJnZXQiIHx8IHByb3Aua2V5Lm5hbWUgPT09ICJzZXQiKSAmJgogICAgICAgICAgICAgICAodGhpcy50eXBlICE9PSB0eXBlcyQxLmNvbW1hICYmIHRoaXMudHlwZSAhPT0gdHlwZXMkMS5icmFjZVIgJiYgdGhpcy50eXBlICE9PSB0eXBlcyQxLmVxKSkgewogICAgICBpZiAoaXNHZW5lcmF0b3IgfHwgaXNBc3luYykgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgICBwcm9wLmtpbmQgPSBwcm9wLmtleS5uYW1lOwogICAgICB0aGlzLnBhcnNlUHJvcGVydHlOYW1lKHByb3ApOwogICAgICBwcm9wLnZhbHVlID0gdGhpcy5wYXJzZU1ldGhvZChmYWxzZSk7CiAgICAgIHZhciBwYXJhbUNvdW50ID0gcHJvcC5raW5kID09PSAiZ2V0IiA/IDAgOiAxOwogICAgICBpZiAocHJvcC52YWx1ZS5wYXJhbXMubGVuZ3RoICE9PSBwYXJhbUNvdW50KSB7CiAgICAgICAgdmFyIHN0YXJ0ID0gcHJvcC52YWx1ZS5zdGFydDsKICAgICAgICBpZiAocHJvcC5raW5kID09PSAiZ2V0IikKICAgICAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHN0YXJ0LCAiZ2V0dGVyIHNob3VsZCBoYXZlIG5vIHBhcmFtcyIpOyB9CiAgICAgICAgZWxzZQogICAgICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUoc3RhcnQsICJzZXR0ZXIgc2hvdWxkIGhhdmUgZXhhY3RseSBvbmUgcGFyYW0iKTsgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChwcm9wLmtpbmQgPT09ICJzZXQiICYmIHByb3AudmFsdWUucGFyYW1zWzBdLnR5cGUgPT09ICJSZXN0RWxlbWVudCIpCiAgICAgICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShwcm9wLnZhbHVlLnBhcmFtc1swXS5zdGFydCwgIlNldHRlciBjYW5ub3QgdXNlIHJlc3QgcGFyYW1zIik7IH0KICAgICAgfQogICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNiAmJiAhcHJvcC5jb21wdXRlZCAmJiBwcm9wLmtleS50eXBlID09PSAiSWRlbnRpZmllciIpIHsKICAgICAgaWYgKGlzR2VuZXJhdG9yIHx8IGlzQXN5bmMpIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KICAgICAgdGhpcy5jaGVja1VucmVzZXJ2ZWQocHJvcC5rZXkpOwogICAgICBpZiAocHJvcC5rZXkubmFtZSA9PT0gImF3YWl0IiAmJiAhdGhpcy5hd2FpdElkZW50UG9zKQogICAgICAgIHsgdGhpcy5hd2FpdElkZW50UG9zID0gc3RhcnRQb3M7IH0KICAgICAgcHJvcC5raW5kID0gImluaXQiOwogICAgICBpZiAoaXNQYXR0ZXJuKSB7CiAgICAgICAgcHJvcC52YWx1ZSA9IHRoaXMucGFyc2VNYXliZURlZmF1bHQoc3RhcnRQb3MsIHN0YXJ0TG9jLCB0aGlzLmNvcHlOb2RlKHByb3Aua2V5KSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLmVxICYmIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsKICAgICAgICBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5zaG9ydGhhbmRBc3NpZ24gPCAwKQogICAgICAgICAgeyByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnNob3J0aGFuZEFzc2lnbiA9IHRoaXMuc3RhcnQ7IH0KICAgICAgICBwcm9wLnZhbHVlID0gdGhpcy5wYXJzZU1heWJlRGVmYXVsdChzdGFydFBvcywgc3RhcnRMb2MsIHRoaXMuY29weU5vZGUocHJvcC5rZXkpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwcm9wLnZhbHVlID0gdGhpcy5jb3B5Tm9kZShwcm9wLmtleSk7CiAgICAgIH0KICAgICAgcHJvcC5zaG9ydGhhbmQgPSB0cnVlOwogICAgfSBlbHNlIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KICB9OwoKICBwcCQ1LnBhcnNlUHJvcGVydHlOYW1lID0gZnVuY3Rpb24ocHJvcCkgewogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2KSB7CiAgICAgIGlmICh0aGlzLmVhdCh0eXBlcyQxLmJyYWNrZXRMKSkgewogICAgICAgIHByb3AuY29tcHV0ZWQgPSB0cnVlOwogICAgICAgIHByb3Aua2V5ID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKCk7CiAgICAgICAgdGhpcy5leHBlY3QodHlwZXMkMS5icmFja2V0Uik7CiAgICAgICAgcmV0dXJuIHByb3Aua2V5CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcHJvcC5jb21wdXRlZCA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcHJvcC5rZXkgPSB0aGlzLnR5cGUgPT09IHR5cGVzJDEubnVtIHx8IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5zdHJpbmcgPyB0aGlzLnBhcnNlRXhwckF0b20oKSA6IHRoaXMucGFyc2VJZGVudCh0aGlzLm9wdGlvbnMuYWxsb3dSZXNlcnZlZCAhPT0gIm5ldmVyIikKICB9OwoKICAvLyBJbml0aWFsaXplIGVtcHR5IGZ1bmN0aW9uIG5vZGUuCgogIHBwJDUuaW5pdEZ1bmN0aW9uID0gZnVuY3Rpb24obm9kZSkgewogICAgbm9kZS5pZCA9IG51bGw7CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpIHsgbm9kZS5nZW5lcmF0b3IgPSBub2RlLmV4cHJlc3Npb24gPSBmYWxzZTsgfQogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA4KSB7IG5vZGUuYXN5bmMgPSBmYWxzZTsgfQogIH07CgogIC8vIFBhcnNlIG9iamVjdCBvciBjbGFzcyBtZXRob2QuCgogIHBwJDUucGFyc2VNZXRob2QgPSBmdW5jdGlvbihpc0dlbmVyYXRvciwgaXNBc3luYywgYWxsb3dEaXJlY3RTdXBlcikgewogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpLCBvbGRZaWVsZFBvcyA9IHRoaXMueWllbGRQb3MsIG9sZEF3YWl0UG9zID0gdGhpcy5hd2FpdFBvcywgb2xkQXdhaXRJZGVudFBvcyA9IHRoaXMuYXdhaXRJZGVudFBvczsKCiAgICB0aGlzLmluaXRGdW5jdGlvbihub2RlKTsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikKICAgICAgeyBub2RlLmdlbmVyYXRvciA9IGlzR2VuZXJhdG9yOyB9CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDgpCiAgICAgIHsgbm9kZS5hc3luYyA9ICEhaXNBc3luYzsgfQoKICAgIHRoaXMueWllbGRQb3MgPSAwOwogICAgdGhpcy5hd2FpdFBvcyA9IDA7CiAgICB0aGlzLmF3YWl0SWRlbnRQb3MgPSAwOwogICAgdGhpcy5lbnRlclNjb3BlKGZ1bmN0aW9uRmxhZ3MoaXNBc3luYywgbm9kZS5nZW5lcmF0b3IpIHwgU0NPUEVfU1VQRVIgfCAoYWxsb3dEaXJlY3RTdXBlciA/IFNDT1BFX0RJUkVDVF9TVVBFUiA6IDApKTsKCiAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLnBhcmVuTCk7CiAgICBub2RlLnBhcmFtcyA9IHRoaXMucGFyc2VCaW5kaW5nTGlzdCh0eXBlcyQxLnBhcmVuUiwgZmFsc2UsIHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA4KTsKICAgIHRoaXMuY2hlY2tZaWVsZEF3YWl0SW5EZWZhdWx0UGFyYW1zKCk7CiAgICB0aGlzLnBhcnNlRnVuY3Rpb25Cb2R5KG5vZGUsIGZhbHNlLCB0cnVlLCBmYWxzZSk7CgogICAgdGhpcy55aWVsZFBvcyA9IG9sZFlpZWxkUG9zOwogICAgdGhpcy5hd2FpdFBvcyA9IG9sZEF3YWl0UG9zOwogICAgdGhpcy5hd2FpdElkZW50UG9zID0gb2xkQXdhaXRJZGVudFBvczsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkZ1bmN0aW9uRXhwcmVzc2lvbiIpCiAgfTsKCiAgLy8gUGFyc2UgYXJyb3cgZnVuY3Rpb24gZXhwcmVzc2lvbiB3aXRoIGdpdmVuIHBhcmFtZXRlcnMuCgogIHBwJDUucGFyc2VBcnJvd0V4cHJlc3Npb24gPSBmdW5jdGlvbihub2RlLCBwYXJhbXMsIGlzQXN5bmMsIGZvckluaXQpIHsKICAgIHZhciBvbGRZaWVsZFBvcyA9IHRoaXMueWllbGRQb3MsIG9sZEF3YWl0UG9zID0gdGhpcy5hd2FpdFBvcywgb2xkQXdhaXRJZGVudFBvcyA9IHRoaXMuYXdhaXRJZGVudFBvczsKCiAgICB0aGlzLmVudGVyU2NvcGUoZnVuY3Rpb25GbGFncyhpc0FzeW5jLCBmYWxzZSkgfCBTQ09QRV9BUlJPVyk7CiAgICB0aGlzLmluaXRGdW5jdGlvbihub2RlKTsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOCkgeyBub2RlLmFzeW5jID0gISFpc0FzeW5jOyB9CgogICAgdGhpcy55aWVsZFBvcyA9IDA7CiAgICB0aGlzLmF3YWl0UG9zID0gMDsKICAgIHRoaXMuYXdhaXRJZGVudFBvcyA9IDA7CgogICAgbm9kZS5wYXJhbXMgPSB0aGlzLnRvQXNzaWduYWJsZUxpc3QocGFyYW1zLCB0cnVlKTsKICAgIHRoaXMucGFyc2VGdW5jdGlvbkJvZHkobm9kZSwgdHJ1ZSwgZmFsc2UsIGZvckluaXQpOwoKICAgIHRoaXMueWllbGRQb3MgPSBvbGRZaWVsZFBvczsKICAgIHRoaXMuYXdhaXRQb3MgPSBvbGRBd2FpdFBvczsKICAgIHRoaXMuYXdhaXRJZGVudFBvcyA9IG9sZEF3YWl0SWRlbnRQb3M7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbiIpCiAgfTsKCiAgLy8gUGFyc2UgZnVuY3Rpb24gYm9keSBhbmQgY2hlY2sgcGFyYW1ldGVycy4KCiAgcHAkNS5wYXJzZUZ1bmN0aW9uQm9keSA9IGZ1bmN0aW9uKG5vZGUsIGlzQXJyb3dGdW5jdGlvbiwgaXNNZXRob2QsIGZvckluaXQpIHsKICAgIHZhciBpc0V4cHJlc3Npb24gPSBpc0Fycm93RnVuY3Rpb24gJiYgdGhpcy50eXBlICE9PSB0eXBlcyQxLmJyYWNlTDsKICAgIHZhciBvbGRTdHJpY3QgPSB0aGlzLnN0cmljdCwgdXNlU3RyaWN0ID0gZmFsc2U7CgogICAgaWYgKGlzRXhwcmVzc2lvbikgewogICAgICBub2RlLmJvZHkgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oZm9ySW5pdCk7CiAgICAgIG5vZGUuZXhwcmVzc2lvbiA9IHRydWU7CiAgICAgIHRoaXMuY2hlY2tQYXJhbXMobm9kZSwgZmFsc2UpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIG5vblNpbXBsZSA9IHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA3ICYmICF0aGlzLmlzU2ltcGxlUGFyYW1MaXN0KG5vZGUucGFyYW1zKTsKICAgICAgaWYgKCFvbGRTdHJpY3QgfHwgbm9uU2ltcGxlKSB7CiAgICAgICAgdXNlU3RyaWN0ID0gdGhpcy5zdHJpY3REaXJlY3RpdmUodGhpcy5lbmQpOwogICAgICAgIC8vIElmIHRoaXMgaXMgYSBzdHJpY3QgbW9kZSBmdW5jdGlvbiwgdmVyaWZ5IHRoYXQgYXJndW1lbnQgbmFtZXMKICAgICAgICAvLyBhcmUgbm90IHJlcGVhdGVkLCBhbmQgaXQgZG9lcyBub3QgdHJ5IHRvIGJpbmQgdGhlIHdvcmRzIGBldmFsYAogICAgICAgIC8vIG9yIGBhcmd1bWVudHNgLgogICAgICAgIGlmICh1c2VTdHJpY3QgJiYgbm9uU2ltcGxlKQogICAgICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUobm9kZS5zdGFydCwgIklsbGVnYWwgJ3VzZSBzdHJpY3QnIGRpcmVjdGl2ZSBpbiBmdW5jdGlvbiB3aXRoIG5vbi1zaW1wbGUgcGFyYW1ldGVyIGxpc3QiKTsgfQogICAgICB9CiAgICAgIC8vIFN0YXJ0IGEgbmV3IHNjb3BlIHdpdGggcmVnYXJkIHRvIGxhYmVscyBhbmQgdGhlIGBpbkZ1bmN0aW9uYAogICAgICAvLyBmbGFnIChyZXN0b3JlIHRoZW0gdG8gdGhlaXIgb2xkIHZhbHVlIGFmdGVyd2FyZHMpLgogICAgICB2YXIgb2xkTGFiZWxzID0gdGhpcy5sYWJlbHM7CiAgICAgIHRoaXMubGFiZWxzID0gW107CiAgICAgIGlmICh1c2VTdHJpY3QpIHsgdGhpcy5zdHJpY3QgPSB0cnVlOyB9CgogICAgICAvLyBBZGQgdGhlIHBhcmFtcyB0byB2YXJEZWNsYXJlZE5hbWVzIHRvIGVuc3VyZSB0aGF0IGFuIGVycm9yIGlzIHRocm93bgogICAgICAvLyBpZiBhIGxldC9jb25zdCBkZWNsYXJhdGlvbiBpbiB0aGUgZnVuY3Rpb24gY2xhc2hlcyB3aXRoIG9uZSBvZiB0aGUgcGFyYW1zLgogICAgICB0aGlzLmNoZWNrUGFyYW1zKG5vZGUsICFvbGRTdHJpY3QgJiYgIXVzZVN0cmljdCAmJiAhaXNBcnJvd0Z1bmN0aW9uICYmICFpc01ldGhvZCAmJiB0aGlzLmlzU2ltcGxlUGFyYW1MaXN0KG5vZGUucGFyYW1zKSk7CiAgICAgIC8vIEVuc3VyZSB0aGUgZnVuY3Rpb24gbmFtZSBpc24ndCBhIGZvcmJpZGRlbiBpZGVudGlmaWVyIGluIHN0cmljdCBtb2RlLCBlLmcuICdldmFsJwogICAgICBpZiAodGhpcy5zdHJpY3QgJiYgbm9kZS5pZCkgeyB0aGlzLmNoZWNrTFZhbFNpbXBsZShub2RlLmlkLCBCSU5EX09VVFNJREUpOyB9CiAgICAgIG5vZGUuYm9keSA9IHRoaXMucGFyc2VCbG9jayhmYWxzZSwgdW5kZWZpbmVkLCB1c2VTdHJpY3QgJiYgIW9sZFN0cmljdCk7CiAgICAgIG5vZGUuZXhwcmVzc2lvbiA9IGZhbHNlOwogICAgICB0aGlzLmFkYXB0RGlyZWN0aXZlUHJvbG9ndWUobm9kZS5ib2R5LmJvZHkpOwogICAgICB0aGlzLmxhYmVscyA9IG9sZExhYmVsczsKICAgIH0KICAgIHRoaXMuZXhpdFNjb3BlKCk7CiAgfTsKCiAgcHAkNS5pc1NpbXBsZVBhcmFtTGlzdCA9IGZ1bmN0aW9uKHBhcmFtcykgewogICAgZm9yICh2YXIgaSA9IDAsIGxpc3QgPSBwYXJhbXM7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKQogICAgICB7CiAgICAgIHZhciBwYXJhbSA9IGxpc3RbaV07CgogICAgICBpZiAocGFyYW0udHlwZSAhPT0gIklkZW50aWZpZXIiKSB7IHJldHVybiBmYWxzZQogICAgfSB9CiAgICByZXR1cm4gdHJ1ZQogIH07CgogIC8vIENoZWNrcyBmdW5jdGlvbiBwYXJhbXMgZm9yIHZhcmlvdXMgZGlzYWxsb3dlZCBwYXR0ZXJucyBzdWNoIGFzIHVzaW5nICJldmFsIgogIC8vIG9yICJhcmd1bWVudHMiIGFuZCBkdXBsaWNhdGUgcGFyYW1ldGVycy4KCiAgcHAkNS5jaGVja1BhcmFtcyA9IGZ1bmN0aW9uKG5vZGUsIGFsbG93RHVwbGljYXRlcykgewogICAgdmFyIG5hbWVIYXNoID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgIGZvciAodmFyIGkgPSAwLCBsaXN0ID0gbm9kZS5wYXJhbXM7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKQogICAgICB7CiAgICAgIHZhciBwYXJhbSA9IGxpc3RbaV07CgogICAgICB0aGlzLmNoZWNrTFZhbElubmVyUGF0dGVybihwYXJhbSwgQklORF9WQVIsIGFsbG93RHVwbGljYXRlcyA/IG51bGwgOiBuYW1lSGFzaCk7CiAgICB9CiAgfTsKCiAgLy8gUGFyc2VzIGEgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgZXhwcmVzc2lvbnMsIGFuZCByZXR1cm5zIHRoZW0gYXMKICAvLyBhbiBhcnJheS4gYGNsb3NlYCBpcyB0aGUgdG9rZW4gdHlwZSB0aGF0IGVuZHMgdGhlIGxpc3QsIGFuZAogIC8vIGBhbGxvd0VtcHR5YCBjYW4gYmUgdHVybmVkIG9uIHRvIGFsbG93IHN1YnNlcXVlbnQgY29tbWFzIHdpdGgKICAvLyBub3RoaW5nIGluIGJldHdlZW4gdGhlbSB0byBiZSBwYXJzZWQgYXMgYG51bGxgICh3aGljaCBpcyBuZWVkZWQKICAvLyBmb3IgYXJyYXkgbGl0ZXJhbHMpLgoKICBwcCQ1LnBhcnNlRXhwckxpc3QgPSBmdW5jdGlvbihjbG9zZSwgYWxsb3dUcmFpbGluZ0NvbW1hLCBhbGxvd0VtcHR5LCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKSB7CiAgICB2YXIgZWx0cyA9IFtdLCBmaXJzdCA9IHRydWU7CiAgICB3aGlsZSAoIXRoaXMuZWF0KGNsb3NlKSkgewogICAgICBpZiAoIWZpcnN0KSB7CiAgICAgICAgdGhpcy5leHBlY3QodHlwZXMkMS5jb21tYSk7CiAgICAgICAgaWYgKGFsbG93VHJhaWxpbmdDb21tYSAmJiB0aGlzLmFmdGVyVHJhaWxpbmdDb21tYShjbG9zZSkpIHsgYnJlYWsgfQogICAgICB9IGVsc2UgeyBmaXJzdCA9IGZhbHNlOyB9CgogICAgICB2YXIgZWx0ID0gKHZvaWQgMCk7CiAgICAgIGlmIChhbGxvd0VtcHR5ICYmIHRoaXMudHlwZSA9PT0gdHlwZXMkMS5jb21tYSkKICAgICAgICB7IGVsdCA9IG51bGw7IH0KICAgICAgZWxzZSBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLmVsbGlwc2lzKSB7CiAgICAgICAgZWx0ID0gdGhpcy5wYXJzZVNwcmVhZChyZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTsKICAgICAgICBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyAmJiB0aGlzLnR5cGUgPT09IHR5cGVzJDEuY29tbWEgJiYgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy50cmFpbGluZ0NvbW1hIDwgMCkKICAgICAgICAgIHsgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy50cmFpbGluZ0NvbW1hID0gdGhpcy5zdGFydDsgfQogICAgICB9IGVsc2UgewogICAgICAgIGVsdCA9IHRoaXMucGFyc2VNYXliZUFzc2lnbihmYWxzZSwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyk7CiAgICAgIH0KICAgICAgZWx0cy5wdXNoKGVsdCk7CiAgICB9CiAgICByZXR1cm4gZWx0cwogIH07CgogIHBwJDUuY2hlY2tVbnJlc2VydmVkID0gZnVuY3Rpb24ocmVmKSB7CiAgICB2YXIgc3RhcnQgPSByZWYuc3RhcnQ7CiAgICB2YXIgZW5kID0gcmVmLmVuZDsKICAgIHZhciBuYW1lID0gcmVmLm5hbWU7CgogICAgaWYgKHRoaXMuaW5HZW5lcmF0b3IgJiYgbmFtZSA9PT0gInlpZWxkIikKICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUoc3RhcnQsICJDYW5ub3QgdXNlICd5aWVsZCcgYXMgaWRlbnRpZmllciBpbnNpZGUgYSBnZW5lcmF0b3IiKTsgfQogICAgaWYgKHRoaXMuaW5Bc3luYyAmJiBuYW1lID09PSAiYXdhaXQiKQogICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShzdGFydCwgIkNhbm5vdCB1c2UgJ2F3YWl0JyBhcyBpZGVudGlmaWVyIGluc2lkZSBhbiBhc3luYyBmdW5jdGlvbiIpOyB9CiAgICBpZiAodGhpcy5jdXJyZW50VGhpc1Njb3BlKCkuaW5DbGFzc0ZpZWxkSW5pdCAmJiBuYW1lID09PSAiYXJndW1lbnRzIikKICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUoc3RhcnQsICJDYW5ub3QgdXNlICdhcmd1bWVudHMnIGluIGNsYXNzIGZpZWxkIGluaXRpYWxpemVyIik7IH0KICAgIGlmICh0aGlzLmluQ2xhc3NTdGF0aWNCbG9jayAmJiAobmFtZSA9PT0gImFyZ3VtZW50cyIgfHwgbmFtZSA9PT0gImF3YWl0IikpCiAgICAgIHsgdGhpcy5yYWlzZShzdGFydCwgKCJDYW5ub3QgdXNlICIgKyBuYW1lICsgIiBpbiBjbGFzcyBzdGF0aWMgaW5pdGlhbGl6YXRpb24gYmxvY2siKSk7IH0KICAgIGlmICh0aGlzLmtleXdvcmRzLnRlc3QobmFtZSkpCiAgICAgIHsgdGhpcy5yYWlzZShzdGFydCwgKCJVbmV4cGVjdGVkIGtleXdvcmQgJyIgKyBuYW1lICsgIiciKSk7IH0KICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPCA2ICYmCiAgICAgIHRoaXMuaW5wdXQuc2xpY2Uoc3RhcnQsIGVuZCkuaW5kZXhPZigiXFwiKSAhPT0gLTEpIHsgcmV0dXJuIH0KICAgIHZhciByZSA9IHRoaXMuc3RyaWN0ID8gdGhpcy5yZXNlcnZlZFdvcmRzU3RyaWN0IDogdGhpcy5yZXNlcnZlZFdvcmRzOwogICAgaWYgKHJlLnRlc3QobmFtZSkpIHsKICAgICAgaWYgKCF0aGlzLmluQXN5bmMgJiYgbmFtZSA9PT0gImF3YWl0IikKICAgICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShzdGFydCwgIkNhbm5vdCB1c2Uga2V5d29yZCAnYXdhaXQnIG91dHNpZGUgYW4gYXN5bmMgZnVuY3Rpb24iKTsgfQogICAgICB0aGlzLnJhaXNlUmVjb3ZlcmFibGUoc3RhcnQsICgiVGhlIGtleXdvcmQgJyIgKyBuYW1lICsgIicgaXMgcmVzZXJ2ZWQiKSk7CiAgICB9CiAgfTsKCiAgLy8gUGFyc2UgdGhlIG5leHQgdG9rZW4gYXMgYW4gaWRlbnRpZmllci4gSWYgYGxpYmVyYWxgIGlzIHRydWUgKHVzZWQKICAvLyB3aGVuIHBhcnNpbmcgcHJvcGVydGllcyksIGl0IHdpbGwgYWxzbyBjb252ZXJ0IGtleXdvcmRzIGludG8KICAvLyBpZGVudGlmaWVycy4KCiAgcHAkNS5wYXJzZUlkZW50ID0gZnVuY3Rpb24obGliZXJhbCwgaXNCaW5kaW5nKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLm5hbWUpIHsKICAgICAgbm9kZS5uYW1lID0gdGhpcy52YWx1ZTsKICAgIH0gZWxzZSBpZiAodGhpcy50eXBlLmtleXdvcmQpIHsKICAgICAgbm9kZS5uYW1lID0gdGhpcy50eXBlLmtleXdvcmQ7CgogICAgICAvLyBUbyBmaXggaHR0cHM6Ly9naXRodWIuY29tL2Fjb3JuanMvYWNvcm4vaXNzdWVzLzU3NQogICAgICAvLyBgY2xhc3NgIGFuZCBgZnVuY3Rpb25gIGtleXdvcmRzIHB1c2ggbmV3IGNvbnRleHQgaW50byB0aGlzLmNvbnRleHQuCiAgICAgIC8vIEJ1dCB0aGVyZSBpcyBubyBjaGFuY2UgdG8gcG9wIHRoZSBjb250ZXh0IGlmIHRoZSBrZXl3b3JkIGlzIGNvbnN1bWVkIGFzIGFuIGlkZW50aWZpZXIgc3VjaCBhcyBhIHByb3BlcnR5IG5hbWUuCiAgICAgIC8vIElmIHRoZSBwcmV2aW91cyB0b2tlbiBpcyBhIGRvdCwgdGhpcyBkb2VzIG5vdCBhcHBseSBiZWNhdXNlIHRoZSBjb250ZXh0LW1hbmFnaW5nIGNvZGUgYWxyZWFkeSBpZ25vcmVkIHRoZSBrZXl3b3JkCiAgICAgIGlmICgobm9kZS5uYW1lID09PSAiY2xhc3MiIHx8IG5vZGUubmFtZSA9PT0gImZ1bmN0aW9uIikgJiYKICAgICAgICAgICh0aGlzLmxhc3RUb2tFbmQgIT09IHRoaXMubGFzdFRva1N0YXJ0ICsgMSB8fCB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5sYXN0VG9rU3RhcnQpICE9PSA0NikpIHsKICAgICAgICB0aGlzLmNvbnRleHQucG9wKCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRoaXMudW5leHBlY3RlZCgpOwogICAgfQogICAgdGhpcy5uZXh0KCEhbGliZXJhbCk7CiAgICB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIklkZW50aWZpZXIiKTsKICAgIGlmICghbGliZXJhbCkgewogICAgICB0aGlzLmNoZWNrVW5yZXNlcnZlZChub2RlKTsKICAgICAgaWYgKG5vZGUubmFtZSA9PT0gImF3YWl0IiAmJiAhdGhpcy5hd2FpdElkZW50UG9zKQogICAgICAgIHsgdGhpcy5hd2FpdElkZW50UG9zID0gbm9kZS5zdGFydDsgfQogICAgfQogICAgcmV0dXJuIG5vZGUKICB9OwoKICBwcCQ1LnBhcnNlUHJpdmF0ZUlkZW50ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLnByaXZhdGVJZCkgewogICAgICBub2RlLm5hbWUgPSB0aGlzLnZhbHVlOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy51bmV4cGVjdGVkKCk7CiAgICB9CiAgICB0aGlzLm5leHQoKTsKICAgIHRoaXMuZmluaXNoTm9kZShub2RlLCAiUHJpdmF0ZUlkZW50aWZpZXIiKTsKCiAgICAvLyBGb3IgdmFsaWRhdGluZyBleGlzdGVuY2UKICAgIGlmICh0aGlzLnByaXZhdGVOYW1lU3RhY2subGVuZ3RoID09PSAwKSB7CiAgICAgIHRoaXMucmFpc2Uobm9kZS5zdGFydCwgKCJQcml2YXRlIGZpZWxkICcjIiArIChub2RlLm5hbWUpICsgIicgbXVzdCBiZSBkZWNsYXJlZCBpbiBhbiBlbmNsb3NpbmcgY2xhc3MiKSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnByaXZhdGVOYW1lU3RhY2tbdGhpcy5wcml2YXRlTmFtZVN0YWNrLmxlbmd0aCAtIDFdLnVzZWQucHVzaChub2RlKTsKICAgIH0KCiAgICByZXR1cm4gbm9kZQogIH07CgogIC8vIFBhcnNlcyB5aWVsZCBleHByZXNzaW9uIGluc2lkZSBnZW5lcmF0b3IuCgogIHBwJDUucGFyc2VZaWVsZCA9IGZ1bmN0aW9uKGZvckluaXQpIHsKICAgIGlmICghdGhpcy55aWVsZFBvcykgeyB0aGlzLnlpZWxkUG9zID0gdGhpcy5zdGFydDsgfQoKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHRoaXMubmV4dCgpOwogICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5zZW1pIHx8IHRoaXMuY2FuSW5zZXJ0U2VtaWNvbG9uKCkgfHwgKHRoaXMudHlwZSAhPT0gdHlwZXMkMS5zdGFyICYmICF0aGlzLnR5cGUuc3RhcnRzRXhwcikpIHsKICAgICAgbm9kZS5kZWxlZ2F0ZSA9IGZhbHNlOwogICAgICBub2RlLmFyZ3VtZW50ID0gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIG5vZGUuZGVsZWdhdGUgPSB0aGlzLmVhdCh0eXBlcyQxLnN0YXIpOwogICAgICBub2RlLmFyZ3VtZW50ID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKGZvckluaXQpOwogICAgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiWWllbGRFeHByZXNzaW9uIikKICB9OwoKICBwcCQ1LnBhcnNlQXdhaXQgPSBmdW5jdGlvbihmb3JJbml0KSB7CiAgICBpZiAoIXRoaXMuYXdhaXRQb3MpIHsgdGhpcy5hd2FpdFBvcyA9IHRoaXMuc3RhcnQ7IH0KCiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICB0aGlzLm5leHQoKTsKICAgIG5vZGUuYXJndW1lbnQgPSB0aGlzLnBhcnNlTWF5YmVVbmFyeShudWxsLCB0cnVlLCBmYWxzZSwgZm9ySW5pdCk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJBd2FpdEV4cHJlc3Npb24iKQogIH07CgogIHZhciBwcCQ0ID0gUGFyc2VyLnByb3RvdHlwZTsKCiAgLy8gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHJhaXNlIGV4Y2VwdGlvbnMgb24gcGFyc2UgZXJyb3JzLiBJdAogIC8vIHRha2VzIGFuIG9mZnNldCBpbnRlZ2VyIChpbnRvIHRoZSBjdXJyZW50IGBpbnB1dGApIHRvIGluZGljYXRlCiAgLy8gdGhlIGxvY2F0aW9uIG9mIHRoZSBlcnJvciwgYXR0YWNoZXMgdGhlIHBvc2l0aW9uIHRvIHRoZSBlbmQKICAvLyBvZiB0aGUgZXJyb3IgbWVzc2FnZSwgYW5kIHRoZW4gcmFpc2VzIGEgYFN5bnRheEVycm9yYCB3aXRoIHRoYXQKICAvLyBtZXNzYWdlLgoKICBwcCQ0LnJhaXNlID0gZnVuY3Rpb24ocG9zLCBtZXNzYWdlKSB7CiAgICB2YXIgbG9jID0gZ2V0TGluZUluZm8odGhpcy5pbnB1dCwgcG9zKTsKICAgIG1lc3NhZ2UgKz0gIiAoIiArIGxvYy5saW5lICsgIjoiICsgbG9jLmNvbHVtbiArICIpIjsKICAgIHZhciBlcnIgPSBuZXcgU3ludGF4RXJyb3IobWVzc2FnZSk7CiAgICBlcnIucG9zID0gcG9zOyBlcnIubG9jID0gbG9jOyBlcnIucmFpc2VkQXQgPSB0aGlzLnBvczsKICAgIHRocm93IGVycgogIH07CgogIHBwJDQucmFpc2VSZWNvdmVyYWJsZSA9IHBwJDQucmFpc2U7CgogIHBwJDQuY3VyUG9zaXRpb24gPSBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLm9wdGlvbnMubG9jYXRpb25zKSB7CiAgICAgIHJldHVybiBuZXcgUG9zaXRpb24odGhpcy5jdXJMaW5lLCB0aGlzLnBvcyAtIHRoaXMubGluZVN0YXJ0KQogICAgfQogIH07CgogIHZhciBwcCQzID0gUGFyc2VyLnByb3RvdHlwZTsKCiAgdmFyIFNjb3BlID0gZnVuY3Rpb24gU2NvcGUoZmxhZ3MpIHsKICAgIHRoaXMuZmxhZ3MgPSBmbGFnczsKICAgIC8vIEEgbGlzdCBvZiB2YXItZGVjbGFyZWQgbmFtZXMgaW4gdGhlIGN1cnJlbnQgbGV4aWNhbCBzY29wZQogICAgdGhpcy52YXIgPSBbXTsKICAgIC8vIEEgbGlzdCBvZiBsZXhpY2FsbHktZGVjbGFyZWQgbmFtZXMgaW4gdGhlIGN1cnJlbnQgbGV4aWNhbCBzY29wZQogICAgdGhpcy5sZXhpY2FsID0gW107CiAgICAvLyBBIGxpc3Qgb2YgbGV4aWNhbGx5LWRlY2xhcmVkIEZ1bmN0aW9uRGVjbGFyYXRpb24gbmFtZXMgaW4gdGhlIGN1cnJlbnQgbGV4aWNhbCBzY29wZQogICAgdGhpcy5mdW5jdGlvbnMgPSBbXTsKICAgIC8vIEEgc3dpdGNoIHRvIGRpc2FsbG93IHRoZSBpZGVudGlmaWVyIHJlZmVyZW5jZSAnYXJndW1lbnRzJwogICAgdGhpcy5pbkNsYXNzRmllbGRJbml0ID0gZmFsc2U7CiAgfTsKCiAgLy8gVGhlIGZ1bmN0aW9ucyBpbiB0aGlzIG1vZHVsZSBrZWVwIHRyYWNrIG9mIGRlY2xhcmVkIHZhcmlhYmxlcyBpbiB0aGUgY3VycmVudCBzY29wZSBpbiBvcmRlciB0byBkZXRlY3QgZHVwbGljYXRlIHZhcmlhYmxlIG5hbWVzLgoKICBwcCQzLmVudGVyU2NvcGUgPSBmdW5jdGlvbihmbGFncykgewogICAgdGhpcy5zY29wZVN0YWNrLnB1c2gobmV3IFNjb3BlKGZsYWdzKSk7CiAgfTsKCiAgcHAkMy5leGl0U2NvcGUgPSBmdW5jdGlvbigpIHsKICAgIHRoaXMuc2NvcGVTdGFjay5wb3AoKTsKICB9OwoKICAvLyBUaGUgc3BlYyBzYXlzOgogIC8vID4gQXQgdGhlIHRvcCBsZXZlbCBvZiBhIGZ1bmN0aW9uLCBvciBzY3JpcHQsIGZ1bmN0aW9uIGRlY2xhcmF0aW9ucyBhcmUKICAvLyA+IHRyZWF0ZWQgbGlrZSB2YXIgZGVjbGFyYXRpb25zIHJhdGhlciB0aGFuIGxpa2UgbGV4aWNhbCBkZWNsYXJhdGlvbnMuCiAgcHAkMy50cmVhdEZ1bmN0aW9uc0FzVmFySW5TY29wZSA9IGZ1bmN0aW9uKHNjb3BlKSB7CiAgICByZXR1cm4gKHNjb3BlLmZsYWdzICYgU0NPUEVfRlVOQ1RJT04pIHx8ICF0aGlzLmluTW9kdWxlICYmIChzY29wZS5mbGFncyAmIFNDT1BFX1RPUCkKICB9OwoKICBwcCQzLmRlY2xhcmVOYW1lID0gZnVuY3Rpb24obmFtZSwgYmluZGluZ1R5cGUsIHBvcykgewogICAgdmFyIHJlZGVjbGFyZWQgPSBmYWxzZTsKICAgIGlmIChiaW5kaW5nVHlwZSA9PT0gQklORF9MRVhJQ0FMKSB7CiAgICAgIHZhciBzY29wZSA9IHRoaXMuY3VycmVudFNjb3BlKCk7CiAgICAgIHJlZGVjbGFyZWQgPSBzY29wZS5sZXhpY2FsLmluZGV4T2YobmFtZSkgPiAtMSB8fCBzY29wZS5mdW5jdGlvbnMuaW5kZXhPZihuYW1lKSA+IC0xIHx8IHNjb3BlLnZhci5pbmRleE9mKG5hbWUpID4gLTE7CiAgICAgIHNjb3BlLmxleGljYWwucHVzaChuYW1lKTsKICAgICAgaWYgKHRoaXMuaW5Nb2R1bGUgJiYgKHNjb3BlLmZsYWdzICYgU0NPUEVfVE9QKSkKICAgICAgICB7IGRlbGV0ZSB0aGlzLnVuZGVmaW5lZEV4cG9ydHNbbmFtZV07IH0KICAgIH0gZWxzZSBpZiAoYmluZGluZ1R5cGUgPT09IEJJTkRfU0lNUExFX0NBVENIKSB7CiAgICAgIHZhciBzY29wZSQxID0gdGhpcy5jdXJyZW50U2NvcGUoKTsKICAgICAgc2NvcGUkMS5sZXhpY2FsLnB1c2gobmFtZSk7CiAgICB9IGVsc2UgaWYgKGJpbmRpbmdUeXBlID09PSBCSU5EX0ZVTkNUSU9OKSB7CiAgICAgIHZhciBzY29wZSQyID0gdGhpcy5jdXJyZW50U2NvcGUoKTsKICAgICAgaWYgKHRoaXMudHJlYXRGdW5jdGlvbnNBc1ZhcikKICAgICAgICB7IHJlZGVjbGFyZWQgPSBzY29wZSQyLmxleGljYWwuaW5kZXhPZihuYW1lKSA+IC0xOyB9CiAgICAgIGVsc2UKICAgICAgICB7IHJlZGVjbGFyZWQgPSBzY29wZSQyLmxleGljYWwuaW5kZXhPZihuYW1lKSA+IC0xIHx8IHNjb3BlJDIudmFyLmluZGV4T2YobmFtZSkgPiAtMTsgfQogICAgICBzY29wZSQyLmZ1bmN0aW9ucy5wdXNoKG5hbWUpOwogICAgfSBlbHNlIHsKICAgICAgZm9yICh2YXIgaSA9IHRoaXMuc2NvcGVTdGFjay5sZW5ndGggLSAxOyBpID49IDA7IC0taSkgewogICAgICAgIHZhciBzY29wZSQzID0gdGhpcy5zY29wZVN0YWNrW2ldOwogICAgICAgIGlmIChzY29wZSQzLmxleGljYWwuaW5kZXhPZihuYW1lKSA+IC0xICYmICEoKHNjb3BlJDMuZmxhZ3MgJiBTQ09QRV9TSU1QTEVfQ0FUQ0gpICYmIHNjb3BlJDMubGV4aWNhbFswXSA9PT0gbmFtZSkgfHwKICAgICAgICAgICAgIXRoaXMudHJlYXRGdW5jdGlvbnNBc1ZhckluU2NvcGUoc2NvcGUkMykgJiYgc2NvcGUkMy5mdW5jdGlvbnMuaW5kZXhPZihuYW1lKSA+IC0xKSB7CiAgICAgICAgICByZWRlY2xhcmVkID0gdHJ1ZTsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICAgIHNjb3BlJDMudmFyLnB1c2gobmFtZSk7CiAgICAgICAgaWYgKHRoaXMuaW5Nb2R1bGUgJiYgKHNjb3BlJDMuZmxhZ3MgJiBTQ09QRV9UT1ApKQogICAgICAgICAgeyBkZWxldGUgdGhpcy51bmRlZmluZWRFeHBvcnRzW25hbWVdOyB9CiAgICAgICAgaWYgKHNjb3BlJDMuZmxhZ3MgJiBTQ09QRV9WQVIpIHsgYnJlYWsgfQogICAgICB9CiAgICB9CiAgICBpZiAocmVkZWNsYXJlZCkgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUocG9zLCAoIklkZW50aWZpZXIgJyIgKyBuYW1lICsgIicgaGFzIGFscmVhZHkgYmVlbiBkZWNsYXJlZCIpKTsgfQogIH07CgogIHBwJDMuY2hlY2tMb2NhbEV4cG9ydCA9IGZ1bmN0aW9uKGlkKSB7CiAgICAvLyBzY29wZS5mdW5jdGlvbnMgbXVzdCBiZSBlbXB0eSBhcyBNb2R1bGUgY29kZSBpcyBhbHdheXMgc3RyaWN0LgogICAgaWYgKHRoaXMuc2NvcGVTdGFja1swXS5sZXhpY2FsLmluZGV4T2YoaWQubmFtZSkgPT09IC0xICYmCiAgICAgICAgdGhpcy5zY29wZVN0YWNrWzBdLnZhci5pbmRleE9mKGlkLm5hbWUpID09PSAtMSkgewogICAgICB0aGlzLnVuZGVmaW5lZEV4cG9ydHNbaWQubmFtZV0gPSBpZDsKICAgIH0KICB9OwoKICBwcCQzLmN1cnJlbnRTY29wZSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuc2NvcGVTdGFja1t0aGlzLnNjb3BlU3RhY2subGVuZ3RoIC0gMV0KICB9OwoKICBwcCQzLmN1cnJlbnRWYXJTY29wZSA9IGZ1bmN0aW9uKCkgewogICAgZm9yICh2YXIgaSA9IHRoaXMuc2NvcGVTdGFjay5sZW5ndGggLSAxOzsgaS0tKSB7CiAgICAgIHZhciBzY29wZSA9IHRoaXMuc2NvcGVTdGFja1tpXTsKICAgICAgaWYgKHNjb3BlLmZsYWdzICYgU0NPUEVfVkFSKSB7IHJldHVybiBzY29wZSB9CiAgICB9CiAgfTsKCiAgLy8gQ291bGQgYmUgdXNlZnVsIGZvciBgdGhpc2AsIGBuZXcudGFyZ2V0YCwgYHN1cGVyKClgLCBgc3VwZXIucHJvcGVydHlgLCBhbmQgYHN1cGVyW3Byb3BlcnR5XWAuCiAgcHAkMy5jdXJyZW50VGhpc1Njb3BlID0gZnVuY3Rpb24oKSB7CiAgICBmb3IgKHZhciBpID0gdGhpcy5zY29wZVN0YWNrLmxlbmd0aCAtIDE7OyBpLS0pIHsKICAgICAgdmFyIHNjb3BlID0gdGhpcy5zY29wZVN0YWNrW2ldOwogICAgICBpZiAoc2NvcGUuZmxhZ3MgJiBTQ09QRV9WQVIgJiYgIShzY29wZS5mbGFncyAmIFNDT1BFX0FSUk9XKSkgeyByZXR1cm4gc2NvcGUgfQogICAgfQogIH07CgogIHZhciBOb2RlID0gZnVuY3Rpb24gTm9kZShwYXJzZXIsIHBvcywgbG9jKSB7CiAgICB0aGlzLnR5cGUgPSAiIjsKICAgIHRoaXMuc3RhcnQgPSBwb3M7CiAgICB0aGlzLmVuZCA9IDA7CiAgICBpZiAocGFyc2VyLm9wdGlvbnMubG9jYXRpb25zKQogICAgICB7IHRoaXMubG9jID0gbmV3IFNvdXJjZUxvY2F0aW9uKHBhcnNlciwgbG9jKTsgfQogICAgaWYgKHBhcnNlci5vcHRpb25zLmRpcmVjdFNvdXJjZUZpbGUpCiAgICAgIHsgdGhpcy5zb3VyY2VGaWxlID0gcGFyc2VyLm9wdGlvbnMuZGlyZWN0U291cmNlRmlsZTsgfQogICAgaWYgKHBhcnNlci5vcHRpb25zLnJhbmdlcykKICAgICAgeyB0aGlzLnJhbmdlID0gW3BvcywgMF07IH0KICB9OwoKICAvLyBTdGFydCBhbiBBU1Qgbm9kZSwgYXR0YWNoaW5nIGEgc3RhcnQgb2Zmc2V0LgoKICB2YXIgcHAkMiA9IFBhcnNlci5wcm90b3R5cGU7CgogIHBwJDIuc3RhcnROb2RlID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gbmV3IE5vZGUodGhpcywgdGhpcy5zdGFydCwgdGhpcy5zdGFydExvYykKICB9OwoKICBwcCQyLnN0YXJ0Tm9kZUF0ID0gZnVuY3Rpb24ocG9zLCBsb2MpIHsKICAgIHJldHVybiBuZXcgTm9kZSh0aGlzLCBwb3MsIGxvYykKICB9OwoKICAvLyBGaW5pc2ggYW4gQVNUIG5vZGUsIGFkZGluZyBgdHlwZWAgYW5kIGBlbmRgIHByb3BlcnRpZXMuCgogIGZ1bmN0aW9uIGZpbmlzaE5vZGVBdChub2RlLCB0eXBlLCBwb3MsIGxvYykgewogICAgbm9kZS50eXBlID0gdHlwZTsKICAgIG5vZGUuZW5kID0gcG9zOwogICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpCiAgICAgIHsgbm9kZS5sb2MuZW5kID0gbG9jOyB9CiAgICBpZiAodGhpcy5vcHRpb25zLnJhbmdlcykKICAgICAgeyBub2RlLnJhbmdlWzFdID0gcG9zOyB9CiAgICByZXR1cm4gbm9kZQogIH0KCiAgcHAkMi5maW5pc2hOb2RlID0gZnVuY3Rpb24obm9kZSwgdHlwZSkgewogICAgcmV0dXJuIGZpbmlzaE5vZGVBdC5jYWxsKHRoaXMsIG5vZGUsIHR5cGUsIHRoaXMubGFzdFRva0VuZCwgdGhpcy5sYXN0VG9rRW5kTG9jKQogIH07CgogIC8vIEZpbmlzaCBub2RlIGF0IGdpdmVuIHBvc2l0aW9uCgogIHBwJDIuZmluaXNoTm9kZUF0ID0gZnVuY3Rpb24obm9kZSwgdHlwZSwgcG9zLCBsb2MpIHsKICAgIHJldHVybiBmaW5pc2hOb2RlQXQuY2FsbCh0aGlzLCBub2RlLCB0eXBlLCBwb3MsIGxvYykKICB9OwoKICBwcCQyLmNvcHlOb2RlID0gZnVuY3Rpb24obm9kZSkgewogICAgdmFyIG5ld05vZGUgPSBuZXcgTm9kZSh0aGlzLCBub2RlLnN0YXJ0LCB0aGlzLnN0YXJ0TG9jKTsKICAgIGZvciAodmFyIHByb3AgaW4gbm9kZSkgeyBuZXdOb2RlW3Byb3BdID0gbm9kZVtwcm9wXTsgfQogICAgcmV0dXJuIG5ld05vZGUKICB9OwoKICAvLyBUaGlzIGZpbGUgY29udGFpbnMgVW5pY29kZSBwcm9wZXJ0aWVzIGV4dHJhY3RlZCBmcm9tIHRoZSBFQ01BU2NyaXB0CiAgLy8gc3BlY2lmaWNhdGlvbi4gVGhlIGxpc3RzIGFyZSBleHRyYWN0ZWQgbGlrZSBzbzoKICAvLyAkJCgnI3RhYmxlLWJpbmFyeS11bmljb2RlLXByb3BlcnRpZXMgPiBmaWd1cmUgPiB0YWJsZSA+IHRib2R5ID4gdHIgPiB0ZDpudGgtY2hpbGQoMSkgY29kZScpLm1hcChlbCA9PiBlbC5pbm5lclRleHQpCgogIC8vICN0YWJsZS1iaW5hcnktdW5pY29kZS1wcm9wZXJ0aWVzCiAgdmFyIGVjbWE5QmluYXJ5UHJvcGVydGllcyA9ICJBU0NJSSBBU0NJSV9IZXhfRGlnaXQgQUhleCBBbHBoYWJldGljIEFscGhhIEFueSBBc3NpZ25lZCBCaWRpX0NvbnRyb2wgQmlkaV9DIEJpZGlfTWlycm9yZWQgQmlkaV9NIENhc2VfSWdub3JhYmxlIENJIENhc2VkIENoYW5nZXNfV2hlbl9DYXNlZm9sZGVkIENXQ0YgQ2hhbmdlc19XaGVuX0Nhc2VtYXBwZWQgQ1dDTSBDaGFuZ2VzX1doZW5fTG93ZXJjYXNlZCBDV0wgQ2hhbmdlc19XaGVuX05GS0NfQ2FzZWZvbGRlZCBDV0tDRiBDaGFuZ2VzX1doZW5fVGl0bGVjYXNlZCBDV1QgQ2hhbmdlc19XaGVuX1VwcGVyY2FzZWQgQ1dVIERhc2ggRGVmYXVsdF9JZ25vcmFibGVfQ29kZV9Qb2ludCBESSBEZXByZWNhdGVkIERlcCBEaWFjcml0aWMgRGlhIEVtb2ppIEVtb2ppX0NvbXBvbmVudCBFbW9qaV9Nb2RpZmllciBFbW9qaV9Nb2RpZmllcl9CYXNlIEVtb2ppX1ByZXNlbnRhdGlvbiBFeHRlbmRlciBFeHQgR3JhcGhlbWVfQmFzZSBHcl9CYXNlIEdyYXBoZW1lX0V4dGVuZCBHcl9FeHQgSGV4X0RpZ2l0IEhleCBJRFNfQmluYXJ5X09wZXJhdG9yIElEU0IgSURTX1RyaW5hcnlfT3BlcmF0b3IgSURTVCBJRF9Db250aW51ZSBJREMgSURfU3RhcnQgSURTIElkZW9ncmFwaGljIElkZW8gSm9pbl9Db250cm9sIEpvaW5fQyBMb2dpY2FsX09yZGVyX0V4Y2VwdGlvbiBMT0UgTG93ZXJjYXNlIExvd2VyIE1hdGggTm9uY2hhcmFjdGVyX0NvZGVfUG9pbnQgTkNoYXIgUGF0dGVybl9TeW50YXggUGF0X1N5biBQYXR0ZXJuX1doaXRlX1NwYWNlIFBhdF9XUyBRdW90YXRpb25fTWFyayBRTWFyayBSYWRpY2FsIFJlZ2lvbmFsX0luZGljYXRvciBSSSBTZW50ZW5jZV9UZXJtaW5hbCBTVGVybSBTb2Z0X0RvdHRlZCBTRCBUZXJtaW5hbF9QdW5jdHVhdGlvbiBUZXJtIFVuaWZpZWRfSWRlb2dyYXBoIFVJZGVvIFVwcGVyY2FzZSBVcHBlciBWYXJpYXRpb25fU2VsZWN0b3IgVlMgV2hpdGVfU3BhY2Ugc3BhY2UgWElEX0NvbnRpbnVlIFhJREMgWElEX1N0YXJ0IFhJRFMiOwogIHZhciBlY21hMTBCaW5hcnlQcm9wZXJ0aWVzID0gZWNtYTlCaW5hcnlQcm9wZXJ0aWVzICsgIiBFeHRlbmRlZF9QaWN0b2dyYXBoaWMiOwogIHZhciBlY21hMTFCaW5hcnlQcm9wZXJ0aWVzID0gZWNtYTEwQmluYXJ5UHJvcGVydGllczsKICB2YXIgZWNtYTEyQmluYXJ5UHJvcGVydGllcyA9IGVjbWExMUJpbmFyeVByb3BlcnRpZXMgKyAiIEVCYXNlIEVDb21wIEVNb2QgRVByZXMgRXh0UGljdCI7CiAgdmFyIGVjbWExM0JpbmFyeVByb3BlcnRpZXMgPSBlY21hMTJCaW5hcnlQcm9wZXJ0aWVzOwogIHZhciB1bmljb2RlQmluYXJ5UHJvcGVydGllcyA9IHsKICAgIDk6IGVjbWE5QmluYXJ5UHJvcGVydGllcywKICAgIDEwOiBlY21hMTBCaW5hcnlQcm9wZXJ0aWVzLAogICAgMTE6IGVjbWExMUJpbmFyeVByb3BlcnRpZXMsCiAgICAxMjogZWNtYTEyQmluYXJ5UHJvcGVydGllcywKICAgIDEzOiBlY21hMTNCaW5hcnlQcm9wZXJ0aWVzCiAgfTsKCiAgLy8gI3RhYmxlLXVuaWNvZGUtZ2VuZXJhbC1jYXRlZ29yeS12YWx1ZXMKICB2YXIgdW5pY29kZUdlbmVyYWxDYXRlZ29yeVZhbHVlcyA9ICJDYXNlZF9MZXR0ZXIgTEMgQ2xvc2VfUHVuY3R1YXRpb24gUGUgQ29ubmVjdG9yX1B1bmN0dWF0aW9uIFBjIENvbnRyb2wgQ2MgY250cmwgQ3VycmVuY3lfU3ltYm9sIFNjIERhc2hfUHVuY3R1YXRpb24gUGQgRGVjaW1hbF9OdW1iZXIgTmQgZGlnaXQgRW5jbG9zaW5nX01hcmsgTWUgRmluYWxfUHVuY3R1YXRpb24gUGYgRm9ybWF0IENmIEluaXRpYWxfUHVuY3R1YXRpb24gUGkgTGV0dGVyIEwgTGV0dGVyX051bWJlciBObCBMaW5lX1NlcGFyYXRvciBabCBMb3dlcmNhc2VfTGV0dGVyIExsIE1hcmsgTSBDb21iaW5pbmdfTWFyayBNYXRoX1N5bWJvbCBTbSBNb2RpZmllcl9MZXR0ZXIgTG0gTW9kaWZpZXJfU3ltYm9sIFNrIE5vbnNwYWNpbmdfTWFyayBNbiBOdW1iZXIgTiBPcGVuX1B1bmN0dWF0aW9uIFBzIE90aGVyIEMgT3RoZXJfTGV0dGVyIExvIE90aGVyX051bWJlciBObyBPdGhlcl9QdW5jdHVhdGlvbiBQbyBPdGhlcl9TeW1ib2wgU28gUGFyYWdyYXBoX1NlcGFyYXRvciBacCBQcml2YXRlX1VzZSBDbyBQdW5jdHVhdGlvbiBQIHB1bmN0IFNlcGFyYXRvciBaIFNwYWNlX1NlcGFyYXRvciBacyBTcGFjaW5nX01hcmsgTWMgU3Vycm9nYXRlIENzIFN5bWJvbCBTIFRpdGxlY2FzZV9MZXR0ZXIgTHQgVW5hc3NpZ25lZCBDbiBVcHBlcmNhc2VfTGV0dGVyIEx1IjsKCiAgLy8gI3RhYmxlLXVuaWNvZGUtc2NyaXB0LXZhbHVlcwogIHZhciBlY21hOVNjcmlwdFZhbHVlcyA9ICJBZGxhbSBBZGxtIEFob20gQW5hdG9saWFuX0hpZXJvZ2x5cGhzIEhsdXcgQXJhYmljIEFyYWIgQXJtZW5pYW4gQXJtbiBBdmVzdGFuIEF2c3QgQmFsaW5lc2UgQmFsaSBCYW11bSBCYW11IEJhc3NhX1ZhaCBCYXNzIEJhdGFrIEJhdGsgQmVuZ2FsaSBCZW5nIEJoYWlrc3VraSBCaGtzIEJvcG9tb2ZvIEJvcG8gQnJhaG1pIEJyYWggQnJhaWxsZSBCcmFpIEJ1Z2luZXNlIEJ1Z2kgQnVoaWQgQnVoZCBDYW5hZGlhbl9BYm9yaWdpbmFsIENhbnMgQ2FyaWFuIENhcmkgQ2F1Y2FzaWFuX0FsYmFuaWFuIEFnaGIgQ2hha21hIENha20gQ2hhbSBDaGFtIENoZXJva2VlIENoZXIgQ29tbW9uIFp5eXkgQ29wdGljIENvcHQgUWFhYyBDdW5laWZvcm0gWHN1eCBDeXByaW90IENwcnQgQ3lyaWxsaWMgQ3lybCBEZXNlcmV0IERzcnQgRGV2YW5hZ2FyaSBEZXZhIER1cGxveWFuIER1cGwgRWd5cHRpYW5fSGllcm9nbHlwaHMgRWd5cCBFbGJhc2FuIEVsYmEgRXRoaW9waWMgRXRoaSBHZW9yZ2lhbiBHZW9yIEdsYWdvbGl0aWMgR2xhZyBHb3RoaWMgR290aCBHcmFudGhhIEdyYW4gR3JlZWsgR3JlayBHdWphcmF0aSBHdWpyIEd1cm11a2hpIEd1cnUgSGFuIEhhbmkgSGFuZ3VsIEhhbmcgSGFudW5vbyBIYW5vIEhhdHJhbiBIYXRyIEhlYnJldyBIZWJyIEhpcmFnYW5hIEhpcmEgSW1wZXJpYWxfQXJhbWFpYyBBcm1pIEluaGVyaXRlZCBaaW5oIFFhYWkgSW5zY3JpcHRpb25hbF9QYWhsYXZpIFBobGkgSW5zY3JpcHRpb25hbF9QYXJ0aGlhbiBQcnRpIEphdmFuZXNlIEphdmEgS2FpdGhpIEt0aGkgS2FubmFkYSBLbmRhIEthdGFrYW5hIEthbmEgS2F5YWhfTGkgS2FsaSBLaGFyb3NodGhpIEtoYXIgS2htZXIgS2htciBLaG9qa2kgS2hvaiBLaHVkYXdhZGkgU2luZCBMYW8gTGFvbyBMYXRpbiBMYXRuIExlcGNoYSBMZXBjIExpbWJ1IExpbWIgTGluZWFyX0EgTGluYSBMaW5lYXJfQiBMaW5iIExpc3UgTGlzdSBMeWNpYW4gTHljaSBMeWRpYW4gTHlkaSBNYWhhamFuaSBNYWhqIE1hbGF5YWxhbSBNbHltIE1hbmRhaWMgTWFuZCBNYW5pY2hhZWFuIE1hbmkgTWFyY2hlbiBNYXJjIE1hc2FyYW1fR29uZGkgR29ubSBNZWV0ZWlfTWF5ZWsgTXRlaSBNZW5kZV9LaWtha3VpIE1lbmQgTWVyb2l0aWNfQ3Vyc2l2ZSBNZXJjIE1lcm9pdGljX0hpZXJvZ2x5cGhzIE1lcm8gTWlhbyBQbHJkIE1vZGkgTW9uZ29saWFuIE1vbmcgTXJvIE1yb28gTXVsdGFuaSBNdWx0IE15YW5tYXIgTXltciBOYWJhdGFlYW4gTmJhdCBOZXdfVGFpX0x1ZSBUYWx1IE5ld2EgTmV3YSBOa28gTmtvbyBOdXNodSBOc2h1IE9naGFtIE9nYW0gT2xfQ2hpa2kgT2xjayBPbGRfSHVuZ2FyaWFuIEh1bmcgT2xkX0l0YWxpYyBJdGFsIE9sZF9Ob3J0aF9BcmFiaWFuIE5hcmIgT2xkX1Blcm1pYyBQZXJtIE9sZF9QZXJzaWFuIFhwZW8gT2xkX1NvdXRoX0FyYWJpYW4gU2FyYiBPbGRfVHVya2ljIE9ya2ggT3JpeWEgT3J5YSBPc2FnZSBPc2dlIE9zbWFueWEgT3NtYSBQYWhhd2hfSG1vbmcgSG1uZyBQYWxteXJlbmUgUGFsbSBQYXVfQ2luX0hhdSBQYXVjIFBoYWdzX1BhIFBoYWcgUGhvZW5pY2lhbiBQaG54IFBzYWx0ZXJfUGFobGF2aSBQaGxwIFJlamFuZyBSam5nIFJ1bmljIFJ1bnIgU2FtYXJpdGFuIFNhbXIgU2F1cmFzaHRyYSBTYXVyIFNoYXJhZGEgU2hyZCBTaGF2aWFuIFNoYXcgU2lkZGhhbSBTaWRkIFNpZ25Xcml0aW5nIFNnbncgU2luaGFsYSBTaW5oIFNvcmFfU29tcGVuZyBTb3JhIFNveW9tYm8gU295byBTdW5kYW5lc2UgU3VuZCBTeWxvdGlfTmFncmkgU3lsbyBTeXJpYWMgU3lyYyBUYWdhbG9nIFRnbGcgVGFnYmFud2EgVGFnYiBUYWlfTGUgVGFsZSBUYWlfVGhhbSBMYW5hIFRhaV9WaWV0IFRhdnQgVGFrcmkgVGFrciBUYW1pbCBUYW1sIFRhbmd1dCBUYW5nIFRlbHVndSBUZWx1IFRoYWFuYSBUaGFhIFRoYWkgVGhhaSBUaWJldGFuIFRpYnQgVGlmaW5hZ2ggVGZuZyBUaXJodXRhIFRpcmggVWdhcml0aWMgVWdhciBWYWkgVmFpaSBXYXJhbmdfQ2l0aSBXYXJhIFlpIFlpaWkgWmFuYWJhemFyX1NxdWFyZSBaYW5iIjsKICB2YXIgZWNtYTEwU2NyaXB0VmFsdWVzID0gZWNtYTlTY3JpcHRWYWx1ZXMgKyAiIERvZ3JhIERvZ3IgR3VuamFsYV9Hb25kaSBHb25nIEhhbmlmaV9Sb2hpbmd5YSBSb2hnIE1ha2FzYXIgTWFrYSBNZWRlZmFpZHJpbiBNZWRmIE9sZF9Tb2dkaWFuIFNvZ28gU29nZGlhbiBTb2dkIjsKICB2YXIgZWNtYTExU2NyaXB0VmFsdWVzID0gZWNtYTEwU2NyaXB0VmFsdWVzICsgIiBFbHltYWljIEVseW0gTmFuZGluYWdhcmkgTmFuZCBOeWlha2VuZ19QdWFjaHVlX0htb25nIEhtbnAgV2FuY2hvIFdjaG8iOwogIHZhciBlY21hMTJTY3JpcHRWYWx1ZXMgPSBlY21hMTFTY3JpcHRWYWx1ZXMgKyAiIENob3Jhc21pYW4gQ2hycyBEaWFrIERpdmVzX0FrdXJ1IEtoaXRhbl9TbWFsbF9TY3JpcHQgS2l0cyBZZXppIFllemlkaSI7CiAgdmFyIGVjbWExM1NjcmlwdFZhbHVlcyA9IGVjbWExMlNjcmlwdFZhbHVlcyArICIgQ3lwcm9fTWlub2FuIENwbW4gT2xkX1V5Z2h1ciBPdWdyIFRhbmdzYSBUbnNhIFRvdG8gVml0aGt1cWkgVml0aCI7CiAgdmFyIHVuaWNvZGVTY3JpcHRWYWx1ZXMgPSB7CiAgICA5OiBlY21hOVNjcmlwdFZhbHVlcywKICAgIDEwOiBlY21hMTBTY3JpcHRWYWx1ZXMsCiAgICAxMTogZWNtYTExU2NyaXB0VmFsdWVzLAogICAgMTI6IGVjbWExMlNjcmlwdFZhbHVlcywKICAgIDEzOiBlY21hMTNTY3JpcHRWYWx1ZXMKICB9OwoKICB2YXIgZGF0YSA9IHt9OwogIGZ1bmN0aW9uIGJ1aWxkVW5pY29kZURhdGEoZWNtYVZlcnNpb24pIHsKICAgIHZhciBkID0gZGF0YVtlY21hVmVyc2lvbl0gPSB7CiAgICAgIGJpbmFyeTogd29yZHNSZWdleHAodW5pY29kZUJpbmFyeVByb3BlcnRpZXNbZWNtYVZlcnNpb25dICsgIiAiICsgdW5pY29kZUdlbmVyYWxDYXRlZ29yeVZhbHVlcyksCiAgICAgIG5vbkJpbmFyeTogewogICAgICAgIEdlbmVyYWxfQ2F0ZWdvcnk6IHdvcmRzUmVnZXhwKHVuaWNvZGVHZW5lcmFsQ2F0ZWdvcnlWYWx1ZXMpLAogICAgICAgIFNjcmlwdDogd29yZHNSZWdleHAodW5pY29kZVNjcmlwdFZhbHVlc1tlY21hVmVyc2lvbl0pCiAgICAgIH0KICAgIH07CiAgICBkLm5vbkJpbmFyeS5TY3JpcHRfRXh0ZW5zaW9ucyA9IGQubm9uQmluYXJ5LlNjcmlwdDsKCiAgICBkLm5vbkJpbmFyeS5nYyA9IGQubm9uQmluYXJ5LkdlbmVyYWxfQ2F0ZWdvcnk7CiAgICBkLm5vbkJpbmFyeS5zYyA9IGQubm9uQmluYXJ5LlNjcmlwdDsKICAgIGQubm9uQmluYXJ5LnNjeCA9IGQubm9uQmluYXJ5LlNjcmlwdF9FeHRlbnNpb25zOwogIH0KCiAgZm9yICh2YXIgaSA9IDAsIGxpc3QgPSBbOSwgMTAsIDExLCAxMiwgMTNdOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkgewogICAgdmFyIGVjbWFWZXJzaW9uID0gbGlzdFtpXTsKCiAgICBidWlsZFVuaWNvZGVEYXRhKGVjbWFWZXJzaW9uKTsKICB9CgogIHZhciBwcCQxID0gUGFyc2VyLnByb3RvdHlwZTsKCiAgdmFyIFJlZ0V4cFZhbGlkYXRpb25TdGF0ZSA9IGZ1bmN0aW9uIFJlZ0V4cFZhbGlkYXRpb25TdGF0ZShwYXJzZXIpIHsKICAgIHRoaXMucGFyc2VyID0gcGFyc2VyOwogICAgdGhpcy52YWxpZEZsYWdzID0gImdpbSIgKyAocGFyc2VyLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNiA/ICJ1eSIgOiAiIikgKyAocGFyc2VyLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOSA/ICJzIiA6ICIiKSArIChwYXJzZXIub3B0aW9ucy5lY21hVmVyc2lvbiA+PSAxMyA/ICJkIiA6ICIiKTsKICAgIHRoaXMudW5pY29kZVByb3BlcnRpZXMgPSBkYXRhW3BhcnNlci5vcHRpb25zLmVjbWFWZXJzaW9uID49IDEzID8gMTMgOiBwYXJzZXIub3B0aW9ucy5lY21hVmVyc2lvbl07CiAgICB0aGlzLnNvdXJjZSA9ICIiOwogICAgdGhpcy5mbGFncyA9ICIiOwogICAgdGhpcy5zdGFydCA9IDA7CiAgICB0aGlzLnN3aXRjaFUgPSBmYWxzZTsKICAgIHRoaXMuc3dpdGNoTiA9IGZhbHNlOwogICAgdGhpcy5wb3MgPSAwOwogICAgdGhpcy5sYXN0SW50VmFsdWUgPSAwOwogICAgdGhpcy5sYXN0U3RyaW5nVmFsdWUgPSAiIjsKICAgIHRoaXMubGFzdEFzc2VydGlvbklzUXVhbnRpZmlhYmxlID0gZmFsc2U7CiAgICB0aGlzLm51bUNhcHR1cmluZ1BhcmVucyA9IDA7CiAgICB0aGlzLm1heEJhY2tSZWZlcmVuY2UgPSAwOwogICAgdGhpcy5ncm91cE5hbWVzID0gW107CiAgICB0aGlzLmJhY2tSZWZlcmVuY2VOYW1lcyA9IFtdOwogIH07CgogIFJlZ0V4cFZhbGlkYXRpb25TdGF0ZS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiByZXNldCAoc3RhcnQsIHBhdHRlcm4sIGZsYWdzKSB7CiAgICB2YXIgdW5pY29kZSA9IGZsYWdzLmluZGV4T2YoInUiKSAhPT0gLTE7CiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQgfCAwOwogICAgdGhpcy5zb3VyY2UgPSBwYXR0ZXJuICsgIiI7CiAgICB0aGlzLmZsYWdzID0gZmxhZ3M7CiAgICB0aGlzLnN3aXRjaFUgPSB1bmljb2RlICYmIHRoaXMucGFyc2VyLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNjsKICAgIHRoaXMuc3dpdGNoTiA9IHVuaWNvZGUgJiYgdGhpcy5wYXJzZXIub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5OwogIH07CgogIFJlZ0V4cFZhbGlkYXRpb25TdGF0ZS5wcm90b3R5cGUucmFpc2UgPSBmdW5jdGlvbiByYWlzZSAobWVzc2FnZSkgewogICAgdGhpcy5wYXJzZXIucmFpc2VSZWNvdmVyYWJsZSh0aGlzLnN0YXJ0LCAoIkludmFsaWQgcmVndWxhciBleHByZXNzaW9uOiAvIiArICh0aGlzLnNvdXJjZSkgKyAiLzogIiArIG1lc3NhZ2UpKTsKICB9OwoKICAvLyBJZiB1IGZsYWcgaXMgZ2l2ZW4sIHRoaXMgcmV0dXJucyB0aGUgY29kZSBwb2ludCBhdCB0aGUgaW5kZXggKGl0IGNvbWJpbmVzIGEgc3Vycm9nYXRlIHBhaXIpLgogIC8vIE90aGVyd2lzZSwgdGhpcyByZXR1cm5zIHRoZSBjb2RlIHVuaXQgb2YgdGhlIGluZGV4IChjYW4gYmUgYSBwYXJ0IG9mIGEgc3Vycm9nYXRlIHBhaXIpLgogIFJlZ0V4cFZhbGlkYXRpb25TdGF0ZS5wcm90b3R5cGUuYXQgPSBmdW5jdGlvbiBhdCAoaSwgZm9yY2VVKSB7CiAgICAgIGlmICggZm9yY2VVID09PSB2b2lkIDAgKSBmb3JjZVUgPSBmYWxzZTsKCiAgICB2YXIgcyA9IHRoaXMuc291cmNlOwogICAgdmFyIGwgPSBzLmxlbmd0aDsKICAgIGlmIChpID49IGwpIHsKICAgICAgcmV0dXJuIC0xCiAgICB9CiAgICB2YXIgYyA9IHMuY2hhckNvZGVBdChpKTsKICAgIGlmICghKGZvcmNlVSB8fCB0aGlzLnN3aXRjaFUpIHx8IGMgPD0gMHhEN0ZGIHx8IGMgPj0gMHhFMDAwIHx8IGkgKyAxID49IGwpIHsKICAgICAgcmV0dXJuIGMKICAgIH0KICAgIHZhciBuZXh0ID0gcy5jaGFyQ29kZUF0KGkgKyAxKTsKICAgIHJldHVybiBuZXh0ID49IDB4REMwMCAmJiBuZXh0IDw9IDB4REZGRiA/IChjIDw8IDEwKSArIG5leHQgLSAweDM1RkRDMDAgOiBjCiAgfTsKCiAgUmVnRXhwVmFsaWRhdGlvblN0YXRlLnByb3RvdHlwZS5uZXh0SW5kZXggPSBmdW5jdGlvbiBuZXh0SW5kZXggKGksIGZvcmNlVSkgewogICAgICBpZiAoIGZvcmNlVSA9PT0gdm9pZCAwICkgZm9yY2VVID0gZmFsc2U7CgogICAgdmFyIHMgPSB0aGlzLnNvdXJjZTsKICAgIHZhciBsID0gcy5sZW5ndGg7CiAgICBpZiAoaSA+PSBsKSB7CiAgICAgIHJldHVybiBsCiAgICB9CiAgICB2YXIgYyA9IHMuY2hhckNvZGVBdChpKSwgbmV4dDsKICAgIGlmICghKGZvcmNlVSB8fCB0aGlzLnN3aXRjaFUpIHx8IGMgPD0gMHhEN0ZGIHx8IGMgPj0gMHhFMDAwIHx8IGkgKyAxID49IGwgfHwKICAgICAgICAobmV4dCA9IHMuY2hhckNvZGVBdChpICsgMSkpIDwgMHhEQzAwIHx8IG5leHQgPiAweERGRkYpIHsKICAgICAgcmV0dXJuIGkgKyAxCiAgICB9CiAgICByZXR1cm4gaSArIDIKICB9OwoKICBSZWdFeHBWYWxpZGF0aW9uU3RhdGUucHJvdG90eXBlLmN1cnJlbnQgPSBmdW5jdGlvbiBjdXJyZW50IChmb3JjZVUpIHsKICAgICAgaWYgKCBmb3JjZVUgPT09IHZvaWQgMCApIGZvcmNlVSA9IGZhbHNlOwoKICAgIHJldHVybiB0aGlzLmF0KHRoaXMucG9zLCBmb3JjZVUpCiAgfTsKCiAgUmVnRXhwVmFsaWRhdGlvblN0YXRlLnByb3RvdHlwZS5sb29rYWhlYWQgPSBmdW5jdGlvbiBsb29rYWhlYWQgKGZvcmNlVSkgewogICAgICBpZiAoIGZvcmNlVSA9PT0gdm9pZCAwICkgZm9yY2VVID0gZmFsc2U7CgogICAgcmV0dXJuIHRoaXMuYXQodGhpcy5uZXh0SW5kZXgodGhpcy5wb3MsIGZvcmNlVSksIGZvcmNlVSkKICB9OwoKICBSZWdFeHBWYWxpZGF0aW9uU3RhdGUucHJvdG90eXBlLmFkdmFuY2UgPSBmdW5jdGlvbiBhZHZhbmNlIChmb3JjZVUpIHsKICAgICAgaWYgKCBmb3JjZVUgPT09IHZvaWQgMCApIGZvcmNlVSA9IGZhbHNlOwoKICAgIHRoaXMucG9zID0gdGhpcy5uZXh0SW5kZXgodGhpcy5wb3MsIGZvcmNlVSk7CiAgfTsKCiAgUmVnRXhwVmFsaWRhdGlvblN0YXRlLnByb3RvdHlwZS5lYXQgPSBmdW5jdGlvbiBlYXQgKGNoLCBmb3JjZVUpIHsKICAgICAgaWYgKCBmb3JjZVUgPT09IHZvaWQgMCApIGZvcmNlVSA9IGZhbHNlOwoKICAgIGlmICh0aGlzLmN1cnJlbnQoZm9yY2VVKSA9PT0gY2gpIHsKICAgICAgdGhpcy5hZHZhbmNlKGZvcmNlVSk7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICBmdW5jdGlvbiBjb2RlUG9pbnRUb1N0cmluZyQxKGNoKSB7CiAgICBpZiAoY2ggPD0gMHhGRkZGKSB7IHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoKSB9CiAgICBjaCAtPSAweDEwMDAwOwogICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoKGNoID4+IDEwKSArIDB4RDgwMCwgKGNoICYgMHgwM0ZGKSArIDB4REMwMCkKICB9CgogIC8qKgogICAqIFZhbGlkYXRlIHRoZSBmbGFncyBwYXJ0IG9mIGEgZ2l2ZW4gUmVnRXhwTGl0ZXJhbC4KICAgKgogICAqIEBwYXJhbSB7UmVnRXhwVmFsaWRhdGlvblN0YXRlfSBzdGF0ZSBUaGUgc3RhdGUgdG8gdmFsaWRhdGUgUmVnRXhwLgogICAqIEByZXR1cm5zIHt2b2lkfQogICAqLwogIHBwJDEudmFsaWRhdGVSZWdFeHBGbGFncyA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgdmFsaWRGbGFncyA9IHN0YXRlLnZhbGlkRmxhZ3M7CiAgICB2YXIgZmxhZ3MgPSBzdGF0ZS5mbGFnczsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZsYWdzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBmbGFnID0gZmxhZ3MuY2hhckF0KGkpOwogICAgICBpZiAodmFsaWRGbGFncy5pbmRleE9mKGZsYWcpID09PSAtMSkgewogICAgICAgIHRoaXMucmFpc2Uoc3RhdGUuc3RhcnQsICJJbnZhbGlkIHJlZ3VsYXIgZXhwcmVzc2lvbiBmbGFnIik7CiAgICAgIH0KICAgICAgaWYgKGZsYWdzLmluZGV4T2YoZmxhZywgaSArIDEpID4gLTEpIHsKICAgICAgICB0aGlzLnJhaXNlKHN0YXRlLnN0YXJ0LCAiRHVwbGljYXRlIHJlZ3VsYXIgZXhwcmVzc2lvbiBmbGFnIik7CiAgICAgIH0KICAgIH0KICB9OwoKICAvKioKICAgKiBWYWxpZGF0ZSB0aGUgcGF0dGVybiBwYXJ0IG9mIGEgZ2l2ZW4gUmVnRXhwTGl0ZXJhbC4KICAgKgogICAqIEBwYXJhbSB7UmVnRXhwVmFsaWRhdGlvblN0YXRlfSBzdGF0ZSBUaGUgc3RhdGUgdG8gdmFsaWRhdGUgUmVnRXhwLgogICAqIEByZXR1cm5zIHt2b2lkfQogICAqLwogIHBwJDEudmFsaWRhdGVSZWdFeHBQYXR0ZXJuID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHRoaXMucmVnZXhwX3BhdHRlcm4oc3RhdGUpOwoKICAgIC8vIFRoZSBnb2FsIHN5bWJvbCBmb3IgdGhlIHBhcnNlIGlzIHxQYXR0ZXJuW35VLCB+Tl18LiBJZiB0aGUgcmVzdWx0IG9mCiAgICAvLyBwYXJzaW5nIGNvbnRhaW5zIGEgfEdyb3VwTmFtZXwsIHJlcGFyc2Ugd2l0aCB0aGUgZ29hbCBzeW1ib2wKICAgIC8vIHxQYXR0ZXJuW35VLCArTl18IGFuZCB1c2UgdGhpcyByZXN1bHQgaW5zdGVhZC4gVGhyb3cgYSAqU3ludGF4RXJyb3IqCiAgICAvLyBleGNlcHRpb24gaWYgX1BfIGRpZCBub3QgY29uZm9ybSB0byB0aGUgZ3JhbW1hciwgaWYgYW55IGVsZW1lbnRzIG9mIF9QXwogICAgLy8gd2VyZSBub3QgbWF0Y2hlZCBieSB0aGUgcGFyc2UsIG9yIGlmIGFueSBFYXJseSBFcnJvciBjb25kaXRpb25zIGV4aXN0LgogICAgaWYgKCFzdGF0ZS5zd2l0Y2hOICYmIHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5ICYmIHN0YXRlLmdyb3VwTmFtZXMubGVuZ3RoID4gMCkgewogICAgICBzdGF0ZS5zd2l0Y2hOID0gdHJ1ZTsKICAgICAgdGhpcy5yZWdleHBfcGF0dGVybihzdGF0ZSk7CiAgICB9CiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtUGF0dGVybgogIHBwJDEucmVnZXhwX3BhdHRlcm4gPSBmdW5jdGlvbihzdGF0ZSkgewogICAgc3RhdGUucG9zID0gMDsKICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDA7CiAgICBzdGF0ZS5sYXN0U3RyaW5nVmFsdWUgPSAiIjsKICAgIHN0YXRlLmxhc3RBc3NlcnRpb25Jc1F1YW50aWZpYWJsZSA9IGZhbHNlOwogICAgc3RhdGUubnVtQ2FwdHVyaW5nUGFyZW5zID0gMDsKICAgIHN0YXRlLm1heEJhY2tSZWZlcmVuY2UgPSAwOwogICAgc3RhdGUuZ3JvdXBOYW1lcy5sZW5ndGggPSAwOwogICAgc3RhdGUuYmFja1JlZmVyZW5jZU5hbWVzLmxlbmd0aCA9IDA7CgogICAgdGhpcy5yZWdleHBfZGlzanVuY3Rpb24oc3RhdGUpOwoKICAgIGlmIChzdGF0ZS5wb3MgIT09IHN0YXRlLnNvdXJjZS5sZW5ndGgpIHsKICAgICAgLy8gTWFrZSB0aGUgc2FtZSBtZXNzYWdlcyBhcyBWOC4KICAgICAgaWYgKHN0YXRlLmVhdCgweDI5IC8qICkgKi8pKSB7CiAgICAgICAgc3RhdGUucmFpc2UoIlVubWF0Y2hlZCAnKSciKTsKICAgICAgfQogICAgICBpZiAoc3RhdGUuZWF0KDB4NUQgLyogXSAqLykgfHwgc3RhdGUuZWF0KDB4N0QgLyogfSAqLykpIHsKICAgICAgICBzdGF0ZS5yYWlzZSgiTG9uZSBxdWFudGlmaWVyIGJyYWNrZXRzIik7CiAgICAgIH0KICAgIH0KICAgIGlmIChzdGF0ZS5tYXhCYWNrUmVmZXJlbmNlID4gc3RhdGUubnVtQ2FwdHVyaW5nUGFyZW5zKSB7CiAgICAgIHN0YXRlLnJhaXNlKCJJbnZhbGlkIGVzY2FwZSIpOwogICAgfQogICAgZm9yICh2YXIgaSA9IDAsIGxpc3QgPSBzdGF0ZS5iYWNrUmVmZXJlbmNlTmFtZXM7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIHZhciBuYW1lID0gbGlzdFtpXTsKCiAgICAgIGlmIChzdGF0ZS5ncm91cE5hbWVzLmluZGV4T2YobmFtZSkgPT09IC0xKSB7CiAgICAgICAgc3RhdGUucmFpc2UoIkludmFsaWQgbmFtZWQgY2FwdHVyZSByZWZlcmVuY2VkIik7CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1EaXNqdW5jdGlvbgogIHBwJDEucmVnZXhwX2Rpc2p1bmN0aW9uID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHRoaXMucmVnZXhwX2FsdGVybmF0aXZlKHN0YXRlKTsKICAgIHdoaWxlIChzdGF0ZS5lYXQoMHg3QyAvKiB8ICovKSkgewogICAgICB0aGlzLnJlZ2V4cF9hbHRlcm5hdGl2ZShzdGF0ZSk7CiAgICB9CgogICAgLy8gTWFrZSB0aGUgc2FtZSBtZXNzYWdlIGFzIFY4LgogICAgaWYgKHRoaXMucmVnZXhwX2VhdFF1YW50aWZpZXIoc3RhdGUsIHRydWUpKSB7CiAgICAgIHN0YXRlLnJhaXNlKCJOb3RoaW5nIHRvIHJlcGVhdCIpOwogICAgfQogICAgaWYgKHN0YXRlLmVhdCgweDdCIC8qIHsgKi8pKSB7CiAgICAgIHN0YXRlLnJhaXNlKCJMb25lIHF1YW50aWZpZXIgYnJhY2tldHMiKTsKICAgIH0KICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1BbHRlcm5hdGl2ZQogIHBwJDEucmVnZXhwX2FsdGVybmF0aXZlID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHdoaWxlIChzdGF0ZS5wb3MgPCBzdGF0ZS5zb3VyY2UubGVuZ3RoICYmIHRoaXMucmVnZXhwX2VhdFRlcm0oc3RhdGUpKQogICAgICB7IH0KICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1hbm5leEItVGVybQogIHBwJDEucmVnZXhwX2VhdFRlcm0gPSBmdW5jdGlvbihzdGF0ZSkgewogICAgaWYgKHRoaXMucmVnZXhwX2VhdEFzc2VydGlvbihzdGF0ZSkpIHsKICAgICAgLy8gSGFuZGxlIGBRdWFudGlmaWFibGVBc3NlcnRpb24gUXVhbnRpZmllcmAgYWx0ZXJuYXRpdmUuCiAgICAgIC8vIGBzdGF0ZS5sYXN0QXNzZXJ0aW9uSXNRdWFudGlmaWFibGVgIGlzIHRydWUgaWYgdGhlIGxhc3QgZWF0ZW4gQXNzZXJ0aW9uCiAgICAgIC8vIGlzIGEgUXVhbnRpZmlhYmxlQXNzZXJ0aW9uLgogICAgICBpZiAoc3RhdGUubGFzdEFzc2VydGlvbklzUXVhbnRpZmlhYmxlICYmIHRoaXMucmVnZXhwX2VhdFF1YW50aWZpZXIoc3RhdGUpKSB7CiAgICAgICAgLy8gTWFrZSB0aGUgc2FtZSBtZXNzYWdlIGFzIFY4LgogICAgICAgIGlmIChzdGF0ZS5zd2l0Y2hVKSB7CiAgICAgICAgICBzdGF0ZS5yYWlzZSgiSW52YWxpZCBxdWFudGlmaWVyIik7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0cnVlCiAgICB9CgogICAgaWYgKHN0YXRlLnN3aXRjaFUgPyB0aGlzLnJlZ2V4cF9lYXRBdG9tKHN0YXRlKSA6IHRoaXMucmVnZXhwX2VhdEV4dGVuZGVkQXRvbShzdGF0ZSkpIHsKICAgICAgdGhpcy5yZWdleHBfZWF0UXVhbnRpZmllcihzdGF0ZSk7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CgogICAgcmV0dXJuIGZhbHNlCiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtYW5uZXhCLUFzc2VydGlvbgogIHBwJDEucmVnZXhwX2VhdEFzc2VydGlvbiA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgc3RhcnQgPSBzdGF0ZS5wb3M7CiAgICBzdGF0ZS5sYXN0QXNzZXJ0aW9uSXNRdWFudGlmaWFibGUgPSBmYWxzZTsKCiAgICAvLyBeLCAkCiAgICBpZiAoc3RhdGUuZWF0KDB4NUUgLyogXiAqLykgfHwgc3RhdGUuZWF0KDB4MjQgLyogJCAqLykpIHsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICAvLyBcYiBcQgogICAgaWYgKHN0YXRlLmVhdCgweDVDIC8qIFwgKi8pKSB7CiAgICAgIGlmIChzdGF0ZS5lYXQoMHg0MiAvKiBCICovKSB8fCBzdGF0ZS5lYXQoMHg2MiAvKiBiICovKSkgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICB9CgogICAgLy8gTG9va2FoZWFkIC8gTG9va2JlaGluZAogICAgaWYgKHN0YXRlLmVhdCgweDI4IC8qICggKi8pICYmIHN0YXRlLmVhdCgweDNGIC8qID8gKi8pKSB7CiAgICAgIHZhciBsb29rYmVoaW5kID0gZmFsc2U7CiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOSkgewogICAgICAgIGxvb2tiZWhpbmQgPSBzdGF0ZS5lYXQoMHgzQyAvKiA8ICovKTsKICAgICAgfQogICAgICBpZiAoc3RhdGUuZWF0KDB4M0QgLyogPSAqLykgfHwgc3RhdGUuZWF0KDB4MjEgLyogISAqLykpIHsKICAgICAgICB0aGlzLnJlZ2V4cF9kaXNqdW5jdGlvbihzdGF0ZSk7CiAgICAgICAgaWYgKCFzdGF0ZS5lYXQoMHgyOSAvKiApICovKSkgewogICAgICAgICAgc3RhdGUucmFpc2UoIlVudGVybWluYXRlZCBncm91cCIpOwogICAgICAgIH0KICAgICAgICBzdGF0ZS5sYXN0QXNzZXJ0aW9uSXNRdWFudGlmaWFibGUgPSAhbG9va2JlaGluZDsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICB9CgogICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1RdWFudGlmaWVyCiAgcHAkMS5yZWdleHBfZWF0UXVhbnRpZmllciA9IGZ1bmN0aW9uKHN0YXRlLCBub0Vycm9yKSB7CiAgICBpZiAoIG5vRXJyb3IgPT09IHZvaWQgMCApIG5vRXJyb3IgPSBmYWxzZTsKCiAgICBpZiAodGhpcy5yZWdleHBfZWF0UXVhbnRpZmllclByZWZpeChzdGF0ZSwgbm9FcnJvcikpIHsKICAgICAgc3RhdGUuZWF0KDB4M0YgLyogPyAqLyk7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1RdWFudGlmaWVyUHJlZml4CiAgcHAkMS5yZWdleHBfZWF0UXVhbnRpZmllclByZWZpeCA9IGZ1bmN0aW9uKHN0YXRlLCBub0Vycm9yKSB7CiAgICByZXR1cm4gKAogICAgICBzdGF0ZS5lYXQoMHgyQSAvKiAqICovKSB8fAogICAgICBzdGF0ZS5lYXQoMHgyQiAvKiArICovKSB8fAogICAgICBzdGF0ZS5lYXQoMHgzRiAvKiA/ICovKSB8fAogICAgICB0aGlzLnJlZ2V4cF9lYXRCcmFjZWRRdWFudGlmaWVyKHN0YXRlLCBub0Vycm9yKQogICAgKQogIH07CiAgcHAkMS5yZWdleHBfZWF0QnJhY2VkUXVhbnRpZmllciA9IGZ1bmN0aW9uKHN0YXRlLCBub0Vycm9yKSB7CiAgICB2YXIgc3RhcnQgPSBzdGF0ZS5wb3M7CiAgICBpZiAoc3RhdGUuZWF0KDB4N0IgLyogeyAqLykpIHsKICAgICAgdmFyIG1pbiA9IDAsIG1heCA9IC0xOwogICAgICBpZiAodGhpcy5yZWdleHBfZWF0RGVjaW1hbERpZ2l0cyhzdGF0ZSkpIHsKICAgICAgICBtaW4gPSBzdGF0ZS5sYXN0SW50VmFsdWU7CiAgICAgICAgaWYgKHN0YXRlLmVhdCgweDJDIC8qICwgKi8pICYmIHRoaXMucmVnZXhwX2VhdERlY2ltYWxEaWdpdHMoc3RhdGUpKSB7CiAgICAgICAgICBtYXggPSBzdGF0ZS5sYXN0SW50VmFsdWU7CiAgICAgICAgfQogICAgICAgIGlmIChzdGF0ZS5lYXQoMHg3RCAvKiB9ICovKSkgewogICAgICAgICAgLy8gU3ludGF4RXJyb3IgaW4gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3NlYy10ZXJtCiAgICAgICAgICBpZiAobWF4ICE9PSAtMSAmJiBtYXggPCBtaW4gJiYgIW5vRXJyb3IpIHsKICAgICAgICAgICAgc3RhdGUucmFpc2UoIm51bWJlcnMgb3V0IG9mIG9yZGVyIGluIHt9IHF1YW50aWZpZXIiKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChzdGF0ZS5zd2l0Y2hVICYmICFub0Vycm9yKSB7CiAgICAgICAgc3RhdGUucmFpc2UoIkluY29tcGxldGUgcXVhbnRpZmllciIpOwogICAgICB9CiAgICAgIHN0YXRlLnBvcyA9IHN0YXJ0OwogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtQXRvbQogIHBwJDEucmVnZXhwX2VhdEF0b20gPSBmdW5jdGlvbihzdGF0ZSkgewogICAgcmV0dXJuICgKICAgICAgdGhpcy5yZWdleHBfZWF0UGF0dGVybkNoYXJhY3RlcnMoc3RhdGUpIHx8CiAgICAgIHN0YXRlLmVhdCgweDJFIC8qIC4gKi8pIHx8CiAgICAgIHRoaXMucmVnZXhwX2VhdFJldmVyc2VTb2xpZHVzQXRvbUVzY2FwZShzdGF0ZSkgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0Q2hhcmFjdGVyQ2xhc3Moc3RhdGUpIHx8CiAgICAgIHRoaXMucmVnZXhwX2VhdFVuY2FwdHVyaW5nR3JvdXAoc3RhdGUpIHx8CiAgICAgIHRoaXMucmVnZXhwX2VhdENhcHR1cmluZ0dyb3VwKHN0YXRlKQogICAgKQogIH07CiAgcHAkMS5yZWdleHBfZWF0UmV2ZXJzZVNvbGlkdXNBdG9tRXNjYXBlID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBzdGFydCA9IHN0YXRlLnBvczsKICAgIGlmIChzdGF0ZS5lYXQoMHg1QyAvKiBcICovKSkgewogICAgICBpZiAodGhpcy5yZWdleHBfZWF0QXRvbUVzY2FwZShzdGF0ZSkpIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIHN0YXRlLnBvcyA9IHN0YXJ0OwogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKICBwcCQxLnJlZ2V4cF9lYXRVbmNhcHR1cmluZ0dyb3VwID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBzdGFydCA9IHN0YXRlLnBvczsKICAgIGlmIChzdGF0ZS5lYXQoMHgyOCAvKiAoICovKSkgewogICAgICBpZiAoc3RhdGUuZWF0KDB4M0YgLyogPyAqLykgJiYgc3RhdGUuZWF0KDB4M0EgLyogOiAqLykpIHsKICAgICAgICB0aGlzLnJlZ2V4cF9kaXNqdW5jdGlvbihzdGF0ZSk7CiAgICAgICAgaWYgKHN0YXRlLmVhdCgweDI5IC8qICkgKi8pKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgIH0KICAgICAgICBzdGF0ZS5yYWlzZSgiVW50ZXJtaW5hdGVkIGdyb3VwIik7CiAgICAgIH0KICAgICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwogIHBwJDEucmVnZXhwX2VhdENhcHR1cmluZ0dyb3VwID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIGlmIChzdGF0ZS5lYXQoMHgyOCAvKiAoICovKSkgewogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDkpIHsKICAgICAgICB0aGlzLnJlZ2V4cF9ncm91cFNwZWNpZmllcihzdGF0ZSk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuY3VycmVudCgpID09PSAweDNGIC8qID8gKi8pIHsKICAgICAgICBzdGF0ZS5yYWlzZSgiSW52YWxpZCBncm91cCIpOwogICAgICB9CiAgICAgIHRoaXMucmVnZXhwX2Rpc2p1bmN0aW9uKHN0YXRlKTsKICAgICAgaWYgKHN0YXRlLmVhdCgweDI5IC8qICkgKi8pKSB7CiAgICAgICAgc3RhdGUubnVtQ2FwdHVyaW5nUGFyZW5zICs9IDE7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICBzdGF0ZS5yYWlzZSgiVW50ZXJtaW5hdGVkIGdyb3VwIik7CiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1hbm5leEItRXh0ZW5kZWRBdG9tCiAgcHAkMS5yZWdleHBfZWF0RXh0ZW5kZWRBdG9tID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHJldHVybiAoCiAgICAgIHN0YXRlLmVhdCgweDJFIC8qIC4gKi8pIHx8CiAgICAgIHRoaXMucmVnZXhwX2VhdFJldmVyc2VTb2xpZHVzQXRvbUVzY2FwZShzdGF0ZSkgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0Q2hhcmFjdGVyQ2xhc3Moc3RhdGUpIHx8CiAgICAgIHRoaXMucmVnZXhwX2VhdFVuY2FwdHVyaW5nR3JvdXAoc3RhdGUpIHx8CiAgICAgIHRoaXMucmVnZXhwX2VhdENhcHR1cmluZ0dyb3VwKHN0YXRlKSB8fAogICAgICB0aGlzLnJlZ2V4cF9lYXRJbnZhbGlkQnJhY2VkUXVhbnRpZmllcihzdGF0ZSkgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0RXh0ZW5kZWRQYXR0ZXJuQ2hhcmFjdGVyKHN0YXRlKQogICAgKQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLWFubmV4Qi1JbnZhbGlkQnJhY2VkUXVhbnRpZmllcgogIHBwJDEucmVnZXhwX2VhdEludmFsaWRCcmFjZWRRdWFudGlmaWVyID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIGlmICh0aGlzLnJlZ2V4cF9lYXRCcmFjZWRRdWFudGlmaWVyKHN0YXRlLCB0cnVlKSkgewogICAgICBzdGF0ZS5yYWlzZSgiTm90aGluZyB0byByZXBlYXQiKTsKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLVN5bnRheENoYXJhY3RlcgogIHBwJDEucmVnZXhwX2VhdFN5bnRheENoYXJhY3RlciA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgY2ggPSBzdGF0ZS5jdXJyZW50KCk7CiAgICBpZiAoaXNTeW50YXhDaGFyYWN0ZXIoY2gpKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IGNoOwogICAgICBzdGF0ZS5hZHZhbmNlKCk7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwogIGZ1bmN0aW9uIGlzU3ludGF4Q2hhcmFjdGVyKGNoKSB7CiAgICByZXR1cm4gKAogICAgICBjaCA9PT0gMHgyNCAvKiAkICovIHx8CiAgICAgIGNoID49IDB4MjggLyogKCAqLyAmJiBjaCA8PSAweDJCIC8qICsgKi8gfHwKICAgICAgY2ggPT09IDB4MkUgLyogLiAqLyB8fAogICAgICBjaCA9PT0gMHgzRiAvKiA/ICovIHx8CiAgICAgIGNoID49IDB4NUIgLyogWyAqLyAmJiBjaCA8PSAweDVFIC8qIF4gKi8gfHwKICAgICAgY2ggPj0gMHg3QiAvKiB7ICovICYmIGNoIDw9IDB4N0QgLyogfSAqLwogICAgKQogIH0KCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtUGF0dGVybkNoYXJhY3RlcgogIC8vIEJ1dCBlYXQgZWFnZXIuCiAgcHAkMS5yZWdleHBfZWF0UGF0dGVybkNoYXJhY3RlcnMgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgdmFyIHN0YXJ0ID0gc3RhdGUucG9zOwogICAgdmFyIGNoID0gMDsKICAgIHdoaWxlICgoY2ggPSBzdGF0ZS5jdXJyZW50KCkpICE9PSAtMSAmJiAhaXNTeW50YXhDaGFyYWN0ZXIoY2gpKSB7CiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgIH0KICAgIHJldHVybiBzdGF0ZS5wb3MgIT09IHN0YXJ0CiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtYW5uZXhCLUV4dGVuZGVkUGF0dGVybkNoYXJhY3RlcgogIHBwJDEucmVnZXhwX2VhdEV4dGVuZGVkUGF0dGVybkNoYXJhY3RlciA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgY2ggPSBzdGF0ZS5jdXJyZW50KCk7CiAgICBpZiAoCiAgICAgIGNoICE9PSAtMSAmJgogICAgICBjaCAhPT0gMHgyNCAvKiAkICovICYmCiAgICAgICEoY2ggPj0gMHgyOCAvKiAoICovICYmIGNoIDw9IDB4MkIgLyogKyAqLykgJiYKICAgICAgY2ggIT09IDB4MkUgLyogLiAqLyAmJgogICAgICBjaCAhPT0gMHgzRiAvKiA/ICovICYmCiAgICAgIGNoICE9PSAweDVCIC8qIFsgKi8gJiYKICAgICAgY2ggIT09IDB4NUUgLyogXiAqLyAmJgogICAgICBjaCAhPT0gMHg3QyAvKiB8ICovCiAgICApIHsKICAgICAgc3RhdGUuYWR2YW5jZSgpOwogICAgICByZXR1cm4gdHJ1ZQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKCiAgLy8gR3JvdXBTcGVjaWZpZXIgOjoKICAvLyAgIFtlbXB0eV0KICAvLyAgIGA/YCBHcm91cE5hbWUKICBwcCQxLnJlZ2V4cF9ncm91cFNwZWNpZmllciA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICBpZiAoc3RhdGUuZWF0KDB4M0YgLyogPyAqLykpIHsKICAgICAgaWYgKHRoaXMucmVnZXhwX2VhdEdyb3VwTmFtZShzdGF0ZSkpIHsKICAgICAgICBpZiAoc3RhdGUuZ3JvdXBOYW1lcy5pbmRleE9mKHN0YXRlLmxhc3RTdHJpbmdWYWx1ZSkgIT09IC0xKSB7CiAgICAgICAgICBzdGF0ZS5yYWlzZSgiRHVwbGljYXRlIGNhcHR1cmUgZ3JvdXAgbmFtZSIpOwogICAgICAgIH0KICAgICAgICBzdGF0ZS5ncm91cE5hbWVzLnB1c2goc3RhdGUubGFzdFN0cmluZ1ZhbHVlKTsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBzdGF0ZS5yYWlzZSgiSW52YWxpZCBncm91cCIpOwogICAgfQogIH07CgogIC8vIEdyb3VwTmFtZSA6OgogIC8vICAgYDxgIFJlZ0V4cElkZW50aWZpZXJOYW1lIGA+YAogIC8vIE5vdGU6IHRoaXMgdXBkYXRlcyBgc3RhdGUubGFzdFN0cmluZ1ZhbHVlYCBwcm9wZXJ0eSB3aXRoIHRoZSBlYXRlbiBuYW1lLgogIHBwJDEucmVnZXhwX2VhdEdyb3VwTmFtZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICBzdGF0ZS5sYXN0U3RyaW5nVmFsdWUgPSAiIjsKICAgIGlmIChzdGF0ZS5lYXQoMHgzQyAvKiA8ICovKSkgewogICAgICBpZiAodGhpcy5yZWdleHBfZWF0UmVnRXhwSWRlbnRpZmllck5hbWUoc3RhdGUpICYmIHN0YXRlLmVhdCgweDNFIC8qID4gKi8pKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICBzdGF0ZS5yYWlzZSgiSW52YWxpZCBjYXB0dXJlIGdyb3VwIG5hbWUiKTsKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CgogIC8vIFJlZ0V4cElkZW50aWZpZXJOYW1lIDo6CiAgLy8gICBSZWdFeHBJZGVudGlmaWVyU3RhcnQKICAvLyAgIFJlZ0V4cElkZW50aWZpZXJOYW1lIFJlZ0V4cElkZW50aWZpZXJQYXJ0CiAgLy8gTm90ZTogdGhpcyB1cGRhdGVzIGBzdGF0ZS5sYXN0U3RyaW5nVmFsdWVgIHByb3BlcnR5IHdpdGggdGhlIGVhdGVuIG5hbWUuCiAgcHAkMS5yZWdleHBfZWF0UmVnRXhwSWRlbnRpZmllck5hbWUgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgc3RhdGUubGFzdFN0cmluZ1ZhbHVlID0gIiI7CiAgICBpZiAodGhpcy5yZWdleHBfZWF0UmVnRXhwSWRlbnRpZmllclN0YXJ0KHN0YXRlKSkgewogICAgICBzdGF0ZS5sYXN0U3RyaW5nVmFsdWUgKz0gY29kZVBvaW50VG9TdHJpbmckMShzdGF0ZS5sYXN0SW50VmFsdWUpOwogICAgICB3aGlsZSAodGhpcy5yZWdleHBfZWF0UmVnRXhwSWRlbnRpZmllclBhcnQoc3RhdGUpKSB7CiAgICAgICAgc3RhdGUubGFzdFN0cmluZ1ZhbHVlICs9IGNvZGVQb2ludFRvU3RyaW5nJDEoc3RhdGUubGFzdEludFZhbHVlKTsKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKCiAgLy8gUmVnRXhwSWRlbnRpZmllclN0YXJ0IDo6CiAgLy8gICBVbmljb2RlSURTdGFydAogIC8vICAgYCRgCiAgLy8gICBgX2AKICAvLyAgIGBcYCBSZWdFeHBVbmljb2RlRXNjYXBlU2VxdWVuY2VbK1VdCiAgcHAkMS5yZWdleHBfZWF0UmVnRXhwSWRlbnRpZmllclN0YXJ0ID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBzdGFydCA9IHN0YXRlLnBvczsKICAgIHZhciBmb3JjZVUgPSB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTE7CiAgICB2YXIgY2ggPSBzdGF0ZS5jdXJyZW50KGZvcmNlVSk7CiAgICBzdGF0ZS5hZHZhbmNlKGZvcmNlVSk7CgogICAgaWYgKGNoID09PSAweDVDIC8qIFwgKi8gJiYgdGhpcy5yZWdleHBfZWF0UmVnRXhwVW5pY29kZUVzY2FwZVNlcXVlbmNlKHN0YXRlLCBmb3JjZVUpKSB7CiAgICAgIGNoID0gc3RhdGUubGFzdEludFZhbHVlOwogICAgfQogICAgaWYgKGlzUmVnRXhwSWRlbnRpZmllclN0YXJ0KGNoKSkgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSBjaDsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgIHJldHVybiBmYWxzZQogIH07CiAgZnVuY3Rpb24gaXNSZWdFeHBJZGVudGlmaWVyU3RhcnQoY2gpIHsKICAgIHJldHVybiBpc0lkZW50aWZpZXJTdGFydChjaCwgdHJ1ZSkgfHwgY2ggPT09IDB4MjQgLyogJCAqLyB8fCBjaCA9PT0gMHg1RiAvKiBfICovCiAgfQoKICAvLyBSZWdFeHBJZGVudGlmaWVyUGFydCA6OgogIC8vICAgVW5pY29kZUlEQ29udGludWUKICAvLyAgIGAkYAogIC8vICAgYF9gCiAgLy8gICBgXGAgUmVnRXhwVW5pY29kZUVzY2FwZVNlcXVlbmNlWytVXQogIC8vICAgPFpXTko+CiAgLy8gICA8WldKPgogIHBwJDEucmVnZXhwX2VhdFJlZ0V4cElkZW50aWZpZXJQYXJ0ID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBzdGFydCA9IHN0YXRlLnBvczsKICAgIHZhciBmb3JjZVUgPSB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTE7CiAgICB2YXIgY2ggPSBzdGF0ZS5jdXJyZW50KGZvcmNlVSk7CiAgICBzdGF0ZS5hZHZhbmNlKGZvcmNlVSk7CgogICAgaWYgKGNoID09PSAweDVDIC8qIFwgKi8gJiYgdGhpcy5yZWdleHBfZWF0UmVnRXhwVW5pY29kZUVzY2FwZVNlcXVlbmNlKHN0YXRlLCBmb3JjZVUpKSB7CiAgICAgIGNoID0gc3RhdGUubGFzdEludFZhbHVlOwogICAgfQogICAgaWYgKGlzUmVnRXhwSWRlbnRpZmllclBhcnQoY2gpKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IGNoOwogICAgICByZXR1cm4gdHJ1ZQogICAgfQoKICAgIHN0YXRlLnBvcyA9IHN0YXJ0OwogICAgcmV0dXJuIGZhbHNlCiAgfTsKICBmdW5jdGlvbiBpc1JlZ0V4cElkZW50aWZpZXJQYXJ0KGNoKSB7CiAgICByZXR1cm4gaXNJZGVudGlmaWVyQ2hhcihjaCwgdHJ1ZSkgfHwgY2ggPT09IDB4MjQgLyogJCAqLyB8fCBjaCA9PT0gMHg1RiAvKiBfICovIHx8IGNoID09PSAweDIwMEMgLyogPFpXTko+ICovIHx8IGNoID09PSAweDIwMEQgLyogPFpXSj4gKi8KICB9CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLWFubmV4Qi1BdG9tRXNjYXBlCiAgcHAkMS5yZWdleHBfZWF0QXRvbUVzY2FwZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICBpZiAoCiAgICAgIHRoaXMucmVnZXhwX2VhdEJhY2tSZWZlcmVuY2Uoc3RhdGUpIHx8CiAgICAgIHRoaXMucmVnZXhwX2VhdENoYXJhY3RlckNsYXNzRXNjYXBlKHN0YXRlKSB8fAogICAgICB0aGlzLnJlZ2V4cF9lYXRDaGFyYWN0ZXJFc2NhcGUoc3RhdGUpIHx8CiAgICAgIChzdGF0ZS5zd2l0Y2hOICYmIHRoaXMucmVnZXhwX2VhdEtHcm91cE5hbWUoc3RhdGUpKQogICAgKSB7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICBpZiAoc3RhdGUuc3dpdGNoVSkgewogICAgICAvLyBNYWtlIHRoZSBzYW1lIG1lc3NhZ2UgYXMgVjguCiAgICAgIGlmIChzdGF0ZS5jdXJyZW50KCkgPT09IDB4NjMgLyogYyAqLykgewogICAgICAgIHN0YXRlLnJhaXNlKCJJbnZhbGlkIHVuaWNvZGUgZXNjYXBlIik7CiAgICAgIH0KICAgICAgc3RhdGUucmFpc2UoIkludmFsaWQgZXNjYXBlIik7CiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwogIHBwJDEucmVnZXhwX2VhdEJhY2tSZWZlcmVuY2UgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgdmFyIHN0YXJ0ID0gc3RhdGUucG9zOwogICAgaWYgKHRoaXMucmVnZXhwX2VhdERlY2ltYWxFc2NhcGUoc3RhdGUpKSB7CiAgICAgIHZhciBuID0gc3RhdGUubGFzdEludFZhbHVlOwogICAgICBpZiAoc3RhdGUuc3dpdGNoVSkgewogICAgICAgIC8vIEZvciBTeW50YXhFcnJvciBpbiBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jc2VjLWF0b21lc2NhcGUKICAgICAgICBpZiAobiA+IHN0YXRlLm1heEJhY2tSZWZlcmVuY2UpIHsKICAgICAgICAgIHN0YXRlLm1heEJhY2tSZWZlcmVuY2UgPSBuOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIGlmIChuIDw9IHN0YXRlLm51bUNhcHR1cmluZ1BhcmVucykgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwogIHBwJDEucmVnZXhwX2VhdEtHcm91cE5hbWUgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgaWYgKHN0YXRlLmVhdCgweDZCIC8qIGsgKi8pKSB7CiAgICAgIGlmICh0aGlzLnJlZ2V4cF9lYXRHcm91cE5hbWUoc3RhdGUpKSB7CiAgICAgICAgc3RhdGUuYmFja1JlZmVyZW5jZU5hbWVzLnB1c2goc3RhdGUubGFzdFN0cmluZ1ZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIHN0YXRlLnJhaXNlKCJJbnZhbGlkIG5hbWVkIHJlZmVyZW5jZSIpOwogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtYW5uZXhCLUNoYXJhY3RlckVzY2FwZQogIHBwJDEucmVnZXhwX2VhdENoYXJhY3RlckVzY2FwZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICByZXR1cm4gKAogICAgICB0aGlzLnJlZ2V4cF9lYXRDb250cm9sRXNjYXBlKHN0YXRlKSB8fAogICAgICB0aGlzLnJlZ2V4cF9lYXRDQ29udHJvbExldHRlcihzdGF0ZSkgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0WmVybyhzdGF0ZSkgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0SGV4RXNjYXBlU2VxdWVuY2Uoc3RhdGUpIHx8CiAgICAgIHRoaXMucmVnZXhwX2VhdFJlZ0V4cFVuaWNvZGVFc2NhcGVTZXF1ZW5jZShzdGF0ZSwgZmFsc2UpIHx8CiAgICAgICghc3RhdGUuc3dpdGNoVSAmJiB0aGlzLnJlZ2V4cF9lYXRMZWdhY3lPY3RhbEVzY2FwZVNlcXVlbmNlKHN0YXRlKSkgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0SWRlbnRpdHlFc2NhcGUoc3RhdGUpCiAgICApCiAgfTsKICBwcCQxLnJlZ2V4cF9lYXRDQ29udHJvbExldHRlciA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgc3RhcnQgPSBzdGF0ZS5wb3M7CiAgICBpZiAoc3RhdGUuZWF0KDB4NjMgLyogYyAqLykpIHsKICAgICAgaWYgKHRoaXMucmVnZXhwX2VhdENvbnRyb2xMZXR0ZXIoc3RhdGUpKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CiAgcHAkMS5yZWdleHBfZWF0WmVybyA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICBpZiAoc3RhdGUuY3VycmVudCgpID09PSAweDMwIC8qIDAgKi8gJiYgIWlzRGVjaW1hbERpZ2l0KHN0YXRlLmxvb2thaGVhZCgpKSkgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAwOwogICAgICBzdGF0ZS5hZHZhbmNlKCk7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1Db250cm9sRXNjYXBlCiAgcHAkMS5yZWdleHBfZWF0Q29udHJvbEVzY2FwZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgY2ggPSBzdGF0ZS5jdXJyZW50KCk7CiAgICBpZiAoY2ggPT09IDB4NzQgLyogdCAqLykgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAweDA5OyAvKiBcdCAqLwogICAgICBzdGF0ZS5hZHZhbmNlKCk7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICBpZiAoY2ggPT09IDB4NkUgLyogbiAqLykgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAweDBBOyAvKiBcbiAqLwogICAgICBzdGF0ZS5hZHZhbmNlKCk7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICBpZiAoY2ggPT09IDB4NzYgLyogdiAqLykgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAweDBCOyAvKiBcdiAqLwogICAgICBzdGF0ZS5hZHZhbmNlKCk7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICBpZiAoY2ggPT09IDB4NjYgLyogZiAqLykgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAweDBDOyAvKiBcZiAqLwogICAgICBzdGF0ZS5hZHZhbmNlKCk7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICBpZiAoY2ggPT09IDB4NzIgLyogciAqLykgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAweDBEOyAvKiBcciAqLwogICAgICBzdGF0ZS5hZHZhbmNlKCk7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1Db250cm9sTGV0dGVyCiAgcHAkMS5yZWdleHBfZWF0Q29udHJvbExldHRlciA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgY2ggPSBzdGF0ZS5jdXJyZW50KCk7CiAgICBpZiAoaXNDb250cm9sTGV0dGVyKGNoKSkgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSBjaCAlIDB4MjA7CiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CiAgZnVuY3Rpb24gaXNDb250cm9sTGV0dGVyKGNoKSB7CiAgICByZXR1cm4gKAogICAgICAoY2ggPj0gMHg0MSAvKiBBICovICYmIGNoIDw9IDB4NUEgLyogWiAqLykgfHwKICAgICAgKGNoID49IDB4NjEgLyogYSAqLyAmJiBjaCA8PSAweDdBIC8qIHogKi8pCiAgICApCiAgfQoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1SZWdFeHBVbmljb2RlRXNjYXBlU2VxdWVuY2UKICBwcCQxLnJlZ2V4cF9lYXRSZWdFeHBVbmljb2RlRXNjYXBlU2VxdWVuY2UgPSBmdW5jdGlvbihzdGF0ZSwgZm9yY2VVKSB7CiAgICBpZiAoIGZvcmNlVSA9PT0gdm9pZCAwICkgZm9yY2VVID0gZmFsc2U7CgogICAgdmFyIHN0YXJ0ID0gc3RhdGUucG9zOwogICAgdmFyIHN3aXRjaFUgPSBmb3JjZVUgfHwgc3RhdGUuc3dpdGNoVTsKCiAgICBpZiAoc3RhdGUuZWF0KDB4NzUgLyogdSAqLykpIHsKICAgICAgaWYgKHRoaXMucmVnZXhwX2VhdEZpeGVkSGV4RGlnaXRzKHN0YXRlLCA0KSkgewogICAgICAgIHZhciBsZWFkID0gc3RhdGUubGFzdEludFZhbHVlOwogICAgICAgIGlmIChzd2l0Y2hVICYmIGxlYWQgPj0gMHhEODAwICYmIGxlYWQgPD0gMHhEQkZGKSB7CiAgICAgICAgICB2YXIgbGVhZFN1cnJvZ2F0ZUVuZCA9IHN0YXRlLnBvczsKICAgICAgICAgIGlmIChzdGF0ZS5lYXQoMHg1QyAvKiBcICovKSAmJiBzdGF0ZS5lYXQoMHg3NSAvKiB1ICovKSAmJiB0aGlzLnJlZ2V4cF9lYXRGaXhlZEhleERpZ2l0cyhzdGF0ZSwgNCkpIHsKICAgICAgICAgICAgdmFyIHRyYWlsID0gc3RhdGUubGFzdEludFZhbHVlOwogICAgICAgICAgICBpZiAodHJhaWwgPj0gMHhEQzAwICYmIHRyYWlsIDw9IDB4REZGRikgewogICAgICAgICAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IChsZWFkIC0gMHhEODAwKSAqIDB4NDAwICsgKHRyYWlsIC0gMHhEQzAwKSArIDB4MTAwMDA7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc3RhdGUucG9zID0gbGVhZFN1cnJvZ2F0ZUVuZDsKICAgICAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IGxlYWQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgaWYgKAogICAgICAgIHN3aXRjaFUgJiYKICAgICAgICBzdGF0ZS5lYXQoMHg3QiAvKiB7ICovKSAmJgogICAgICAgIHRoaXMucmVnZXhwX2VhdEhleERpZ2l0cyhzdGF0ZSkgJiYKICAgICAgICBzdGF0ZS5lYXQoMHg3RCAvKiB9ICovKSAmJgogICAgICAgIGlzVmFsaWRVbmljb2RlKHN0YXRlLmxhc3RJbnRWYWx1ZSkKICAgICAgKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICBpZiAoc3dpdGNoVSkgewogICAgICAgIHN0YXRlLnJhaXNlKCJJbnZhbGlkIHVuaWNvZGUgZXNjYXBlIik7CiAgICAgIH0KICAgICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlCiAgfTsKICBmdW5jdGlvbiBpc1ZhbGlkVW5pY29kZShjaCkgewogICAgcmV0dXJuIGNoID49IDAgJiYgY2ggPD0gMHgxMEZGRkYKICB9CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLWFubmV4Qi1JZGVudGl0eUVzY2FwZQogIHBwJDEucmVnZXhwX2VhdElkZW50aXR5RXNjYXBlID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIGlmIChzdGF0ZS5zd2l0Y2hVKSB7CiAgICAgIGlmICh0aGlzLnJlZ2V4cF9lYXRTeW50YXhDaGFyYWN0ZXIoc3RhdGUpKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICBpZiAoc3RhdGUuZWF0KDB4MkYgLyogLyAqLykpIHsKICAgICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAweDJGOyAvKiAvICovCiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICByZXR1cm4gZmFsc2UKICAgIH0KCiAgICB2YXIgY2ggPSBzdGF0ZS5jdXJyZW50KCk7CiAgICBpZiAoY2ggIT09IDB4NjMgLyogYyAqLyAmJiAoIXN0YXRlLnN3aXRjaE4gfHwgY2ggIT09IDB4NkIgLyogayAqLykpIHsKICAgICAgc3RhdGUubGFzdEludFZhbHVlID0gY2g7CiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1EZWNpbWFsRXNjYXBlCiAgcHAkMS5yZWdleHBfZWF0RGVjaW1hbEVzY2FwZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAwOwogICAgdmFyIGNoID0gc3RhdGUuY3VycmVudCgpOwogICAgaWYgKGNoID49IDB4MzEgLyogMSAqLyAmJiBjaCA8PSAweDM5IC8qIDkgKi8pIHsKICAgICAgZG8gewogICAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDEwICogc3RhdGUubGFzdEludFZhbHVlICsgKGNoIC0gMHgzMCAvKiAwICovKTsKICAgICAgICBzdGF0ZS5hZHZhbmNlKCk7CiAgICAgIH0gd2hpbGUgKChjaCA9IHN0YXRlLmN1cnJlbnQoKSkgPj0gMHgzMCAvKiAwICovICYmIGNoIDw9IDB4MzkgLyogOSAqLykKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLUNoYXJhY3RlckNsYXNzRXNjYXBlCiAgcHAkMS5yZWdleHBfZWF0Q2hhcmFjdGVyQ2xhc3NFc2NhcGUgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgdmFyIGNoID0gc3RhdGUuY3VycmVudCgpOwoKICAgIGlmIChpc0NoYXJhY3RlckNsYXNzRXNjYXBlKGNoKSkgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAtMTsKICAgICAgc3RhdGUuYWR2YW5jZSgpOwogICAgICByZXR1cm4gdHJ1ZQogICAgfQoKICAgIGlmICgKICAgICAgc3RhdGUuc3dpdGNoVSAmJgogICAgICB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOSAmJgogICAgICAoY2ggPT09IDB4NTAgLyogUCAqLyB8fCBjaCA9PT0gMHg3MCAvKiBwICovKQogICAgKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IC0xOwogICAgICBzdGF0ZS5hZHZhbmNlKCk7CiAgICAgIGlmICgKICAgICAgICBzdGF0ZS5lYXQoMHg3QiAvKiB7ICovKSAmJgogICAgICAgIHRoaXMucmVnZXhwX2VhdFVuaWNvZGVQcm9wZXJ0eVZhbHVlRXhwcmVzc2lvbihzdGF0ZSkgJiYKICAgICAgICBzdGF0ZS5lYXQoMHg3RCAvKiB9ICovKQogICAgICApIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIHN0YXRlLnJhaXNlKCJJbnZhbGlkIHByb3BlcnR5IG5hbWUiKTsKICAgIH0KCiAgICByZXR1cm4gZmFsc2UKICB9OwogIGZ1bmN0aW9uIGlzQ2hhcmFjdGVyQ2xhc3NFc2NhcGUoY2gpIHsKICAgIHJldHVybiAoCiAgICAgIGNoID09PSAweDY0IC8qIGQgKi8gfHwKICAgICAgY2ggPT09IDB4NDQgLyogRCAqLyB8fAogICAgICBjaCA9PT0gMHg3MyAvKiBzICovIHx8CiAgICAgIGNoID09PSAweDUzIC8qIFMgKi8gfHwKICAgICAgY2ggPT09IDB4NzcgLyogdyAqLyB8fAogICAgICBjaCA9PT0gMHg1NyAvKiBXICovCiAgICApCiAgfQoKICAvLyBVbmljb2RlUHJvcGVydHlWYWx1ZUV4cHJlc3Npb24gOjoKICAvLyAgIFVuaWNvZGVQcm9wZXJ0eU5hbWUgYD1gIFVuaWNvZGVQcm9wZXJ0eVZhbHVlCiAgLy8gICBMb25lVW5pY29kZVByb3BlcnR5TmFtZU9yVmFsdWUKICBwcCQxLnJlZ2V4cF9lYXRVbmljb2RlUHJvcGVydHlWYWx1ZUV4cHJlc3Npb24gPSBmdW5jdGlvbihzdGF0ZSkgewogICAgdmFyIHN0YXJ0ID0gc3RhdGUucG9zOwoKICAgIC8vIFVuaWNvZGVQcm9wZXJ0eU5hbWUgYD1gIFVuaWNvZGVQcm9wZXJ0eVZhbHVlCiAgICBpZiAodGhpcy5yZWdleHBfZWF0VW5pY29kZVByb3BlcnR5TmFtZShzdGF0ZSkgJiYgc3RhdGUuZWF0KDB4M0QgLyogPSAqLykpIHsKICAgICAgdmFyIG5hbWUgPSBzdGF0ZS5sYXN0U3RyaW5nVmFsdWU7CiAgICAgIGlmICh0aGlzLnJlZ2V4cF9lYXRVbmljb2RlUHJvcGVydHlWYWx1ZShzdGF0ZSkpIHsKICAgICAgICB2YXIgdmFsdWUgPSBzdGF0ZS5sYXN0U3RyaW5nVmFsdWU7CiAgICAgICAgdGhpcy5yZWdleHBfdmFsaWRhdGVVbmljb2RlUHJvcGVydHlOYW1lQW5kVmFsdWUoc3RhdGUsIG5hbWUsIHZhbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICB9CiAgICBzdGF0ZS5wb3MgPSBzdGFydDsKCiAgICAvLyBMb25lVW5pY29kZVByb3BlcnR5TmFtZU9yVmFsdWUKICAgIGlmICh0aGlzLnJlZ2V4cF9lYXRMb25lVW5pY29kZVByb3BlcnR5TmFtZU9yVmFsdWUoc3RhdGUpKSB7CiAgICAgIHZhciBuYW1lT3JWYWx1ZSA9IHN0YXRlLmxhc3RTdHJpbmdWYWx1ZTsKICAgICAgdGhpcy5yZWdleHBfdmFsaWRhdGVVbmljb2RlUHJvcGVydHlOYW1lT3JWYWx1ZShzdGF0ZSwgbmFtZU9yVmFsdWUpOwogICAgICByZXR1cm4gdHJ1ZQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKICBwcCQxLnJlZ2V4cF92YWxpZGF0ZVVuaWNvZGVQcm9wZXJ0eU5hbWVBbmRWYWx1ZSA9IGZ1bmN0aW9uKHN0YXRlLCBuYW1lLCB2YWx1ZSkgewogICAgaWYgKCFoYXNPd24oc3RhdGUudW5pY29kZVByb3BlcnRpZXMubm9uQmluYXJ5LCBuYW1lKSkKICAgICAgeyBzdGF0ZS5yYWlzZSgiSW52YWxpZCBwcm9wZXJ0eSBuYW1lIik7IH0KICAgIGlmICghc3RhdGUudW5pY29kZVByb3BlcnRpZXMubm9uQmluYXJ5W25hbWVdLnRlc3QodmFsdWUpKQogICAgICB7IHN0YXRlLnJhaXNlKCJJbnZhbGlkIHByb3BlcnR5IHZhbHVlIik7IH0KICB9OwogIHBwJDEucmVnZXhwX3ZhbGlkYXRlVW5pY29kZVByb3BlcnR5TmFtZU9yVmFsdWUgPSBmdW5jdGlvbihzdGF0ZSwgbmFtZU9yVmFsdWUpIHsKICAgIGlmICghc3RhdGUudW5pY29kZVByb3BlcnRpZXMuYmluYXJ5LnRlc3QobmFtZU9yVmFsdWUpKQogICAgICB7IHN0YXRlLnJhaXNlKCJJbnZhbGlkIHByb3BlcnR5IG5hbWUiKTsgfQogIH07CgogIC8vIFVuaWNvZGVQcm9wZXJ0eU5hbWUgOjoKICAvLyAgIFVuaWNvZGVQcm9wZXJ0eU5hbWVDaGFyYWN0ZXJzCiAgcHAkMS5yZWdleHBfZWF0VW5pY29kZVByb3BlcnR5TmFtZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgY2ggPSAwOwogICAgc3RhdGUubGFzdFN0cmluZ1ZhbHVlID0gIiI7CiAgICB3aGlsZSAoaXNVbmljb2RlUHJvcGVydHlOYW1lQ2hhcmFjdGVyKGNoID0gc3RhdGUuY3VycmVudCgpKSkgewogICAgICBzdGF0ZS5sYXN0U3RyaW5nVmFsdWUgKz0gY29kZVBvaW50VG9TdHJpbmckMShjaCk7CiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgIH0KICAgIHJldHVybiBzdGF0ZS5sYXN0U3RyaW5nVmFsdWUgIT09ICIiCiAgfTsKICBmdW5jdGlvbiBpc1VuaWNvZGVQcm9wZXJ0eU5hbWVDaGFyYWN0ZXIoY2gpIHsKICAgIHJldHVybiBpc0NvbnRyb2xMZXR0ZXIoY2gpIHx8IGNoID09PSAweDVGIC8qIF8gKi8KICB9CgogIC8vIFVuaWNvZGVQcm9wZXJ0eVZhbHVlIDo6CiAgLy8gICBVbmljb2RlUHJvcGVydHlWYWx1ZUNoYXJhY3RlcnMKICBwcCQxLnJlZ2V4cF9lYXRVbmljb2RlUHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgY2ggPSAwOwogICAgc3RhdGUubGFzdFN0cmluZ1ZhbHVlID0gIiI7CiAgICB3aGlsZSAoaXNVbmljb2RlUHJvcGVydHlWYWx1ZUNoYXJhY3RlcihjaCA9IHN0YXRlLmN1cnJlbnQoKSkpIHsKICAgICAgc3RhdGUubGFzdFN0cmluZ1ZhbHVlICs9IGNvZGVQb2ludFRvU3RyaW5nJDEoY2gpOwogICAgICBzdGF0ZS5hZHZhbmNlKCk7CiAgICB9CiAgICByZXR1cm4gc3RhdGUubGFzdFN0cmluZ1ZhbHVlICE9PSAiIgogIH07CiAgZnVuY3Rpb24gaXNVbmljb2RlUHJvcGVydHlWYWx1ZUNoYXJhY3RlcihjaCkgewogICAgcmV0dXJuIGlzVW5pY29kZVByb3BlcnR5TmFtZUNoYXJhY3RlcihjaCkgfHwgaXNEZWNpbWFsRGlnaXQoY2gpCiAgfQoKICAvLyBMb25lVW5pY29kZVByb3BlcnR5TmFtZU9yVmFsdWUgOjoKICAvLyAgIFVuaWNvZGVQcm9wZXJ0eVZhbHVlQ2hhcmFjdGVycwogIHBwJDEucmVnZXhwX2VhdExvbmVVbmljb2RlUHJvcGVydHlOYW1lT3JWYWx1ZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICByZXR1cm4gdGhpcy5yZWdleHBfZWF0VW5pY29kZVByb3BlcnR5VmFsdWUoc3RhdGUpCiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtQ2hhcmFjdGVyQ2xhc3MKICBwcCQxLnJlZ2V4cF9lYXRDaGFyYWN0ZXJDbGFzcyA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICBpZiAoc3RhdGUuZWF0KDB4NUIgLyogWyAqLykpIHsKICAgICAgc3RhdGUuZWF0KDB4NUUgLyogXiAqLyk7CiAgICAgIHRoaXMucmVnZXhwX2NsYXNzUmFuZ2VzKHN0YXRlKTsKICAgICAgaWYgKHN0YXRlLmVhdCgweDVEIC8qIF0gKi8pKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICAvLyBVbnJlYWNoYWJsZSBzaW5jZSBpdCB0aHJldyAidW50ZXJtaW5hdGVkIHJlZ3VsYXIgZXhwcmVzc2lvbiIgZXJyb3IgYmVmb3JlLgogICAgICBzdGF0ZS5yYWlzZSgiVW50ZXJtaW5hdGVkIGNoYXJhY3RlciBjbGFzcyIpOwogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtQ2xhc3NSYW5nZXMKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1Ob25lbXB0eUNsYXNzUmFuZ2VzCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtTm9uZW1wdHlDbGFzc1Jhbmdlc05vRGFzaAogIHBwJDEucmVnZXhwX2NsYXNzUmFuZ2VzID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHdoaWxlICh0aGlzLnJlZ2V4cF9lYXRDbGFzc0F0b20oc3RhdGUpKSB7CiAgICAgIHZhciBsZWZ0ID0gc3RhdGUubGFzdEludFZhbHVlOwogICAgICBpZiAoc3RhdGUuZWF0KDB4MkQgLyogLSAqLykgJiYgdGhpcy5yZWdleHBfZWF0Q2xhc3NBdG9tKHN0YXRlKSkgewogICAgICAgIHZhciByaWdodCA9IHN0YXRlLmxhc3RJbnRWYWx1ZTsKICAgICAgICBpZiAoc3RhdGUuc3dpdGNoVSAmJiAobGVmdCA9PT0gLTEgfHwgcmlnaHQgPT09IC0xKSkgewogICAgICAgICAgc3RhdGUucmFpc2UoIkludmFsaWQgY2hhcmFjdGVyIGNsYXNzIik7CiAgICAgICAgfQogICAgICAgIGlmIChsZWZ0ICE9PSAtMSAmJiByaWdodCAhPT0gLTEgJiYgbGVmdCA+IHJpZ2h0KSB7CiAgICAgICAgICBzdGF0ZS5yYWlzZSgiUmFuZ2Ugb3V0IG9mIG9yZGVyIGluIGNoYXJhY3RlciBjbGFzcyIpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLUNsYXNzQXRvbQogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLUNsYXNzQXRvbU5vRGFzaAogIHBwJDEucmVnZXhwX2VhdENsYXNzQXRvbSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgc3RhcnQgPSBzdGF0ZS5wb3M7CgogICAgaWYgKHN0YXRlLmVhdCgweDVDIC8qIFwgKi8pKSB7CiAgICAgIGlmICh0aGlzLnJlZ2V4cF9lYXRDbGFzc0VzY2FwZShzdGF0ZSkpIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIGlmIChzdGF0ZS5zd2l0Y2hVKSB7CiAgICAgICAgLy8gTWFrZSB0aGUgc2FtZSBtZXNzYWdlIGFzIFY4LgogICAgICAgIHZhciBjaCQxID0gc3RhdGUuY3VycmVudCgpOwogICAgICAgIGlmIChjaCQxID09PSAweDYzIC8qIGMgKi8gfHwgaXNPY3RhbERpZ2l0KGNoJDEpKSB7CiAgICAgICAgICBzdGF0ZS5yYWlzZSgiSW52YWxpZCBjbGFzcyBlc2NhcGUiKTsKICAgICAgICB9CiAgICAgICAgc3RhdGUucmFpc2UoIkludmFsaWQgZXNjYXBlIik7CiAgICAgIH0KICAgICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICB9CgogICAgdmFyIGNoID0gc3RhdGUuY3VycmVudCgpOwogICAgaWYgKGNoICE9PSAweDVEIC8qIF0gKi8pIHsKICAgICAgc3RhdGUubGFzdEludFZhbHVlID0gY2g7CiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1hbm5leEItQ2xhc3NFc2NhcGUKICBwcCQxLnJlZ2V4cF9lYXRDbGFzc0VzY2FwZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgc3RhcnQgPSBzdGF0ZS5wb3M7CgogICAgaWYgKHN0YXRlLmVhdCgweDYyIC8qIGIgKi8pKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDB4MDg7IC8qIDxCUz4gKi8KICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICBpZiAoc3RhdGUuc3dpdGNoVSAmJiBzdGF0ZS5lYXQoMHgyRCAvKiAtICovKSkgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAweDJEOyAvKiAtICovCiAgICAgIHJldHVybiB0cnVlCiAgICB9CgogICAgaWYgKCFzdGF0ZS5zd2l0Y2hVICYmIHN0YXRlLmVhdCgweDYzIC8qIGMgKi8pKSB7CiAgICAgIGlmICh0aGlzLnJlZ2V4cF9lYXRDbGFzc0NvbnRyb2xMZXR0ZXIoc3RhdGUpKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgIH0KCiAgICByZXR1cm4gKAogICAgICB0aGlzLnJlZ2V4cF9lYXRDaGFyYWN0ZXJDbGFzc0VzY2FwZShzdGF0ZSkgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0Q2hhcmFjdGVyRXNjYXBlKHN0YXRlKQogICAgKQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLWFubmV4Qi1DbGFzc0NvbnRyb2xMZXR0ZXIKICBwcCQxLnJlZ2V4cF9lYXRDbGFzc0NvbnRyb2xMZXR0ZXIgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgdmFyIGNoID0gc3RhdGUuY3VycmVudCgpOwogICAgaWYgKGlzRGVjaW1hbERpZ2l0KGNoKSB8fCBjaCA9PT0gMHg1RiAvKiBfICovKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IGNoICUgMHgyMDsKICAgICAgc3RhdGUuYWR2YW5jZSgpOwogICAgICByZXR1cm4gdHJ1ZQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtSGV4RXNjYXBlU2VxdWVuY2UKICBwcCQxLnJlZ2V4cF9lYXRIZXhFc2NhcGVTZXF1ZW5jZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgc3RhcnQgPSBzdGF0ZS5wb3M7CiAgICBpZiAoc3RhdGUuZWF0KDB4NzggLyogeCAqLykpIHsKICAgICAgaWYgKHRoaXMucmVnZXhwX2VhdEZpeGVkSGV4RGlnaXRzKHN0YXRlLCAyKSkgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgaWYgKHN0YXRlLnN3aXRjaFUpIHsKICAgICAgICBzdGF0ZS5yYWlzZSgiSW52YWxpZCBlc2NhcGUiKTsKICAgICAgfQogICAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLURlY2ltYWxEaWdpdHMKICBwcCQxLnJlZ2V4cF9lYXREZWNpbWFsRGlnaXRzID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBzdGFydCA9IHN0YXRlLnBvczsKICAgIHZhciBjaCA9IDA7CiAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAwOwogICAgd2hpbGUgKGlzRGVjaW1hbERpZ2l0KGNoID0gc3RhdGUuY3VycmVudCgpKSkgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAxMCAqIHN0YXRlLmxhc3RJbnRWYWx1ZSArIChjaCAtIDB4MzAgLyogMCAqLyk7CiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgIH0KICAgIHJldHVybiBzdGF0ZS5wb3MgIT09IHN0YXJ0CiAgfTsKICBmdW5jdGlvbiBpc0RlY2ltYWxEaWdpdChjaCkgewogICAgcmV0dXJuIGNoID49IDB4MzAgLyogMCAqLyAmJiBjaCA8PSAweDM5IC8qIDkgKi8KICB9CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLUhleERpZ2l0cwogIHBwJDEucmVnZXhwX2VhdEhleERpZ2l0cyA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgc3RhcnQgPSBzdGF0ZS5wb3M7CiAgICB2YXIgY2ggPSAwOwogICAgc3RhdGUubGFzdEludFZhbHVlID0gMDsKICAgIHdoaWxlIChpc0hleERpZ2l0KGNoID0gc3RhdGUuY3VycmVudCgpKSkgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAxNiAqIHN0YXRlLmxhc3RJbnRWYWx1ZSArIGhleFRvSW50KGNoKTsKICAgICAgc3RhdGUuYWR2YW5jZSgpOwogICAgfQogICAgcmV0dXJuIHN0YXRlLnBvcyAhPT0gc3RhcnQKICB9OwogIGZ1bmN0aW9uIGlzSGV4RGlnaXQoY2gpIHsKICAgIHJldHVybiAoCiAgICAgIChjaCA+PSAweDMwIC8qIDAgKi8gJiYgY2ggPD0gMHgzOSAvKiA5ICovKSB8fAogICAgICAoY2ggPj0gMHg0MSAvKiBBICovICYmIGNoIDw9IDB4NDYgLyogRiAqLykgfHwKICAgICAgKGNoID49IDB4NjEgLyogYSAqLyAmJiBjaCA8PSAweDY2IC8qIGYgKi8pCiAgICApCiAgfQogIGZ1bmN0aW9uIGhleFRvSW50KGNoKSB7CiAgICBpZiAoY2ggPj0gMHg0MSAvKiBBICovICYmIGNoIDw9IDB4NDYgLyogRiAqLykgewogICAgICByZXR1cm4gMTAgKyAoY2ggLSAweDQxIC8qIEEgKi8pCiAgICB9CiAgICBpZiAoY2ggPj0gMHg2MSAvKiBhICovICYmIGNoIDw9IDB4NjYgLyogZiAqLykgewogICAgICByZXR1cm4gMTAgKyAoY2ggLSAweDYxIC8qIGEgKi8pCiAgICB9CiAgICByZXR1cm4gY2ggLSAweDMwIC8qIDAgKi8KICB9CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLWFubmV4Qi1MZWdhY3lPY3RhbEVzY2FwZVNlcXVlbmNlCiAgLy8gQWxsb3dzIG9ubHkgMC0zNzcob2N0YWwpIGkuZS4gMC0yNTUoZGVjaW1hbCkuCiAgcHAkMS5yZWdleHBfZWF0TGVnYWN5T2N0YWxFc2NhcGVTZXF1ZW5jZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICBpZiAodGhpcy5yZWdleHBfZWF0T2N0YWxEaWdpdChzdGF0ZSkpIHsKICAgICAgdmFyIG4xID0gc3RhdGUubGFzdEludFZhbHVlOwogICAgICBpZiAodGhpcy5yZWdleHBfZWF0T2N0YWxEaWdpdChzdGF0ZSkpIHsKICAgICAgICB2YXIgbjIgPSBzdGF0ZS5sYXN0SW50VmFsdWU7CiAgICAgICAgaWYgKG4xIDw9IDMgJiYgdGhpcy5yZWdleHBfZWF0T2N0YWxEaWdpdChzdGF0ZSkpIHsKICAgICAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IG4xICogNjQgKyBuMiAqIDggKyBzdGF0ZS5sYXN0SW50VmFsdWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IG4xICogOCArIG4yOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSBuMTsKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtT2N0YWxEaWdpdAogIHBwJDEucmVnZXhwX2VhdE9jdGFsRGlnaXQgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgdmFyIGNoID0gc3RhdGUuY3VycmVudCgpOwogICAgaWYgKGlzT2N0YWxEaWdpdChjaCkpIHsKICAgICAgc3RhdGUubGFzdEludFZhbHVlID0gY2ggLSAweDMwOyAvKiAwICovCiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDA7CiAgICByZXR1cm4gZmFsc2UKICB9OwogIGZ1bmN0aW9uIGlzT2N0YWxEaWdpdChjaCkgewogICAgcmV0dXJuIGNoID49IDB4MzAgLyogMCAqLyAmJiBjaCA8PSAweDM3IC8qIDcgKi8KICB9CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLUhleDREaWdpdHMKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1IZXhEaWdpdAogIC8vIEFuZCBIZXhEaWdpdCBIZXhEaWdpdCBpbiBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1IZXhFc2NhcGVTZXF1ZW5jZQogIHBwJDEucmVnZXhwX2VhdEZpeGVkSGV4RGlnaXRzID0gZnVuY3Rpb24oc3RhdGUsIGxlbmd0aCkgewogICAgdmFyIHN0YXJ0ID0gc3RhdGUucG9zOwogICAgc3RhdGUubGFzdEludFZhbHVlID0gMDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHsKICAgICAgdmFyIGNoID0gc3RhdGUuY3VycmVudCgpOwogICAgICBpZiAoIWlzSGV4RGlnaXQoY2gpKSB7CiAgICAgICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgc3RhdGUubGFzdEludFZhbHVlID0gMTYgKiBzdGF0ZS5sYXN0SW50VmFsdWUgKyBoZXhUb0ludChjaCk7CiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgIH0KICAgIHJldHVybiB0cnVlCiAgfTsKCiAgLy8gT2JqZWN0IHR5cGUgdXNlZCB0byByZXByZXNlbnQgdG9rZW5zLiBOb3RlIHRoYXQgbm9ybWFsbHksIHRva2VucwogIC8vIHNpbXBseSBleGlzdCBhcyBwcm9wZXJ0aWVzIG9uIHRoZSBwYXJzZXIgb2JqZWN0LiBUaGlzIGlzIG9ubHkKICAvLyB1c2VkIGZvciB0aGUgb25Ub2tlbiBjYWxsYmFjayBhbmQgdGhlIGV4dGVybmFsIHRva2VuaXplci4KCiAgdmFyIFRva2VuID0gZnVuY3Rpb24gVG9rZW4ocCkgewogICAgdGhpcy50eXBlID0gcC50eXBlOwogICAgdGhpcy52YWx1ZSA9IHAudmFsdWU7CiAgICB0aGlzLnN0YXJ0ID0gcC5zdGFydDsKICAgIHRoaXMuZW5kID0gcC5lbmQ7CiAgICBpZiAocC5vcHRpb25zLmxvY2F0aW9ucykKICAgICAgeyB0aGlzLmxvYyA9IG5ldyBTb3VyY2VMb2NhdGlvbihwLCBwLnN0YXJ0TG9jLCBwLmVuZExvYyk7IH0KICAgIGlmIChwLm9wdGlvbnMucmFuZ2VzKQogICAgICB7IHRoaXMucmFuZ2UgPSBbcC5zdGFydCwgcC5lbmRdOyB9CiAgfTsKCiAgLy8gIyMgVG9rZW5pemVyCgogIHZhciBwcCA9IFBhcnNlci5wcm90b3R5cGU7CgogIC8vIE1vdmUgdG8gdGhlIG5leHQgdG9rZW4KCiAgcHAubmV4dCA9IGZ1bmN0aW9uKGlnbm9yZUVzY2FwZVNlcXVlbmNlSW5LZXl3b3JkKSB7CiAgICBpZiAoIWlnbm9yZUVzY2FwZVNlcXVlbmNlSW5LZXl3b3JkICYmIHRoaXMudHlwZS5rZXl3b3JkICYmIHRoaXMuY29udGFpbnNFc2MpCiAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHRoaXMuc3RhcnQsICJFc2NhcGUgc2VxdWVuY2UgaW4ga2V5d29yZCAiICsgdGhpcy50eXBlLmtleXdvcmQpOyB9CiAgICBpZiAodGhpcy5vcHRpb25zLm9uVG9rZW4pCiAgICAgIHsgdGhpcy5vcHRpb25zLm9uVG9rZW4obmV3IFRva2VuKHRoaXMpKTsgfQoKICAgIHRoaXMubGFzdFRva0VuZCA9IHRoaXMuZW5kOwogICAgdGhpcy5sYXN0VG9rU3RhcnQgPSB0aGlzLnN0YXJ0OwogICAgdGhpcy5sYXN0VG9rRW5kTG9jID0gdGhpcy5lbmRMb2M7CiAgICB0aGlzLmxhc3RUb2tTdGFydExvYyA9IHRoaXMuc3RhcnRMb2M7CiAgICB0aGlzLm5leHRUb2tlbigpOwogIH07CgogIHBwLmdldFRva2VuID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLm5leHQoKTsKICAgIHJldHVybiBuZXcgVG9rZW4odGhpcykKICB9OwoKICAvLyBJZiB3ZSdyZSBpbiBhbiBFUzYgZW52aXJvbm1lbnQsIG1ha2UgcGFyc2VycyBpdGVyYWJsZQogIGlmICh0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIikKICAgIHsgcHBbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgdGhpcyQxJDEgPSB0aGlzOwoKICAgICAgcmV0dXJuIHsKICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgdG9rZW4gPSB0aGlzJDEkMS5nZXRUb2tlbigpOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZG9uZTogdG9rZW4udHlwZSA9PT0gdHlwZXMkMS5lb2YsCiAgICAgICAgICAgIHZhbHVlOiB0b2tlbgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsgfQoKICAvLyBUb2dnbGUgc3RyaWN0IG1vZGUuIFJlLXJlYWRzIHRoZSBuZXh0IG51bWJlciBvciBzdHJpbmcgdG8gcGxlYXNlCiAgLy8gcGVkYW50aWMgdGVzdHMgKGAidXNlIHN0cmljdCI7IDAxMDtgIHNob3VsZCBmYWlsKS4KCiAgLy8gUmVhZCBhIHNpbmdsZSB0b2tlbiwgdXBkYXRpbmcgdGhlIHBhcnNlciBvYmplY3QncyB0b2tlbi1yZWxhdGVkCiAgLy8gcHJvcGVydGllcy4KCiAgcHAubmV4dFRva2VuID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgY3VyQ29udGV4dCA9IHRoaXMuY3VyQ29udGV4dCgpOwogICAgaWYgKCFjdXJDb250ZXh0IHx8ICFjdXJDb250ZXh0LnByZXNlcnZlU3BhY2UpIHsgdGhpcy5za2lwU3BhY2UoKTsgfQoKICAgIHRoaXMuc3RhcnQgPSB0aGlzLnBvczsKICAgIGlmICh0aGlzLm9wdGlvbnMubG9jYXRpb25zKSB7IHRoaXMuc3RhcnRMb2MgPSB0aGlzLmN1clBvc2l0aW9uKCk7IH0KICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmlucHV0Lmxlbmd0aCkgeyByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLmVvZikgfQoKICAgIGlmIChjdXJDb250ZXh0Lm92ZXJyaWRlKSB7IHJldHVybiBjdXJDb250ZXh0Lm92ZXJyaWRlKHRoaXMpIH0KICAgIGVsc2UgeyB0aGlzLnJlYWRUb2tlbih0aGlzLmZ1bGxDaGFyQ29kZUF0UG9zKCkpOyB9CiAgfTsKCiAgcHAucmVhZFRva2VuID0gZnVuY3Rpb24oY29kZSkgewogICAgLy8gSWRlbnRpZmllciBvciBrZXl3b3JkLiAnXHVYWFhYJyBzZXF1ZW5jZXMgYXJlIGFsbG93ZWQgaW4KICAgIC8vIGlkZW50aWZpZXJzLCBzbyAnXCcgYWxzbyBkaXNwYXRjaGVzIHRvIHRoYXQuCiAgICBpZiAoaXNJZGVudGlmaWVyU3RhcnQoY29kZSwgdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpIHx8IGNvZGUgPT09IDkyIC8qICdcJyAqLykKICAgICAgeyByZXR1cm4gdGhpcy5yZWFkV29yZCgpIH0KCiAgICByZXR1cm4gdGhpcy5nZXRUb2tlbkZyb21Db2RlKGNvZGUpCiAgfTsKCiAgcHAuZnVsbENoYXJDb2RlQXRQb3MgPSBmdW5jdGlvbigpIHsKICAgIHZhciBjb2RlID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zKTsKICAgIGlmIChjb2RlIDw9IDB4ZDdmZiB8fCBjb2RlID49IDB4ZGMwMCkgeyByZXR1cm4gY29kZSB9CiAgICB2YXIgbmV4dCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDEpOwogICAgcmV0dXJuIG5leHQgPD0gMHhkYmZmIHx8IG5leHQgPj0gMHhlMDAwID8gY29kZSA6IChjb2RlIDw8IDEwKSArIG5leHQgLSAweDM1ZmRjMDAKICB9OwoKICBwcC5za2lwQmxvY2tDb21tZW50ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgc3RhcnRMb2MgPSB0aGlzLm9wdGlvbnMub25Db21tZW50ICYmIHRoaXMuY3VyUG9zaXRpb24oKTsKICAgIHZhciBzdGFydCA9IHRoaXMucG9zLCBlbmQgPSB0aGlzLmlucHV0LmluZGV4T2YoIiovIiwgdGhpcy5wb3MgKz0gMik7CiAgICBpZiAoZW5kID09PSAtMSkgeyB0aGlzLnJhaXNlKHRoaXMucG9zIC0gMiwgIlVudGVybWluYXRlZCBjb21tZW50Iik7IH0KICAgIHRoaXMucG9zID0gZW5kICsgMjsKICAgIGlmICh0aGlzLm9wdGlvbnMubG9jYXRpb25zKSB7CiAgICAgIGZvciAodmFyIG5leHRCcmVhayA9ICh2b2lkIDApLCBwb3MgPSBzdGFydDsgKG5leHRCcmVhayA9IG5leHRMaW5lQnJlYWsodGhpcy5pbnB1dCwgcG9zLCB0aGlzLnBvcykpID4gLTE7KSB7CiAgICAgICAgKyt0aGlzLmN1ckxpbmU7CiAgICAgICAgcG9zID0gdGhpcy5saW5lU3RhcnQgPSBuZXh0QnJlYWs7CiAgICAgIH0KICAgIH0KICAgIGlmICh0aGlzLm9wdGlvbnMub25Db21tZW50KQogICAgICB7IHRoaXMub3B0aW9ucy5vbkNvbW1lbnQodHJ1ZSwgdGhpcy5pbnB1dC5zbGljZShzdGFydCArIDIsIGVuZCksIHN0YXJ0LCB0aGlzLnBvcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydExvYywgdGhpcy5jdXJQb3NpdGlvbigpKTsgfQogIH07CgogIHBwLnNraXBMaW5lQ29tbWVudCA9IGZ1bmN0aW9uKHN0YXJ0U2tpcCkgewogICAgdmFyIHN0YXJ0ID0gdGhpcy5wb3M7CiAgICB2YXIgc3RhcnRMb2MgPSB0aGlzLm9wdGlvbnMub25Db21tZW50ICYmIHRoaXMuY3VyUG9zaXRpb24oKTsKICAgIHZhciBjaCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArPSBzdGFydFNraXApOwogICAgd2hpbGUgKHRoaXMucG9zIDwgdGhpcy5pbnB1dC5sZW5ndGggJiYgIWlzTmV3TGluZShjaCkpIHsKICAgICAgY2ggPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQoKyt0aGlzLnBvcyk7CiAgICB9CiAgICBpZiAodGhpcy5vcHRpb25zLm9uQ29tbWVudCkKICAgICAgeyB0aGlzLm9wdGlvbnMub25Db21tZW50KGZhbHNlLCB0aGlzLmlucHV0LnNsaWNlKHN0YXJ0ICsgc3RhcnRTa2lwLCB0aGlzLnBvcyksIHN0YXJ0LCB0aGlzLnBvcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydExvYywgdGhpcy5jdXJQb3NpdGlvbigpKTsgfQogIH07CgogIC8vIENhbGxlZCBhdCB0aGUgc3RhcnQgb2YgdGhlIHBhcnNlIGFuZCBhZnRlciBldmVyeSB0b2tlbi4gU2tpcHMKICAvLyB3aGl0ZXNwYWNlIGFuZCBjb21tZW50cywgYW5kLgoKICBwcC5za2lwU3BhY2UgPSBmdW5jdGlvbigpIHsKICAgIGxvb3A6IHdoaWxlICh0aGlzLnBvcyA8IHRoaXMuaW5wdXQubGVuZ3RoKSB7CiAgICAgIHZhciBjaCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyk7CiAgICAgIHN3aXRjaCAoY2gpIHsKICAgICAgY2FzZSAzMjogY2FzZSAxNjA6IC8vICcgJwogICAgICAgICsrdGhpcy5wb3M7CiAgICAgICAgYnJlYWsKICAgICAgY2FzZSAxMzoKICAgICAgICBpZiAodGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMSkgPT09IDEwKSB7CiAgICAgICAgICArK3RoaXMucG9zOwogICAgICAgIH0KICAgICAgY2FzZSAxMDogY2FzZSA4MjMyOiBjYXNlIDgyMzM6CiAgICAgICAgKyt0aGlzLnBvczsKICAgICAgICBpZiAodGhpcy5vcHRpb25zLmxvY2F0aW9ucykgewogICAgICAgICAgKyt0aGlzLmN1ckxpbmU7CiAgICAgICAgICB0aGlzLmxpbmVTdGFydCA9IHRoaXMucG9zOwogICAgICAgIH0KICAgICAgICBicmVhawogICAgICBjYXNlIDQ3OiAvLyAnLycKICAgICAgICBzd2l0Y2ggKHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDEpKSB7CiAgICAgICAgY2FzZSA0MjogLy8gJyonCiAgICAgICAgICB0aGlzLnNraXBCbG9ja0NvbW1lbnQoKTsKICAgICAgICAgIGJyZWFrCiAgICAgICAgY2FzZSA0NzoKICAgICAgICAgIHRoaXMuc2tpcExpbmVDb21tZW50KDIpOwogICAgICAgICAgYnJlYWsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWsgbG9vcAogICAgICAgIH0KICAgICAgICBicmVhawogICAgICBkZWZhdWx0OgogICAgICAgIGlmIChjaCA+IDggJiYgY2ggPCAxNCB8fCBjaCA+PSA1NzYwICYmIG5vbkFTQ0lJd2hpdGVzcGFjZS50ZXN0KFN0cmluZy5mcm9tQ2hhckNvZGUoY2gpKSkgewogICAgICAgICAgKyt0aGlzLnBvczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYnJlYWsgbG9vcAogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIENhbGxlZCBhdCB0aGUgZW5kIG9mIGV2ZXJ5IHRva2VuLiBTZXRzIGBlbmRgLCBgdmFsYCwgYW5kCiAgLy8gbWFpbnRhaW5zIGBjb250ZXh0YCBhbmQgYGV4cHJBbGxvd2VkYCwgYW5kIHNraXBzIHRoZSBzcGFjZSBhZnRlcgogIC8vIHRoZSB0b2tlbiwgc28gdGhhdCB0aGUgbmV4dCBvbmUncyBgc3RhcnRgIHdpbGwgcG9pbnQgYXQgdGhlCiAgLy8gcmlnaHQgcG9zaXRpb24uCgogIHBwLmZpbmlzaFRva2VuID0gZnVuY3Rpb24odHlwZSwgdmFsKSB7CiAgICB0aGlzLmVuZCA9IHRoaXMucG9zOwogICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpIHsgdGhpcy5lbmRMb2MgPSB0aGlzLmN1clBvc2l0aW9uKCk7IH0KICAgIHZhciBwcmV2VHlwZSA9IHRoaXMudHlwZTsKICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICB0aGlzLnZhbHVlID0gdmFsOwoKICAgIHRoaXMudXBkYXRlQ29udGV4dChwcmV2VHlwZSk7CiAgfTsKCiAgLy8gIyMjIFRva2VuIHJlYWRpbmcKCiAgLy8gVGhpcyBpcyB0aGUgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgdG8gZmV0Y2ggdGhlIG5leHQgdG9rZW4uIEl0CiAgLy8gaXMgc29tZXdoYXQgb2JzY3VyZSwgYmVjYXVzZSBpdCB3b3JrcyBpbiBjaGFyYWN0ZXIgY29kZXMgcmF0aGVyCiAgLy8gdGhhbiBjaGFyYWN0ZXJzLCBhbmQgYmVjYXVzZSBvcGVyYXRvciBwYXJzaW5nIGhhcyBiZWVuIGlubGluZWQKICAvLyBpbnRvIGl0LgogIC8vCiAgLy8gQWxsIGluIHRoZSBuYW1lIG9mIHNwZWVkLgogIC8vCiAgcHAucmVhZFRva2VuX2RvdCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG5leHQgPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MgKyAxKTsKICAgIGlmIChuZXh0ID49IDQ4ICYmIG5leHQgPD0gNTcpIHsgcmV0dXJuIHRoaXMucmVhZE51bWJlcih0cnVlKSB9CiAgICB2YXIgbmV4dDIgPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MgKyAyKTsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNiAmJiBuZXh0ID09PSA0NiAmJiBuZXh0MiA9PT0gNDYpIHsgLy8gNDYgPSBkb3QgJy4nCiAgICAgIHRoaXMucG9zICs9IDM7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEuZWxsaXBzaXMpCiAgICB9IGVsc2UgewogICAgICArK3RoaXMucG9zOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLmRvdCkKICAgIH0KICB9OwoKICBwcC5yZWFkVG9rZW5fc2xhc2ggPSBmdW5jdGlvbigpIHsgLy8gJy8nCiAgICB2YXIgbmV4dCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDEpOwogICAgaWYgKHRoaXMuZXhwckFsbG93ZWQpIHsgKyt0aGlzLnBvczsgcmV0dXJuIHRoaXMucmVhZFJlZ2V4cCgpIH0KICAgIGlmIChuZXh0ID09PSA2MSkgeyByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLmFzc2lnbiwgMikgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoT3AodHlwZXMkMS5zbGFzaCwgMSkKICB9OwoKICBwcC5yZWFkVG9rZW5fbXVsdF9tb2R1bG9fZXhwID0gZnVuY3Rpb24oY29kZSkgeyAvLyAnJSonCiAgICB2YXIgbmV4dCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDEpOwogICAgdmFyIHNpemUgPSAxOwogICAgdmFyIHRva2VudHlwZSA9IGNvZGUgPT09IDQyID8gdHlwZXMkMS5zdGFyIDogdHlwZXMkMS5tb2R1bG87CgogICAgLy8gZXhwb25lbnRpYXRpb24gb3BlcmF0b3IgKiogYW5kICoqPQogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA3ICYmIGNvZGUgPT09IDQyICYmIG5leHQgPT09IDQyKSB7CiAgICAgICsrc2l6ZTsKICAgICAgdG9rZW50eXBlID0gdHlwZXMkMS5zdGFyc3RhcjsKICAgICAgbmV4dCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDIpOwogICAgfQoKICAgIGlmIChuZXh0ID09PSA2MSkgeyByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLmFzc2lnbiwgc2l6ZSArIDEpIH0KICAgIHJldHVybiB0aGlzLmZpbmlzaE9wKHRva2VudHlwZSwgc2l6ZSkKICB9OwoKICBwcC5yZWFkVG9rZW5fcGlwZV9hbXAgPSBmdW5jdGlvbihjb2RlKSB7IC8vICd8JicKICAgIHZhciBuZXh0ID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMSk7CiAgICBpZiAobmV4dCA9PT0gY29kZSkgewogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDEyKSB7CiAgICAgICAgdmFyIG5leHQyID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMik7CiAgICAgICAgaWYgKG5leHQyID09PSA2MSkgeyByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLmFzc2lnbiwgMykgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE9wKGNvZGUgPT09IDEyNCA/IHR5cGVzJDEubG9naWNhbE9SIDogdHlwZXMkMS5sb2dpY2FsQU5ELCAyKQogICAgfQogICAgaWYgKG5leHQgPT09IDYxKSB7IHJldHVybiB0aGlzLmZpbmlzaE9wKHR5cGVzJDEuYXNzaWduLCAyKSB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hPcChjb2RlID09PSAxMjQgPyB0eXBlcyQxLmJpdHdpc2VPUiA6IHR5cGVzJDEuYml0d2lzZUFORCwgMSkKICB9OwoKICBwcC5yZWFkVG9rZW5fY2FyZXQgPSBmdW5jdGlvbigpIHsgLy8gJ14nCiAgICB2YXIgbmV4dCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDEpOwogICAgaWYgKG5leHQgPT09IDYxKSB7IHJldHVybiB0aGlzLmZpbmlzaE9wKHR5cGVzJDEuYXNzaWduLCAyKSB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLmJpdHdpc2VYT1IsIDEpCiAgfTsKCiAgcHAucmVhZFRva2VuX3BsdXNfbWluID0gZnVuY3Rpb24oY29kZSkgeyAvLyAnKy0nCiAgICB2YXIgbmV4dCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDEpOwogICAgaWYgKG5leHQgPT09IGNvZGUpIHsKICAgICAgaWYgKG5leHQgPT09IDQ1ICYmICF0aGlzLmluTW9kdWxlICYmIHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDIpID09PSA2MiAmJgogICAgICAgICAgKHRoaXMubGFzdFRva0VuZCA9PT0gMCB8fCBsaW5lQnJlYWsudGVzdCh0aGlzLmlucHV0LnNsaWNlKHRoaXMubGFzdFRva0VuZCwgdGhpcy5wb3MpKSkpIHsKICAgICAgICAvLyBBIGAtLT5gIGxpbmUgY29tbWVudAogICAgICAgIHRoaXMuc2tpcExpbmVDb21tZW50KDMpOwogICAgICAgIHRoaXMuc2tpcFNwYWNlKCk7CiAgICAgICAgcmV0dXJuIHRoaXMubmV4dFRva2VuKCkKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLmluY0RlYywgMikKICAgIH0KICAgIGlmIChuZXh0ID09PSA2MSkgeyByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLmFzc2lnbiwgMikgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoT3AodHlwZXMkMS5wbHVzTWluLCAxKQogIH07CgogIHBwLnJlYWRUb2tlbl9sdF9ndCA9IGZ1bmN0aW9uKGNvZGUpIHsgLy8gJzw+JwogICAgdmFyIG5leHQgPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MgKyAxKTsKICAgIHZhciBzaXplID0gMTsKICAgIGlmIChuZXh0ID09PSBjb2RlKSB7CiAgICAgIHNpemUgPSBjb2RlID09PSA2MiAmJiB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MgKyAyKSA9PT0gNjIgPyAzIDogMjsKICAgICAgaWYgKHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIHNpemUpID09PSA2MSkgeyByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLmFzc2lnbiwgc2l6ZSArIDEpIH0KICAgICAgcmV0dXJuIHRoaXMuZmluaXNoT3AodHlwZXMkMS5iaXRTaGlmdCwgc2l6ZSkKICAgIH0KICAgIGlmIChuZXh0ID09PSAzMyAmJiBjb2RlID09PSA2MCAmJiAhdGhpcy5pbk1vZHVsZSAmJiB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MgKyAyKSA9PT0gNDUgJiYKICAgICAgICB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MgKyAzKSA9PT0gNDUpIHsKICAgICAgLy8gYDwhLS1gLCBhbiBYTUwtc3R5bGUgY29tbWVudCB0aGF0IHNob3VsZCBiZSBpbnRlcnByZXRlZCBhcyBhIGxpbmUgY29tbWVudAogICAgICB0aGlzLnNraXBMaW5lQ29tbWVudCg0KTsKICAgICAgdGhpcy5za2lwU3BhY2UoKTsKICAgICAgcmV0dXJuIHRoaXMubmV4dFRva2VuKCkKICAgIH0KICAgIGlmIChuZXh0ID09PSA2MSkgeyBzaXplID0gMjsgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoT3AodHlwZXMkMS5yZWxhdGlvbmFsLCBzaXplKQogIH07CgogIHBwLnJlYWRUb2tlbl9lcV9leGNsID0gZnVuY3Rpb24oY29kZSkgeyAvLyAnPSEnCiAgICB2YXIgbmV4dCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDEpOwogICAgaWYgKG5leHQgPT09IDYxKSB7IHJldHVybiB0aGlzLmZpbmlzaE9wKHR5cGVzJDEuZXF1YWxpdHksIHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDIpID09PSA2MSA/IDMgOiAyKSB9CiAgICBpZiAoY29kZSA9PT0gNjEgJiYgbmV4dCA9PT0gNjIgJiYgdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpIHsgLy8gJz0+JwogICAgICB0aGlzLnBvcyArPSAyOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLmFycm93KQogICAgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoT3AoY29kZSA9PT0gNjEgPyB0eXBlcyQxLmVxIDogdHlwZXMkMS5wcmVmaXgsIDEpCiAgfTsKCiAgcHAucmVhZFRva2VuX3F1ZXN0aW9uID0gZnVuY3Rpb24oKSB7IC8vICc/JwogICAgdmFyIGVjbWFWZXJzaW9uID0gdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uOwogICAgaWYgKGVjbWFWZXJzaW9uID49IDExKSB7CiAgICAgIHZhciBuZXh0ID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMSk7CiAgICAgIGlmIChuZXh0ID09PSA0NikgewogICAgICAgIHZhciBuZXh0MiA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDIpOwogICAgICAgIGlmIChuZXh0MiA8IDQ4IHx8IG5leHQyID4gNTcpIHsgcmV0dXJuIHRoaXMuZmluaXNoT3AodHlwZXMkMS5xdWVzdGlvbkRvdCwgMikgfQogICAgICB9CiAgICAgIGlmIChuZXh0ID09PSA2MykgewogICAgICAgIGlmIChlY21hVmVyc2lvbiA+PSAxMikgewogICAgICAgICAgdmFyIG5leHQyJDEgPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MgKyAyKTsKICAgICAgICAgIGlmIChuZXh0MiQxID09PSA2MSkgeyByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLmFzc2lnbiwgMykgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLmNvYWxlc2NlLCAyKQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLnF1ZXN0aW9uLCAxKQogIH07CgogIHBwLnJlYWRUb2tlbl9udW1iZXJTaWduID0gZnVuY3Rpb24oKSB7IC8vICcjJwogICAgdmFyIGVjbWFWZXJzaW9uID0gdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uOwogICAgdmFyIGNvZGUgPSAzNTsgLy8gJyMnCiAgICBpZiAoZWNtYVZlcnNpb24gPj0gMTMpIHsKICAgICAgKyt0aGlzLnBvczsKICAgICAgY29kZSA9IHRoaXMuZnVsbENoYXJDb2RlQXRQb3MoKTsKICAgICAgaWYgKGlzSWRlbnRpZmllclN0YXJ0KGNvZGUsIHRydWUpIHx8IGNvZGUgPT09IDkyIC8qICdcJyAqLykgewogICAgICAgIHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEucHJpdmF0ZUlkLCB0aGlzLnJlYWRXb3JkMSgpKQogICAgICB9CiAgICB9CgogICAgdGhpcy5yYWlzZSh0aGlzLnBvcywgIlVuZXhwZWN0ZWQgY2hhcmFjdGVyICciICsgY29kZVBvaW50VG9TdHJpbmcoY29kZSkgKyAiJyIpOwogIH07CgogIHBwLmdldFRva2VuRnJvbUNvZGUgPSBmdW5jdGlvbihjb2RlKSB7CiAgICBzd2l0Y2ggKGNvZGUpIHsKICAgIC8vIFRoZSBpbnRlcnByZXRhdGlvbiBvZiBhIGRvdCBkZXBlbmRzIG9uIHdoZXRoZXIgaXQgaXMgZm9sbG93ZWQKICAgIC8vIGJ5IGEgZGlnaXQgb3IgYW5vdGhlciB0d28gZG90cy4KICAgIGNhc2UgNDY6IC8vICcuJwogICAgICByZXR1cm4gdGhpcy5yZWFkVG9rZW5fZG90KCkKCiAgICAvLyBQdW5jdHVhdGlvbiB0b2tlbnMuCiAgICBjYXNlIDQwOiArK3RoaXMucG9zOyByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLnBhcmVuTCkKICAgIGNhc2UgNDE6ICsrdGhpcy5wb3M7IHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEucGFyZW5SKQogICAgY2FzZSA1OTogKyt0aGlzLnBvczsgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZXMkMS5zZW1pKQogICAgY2FzZSA0NDogKyt0aGlzLnBvczsgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZXMkMS5jb21tYSkKICAgIGNhc2UgOTE6ICsrdGhpcy5wb3M7IHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEuYnJhY2tldEwpCiAgICBjYXNlIDkzOiArK3RoaXMucG9zOyByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLmJyYWNrZXRSKQogICAgY2FzZSAxMjM6ICsrdGhpcy5wb3M7IHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEuYnJhY2VMKQogICAgY2FzZSAxMjU6ICsrdGhpcy5wb3M7IHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEuYnJhY2VSKQogICAgY2FzZSA1ODogKyt0aGlzLnBvczsgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZXMkMS5jb2xvbikKCiAgICBjYXNlIDk2OiAvLyAnYCcKICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA8IDYpIHsgYnJlYWsgfQogICAgICArK3RoaXMucG9zOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLmJhY2tRdW90ZSkKCiAgICBjYXNlIDQ4OiAvLyAnMCcKICAgICAgdmFyIG5leHQgPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MgKyAxKTsKICAgICAgaWYgKG5leHQgPT09IDEyMCB8fCBuZXh0ID09PSA4OCkgeyByZXR1cm4gdGhpcy5yZWFkUmFkaXhOdW1iZXIoMTYpIH0gLy8gJzB4JywgJzBYJyAtIGhleCBudW1iZXIKICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2KSB7CiAgICAgICAgaWYgKG5leHQgPT09IDExMSB8fCBuZXh0ID09PSA3OSkgeyByZXR1cm4gdGhpcy5yZWFkUmFkaXhOdW1iZXIoOCkgfSAvLyAnMG8nLCAnME8nIC0gb2N0YWwgbnVtYmVyCiAgICAgICAgaWYgKG5leHQgPT09IDk4IHx8IG5leHQgPT09IDY2KSB7IHJldHVybiB0aGlzLnJlYWRSYWRpeE51bWJlcigyKSB9IC8vICcwYicsICcwQicgLSBiaW5hcnkgbnVtYmVyCiAgICAgIH0KCiAgICAvLyBBbnl0aGluZyBlbHNlIGJlZ2lubmluZyB3aXRoIGEgZGlnaXQgaXMgYW4gaW50ZWdlciwgb2N0YWwKICAgIC8vIG51bWJlciwgb3IgZmxvYXQuCiAgICBjYXNlIDQ5OiBjYXNlIDUwOiBjYXNlIDUxOiBjYXNlIDUyOiBjYXNlIDUzOiBjYXNlIDU0OiBjYXNlIDU1OiBjYXNlIDU2OiBjYXNlIDU3OiAvLyAxLTkKICAgICAgcmV0dXJuIHRoaXMucmVhZE51bWJlcihmYWxzZSkKCiAgICAvLyBRdW90ZXMgcHJvZHVjZSBzdHJpbmdzLgogICAgY2FzZSAzNDogY2FzZSAzOTogLy8gJyInLCAiJyIKICAgICAgcmV0dXJuIHRoaXMucmVhZFN0cmluZyhjb2RlKQoKICAgIC8vIE9wZXJhdG9ycyBhcmUgcGFyc2VkIGlubGluZSBpbiB0aW55IHN0YXRlIG1hY2hpbmVzLiAnPScgKDYxKSBpcwogICAgLy8gb2Z0ZW4gcmVmZXJyZWQgdG8uIGBmaW5pc2hPcGAgc2ltcGx5IHNraXBzIHRoZSBhbW91bnQgb2YKICAgIC8vIGNoYXJhY3RlcnMgaXQgaXMgZ2l2ZW4gYXMgc2Vjb25kIGFyZ3VtZW50LCBhbmQgcmV0dXJucyBhIHRva2VuCiAgICAvLyBvZiB0aGUgdHlwZSBnaXZlbiBieSBpdHMgZmlyc3QgYXJndW1lbnQuCiAgICBjYXNlIDQ3OiAvLyAnLycKICAgICAgcmV0dXJuIHRoaXMucmVhZFRva2VuX3NsYXNoKCkKCiAgICBjYXNlIDM3OiBjYXNlIDQyOiAvLyAnJSonCiAgICAgIHJldHVybiB0aGlzLnJlYWRUb2tlbl9tdWx0X21vZHVsb19leHAoY29kZSkKCiAgICBjYXNlIDEyNDogY2FzZSAzODogLy8gJ3wmJwogICAgICByZXR1cm4gdGhpcy5yZWFkVG9rZW5fcGlwZV9hbXAoY29kZSkKCiAgICBjYXNlIDk0OiAvLyAnXicKICAgICAgcmV0dXJuIHRoaXMucmVhZFRva2VuX2NhcmV0KCkKCiAgICBjYXNlIDQzOiBjYXNlIDQ1OiAvLyAnKy0nCiAgICAgIHJldHVybiB0aGlzLnJlYWRUb2tlbl9wbHVzX21pbihjb2RlKQoKICAgIGNhc2UgNjA6IGNhc2UgNjI6IC8vICc8PicKICAgICAgcmV0dXJuIHRoaXMucmVhZFRva2VuX2x0X2d0KGNvZGUpCgogICAgY2FzZSA2MTogY2FzZSAzMzogLy8gJz0hJwogICAgICByZXR1cm4gdGhpcy5yZWFkVG9rZW5fZXFfZXhjbChjb2RlKQoKICAgIGNhc2UgNjM6IC8vICc/JwogICAgICByZXR1cm4gdGhpcy5yZWFkVG9rZW5fcXVlc3Rpb24oKQoKICAgIGNhc2UgMTI2OiAvLyAnficKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoT3AodHlwZXMkMS5wcmVmaXgsIDEpCgogICAgY2FzZSAzNTogLy8gJyMnCiAgICAgIHJldHVybiB0aGlzLnJlYWRUb2tlbl9udW1iZXJTaWduKCkKICAgIH0KCiAgICB0aGlzLnJhaXNlKHRoaXMucG9zLCAiVW5leHBlY3RlZCBjaGFyYWN0ZXIgJyIgKyBjb2RlUG9pbnRUb1N0cmluZyhjb2RlKSArICInIik7CiAgfTsKCiAgcHAuZmluaXNoT3AgPSBmdW5jdGlvbih0eXBlLCBzaXplKSB7CiAgICB2YXIgc3RyID0gdGhpcy5pbnB1dC5zbGljZSh0aGlzLnBvcywgdGhpcy5wb3MgKyBzaXplKTsKICAgIHRoaXMucG9zICs9IHNpemU7CiAgICByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlLCBzdHIpCiAgfTsKCiAgcHAucmVhZFJlZ2V4cCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGVzY2FwZWQsIGluQ2xhc3MsIHN0YXJ0ID0gdGhpcy5wb3M7CiAgICBmb3IgKDs7KSB7CiAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmlucHV0Lmxlbmd0aCkgeyB0aGlzLnJhaXNlKHN0YXJ0LCAiVW50ZXJtaW5hdGVkIHJlZ3VsYXIgZXhwcmVzc2lvbiIpOyB9CiAgICAgIHZhciBjaCA9IHRoaXMuaW5wdXQuY2hhckF0KHRoaXMucG9zKTsKICAgICAgaWYgKGxpbmVCcmVhay50ZXN0KGNoKSkgeyB0aGlzLnJhaXNlKHN0YXJ0LCAiVW50ZXJtaW5hdGVkIHJlZ3VsYXIgZXhwcmVzc2lvbiIpOyB9CiAgICAgIGlmICghZXNjYXBlZCkgewogICAgICAgIGlmIChjaCA9PT0gIlsiKSB7IGluQ2xhc3MgPSB0cnVlOyB9CiAgICAgICAgZWxzZSBpZiAoY2ggPT09ICJdIiAmJiBpbkNsYXNzKSB7IGluQ2xhc3MgPSBmYWxzZTsgfQogICAgICAgIGVsc2UgaWYgKGNoID09PSAiLyIgJiYgIWluQ2xhc3MpIHsgYnJlYWsgfQogICAgICAgIGVzY2FwZWQgPSBjaCA9PT0gIlxcIjsKICAgICAgfSBlbHNlIHsgZXNjYXBlZCA9IGZhbHNlOyB9CiAgICAgICsrdGhpcy5wb3M7CiAgICB9CiAgICB2YXIgcGF0dGVybiA9IHRoaXMuaW5wdXQuc2xpY2Uoc3RhcnQsIHRoaXMucG9zKTsKICAgICsrdGhpcy5wb3M7CiAgICB2YXIgZmxhZ3NTdGFydCA9IHRoaXMucG9zOwogICAgdmFyIGZsYWdzID0gdGhpcy5yZWFkV29yZDEoKTsKICAgIGlmICh0aGlzLmNvbnRhaW5zRXNjKSB7IHRoaXMudW5leHBlY3RlZChmbGFnc1N0YXJ0KTsgfQoKICAgIC8vIFZhbGlkYXRlIHBhdHRlcm4KICAgIHZhciBzdGF0ZSA9IHRoaXMucmVnZXhwU3RhdGUgfHwgKHRoaXMucmVnZXhwU3RhdGUgPSBuZXcgUmVnRXhwVmFsaWRhdGlvblN0YXRlKHRoaXMpKTsKICAgIHN0YXRlLnJlc2V0KHN0YXJ0LCBwYXR0ZXJuLCBmbGFncyk7CiAgICB0aGlzLnZhbGlkYXRlUmVnRXhwRmxhZ3Moc3RhdGUpOwogICAgdGhpcy52YWxpZGF0ZVJlZ0V4cFBhdHRlcm4oc3RhdGUpOwoKICAgIC8vIENyZWF0ZSBMaXRlcmFsI3ZhbHVlIHByb3BlcnR5IHZhbHVlLgogICAgdmFyIHZhbHVlID0gbnVsbDsKICAgIHRyeSB7CiAgICAgIHZhbHVlID0gbmV3IFJlZ0V4cChwYXR0ZXJuLCBmbGFncyk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIC8vIEVTVHJlZSByZXF1aXJlcyBudWxsIGlmIGl0IGZhaWxlZCB0byBpbnN0YW50aWF0ZSBSZWdFeHAgb2JqZWN0LgogICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZXN0cmVlL2VzdHJlZS9ibG9iL2EyNzAwM2FkZjRmZDdiZmFkNDRkZTljZWYzNzJhMmVhY2Q1MjdiMWMvZXM1Lm1kI3JlZ2V4cGxpdGVyYWwKICAgIH0KCiAgICByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLnJlZ2V4cCwge3BhdHRlcm46IHBhdHRlcm4sIGZsYWdzOiBmbGFncywgdmFsdWU6IHZhbHVlfSkKICB9OwoKICAvLyBSZWFkIGFuIGludGVnZXIgaW4gdGhlIGdpdmVuIHJhZGl4LiBSZXR1cm4gbnVsbCBpZiB6ZXJvIGRpZ2l0cwogIC8vIHdlcmUgcmVhZCwgdGhlIGludGVnZXIgdmFsdWUgb3RoZXJ3aXNlLiBXaGVuIGBsZW5gIGlzIGdpdmVuLCB0aGlzCiAgLy8gd2lsbCByZXR1cm4gYG51bGxgIHVubGVzcyB0aGUgaW50ZWdlciBoYXMgZXhhY3RseSBgbGVuYCBkaWdpdHMuCgogIHBwLnJlYWRJbnQgPSBmdW5jdGlvbihyYWRpeCwgbGVuLCBtYXliZUxlZ2FjeU9jdGFsTnVtZXJpY0xpdGVyYWwpIHsKICAgIC8vIGBsZW5gIGlzIHVzZWQgZm9yIGNoYXJhY3RlciBlc2NhcGUgc2VxdWVuY2VzLiBJbiB0aGF0IGNhc2UsIGRpc2FsbG93IHNlcGFyYXRvcnMuCiAgICB2YXIgYWxsb3dTZXBhcmF0b3JzID0gdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDEyICYmIGxlbiA9PT0gdW5kZWZpbmVkOwoKICAgIC8vIGBtYXliZUxlZ2FjeU9jdGFsTnVtZXJpY0xpdGVyYWxgIGlzIHRydWUgaWYgaXQgZG9lc24ndCBoYXZlIHByZWZpeCAoMHgsMG8sMGIpCiAgICAvLyBhbmQgaXNuJ3QgZnJhY3Rpb24gcGFydCBub3IgZXhwb25lbnQgcGFydC4gSW4gdGhhdCBjYXNlLCBpZiB0aGUgZmlyc3QgZGlnaXQKICAgIC8vIGlzIHplcm8gdGhlbiBkaXNhbGxvdyBzZXBhcmF0b3JzLgogICAgdmFyIGlzTGVnYWN5T2N0YWxOdW1lcmljTGl0ZXJhbCA9IG1heWJlTGVnYWN5T2N0YWxOdW1lcmljTGl0ZXJhbCAmJiB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MpID09PSA0ODsKCiAgICB2YXIgc3RhcnQgPSB0aGlzLnBvcywgdG90YWwgPSAwLCBsYXN0Q29kZSA9IDA7CiAgICBmb3IgKHZhciBpID0gMCwgZSA9IGxlbiA9PSBudWxsID8gSW5maW5pdHkgOiBsZW47IGkgPCBlOyArK2ksICsrdGhpcy5wb3MpIHsKICAgICAgdmFyIGNvZGUgPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MpLCB2YWwgPSAodm9pZCAwKTsKCiAgICAgIGlmIChhbGxvd1NlcGFyYXRvcnMgJiYgY29kZSA9PT0gOTUpIHsKICAgICAgICBpZiAoaXNMZWdhY3lPY3RhbE51bWVyaWNMaXRlcmFsKSB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZSh0aGlzLnBvcywgIk51bWVyaWMgc2VwYXJhdG9yIGlzIG5vdCBhbGxvd2VkIGluIGxlZ2FjeSBvY3RhbCBudW1lcmljIGxpdGVyYWxzIik7IH0KICAgICAgICBpZiAobGFzdENvZGUgPT09IDk1KSB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZSh0aGlzLnBvcywgIk51bWVyaWMgc2VwYXJhdG9yIG11c3QgYmUgZXhhY3RseSBvbmUgdW5kZXJzY29yZSIpOyB9CiAgICAgICAgaWYgKGkgPT09IDApIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHRoaXMucG9zLCAiTnVtZXJpYyBzZXBhcmF0b3IgaXMgbm90IGFsbG93ZWQgYXQgdGhlIGZpcnN0IG9mIGRpZ2l0cyIpOyB9CiAgICAgICAgbGFzdENvZGUgPSBjb2RlOwogICAgICAgIGNvbnRpbnVlCiAgICAgIH0KCiAgICAgIGlmIChjb2RlID49IDk3KSB7IHZhbCA9IGNvZGUgLSA5NyArIDEwOyB9IC8vIGEKICAgICAgZWxzZSBpZiAoY29kZSA+PSA2NSkgeyB2YWwgPSBjb2RlIC0gNjUgKyAxMDsgfSAvLyBBCiAgICAgIGVsc2UgaWYgKGNvZGUgPj0gNDggJiYgY29kZSA8PSA1NykgeyB2YWwgPSBjb2RlIC0gNDg7IH0gLy8gMC05CiAgICAgIGVsc2UgeyB2YWwgPSBJbmZpbml0eTsgfQogICAgICBpZiAodmFsID49IHJhZGl4KSB7IGJyZWFrIH0KICAgICAgbGFzdENvZGUgPSBjb2RlOwogICAgICB0b3RhbCA9IHRvdGFsICogcmFkaXggKyB2YWw7CiAgICB9CgogICAgaWYgKGFsbG93U2VwYXJhdG9ycyAmJiBsYXN0Q29kZSA9PT0gOTUpIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHRoaXMucG9zIC0gMSwgIk51bWVyaWMgc2VwYXJhdG9yIGlzIG5vdCBhbGxvd2VkIGF0IHRoZSBsYXN0IG9mIGRpZ2l0cyIpOyB9CiAgICBpZiAodGhpcy5wb3MgPT09IHN0YXJ0IHx8IGxlbiAhPSBudWxsICYmIHRoaXMucG9zIC0gc3RhcnQgIT09IGxlbikgeyByZXR1cm4gbnVsbCB9CgogICAgcmV0dXJuIHRvdGFsCiAgfTsKCiAgZnVuY3Rpb24gc3RyaW5nVG9OdW1iZXIoc3RyLCBpc0xlZ2FjeU9jdGFsTnVtZXJpY0xpdGVyYWwpIHsKICAgIGlmIChpc0xlZ2FjeU9jdGFsTnVtZXJpY0xpdGVyYWwpIHsKICAgICAgcmV0dXJuIHBhcnNlSW50KHN0ciwgOCkKICAgIH0KCiAgICAvLyBgcGFyc2VGbG9hdCh2YWx1ZSlgIHN0b3BzIHBhcnNpbmcgYXQgdGhlIGZpcnN0IG51bWVyaWMgc2VwYXJhdG9yIHRoZW4gcmV0dXJucyBhIHdyb25nIHZhbHVlLgogICAgcmV0dXJuIHBhcnNlRmxvYXQoc3RyLnJlcGxhY2UoL18vZywgIiIpKQogIH0KCiAgZnVuY3Rpb24gc3RyaW5nVG9CaWdJbnQoc3RyKSB7CiAgICBpZiAodHlwZW9mIEJpZ0ludCAhPT0gImZ1bmN0aW9uIikgewogICAgICByZXR1cm4gbnVsbAogICAgfQoKICAgIC8vIGBCaWdJbnQodmFsdWUpYCB0aHJvd3Mgc3ludGF4IGVycm9yIGlmIHRoZSBzdHJpbmcgY29udGFpbnMgbnVtZXJpYyBzZXBhcmF0b3JzLgogICAgcmV0dXJuIEJpZ0ludChzdHIucmVwbGFjZSgvXy9nLCAiIikpCiAgfQoKICBwcC5yZWFkUmFkaXhOdW1iZXIgPSBmdW5jdGlvbihyYWRpeCkgewogICAgdmFyIHN0YXJ0ID0gdGhpcy5wb3M7CiAgICB0aGlzLnBvcyArPSAyOyAvLyAweAogICAgdmFyIHZhbCA9IHRoaXMucmVhZEludChyYWRpeCk7CiAgICBpZiAodmFsID09IG51bGwpIHsgdGhpcy5yYWlzZSh0aGlzLnN0YXJ0ICsgMiwgIkV4cGVjdGVkIG51bWJlciBpbiByYWRpeCAiICsgcmFkaXgpOyB9CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDExICYmIHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcykgPT09IDExMCkgewogICAgICB2YWwgPSBzdHJpbmdUb0JpZ0ludCh0aGlzLmlucHV0LnNsaWNlKHN0YXJ0LCB0aGlzLnBvcykpOwogICAgICArK3RoaXMucG9zOwogICAgfSBlbHNlIGlmIChpc0lkZW50aWZpZXJTdGFydCh0aGlzLmZ1bGxDaGFyQ29kZUF0UG9zKCkpKSB7IHRoaXMucmFpc2UodGhpcy5wb3MsICJJZGVudGlmaWVyIGRpcmVjdGx5IGFmdGVyIG51bWJlciIpOyB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLm51bSwgdmFsKQogIH07CgogIC8vIFJlYWQgYW4gaW50ZWdlciwgb2N0YWwgaW50ZWdlciwgb3IgZmxvYXRpbmctcG9pbnQgbnVtYmVyLgoKICBwcC5yZWFkTnVtYmVyID0gZnVuY3Rpb24oc3RhcnRzV2l0aERvdCkgewogICAgdmFyIHN0YXJ0ID0gdGhpcy5wb3M7CiAgICBpZiAoIXN0YXJ0c1dpdGhEb3QgJiYgdGhpcy5yZWFkSW50KDEwLCB1bmRlZmluZWQsIHRydWUpID09PSBudWxsKSB7IHRoaXMucmFpc2Uoc3RhcnQsICJJbnZhbGlkIG51bWJlciIpOyB9CiAgICB2YXIgb2N0YWwgPSB0aGlzLnBvcyAtIHN0YXJ0ID49IDIgJiYgdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHN0YXJ0KSA9PT0gNDg7CiAgICBpZiAob2N0YWwgJiYgdGhpcy5zdHJpY3QpIHsgdGhpcy5yYWlzZShzdGFydCwgIkludmFsaWQgbnVtYmVyIik7IH0KICAgIHZhciBuZXh0ID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zKTsKICAgIGlmICghb2N0YWwgJiYgIXN0YXJ0c1dpdGhEb3QgJiYgdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDExICYmIG5leHQgPT09IDExMCkgewogICAgICB2YXIgdmFsJDEgPSBzdHJpbmdUb0JpZ0ludCh0aGlzLmlucHV0LnNsaWNlKHN0YXJ0LCB0aGlzLnBvcykpOwogICAgICArK3RoaXMucG9zOwogICAgICBpZiAoaXNJZGVudGlmaWVyU3RhcnQodGhpcy5mdWxsQ2hhckNvZGVBdFBvcygpKSkgeyB0aGlzLnJhaXNlKHRoaXMucG9zLCAiSWRlbnRpZmllciBkaXJlY3RseSBhZnRlciBudW1iZXIiKTsgfQogICAgICByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLm51bSwgdmFsJDEpCiAgICB9CiAgICBpZiAob2N0YWwgJiYgL1s4OV0vLnRlc3QodGhpcy5pbnB1dC5zbGljZShzdGFydCwgdGhpcy5wb3MpKSkgeyBvY3RhbCA9IGZhbHNlOyB9CiAgICBpZiAobmV4dCA9PT0gNDYgJiYgIW9jdGFsKSB7IC8vICcuJwogICAgICArK3RoaXMucG9zOwogICAgICB0aGlzLnJlYWRJbnQoMTApOwogICAgICBuZXh0ID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zKTsKICAgIH0KICAgIGlmICgobmV4dCA9PT0gNjkgfHwgbmV4dCA9PT0gMTAxKSAmJiAhb2N0YWwpIHsgLy8gJ2VFJwogICAgICBuZXh0ID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KCsrdGhpcy5wb3MpOwogICAgICBpZiAobmV4dCA9PT0gNDMgfHwgbmV4dCA9PT0gNDUpIHsgKyt0aGlzLnBvczsgfSAvLyAnKy0nCiAgICAgIGlmICh0aGlzLnJlYWRJbnQoMTApID09PSBudWxsKSB7IHRoaXMucmFpc2Uoc3RhcnQsICJJbnZhbGlkIG51bWJlciIpOyB9CiAgICB9CiAgICBpZiAoaXNJZGVudGlmaWVyU3RhcnQodGhpcy5mdWxsQ2hhckNvZGVBdFBvcygpKSkgeyB0aGlzLnJhaXNlKHRoaXMucG9zLCAiSWRlbnRpZmllciBkaXJlY3RseSBhZnRlciBudW1iZXIiKTsgfQoKICAgIHZhciB2YWwgPSBzdHJpbmdUb051bWJlcih0aGlzLmlucHV0LnNsaWNlKHN0YXJ0LCB0aGlzLnBvcyksIG9jdGFsKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEubnVtLCB2YWwpCiAgfTsKCiAgLy8gUmVhZCBhIHN0cmluZyB2YWx1ZSwgaW50ZXJwcmV0aW5nIGJhY2tzbGFzaC1lc2NhcGVzLgoKICBwcC5yZWFkQ29kZVBvaW50ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgY2ggPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MpLCBjb2RlOwoKICAgIGlmIChjaCA9PT0gMTIzKSB7IC8vICd7JwogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uIDwgNikgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgICB2YXIgY29kZVBvcyA9ICsrdGhpcy5wb3M7CiAgICAgIGNvZGUgPSB0aGlzLnJlYWRIZXhDaGFyKHRoaXMuaW5wdXQuaW5kZXhPZigifSIsIHRoaXMucG9zKSAtIHRoaXMucG9zKTsKICAgICAgKyt0aGlzLnBvczsKICAgICAgaWYgKGNvZGUgPiAweDEwRkZGRikgeyB0aGlzLmludmFsaWRTdHJpbmdUb2tlbihjb2RlUG9zLCAiQ29kZSBwb2ludCBvdXQgb2YgYm91bmRzIik7IH0KICAgIH0gZWxzZSB7CiAgICAgIGNvZGUgPSB0aGlzLnJlYWRIZXhDaGFyKDQpOwogICAgfQogICAgcmV0dXJuIGNvZGUKICB9OwoKICBmdW5jdGlvbiBjb2RlUG9pbnRUb1N0cmluZyhjb2RlKSB7CiAgICAvLyBVVEYtMTYgRGVjb2RpbmcKICAgIGlmIChjb2RlIDw9IDB4RkZGRikgeyByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKSB9CiAgICBjb2RlIC09IDB4MTAwMDA7CiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSgoY29kZSA+PiAxMCkgKyAweEQ4MDAsIChjb2RlICYgMTAyMykgKyAweERDMDApCiAgfQoKICBwcC5yZWFkU3RyaW5nID0gZnVuY3Rpb24ocXVvdGUpIHsKICAgIHZhciBvdXQgPSAiIiwgY2h1bmtTdGFydCA9ICsrdGhpcy5wb3M7CiAgICBmb3IgKDs7KSB7CiAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmlucHV0Lmxlbmd0aCkgeyB0aGlzLnJhaXNlKHRoaXMuc3RhcnQsICJVbnRlcm1pbmF0ZWQgc3RyaW5nIGNvbnN0YW50Iik7IH0KICAgICAgdmFyIGNoID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zKTsKICAgICAgaWYgKGNoID09PSBxdW90ZSkgeyBicmVhayB9CiAgICAgIGlmIChjaCA9PT0gOTIpIHsgLy8gJ1wnCiAgICAgICAgb3V0ICs9IHRoaXMuaW5wdXQuc2xpY2UoY2h1bmtTdGFydCwgdGhpcy5wb3MpOwogICAgICAgIG91dCArPSB0aGlzLnJlYWRFc2NhcGVkQ2hhcihmYWxzZSk7CiAgICAgICAgY2h1bmtTdGFydCA9IHRoaXMucG9zOwogICAgICB9IGVsc2UgaWYgKGNoID09PSAweDIwMjggfHwgY2ggPT09IDB4MjAyOSkgewogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPCAxMCkgeyB0aGlzLnJhaXNlKHRoaXMuc3RhcnQsICJVbnRlcm1pbmF0ZWQgc3RyaW5nIGNvbnN0YW50Iik7IH0KICAgICAgICArK3RoaXMucG9zOwogICAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9jYXRpb25zKSB7CiAgICAgICAgICB0aGlzLmN1ckxpbmUrKzsKICAgICAgICAgIHRoaXMubGluZVN0YXJ0ID0gdGhpcy5wb3M7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChpc05ld0xpbmUoY2gpKSB7IHRoaXMucmFpc2UodGhpcy5zdGFydCwgIlVudGVybWluYXRlZCBzdHJpbmcgY29uc3RhbnQiKTsgfQogICAgICAgICsrdGhpcy5wb3M7CiAgICAgIH0KICAgIH0KICAgIG91dCArPSB0aGlzLmlucHV0LnNsaWNlKGNodW5rU3RhcnQsIHRoaXMucG9zKyspOwogICAgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZXMkMS5zdHJpbmcsIG91dCkKICB9OwoKICAvLyBSZWFkcyB0ZW1wbGF0ZSBzdHJpbmcgdG9rZW5zLgoKICB2YXIgSU5WQUxJRF9URU1QTEFURV9FU0NBUEVfRVJST1IgPSB7fTsKCiAgcHAudHJ5UmVhZFRlbXBsYXRlVG9rZW4gPSBmdW5jdGlvbigpIHsKICAgIHRoaXMuaW5UZW1wbGF0ZUVsZW1lbnQgPSB0cnVlOwogICAgdHJ5IHsKICAgICAgdGhpcy5yZWFkVG1wbFRva2VuKCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgaWYgKGVyciA9PT0gSU5WQUxJRF9URU1QTEFURV9FU0NBUEVfRVJST1IpIHsKICAgICAgICB0aGlzLnJlYWRJbnZhbGlkVGVtcGxhdGVUb2tlbigpOwogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IGVycgogICAgICB9CiAgICB9CgogICAgdGhpcy5pblRlbXBsYXRlRWxlbWVudCA9IGZhbHNlOwogIH07CgogIHBwLmludmFsaWRTdHJpbmdUb2tlbiA9IGZ1bmN0aW9uKHBvc2l0aW9uLCBtZXNzYWdlKSB7CiAgICBpZiAodGhpcy5pblRlbXBsYXRlRWxlbWVudCAmJiB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOSkgewogICAgICB0aHJvdyBJTlZBTElEX1RFTVBMQVRFX0VTQ0FQRV9FUlJPUgogICAgfSBlbHNlIHsKICAgICAgdGhpcy5yYWlzZShwb3NpdGlvbiwgbWVzc2FnZSk7CiAgICB9CiAgfTsKCiAgcHAucmVhZFRtcGxUb2tlbiA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG91dCA9ICIiLCBjaHVua1N0YXJ0ID0gdGhpcy5wb3M7CiAgICBmb3IgKDs7KSB7CiAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLmlucHV0Lmxlbmd0aCkgeyB0aGlzLnJhaXNlKHRoaXMuc3RhcnQsICJVbnRlcm1pbmF0ZWQgdGVtcGxhdGUiKTsgfQogICAgICB2YXIgY2ggPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MpOwogICAgICBpZiAoY2ggPT09IDk2IHx8IGNoID09PSAzNiAmJiB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MgKyAxKSA9PT0gMTIzKSB7IC8vICdgJywgJyR7JwogICAgICAgIGlmICh0aGlzLnBvcyA9PT0gdGhpcy5zdGFydCAmJiAodGhpcy50eXBlID09PSB0eXBlcyQxLnRlbXBsYXRlIHx8IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5pbnZhbGlkVGVtcGxhdGUpKSB7CiAgICAgICAgICBpZiAoY2ggPT09IDM2KSB7CiAgICAgICAgICAgIHRoaXMucG9zICs9IDI7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEuZG9sbGFyQnJhY2VMKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgKyt0aGlzLnBvczsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZXMkMS5iYWNrUXVvdGUpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIG91dCArPSB0aGlzLmlucHV0LnNsaWNlKGNodW5rU3RhcnQsIHRoaXMucG9zKTsKICAgICAgICByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLnRlbXBsYXRlLCBvdXQpCiAgICAgIH0KICAgICAgaWYgKGNoID09PSA5MikgeyAvLyAnXCcKICAgICAgICBvdXQgKz0gdGhpcy5pbnB1dC5zbGljZShjaHVua1N0YXJ0LCB0aGlzLnBvcyk7CiAgICAgICAgb3V0ICs9IHRoaXMucmVhZEVzY2FwZWRDaGFyKHRydWUpOwogICAgICAgIGNodW5rU3RhcnQgPSB0aGlzLnBvczsKICAgICAgfSBlbHNlIGlmIChpc05ld0xpbmUoY2gpKSB7CiAgICAgICAgb3V0ICs9IHRoaXMuaW5wdXQuc2xpY2UoY2h1bmtTdGFydCwgdGhpcy5wb3MpOwogICAgICAgICsrdGhpcy5wb3M7CiAgICAgICAgc3dpdGNoIChjaCkgewogICAgICAgIGNhc2UgMTM6CiAgICAgICAgICBpZiAodGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zKSA9PT0gMTApIHsgKyt0aGlzLnBvczsgfQogICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBvdXQgKz0gIlxuIjsKICAgICAgICAgIGJyZWFrCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoKTsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9jYXRpb25zKSB7CiAgICAgICAgICArK3RoaXMuY3VyTGluZTsKICAgICAgICAgIHRoaXMubGluZVN0YXJ0ID0gdGhpcy5wb3M7CiAgICAgICAgfQogICAgICAgIGNodW5rU3RhcnQgPSB0aGlzLnBvczsKICAgICAgfSBlbHNlIHsKICAgICAgICArK3RoaXMucG9zOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gUmVhZHMgYSB0ZW1wbGF0ZSB0b2tlbiB0byBzZWFyY2ggZm9yIHRoZSBlbmQsIHdpdGhvdXQgdmFsaWRhdGluZyBhbnkgZXNjYXBlIHNlcXVlbmNlcwogIHBwLnJlYWRJbnZhbGlkVGVtcGxhdGVUb2tlbiA9IGZ1bmN0aW9uKCkgewogICAgZm9yICg7IHRoaXMucG9zIDwgdGhpcy5pbnB1dC5sZW5ndGg7IHRoaXMucG9zKyspIHsKICAgICAgc3dpdGNoICh0aGlzLmlucHV0W3RoaXMucG9zXSkgewogICAgICBjYXNlICJcXCI6CiAgICAgICAgKyt0aGlzLnBvczsKICAgICAgICBicmVhawoKICAgICAgY2FzZSAiJCI6CiAgICAgICAgaWYgKHRoaXMuaW5wdXRbdGhpcy5wb3MgKyAxXSAhPT0gInsiKSB7CiAgICAgICAgICBicmVhawogICAgICAgIH0KCiAgICAgIC8vIGZhbGxzIHRocm91Z2gKICAgICAgY2FzZSAiYCI6CiAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZXMkMS5pbnZhbGlkVGVtcGxhdGUsIHRoaXMuaW5wdXQuc2xpY2UodGhpcy5zdGFydCwgdGhpcy5wb3MpKQoKICAgICAgLy8gbm8gZGVmYXVsdAogICAgICB9CiAgICB9CiAgICB0aGlzLnJhaXNlKHRoaXMuc3RhcnQsICJVbnRlcm1pbmF0ZWQgdGVtcGxhdGUiKTsKICB9OwoKICAvLyBVc2VkIHRvIHJlYWQgZXNjYXBlZCBjaGFyYWN0ZXJzCgogIHBwLnJlYWRFc2NhcGVkQ2hhciA9IGZ1bmN0aW9uKGluVGVtcGxhdGUpIHsKICAgIHZhciBjaCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCgrK3RoaXMucG9zKTsKICAgICsrdGhpcy5wb3M7CiAgICBzd2l0Y2ggKGNoKSB7CiAgICBjYXNlIDExMDogcmV0dXJuICJcbiIgLy8gJ24nIC0+ICdcbicKICAgIGNhc2UgMTE0OiByZXR1cm4gIlxyIiAvLyAncicgLT4gJ1xyJwogICAgY2FzZSAxMjA6IHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXMucmVhZEhleENoYXIoMikpIC8vICd4JwogICAgY2FzZSAxMTc6IHJldHVybiBjb2RlUG9pbnRUb1N0cmluZyh0aGlzLnJlYWRDb2RlUG9pbnQoKSkgLy8gJ3UnCiAgICBjYXNlIDExNjogcmV0dXJuICJcdCIgLy8gJ3QnIC0+ICdcdCcKICAgIGNhc2UgOTg6IHJldHVybiAiXGIiIC8vICdiJyAtPiAnXGInCiAgICBjYXNlIDExODogcmV0dXJuICJcdTAwMGIiIC8vICd2JyAtPiAnXHUwMDBiJwogICAgY2FzZSAxMDI6IHJldHVybiAiXGYiIC8vICdmJyAtPiAnXGYnCiAgICBjYXNlIDEzOiBpZiAodGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zKSA9PT0gMTApIHsgKyt0aGlzLnBvczsgfSAvLyAnXHJcbicKICAgIGNhc2UgMTA6IC8vICcgXG4nCiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9jYXRpb25zKSB7IHRoaXMubGluZVN0YXJ0ID0gdGhpcy5wb3M7ICsrdGhpcy5jdXJMaW5lOyB9CiAgICAgIHJldHVybiAiIgogICAgY2FzZSA1NjoKICAgIGNhc2UgNTc6CiAgICAgIGlmICh0aGlzLnN0cmljdCkgewogICAgICAgIHRoaXMuaW52YWxpZFN0cmluZ1Rva2VuKAogICAgICAgICAgdGhpcy5wb3MgLSAxLAogICAgICAgICAgIkludmFsaWQgZXNjYXBlIHNlcXVlbmNlIgogICAgICAgICk7CiAgICAgIH0KICAgICAgaWYgKGluVGVtcGxhdGUpIHsKICAgICAgICB2YXIgY29kZVBvcyA9IHRoaXMucG9zIC0gMTsKCiAgICAgICAgdGhpcy5pbnZhbGlkU3RyaW5nVG9rZW4oCiAgICAgICAgICBjb2RlUG9zLAogICAgICAgICAgIkludmFsaWQgZXNjYXBlIHNlcXVlbmNlIGluIHRlbXBsYXRlIHN0cmluZyIKICAgICAgICApOwoKICAgICAgICByZXR1cm4gbnVsbAogICAgICB9CiAgICBkZWZhdWx0OgogICAgICBpZiAoY2ggPj0gNDggJiYgY2ggPD0gNTUpIHsKICAgICAgICB2YXIgb2N0YWxTdHIgPSB0aGlzLmlucHV0LnN1YnN0cih0aGlzLnBvcyAtIDEsIDMpLm1hdGNoKC9eWzAtN10rLylbMF07CiAgICAgICAgdmFyIG9jdGFsID0gcGFyc2VJbnQob2N0YWxTdHIsIDgpOwogICAgICAgIGlmIChvY3RhbCA+IDI1NSkgewogICAgICAgICAgb2N0YWxTdHIgPSBvY3RhbFN0ci5zbGljZSgwLCAtMSk7CiAgICAgICAgICBvY3RhbCA9IHBhcnNlSW50KG9jdGFsU3RyLCA4KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wb3MgKz0gb2N0YWxTdHIubGVuZ3RoIC0gMTsKICAgICAgICBjaCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyk7CiAgICAgICAgaWYgKChvY3RhbFN0ciAhPT0gIjAiIHx8IGNoID09PSA1NiB8fCBjaCA9PT0gNTcpICYmICh0aGlzLnN0cmljdCB8fCBpblRlbXBsYXRlKSkgewogICAgICAgICAgdGhpcy5pbnZhbGlkU3RyaW5nVG9rZW4oCiAgICAgICAgICAgIHRoaXMucG9zIC0gMSAtIG9jdGFsU3RyLmxlbmd0aCwKICAgICAgICAgICAgaW5UZW1wbGF0ZQogICAgICAgICAgICAgID8gIk9jdGFsIGxpdGVyYWwgaW4gdGVtcGxhdGUgc3RyaW5nIgogICAgICAgICAgICAgIDogIk9jdGFsIGxpdGVyYWwgaW4gc3RyaWN0IG1vZGUiCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShvY3RhbCkKICAgICAgfQogICAgICBpZiAoaXNOZXdMaW5lKGNoKSkgewogICAgICAgIC8vIFVuaWNvZGUgbmV3IGxpbmUgY2hhcmFjdGVycyBhZnRlciBcIGdldCByZW1vdmVkIGZyb20gb3V0cHV0IGluIGJvdGgKICAgICAgICAvLyB0ZW1wbGF0ZSBsaXRlcmFscyBhbmQgc3RyaW5ncwogICAgICAgIHJldHVybiAiIgogICAgICB9CiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoKQogICAgfQogIH07CgogIC8vIFVzZWQgdG8gcmVhZCBjaGFyYWN0ZXIgZXNjYXBlIHNlcXVlbmNlcyAoJ1x4JywgJ1x1JywgJ1xVJykuCgogIHBwLnJlYWRIZXhDaGFyID0gZnVuY3Rpb24obGVuKSB7CiAgICB2YXIgY29kZVBvcyA9IHRoaXMucG9zOwogICAgdmFyIG4gPSB0aGlzLnJlYWRJbnQoMTYsIGxlbik7CiAgICBpZiAobiA9PT0gbnVsbCkgeyB0aGlzLmludmFsaWRTdHJpbmdUb2tlbihjb2RlUG9zLCAiQmFkIGNoYXJhY3RlciBlc2NhcGUgc2VxdWVuY2UiKTsgfQogICAgcmV0dXJuIG4KICB9OwoKICAvLyBSZWFkIGFuIGlkZW50aWZpZXIsIGFuZCByZXR1cm4gaXQgYXMgYSBzdHJpbmcuIFNldHMgYHRoaXMuY29udGFpbnNFc2NgCiAgLy8gdG8gd2hldGhlciB0aGUgd29yZCBjb250YWluZWQgYSAnXHUnIGVzY2FwZS4KICAvLwogIC8vIEluY3JlbWVudGFsbHkgYWRkcyBvbmx5IGVzY2FwZWQgY2hhcnMsIGFkZGluZyBvdGhlciBjaHVua3MgYXMtaXMKICAvLyBhcyBhIG1pY3JvLW9wdGltaXphdGlvbi4KCiAgcHAucmVhZFdvcmQxID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLmNvbnRhaW5zRXNjID0gZmFsc2U7CiAgICB2YXIgd29yZCA9ICIiLCBmaXJzdCA9IHRydWUsIGNodW5rU3RhcnQgPSB0aGlzLnBvczsKICAgIHZhciBhc3RyYWwgPSB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNjsKICAgIHdoaWxlICh0aGlzLnBvcyA8IHRoaXMuaW5wdXQubGVuZ3RoKSB7CiAgICAgIHZhciBjaCA9IHRoaXMuZnVsbENoYXJDb2RlQXRQb3MoKTsKICAgICAgaWYgKGlzSWRlbnRpZmllckNoYXIoY2gsIGFzdHJhbCkpIHsKICAgICAgICB0aGlzLnBvcyArPSBjaCA8PSAweGZmZmYgPyAxIDogMjsKICAgICAgfSBlbHNlIGlmIChjaCA9PT0gOTIpIHsgLy8gIlwiCiAgICAgICAgdGhpcy5jb250YWluc0VzYyA9IHRydWU7CiAgICAgICAgd29yZCArPSB0aGlzLmlucHV0LnNsaWNlKGNodW5rU3RhcnQsIHRoaXMucG9zKTsKICAgICAgICB2YXIgZXNjU3RhcnQgPSB0aGlzLnBvczsKICAgICAgICBpZiAodGhpcy5pbnB1dC5jaGFyQ29kZUF0KCsrdGhpcy5wb3MpICE9PSAxMTcpIC8vICJ1IgogICAgICAgICAgeyB0aGlzLmludmFsaWRTdHJpbmdUb2tlbih0aGlzLnBvcywgIkV4cGVjdGluZyBVbmljb2RlIGVzY2FwZSBzZXF1ZW5jZSBcXHVYWFhYIik7IH0KICAgICAgICArK3RoaXMucG9zOwogICAgICAgIHZhciBlc2MgPSB0aGlzLnJlYWRDb2RlUG9pbnQoKTsKICAgICAgICBpZiAoIShmaXJzdCA/IGlzSWRlbnRpZmllclN0YXJ0IDogaXNJZGVudGlmaWVyQ2hhcikoZXNjLCBhc3RyYWwpKQogICAgICAgICAgeyB0aGlzLmludmFsaWRTdHJpbmdUb2tlbihlc2NTdGFydCwgIkludmFsaWQgVW5pY29kZSBlc2NhcGUiKTsgfQogICAgICAgIHdvcmQgKz0gY29kZVBvaW50VG9TdHJpbmcoZXNjKTsKICAgICAgICBjaHVua1N0YXJ0ID0gdGhpcy5wb3M7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYnJlYWsKICAgICAgfQogICAgICBmaXJzdCA9IGZhbHNlOwogICAgfQogICAgcmV0dXJuIHdvcmQgKyB0aGlzLmlucHV0LnNsaWNlKGNodW5rU3RhcnQsIHRoaXMucG9zKQogIH07CgogIC8vIFJlYWQgYW4gaWRlbnRpZmllciBvciBrZXl3b3JkIHRva2VuLiBXaWxsIGNoZWNrIGZvciByZXNlcnZlZAogIC8vIHdvcmRzIHdoZW4gbmVjZXNzYXJ5LgoKICBwcC5yZWFkV29yZCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIHdvcmQgPSB0aGlzLnJlYWRXb3JkMSgpOwogICAgdmFyIHR5cGUgPSB0eXBlcyQxLm5hbWU7CiAgICBpZiAodGhpcy5rZXl3b3Jkcy50ZXN0KHdvcmQpKSB7CiAgICAgIHR5cGUgPSBrZXl3b3Jkc1t3b3JkXTsKICAgIH0KICAgIHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGUsIHdvcmQpCiAgfTsKCiAgLy8gQWNvcm4gaXMgYSB0aW55LCBmYXN0IEphdmFTY3JpcHQgcGFyc2VyIHdyaXR0ZW4gaW4gSmF2YVNjcmlwdC4KCiAgdmFyIHZlcnNpb24gPSAiOC43LjAiOwoKICBQYXJzZXIuYWNvcm4gPSB7CiAgICBQYXJzZXI6IFBhcnNlciwKICAgIHZlcnNpb246IHZlcnNpb24sCiAgICBkZWZhdWx0T3B0aW9uczogZGVmYXVsdE9wdGlvbnMsCiAgICBQb3NpdGlvbjogUG9zaXRpb24sCiAgICBTb3VyY2VMb2NhdGlvbjogU291cmNlTG9jYXRpb24sCiAgICBnZXRMaW5lSW5mbzogZ2V0TGluZUluZm8sCiAgICBOb2RlOiBOb2RlLAogICAgVG9rZW5UeXBlOiBUb2tlblR5cGUsCiAgICB0b2tUeXBlczogdHlwZXMkMSwKICAgIGtleXdvcmRUeXBlczoga2V5d29yZHMsCiAgICBUb2tDb250ZXh0OiBUb2tDb250ZXh0LAogICAgdG9rQ29udGV4dHM6IHR5cGVzLAogICAgaXNJZGVudGlmaWVyQ2hhcjogaXNJZGVudGlmaWVyQ2hhciwKICAgIGlzSWRlbnRpZmllclN0YXJ0OiBpc0lkZW50aWZpZXJTdGFydCwKICAgIFRva2VuOiBUb2tlbiwKICAgIGlzTmV3TGluZTogaXNOZXdMaW5lLAogICAgbGluZUJyZWFrOiBsaW5lQnJlYWssCiAgICBsaW5lQnJlYWtHOiBsaW5lQnJlYWtHLAogICAgbm9uQVNDSUl3aGl0ZXNwYWNlOiBub25BU0NJSXdoaXRlc3BhY2UKICB9OwoKICAvLyBUaGUgbWFpbiBleHBvcnRlZCBpbnRlcmZhY2UgKHVuZGVyIGBzZWxmLmFjb3JuYCB3aGVuIGluIHRoZQogIC8vIGJyb3dzZXIpIGlzIGEgYHBhcnNlYCBmdW5jdGlvbiB0aGF0IHRha2VzIGEgY29kZSBzdHJpbmcgYW5kCiAgLy8gcmV0dXJucyBhbiBhYnN0cmFjdCBzeW50YXggdHJlZSBhcyBzcGVjaWZpZWQgYnkgW01vemlsbGEgcGFyc2VyCiAgLy8gQVBJXVthcGldLgogIC8vCiAgLy8gW2FwaV06IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvU3BpZGVyTW9ua2V5L1BhcnNlcl9BUEkKCiAgZnVuY3Rpb24gcGFyc2UoaW5wdXQsIG9wdGlvbnMpIHsKICAgIHJldHVybiBQYXJzZXIucGFyc2UoaW5wdXQsIG9wdGlvbnMpCiAgfQoKICAvLyBUaGlzIGZ1bmN0aW9uIHRyaWVzIHRvIHBhcnNlIGEgc2luZ2xlIGV4cHJlc3Npb24gYXQgYSBnaXZlbgogIC8vIG9mZnNldCBpbiBhIHN0cmluZy4gVXNlZnVsIGZvciBwYXJzaW5nIG1peGVkLWxhbmd1YWdlIGZvcm1hdHMKICAvLyB0aGF0IGVtYmVkIEphdmFTY3JpcHQgZXhwcmVzc2lvbnMuCgogIGZ1bmN0aW9uIHBhcnNlRXhwcmVzc2lvbkF0KGlucHV0LCBwb3MsIG9wdGlvbnMpIHsKICAgIHJldHVybiBQYXJzZXIucGFyc2VFeHByZXNzaW9uQXQoaW5wdXQsIHBvcywgb3B0aW9ucykKICB9CgogIC8vIEFjb3JuIGlzIG9yZ2FuaXplZCBhcyBhIHRva2VuaXplciBhbmQgYSByZWN1cnNpdmUtZGVzY2VudCBwYXJzZXIuCiAgLy8gVGhlIGB0b2tlbml6ZXJgIGV4cG9ydCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gdGhlIHRva2VuaXplci4KCiAgZnVuY3Rpb24gdG9rZW5pemVyKGlucHV0LCBvcHRpb25zKSB7CiAgICByZXR1cm4gUGFyc2VyLnRva2VuaXplcihpbnB1dCwgb3B0aW9ucykKICB9CgogIGV4cG9ydHMuTm9kZSA9IE5vZGU7CiAgZXhwb3J0cy5QYXJzZXIgPSBQYXJzZXI7CiAgZXhwb3J0cy5Qb3NpdGlvbiA9IFBvc2l0aW9uOwogIGV4cG9ydHMuU291cmNlTG9jYXRpb24gPSBTb3VyY2VMb2NhdGlvbjsKICBleHBvcnRzLlRva0NvbnRleHQgPSBUb2tDb250ZXh0OwogIGV4cG9ydHMuVG9rZW4gPSBUb2tlbjsKICBleHBvcnRzLlRva2VuVHlwZSA9IFRva2VuVHlwZTsKICBleHBvcnRzLmRlZmF1bHRPcHRpb25zID0gZGVmYXVsdE9wdGlvbnM7CiAgZXhwb3J0cy5nZXRMaW5lSW5mbyA9IGdldExpbmVJbmZvOwogIGV4cG9ydHMuaXNJZGVudGlmaWVyQ2hhciA9IGlzSWRlbnRpZmllckNoYXI7CiAgZXhwb3J0cy5pc0lkZW50aWZpZXJTdGFydCA9IGlzSWRlbnRpZmllclN0YXJ0OwogIGV4cG9ydHMuaXNOZXdMaW5lID0gaXNOZXdMaW5lOwogIGV4cG9ydHMua2V5d29yZFR5cGVzID0ga2V5d29yZHM7CiAgZXhwb3J0cy5saW5lQnJlYWsgPSBsaW5lQnJlYWs7CiAgZXhwb3J0cy5saW5lQnJlYWtHID0gbGluZUJyZWFrRzsKICBleHBvcnRzLm5vbkFTQ0lJd2hpdGVzcGFjZSA9IG5vbkFTQ0lJd2hpdGVzcGFjZTsKICBleHBvcnRzLnBhcnNlID0gcGFyc2U7CiAgZXhwb3J0cy5wYXJzZUV4cHJlc3Npb25BdCA9IHBhcnNlRXhwcmVzc2lvbkF0OwogIGV4cG9ydHMudG9rQ29udGV4dHMgPSB0eXBlczsKICBleHBvcnRzLnRva1R5cGVzID0gdHlwZXMkMTsKICBleHBvcnRzLnRva2VuaXplciA9IHRva2VuaXplcjsKICBleHBvcnRzLnZlcnNpb24gPSB2ZXJzaW9uOwoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pOwoKfSkpOwooZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkgewogIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cywgcmVxdWlyZSgnYWNvcm4nKSkgOgogIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnLCAnYWNvcm4nXSwgZmFjdG9yeSkgOgogIChnbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogZ2xvYmFsIHx8IHNlbGYsIGZhY3RvcnkoKGdsb2JhbC5hY29ybiA9IGdsb2JhbC5hY29ybiB8fCB7fSwgZ2xvYmFsLmFjb3JuLmxvb3NlID0ge30pLCBnbG9iYWwuYWNvcm4pKTsKfSkodGhpcywgKGZ1bmN0aW9uIChleHBvcnRzLCBhY29ybikgeyAndXNlIHN0cmljdCc7CgogIHZhciBkdW1teVZhbHVlID0gIuKcliI7CgogIGZ1bmN0aW9uIGlzRHVtbXkobm9kZSkgeyByZXR1cm4gbm9kZS5uYW1lID09PSBkdW1teVZhbHVlIH0KCiAgZnVuY3Rpb24gbm9vcCgpIHt9CgogIHZhciBMb29zZVBhcnNlciA9IGZ1bmN0aW9uIExvb3NlUGFyc2VyKGlucHV0LCBvcHRpb25zKSB7CiAgICBpZiAoIG9wdGlvbnMgPT09IHZvaWQgMCApIG9wdGlvbnMgPSB7fTsKCiAgICB0aGlzLnRva3MgPSB0aGlzLmNvbnN0cnVjdG9yLkJhc2VQYXJzZXIudG9rZW5pemVyKGlucHV0LCBvcHRpb25zKTsKICAgIHRoaXMub3B0aW9ucyA9IHRoaXMudG9rcy5vcHRpb25zOwogICAgdGhpcy5pbnB1dCA9IHRoaXMudG9rcy5pbnB1dDsKICAgIHRoaXMudG9rID0gdGhpcy5sYXN0ID0ge3R5cGU6IGFjb3JuLnRva1R5cGVzLmVvZiwgc3RhcnQ6IDAsIGVuZDogMH07CiAgICB0aGlzLnRvay52YWxpZGF0ZVJlZ0V4cEZsYWdzID0gbm9vcDsKICAgIHRoaXMudG9rLnZhbGlkYXRlUmVnRXhwUGF0dGVybiA9IG5vb3A7CiAgICBpZiAodGhpcy5vcHRpb25zLmxvY2F0aW9ucykgewogICAgICB2YXIgaGVyZSA9IHRoaXMudG9rcy5jdXJQb3NpdGlvbigpOwogICAgICB0aGlzLnRvay5sb2MgPSBuZXcgYWNvcm4uU291cmNlTG9jYXRpb24odGhpcy50b2tzLCBoZXJlLCBoZXJlKTsKICAgIH0KICAgIHRoaXMuYWhlYWQgPSBbXTsgLy8gVG9rZW5zIGFoZWFkCiAgICB0aGlzLmNvbnRleHQgPSBbXTsgLy8gSW5kZW50YXRpb24gY29udGV4dGVkCiAgICB0aGlzLmN1ckluZGVudCA9IDA7CiAgICB0aGlzLmN1ckxpbmVTdGFydCA9IDA7CiAgICB0aGlzLm5leHRMaW5lU3RhcnQgPSB0aGlzLmxpbmVFbmQodGhpcy5jdXJMaW5lU3RhcnQpICsgMTsKICAgIHRoaXMuaW5Bc3luYyA9IGZhbHNlOwogICAgdGhpcy5pbkdlbmVyYXRvciA9IGZhbHNlOwogICAgdGhpcy5pbkZ1bmN0aW9uID0gZmFsc2U7CiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLnN0YXJ0Tm9kZSA9IGZ1bmN0aW9uIHN0YXJ0Tm9kZSAoKSB7CiAgICByZXR1cm4gbmV3IGFjb3JuLk5vZGUodGhpcy50b2tzLCB0aGlzLnRvay5zdGFydCwgdGhpcy5vcHRpb25zLmxvY2F0aW9ucyA/IHRoaXMudG9rLmxvYy5zdGFydCA6IG51bGwpCiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLnN0b3JlQ3VycmVudFBvcyA9IGZ1bmN0aW9uIHN0b3JlQ3VycmVudFBvcyAoKSB7CiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmxvY2F0aW9ucyA/IFt0aGlzLnRvay5zdGFydCwgdGhpcy50b2subG9jLnN0YXJ0XSA6IHRoaXMudG9rLnN0YXJ0CiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLnN0YXJ0Tm9kZUF0ID0gZnVuY3Rpb24gc3RhcnROb2RlQXQgKHBvcykgewogICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpIHsKICAgICAgcmV0dXJuIG5ldyBhY29ybi5Ob2RlKHRoaXMudG9rcywgcG9zWzBdLCBwb3NbMV0pCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbmV3IGFjb3JuLk5vZGUodGhpcy50b2tzLCBwb3MpCiAgICB9CiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLmZpbmlzaE5vZGUgPSBmdW5jdGlvbiBmaW5pc2hOb2RlIChub2RlLCB0eXBlKSB7CiAgICBub2RlLnR5cGUgPSB0eXBlOwogICAgbm9kZS5lbmQgPSB0aGlzLmxhc3QuZW5kOwogICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpCiAgICAgIHsgbm9kZS5sb2MuZW5kID0gdGhpcy5sYXN0LmxvYy5lbmQ7IH0KICAgIGlmICh0aGlzLm9wdGlvbnMucmFuZ2VzKQogICAgICB7IG5vZGUucmFuZ2VbMV0gPSB0aGlzLmxhc3QuZW5kOyB9CiAgICByZXR1cm4gbm9kZQogIH07CgogIExvb3NlUGFyc2VyLnByb3RvdHlwZS5kdW1teU5vZGUgPSBmdW5jdGlvbiBkdW1teU5vZGUgKHR5cGUpIHsKICAgIHZhciBkdW1teSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICBkdW1teS50eXBlID0gdHlwZTsKICAgIGR1bW15LmVuZCA9IGR1bW15LnN0YXJ0OwogICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpCiAgICAgIHsgZHVtbXkubG9jLmVuZCA9IGR1bW15LmxvYy5zdGFydDsgfQogICAgaWYgKHRoaXMub3B0aW9ucy5yYW5nZXMpCiAgICAgIHsgZHVtbXkucmFuZ2VbMV0gPSBkdW1teS5zdGFydDsgfQogICAgdGhpcy5sYXN0ID0ge3R5cGU6IGFjb3JuLnRva1R5cGVzLm5hbWUsIHN0YXJ0OiBkdW1teS5zdGFydCwgZW5kOiBkdW1teS5zdGFydCwgbG9jOiBkdW1teS5sb2N9OwogICAgcmV0dXJuIGR1bW15CiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLmR1bW15SWRlbnQgPSBmdW5jdGlvbiBkdW1teUlkZW50ICgpIHsKICAgIHZhciBkdW1teSA9IHRoaXMuZHVtbXlOb2RlKCJJZGVudGlmaWVyIik7CiAgICBkdW1teS5uYW1lID0gZHVtbXlWYWx1ZTsKICAgIHJldHVybiBkdW1teQogIH07CgogIExvb3NlUGFyc2VyLnByb3RvdHlwZS5kdW1teVN0cmluZyA9IGZ1bmN0aW9uIGR1bW15U3RyaW5nICgpIHsKICAgIHZhciBkdW1teSA9IHRoaXMuZHVtbXlOb2RlKCJMaXRlcmFsIik7CiAgICBkdW1teS52YWx1ZSA9IGR1bW15LnJhdyA9IGR1bW15VmFsdWU7CiAgICByZXR1cm4gZHVtbXkKICB9OwoKICBMb29zZVBhcnNlci5wcm90b3R5cGUuZWF0ID0gZnVuY3Rpb24gZWF0ICh0eXBlKSB7CiAgICBpZiAodGhpcy50b2sudHlwZSA9PT0gdHlwZSkgewogICAgICB0aGlzLm5leHQoKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZQogICAgfQogIH07CgogIExvb3NlUGFyc2VyLnByb3RvdHlwZS5pc0NvbnRleHR1YWwgPSBmdW5jdGlvbiBpc0NvbnRleHR1YWwgKG5hbWUpIHsKICAgIHJldHVybiB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5uYW1lICYmIHRoaXMudG9rLnZhbHVlID09PSBuYW1lCiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLmVhdENvbnRleHR1YWwgPSBmdW5jdGlvbiBlYXRDb250ZXh0dWFsIChuYW1lKSB7CiAgICByZXR1cm4gdGhpcy50b2sudmFsdWUgPT09IG5hbWUgJiYgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMubmFtZSkKICB9OwoKICBMb29zZVBhcnNlci5wcm90b3R5cGUuY2FuSW5zZXJ0U2VtaWNvbG9uID0gZnVuY3Rpb24gY2FuSW5zZXJ0U2VtaWNvbG9uICgpIHsKICAgIHJldHVybiB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5lb2YgfHwgdGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuYnJhY2VSIHx8CiAgICAgIGFjb3JuLmxpbmVCcmVhay50ZXN0KHRoaXMuaW5wdXQuc2xpY2UodGhpcy5sYXN0LmVuZCwgdGhpcy50b2suc3RhcnQpKQogIH07CgogIExvb3NlUGFyc2VyLnByb3RvdHlwZS5zZW1pY29sb24gPSBmdW5jdGlvbiBzZW1pY29sb24gKCkgewogICAgcmV0dXJuIHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLnNlbWkpCiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLmV4cGVjdCA9IGZ1bmN0aW9uIGV4cGVjdCAodHlwZSkgewogICAgaWYgKHRoaXMuZWF0KHR5cGUpKSB7IHJldHVybiB0cnVlIH0KICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IDI7IGkrKykgewogICAgICBpZiAodGhpcy5sb29rQWhlYWQoaSkudHlwZSA9PT0gdHlwZSkgewogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaTsgaisrKSB7IHRoaXMubmV4dCgpOyB9CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgfQogIH07CgogIExvb3NlUGFyc2VyLnByb3RvdHlwZS5wdXNoQ3ggPSBmdW5jdGlvbiBwdXNoQ3ggKCkgewogICAgdGhpcy5jb250ZXh0LnB1c2godGhpcy5jdXJJbmRlbnQpOwogIH07CgogIExvb3NlUGFyc2VyLnByb3RvdHlwZS5wb3BDeCA9IGZ1bmN0aW9uIHBvcEN4ICgpIHsKICAgIHRoaXMuY3VySW5kZW50ID0gdGhpcy5jb250ZXh0LnBvcCgpOwogIH07CgogIExvb3NlUGFyc2VyLnByb3RvdHlwZS5saW5lRW5kID0gZnVuY3Rpb24gbGluZUVuZCAocG9zKSB7CiAgICB3aGlsZSAocG9zIDwgdGhpcy5pbnB1dC5sZW5ndGggJiYgIWFjb3JuLmlzTmV3TGluZSh0aGlzLmlucHV0LmNoYXJDb2RlQXQocG9zKSkpIHsgKytwb3M7IH0KICAgIHJldHVybiBwb3MKICB9OwoKICBMb29zZVBhcnNlci5wcm90b3R5cGUuaW5kZW50YXRpb25BZnRlciA9IGZ1bmN0aW9uIGluZGVudGF0aW9uQWZ0ZXIgKHBvcykgewogICAgZm9yICh2YXIgY291bnQgPSAwOzsgKytwb3MpIHsKICAgICAgdmFyIGNoID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHBvcyk7CiAgICAgIGlmIChjaCA9PT0gMzIpIHsgKytjb3VudDsgfQogICAgICBlbHNlIGlmIChjaCA9PT0gOSkgeyBjb3VudCArPSB0aGlzLm9wdGlvbnMudGFiU2l6ZTsgfQogICAgICBlbHNlIHsgcmV0dXJuIGNvdW50IH0KICAgIH0KICB9OwoKICBMb29zZVBhcnNlci5wcm90b3R5cGUuY2xvc2VzID0gZnVuY3Rpb24gY2xvc2VzIChjbG9zZVRvaywgaW5kZW50LCBsaW5lLCBibG9ja0hldXJpc3RpYykgewogICAgaWYgKHRoaXMudG9rLnR5cGUgPT09IGNsb3NlVG9rIHx8IHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLmVvZikgeyByZXR1cm4gdHJ1ZSB9CiAgICByZXR1cm4gbGluZSAhPT0gdGhpcy5jdXJMaW5lU3RhcnQgJiYgdGhpcy5jdXJJbmRlbnQgPCBpbmRlbnQgJiYgdGhpcy50b2tlblN0YXJ0c0xpbmUoKSAmJgogICAgICAoIWJsb2NrSGV1cmlzdGljIHx8IHRoaXMubmV4dExpbmVTdGFydCA+PSB0aGlzLmlucHV0Lmxlbmd0aCB8fAogICAgICAgdGhpcy5pbmRlbnRhdGlvbkFmdGVyKHRoaXMubmV4dExpbmVTdGFydCkgPCBpbmRlbnQpCiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLnRva2VuU3RhcnRzTGluZSA9IGZ1bmN0aW9uIHRva2VuU3RhcnRzTGluZSAoKSB7CiAgICBmb3IgKHZhciBwID0gdGhpcy50b2suc3RhcnQgLSAxOyBwID49IHRoaXMuY3VyTGluZVN0YXJ0OyAtLXApIHsKICAgICAgdmFyIGNoID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHApOwogICAgICBpZiAoY2ggIT09IDkgJiYgY2ggIT09IDMyKSB7IHJldHVybiBmYWxzZSB9CiAgICB9CiAgICByZXR1cm4gdHJ1ZQogIH07CgogIExvb3NlUGFyc2VyLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbiBleHRlbmQgKG5hbWUsIGYpIHsKICAgIHRoaXNbbmFtZV0gPSBmKHRoaXNbbmFtZV0pOwogIH07CgogIExvb3NlUGFyc2VyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIHBhcnNlICgpIHsKICAgIHRoaXMubmV4dCgpOwogICAgcmV0dXJuIHRoaXMucGFyc2VUb3BMZXZlbCgpCiAgfTsKCiAgTG9vc2VQYXJzZXIuZXh0ZW5kID0gZnVuY3Rpb24gZXh0ZW5kICgpIHsKICAgICAgdmFyIHBsdWdpbnMgPSBbXSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKICAgICAgd2hpbGUgKCBsZW4tLSApIHBsdWdpbnNbIGxlbiBdID0gYXJndW1lbnRzWyBsZW4gXTsKCiAgICB2YXIgY2xzID0gdGhpczsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGx1Z2lucy5sZW5ndGg7IGkrKykgeyBjbHMgPSBwbHVnaW5zW2ldKGNscyk7IH0KICAgIHJldHVybiBjbHMKICB9OwoKICBMb29zZVBhcnNlci5wYXJzZSA9IGZ1bmN0aW9uIHBhcnNlIChpbnB1dCwgb3B0aW9ucykgewogICAgcmV0dXJuIG5ldyB0aGlzKGlucHV0LCBvcHRpb25zKS5wYXJzZSgpCiAgfTsKCiAgLy8gQWxsb3dzIHBsdWdpbnMgdG8gZXh0ZW5kIHRoZSBiYXNlIHBhcnNlciAvIHRva2VuaXplciB1c2VkCiAgTG9vc2VQYXJzZXIuQmFzZVBhcnNlciA9IGFjb3JuLlBhcnNlcjsKCiAgdmFyIGxwJDIgPSBMb29zZVBhcnNlci5wcm90b3R5cGU7CgogIGZ1bmN0aW9uIGlzU3BhY2UoY2gpIHsKICAgIHJldHVybiAoY2ggPCAxNCAmJiBjaCA+IDgpIHx8IGNoID09PSAzMiB8fCBjaCA9PT0gMTYwIHx8IGFjb3JuLmlzTmV3TGluZShjaCkKICB9CgogIGxwJDIubmV4dCA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5sYXN0ID0gdGhpcy50b2s7CiAgICBpZiAodGhpcy5haGVhZC5sZW5ndGgpCiAgICAgIHsgdGhpcy50b2sgPSB0aGlzLmFoZWFkLnNoaWZ0KCk7IH0KICAgIGVsc2UKICAgICAgeyB0aGlzLnRvayA9IHRoaXMucmVhZFRva2VuKCk7IH0KCiAgICBpZiAodGhpcy50b2suc3RhcnQgPj0gdGhpcy5uZXh0TGluZVN0YXJ0KSB7CiAgICAgIHdoaWxlICh0aGlzLnRvay5zdGFydCA+PSB0aGlzLm5leHRMaW5lU3RhcnQpIHsKICAgICAgICB0aGlzLmN1ckxpbmVTdGFydCA9IHRoaXMubmV4dExpbmVTdGFydDsKICAgICAgICB0aGlzLm5leHRMaW5lU3RhcnQgPSB0aGlzLmxpbmVFbmQodGhpcy5jdXJMaW5lU3RhcnQpICsgMTsKICAgICAgfQogICAgICB0aGlzLmN1ckluZGVudCA9IHRoaXMuaW5kZW50YXRpb25BZnRlcih0aGlzLmN1ckxpbmVTdGFydCk7CiAgICB9CiAgfTsKCiAgbHAkMi5yZWFkVG9rZW4gPSBmdW5jdGlvbigpIHsKICAgIGZvciAoOzspIHsKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLnRva3MubmV4dCgpOwogICAgICAgIGlmICh0aGlzLnRva3MudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuZG90ICYmCiAgICAgICAgICAgIHRoaXMuaW5wdXQuc3Vic3RyKHRoaXMudG9rcy5lbmQsIDEpID09PSAiLiIgJiYKICAgICAgICAgICAgdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpIHsKICAgICAgICAgIHRoaXMudG9rcy5lbmQrKzsKICAgICAgICAgIHRoaXMudG9rcy50eXBlID0gYWNvcm4udG9rVHlwZXMuZWxsaXBzaXM7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgYWNvcm4uVG9rZW4odGhpcy50b2tzKQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIFN5bnRheEVycm9yKSkgeyB0aHJvdyBlIH0KCiAgICAgICAgLy8gVHJ5IHRvIHNraXAgc29tZSB0ZXh0LCBiYXNlZCBvbiB0aGUgZXJyb3IgbWVzc2FnZSwgYW5kIHRoZW4gY29udGludWUKICAgICAgICB2YXIgbXNnID0gZS5tZXNzYWdlLCBwb3MgPSBlLnJhaXNlZEF0LCByZXBsYWNlID0gdHJ1ZTsKICAgICAgICBpZiAoL3VudGVybWluYXRlZC9pLnRlc3QobXNnKSkgewogICAgICAgICAgcG9zID0gdGhpcy5saW5lRW5kKGUucG9zICsgMSk7CiAgICAgICAgICBpZiAoL3N0cmluZy8udGVzdChtc2cpKSB7CiAgICAgICAgICAgIHJlcGxhY2UgPSB7c3RhcnQ6IGUucG9zLCBlbmQ6IHBvcywgdHlwZTogYWNvcm4udG9rVHlwZXMuc3RyaW5nLCB2YWx1ZTogdGhpcy5pbnB1dC5zbGljZShlLnBvcyArIDEsIHBvcyl9OwogICAgICAgICAgfSBlbHNlIGlmICgvcmVndWxhciBleHByL2kudGVzdChtc2cpKSB7CiAgICAgICAgICAgIHZhciByZSA9IHRoaXMuaW5wdXQuc2xpY2UoZS5wb3MsIHBvcyk7CiAgICAgICAgICAgIHRyeSB7IHJlID0gbmV3IFJlZ0V4cChyZSk7IH0gY2F0Y2ggKGUkMSkgeyAvKiBpZ25vcmUgY29tcGlsYXRpb24gZXJyb3IgZHVlIHRvIG5ldyBzeW50YXggKi8gfQogICAgICAgICAgICByZXBsYWNlID0ge3N0YXJ0OiBlLnBvcywgZW5kOiBwb3MsIHR5cGU6IGFjb3JuLnRva1R5cGVzLnJlZ2V4cCwgdmFsdWU6IHJlfTsKICAgICAgICAgIH0gZWxzZSBpZiAoL3RlbXBsYXRlLy50ZXN0KG1zZykpIHsKICAgICAgICAgICAgcmVwbGFjZSA9IHsKICAgICAgICAgICAgICBzdGFydDogZS5wb3MsCiAgICAgICAgICAgICAgZW5kOiBwb3MsCiAgICAgICAgICAgICAgdHlwZTogYWNvcm4udG9rVHlwZXMudGVtcGxhdGUsCiAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuaW5wdXQuc2xpY2UoZS5wb3MsIHBvcykKICAgICAgICAgICAgfTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlcGxhY2UgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKC9pbnZhbGlkICh1bmljb2RlfHJlZ2V4cHxudW1iZXIpfGV4cGVjdGluZyB1bmljb2RlfG9jdGFsIGxpdGVyYWx8aXMgcmVzZXJ2ZWR8ZGlyZWN0bHkgYWZ0ZXIgbnVtYmVyfGV4cGVjdGVkIG51bWJlciBpbiByYWRpeC9pLnRlc3QobXNnKSkgewogICAgICAgICAgd2hpbGUgKHBvcyA8IHRoaXMuaW5wdXQubGVuZ3RoICYmICFpc1NwYWNlKHRoaXMuaW5wdXQuY2hhckNvZGVBdChwb3MpKSkgeyArK3BvczsgfQogICAgICAgIH0gZWxzZSBpZiAoL2NoYXJhY3RlciBlc2NhcGV8ZXhwZWN0ZWQgaGV4YWRlY2ltYWwvaS50ZXN0KG1zZykpIHsKICAgICAgICAgIHdoaWxlIChwb3MgPCB0aGlzLmlucHV0Lmxlbmd0aCkgewogICAgICAgICAgICB2YXIgY2ggPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQocG9zKyspOwogICAgICAgICAgICBpZiAoY2ggPT09IDM0IHx8IGNoID09PSAzOSB8fCBhY29ybi5pc05ld0xpbmUoY2gpKSB7IGJyZWFrIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKC91bmV4cGVjdGVkIGNoYXJhY3Rlci9pLnRlc3QobXNnKSkgewogICAgICAgICAgcG9zKys7CiAgICAgICAgICByZXBsYWNlID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIGlmICgvcmVndWxhciBleHByZXNzaW9uL2kudGVzdChtc2cpKSB7CiAgICAgICAgICByZXBsYWNlID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgZQogICAgICAgIH0KICAgICAgICB0aGlzLnJlc2V0VG8ocG9zKTsKICAgICAgICBpZiAocmVwbGFjZSA9PT0gdHJ1ZSkgeyByZXBsYWNlID0ge3N0YXJ0OiBwb3MsIGVuZDogcG9zLCB0eXBlOiBhY29ybi50b2tUeXBlcy5uYW1lLCB2YWx1ZTogZHVtbXlWYWx1ZX07IH0KICAgICAgICBpZiAocmVwbGFjZSkgewogICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpCiAgICAgICAgICAgIHsgcmVwbGFjZS5sb2MgPSBuZXcgYWNvcm4uU291cmNlTG9jYXRpb24oCiAgICAgICAgICAgICAgdGhpcy50b2tzLAogICAgICAgICAgICAgIGFjb3JuLmdldExpbmVJbmZvKHRoaXMuaW5wdXQsIHJlcGxhY2Uuc3RhcnQpLAogICAgICAgICAgICAgIGFjb3JuLmdldExpbmVJbmZvKHRoaXMuaW5wdXQsIHJlcGxhY2UuZW5kKSk7IH0KICAgICAgICAgIHJldHVybiByZXBsYWNlCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgbHAkMi5yZXNldFRvID0gZnVuY3Rpb24ocG9zKSB7CiAgICB0aGlzLnRva3MucG9zID0gcG9zOwogICAgdmFyIGNoID0gdGhpcy5pbnB1dC5jaGFyQXQocG9zIC0gMSk7CiAgICB0aGlzLnRva3MuZXhwckFsbG93ZWQgPSAhY2ggfHwgL1tbeygsOzo/Lyo9K1wtfiF8JiVePD5dLy50ZXN0KGNoKSB8fAogICAgICAvW2Vud2ZkXS8udGVzdChjaCkgJiYKICAgICAgL1xiKGNhc2V8ZWxzZXxyZXR1cm58dGhyb3d8bmV3fGlufChpbnN0YW5jZXx0eXBlKT9vZnxkZWxldGV8dm9pZCkkLy50ZXN0KHRoaXMuaW5wdXQuc2xpY2UocG9zIC0gMTAsIHBvcykpOwoKICAgIGlmICh0aGlzLm9wdGlvbnMubG9jYXRpb25zKSB7CiAgICAgIHRoaXMudG9rcy5jdXJMaW5lID0gMTsKICAgICAgdGhpcy50b2tzLmxpbmVTdGFydCA9IGFjb3JuLmxpbmVCcmVha0cubGFzdEluZGV4ID0gMDsKICAgICAgdmFyIG1hdGNoOwogICAgICB3aGlsZSAoKG1hdGNoID0gYWNvcm4ubGluZUJyZWFrRy5leGVjKHRoaXMuaW5wdXQpKSAmJiBtYXRjaC5pbmRleCA8IHBvcykgewogICAgICAgICsrdGhpcy50b2tzLmN1ckxpbmU7CiAgICAgICAgdGhpcy50b2tzLmxpbmVTdGFydCA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoOwogICAgICB9CiAgICB9CiAgfTsKCiAgbHAkMi5sb29rQWhlYWQgPSBmdW5jdGlvbihuKSB7CiAgICB3aGlsZSAobiA+IHRoaXMuYWhlYWQubGVuZ3RoKQogICAgICB7IHRoaXMuYWhlYWQucHVzaCh0aGlzLnJlYWRUb2tlbigpKTsgfQogICAgcmV0dXJuIHRoaXMuYWhlYWRbbiAtIDFdCiAgfTsKCiAgdmFyIGxwJDEgPSBMb29zZVBhcnNlci5wcm90b3R5cGU7CgogIGxwJDEucGFyc2VUb3BMZXZlbCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZUF0KHRoaXMub3B0aW9ucy5sb2NhdGlvbnMgPyBbMCwgYWNvcm4uZ2V0TGluZUluZm8odGhpcy5pbnB1dCwgMCldIDogMCk7CiAgICBub2RlLmJvZHkgPSBbXTsKICAgIHdoaWxlICh0aGlzLnRvay50eXBlICE9PSBhY29ybi50b2tUeXBlcy5lb2YpIHsgbm9kZS5ib2R5LnB1c2godGhpcy5wYXJzZVN0YXRlbWVudCgpKTsgfQogICAgdGhpcy50b2tzLmFkYXB0RGlyZWN0aXZlUHJvbG9ndWUobm9kZS5ib2R5KTsKICAgIHRoaXMubGFzdCA9IHRoaXMudG9rOwogICAgbm9kZS5zb3VyY2VUeXBlID0gdGhpcy5vcHRpb25zLnNvdXJjZVR5cGU7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJQcm9ncmFtIikKICB9OwoKICBscCQxLnBhcnNlU3RhdGVtZW50ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgc3RhcnR0eXBlID0gdGhpcy50b2sudHlwZSwgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCksIGtpbmQ7CgogICAgaWYgKHRoaXMudG9rcy5pc0xldCgpKSB7CiAgICAgIHN0YXJ0dHlwZSA9IGFjb3JuLnRva1R5cGVzLl92YXI7CiAgICAgIGtpbmQgPSAibGV0IjsKICAgIH0KCiAgICBzd2l0Y2ggKHN0YXJ0dHlwZSkgewogICAgY2FzZSBhY29ybi50b2tUeXBlcy5fYnJlYWs6IGNhc2UgYWNvcm4udG9rVHlwZXMuX2NvbnRpbnVlOgogICAgICB0aGlzLm5leHQoKTsKICAgICAgdmFyIGlzQnJlYWsgPSBzdGFydHR5cGUgPT09IGFjb3JuLnRva1R5cGVzLl9icmVhazsKICAgICAgaWYgKHRoaXMuc2VtaWNvbG9uKCkgfHwgdGhpcy5jYW5JbnNlcnRTZW1pY29sb24oKSkgewogICAgICAgIG5vZGUubGFiZWwgPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIG5vZGUubGFiZWwgPSB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5uYW1lID8gdGhpcy5wYXJzZUlkZW50KCkgOiBudWxsOwogICAgICAgIHRoaXMuc2VtaWNvbG9uKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCBpc0JyZWFrID8gIkJyZWFrU3RhdGVtZW50IiA6ICJDb250aW51ZVN0YXRlbWVudCIpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5fZGVidWdnZXI6CiAgICAgIHRoaXMubmV4dCgpOwogICAgICB0aGlzLnNlbWljb2xvbigpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJEZWJ1Z2dlclN0YXRlbWVudCIpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5fZG86CiAgICAgIHRoaXMubmV4dCgpOwogICAgICBub2RlLmJvZHkgPSB0aGlzLnBhcnNlU3RhdGVtZW50KCk7CiAgICAgIG5vZGUudGVzdCA9IHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLl93aGlsZSkgPyB0aGlzLnBhcnNlUGFyZW5FeHByZXNzaW9uKCkgOiB0aGlzLmR1bW15SWRlbnQoKTsKICAgICAgdGhpcy5zZW1pY29sb24oKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRG9XaGlsZVN0YXRlbWVudCIpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5fZm9yOgogICAgICB0aGlzLm5leHQoKTsgLy8gYGZvcmAga2V5d29yZAogICAgICB2YXIgaXNBd2FpdCA9IHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5ICYmIHRoaXMuZWF0Q29udGV4dHVhbCgiYXdhaXQiKTsKCiAgICAgIHRoaXMucHVzaEN4KCk7CiAgICAgIHRoaXMuZXhwZWN0KGFjb3JuLnRva1R5cGVzLnBhcmVuTCk7CiAgICAgIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5zZW1pKSB7IHJldHVybiB0aGlzLnBhcnNlRm9yKG5vZGUsIG51bGwpIH0KICAgICAgdmFyIGlzTGV0ID0gdGhpcy50b2tzLmlzTGV0KCk7CiAgICAgIGlmIChpc0xldCB8fCB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5fdmFyIHx8IHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLl9jb25zdCkgewogICAgICAgIHZhciBpbml0JDEgPSB0aGlzLnBhcnNlVmFyKHRoaXMuc3RhcnROb2RlKCksIHRydWUsIGlzTGV0ID8gImxldCIgOiB0aGlzLnRvay52YWx1ZSk7CiAgICAgICAgaWYgKGluaXQkMS5kZWNsYXJhdGlvbnMubGVuZ3RoID09PSAxICYmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5faW4gfHwgdGhpcy5pc0NvbnRleHR1YWwoIm9mIikpKSB7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDkgJiYgdGhpcy50b2sudHlwZSAhPT0gYWNvcm4udG9rVHlwZXMuX2luKSB7CiAgICAgICAgICAgIG5vZGUuYXdhaXQgPSBpc0F3YWl0OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VGb3JJbihub2RlLCBpbml0JDEpCiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLnBhcnNlRm9yKG5vZGUsIGluaXQkMSkKICAgICAgfQogICAgICB2YXIgaW5pdCA9IHRoaXMucGFyc2VFeHByZXNzaW9uKHRydWUpOwogICAgICBpZiAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuX2luIHx8IHRoaXMuaXNDb250ZXh0dWFsKCJvZiIpKSB7CiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5ICYmIHRoaXMudG9rLnR5cGUgIT09IGFjb3JuLnRva1R5cGVzLl9pbikgewogICAgICAgICAgbm9kZS5hd2FpdCA9IGlzQXdhaXQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLnBhcnNlRm9ySW4obm9kZSwgdGhpcy50b0Fzc2lnbmFibGUoaW5pdCkpCiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMucGFyc2VGb3Iobm9kZSwgaW5pdCkKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9mdW5jdGlvbjoKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIHJldHVybiB0aGlzLnBhcnNlRnVuY3Rpb24obm9kZSwgdHJ1ZSkKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9pZjoKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIG5vZGUudGVzdCA9IHRoaXMucGFyc2VQYXJlbkV4cHJlc3Npb24oKTsKICAgICAgbm9kZS5jb25zZXF1ZW50ID0gdGhpcy5wYXJzZVN0YXRlbWVudCgpOwogICAgICBub2RlLmFsdGVybmF0ZSA9IHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLl9lbHNlKSA/IHRoaXMucGFyc2VTdGF0ZW1lbnQoKSA6IG51bGw7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIklmU3RhdGVtZW50IikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9yZXR1cm46CiAgICAgIHRoaXMubmV4dCgpOwogICAgICBpZiAodGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuc2VtaSkgfHwgdGhpcy5jYW5JbnNlcnRTZW1pY29sb24oKSkgeyBub2RlLmFyZ3VtZW50ID0gbnVsbDsgfQogICAgICBlbHNlIHsgbm9kZS5hcmd1bWVudCA9IHRoaXMucGFyc2VFeHByZXNzaW9uKCk7IHRoaXMuc2VtaWNvbG9uKCk7IH0KICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiUmV0dXJuU3RhdGVtZW50IikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9zd2l0Y2g6CiAgICAgIHZhciBibG9ja0luZGVudCA9IHRoaXMuY3VySW5kZW50LCBsaW5lID0gdGhpcy5jdXJMaW5lU3RhcnQ7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICBub2RlLmRpc2NyaW1pbmFudCA9IHRoaXMucGFyc2VQYXJlbkV4cHJlc3Npb24oKTsKICAgICAgbm9kZS5jYXNlcyA9IFtdOwogICAgICB0aGlzLnB1c2hDeCgpOwogICAgICB0aGlzLmV4cGVjdChhY29ybi50b2tUeXBlcy5icmFjZUwpOwoKICAgICAgdmFyIGN1cjsKICAgICAgd2hpbGUgKCF0aGlzLmNsb3NlcyhhY29ybi50b2tUeXBlcy5icmFjZVIsIGJsb2NrSW5kZW50LCBsaW5lLCB0cnVlKSkgewogICAgICAgIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5fY2FzZSB8fCB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5fZGVmYXVsdCkgewogICAgICAgICAgdmFyIGlzQ2FzZSA9IHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLl9jYXNlOwogICAgICAgICAgaWYgKGN1cikgeyB0aGlzLmZpbmlzaE5vZGUoY3VyLCAiU3dpdGNoQ2FzZSIpOyB9CiAgICAgICAgICBub2RlLmNhc2VzLnB1c2goY3VyID0gdGhpcy5zdGFydE5vZGUoKSk7CiAgICAgICAgICBjdXIuY29uc2VxdWVudCA9IFtdOwogICAgICAgICAgdGhpcy5uZXh0KCk7CiAgICAgICAgICBpZiAoaXNDYXNlKSB7IGN1ci50ZXN0ID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oKTsgfQogICAgICAgICAgZWxzZSB7IGN1ci50ZXN0ID0gbnVsbDsgfQogICAgICAgICAgdGhpcy5leHBlY3QoYWNvcm4udG9rVHlwZXMuY29sb24pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoIWN1cikgewogICAgICAgICAgICBub2RlLmNhc2VzLnB1c2goY3VyID0gdGhpcy5zdGFydE5vZGUoKSk7CiAgICAgICAgICAgIGN1ci5jb25zZXF1ZW50ID0gW107CiAgICAgICAgICAgIGN1ci50ZXN0ID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIGN1ci5jb25zZXF1ZW50LnB1c2godGhpcy5wYXJzZVN0YXRlbWVudCgpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGN1cikgeyB0aGlzLmZpbmlzaE5vZGUoY3VyLCAiU3dpdGNoQ2FzZSIpOyB9CiAgICAgIHRoaXMucG9wQ3goKTsKICAgICAgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuYnJhY2VSKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiU3dpdGNoU3RhdGVtZW50IikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl90aHJvdzoKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIG5vZGUuYXJndW1lbnQgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpOwogICAgICB0aGlzLnNlbWljb2xvbigpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJUaHJvd1N0YXRlbWVudCIpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5fdHJ5OgogICAgICB0aGlzLm5leHQoKTsKICAgICAgbm9kZS5ibG9jayA9IHRoaXMucGFyc2VCbG9jaygpOwogICAgICBub2RlLmhhbmRsZXIgPSBudWxsOwogICAgICBpZiAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuX2NhdGNoKSB7CiAgICAgICAgdmFyIGNsYXVzZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgICAgdGhpcy5uZXh0KCk7CiAgICAgICAgaWYgKHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLnBhcmVuTCkpIHsKICAgICAgICAgIGNsYXVzZS5wYXJhbSA9IHRoaXMudG9Bc3NpZ25hYmxlKHRoaXMucGFyc2VFeHByQXRvbSgpLCB0cnVlKTsKICAgICAgICAgIHRoaXMuZXhwZWN0KGFjb3JuLnRva1R5cGVzLnBhcmVuUik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNsYXVzZS5wYXJhbSA9IG51bGw7CiAgICAgICAgfQogICAgICAgIGNsYXVzZS5ib2R5ID0gdGhpcy5wYXJzZUJsb2NrKCk7CiAgICAgICAgbm9kZS5oYW5kbGVyID0gdGhpcy5maW5pc2hOb2RlKGNsYXVzZSwgIkNhdGNoQ2xhdXNlIik7CiAgICAgIH0KICAgICAgbm9kZS5maW5hbGl6ZXIgPSB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5fZmluYWxseSkgPyB0aGlzLnBhcnNlQmxvY2soKSA6IG51bGw7CiAgICAgIGlmICghbm9kZS5oYW5kbGVyICYmICFub2RlLmZpbmFsaXplcikgeyByZXR1cm4gbm9kZS5ibG9jayB9CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlRyeVN0YXRlbWVudCIpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5fdmFyOgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5fY29uc3Q6CiAgICAgIHJldHVybiB0aGlzLnBhcnNlVmFyKG5vZGUsIGZhbHNlLCBraW5kIHx8IHRoaXMudG9rLnZhbHVlKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuX3doaWxlOgogICAgICB0aGlzLm5leHQoKTsKICAgICAgbm9kZS50ZXN0ID0gdGhpcy5wYXJzZVBhcmVuRXhwcmVzc2lvbigpOwogICAgICBub2RlLmJvZHkgPSB0aGlzLnBhcnNlU3RhdGVtZW50KCk7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIldoaWxlU3RhdGVtZW50IikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl93aXRoOgogICAgICB0aGlzLm5leHQoKTsKICAgICAgbm9kZS5vYmplY3QgPSB0aGlzLnBhcnNlUGFyZW5FeHByZXNzaW9uKCk7CiAgICAgIG5vZGUuYm9keSA9IHRoaXMucGFyc2VTdGF0ZW1lbnQoKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiV2l0aFN0YXRlbWVudCIpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5icmFjZUw6CiAgICAgIHJldHVybiB0aGlzLnBhcnNlQmxvY2soKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuc2VtaToKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkVtcHR5U3RhdGVtZW50IikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9jbGFzczoKICAgICAgcmV0dXJuIHRoaXMucGFyc2VDbGFzcyh0cnVlKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuX2ltcG9ydDoKICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+IDEwKSB7CiAgICAgICAgdmFyIG5leHRUeXBlID0gdGhpcy5sb29rQWhlYWQoMSkudHlwZTsKICAgICAgICBpZiAobmV4dFR5cGUgPT09IGFjb3JuLnRva1R5cGVzLnBhcmVuTCB8fCBuZXh0VHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuZG90KSB7CiAgICAgICAgICBub2RlLmV4cHJlc3Npb24gPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpOwogICAgICAgICAgdGhpcy5zZW1pY29sb24oKTsKICAgICAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkV4cHJlc3Npb25TdGF0ZW1lbnQiKQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMucGFyc2VJbXBvcnQoKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuX2V4cG9ydDoKICAgICAgcmV0dXJuIHRoaXMucGFyc2VFeHBvcnQoKQoKICAgIGRlZmF1bHQ6CiAgICAgIGlmICh0aGlzLnRva3MuaXNBc3luY0Z1bmN0aW9uKCkpIHsKICAgICAgICB0aGlzLm5leHQoKTsKICAgICAgICB0aGlzLm5leHQoKTsKICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUZ1bmN0aW9uKG5vZGUsIHRydWUsIHRydWUpCiAgICAgIH0KICAgICAgdmFyIGV4cHIgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpOwogICAgICBpZiAoaXNEdW1teShleHByKSkgewogICAgICAgIHRoaXMubmV4dCgpOwogICAgICAgIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5lb2YpIHsgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRW1wdHlTdGF0ZW1lbnQiKSB9CiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VTdGF0ZW1lbnQoKQogICAgICB9IGVsc2UgaWYgKHN0YXJ0dHlwZSA9PT0gYWNvcm4udG9rVHlwZXMubmFtZSAmJiBleHByLnR5cGUgPT09ICJJZGVudGlmaWVyIiAmJiB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5jb2xvbikpIHsKICAgICAgICBub2RlLmJvZHkgPSB0aGlzLnBhcnNlU3RhdGVtZW50KCk7CiAgICAgICAgbm9kZS5sYWJlbCA9IGV4cHI7CiAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiTGFiZWxlZFN0YXRlbWVudCIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbm9kZS5leHByZXNzaW9uID0gZXhwcjsKICAgICAgICB0aGlzLnNlbWljb2xvbigpOwogICAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkV4cHJlc3Npb25TdGF0ZW1lbnQiKQogICAgICB9CiAgICB9CiAgfTsKCiAgbHAkMS5wYXJzZUJsb2NrID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICB0aGlzLnB1c2hDeCgpOwogICAgdGhpcy5leHBlY3QoYWNvcm4udG9rVHlwZXMuYnJhY2VMKTsKICAgIHZhciBibG9ja0luZGVudCA9IHRoaXMuY3VySW5kZW50LCBsaW5lID0gdGhpcy5jdXJMaW5lU3RhcnQ7CiAgICBub2RlLmJvZHkgPSBbXTsKICAgIHdoaWxlICghdGhpcy5jbG9zZXMoYWNvcm4udG9rVHlwZXMuYnJhY2VSLCBibG9ja0luZGVudCwgbGluZSwgdHJ1ZSkpCiAgICAgIHsgbm9kZS5ib2R5LnB1c2godGhpcy5wYXJzZVN0YXRlbWVudCgpKTsgfQogICAgdGhpcy5wb3BDeCgpOwogICAgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuYnJhY2VSKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkJsb2NrU3RhdGVtZW50IikKICB9OwoKICBscCQxLnBhcnNlRm9yID0gZnVuY3Rpb24obm9kZSwgaW5pdCkgewogICAgbm9kZS5pbml0ID0gaW5pdDsKICAgIG5vZGUudGVzdCA9IG5vZGUudXBkYXRlID0gbnVsbDsKICAgIGlmICh0aGlzLmVhdChhY29ybi50b2tUeXBlcy5zZW1pKSAmJiB0aGlzLnRvay50eXBlICE9PSBhY29ybi50b2tUeXBlcy5zZW1pKSB7IG5vZGUudGVzdCA9IHRoaXMucGFyc2VFeHByZXNzaW9uKCk7IH0KICAgIGlmICh0aGlzLmVhdChhY29ybi50b2tUeXBlcy5zZW1pKSAmJiB0aGlzLnRvay50eXBlICE9PSBhY29ybi50b2tUeXBlcy5wYXJlblIpIHsgbm9kZS51cGRhdGUgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpOyB9CiAgICB0aGlzLnBvcEN4KCk7CiAgICB0aGlzLmV4cGVjdChhY29ybi50b2tUeXBlcy5wYXJlblIpOwogICAgbm9kZS5ib2R5ID0gdGhpcy5wYXJzZVN0YXRlbWVudCgpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRm9yU3RhdGVtZW50IikKICB9OwoKICBscCQxLnBhcnNlRm9ySW4gPSBmdW5jdGlvbihub2RlLCBpbml0KSB7CiAgICB2YXIgdHlwZSA9IHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLl9pbiA/ICJGb3JJblN0YXRlbWVudCIgOiAiRm9yT2ZTdGF0ZW1lbnQiOwogICAgdGhpcy5uZXh0KCk7CiAgICBub2RlLmxlZnQgPSBpbml0OwogICAgbm9kZS5yaWdodCA9IHRoaXMucGFyc2VFeHByZXNzaW9uKCk7CiAgICB0aGlzLnBvcEN4KCk7CiAgICB0aGlzLmV4cGVjdChhY29ybi50b2tUeXBlcy5wYXJlblIpOwogICAgbm9kZS5ib2R5ID0gdGhpcy5wYXJzZVN0YXRlbWVudCgpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCB0eXBlKQogIH07CgogIGxwJDEucGFyc2VWYXIgPSBmdW5jdGlvbihub2RlLCBub0luLCBraW5kKSB7CiAgICBub2RlLmtpbmQgPSBraW5kOwogICAgdGhpcy5uZXh0KCk7CiAgICBub2RlLmRlY2xhcmF0aW9ucyA9IFtdOwogICAgZG8gewogICAgICB2YXIgZGVjbCA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIGRlY2wuaWQgPSB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNiA/IHRoaXMudG9Bc3NpZ25hYmxlKHRoaXMucGFyc2VFeHByQXRvbSgpLCB0cnVlKSA6IHRoaXMucGFyc2VJZGVudCgpOwogICAgICBkZWNsLmluaXQgPSB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5lcSkgPyB0aGlzLnBhcnNlTWF5YmVBc3NpZ24obm9JbikgOiBudWxsOwogICAgICBub2RlLmRlY2xhcmF0aW9ucy5wdXNoKHRoaXMuZmluaXNoTm9kZShkZWNsLCAiVmFyaWFibGVEZWNsYXJhdG9yIikpOwogICAgfSB3aGlsZSAodGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuY29tbWEpKQogICAgaWYgKCFub2RlLmRlY2xhcmF0aW9ucy5sZW5ndGgpIHsKICAgICAgdmFyIGRlY2wkMSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIGRlY2wkMS5pZCA9IHRoaXMuZHVtbXlJZGVudCgpOwogICAgICBub2RlLmRlY2xhcmF0aW9ucy5wdXNoKHRoaXMuZmluaXNoTm9kZShkZWNsJDEsICJWYXJpYWJsZURlY2xhcmF0b3IiKSk7CiAgICB9CiAgICBpZiAoIW5vSW4pIHsgdGhpcy5zZW1pY29sb24oKTsgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiVmFyaWFibGVEZWNsYXJhdGlvbiIpCiAgfTsKCiAgbHAkMS5wYXJzZUNsYXNzID0gZnVuY3Rpb24oaXNTdGF0ZW1lbnQpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHRoaXMubmV4dCgpOwogICAgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLm5hbWUpIHsgbm9kZS5pZCA9IHRoaXMucGFyc2VJZGVudCgpOyB9CiAgICBlbHNlIGlmIChpc1N0YXRlbWVudCA9PT0gdHJ1ZSkgeyBub2RlLmlkID0gdGhpcy5kdW1teUlkZW50KCk7IH0KICAgIGVsc2UgeyBub2RlLmlkID0gbnVsbDsgfQogICAgbm9kZS5zdXBlckNsYXNzID0gdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuX2V4dGVuZHMpID8gdGhpcy5wYXJzZUV4cHJlc3Npb24oKSA6IG51bGw7CiAgICBub2RlLmJvZHkgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgbm9kZS5ib2R5LmJvZHkgPSBbXTsKICAgIHRoaXMucHVzaEN4KCk7CiAgICB2YXIgaW5kZW50ID0gdGhpcy5jdXJJbmRlbnQgKyAxLCBsaW5lID0gdGhpcy5jdXJMaW5lU3RhcnQ7CiAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5icmFjZUwpOwogICAgaWYgKHRoaXMuY3VySW5kZW50ICsgMSA8IGluZGVudCkgeyBpbmRlbnQgPSB0aGlzLmN1ckluZGVudDsgbGluZSA9IHRoaXMuY3VyTGluZVN0YXJ0OyB9CiAgICB3aGlsZSAoIXRoaXMuY2xvc2VzKGFjb3JuLnRva1R5cGVzLmJyYWNlUiwgaW5kZW50LCBsaW5lKSkgewogICAgICB2YXIgZWxlbWVudCA9IHRoaXMucGFyc2VDbGFzc0VsZW1lbnQoKTsKICAgICAgaWYgKGVsZW1lbnQpIHsgbm9kZS5ib2R5LmJvZHkucHVzaChlbGVtZW50KTsgfQogICAgfQogICAgdGhpcy5wb3BDeCgpOwogICAgaWYgKCF0aGlzLmVhdChhY29ybi50b2tUeXBlcy5icmFjZVIpKSB7CiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGNsb3NpbmcgYnJhY2UsIG1ha2UgdGhlIG5vZGUgc3BhbiB0byB0aGUgc3RhcnQKICAgICAgLy8gb2YgdGhlIG5leHQgdG9rZW4gKHRoaXMgaXMgdXNlZnVsIGZvciBUZXJuKQogICAgICB0aGlzLmxhc3QuZW5kID0gdGhpcy50b2suc3RhcnQ7CiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9jYXRpb25zKSB7IHRoaXMubGFzdC5sb2MuZW5kID0gdGhpcy50b2subG9jLnN0YXJ0OyB9CiAgICB9CiAgICB0aGlzLnNlbWljb2xvbigpOwogICAgdGhpcy5maW5pc2hOb2RlKG5vZGUuYm9keSwgIkNsYXNzQm9keSIpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCBpc1N0YXRlbWVudCA/ICJDbGFzc0RlY2xhcmF0aW9uIiA6ICJDbGFzc0V4cHJlc3Npb24iKQogIH07CgogIGxwJDEucGFyc2VDbGFzc0VsZW1lbnQgPSBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmVhdChhY29ybi50b2tUeXBlcy5zZW1pKSkgeyByZXR1cm4gbnVsbCB9CgogICAgdmFyIHJlZiA9IHRoaXMub3B0aW9uczsKICAgIHZhciBlY21hVmVyc2lvbiA9IHJlZi5lY21hVmVyc2lvbjsKICAgIHZhciBsb2NhdGlvbnMgPSByZWYubG9jYXRpb25zOwogICAgdmFyIGluZGVudCA9IHRoaXMuY3VySW5kZW50OwogICAgdmFyIGxpbmUgPSB0aGlzLmN1ckxpbmVTdGFydDsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHZhciBrZXlOYW1lID0gIiI7CiAgICB2YXIgaXNHZW5lcmF0b3IgPSBmYWxzZTsKICAgIHZhciBpc0FzeW5jID0gZmFsc2U7CiAgICB2YXIga2luZCA9ICJtZXRob2QiOwogICAgdmFyIGlzU3RhdGljID0gZmFsc2U7CgogICAgaWYgKHRoaXMuZWF0Q29udGV4dHVhbCgic3RhdGljIikpIHsKICAgICAgLy8gUGFyc2Ugc3RhdGljIGluaXQgYmxvY2sKICAgICAgaWYgKGVjbWFWZXJzaW9uID49IDEzICYmIHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmJyYWNlTCkpIHsKICAgICAgICB0aGlzLnBhcnNlQ2xhc3NTdGF0aWNCbG9jayhub2RlKTsKICAgICAgICByZXR1cm4gbm9kZQogICAgICB9CiAgICAgIGlmICh0aGlzLmlzQ2xhc3NFbGVtZW50TmFtZVN0YXJ0KCkgfHwgdGhpcy50b2tzLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLnN0YXIpIHsKICAgICAgICBpc1N0YXRpYyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAga2V5TmFtZSA9ICJzdGF0aWMiOwogICAgICB9CiAgICB9CiAgICBub2RlLnN0YXRpYyA9IGlzU3RhdGljOwogICAgaWYgKCFrZXlOYW1lICYmIGVjbWFWZXJzaW9uID49IDggJiYgdGhpcy5lYXRDb250ZXh0dWFsKCJhc3luYyIpKSB7CiAgICAgIGlmICgodGhpcy5pc0NsYXNzRWxlbWVudE5hbWVTdGFydCgpIHx8IHRoaXMudG9rcy50eXBlID09PSBhY29ybi50b2tUeXBlcy5zdGFyKSAmJiAhdGhpcy5jYW5JbnNlcnRTZW1pY29sb24oKSkgewogICAgICAgIGlzQXN5bmMgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIGtleU5hbWUgPSAiYXN5bmMiOwogICAgICB9CiAgICB9CiAgICBpZiAoIWtleU5hbWUpIHsKICAgICAgaXNHZW5lcmF0b3IgPSB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5zdGFyKTsKICAgICAgdmFyIGxhc3RWYWx1ZSA9IHRoaXMudG9rcy52YWx1ZTsKICAgICAgaWYgKHRoaXMuZWF0Q29udGV4dHVhbCgiZ2V0IikgfHwgdGhpcy5lYXRDb250ZXh0dWFsKCJzZXQiKSkgewogICAgICAgIGlmICh0aGlzLmlzQ2xhc3NFbGVtZW50TmFtZVN0YXJ0KCkpIHsKICAgICAgICAgIGtpbmQgPSBsYXN0VmFsdWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGtleU5hbWUgPSBsYXN0VmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgLy8gUGFyc2UgZWxlbWVudCBuYW1lCiAgICBpZiAoa2V5TmFtZSkgewogICAgICAvLyAnYXN5bmMnLCAnZ2V0JywgJ3NldCcsIG9yICdzdGF0aWMnIHdlcmUgbm90IGEga2V5d29yZCBjb250ZXh0dWFsbHkuCiAgICAgIC8vIFRoZSBsYXN0IHRva2VuIGlzIGFueSBvZiB0aG9zZS4gTWFrZSBpdCB0aGUgZWxlbWVudCBuYW1lLgogICAgICBub2RlLmNvbXB1dGVkID0gZmFsc2U7CiAgICAgIG5vZGUua2V5ID0gdGhpcy5zdGFydE5vZGVBdChsb2NhdGlvbnMgPyBbdGhpcy50b2tzLmxhc3RUb2tTdGFydCwgdGhpcy50b2tzLmxhc3RUb2tTdGFydExvY10gOiB0aGlzLnRva3MubGFzdFRva1N0YXJ0KTsKICAgICAgbm9kZS5rZXkubmFtZSA9IGtleU5hbWU7CiAgICAgIHRoaXMuZmluaXNoTm9kZShub2RlLmtleSwgIklkZW50aWZpZXIiKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucGFyc2VDbGFzc0VsZW1lbnROYW1lKG5vZGUpOwoKICAgICAgLy8gRnJvbSBodHRwczovL2dpdGh1Yi5jb20vYWNvcm5qcy9hY29ybi9ibG9iLzdkZWJhNDExMThkNjM4NGEyYzQ5OGM2MTE3NmIzY2Y0MzRmNjk1OTAvYWNvcm4tbG9vc2Uvc3JjL3N0YXRlbWVudC5qcyNMMjkxCiAgICAgIC8vIFNraXAgYnJva2VuIHN0dWZmLgogICAgICBpZiAoaXNEdW1teShub2RlLmtleSkpIHsKICAgICAgICBpZiAoaXNEdW1teSh0aGlzLnBhcnNlTWF5YmVBc3NpZ24oKSkpIHsgdGhpcy5uZXh0KCk7IH0KICAgICAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5jb21tYSk7CiAgICAgICAgcmV0dXJuIG51bGwKICAgICAgfQogICAgfQoKICAgIC8vIFBhcnNlIGVsZW1lbnQgdmFsdWUKICAgIGlmIChlY21hVmVyc2lvbiA8IDEzIHx8IHRoaXMudG9rcy50eXBlID09PSBhY29ybi50b2tUeXBlcy5wYXJlbkwgfHwga2luZCAhPT0gIm1ldGhvZCIgfHwgaXNHZW5lcmF0b3IgfHwgaXNBc3luYykgewogICAgICAvLyBNZXRob2QKICAgICAgdmFyIGlzQ29uc3RydWN0b3IgPQogICAgICAgICFub2RlLmNvbXB1dGVkICYmCiAgICAgICAgIW5vZGUuc3RhdGljICYmCiAgICAgICAgIWlzR2VuZXJhdG9yICYmCiAgICAgICAgIWlzQXN5bmMgJiYKICAgICAgICBraW5kID09PSAibWV0aG9kIiAmJiAoCiAgICAgICAgICBub2RlLmtleS50eXBlID09PSAiSWRlbnRpZmllciIgJiYgbm9kZS5rZXkubmFtZSA9PT0gImNvbnN0cnVjdG9yIiB8fAogICAgICAgICAgbm9kZS5rZXkudHlwZSA9PT0gIkxpdGVyYWwiICYmIG5vZGUua2V5LnZhbHVlID09PSAiY29uc3RydWN0b3IiCiAgICAgICAgKTsKICAgICAgbm9kZS5raW5kID0gaXNDb25zdHJ1Y3RvciA/ICJjb25zdHJ1Y3RvciIgOiBraW5kOwogICAgICBub2RlLnZhbHVlID0gdGhpcy5wYXJzZU1ldGhvZChpc0dlbmVyYXRvciwgaXNBc3luYyk7CiAgICAgIHRoaXMuZmluaXNoTm9kZShub2RlLCAiTWV0aG9kRGVmaW5pdGlvbiIpOwogICAgfSBlbHNlIHsKICAgICAgLy8gRmllbGQKICAgICAgaWYgKHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmVxKSkgewogICAgICAgIGlmICh0aGlzLmN1ckxpbmVTdGFydCAhPT0gbGluZSAmJiB0aGlzLmN1ckluZGVudCA8PSBpbmRlbnQgJiYgdGhpcy50b2tlblN0YXJ0c0xpbmUoKSkgewogICAgICAgICAgLy8gRXN0aW1hdGVkIHRoZSBuZXh0IGxpbmUgaXMgdGhlIG5leHQgY2xhc3MgZWxlbWVudCBieSBpbmRlbnRhdGlvbnMuCiAgICAgICAgICBub2RlLnZhbHVlID0gbnVsbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIG9sZEluQXN5bmMgPSB0aGlzLmluQXN5bmM7CiAgICAgICAgICB2YXIgb2xkSW5HZW5lcmF0b3IgPSB0aGlzLmluR2VuZXJhdG9yOwogICAgICAgICAgdGhpcy5pbkFzeW5jID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmluR2VuZXJhdG9yID0gZmFsc2U7CiAgICAgICAgICBub2RlLnZhbHVlID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKCk7CiAgICAgICAgICB0aGlzLmluQXN5bmMgPSBvbGRJbkFzeW5jOwogICAgICAgICAgdGhpcy5pbkdlbmVyYXRvciA9IG9sZEluR2VuZXJhdG9yOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBub2RlLnZhbHVlID0gbnVsbDsKICAgICAgfQogICAgICB0aGlzLnNlbWljb2xvbigpOwogICAgICB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlByb3BlcnR5RGVmaW5pdGlvbiIpOwogICAgfQoKICAgIHJldHVybiBub2RlCiAgfTsKCiAgbHAkMS5wYXJzZUNsYXNzU3RhdGljQmxvY2sgPSBmdW5jdGlvbihub2RlKSB7CiAgICB2YXIgYmxvY2tJbmRlbnQgPSB0aGlzLmN1ckluZGVudCwgbGluZSA9IHRoaXMuY3VyTGluZVN0YXJ0OwogICAgbm9kZS5ib2R5ID0gW107CiAgICB0aGlzLnB1c2hDeCgpOwogICAgd2hpbGUgKCF0aGlzLmNsb3NlcyhhY29ybi50b2tUeXBlcy5icmFjZVIsIGJsb2NrSW5kZW50LCBsaW5lLCB0cnVlKSkKICAgICAgeyBub2RlLmJvZHkucHVzaCh0aGlzLnBhcnNlU3RhdGVtZW50KCkpOyB9CiAgICB0aGlzLnBvcEN4KCk7CiAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5icmFjZVIpOwoKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlN0YXRpY0Jsb2NrIikKICB9OwoKICBscCQxLmlzQ2xhc3NFbGVtZW50TmFtZVN0YXJ0ID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy50b2tzLmlzQ2xhc3NFbGVtZW50TmFtZVN0YXJ0KCkKICB9OwoKICBscCQxLnBhcnNlQ2xhc3NFbGVtZW50TmFtZSA9IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgIGlmICh0aGlzLnRva3MudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMucHJpdmF0ZUlkKSB7CiAgICAgIGVsZW1lbnQuY29tcHV0ZWQgPSBmYWxzZTsKICAgICAgZWxlbWVudC5rZXkgPSB0aGlzLnBhcnNlUHJpdmF0ZUlkZW50KCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnBhcnNlUHJvcGVydHlOYW1lKGVsZW1lbnQpOwogICAgfQogIH07CgogIGxwJDEucGFyc2VGdW5jdGlvbiA9IGZ1bmN0aW9uKG5vZGUsIGlzU3RhdGVtZW50LCBpc0FzeW5jKSB7CiAgICB2YXIgb2xkSW5Bc3luYyA9IHRoaXMuaW5Bc3luYywgb2xkSW5HZW5lcmF0b3IgPSB0aGlzLmluR2VuZXJhdG9yLCBvbGRJbkZ1bmN0aW9uID0gdGhpcy5pbkZ1bmN0aW9uOwogICAgdGhpcy5pbml0RnVuY3Rpb24obm9kZSk7CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpIHsKICAgICAgbm9kZS5nZW5lcmF0b3IgPSB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5zdGFyKTsKICAgIH0KICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOCkgewogICAgICBub2RlLmFzeW5jID0gISFpc0FzeW5jOwogICAgfQogICAgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLm5hbWUpIHsgbm9kZS5pZCA9IHRoaXMucGFyc2VJZGVudCgpOyB9CiAgICBlbHNlIGlmIChpc1N0YXRlbWVudCA9PT0gdHJ1ZSkgeyBub2RlLmlkID0gdGhpcy5kdW1teUlkZW50KCk7IH0KICAgIHRoaXMuaW5Bc3luYyA9IG5vZGUuYXN5bmM7CiAgICB0aGlzLmluR2VuZXJhdG9yID0gbm9kZS5nZW5lcmF0b3I7CiAgICB0aGlzLmluRnVuY3Rpb24gPSB0cnVlOwogICAgbm9kZS5wYXJhbXMgPSB0aGlzLnBhcnNlRnVuY3Rpb25QYXJhbXMoKTsKICAgIG5vZGUuYm9keSA9IHRoaXMucGFyc2VCbG9jaygpOwogICAgdGhpcy50b2tzLmFkYXB0RGlyZWN0aXZlUHJvbG9ndWUobm9kZS5ib2R5LmJvZHkpOwogICAgdGhpcy5pbkFzeW5jID0gb2xkSW5Bc3luYzsKICAgIHRoaXMuaW5HZW5lcmF0b3IgPSBvbGRJbkdlbmVyYXRvcjsKICAgIHRoaXMuaW5GdW5jdGlvbiA9IG9sZEluRnVuY3Rpb247CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsIGlzU3RhdGVtZW50ID8gIkZ1bmN0aW9uRGVjbGFyYXRpb24iIDogIkZ1bmN0aW9uRXhwcmVzc2lvbiIpCiAgfTsKCiAgbHAkMS5wYXJzZUV4cG9ydCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgdGhpcy5uZXh0KCk7CiAgICBpZiAodGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuc3RhcikpIHsKICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSAxMSkgewogICAgICAgIGlmICh0aGlzLmVhdENvbnRleHR1YWwoImFzIikpIHsKICAgICAgICAgIG5vZGUuZXhwb3J0ZWQgPSB0aGlzLnBhcnNlRXhwckF0b20oKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbm9kZS5leHBvcnRlZCA9IG51bGw7CiAgICAgICAgfQogICAgICB9CiAgICAgIG5vZGUuc291cmNlID0gdGhpcy5lYXRDb250ZXh0dWFsKCJmcm9tIikgPyB0aGlzLnBhcnNlRXhwckF0b20oKSA6IHRoaXMuZHVtbXlTdHJpbmcoKTsKICAgICAgdGhpcy5zZW1pY29sb24oKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRXhwb3J0QWxsRGVjbGFyYXRpb24iKQogICAgfQogICAgaWYgKHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLl9kZWZhdWx0KSkgewogICAgICAvLyBleHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gZm9vKCkge30pIC8vIFRoaXMgaXMgRnVuY3Rpb25FeHByZXNzaW9uLgogICAgICB2YXIgaXNBc3luYzsKICAgICAgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLl9mdW5jdGlvbiB8fCAoaXNBc3luYyA9IHRoaXMudG9rcy5pc0FzeW5jRnVuY3Rpb24oKSkpIHsKICAgICAgICB2YXIgZk5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICAgIHRoaXMubmV4dCgpOwogICAgICAgIGlmIChpc0FzeW5jKSB7IHRoaXMubmV4dCgpOyB9CiAgICAgICAgbm9kZS5kZWNsYXJhdGlvbiA9IHRoaXMucGFyc2VGdW5jdGlvbihmTm9kZSwgIm51bGxhYmxlSUQiLCBpc0FzeW5jKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5fY2xhc3MpIHsKICAgICAgICBub2RlLmRlY2xhcmF0aW9uID0gdGhpcy5wYXJzZUNsYXNzKCJudWxsYWJsZUlEIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbm9kZS5kZWNsYXJhdGlvbiA9IHRoaXMucGFyc2VNYXliZUFzc2lnbigpOwogICAgICAgIHRoaXMuc2VtaWNvbG9uKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uIikKICAgIH0KICAgIGlmICh0aGlzLnRvay50eXBlLmtleXdvcmQgfHwgdGhpcy50b2tzLmlzTGV0KCkgfHwgdGhpcy50b2tzLmlzQXN5bmNGdW5jdGlvbigpKSB7CiAgICAgIG5vZGUuZGVjbGFyYXRpb24gPSB0aGlzLnBhcnNlU3RhdGVtZW50KCk7CiAgICAgIG5vZGUuc3BlY2lmaWVycyA9IFtdOwogICAgICBub2RlLnNvdXJjZSA9IG51bGw7CiAgICB9IGVsc2UgewogICAgICBub2RlLmRlY2xhcmF0aW9uID0gbnVsbDsKICAgICAgbm9kZS5zcGVjaWZpZXJzID0gdGhpcy5wYXJzZUV4cG9ydFNwZWNpZmllckxpc3QoKTsKICAgICAgbm9kZS5zb3VyY2UgPSB0aGlzLmVhdENvbnRleHR1YWwoImZyb20iKSA/IHRoaXMucGFyc2VFeHByQXRvbSgpIDogbnVsbDsKICAgICAgdGhpcy5zZW1pY29sb24oKTsKICAgIH0KICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkV4cG9ydE5hbWVkRGVjbGFyYXRpb24iKQogIH07CgogIGxwJDEucGFyc2VJbXBvcnQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHRoaXMubmV4dCgpOwogICAgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLnN0cmluZykgewogICAgICBub2RlLnNwZWNpZmllcnMgPSBbXTsKICAgICAgbm9kZS5zb3VyY2UgPSB0aGlzLnBhcnNlRXhwckF0b20oKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBlbHQ7CiAgICAgIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5uYW1lICYmIHRoaXMudG9rLnZhbHVlICE9PSAiZnJvbSIpIHsKICAgICAgICBlbHQgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICAgIGVsdC5sb2NhbCA9IHRoaXMucGFyc2VJZGVudCgpOwogICAgICAgIHRoaXMuZmluaXNoTm9kZShlbHQsICJJbXBvcnREZWZhdWx0U3BlY2lmaWVyIik7CiAgICAgICAgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuY29tbWEpOwogICAgICB9CiAgICAgIG5vZGUuc3BlY2lmaWVycyA9IHRoaXMucGFyc2VJbXBvcnRTcGVjaWZpZXJzKCk7CiAgICAgIG5vZGUuc291cmNlID0gdGhpcy5lYXRDb250ZXh0dWFsKCJmcm9tIikgJiYgdGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuc3RyaW5nID8gdGhpcy5wYXJzZUV4cHJBdG9tKCkgOiB0aGlzLmR1bW15U3RyaW5nKCk7CiAgICAgIGlmIChlbHQpIHsgbm9kZS5zcGVjaWZpZXJzLnVuc2hpZnQoZWx0KTsgfQogICAgfQogICAgdGhpcy5zZW1pY29sb24oKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkltcG9ydERlY2xhcmF0aW9uIikKICB9OwoKICBscCQxLnBhcnNlSW1wb3J0U3BlY2lmaWVycyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGVsdHMgPSBbXTsKICAgIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5zdGFyKSB7CiAgICAgIHZhciBlbHQgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICB0aGlzLm5leHQoKTsKICAgICAgZWx0LmxvY2FsID0gdGhpcy5lYXRDb250ZXh0dWFsKCJhcyIpID8gdGhpcy5wYXJzZUlkZW50KCkgOiB0aGlzLmR1bW15SWRlbnQoKTsKICAgICAgZWx0cy5wdXNoKHRoaXMuZmluaXNoTm9kZShlbHQsICJJbXBvcnROYW1lc3BhY2VTcGVjaWZpZXIiKSk7CiAgICB9IGVsc2UgewogICAgICB2YXIgaW5kZW50ID0gdGhpcy5jdXJJbmRlbnQsIGxpbmUgPSB0aGlzLmN1ckxpbmVTdGFydCwgY29udGludWVkTGluZSA9IHRoaXMubmV4dExpbmVTdGFydDsKICAgICAgdGhpcy5wdXNoQ3goKTsKICAgICAgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuYnJhY2VMKTsKICAgICAgaWYgKHRoaXMuY3VyTGluZVN0YXJ0ID4gY29udGludWVkTGluZSkgeyBjb250aW51ZWRMaW5lID0gdGhpcy5jdXJMaW5lU3RhcnQ7IH0KICAgICAgd2hpbGUgKCF0aGlzLmNsb3NlcyhhY29ybi50b2tUeXBlcy5icmFjZVIsIGluZGVudCArICh0aGlzLmN1ckxpbmVTdGFydCA8PSBjb250aW51ZWRMaW5lID8gMSA6IDApLCBsaW5lKSkgewogICAgICAgIHZhciBlbHQkMSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgICAgaWYgKHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLnN0YXIpKSB7CiAgICAgICAgICBlbHQkMS5sb2NhbCA9IHRoaXMuZWF0Q29udGV4dHVhbCgiYXMiKSA/IHRoaXMucGFyc2VNb2R1bGVFeHBvcnROYW1lKCkgOiB0aGlzLmR1bW15SWRlbnQoKTsKICAgICAgICAgIHRoaXMuZmluaXNoTm9kZShlbHQkMSwgIkltcG9ydE5hbWVzcGFjZVNwZWNpZmllciIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodGhpcy5pc0NvbnRleHR1YWwoImZyb20iKSkgeyBicmVhayB9CiAgICAgICAgICBlbHQkMS5pbXBvcnRlZCA9IHRoaXMucGFyc2VNb2R1bGVFeHBvcnROYW1lKCk7CiAgICAgICAgICBpZiAoaXNEdW1teShlbHQkMS5pbXBvcnRlZCkpIHsgYnJlYWsgfQogICAgICAgICAgZWx0JDEubG9jYWwgPSB0aGlzLmVhdENvbnRleHR1YWwoImFzIikgPyB0aGlzLnBhcnNlTW9kdWxlRXhwb3J0TmFtZSgpIDogZWx0JDEuaW1wb3J0ZWQ7CiAgICAgICAgICB0aGlzLmZpbmlzaE5vZGUoZWx0JDEsICJJbXBvcnRTcGVjaWZpZXIiKTsKICAgICAgICB9CiAgICAgICAgZWx0cy5wdXNoKGVsdCQxKTsKICAgICAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5jb21tYSk7CiAgICAgIH0KICAgICAgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuYnJhY2VSKTsKICAgICAgdGhpcy5wb3BDeCgpOwogICAgfQogICAgcmV0dXJuIGVsdHMKICB9OwoKICBscCQxLnBhcnNlRXhwb3J0U3BlY2lmaWVyTGlzdCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGVsdHMgPSBbXTsKICAgIHZhciBpbmRlbnQgPSB0aGlzLmN1ckluZGVudCwgbGluZSA9IHRoaXMuY3VyTGluZVN0YXJ0LCBjb250aW51ZWRMaW5lID0gdGhpcy5uZXh0TGluZVN0YXJ0OwogICAgdGhpcy5wdXNoQ3goKTsKICAgIHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmJyYWNlTCk7CiAgICBpZiAodGhpcy5jdXJMaW5lU3RhcnQgPiBjb250aW51ZWRMaW5lKSB7IGNvbnRpbnVlZExpbmUgPSB0aGlzLmN1ckxpbmVTdGFydDsgfQogICAgd2hpbGUgKCF0aGlzLmNsb3NlcyhhY29ybi50b2tUeXBlcy5icmFjZVIsIGluZGVudCArICh0aGlzLmN1ckxpbmVTdGFydCA8PSBjb250aW51ZWRMaW5lID8gMSA6IDApLCBsaW5lKSkgewogICAgICBpZiAodGhpcy5pc0NvbnRleHR1YWwoImZyb20iKSkgeyBicmVhayB9CiAgICAgIHZhciBlbHQgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICBlbHQubG9jYWwgPSB0aGlzLnBhcnNlTW9kdWxlRXhwb3J0TmFtZSgpOwogICAgICBpZiAoaXNEdW1teShlbHQubG9jYWwpKSB7IGJyZWFrIH0KICAgICAgZWx0LmV4cG9ydGVkID0gdGhpcy5lYXRDb250ZXh0dWFsKCJhcyIpID8gdGhpcy5wYXJzZU1vZHVsZUV4cG9ydE5hbWUoKSA6IGVsdC5sb2NhbDsKICAgICAgdGhpcy5maW5pc2hOb2RlKGVsdCwgIkV4cG9ydFNwZWNpZmllciIpOwogICAgICBlbHRzLnB1c2goZWx0KTsKICAgICAgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuY29tbWEpOwogICAgfQogICAgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuYnJhY2VSKTsKICAgIHRoaXMucG9wQ3goKTsKICAgIHJldHVybiBlbHRzCiAgfTsKCiAgbHAkMS5wYXJzZU1vZHVsZUV4cG9ydE5hbWUgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTMgJiYgdGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuc3RyaW5nCiAgICAgID8gdGhpcy5wYXJzZUV4cHJBdG9tKCkKICAgICAgOiB0aGlzLnBhcnNlSWRlbnQoKQogIH07CgogIHZhciBscCA9IExvb3NlUGFyc2VyLnByb3RvdHlwZTsKCiAgbHAuY2hlY2tMVmFsID0gZnVuY3Rpb24oZXhwcikgewogICAgaWYgKCFleHByKSB7IHJldHVybiBleHByIH0KICAgIHN3aXRjaCAoZXhwci50eXBlKSB7CiAgICBjYXNlICJJZGVudGlmaWVyIjoKICAgIGNhc2UgIk1lbWJlckV4cHJlc3Npb24iOgogICAgICByZXR1cm4gZXhwcgoKICAgIGNhc2UgIlBhcmVudGhlc2l6ZWRFeHByZXNzaW9uIjoKICAgICAgZXhwci5leHByZXNzaW9uID0gdGhpcy5jaGVja0xWYWwoZXhwci5leHByZXNzaW9uKTsKICAgICAgcmV0dXJuIGV4cHIKCiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gdGhpcy5kdW1teUlkZW50KCkKICAgIH0KICB9OwoKICBscC5wYXJzZUV4cHJlc3Npb24gPSBmdW5jdGlvbihub0luKSB7CiAgICB2YXIgc3RhcnQgPSB0aGlzLnN0b3JlQ3VycmVudFBvcygpOwogICAgdmFyIGV4cHIgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24obm9Jbik7CiAgICBpZiAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuY29tbWEpIHsKICAgICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0KTsKICAgICAgbm9kZS5leHByZXNzaW9ucyA9IFtleHByXTsKICAgICAgd2hpbGUgKHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmNvbW1hKSkgeyBub2RlLmV4cHJlc3Npb25zLnB1c2godGhpcy5wYXJzZU1heWJlQXNzaWduKG5vSW4pKTsgfQogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJTZXF1ZW5jZUV4cHJlc3Npb24iKQogICAgfQogICAgcmV0dXJuIGV4cHIKICB9OwoKICBscC5wYXJzZVBhcmVuRXhwcmVzc2lvbiA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5wdXNoQ3goKTsKICAgIHRoaXMuZXhwZWN0KGFjb3JuLnRva1R5cGVzLnBhcmVuTCk7CiAgICB2YXIgdmFsID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oKTsKICAgIHRoaXMucG9wQ3goKTsKICAgIHRoaXMuZXhwZWN0KGFjb3JuLnRva1R5cGVzLnBhcmVuUik7CiAgICByZXR1cm4gdmFsCiAgfTsKCiAgbHAucGFyc2VNYXliZUFzc2lnbiA9IGZ1bmN0aW9uKG5vSW4pIHsKICAgIC8vIGB5aWVsZGAgc2hvdWxkIGJlIGFuIGlkZW50aWZpZXIgcmVmZXJlbmNlIGlmIGl0J3Mgbm90IGluIGdlbmVyYXRvciBmdW5jdGlvbnMuCiAgICBpZiAodGhpcy5pbkdlbmVyYXRvciAmJiB0aGlzLnRva3MuaXNDb250ZXh0dWFsKCJ5aWVsZCIpKSB7CiAgICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIGlmICh0aGlzLnNlbWljb2xvbigpIHx8IHRoaXMuY2FuSW5zZXJ0U2VtaWNvbG9uKCkgfHwgKHRoaXMudG9rLnR5cGUgIT09IGFjb3JuLnRva1R5cGVzLnN0YXIgJiYgIXRoaXMudG9rLnR5cGUuc3RhcnRzRXhwcikpIHsKICAgICAgICBub2RlLmRlbGVnYXRlID0gZmFsc2U7CiAgICAgICAgbm9kZS5hcmd1bWVudCA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbm9kZS5kZWxlZ2F0ZSA9IHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLnN0YXIpOwogICAgICAgIG5vZGUuYXJndW1lbnQgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJZaWVsZEV4cHJlc3Npb24iKQogICAgfQoKICAgIHZhciBzdGFydCA9IHRoaXMuc3RvcmVDdXJyZW50UG9zKCk7CiAgICB2YXIgbGVmdCA9IHRoaXMucGFyc2VNYXliZUNvbmRpdGlvbmFsKG5vSW4pOwogICAgaWYgKHRoaXMudG9rLnR5cGUuaXNBc3NpZ24pIHsKICAgICAgdmFyIG5vZGUkMSA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnQpOwogICAgICBub2RlJDEub3BlcmF0b3IgPSB0aGlzLnRvay52YWx1ZTsKICAgICAgbm9kZSQxLmxlZnQgPSB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5lcSA/IHRoaXMudG9Bc3NpZ25hYmxlKGxlZnQpIDogdGhpcy5jaGVja0xWYWwobGVmdCk7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICBub2RlJDEucmlnaHQgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24obm9Jbik7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSQxLCAiQXNzaWdubWVudEV4cHJlc3Npb24iKQogICAgfQogICAgcmV0dXJuIGxlZnQKICB9OwoKICBscC5wYXJzZU1heWJlQ29uZGl0aW9uYWwgPSBmdW5jdGlvbihub0luKSB7CiAgICB2YXIgc3RhcnQgPSB0aGlzLnN0b3JlQ3VycmVudFBvcygpOwogICAgdmFyIGV4cHIgPSB0aGlzLnBhcnNlRXhwck9wcyhub0luKTsKICAgIGlmICh0aGlzLmVhdChhY29ybi50b2tUeXBlcy5xdWVzdGlvbikpIHsKICAgICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0KTsKICAgICAgbm9kZS50ZXN0ID0gZXhwcjsKICAgICAgbm9kZS5jb25zZXF1ZW50ID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKCk7CiAgICAgIG5vZGUuYWx0ZXJuYXRlID0gdGhpcy5leHBlY3QoYWNvcm4udG9rVHlwZXMuY29sb24pID8gdGhpcy5wYXJzZU1heWJlQXNzaWduKG5vSW4pIDogdGhpcy5kdW1teUlkZW50KCk7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkNvbmRpdGlvbmFsRXhwcmVzc2lvbiIpCiAgICB9CiAgICByZXR1cm4gZXhwcgogIH07CgogIGxwLnBhcnNlRXhwck9wcyA9IGZ1bmN0aW9uKG5vSW4pIHsKICAgIHZhciBzdGFydCA9IHRoaXMuc3RvcmVDdXJyZW50UG9zKCk7CiAgICB2YXIgaW5kZW50ID0gdGhpcy5jdXJJbmRlbnQsIGxpbmUgPSB0aGlzLmN1ckxpbmVTdGFydDsKICAgIHJldHVybiB0aGlzLnBhcnNlRXhwck9wKHRoaXMucGFyc2VNYXliZVVuYXJ5KGZhbHNlKSwgc3RhcnQsIC0xLCBub0luLCBpbmRlbnQsIGxpbmUpCiAgfTsKCiAgbHAucGFyc2VFeHByT3AgPSBmdW5jdGlvbihsZWZ0LCBzdGFydCwgbWluUHJlYywgbm9JbiwgaW5kZW50LCBsaW5lKSB7CiAgICBpZiAodGhpcy5jdXJMaW5lU3RhcnQgIT09IGxpbmUgJiYgdGhpcy5jdXJJbmRlbnQgPCBpbmRlbnQgJiYgdGhpcy50b2tlblN0YXJ0c0xpbmUoKSkgeyByZXR1cm4gbGVmdCB9CiAgICB2YXIgcHJlYyA9IHRoaXMudG9rLnR5cGUuYmlub3A7CiAgICBpZiAocHJlYyAhPSBudWxsICYmICghbm9JbiB8fCB0aGlzLnRvay50eXBlICE9PSBhY29ybi50b2tUeXBlcy5faW4pKSB7CiAgICAgIGlmIChwcmVjID4gbWluUHJlYykgewogICAgICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGVBdChzdGFydCk7CiAgICAgICAgbm9kZS5sZWZ0ID0gbGVmdDsKICAgICAgICBub2RlLm9wZXJhdG9yID0gdGhpcy50b2sudmFsdWU7CiAgICAgICAgdGhpcy5uZXh0KCk7CiAgICAgICAgaWYgKHRoaXMuY3VyTGluZVN0YXJ0ICE9PSBsaW5lICYmIHRoaXMuY3VySW5kZW50IDwgaW5kZW50ICYmIHRoaXMudG9rZW5TdGFydHNMaW5lKCkpIHsKICAgICAgICAgIG5vZGUucmlnaHQgPSB0aGlzLmR1bW15SWRlbnQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIHJpZ2h0U3RhcnQgPSB0aGlzLnN0b3JlQ3VycmVudFBvcygpOwogICAgICAgICAgbm9kZS5yaWdodCA9IHRoaXMucGFyc2VFeHByT3AodGhpcy5wYXJzZU1heWJlVW5hcnkoZmFsc2UpLCByaWdodFN0YXJ0LCBwcmVjLCBub0luLCBpbmRlbnQsIGxpbmUpOwogICAgICAgIH0KICAgICAgICB0aGlzLmZpbmlzaE5vZGUobm9kZSwgLyYmfFx8XHx8XD9cPy8udGVzdChub2RlLm9wZXJhdG9yKSA/ICJMb2dpY2FsRXhwcmVzc2lvbiIgOiAiQmluYXJ5RXhwcmVzc2lvbiIpOwogICAgICAgIHJldHVybiB0aGlzLnBhcnNlRXhwck9wKG5vZGUsIHN0YXJ0LCBtaW5QcmVjLCBub0luLCBpbmRlbnQsIGxpbmUpCiAgICAgIH0KICAgIH0KICAgIHJldHVybiBsZWZ0CiAgfTsKCiAgbHAucGFyc2VNYXliZVVuYXJ5ID0gZnVuY3Rpb24oc2F3VW5hcnkpIHsKICAgIHZhciBzdGFydCA9IHRoaXMuc3RvcmVDdXJyZW50UG9zKCksIGV4cHI7CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDggJiYgdGhpcy50b2tzLmlzQ29udGV4dHVhbCgiYXdhaXQiKSAmJgogICAgICAgICh0aGlzLmluQXN5bmMgfHwgKHRoaXMudG9rcy5pbk1vZHVsZSAmJiB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTMpIHx8CiAgICAgICAgICghdGhpcy5pbkZ1bmN0aW9uICYmIHRoaXMub3B0aW9ucy5hbGxvd0F3YWl0T3V0c2lkZUZ1bmN0aW9uKSkpIHsKICAgICAgZXhwciA9IHRoaXMucGFyc2VBd2FpdCgpOwogICAgICBzYXdVbmFyeSA9IHRydWU7CiAgICB9IGVsc2UgaWYgKHRoaXMudG9rLnR5cGUucHJlZml4KSB7CiAgICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKSwgdXBkYXRlID0gdGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuaW5jRGVjOwogICAgICBpZiAoIXVwZGF0ZSkgeyBzYXdVbmFyeSA9IHRydWU7IH0KICAgICAgbm9kZS5vcGVyYXRvciA9IHRoaXMudG9rLnZhbHVlOwogICAgICBub2RlLnByZWZpeCA9IHRydWU7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICBub2RlLmFyZ3VtZW50ID0gdGhpcy5wYXJzZU1heWJlVW5hcnkodHJ1ZSk7CiAgICAgIGlmICh1cGRhdGUpIHsgbm9kZS5hcmd1bWVudCA9IHRoaXMuY2hlY2tMVmFsKG5vZGUuYXJndW1lbnQpOyB9CiAgICAgIGV4cHIgPSB0aGlzLmZpbmlzaE5vZGUobm9kZSwgdXBkYXRlID8gIlVwZGF0ZUV4cHJlc3Npb24iIDogIlVuYXJ5RXhwcmVzc2lvbiIpOwogICAgfSBlbHNlIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5lbGxpcHNpcykgewogICAgICB2YXIgbm9kZSQxID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIG5vZGUkMS5hcmd1bWVudCA9IHRoaXMucGFyc2VNYXliZVVuYXJ5KHNhd1VuYXJ5KTsKICAgICAgZXhwciA9IHRoaXMuZmluaXNoTm9kZShub2RlJDEsICJTcHJlYWRFbGVtZW50Iik7CiAgICB9IGVsc2UgaWYgKCFzYXdVbmFyeSAmJiB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5wcml2YXRlSWQpIHsKICAgICAgZXhwciA9IHRoaXMucGFyc2VQcml2YXRlSWRlbnQoKTsKICAgIH0gZWxzZSB7CiAgICAgIGV4cHIgPSB0aGlzLnBhcnNlRXhwclN1YnNjcmlwdHMoKTsKICAgICAgd2hpbGUgKHRoaXMudG9rLnR5cGUucG9zdGZpeCAmJiAhdGhpcy5jYW5JbnNlcnRTZW1pY29sb24oKSkgewogICAgICAgIHZhciBub2RlJDIgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0KTsKICAgICAgICBub2RlJDIub3BlcmF0b3IgPSB0aGlzLnRvay52YWx1ZTsKICAgICAgICBub2RlJDIucHJlZml4ID0gZmFsc2U7CiAgICAgICAgbm9kZSQyLmFyZ3VtZW50ID0gdGhpcy5jaGVja0xWYWwoZXhwcik7CiAgICAgICAgdGhpcy5uZXh0KCk7CiAgICAgICAgZXhwciA9IHRoaXMuZmluaXNoTm9kZShub2RlJDIsICJVcGRhdGVFeHByZXNzaW9uIik7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoIXNhd1VuYXJ5ICYmIHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLnN0YXJzdGFyKSkgewogICAgICB2YXIgbm9kZSQzID0gdGhpcy5zdGFydE5vZGVBdChzdGFydCk7CiAgICAgIG5vZGUkMy5vcGVyYXRvciA9ICIqKiI7CiAgICAgIG5vZGUkMy5sZWZ0ID0gZXhwcjsKICAgICAgbm9kZSQzLnJpZ2h0ID0gdGhpcy5wYXJzZU1heWJlVW5hcnkoZmFsc2UpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUkMywgIkJpbmFyeUV4cHJlc3Npb24iKQogICAgfQoKICAgIHJldHVybiBleHByCiAgfTsKCiAgbHAucGFyc2VFeHByU3Vic2NyaXB0cyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIHN0YXJ0ID0gdGhpcy5zdG9yZUN1cnJlbnRQb3MoKTsKICAgIHJldHVybiB0aGlzLnBhcnNlU3Vic2NyaXB0cyh0aGlzLnBhcnNlRXhwckF0b20oKSwgc3RhcnQsIGZhbHNlLCB0aGlzLmN1ckluZGVudCwgdGhpcy5jdXJMaW5lU3RhcnQpCiAgfTsKCiAgbHAucGFyc2VTdWJzY3JpcHRzID0gZnVuY3Rpb24oYmFzZSwgc3RhcnQsIG5vQ2FsbHMsIHN0YXJ0SW5kZW50LCBsaW5lKSB7CiAgICB2YXIgb3B0aW9uYWxTdXBwb3J0ZWQgPSB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTE7CiAgICB2YXIgb3B0aW9uYWxDaGFpbmVkID0gZmFsc2U7CiAgICBmb3IgKDs7KSB7CiAgICAgIGlmICh0aGlzLmN1ckxpbmVTdGFydCAhPT0gbGluZSAmJiB0aGlzLmN1ckluZGVudCA8PSBzdGFydEluZGVudCAmJiB0aGlzLnRva2VuU3RhcnRzTGluZSgpKSB7CiAgICAgICAgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLmRvdCAmJiB0aGlzLmN1ckluZGVudCA9PT0gc3RhcnRJbmRlbnQpCiAgICAgICAgICB7IC0tc3RhcnRJbmRlbnQ7IH0KICAgICAgICBlbHNlCiAgICAgICAgICB7IGJyZWFrIH0KICAgICAgfQoKICAgICAgdmFyIG1heWJlQXN5bmNBcnJvdyA9IGJhc2UudHlwZSA9PT0gIklkZW50aWZpZXIiICYmIGJhc2UubmFtZSA9PT0gImFzeW5jIiAmJiAhdGhpcy5jYW5JbnNlcnRTZW1pY29sb24oKTsKICAgICAgdmFyIG9wdGlvbmFsID0gb3B0aW9uYWxTdXBwb3J0ZWQgJiYgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMucXVlc3Rpb25Eb3QpOwogICAgICBpZiAob3B0aW9uYWwpIHsKICAgICAgICBvcHRpb25hbENoYWluZWQgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAoKG9wdGlvbmFsICYmIHRoaXMudG9rLnR5cGUgIT09IGFjb3JuLnRva1R5cGVzLnBhcmVuTCAmJiB0aGlzLnRvay50eXBlICE9PSBhY29ybi50b2tUeXBlcy5icmFja2V0TCAmJiB0aGlzLnRvay50eXBlICE9PSBhY29ybi50b2tUeXBlcy5iYWNrUXVvdGUpIHx8IHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmRvdCkpIHsKICAgICAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnQpOwogICAgICAgIG5vZGUub2JqZWN0ID0gYmFzZTsKICAgICAgICBpZiAodGhpcy5jdXJMaW5lU3RhcnQgIT09IGxpbmUgJiYgdGhpcy5jdXJJbmRlbnQgPD0gc3RhcnRJbmRlbnQgJiYgdGhpcy50b2tlblN0YXJ0c0xpbmUoKSkKICAgICAgICAgIHsgbm9kZS5wcm9wZXJ0eSA9IHRoaXMuZHVtbXlJZGVudCgpOyB9CiAgICAgICAgZWxzZQogICAgICAgICAgeyBub2RlLnByb3BlcnR5ID0gdGhpcy5wYXJzZVByb3BlcnR5QWNjZXNzb3IoKSB8fCB0aGlzLmR1bW15SWRlbnQoKTsgfQogICAgICAgIG5vZGUuY29tcHV0ZWQgPSBmYWxzZTsKICAgICAgICBpZiAob3B0aW9uYWxTdXBwb3J0ZWQpIHsKICAgICAgICAgIG5vZGUub3B0aW9uYWwgPSBvcHRpb25hbDsKICAgICAgICB9CiAgICAgICAgYmFzZSA9IHRoaXMuZmluaXNoTm9kZShub2RlLCAiTWVtYmVyRXhwcmVzc2lvbiIpOwogICAgICB9IGVsc2UgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLmJyYWNrZXRMKSB7CiAgICAgICAgdGhpcy5wdXNoQ3goKTsKICAgICAgICB0aGlzLm5leHQoKTsKICAgICAgICB2YXIgbm9kZSQxID0gdGhpcy5zdGFydE5vZGVBdChzdGFydCk7CiAgICAgICAgbm9kZSQxLm9iamVjdCA9IGJhc2U7CiAgICAgICAgbm9kZSQxLnByb3BlcnR5ID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oKTsKICAgICAgICBub2RlJDEuY29tcHV0ZWQgPSB0cnVlOwogICAgICAgIGlmIChvcHRpb25hbFN1cHBvcnRlZCkgewogICAgICAgICAgbm9kZSQxLm9wdGlvbmFsID0gb3B0aW9uYWw7CiAgICAgICAgfQogICAgICAgIHRoaXMucG9wQ3goKTsKICAgICAgICB0aGlzLmV4cGVjdChhY29ybi50b2tUeXBlcy5icmFja2V0Uik7CiAgICAgICAgYmFzZSA9IHRoaXMuZmluaXNoTm9kZShub2RlJDEsICJNZW1iZXJFeHByZXNzaW9uIik7CiAgICAgIH0gZWxzZSBpZiAoIW5vQ2FsbHMgJiYgdGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMucGFyZW5MKSB7CiAgICAgICAgdmFyIGV4cHJMaXN0ID0gdGhpcy5wYXJzZUV4cHJMaXN0KGFjb3JuLnRva1R5cGVzLnBhcmVuUik7CiAgICAgICAgaWYgKG1heWJlQXN5bmNBcnJvdyAmJiB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5hcnJvdykpCiAgICAgICAgICB7IHJldHVybiB0aGlzLnBhcnNlQXJyb3dFeHByZXNzaW9uKHRoaXMuc3RhcnROb2RlQXQoc3RhcnQpLCBleHByTGlzdCwgdHJ1ZSkgfQogICAgICAgIHZhciBub2RlJDIgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0KTsKICAgICAgICBub2RlJDIuY2FsbGVlID0gYmFzZTsKICAgICAgICBub2RlJDIuYXJndW1lbnRzID0gZXhwckxpc3Q7CiAgICAgICAgaWYgKG9wdGlvbmFsU3VwcG9ydGVkKSB7CiAgICAgICAgICBub2RlJDIub3B0aW9uYWwgPSBvcHRpb25hbDsKICAgICAgICB9CiAgICAgICAgYmFzZSA9IHRoaXMuZmluaXNoTm9kZShub2RlJDIsICJDYWxsRXhwcmVzc2lvbiIpOwogICAgICB9IGVsc2UgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLmJhY2tRdW90ZSkgewogICAgICAgIHZhciBub2RlJDMgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0KTsKICAgICAgICBub2RlJDMudGFnID0gYmFzZTsKICAgICAgICBub2RlJDMucXVhc2kgPSB0aGlzLnBhcnNlVGVtcGxhdGUoKTsKICAgICAgICBiYXNlID0gdGhpcy5maW5pc2hOb2RlKG5vZGUkMywgIlRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbiIpOwogICAgICB9IGVsc2UgewogICAgICAgIGJyZWFrCiAgICAgIH0KICAgIH0KCiAgICBpZiAob3B0aW9uYWxDaGFpbmVkKSB7CiAgICAgIHZhciBjaGFpbk5vZGUgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0KTsKICAgICAgY2hhaW5Ob2RlLmV4cHJlc3Npb24gPSBiYXNlOwogICAgICBiYXNlID0gdGhpcy5maW5pc2hOb2RlKGNoYWluTm9kZSwgIkNoYWluRXhwcmVzc2lvbiIpOwogICAgfQogICAgcmV0dXJuIGJhc2UKICB9OwoKICBscC5wYXJzZUV4cHJBdG9tID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgbm9kZTsKICAgIHN3aXRjaCAodGhpcy50b2sudHlwZSkgewogICAgY2FzZSBhY29ybi50b2tUeXBlcy5fdGhpczoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuX3N1cGVyOgogICAgICB2YXIgdHlwZSA9IHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLl90aGlzID8gIlRoaXNFeHByZXNzaW9uIiA6ICJTdXBlciI7CiAgICAgIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICB0aGlzLm5leHQoKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCB0eXBlKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMubmFtZToKICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5zdG9yZUN1cnJlbnRQb3MoKTsKICAgICAgdmFyIGlkID0gdGhpcy5wYXJzZUlkZW50KCk7CiAgICAgIHZhciBpc0FzeW5jID0gZmFsc2U7CiAgICAgIGlmIChpZC5uYW1lID09PSAiYXN5bmMiICYmICF0aGlzLmNhbkluc2VydFNlbWljb2xvbigpKSB7CiAgICAgICAgaWYgKHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLl9mdW5jdGlvbikpIHsKICAgICAgICAgIHRoaXMudG9rcy5vdmVycmlkZUNvbnRleHQoYWNvcm4udG9rQ29udGV4dHMuZl9leHByKTsKICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlRnVuY3Rpb24odGhpcy5zdGFydE5vZGVBdChzdGFydCksIGZhbHNlLCB0cnVlKQogICAgICAgIH0KICAgICAgICBpZiAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMubmFtZSkgewogICAgICAgICAgaWQgPSB0aGlzLnBhcnNlSWRlbnQoKTsKICAgICAgICAgIGlzQXN5bmMgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuYXJyb3cpID8gdGhpcy5wYXJzZUFycm93RXhwcmVzc2lvbih0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0KSwgW2lkXSwgaXNBc3luYykgOiBpZAoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMucmVnZXhwOgogICAgICBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgdmFyIHZhbCA9IHRoaXMudG9rLnZhbHVlOwogICAgICBub2RlLnJlZ2V4ID0ge3BhdHRlcm46IHZhbC5wYXR0ZXJuLCBmbGFnczogdmFsLmZsYWdzfTsKICAgICAgbm9kZS52YWx1ZSA9IHZhbC52YWx1ZTsKICAgICAgbm9kZS5yYXcgPSB0aGlzLmlucHV0LnNsaWNlKHRoaXMudG9rLnN0YXJ0LCB0aGlzLnRvay5lbmQpOwogICAgICB0aGlzLm5leHQoKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiTGl0ZXJhbCIpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5udW06IGNhc2UgYWNvcm4udG9rVHlwZXMuc3RyaW5nOgogICAgICBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgbm9kZS52YWx1ZSA9IHRoaXMudG9rLnZhbHVlOwogICAgICBub2RlLnJhdyA9IHRoaXMuaW5wdXQuc2xpY2UodGhpcy50b2suc3RhcnQsIHRoaXMudG9rLmVuZCk7CiAgICAgIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5udW0gJiYgbm9kZS5yYXcuY2hhckNvZGVBdChub2RlLnJhdy5sZW5ndGggLSAxKSA9PT0gMTEwKSB7IG5vZGUuYmlnaW50ID0gbm9kZS5yYXcuc2xpY2UoMCwgLTEpLnJlcGxhY2UoL18vZywgIiIpOyB9CiAgICAgIHRoaXMubmV4dCgpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJMaXRlcmFsIikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9udWxsOiBjYXNlIGFjb3JuLnRva1R5cGVzLl90cnVlOiBjYXNlIGFjb3JuLnRva1R5cGVzLl9mYWxzZToKICAgICAgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIG5vZGUudmFsdWUgPSB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5fbnVsbCA/IG51bGwgOiB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5fdHJ1ZTsKICAgICAgbm9kZS5yYXcgPSB0aGlzLnRvay50eXBlLmtleXdvcmQ7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJMaXRlcmFsIikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLnBhcmVuTDoKICAgICAgdmFyIHBhcmVuU3RhcnQgPSB0aGlzLnN0b3JlQ3VycmVudFBvcygpOwogICAgICB0aGlzLm5leHQoKTsKICAgICAgdmFyIGlubmVyID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oKTsKICAgICAgdGhpcy5leHBlY3QoYWNvcm4udG9rVHlwZXMucGFyZW5SKTsKICAgICAgaWYgKHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmFycm93KSkgewogICAgICAgIC8vIChhLCk9PmEgLy8gU2VxdWVuY2VFeHByZXNzaW9uIG1ha2VzIGR1bW15IGluIHRoZSBsYXN0IGhvbGUuIERyb3AgdGhlIGR1bW15LgogICAgICAgIHZhciBwYXJhbXMgPSBpbm5lci5leHByZXNzaW9ucyB8fCBbaW5uZXJdOwogICAgICAgIGlmIChwYXJhbXMubGVuZ3RoICYmIGlzRHVtbXkocGFyYW1zW3BhcmFtcy5sZW5ndGggLSAxXSkpCiAgICAgICAgICB7IHBhcmFtcy5wb3AoKTsgfQogICAgICAgIHJldHVybiB0aGlzLnBhcnNlQXJyb3dFeHByZXNzaW9uKHRoaXMuc3RhcnROb2RlQXQocGFyZW5TdGFydCksIHBhcmFtcykKICAgICAgfQogICAgICBpZiAodGhpcy5vcHRpb25zLnByZXNlcnZlUGFyZW5zKSB7CiAgICAgICAgdmFyIHBhciA9IHRoaXMuc3RhcnROb2RlQXQocGFyZW5TdGFydCk7CiAgICAgICAgcGFyLmV4cHJlc3Npb24gPSBpbm5lcjsKICAgICAgICBpbm5lciA9IHRoaXMuZmluaXNoTm9kZShwYXIsICJQYXJlbnRoZXNpemVkRXhwcmVzc2lvbiIpOwogICAgICB9CiAgICAgIHJldHVybiBpbm5lcgoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuYnJhY2tldEw6CiAgICAgIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICBub2RlLmVsZW1lbnRzID0gdGhpcy5wYXJzZUV4cHJMaXN0KGFjb3JuLnRva1R5cGVzLmJyYWNrZXRSLCB0cnVlKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiQXJyYXlFeHByZXNzaW9uIikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLmJyYWNlTDoKICAgICAgdGhpcy50b2tzLm92ZXJyaWRlQ29udGV4dChhY29ybi50b2tDb250ZXh0cy5iX2V4cHIpOwogICAgICByZXR1cm4gdGhpcy5wYXJzZU9iaigpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5fY2xhc3M6CiAgICAgIHJldHVybiB0aGlzLnBhcnNlQ2xhc3MoZmFsc2UpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5fZnVuY3Rpb246CiAgICAgIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICB0aGlzLm5leHQoKTsKICAgICAgcmV0dXJuIHRoaXMucGFyc2VGdW5jdGlvbihub2RlLCBmYWxzZSkKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9uZXc6CiAgICAgIHJldHVybiB0aGlzLnBhcnNlTmV3KCkKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLmJhY2tRdW90ZToKICAgICAgcmV0dXJuIHRoaXMucGFyc2VUZW1wbGF0ZSgpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5faW1wb3J0OgogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDExKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VFeHBySW1wb3J0KCkKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5kdW1teUlkZW50KCkKICAgICAgfQoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiB0aGlzLmR1bW15SWRlbnQoKQogICAgfQogIH07CgogIGxwLnBhcnNlRXhwckltcG9ydCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgdmFyIG1ldGEgPSB0aGlzLnBhcnNlSWRlbnQodHJ1ZSk7CiAgICBzd2l0Y2ggKHRoaXMudG9rLnR5cGUpIHsKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMucGFyZW5MOgogICAgICByZXR1cm4gdGhpcy5wYXJzZUR5bmFtaWNJbXBvcnQobm9kZSkKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuZG90OgogICAgICBub2RlLm1ldGEgPSBtZXRhOwogICAgICByZXR1cm4gdGhpcy5wYXJzZUltcG9ydE1ldGEobm9kZSkKICAgIGRlZmF1bHQ6CiAgICAgIG5vZGUubmFtZSA9ICJpbXBvcnQiOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJJZGVudGlmaWVyIikKICAgIH0KICB9OwoKICBscC5wYXJzZUR5bmFtaWNJbXBvcnQgPSBmdW5jdGlvbihub2RlKSB7CiAgICBub2RlLnNvdXJjZSA9IHRoaXMucGFyc2VFeHByTGlzdChhY29ybi50b2tUeXBlcy5wYXJlblIpWzBdIHx8IHRoaXMuZHVtbXlTdHJpbmcoKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkltcG9ydEV4cHJlc3Npb24iKQogIH07CgogIGxwLnBhcnNlSW1wb3J0TWV0YSA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHRoaXMubmV4dCgpOyAvLyBza2lwICcuJwogICAgbm9kZS5wcm9wZXJ0eSA9IHRoaXMucGFyc2VJZGVudCh0cnVlKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIk1ldGFQcm9wZXJ0eSIpCiAgfTsKCiAgbHAucGFyc2VOZXcgPSBmdW5jdGlvbigpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKSwgc3RhcnRJbmRlbnQgPSB0aGlzLmN1ckluZGVudCwgbGluZSA9IHRoaXMuY3VyTGluZVN0YXJ0OwogICAgdmFyIG1ldGEgPSB0aGlzLnBhcnNlSWRlbnQodHJ1ZSk7CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYgJiYgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuZG90KSkgewogICAgICBub2RlLm1ldGEgPSBtZXRhOwogICAgICBub2RlLnByb3BlcnR5ID0gdGhpcy5wYXJzZUlkZW50KHRydWUpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJNZXRhUHJvcGVydHkiKQogICAgfQogICAgdmFyIHN0YXJ0ID0gdGhpcy5zdG9yZUN1cnJlbnRQb3MoKTsKICAgIG5vZGUuY2FsbGVlID0gdGhpcy5wYXJzZVN1YnNjcmlwdHModGhpcy5wYXJzZUV4cHJBdG9tKCksIHN0YXJ0LCB0cnVlLCBzdGFydEluZGVudCwgbGluZSk7CiAgICBpZiAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMucGFyZW5MKSB7CiAgICAgIG5vZGUuYXJndW1lbnRzID0gdGhpcy5wYXJzZUV4cHJMaXN0KGFjb3JuLnRva1R5cGVzLnBhcmVuUik7CiAgICB9IGVsc2UgewogICAgICBub2RlLmFyZ3VtZW50cyA9IFtdOwogICAgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiTmV3RXhwcmVzc2lvbiIpCiAgfTsKCiAgbHAucGFyc2VUZW1wbGF0ZUVsZW1lbnQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBlbGVtID0gdGhpcy5zdGFydE5vZGUoKTsKCiAgICAvLyBUaGUgbG9vc2UgcGFyc2VyIGFjY2VwdHMgaW52YWxpZCB1bmljb2RlIGVzY2FwZXMgZXZlbiBpbiB1bnRhZ2dlZCB0ZW1wbGF0ZXMuCiAgICBpZiAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuaW52YWxpZFRlbXBsYXRlKSB7CiAgICAgIGVsZW0udmFsdWUgPSB7CiAgICAgICAgcmF3OiB0aGlzLnRvay52YWx1ZSwKICAgICAgICBjb29rZWQ6IG51bGwKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIGVsZW0udmFsdWUgPSB7CiAgICAgICAgcmF3OiB0aGlzLmlucHV0LnNsaWNlKHRoaXMudG9rLnN0YXJ0LCB0aGlzLnRvay5lbmQpLnJlcGxhY2UoL1xyXG4/L2csICJcbiIpLAogICAgICAgIGNvb2tlZDogdGhpcy50b2sudmFsdWUKICAgICAgfTsKICAgIH0KICAgIHRoaXMubmV4dCgpOwogICAgZWxlbS50YWlsID0gdGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuYmFja1F1b3RlOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShlbGVtLCAiVGVtcGxhdGVFbGVtZW50IikKICB9OwoKICBscC5wYXJzZVRlbXBsYXRlID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICB0aGlzLm5leHQoKTsKICAgIG5vZGUuZXhwcmVzc2lvbnMgPSBbXTsKICAgIHZhciBjdXJFbHQgPSB0aGlzLnBhcnNlVGVtcGxhdGVFbGVtZW50KCk7CiAgICBub2RlLnF1YXNpcyA9IFtjdXJFbHRdOwogICAgd2hpbGUgKCFjdXJFbHQudGFpbCkgewogICAgICB0aGlzLm5leHQoKTsKICAgICAgbm9kZS5leHByZXNzaW9ucy5wdXNoKHRoaXMucGFyc2VFeHByZXNzaW9uKCkpOwogICAgICBpZiAodGhpcy5leHBlY3QoYWNvcm4udG9rVHlwZXMuYnJhY2VSKSkgewogICAgICAgIGN1ckVsdCA9IHRoaXMucGFyc2VUZW1wbGF0ZUVsZW1lbnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjdXJFbHQgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICAgIGN1ckVsdC52YWx1ZSA9IHtjb29rZWQ6ICIiLCByYXc6ICIifTsKICAgICAgICBjdXJFbHQudGFpbCA9IHRydWU7CiAgICAgICAgdGhpcy5maW5pc2hOb2RlKGN1ckVsdCwgIlRlbXBsYXRlRWxlbWVudCIpOwogICAgICB9CiAgICAgIG5vZGUucXVhc2lzLnB1c2goY3VyRWx0KTsKICAgIH0KICAgIHRoaXMuZXhwZWN0KGFjb3JuLnRva1R5cGVzLmJhY2tRdW90ZSk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJUZW1wbGF0ZUxpdGVyYWwiKQogIH07CgogIGxwLnBhcnNlT2JqID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICBub2RlLnByb3BlcnRpZXMgPSBbXTsKICAgIHRoaXMucHVzaEN4KCk7CiAgICB2YXIgaW5kZW50ID0gdGhpcy5jdXJJbmRlbnQgKyAxLCBsaW5lID0gdGhpcy5jdXJMaW5lU3RhcnQ7CiAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5icmFjZUwpOwogICAgaWYgKHRoaXMuY3VySW5kZW50ICsgMSA8IGluZGVudCkgeyBpbmRlbnQgPSB0aGlzLmN1ckluZGVudDsgbGluZSA9IHRoaXMuY3VyTGluZVN0YXJ0OyB9CiAgICB3aGlsZSAoIXRoaXMuY2xvc2VzKGFjb3JuLnRva1R5cGVzLmJyYWNlUiwgaW5kZW50LCBsaW5lKSkgewogICAgICB2YXIgcHJvcCA9IHRoaXMuc3RhcnROb2RlKCksIGlzR2VuZXJhdG9yID0gKHZvaWQgMCksIGlzQXN5bmMgPSAodm9pZCAwKSwgc3RhcnQgPSAodm9pZCAwKTsKICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5ICYmIHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmVsbGlwc2lzKSkgewogICAgICAgIHByb3AuYXJndW1lbnQgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oKTsKICAgICAgICBub2RlLnByb3BlcnRpZXMucHVzaCh0aGlzLmZpbmlzaE5vZGUocHJvcCwgIlNwcmVhZEVsZW1lbnQiKSk7CiAgICAgICAgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuY29tbWEpOwogICAgICAgIGNvbnRpbnVlCiAgICAgIH0KICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2KSB7CiAgICAgICAgc3RhcnQgPSB0aGlzLnN0b3JlQ3VycmVudFBvcygpOwogICAgICAgIHByb3AubWV0aG9kID0gZmFsc2U7CiAgICAgICAgcHJvcC5zaG9ydGhhbmQgPSBmYWxzZTsKICAgICAgICBpc0dlbmVyYXRvciA9IHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLnN0YXIpOwogICAgICB9CiAgICAgIHRoaXMucGFyc2VQcm9wZXJ0eU5hbWUocHJvcCk7CiAgICAgIGlmICh0aGlzLnRva3MuaXNBc3luY1Byb3AocHJvcCkpIHsKICAgICAgICBpc0FzeW5jID0gdHJ1ZTsKICAgICAgICBpc0dlbmVyYXRvciA9IHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5ICYmIHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLnN0YXIpOwogICAgICAgIHRoaXMucGFyc2VQcm9wZXJ0eU5hbWUocHJvcCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaXNBc3luYyA9IGZhbHNlOwogICAgICB9CiAgICAgIGlmIChpc0R1bW15KHByb3Aua2V5KSkgeyBpZiAoaXNEdW1teSh0aGlzLnBhcnNlTWF5YmVBc3NpZ24oKSkpIHsgdGhpcy5uZXh0KCk7IH0gdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuY29tbWEpOyBjb250aW51ZSB9CiAgICAgIGlmICh0aGlzLmVhdChhY29ybi50b2tUeXBlcy5jb2xvbikpIHsKICAgICAgICBwcm9wLmtpbmQgPSAiaW5pdCI7CiAgICAgICAgcHJvcC52YWx1ZSA9IHRoaXMucGFyc2VNYXliZUFzc2lnbigpOwogICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2ICYmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5wYXJlbkwgfHwgdGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuYnJhY2VMKSkgewogICAgICAgIHByb3Aua2luZCA9ICJpbml0IjsKICAgICAgICBwcm9wLm1ldGhvZCA9IHRydWU7CiAgICAgICAgcHJvcC52YWx1ZSA9IHRoaXMucGFyc2VNZXRob2QoaXNHZW5lcmF0b3IsIGlzQXN5bmMpOwogICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA1ICYmIHByb3Aua2V5LnR5cGUgPT09ICJJZGVudGlmaWVyIiAmJgogICAgICAgICAgICAgICAgICFwcm9wLmNvbXB1dGVkICYmIChwcm9wLmtleS5uYW1lID09PSAiZ2V0IiB8fCBwcm9wLmtleS5uYW1lID09PSAic2V0IikgJiYKICAgICAgICAgICAgICAgICAodGhpcy50b2sudHlwZSAhPT0gYWNvcm4udG9rVHlwZXMuY29tbWEgJiYgdGhpcy50b2sudHlwZSAhPT0gYWNvcm4udG9rVHlwZXMuYnJhY2VSICYmIHRoaXMudG9rLnR5cGUgIT09IGFjb3JuLnRva1R5cGVzLmVxKSkgewogICAgICAgIHByb3Aua2luZCA9IHByb3Aua2V5Lm5hbWU7CiAgICAgICAgdGhpcy5wYXJzZVByb3BlcnR5TmFtZShwcm9wKTsKICAgICAgICBwcm9wLnZhbHVlID0gdGhpcy5wYXJzZU1ldGhvZChmYWxzZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcHJvcC5raW5kID0gImluaXQiOwogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikgewogICAgICAgICAgaWYgKHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmVxKSkgewogICAgICAgICAgICB2YXIgYXNzaWduID0gdGhpcy5zdGFydE5vZGVBdChzdGFydCk7CiAgICAgICAgICAgIGFzc2lnbi5vcGVyYXRvciA9ICI9IjsKICAgICAgICAgICAgYXNzaWduLmxlZnQgPSBwcm9wLmtleTsKICAgICAgICAgICAgYXNzaWduLnJpZ2h0ID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKCk7CiAgICAgICAgICAgIHByb3AudmFsdWUgPSB0aGlzLmZpbmlzaE5vZGUoYXNzaWduLCAiQXNzaWdubWVudEV4cHJlc3Npb24iKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHByb3AudmFsdWUgPSBwcm9wLmtleTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcHJvcC52YWx1ZSA9IHRoaXMuZHVtbXlJZGVudCgpOwogICAgICAgIH0KICAgICAgICBwcm9wLnNob3J0aGFuZCA9IHRydWU7CiAgICAgIH0KICAgICAgbm9kZS5wcm9wZXJ0aWVzLnB1c2godGhpcy5maW5pc2hOb2RlKHByb3AsICJQcm9wZXJ0eSIpKTsKICAgICAgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuY29tbWEpOwogICAgfQogICAgdGhpcy5wb3BDeCgpOwogICAgaWYgKCF0aGlzLmVhdChhY29ybi50b2tUeXBlcy5icmFjZVIpKSB7CiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGNsb3NpbmcgYnJhY2UsIG1ha2UgdGhlIG5vZGUgc3BhbiB0byB0aGUgc3RhcnQKICAgICAgLy8gb2YgdGhlIG5leHQgdG9rZW4gKHRoaXMgaXMgdXNlZnVsIGZvciBUZXJuKQogICAgICB0aGlzLmxhc3QuZW5kID0gdGhpcy50b2suc3RhcnQ7CiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9jYXRpb25zKSB7IHRoaXMubGFzdC5sb2MuZW5kID0gdGhpcy50b2subG9jLnN0YXJ0OyB9CiAgICB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJPYmplY3RFeHByZXNzaW9uIikKICB9OwoKICBscC5wYXJzZVByb3BlcnR5TmFtZSA9IGZ1bmN0aW9uKHByb3ApIHsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikgewogICAgICBpZiAodGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuYnJhY2tldEwpKSB7CiAgICAgICAgcHJvcC5jb21wdXRlZCA9IHRydWU7CiAgICAgICAgcHJvcC5rZXkgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpOwogICAgICAgIHRoaXMuZXhwZWN0KGFjb3JuLnRva1R5cGVzLmJyYWNrZXRSKTsKICAgICAgICByZXR1cm4KICAgICAgfSBlbHNlIHsKICAgICAgICBwcm9wLmNvbXB1dGVkID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIHZhciBrZXkgPSAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMubnVtIHx8IHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLnN0cmluZykgPyB0aGlzLnBhcnNlRXhwckF0b20oKSA6IHRoaXMucGFyc2VJZGVudCgpOwogICAgcHJvcC5rZXkgPSBrZXkgfHwgdGhpcy5kdW1teUlkZW50KCk7CiAgfTsKCiAgbHAucGFyc2VQcm9wZXJ0eUFjY2Vzc29yID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMubmFtZSB8fCB0aGlzLnRvay50eXBlLmtleXdvcmQpIHsgcmV0dXJuIHRoaXMucGFyc2VJZGVudCgpIH0KICAgIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5wcml2YXRlSWQpIHsgcmV0dXJuIHRoaXMucGFyc2VQcml2YXRlSWRlbnQoKSB9CiAgfTsKCiAgbHAucGFyc2VJZGVudCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG5hbWUgPSB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5uYW1lID8gdGhpcy50b2sudmFsdWUgOiB0aGlzLnRvay50eXBlLmtleXdvcmQ7CiAgICBpZiAoIW5hbWUpIHsgcmV0dXJuIHRoaXMuZHVtbXlJZGVudCgpIH0KICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHRoaXMubmV4dCgpOwogICAgbm9kZS5uYW1lID0gbmFtZTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIklkZW50aWZpZXIiKQogIH07CgogIGxwLnBhcnNlUHJpdmF0ZUlkZW50ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICBub2RlLm5hbWUgPSB0aGlzLnRvay52YWx1ZTsKICAgIHRoaXMubmV4dCgpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiUHJpdmF0ZUlkZW50aWZpZXIiKQogIH07CgogIGxwLmluaXRGdW5jdGlvbiA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIG5vZGUuaWQgPSBudWxsOwogICAgbm9kZS5wYXJhbXMgPSBbXTsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikgewogICAgICBub2RlLmdlbmVyYXRvciA9IGZhbHNlOwogICAgICBub2RlLmV4cHJlc3Npb24gPSBmYWxzZTsKICAgIH0KICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOCkKICAgICAgeyBub2RlLmFzeW5jID0gZmFsc2U7IH0KICB9OwoKICAvLyBDb252ZXJ0IGV4aXN0aW5nIGV4cHJlc3Npb24gYXRvbSB0byBhc3NpZ25hYmxlIHBhdHRlcm4KICAvLyBpZiBwb3NzaWJsZS4KCiAgbHAudG9Bc3NpZ25hYmxlID0gZnVuY3Rpb24obm9kZSwgYmluZGluZykgewogICAgaWYgKCFub2RlIHx8IG5vZGUudHlwZSA9PT0gIklkZW50aWZpZXIiIHx8IChub2RlLnR5cGUgPT09ICJNZW1iZXJFeHByZXNzaW9uIiAmJiAhYmluZGluZykpIDsgZWxzZSBpZiAobm9kZS50eXBlID09PSAiUGFyZW50aGVzaXplZEV4cHJlc3Npb24iKSB7CiAgICAgIHRoaXMudG9Bc3NpZ25hYmxlKG5vZGUuZXhwcmVzc2lvbiwgYmluZGluZyk7CiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA8IDYpIHsKICAgICAgcmV0dXJuIHRoaXMuZHVtbXlJZGVudCgpCiAgICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gIk9iamVjdEV4cHJlc3Npb24iKSB7CiAgICAgIG5vZGUudHlwZSA9ICJPYmplY3RQYXR0ZXJuIjsKICAgICAgZm9yICh2YXIgaSA9IDAsIGxpc3QgPSBub2RlLnByb3BlcnRpZXM7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKQogICAgICAgIHsKICAgICAgICB2YXIgcHJvcCA9IGxpc3RbaV07CgogICAgICAgIHRoaXMudG9Bc3NpZ25hYmxlKHByb3AsIGJpbmRpbmcpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gIkFycmF5RXhwcmVzc2lvbiIpIHsKICAgICAgbm9kZS50eXBlID0gIkFycmF5UGF0dGVybiI7CiAgICAgIHRoaXMudG9Bc3NpZ25hYmxlTGlzdChub2RlLmVsZW1lbnRzLCBiaW5kaW5nKTsKICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSAiUHJvcGVydHkiKSB7CiAgICAgIHRoaXMudG9Bc3NpZ25hYmxlKG5vZGUudmFsdWUsIGJpbmRpbmcpOwogICAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT09ICJTcHJlYWRFbGVtZW50IikgewogICAgICBub2RlLnR5cGUgPSAiUmVzdEVsZW1lbnQiOwogICAgICB0aGlzLnRvQXNzaWduYWJsZShub2RlLmFyZ3VtZW50LCBiaW5kaW5nKTsKICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSAiQXNzaWdubWVudEV4cHJlc3Npb24iKSB7CiAgICAgIG5vZGUudHlwZSA9ICJBc3NpZ25tZW50UGF0dGVybiI7CiAgICAgIGRlbGV0ZSBub2RlLm9wZXJhdG9yOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRoaXMuZHVtbXlJZGVudCgpCiAgICB9CiAgICByZXR1cm4gbm9kZQogIH07CgogIGxwLnRvQXNzaWduYWJsZUxpc3QgPSBmdW5jdGlvbihleHByTGlzdCwgYmluZGluZykgewogICAgZm9yICh2YXIgaSA9IDAsIGxpc3QgPSBleHByTGlzdDsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpCiAgICAgIHsKICAgICAgdmFyIGV4cHIgPSBsaXN0W2ldOwoKICAgICAgdGhpcy50b0Fzc2lnbmFibGUoZXhwciwgYmluZGluZyk7CiAgICB9CiAgICByZXR1cm4gZXhwckxpc3QKICB9OwoKICBscC5wYXJzZUZ1bmN0aW9uUGFyYW1zID0gZnVuY3Rpb24ocGFyYW1zKSB7CiAgICBwYXJhbXMgPSB0aGlzLnBhcnNlRXhwckxpc3QoYWNvcm4udG9rVHlwZXMucGFyZW5SKTsKICAgIHJldHVybiB0aGlzLnRvQXNzaWduYWJsZUxpc3QocGFyYW1zLCB0cnVlKQogIH07CgogIGxwLnBhcnNlTWV0aG9kID0gZnVuY3Rpb24oaXNHZW5lcmF0b3IsIGlzQXN5bmMpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKSwgb2xkSW5Bc3luYyA9IHRoaXMuaW5Bc3luYywgb2xkSW5HZW5lcmF0b3IgPSB0aGlzLmluR2VuZXJhdG9yLCBvbGRJbkZ1bmN0aW9uID0gdGhpcy5pbkZ1bmN0aW9uOwogICAgdGhpcy5pbml0RnVuY3Rpb24obm9kZSk7CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpCiAgICAgIHsgbm9kZS5nZW5lcmF0b3IgPSAhIWlzR2VuZXJhdG9yOyB9CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDgpCiAgICAgIHsgbm9kZS5hc3luYyA9ICEhaXNBc3luYzsgfQogICAgdGhpcy5pbkFzeW5jID0gbm9kZS5hc3luYzsKICAgIHRoaXMuaW5HZW5lcmF0b3IgPSBub2RlLmdlbmVyYXRvcjsKICAgIHRoaXMuaW5GdW5jdGlvbiA9IHRydWU7CiAgICBub2RlLnBhcmFtcyA9IHRoaXMucGFyc2VGdW5jdGlvblBhcmFtcygpOwogICAgbm9kZS5ib2R5ID0gdGhpcy5wYXJzZUJsb2NrKCk7CiAgICB0aGlzLnRva3MuYWRhcHREaXJlY3RpdmVQcm9sb2d1ZShub2RlLmJvZHkuYm9keSk7CiAgICB0aGlzLmluQXN5bmMgPSBvbGRJbkFzeW5jOwogICAgdGhpcy5pbkdlbmVyYXRvciA9IG9sZEluR2VuZXJhdG9yOwogICAgdGhpcy5pbkZ1bmN0aW9uID0gb2xkSW5GdW5jdGlvbjsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkZ1bmN0aW9uRXhwcmVzc2lvbiIpCiAgfTsKCiAgbHAucGFyc2VBcnJvd0V4cHJlc3Npb24gPSBmdW5jdGlvbihub2RlLCBwYXJhbXMsIGlzQXN5bmMpIHsKICAgIHZhciBvbGRJbkFzeW5jID0gdGhpcy5pbkFzeW5jLCBvbGRJbkdlbmVyYXRvciA9IHRoaXMuaW5HZW5lcmF0b3IsIG9sZEluRnVuY3Rpb24gPSB0aGlzLmluRnVuY3Rpb247CiAgICB0aGlzLmluaXRGdW5jdGlvbihub2RlKTsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOCkKICAgICAgeyBub2RlLmFzeW5jID0gISFpc0FzeW5jOyB9CiAgICB0aGlzLmluQXN5bmMgPSBub2RlLmFzeW5jOwogICAgdGhpcy5pbkdlbmVyYXRvciA9IGZhbHNlOwogICAgdGhpcy5pbkZ1bmN0aW9uID0gdHJ1ZTsKICAgIG5vZGUucGFyYW1zID0gdGhpcy50b0Fzc2lnbmFibGVMaXN0KHBhcmFtcywgdHJ1ZSk7CiAgICBub2RlLmV4cHJlc3Npb24gPSB0aGlzLnRvay50eXBlICE9PSBhY29ybi50b2tUeXBlcy5icmFjZUw7CiAgICBpZiAobm9kZS5leHByZXNzaW9uKSB7CiAgICAgIG5vZGUuYm9keSA9IHRoaXMucGFyc2VNYXliZUFzc2lnbigpOwogICAgfSBlbHNlIHsKICAgICAgbm9kZS5ib2R5ID0gdGhpcy5wYXJzZUJsb2NrKCk7CiAgICAgIHRoaXMudG9rcy5hZGFwdERpcmVjdGl2ZVByb2xvZ3VlKG5vZGUuYm9keS5ib2R5KTsKICAgIH0KICAgIHRoaXMuaW5Bc3luYyA9IG9sZEluQXN5bmM7CiAgICB0aGlzLmluR2VuZXJhdG9yID0gb2xkSW5HZW5lcmF0b3I7CiAgICB0aGlzLmluRnVuY3Rpb24gPSBvbGRJbkZ1bmN0aW9uOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiQXJyb3dGdW5jdGlvbkV4cHJlc3Npb24iKQogIH07CgogIGxwLnBhcnNlRXhwckxpc3QgPSBmdW5jdGlvbihjbG9zZSwgYWxsb3dFbXB0eSkgewogICAgdGhpcy5wdXNoQ3goKTsKICAgIHZhciBpbmRlbnQgPSB0aGlzLmN1ckluZGVudCwgbGluZSA9IHRoaXMuY3VyTGluZVN0YXJ0LCBlbHRzID0gW107CiAgICB0aGlzLm5leHQoKTsgLy8gT3BlbmluZyBicmFja2V0CiAgICB3aGlsZSAoIXRoaXMuY2xvc2VzKGNsb3NlLCBpbmRlbnQgKyAxLCBsaW5lKSkgewogICAgICBpZiAodGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuY29tbWEpKSB7CiAgICAgICAgZWx0cy5wdXNoKGFsbG93RW1wdHkgPyBudWxsIDogdGhpcy5kdW1teUlkZW50KCkpOwogICAgICAgIGNvbnRpbnVlCiAgICAgIH0KICAgICAgdmFyIGVsdCA9IHRoaXMucGFyc2VNYXliZUFzc2lnbigpOwogICAgICBpZiAoaXNEdW1teShlbHQpKSB7CiAgICAgICAgaWYgKHRoaXMuY2xvc2VzKGNsb3NlLCBpbmRlbnQsIGxpbmUpKSB7IGJyZWFrIH0KICAgICAgICB0aGlzLm5leHQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbHRzLnB1c2goZWx0KTsKICAgICAgfQogICAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5jb21tYSk7CiAgICB9CiAgICB0aGlzLnBvcEN4KCk7CiAgICBpZiAoIXRoaXMuZWF0KGNsb3NlKSkgewogICAgICAvLyBJZiB0aGVyZSBpcyBubyBjbG9zaW5nIGJyYWNlLCBtYWtlIHRoZSBub2RlIHNwYW4gdG8gdGhlIHN0YXJ0CiAgICAgIC8vIG9mIHRoZSBuZXh0IHRva2VuICh0aGlzIGlzIHVzZWZ1bCBmb3IgVGVybikKICAgICAgdGhpcy5sYXN0LmVuZCA9IHRoaXMudG9rLnN0YXJ0OwogICAgICBpZiAodGhpcy5vcHRpb25zLmxvY2F0aW9ucykgeyB0aGlzLmxhc3QubG9jLmVuZCA9IHRoaXMudG9rLmxvYy5zdGFydDsgfQogICAgfQogICAgcmV0dXJuIGVsdHMKICB9OwoKICBscC5wYXJzZUF3YWl0ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICB0aGlzLm5leHQoKTsKICAgIG5vZGUuYXJndW1lbnQgPSB0aGlzLnBhcnNlTWF5YmVVbmFyeSgpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiQXdhaXRFeHByZXNzaW9uIikKICB9OwoKICAvLyBBY29ybjogTG9vc2UgcGFyc2VyCgogIGFjb3JuLmRlZmF1bHRPcHRpb25zLnRhYlNpemUgPSA0OwoKICBmdW5jdGlvbiBwYXJzZShpbnB1dCwgb3B0aW9ucykgewogICAgcmV0dXJuIExvb3NlUGFyc2VyLnBhcnNlKGlucHV0LCBvcHRpb25zKQogIH0KCiAgZXhwb3J0cy5Mb29zZVBhcnNlciA9IExvb3NlUGFyc2VyOwogIGV4cG9ydHMuaXNEdW1teSA9IGlzRHVtbXk7CiAgZXhwb3J0cy5wYXJzZSA9IHBhcnNlOwoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pOwoKfSkpOwoKCi8vIFNPVVJDRTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTgyNzkxNDEvamF2YXNjcmlwdC1zdHJpbmctZW5jcnlwdGlvbi1hbmQtZGVjcnlwdGlvbgoKY29uc3QgY3J5cHQgPSAoc2FsdCwgdGV4dCkgPT4gewogIGNvbnN0IHRleHRUb0NoYXJzID0gKHRleHQpID0+IHRleHQuc3BsaXQoIiIpLm1hcCgoYykgPT4gYy5jaGFyQ29kZUF0KDApKTsKICBjb25zdCBieXRlSGV4ID0gKG4pID0+ICgiMCIgKyBOdW1iZXIobikudG9TdHJpbmcoMTYpKS5zdWJzdHIoLTIpOwogIGNvbnN0IGFwcGx5U2FsdFRvQ2hhciA9IChjb2RlKSA9PiB0ZXh0VG9DaGFycyhzYWx0KS5yZWR1Y2UoKGEsIGIpID0+IGEgXiBiLCBjb2RlKTsKCiAgcmV0dXJuIHRleHQKICAgIC5zcGxpdCgiIikKICAgIC5tYXAodGV4dFRvQ2hhcnMpCiAgICAubWFwKGFwcGx5U2FsdFRvQ2hhcikKICAgIC5tYXAoYnl0ZUhleCkKICAgIC5qb2luKCIiKTsKfTsKCmNvbnN0IGRlY3J5cHQgPSAoc2FsdCwgZW5jb2RlZCkgPT4gewogIGNvbnN0IHRleHRUb0NoYXJzID0gKHRleHQpID0+IHRleHQuc3BsaXQoIiIpLm1hcCgoYykgPT4gYy5jaGFyQ29kZUF0KDApKTsKICBjb25zdCBhcHBseVNhbHRUb0NoYXIgPSAoY29kZSkgPT4gdGV4dFRvQ2hhcnMoc2FsdCkucmVkdWNlKChhLCBiKSA9PiBhIF4gYiwgY29kZSk7CiAgcmV0dXJuIGVuY29kZWQKICAgIC5tYXRjaCgvLnsxLDJ9L2cpCiAgICAubWFwKChoZXgpID0+IHBhcnNlSW50KGhleCwgMTYpKQogICAgLm1hcChhcHBseVNhbHRUb0NoYXIpCiAgICAubWFwKChjaGFyQ29kZSkgPT4gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSkpCiAgICAuam9pbigiIik7Cn07CgoKLyohIEZvciBsaWNlbnNlIGluZm9ybWF0aW9uIHBsZWFzZSBzZWUganNlbmNyeXB0Lm1pbi5qcy5MSUNFTlNFLnR4dCAqLwohZnVuY3Rpb24odCxlKXsib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKToiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSxlKToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5KU0VuY3J5cHQ9ZSgpOnQuSlNFbmNyeXB0PWUoKX0od2luZG93LChmdW5jdGlvbigpe3JldHVybigoKT0+eyJ1c2Ugc3RyaWN0Ijt2YXIgdD1bLCh0LGUsaSk9PntmdW5jdGlvbiByKHQpe3JldHVybiIwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiLmNoYXJBdCh0KX1mdW5jdGlvbiBuKHQsZSl7cmV0dXJuIHQmZX1mdW5jdGlvbiBzKHQsZSl7cmV0dXJuIHR8ZX1mdW5jdGlvbiBvKHQsZSl7cmV0dXJuIHReZX1mdW5jdGlvbiBoKHQsZSl7cmV0dXJuIHQmfmV9ZnVuY3Rpb24gYSh0KXtpZigwPT10KXJldHVybi0xO3ZhciBlPTA7cmV0dXJuIDA9PSg2NTUzNSZ0KSYmKHQ+Pj0xNixlKz0xNiksMD09KDI1NSZ0KSYmKHQ+Pj04LGUrPTgpLDA9PSgxNSZ0KSYmKHQ+Pj00LGUrPTQpLDA9PSgzJnQpJiYodD4+PTIsZSs9MiksMD09KDEmdCkmJisrZSxlfWZ1bmN0aW9uIHUodCl7Zm9yKHZhciBlPTA7MCE9dDspdCY9dC0xLCsrZTtyZXR1cm4gZX1pLmQoZSx7ZGVmYXVsdDooKT0+bnR9KTt2YXIgYyxmPSJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIjtmdW5jdGlvbiBsKHQpe3ZhciBlLGkscj0iIjtmb3IoZT0wO2UrMzw9dC5sZW5ndGg7ZSs9MylpPXBhcnNlSW50KHQuc3Vic3RyaW5nKGUsZSszKSwxNikscis9Zi5jaGFyQXQoaT4+NikrZi5jaGFyQXQoNjMmaSk7Zm9yKGUrMT09dC5sZW5ndGg/KGk9cGFyc2VJbnQodC5zdWJzdHJpbmcoZSxlKzEpLDE2KSxyKz1mLmNoYXJBdChpPDwyKSk6ZSsyPT10Lmxlbmd0aCYmKGk9cGFyc2VJbnQodC5zdWJzdHJpbmcoZSxlKzIpLDE2KSxyKz1mLmNoYXJBdChpPj4yKStmLmNoYXJBdCgoMyZpKTw8NCkpOygzJnIubGVuZ3RoKT4wOylyKz0iPSI7cmV0dXJuIHJ9ZnVuY3Rpb24gcCh0KXt2YXIgZSxpPSIiLG49MCxzPTA7Zm9yKGU9MDtlPHQubGVuZ3RoJiYiPSIhPXQuY2hhckF0KGUpOysrZSl7dmFyIG89Zi5pbmRleE9mKHQuY2hhckF0KGUpKTtvPDB8fCgwPT1uPyhpKz1yKG8+PjIpLHM9MyZvLG49MSk6MT09bj8oaSs9cihzPDwyfG8+PjQpLHM9MTUmbyxuPTIpOjI9PW4/KGkrPXIocyksaSs9cihvPj4yKSxzPTMmbyxuPTMpOihpKz1yKHM8PDJ8bz4+NCksaSs9cigxNSZvKSxuPTApKX1yZXR1cm4gMT09biYmKGkrPXIoczw8MikpLGl9dmFyIGcsZD17ZGVjb2RlOmZ1bmN0aW9uKHQpe3ZhciBlO2lmKHZvaWQgMD09PWcpe3ZhciBpPSI9IFxmXG5cclx0IFx1MjAyOFx1MjAyOSI7Zm9yKGc9T2JqZWN0LmNyZWF0ZShudWxsKSxlPTA7ZTw2NDsrK2UpZ1siQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyIuY2hhckF0KGUpXT1lO2ZvcihnWyItIl09NjIsZy5fPTYzLGU9MDtlPGkubGVuZ3RoOysrZSlnW2kuY2hhckF0KGUpXT0tMX12YXIgcj1bXSxuPTAscz0wO2ZvcihlPTA7ZTx0Lmxlbmd0aDsrK2Upe3ZhciBvPXQuY2hhckF0KGUpO2lmKCI9Ij09bylicmVhaztpZigtMSE9KG89Z1tvXSkpe2lmKHZvaWQgMD09PW8pdGhyb3cgbmV3IEVycm9yKCJJbGxlZ2FsIGNoYXJhY3RlciBhdCBvZmZzZXQgIitlKTtufD1vLCsrcz49ND8ocltyLmxlbmd0aF09bj4+MTYscltyLmxlbmd0aF09bj4+OCYyNTUscltyLmxlbmd0aF09MjU1Jm4sbj0wLHM9MCk6bjw8PTZ9fXN3aXRjaChzKXtjYXNlIDE6dGhyb3cgbmV3IEVycm9yKCJCYXNlNjQgZW5jb2RpbmcgaW5jb21wbGV0ZTogYXQgbGVhc3QgMiBiaXRzIG1pc3NpbmciKTtjYXNlIDI6cltyLmxlbmd0aF09bj4+MTA7YnJlYWs7Y2FzZSAzOnJbci5sZW5ndGhdPW4+PjE2LHJbci5sZW5ndGhdPW4+PjgmMjU1fXJldHVybiByfSxyZTovLS0tLS1CRUdJTiBbXi1dKy0tLS0tKFtBLVphLXowLTkrXC89XHNdKyktLS0tLUVORCBbXi1dKy0tLS0tfGJlZ2luLWJhc2U2NFteXG5dK1xuKFtBLVphLXowLTkrXC89XHNdKyk9PT09Lyx1bmFybW9yOmZ1bmN0aW9uKHQpe3ZhciBlPWQucmUuZXhlYyh0KTtpZihlKWlmKGVbMV0pdD1lWzFdO2Vsc2V7aWYoIWVbMl0pdGhyb3cgbmV3IEVycm9yKCJSZWdFeHAgb3V0IG9mIHN5bmMiKTt0PWVbMl19cmV0dXJuIGQuZGVjb2RlKHQpfX0sdj0xZTEzLG09ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuYnVmPVsrdHx8MF19cmV0dXJuIHQucHJvdG90eXBlLm11bEFkZD1mdW5jdGlvbih0LGUpe3ZhciBpLHIsbj10aGlzLmJ1ZixzPW4ubGVuZ3RoO2ZvcihpPTA7aTxzOysraSkocj1uW2ldKnQrZSk8dj9lPTA6ci09KGU9MHxyL3YpKnYsbltpXT1yO2U+MCYmKG5baV09ZSl9LHQucHJvdG90eXBlLnN1Yj1mdW5jdGlvbih0KXt2YXIgZSxpLHI9dGhpcy5idWYsbj1yLmxlbmd0aDtmb3IoZT0wO2U8bjsrK2UpKGk9cltlXS10KTwwPyhpKz12LHQ9MSk6dD0wLHJbZV09aTtmb3IoOzA9PT1yW3IubGVuZ3RoLTFdOylyLnBvcCgpfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbih0KXtpZigxMCE9KHR8fDEwKSl0aHJvdyBuZXcgRXJyb3IoIm9ubHkgYmFzZSAxMCBpcyBzdXBwb3J0ZWQiKTtmb3IodmFyIGU9dGhpcy5idWYsaT1lW2UubGVuZ3RoLTFdLnRvU3RyaW5nKCkscj1lLmxlbmd0aC0yO3I+PTA7LS1yKWkrPSh2K2Vbcl0pLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDEpO3JldHVybiBpfSx0LnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuYnVmLGU9MCxpPXQubGVuZ3RoLTE7aT49MDstLWkpZT1lKnYrdFtpXTtyZXR1cm4gZX0sdC5wcm90b3R5cGUuc2ltcGxpZnk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJ1ZjtyZXR1cm4gMT09dC5sZW5ndGg/dFswXTp0aGlzfSx0fSgpLHk9L14oXGRcZCkoMFsxLTldfDFbMC0yXSkoMFsxLTldfFsxMl1cZHwzWzAxXSkoWzAxXVxkfDJbMC0zXSkoPzooWzAtNV1cZCkoPzooWzAtNV1cZCkoPzpbLixdKFxkezEsM30pKT8pPyk/KFp8Wy0rXSg/OlswXVxkfDFbMC0yXSkoWzAtNV1cZCk/KT8kLyxiPS9eKFxkXGRcZFxkKSgwWzEtOV18MVswLTJdKSgwWzEtOV18WzEyXVxkfDNbMDFdKShbMDFdXGR8MlswLTNdKSg/OihbMC01XVxkKSg/OihbMC01XVxkKSg/OlsuLF0oXGR7MSwzfSkpPyk/KT8oWnxbLStdKD86WzBdXGR8MVswLTJdKShbMC01XVxkKT8pPyQvO2Z1bmN0aW9uIFQodCxlKXtyZXR1cm4gdC5sZW5ndGg+ZSYmKHQ9dC5zdWJzdHJpbmcoMCxlKSsi4oCmIiksdH12YXIgUyxFPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLGkpe3RoaXMuaGV4RGlnaXRzPSIwMTIzNDU2Nzg5QUJDREVGIixlIGluc3RhbmNlb2YgdD8odGhpcy5lbmM9ZS5lbmMsdGhpcy5wb3M9ZS5wb3MpOih0aGlzLmVuYz1lLHRoaXMucG9zPWkpfXJldHVybiB0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dCYmKHQ9dGhpcy5wb3MrKyksdD49dGhpcy5lbmMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiUmVxdWVzdGluZyBieXRlIG9mZnNldCAiK3QrIiBvbiBhIHN0cmVhbSBvZiBsZW5ndGggIit0aGlzLmVuYy5sZW5ndGgpO3JldHVybiJzdHJpbmciPT10eXBlb2YgdGhpcy5lbmM/dGhpcy5lbmMuY2hhckNvZGVBdCh0KTp0aGlzLmVuY1t0XX0sdC5wcm90b3R5cGUuaGV4Qnl0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oZXhEaWdpdHMuY2hhckF0KHQ+PjQmMTUpK3RoaXMuaGV4RGlnaXRzLmNoYXJBdCgxNSZ0KX0sdC5wcm90b3R5cGUuaGV4RHVtcD1mdW5jdGlvbih0LGUsaSl7Zm9yKHZhciByPSIiLG49dDtuPGU7KytuKWlmKHIrPXRoaXMuaGV4Qnl0ZSh0aGlzLmdldChuKSksITAhPT1pKXN3aXRjaCgxNSZuKXtjYXNlIDc6cis9IiAgIjticmVhaztjYXNlIDE1OnIrPSJcbiI7YnJlYWs7ZGVmYXVsdDpyKz0iICJ9cmV0dXJuIHJ9LHQucHJvdG90eXBlLmlzQVNDSUk9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dDtpPGU7KytpKXt2YXIgcj10aGlzLmdldChpKTtpZihyPDMyfHxyPjE3NilyZXR1cm4hMX1yZXR1cm4hMH0sdC5wcm90b3R5cGUucGFyc2VTdHJpbmdJU089ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9IiIscj10O3I8ZTsrK3IpaSs9U3RyaW5nLmZyb21DaGFyQ29kZSh0aGlzLmdldChyKSk7cmV0dXJuIGl9LHQucHJvdG90eXBlLnBhcnNlU3RyaW5nVVRGPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPSIiLHI9dDtyPGU7KXt2YXIgbj10aGlzLmdldChyKyspO2krPW48MTI4P1N0cmluZy5mcm9tQ2hhckNvZGUobik6bj4xOTEmJm48MjI0P1N0cmluZy5mcm9tQ2hhckNvZGUoKDMxJm4pPDw2fDYzJnRoaXMuZ2V0KHIrKykpOlN0cmluZy5mcm9tQ2hhckNvZGUoKDE1Jm4pPDwxMnwoNjMmdGhpcy5nZXQocisrKSk8PDZ8NjMmdGhpcy5nZXQocisrKSl9cmV0dXJuIGl9LHQucHJvdG90eXBlLnBhcnNlU3RyaW5nQk1QPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpLHIsbj0iIixzPXQ7czxlOylpPXRoaXMuZ2V0KHMrKykscj10aGlzLmdldChzKyspLG4rPVN0cmluZy5mcm9tQ2hhckNvZGUoaTw8OHxyKTtyZXR1cm4gbn0sdC5wcm90b3R5cGUucGFyc2VUaW1lPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10aGlzLnBhcnNlU3RyaW5nSVNPKHQsZSksbj0oaT95OmIpLmV4ZWMocik7cmV0dXJuIG4/KGkmJihuWzFdPStuWzFdLG5bMV0rPStuWzFdPDcwPzJlMzoxOTAwKSxyPW5bMV0rIi0iK25bMl0rIi0iK25bM10rIiAiK25bNF0sbls1XSYmKHIrPSI6IituWzVdLG5bNl0mJihyKz0iOiIrbls2XSxuWzddJiYocis9Ii4iK25bN10pKSksbls4XSYmKHIrPSIgVVRDIiwiWiIhPW5bOF0mJihyKz1uWzhdLG5bOV0mJihyKz0iOiIrbls5XSkpKSxyKToiVW5yZWNvZ25pemVkIHRpbWU6ICIrcn0sdC5wcm90b3R5cGUucGFyc2VJbnRlZ2VyPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpLHI9dGhpcy5nZXQodCksbj1yPjEyNyxzPW4/MjU1OjAsbz0iIjtyPT1zJiYrK3Q8ZTspcj10aGlzLmdldCh0KTtpZigwPT0oaT1lLXQpKXJldHVybiBuPy0xOjA7aWYoaT40KXtmb3Iobz1yLGk8PD0zOzA9PSgxMjgmKCtvXnMpKTspbz0rbzw8MSwtLWk7bz0iKCIraSsiIGJpdClcbiJ9biYmKHItPTI1Nik7Zm9yKHZhciBoPW5ldyBtKHIpLGE9dCsxO2E8ZTsrK2EpaC5tdWxBZGQoMjU2LHRoaXMuZ2V0KGEpKTtyZXR1cm4gbytoLnRvU3RyaW5nKCl9LHQucHJvdG90eXBlLnBhcnNlQml0U3RyaW5nPWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIHI9dGhpcy5nZXQodCksbj0iKCIrKChlLXQtMTw8MyktcikrIiBiaXQpXG4iLHM9IiIsbz10KzE7bzxlOysrbyl7Zm9yKHZhciBoPXRoaXMuZ2V0KG8pLGE9bz09ZS0xP3I6MCx1PTc7dT49YTstLXUpcys9aD4+dSYxPyIxIjoiMCI7aWYocy5sZW5ndGg+aSlyZXR1cm4gbitUKHMsaSl9cmV0dXJuIG4rc30sdC5wcm90b3R5cGUucGFyc2VPY3RldFN0cmluZz1mdW5jdGlvbih0LGUsaSl7aWYodGhpcy5pc0FTQ0lJKHQsZSkpcmV0dXJuIFQodGhpcy5wYXJzZVN0cmluZ0lTTyh0LGUpLGkpO3ZhciByPWUtdCxuPSIoIityKyIgYnl0ZSlcbiI7cj4oaS89MikmJihlPXQraSk7Zm9yKHZhciBzPXQ7czxlOysrcyluKz10aGlzLmhleEJ5dGUodGhpcy5nZXQocykpO3JldHVybiByPmkmJihuKz0i4oCmIiksbn0sdC5wcm90b3R5cGUucGFyc2VPSUQ9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgcj0iIixuPW5ldyBtLHM9MCxvPXQ7bzxlOysrbyl7dmFyIGg9dGhpcy5nZXQobyk7aWYobi5tdWxBZGQoMTI4LDEyNyZoKSxzKz03LCEoMTI4JmgpKXtpZigiIj09PXIpaWYoKG49bi5zaW1wbGlmeSgpKWluc3RhbmNlb2YgbSluLnN1Yig4MCkscj0iMi4iK24udG9TdHJpbmcoKTtlbHNle3ZhciBhPW48ODA/bjw0MD8wOjE6MjtyPWErIi4iKyhuLTQwKmEpfWVsc2Ugcis9Ii4iK24udG9TdHJpbmcoKTtpZihyLmxlbmd0aD5pKXJldHVybiBUKHIsaSk7bj1uZXcgbSxzPTB9fXJldHVybiBzPjAmJihyKz0iLmluY29tcGxldGUiKSxyfSx0fSgpLHc9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpLHIsbil7aWYoIShyIGluc3RhbmNlb2YgRCkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHRhZyB2YWx1ZS4iKTt0aGlzLnN0cmVhbT10LHRoaXMuaGVhZGVyPWUsdGhpcy5sZW5ndGg9aSx0aGlzLnRhZz1yLHRoaXMuc3ViPW59cmV0dXJuIHQucHJvdG90eXBlLnR5cGVOYW1lPWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMudGFnLnRhZ0NsYXNzKXtjYXNlIDA6c3dpdGNoKHRoaXMudGFnLnRhZ051bWJlcil7Y2FzZSAwOnJldHVybiJFT0MiO2Nhc2UgMTpyZXR1cm4iQk9PTEVBTiI7Y2FzZSAyOnJldHVybiJJTlRFR0VSIjtjYXNlIDM6cmV0dXJuIkJJVF9TVFJJTkciO2Nhc2UgNDpyZXR1cm4iT0NURVRfU1RSSU5HIjtjYXNlIDU6cmV0dXJuIk5VTEwiO2Nhc2UgNjpyZXR1cm4iT0JKRUNUX0lERU5USUZJRVIiO2Nhc2UgNzpyZXR1cm4iT2JqZWN0RGVzY3JpcHRvciI7Y2FzZSA4OnJldHVybiJFWFRFUk5BTCI7Y2FzZSA5OnJldHVybiJSRUFMIjtjYXNlIDEwOnJldHVybiJFTlVNRVJBVEVEIjtjYXNlIDExOnJldHVybiJFTUJFRERFRF9QRFYiO2Nhc2UgMTI6cmV0dXJuIlVURjhTdHJpbmciO2Nhc2UgMTY6cmV0dXJuIlNFUVVFTkNFIjtjYXNlIDE3OnJldHVybiJTRVQiO2Nhc2UgMTg6cmV0dXJuIk51bWVyaWNTdHJpbmciO2Nhc2UgMTk6cmV0dXJuIlByaW50YWJsZVN0cmluZyI7Y2FzZSAyMDpyZXR1cm4iVGVsZXRleFN0cmluZyI7Y2FzZSAyMTpyZXR1cm4iVmlkZW90ZXhTdHJpbmciO2Nhc2UgMjI6cmV0dXJuIklBNVN0cmluZyI7Y2FzZSAyMzpyZXR1cm4iVVRDVGltZSI7Y2FzZSAyNDpyZXR1cm4iR2VuZXJhbGl6ZWRUaW1lIjtjYXNlIDI1OnJldHVybiJHcmFwaGljU3RyaW5nIjtjYXNlIDI2OnJldHVybiJWaXNpYmxlU3RyaW5nIjtjYXNlIDI3OnJldHVybiJHZW5lcmFsU3RyaW5nIjtjYXNlIDI4OnJldHVybiJVbml2ZXJzYWxTdHJpbmciO2Nhc2UgMzA6cmV0dXJuIkJNUFN0cmluZyJ9cmV0dXJuIlVuaXZlcnNhbF8iK3RoaXMudGFnLnRhZ051bWJlci50b1N0cmluZygpO2Nhc2UgMTpyZXR1cm4iQXBwbGljYXRpb25fIit0aGlzLnRhZy50YWdOdW1iZXIudG9TdHJpbmcoKTtjYXNlIDI6cmV0dXJuIlsiK3RoaXMudGFnLnRhZ051bWJlci50b1N0cmluZygpKyJdIjtjYXNlIDM6cmV0dXJuIlByaXZhdGVfIit0aGlzLnRhZy50YWdOdW1iZXIudG9TdHJpbmcoKX19LHQucHJvdG90eXBlLmNvbnRlbnQ9ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dGhpcy50YWcpcmV0dXJuIG51bGw7dm9pZCAwPT09dCYmKHQ9MS8wKTt2YXIgZT10aGlzLnBvc0NvbnRlbnQoKSxpPU1hdGguYWJzKHRoaXMubGVuZ3RoKTtpZighdGhpcy50YWcuaXNVbml2ZXJzYWwoKSlyZXR1cm4gbnVsbCE9PXRoaXMuc3ViPyIoIit0aGlzLnN1Yi5sZW5ndGgrIiBlbGVtKSI6dGhpcy5zdHJlYW0ucGFyc2VPY3RldFN0cmluZyhlLGUraSx0KTtzd2l0Y2godGhpcy50YWcudGFnTnVtYmVyKXtjYXNlIDE6cmV0dXJuIDA9PT10aGlzLnN0cmVhbS5nZXQoZSk/ImZhbHNlIjoidHJ1ZSI7Y2FzZSAyOnJldHVybiB0aGlzLnN0cmVhbS5wYXJzZUludGVnZXIoZSxlK2kpO2Nhc2UgMzpyZXR1cm4gdGhpcy5zdWI/IigiK3RoaXMuc3ViLmxlbmd0aCsiIGVsZW0pIjp0aGlzLnN0cmVhbS5wYXJzZUJpdFN0cmluZyhlLGUraSx0KTtjYXNlIDQ6cmV0dXJuIHRoaXMuc3ViPyIoIit0aGlzLnN1Yi5sZW5ndGgrIiBlbGVtKSI6dGhpcy5zdHJlYW0ucGFyc2VPY3RldFN0cmluZyhlLGUraSx0KTtjYXNlIDY6cmV0dXJuIHRoaXMuc3RyZWFtLnBhcnNlT0lEKGUsZStpLHQpO2Nhc2UgMTY6Y2FzZSAxNzpyZXR1cm4gbnVsbCE9PXRoaXMuc3ViPyIoIit0aGlzLnN1Yi5sZW5ndGgrIiBlbGVtKSI6IihubyBlbGVtKSI7Y2FzZSAxMjpyZXR1cm4gVCh0aGlzLnN0cmVhbS5wYXJzZVN0cmluZ1VURihlLGUraSksdCk7Y2FzZSAxODpjYXNlIDE5OmNhc2UgMjA6Y2FzZSAyMTpjYXNlIDIyOmNhc2UgMjY6cmV0dXJuIFQodGhpcy5zdHJlYW0ucGFyc2VTdHJpbmdJU08oZSxlK2kpLHQpO2Nhc2UgMzA6cmV0dXJuIFQodGhpcy5zdHJlYW0ucGFyc2VTdHJpbmdCTVAoZSxlK2kpLHQpO2Nhc2UgMjM6Y2FzZSAyNDpyZXR1cm4gdGhpcy5zdHJlYW0ucGFyc2VUaW1lKGUsZStpLDIzPT10aGlzLnRhZy50YWdOdW1iZXIpfXJldHVybiBudWxsfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGVOYW1lKCkrIkAiK3RoaXMuc3RyZWFtLnBvcysiW2hlYWRlcjoiK3RoaXMuaGVhZGVyKyIsbGVuZ3RoOiIrdGhpcy5sZW5ndGgrIixzdWI6IisobnVsbD09PXRoaXMuc3ViPyJudWxsIjp0aGlzLnN1Yi5sZW5ndGgpKyJdIn0sdC5wcm90b3R5cGUudG9QcmV0dHlTdHJpbmc9ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9IiIpO3ZhciBlPXQrdGhpcy50eXBlTmFtZSgpKyIgQCIrdGhpcy5zdHJlYW0ucG9zO2lmKHRoaXMubGVuZ3RoPj0wJiYoZSs9IisiKSxlKz10aGlzLmxlbmd0aCx0aGlzLnRhZy50YWdDb25zdHJ1Y3RlZD9lKz0iIChjb25zdHJ1Y3RlZCkiOiF0aGlzLnRhZy5pc1VuaXZlcnNhbCgpfHwzIT10aGlzLnRhZy50YWdOdW1iZXImJjQhPXRoaXMudGFnLnRhZ051bWJlcnx8bnVsbD09PXRoaXMuc3VifHwoZSs9IiAoZW5jYXBzdWxhdGVzKSIpLGUrPSJcbiIsbnVsbCE9PXRoaXMuc3ViKXt0Kz0iICAiO2Zvcih2YXIgaT0wLHI9dGhpcy5zdWIubGVuZ3RoO2k8cjsrK2kpZSs9dGhpcy5zdWJbaV0udG9QcmV0dHlTdHJpbmcodCl9cmV0dXJuIGV9LHQucHJvdG90eXBlLnBvc1N0YXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RyZWFtLnBvc30sdC5wcm90b3R5cGUucG9zQ29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0cmVhbS5wb3MrdGhpcy5oZWFkZXJ9LHQucHJvdG90eXBlLnBvc0VuZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0cmVhbS5wb3MrdGhpcy5oZWFkZXIrTWF0aC5hYnModGhpcy5sZW5ndGgpfSx0LnByb3RvdHlwZS50b0hleFN0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0cmVhbS5oZXhEdW1wKHRoaXMucG9zU3RhcnQoKSx0aGlzLnBvc0VuZCgpLCEwKX0sdC5kZWNvZGVMZW5ndGg9ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXQoKSxpPTEyNyZlO2lmKGk9PWUpcmV0dXJuIGk7aWYoaT42KXRocm93IG5ldyBFcnJvcigiTGVuZ3RoIG92ZXIgNDggYml0cyBub3Qgc3VwcG9ydGVkIGF0IHBvc2l0aW9uICIrKHQucG9zLTEpKTtpZigwPT09aSlyZXR1cm4gbnVsbDtlPTA7Zm9yKHZhciByPTA7cjxpOysrcillPTI1NiplK3QuZ2V0KCk7cmV0dXJuIGV9LHQucHJvdG90eXBlLmdldEhleFN0cmluZ1ZhbHVlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50b0hleFN0cmluZygpLGU9Mip0aGlzLmhlYWRlcixpPTIqdGhpcy5sZW5ndGg7cmV0dXJuIHQuc3Vic3RyKGUsaSl9LHQuZGVjb2RlPWZ1bmN0aW9uKGUpe3ZhciBpO2k9ZSBpbnN0YW5jZW9mIEU/ZTpuZXcgRShlLDApO3ZhciByPW5ldyBFKGkpLG49bmV3IEQoaSkscz10LmRlY29kZUxlbmd0aChpKSxvPWkucG9zLGg9by1yLnBvcyxhPW51bGwsdT1mdW5jdGlvbigpe3ZhciBlPVtdO2lmKG51bGwhPT1zKXtmb3IodmFyIHI9bytzO2kucG9zPHI7KWVbZS5sZW5ndGhdPXQuZGVjb2RlKGkpO2lmKGkucG9zIT1yKXRocm93IG5ldyBFcnJvcigiQ29udGVudCBzaXplIGlzIG5vdCBjb3JyZWN0IGZvciBjb250YWluZXIgc3RhcnRpbmcgYXQgb2Zmc2V0ICIrbyl9ZWxzZSB0cnl7Zm9yKDs7KXt2YXIgbj10LmRlY29kZShpKTtpZihuLnRhZy5pc0VPQygpKWJyZWFrO2VbZS5sZW5ndGhdPW59cz1vLWkucG9zfWNhdGNoKHQpe3Rocm93IG5ldyBFcnJvcigiRXhjZXB0aW9uIHdoaWxlIGRlY29kaW5nIHVuZGVmaW5lZCBsZW5ndGggY29udGVudDogIit0KX1yZXR1cm4gZX07aWYobi50YWdDb25zdHJ1Y3RlZClhPXUoKTtlbHNlIGlmKG4uaXNVbml2ZXJzYWwoKSYmKDM9PW4udGFnTnVtYmVyfHw0PT1uLnRhZ051bWJlcikpdHJ5e2lmKDM9PW4udGFnTnVtYmVyJiYwIT1pLmdldCgpKXRocm93IG5ldyBFcnJvcigiQklUIFNUUklOR3Mgd2l0aCB1bnVzZWQgYml0cyBjYW5ub3QgZW5jYXBzdWxhdGUuIik7YT11KCk7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDsrK2MpaWYoYVtjXS50YWcuaXNFT0MoKSl0aHJvdyBuZXcgRXJyb3IoIkVPQyBpcyBub3Qgc3VwcG9zZWQgdG8gYmUgYWN0dWFsIGNvbnRlbnQuIil9Y2F0Y2godCl7YT1udWxsfWlmKG51bGw9PT1hKXtpZihudWxsPT09cyl0aHJvdyBuZXcgRXJyb3IoIldlIGNhbid0IHNraXAgb3ZlciBhbiBpbnZhbGlkIHRhZyB3aXRoIHVuZGVmaW5lZCBsZW5ndGggYXQgb2Zmc2V0ICIrbyk7aS5wb3M9bytNYXRoLmFicyhzKX1yZXR1cm4gbmV3IHQocixoLHMsbixhKX0sdH0oKSxEPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt2YXIgZT10LmdldCgpO2lmKHRoaXMudGFnQ2xhc3M9ZT4+Nix0aGlzLnRhZ0NvbnN0cnVjdGVkPTAhPSgzMiZlKSx0aGlzLnRhZ051bWJlcj0zMSZlLDMxPT10aGlzLnRhZ051bWJlcil7dmFyIGk9bmV3IG07ZG97ZT10LmdldCgpLGkubXVsQWRkKDEyOCwxMjcmZSl9d2hpbGUoMTI4JmUpO3RoaXMudGFnTnVtYmVyPWkuc2ltcGxpZnkoKX19cmV0dXJuIHQucHJvdG90eXBlLmlzVW5pdmVyc2FsPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLnRhZ0NsYXNzfSx0LnByb3RvdHlwZS5pc0VPQz1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy50YWdDbGFzcyYmMD09PXRoaXMudGFnTnVtYmVyfSx0fSgpLHg9WzIsMyw1LDcsMTEsMTMsMTcsMTksMjMsMjksMzEsMzcsNDEsNDMsNDcsNTMsNTksNjEsNjcsNzEsNzMsNzksODMsODksOTcsMTAxLDEwMywxMDcsMTA5LDExMywxMjcsMTMxLDEzNywxMzksMTQ5LDE1MSwxNTcsMTYzLDE2NywxNzMsMTc5LDE4MSwxOTEsMTkzLDE5NywxOTksMjExLDIyMywyMjcsMjI5LDIzMywyMzksMjQxLDI1MSwyNTcsMjYzLDI2OSwyNzEsMjc3LDI4MSwyODMsMjkzLDMwNywzMTEsMzEzLDMxNywzMzEsMzM3LDM0NywzNDksMzUzLDM1OSwzNjcsMzczLDM3OSwzODMsMzg5LDM5Nyw0MDEsNDA5LDQxOSw0MjEsNDMxLDQzMyw0MzksNDQzLDQ0OSw0NTcsNDYxLDQ2Myw0NjcsNDc5LDQ4Nyw0OTEsNDk5LDUwMyw1MDksNTIxLDUyMyw1NDEsNTQ3LDU1Nyw1NjMsNTY5LDU3MSw1NzcsNTg3LDU5Myw1OTksNjAxLDYwNyw2MTMsNjE3LDYxOSw2MzEsNjQxLDY0Myw2NDcsNjUzLDY1OSw2NjEsNjczLDY3Nyw2ODMsNjkxLDcwMSw3MDksNzE5LDcyNyw3MzMsNzM5LDc0Myw3NTEsNzU3LDc2MSw3NjksNzczLDc4Nyw3OTcsODA5LDgxMSw4MjEsODIzLDgyNyw4MjksODM5LDg1Myw4NTcsODU5LDg2Myw4NzcsODgxLDg4Myw4ODcsOTA3LDkxMSw5MTksOTI5LDkzNyw5NDEsOTQ3LDk1Myw5NjcsOTcxLDk3Nyw5ODMsOTkxLDk5N10sUj0oMTw8MjYpL3hbeC5sZW5ndGgtMV0sQj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLGkpe251bGwhPXQmJigibnVtYmVyIj09dHlwZW9mIHQ/dGhpcy5mcm9tTnVtYmVyKHQsZSxpKTpudWxsPT1lJiYic3RyaW5nIiE9dHlwZW9mIHQ/dGhpcy5mcm9tU3RyaW5nKHQsMjU2KTp0aGlzLmZyb21TdHJpbmcodCxlKSl9cmV0dXJuIHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKHQpe2lmKHRoaXMuczwwKXJldHVybiItIit0aGlzLm5lZ2F0ZSgpLnRvU3RyaW5nKHQpO3ZhciBlO2lmKDE2PT10KWU9NDtlbHNlIGlmKDg9PXQpZT0zO2Vsc2UgaWYoMj09dCllPTE7ZWxzZSBpZigzMj09dCllPTU7ZWxzZXtpZig0IT10KXJldHVybiB0aGlzLnRvUmFkaXgodCk7ZT0yfXZhciBpLG49KDE8PGUpLTEscz0hMSxvPSIiLGg9dGhpcy50LGE9dGhpcy5EQi1oKnRoaXMuREIlZTtpZihoLS0gPjApZm9yKGE8dGhpcy5EQiYmKGk9dGhpc1toXT4+YSk+MCYmKHM9ITAsbz1yKGkpKTtoPj0wOylhPGU/KGk9KHRoaXNbaF0mKDE8PGEpLTEpPDxlLWEsaXw9dGhpc1stLWhdPj4oYSs9dGhpcy5EQi1lKSk6KGk9dGhpc1toXT4+KGEtPWUpJm4sYTw9MCYmKGErPXRoaXMuREIsLS1oKSksaT4wJiYocz0hMCkscyYmKG8rPXIoaSkpO3JldHVybiBzP286IjAifSx0LnByb3RvdHlwZS5uZWdhdGU9ZnVuY3Rpb24oKXt2YXIgZT1OKCk7cmV0dXJuIHQuWkVSTy5zdWJUbyh0aGlzLGUpLGV9LHQucHJvdG90eXBlLmFicz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnM8MD90aGlzLm5lZ2F0ZSgpOnRoaXN9LHQucHJvdG90eXBlLmNvbXBhcmVUbz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnMtdC5zO2lmKDAhPWUpcmV0dXJuIGU7dmFyIGk9dGhpcy50O2lmKDAhPShlPWktdC50KSlyZXR1cm4gdGhpcy5zPDA/LWU6ZTtmb3IoOy0taT49MDspaWYoMCE9KGU9dGhpc1tpXS10W2ldKSlyZXR1cm4gZTtyZXR1cm4gMH0sdC5wcm90b3R5cGUuYml0TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudDw9MD8wOnRoaXMuREIqKHRoaXMudC0xKStGKHRoaXNbdGhpcy50LTFdXnRoaXMucyZ0aGlzLkRNKX0sdC5wcm90b3R5cGUubW9kPWZ1bmN0aW9uKGUpe3ZhciBpPU4oKTtyZXR1cm4gdGhpcy5hYnMoKS5kaXZSZW1UbyhlLG51bGwsaSksdGhpcy5zPDAmJmkuY29tcGFyZVRvKHQuWkVSTyk+MCYmZS5zdWJUbyhpLGkpLGl9LHQucHJvdG90eXBlLm1vZFBvd0ludD1mdW5jdGlvbih0LGUpe3ZhciBpO3JldHVybiBpPXQ8MjU2fHxlLmlzRXZlbigpP25ldyBBKGUpOm5ldyBWKGUpLHRoaXMuZXhwKHQsaSl9LHQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIHQ9TigpO3JldHVybiB0aGlzLmNvcHlUbyh0KSx0fSx0LnByb3RvdHlwZS5pbnRWYWx1ZT1mdW5jdGlvbigpe2lmKHRoaXMuczwwKXtpZigxPT10aGlzLnQpcmV0dXJuIHRoaXNbMF0tdGhpcy5EVjtpZigwPT10aGlzLnQpcmV0dXJuLTF9ZWxzZXtpZigxPT10aGlzLnQpcmV0dXJuIHRoaXNbMF07aWYoMD09dGhpcy50KXJldHVybiAwfXJldHVybih0aGlzWzFdJigxPDwzMi10aGlzLkRCKS0xKTw8dGhpcy5EQnx0aGlzWzBdfSx0LnByb3RvdHlwZS5ieXRlVmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gMD09dGhpcy50P3RoaXMuczp0aGlzWzBdPDwyND4+MjR9LHQucHJvdG90eXBlLnNob3J0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gMD09dGhpcy50P3RoaXMuczp0aGlzWzBdPDwxNj4+MTZ9LHQucHJvdG90eXBlLnNpZ251bT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnM8MD8tMTp0aGlzLnQ8PTB8fDE9PXRoaXMudCYmdGhpc1swXTw9MD8wOjF9LHQucHJvdG90eXBlLnRvQnl0ZUFycmF5PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50LGU9W107ZVswXT10aGlzLnM7dmFyIGkscj10aGlzLkRCLXQqdGhpcy5EQiU4LG49MDtpZih0LS0gPjApZm9yKHI8dGhpcy5EQiYmKGk9dGhpc1t0XT4+cikhPSh0aGlzLnMmdGhpcy5ETSk+PnImJihlW24rK109aXx0aGlzLnM8PHRoaXMuREItcik7dD49MDspcjw4PyhpPSh0aGlzW3RdJigxPDxyKS0xKTw8OC1yLGl8PXRoaXNbLS10XT4+KHIrPXRoaXMuREItOCkpOihpPXRoaXNbdF0+PihyLT04KSYyNTUscjw9MCYmKHIrPXRoaXMuREIsLS10KSksMCE9KDEyOCZpKSYmKGl8PS0yNTYpLDA9PW4mJigxMjgmdGhpcy5zKSE9KDEyOCZpKSYmKytuLChuPjB8fGkhPXRoaXMucykmJihlW24rK109aSk7cmV0dXJuIGV9LHQucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbih0KXtyZXR1cm4gMD09dGhpcy5jb21wYXJlVG8odCl9LHQucHJvdG90eXBlLm1pbj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb21wYXJlVG8odCk8MD90aGlzOnR9LHQucHJvdG90eXBlLm1heD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb21wYXJlVG8odCk+MD90aGlzOnR9LHQucHJvdG90eXBlLmFuZD1mdW5jdGlvbih0KXt2YXIgZT1OKCk7cmV0dXJuIHRoaXMuYml0d2lzZVRvKHQsbixlKSxlfSx0LnByb3RvdHlwZS5vcj1mdW5jdGlvbih0KXt2YXIgZT1OKCk7cmV0dXJuIHRoaXMuYml0d2lzZVRvKHQscyxlKSxlfSx0LnByb3RvdHlwZS54b3I9ZnVuY3Rpb24odCl7dmFyIGU9TigpO3JldHVybiB0aGlzLmJpdHdpc2VUbyh0LG8sZSksZX0sdC5wcm90b3R5cGUuYW5kTm90PWZ1bmN0aW9uKHQpe3ZhciBlPU4oKTtyZXR1cm4gdGhpcy5iaXR3aXNlVG8odCxoLGUpLGV9LHQucHJvdG90eXBlLm5vdD1mdW5jdGlvbigpe2Zvcih2YXIgdD1OKCksZT0wO2U8dGhpcy50OysrZSl0W2VdPXRoaXMuRE0mfnRoaXNbZV07cmV0dXJuIHQudD10aGlzLnQsdC5zPX50aGlzLnMsdH0sdC5wcm90b3R5cGUuc2hpZnRMZWZ0PWZ1bmN0aW9uKHQpe3ZhciBlPU4oKTtyZXR1cm4gdDwwP3RoaXMuclNoaWZ0VG8oLXQsZSk6dGhpcy5sU2hpZnRUbyh0LGUpLGV9LHQucHJvdG90eXBlLnNoaWZ0UmlnaHQ9ZnVuY3Rpb24odCl7dmFyIGU9TigpO3JldHVybiB0PDA/dGhpcy5sU2hpZnRUbygtdCxlKTp0aGlzLnJTaGlmdFRvKHQsZSksZX0sdC5wcm90b3R5cGUuZ2V0TG93ZXN0U2V0Qml0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLnQ7Kyt0KWlmKDAhPXRoaXNbdF0pcmV0dXJuIHQqdGhpcy5EQithKHRoaXNbdF0pO3JldHVybiB0aGlzLnM8MD90aGlzLnQqdGhpcy5EQjotMX0sdC5wcm90b3R5cGUuYml0Q291bnQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMucyZ0aGlzLkRNLGk9MDtpPHRoaXMudDsrK2kpdCs9dSh0aGlzW2ldXmUpO3JldHVybiB0fSx0LnByb3RvdHlwZS50ZXN0Qml0PWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGguZmxvb3IodC90aGlzLkRCKTtyZXR1cm4gZT49dGhpcy50PzAhPXRoaXMuczowIT0odGhpc1tlXSYxPDx0JXRoaXMuREIpfSx0LnByb3RvdHlwZS5zZXRCaXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2hhbmdlQml0KHQscyl9LHQucHJvdG90eXBlLmNsZWFyQml0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNoYW5nZUJpdCh0LGgpfSx0LnByb3RvdHlwZS5mbGlwQml0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNoYW5nZUJpdCh0LG8pfSx0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7dmFyIGU9TigpO3JldHVybiB0aGlzLmFkZFRvKHQsZSksZX0sdC5wcm90b3R5cGUuc3VidHJhY3Q9ZnVuY3Rpb24odCl7dmFyIGU9TigpO3JldHVybiB0aGlzLnN1YlRvKHQsZSksZX0sdC5wcm90b3R5cGUubXVsdGlwbHk9ZnVuY3Rpb24odCl7dmFyIGU9TigpO3JldHVybiB0aGlzLm11bHRpcGx5VG8odCxlKSxlfSx0LnByb3RvdHlwZS5kaXZpZGU9ZnVuY3Rpb24odCl7dmFyIGU9TigpO3JldHVybiB0aGlzLmRpdlJlbVRvKHQsZSxudWxsKSxlfSx0LnByb3RvdHlwZS5yZW1haW5kZXI9ZnVuY3Rpb24odCl7dmFyIGU9TigpO3JldHVybiB0aGlzLmRpdlJlbVRvKHQsbnVsbCxlKSxlfSx0LnByb3RvdHlwZS5kaXZpZGVBbmRSZW1haW5kZXI9ZnVuY3Rpb24odCl7dmFyIGU9TigpLGk9TigpO3JldHVybiB0aGlzLmRpdlJlbVRvKHQsZSxpKSxbZSxpXX0sdC5wcm90b3R5cGUubW9kUG93PWZ1bmN0aW9uKHQsZSl7dmFyIGkscixuPXQuYml0TGVuZ3RoKCkscz1DKDEpO2lmKG48PTApcmV0dXJuIHM7aT1uPDE4PzE6bjw0OD8zOm48MTQ0PzQ6bjw3Njg/NTo2LHI9bjw4P25ldyBBKGUpOmUuaXNFdmVuKCk/bmV3IEkoZSk6bmV3IFYoZSk7dmFyIG89W10saD0zLGE9aS0xLHU9KDE8PGkpLTE7aWYob1sxXT1yLmNvbnZlcnQodGhpcyksaT4xKXt2YXIgYz1OKCk7Zm9yKHIuc3FyVG8ob1sxXSxjKTtoPD11OylvW2hdPU4oKSxyLm11bFRvKGMsb1toLTJdLG9baF0pLGgrPTJ9dmFyIGYsbCxwPXQudC0xLGc9ITAsZD1OKCk7Zm9yKG49Rih0W3BdKS0xO3A+PTA7KXtmb3Iobj49YT9mPXRbcF0+Pm4tYSZ1OihmPSh0W3BdJigxPDxuKzEpLTEpPDxhLW4scD4wJiYoZnw9dFtwLTFdPj50aGlzLkRCK24tYSkpLGg9aTswPT0oMSZmKTspZj4+PTEsLS1oO2lmKChuLT1oKTwwJiYobis9dGhpcy5EQiwtLXApLGcpb1tmXS5jb3B5VG8ocyksZz0hMTtlbHNle2Zvcig7aD4xOylyLnNxclRvKHMsZCksci5zcXJUbyhkLHMpLGgtPTI7aD4wP3Iuc3FyVG8ocyxkKToobD1zLHM9ZCxkPWwpLHIubXVsVG8oZCxvW2ZdLHMpfWZvcig7cD49MCYmMD09KHRbcF0mMTw8bik7KXIuc3FyVG8ocyxkKSxsPXMscz1kLGQ9bCwtLW48MCYmKG49dGhpcy5EQi0xLC0tcCl9cmV0dXJuIHIucmV2ZXJ0KHMpfSx0LnByb3RvdHlwZS5tb2RJbnZlcnNlPWZ1bmN0aW9uKGUpe3ZhciBpPWUuaXNFdmVuKCk7aWYodGhpcy5pc0V2ZW4oKSYmaXx8MD09ZS5zaWdudW0oKSlyZXR1cm4gdC5aRVJPO2Zvcih2YXIgcj1lLmNsb25lKCksbj10aGlzLmNsb25lKCkscz1DKDEpLG89QygwKSxoPUMoMCksYT1DKDEpOzAhPXIuc2lnbnVtKCk7KXtmb3IoO3IuaXNFdmVuKCk7KXIuclNoaWZ0VG8oMSxyKSxpPyhzLmlzRXZlbigpJiZvLmlzRXZlbigpfHwocy5hZGRUbyh0aGlzLHMpLG8uc3ViVG8oZSxvKSkscy5yU2hpZnRUbygxLHMpKTpvLmlzRXZlbigpfHxvLnN1YlRvKGUsbyksby5yU2hpZnRUbygxLG8pO2Zvcig7bi5pc0V2ZW4oKTspbi5yU2hpZnRUbygxLG4pLGk/KGguaXNFdmVuKCkmJmEuaXNFdmVuKCl8fChoLmFkZFRvKHRoaXMsaCksYS5zdWJUbyhlLGEpKSxoLnJTaGlmdFRvKDEsaCkpOmEuaXNFdmVuKCl8fGEuc3ViVG8oZSxhKSxhLnJTaGlmdFRvKDEsYSk7ci5jb21wYXJlVG8obik+PTA/KHIuc3ViVG8obixyKSxpJiZzLnN1YlRvKGgscyksby5zdWJUbyhhLG8pKToobi5zdWJUbyhyLG4pLGkmJmguc3ViVG8ocyxoKSxhLnN1YlRvKG8sYSkpfXJldHVybiAwIT1uLmNvbXBhcmVUbyh0Lk9ORSk/dC5aRVJPOmEuY29tcGFyZVRvKGUpPj0wP2Euc3VidHJhY3QoZSk6YS5zaWdudW0oKTwwPyhhLmFkZFRvKGUsYSksYS5zaWdudW0oKTwwP2EuYWRkKGUpOmEpOmF9LHQucHJvdG90eXBlLnBvdz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5leHAodCxuZXcgTyl9LHQucHJvdG90eXBlLmdjZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnM8MD90aGlzLm5lZ2F0ZSgpOnRoaXMuY2xvbmUoKSxpPXQuczwwP3QubmVnYXRlKCk6dC5jbG9uZSgpO2lmKGUuY29tcGFyZVRvKGkpPDApe3ZhciByPWU7ZT1pLGk9cn12YXIgbj1lLmdldExvd2VzdFNldEJpdCgpLHM9aS5nZXRMb3dlc3RTZXRCaXQoKTtpZihzPDApcmV0dXJuIGU7Zm9yKG48cyYmKHM9bikscz4wJiYoZS5yU2hpZnRUbyhzLGUpLGkuclNoaWZ0VG8ocyxpKSk7ZS5zaWdudW0oKT4wOykobj1lLmdldExvd2VzdFNldEJpdCgpKT4wJiZlLnJTaGlmdFRvKG4sZSksKG49aS5nZXRMb3dlc3RTZXRCaXQoKSk+MCYmaS5yU2hpZnRUbyhuLGkpLGUuY29tcGFyZVRvKGkpPj0wPyhlLnN1YlRvKGksZSksZS5yU2hpZnRUbygxLGUpKTooaS5zdWJUbyhlLGkpLGkuclNoaWZ0VG8oMSxpKSk7cmV0dXJuIHM+MCYmaS5sU2hpZnRUbyhzLGkpLGl9LHQucHJvdG90eXBlLmlzUHJvYmFibGVQcmltZT1mdW5jdGlvbih0KXt2YXIgZSxpPXRoaXMuYWJzKCk7aWYoMT09aS50JiZpWzBdPD14W3gubGVuZ3RoLTFdKXtmb3IoZT0wO2U8eC5sZW5ndGg7KytlKWlmKGlbMF09PXhbZV0pcmV0dXJuITA7cmV0dXJuITF9aWYoaS5pc0V2ZW4oKSlyZXR1cm4hMTtmb3IoZT0xO2U8eC5sZW5ndGg7KXtmb3IodmFyIHI9eFtlXSxuPWUrMTtuPHgubGVuZ3RoJiZyPFI7KXIqPXhbbisrXTtmb3Iocj1pLm1vZEludChyKTtlPG47KWlmKHIleFtlKytdPT0wKXJldHVybiExfXJldHVybiBpLm1pbGxlclJhYmluKHQpfSx0LnByb3RvdHlwZS5jb3B5VG89ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMudC0xO2U+PTA7LS1lKXRbZV09dGhpc1tlXTt0LnQ9dGhpcy50LHQucz10aGlzLnN9LHQucHJvdG90eXBlLmZyb21JbnQ9ZnVuY3Rpb24odCl7dGhpcy50PTEsdGhpcy5zPXQ8MD8tMTowLHQ+MD90aGlzWzBdPXQ6dDwtMT90aGlzWzBdPXQrdGhpcy5EVjp0aGlzLnQ9MH0sdC5wcm90b3R5cGUuZnJvbVN0cmluZz1mdW5jdGlvbihlLGkpe3ZhciByO2lmKDE2PT1pKXI9NDtlbHNlIGlmKDg9PWkpcj0zO2Vsc2UgaWYoMjU2PT1pKXI9ODtlbHNlIGlmKDI9PWkpcj0xO2Vsc2UgaWYoMzI9PWkpcj01O2Vsc2V7aWYoNCE9aSlyZXR1cm4gdm9pZCB0aGlzLmZyb21SYWRpeChlLGkpO3I9Mn10aGlzLnQ9MCx0aGlzLnM9MDtmb3IodmFyIG49ZS5sZW5ndGgscz0hMSxvPTA7LS1uPj0wOyl7dmFyIGg9OD09cj8yNTUmK2Vbbl06SChlLG4pO2g8MD8iLSI9PWUuY2hhckF0KG4pJiYocz0hMCk6KHM9ITEsMD09bz90aGlzW3RoaXMudCsrXT1oOm8rcj50aGlzLkRCPyh0aGlzW3RoaXMudC0xXXw9KGgmKDE8PHRoaXMuREItbyktMSk8PG8sdGhpc1t0aGlzLnQrK109aD4+dGhpcy5EQi1vKTp0aGlzW3RoaXMudC0xXXw9aDw8bywobys9cik+PXRoaXMuREImJihvLT10aGlzLkRCKSl9OD09ciYmMCE9KDEyOCYrZVswXSkmJih0aGlzLnM9LTEsbz4wJiYodGhpc1t0aGlzLnQtMV18PSgxPDx0aGlzLkRCLW8pLTE8PG8pKSx0aGlzLmNsYW1wKCkscyYmdC5aRVJPLnN1YlRvKHRoaXMsdGhpcyl9LHQucHJvdG90eXBlLmNsYW1wPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMucyZ0aGlzLkRNO3RoaXMudD4wJiZ0aGlzW3RoaXMudC0xXT09dDspLS10aGlzLnR9LHQucHJvdG90eXBlLmRsU2hpZnRUbz1mdW5jdGlvbih0LGUpe3ZhciBpO2ZvcihpPXRoaXMudC0xO2k+PTA7LS1pKWVbaSt0XT10aGlzW2ldO2ZvcihpPXQtMTtpPj0wOy0taSllW2ldPTA7ZS50PXRoaXMudCt0LGUucz10aGlzLnN9LHQucHJvdG90eXBlLmRyU2hpZnRUbz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaT10O2k8dGhpcy50OysraSllW2ktdF09dGhpc1tpXTtlLnQ9TWF0aC5tYXgodGhpcy50LXQsMCksZS5zPXRoaXMuc30sdC5wcm90b3R5cGUubFNoaWZ0VG89ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dCV0aGlzLkRCLHI9dGhpcy5EQi1pLG49KDE8PHIpLTEscz1NYXRoLmZsb29yKHQvdGhpcy5EQiksbz10aGlzLnM8PGkmdGhpcy5ETSxoPXRoaXMudC0xO2g+PTA7LS1oKWVbaCtzKzFdPXRoaXNbaF0+PnJ8byxvPSh0aGlzW2hdJm4pPDxpO2ZvcihoPXMtMTtoPj0wOy0taCllW2hdPTA7ZVtzXT1vLGUudD10aGlzLnQrcysxLGUucz10aGlzLnMsZS5jbGFtcCgpfSx0LnByb3RvdHlwZS5yU2hpZnRUbz1mdW5jdGlvbih0LGUpe2Uucz10aGlzLnM7dmFyIGk9TWF0aC5mbG9vcih0L3RoaXMuREIpO2lmKGk+PXRoaXMudCllLnQ9MDtlbHNle3ZhciByPXQldGhpcy5EQixuPXRoaXMuREItcixzPSgxPDxyKS0xO2VbMF09dGhpc1tpXT4+cjtmb3IodmFyIG89aSsxO288dGhpcy50OysrbyllW28taS0xXXw9KHRoaXNbb10mcyk8PG4sZVtvLWldPXRoaXNbb10+PnI7cj4wJiYoZVt0aGlzLnQtaS0xXXw9KHRoaXMucyZzKTw8biksZS50PXRoaXMudC1pLGUuY2xhbXAoKX19LHQucHJvdG90eXBlLnN1YlRvPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPTAscj0wLG49TWF0aC5taW4odC50LHRoaXMudCk7aTxuOylyKz10aGlzW2ldLXRbaV0sZVtpKytdPXImdGhpcy5ETSxyPj49dGhpcy5EQjtpZih0LnQ8dGhpcy50KXtmb3Ioci09dC5zO2k8dGhpcy50OylyKz10aGlzW2ldLGVbaSsrXT1yJnRoaXMuRE0scj4+PXRoaXMuREI7cis9dGhpcy5zfWVsc2V7Zm9yKHIrPXRoaXMucztpPHQudDspci09dFtpXSxlW2krK109ciZ0aGlzLkRNLHI+Pj10aGlzLkRCO3ItPXQuc31lLnM9cjwwPy0xOjAscjwtMT9lW2krK109dGhpcy5EVityOnI+MCYmKGVbaSsrXT1yKSxlLnQ9aSxlLmNsYW1wKCl9LHQucHJvdG90eXBlLm11bHRpcGx5VG89ZnVuY3Rpb24oZSxpKXt2YXIgcj10aGlzLmFicygpLG49ZS5hYnMoKSxzPXIudDtmb3IoaS50PXMrbi50Oy0tcz49MDspaVtzXT0wO2ZvcihzPTA7czxuLnQ7KytzKWlbcytyLnRdPXIuYW0oMCxuW3NdLGkscywwLHIudCk7aS5zPTAsaS5jbGFtcCgpLHRoaXMucyE9ZS5zJiZ0LlpFUk8uc3ViVG8oaSxpKX0sdC5wcm90b3R5cGUuc3F1YXJlVG89ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuYWJzKCksaT10LnQ9MiplLnQ7LS1pPj0wOyl0W2ldPTA7Zm9yKGk9MDtpPGUudC0xOysraSl7dmFyIHI9ZS5hbShpLGVbaV0sdCwyKmksMCwxKTsodFtpK2UudF0rPWUuYW0oaSsxLDIqZVtpXSx0LDIqaSsxLHIsZS50LWktMSkpPj1lLkRWJiYodFtpK2UudF0tPWUuRFYsdFtpK2UudCsxXT0xKX10LnQ+MCYmKHRbdC50LTFdKz1lLmFtKGksZVtpXSx0LDIqaSwwLDEpKSx0LnM9MCx0LmNsYW1wKCl9LHQucHJvdG90eXBlLmRpdlJlbVRvPWZ1bmN0aW9uKGUsaSxyKXt2YXIgbj1lLmFicygpO2lmKCEobi50PD0wKSl7dmFyIHM9dGhpcy5hYnMoKTtpZihzLnQ8bi50KXJldHVybiBudWxsIT1pJiZpLmZyb21JbnQoMCksdm9pZChudWxsIT1yJiZ0aGlzLmNvcHlUbyhyKSk7bnVsbD09ciYmKHI9TigpKTt2YXIgbz1OKCksaD10aGlzLnMsYT1lLnMsdT10aGlzLkRCLUYobltuLnQtMV0pO3U+MD8obi5sU2hpZnRUbyh1LG8pLHMubFNoaWZ0VG8odSxyKSk6KG4uY29weVRvKG8pLHMuY29weVRvKHIpKTt2YXIgYz1vLnQsZj1vW2MtMV07aWYoMCE9Zil7dmFyIGw9ZiooMTw8dGhpcy5GMSkrKGM+MT9vW2MtMl0+PnRoaXMuRjI6MCkscD10aGlzLkZWL2wsZz0oMTw8dGhpcy5GMSkvbCxkPTE8PHRoaXMuRjIsdj1yLnQsbT12LWMseT1udWxsPT1pP04oKTppO2ZvcihvLmRsU2hpZnRUbyhtLHkpLHIuY29tcGFyZVRvKHkpPj0wJiYocltyLnQrK109MSxyLnN1YlRvKHkscikpLHQuT05FLmRsU2hpZnRUbyhjLHkpLHkuc3ViVG8obyxvKTtvLnQ8Yzspb1tvLnQrK109MDtmb3IoOy0tbT49MDspe3ZhciBiPXJbLS12XT09Zj90aGlzLkRNOk1hdGguZmxvb3Ioclt2XSpwKyhyW3YtMV0rZCkqZyk7aWYoKHJbdl0rPW8uYW0oMCxiLHIsbSwwLGMpKTxiKWZvcihvLmRsU2hpZnRUbyhtLHkpLHIuc3ViVG8oeSxyKTtyW3ZdPC0tYjspci5zdWJUbyh5LHIpfW51bGwhPWkmJihyLmRyU2hpZnRUbyhjLGkpLGghPWEmJnQuWkVSTy5zdWJUbyhpLGkpKSxyLnQ9YyxyLmNsYW1wKCksdT4wJiZyLnJTaGlmdFRvKHUsciksaDwwJiZ0LlpFUk8uc3ViVG8ocixyKX19fSx0LnByb3RvdHlwZS5pbnZEaWdpdD1mdW5jdGlvbigpe2lmKHRoaXMudDwxKXJldHVybiAwO3ZhciB0PXRoaXNbMF07aWYoMD09KDEmdCkpcmV0dXJuIDA7dmFyIGU9MyZ0O3JldHVybihlPShlPShlPShlPWUqKDItKDE1JnQpKmUpJjE1KSooMi0oMjU1JnQpKmUpJjI1NSkqKDItKCg2NTUzNSZ0KSplJjY1NTM1KSkmNjU1MzUpKigyLXQqZSV0aGlzLkRWKSV0aGlzLkRWKT4wP3RoaXMuRFYtZTotZX0sdC5wcm90b3R5cGUuaXNFdmVuPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PSh0aGlzLnQ+MD8xJnRoaXNbMF06dGhpcy5zKX0sdC5wcm90b3R5cGUuZXhwPWZ1bmN0aW9uKGUsaSl7aWYoZT40Mjk0OTY3Mjk1fHxlPDEpcmV0dXJuIHQuT05FO3ZhciByPU4oKSxuPU4oKSxzPWkuY29udmVydCh0aGlzKSxvPUYoZSktMTtmb3Iocy5jb3B5VG8ocik7LS1vPj0wOylpZihpLnNxclRvKHIsbiksKGUmMTw8byk+MClpLm11bFRvKG4scyxyKTtlbHNle3ZhciBoPXI7cj1uLG49aH1yZXR1cm4gaS5yZXZlcnQocil9LHQucHJvdG90eXBlLmNodW5rU2l6ZT1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5mbG9vcihNYXRoLkxOMip0aGlzLkRCL01hdGgubG9nKHQpKX0sdC5wcm90b3R5cGUudG9SYWRpeD1mdW5jdGlvbih0KXtpZihudWxsPT10JiYodD0xMCksMD09dGhpcy5zaWdudW0oKXx8dDwyfHx0PjM2KXJldHVybiIwIjt2YXIgZT10aGlzLmNodW5rU2l6ZSh0KSxpPU1hdGgucG93KHQsZSkscj1DKGkpLG49TigpLHM9TigpLG89IiI7Zm9yKHRoaXMuZGl2UmVtVG8ocixuLHMpO24uc2lnbnVtKCk+MDspbz0oaStzLmludFZhbHVlKCkpLnRvU3RyaW5nKHQpLnN1YnN0cigxKStvLG4uZGl2UmVtVG8ocixuLHMpO3JldHVybiBzLmludFZhbHVlKCkudG9TdHJpbmcodCkrb30sdC5wcm90b3R5cGUuZnJvbVJhZGl4PWZ1bmN0aW9uKGUsaSl7dGhpcy5mcm9tSW50KDApLG51bGw9PWkmJihpPTEwKTtmb3IodmFyIHI9dGhpcy5jaHVua1NpemUoaSksbj1NYXRoLnBvdyhpLHIpLHM9ITEsbz0wLGg9MCxhPTA7YTxlLmxlbmd0aDsrK2Epe3ZhciB1PUgoZSxhKTt1PDA/Ii0iPT1lLmNoYXJBdChhKSYmMD09dGhpcy5zaWdudW0oKSYmKHM9ITApOihoPWkqaCt1LCsrbz49ciYmKHRoaXMuZE11bHRpcGx5KG4pLHRoaXMuZEFkZE9mZnNldChoLDApLG89MCxoPTApKX1vPjAmJih0aGlzLmRNdWx0aXBseShNYXRoLnBvdyhpLG8pKSx0aGlzLmRBZGRPZmZzZXQoaCwwKSkscyYmdC5aRVJPLnN1YlRvKHRoaXMsdGhpcyl9LHQucHJvdG90eXBlLmZyb21OdW1iZXI9ZnVuY3Rpb24oZSxpLHIpe2lmKCJudW1iZXIiPT10eXBlb2YgaSlpZihlPDIpdGhpcy5mcm9tSW50KDEpO2Vsc2UgZm9yKHRoaXMuZnJvbU51bWJlcihlLHIpLHRoaXMudGVzdEJpdChlLTEpfHx0aGlzLmJpdHdpc2VUbyh0Lk9ORS5zaGlmdExlZnQoZS0xKSxzLHRoaXMpLHRoaXMuaXNFdmVuKCkmJnRoaXMuZEFkZE9mZnNldCgxLDApOyF0aGlzLmlzUHJvYmFibGVQcmltZShpKTspdGhpcy5kQWRkT2Zmc2V0KDIsMCksdGhpcy5iaXRMZW5ndGgoKT5lJiZ0aGlzLnN1YlRvKHQuT05FLnNoaWZ0TGVmdChlLTEpLHRoaXMpO2Vsc2V7dmFyIG49W10sbz03JmU7bi5sZW5ndGg9MSsoZT4+MyksaS5uZXh0Qnl0ZXMobiksbz4wP25bMF0mPSgxPDxvKS0xOm5bMF09MCx0aGlzLmZyb21TdHJpbmcobiwyNTYpfX0sdC5wcm90b3R5cGUuYml0d2lzZVRvPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcixuLHM9TWF0aC5taW4odC50LHRoaXMudCk7Zm9yKHI9MDtyPHM7KytyKWlbcl09ZSh0aGlzW3JdLHRbcl0pO2lmKHQudDx0aGlzLnQpe2ZvcihuPXQucyZ0aGlzLkRNLHI9cztyPHRoaXMudDsrK3IpaVtyXT1lKHRoaXNbcl0sbik7aS50PXRoaXMudH1lbHNle2ZvcihuPXRoaXMucyZ0aGlzLkRNLHI9cztyPHQudDsrK3IpaVtyXT1lKG4sdFtyXSk7aS50PXQudH1pLnM9ZSh0aGlzLnMsdC5zKSxpLmNsYW1wKCl9LHQucHJvdG90eXBlLmNoYW5nZUJpdD1mdW5jdGlvbihlLGkpe3ZhciByPXQuT05FLnNoaWZ0TGVmdChlKTtyZXR1cm4gdGhpcy5iaXR3aXNlVG8ocixpLHIpLHJ9LHQucHJvdG90eXBlLmFkZFRvPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPTAscj0wLG49TWF0aC5taW4odC50LHRoaXMudCk7aTxuOylyKz10aGlzW2ldK3RbaV0sZVtpKytdPXImdGhpcy5ETSxyPj49dGhpcy5EQjtpZih0LnQ8dGhpcy50KXtmb3Iocis9dC5zO2k8dGhpcy50OylyKz10aGlzW2ldLGVbaSsrXT1yJnRoaXMuRE0scj4+PXRoaXMuREI7cis9dGhpcy5zfWVsc2V7Zm9yKHIrPXRoaXMucztpPHQudDspcis9dFtpXSxlW2krK109ciZ0aGlzLkRNLHI+Pj10aGlzLkRCO3IrPXQuc31lLnM9cjwwPy0xOjAscj4wP2VbaSsrXT1yOnI8LTEmJihlW2krK109dGhpcy5EVityKSxlLnQ9aSxlLmNsYW1wKCl9LHQucHJvdG90eXBlLmRNdWx0aXBseT1mdW5jdGlvbih0KXt0aGlzW3RoaXMudF09dGhpcy5hbSgwLHQtMSx0aGlzLDAsMCx0aGlzLnQpLCsrdGhpcy50LHRoaXMuY2xhbXAoKX0sdC5wcm90b3R5cGUuZEFkZE9mZnNldD1mdW5jdGlvbih0LGUpe2lmKDAhPXQpe2Zvcig7dGhpcy50PD1lOyl0aGlzW3RoaXMudCsrXT0wO2Zvcih0aGlzW2VdKz10O3RoaXNbZV0+PXRoaXMuRFY7KXRoaXNbZV0tPXRoaXMuRFYsKytlPj10aGlzLnQmJih0aGlzW3RoaXMudCsrXT0wKSwrK3RoaXNbZV19fSx0LnByb3RvdHlwZS5tdWx0aXBseUxvd2VyVG89ZnVuY3Rpb24odCxlLGkpe3ZhciByPU1hdGgubWluKHRoaXMudCt0LnQsZSk7Zm9yKGkucz0wLGkudD1yO3I+MDspaVstLXJdPTA7Zm9yKHZhciBuPWkudC10aGlzLnQ7cjxuOysrcilpW3IrdGhpcy50XT10aGlzLmFtKDAsdFtyXSxpLHIsMCx0aGlzLnQpO2ZvcihuPU1hdGgubWluKHQudCxlKTtyPG47KytyKXRoaXMuYW0oMCx0W3JdLGksciwwLGUtcik7aS5jbGFtcCgpfSx0LnByb3RvdHlwZS5tdWx0aXBseVVwcGVyVG89ZnVuY3Rpb24odCxlLGkpey0tZTt2YXIgcj1pLnQ9dGhpcy50K3QudC1lO2ZvcihpLnM9MDstLXI+PTA7KWlbcl09MDtmb3Iocj1NYXRoLm1heChlLXRoaXMudCwwKTtyPHQudDsrK3IpaVt0aGlzLnQrci1lXT10aGlzLmFtKGUtcix0W3JdLGksMCwwLHRoaXMudCtyLWUpO2kuY2xhbXAoKSxpLmRyU2hpZnRUbygxLGkpfSx0LnByb3RvdHlwZS5tb2RJbnQ9ZnVuY3Rpb24odCl7aWYodDw9MClyZXR1cm4gMDt2YXIgZT10aGlzLkRWJXQsaT10aGlzLnM8MD90LTE6MDtpZih0aGlzLnQ+MClpZigwPT1lKWk9dGhpc1swXSV0O2Vsc2UgZm9yKHZhciByPXRoaXMudC0xO3I+PTA7LS1yKWk9KGUqaSt0aGlzW3JdKSV0O3JldHVybiBpfSx0LnByb3RvdHlwZS5taWxsZXJSYWJpbj1mdW5jdGlvbihlKXt2YXIgaT10aGlzLnN1YnRyYWN0KHQuT05FKSxyPWkuZ2V0TG93ZXN0U2V0Qml0KCk7aWYocjw9MClyZXR1cm4hMTt2YXIgbj1pLnNoaWZ0UmlnaHQocik7KGU9ZSsxPj4xKT54Lmxlbmd0aCYmKGU9eC5sZW5ndGgpO2Zvcih2YXIgcz1OKCksbz0wO288ZTsrK28pe3MuZnJvbUludCh4W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSp4Lmxlbmd0aCldKTt2YXIgaD1zLm1vZFBvdyhuLHRoaXMpO2lmKDAhPWguY29tcGFyZVRvKHQuT05FKSYmMCE9aC5jb21wYXJlVG8oaSkpe2Zvcih2YXIgYT0xO2ErKzxyJiYwIT1oLmNvbXBhcmVUbyhpKTspaWYoMD09KGg9aC5tb2RQb3dJbnQoMix0aGlzKSkuY29tcGFyZVRvKHQuT05FKSlyZXR1cm4hMTtpZigwIT1oLmNvbXBhcmVUbyhpKSlyZXR1cm4hMX19cmV0dXJuITB9LHQucHJvdG90eXBlLnNxdWFyZT1mdW5jdGlvbigpe3ZhciB0PU4oKTtyZXR1cm4gdGhpcy5zcXVhcmVUbyh0KSx0fSx0LnByb3RvdHlwZS5nY2RhPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5zPDA/dGhpcy5uZWdhdGUoKTp0aGlzLmNsb25lKCkscj10LnM8MD90Lm5lZ2F0ZSgpOnQuY2xvbmUoKTtpZihpLmNvbXBhcmVUbyhyKTwwKXt2YXIgbj1pO2k9cixyPW59dmFyIHM9aS5nZXRMb3dlc3RTZXRCaXQoKSxvPXIuZ2V0TG93ZXN0U2V0Qml0KCk7aWYobzwwKWUoaSk7ZWxzZXtzPG8mJihvPXMpLG8+MCYmKGkuclNoaWZ0VG8obyxpKSxyLnJTaGlmdFRvKG8scikpO3ZhciBoPWZ1bmN0aW9uKCl7KHM9aS5nZXRMb3dlc3RTZXRCaXQoKSk+MCYmaS5yU2hpZnRUbyhzLGkpLChzPXIuZ2V0TG93ZXN0U2V0Qml0KCkpPjAmJnIuclNoaWZ0VG8ocyxyKSxpLmNvbXBhcmVUbyhyKT49MD8oaS5zdWJUbyhyLGkpLGkuclNoaWZ0VG8oMSxpKSk6KHIuc3ViVG8oaSxyKSxyLnJTaGlmdFRvKDEscikpLGkuc2lnbnVtKCk+MD9zZXRUaW1lb3V0KGgsMCk6KG8+MCYmci5sU2hpZnRUbyhvLHIpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZShyKX0pLDApKX07c2V0VGltZW91dChoLDEwKX19LHQucHJvdG90eXBlLmZyb21OdW1iZXJBc3luYz1mdW5jdGlvbihlLGkscixuKXtpZigibnVtYmVyIj09dHlwZW9mIGkpaWYoZTwyKXRoaXMuZnJvbUludCgxKTtlbHNle3RoaXMuZnJvbU51bWJlcihlLHIpLHRoaXMudGVzdEJpdChlLTEpfHx0aGlzLmJpdHdpc2VUbyh0Lk9ORS5zaGlmdExlZnQoZS0xKSxzLHRoaXMpLHRoaXMuaXNFdmVuKCkmJnRoaXMuZEFkZE9mZnNldCgxLDApO3ZhciBvPXRoaXMsaD1mdW5jdGlvbigpe28uZEFkZE9mZnNldCgyLDApLG8uYml0TGVuZ3RoKCk+ZSYmby5zdWJUbyh0Lk9ORS5zaGlmdExlZnQoZS0xKSxvKSxvLmlzUHJvYmFibGVQcmltZShpKT9zZXRUaW1lb3V0KChmdW5jdGlvbigpe24oKX0pLDApOnNldFRpbWVvdXQoaCwwKX07c2V0VGltZW91dChoLDApfWVsc2V7dmFyIGE9W10sdT03JmU7YS5sZW5ndGg9MSsoZT4+MyksaS5uZXh0Qnl0ZXMoYSksdT4wP2FbMF0mPSgxPDx1KS0xOmFbMF09MCx0aGlzLmZyb21TdHJpbmcoYSwyNTYpfX0sdH0oKSxPPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUuY29udmVydD1mdW5jdGlvbih0KXtyZXR1cm4gdH0sdC5wcm90b3R5cGUucmV2ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0fSx0LnByb3RvdHlwZS5tdWxUbz1mdW5jdGlvbih0LGUsaSl7dC5tdWx0aXBseVRvKGUsaSl9LHQucHJvdG90eXBlLnNxclRvPWZ1bmN0aW9uKHQsZSl7dC5zcXVhcmVUbyhlKX0sdH0oKSxBPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLm09dH1yZXR1cm4gdC5wcm90b3R5cGUuY29udmVydD1mdW5jdGlvbih0KXtyZXR1cm4gdC5zPDB8fHQuY29tcGFyZVRvKHRoaXMubSk+PTA/dC5tb2QodGhpcy5tKTp0fSx0LnByb3RvdHlwZS5yZXZlcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHR9LHQucHJvdG90eXBlLnJlZHVjZT1mdW5jdGlvbih0KXt0LmRpdlJlbVRvKHRoaXMubSxudWxsLHQpfSx0LnByb3RvdHlwZS5tdWxUbz1mdW5jdGlvbih0LGUsaSl7dC5tdWx0aXBseVRvKGUsaSksdGhpcy5yZWR1Y2UoaSl9LHQucHJvdG90eXBlLnNxclRvPWZ1bmN0aW9uKHQsZSl7dC5zcXVhcmVUbyhlKSx0aGlzLnJlZHVjZShlKX0sdH0oKSxWPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLm09dCx0aGlzLm1wPXQuaW52RGlnaXQoKSx0aGlzLm1wbD0zMjc2NyZ0aGlzLm1wLHRoaXMubXBoPXRoaXMubXA+PjE1LHRoaXMudW09KDE8PHQuREItMTUpLTEsdGhpcy5tdDI9Mip0LnR9cmV0dXJuIHQucHJvdG90eXBlLmNvbnZlcnQ9ZnVuY3Rpb24odCl7dmFyIGU9TigpO3JldHVybiB0LmFicygpLmRsU2hpZnRUbyh0aGlzLm0udCxlKSxlLmRpdlJlbVRvKHRoaXMubSxudWxsLGUpLHQuczwwJiZlLmNvbXBhcmVUbyhCLlpFUk8pPjAmJnRoaXMubS5zdWJUbyhlLGUpLGV9LHQucHJvdG90eXBlLnJldmVydD1mdW5jdGlvbih0KXt2YXIgZT1OKCk7cmV0dXJuIHQuY29weVRvKGUpLHRoaXMucmVkdWNlKGUpLGV9LHQucHJvdG90eXBlLnJlZHVjZT1mdW5jdGlvbih0KXtmb3IoO3QudDw9dGhpcy5tdDI7KXRbdC50KytdPTA7Zm9yKHZhciBlPTA7ZTx0aGlzLm0udDsrK2Upe3ZhciBpPTMyNzY3JnRbZV0scj1pKnRoaXMubXBsKygoaSp0aGlzLm1waCsodFtlXT4+MTUpKnRoaXMubXBsJnRoaXMudW0pPDwxNSkmdC5ETTtmb3IodFtpPWUrdGhpcy5tLnRdKz10aGlzLm0uYW0oMCxyLHQsZSwwLHRoaXMubS50KTt0W2ldPj10LkRWOyl0W2ldLT10LkRWLHRbKytpXSsrfXQuY2xhbXAoKSx0LmRyU2hpZnRUbyh0aGlzLm0udCx0KSx0LmNvbXBhcmVUbyh0aGlzLm0pPj0wJiZ0LnN1YlRvKHRoaXMubSx0KX0sdC5wcm90b3R5cGUubXVsVG89ZnVuY3Rpb24odCxlLGkpe3QubXVsdGlwbHlUbyhlLGkpLHRoaXMucmVkdWNlKGkpfSx0LnByb3RvdHlwZS5zcXJUbz1mdW5jdGlvbih0LGUpe3Quc3F1YXJlVG8oZSksdGhpcy5yZWR1Y2UoZSl9LHR9KCksST1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5tPXQsdGhpcy5yMj1OKCksdGhpcy5xMz1OKCksQi5PTkUuZGxTaGlmdFRvKDIqdC50LHRoaXMucjIpLHRoaXMubXU9dGhpcy5yMi5kaXZpZGUodCl9cmV0dXJuIHQucHJvdG90eXBlLmNvbnZlcnQ9ZnVuY3Rpb24odCl7aWYodC5zPDB8fHQudD4yKnRoaXMubS50KXJldHVybiB0Lm1vZCh0aGlzLm0pO2lmKHQuY29tcGFyZVRvKHRoaXMubSk8MClyZXR1cm4gdDt2YXIgZT1OKCk7cmV0dXJuIHQuY29weVRvKGUpLHRoaXMucmVkdWNlKGUpLGV9LHQucHJvdG90eXBlLnJldmVydD1mdW5jdGlvbih0KXtyZXR1cm4gdH0sdC5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKHQpe2Zvcih0LmRyU2hpZnRUbyh0aGlzLm0udC0xLHRoaXMucjIpLHQudD50aGlzLm0udCsxJiYodC50PXRoaXMubS50KzEsdC5jbGFtcCgpKSx0aGlzLm11Lm11bHRpcGx5VXBwZXJUbyh0aGlzLnIyLHRoaXMubS50KzEsdGhpcy5xMyksdGhpcy5tLm11bHRpcGx5TG93ZXJUbyh0aGlzLnEzLHRoaXMubS50KzEsdGhpcy5yMik7dC5jb21wYXJlVG8odGhpcy5yMik8MDspdC5kQWRkT2Zmc2V0KDEsdGhpcy5tLnQrMSk7Zm9yKHQuc3ViVG8odGhpcy5yMix0KTt0LmNvbXBhcmVUbyh0aGlzLm0pPj0wOyl0LnN1YlRvKHRoaXMubSx0KX0sdC5wcm90b3R5cGUubXVsVG89ZnVuY3Rpb24odCxlLGkpe3QubXVsdGlwbHlUbyhlLGkpLHRoaXMucmVkdWNlKGkpfSx0LnByb3RvdHlwZS5zcXJUbz1mdW5jdGlvbih0LGUpe3Quc3F1YXJlVG8oZSksdGhpcy5yZWR1Y2UoZSl9LHR9KCk7ZnVuY3Rpb24gTigpe3JldHVybiBuZXcgQihudWxsKX1mdW5jdGlvbiBQKHQsZSl7cmV0dXJuIG5ldyBCKHQsZSl9dmFyIE09InVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3I7TSYmIk1pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlciI9PW5hdmlnYXRvci5hcHBOYW1lPyhCLnByb3RvdHlwZS5hbT1mdW5jdGlvbih0LGUsaSxyLG4scyl7Zm9yKHZhciBvPTMyNzY3JmUsaD1lPj4xNTstLXM+PTA7KXt2YXIgYT0zMjc2NyZ0aGlzW3RdLHU9dGhpc1t0KytdPj4xNSxjPWgqYSt1Km87bj0oKGE9byphKygoMzI3NjcmYyk8PDE1KStpW3JdKygxMDczNzQxODIzJm4pKT4+PjMwKSsoYz4+PjE1KStoKnUrKG4+Pj4zMCksaVtyKytdPTEwNzM3NDE4MjMmYX1yZXR1cm4gbn0sUz0zMCk6TSYmIk5ldHNjYXBlIiE9bmF2aWdhdG9yLmFwcE5hbWU/KEIucHJvdG90eXBlLmFtPWZ1bmN0aW9uKHQsZSxpLHIsbixzKXtmb3IoOy0tcz49MDspe3ZhciBvPWUqdGhpc1t0KytdK2lbcl0rbjtuPU1hdGguZmxvb3Ioby82NzEwODg2NCksaVtyKytdPTY3MTA4ODYzJm99cmV0dXJuIG59LFM9MjYpOihCLnByb3RvdHlwZS5hbT1mdW5jdGlvbih0LGUsaSxyLG4scyl7Zm9yKHZhciBvPTE2MzgzJmUsaD1lPj4xNDstLXM+PTA7KXt2YXIgYT0xNjM4MyZ0aGlzW3RdLHU9dGhpc1t0KytdPj4xNCxjPWgqYSt1Km87bj0oKGE9byphKygoMTYzODMmYyk8PDE0KStpW3JdK24pPj4yOCkrKGM+PjE0KStoKnUsaVtyKytdPTI2ODQzNTQ1NSZhfXJldHVybiBufSxTPTI4KSxCLnByb3RvdHlwZS5EQj1TLEIucHJvdG90eXBlLkRNPSgxPDxTKS0xLEIucHJvdG90eXBlLkRWPTE8PFMsQi5wcm90b3R5cGUuRlY9TWF0aC5wb3coMiw1MiksQi5wcm90b3R5cGUuRjE9NTItUyxCLnByb3RvdHlwZS5GMj0yKlMtNTI7dmFyIGoscSxMPVtdO2ZvcihqPSIwIi5jaGFyQ29kZUF0KDApLHE9MDtxPD05OysrcSlMW2orK109cTtmb3Ioaj0iYSIuY2hhckNvZGVBdCgwKSxxPTEwO3E8MzY7KytxKUxbaisrXT1xO2ZvcihqPSJBIi5jaGFyQ29kZUF0KDApLHE9MTA7cTwzNjsrK3EpTFtqKytdPXE7ZnVuY3Rpb24gSCh0LGUpe3ZhciBpPUxbdC5jaGFyQ29kZUF0KGUpXTtyZXR1cm4gbnVsbD09aT8tMTppfWZ1bmN0aW9uIEModCl7dmFyIGU9TigpO3JldHVybiBlLmZyb21JbnQodCksZX1mdW5jdGlvbiBGKHQpe3ZhciBlLGk9MTtyZXR1cm4gMCE9KGU9dD4+PjE2KSYmKHQ9ZSxpKz0xNiksMCE9KGU9dD4+OCkmJih0PWUsaSs9OCksMCE9KGU9dD4+NCkmJih0PWUsaSs9NCksMCE9KGU9dD4+MikmJih0PWUsaSs9MiksMCE9KGU9dD4+MSkmJih0PWUsaSs9MSksaX1CLlpFUk89QygwKSxCLk9ORT1DKDEpO3ZhciBVLEssaz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmk9MCx0aGlzLmo9MCx0aGlzLlM9W119cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24odCl7dmFyIGUsaSxyO2ZvcihlPTA7ZTwyNTY7KytlKXRoaXMuU1tlXT1lO2ZvcihpPTAsZT0wO2U8MjU2OysrZSlpPWkrdGhpcy5TW2VdK3RbZSV0Lmxlbmd0aF0mMjU1LHI9dGhpcy5TW2VdLHRoaXMuU1tlXT10aGlzLlNbaV0sdGhpcy5TW2ldPXI7dGhpcy5pPTAsdGhpcy5qPTB9LHQucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdGhpcy5pPXRoaXMuaSsxJjI1NSx0aGlzLmo9dGhpcy5qK3RoaXMuU1t0aGlzLmldJjI1NSx0PXRoaXMuU1t0aGlzLmldLHRoaXMuU1t0aGlzLmldPXRoaXMuU1t0aGlzLmpdLHRoaXMuU1t0aGlzLmpdPXQsdGhpcy5TW3QrdGhpcy5TW3RoaXMuaV0mMjU1XX0sdH0oKSxfPW51bGw7aWYobnVsbD09Xyl7Xz1bXSxLPTA7dmFyIHo9dm9pZCAwO2lmKHdpbmRvdy5jcnlwdG8mJndpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKXt2YXIgWj1uZXcgVWludDMyQXJyYXkoMjU2KTtmb3Iod2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXMoWiksej0wO3o8Wi5sZW5ndGg7Kyt6KV9bSysrXT0yNTUmWlt6XX12YXIgRz0wLCQ9ZnVuY3Rpb24odCl7aWYoKEc9R3x8MCk+PTI1Nnx8Sz49MjU2KXdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyP3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLCQsITEpOndpbmRvdy5kZXRhY2hFdmVudCYmd2luZG93LmRldGFjaEV2ZW50KCJvbm1vdXNlbW92ZSIsJCk7ZWxzZSB0cnl7dmFyIGU9dC54K3QueTtfW0srK109MjU1JmUsRys9MX1jYXRjaCh0KXt9fTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcj93aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwkLCExKTp3aW5kb3cuYXR0YWNoRXZlbnQmJndpbmRvdy5hdHRhY2hFdmVudCgib25tb3VzZW1vdmUiLCQpfWZ1bmN0aW9uIFkoKXtpZihudWxsPT1VKXtmb3IoVT1uZXcgaztLPDI1Njspe3ZhciB0PU1hdGguZmxvb3IoNjU1MzYqTWF0aC5yYW5kb20oKSk7X1tLKytdPTI1NSZ0fWZvcihVLmluaXQoXyksSz0wO0s8Xy5sZW5ndGg7KytLKV9bS109MDtLPTB9cmV0dXJuIFUubmV4dCgpfXZhciBKPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUubmV4dEJ5dGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7KytlKXRbZV09WSgpfSx0fSgpLFg9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5uPW51bGwsdGhpcy5lPTAsdGhpcy5kPW51bGwsdGhpcy5wPW51bGwsdGhpcy5xPW51bGwsdGhpcy5kbXAxPW51bGwsdGhpcy5kbXExPW51bGwsdGhpcy5jb2VmZj1udWxsfXJldHVybiB0LnByb3RvdHlwZS5kb1B1YmxpYz1mdW5jdGlvbih0KXtyZXR1cm4gdC5tb2RQb3dJbnQodGhpcy5lLHRoaXMubil9LHQucHJvdG90eXBlLmRvUHJpdmF0ZT1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLnB8fG51bGw9PXRoaXMucSlyZXR1cm4gdC5tb2RQb3codGhpcy5kLHRoaXMubik7Zm9yKHZhciBlPXQubW9kKHRoaXMucCkubW9kUG93KHRoaXMuZG1wMSx0aGlzLnApLGk9dC5tb2QodGhpcy5xKS5tb2RQb3codGhpcy5kbXExLHRoaXMucSk7ZS5jb21wYXJlVG8oaSk8MDspZT1lLmFkZCh0aGlzLnApO3JldHVybiBlLnN1YnRyYWN0KGkpLm11bHRpcGx5KHRoaXMuY29lZmYpLm1vZCh0aGlzLnApLm11bHRpcGx5KHRoaXMucSkuYWRkKGkpfSx0LnByb3RvdHlwZS5zZXRQdWJsaWM9ZnVuY3Rpb24odCxlKXtudWxsIT10JiZudWxsIT1lJiZ0Lmxlbmd0aD4wJiZlLmxlbmd0aD4wPyh0aGlzLm49UCh0LDE2KSx0aGlzLmU9cGFyc2VJbnQoZSwxNikpOmNvbnNvbGUuZXJyb3IoIkludmFsaWQgUlNBIHB1YmxpYyBrZXkiKX0sdC5wcm90b3R5cGUuZW5jcnlwdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm4uYml0TGVuZ3RoKCkrNz4+MyxpPWZ1bmN0aW9uKHQsZSl7aWYoZTx0Lmxlbmd0aCsxMSlyZXR1cm4gY29uc29sZS5lcnJvcigiTWVzc2FnZSB0b28gbG9uZyBmb3IgUlNBIiksbnVsbDtmb3IodmFyIGk9W10scj10Lmxlbmd0aC0xO3I+PTAmJmU+MDspe3ZhciBuPXQuY2hhckNvZGVBdChyLS0pO248MTI4P2lbLS1lXT1uOm4+MTI3JiZuPDIwNDg/KGlbLS1lXT02MyZufDEyOCxpWy0tZV09bj4+NnwxOTIpOihpWy0tZV09NjMmbnwxMjgsaVstLWVdPW4+PjYmNjN8MTI4LGlbLS1lXT1uPj4xMnwyMjQpfWlbLS1lXT0wO2Zvcih2YXIgcz1uZXcgSixvPVtdO2U+Mjspe2ZvcihvWzBdPTA7MD09b1swXTspcy5uZXh0Qnl0ZXMobyk7aVstLWVdPW9bMF19cmV0dXJuIGlbLS1lXT0yLGlbLS1lXT0wLG5ldyBCKGkpfSh0LGUpO2lmKG51bGw9PWkpcmV0dXJuIG51bGw7dmFyIHI9dGhpcy5kb1B1YmxpYyhpKTtpZihudWxsPT1yKXJldHVybiBudWxsO2Zvcih2YXIgbj1yLnRvU3RyaW5nKDE2KSxzPW4ubGVuZ3RoLG89MDtvPDIqZS1zO28rKyluPSIwIituO3JldHVybiBufSx0LnByb3RvdHlwZS5zZXRQcml2YXRlPWZ1bmN0aW9uKHQsZSxpKXtudWxsIT10JiZudWxsIT1lJiZ0Lmxlbmd0aD4wJiZlLmxlbmd0aD4wPyh0aGlzLm49UCh0LDE2KSx0aGlzLmU9cGFyc2VJbnQoZSwxNiksdGhpcy5kPVAoaSwxNikpOmNvbnNvbGUuZXJyb3IoIkludmFsaWQgUlNBIHByaXZhdGUga2V5Iil9LHQucHJvdG90eXBlLnNldFByaXZhdGVFeD1mdW5jdGlvbih0LGUsaSxyLG4scyxvLGgpe251bGwhPXQmJm51bGwhPWUmJnQubGVuZ3RoPjAmJmUubGVuZ3RoPjA/KHRoaXMubj1QKHQsMTYpLHRoaXMuZT1wYXJzZUludChlLDE2KSx0aGlzLmQ9UChpLDE2KSx0aGlzLnA9UChyLDE2KSx0aGlzLnE9UChuLDE2KSx0aGlzLmRtcDE9UChzLDE2KSx0aGlzLmRtcTE9UChvLDE2KSx0aGlzLmNvZWZmPVAoaCwxNikpOmNvbnNvbGUuZXJyb3IoIkludmFsaWQgUlNBIHByaXZhdGUga2V5Iil9LHQucHJvdG90eXBlLmdlbmVyYXRlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9bmV3IEoscj10Pj4xO3RoaXMuZT1wYXJzZUludChlLDE2KTtmb3IodmFyIG49bmV3IEIoZSwxNik7Oyl7Zm9yKDt0aGlzLnA9bmV3IEIodC1yLDEsaSksMCE9dGhpcy5wLnN1YnRyYWN0KEIuT05FKS5nY2QobikuY29tcGFyZVRvKEIuT05FKXx8IXRoaXMucC5pc1Byb2JhYmxlUHJpbWUoMTApOyk7Zm9yKDt0aGlzLnE9bmV3IEIociwxLGkpLDAhPXRoaXMucS5zdWJ0cmFjdChCLk9ORSkuZ2NkKG4pLmNvbXBhcmVUbyhCLk9ORSl8fCF0aGlzLnEuaXNQcm9iYWJsZVByaW1lKDEwKTspO2lmKHRoaXMucC5jb21wYXJlVG8odGhpcy5xKTw9MCl7dmFyIHM9dGhpcy5wO3RoaXMucD10aGlzLnEsdGhpcy5xPXN9dmFyIG89dGhpcy5wLnN1YnRyYWN0KEIuT05FKSxoPXRoaXMucS5zdWJ0cmFjdChCLk9ORSksYT1vLm11bHRpcGx5KGgpO2lmKDA9PWEuZ2NkKG4pLmNvbXBhcmVUbyhCLk9ORSkpe3RoaXMubj10aGlzLnAubXVsdGlwbHkodGhpcy5xKSx0aGlzLmQ9bi5tb2RJbnZlcnNlKGEpLHRoaXMuZG1wMT10aGlzLmQubW9kKG8pLHRoaXMuZG1xMT10aGlzLmQubW9kKGgpLHRoaXMuY29lZmY9dGhpcy5xLm1vZEludmVyc2UodGhpcy5wKTticmVha319fSx0LnByb3RvdHlwZS5kZWNyeXB0PWZ1bmN0aW9uKHQpe3ZhciBlPVAodCwxNiksaT10aGlzLmRvUHJpdmF0ZShlKTtyZXR1cm4gbnVsbD09aT9udWxsOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPXQudG9CeXRlQXJyYXkoKSxyPTA7cjxpLmxlbmd0aCYmMD09aVtyXTspKytyO2lmKGkubGVuZ3RoLXIhPWUtMXx8MiE9aVtyXSlyZXR1cm4gbnVsbDtmb3IoKytyOzAhPWlbcl07KWlmKCsrcj49aS5sZW5ndGgpcmV0dXJuIG51bGw7Zm9yKHZhciBuPSIiOysrcjxpLmxlbmd0aDspe3ZhciBzPTI1NSZpW3JdO3M8MTI4P24rPVN0cmluZy5mcm9tQ2hhckNvZGUocyk6cz4xOTEmJnM8MjI0PyhuKz1TdHJpbmcuZnJvbUNoYXJDb2RlKCgzMSZzKTw8Nnw2MyZpW3IrMV0pLCsrcik6KG4rPVN0cmluZy5mcm9tQ2hhckNvZGUoKDE1JnMpPDwxMnwoNjMmaVtyKzFdKTw8Nnw2MyZpW3IrMl0pLHIrPTIpfXJldHVybiBufShpLHRoaXMubi5iaXRMZW5ndGgoKSs3Pj4zKX0sdC5wcm90b3R5cGUuZ2VuZXJhdGVBc3luYz1mdW5jdGlvbih0LGUsaSl7dmFyIHI9bmV3IEosbj10Pj4xO3RoaXMuZT1wYXJzZUludChlLDE2KTt2YXIgcz1uZXcgQihlLDE2KSxvPXRoaXMsaD1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKCl7aWYoby5wLmNvbXBhcmVUbyhvLnEpPD0wKXt2YXIgdD1vLnA7by5wPW8ucSxvLnE9dH12YXIgZT1vLnAuc3VidHJhY3QoQi5PTkUpLHI9by5xLnN1YnRyYWN0KEIuT05FKSxuPWUubXVsdGlwbHkocik7MD09bi5nY2QocykuY29tcGFyZVRvKEIuT05FKT8oby5uPW8ucC5tdWx0aXBseShvLnEpLG8uZD1zLm1vZEludmVyc2Uobiksby5kbXAxPW8uZC5tb2QoZSksby5kbXExPW8uZC5tb2Qociksby5jb2VmZj1vLnEubW9kSW52ZXJzZShvLnApLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aSgpfSksMCkpOnNldFRpbWVvdXQoaCwwKX0sYT1mdW5jdGlvbigpe28ucT1OKCksby5xLmZyb21OdW1iZXJBc3luYyhuLDEsciwoZnVuY3Rpb24oKXtvLnEuc3VidHJhY3QoQi5PTkUpLmdjZGEocywoZnVuY3Rpb24odCl7MD09dC5jb21wYXJlVG8oQi5PTkUpJiZvLnEuaXNQcm9iYWJsZVByaW1lKDEwKT9zZXRUaW1lb3V0KGUsMCk6c2V0VGltZW91dChhLDApfSkpfSkpfSx1PWZ1bmN0aW9uKCl7by5wPU4oKSxvLnAuZnJvbU51bWJlckFzeW5jKHQtbiwxLHIsKGZ1bmN0aW9uKCl7by5wLnN1YnRyYWN0KEIuT05FKS5nY2RhKHMsKGZ1bmN0aW9uKHQpezA9PXQuY29tcGFyZVRvKEIuT05FKSYmby5wLmlzUHJvYmFibGVQcmltZSgxMCk/c2V0VGltZW91dChhLDApOnNldFRpbWVvdXQodSwwKX0pKX0pKX07c2V0VGltZW91dCh1LDApfTtzZXRUaW1lb3V0KGgsMCl9LHQucHJvdG90eXBlLnNpZ249ZnVuY3Rpb24odCxlLGkpe3ZhciByPWZ1bmN0aW9uKHQsZSl7aWYoZTx0Lmxlbmd0aCsyMilyZXR1cm4gY29uc29sZS5lcnJvcigiTWVzc2FnZSB0b28gbG9uZyBmb3IgUlNBIiksbnVsbDtmb3IodmFyIGk9ZS10Lmxlbmd0aC02LHI9IiIsbj0wO248aTtuKz0yKXIrPSJmZiI7cmV0dXJuIFAoIjAwMDEiK3IrIjAwIit0LDE2KX0oKFFbaV18fCIiKStlKHQpLnRvU3RyaW5nKCksdGhpcy5uLmJpdExlbmd0aCgpLzQpO2lmKG51bGw9PXIpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5kb1ByaXZhdGUocik7aWYobnVsbD09bilyZXR1cm4gbnVsbDt2YXIgcz1uLnRvU3RyaW5nKDE2KTtyZXR1cm4gMD09KDEmcy5sZW5ndGgpP3M6IjAiK3N9LHQucHJvdG90eXBlLnZlcmlmeT1mdW5jdGlvbih0LGUsaSl7dmFyIHI9UChlLDE2KSxuPXRoaXMuZG9QdWJsaWMocik7cmV0dXJuIG51bGw9PW4/bnVsbDpmdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gUSlpZihRLmhhc093blByb3BlcnR5KGUpKXt2YXIgaT1RW2VdLHI9aS5sZW5ndGg7aWYodC5zdWJzdHIoMCxyKT09aSlyZXR1cm4gdC5zdWJzdHIocil9cmV0dXJuIHR9KG4udG9TdHJpbmcoMTYpLnJlcGxhY2UoL14xZiswMC8sIiIpKT09aSh0KS50b1N0cmluZygpfSx0fSgpLFE9e21kMjoiMzAyMDMwMGMwNjA4MmE4NjQ4ODZmNzBkMDIwMjA1MDAwNDEwIixtZDU6IjMwMjAzMDBjMDYwODJhODY0ODg2ZjcwZDAyMDUwNTAwMDQxMCIsc2hhMToiMzAyMTMwMDkwNjA1MmIwZTAzMDIxYTA1MDAwNDE0IixzaGEyMjQ6IjMwMmQzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwNDA1MDAwNDFjIixzaGEyNTY6IjMwMzEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMTA1MDAwNDIwIixzaGEzODQ6IjMwNDEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMjA1MDAwNDMwIixzaGE1MTI6IjMwNTEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMzA1MDAwNDQwIixyaXBlbWQxNjA6IjMwMjEzMDA5MDYwNTJiMjQwMzAyMDEwNTAwMDQxNCJ9LFc9e307Vy5sYW5nPXtleHRlbmQ6ZnVuY3Rpb24odCxlLGkpe2lmKCFlfHwhdCl0aHJvdyBuZXcgRXJyb3IoIllBSE9PLmxhbmcuZXh0ZW5kIGZhaWxlZCwgcGxlYXNlIGNoZWNrIHRoYXQgYWxsIGRlcGVuZGVuY2llcyBhcmUgaW5jbHVkZWQuIik7dmFyIHI9ZnVuY3Rpb24oKXt9O2lmKHIucHJvdG90eXBlPWUucHJvdG90eXBlLHQucHJvdG90eXBlPW5ldyByLHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPXQsdC5zdXBlcmNsYXNzPWUucHJvdG90eXBlLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPT1PYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yJiYoZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSksaSl7dmFyIG47Zm9yKG4gaW4gaSl0LnByb3RvdHlwZVtuXT1pW25dO3ZhciBzPWZ1bmN0aW9uKCl7fSxvPVsidG9TdHJpbmciLCJ2YWx1ZU9mIl07dHJ5ey9NU0lFLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYocz1mdW5jdGlvbih0LGUpe2ZvcihuPTA7bjxvLmxlbmd0aDtuKz0xKXt2YXIgaT1vW25dLHI9ZVtpXTsiZnVuY3Rpb24iPT10eXBlb2YgciYmciE9T2JqZWN0LnByb3RvdHlwZVtpXSYmKHRbaV09cil9fSl9Y2F0Y2godCl7fXModC5wcm90b3R5cGUsaSl9fX07dmFyIHR0PXt9O3ZvaWQgMCE9PXR0LmFzbjEmJnR0LmFzbjF8fCh0dC5hc24xPXt9KSx0dC5hc24xLkFTTjFVdGlsPW5ldyBmdW5jdGlvbigpe3RoaXMuaW50ZWdlclRvQnl0ZUhleD1mdW5jdGlvbih0KXt2YXIgZT10LnRvU3RyaW5nKDE2KTtyZXR1cm4gZS5sZW5ndGglMj09MSYmKGU9IjAiK2UpLGV9LHRoaXMuYmlnSW50VG9NaW5Ud29zQ29tcGxlbWVudHNIZXg9ZnVuY3Rpb24odCl7dmFyIGU9dC50b1N0cmluZygxNik7aWYoIi0iIT1lLnN1YnN0cigwLDEpKWUubGVuZ3RoJTI9PTE/ZT0iMCIrZTplLm1hdGNoKC9eWzAtN10vKXx8KGU9IjAwIitlKTtlbHNle3ZhciBpPWUuc3Vic3RyKDEpLmxlbmd0aDtpJTI9PTE/aSs9MTplLm1hdGNoKC9eWzAtN10vKXx8KGkrPTIpO2Zvcih2YXIgcj0iIixuPTA7bjxpO24rKylyKz0iZiI7ZT1uZXcgQihyLDE2KS54b3IodCkuYWRkKEIuT05FKS50b1N0cmluZygxNikucmVwbGFjZSgvXi0vLCIiKX1yZXR1cm4gZX0sdGhpcy5nZXRQRU1TdHJpbmdGcm9tSGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGhleHRvcGVtKHQsZSl9LHRoaXMubmV3T2JqZWN0PWZ1bmN0aW9uKHQpe3ZhciBlPXR0LmFzbjEsaT1lLkRFUkJvb2xlYW4scj1lLkRFUkludGVnZXIsbj1lLkRFUkJpdFN0cmluZyxzPWUuREVST2N0ZXRTdHJpbmcsbz1lLkRFUk51bGwsaD1lLkRFUk9iamVjdElkZW50aWZpZXIsYT1lLkRFUkVudW1lcmF0ZWQsdT1lLkRFUlVURjhTdHJpbmcsYz1lLkRFUk51bWVyaWNTdHJpbmcsZj1lLkRFUlByaW50YWJsZVN0cmluZyxsPWUuREVSVGVsZXRleFN0cmluZyxwPWUuREVSSUE1U3RyaW5nLGc9ZS5ERVJVVENUaW1lLGQ9ZS5ERVJHZW5lcmFsaXplZFRpbWUsdj1lLkRFUlNlcXVlbmNlLG09ZS5ERVJTZXQseT1lLkRFUlRhZ2dlZE9iamVjdCxiPWUuQVNOMVV0aWwubmV3T2JqZWN0LFQ9T2JqZWN0LmtleXModCk7aWYoMSE9VC5sZW5ndGgpdGhyb3cia2V5IG9mIHBhcmFtIHNoYWxsIGJlIG9ubHkgb25lLiI7dmFyIFM9VFswXTtpZigtMT09Ijpib29sOmludDpiaXRzdHI6b2N0c3RyOm51bGw6b2lkOmVudW06dXRmOHN0cjpudW1zdHI6cHJuc3RyOnRlbHN0cjppYTVzdHI6dXRjdGltZTpnZW50aW1lOnNlcTpzZXQ6dGFnOiIuaW5kZXhPZigiOiIrUysiOiIpKXRocm93InVuZGVmaW5lZCBrZXk6ICIrUztpZigiYm9vbCI9PVMpcmV0dXJuIG5ldyBpKHRbU10pO2lmKCJpbnQiPT1TKXJldHVybiBuZXcgcih0W1NdKTtpZigiYml0c3RyIj09UylyZXR1cm4gbmV3IG4odFtTXSk7aWYoIm9jdHN0ciI9PVMpcmV0dXJuIG5ldyBzKHRbU10pO2lmKCJudWxsIj09UylyZXR1cm4gbmV3IG8odFtTXSk7aWYoIm9pZCI9PVMpcmV0dXJuIG5ldyBoKHRbU10pO2lmKCJlbnVtIj09UylyZXR1cm4gbmV3IGEodFtTXSk7aWYoInV0ZjhzdHIiPT1TKXJldHVybiBuZXcgdSh0W1NdKTtpZigibnVtc3RyIj09UylyZXR1cm4gbmV3IGModFtTXSk7aWYoInBybnN0ciI9PVMpcmV0dXJuIG5ldyBmKHRbU10pO2lmKCJ0ZWxzdHIiPT1TKXJldHVybiBuZXcgbCh0W1NdKTtpZigiaWE1c3RyIj09UylyZXR1cm4gbmV3IHAodFtTXSk7aWYoInV0Y3RpbWUiPT1TKXJldHVybiBuZXcgZyh0W1NdKTtpZigiZ2VudGltZSI9PVMpcmV0dXJuIG5ldyBkKHRbU10pO2lmKCJzZXEiPT1TKXtmb3IodmFyIEU9dFtTXSx3PVtdLEQ9MDtEPEUubGVuZ3RoO0QrKyl7dmFyIHg9YihFW0RdKTt3LnB1c2goeCl9cmV0dXJuIG5ldyB2KHthcnJheTp3fSl9aWYoInNldCI9PVMpe2ZvcihFPXRbU10sdz1bXSxEPTA7RDxFLmxlbmd0aDtEKyspeD1iKEVbRF0pLHcucHVzaCh4KTtyZXR1cm4gbmV3IG0oe2FycmF5Ond9KX1pZigidGFnIj09Uyl7dmFyIFI9dFtTXTtpZigiW29iamVjdCBBcnJheV0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFIpJiYzPT1SLmxlbmd0aCl7dmFyIEI9YihSWzJdKTtyZXR1cm4gbmV3IHkoe3RhZzpSWzBdLGV4cGxpY2l0OlJbMV0sb2JqOkJ9KX12YXIgTz17fTtpZih2b2lkIDAhPT1SLmV4cGxpY2l0JiYoTy5leHBsaWNpdD1SLmV4cGxpY2l0KSx2b2lkIDAhPT1SLnRhZyYmKE8udGFnPVIudGFnKSx2b2lkIDA9PT1SLm9iail0aHJvdyJvYmogc2hhbGwgYmUgc3BlY2lmaWVkIGZvciAndGFnJy4iO3JldHVybiBPLm9iaj1iKFIub2JqKSxuZXcgeShPKX19LHRoaXMuanNvblRvQVNOMUhFWD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5uZXdPYmplY3QodCkuZ2V0RW5jb2RlZEhleCgpfX0sdHQuYXNuMS5BU04xVXRpbC5vaWRIZXhUb0ludD1mdW5jdGlvbih0KXtmb3IodmFyIGU9IiIsaT1wYXJzZUludCh0LnN1YnN0cigwLDIpLDE2KSxyPShlPU1hdGguZmxvb3IoaS80MCkrIi4iK2klNDAsIiIpLG49MjtuPHQubGVuZ3RoO24rPTIpe3ZhciBzPSgiMDAwMDAwMDAiK3BhcnNlSW50KHQuc3Vic3RyKG4sMiksMTYpLnRvU3RyaW5nKDIpKS5zbGljZSgtOCk7cis9cy5zdWJzdHIoMSw3KSwiMCI9PXMuc3Vic3RyKDAsMSkmJihlPWUrIi4iK25ldyBCKHIsMikudG9TdHJpbmcoMTApLHI9IiIpfXJldHVybiBlfSx0dC5hc24xLkFTTjFVdGlsLm9pZEludFRvSGV4PWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlPXQudG9TdHJpbmcoMTYpO3JldHVybiAxPT1lLmxlbmd0aCYmKGU9IjAiK2UpLGV9LGk9ZnVuY3Rpb24odCl7dmFyIGk9IiIscj1uZXcgQih0LDEwKS50b1N0cmluZygyKSxuPTctci5sZW5ndGglNzs3PT1uJiYobj0wKTtmb3IodmFyIHM9IiIsbz0wO288bjtvKyspcys9IjAiO2ZvcihyPXMrcixvPTA7bzxyLmxlbmd0aC0xO28rPTcpe3ZhciBoPXIuc3Vic3RyKG8sNyk7byE9ci5sZW5ndGgtNyYmKGg9IjEiK2gpLGkrPWUocGFyc2VJbnQoaCwyKSl9cmV0dXJuIGl9O2lmKCF0Lm1hdGNoKC9eWzAtOS5dKyQvKSl0aHJvdyJtYWxmb3JtZWQgb2lkIHN0cmluZzogIit0O3ZhciByPSIiLG49dC5zcGxpdCgiLiIpLHM9NDAqcGFyc2VJbnQoblswXSkrcGFyc2VJbnQoblsxXSk7cis9ZShzKSxuLnNwbGljZSgwLDIpO2Zvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXIrPWkobltvXSk7cmV0dXJuIHJ9LHR0LmFzbjEuQVNOMU9iamVjdD1mdW5jdGlvbigpe3RoaXMuZ2V0TGVuZ3RoSGV4RnJvbVZhbHVlPWZ1bmN0aW9uKCl7aWYodm9pZCAwPT09dGhpcy5oVnx8bnVsbD09dGhpcy5oVil0aHJvdyJ0aGlzLmhWIGlzIG51bGwgb3IgdW5kZWZpbmVkLiI7aWYodGhpcy5oVi5sZW5ndGglMj09MSl0aHJvdyJ2YWx1ZSBoZXggbXVzdCBiZSBldmVuIGxlbmd0aDogbj0iKyIiLmxlbmd0aCsiLHY9Iit0aGlzLmhWO3ZhciB0PXRoaXMuaFYubGVuZ3RoLzIsZT10LnRvU3RyaW5nKDE2KTtpZihlLmxlbmd0aCUyPT0xJiYoZT0iMCIrZSksdDwxMjgpcmV0dXJuIGU7dmFyIGk9ZS5sZW5ndGgvMjtpZihpPjE1KXRocm93IkFTTi4xIGxlbmd0aCB0b28gbG9uZyB0byByZXByZXNlbnQgYnkgOHg6IG4gPSAiK3QudG9TdHJpbmcoMTYpO3JldHVybigxMjgraSkudG9TdHJpbmcoMTYpK2V9LHRoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3JldHVybihudWxsPT10aGlzLmhUTFZ8fHRoaXMuaXNNb2RpZmllZCkmJih0aGlzLmhWPXRoaXMuZ2V0RnJlc2hWYWx1ZUhleCgpLHRoaXMuaEw9dGhpcy5nZXRMZW5ndGhIZXhGcm9tVmFsdWUoKSx0aGlzLmhUTFY9dGhpcy5oVCt0aGlzLmhMK3RoaXMuaFYsdGhpcy5pc01vZGlmaWVkPSExKSx0aGlzLmhUTFZ9LHRoaXMuZ2V0VmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRFbmNvZGVkSGV4KCksdGhpcy5oVn0sdGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIiJ9fSx0dC5hc24xLkRFUkFic3RyYWN0U3RyaW5nPWZ1bmN0aW9uKHQpe3R0LmFzbjEuREVSQWJzdHJhY3RTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMuZ2V0U3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc30sdGhpcy5zZXRTdHJpbmc9ZnVuY3Rpb24odCl7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMucz10LHRoaXMuaFY9c3RvaGV4KHRoaXMucyl9LHRoaXMuc2V0U3RyaW5nSGV4PWZ1bmN0aW9uKHQpe3RoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCx0aGlzLnM9bnVsbCx0aGlzLmhWPXR9LHRoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfSx2b2lkIDAhPT10JiYoInN0cmluZyI9PXR5cGVvZiB0P3RoaXMuc2V0U3RyaW5nKHQpOnZvaWQgMCE9PXQuc3RyP3RoaXMuc2V0U3RyaW5nKHQuc3RyKTp2b2lkIDAhPT10LmhleCYmdGhpcy5zZXRTdHJpbmdIZXgodC5oZXgpKX0sVy5sYW5nLmV4dGVuZCh0dC5hc24xLkRFUkFic3RyYWN0U3RyaW5nLHR0LmFzbjEuQVNOMU9iamVjdCksdHQuYXNuMS5ERVJBYnN0cmFjdFRpbWU9ZnVuY3Rpb24odCl7dHQuYXNuMS5ERVJBYnN0cmFjdFRpbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMubG9jYWxEYXRlVG9VVEM9ZnVuY3Rpb24odCl7cmV0dXJuIHV0Yz10LmdldFRpbWUoKSs2ZTQqdC5nZXRUaW1lem9uZU9mZnNldCgpLG5ldyBEYXRlKHV0Yyl9LHRoaXMuZm9ybWF0RGF0ZT1mdW5jdGlvbih0LGUsaSl7dmFyIHI9dGhpcy56ZXJvUGFkZGluZyxuPXRoaXMubG9jYWxEYXRlVG9VVEModCkscz1TdHJpbmcobi5nZXRGdWxsWWVhcigpKTsidXRjIj09ZSYmKHM9cy5zdWJzdHIoMiwyKSk7dmFyIG89cytyKFN0cmluZyhuLmdldE1vbnRoKCkrMSksMikrcihTdHJpbmcobi5nZXREYXRlKCkpLDIpK3IoU3RyaW5nKG4uZ2V0SG91cnMoKSksMikrcihTdHJpbmcobi5nZXRNaW51dGVzKCkpLDIpK3IoU3RyaW5nKG4uZ2V0U2Vjb25kcygpKSwyKTtpZighMD09PWkpe3ZhciBoPW4uZ2V0TWlsbGlzZWNvbmRzKCk7aWYoMCE9aCl7dmFyIGE9cihTdHJpbmcoaCksMyk7bz1vKyIuIisoYT1hLnJlcGxhY2UoL1swXSskLywiIikpfX1yZXR1cm4gbysiWiJ9LHRoaXMuemVyb1BhZGRpbmc9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5sZW5ndGg+PWU/dDpuZXcgQXJyYXkoZS10Lmxlbmd0aCsxKS5qb2luKCIwIikrdH0sdGhpcy5nZXRTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zfSx0aGlzLnNldFN0cmluZz1mdW5jdGlvbih0KXt0aGlzLmhUTFY9bnVsbCx0aGlzLmlzTW9kaWZpZWQ9ITAsdGhpcy5zPXQsdGhpcy5oVj1zdG9oZXgodCl9LHRoaXMuc2V0QnlEYXRlVmFsdWU9ZnVuY3Rpb24odCxlLGkscixuLHMpe3ZhciBvPW5ldyBEYXRlKERhdGUuVVRDKHQsZS0xLGkscixuLHMsMCkpO3RoaXMuc2V0QnlEYXRlKG8pfSx0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oVn19LFcubGFuZy5leHRlbmQodHQuYXNuMS5ERVJBYnN0cmFjdFRpbWUsdHQuYXNuMS5BU04xT2JqZWN0KSx0dC5hc24xLkRFUkFic3RyYWN0U3RydWN0dXJlZD1mdW5jdGlvbih0KXt0dC5hc24xLkRFUkFic3RyYWN0U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSx0aGlzLnNldEJ5QVNOMU9iamVjdEFycmF5PWZ1bmN0aW9uKHQpe3RoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCx0aGlzLmFzbjFBcnJheT10fSx0aGlzLmFwcGVuZEFTTjFPYmplY3Q9ZnVuY3Rpb24odCl7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMuYXNuMUFycmF5LnB1c2godCl9LHRoaXMuYXNuMUFycmF5PW5ldyBBcnJheSx2b2lkIDAhPT10JiZ2b2lkIDAhPT10LmFycmF5JiYodGhpcy5hc24xQXJyYXk9dC5hcnJheSl9LFcubGFuZy5leHRlbmQodHQuYXNuMS5ERVJBYnN0cmFjdFN0cnVjdHVyZWQsdHQuYXNuMS5BU04xT2JqZWN0KSx0dC5hc24xLkRFUkJvb2xlYW49ZnVuY3Rpb24oKXt0dC5hc24xLkRFUkJvb2xlYW4uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMuaFQ9IjAxIix0aGlzLmhUTFY9IjAxMDFmZiJ9LFcubGFuZy5leHRlbmQodHQuYXNuMS5ERVJCb29sZWFuLHR0LmFzbjEuQVNOMU9iamVjdCksdHQuYXNuMS5ERVJJbnRlZ2VyPWZ1bmN0aW9uKHQpe3R0LmFzbjEuREVSSW50ZWdlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksdGhpcy5oVD0iMDIiLHRoaXMuc2V0QnlCaWdJbnRlZ2VyPWZ1bmN0aW9uKHQpe3RoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCx0aGlzLmhWPXR0LmFzbjEuQVNOMVV0aWwuYmlnSW50VG9NaW5Ud29zQ29tcGxlbWVudHNIZXgodCl9LHRoaXMuc2V0QnlJbnRlZ2VyPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBCKFN0cmluZyh0KSwxMCk7dGhpcy5zZXRCeUJpZ0ludGVnZXIoZSl9LHRoaXMuc2V0VmFsdWVIZXg9ZnVuY3Rpb24odCl7dGhpcy5oVj10fSx0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oVn0sdm9pZCAwIT09dCYmKHZvaWQgMCE9PXQuYmlnaW50P3RoaXMuc2V0QnlCaWdJbnRlZ2VyKHQuYmlnaW50KTp2b2lkIDAhPT10LmludD90aGlzLnNldEJ5SW50ZWdlcih0LmludCk6Im51bWJlciI9PXR5cGVvZiB0P3RoaXMuc2V0QnlJbnRlZ2VyKHQpOnZvaWQgMCE9PXQuaGV4JiZ0aGlzLnNldFZhbHVlSGV4KHQuaGV4KSl9LFcubGFuZy5leHRlbmQodHQuYXNuMS5ERVJJbnRlZ2VyLHR0LmFzbjEuQVNOMU9iamVjdCksdHQuYXNuMS5ERVJCaXRTdHJpbmc9ZnVuY3Rpb24odCl7aWYodm9pZCAwIT09dCYmdm9pZCAwIT09dC5vYmope3ZhciBlPXR0LmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHQub2JqKTt0LmhleD0iMDAiK2UuZ2V0RW5jb2RlZEhleCgpfXR0LmFzbjEuREVSQml0U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSx0aGlzLmhUPSIwMyIsdGhpcy5zZXRIZXhWYWx1ZUluY2x1ZGluZ1VudXNlZEJpdHM9ZnVuY3Rpb24odCl7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMuaFY9dH0sdGhpcy5zZXRVbnVzZWRCaXRzQW5kSGV4VmFsdWU9ZnVuY3Rpb24odCxlKXtpZih0PDB8fDc8dCl0aHJvdyJ1bnVzZWQgYml0cyBzaGFsbCBiZSBmcm9tIDAgdG8gNzogdSA9ICIrdDt2YXIgaT0iMCIrdDt0aGlzLmhUTFY9bnVsbCx0aGlzLmlzTW9kaWZpZWQ9ITAsdGhpcy5oVj1pK2V9LHRoaXMuc2V0QnlCaW5hcnlTdHJpbmc9ZnVuY3Rpb24odCl7dmFyIGU9OC0odD10LnJlcGxhY2UoLzArJC8sIiIpKS5sZW5ndGglODs4PT1lJiYoZT0wKTtmb3IodmFyIGk9MDtpPD1lO2krKyl0Kz0iMCI7dmFyIHI9IiI7Zm9yKGk9MDtpPHQubGVuZ3RoLTE7aSs9OCl7dmFyIG49dC5zdWJzdHIoaSw4KSxzPXBhcnNlSW50KG4sMikudG9TdHJpbmcoMTYpOzE9PXMubGVuZ3RoJiYocz0iMCIrcykscis9c310aGlzLmhUTFY9bnVsbCx0aGlzLmlzTW9kaWZpZWQ9ITAsdGhpcy5oVj0iMCIrZStyfSx0aGlzLnNldEJ5Qm9vbGVhbkFycmF5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0iIixpPTA7aTx0Lmxlbmd0aDtpKyspMT09dFtpXT9lKz0iMSI6ZSs9IjAiO3RoaXMuc2V0QnlCaW5hcnlTdHJpbmcoZSl9LHRoaXMubmV3RmFsc2VBcnJheT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEFycmF5KHQpLGk9MDtpPHQ7aSsrKWVbaV09ITE7cmV0dXJuIGV9LHRoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfSx2b2lkIDAhPT10JiYoInN0cmluZyI9PXR5cGVvZiB0JiZ0LnRvTG93ZXJDYXNlKCkubWF0Y2goL15bMC05YS1mXSskLyk/dGhpcy5zZXRIZXhWYWx1ZUluY2x1ZGluZ1VudXNlZEJpdHModCk6dm9pZCAwIT09dC5oZXg/dGhpcy5zZXRIZXhWYWx1ZUluY2x1ZGluZ1VudXNlZEJpdHModC5oZXgpOnZvaWQgMCE9PXQuYmluP3RoaXMuc2V0QnlCaW5hcnlTdHJpbmcodC5iaW4pOnZvaWQgMCE9PXQuYXJyYXkmJnRoaXMuc2V0QnlCb29sZWFuQXJyYXkodC5hcnJheSkpfSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVSQml0U3RyaW5nLHR0LmFzbjEuQVNOMU9iamVjdCksdHQuYXNuMS5ERVJPY3RldFN0cmluZz1mdW5jdGlvbih0KXtpZih2b2lkIDAhPT10JiZ2b2lkIDAhPT10Lm9iail7dmFyIGU9dHQuYXNuMS5BU04xVXRpbC5uZXdPYmplY3QodC5vYmopO3QuaGV4PWUuZ2V0RW5jb2RlZEhleCgpfXR0LmFzbjEuREVST2N0ZXRTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD0iMDQifSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVST2N0ZXRTdHJpbmcsdHQuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyksdHQuYXNuMS5ERVJOdWxsPWZ1bmN0aW9uKCl7dHQuYXNuMS5ERVJOdWxsLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSx0aGlzLmhUPSIwNSIsdGhpcy5oVExWPSIwNTAwIn0sVy5sYW5nLmV4dGVuZCh0dC5hc24xLkRFUk51bGwsdHQuYXNuMS5BU04xT2JqZWN0KSx0dC5hc24xLkRFUk9iamVjdElkZW50aWZpZXI9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7dmFyIGU9dC50b1N0cmluZygxNik7cmV0dXJuIDE9PWUubGVuZ3RoJiYoZT0iMCIrZSksZX0saT1mdW5jdGlvbih0KXt2YXIgaT0iIixyPW5ldyBCKHQsMTApLnRvU3RyaW5nKDIpLG49Ny1yLmxlbmd0aCU3Ozc9PW4mJihuPTApO2Zvcih2YXIgcz0iIixvPTA7bzxuO28rKylzKz0iMCI7Zm9yKHI9cytyLG89MDtvPHIubGVuZ3RoLTE7bys9Nyl7dmFyIGg9ci5zdWJzdHIobyw3KTtvIT1yLmxlbmd0aC03JiYoaD0iMSIraCksaSs9ZShwYXJzZUludChoLDIpKX1yZXR1cm4gaX07dHQuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSx0aGlzLmhUPSIwNiIsdGhpcy5zZXRWYWx1ZUhleD1mdW5jdGlvbih0KXt0aGlzLmhUTFY9bnVsbCx0aGlzLmlzTW9kaWZpZWQ9ITAsdGhpcy5zPW51bGwsdGhpcy5oVj10fSx0aGlzLnNldFZhbHVlT2lkU3RyaW5nPWZ1bmN0aW9uKHQpe2lmKCF0Lm1hdGNoKC9eWzAtOS5dKyQvKSl0aHJvdyJtYWxmb3JtZWQgb2lkIHN0cmluZzogIit0O3ZhciByPSIiLG49dC5zcGxpdCgiLiIpLHM9NDAqcGFyc2VJbnQoblswXSkrcGFyc2VJbnQoblsxXSk7cis9ZShzKSxuLnNwbGljZSgwLDIpO2Zvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXIrPWkobltvXSk7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMucz1udWxsLHRoaXMuaFY9cn0sdGhpcy5zZXRWYWx1ZU5hbWU9ZnVuY3Rpb24odCl7dmFyIGU9dHQuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZCh0KTtpZigiIj09PWUpdGhyb3ciREVST2JqZWN0SWRlbnRpZmllciBvaWROYW1lIHVuZGVmaW5lZDogIit0O3RoaXMuc2V0VmFsdWVPaWRTdHJpbmcoZSl9LHRoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfSx2b2lkIDAhPT10JiYoInN0cmluZyI9PXR5cGVvZiB0P3QubWF0Y2goL15bMC0yXS5bMC05Ll0rJC8pP3RoaXMuc2V0VmFsdWVPaWRTdHJpbmcodCk6dGhpcy5zZXRWYWx1ZU5hbWUodCk6dm9pZCAwIT09dC5vaWQ/dGhpcy5zZXRWYWx1ZU9pZFN0cmluZyh0Lm9pZCk6dm9pZCAwIT09dC5oZXg/dGhpcy5zZXRWYWx1ZUhleCh0LmhleCk6dm9pZCAwIT09dC5uYW1lJiZ0aGlzLnNldFZhbHVlTmFtZSh0Lm5hbWUpKX0sVy5sYW5nLmV4dGVuZCh0dC5hc24xLkRFUk9iamVjdElkZW50aWZpZXIsdHQuYXNuMS5BU04xT2JqZWN0KSx0dC5hc24xLkRFUkVudW1lcmF0ZWQ9ZnVuY3Rpb24odCl7dHQuYXNuMS5ERVJFbnVtZXJhdGVkLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSx0aGlzLmhUPSIwYSIsdGhpcy5zZXRCeUJpZ0ludGVnZXI9ZnVuY3Rpb24odCl7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMuaFY9dHQuYXNuMS5BU04xVXRpbC5iaWdJbnRUb01pblR3b3NDb21wbGVtZW50c0hleCh0KX0sdGhpcy5zZXRCeUludGVnZXI9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEIoU3RyaW5nKHQpLDEwKTt0aGlzLnNldEJ5QmlnSW50ZWdlcihlKX0sdGhpcy5zZXRWYWx1ZUhleD1mdW5jdGlvbih0KXt0aGlzLmhWPXR9LHRoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfSx2b2lkIDAhPT10JiYodm9pZCAwIT09dC5pbnQ/dGhpcy5zZXRCeUludGVnZXIodC5pbnQpOiJudW1iZXIiPT10eXBlb2YgdD90aGlzLnNldEJ5SW50ZWdlcih0KTp2b2lkIDAhPT10LmhleCYmdGhpcy5zZXRWYWx1ZUhleCh0LmhleCkpfSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVSRW51bWVyYXRlZCx0dC5hc24xLkFTTjFPYmplY3QpLHR0LmFzbjEuREVSVVRGOFN0cmluZz1mdW5jdGlvbih0KXt0dC5hc24xLkRFUlVURjhTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD0iMGMifSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVSVVRGOFN0cmluZyx0dC5hc24xLkRFUkFic3RyYWN0U3RyaW5nKSx0dC5hc24xLkRFUk51bWVyaWNTdHJpbmc9ZnVuY3Rpb24odCl7dHQuYXNuMS5ERVJOdW1lcmljU3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLHQpLHRoaXMuaFQ9IjEyIn0sVy5sYW5nLmV4dGVuZCh0dC5hc24xLkRFUk51bWVyaWNTdHJpbmcsdHQuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyksdHQuYXNuMS5ERVJQcmludGFibGVTdHJpbmc9ZnVuY3Rpb24odCl7dHQuYXNuMS5ERVJQcmludGFibGVTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD0iMTMifSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVSUHJpbnRhYmxlU3RyaW5nLHR0LmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpLHR0LmFzbjEuREVSVGVsZXRleFN0cmluZz1mdW5jdGlvbih0KXt0dC5hc24xLkRFUlRlbGV0ZXhTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD0iMTQifSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVSVGVsZXRleFN0cmluZyx0dC5hc24xLkRFUkFic3RyYWN0U3RyaW5nKSx0dC5hc24xLkRFUklBNVN0cmluZz1mdW5jdGlvbih0KXt0dC5hc24xLkRFUklBNVN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0KSx0aGlzLmhUPSIxNiJ9LFcubGFuZy5leHRlbmQodHQuYXNuMS5ERVJJQTVTdHJpbmcsdHQuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyksdHQuYXNuMS5ERVJVVENUaW1lPWZ1bmN0aW9uKHQpe3R0LmFzbjEuREVSVVRDVGltZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0KSx0aGlzLmhUPSIxNyIsdGhpcy5zZXRCeURhdGU9ZnVuY3Rpb24odCl7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMuZGF0ZT10LHRoaXMucz10aGlzLmZvcm1hdERhdGUodGhpcy5kYXRlLCJ1dGMiKSx0aGlzLmhWPXN0b2hleCh0aGlzLnMpfSx0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5kYXRlJiZ2b2lkIDA9PT10aGlzLnMmJih0aGlzLmRhdGU9bmV3IERhdGUsdGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsInV0YyIpLHRoaXMuaFY9c3RvaGV4KHRoaXMucykpLHRoaXMuaFZ9LHZvaWQgMCE9PXQmJih2b2lkIDAhPT10LnN0cj90aGlzLnNldFN0cmluZyh0LnN0cik6InN0cmluZyI9PXR5cGVvZiB0JiZ0Lm1hdGNoKC9eWzAtOV17MTJ9WiQvKT90aGlzLnNldFN0cmluZyh0KTp2b2lkIDAhPT10LmhleD90aGlzLnNldFN0cmluZ0hleCh0LmhleCk6dm9pZCAwIT09dC5kYXRlJiZ0aGlzLnNldEJ5RGF0ZSh0LmRhdGUpKX0sVy5sYW5nLmV4dGVuZCh0dC5hc24xLkRFUlVUQ1RpbWUsdHQuYXNuMS5ERVJBYnN0cmFjdFRpbWUpLHR0LmFzbjEuREVSR2VuZXJhbGl6ZWRUaW1lPWZ1bmN0aW9uKHQpe3R0LmFzbjEuREVSR2VuZXJhbGl6ZWRUaW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLHQpLHRoaXMuaFQ9IjE4Iix0aGlzLndpdGhNaWxsaXM9ITEsdGhpcy5zZXRCeURhdGU9ZnVuY3Rpb24odCl7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMuZGF0ZT10LHRoaXMucz10aGlzLmZvcm1hdERhdGUodGhpcy5kYXRlLCJnZW4iLHRoaXMud2l0aE1pbGxpcyksdGhpcy5oVj1zdG9oZXgodGhpcy5zKX0sdGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuZGF0ZSYmdm9pZCAwPT09dGhpcy5zJiYodGhpcy5kYXRlPW5ldyBEYXRlLHRoaXMucz10aGlzLmZvcm1hdERhdGUodGhpcy5kYXRlLCJnZW4iLHRoaXMud2l0aE1pbGxpcyksdGhpcy5oVj1zdG9oZXgodGhpcy5zKSksdGhpcy5oVn0sdm9pZCAwIT09dCYmKHZvaWQgMCE9PXQuc3RyP3RoaXMuc2V0U3RyaW5nKHQuc3RyKToic3RyaW5nIj09dHlwZW9mIHQmJnQubWF0Y2goL15bMC05XXsxNH1aJC8pP3RoaXMuc2V0U3RyaW5nKHQpOnZvaWQgMCE9PXQuaGV4P3RoaXMuc2V0U3RyaW5nSGV4KHQuaGV4KTp2b2lkIDAhPT10LmRhdGUmJnRoaXMuc2V0QnlEYXRlKHQuZGF0ZSksITA9PT10Lm1pbGxpcyYmKHRoaXMud2l0aE1pbGxpcz0hMCkpfSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVSR2VuZXJhbGl6ZWRUaW1lLHR0LmFzbjEuREVSQWJzdHJhY3RUaW1lKSx0dC5hc24xLkRFUlNlcXVlbmNlPWZ1bmN0aW9uKHQpe3R0LmFzbjEuREVSU2VxdWVuY2Uuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD0iMzAiLHRoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe2Zvcih2YXIgdD0iIixlPTA7ZTx0aGlzLmFzbjFBcnJheS5sZW5ndGg7ZSsrKXQrPXRoaXMuYXNuMUFycmF5W2VdLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVj10LHRoaXMuaFZ9fSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVSU2VxdWVuY2UsdHQuYXNuMS5ERVJBYnN0cmFjdFN0cnVjdHVyZWQpLHR0LmFzbjEuREVSU2V0PWZ1bmN0aW9uKHQpe3R0LmFzbjEuREVSU2V0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLHQpLHRoaXMuaFQ9IjMxIix0aGlzLnNvcnRGbGFnPSEwLHRoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgQXJyYXksZT0wO2U8dGhpcy5hc24xQXJyYXkubGVuZ3RoO2UrKyl7dmFyIGk9dGhpcy5hc24xQXJyYXlbZV07dC5wdXNoKGkuZ2V0RW5jb2RlZEhleCgpKX1yZXR1cm4gMT09dGhpcy5zb3J0RmxhZyYmdC5zb3J0KCksdGhpcy5oVj10LmpvaW4oIiIpLHRoaXMuaFZ9LHZvaWQgMCE9PXQmJnZvaWQgMCE9PXQuc29ydGZsYWcmJjA9PXQuc29ydGZsYWcmJih0aGlzLnNvcnRGbGFnPSExKX0sVy5sYW5nLmV4dGVuZCh0dC5hc24xLkRFUlNldCx0dC5hc24xLkRFUkFic3RyYWN0U3RydWN0dXJlZCksdHQuYXNuMS5ERVJUYWdnZWRPYmplY3Q9ZnVuY3Rpb24odCl7dHQuYXNuMS5ERVJUYWdnZWRPYmplY3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMuaFQ9ImEwIix0aGlzLmhWPSIiLHRoaXMuaXNFeHBsaWNpdD0hMCx0aGlzLmFzbjFPYmplY3Q9bnVsbCx0aGlzLnNldEFTTjFPYmplY3Q9ZnVuY3Rpb24odCxlLGkpe3RoaXMuaFQ9ZSx0aGlzLmlzRXhwbGljaXQ9dCx0aGlzLmFzbjFPYmplY3Q9aSx0aGlzLmlzRXhwbGljaXQ/KHRoaXMuaFY9dGhpcy5hc24xT2JqZWN0LmdldEVuY29kZWRIZXgoKSx0aGlzLmhUTFY9bnVsbCx0aGlzLmlzTW9kaWZpZWQ9ITApOih0aGlzLmhWPW51bGwsdGhpcy5oVExWPWkuZ2V0RW5jb2RlZEhleCgpLHRoaXMuaFRMVj10aGlzLmhUTFYucmVwbGFjZSgvXi4uLyxlKSx0aGlzLmlzTW9kaWZpZWQ9ITEpfSx0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oVn0sdm9pZCAwIT09dCYmKHZvaWQgMCE9PXQudGFnJiYodGhpcy5oVD10LnRhZyksdm9pZCAwIT09dC5leHBsaWNpdCYmKHRoaXMuaXNFeHBsaWNpdD10LmV4cGxpY2l0KSx2b2lkIDAhPT10Lm9iaiYmKHRoaXMuYXNuMU9iamVjdD10Lm9iaix0aGlzLnNldEFTTjFPYmplY3QodGhpcy5pc0V4cGxpY2l0LHRoaXMuaFQsdGhpcy5hc24xT2JqZWN0KSkpfSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVSVGFnZ2VkT2JqZWN0LHR0LmFzbjEuQVNOMU9iamVjdCk7dmFyIGV0LGl0PShldD1mdW5jdGlvbih0LGUpe3JldHVybihldD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmKHRbaV09ZVtpXSl9KSh0LGUpfSxmdW5jdGlvbih0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKGUpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZXQodCxlKSx0LnByb3RvdHlwZT1udWxsPT09ZT9PYmplY3QuY3JlYXRlKGUpOihpLnByb3RvdHlwZT1lLnByb3RvdHlwZSxuZXcgaSl9KSxydD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGkpe3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaSYmKCJzdHJpbmciPT10eXBlb2YgaT9yLnBhcnNlS2V5KGkpOihlLmhhc1ByaXZhdGVLZXlQcm9wZXJ0eShpKXx8ZS5oYXNQdWJsaWNLZXlQcm9wZXJ0eShpKSkmJnIucGFyc2VQcm9wZXJ0aWVzRnJvbShpKSkscn1yZXR1cm4gaXQoZSx0KSxlLnByb3RvdHlwZS5wYXJzZUtleT1mdW5jdGlvbih0KXt0cnl7dmFyIGU9MCxpPTAscj0vXlxzKig/OlswLTlBLUZhLWZdWzAtOUEtRmEtZl1ccyopKyQvLnRlc3QodCk/ZnVuY3Rpb24odCl7dmFyIGU7aWYodm9pZCAwPT09Yyl7dmFyIGk9IjAxMjM0NTY3ODlBQkNERUYiLHI9IiBcZlxuXHJcdCBcdTIwMjhcdTIwMjkiO2ZvcihjPXt9LGU9MDtlPDE2OysrZSljW2kuY2hhckF0KGUpXT1lO2ZvcihpPWkudG9Mb3dlckNhc2UoKSxlPTEwO2U8MTY7KytlKWNbaS5jaGFyQXQoZSldPWU7Zm9yKGU9MDtlPHIubGVuZ3RoOysrZSljW3IuY2hhckF0KGUpXT0tMX12YXIgbj1bXSxzPTAsbz0wO2ZvcihlPTA7ZTx0Lmxlbmd0aDsrK2Upe3ZhciBoPXQuY2hhckF0KGUpO2lmKCI9Ij09aClicmVhaztpZigtMSE9KGg9Y1toXSkpe2lmKHZvaWQgMD09PWgpdGhyb3cgbmV3IEVycm9yKCJJbGxlZ2FsIGNoYXJhY3RlciBhdCBvZmZzZXQgIitlKTtzfD1oLCsrbz49Mj8obltuLmxlbmd0aF09cyxzPTAsbz0wKTpzPDw9NH19aWYobyl0aHJvdyBuZXcgRXJyb3IoIkhleCBlbmNvZGluZyBpbmNvbXBsZXRlOiA0IGJpdHMgbWlzc2luZyIpO3JldHVybiBufSh0KTpkLnVuYXJtb3IodCksbj13LmRlY29kZShyKTtpZigzPT09bi5zdWIubGVuZ3RoJiYobj1uLnN1YlsyXS5zdWJbMF0pLDk9PT1uLnN1Yi5sZW5ndGgpe2U9bi5zdWJbMV0uZ2V0SGV4U3RyaW5nVmFsdWUoKSx0aGlzLm49UChlLDE2KSxpPW4uc3ViWzJdLmdldEhleFN0cmluZ1ZhbHVlKCksdGhpcy5lPXBhcnNlSW50KGksMTYpO3ZhciBzPW4uc3ViWzNdLmdldEhleFN0cmluZ1ZhbHVlKCk7dGhpcy5kPVAocywxNik7dmFyIG89bi5zdWJbNF0uZ2V0SGV4U3RyaW5nVmFsdWUoKTt0aGlzLnA9UChvLDE2KTt2YXIgaD1uLnN1Yls1XS5nZXRIZXhTdHJpbmdWYWx1ZSgpO3RoaXMucT1QKGgsMTYpO3ZhciBhPW4uc3ViWzZdLmdldEhleFN0cmluZ1ZhbHVlKCk7dGhpcy5kbXAxPVAoYSwxNik7dmFyIHU9bi5zdWJbN10uZ2V0SGV4U3RyaW5nVmFsdWUoKTt0aGlzLmRtcTE9UCh1LDE2KTt2YXIgZj1uLnN1Yls4XS5nZXRIZXhTdHJpbmdWYWx1ZSgpO3RoaXMuY29lZmY9UChmLDE2KX1lbHNle2lmKDIhPT1uLnN1Yi5sZW5ndGgpcmV0dXJuITE7dmFyIGw9bi5zdWJbMV0uc3ViWzBdO2U9bC5zdWJbMF0uZ2V0SGV4U3RyaW5nVmFsdWUoKSx0aGlzLm49UChlLDE2KSxpPWwuc3ViWzFdLmdldEhleFN0cmluZ1ZhbHVlKCksdGhpcy5lPXBhcnNlSW50KGksMTYpfXJldHVybiEwfWNhdGNoKHQpe3JldHVybiExfX0sZS5wcm90b3R5cGUuZ2V0UHJpdmF0ZUJhc2VLZXk9ZnVuY3Rpb24oKXt2YXIgdD17YXJyYXk6W25ldyB0dC5hc24xLkRFUkludGVnZXIoe2ludDowfSksbmV3IHR0LmFzbjEuREVSSW50ZWdlcih7YmlnaW50OnRoaXMubn0pLG5ldyB0dC5hc24xLkRFUkludGVnZXIoe2ludDp0aGlzLmV9KSxuZXcgdHQuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6dGhpcy5kfSksbmV3IHR0LmFzbjEuREVSSW50ZWdlcih7YmlnaW50OnRoaXMucH0pLG5ldyB0dC5hc24xLkRFUkludGVnZXIoe2JpZ2ludDp0aGlzLnF9KSxuZXcgdHQuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6dGhpcy5kbXAxfSksbmV3IHR0LmFzbjEuREVSSW50ZWdlcih7YmlnaW50OnRoaXMuZG1xMX0pLG5ldyB0dC5hc24xLkRFUkludGVnZXIoe2JpZ2ludDp0aGlzLmNvZWZmfSldfTtyZXR1cm4gbmV3IHR0LmFzbjEuREVSU2VxdWVuY2UodCkuZ2V0RW5jb2RlZEhleCgpfSxlLnByb3RvdHlwZS5nZXRQcml2YXRlQmFzZUtleUI2ND1mdW5jdGlvbigpe3JldHVybiBsKHRoaXMuZ2V0UHJpdmF0ZUJhc2VLZXkoKSl9LGUucHJvdG90eXBlLmdldFB1YmxpY0Jhc2VLZXk9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgdHQuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W25ldyB0dC5hc24xLkRFUk9iamVjdElkZW50aWZpZXIoe29pZDoiMS4yLjg0MC4xMTM1NDkuMS4xLjEifSksbmV3IHR0LmFzbjEuREVSTnVsbF19KSxlPW5ldyB0dC5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbbmV3IHR0LmFzbjEuREVSSW50ZWdlcih7YmlnaW50OnRoaXMubn0pLG5ldyB0dC5hc24xLkRFUkludGVnZXIoe2ludDp0aGlzLmV9KV19KSxpPW5ldyB0dC5hc24xLkRFUkJpdFN0cmluZyh7aGV4OiIwMCIrZS5nZXRFbmNvZGVkSGV4KCl9KTtyZXR1cm4gbmV3IHR0LmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5Olt0LGldfSkuZ2V0RW5jb2RlZEhleCgpfSxlLnByb3RvdHlwZS5nZXRQdWJsaWNCYXNlS2V5QjY0PWZ1bmN0aW9uKCl7cmV0dXJuIGwodGhpcy5nZXRQdWJsaWNCYXNlS2V5KCkpfSxlLndvcmR3cmFwPWZ1bmN0aW9uKHQsZSl7aWYoIXQpcmV0dXJuIHQ7dmFyIGk9IiguezEsIisoZT1lfHw2NCkrIn0pKCArfCRcbj8pfCguezEsIitlKyJ9KSI7cmV0dXJuIHQubWF0Y2goUmVnRXhwKGksImciKSkuam9pbigiXG4iKX0sZS5wcm90b3R5cGUuZ2V0UHJpdmF0ZUtleT1mdW5jdGlvbigpe3ZhciB0PSItLS0tLUJFR0lOIFJTQSBQUklWQVRFIEtFWS0tLS0tXG4iO3JldHVybih0Kz1lLndvcmR3cmFwKHRoaXMuZ2V0UHJpdmF0ZUJhc2VLZXlCNjQoKSkrIlxuIikrIi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tIn0sZS5wcm90b3R5cGUuZ2V0UHVibGljS2V5PWZ1bmN0aW9uKCl7dmFyIHQ9Ii0tLS0tQkVHSU4gUFVCTElDIEtFWS0tLS0tXG4iO3JldHVybih0Kz1lLndvcmR3cmFwKHRoaXMuZ2V0UHVibGljQmFzZUtleUI2NCgpKSsiXG4iKSsiLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tIn0sZS5oYXNQdWJsaWNLZXlQcm9wZXJ0eT1mdW5jdGlvbih0KXtyZXR1cm4odD10fHx7fSkuaGFzT3duUHJvcGVydHkoIm4iKSYmdC5oYXNPd25Qcm9wZXJ0eSgiZSIpfSxlLmhhc1ByaXZhdGVLZXlQcm9wZXJ0eT1mdW5jdGlvbih0KXtyZXR1cm4odD10fHx7fSkuaGFzT3duUHJvcGVydHkoIm4iKSYmdC5oYXNPd25Qcm9wZXJ0eSgiZSIpJiZ0Lmhhc093blByb3BlcnR5KCJkIikmJnQuaGFzT3duUHJvcGVydHkoInAiKSYmdC5oYXNPd25Qcm9wZXJ0eSgicSIpJiZ0Lmhhc093blByb3BlcnR5KCJkbXAxIikmJnQuaGFzT3duUHJvcGVydHkoImRtcTEiKSYmdC5oYXNPd25Qcm9wZXJ0eSgiY29lZmYiKX0sZS5wcm90b3R5cGUucGFyc2VQcm9wZXJ0aWVzRnJvbT1mdW5jdGlvbih0KXt0aGlzLm49dC5uLHRoaXMuZT10LmUsdC5oYXNPd25Qcm9wZXJ0eSgiZCIpJiYodGhpcy5kPXQuZCx0aGlzLnA9dC5wLHRoaXMucT10LnEsdGhpcy5kbXAxPXQuZG1wMSx0aGlzLmRtcTE9dC5kbXExLHRoaXMuY29lZmY9dC5jb2VmZil9LGV9KFgpO2NvbnN0IG50PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt2b2lkIDA9PT10JiYodD17fSksdD10fHx7fSx0aGlzLmRlZmF1bHRfa2V5X3NpemU9dC5kZWZhdWx0X2tleV9zaXplP3BhcnNlSW50KHQuZGVmYXVsdF9rZXlfc2l6ZSwxMCk6MTAyNCx0aGlzLmRlZmF1bHRfcHVibGljX2V4cG9uZW50PXQuZGVmYXVsdF9wdWJsaWNfZXhwb25lbnR8fCIwMTAwMDEiLHRoaXMubG9nPXQubG9nfHwhMSx0aGlzLmtleT1udWxsfXJldHVybiB0LnByb3RvdHlwZS5zZXRLZXk9ZnVuY3Rpb24odCl7dGhpcy5sb2cmJnRoaXMua2V5JiZjb25zb2xlLndhcm4oIkEga2V5IHdhcyBhbHJlYWR5IHNldCwgb3ZlcnJpZGluZyBleGlzdGluZy4iKSx0aGlzLmtleT1uZXcgcnQodCl9LHQucHJvdG90eXBlLnNldFByaXZhdGVLZXk9ZnVuY3Rpb24odCl7dGhpcy5zZXRLZXkodCl9LHQucHJvdG90eXBlLnNldFB1YmxpY0tleT1mdW5jdGlvbih0KXt0aGlzLnNldEtleSh0KX0sdC5wcm90b3R5cGUuZGVjcnlwdD1mdW5jdGlvbih0KXt0cnl7cmV0dXJuIHRoaXMuZ2V0S2V5KCkuZGVjcnlwdChwKHQpKX1jYXRjaCh0KXtyZXR1cm4hMX19LHQucHJvdG90eXBlLmVuY3J5cHQ9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBsKHRoaXMuZ2V0S2V5KCkuZW5jcnlwdCh0KSl9Y2F0Y2godCl7cmV0dXJuITF9fSx0LnByb3RvdHlwZS5zaWduPWZ1bmN0aW9uKHQsZSxpKXt0cnl7cmV0dXJuIGwodGhpcy5nZXRLZXkoKS5zaWduKHQsZSxpKSl9Y2F0Y2godCl7cmV0dXJuITF9fSx0LnByb3RvdHlwZS52ZXJpZnk9ZnVuY3Rpb24odCxlLGkpe3RyeXtyZXR1cm4gdGhpcy5nZXRLZXkoKS52ZXJpZnkodCxwKGUpLGkpfWNhdGNoKHQpe3JldHVybiExfX0sdC5wcm90b3R5cGUuZ2V0S2V5PWZ1bmN0aW9uKHQpe2lmKCF0aGlzLmtleSl7aWYodGhpcy5rZXk9bmV3IHJ0LHQmJiJbb2JqZWN0IEZ1bmN0aW9uXSI9PT17fS50b1N0cmluZy5jYWxsKHQpKXJldHVybiB2b2lkIHRoaXMua2V5LmdlbmVyYXRlQXN5bmModGhpcy5kZWZhdWx0X2tleV9zaXplLHRoaXMuZGVmYXVsdF9wdWJsaWNfZXhwb25lbnQsdCk7dGhpcy5rZXkuZ2VuZXJhdGUodGhpcy5kZWZhdWx0X2tleV9zaXplLHRoaXMuZGVmYXVsdF9wdWJsaWNfZXhwb25lbnQpfXJldHVybiB0aGlzLmtleX0sdC5wcm90b3R5cGUuZ2V0UHJpdmF0ZUtleT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEtleSgpLmdldFByaXZhdGVLZXkoKX0sdC5wcm90b3R5cGUuZ2V0UHJpdmF0ZUtleUI2ND1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEtleSgpLmdldFByaXZhdGVCYXNlS2V5QjY0KCl9LHQucHJvdG90eXBlLmdldFB1YmxpY0tleT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEtleSgpLmdldFB1YmxpY0tleSgpfSx0LnByb3RvdHlwZS5nZXRQdWJsaWNLZXlCNjQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRLZXkoKS5nZXRQdWJsaWNCYXNlS2V5QjY0KCl9LHQudmVyc2lvbj0iMy4yLjEiLHR9KCl9XSxlPXtkOih0LGkpPT57Zm9yKHZhciByIGluIGkpZS5vKGkscikmJiFlLm8odCxyKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscix7ZW51bWVyYWJsZTohMCxnZXQ6aVtyXX0pfSxvOih0LGUpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0saT17fTtyZXR1cm4gdFsxXSgwLGksZSksaS5kZWZhdWx0fSkoKX0pKTsKLy8gaW5qZWN0IHJlcGwgc2VydmljZSB3aXRoIHV0aWxpdGllcyBhdHRhY2hlZCBpbnRvIGFueSBwYWdlCgovLyBJJ20gbm90IGdvaW5nIHRvIHRyeSBhbmQgcnVuIGFsbCBvZiBhY2UgaW5zaWRlIG15IGN1c3RvbSBldmFsdWF0b3IKLy8gUnVudGltZS5ldmFsdWF0ZSBpcyBhIHJlYWwgb25lLCBzbyB0aGF0J3MgYSBiaWcgc2luawovLyBUaGVuIG9idmlvdXNseSBhbnl0aGluZyBJIGNhbiBidWlsZCBvciBhc3NlbWJsZSBhcyBwbGFpbgovLyB0ZXh0IGZvciBkZXBsb3ltZW50IHdpbGwgYWxzbyBoYXZlIGV2YWx1YXRlLgovLyBUaGVzZSB0aGluZ3MgY2FuIGJlIGRlcGVuZGVuY3kgaW5qZWN0ZWQgdG8gcnVuIGluIGEgd29ya2VyCi8vIG9yIGJhY2tlbmQvZnJvbnRlbmQgcGx1Z2luIG9yIGV2ZW4gYSBoYWNrIHRvIGNvbW11bmljYXRlIAovLyB3aXRoIGJyb3dzZXIgY2FjaGluZyBmb3Igb2ZmbGluZSBjb250ZW50LgovLyBMb3RzIG9mIHdheXMgdG8gcnVuIGEgcHJvY2VzcywgYWJzdHJhY3Rpb24gbWFrZXMgaXQgbW9yZSByZWxpYWJsZT8KCgpmdW5jdGlvbiBkb0NvbnNvbGUoLi4uYXJncykgewoJY29uc29sZS5sb2coYXJncykKCXNlbmRNZXNzYWdlKHsKICAgIGNvbnNvbGU6IGFyZ3MubWFwKGEgPT4gZG9Qcm9wZXJ0eShhKSkuam9pbiAoJ1xuJykgCiAgfSkKfQoKZnVuY3Rpb24gb25Db25zb2xlKG1lc3NhZ2UpIHsKICBjb25zb2xlLmxvZyhtZXNzYWdlLmNvbnNvbGUpCiAgc2hvd0NvbnNvbGUobWVzc2FnZS5jb25zb2xlLCBtZXNzYWdlLmxpbmUpIC8vIGV4ZXJjaXNpbmcgbGVhc3QgcHJpdmlsYWdlCn0KCmZ1bmN0aW9uIGRvUHJvcGVydHkoKSB7Cgp9CgpsZXQgb2xkUnVuVGltZXIKCmZ1bmN0aW9uIGNyZWF0ZUVudmlyb25tZW50KHJ1bkNvbnRleHQpIHsKICBsZXQgZGVjbGFyYXRpb25zID0gewogICAgLy8gaW5jbHVkZSBvdXIgb3duIEFQSSBzbyB3ZSBjYW4gdXNlIGl0IGZyb20gY29kZSBlbHNld2hlcmUKICAgIHJ1bkJvZHk6IHJ1bkJvZHksCiAgICBkb1J1bjogZG9SdW4sCiAgICBkb0NvbnNvbGU6IGRvQ29uc29sZSwKICAgIGRvUHJvcGVydHk6IGRvUHJvcGVydHksCgkJY3JlYXRlRW52aXJvbm1lbnQ6IGNyZWF0ZUVudmlyb25tZW50LAoJCWNyZWF0ZVJ1bkNvbnRleHQ6IGNyZWF0ZVJ1bkNvbnRleHQsCgkJLy8gT01HLCBpZiBJIGNvcHkgdGhpcyBjb250ZXh0IHRoZXJlcyBhbGwga2luZHMgb2Ygd2VpcmQgdGhpbmdzIEkgY2FuIGRvIHRvIHRoZSBwcm9jZXNzCiAgfQoJaWYodHlwZW9mIHJ1bkNvbnRleHQubG9jYWxEZWNsYXJhdGlvbnMgPT0gJ3VuZGVmaW5lZCcpIHsKCQlydW5Db250ZXh0LmxvY2FsRGVjbGFyYXRpb25zID0gW10KCX0KCWlmKHR5cGVvZiBydW5Db250ZXh0LmxvY2FsRGVjbGFyYXRpb25zID09ICd1bmRlZmluZWQnKSB7CgkJZGVidWdnZXIKCX0KCXJ1bkNvbnRleHQubG9jYWxEZWNsYXJhdGlvbnMucHVzaChkZWNsYXJhdGlvbnMpCglyZXR1cm4gcnVuQ29udGV4dAp9CgoKZnVuY3Rpb24gY3JlYXRlUnVuQ29udGV4dChlbnYpIHsKCU9iamVjdC5hc3NpZ24oZW52LCB7CgkJdGltZXJzOiB7fSwKCQkvL2J1YmJsZVN0YWNrOiBbWydpbmxpbmUgZnVuYyAwJywgJzxldmFsPicsIDBdXSwKCQlidWJibGVMaW5lOiAtMSwKCQlidWJibGVDb2x1bW46IDAsCgkJbG9jYWxWYXJpYWJsZXM6IGdldExvY2FscyhlbnYpLAoJCWFzeW5jUnVubmVyczogMCwKCQlhc3luYzogZmFsc2UsCgkJZW5kZWQ6IGZhbHNlLAoJCXBhdXNlZDogZmFsc2UsCgkJY29udGludWU6IGZhbHNlLCAgLy8gVE9ETzogaW1wbGVtZW50IGNvbnRpbnVhdGlvbnMgLyBsb25nIGp1bXBzIGZvciBkZWJ1Z2dlcgoJCS8vIEkgdGhpbmsgYnkgcHVzaGluZyBydW5TdGF0ZW1lbnQoQVNUW2ldKSA8LSBpIG9udG8gYSBzdGFjayBhbmQgcmVzdG9yaW5nIGZvcigpPwoJCS8vIFRPRE86IGNvbnRpbnVhdGlvbnMsIGNoZWNrIGZvciBhbm9ueW1vdXMgZnVuY3Rpb25zLCB2YXJpYWJsZS9mdW5jdGlvbiBkZWNsYXJhdGlvbnMKCQkvLyBUT0RPOiBhbGxvdyBtb3ZpbmcgY3Vyc29yIHRvIGFueSBzeW1ib2wgdXNpbmcgYWRkcmVzcyBvZiBzeW1ib2wgaW4gQVNUCgkJLy8gT1I6IFdBSVQgSU4gU1RJTExSVU5OSU5HKCkgRk9SIFVOUEFVU0UKCX0pCglyZXR1cm4gZW52Cn0KCgpmdW5jdGlvbiBkb0Vycm9yKGVycikgewoJdHJ5IHsKCQlzZW5kTWVzc2FnZSh7IAoJCQllcnJvcjogZXJyLm1lc3NhZ2UgKyAnJywKCQkJLy8gYWx3YXlzIHN1YnRyYWN0IDEgYmVjYXVzZSBjb2RlIGlzIHdyYXBwaW5nIGluIGEgMS1saW5lIGZ1bmN0aW9uIGFib3ZlCgkJCWxpbmU6IGN1cnJlbnRDb250ZXh0LmJ1YmJsZUxpbmUgLSAxLAoJCQlmaWxlOiBjdXJyZW50Q29udGV4dC5idWJibGVTdGFja1tjdXJyZW50Q29udGV4dC5idWJibGVTdGFjay5sZW5ndGgtMV1bMV0sCgkJCXN0YWNrOiBjdXJyZW50Q29udGV4dC5idWJibGVTdGFjaywKCQkJLy8gTE9PSyBBVCBUSElTIEZBTkNZIFNISVQgR09PR0xFIENIUk9NRSBERUJVR0dFUiEKCQkJLy8gICBNQUtFIEEgTElTVCBPRiBBU1NJR05NRU5UUyBORUFSQlkgQU5EIFNFTkQgVEhFSVIgQ1VSUkVOVCBWQUxVRSBUTyBUSEUgRlJPTlRFTkQKCQkJLy8gICBUTyBTQVZFIFRIRSBERVZFTE9QRVIgVElNRSBSRVJVTk5JTkcgVEhFSVIgV0hPTEUgUFJPR1JBTSBKVVNUIFRPIFNFVCBVUCBBIEJSRUFLCgkJCS8vICAgUE9JTlQsIEpVU1QgVE8gQ0hFQ0sgVEhFIFZBTFVFIE9GIEEgTE9PU0VMWSBUWVBFRCBWQVJJQUJMRS4gU0VFIFRIQVQ/IExPT1NFCgkJCS8vICAgVFlQSU5HIFdPUktTIEpVU1QgRklORSBJRiBZT1VSIFRPT0xTIFNVUFBPUlQgWU9VIElOU1RFQUQgT0YgV09SS0lORyBBR0FJTlNUIFlPVQoJCQkvLyBTRUUsIElUJ1MgQSBDQVRDSDIyLCBXSFkgV09VTEQgSSBTUElOIE1ZIFdIRUVMUyBGSVhJTkcgQ0hST01FIERFQlVHR0VSJ1MgU09VUkNFIENPREUKCQkJLy8gICBXSEVOIFRIRSBFWFBFQ1RBVElPTiBJUyBUSEFUIElGIEkgRE9OJ1QgTElLRSBJVCwgSSBDQU4gRklYIElUIE1ZU0VMRi4gVEhBVCdTIFdIWQoJCQkvLyAgIElUIFNVQ0tTIFNUSUxMLiBUSEUgV0hPTEUgIk9QRU4gU09VUkNFIERPRVNOJ1QgT1dFIFlPVSBBTllUSElORyIsIElTIEEgU0VMRiAKCQkJLy8gICBERUZFQVRJTkcgUFJJTkNJTlBBTCwgTElLRSBJRiBBTEwgVEhFIEFNRVJJQ0FOIEZBUk1FUlMgREVDSURFRCBUTyBMRVQgUEVPUExFIFNUQVJWRQoJCQkvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKEhVTkdSWT8gRklYIFRIRSBUUkFDVE9SIFlPVVJTRUxGKQoJCQkvLyAgIFRIRVkgRE9OJ1QgT1dFIFlPVSBBTllUSElORywgTk9UIEVWRU4gTElGRSBTVVBQT1JULiBGVUNLIE9GRiBGT1NTLCBGT1NTIE9XRVMgTUUKCQkJLy8gICBFVkVSWVRISU5HIEJFQ0FVU0UgSSdMTCBCRSBUSEUgT05FIFNUVUNLIENMRUFOSU5HIFRISVMgU0hJVCBDT0RFIFVQLgoJCQkvLyAgIFRFQ0hOSUNBTCBERUJUIEFQUExJRVMgVE8gUFVCTElTSElORyBJTkNPUlJFQ1QgQ09ERSBBTFNPLiBDT0RFIElTIExJS0UgTElUVEVSLgoJCX0pCgl9IGNhdGNoIChlKSB7CgkJaWYoIWUubWVzc2FnZS5pbmNsdWRlcygnY29udGV4dCBpbnZhbGlkYXRlZCcpKSB7CgkJCXRocm93IGUKCQl9Cgl9Cn0KCgpmdW5jdGlvbiBvbkVycm9yKGVycm9yKSB7CiAgLy8gVE9ETzogc29tZSBnZW5lcmljIHJlcG9ydGluZz8KICBjb25zb2xlLmxvZyhlcnJvcikKICBzaG93RXJyb3IoZXJyb3IpCn0KCgphc3luYyBmdW5jdGlvbiBvbkFjY2Vzc29yKHJlc3BvbnNlKSB7CgoJaWYocmVzcG9uc2UgJiYgdHlwZW9mIHJlc3BvbnNlLmZhaWwgIT0gJ3VuZGVmaW5lZCcpIHsKCQl0aHJvdyBuZXcgRXJyb3IoJ01lbWJlciBhY2Nlc3MgZXJyb3I6ICcgKyByZXNwb25zZS5mYWlsKQoJfSBlbHNlCgoJaWYocmVzcG9uc2UgJiYgdHlwZW9mIHJlc3BvbnNlLnR5cGUgIT0gJ3VuZGVmaW5lZCcpIHsKCQlyZXR1cm4gcmVzcG9uc2VbcmVzcG9uc2UudHlwZV0KCX0KCgkvLyBjb252ZXJ0IHJlc3BvbnNlIHRvIGNvbXBhdGlibGUgb3V0cHV0CglsZXQgdmFsdWUgPSByZXNwb25zZQoJbGV0IHR5cGUgPSB0eXBlb2YgdmFsdWUKCWlmKHR5cGUgPT0gJ2Z1bmN0aW9uJykgewoJCXZhbHVlID0gdmFsdWUgKyAnJwoJfSBlbHNlIGlmICh0eXBlID09ICdvYmplY3QnKSB7CgkJdmFsdWUgPSBKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKHsKCQkJX2FjY2Vzc29yOiB0cnVlCgkJfSwgdmFsdWUgfHwge30pKQoJfSBlbHNlIHsKCQl2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKQoJfQoJbGV0IHJlc3VsdCA9IHsKCQl0eXBlOiB0eXBlLAoJfQoJcmVzdWx0W3R5cGVdID0gdmFsdWUKCXJldHVybiByZXN1bHQKCn0KCgovLyBhY2Nlc3MgaW5mbyBmcm9tIGFub3RoZXIgcmVtb3RlLCBvciBhbm90aGVyIGNvbnRleHQKLy8gICB1c2VkIHRvIGxvb2t1cCBsaWJyYXJ5IGZ1bmN0aW9ucywgaW5qZWN0IHNjcmlwdHMgCi8vICAgaW50byBvdGhlciBwYWdlcwphc3luYyBmdW5jdGlvbiBkb0FjY2Vzc29yKHJlc3BvbnNlKSB7IC8vIHNob3VsZG4ndCBuZWVkIHNlbmRlcklkIHdpdGggREkKCWlmICghcmVzcG9uc2UpIHsKCQl0aHJvdyBuZXcgRXJyb3IoJ1Byb3RvY29sIGVycm9yLicpCgl9IGVsc2UgCglpZih0eXBlb2YgcmVzcG9uc2UuZmFpbCAhPSAndW5kZWZpbmVkJykgewoJCXRocm93IG5ldyBFcnJvcignTWVtYmVyIGFjY2VzcyBlcnJvcjogJyArIHJlc3BvbnNlLmZhaWwpCgl9IGVsc2UKCglpZih0eXBlb2YgcmVzcG9uc2Uub2JqZWN0ICE9ICd1bmRlZmluZWQnKSB7CgkJbGV0IG1lbWJlck5hbWUgPSByZXNwb25zZS5vYmplY3QubmFtZSArICcuJyArIHJlc3BvbnNlLnByb3BlcnR5Lm5hbWUKCQlyZXNwb25zZSA9ICBhd2FpdCBzZW5kTWVzc2FnZSh7CgkJCWFjY2Vzc29yOiBtZW1iZXJOYW1lCgkJfSkKCQkvLyBUT0RPOiByZXR1cm4gZG9BY2Nlc3NvcihtZW1iZXJBY2Nlc3MpID8gY29udmVydCBzdHJpbmcgZnVuYyB0byBSUEMKCX0KCQoKCWlmICh0eXBlb2YgcmVzcG9uc2Uuc2NyaXB0ICE9ICd1bmRlZmluZWQnKSB7CgkJaWYodHlwZW9mIGRvRXZhbCAhPSAndW5kZWZpbmVkJykgewoJCQkvLyB3aWxsIHNlbmQgYSByZXN1bHQsIGFzeW5jLCBlcnJvciByZXNwb25zZQoJCQlsZXQgcnVuQ29udGV4dCA9IHsKCQkJCXNjcmlwdDogcmVzcG9uc2Uuc2NyaXB0CgkJCX0KCQkJdHJ5IHsKCQkJCWxldCByZXN1bHQgPSBhd2FpdCBkb0V2YWwocnVuQ29udGV4dCkKCQkJCWlmKCFPYmplY3QuaXMocmVzdWx0LCBydW5Db250ZXh0LmJ1YmJsZVJldHVyblswXSkpIHsKCQkJCQljb25zb2xlLmVycm9yKCdXQVJOSU5HOiBub3QgYnViYmxpbmcgY29ycmVjdGx5OiAnICsgcmVzcG9uc2Uuc2NyaXB0KQoJCQkJCXJlc3VsdCA9IHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuWzBdCgkJCQl9CgkJCQlpZihydW5Db250ZXh0LmVuZGVkKSB7CgkJCQkJcmV0dXJuIHsgLy8gYWhoaCBzYW1lIGFzIHNvbWV3aGVyZSBlbHNlIGluIGRvQWNjZXNzb3IKCQkJCQkJc3RvcHBlZDogYXdhaXQgb25BY2Nlc3NvcihyZXN1bHQpLAoJCQkJCX0KCQkJCX0gZWxzZSBpZiAocnVuQ29udGV4dC5hc3luYykgewoJCQkJCXJldHVybiB7IAoJCQkJCQlhc3luYzogZ2V0VGhyZWFkcygpLAoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIHsgCgkJCQkJCXJlc3VsdDogYXdhaXQgb25BY2Nlc3NvcihyZXN1bHQpLAoJCQkJCX0KCQkJCX0KCQkJfSBjYXRjaChlKSB7CgkJCQlyZXR1cm4gewoJCQkJCWZhaWw6IGUubWVzc2FnZQoJCQkJfQoJCQl9CgoJCX0gZWxzZSBpZiAodHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAndW5kZWZpbmVkJwoJCQkJJiYgc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlICkgewoJCQlkZWJ1Z2dlcgoJCQl0aHJvdyBuZXcgRXJyb3IoJ0RvblwndCBrbm93IHdoYXQgdG8gZG8hJykKCQl9IGVsc2UgewoJCQlsZXQgdmFsdWUgPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoCgkJCQlldmFsKCcoZnVuY3Rpb24gKCl7XG4nICsgcmVzcG9uc2Uuc2NyaXB0ICsgJ1xufSkoKScpKQoJCQkvLyBmb3JtYXQgZm9yIG5ldHdvcmsgcmVzcG9uc2UgaW4gYW4gb2JqZWN0CgkJCXJldHVybiBhd2FpdCBvbkFjY2Vzc29yKHZhbHVlKQoJCX0KCX0gZWxzZSAKCWlmKHR5cGVvZiByZXNwb25zZS5saWJyYXJ5ICE9ICd1bmRlZmluZWQnKSB7CgkJdHJ5IHsKCQkJbGV0IEFTVCA9IGFjb3JuLnBhcnNlKAoJCQkJJyhmdW5jdGlvbiAoKSB7XG4nICsgcmVzcG9uc2UubGlicmFyeSArICdcbnJldHVybiAnICsgcmVzcG9uc2UubmFtZSArICc7XG59KSgpXG4nCgkJCQksIHtlY21hVmVyc2lvbjogMjAyMCwgbG9jYXRpb25zOiB0cnVlLCBvbkNvbW1lbnQ6IFtdfSkKCQkJY3VycmVudENvbnRleHQuc2NyaXB0ID0gcmVzcG9uc2UubGlicmFyeQoJCQljdXJyZW50Q29udGV4dC5idWJibGVGaWxlID0gcmVzcG9uc2UuZmlsZQoJCQljdXJyZW50Q29udGV4dC5idWJibGVTdGFjay5wdXNoKFsnaW5saW5lIGZ1bmMgMCcsIHJlc3BvbnNlLmZpbGUgfHwgJzxldmFsPicsIDBdKQoJCQlhd2FpdCBydW5TdGF0ZW1lbnQoMCwgCgkJCQkJW0FTVC5ib2R5WzBdLmV4cHJlc3Npb24uY2FsbGVlLmJvZHldLCBjdXJyZW50Q29udGV4dCkKCQkJCQljdXJyZW50Q29udGV4dC5yZXR1cm5lZCA9IGZhbHNlCgkJCWRlbGV0ZSBjdXJyZW50Q29udGV4dC5idWJibGVSZXR1cm4KCQkJbGV0IHJlc3VsdCA9IGF3YWl0IHJ1blByaW1pdGl2ZSh7CgkJCQl0eXBlOiAnSWRlbnRpZmllcicsCgkJCQluYW1lOiByZXNwb25zZS5uYW1lLAoJCQl9LCBjdXJyZW50Q29udGV4dCkKCQkJY3VycmVudENvbnRleHQucmV0dXJuZWQgPSBmYWxzZQoJCQlyZXR1cm4gcmVzdWx0CgkJfSBjYXRjaCAodXApIHsKCQkJY29uc29sZS5sb2codXApCgkJCXRocm93IHVwCgkJfQoJfSBlbHNlCgoJaWYodHlwZW9mIHJlc3BvbnNlLm9iamVjdCAhPSAndW5kZWZpbmVkJykgewoJCXJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlLm9iamVjdCkKCX0gZWxzZQoKCWlmKHR5cGVvZiByZXNwb25zZS5mdW5jdGlvbiAhPSAndW5kZWZpbmVkJykgewoJCWlmKHJlc3BvbnNlLnZhbHVlKSB7CgkJCXJldHVybiByZXNwb25zZS52YWx1ZQoJCX0gZWxzZSB7CgkJCXJlc3BvbnNlLnZhbHVlID0gKGFzeW5jIGZ1bmN0aW9uIChyZXF1ZXN0LCAuLi5wYXJhbXMpIHsKCQkJCS8vIFRPRE86IGFkZCBwYXJhbWVydGVycwoJCQkJbGV0IHJlc3VsdCA9IGF3YWl0IHNlbmRNZXNzYWdlKHsKCQkJCQlzY3JpcHQ6ICdcbnJldHVybiAnICsgcmVzcG9uc2UubmFtZSArICcoKTtcbicKCQkJCX0pCgkJCQlyZXR1cm4gcmVzdWx0CgkJCX0pLmJpbmQodGhpcywgcmVzcG9uc2UpCgkJCXJldHVybiByZXNwb25zZQoJCX0KCX0gZWxzZQoKCWlmKHR5cGVvZiByZXNwb25zZS5fYWNjZXNzb3IgIT0gJ3VuZGVmaW5lZCcpIHsKCQlyZXNwb25zZS5fYWNjZXNzb3IgPSBhc3luYyBmdW5jdGlvbiAoaSwgbGVmdCwgcmlnaHQsIGN0eCkgewoJCQlsZXQgcHJvcCA9IGN0eC5idWJibGVQcm9wZXJ0eQoJCQljdHguYnViYmxlUHJvcGVydHkgPSAnJwoJCQlpZihsZWZ0ICYmIGxlZnRbMF0gCgkJCQkmJiBsZWZ0WzBdLnR5cGUgPT0gJ0Fzc2lnbm1lbnRFeHByZXNzaW9uJykgewoJCQkJcmV0dXJuIGF3YWl0IGF3YWl0IHNlbmRNZXNzYWdlKHsKCQkJCQlzY3JpcHQ6IHByb3AgKyAnID0gSlNPTi5wYXJzZShcJycgKyBKU09OLnN0cmluZ2lmeShyaWdodCkgKyAnXCcpOycKCQkJCX0pCgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gYXdhaXQgYXdhaXQgc2VuZE1lc3NhZ2UoewoJCQkJCXNjcmlwdDogJ3JldHVybiAnICsgcHJvcAoJCQkJfSkKCQkJfQoJCX0KCQlyZXR1cm4gcmVzcG9uc2UKCX0gZWxzZQoKCWlmKHR5cGVvZiByZXNwb25zZS52YWx1ZSAhPSAndW5kZWZpbmVkJwoJCXx8IHR5cGVvZiByZXNwb25zZS50eXBlICE9ICd1bmRlZmluZWQnKSB7CgkJcmV0dXJuIHJlc3BvbnNlLnZhbHVlIC8vIHByaW1pdGl2ZSB0eXBlcwoJfSBlbHNlIHsKCQlkZWJ1Z2dlcgoJCXRocm93IG5ldyBFcnJvcignVW5rbm93biBjb21tYW5kOiAnLCByZXNwb25zZSkKCX0KCgkvLyBUT0RPOiBlc3RhYmxpc2ggc3RhbmRhcmQganVweXRlci1tZXRhLWtlcm5lbCBjb25uZWN0aW9uCgkKCgkvLyBUT0RPOiBwcmUtY29uZmlndXJlIHByb3h5LW5ldHdvcmtpbmcgbGlrZSB0aGUgZW5naW5lIGRvZXMsIGZyb250ZW5kCgoKCS8vIFRPRE86IGFueSBzeXN0ZW0tbGV2ZWwvcHJvY2Vzcy1sZXZlbCBzZXJ2aWNlIG1vbml0b3JpbmcsIGNhbGwtb3V0CgoKCn0KCgoKZnVuY3Rpb24gZG9MaWJyYXJ5TG9va3VwKGZ1bmN0aW9uTmFtZSkgewoJbGV0IGxpYnJhcnlGaWxlcyA9IE9iamVjdC5rZXlzKEZTLnZpcnR1YWwpCglmb3IobGV0IGkgPSAwOyBpIDwgbGlicmFyeUZpbGVzLmxlbmd0aDsgaSsrKSB7CgkJaWYoIWxpYnJhcnlGaWxlc1tpXS5zdGFydHNXaXRoKCdsaWJyYXJ5LycpKSB7CgkJCWNvbnRpbnVlCgkJfQoJCWxldCBsaWJyYXJ5Q29kZSA9IEFycmF5LmZyb20oRlMudmlydHVhbFtsaWJyYXJ5RmlsZXNbaV1dLmNvbnRlbnRzKQoJCQkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpIH0pCgkJCS5qb2luKCcnKQoJCS8vIFRPRE86IG1ha2UgdGhlc2UgdG9rZW5zIGluc3RlYWQgb2YgZnVuY3Rpb24gZm9yIGNyb3NzIGxhbmd1YWdlIHN1cHBvcnQKCQlpZihsaWJyYXJ5Q29kZS5tYXRjaChuZXcgUmVnRXhwKAoJCQkJJ2Z1bmN0aW9uXFxzJyArIGZ1bmN0aW9uTmFtZSArICcuKj9cXHsnKSkpIHsKCQkJcmV0dXJuIHsKCQkJCS8vIFRPRE86IHJlc3BvbnNlSWQKCQkJCWxpYnJhcnk6IGxpYnJhcnlDb2RlLAoJCQkJbmFtZTogZnVuY3Rpb25OYW1lLAoJCQkJZmlsZTogbGlicmFyeUZpbGVzW2ldLAoJCQkJLy8gVE9ETzogYSBoYXNoIHZhbHVlPyBjb2RlIHNpZ25pbmc/CgkJCX0KCQl9IC8qIGVsc2UgewoJCQlsZXQgY3VycmVudFNlc3Npb24gPSB3aW5kb3cuYWNlLmdldFZhbHVlKCkKCQkJaWYgKGN1cnJlbnRTZXNzaW9uLmluY2x1ZGVzKCdmdW5jdGlvbiAnICsgZnVuY3Rpb25OYW1lKSkgewoJCQkJcmV0dXJuIHsKCQkJCQlsaWJyYXJ5OiBjdXJyZW50U2Vzc2lvbiwKCQkJCQluYW1lOiAnPGV2YWw+JywKCQkJCQkvLyBUT0RPOiBhIGhhc2ggdmFsdWU/CgkJCQl9CgkJCX0KCQl9ICovIC8vIENPREUgUkVWSUVXLCB0aGlzIGlzIHdoeSB3ZSBuZWVkIGRpZmZlcmVudCBjb250ZXh0cywgZm9yIExpdmUgZWRpdGluZwoJfQp9CgoKCmxldCB0aHJlYWRzID0ge30KCi8vIFNJTksKZnVuY3Rpb24gZ2V0VGhyZWFkcygpIHsKCXJldHVybiBKU09OLnN0cmluZ2lmeShPYmplY3Qua2V5cyh0aHJlYWRzKQoJCS5tYXAoZnVuY3Rpb24gKHJ1bklkKSB7CgkJCXJldHVybiBbCgkJCQlydW5JZFswXSArICcqKioqKionICsgcnVuSWRbcnVuSWQubGVuZ3RoLTFdLAoJCQkJdGhyZWFkc1tydW5JZF0uYnViYmxlVGltZQoJCQldCgkJfSkpCn0KCmNvbnN0IFRIUkVBRF9TQVZFX1RJTUUgPSAzICogMTAwMCAvLyAqIDYwCgpmdW5jdGlvbiBwcnVuZU9sZFJ1bnMoKSB7CgkvLyBpIGp1c3QgdGhvdWdodCBtYXliZSBhIHRyYW5zcGlsZXIgY29udmVydGVkIGNvZGUgdG8gdmFyIHdoaWNoIGNoYW5nZXMgc2NvcGUgYW5kCgkvLyAgIGNvdWxkIG1ha2UgaXQgdnVsbmVyYWJsZT8KCWxldCBydW5JZHMgPSBPYmplY3Qua2V5cyh0aHJlYWRzKQoJZm9yKGxldCBpID0gMDsgaSA8IHJ1bklkcy5sZW5ndGg7IGkrKykgewoJCWxldCBzZW5kZXJJZCA9IHRocmVhZHNbcnVuSWRzW2ldXS5zZW5kZXJJZAoJCWlmKHRocmVhZHNbcnVuSWRzW2ldXS5lbmRlZAoJCQkmJiBEYXRlLm5vdygpIC0gdGhyZWFkc1tydW5JZHNbaV1dLmJ1YmJsZVRpbWUgPiBUSFJFQURfU0FWRV9USU1FKSB7CgkJCWRlbGV0ZSB0aHJlYWRzW3J1bklkc1tpXV0KCQkJZG9TdGF0dXMoeyBzZW5kZXJJZDogc2VuZGVySWQgfSwgZmFsc2UpCgkJfQoJfQoJaWYoT2JqZWN0LmtleXModGhyZWFkcykubGVuZ3RoID09IDApIHsKCQljbGVhckludGVydmFsKG9sZFJ1blRpbWVyKQoJCW9sZFJ1blRpbWVyID0gbnVsbAoJfQp9CgoKYXN5bmMgZnVuY3Rpb24gZG9TdGF0dXMoZG9TbGVlcCkgewoJcmV0dXJuCglpZih0eXBlb2YgY3VycmVudENvbnRleHQgPT0gJ3VuZGVmaW5lZCcpIHsKCX0KCXRyeSB7CgkJbGV0IHN0YXR1c1VwZGF0ZSA9IHsgCgkJCS8vIGFsd2F5cyBzdWJ0cmFjdCAxIGJlY2F1c2UgY29kZSBpcyB3cmFwcGluZyBpbiBhIDEtbGluZSBmdW5jdGlvbiBhYm92ZQoJCQlsaW5lOiBjdXJyZW50Q29udGV4dC5idWJibGVMaW5lIC0gMSwKCQkJc3RhY2s6IGN1cnJlbnRDb250ZXh0LmJ1YmJsZVN0YWNrLAoJCQlmaWxlOiBjdXJyZW50Q29udGV4dC5idWJibGVTdGFja1tjdXJyZW50Q29udGV4dC5idWJibGVTdGFjay5sZW5ndGgtMV1bMV0sCgkJfQoJCWlmKGN1cnJlbnRDb250ZXh0LmVuZGVkKSB7CgkJCXN0YXR1c1VwZGF0ZS5zdG9wcGVkID0gZ2V0VGhyZWFkcygpCgkJfSBlbHNlIGlmIChjdXJyZW50Q29udGV4dC5wYXVzZWQpIHsKCQkJc3RhdHVzVXBkYXRlLnBhdXNlZCA9IGdldFRocmVhZHMoKQoJCX0gZWxzZSB7CgkJCXN0YXR1c1VwZGF0ZS5zdGF0dXMgPSBnZXRUaHJlYWRzKCkKCQl9CgkJc2VuZE1lc3NhZ2Uoc3RhdHVzVXBkYXRlKTsKCQkvL2NvbnNvbGUubG9nKGN1cnJlbnRDb250ZXh0LmJ1YmJsZUxpbmUpCgkJLy8gZG9uJ3Qgc2xlZXAgb24gbGlicmFyeSBmdW5jdGlvbnMKCQlpZihkb1NsZWVwICYmIGN1cnJlbnRDb250ZXh0LmJ1YmJsZUZpbGUgPT0gJzxldmFsPicpIHsKCQkJY29uc29sZS5sb2coJ0RFTEFZSU5HISAnICsgY3VycmVudENvbnRleHQuYnViYmxlTGluZSkKCQkJZGVidWdnZXIKCQkJYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIERFRkFVTFRfU0hPUlRfREVMQVkpKQoJCX0KCX0gY2F0Y2ggKGUpIHsKCQlpZihlLm1lc3NhZ2UuaW5jbHVkZXMoJ2NvbnRleHQgaW52YWxpZGF0ZWQnKSkgewoJCQkvLyBpZ25vcmUsIGhhcHBlbnMgb24gcmVmcmVzaCBzb21ldGltZXMKCQl9IGVsc2UgewoKCQl9Cgl9Cn0KCmZ1bmN0aW9uIGdldExvY2FscyhjdHgpIHsKCWxldCByZXN1bHQgPSBjdHgubG9jYWxWYXJpYWJsZXMKCWlmKHR5cGVvZiBjdHgubG9jYWxEZWNsYXJhdGlvbnMgPT0gJ3VuZGVmaW5lZCcpIHsKCQlyZXR1cm4ge30KCX0KCWZvcihsZXQgaSA9IDA7IGkgPCBjdHgubG9jYWxEZWNsYXJhdGlvbnMubGVuZ3RoOyBpKyspIHsKCQlsZXQgbG9jYWxDdHggPSBjdHgubG9jYWxEZWNsYXJhdGlvbnNbaV0KCQlsZXQgbG9jYWxWYXJpYWJsZXMgPSBPYmplY3Qua2V5cyhsb2NhbEN0eCkKCQlmb3IobGV0IGwgPSAwOyBsIDwgbG9jYWxWYXJpYWJsZXMubGVuZ3RoOyBsKyspIHsKCQkJcmVzdWx0W2xvY2FsVmFyaWFibGVzW2xdXSA9IHR5cGVvZiBsb2NhbEN0eFtsb2NhbFZhcmlhYmxlc1tsXV0KCQl9CgkJbGV0IGxvY2FsUHJvcGVydGllcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGxvY2FsQ3R4KQoJCWZvcihsZXQgayA9IDA7IGsgPCBsb2NhbFByb3BlcnRpZXMubGVuZ3RoOyBrKyspIHsKCQkJcmVzdWx0W2xvY2FsUHJvcGVydGllc1trXV0gPSB0eXBlb2YgbG9jYWxDdHhbbG9jYWxQcm9wZXJ0aWVzW2tdXQoJCX0KCQlsZXQgcGFyZW50T2JqZWN0ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGxvY2FsQ3R4KQoJCXdoaWxlKHBhcmVudE9iamVjdC5jb25zdHJ1Y3RvciAhPT0gT2JqZWN0CgkJCSYmIHBhcmVudE9iamVjdC5jb25zdHJ1Y3RvciAhPT0gQXJyYXkpIHsKCQkJbGV0IGxvY2FsUHJvcGVydGllcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHBhcmVudE9iamVjdCkKCQkJZm9yKGxldCBqID0gMDsgaiA8IGxvY2FsUHJvcGVydGllcy5sZW5ndGg7IGorKykgewoJCQkJcmVzdWx0W2xvY2FsUHJvcGVydGllc1tqXV0gPSB0eXBlb2YgbG9jYWxDdHhbbG9jYWxQcm9wZXJ0aWVzW2pdXQoJCQl9CgkJCXBhcmVudE9iamVjdCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwYXJlbnRPYmplY3QpCgkJfQoJfQoJcmV0dXJuIHJlc3VsdAp9CgoKLy8gQk9PVFNUUkFQIENPREU/CmlmKHR5cGVvZiBtb2R1bGUgIT0gJ3VuZGVmaW5lZCcpIHsKCW1vZHVsZS5leHBvcnRzID0gewoJCWRvQWNjZXNzb3IsCgkJb25BY2Nlc3NvciwKCQlkb0xpYnJhcnlMb29rdXAsCgl9Cn0KCgovKiEgcmVtYXJrYWJsZSAxLjYuMCBodHRwczovL2dpdGh1Yi5jb20vam9uc2NobGlua2VydC9yZW1hcmthYmxlIEBsaWNlbnNlIE1JVCAqLyhmdW5jdGlvbihmKXtpZih0eXBlb2YgZXhwb3J0cz09PSJvYmplY3QiJiZ0eXBlb2YgbW9kdWxlIT09InVuZGVmaW5lZCIpe21vZHVsZS5leHBvcnRzPWYoKX1lbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kKXtkZWZpbmUoW10sZil9ZWxzZXt2YXIgZztpZih0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCIpe2c9d2luZG93fWVsc2UgaWYodHlwZW9mIGdsb2JhbCE9PSJ1bmRlZmluZWQiKXtnPWdsb2JhbH1lbHNlIGlmKHR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCIpe2c9c2VsZn1lbHNle2c9dGhpc31nLlJlbWFya2FibGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gTGlzdCBvZiB2YWxpZCBlbnRpdGllcwovLwovLyBHZW5lcmF0ZSB3aXRoIC4vc3VwcG9ydC9lbnRpdGllcy5qcyBzY3JpcHQKLy8KJ3VzZSBzdHJpY3QnOwoKLyplc2xpbnQgcXVvdGVzOjAqLwptb2R1bGUuZXhwb3J0cyA9IHsKICAiQWFjdXRlIjoiXHUwMEMxIiwKICAiYWFjdXRlIjoiXHUwMEUxIiwKICAiQWJyZXZlIjoiXHUwMTAyIiwKICAiYWJyZXZlIjoiXHUwMTAzIiwKICAiYWMiOiJcdTIyM0UiLAogICJhY2QiOiJcdTIyM0YiLAogICJhY0UiOiJcdTIyM0VcdTAzMzMiLAogICJBY2lyYyI6Ilx1MDBDMiIsCiAgImFjaXJjIjoiXHUwMEUyIiwKICAiYWN1dGUiOiJcdTAwQjQiLAogICJBY3kiOiJcdTA0MTAiLAogICJhY3kiOiJcdTA0MzAiLAogICJBRWxpZyI6Ilx1MDBDNiIsCiAgImFlbGlnIjoiXHUwMEU2IiwKICAiYWYiOiJcdTIwNjEiLAogICJBZnIiOiJcdUQ4MzVcdUREMDQiLAogICJhZnIiOiJcdUQ4MzVcdUREMUUiLAogICJBZ3JhdmUiOiJcdTAwQzAiLAogICJhZ3JhdmUiOiJcdTAwRTAiLAogICJhbGVmc3ltIjoiXHUyMTM1IiwKICAiYWxlcGgiOiJcdTIxMzUiLAogICJBbHBoYSI6Ilx1MDM5MSIsCiAgImFscGhhIjoiXHUwM0IxIiwKICAiQW1hY3IiOiJcdTAxMDAiLAogICJhbWFjciI6Ilx1MDEwMSIsCiAgImFtYWxnIjoiXHUyQTNGIiwKICAiQU1QIjoiXHUwMDI2IiwKICAiYW1wIjoiXHUwMDI2IiwKICAiQW5kIjoiXHUyQTUzIiwKICAiYW5kIjoiXHUyMjI3IiwKICAiYW5kYW5kIjoiXHUyQTU1IiwKICAiYW5kZCI6Ilx1MkE1QyIsCiAgImFuZHNsb3BlIjoiXHUyQTU4IiwKICAiYW5kdiI6Ilx1MkE1QSIsCiAgImFuZyI6Ilx1MjIyMCIsCiAgImFuZ2UiOiJcdTI5QTQiLAogICJhbmdsZSI6Ilx1MjIyMCIsCiAgImFuZ21zZCI6Ilx1MjIyMSIsCiAgImFuZ21zZGFhIjoiXHUyOUE4IiwKICAiYW5nbXNkYWIiOiJcdTI5QTkiLAogICJhbmdtc2RhYyI6Ilx1MjlBQSIsCiAgImFuZ21zZGFkIjoiXHUyOUFCIiwKICAiYW5nbXNkYWUiOiJcdTI5QUMiLAogICJhbmdtc2RhZiI6Ilx1MjlBRCIsCiAgImFuZ21zZGFnIjoiXHUyOUFFIiwKICAiYW5nbXNkYWgiOiJcdTI5QUYiLAogICJhbmdydCI6Ilx1MjIxRiIsCiAgImFuZ3J0dmIiOiJcdTIyQkUiLAogICJhbmdydHZiZCI6Ilx1Mjk5RCIsCiAgImFuZ3NwaCI6Ilx1MjIyMiIsCiAgImFuZ3N0IjoiXHUwMEM1IiwKICAiYW5nemFyciI6Ilx1MjM3QyIsCiAgIkFvZ29uIjoiXHUwMTA0IiwKICAiYW9nb24iOiJcdTAxMDUiLAogICJBb3BmIjoiXHVEODM1XHVERDM4IiwKICAiYW9wZiI6Ilx1RDgzNVx1REQ1MiIsCiAgImFwIjoiXHUyMjQ4IiwKICAiYXBhY2lyIjoiXHUyQTZGIiwKICAiYXBFIjoiXHUyQTcwIiwKICAiYXBlIjoiXHUyMjRBIiwKICAiYXBpZCI6Ilx1MjI0QiIsCiAgImFwb3MiOiJcdTAwMjciLAogICJBcHBseUZ1bmN0aW9uIjoiXHUyMDYxIiwKICAiYXBwcm94IjoiXHUyMjQ4IiwKICAiYXBwcm94ZXEiOiJcdTIyNEEiLAogICJBcmluZyI6Ilx1MDBDNSIsCiAgImFyaW5nIjoiXHUwMEU1IiwKICAiQXNjciI6Ilx1RDgzNVx1REM5QyIsCiAgImFzY3IiOiJcdUQ4MzVcdURDQjYiLAogICJBc3NpZ24iOiJcdTIyNTQiLAogICJhc3QiOiJcdTAwMkEiLAogICJhc3ltcCI6Ilx1MjI0OCIsCiAgImFzeW1wZXEiOiJcdTIyNEQiLAogICJBdGlsZGUiOiJcdTAwQzMiLAogICJhdGlsZGUiOiJcdTAwRTMiLAogICJBdW1sIjoiXHUwMEM0IiwKICAiYXVtbCI6Ilx1MDBFNCIsCiAgImF3Y29uaW50IjoiXHUyMjMzIiwKICAiYXdpbnQiOiJcdTJBMTEiLAogICJiYWNrY29uZyI6Ilx1MjI0QyIsCiAgImJhY2tlcHNpbG9uIjoiXHUwM0Y2IiwKICAiYmFja3ByaW1lIjoiXHUyMDM1IiwKICAiYmFja3NpbSI6Ilx1MjIzRCIsCiAgImJhY2tzaW1lcSI6Ilx1MjJDRCIsCiAgIkJhY2tzbGFzaCI6Ilx1MjIxNiIsCiAgIkJhcnYiOiJcdTJBRTciLAogICJiYXJ2ZWUiOiJcdTIyQkQiLAogICJCYXJ3ZWQiOiJcdTIzMDYiLAogICJiYXJ3ZWQiOiJcdTIzMDUiLAogICJiYXJ3ZWRnZSI6Ilx1MjMwNSIsCiAgImJicmsiOiJcdTIzQjUiLAogICJiYnJrdGJyayI6Ilx1MjNCNiIsCiAgImJjb25nIjoiXHUyMjRDIiwKICAiQmN5IjoiXHUwNDExIiwKICAiYmN5IjoiXHUwNDMxIiwKICAiYmRxdW8iOiJcdTIwMUUiLAogICJiZWNhdXMiOiJcdTIyMzUiLAogICJCZWNhdXNlIjoiXHUyMjM1IiwKICAiYmVjYXVzZSI6Ilx1MjIzNSIsCiAgImJlbXB0eXYiOiJcdTI5QjAiLAogICJiZXBzaSI6Ilx1MDNGNiIsCiAgImJlcm5vdSI6Ilx1MjEyQyIsCiAgIkJlcm5vdWxsaXMiOiJcdTIxMkMiLAogICJCZXRhIjoiXHUwMzkyIiwKICAiYmV0YSI6Ilx1MDNCMiIsCiAgImJldGgiOiJcdTIxMzYiLAogICJiZXR3ZWVuIjoiXHUyMjZDIiwKICAiQmZyIjoiXHVEODM1XHVERDA1IiwKICAiYmZyIjoiXHVEODM1XHVERDFGIiwKICAiYmlnY2FwIjoiXHUyMkMyIiwKICAiYmlnY2lyYyI6Ilx1MjVFRiIsCiAgImJpZ2N1cCI6Ilx1MjJDMyIsCiAgImJpZ29kb3QiOiJcdTJBMDAiLAogICJiaWdvcGx1cyI6Ilx1MkEwMSIsCiAgImJpZ290aW1lcyI6Ilx1MkEwMiIsCiAgImJpZ3NxY3VwIjoiXHUyQTA2IiwKICAiYmlnc3RhciI6Ilx1MjYwNSIsCiAgImJpZ3RyaWFuZ2xlZG93biI6Ilx1MjVCRCIsCiAgImJpZ3RyaWFuZ2xldXAiOiJcdTI1QjMiLAogICJiaWd1cGx1cyI6Ilx1MkEwNCIsCiAgImJpZ3ZlZSI6Ilx1MjJDMSIsCiAgImJpZ3dlZGdlIjoiXHUyMkMwIiwKICAiYmthcm93IjoiXHUyOTBEIiwKICAiYmxhY2tsb3plbmdlIjoiXHUyOUVCIiwKICAiYmxhY2tzcXVhcmUiOiJcdTI1QUEiLAogICJibGFja3RyaWFuZ2xlIjoiXHUyNUI0IiwKICAiYmxhY2t0cmlhbmdsZWRvd24iOiJcdTI1QkUiLAogICJibGFja3RyaWFuZ2xlbGVmdCI6Ilx1MjVDMiIsCiAgImJsYWNrdHJpYW5nbGVyaWdodCI6Ilx1MjVCOCIsCiAgImJsYW5rIjoiXHUyNDIzIiwKICAiYmxrMTIiOiJcdTI1OTIiLAogICJibGsxNCI6Ilx1MjU5MSIsCiAgImJsazM0IjoiXHUyNTkzIiwKICAiYmxvY2siOiJcdTI1ODgiLAogICJibmUiOiJcdTAwM0RcdTIwRTUiLAogICJibmVxdWl2IjoiXHUyMjYxXHUyMEU1IiwKICAiYk5vdCI6Ilx1MkFFRCIsCiAgImJub3QiOiJcdTIzMTAiLAogICJCb3BmIjoiXHVEODM1XHVERDM5IiwKICAiYm9wZiI6Ilx1RDgzNVx1REQ1MyIsCiAgImJvdCI6Ilx1MjJBNSIsCiAgImJvdHRvbSI6Ilx1MjJBNSIsCiAgImJvd3RpZSI6Ilx1MjJDOCIsCiAgImJveGJveCI6Ilx1MjlDOSIsCiAgImJveERMIjoiXHUyNTU3IiwKICAiYm94RGwiOiJcdTI1NTYiLAogICJib3hkTCI6Ilx1MjU1NSIsCiAgImJveGRsIjoiXHUyNTEwIiwKICAiYm94RFIiOiJcdTI1NTQiLAogICJib3hEciI6Ilx1MjU1MyIsCiAgImJveGRSIjoiXHUyNTUyIiwKICAiYm94ZHIiOiJcdTI1MEMiLAogICJib3hIIjoiXHUyNTUwIiwKICAiYm94aCI6Ilx1MjUwMCIsCiAgImJveEhEIjoiXHUyNTY2IiwKICAiYm94SGQiOiJcdTI1NjQiLAogICJib3hoRCI6Ilx1MjU2NSIsCiAgImJveGhkIjoiXHUyNTJDIiwKICAiYm94SFUiOiJcdTI1NjkiLAogICJib3hIdSI6Ilx1MjU2NyIsCiAgImJveGhVIjoiXHUyNTY4IiwKICAiYm94aHUiOiJcdTI1MzQiLAogICJib3htaW51cyI6Ilx1MjI5RiIsCiAgImJveHBsdXMiOiJcdTIyOUUiLAogICJib3h0aW1lcyI6Ilx1MjJBMCIsCiAgImJveFVMIjoiXHUyNTVEIiwKICAiYm94VWwiOiJcdTI1NUMiLAogICJib3h1TCI6Ilx1MjU1QiIsCiAgImJveHVsIjoiXHUyNTE4IiwKICAiYm94VVIiOiJcdTI1NUEiLAogICJib3hVciI6Ilx1MjU1OSIsCiAgImJveHVSIjoiXHUyNTU4IiwKICAiYm94dXIiOiJcdTI1MTQiLAogICJib3hWIjoiXHUyNTUxIiwKICAiYm94diI6Ilx1MjUwMiIsCiAgImJveFZIIjoiXHUyNTZDIiwKICAiYm94VmgiOiJcdTI1NkIiLAogICJib3h2SCI6Ilx1MjU2QSIsCiAgImJveHZoIjoiXHUyNTNDIiwKICAiYm94VkwiOiJcdTI1NjMiLAogICJib3hWbCI6Ilx1MjU2MiIsCiAgImJveHZMIjoiXHUyNTYxIiwKICAiYm94dmwiOiJcdTI1MjQiLAogICJib3hWUiI6Ilx1MjU2MCIsCiAgImJveFZyIjoiXHUyNTVGIiwKICAiYm94dlIiOiJcdTI1NUUiLAogICJib3h2ciI6Ilx1MjUxQyIsCiAgImJwcmltZSI6Ilx1MjAzNSIsCiAgIkJyZXZlIjoiXHUwMkQ4IiwKICAiYnJldmUiOiJcdTAyRDgiLAogICJicnZiYXIiOiJcdTAwQTYiLAogICJCc2NyIjoiXHUyMTJDIiwKICAiYnNjciI6Ilx1RDgzNVx1RENCNyIsCiAgImJzZW1pIjoiXHUyMDRGIiwKICAiYnNpbSI6Ilx1MjIzRCIsCiAgImJzaW1lIjoiXHUyMkNEIiwKICAiYnNvbCI6Ilx1MDA1QyIsCiAgImJzb2xiIjoiXHUyOUM1IiwKICAiYnNvbGhzdWIiOiJcdTI3QzgiLAogICJidWxsIjoiXHUyMDIyIiwKICAiYnVsbGV0IjoiXHUyMDIyIiwKICAiYnVtcCI6Ilx1MjI0RSIsCiAgImJ1bXBFIjoiXHUyQUFFIiwKICAiYnVtcGUiOiJcdTIyNEYiLAogICJCdW1wZXEiOiJcdTIyNEUiLAogICJidW1wZXEiOiJcdTIyNEYiLAogICJDYWN1dGUiOiJcdTAxMDYiLAogICJjYWN1dGUiOiJcdTAxMDciLAogICJDYXAiOiJcdTIyRDIiLAogICJjYXAiOiJcdTIyMjkiLAogICJjYXBhbmQiOiJcdTJBNDQiLAogICJjYXBicmN1cCI6Ilx1MkE0OSIsCiAgImNhcGNhcCI6Ilx1MkE0QiIsCiAgImNhcGN1cCI6Ilx1MkE0NyIsCiAgImNhcGRvdCI6Ilx1MkE0MCIsCiAgIkNhcGl0YWxEaWZmZXJlbnRpYWxEIjoiXHUyMTQ1IiwKICAiY2FwcyI6Ilx1MjIyOVx1RkUwMCIsCiAgImNhcmV0IjoiXHUyMDQxIiwKICAiY2Fyb24iOiJcdTAyQzciLAogICJDYXlsZXlzIjoiXHUyMTJEIiwKICAiY2NhcHMiOiJcdTJBNEQiLAogICJDY2Fyb24iOiJcdTAxMEMiLAogICJjY2Fyb24iOiJcdTAxMEQiLAogICJDY2VkaWwiOiJcdTAwQzciLAogICJjY2VkaWwiOiJcdTAwRTciLAogICJDY2lyYyI6Ilx1MDEwOCIsCiAgImNjaXJjIjoiXHUwMTA5IiwKICAiQ2NvbmludCI6Ilx1MjIzMCIsCiAgImNjdXBzIjoiXHUyQTRDIiwKICAiY2N1cHNzbSI6Ilx1MkE1MCIsCiAgIkNkb3QiOiJcdTAxMEEiLAogICJjZG90IjoiXHUwMTBCIiwKICAiY2VkaWwiOiJcdTAwQjgiLAogICJDZWRpbGxhIjoiXHUwMEI4IiwKICAiY2VtcHR5diI6Ilx1MjlCMiIsCiAgImNlbnQiOiJcdTAwQTIiLAogICJDZW50ZXJEb3QiOiJcdTAwQjciLAogICJjZW50ZXJkb3QiOiJcdTAwQjciLAogICJDZnIiOiJcdTIxMkQiLAogICJjZnIiOiJcdUQ4MzVcdUREMjAiLAogICJDSGN5IjoiXHUwNDI3IiwKICAiY2hjeSI6Ilx1MDQ0NyIsCiAgImNoZWNrIjoiXHUyNzEzIiwKICAiY2hlY2ttYXJrIjoiXHUyNzEzIiwKICAiQ2hpIjoiXHUwM0E3IiwKICAiY2hpIjoiXHUwM0M3IiwKICAiY2lyIjoiXHUyNUNCIiwKICAiY2lyYyI6Ilx1MDJDNiIsCiAgImNpcmNlcSI6Ilx1MjI1NyIsCiAgImNpcmNsZWFycm93bGVmdCI6Ilx1MjFCQSIsCiAgImNpcmNsZWFycm93cmlnaHQiOiJcdTIxQkIiLAogICJjaXJjbGVkYXN0IjoiXHUyMjlCIiwKICAiY2lyY2xlZGNpcmMiOiJcdTIyOUEiLAogICJjaXJjbGVkZGFzaCI6Ilx1MjI5RCIsCiAgIkNpcmNsZURvdCI6Ilx1MjI5OSIsCiAgImNpcmNsZWRSIjoiXHUwMEFFIiwKICAiY2lyY2xlZFMiOiJcdTI0QzgiLAogICJDaXJjbGVNaW51cyI6Ilx1MjI5NiIsCiAgIkNpcmNsZVBsdXMiOiJcdTIyOTUiLAogICJDaXJjbGVUaW1lcyI6Ilx1MjI5NyIsCiAgImNpckUiOiJcdTI5QzMiLAogICJjaXJlIjoiXHUyMjU3IiwKICAiY2lyZm5pbnQiOiJcdTJBMTAiLAogICJjaXJtaWQiOiJcdTJBRUYiLAogICJjaXJzY2lyIjoiXHUyOUMyIiwKICAiQ2xvY2t3aXNlQ29udG91ckludGVncmFsIjoiXHUyMjMyIiwKICAiQ2xvc2VDdXJseURvdWJsZVF1b3RlIjoiXHUyMDFEIiwKICAiQ2xvc2VDdXJseVF1b3RlIjoiXHUyMDE5IiwKICAiY2x1YnMiOiJcdTI2NjMiLAogICJjbHVic3VpdCI6Ilx1MjY2MyIsCiAgIkNvbG9uIjoiXHUyMjM3IiwKICAiY29sb24iOiJcdTAwM0EiLAogICJDb2xvbmUiOiJcdTJBNzQiLAogICJjb2xvbmUiOiJcdTIyNTQiLAogICJjb2xvbmVxIjoiXHUyMjU0IiwKICAiY29tbWEiOiJcdTAwMkMiLAogICJjb21tYXQiOiJcdTAwNDAiLAogICJjb21wIjoiXHUyMjAxIiwKICAiY29tcGZuIjoiXHUyMjE4IiwKICAiY29tcGxlbWVudCI6Ilx1MjIwMSIsCiAgImNvbXBsZXhlcyI6Ilx1MjEwMiIsCiAgImNvbmciOiJcdTIyNDUiLAogICJjb25nZG90IjoiXHUyQTZEIiwKICAiQ29uZ3J1ZW50IjoiXHUyMjYxIiwKICAiQ29uaW50IjoiXHUyMjJGIiwKICAiY29uaW50IjoiXHUyMjJFIiwKICAiQ29udG91ckludGVncmFsIjoiXHUyMjJFIiwKICAiQ29wZiI6Ilx1MjEwMiIsCiAgImNvcGYiOiJcdUQ4MzVcdURENTQiLAogICJjb3Byb2QiOiJcdTIyMTAiLAogICJDb3Byb2R1Y3QiOiJcdTIyMTAiLAogICJDT1BZIjoiXHUwMEE5IiwKICAiY29weSI6Ilx1MDBBOSIsCiAgImNvcHlzciI6Ilx1MjExNyIsCiAgIkNvdW50ZXJDbG9ja3dpc2VDb250b3VySW50ZWdyYWwiOiJcdTIyMzMiLAogICJjcmFyciI6Ilx1MjFCNSIsCiAgIkNyb3NzIjoiXHUyQTJGIiwKICAiY3Jvc3MiOiJcdTI3MTciLAogICJDc2NyIjoiXHVEODM1XHVEQzlFIiwKICAiY3NjciI6Ilx1RDgzNVx1RENCOCIsCiAgImNzdWIiOiJcdTJBQ0YiLAogICJjc3ViZSI6Ilx1MkFEMSIsCiAgImNzdXAiOiJcdTJBRDAiLAogICJjc3VwZSI6Ilx1MkFEMiIsCiAgImN0ZG90IjoiXHUyMkVGIiwKICAiY3VkYXJybCI6Ilx1MjkzOCIsCiAgImN1ZGFycnIiOiJcdTI5MzUiLAogICJjdWVwciI6Ilx1MjJERSIsCiAgImN1ZXNjIjoiXHUyMkRGIiwKICAiY3VsYXJyIjoiXHUyMUI2IiwKICAiY3VsYXJycCI6Ilx1MjkzRCIsCiAgIkN1cCI6Ilx1MjJEMyIsCiAgImN1cCI6Ilx1MjIyQSIsCiAgImN1cGJyY2FwIjoiXHUyQTQ4IiwKICAiQ3VwQ2FwIjoiXHUyMjREIiwKICAiY3VwY2FwIjoiXHUyQTQ2IiwKICAiY3VwY3VwIjoiXHUyQTRBIiwKICAiY3VwZG90IjoiXHUyMjhEIiwKICAiY3Vwb3IiOiJcdTJBNDUiLAogICJjdXBzIjoiXHUyMjJBXHVGRTAwIiwKICAiY3VyYXJyIjoiXHUyMUI3IiwKICAiY3VyYXJybSI6Ilx1MjkzQyIsCiAgImN1cmx5ZXFwcmVjIjoiXHUyMkRFIiwKICAiY3VybHllcXN1Y2MiOiJcdTIyREYiLAogICJjdXJseXZlZSI6Ilx1MjJDRSIsCiAgImN1cmx5d2VkZ2UiOiJcdTIyQ0YiLAogICJjdXJyZW4iOiJcdTAwQTQiLAogICJjdXJ2ZWFycm93bGVmdCI6Ilx1MjFCNiIsCiAgImN1cnZlYXJyb3dyaWdodCI6Ilx1MjFCNyIsCiAgImN1dmVlIjoiXHUyMkNFIiwKICAiY3V3ZWQiOiJcdTIyQ0YiLAogICJjd2NvbmludCI6Ilx1MjIzMiIsCiAgImN3aW50IjoiXHUyMjMxIiwKICAiY3lsY3R5IjoiXHUyMzJEIiwKICAiRGFnZ2VyIjoiXHUyMDIxIiwKICAiZGFnZ2VyIjoiXHUyMDIwIiwKICAiZGFsZXRoIjoiXHUyMTM4IiwKICAiRGFyciI6Ilx1MjFBMSIsCiAgImRBcnIiOiJcdTIxRDMiLAogICJkYXJyIjoiXHUyMTkzIiwKICAiZGFzaCI6Ilx1MjAxMCIsCiAgIkRhc2h2IjoiXHUyQUU0IiwKICAiZGFzaHYiOiJcdTIyQTMiLAogICJkYmthcm93IjoiXHUyOTBGIiwKICAiZGJsYWMiOiJcdTAyREQiLAogICJEY2Fyb24iOiJcdTAxMEUiLAogICJkY2Fyb24iOiJcdTAxMEYiLAogICJEY3kiOiJcdTA0MTQiLAogICJkY3kiOiJcdTA0MzQiLAogICJERCI6Ilx1MjE0NSIsCiAgImRkIjoiXHUyMTQ2IiwKICAiZGRhZ2dlciI6Ilx1MjAyMSIsCiAgImRkYXJyIjoiXHUyMUNBIiwKICAiRERvdHJhaGQiOiJcdTI5MTEiLAogICJkZG90c2VxIjoiXHUyQTc3IiwKICAiZGVnIjoiXHUwMEIwIiwKICAiRGVsIjoiXHUyMjA3IiwKICAiRGVsdGEiOiJcdTAzOTQiLAogICJkZWx0YSI6Ilx1MDNCNCIsCiAgImRlbXB0eXYiOiJcdTI5QjEiLAogICJkZmlzaHQiOiJcdTI5N0YiLAogICJEZnIiOiJcdUQ4MzVcdUREMDciLAogICJkZnIiOiJcdUQ4MzVcdUREMjEiLAogICJkSGFyIjoiXHUyOTY1IiwKICAiZGhhcmwiOiJcdTIxQzMiLAogICJkaGFyciI6Ilx1MjFDMiIsCiAgIkRpYWNyaXRpY2FsQWN1dGUiOiJcdTAwQjQiLAogICJEaWFjcml0aWNhbERvdCI6Ilx1MDJEOSIsCiAgIkRpYWNyaXRpY2FsRG91YmxlQWN1dGUiOiJcdTAyREQiLAogICJEaWFjcml0aWNhbEdyYXZlIjoiXHUwMDYwIiwKICAiRGlhY3JpdGljYWxUaWxkZSI6Ilx1MDJEQyIsCiAgImRpYW0iOiJcdTIyQzQiLAogICJEaWFtb25kIjoiXHUyMkM0IiwKICAiZGlhbW9uZCI6Ilx1MjJDNCIsCiAgImRpYW1vbmRzdWl0IjoiXHUyNjY2IiwKICAiZGlhbXMiOiJcdTI2NjYiLAogICJkaWUiOiJcdTAwQTgiLAogICJEaWZmZXJlbnRpYWxEIjoiXHUyMTQ2IiwKICAiZGlnYW1tYSI6Ilx1MDNERCIsCiAgImRpc2luIjoiXHUyMkYyIiwKICAiZGl2IjoiXHUwMEY3IiwKICAiZGl2aWRlIjoiXHUwMEY3IiwKICAiZGl2aWRlb250aW1lcyI6Ilx1MjJDNyIsCiAgImRpdm9ueCI6Ilx1MjJDNyIsCiAgIkRKY3kiOiJcdTA0MDIiLAogICJkamN5IjoiXHUwNDUyIiwKICAiZGxjb3JuIjoiXHUyMzFFIiwKICAiZGxjcm9wIjoiXHUyMzBEIiwKICAiZG9sbGFyIjoiXHUwMDI0IiwKICAiRG9wZiI6Ilx1RDgzNVx1REQzQiIsCiAgImRvcGYiOiJcdUQ4MzVcdURENTUiLAogICJEb3QiOiJcdTAwQTgiLAogICJkb3QiOiJcdTAyRDkiLAogICJEb3REb3QiOiJcdTIwREMiLAogICJkb3RlcSI6Ilx1MjI1MCIsCiAgImRvdGVxZG90IjoiXHUyMjUxIiwKICAiRG90RXF1YWwiOiJcdTIyNTAiLAogICJkb3RtaW51cyI6Ilx1MjIzOCIsCiAgImRvdHBsdXMiOiJcdTIyMTQiLAogICJkb3RzcXVhcmUiOiJcdTIyQTEiLAogICJkb3VibGViYXJ3ZWRnZSI6Ilx1MjMwNiIsCiAgIkRvdWJsZUNvbnRvdXJJbnRlZ3JhbCI6Ilx1MjIyRiIsCiAgIkRvdWJsZURvdCI6Ilx1MDBBOCIsCiAgIkRvdWJsZURvd25BcnJvdyI6Ilx1MjFEMyIsCiAgIkRvdWJsZUxlZnRBcnJvdyI6Ilx1MjFEMCIsCiAgIkRvdWJsZUxlZnRSaWdodEFycm93IjoiXHUyMUQ0IiwKICAiRG91YmxlTGVmdFRlZSI6Ilx1MkFFNCIsCiAgIkRvdWJsZUxvbmdMZWZ0QXJyb3ciOiJcdTI3RjgiLAogICJEb3VibGVMb25nTGVmdFJpZ2h0QXJyb3ciOiJcdTI3RkEiLAogICJEb3VibGVMb25nUmlnaHRBcnJvdyI6Ilx1MjdGOSIsCiAgIkRvdWJsZVJpZ2h0QXJyb3ciOiJcdTIxRDIiLAogICJEb3VibGVSaWdodFRlZSI6Ilx1MjJBOCIsCiAgIkRvdWJsZVVwQXJyb3ciOiJcdTIxRDEiLAogICJEb3VibGVVcERvd25BcnJvdyI6Ilx1MjFENSIsCiAgIkRvdWJsZVZlcnRpY2FsQmFyIjoiXHUyMjI1IiwKICAiRG93bkFycm93IjoiXHUyMTkzIiwKICAiRG93bmFycm93IjoiXHUyMUQzIiwKICAiZG93bmFycm93IjoiXHUyMTkzIiwKICAiRG93bkFycm93QmFyIjoiXHUyOTEzIiwKICAiRG93bkFycm93VXBBcnJvdyI6Ilx1MjFGNSIsCiAgIkRvd25CcmV2ZSI6Ilx1MDMxMSIsCiAgImRvd25kb3duYXJyb3dzIjoiXHUyMUNBIiwKICAiZG93bmhhcnBvb25sZWZ0IjoiXHUyMUMzIiwKICAiZG93bmhhcnBvb25yaWdodCI6Ilx1MjFDMiIsCiAgIkRvd25MZWZ0UmlnaHRWZWN0b3IiOiJcdTI5NTAiLAogICJEb3duTGVmdFRlZVZlY3RvciI6Ilx1Mjk1RSIsCiAgIkRvd25MZWZ0VmVjdG9yIjoiXHUyMUJEIiwKICAiRG93bkxlZnRWZWN0b3JCYXIiOiJcdTI5NTYiLAogICJEb3duUmlnaHRUZWVWZWN0b3IiOiJcdTI5NUYiLAogICJEb3duUmlnaHRWZWN0b3IiOiJcdTIxQzEiLAogICJEb3duUmlnaHRWZWN0b3JCYXIiOiJcdTI5NTciLAogICJEb3duVGVlIjoiXHUyMkE0IiwKICAiRG93blRlZUFycm93IjoiXHUyMUE3IiwKICAiZHJia2Fyb3ciOiJcdTI5MTAiLAogICJkcmNvcm4iOiJcdTIzMUYiLAogICJkcmNyb3AiOiJcdTIzMEMiLAogICJEc2NyIjoiXHVEODM1XHVEQzlGIiwKICAiZHNjciI6Ilx1RDgzNVx1RENCOSIsCiAgIkRTY3kiOiJcdTA0MDUiLAogICJkc2N5IjoiXHUwNDU1IiwKICAiZHNvbCI6Ilx1MjlGNiIsCiAgIkRzdHJvayI6Ilx1MDExMCIsCiAgImRzdHJvayI6Ilx1MDExMSIsCiAgImR0ZG90IjoiXHUyMkYxIiwKICAiZHRyaSI6Ilx1MjVCRiIsCiAgImR0cmlmIjoiXHUyNUJFIiwKICAiZHVhcnIiOiJcdTIxRjUiLAogICJkdWhhciI6Ilx1Mjk2RiIsCiAgImR3YW5nbGUiOiJcdTI5QTYiLAogICJEWmN5IjoiXHUwNDBGIiwKICAiZHpjeSI6Ilx1MDQ1RiIsCiAgImR6aWdyYXJyIjoiXHUyN0ZGIiwKICAiRWFjdXRlIjoiXHUwMEM5IiwKICAiZWFjdXRlIjoiXHUwMEU5IiwKICAiZWFzdGVyIjoiXHUyQTZFIiwKICAiRWNhcm9uIjoiXHUwMTFBIiwKICAiZWNhcm9uIjoiXHUwMTFCIiwKICAiZWNpciI6Ilx1MjI1NiIsCiAgIkVjaXJjIjoiXHUwMENBIiwKICAiZWNpcmMiOiJcdTAwRUEiLAogICJlY29sb24iOiJcdTIyNTUiLAogICJFY3kiOiJcdTA0MkQiLAogICJlY3kiOiJcdTA0NEQiLAogICJlRERvdCI6Ilx1MkE3NyIsCiAgIkVkb3QiOiJcdTAxMTYiLAogICJlRG90IjoiXHUyMjUxIiwKICAiZWRvdCI6Ilx1MDExNyIsCiAgImVlIjoiXHUyMTQ3IiwKICAiZWZEb3QiOiJcdTIyNTIiLAogICJFZnIiOiJcdUQ4MzVcdUREMDgiLAogICJlZnIiOiJcdUQ4MzVcdUREMjIiLAogICJlZyI6Ilx1MkE5QSIsCiAgIkVncmF2ZSI6Ilx1MDBDOCIsCiAgImVncmF2ZSI6Ilx1MDBFOCIsCiAgImVncyI6Ilx1MkE5NiIsCiAgImVnc2RvdCI6Ilx1MkE5OCIsCiAgImVsIjoiXHUyQTk5IiwKICAiRWxlbWVudCI6Ilx1MjIwOCIsCiAgImVsaW50ZXJzIjoiXHUyM0U3IiwKICAiZWxsIjoiXHUyMTEzIiwKICAiZWxzIjoiXHUyQTk1IiwKICAiZWxzZG90IjoiXHUyQTk3IiwKICAiRW1hY3IiOiJcdTAxMTIiLAogICJlbWFjciI6Ilx1MDExMyIsCiAgImVtcHR5IjoiXHUyMjA1IiwKICAiZW1wdHlzZXQiOiJcdTIyMDUiLAogICJFbXB0eVNtYWxsU3F1YXJlIjoiXHUyNUZCIiwKICAiZW1wdHl2IjoiXHUyMjA1IiwKICAiRW1wdHlWZXJ5U21hbGxTcXVhcmUiOiJcdTI1QUIiLAogICJlbXNwIjoiXHUyMDAzIiwKICAiZW1zcDEzIjoiXHUyMDA0IiwKICAiZW1zcDE0IjoiXHUyMDA1IiwKICAiRU5HIjoiXHUwMTRBIiwKICAiZW5nIjoiXHUwMTRCIiwKICAiZW5zcCI6Ilx1MjAwMiIsCiAgIkVvZ29uIjoiXHUwMTE4IiwKICAiZW9nb24iOiJcdTAxMTkiLAogICJFb3BmIjoiXHVEODM1XHVERDNDIiwKICAiZW9wZiI6Ilx1RDgzNVx1REQ1NiIsCiAgImVwYXIiOiJcdTIyRDUiLAogICJlcGFyc2wiOiJcdTI5RTMiLAogICJlcGx1cyI6Ilx1MkE3MSIsCiAgImVwc2kiOiJcdTAzQjUiLAogICJFcHNpbG9uIjoiXHUwMzk1IiwKICAiZXBzaWxvbiI6Ilx1MDNCNSIsCiAgImVwc2l2IjoiXHUwM0Y1IiwKICAiZXFjaXJjIjoiXHUyMjU2IiwKICAiZXFjb2xvbiI6Ilx1MjI1NSIsCiAgImVxc2ltIjoiXHUyMjQyIiwKICAiZXFzbGFudGd0ciI6Ilx1MkE5NiIsCiAgImVxc2xhbnRsZXNzIjoiXHUyQTk1IiwKICAiRXF1YWwiOiJcdTJBNzUiLAogICJlcXVhbHMiOiJcdTAwM0QiLAogICJFcXVhbFRpbGRlIjoiXHUyMjQyIiwKICAiZXF1ZXN0IjoiXHUyMjVGIiwKICAiRXF1aWxpYnJpdW0iOiJcdTIxQ0MiLAogICJlcXVpdiI6Ilx1MjI2MSIsCiAgImVxdWl2REQiOiJcdTJBNzgiLAogICJlcXZwYXJzbCI6Ilx1MjlFNSIsCiAgImVyYXJyIjoiXHUyOTcxIiwKICAiZXJEb3QiOiJcdTIyNTMiLAogICJFc2NyIjoiXHUyMTMwIiwKICAiZXNjciI6Ilx1MjEyRiIsCiAgImVzZG90IjoiXHUyMjUwIiwKICAiRXNpbSI6Ilx1MkE3MyIsCiAgImVzaW0iOiJcdTIyNDIiLAogICJFdGEiOiJcdTAzOTciLAogICJldGEiOiJcdTAzQjciLAogICJFVEgiOiJcdTAwRDAiLAogICJldGgiOiJcdTAwRjAiLAogICJFdW1sIjoiXHUwMENCIiwKICAiZXVtbCI6Ilx1MDBFQiIsCiAgImV1cm8iOiJcdTIwQUMiLAogICJleGNsIjoiXHUwMDIxIiwKICAiZXhpc3QiOiJcdTIyMDMiLAogICJFeGlzdHMiOiJcdTIyMDMiLAogICJleHBlY3RhdGlvbiI6Ilx1MjEzMCIsCiAgIkV4cG9uZW50aWFsRSI6Ilx1MjE0NyIsCiAgImV4cG9uZW50aWFsZSI6Ilx1MjE0NyIsCiAgImZhbGxpbmdkb3RzZXEiOiJcdTIyNTIiLAogICJGY3kiOiJcdTA0MjQiLAogICJmY3kiOiJcdTA0NDQiLAogICJmZW1hbGUiOiJcdTI2NDAiLAogICJmZmlsaWciOiJcdUZCMDMiLAogICJmZmxpZyI6Ilx1RkIwMCIsCiAgImZmbGxpZyI6Ilx1RkIwNCIsCiAgIkZmciI6Ilx1RDgzNVx1REQwOSIsCiAgImZmciI6Ilx1RDgzNVx1REQyMyIsCiAgImZpbGlnIjoiXHVGQjAxIiwKICAiRmlsbGVkU21hbGxTcXVhcmUiOiJcdTI1RkMiLAogICJGaWxsZWRWZXJ5U21hbGxTcXVhcmUiOiJcdTI1QUEiLAogICJmamxpZyI6Ilx1MDA2Nlx1MDA2QSIsCiAgImZsYXQiOiJcdTI2NkQiLAogICJmbGxpZyI6Ilx1RkIwMiIsCiAgImZsdG5zIjoiXHUyNUIxIiwKICAiZm5vZiI6Ilx1MDE5MiIsCiAgIkZvcGYiOiJcdUQ4MzVcdUREM0QiLAogICJmb3BmIjoiXHVEODM1XHVERDU3IiwKICAiRm9yQWxsIjoiXHUyMjAwIiwKICAiZm9yYWxsIjoiXHUyMjAwIiwKICAiZm9yayI6Ilx1MjJENCIsCiAgImZvcmt2IjoiXHUyQUQ5IiwKICAiRm91cmllcnRyZiI6Ilx1MjEzMSIsCiAgImZwYXJ0aW50IjoiXHUyQTBEIiwKICAiZnJhYzEyIjoiXHUwMEJEIiwKICAiZnJhYzEzIjoiXHUyMTUzIiwKICAiZnJhYzE0IjoiXHUwMEJDIiwKICAiZnJhYzE1IjoiXHUyMTU1IiwKICAiZnJhYzE2IjoiXHUyMTU5IiwKICAiZnJhYzE4IjoiXHUyMTVCIiwKICAiZnJhYzIzIjoiXHUyMTU0IiwKICAiZnJhYzI1IjoiXHUyMTU2IiwKICAiZnJhYzM0IjoiXHUwMEJFIiwKICAiZnJhYzM1IjoiXHUyMTU3IiwKICAiZnJhYzM4IjoiXHUyMTVDIiwKICAiZnJhYzQ1IjoiXHUyMTU4IiwKICAiZnJhYzU2IjoiXHUyMTVBIiwKICAiZnJhYzU4IjoiXHUyMTVEIiwKICAiZnJhYzc4IjoiXHUyMTVFIiwKICAiZnJhc2wiOiJcdTIwNDQiLAogICJmcm93biI6Ilx1MjMyMiIsCiAgIkZzY3IiOiJcdTIxMzEiLAogICJmc2NyIjoiXHVEODM1XHVEQ0JCIiwKICAiZ2FjdXRlIjoiXHUwMUY1IiwKICAiR2FtbWEiOiJcdTAzOTMiLAogICJnYW1tYSI6Ilx1MDNCMyIsCiAgIkdhbW1hZCI6Ilx1MDNEQyIsCiAgImdhbW1hZCI6Ilx1MDNERCIsCiAgImdhcCI6Ilx1MkE4NiIsCiAgIkdicmV2ZSI6Ilx1MDExRSIsCiAgImdicmV2ZSI6Ilx1MDExRiIsCiAgIkdjZWRpbCI6Ilx1MDEyMiIsCiAgIkdjaXJjIjoiXHUwMTFDIiwKICAiZ2NpcmMiOiJcdTAxMUQiLAogICJHY3kiOiJcdTA0MTMiLAogICJnY3kiOiJcdTA0MzMiLAogICJHZG90IjoiXHUwMTIwIiwKICAiZ2RvdCI6Ilx1MDEyMSIsCiAgImdFIjoiXHUyMjY3IiwKICAiZ2UiOiJcdTIyNjUiLAogICJnRWwiOiJcdTJBOEMiLAogICJnZWwiOiJcdTIyREIiLAogICJnZXEiOiJcdTIyNjUiLAogICJnZXFxIjoiXHUyMjY3IiwKICAiZ2Vxc2xhbnQiOiJcdTJBN0UiLAogICJnZXMiOiJcdTJBN0UiLAogICJnZXNjYyI6Ilx1MkFBOSIsCiAgImdlc2RvdCI6Ilx1MkE4MCIsCiAgImdlc2RvdG8iOiJcdTJBODIiLAogICJnZXNkb3RvbCI6Ilx1MkE4NCIsCiAgImdlc2wiOiJcdTIyREJcdUZFMDAiLAogICJnZXNsZXMiOiJcdTJBOTQiLAogICJHZnIiOiJcdUQ4MzVcdUREMEEiLAogICJnZnIiOiJcdUQ4MzVcdUREMjQiLAogICJHZyI6Ilx1MjJEOSIsCiAgImdnIjoiXHUyMjZCIiwKICAiZ2dnIjoiXHUyMkQ5IiwKICAiZ2ltZWwiOiJcdTIxMzciLAogICJHSmN5IjoiXHUwNDAzIiwKICAiZ2pjeSI6Ilx1MDQ1MyIsCiAgImdsIjoiXHUyMjc3IiwKICAiZ2xhIjoiXHUyQUE1IiwKICAiZ2xFIjoiXHUyQTkyIiwKICAiZ2xqIjoiXHUyQUE0IiwKICAiZ25hcCI6Ilx1MkE4QSIsCiAgImduYXBwcm94IjoiXHUyQThBIiwKICAiZ25FIjoiXHUyMjY5IiwKICAiZ25lIjoiXHUyQTg4IiwKICAiZ25lcSI6Ilx1MkE4OCIsCiAgImduZXFxIjoiXHUyMjY5IiwKICAiZ25zaW0iOiJcdTIyRTciLAogICJHb3BmIjoiXHVEODM1XHVERDNFIiwKICAiZ29wZiI6Ilx1RDgzNVx1REQ1OCIsCiAgImdyYXZlIjoiXHUwMDYwIiwKICAiR3JlYXRlckVxdWFsIjoiXHUyMjY1IiwKICAiR3JlYXRlckVxdWFsTGVzcyI6Ilx1MjJEQiIsCiAgIkdyZWF0ZXJGdWxsRXF1YWwiOiJcdTIyNjciLAogICJHcmVhdGVyR3JlYXRlciI6Ilx1MkFBMiIsCiAgIkdyZWF0ZXJMZXNzIjoiXHUyMjc3IiwKICAiR3JlYXRlclNsYW50RXF1YWwiOiJcdTJBN0UiLAogICJHcmVhdGVyVGlsZGUiOiJcdTIyNzMiLAogICJHc2NyIjoiXHVEODM1XHVEQ0EyIiwKICAiZ3NjciI6Ilx1MjEwQSIsCiAgImdzaW0iOiJcdTIyNzMiLAogICJnc2ltZSI6Ilx1MkE4RSIsCiAgImdzaW1sIjoiXHUyQTkwIiwKICAiR1QiOiJcdTAwM0UiLAogICJHdCI6Ilx1MjI2QiIsCiAgImd0IjoiXHUwMDNFIiwKICAiZ3RjYyI6Ilx1MkFBNyIsCiAgImd0Y2lyIjoiXHUyQTdBIiwKICAiZ3Rkb3QiOiJcdTIyRDciLAogICJndGxQYXIiOiJcdTI5OTUiLAogICJndHF1ZXN0IjoiXHUyQTdDIiwKICAiZ3RyYXBwcm94IjoiXHUyQTg2IiwKICAiZ3RyYXJyIjoiXHUyOTc4IiwKICAiZ3RyZG90IjoiXHUyMkQ3IiwKICAiZ3RyZXFsZXNzIjoiXHUyMkRCIiwKICAiZ3RyZXFxbGVzcyI6Ilx1MkE4QyIsCiAgImd0cmxlc3MiOiJcdTIyNzciLAogICJndHJzaW0iOiJcdTIyNzMiLAogICJndmVydG5lcXEiOiJcdTIyNjlcdUZFMDAiLAogICJndm5FIjoiXHUyMjY5XHVGRTAwIiwKICAiSGFjZWsiOiJcdTAyQzciLAogICJoYWlyc3AiOiJcdTIwMEEiLAogICJoYWxmIjoiXHUwMEJEIiwKICAiaGFtaWx0IjoiXHUyMTBCIiwKICAiSEFSRGN5IjoiXHUwNDJBIiwKICAiaGFyZGN5IjoiXHUwNDRBIiwKICAiaEFyciI6Ilx1MjFENCIsCiAgImhhcnIiOiJcdTIxOTQiLAogICJoYXJyY2lyIjoiXHUyOTQ4IiwKICAiaGFycnciOiJcdTIxQUQiLAogICJIYXQiOiJcdTAwNUUiLAogICJoYmFyIjoiXHUyMTBGIiwKICAiSGNpcmMiOiJcdTAxMjQiLAogICJoY2lyYyI6Ilx1MDEyNSIsCiAgImhlYXJ0cyI6Ilx1MjY2NSIsCiAgImhlYXJ0c3VpdCI6Ilx1MjY2NSIsCiAgImhlbGxpcCI6Ilx1MjAyNiIsCiAgImhlcmNvbiI6Ilx1MjJCOSIsCiAgIkhmciI6Ilx1MjEwQyIsCiAgImhmciI6Ilx1RDgzNVx1REQyNSIsCiAgIkhpbGJlcnRTcGFjZSI6Ilx1MjEwQiIsCiAgImhrc2Vhcm93IjoiXHUyOTI1IiwKICAiaGtzd2Fyb3ciOiJcdTI5MjYiLAogICJob2FyciI6Ilx1MjFGRiIsCiAgImhvbXRodCI6Ilx1MjIzQiIsCiAgImhvb2tsZWZ0YXJyb3ciOiJcdTIxQTkiLAogICJob29rcmlnaHRhcnJvdyI6Ilx1MjFBQSIsCiAgIkhvcGYiOiJcdTIxMEQiLAogICJob3BmIjoiXHVEODM1XHVERDU5IiwKICAiaG9yYmFyIjoiXHUyMDE1IiwKICAiSG9yaXpvbnRhbExpbmUiOiJcdTI1MDAiLAogICJIc2NyIjoiXHUyMTBCIiwKICAiaHNjciI6Ilx1RDgzNVx1RENCRCIsCiAgImhzbGFzaCI6Ilx1MjEwRiIsCiAgIkhzdHJvayI6Ilx1MDEyNiIsCiAgImhzdHJvayI6Ilx1MDEyNyIsCiAgIkh1bXBEb3duSHVtcCI6Ilx1MjI0RSIsCiAgIkh1bXBFcXVhbCI6Ilx1MjI0RiIsCiAgImh5YnVsbCI6Ilx1MjA0MyIsCiAgImh5cGhlbiI6Ilx1MjAxMCIsCiAgIklhY3V0ZSI6Ilx1MDBDRCIsCiAgImlhY3V0ZSI6Ilx1MDBFRCIsCiAgImljIjoiXHUyMDYzIiwKICAiSWNpcmMiOiJcdTAwQ0UiLAogICJpY2lyYyI6Ilx1MDBFRSIsCiAgIkljeSI6Ilx1MDQxOCIsCiAgImljeSI6Ilx1MDQzOCIsCiAgIklkb3QiOiJcdTAxMzAiLAogICJJRWN5IjoiXHUwNDE1IiwKICAiaWVjeSI6Ilx1MDQzNSIsCiAgImlleGNsIjoiXHUwMEExIiwKICAiaWZmIjoiXHUyMUQ0IiwKICAiSWZyIjoiXHUyMTExIiwKICAiaWZyIjoiXHVEODM1XHVERDI2IiwKICAiSWdyYXZlIjoiXHUwMENDIiwKICAiaWdyYXZlIjoiXHUwMEVDIiwKICAiaWkiOiJcdTIxNDgiLAogICJpaWlpbnQiOiJcdTJBMEMiLAogICJpaWludCI6Ilx1MjIyRCIsCiAgImlpbmZpbiI6Ilx1MjlEQyIsCiAgImlpb3RhIjoiXHUyMTI5IiwKICAiSUpsaWciOiJcdTAxMzIiLAogICJpamxpZyI6Ilx1MDEzMyIsCiAgIkltIjoiXHUyMTExIiwKICAiSW1hY3IiOiJcdTAxMkEiLAogICJpbWFjciI6Ilx1MDEyQiIsCiAgImltYWdlIjoiXHUyMTExIiwKICAiSW1hZ2luYXJ5SSI6Ilx1MjE0OCIsCiAgImltYWdsaW5lIjoiXHUyMTEwIiwKICAiaW1hZ3BhcnQiOiJcdTIxMTEiLAogICJpbWF0aCI6Ilx1MDEzMSIsCiAgImltb2YiOiJcdTIyQjciLAogICJpbXBlZCI6Ilx1MDFCNSIsCiAgIkltcGxpZXMiOiJcdTIxRDIiLAogICJpbiI6Ilx1MjIwOCIsCiAgImluY2FyZSI6Ilx1MjEwNSIsCiAgImluZmluIjoiXHUyMjFFIiwKICAiaW5maW50aWUiOiJcdTI5REQiLAogICJpbm9kb3QiOiJcdTAxMzEiLAogICJJbnQiOiJcdTIyMkMiLAogICJpbnQiOiJcdTIyMkIiLAogICJpbnRjYWwiOiJcdTIyQkEiLAogICJpbnRlZ2VycyI6Ilx1MjEyNCIsCiAgIkludGVncmFsIjoiXHUyMjJCIiwKICAiaW50ZXJjYWwiOiJcdTIyQkEiLAogICJJbnRlcnNlY3Rpb24iOiJcdTIyQzIiLAogICJpbnRsYXJoayI6Ilx1MkExNyIsCiAgImludHByb2QiOiJcdTJBM0MiLAogICJJbnZpc2libGVDb21tYSI6Ilx1MjA2MyIsCiAgIkludmlzaWJsZVRpbWVzIjoiXHUyMDYyIiwKICAiSU9jeSI6Ilx1MDQwMSIsCiAgImlvY3kiOiJcdTA0NTEiLAogICJJb2dvbiI6Ilx1MDEyRSIsCiAgImlvZ29uIjoiXHUwMTJGIiwKICAiSW9wZiI6Ilx1RDgzNVx1REQ0MCIsCiAgImlvcGYiOiJcdUQ4MzVcdURENUEiLAogICJJb3RhIjoiXHUwMzk5IiwKICAiaW90YSI6Ilx1MDNCOSIsCiAgImlwcm9kIjoiXHUyQTNDIiwKICAiaXF1ZXN0IjoiXHUwMEJGIiwKICAiSXNjciI6Ilx1MjExMCIsCiAgImlzY3IiOiJcdUQ4MzVcdURDQkUiLAogICJpc2luIjoiXHUyMjA4IiwKICAiaXNpbmRvdCI6Ilx1MjJGNSIsCiAgImlzaW5FIjoiXHUyMkY5IiwKICAiaXNpbnMiOiJcdTIyRjQiLAogICJpc2luc3YiOiJcdTIyRjMiLAogICJpc2ludiI6Ilx1MjIwOCIsCiAgIml0IjoiXHUyMDYyIiwKICAiSXRpbGRlIjoiXHUwMTI4IiwKICAiaXRpbGRlIjoiXHUwMTI5IiwKICAiSXVrY3kiOiJcdTA0MDYiLAogICJpdWtjeSI6Ilx1MDQ1NiIsCiAgIkl1bWwiOiJcdTAwQ0YiLAogICJpdW1sIjoiXHUwMEVGIiwKICAiSmNpcmMiOiJcdTAxMzQiLAogICJqY2lyYyI6Ilx1MDEzNSIsCiAgIkpjeSI6Ilx1MDQxOSIsCiAgImpjeSI6Ilx1MDQzOSIsCiAgIkpmciI6Ilx1RDgzNVx1REQwRCIsCiAgImpmciI6Ilx1RDgzNVx1REQyNyIsCiAgImptYXRoIjoiXHUwMjM3IiwKICAiSm9wZiI6Ilx1RDgzNVx1REQ0MSIsCiAgImpvcGYiOiJcdUQ4MzVcdURENUIiLAogICJKc2NyIjoiXHVEODM1XHVEQ0E1IiwKICAianNjciI6Ilx1RDgzNVx1RENCRiIsCiAgIkpzZXJjeSI6Ilx1MDQwOCIsCiAgImpzZXJjeSI6Ilx1MDQ1OCIsCiAgIkp1a2N5IjoiXHUwNDA0IiwKICAianVrY3kiOiJcdTA0NTQiLAogICJLYXBwYSI6Ilx1MDM5QSIsCiAgImthcHBhIjoiXHUwM0JBIiwKICAia2FwcGF2IjoiXHUwM0YwIiwKICAiS2NlZGlsIjoiXHUwMTM2IiwKICAia2NlZGlsIjoiXHUwMTM3IiwKICAiS2N5IjoiXHUwNDFBIiwKICAia2N5IjoiXHUwNDNBIiwKICAiS2ZyIjoiXHVEODM1XHVERDBFIiwKICAia2ZyIjoiXHVEODM1XHVERDI4IiwKICAia2dyZWVuIjoiXHUwMTM4IiwKICAiS0hjeSI6Ilx1MDQyNSIsCiAgImtoY3kiOiJcdTA0NDUiLAogICJLSmN5IjoiXHUwNDBDIiwKICAia2pjeSI6Ilx1MDQ1QyIsCiAgIktvcGYiOiJcdUQ4MzVcdURENDIiLAogICJrb3BmIjoiXHVEODM1XHVERDVDIiwKICAiS3NjciI6Ilx1RDgzNVx1RENBNiIsCiAgImtzY3IiOiJcdUQ4MzVcdURDQzAiLAogICJsQWFyciI6Ilx1MjFEQSIsCiAgIkxhY3V0ZSI6Ilx1MDEzOSIsCiAgImxhY3V0ZSI6Ilx1MDEzQSIsCiAgImxhZW1wdHl2IjoiXHUyOUI0IiwKICAibGFncmFuIjoiXHUyMTEyIiwKICAiTGFtYmRhIjoiXHUwMzlCIiwKICAibGFtYmRhIjoiXHUwM0JCIiwKICAiTGFuZyI6Ilx1MjdFQSIsCiAgImxhbmciOiJcdTI3RTgiLAogICJsYW5nZCI6Ilx1Mjk5MSIsCiAgImxhbmdsZSI6Ilx1MjdFOCIsCiAgImxhcCI6Ilx1MkE4NSIsCiAgIkxhcGxhY2V0cmYiOiJcdTIxMTIiLAogICJsYXF1byI6Ilx1MDBBQiIsCiAgIkxhcnIiOiJcdTIxOUUiLAogICJsQXJyIjoiXHUyMUQwIiwKICAibGFyciI6Ilx1MjE5MCIsCiAgImxhcnJiIjoiXHUyMUU0IiwKICAibGFycmJmcyI6Ilx1MjkxRiIsCiAgImxhcnJmcyI6Ilx1MjkxRCIsCiAgImxhcnJoayI6Ilx1MjFBOSIsCiAgImxhcnJscCI6Ilx1MjFBQiIsCiAgImxhcnJwbCI6Ilx1MjkzOSIsCiAgImxhcnJzaW0iOiJcdTI5NzMiLAogICJsYXJydGwiOiJcdTIxQTIiLAogICJsYXQiOiJcdTJBQUIiLAogICJsQXRhaWwiOiJcdTI5MUIiLAogICJsYXRhaWwiOiJcdTI5MTkiLAogICJsYXRlIjoiXHUyQUFEIiwKICAibGF0ZXMiOiJcdTJBQURcdUZFMDAiLAogICJsQmFyciI6Ilx1MjkwRSIsCiAgImxiYXJyIjoiXHUyOTBDIiwKICAibGJicmsiOiJcdTI3NzIiLAogICJsYnJhY2UiOiJcdTAwN0IiLAogICJsYnJhY2siOiJcdTAwNUIiLAogICJsYnJrZSI6Ilx1Mjk4QiIsCiAgImxicmtzbGQiOiJcdTI5OEYiLAogICJsYnJrc2x1IjoiXHUyOThEIiwKICAiTGNhcm9uIjoiXHUwMTNEIiwKICAibGNhcm9uIjoiXHUwMTNFIiwKICAiTGNlZGlsIjoiXHUwMTNCIiwKICAibGNlZGlsIjoiXHUwMTNDIiwKICAibGNlaWwiOiJcdTIzMDgiLAogICJsY3ViIjoiXHUwMDdCIiwKICAiTGN5IjoiXHUwNDFCIiwKICAibGN5IjoiXHUwNDNCIiwKICAibGRjYSI6Ilx1MjkzNiIsCiAgImxkcXVvIjoiXHUyMDFDIiwKICAibGRxdW9yIjoiXHUyMDFFIiwKICAibGRyZGhhciI6Ilx1Mjk2NyIsCiAgImxkcnVzaGFyIjoiXHUyOTRCIiwKICAibGRzaCI6Ilx1MjFCMiIsCiAgImxFIjoiXHUyMjY2IiwKICAibGUiOiJcdTIyNjQiLAogICJMZWZ0QW5nbGVCcmFja2V0IjoiXHUyN0U4IiwKICAiTGVmdEFycm93IjoiXHUyMTkwIiwKICAiTGVmdGFycm93IjoiXHUyMUQwIiwKICAibGVmdGFycm93IjoiXHUyMTkwIiwKICAiTGVmdEFycm93QmFyIjoiXHUyMUU0IiwKICAiTGVmdEFycm93UmlnaHRBcnJvdyI6Ilx1MjFDNiIsCiAgImxlZnRhcnJvd3RhaWwiOiJcdTIxQTIiLAogICJMZWZ0Q2VpbGluZyI6Ilx1MjMwOCIsCiAgIkxlZnREb3VibGVCcmFja2V0IjoiXHUyN0U2IiwKICAiTGVmdERvd25UZWVWZWN0b3IiOiJcdTI5NjEiLAogICJMZWZ0RG93blZlY3RvciI6Ilx1MjFDMyIsCiAgIkxlZnREb3duVmVjdG9yQmFyIjoiXHUyOTU5IiwKICAiTGVmdEZsb29yIjoiXHUyMzBBIiwKICAibGVmdGhhcnBvb25kb3duIjoiXHUyMUJEIiwKICAibGVmdGhhcnBvb251cCI6Ilx1MjFCQyIsCiAgImxlZnRsZWZ0YXJyb3dzIjoiXHUyMUM3IiwKICAiTGVmdFJpZ2h0QXJyb3ciOiJcdTIxOTQiLAogICJMZWZ0cmlnaHRhcnJvdyI6Ilx1MjFENCIsCiAgImxlZnRyaWdodGFycm93IjoiXHUyMTk0IiwKICAibGVmdHJpZ2h0YXJyb3dzIjoiXHUyMUM2IiwKICAibGVmdHJpZ2h0aGFycG9vbnMiOiJcdTIxQ0IiLAogICJsZWZ0cmlnaHRzcXVpZ2Fycm93IjoiXHUyMUFEIiwKICAiTGVmdFJpZ2h0VmVjdG9yIjoiXHUyOTRFIiwKICAiTGVmdFRlZSI6Ilx1MjJBMyIsCiAgIkxlZnRUZWVBcnJvdyI6Ilx1MjFBNCIsCiAgIkxlZnRUZWVWZWN0b3IiOiJcdTI5NUEiLAogICJsZWZ0dGhyZWV0aW1lcyI6Ilx1MjJDQiIsCiAgIkxlZnRUcmlhbmdsZSI6Ilx1MjJCMiIsCiAgIkxlZnRUcmlhbmdsZUJhciI6Ilx1MjlDRiIsCiAgIkxlZnRUcmlhbmdsZUVxdWFsIjoiXHUyMkI0IiwKICAiTGVmdFVwRG93blZlY3RvciI6Ilx1Mjk1MSIsCiAgIkxlZnRVcFRlZVZlY3RvciI6Ilx1Mjk2MCIsCiAgIkxlZnRVcFZlY3RvciI6Ilx1MjFCRiIsCiAgIkxlZnRVcFZlY3RvckJhciI6Ilx1Mjk1OCIsCiAgIkxlZnRWZWN0b3IiOiJcdTIxQkMiLAogICJMZWZ0VmVjdG9yQmFyIjoiXHUyOTUyIiwKICAibEVnIjoiXHUyQThCIiwKICAibGVnIjoiXHUyMkRBIiwKICAibGVxIjoiXHUyMjY0IiwKICAibGVxcSI6Ilx1MjI2NiIsCiAgImxlcXNsYW50IjoiXHUyQTdEIiwKICAibGVzIjoiXHUyQTdEIiwKICAibGVzY2MiOiJcdTJBQTgiLAogICJsZXNkb3QiOiJcdTJBN0YiLAogICJsZXNkb3RvIjoiXHUyQTgxIiwKICAibGVzZG90b3IiOiJcdTJBODMiLAogICJsZXNnIjoiXHUyMkRBXHVGRTAwIiwKICAibGVzZ2VzIjoiXHUyQTkzIiwKICAibGVzc2FwcHJveCI6Ilx1MkE4NSIsCiAgImxlc3Nkb3QiOiJcdTIyRDYiLAogICJsZXNzZXFndHIiOiJcdTIyREEiLAogICJsZXNzZXFxZ3RyIjoiXHUyQThCIiwKICAiTGVzc0VxdWFsR3JlYXRlciI6Ilx1MjJEQSIsCiAgIkxlc3NGdWxsRXF1YWwiOiJcdTIyNjYiLAogICJMZXNzR3JlYXRlciI6Ilx1MjI3NiIsCiAgImxlc3NndHIiOiJcdTIyNzYiLAogICJMZXNzTGVzcyI6Ilx1MkFBMSIsCiAgImxlc3NzaW0iOiJcdTIyNzIiLAogICJMZXNzU2xhbnRFcXVhbCI6Ilx1MkE3RCIsCiAgIkxlc3NUaWxkZSI6Ilx1MjI3MiIsCiAgImxmaXNodCI6Ilx1Mjk3QyIsCiAgImxmbG9vciI6Ilx1MjMwQSIsCiAgIkxmciI6Ilx1RDgzNVx1REQwRiIsCiAgImxmciI6Ilx1RDgzNVx1REQyOSIsCiAgImxnIjoiXHUyMjc2IiwKICAibGdFIjoiXHUyQTkxIiwKICAibEhhciI6Ilx1Mjk2MiIsCiAgImxoYXJkIjoiXHUyMUJEIiwKICAibGhhcnUiOiJcdTIxQkMiLAogICJsaGFydWwiOiJcdTI5NkEiLAogICJsaGJsayI6Ilx1MjU4NCIsCiAgIkxKY3kiOiJcdTA0MDkiLAogICJsamN5IjoiXHUwNDU5IiwKICAiTGwiOiJcdTIyRDgiLAogICJsbCI6Ilx1MjI2QSIsCiAgImxsYXJyIjoiXHUyMUM3IiwKICAibGxjb3JuZXIiOiJcdTIzMUUiLAogICJMbGVmdGFycm93IjoiXHUyMURBIiwKICAibGxoYXJkIjoiXHUyOTZCIiwKICAibGx0cmkiOiJcdTI1RkEiLAogICJMbWlkb3QiOiJcdTAxM0YiLAogICJsbWlkb3QiOiJcdTAxNDAiLAogICJsbW91c3QiOiJcdTIzQjAiLAogICJsbW91c3RhY2hlIjoiXHUyM0IwIiwKICAibG5hcCI6Ilx1MkE4OSIsCiAgImxuYXBwcm94IjoiXHUyQTg5IiwKICAibG5FIjoiXHUyMjY4IiwKICAibG5lIjoiXHUyQTg3IiwKICAibG5lcSI6Ilx1MkE4NyIsCiAgImxuZXFxIjoiXHUyMjY4IiwKICAibG5zaW0iOiJcdTIyRTYiLAogICJsb2FuZyI6Ilx1MjdFQyIsCiAgImxvYXJyIjoiXHUyMUZEIiwKICAibG9icmsiOiJcdTI3RTYiLAogICJMb25nTGVmdEFycm93IjoiXHUyN0Y1IiwKICAiTG9uZ2xlZnRhcnJvdyI6Ilx1MjdGOCIsCiAgImxvbmdsZWZ0YXJyb3ciOiJcdTI3RjUiLAogICJMb25nTGVmdFJpZ2h0QXJyb3ciOiJcdTI3RjciLAogICJMb25nbGVmdHJpZ2h0YXJyb3ciOiJcdTI3RkEiLAogICJsb25nbGVmdHJpZ2h0YXJyb3ciOiJcdTI3RjciLAogICJsb25nbWFwc3RvIjoiXHUyN0ZDIiwKICAiTG9uZ1JpZ2h0QXJyb3ciOiJcdTI3RjYiLAogICJMb25ncmlnaHRhcnJvdyI6Ilx1MjdGOSIsCiAgImxvbmdyaWdodGFycm93IjoiXHUyN0Y2IiwKICAibG9vcGFycm93bGVmdCI6Ilx1MjFBQiIsCiAgImxvb3BhcnJvd3JpZ2h0IjoiXHUyMUFDIiwKICAibG9wYXIiOiJcdTI5ODUiLAogICJMb3BmIjoiXHVEODM1XHVERDQzIiwKICAibG9wZiI6Ilx1RDgzNVx1REQ1RCIsCiAgImxvcGx1cyI6Ilx1MkEyRCIsCiAgImxvdGltZXMiOiJcdTJBMzQiLAogICJsb3dhc3QiOiJcdTIyMTciLAogICJsb3diYXIiOiJcdTAwNUYiLAogICJMb3dlckxlZnRBcnJvdyI6Ilx1MjE5OSIsCiAgIkxvd2VyUmlnaHRBcnJvdyI6Ilx1MjE5OCIsCiAgImxveiI6Ilx1MjVDQSIsCiAgImxvemVuZ2UiOiJcdTI1Q0EiLAogICJsb3pmIjoiXHUyOUVCIiwKICAibHBhciI6Ilx1MDAyOCIsCiAgImxwYXJsdCI6Ilx1Mjk5MyIsCiAgImxyYXJyIjoiXHUyMUM2IiwKICAibHJjb3JuZXIiOiJcdTIzMUYiLAogICJscmhhciI6Ilx1MjFDQiIsCiAgImxyaGFyZCI6Ilx1Mjk2RCIsCiAgImxybSI6Ilx1MjAwRSIsCiAgImxydHJpIjoiXHUyMkJGIiwKICAibHNhcXVvIjoiXHUyMDM5IiwKICAiTHNjciI6Ilx1MjExMiIsCiAgImxzY3IiOiJcdUQ4MzVcdURDQzEiLAogICJMc2giOiJcdTIxQjAiLAogICJsc2giOiJcdTIxQjAiLAogICJsc2ltIjoiXHUyMjcyIiwKICAibHNpbWUiOiJcdTJBOEQiLAogICJsc2ltZyI6Ilx1MkE4RiIsCiAgImxzcWIiOiJcdTAwNUIiLAogICJsc3F1byI6Ilx1MjAxOCIsCiAgImxzcXVvciI6Ilx1MjAxQSIsCiAgIkxzdHJvayI6Ilx1MDE0MSIsCiAgImxzdHJvayI6Ilx1MDE0MiIsCiAgIkxUIjoiXHUwMDNDIiwKICAiTHQiOiJcdTIyNkEiLAogICJsdCI6Ilx1MDAzQyIsCiAgImx0Y2MiOiJcdTJBQTYiLAogICJsdGNpciI6Ilx1MkE3OSIsCiAgImx0ZG90IjoiXHUyMkQ2IiwKICAibHRocmVlIjoiXHUyMkNCIiwKICAibHRpbWVzIjoiXHUyMkM5IiwKICAibHRsYXJyIjoiXHUyOTc2IiwKICAibHRxdWVzdCI6Ilx1MkE3QiIsCiAgImx0cmkiOiJcdTI1QzMiLAogICJsdHJpZSI6Ilx1MjJCNCIsCiAgImx0cmlmIjoiXHUyNUMyIiwKICAibHRyUGFyIjoiXHUyOTk2IiwKICAibHVyZHNoYXIiOiJcdTI5NEEiLAogICJsdXJ1aGFyIjoiXHUyOTY2IiwKICAibHZlcnRuZXFxIjoiXHUyMjY4XHVGRTAwIiwKICAibHZuRSI6Ilx1MjI2OFx1RkUwMCIsCiAgIm1hY3IiOiJcdTAwQUYiLAogICJtYWxlIjoiXHUyNjQyIiwKICAibWFsdCI6Ilx1MjcyMCIsCiAgIm1hbHRlc2UiOiJcdTI3MjAiLAogICJNYXAiOiJcdTI5MDUiLAogICJtYXAiOiJcdTIxQTYiLAogICJtYXBzdG8iOiJcdTIxQTYiLAogICJtYXBzdG9kb3duIjoiXHUyMUE3IiwKICAibWFwc3RvbGVmdCI6Ilx1MjFBNCIsCiAgIm1hcHN0b3VwIjoiXHUyMUE1IiwKICAibWFya2VyIjoiXHUyNUFFIiwKICAibWNvbW1hIjoiXHUyQTI5IiwKICAiTWN5IjoiXHUwNDFDIiwKICAibWN5IjoiXHUwNDNDIiwKICAibWRhc2giOiJcdTIwMTQiLAogICJtRERvdCI6Ilx1MjIzQSIsCiAgIm1lYXN1cmVkYW5nbGUiOiJcdTIyMjEiLAogICJNZWRpdW1TcGFjZSI6Ilx1MjA1RiIsCiAgIk1lbGxpbnRyZiI6Ilx1MjEzMyIsCiAgIk1mciI6Ilx1RDgzNVx1REQxMCIsCiAgIm1mciI6Ilx1RDgzNVx1REQyQSIsCiAgIm1obyI6Ilx1MjEyNyIsCiAgIm1pY3JvIjoiXHUwMEI1IiwKICAibWlkIjoiXHUyMjIzIiwKICAibWlkYXN0IjoiXHUwMDJBIiwKICAibWlkY2lyIjoiXHUyQUYwIiwKICAibWlkZG90IjoiXHUwMEI3IiwKICAibWludXMiOiJcdTIyMTIiLAogICJtaW51c2IiOiJcdTIyOUYiLAogICJtaW51c2QiOiJcdTIyMzgiLAogICJtaW51c2R1IjoiXHUyQTJBIiwKICAiTWludXNQbHVzIjoiXHUyMjEzIiwKICAibWxjcCI6Ilx1MkFEQiIsCiAgIm1sZHIiOiJcdTIwMjYiLAogICJtbnBsdXMiOiJcdTIyMTMiLAogICJtb2RlbHMiOiJcdTIyQTciLAogICJNb3BmIjoiXHVEODM1XHVERDQ0IiwKICAibW9wZiI6Ilx1RDgzNVx1REQ1RSIsCiAgIm1wIjoiXHUyMjEzIiwKICAiTXNjciI6Ilx1MjEzMyIsCiAgIm1zY3IiOiJcdUQ4MzVcdURDQzIiLAogICJtc3Rwb3MiOiJcdTIyM0UiLAogICJNdSI6Ilx1MDM5QyIsCiAgIm11IjoiXHUwM0JDIiwKICAibXVsdGltYXAiOiJcdTIyQjgiLAogICJtdW1hcCI6Ilx1MjJCOCIsCiAgIm5hYmxhIjoiXHUyMjA3IiwKICAiTmFjdXRlIjoiXHUwMTQzIiwKICAibmFjdXRlIjoiXHUwMTQ0IiwKICAibmFuZyI6Ilx1MjIyMFx1MjBEMiIsCiAgIm5hcCI6Ilx1MjI0OSIsCiAgIm5hcEUiOiJcdTJBNzBcdTAzMzgiLAogICJuYXBpZCI6Ilx1MjI0Qlx1MDMzOCIsCiAgIm5hcG9zIjoiXHUwMTQ5IiwKICAibmFwcHJveCI6Ilx1MjI0OSIsCiAgIm5hdHVyIjoiXHUyNjZFIiwKICAibmF0dXJhbCI6Ilx1MjY2RSIsCiAgIm5hdHVyYWxzIjoiXHUyMTE1IiwKICAibmJzcCI6Ilx1MDBBMCIsCiAgIm5idW1wIjoiXHUyMjRFXHUwMzM4IiwKICAibmJ1bXBlIjoiXHUyMjRGXHUwMzM4IiwKICAibmNhcCI6Ilx1MkE0MyIsCiAgIk5jYXJvbiI6Ilx1MDE0NyIsCiAgIm5jYXJvbiI6Ilx1MDE0OCIsCiAgIk5jZWRpbCI6Ilx1MDE0NSIsCiAgIm5jZWRpbCI6Ilx1MDE0NiIsCiAgIm5jb25nIjoiXHUyMjQ3IiwKICAibmNvbmdkb3QiOiJcdTJBNkRcdTAzMzgiLAogICJuY3VwIjoiXHUyQTQyIiwKICAiTmN5IjoiXHUwNDFEIiwKICAibmN5IjoiXHUwNDNEIiwKICAibmRhc2giOiJcdTIwMTMiLAogICJuZSI6Ilx1MjI2MCIsCiAgIm5lYXJoayI6Ilx1MjkyNCIsCiAgIm5lQXJyIjoiXHUyMUQ3IiwKICAibmVhcnIiOiJcdTIxOTciLAogICJuZWFycm93IjoiXHUyMTk3IiwKICAibmVkb3QiOiJcdTIyNTBcdTAzMzgiLAogICJOZWdhdGl2ZU1lZGl1bVNwYWNlIjoiXHUyMDBCIiwKICAiTmVnYXRpdmVUaGlja1NwYWNlIjoiXHUyMDBCIiwKICAiTmVnYXRpdmVUaGluU3BhY2UiOiJcdTIwMEIiLAogICJOZWdhdGl2ZVZlcnlUaGluU3BhY2UiOiJcdTIwMEIiLAogICJuZXF1aXYiOiJcdTIyNjIiLAogICJuZXNlYXIiOiJcdTI5MjgiLAogICJuZXNpbSI6Ilx1MjI0Mlx1MDMzOCIsCiAgIk5lc3RlZEdyZWF0ZXJHcmVhdGVyIjoiXHUyMjZCIiwKICAiTmVzdGVkTGVzc0xlc3MiOiJcdTIyNkEiLAogICJOZXdMaW5lIjoiXHUwMDBBIiwKICAibmV4aXN0IjoiXHUyMjA0IiwKICAibmV4aXN0cyI6Ilx1MjIwNCIsCiAgIk5mciI6Ilx1RDgzNVx1REQxMSIsCiAgIm5mciI6Ilx1RDgzNVx1REQyQiIsCiAgIm5nRSI6Ilx1MjI2N1x1MDMzOCIsCiAgIm5nZSI6Ilx1MjI3MSIsCiAgIm5nZXEiOiJcdTIyNzEiLAogICJuZ2VxcSI6Ilx1MjI2N1x1MDMzOCIsCiAgIm5nZXFzbGFudCI6Ilx1MkE3RVx1MDMzOCIsCiAgIm5nZXMiOiJcdTJBN0VcdTAzMzgiLAogICJuR2ciOiJcdTIyRDlcdTAzMzgiLAogICJuZ3NpbSI6Ilx1MjI3NSIsCiAgIm5HdCI6Ilx1MjI2Qlx1MjBEMiIsCiAgIm5ndCI6Ilx1MjI2RiIsCiAgIm5ndHIiOiJcdTIyNkYiLAogICJuR3R2IjoiXHUyMjZCXHUwMzM4IiwKICAibmhBcnIiOiJcdTIxQ0UiLAogICJuaGFyciI6Ilx1MjFBRSIsCiAgIm5ocGFyIjoiXHUyQUYyIiwKICAibmkiOiJcdTIyMEIiLAogICJuaXMiOiJcdTIyRkMiLAogICJuaXNkIjoiXHUyMkZBIiwKICAibml2IjoiXHUyMjBCIiwKICAiTkpjeSI6Ilx1MDQwQSIsCiAgIm5qY3kiOiJcdTA0NUEiLAogICJubEFyciI6Ilx1MjFDRCIsCiAgIm5sYXJyIjoiXHUyMTlBIiwKICAibmxkciI6Ilx1MjAyNSIsCiAgIm5sRSI6Ilx1MjI2Nlx1MDMzOCIsCiAgIm5sZSI6Ilx1MjI3MCIsCiAgIm5MZWZ0YXJyb3ciOiJcdTIxQ0QiLAogICJubGVmdGFycm93IjoiXHUyMTlBIiwKICAibkxlZnRyaWdodGFycm93IjoiXHUyMUNFIiwKICAibmxlZnRyaWdodGFycm93IjoiXHUyMUFFIiwKICAibmxlcSI6Ilx1MjI3MCIsCiAgIm5sZXFxIjoiXHUyMjY2XHUwMzM4IiwKICAibmxlcXNsYW50IjoiXHUyQTdEXHUwMzM4IiwKICAibmxlcyI6Ilx1MkE3RFx1MDMzOCIsCiAgIm5sZXNzIjoiXHUyMjZFIiwKICAibkxsIjoiXHUyMkQ4XHUwMzM4IiwKICAibmxzaW0iOiJcdTIyNzQiLAogICJuTHQiOiJcdTIyNkFcdTIwRDIiLAogICJubHQiOiJcdTIyNkUiLAogICJubHRyaSI6Ilx1MjJFQSIsCiAgIm5sdHJpZSI6Ilx1MjJFQyIsCiAgIm5MdHYiOiJcdTIyNkFcdTAzMzgiLAogICJubWlkIjoiXHUyMjI0IiwKICAiTm9CcmVhayI6Ilx1MjA2MCIsCiAgIk5vbkJyZWFraW5nU3BhY2UiOiJcdTAwQTAiLAogICJOb3BmIjoiXHUyMTE1IiwKICAibm9wZiI6Ilx1RDgzNVx1REQ1RiIsCiAgIk5vdCI6Ilx1MkFFQyIsCiAgIm5vdCI6Ilx1MDBBQyIsCiAgIk5vdENvbmdydWVudCI6Ilx1MjI2MiIsCiAgIk5vdEN1cENhcCI6Ilx1MjI2RCIsCiAgIk5vdERvdWJsZVZlcnRpY2FsQmFyIjoiXHUyMjI2IiwKICAiTm90RWxlbWVudCI6Ilx1MjIwOSIsCiAgIk5vdEVxdWFsIjoiXHUyMjYwIiwKICAiTm90RXF1YWxUaWxkZSI6Ilx1MjI0Mlx1MDMzOCIsCiAgIk5vdEV4aXN0cyI6Ilx1MjIwNCIsCiAgIk5vdEdyZWF0ZXIiOiJcdTIyNkYiLAogICJOb3RHcmVhdGVyRXF1YWwiOiJcdTIyNzEiLAogICJOb3RHcmVhdGVyRnVsbEVxdWFsIjoiXHUyMjY3XHUwMzM4IiwKICAiTm90R3JlYXRlckdyZWF0ZXIiOiJcdTIyNkJcdTAzMzgiLAogICJOb3RHcmVhdGVyTGVzcyI6Ilx1MjI3OSIsCiAgIk5vdEdyZWF0ZXJTbGFudEVxdWFsIjoiXHUyQTdFXHUwMzM4IiwKICAiTm90R3JlYXRlclRpbGRlIjoiXHUyMjc1IiwKICAiTm90SHVtcERvd25IdW1wIjoiXHUyMjRFXHUwMzM4IiwKICAiTm90SHVtcEVxdWFsIjoiXHUyMjRGXHUwMzM4IiwKICAibm90aW4iOiJcdTIyMDkiLAogICJub3RpbmRvdCI6Ilx1MjJGNVx1MDMzOCIsCiAgIm5vdGluRSI6Ilx1MjJGOVx1MDMzOCIsCiAgIm5vdGludmEiOiJcdTIyMDkiLAogICJub3RpbnZiIjoiXHUyMkY3IiwKICAibm90aW52YyI6Ilx1MjJGNiIsCiAgIk5vdExlZnRUcmlhbmdsZSI6Ilx1MjJFQSIsCiAgIk5vdExlZnRUcmlhbmdsZUJhciI6Ilx1MjlDRlx1MDMzOCIsCiAgIk5vdExlZnRUcmlhbmdsZUVxdWFsIjoiXHUyMkVDIiwKICAiTm90TGVzcyI6Ilx1MjI2RSIsCiAgIk5vdExlc3NFcXVhbCI6Ilx1MjI3MCIsCiAgIk5vdExlc3NHcmVhdGVyIjoiXHUyMjc4IiwKICAiTm90TGVzc0xlc3MiOiJcdTIyNkFcdTAzMzgiLAogICJOb3RMZXNzU2xhbnRFcXVhbCI6Ilx1MkE3RFx1MDMzOCIsCiAgIk5vdExlc3NUaWxkZSI6Ilx1MjI3NCIsCiAgIk5vdE5lc3RlZEdyZWF0ZXJHcmVhdGVyIjoiXHUyQUEyXHUwMzM4IiwKICAiTm90TmVzdGVkTGVzc0xlc3MiOiJcdTJBQTFcdTAzMzgiLAogICJub3RuaSI6Ilx1MjIwQyIsCiAgIm5vdG5pdmEiOiJcdTIyMEMiLAogICJub3RuaXZiIjoiXHUyMkZFIiwKICAibm90bml2YyI6Ilx1MjJGRCIsCiAgIk5vdFByZWNlZGVzIjoiXHUyMjgwIiwKICAiTm90UHJlY2VkZXNFcXVhbCI6Ilx1MkFBRlx1MDMzOCIsCiAgIk5vdFByZWNlZGVzU2xhbnRFcXVhbCI6Ilx1MjJFMCIsCiAgIk5vdFJldmVyc2VFbGVtZW50IjoiXHUyMjBDIiwKICAiTm90UmlnaHRUcmlhbmdsZSI6Ilx1MjJFQiIsCiAgIk5vdFJpZ2h0VHJpYW5nbGVCYXIiOiJcdTI5RDBcdTAzMzgiLAogICJOb3RSaWdodFRyaWFuZ2xlRXF1YWwiOiJcdTIyRUQiLAogICJOb3RTcXVhcmVTdWJzZXQiOiJcdTIyOEZcdTAzMzgiLAogICJOb3RTcXVhcmVTdWJzZXRFcXVhbCI6Ilx1MjJFMiIsCiAgIk5vdFNxdWFyZVN1cGVyc2V0IjoiXHUyMjkwXHUwMzM4IiwKICAiTm90U3F1YXJlU3VwZXJzZXRFcXVhbCI6Ilx1MjJFMyIsCiAgIk5vdFN1YnNldCI6Ilx1MjI4Mlx1MjBEMiIsCiAgIk5vdFN1YnNldEVxdWFsIjoiXHUyMjg4IiwKICAiTm90U3VjY2VlZHMiOiJcdTIyODEiLAogICJOb3RTdWNjZWVkc0VxdWFsIjoiXHUyQUIwXHUwMzM4IiwKICAiTm90U3VjY2VlZHNTbGFudEVxdWFsIjoiXHUyMkUxIiwKICAiTm90U3VjY2VlZHNUaWxkZSI6Ilx1MjI3Rlx1MDMzOCIsCiAgIk5vdFN1cGVyc2V0IjoiXHUyMjgzXHUyMEQyIiwKICAiTm90U3VwZXJzZXRFcXVhbCI6Ilx1MjI4OSIsCiAgIk5vdFRpbGRlIjoiXHUyMjQxIiwKICAiTm90VGlsZGVFcXVhbCI6Ilx1MjI0NCIsCiAgIk5vdFRpbGRlRnVsbEVxdWFsIjoiXHUyMjQ3IiwKICAiTm90VGlsZGVUaWxkZSI6Ilx1MjI0OSIsCiAgIk5vdFZlcnRpY2FsQmFyIjoiXHUyMjI0IiwKICAibnBhciI6Ilx1MjIyNiIsCiAgIm5wYXJhbGxlbCI6Ilx1MjIyNiIsCiAgIm5wYXJzbCI6Ilx1MkFGRFx1MjBFNSIsCiAgIm5wYXJ0IjoiXHUyMjAyXHUwMzM4IiwKICAibnBvbGludCI6Ilx1MkExNCIsCiAgIm5wciI6Ilx1MjI4MCIsCiAgIm5wcmN1ZSI6Ilx1MjJFMCIsCiAgIm5wcmUiOiJcdTJBQUZcdTAzMzgiLAogICJucHJlYyI6Ilx1MjI4MCIsCiAgIm5wcmVjZXEiOiJcdTJBQUZcdTAzMzgiLAogICJuckFyciI6Ilx1MjFDRiIsCiAgIm5yYXJyIjoiXHUyMTlCIiwKICAibnJhcnJjIjoiXHUyOTMzXHUwMzM4IiwKICAibnJhcnJ3IjoiXHUyMTlEXHUwMzM4IiwKICAiblJpZ2h0YXJyb3ciOiJcdTIxQ0YiLAogICJucmlnaHRhcnJvdyI6Ilx1MjE5QiIsCiAgIm5ydHJpIjoiXHUyMkVCIiwKICAibnJ0cmllIjoiXHUyMkVEIiwKICAibnNjIjoiXHUyMjgxIiwKICAibnNjY3VlIjoiXHUyMkUxIiwKICAibnNjZSI6Ilx1MkFCMFx1MDMzOCIsCiAgIk5zY3IiOiJcdUQ4MzVcdURDQTkiLAogICJuc2NyIjoiXHVEODM1XHVEQ0MzIiwKICAibnNob3J0bWlkIjoiXHUyMjI0IiwKICAibnNob3J0cGFyYWxsZWwiOiJcdTIyMjYiLAogICJuc2ltIjoiXHUyMjQxIiwKICAibnNpbWUiOiJcdTIyNDQiLAogICJuc2ltZXEiOiJcdTIyNDQiLAogICJuc21pZCI6Ilx1MjIyNCIsCiAgIm5zcGFyIjoiXHUyMjI2IiwKICAibnNxc3ViZSI6Ilx1MjJFMiIsCiAgIm5zcXN1cGUiOiJcdTIyRTMiLAogICJuc3ViIjoiXHUyMjg0IiwKICAibnN1YkUiOiJcdTJBQzVcdTAzMzgiLAogICJuc3ViZSI6Ilx1MjI4OCIsCiAgIm5zdWJzZXQiOiJcdTIyODJcdTIwRDIiLAogICJuc3Vic2V0ZXEiOiJcdTIyODgiLAogICJuc3Vic2V0ZXFxIjoiXHUyQUM1XHUwMzM4IiwKICAibnN1Y2MiOiJcdTIyODEiLAogICJuc3VjY2VxIjoiXHUyQUIwXHUwMzM4IiwKICAibnN1cCI6Ilx1MjI4NSIsCiAgIm5zdXBFIjoiXHUyQUM2XHUwMzM4IiwKICAibnN1cGUiOiJcdTIyODkiLAogICJuc3Vwc2V0IjoiXHUyMjgzXHUyMEQyIiwKICAibnN1cHNldGVxIjoiXHUyMjg5IiwKICAibnN1cHNldGVxcSI6Ilx1MkFDNlx1MDMzOCIsCiAgIm50Z2wiOiJcdTIyNzkiLAogICJOdGlsZGUiOiJcdTAwRDEiLAogICJudGlsZGUiOiJcdTAwRjEiLAogICJudGxnIjoiXHUyMjc4IiwKICAibnRyaWFuZ2xlbGVmdCI6Ilx1MjJFQSIsCiAgIm50cmlhbmdsZWxlZnRlcSI6Ilx1MjJFQyIsCiAgIm50cmlhbmdsZXJpZ2h0IjoiXHUyMkVCIiwKICAibnRyaWFuZ2xlcmlnaHRlcSI6Ilx1MjJFRCIsCiAgIk51IjoiXHUwMzlEIiwKICAibnUiOiJcdTAzQkQiLAogICJudW0iOiJcdTAwMjMiLAogICJudW1lcm8iOiJcdTIxMTYiLAogICJudW1zcCI6Ilx1MjAwNyIsCiAgIm52YXAiOiJcdTIyNERcdTIwRDIiLAogICJuVkRhc2giOiJcdTIyQUYiLAogICJuVmRhc2giOiJcdTIyQUUiLAogICJudkRhc2giOiJcdTIyQUQiLAogICJudmRhc2giOiJcdTIyQUMiLAogICJudmdlIjoiXHUyMjY1XHUyMEQyIiwKICAibnZndCI6Ilx1MDAzRVx1MjBEMiIsCiAgIm52SGFyciI6Ilx1MjkwNCIsCiAgIm52aW5maW4iOiJcdTI5REUiLAogICJudmxBcnIiOiJcdTI5MDIiLAogICJudmxlIjoiXHUyMjY0XHUyMEQyIiwKICAibnZsdCI6Ilx1MDAzQ1x1MjBEMiIsCiAgIm52bHRyaWUiOiJcdTIyQjRcdTIwRDIiLAogICJudnJBcnIiOiJcdTI5MDMiLAogICJudnJ0cmllIjoiXHUyMkI1XHUyMEQyIiwKICAibnZzaW0iOiJcdTIyM0NcdTIwRDIiLAogICJud2FyaGsiOiJcdTI5MjMiLAogICJud0FyciI6Ilx1MjFENiIsCiAgIm53YXJyIjoiXHUyMTk2IiwKICAibndhcnJvdyI6Ilx1MjE5NiIsCiAgIm53bmVhciI6Ilx1MjkyNyIsCiAgIk9hY3V0ZSI6Ilx1MDBEMyIsCiAgIm9hY3V0ZSI6Ilx1MDBGMyIsCiAgIm9hc3QiOiJcdTIyOUIiLAogICJvY2lyIjoiXHUyMjlBIiwKICAiT2NpcmMiOiJcdTAwRDQiLAogICJvY2lyYyI6Ilx1MDBGNCIsCiAgIk9jeSI6Ilx1MDQxRSIsCiAgIm9jeSI6Ilx1MDQzRSIsCiAgIm9kYXNoIjoiXHUyMjlEIiwKICAiT2RibGFjIjoiXHUwMTUwIiwKICAib2RibGFjIjoiXHUwMTUxIiwKICAib2RpdiI6Ilx1MkEzOCIsCiAgIm9kb3QiOiJcdTIyOTkiLAogICJvZHNvbGQiOiJcdTI5QkMiLAogICJPRWxpZyI6Ilx1MDE1MiIsCiAgIm9lbGlnIjoiXHUwMTUzIiwKICAib2ZjaXIiOiJcdTI5QkYiLAogICJPZnIiOiJcdUQ4MzVcdUREMTIiLAogICJvZnIiOiJcdUQ4MzVcdUREMkMiLAogICJvZ29uIjoiXHUwMkRCIiwKICAiT2dyYXZlIjoiXHUwMEQyIiwKICAib2dyYXZlIjoiXHUwMEYyIiwKICAib2d0IjoiXHUyOUMxIiwKICAib2hiYXIiOiJcdTI5QjUiLAogICJvaG0iOiJcdTAzQTkiLAogICJvaW50IjoiXHUyMjJFIiwKICAib2xhcnIiOiJcdTIxQkEiLAogICJvbGNpciI6Ilx1MjlCRSIsCiAgIm9sY3Jvc3MiOiJcdTI5QkIiLAogICJvbGluZSI6Ilx1MjAzRSIsCiAgIm9sdCI6Ilx1MjlDMCIsCiAgIk9tYWNyIjoiXHUwMTRDIiwKICAib21hY3IiOiJcdTAxNEQiLAogICJPbWVnYSI6Ilx1MDNBOSIsCiAgIm9tZWdhIjoiXHUwM0M5IiwKICAiT21pY3JvbiI6Ilx1MDM5RiIsCiAgIm9taWNyb24iOiJcdTAzQkYiLAogICJvbWlkIjoiXHUyOUI2IiwKICAib21pbnVzIjoiXHUyMjk2IiwKICAiT29wZiI6Ilx1RDgzNVx1REQ0NiIsCiAgIm9vcGYiOiJcdUQ4MzVcdURENjAiLAogICJvcGFyIjoiXHUyOUI3IiwKICAiT3BlbkN1cmx5RG91YmxlUXVvdGUiOiJcdTIwMUMiLAogICJPcGVuQ3VybHlRdW90ZSI6Ilx1MjAxOCIsCiAgIm9wZXJwIjoiXHUyOUI5IiwKICAib3BsdXMiOiJcdTIyOTUiLAogICJPciI6Ilx1MkE1NCIsCiAgIm9yIjoiXHUyMjI4IiwKICAib3JhcnIiOiJcdTIxQkIiLAogICJvcmQiOiJcdTJBNUQiLAogICJvcmRlciI6Ilx1MjEzNCIsCiAgIm9yZGVyb2YiOiJcdTIxMzQiLAogICJvcmRmIjoiXHUwMEFBIiwKICAib3JkbSI6Ilx1MDBCQSIsCiAgIm9yaWdvZiI6Ilx1MjJCNiIsCiAgIm9yb3IiOiJcdTJBNTYiLAogICJvcnNsb3BlIjoiXHUyQTU3IiwKICAib3J2IjoiXHUyQTVCIiwKICAib1MiOiJcdTI0QzgiLAogICJPc2NyIjoiXHVEODM1XHVEQ0FBIiwKICAib3NjciI6Ilx1MjEzNCIsCiAgIk9zbGFzaCI6Ilx1MDBEOCIsCiAgIm9zbGFzaCI6Ilx1MDBGOCIsCiAgIm9zb2wiOiJcdTIyOTgiLAogICJPdGlsZGUiOiJcdTAwRDUiLAogICJvdGlsZGUiOiJcdTAwRjUiLAogICJPdGltZXMiOiJcdTJBMzciLAogICJvdGltZXMiOiJcdTIyOTciLAogICJvdGltZXNhcyI6Ilx1MkEzNiIsCiAgIk91bWwiOiJcdTAwRDYiLAogICJvdW1sIjoiXHUwMEY2IiwKICAib3ZiYXIiOiJcdTIzM0QiLAogICJPdmVyQmFyIjoiXHUyMDNFIiwKICAiT3ZlckJyYWNlIjoiXHUyM0RFIiwKICAiT3ZlckJyYWNrZXQiOiJcdTIzQjQiLAogICJPdmVyUGFyZW50aGVzaXMiOiJcdTIzREMiLAogICJwYXIiOiJcdTIyMjUiLAogICJwYXJhIjoiXHUwMEI2IiwKICAicGFyYWxsZWwiOiJcdTIyMjUiLAogICJwYXJzaW0iOiJcdTJBRjMiLAogICJwYXJzbCI6Ilx1MkFGRCIsCiAgInBhcnQiOiJcdTIyMDIiLAogICJQYXJ0aWFsRCI6Ilx1MjIwMiIsCiAgIlBjeSI6Ilx1MDQxRiIsCiAgInBjeSI6Ilx1MDQzRiIsCiAgInBlcmNudCI6Ilx1MDAyNSIsCiAgInBlcmlvZCI6Ilx1MDAyRSIsCiAgInBlcm1pbCI6Ilx1MjAzMCIsCiAgInBlcnAiOiJcdTIyQTUiLAogICJwZXJ0ZW5rIjoiXHUyMDMxIiwKICAiUGZyIjoiXHVEODM1XHVERDEzIiwKICAicGZyIjoiXHVEODM1XHVERDJEIiwKICAiUGhpIjoiXHUwM0E2IiwKICAicGhpIjoiXHUwM0M2IiwKICAicGhpdiI6Ilx1MDNENSIsCiAgInBobW1hdCI6Ilx1MjEzMyIsCiAgInBob25lIjoiXHUyNjBFIiwKICAiUGkiOiJcdTAzQTAiLAogICJwaSI6Ilx1MDNDMCIsCiAgInBpdGNoZm9yayI6Ilx1MjJENCIsCiAgInBpdiI6Ilx1MDNENiIsCiAgInBsYW5jayI6Ilx1MjEwRiIsCiAgInBsYW5ja2giOiJcdTIxMEUiLAogICJwbGFua3YiOiJcdTIxMEYiLAogICJwbHVzIjoiXHUwMDJCIiwKICAicGx1c2FjaXIiOiJcdTJBMjMiLAogICJwbHVzYiI6Ilx1MjI5RSIsCiAgInBsdXNjaXIiOiJcdTJBMjIiLAogICJwbHVzZG8iOiJcdTIyMTQiLAogICJwbHVzZHUiOiJcdTJBMjUiLAogICJwbHVzZSI6Ilx1MkE3MiIsCiAgIlBsdXNNaW51cyI6Ilx1MDBCMSIsCiAgInBsdXNtbiI6Ilx1MDBCMSIsCiAgInBsdXNzaW0iOiJcdTJBMjYiLAogICJwbHVzdHdvIjoiXHUyQTI3IiwKICAicG0iOiJcdTAwQjEiLAogICJQb2luY2FyZXBsYW5lIjoiXHUyMTBDIiwKICAicG9pbnRpbnQiOiJcdTJBMTUiLAogICJQb3BmIjoiXHUyMTE5IiwKICAicG9wZiI6Ilx1RDgzNVx1REQ2MSIsCiAgInBvdW5kIjoiXHUwMEEzIiwKICAiUHIiOiJcdTJBQkIiLAogICJwciI6Ilx1MjI3QSIsCiAgInByYXAiOiJcdTJBQjciLAogICJwcmN1ZSI6Ilx1MjI3QyIsCiAgInByRSI6Ilx1MkFCMyIsCiAgInByZSI6Ilx1MkFBRiIsCiAgInByZWMiOiJcdTIyN0EiLAogICJwcmVjYXBwcm94IjoiXHUyQUI3IiwKICAicHJlY2N1cmx5ZXEiOiJcdTIyN0MiLAogICJQcmVjZWRlcyI6Ilx1MjI3QSIsCiAgIlByZWNlZGVzRXF1YWwiOiJcdTJBQUYiLAogICJQcmVjZWRlc1NsYW50RXF1YWwiOiJcdTIyN0MiLAogICJQcmVjZWRlc1RpbGRlIjoiXHUyMjdFIiwKICAicHJlY2VxIjoiXHUyQUFGIiwKICAicHJlY25hcHByb3giOiJcdTJBQjkiLAogICJwcmVjbmVxcSI6Ilx1MkFCNSIsCiAgInByZWNuc2ltIjoiXHUyMkU4IiwKICAicHJlY3NpbSI6Ilx1MjI3RSIsCiAgIlByaW1lIjoiXHUyMDMzIiwKICAicHJpbWUiOiJcdTIwMzIiLAogICJwcmltZXMiOiJcdTIxMTkiLAogICJwcm5hcCI6Ilx1MkFCOSIsCiAgInBybkUiOiJcdTJBQjUiLAogICJwcm5zaW0iOiJcdTIyRTgiLAogICJwcm9kIjoiXHUyMjBGIiwKICAiUHJvZHVjdCI6Ilx1MjIwRiIsCiAgInByb2ZhbGFyIjoiXHUyMzJFIiwKICAicHJvZmxpbmUiOiJcdTIzMTIiLAogICJwcm9mc3VyZiI6Ilx1MjMxMyIsCiAgInByb3AiOiJcdTIyMUQiLAogICJQcm9wb3J0aW9uIjoiXHUyMjM3IiwKICAiUHJvcG9ydGlvbmFsIjoiXHUyMjFEIiwKICAicHJvcHRvIjoiXHUyMjFEIiwKICAicHJzaW0iOiJcdTIyN0UiLAogICJwcnVyZWwiOiJcdTIyQjAiLAogICJQc2NyIjoiXHVEODM1XHVEQ0FCIiwKICAicHNjciI6Ilx1RDgzNVx1RENDNSIsCiAgIlBzaSI6Ilx1MDNBOCIsCiAgInBzaSI6Ilx1MDNDOCIsCiAgInB1bmNzcCI6Ilx1MjAwOCIsCiAgIlFmciI6Ilx1RDgzNVx1REQxNCIsCiAgInFmciI6Ilx1RDgzNVx1REQyRSIsCiAgInFpbnQiOiJcdTJBMEMiLAogICJRb3BmIjoiXHUyMTFBIiwKICAicW9wZiI6Ilx1RDgzNVx1REQ2MiIsCiAgInFwcmltZSI6Ilx1MjA1NyIsCiAgIlFzY3IiOiJcdUQ4MzVcdURDQUMiLAogICJxc2NyIjoiXHVEODM1XHVEQ0M2IiwKICAicXVhdGVybmlvbnMiOiJcdTIxMEQiLAogICJxdWF0aW50IjoiXHUyQTE2IiwKICAicXVlc3QiOiJcdTAwM0YiLAogICJxdWVzdGVxIjoiXHUyMjVGIiwKICAiUVVPVCI6Ilx1MDAyMiIsCiAgInF1b3QiOiJcdTAwMjIiLAogICJyQWFyciI6Ilx1MjFEQiIsCiAgInJhY2UiOiJcdTIyM0RcdTAzMzEiLAogICJSYWN1dGUiOiJcdTAxNTQiLAogICJyYWN1dGUiOiJcdTAxNTUiLAogICJyYWRpYyI6Ilx1MjIxQSIsCiAgInJhZW1wdHl2IjoiXHUyOUIzIiwKICAiUmFuZyI6Ilx1MjdFQiIsCiAgInJhbmciOiJcdTI3RTkiLAogICJyYW5nZCI6Ilx1Mjk5MiIsCiAgInJhbmdlIjoiXHUyOUE1IiwKICAicmFuZ2xlIjoiXHUyN0U5IiwKICAicmFxdW8iOiJcdTAwQkIiLAogICJSYXJyIjoiXHUyMUEwIiwKICAickFyciI6Ilx1MjFEMiIsCiAgInJhcnIiOiJcdTIxOTIiLAogICJyYXJyYXAiOiJcdTI5NzUiLAogICJyYXJyYiI6Ilx1MjFFNSIsCiAgInJhcnJiZnMiOiJcdTI5MjAiLAogICJyYXJyYyI6Ilx1MjkzMyIsCiAgInJhcnJmcyI6Ilx1MjkxRSIsCiAgInJhcnJoayI6Ilx1MjFBQSIsCiAgInJhcnJscCI6Ilx1MjFBQyIsCiAgInJhcnJwbCI6Ilx1Mjk0NSIsCiAgInJhcnJzaW0iOiJcdTI5NzQiLAogICJSYXJydGwiOiJcdTI5MTYiLAogICJyYXJydGwiOiJcdTIxQTMiLAogICJyYXJydyI6Ilx1MjE5RCIsCiAgInJBdGFpbCI6Ilx1MjkxQyIsCiAgInJhdGFpbCI6Ilx1MjkxQSIsCiAgInJhdGlvIjoiXHUyMjM2IiwKICAicmF0aW9uYWxzIjoiXHUyMTFBIiwKICAiUkJhcnIiOiJcdTI5MTAiLAogICJyQmFyciI6Ilx1MjkwRiIsCiAgInJiYXJyIjoiXHUyOTBEIiwKICAicmJicmsiOiJcdTI3NzMiLAogICJyYnJhY2UiOiJcdTAwN0QiLAogICJyYnJhY2siOiJcdTAwNUQiLAogICJyYnJrZSI6Ilx1Mjk4QyIsCiAgInJicmtzbGQiOiJcdTI5OEUiLAogICJyYnJrc2x1IjoiXHUyOTkwIiwKICAiUmNhcm9uIjoiXHUwMTU4IiwKICAicmNhcm9uIjoiXHUwMTU5IiwKICAiUmNlZGlsIjoiXHUwMTU2IiwKICAicmNlZGlsIjoiXHUwMTU3IiwKICAicmNlaWwiOiJcdTIzMDkiLAogICJyY3ViIjoiXHUwMDdEIiwKICAiUmN5IjoiXHUwNDIwIiwKICAicmN5IjoiXHUwNDQwIiwKICAicmRjYSI6Ilx1MjkzNyIsCiAgInJkbGRoYXIiOiJcdTI5NjkiLAogICJyZHF1byI6Ilx1MjAxRCIsCiAgInJkcXVvciI6Ilx1MjAxRCIsCiAgInJkc2giOiJcdTIxQjMiLAogICJSZSI6Ilx1MjExQyIsCiAgInJlYWwiOiJcdTIxMUMiLAogICJyZWFsaW5lIjoiXHUyMTFCIiwKICAicmVhbHBhcnQiOiJcdTIxMUMiLAogICJyZWFscyI6Ilx1MjExRCIsCiAgInJlY3QiOiJcdTI1QUQiLAogICJSRUciOiJcdTAwQUUiLAogICJyZWciOiJcdTAwQUUiLAogICJSZXZlcnNlRWxlbWVudCI6Ilx1MjIwQiIsCiAgIlJldmVyc2VFcXVpbGlicml1bSI6Ilx1MjFDQiIsCiAgIlJldmVyc2VVcEVxdWlsaWJyaXVtIjoiXHUyOTZGIiwKICAicmZpc2h0IjoiXHUyOTdEIiwKICAicmZsb29yIjoiXHUyMzBCIiwKICAiUmZyIjoiXHUyMTFDIiwKICAicmZyIjoiXHVEODM1XHVERDJGIiwKICAickhhciI6Ilx1Mjk2NCIsCiAgInJoYXJkIjoiXHUyMUMxIiwKICAicmhhcnUiOiJcdTIxQzAiLAogICJyaGFydWwiOiJcdTI5NkMiLAogICJSaG8iOiJcdTAzQTEiLAogICJyaG8iOiJcdTAzQzEiLAogICJyaG92IjoiXHUwM0YxIiwKICAiUmlnaHRBbmdsZUJyYWNrZXQiOiJcdTI3RTkiLAogICJSaWdodEFycm93IjoiXHUyMTkyIiwKICAiUmlnaHRhcnJvdyI6Ilx1MjFEMiIsCiAgInJpZ2h0YXJyb3ciOiJcdTIxOTIiLAogICJSaWdodEFycm93QmFyIjoiXHUyMUU1IiwKICAiUmlnaHRBcnJvd0xlZnRBcnJvdyI6Ilx1MjFDNCIsCiAgInJpZ2h0YXJyb3d0YWlsIjoiXHUyMUEzIiwKICAiUmlnaHRDZWlsaW5nIjoiXHUyMzA5IiwKICAiUmlnaHREb3VibGVCcmFja2V0IjoiXHUyN0U3IiwKICAiUmlnaHREb3duVGVlVmVjdG9yIjoiXHUyOTVEIiwKICAiUmlnaHREb3duVmVjdG9yIjoiXHUyMUMyIiwKICAiUmlnaHREb3duVmVjdG9yQmFyIjoiXHUyOTU1IiwKICAiUmlnaHRGbG9vciI6Ilx1MjMwQiIsCiAgInJpZ2h0aGFycG9vbmRvd24iOiJcdTIxQzEiLAogICJyaWdodGhhcnBvb251cCI6Ilx1MjFDMCIsCiAgInJpZ2h0bGVmdGFycm93cyI6Ilx1MjFDNCIsCiAgInJpZ2h0bGVmdGhhcnBvb25zIjoiXHUyMUNDIiwKICAicmlnaHRyaWdodGFycm93cyI6Ilx1MjFDOSIsCiAgInJpZ2h0c3F1aWdhcnJvdyI6Ilx1MjE5RCIsCiAgIlJpZ2h0VGVlIjoiXHUyMkEyIiwKICAiUmlnaHRUZWVBcnJvdyI6Ilx1MjFBNiIsCiAgIlJpZ2h0VGVlVmVjdG9yIjoiXHUyOTVCIiwKICAicmlnaHR0aHJlZXRpbWVzIjoiXHUyMkNDIiwKICAiUmlnaHRUcmlhbmdsZSI6Ilx1MjJCMyIsCiAgIlJpZ2h0VHJpYW5nbGVCYXIiOiJcdTI5RDAiLAogICJSaWdodFRyaWFuZ2xlRXF1YWwiOiJcdTIyQjUiLAogICJSaWdodFVwRG93blZlY3RvciI6Ilx1Mjk0RiIsCiAgIlJpZ2h0VXBUZWVWZWN0b3IiOiJcdTI5NUMiLAogICJSaWdodFVwVmVjdG9yIjoiXHUyMUJFIiwKICAiUmlnaHRVcFZlY3RvckJhciI6Ilx1Mjk1NCIsCiAgIlJpZ2h0VmVjdG9yIjoiXHUyMUMwIiwKICAiUmlnaHRWZWN0b3JCYXIiOiJcdTI5NTMiLAogICJyaW5nIjoiXHUwMkRBIiwKICAicmlzaW5nZG90c2VxIjoiXHUyMjUzIiwKICAicmxhcnIiOiJcdTIxQzQiLAogICJybGhhciI6Ilx1MjFDQyIsCiAgInJsbSI6Ilx1MjAwRiIsCiAgInJtb3VzdCI6Ilx1MjNCMSIsCiAgInJtb3VzdGFjaGUiOiJcdTIzQjEiLAogICJybm1pZCI6Ilx1MkFFRSIsCiAgInJvYW5nIjoiXHUyN0VEIiwKICAicm9hcnIiOiJcdTIxRkUiLAogICJyb2JyayI6Ilx1MjdFNyIsCiAgInJvcGFyIjoiXHUyOTg2IiwKICAiUm9wZiI6Ilx1MjExRCIsCiAgInJvcGYiOiJcdUQ4MzVcdURENjMiLAogICJyb3BsdXMiOiJcdTJBMkUiLAogICJyb3RpbWVzIjoiXHUyQTM1IiwKICAiUm91bmRJbXBsaWVzIjoiXHUyOTcwIiwKICAicnBhciI6Ilx1MDAyOSIsCiAgInJwYXJndCI6Ilx1Mjk5NCIsCiAgInJwcG9saW50IjoiXHUyQTEyIiwKICAicnJhcnIiOiJcdTIxQzkiLAogICJScmlnaHRhcnJvdyI6Ilx1MjFEQiIsCiAgInJzYXF1byI6Ilx1MjAzQSIsCiAgIlJzY3IiOiJcdTIxMUIiLAogICJyc2NyIjoiXHVEODM1XHVEQ0M3IiwKICAiUnNoIjoiXHUyMUIxIiwKICAicnNoIjoiXHUyMUIxIiwKICAicnNxYiI6Ilx1MDA1RCIsCiAgInJzcXVvIjoiXHUyMDE5IiwKICAicnNxdW9yIjoiXHUyMDE5IiwKICAicnRocmVlIjoiXHUyMkNDIiwKICAicnRpbWVzIjoiXHUyMkNBIiwKICAicnRyaSI6Ilx1MjVCOSIsCiAgInJ0cmllIjoiXHUyMkI1IiwKICAicnRyaWYiOiJcdTI1QjgiLAogICJydHJpbHRyaSI6Ilx1MjlDRSIsCiAgIlJ1bGVEZWxheWVkIjoiXHUyOUY0IiwKICAicnVsdWhhciI6Ilx1Mjk2OCIsCiAgInJ4IjoiXHUyMTFFIiwKICAiU2FjdXRlIjoiXHUwMTVBIiwKICAic2FjdXRlIjoiXHUwMTVCIiwKICAic2JxdW8iOiJcdTIwMUEiLAogICJTYyI6Ilx1MkFCQyIsCiAgInNjIjoiXHUyMjdCIiwKICAic2NhcCI6Ilx1MkFCOCIsCiAgIlNjYXJvbiI6Ilx1MDE2MCIsCiAgInNjYXJvbiI6Ilx1MDE2MSIsCiAgInNjY3VlIjoiXHUyMjdEIiwKICAic2NFIjoiXHUyQUI0IiwKICAic2NlIjoiXHUyQUIwIiwKICAiU2NlZGlsIjoiXHUwMTVFIiwKICAic2NlZGlsIjoiXHUwMTVGIiwKICAiU2NpcmMiOiJcdTAxNUMiLAogICJzY2lyYyI6Ilx1MDE1RCIsCiAgInNjbmFwIjoiXHUyQUJBIiwKICAic2NuRSI6Ilx1MkFCNiIsCiAgInNjbnNpbSI6Ilx1MjJFOSIsCiAgInNjcG9saW50IjoiXHUyQTEzIiwKICAic2NzaW0iOiJcdTIyN0YiLAogICJTY3kiOiJcdTA0MjEiLAogICJzY3kiOiJcdTA0NDEiLAogICJzZG90IjoiXHUyMkM1IiwKICAic2RvdGIiOiJcdTIyQTEiLAogICJzZG90ZSI6Ilx1MkE2NiIsCiAgInNlYXJoayI6Ilx1MjkyNSIsCiAgInNlQXJyIjoiXHUyMUQ4IiwKICAic2VhcnIiOiJcdTIxOTgiLAogICJzZWFycm93IjoiXHUyMTk4IiwKICAic2VjdCI6Ilx1MDBBNyIsCiAgInNlbWkiOiJcdTAwM0IiLAogICJzZXN3YXIiOiJcdTI5MjkiLAogICJzZXRtaW51cyI6Ilx1MjIxNiIsCiAgInNldG1uIjoiXHUyMjE2IiwKICAic2V4dCI6Ilx1MjczNiIsCiAgIlNmciI6Ilx1RDgzNVx1REQxNiIsCiAgInNmciI6Ilx1RDgzNVx1REQzMCIsCiAgInNmcm93biI6Ilx1MjMyMiIsCiAgInNoYXJwIjoiXHUyNjZGIiwKICAiU0hDSGN5IjoiXHUwNDI5IiwKICAic2hjaGN5IjoiXHUwNDQ5IiwKICAiU0hjeSI6Ilx1MDQyOCIsCiAgInNoY3kiOiJcdTA0NDgiLAogICJTaG9ydERvd25BcnJvdyI6Ilx1MjE5MyIsCiAgIlNob3J0TGVmdEFycm93IjoiXHUyMTkwIiwKICAic2hvcnRtaWQiOiJcdTIyMjMiLAogICJzaG9ydHBhcmFsbGVsIjoiXHUyMjI1IiwKICAiU2hvcnRSaWdodEFycm93IjoiXHUyMTkyIiwKICAiU2hvcnRVcEFycm93IjoiXHUyMTkxIiwKICAic2h5IjoiXHUwMEFEIiwKICAiU2lnbWEiOiJcdTAzQTMiLAogICJzaWdtYSI6Ilx1MDNDMyIsCiAgInNpZ21hZiI6Ilx1MDNDMiIsCiAgInNpZ21hdiI6Ilx1MDNDMiIsCiAgInNpbSI6Ilx1MjIzQyIsCiAgInNpbWRvdCI6Ilx1MkE2QSIsCiAgInNpbWUiOiJcdTIyNDMiLAogICJzaW1lcSI6Ilx1MjI0MyIsCiAgInNpbWciOiJcdTJBOUUiLAogICJzaW1nRSI6Ilx1MkFBMCIsCiAgInNpbWwiOiJcdTJBOUQiLAogICJzaW1sRSI6Ilx1MkE5RiIsCiAgInNpbW5lIjoiXHUyMjQ2IiwKICAic2ltcGx1cyI6Ilx1MkEyNCIsCiAgInNpbXJhcnIiOiJcdTI5NzIiLAogICJzbGFyciI6Ilx1MjE5MCIsCiAgIlNtYWxsQ2lyY2xlIjoiXHUyMjE4IiwKICAic21hbGxzZXRtaW51cyI6Ilx1MjIxNiIsCiAgInNtYXNocCI6Ilx1MkEzMyIsCiAgInNtZXBhcnNsIjoiXHUyOUU0IiwKICAic21pZCI6Ilx1MjIyMyIsCiAgInNtaWxlIjoiXHUyMzIzIiwKICAic210IjoiXHUyQUFBIiwKICAic210ZSI6Ilx1MkFBQyIsCiAgInNtdGVzIjoiXHUyQUFDXHVGRTAwIiwKICAiU09GVGN5IjoiXHUwNDJDIiwKICAic29mdGN5IjoiXHUwNDRDIiwKICAic29sIjoiXHUwMDJGIiwKICAic29sYiI6Ilx1MjlDNCIsCiAgInNvbGJhciI6Ilx1MjMzRiIsCiAgIlNvcGYiOiJcdUQ4MzVcdURENEEiLAogICJzb3BmIjoiXHVEODM1XHVERDY0IiwKICAic3BhZGVzIjoiXHUyNjYwIiwKICAic3BhZGVzdWl0IjoiXHUyNjYwIiwKICAic3BhciI6Ilx1MjIyNSIsCiAgInNxY2FwIjoiXHUyMjkzIiwKICAic3FjYXBzIjoiXHUyMjkzXHVGRTAwIiwKICAic3FjdXAiOiJcdTIyOTQiLAogICJzcWN1cHMiOiJcdTIyOTRcdUZFMDAiLAogICJTcXJ0IjoiXHUyMjFBIiwKICAic3FzdWIiOiJcdTIyOEYiLAogICJzcXN1YmUiOiJcdTIyOTEiLAogICJzcXN1YnNldCI6Ilx1MjI4RiIsCiAgInNxc3Vic2V0ZXEiOiJcdTIyOTEiLAogICJzcXN1cCI6Ilx1MjI5MCIsCiAgInNxc3VwZSI6Ilx1MjI5MiIsCiAgInNxc3Vwc2V0IjoiXHUyMjkwIiwKICAic3FzdXBzZXRlcSI6Ilx1MjI5MiIsCiAgInNxdSI6Ilx1MjVBMSIsCiAgIlNxdWFyZSI6Ilx1MjVBMSIsCiAgInNxdWFyZSI6Ilx1MjVBMSIsCiAgIlNxdWFyZUludGVyc2VjdGlvbiI6Ilx1MjI5MyIsCiAgIlNxdWFyZVN1YnNldCI6Ilx1MjI4RiIsCiAgIlNxdWFyZVN1YnNldEVxdWFsIjoiXHUyMjkxIiwKICAiU3F1YXJlU3VwZXJzZXQiOiJcdTIyOTAiLAogICJTcXVhcmVTdXBlcnNldEVxdWFsIjoiXHUyMjkyIiwKICAiU3F1YXJlVW5pb24iOiJcdTIyOTQiLAogICJzcXVhcmYiOiJcdTI1QUEiLAogICJzcXVmIjoiXHUyNUFBIiwKICAic3JhcnIiOiJcdTIxOTIiLAogICJTc2NyIjoiXHVEODM1XHVEQ0FFIiwKICAic3NjciI6Ilx1RDgzNVx1RENDOCIsCiAgInNzZXRtbiI6Ilx1MjIxNiIsCiAgInNzbWlsZSI6Ilx1MjMyMyIsCiAgInNzdGFyZiI6Ilx1MjJDNiIsCiAgIlN0YXIiOiJcdTIyQzYiLAogICJzdGFyIjoiXHUyNjA2IiwKICAic3RhcmYiOiJcdTI2MDUiLAogICJzdHJhaWdodGVwc2lsb24iOiJcdTAzRjUiLAogICJzdHJhaWdodHBoaSI6Ilx1MDNENSIsCiAgInN0cm5zIjoiXHUwMEFGIiwKICAiU3ViIjoiXHUyMkQwIiwKICAic3ViIjoiXHUyMjgyIiwKICAic3ViZG90IjoiXHUyQUJEIiwKICAic3ViRSI6Ilx1MkFDNSIsCiAgInN1YmUiOiJcdTIyODYiLAogICJzdWJlZG90IjoiXHUyQUMzIiwKICAic3VibXVsdCI6Ilx1MkFDMSIsCiAgInN1Ym5FIjoiXHUyQUNCIiwKICAic3VibmUiOiJcdTIyOEEiLAogICJzdWJwbHVzIjoiXHUyQUJGIiwKICAic3VicmFyciI6Ilx1Mjk3OSIsCiAgIlN1YnNldCI6Ilx1MjJEMCIsCiAgInN1YnNldCI6Ilx1MjI4MiIsCiAgInN1YnNldGVxIjoiXHUyMjg2IiwKICAic3Vic2V0ZXFxIjoiXHUyQUM1IiwKICAiU3Vic2V0RXF1YWwiOiJcdTIyODYiLAogICJzdWJzZXRuZXEiOiJcdTIyOEEiLAogICJzdWJzZXRuZXFxIjoiXHUyQUNCIiwKICAic3Vic2ltIjoiXHUyQUM3IiwKICAic3Vic3ViIjoiXHUyQUQ1IiwKICAic3Vic3VwIjoiXHUyQUQzIiwKICAic3VjYyI6Ilx1MjI3QiIsCiAgInN1Y2NhcHByb3giOiJcdTJBQjgiLAogICJzdWNjY3VybHllcSI6Ilx1MjI3RCIsCiAgIlN1Y2NlZWRzIjoiXHUyMjdCIiwKICAiU3VjY2VlZHNFcXVhbCI6Ilx1MkFCMCIsCiAgIlN1Y2NlZWRzU2xhbnRFcXVhbCI6Ilx1MjI3RCIsCiAgIlN1Y2NlZWRzVGlsZGUiOiJcdTIyN0YiLAogICJzdWNjZXEiOiJcdTJBQjAiLAogICJzdWNjbmFwcHJveCI6Ilx1MkFCQSIsCiAgInN1Y2NuZXFxIjoiXHUyQUI2IiwKICAic3VjY25zaW0iOiJcdTIyRTkiLAogICJzdWNjc2ltIjoiXHUyMjdGIiwKICAiU3VjaFRoYXQiOiJcdTIyMEIiLAogICJTdW0iOiJcdTIyMTEiLAogICJzdW0iOiJcdTIyMTEiLAogICJzdW5nIjoiXHUyNjZBIiwKICAiU3VwIjoiXHUyMkQxIiwKICAic3VwIjoiXHUyMjgzIiwKICAic3VwMSI6Ilx1MDBCOSIsCiAgInN1cDIiOiJcdTAwQjIiLAogICJzdXAzIjoiXHUwMEIzIiwKICAic3VwZG90IjoiXHUyQUJFIiwKICAic3VwZHN1YiI6Ilx1MkFEOCIsCiAgInN1cEUiOiJcdTJBQzYiLAogICJzdXBlIjoiXHUyMjg3IiwKICAic3VwZWRvdCI6Ilx1MkFDNCIsCiAgIlN1cGVyc2V0IjoiXHUyMjgzIiwKICAiU3VwZXJzZXRFcXVhbCI6Ilx1MjI4NyIsCiAgInN1cGhzb2wiOiJcdTI3QzkiLAogICJzdXBoc3ViIjoiXHUyQUQ3IiwKICAic3VwbGFyciI6Ilx1Mjk3QiIsCiAgInN1cG11bHQiOiJcdTJBQzIiLAogICJzdXBuRSI6Ilx1MkFDQyIsCiAgInN1cG5lIjoiXHUyMjhCIiwKICAic3VwcGx1cyI6Ilx1MkFDMCIsCiAgIlN1cHNldCI6Ilx1MjJEMSIsCiAgInN1cHNldCI6Ilx1MjI4MyIsCiAgInN1cHNldGVxIjoiXHUyMjg3IiwKICAic3Vwc2V0ZXFxIjoiXHUyQUM2IiwKICAic3Vwc2V0bmVxIjoiXHUyMjhCIiwKICAic3Vwc2V0bmVxcSI6Ilx1MkFDQyIsCiAgInN1cHNpbSI6Ilx1MkFDOCIsCiAgInN1cHN1YiI6Ilx1MkFENCIsCiAgInN1cHN1cCI6Ilx1MkFENiIsCiAgInN3YXJoayI6Ilx1MjkyNiIsCiAgInN3QXJyIjoiXHUyMUQ5IiwKICAic3dhcnIiOiJcdTIxOTkiLAogICJzd2Fycm93IjoiXHUyMTk5IiwKICAic3dud2FyIjoiXHUyOTJBIiwKICAic3psaWciOiJcdTAwREYiLAogICJUYWIiOiJcdTAwMDkiLAogICJ0YXJnZXQiOiJcdTIzMTYiLAogICJUYXUiOiJcdTAzQTQiLAogICJ0YXUiOiJcdTAzQzQiLAogICJ0YnJrIjoiXHUyM0I0IiwKICAiVGNhcm9uIjoiXHUwMTY0IiwKICAidGNhcm9uIjoiXHUwMTY1IiwKICAiVGNlZGlsIjoiXHUwMTYyIiwKICAidGNlZGlsIjoiXHUwMTYzIiwKICAiVGN5IjoiXHUwNDIyIiwKICAidGN5IjoiXHUwNDQyIiwKICAidGRvdCI6Ilx1MjBEQiIsCiAgInRlbHJlYyI6Ilx1MjMxNSIsCiAgIlRmciI6Ilx1RDgzNVx1REQxNyIsCiAgInRmciI6Ilx1RDgzNVx1REQzMSIsCiAgInRoZXJlNCI6Ilx1MjIzNCIsCiAgIlRoZXJlZm9yZSI6Ilx1MjIzNCIsCiAgInRoZXJlZm9yZSI6Ilx1MjIzNCIsCiAgIlRoZXRhIjoiXHUwMzk4IiwKICAidGhldGEiOiJcdTAzQjgiLAogICJ0aGV0YXN5bSI6Ilx1MDNEMSIsCiAgInRoZXRhdiI6Ilx1MDNEMSIsCiAgInRoaWNrYXBwcm94IjoiXHUyMjQ4IiwKICAidGhpY2tzaW0iOiJcdTIyM0MiLAogICJUaGlja1NwYWNlIjoiXHUyMDVGXHUyMDBBIiwKICAidGhpbnNwIjoiXHUyMDA5IiwKICAiVGhpblNwYWNlIjoiXHUyMDA5IiwKICAidGhrYXAiOiJcdTIyNDgiLAogICJ0aGtzaW0iOiJcdTIyM0MiLAogICJUSE9STiI6Ilx1MDBERSIsCiAgInRob3JuIjoiXHUwMEZFIiwKICAiVGlsZGUiOiJcdTIyM0MiLAogICJ0aWxkZSI6Ilx1MDJEQyIsCiAgIlRpbGRlRXF1YWwiOiJcdTIyNDMiLAogICJUaWxkZUZ1bGxFcXVhbCI6Ilx1MjI0NSIsCiAgIlRpbGRlVGlsZGUiOiJcdTIyNDgiLAogICJ0aW1lcyI6Ilx1MDBENyIsCiAgInRpbWVzYiI6Ilx1MjJBMCIsCiAgInRpbWVzYmFyIjoiXHUyQTMxIiwKICAidGltZXNkIjoiXHUyQTMwIiwKICAidGludCI6Ilx1MjIyRCIsCiAgInRvZWEiOiJcdTI5MjgiLAogICJ0b3AiOiJcdTIyQTQiLAogICJ0b3Bib3QiOiJcdTIzMzYiLAogICJ0b3BjaXIiOiJcdTJBRjEiLAogICJUb3BmIjoiXHVEODM1XHVERDRCIiwKICAidG9wZiI6Ilx1RDgzNVx1REQ2NSIsCiAgInRvcGZvcmsiOiJcdTJBREEiLAogICJ0b3NhIjoiXHUyOTI5IiwKICAidHByaW1lIjoiXHUyMDM0IiwKICAiVFJBREUiOiJcdTIxMjIiLAogICJ0cmFkZSI6Ilx1MjEyMiIsCiAgInRyaWFuZ2xlIjoiXHUyNUI1IiwKICAidHJpYW5nbGVkb3duIjoiXHUyNUJGIiwKICAidHJpYW5nbGVsZWZ0IjoiXHUyNUMzIiwKICAidHJpYW5nbGVsZWZ0ZXEiOiJcdTIyQjQiLAogICJ0cmlhbmdsZXEiOiJcdTIyNUMiLAogICJ0cmlhbmdsZXJpZ2h0IjoiXHUyNUI5IiwKICAidHJpYW5nbGVyaWdodGVxIjoiXHUyMkI1IiwKICAidHJpZG90IjoiXHUyNUVDIiwKICAidHJpZSI6Ilx1MjI1QyIsCiAgInRyaW1pbnVzIjoiXHUyQTNBIiwKICAiVHJpcGxlRG90IjoiXHUyMERCIiwKICAidHJpcGx1cyI6Ilx1MkEzOSIsCiAgInRyaXNiIjoiXHUyOUNEIiwKICAidHJpdGltZSI6Ilx1MkEzQiIsCiAgInRycGV6aXVtIjoiXHUyM0UyIiwKICAiVHNjciI6Ilx1RDgzNVx1RENBRiIsCiAgInRzY3IiOiJcdUQ4MzVcdURDQzkiLAogICJUU2N5IjoiXHUwNDI2IiwKICAidHNjeSI6Ilx1MDQ0NiIsCiAgIlRTSGN5IjoiXHUwNDBCIiwKICAidHNoY3kiOiJcdTA0NUIiLAogICJUc3Ryb2siOiJcdTAxNjYiLAogICJ0c3Ryb2siOiJcdTAxNjciLAogICJ0d2l4dCI6Ilx1MjI2QyIsCiAgInR3b2hlYWRsZWZ0YXJyb3ciOiJcdTIxOUUiLAogICJ0d29oZWFkcmlnaHRhcnJvdyI6Ilx1MjFBMCIsCiAgIlVhY3V0ZSI6Ilx1MDBEQSIsCiAgInVhY3V0ZSI6Ilx1MDBGQSIsCiAgIlVhcnIiOiJcdTIxOUYiLAogICJ1QXJyIjoiXHUyMUQxIiwKICAidWFyciI6Ilx1MjE5MSIsCiAgIlVhcnJvY2lyIjoiXHUyOTQ5IiwKICAiVWJyY3kiOiJcdTA0MEUiLAogICJ1YnJjeSI6Ilx1MDQ1RSIsCiAgIlVicmV2ZSI6Ilx1MDE2QyIsCiAgInVicmV2ZSI6Ilx1MDE2RCIsCiAgIlVjaXJjIjoiXHUwMERCIiwKICAidWNpcmMiOiJcdTAwRkIiLAogICJVY3kiOiJcdTA0MjMiLAogICJ1Y3kiOiJcdTA0NDMiLAogICJ1ZGFyciI6Ilx1MjFDNSIsCiAgIlVkYmxhYyI6Ilx1MDE3MCIsCiAgInVkYmxhYyI6Ilx1MDE3MSIsCiAgInVkaGFyIjoiXHUyOTZFIiwKICAidWZpc2h0IjoiXHUyOTdFIiwKICAiVWZyIjoiXHVEODM1XHVERDE4IiwKICAidWZyIjoiXHVEODM1XHVERDMyIiwKICAiVWdyYXZlIjoiXHUwMEQ5IiwKICAidWdyYXZlIjoiXHUwMEY5IiwKICAidUhhciI6Ilx1Mjk2MyIsCiAgInVoYXJsIjoiXHUyMUJGIiwKICAidWhhcnIiOiJcdTIxQkUiLAogICJ1aGJsayI6Ilx1MjU4MCIsCiAgInVsY29ybiI6Ilx1MjMxQyIsCiAgInVsY29ybmVyIjoiXHUyMzFDIiwKICAidWxjcm9wIjoiXHUyMzBGIiwKICAidWx0cmkiOiJcdTI1RjgiLAogICJVbWFjciI6Ilx1MDE2QSIsCiAgInVtYWNyIjoiXHUwMTZCIiwKICAidW1sIjoiXHUwMEE4IiwKICAiVW5kZXJCYXIiOiJcdTAwNUYiLAogICJVbmRlckJyYWNlIjoiXHUyM0RGIiwKICAiVW5kZXJCcmFja2V0IjoiXHUyM0I1IiwKICAiVW5kZXJQYXJlbnRoZXNpcyI6Ilx1MjNERCIsCiAgIlVuaW9uIjoiXHUyMkMzIiwKICAiVW5pb25QbHVzIjoiXHUyMjhFIiwKICAiVW9nb24iOiJcdTAxNzIiLAogICJ1b2dvbiI6Ilx1MDE3MyIsCiAgIlVvcGYiOiJcdUQ4MzVcdURENEMiLAogICJ1b3BmIjoiXHVEODM1XHVERDY2IiwKICAiVXBBcnJvdyI6Ilx1MjE5MSIsCiAgIlVwYXJyb3ciOiJcdTIxRDEiLAogICJ1cGFycm93IjoiXHUyMTkxIiwKICAiVXBBcnJvd0JhciI6Ilx1MjkxMiIsCiAgIlVwQXJyb3dEb3duQXJyb3ciOiJcdTIxQzUiLAogICJVcERvd25BcnJvdyI6Ilx1MjE5NSIsCiAgIlVwZG93bmFycm93IjoiXHUyMUQ1IiwKICAidXBkb3duYXJyb3ciOiJcdTIxOTUiLAogICJVcEVxdWlsaWJyaXVtIjoiXHUyOTZFIiwKICAidXBoYXJwb29ubGVmdCI6Ilx1MjFCRiIsCiAgInVwaGFycG9vbnJpZ2h0IjoiXHUyMUJFIiwKICAidXBsdXMiOiJcdTIyOEUiLAogICJVcHBlckxlZnRBcnJvdyI6Ilx1MjE5NiIsCiAgIlVwcGVyUmlnaHRBcnJvdyI6Ilx1MjE5NyIsCiAgIlVwc2kiOiJcdTAzRDIiLAogICJ1cHNpIjoiXHUwM0M1IiwKICAidXBzaWgiOiJcdTAzRDIiLAogICJVcHNpbG9uIjoiXHUwM0E1IiwKICAidXBzaWxvbiI6Ilx1MDNDNSIsCiAgIlVwVGVlIjoiXHUyMkE1IiwKICAiVXBUZWVBcnJvdyI6Ilx1MjFBNSIsCiAgInVwdXBhcnJvd3MiOiJcdTIxQzgiLAogICJ1cmNvcm4iOiJcdTIzMUQiLAogICJ1cmNvcm5lciI6Ilx1MjMxRCIsCiAgInVyY3JvcCI6Ilx1MjMwRSIsCiAgIlVyaW5nIjoiXHUwMTZFIiwKICAidXJpbmciOiJcdTAxNkYiLAogICJ1cnRyaSI6Ilx1MjVGOSIsCiAgIlVzY3IiOiJcdUQ4MzVcdURDQjAiLAogICJ1c2NyIjoiXHVEODM1XHVEQ0NBIiwKICAidXRkb3QiOiJcdTIyRjAiLAogICJVdGlsZGUiOiJcdTAxNjgiLAogICJ1dGlsZGUiOiJcdTAxNjkiLAogICJ1dHJpIjoiXHUyNUI1IiwKICAidXRyaWYiOiJcdTI1QjQiLAogICJ1dWFyciI6Ilx1MjFDOCIsCiAgIlV1bWwiOiJcdTAwREMiLAogICJ1dW1sIjoiXHUwMEZDIiwKICAidXdhbmdsZSI6Ilx1MjlBNyIsCiAgInZhbmdydCI6Ilx1Mjk5QyIsCiAgInZhcmVwc2lsb24iOiJcdTAzRjUiLAogICJ2YXJrYXBwYSI6Ilx1MDNGMCIsCiAgInZhcm5vdGhpbmciOiJcdTIyMDUiLAogICJ2YXJwaGkiOiJcdTAzRDUiLAogICJ2YXJwaSI6Ilx1MDNENiIsCiAgInZhcnByb3B0byI6Ilx1MjIxRCIsCiAgInZBcnIiOiJcdTIxRDUiLAogICJ2YXJyIjoiXHUyMTk1IiwKICAidmFycmhvIjoiXHUwM0YxIiwKICAidmFyc2lnbWEiOiJcdTAzQzIiLAogICJ2YXJzdWJzZXRuZXEiOiJcdTIyOEFcdUZFMDAiLAogICJ2YXJzdWJzZXRuZXFxIjoiXHUyQUNCXHVGRTAwIiwKICAidmFyc3Vwc2V0bmVxIjoiXHUyMjhCXHVGRTAwIiwKICAidmFyc3Vwc2V0bmVxcSI6Ilx1MkFDQ1x1RkUwMCIsCiAgInZhcnRoZXRhIjoiXHUwM0QxIiwKICAidmFydHJpYW5nbGVsZWZ0IjoiXHUyMkIyIiwKICAidmFydHJpYW5nbGVyaWdodCI6Ilx1MjJCMyIsCiAgIlZiYXIiOiJcdTJBRUIiLAogICJ2QmFyIjoiXHUyQUU4IiwKICAidkJhcnYiOiJcdTJBRTkiLAogICJWY3kiOiJcdTA0MTIiLAogICJ2Y3kiOiJcdTA0MzIiLAogICJWRGFzaCI6Ilx1MjJBQiIsCiAgIlZkYXNoIjoiXHUyMkE5IiwKICAidkRhc2giOiJcdTIyQTgiLAogICJ2ZGFzaCI6Ilx1MjJBMiIsCiAgIlZkYXNobCI6Ilx1MkFFNiIsCiAgIlZlZSI6Ilx1MjJDMSIsCiAgInZlZSI6Ilx1MjIyOCIsCiAgInZlZWJhciI6Ilx1MjJCQiIsCiAgInZlZWVxIjoiXHUyMjVBIiwKICAidmVsbGlwIjoiXHUyMkVFIiwKICAiVmVyYmFyIjoiXHUyMDE2IiwKICAidmVyYmFyIjoiXHUwMDdDIiwKICAiVmVydCI6Ilx1MjAxNiIsCiAgInZlcnQiOiJcdTAwN0MiLAogICJWZXJ0aWNhbEJhciI6Ilx1MjIyMyIsCiAgIlZlcnRpY2FsTGluZSI6Ilx1MDA3QyIsCiAgIlZlcnRpY2FsU2VwYXJhdG9yIjoiXHUyNzU4IiwKICAiVmVydGljYWxUaWxkZSI6Ilx1MjI0MCIsCiAgIlZlcnlUaGluU3BhY2UiOiJcdTIwMEEiLAogICJWZnIiOiJcdUQ4MzVcdUREMTkiLAogICJ2ZnIiOiJcdUQ4MzVcdUREMzMiLAogICJ2bHRyaSI6Ilx1MjJCMiIsCiAgInZuc3ViIjoiXHUyMjgyXHUyMEQyIiwKICAidm5zdXAiOiJcdTIyODNcdTIwRDIiLAogICJWb3BmIjoiXHVEODM1XHVERDREIiwKICAidm9wZiI6Ilx1RDgzNVx1REQ2NyIsCiAgInZwcm9wIjoiXHUyMjFEIiwKICAidnJ0cmkiOiJcdTIyQjMiLAogICJWc2NyIjoiXHVEODM1XHVEQ0IxIiwKICAidnNjciI6Ilx1RDgzNVx1RENDQiIsCiAgInZzdWJuRSI6Ilx1MkFDQlx1RkUwMCIsCiAgInZzdWJuZSI6Ilx1MjI4QVx1RkUwMCIsCiAgInZzdXBuRSI6Ilx1MkFDQ1x1RkUwMCIsCiAgInZzdXBuZSI6Ilx1MjI4Qlx1RkUwMCIsCiAgIlZ2ZGFzaCI6Ilx1MjJBQSIsCiAgInZ6aWd6YWciOiJcdTI5OUEiLAogICJXY2lyYyI6Ilx1MDE3NCIsCiAgIndjaXJjIjoiXHUwMTc1IiwKICAid2VkYmFyIjoiXHUyQTVGIiwKICAiV2VkZ2UiOiJcdTIyQzAiLAogICJ3ZWRnZSI6Ilx1MjIyNyIsCiAgIndlZGdlcSI6Ilx1MjI1OSIsCiAgIndlaWVycCI6Ilx1MjExOCIsCiAgIldmciI6Ilx1RDgzNVx1REQxQSIsCiAgIndmciI6Ilx1RDgzNVx1REQzNCIsCiAgIldvcGYiOiJcdUQ4MzVcdURENEUiLAogICJ3b3BmIjoiXHVEODM1XHVERDY4IiwKICAid3AiOiJcdTIxMTgiLAogICJ3ciI6Ilx1MjI0MCIsCiAgIndyZWF0aCI6Ilx1MjI0MCIsCiAgIldzY3IiOiJcdUQ4MzVcdURDQjIiLAogICJ3c2NyIjoiXHVEODM1XHVEQ0NDIiwKICAieGNhcCI6Ilx1MjJDMiIsCiAgInhjaXJjIjoiXHUyNUVGIiwKICAieGN1cCI6Ilx1MjJDMyIsCiAgInhkdHJpIjoiXHUyNUJEIiwKICAiWGZyIjoiXHVEODM1XHVERDFCIiwKICAieGZyIjoiXHVEODM1XHVERDM1IiwKICAieGhBcnIiOiJcdTI3RkEiLAogICJ4aGFyciI6Ilx1MjdGNyIsCiAgIlhpIjoiXHUwMzlFIiwKICAieGkiOiJcdTAzQkUiLAogICJ4bEFyciI6Ilx1MjdGOCIsCiAgInhsYXJyIjoiXHUyN0Y1IiwKICAieG1hcCI6Ilx1MjdGQyIsCiAgInhuaXMiOiJcdTIyRkIiLAogICJ4b2RvdCI6Ilx1MkEwMCIsCiAgIlhvcGYiOiJcdUQ4MzVcdURENEYiLAogICJ4b3BmIjoiXHVEODM1XHVERDY5IiwKICAieG9wbHVzIjoiXHUyQTAxIiwKICAieG90aW1lIjoiXHUyQTAyIiwKICAieHJBcnIiOiJcdTI3RjkiLAogICJ4cmFyciI6Ilx1MjdGNiIsCiAgIlhzY3IiOiJcdUQ4MzVcdURDQjMiLAogICJ4c2NyIjoiXHVEODM1XHVEQ0NEIiwKICAieHNxY3VwIjoiXHUyQTA2IiwKICAieHVwbHVzIjoiXHUyQTA0IiwKICAieHV0cmkiOiJcdTI1QjMiLAogICJ4dmVlIjoiXHUyMkMxIiwKICAieHdlZGdlIjoiXHUyMkMwIiwKICAiWWFjdXRlIjoiXHUwMEREIiwKICAieWFjdXRlIjoiXHUwMEZEIiwKICAiWUFjeSI6Ilx1MDQyRiIsCiAgInlhY3kiOiJcdTA0NEYiLAogICJZY2lyYyI6Ilx1MDE3NiIsCiAgInljaXJjIjoiXHUwMTc3IiwKICAiWWN5IjoiXHUwNDJCIiwKICAieWN5IjoiXHUwNDRCIiwKICAieWVuIjoiXHUwMEE1IiwKICAiWWZyIjoiXHVEODM1XHVERDFDIiwKICAieWZyIjoiXHVEODM1XHVERDM2IiwKICAiWUljeSI6Ilx1MDQwNyIsCiAgInlpY3kiOiJcdTA0NTciLAogICJZb3BmIjoiXHVEODM1XHVERDUwIiwKICAieW9wZiI6Ilx1RDgzNVx1REQ2QSIsCiAgIllzY3IiOiJcdUQ4MzVcdURDQjQiLAogICJ5c2NyIjoiXHVEODM1XHVEQ0NFIiwKICAiWVVjeSI6Ilx1MDQyRSIsCiAgInl1Y3kiOiJcdTA0NEUiLAogICJZdW1sIjoiXHUwMTc4IiwKICAieXVtbCI6Ilx1MDBGRiIsCiAgIlphY3V0ZSI6Ilx1MDE3OSIsCiAgInphY3V0ZSI6Ilx1MDE3QSIsCiAgIlpjYXJvbiI6Ilx1MDE3RCIsCiAgInpjYXJvbiI6Ilx1MDE3RSIsCiAgIlpjeSI6Ilx1MDQxNyIsCiAgInpjeSI6Ilx1MDQzNyIsCiAgIlpkb3QiOiJcdTAxN0IiLAogICJ6ZG90IjoiXHUwMTdDIiwKICAiemVldHJmIjoiXHUyMTI4IiwKICAiWmVyb1dpZHRoU3BhY2UiOiJcdTIwMEIiLAogICJaZXRhIjoiXHUwMzk2IiwKICAiemV0YSI6Ilx1MDNCNiIsCiAgIlpmciI6Ilx1MjEyOCIsCiAgInpmciI6Ilx1RDgzNVx1REQzNyIsCiAgIlpIY3kiOiJcdTA0MTYiLAogICJ6aGN5IjoiXHUwNDM2IiwKICAiemlncmFyciI6Ilx1MjFERCIsCiAgIlpvcGYiOiJcdTIxMjQiLAogICJ6b3BmIjoiXHVEODM1XHVERDZCIiwKICAiWnNjciI6Ilx1RDgzNVx1RENCNSIsCiAgInpzY3IiOiJcdUQ4MzVcdURDQ0YiLAogICJ6d2oiOiJcdTIwMEQiLAogICJ6d25qIjoiXHUyMDBDIgp9OwoKfSx7fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIExpc3Qgb2YgdmFsaWQgaHRtbCBibG9ja3MgbmFtZXMsIGFjY29ydGluZyB0byBjb21tb25tYXJrIHNwZWMKLy8gaHR0cDovL2pnbS5naXRodWIuaW8vQ29tbW9uTWFyay9zcGVjLmh0bWwjaHRtbC1ibG9ja3MKCid1c2Ugc3RyaWN0JzsKCnZhciBodG1sX2Jsb2NrcyA9IHt9OwoKWwogICdhcnRpY2xlJywKICAnYXNpZGUnLAogICdidXR0b24nLAogICdibG9ja3F1b3RlJywKICAnYm9keScsCiAgJ2NhbnZhcycsCiAgJ2NhcHRpb24nLAogICdjb2wnLAogICdjb2xncm91cCcsCiAgJ2RkJywKICAnZGl2JywKICAnZGwnLAogICdkdCcsCiAgJ2VtYmVkJywKICAnZmllbGRzZXQnLAogICdmaWdjYXB0aW9uJywKICAnZmlndXJlJywKICAnZm9vdGVyJywKICAnZm9ybScsCiAgJ2gxJywKICAnaDInLAogICdoMycsCiAgJ2g0JywKICAnaDUnLAogICdoNicsCiAgJ2hlYWRlcicsCiAgJ2hncm91cCcsCiAgJ2hyJywKICAnaWZyYW1lJywKICAnbGknLAogICdtYXAnLAogICdvYmplY3QnLAogICdvbCcsCiAgJ291dHB1dCcsCiAgJ3AnLAogICdwcmUnLAogICdwcm9ncmVzcycsCiAgJ3NjcmlwdCcsCiAgJ3NlY3Rpb24nLAogICdzdHlsZScsCiAgJ3RhYmxlJywKICAndGJvZHknLAogICd0ZCcsCiAgJ3RleHRhcmVhJywKICAndGZvb3QnLAogICd0aCcsCiAgJ3RyJywKICAndGhlYWQnLAogICd1bCcsCiAgJ3ZpZGVvJwpdLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsgaHRtbF9ibG9ja3NbbmFtZV0gPSB0cnVlOyB9KTsKCgptb2R1bGUuZXhwb3J0cyA9IGh0bWxfYmxvY2tzOwoKfSx7fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFJlZ2V4cHMgdG8gbWF0Y2ggaHRtbCBlbGVtZW50cwoKJ3VzZSBzdHJpY3QnOwoKCmZ1bmN0aW9uIHJlcGxhY2UocmVnZXgsIG9wdGlvbnMpIHsKICByZWdleCA9IHJlZ2V4LnNvdXJjZTsKICBvcHRpb25zID0gb3B0aW9ucyB8fCAnJzsKCiAgcmV0dXJuIGZ1bmN0aW9uIHNlbGYobmFtZSwgdmFsKSB7CiAgICBpZiAoIW5hbWUpIHsKICAgICAgcmV0dXJuIG5ldyBSZWdFeHAocmVnZXgsIG9wdGlvbnMpOwogICAgfQogICAgdmFsID0gdmFsLnNvdXJjZSB8fCB2YWw7CiAgICByZWdleCA9IHJlZ2V4LnJlcGxhY2UobmFtZSwgdmFsKTsKICAgIHJldHVybiBzZWxmOwogIH07Cn0KCgp2YXIgYXR0cl9uYW1lICAgICA9IC9bYS16QS1aXzpdW2EtekEtWjAtOTouXy1dKi87Cgp2YXIgdW5xdW90ZWQgICAgICA9IC9bXiInPTw+YFx4MDAtXHgyMF0rLzsKdmFyIHNpbmdsZV9xdW90ZWQgPSAvJ1teJ10qJy87CnZhciBkb3VibGVfcXVvdGVkID0gLyJbXiJdKiIvOwoKLyplc2xpbnQgbm8tc3BhY2VkLWZ1bmM6MCovCnZhciBhdHRyX3ZhbHVlICA9IHJlcGxhY2UoLyg/OnVucXVvdGVkfHNpbmdsZV9xdW90ZWR8ZG91YmxlX3F1b3RlZCkvKQogICAgICAgICAgICAgICAgICAgICgndW5xdW90ZWQnLCB1bnF1b3RlZCkKICAgICAgICAgICAgICAgICAgICAoJ3NpbmdsZV9xdW90ZWQnLCBzaW5nbGVfcXVvdGVkKQogICAgICAgICAgICAgICAgICAgICgnZG91YmxlX3F1b3RlZCcsIGRvdWJsZV9xdW90ZWQpCiAgICAgICAgICAgICAgICAgICAgKCk7Cgp2YXIgYXR0cmlidXRlICAgPSByZXBsYWNlKC8oPzpccythdHRyX25hbWUoPzpccyo9XHMqYXR0cl92YWx1ZSk/KS8pCiAgICAgICAgICAgICAgICAgICAgKCdhdHRyX25hbWUnLCBhdHRyX25hbWUpCiAgICAgICAgICAgICAgICAgICAgKCdhdHRyX3ZhbHVlJywgYXR0cl92YWx1ZSkKICAgICAgICAgICAgICAgICAgICAoKTsKCnZhciBvcGVuX3RhZyAgICA9IHJlcGxhY2UoLzxbQS1aYS16XVtBLVphLXowLTldKmF0dHJpYnV0ZSpccypcLz8+LykKICAgICAgICAgICAgICAgICAgICAoJ2F0dHJpYnV0ZScsIGF0dHJpYnV0ZSkKICAgICAgICAgICAgICAgICAgICAoKTsKCnZhciBjbG9zZV90YWcgICA9IC88XC9bQS1aYS16XVtBLVphLXowLTldKlxzKj4vOwp2YXIgY29tbWVudCAgICAgPSAvPCEtLShbXi1dK3xbLV1bXi1dKykqLS0+LzsKdmFyIHByb2Nlc3NpbmcgID0gLzxbP10uKj9bP10+LzsKdmFyIGRlY2xhcmF0aW9uID0gLzwhW0EtWl0rXHMrW14+XSo+LzsKdmFyIGNkYXRhICAgICAgID0gLzwhXFtDREFUQVxbKFteXF1dK3xcXVteXF1dfFxdXF1bXj5dKSpcXVxdPi87Cgp2YXIgSFRNTF9UQUdfUkUgPSByZXBsYWNlKC9eKD86b3Blbl90YWd8Y2xvc2VfdGFnfGNvbW1lbnR8cHJvY2Vzc2luZ3xkZWNsYXJhdGlvbnxjZGF0YSkvKQogICgnb3Blbl90YWcnLCBvcGVuX3RhZykKICAoJ2Nsb3NlX3RhZycsIGNsb3NlX3RhZykKICAoJ2NvbW1lbnQnLCBjb21tZW50KQogICgncHJvY2Vzc2luZycsIHByb2Nlc3NpbmcpCiAgKCdkZWNsYXJhdGlvbicsIGRlY2xhcmF0aW9uKQogICgnY2RhdGEnLCBjZGF0YSkKICAoKTsKCgptb2R1bGUuZXhwb3J0cy5IVE1MX1RBR19SRSA9IEhUTUxfVEFHX1JFOwoKfSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIExpc3Qgb2YgdmFsaWQgdXJsIHNjaGVtYXMsIGFjY29ydGluZyB0byBjb21tb25tYXJrIHNwZWMKLy8gaHR0cDovL2pnbS5naXRodWIuaW8vQ29tbW9uTWFyay9zcGVjLmh0bWwjYXV0b2xpbmtzCgondXNlIHN0cmljdCc7CgoKbW9kdWxlLmV4cG9ydHMgPSBbCiAgJ2NvYXAnLAogICdkb2knLAogICdqYXZhc2NyaXB0JywKICAnYWFhJywKICAnYWFhcycsCiAgJ2Fib3V0JywKICAnYWNhcCcsCiAgJ2NhcCcsCiAgJ2NpZCcsCiAgJ2NyaWQnLAogICdkYXRhJywKICAnZGF2JywKICAnZGljdCcsCiAgJ2RucycsCiAgJ2ZpbGUnLAogICdmdHAnLAogICdnZW8nLAogICdnbycsCiAgJ2dvcGhlcicsCiAgJ2gzMjMnLAogICdodHRwJywKICAnaHR0cHMnLAogICdpYXgnLAogICdpY2FwJywKICAnaW0nLAogICdpbWFwJywKICAnaW5mbycsCiAgJ2lwcCcsCiAgJ2lyaXMnLAogICdpcmlzLmJlZXAnLAogICdpcmlzLnhwYycsCiAgJ2lyaXMueHBjcycsCiAgJ2lyaXMubHd6JywKICAnbGRhcCcsCiAgJ21haWx0bycsCiAgJ21pZCcsCiAgJ21zcnAnLAogICdtc3JwcycsCiAgJ210cXAnLAogICdtdXBkYXRlJywKICAnbmV3cycsCiAgJ25mcycsCiAgJ25pJywKICAnbmloJywKICAnbm50cCcsCiAgJ29wYXF1ZWxvY2t0b2tlbicsCiAgJ3BvcCcsCiAgJ3ByZXMnLAogICdydHNwJywKICAnc2VydmljZScsCiAgJ3Nlc3Npb24nLAogICdzaHR0cCcsCiAgJ3NpZXZlJywKICAnc2lwJywKICAnc2lwcycsCiAgJ3NtcycsCiAgJ3NubXAnLAogICdzb2FwLmJlZXAnLAogICdzb2FwLmJlZXBzJywKICAndGFnJywKICAndGVsJywKICAndGVsbmV0JywKICAndGZ0cCcsCiAgJ3RoaXNtZXNzYWdlJywKICAndG4zMjcwJywKICAndGlwJywKICAndHYnLAogICd1cm4nLAogICd2ZW1taScsCiAgJ3dzJywKICAnd3NzJywKICAneGNvbicsCiAgJ3hjb24tdXNlcmlkJywKICAneG1scnBjLmJlZXAnLAogICd4bWxycGMuYmVlcHMnLAogICd4bXBwJywKICAnejM5LjUwcicsCiAgJ3ozOS41MHMnLAogICdhZGl1bXh0cmEnLAogICdhZnAnLAogICdhZnMnLAogICdhaW0nLAogICdhcHQnLAogICdhdHRhY2htZW50JywKICAnYXcnLAogICdiZXNoYXJlJywKICAnYml0Y29pbicsCiAgJ2JvbG8nLAogICdjYWxsdG8nLAogICdjaHJvbWUnLAogICdjaHJvbWUtZXh0ZW5zaW9uJywKICAnY29tLWV2ZW50YnJpdGUtYXR0ZW5kZWUnLAogICdjb250ZW50JywKICAnY3ZzJywKICAnZGxuYS1wbGF5c2luZ2xlJywKICAnZGxuYS1wbGF5Y29udGFpbmVyJywKICAnZHRuJywKICAnZHZiJywKICAnZWQyaycsCiAgJ2ZhY2V0aW1lJywKICAnZmVlZCcsCiAgJ2ZpbmdlcicsCiAgJ2Zpc2gnLAogICdnZycsCiAgJ2dpdCcsCiAgJ2dpem1vcHJvamVjdCcsCiAgJ2d0YWxrJywKICAnaGNwJywKICAnaWNvbicsCiAgJ2lwbicsCiAgJ2lyYycsCiAgJ2lyYzYnLAogICdpcmNzJywKICAnaXRtcycsCiAgJ2phcicsCiAgJ2ptcycsCiAgJ2tleXBhcmMnLAogICdsYXN0Zm0nLAogICdsZGFwcycsCiAgJ21hZ25ldCcsCiAgJ21hcHMnLAogICdtYXJrZXQnLAogICdtZXNzYWdlJywKICAnbW1zJywKICAnbXMtaGVscCcsCiAgJ21zbmltJywKICAnbXVtYmxlJywKICAnbXZuJywKICAnbm90ZXMnLAogICdvaWQnLAogICdwYWxtJywKICAncGFwYXJhenppJywKICAncGxhdGZvcm0nLAogICdwcm94eScsCiAgJ3BzeWMnLAogICdxdWVyeScsCiAgJ3JlcycsCiAgJ3Jlc291cmNlJywKICAncm1pJywKICAncnN5bmMnLAogICdydG1wJywKICAnc2Vjb25kbGlmZScsCiAgJ3NmdHAnLAogICdzZ24nLAogICdza3lwZScsCiAgJ3NtYicsCiAgJ3NvbGRhdCcsCiAgJ3Nwb3RpZnknLAogICdzc2gnLAogICdzdGVhbScsCiAgJ3N2bicsCiAgJ3RlYW1zcGVhaycsCiAgJ3RoaW5ncycsCiAgJ3VkcCcsCiAgJ3VucmVhbCcsCiAgJ3V0MjAwNCcsCiAgJ3ZlbnRyaWxvJywKICAndmlldy1zb3VyY2UnLAogICd3ZWJjYWwnLAogICd3dGFpJywKICAnd3ljaXd5ZycsCiAgJ3hmaXJlJywKICAneHJpJywKICAneW1zZ3InCl07Cgp9LHt9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKLyoqCiAqIFV0aWxpdHkgZnVuY3Rpb25zCiAqLwoKZnVuY3Rpb24gdHlwZU9mKG9iaikgewogIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKTsKfQoKZnVuY3Rpb24gaXNTdHJpbmcob2JqKSB7CiAgcmV0dXJuIHR5cGVPZihvYmopID09PSAnW29iamVjdCBTdHJpbmddJzsKfQoKdmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7CgpmdW5jdGlvbiBoYXMob2JqZWN0LCBrZXkpIHsKICByZXR1cm4gb2JqZWN0CiAgICA/IGhhc093bi5jYWxsKG9iamVjdCwga2V5KQogICAgOiBmYWxzZTsKfQoKLy8gRXh0ZW5kIG9iamVjdHMKLy8KZnVuY3Rpb24gYXNzaWduKG9iaiAvKmZyb20xLCBmcm9tMiwgZnJvbTMsIC4uLiovKSB7CiAgdmFyIHNvdXJjZXMgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7CgogIHNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlKSB7CiAgICBpZiAoIXNvdXJjZSkgeyByZXR1cm47IH0KCiAgICBpZiAodHlwZW9mIHNvdXJjZSAhPT0gJ29iamVjdCcpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzb3VyY2UgKyAnbXVzdCBiZSBvYmplY3QnKTsKICAgIH0KCiAgICBPYmplY3Qua2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICBvYmpba2V5XSA9IHNvdXJjZVtrZXldOwogICAgfSk7CiAgfSk7CgogIHJldHVybiBvYmo7Cn0KCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgp2YXIgVU5FU0NBUEVfTURfUkUgPSAvXFwoW1xcISIjJCUmJygpKissLlwvOjs8PT4/QFtcXV5fYHt8fX4tXSkvZzsKCmZ1bmN0aW9uIHVuZXNjYXBlTWQoc3RyKSB7CiAgaWYgKHN0ci5pbmRleE9mKCdcXCcpIDwgMCkgeyByZXR1cm4gc3RyOyB9CiAgcmV0dXJuIHN0ci5yZXBsYWNlKFVORVNDQVBFX01EX1JFLCAnJDEnKTsKfQoKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCmZ1bmN0aW9uIGlzVmFsaWRFbnRpdHlDb2RlKGMpIHsKICAvKmVzbGludCBuby1iaXR3aXNlOjAqLwogIC8vIGJyb2tlbiBzZXF1ZW5jZQogIGlmIChjID49IDB4RDgwMCAmJiBjIDw9IDB4REZGRikgeyByZXR1cm4gZmFsc2U7IH0KICAvLyBuZXZlciB1c2VkCiAgaWYgKGMgPj0gMHhGREQwICYmIGMgPD0gMHhGREVGKSB7IHJldHVybiBmYWxzZTsgfQogIGlmICgoYyAmIDB4RkZGRikgPT09IDB4RkZGRiB8fCAoYyAmIDB4RkZGRikgPT09IDB4RkZGRSkgeyByZXR1cm4gZmFsc2U7IH0KICAvLyBjb250cm9sIGNvZGVzCiAgaWYgKGMgPj0gMHgwMCAmJiBjIDw9IDB4MDgpIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKGMgPT09IDB4MEIpIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKGMgPj0gMHgwRSAmJiBjIDw9IDB4MUYpIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKGMgPj0gMHg3RiAmJiBjIDw9IDB4OUYpIHsgcmV0dXJuIGZhbHNlOyB9CiAgLy8gb3V0IG9mIHJhbmdlCiAgaWYgKGMgPiAweDEwRkZGRikgeyByZXR1cm4gZmFsc2U7IH0KICByZXR1cm4gdHJ1ZTsKfQoKZnVuY3Rpb24gZnJvbUNvZGVQb2ludChjKSB7CiAgLyplc2xpbnQgbm8tYml0d2lzZTowKi8KICBpZiAoYyA+IDB4ZmZmZikgewogICAgYyAtPSAweDEwMDAwOwogICAgdmFyIHN1cnJvZ2F0ZTEgPSAweGQ4MDAgKyAoYyA+PiAxMCksCiAgICAgICAgc3Vycm9nYXRlMiA9IDB4ZGMwMCArIChjICYgMHgzZmYpOwoKICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHN1cnJvZ2F0ZTEsIHN1cnJvZ2F0ZTIpOwogIH0KICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjKTsKfQoKdmFyIE5BTUVEX0VOVElUWV9SRSAgID0gLyYoW2EteiNdW2EtejAtOV17MSwzMX0pOy9naTsKdmFyIERJR0lUQUxfRU5USVRZX1RFU1RfUkUgPSAvXiMoKD86eFthLWYwLTldezEsOH18WzAtOV17MSw4fSkpL2k7CnZhciBlbnRpdGllcyA9IHJlcXVpcmUoJy4vZW50aXRpZXMnKTsKCmZ1bmN0aW9uIHJlcGxhY2VFbnRpdHlQYXR0ZXJuKG1hdGNoLCBuYW1lKSB7CiAgdmFyIGNvZGUgPSAwOwoKICBpZiAoaGFzKGVudGl0aWVzLCBuYW1lKSkgewogICAgcmV0dXJuIGVudGl0aWVzW25hbWVdOwogIH0gZWxzZSBpZiAobmFtZS5jaGFyQ29kZUF0KDApID09PSAweDIzLyogIyAqLyAmJiBESUdJVEFMX0VOVElUWV9URVNUX1JFLnRlc3QobmFtZSkpIHsKICAgIGNvZGUgPSBuYW1lWzFdLnRvTG93ZXJDYXNlKCkgPT09ICd4JyA/CiAgICAgIHBhcnNlSW50KG5hbWUuc2xpY2UoMiksIDE2KQogICAgOgogICAgICBwYXJzZUludChuYW1lLnNsaWNlKDEpLCAxMCk7CiAgICBpZiAoaXNWYWxpZEVudGl0eUNvZGUoY29kZSkpIHsKICAgICAgcmV0dXJuIGZyb21Db2RlUG9pbnQoY29kZSk7CiAgICB9CiAgfQogIHJldHVybiBtYXRjaDsKfQoKZnVuY3Rpb24gcmVwbGFjZUVudGl0aWVzKHN0cikgewogIGlmIChzdHIuaW5kZXhPZignJicpIDwgMCkgeyByZXR1cm4gc3RyOyB9CgogIHJldHVybiBzdHIucmVwbGFjZShOQU1FRF9FTlRJVFlfUkUsIHJlcGxhY2VFbnRpdHlQYXR0ZXJuKTsKfQoKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCnZhciBIVE1MX0VTQ0FQRV9URVNUX1JFID0gL1smPD4iXS87CnZhciBIVE1MX0VTQ0FQRV9SRVBMQUNFX1JFID0gL1smPD4iXS9nOwp2YXIgSFRNTF9SRVBMQUNFTUVOVFMgPSB7CiAgJyYnOiAnJmFtcDsnLAogICc8JzogJyZsdDsnLAogICc+JzogJyZndDsnLAogICciJzogJyZxdW90OycKfTsKCmZ1bmN0aW9uIHJlcGxhY2VVbnNhZmVDaGFyKGNoKSB7CiAgcmV0dXJuIEhUTUxfUkVQTEFDRU1FTlRTW2NoXTsKfQoKZnVuY3Rpb24gZXNjYXBlSHRtbChzdHIpIHsKICBpZiAoSFRNTF9FU0NBUEVfVEVTVF9SRS50ZXN0KHN0cikpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZShIVE1MX0VTQ0FQRV9SRVBMQUNFX1JFLCByZXBsYWNlVW5zYWZlQ2hhcik7CiAgfQogIHJldHVybiBzdHI7Cn0KCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgpleHBvcnRzLmFzc2lnbiAgICAgICAgICAgID0gYXNzaWduOwpleHBvcnRzLmlzU3RyaW5nICAgICAgICAgID0gaXNTdHJpbmc7CmV4cG9ydHMuaGFzICAgICAgICAgICAgICAgPSBoYXM7CmV4cG9ydHMudW5lc2NhcGVNZCAgICAgICAgPSB1bmVzY2FwZU1kOwpleHBvcnRzLmlzVmFsaWRFbnRpdHlDb2RlID0gaXNWYWxpZEVudGl0eUNvZGU7CmV4cG9ydHMuZnJvbUNvZGVQb2ludCAgICAgPSBmcm9tQ29kZVBvaW50OwpleHBvcnRzLnJlcGxhY2VFbnRpdGllcyAgID0gcmVwbGFjZUVudGl0aWVzOwpleHBvcnRzLmVzY2FwZUh0bWwgICAgICAgID0gZXNjYXBlSHRtbDsKCn0seyIuL2VudGl0aWVzIjoxfV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIENvbW1vbm1hcmsgZGVmYXVsdCBvcHRpb25zCgondXNlIHN0cmljdCc7CgoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgb3B0aW9uczogewogICAgaHRtbDogICAgICAgICB0cnVlLCAgICAgICAgIC8vIEVuYWJsZSBIVE1MIHRhZ3MgaW4gc291cmNlCiAgICB4aHRtbE91dDogICAgIHRydWUsICAgICAgICAgLy8gVXNlICcvJyB0byBjbG9zZSBzaW5nbGUgdGFncyAoPGJyIC8+KQogICAgYnJlYWtzOiAgICAgICBmYWxzZSwgICAgICAgIC8vIENvbnZlcnQgJ1xuJyBpbiBwYXJhZ3JhcGhzIGludG8gPGJyPgogICAgbGFuZ1ByZWZpeDogICAnbGFuZ3VhZ2UtJywgIC8vIENTUyBsYW5ndWFnZSBwcmVmaXggZm9yIGZlbmNlZCBibG9ja3MKICAgIGxpbmtpZnk6ICAgICAgZmFsc2UsICAgICAgICAvLyBhdXRvY29udmVydCBVUkwtbGlrZSB0ZXh0cyB0byBsaW5rcwogICAgbGlua1RhcmdldDogICAnJywgICAgICAgICAgIC8vIHNldCB0YXJnZXQgdG8gb3BlbiBsaW5rIGluCgogICAgLy8gRW5hYmxlIHNvbWUgbGFuZ3VhZ2UtbmV1dHJhbCByZXBsYWNlbWVudHMgKyBxdW90ZXMgYmVhdXRpZmljYXRpb24KICAgIHR5cG9ncmFwaGVyOiAgZmFsc2UsCgogICAgLy8gRG91YmxlICsgc2luZ2xlIHF1b3RlcyByZXBsYWNlbWVudCBwYWlycywgd2hlbiB0eXBvZ3JhcGhlciBlbmFibGVkLAogICAgLy8gYW5kIHNtYXJ0cXVvdGVzIG9uLiBTZXQgZG91YmxlcyB0byAnwqvCuycgZm9yIFJ1c3NpYW4sICfigJ7igJwnIGZvciBHZXJtYW4uCiAgICBxdW90ZXM6ICfigJzigJ3igJjigJknLAoKICAgIC8vIEhpZ2hsaWdodGVyIGZ1bmN0aW9uLiBTaG91bGQgcmV0dXJuIGVzY2FwZWQgSFRNTCwKICAgIC8vIG9yICcnIGlmIGlucHV0IG5vdCBjaGFuZ2VkCiAgICAvLwogICAgLy8gZnVuY3Rpb24gKC8qc3RyLCBsYW5nKi8pIHsgcmV0dXJuICcnOyB9CiAgICAvLwogICAgaGlnaGxpZ2h0OiBudWxsLAoKICAgIG1heE5lc3Rpbmc6ICAgMjAgICAgICAgICAgICAvLyBJbnRlcm5hbCBwcm90ZWN0aW9uLCByZWN1cnNpb24gbGltaXQKICB9LAoKICBjb21wb25lbnRzOiB7CgogICAgY29yZTogewogICAgICBydWxlczogWwogICAgICAgICdibG9jaycsCiAgICAgICAgJ2lubGluZScsCiAgICAgICAgJ3JlZmVyZW5jZXMnLAogICAgICAgICdhYmJyMicKICAgICAgXQogICAgfSwKCiAgICBibG9jazogewogICAgICBydWxlczogWwogICAgICAgICdibG9ja3F1b3RlJywKICAgICAgICAnY29kZScsCiAgICAgICAgJ2ZlbmNlcycsCiAgICAgICAgJ2hlYWRpbmcnLAogICAgICAgICdocicsCiAgICAgICAgJ2h0bWxibG9jaycsCiAgICAgICAgJ2xoZWFkaW5nJywKICAgICAgICAnbGlzdCcsCiAgICAgICAgJ3BhcmFncmFwaCcKICAgICAgXQogICAgfSwKCiAgICBpbmxpbmU6IHsKICAgICAgcnVsZXM6IFsKICAgICAgICAnYXV0b2xpbmsnLAogICAgICAgICdiYWNrdGlja3MnLAogICAgICAgICdlbXBoYXNpcycsCiAgICAgICAgJ2VudGl0eScsCiAgICAgICAgJ2VzY2FwZScsCiAgICAgICAgJ2h0bWx0YWcnLAogICAgICAgICdsaW5rcycsCiAgICAgICAgJ25ld2xpbmUnLAogICAgICAgICd0ZXh0JwogICAgICBdCiAgICB9CiAgfQp9OwoKfSx7fV0sNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFJlbWFya2FibGUgZGVmYXVsdCBvcHRpb25zCgondXNlIHN0cmljdCc7CgoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgb3B0aW9uczogewogICAgaHRtbDogICAgICAgICBmYWxzZSwgICAgICAgIC8vIEVuYWJsZSBIVE1MIHRhZ3MgaW4gc291cmNlCiAgICB4aHRtbE91dDogICAgIGZhbHNlLCAgICAgICAgLy8gVXNlICcvJyB0byBjbG9zZSBzaW5nbGUgdGFncyAoPGJyIC8+KQogICAgYnJlYWtzOiAgICAgICBmYWxzZSwgICAgICAgIC8vIENvbnZlcnQgJ1xuJyBpbiBwYXJhZ3JhcGhzIGludG8gPGJyPgogICAgbGFuZ1ByZWZpeDogICAnbGFuZ3VhZ2UtJywgIC8vIENTUyBsYW5ndWFnZSBwcmVmaXggZm9yIGZlbmNlZCBibG9ja3MKICAgIGxpbmtpZnk6ICAgICAgZmFsc2UsICAgICAgICAvLyBhdXRvY29udmVydCBVUkwtbGlrZSB0ZXh0cyB0byBsaW5rcwogICAgbGlua1RhcmdldDogICAnJywgICAgICAgICAgIC8vIHNldCB0YXJnZXQgdG8gb3BlbiBsaW5rIGluCgogICAgLy8gRW5hYmxlIHNvbWUgbGFuZ3VhZ2UtbmV1dHJhbCByZXBsYWNlbWVudHMgKyBxdW90ZXMgYmVhdXRpZmljYXRpb24KICAgIHR5cG9ncmFwaGVyOiAgZmFsc2UsCgogICAgLy8gRG91YmxlICsgc2luZ2xlIHF1b3RlcyByZXBsYWNlbWVudCBwYWlycywgd2hlbiB0eXBvZ3JhcGhlciBlbmFibGVkLAogICAgLy8gYW5kIHNtYXJ0cXVvdGVzIG9uLiBTZXQgZG91YmxlcyB0byAnwqvCuycgZm9yIFJ1c3NpYW4sICfigJ7igJwnIGZvciBHZXJtYW4uCiAgICBxdW90ZXM6ICfigJzigJ3igJjigJknLAoKICAgIC8vIEhpZ2hsaWdodGVyIGZ1bmN0aW9uLiBTaG91bGQgcmV0dXJuIGVzY2FwZWQgSFRNTCwKICAgIC8vIG9yICcnIGlmIGlucHV0IG5vdCBjaGFuZ2VkCiAgICAvLwogICAgLy8gZnVuY3Rpb24gKC8qc3RyLCBsYW5nKi8pIHsgcmV0dXJuICcnOyB9CiAgICAvLwogICAgaGlnaGxpZ2h0OiBudWxsLAoKICAgIG1heE5lc3Rpbmc6ICAgMjAgICAgICAgICAgICAvLyBJbnRlcm5hbCBwcm90ZWN0aW9uLCByZWN1cnNpb24gbGltaXQKICB9LAoKICBjb21wb25lbnRzOiB7CgogICAgY29yZTogewogICAgICBydWxlczogWwogICAgICAgICdibG9jaycsCiAgICAgICAgJ2lubGluZScsCiAgICAgICAgJ3JlZmVyZW5jZXMnLAogICAgICAgICdyZXBsYWNlbWVudHMnLAogICAgICAgICdsaW5raWZ5JywKICAgICAgICAnc21hcnRxdW90ZXMnLAogICAgICAgICdyZWZlcmVuY2VzJywKICAgICAgICAnYWJicjInLAogICAgICAgICdmb290bm90ZV90YWlsJwogICAgICBdCiAgICB9LAoKICAgIGJsb2NrOiB7CiAgICAgIHJ1bGVzOiBbCiAgICAgICAgJ2Jsb2NrcXVvdGUnLAogICAgICAgICdjb2RlJywKICAgICAgICAnZmVuY2VzJywKICAgICAgICAnaGVhZGluZycsCiAgICAgICAgJ2hyJywKICAgICAgICAnaHRtbGJsb2NrJywKICAgICAgICAnbGhlYWRpbmcnLAogICAgICAgICdsaXN0JywKICAgICAgICAncGFyYWdyYXBoJywKICAgICAgICAndGFibGUnCiAgICAgIF0KICAgIH0sCgogICAgaW5saW5lOiB7CiAgICAgIHJ1bGVzOiBbCiAgICAgICAgJ2F1dG9saW5rJywKICAgICAgICAnYmFja3RpY2tzJywKICAgICAgICAnZGVsJywKICAgICAgICAnZW1waGFzaXMnLAogICAgICAgICdlbnRpdHknLAogICAgICAgICdlc2NhcGUnLAogICAgICAgICdmb290bm90ZV9yZWYnLAogICAgICAgICdodG1sdGFnJywKICAgICAgICAnbGlua3MnLAogICAgICAgICduZXdsaW5lJywKICAgICAgICAndGV4dCcKICAgICAgXQogICAgfQogIH0KfTsKCn0se31dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBSZW1hcmthYmxlIGRlZmF1bHQgb3B0aW9ucwoKJ3VzZSBzdHJpY3QnOwoKCm1vZHVsZS5leHBvcnRzID0gewogIG9wdGlvbnM6IHsKICAgIGh0bWw6ICAgICAgICAgZmFsc2UsICAgICAgICAvLyBFbmFibGUgSFRNTCB0YWdzIGluIHNvdXJjZQogICAgeGh0bWxPdXQ6ICAgICBmYWxzZSwgICAgICAgIC8vIFVzZSAnLycgdG8gY2xvc2Ugc2luZ2xlIHRhZ3MgKDxiciAvPikKICAgIGJyZWFrczogICAgICAgZmFsc2UsICAgICAgICAvLyBDb252ZXJ0ICdcbicgaW4gcGFyYWdyYXBocyBpbnRvIDxicj4KICAgIGxhbmdQcmVmaXg6ICAgJ2xhbmd1YWdlLScsICAvLyBDU1MgbGFuZ3VhZ2UgcHJlZml4IGZvciBmZW5jZWQgYmxvY2tzCiAgICBsaW5raWZ5OiAgICAgIGZhbHNlLCAgICAgICAgLy8gYXV0b2NvbnZlcnQgVVJMLWxpa2UgdGV4dHMgdG8gbGlua3MKICAgIGxpbmtUYXJnZXQ6ICAgJycsICAgICAgICAgICAvLyBzZXQgdGFyZ2V0IHRvIG9wZW4gbGluayBpbgoKICAgIC8vIEVuYWJsZSBzb21lIGxhbmd1YWdlLW5ldXRyYWwgcmVwbGFjZW1lbnRzICsgcXVvdGVzIGJlYXV0aWZpY2F0aW9uCiAgICB0eXBvZ3JhcGhlcjogIGZhbHNlLAoKICAgIC8vIERvdWJsZSArIHNpbmdsZSBxdW90ZXMgcmVwbGFjZW1lbnQgcGFpcnMsIHdoZW4gdHlwb2dyYXBoZXIgZW5hYmxlZCwKICAgIC8vIGFuZCBzbWFydHF1b3RlcyBvbi4gU2V0IGRvdWJsZXMgdG8gJ8KrwrsnIGZvciBSdXNzaWFuLCAn4oCe4oCcJyBmb3IgR2VybWFuLgogICAgcXVvdGVzOiAgICAgICAn4oCc4oCd4oCY4oCZJywKCiAgICAvLyBIaWdobGlnaHRlciBmdW5jdGlvbi4gU2hvdWxkIHJldHVybiBlc2NhcGVkIEhUTUwsCiAgICAvLyBvciAnJyBpZiBpbnB1dCBub3QgY2hhbmdlZAogICAgLy8KICAgIC8vIGZ1bmN0aW9uICgvKnN0ciwgbGFuZyovKSB7IHJldHVybiAnJzsgfQogICAgLy8KICAgIGhpZ2hsaWdodDogICAgIG51bGwsCgogICAgbWF4TmVzdGluZzogICAgMjAgICAgICAgICAgICAvLyBJbnRlcm5hbCBwcm90ZWN0aW9uLCByZWN1cnNpb24gbGltaXQKICB9LAoKICBjb21wb25lbnRzOiB7CiAgICAvLyBEb24ndCByZXN0cmljdCBjb3JlL2Jsb2NrL2lubGluZSBydWxlcwogICAgY29yZToge30sCiAgICBibG9jazoge30sCiAgICBpbmxpbmU6IHt9CiAgfQp9OwoKfSx7fV0sOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciByZXBsYWNlRW50aXRpZXMgPSByZXF1aXJlKCcuLi9jb21tb24vdXRpbHMnKS5yZXBsYWNlRW50aXRpZXM7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZUxpbmsodXJsKSB7CiAgdmFyIG5vcm1hbGl6ZWQgPSByZXBsYWNlRW50aXRpZXModXJsKTsKICAvLyBXZSBzaG91bGRuJ3QgY2FyZSBhYm91dCB0aGUgcmVzdWx0IG9mIG1hbGZvcm1lZCBVUklzLAogIC8vIGFuZCBzaG91bGQgbm90IHRocm93IGFuIGV4Y2VwdGlvbi4KICB0cnkgewogICAgbm9ybWFsaXplZCA9IGRlY29kZVVSSShub3JtYWxpemVkKTsKICB9IGNhdGNoIChlcnIpIHt9CiAgcmV0dXJuIGVuY29kZVVSSShub3JtYWxpemVkKTsKfTsKCn0seyIuLi9jb21tb24vdXRpbHMiOjV9XSwxMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbm9ybWFsaXplUmVmZXJlbmNlKHN0cikgewogIC8vIHVzZSAudG9VcHBlckNhc2UoKSBpbnN0ZWFkIG9mIC50b0xvd2VyQ2FzZSgpCiAgLy8gaGVyZSB0byBhdm9pZCBhIGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZQogIC8vIG1lbWJlcnMgKG1vc3Qgbm90YWJseSwgYF9fcHJvdG9fX2ApCiAgcmV0dXJuIHN0ci50cmltKCkucmVwbGFjZSgvXHMrL2csICcgJykudG9VcHBlckNhc2UoKTsKfTsKCn0se31dLDExOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKCnZhciBub3JtYWxpemVMaW5rID0gcmVxdWlyZSgnLi9ub3JtYWxpemVfbGluaycpOwp2YXIgdW5lc2NhcGVNZCAgICA9IHJlcXVpcmUoJy4uL2NvbW1vbi91dGlscycpLnVuZXNjYXBlTWQ7CgovKioKICogUGFyc2UgbGluayBkZXN0aW5hdGlvbgogKgogKiAgIC0gb24gc3VjY2VzcyBpdCByZXR1cm5zIGEgc3RyaW5nIGFuZCB1cGRhdGVzIHN0YXRlLnBvczsKICogICAtIG9uIGZhaWx1cmUgaXQgcmV0dXJucyBudWxsCiAqCiAqIEBwYXJhbSAge09iamVjdH0gc3RhdGUKICogQHBhcmFtICB7TnVtYmVyfSBwb3MKICogQGFwaSBwcml2YXRlCiAqLwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZUxpbmtEZXN0aW5hdGlvbihzdGF0ZSwgcG9zKSB7CiAgdmFyIGNvZGUsIGxldmVsLCBsaW5rLAogICAgICBzdGFydCA9IHBvcywKICAgICAgbWF4ID0gc3RhdGUucG9zTWF4OwoKICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gMHgzQyAvKiA8ICovKSB7CiAgICBwb3MrKzsKICAgIHdoaWxlIChwb3MgPCBtYXgpIHsKICAgICAgY29kZSA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcyk7CiAgICAgIGlmIChjb2RlID09PSAweDBBIC8qIFxuICovKSB7IHJldHVybiBmYWxzZTsgfQogICAgICBpZiAoY29kZSA9PT0gMHgzRSAvKiA+ICovKSB7CiAgICAgICAgbGluayA9IG5vcm1hbGl6ZUxpbmsodW5lc2NhcGVNZChzdGF0ZS5zcmMuc2xpY2Uoc3RhcnQgKyAxLCBwb3MpKSk7CiAgICAgICAgaWYgKCFzdGF0ZS5wYXJzZXIudmFsaWRhdGVMaW5rKGxpbmspKSB7IHJldHVybiBmYWxzZTsgfQogICAgICAgIHN0YXRlLnBvcyA9IHBvcyArIDE7CiAgICAgICAgc3RhdGUubGlua0NvbnRlbnQgPSBsaW5rOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGlmIChjb2RlID09PSAweDVDIC8qIFwgKi8gJiYgcG9zICsgMSA8IG1heCkgewogICAgICAgIHBvcyArPSAyOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBwb3MrKzsKICAgIH0KCiAgICAvLyBubyBjbG9zaW5nICc+JwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8gdGhpcyBzaG91bGQgYmUgLi4uIH0gZWxzZSB7IC4uLiBicmFuY2gKCiAgbGV2ZWwgPSAwOwogIHdoaWxlIChwb3MgPCBtYXgpIHsKICAgIGNvZGUgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpOwoKICAgIGlmIChjb2RlID09PSAweDIwKSB7IGJyZWFrOyB9CgogICAgaWYgKGNvZGUgPiAweDA4ICYmIGNvZGUgPCAweDBlKSB7IGJyZWFrOyB9CgogICAgaWYgKGNvZGUgPT09IDB4NUMgLyogXCAqLyAmJiBwb3MgKyAxIDwgbWF4KSB7CiAgICAgIHBvcyArPSAyOwogICAgICBjb250aW51ZTsKICAgIH0KCiAgICBpZiAoY29kZSA9PT0gMHgyOCAvKiAoICovKSB7CiAgICAgIGxldmVsKys7CiAgICAgIGlmIChsZXZlbCA+IDEpIHsgYnJlYWs7IH0KICAgIH0KCiAgICBpZiAoY29kZSA9PT0gMHgyOSAvKiApICovKSB7CiAgICAgIGxldmVsLS07CiAgICAgIGlmIChsZXZlbCA8IDApIHsgYnJlYWs7IH0KICAgIH0KCiAgICBwb3MrKzsKICB9CgogIGlmIChzdGFydCA9PT0gcG9zKSB7IHJldHVybiBmYWxzZTsgfQoKICBsaW5rID0gdW5lc2NhcGVNZChzdGF0ZS5zcmMuc2xpY2Uoc3RhcnQsIHBvcykpOwogIGlmICghc3RhdGUucGFyc2VyLnZhbGlkYXRlTGluayhsaW5rKSkgeyByZXR1cm4gZmFsc2U7IH0KCiAgc3RhdGUubGlua0NvbnRlbnQgPSBsaW5rOwogIHN0YXRlLnBvcyA9IHBvczsKICByZXR1cm4gdHJ1ZTsKfTsKCn0seyIuLi9jb21tb24vdXRpbHMiOjUsIi4vbm9ybWFsaXplX2xpbmsiOjl9XSwxMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCi8qKgogKiBQYXJzZSBsaW5rIGxhYmVscwogKgogKiBUaGlzIGZ1bmN0aW9uIGFzc3VtZXMgdGhhdCBmaXJzdCBjaGFyYWN0ZXIgKGBbYCkgYWxyZWFkeSBtYXRjaGVzOwogKiByZXR1cm5zIHRoZSBlbmQgb2YgdGhlIGxhYmVsLgogKgogKiBAcGFyYW0gIHtPYmplY3R9IHN0YXRlCiAqIEBwYXJhbSAge051bWJlcn0gc3RhcnQKICogQGFwaSBwcml2YXRlCiAqLwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZUxpbmtMYWJlbChzdGF0ZSwgc3RhcnQpIHsKICB2YXIgbGV2ZWwsIGZvdW5kLCBtYXJrZXIsCiAgICAgIGxhYmVsRW5kID0gLTEsCiAgICAgIG1heCA9IHN0YXRlLnBvc01heCwKICAgICAgb2xkUG9zID0gc3RhdGUucG9zLAogICAgICBvbGRGbGFnID0gc3RhdGUuaXNJbkxhYmVsOwoKICBpZiAoc3RhdGUuaXNJbkxhYmVsKSB7IHJldHVybiAtMTsgfQoKICBpZiAoc3RhdGUubGFiZWxVbm1hdGNoZWRTY29wZXMpIHsKICAgIHN0YXRlLmxhYmVsVW5tYXRjaGVkU2NvcGVzLS07CiAgICByZXR1cm4gLTE7CiAgfQoKICBzdGF0ZS5wb3MgPSBzdGFydCArIDE7CiAgc3RhdGUuaXNJbkxhYmVsID0gdHJ1ZTsKICBsZXZlbCA9IDE7CgogIHdoaWxlIChzdGF0ZS5wb3MgPCBtYXgpIHsKICAgIG1hcmtlciA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXRlLnBvcyk7CiAgICBpZiAobWFya2VyID09PSAweDVCIC8qIFsgKi8pIHsKICAgICAgbGV2ZWwrKzsKICAgIH0gZWxzZSBpZiAobWFya2VyID09PSAweDVEIC8qIF0gKi8pIHsKICAgICAgbGV2ZWwtLTsKICAgICAgaWYgKGxldmVsID09PSAwKSB7CiAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgc3RhdGUucGFyc2VyLnNraXBUb2tlbihzdGF0ZSk7CiAgfQoKICBpZiAoZm91bmQpIHsKICAgIGxhYmVsRW5kID0gc3RhdGUucG9zOwogICAgc3RhdGUubGFiZWxVbm1hdGNoZWRTY29wZXMgPSAwOwogIH0gZWxzZSB7CiAgICBzdGF0ZS5sYWJlbFVubWF0Y2hlZFNjb3BlcyA9IGxldmVsIC0gMTsKICB9CgogIC8vIHJlc3RvcmUgb2xkIHN0YXRlCiAgc3RhdGUucG9zID0gb2xkUG9zOwogIHN0YXRlLmlzSW5MYWJlbCA9IG9sZEZsYWc7CgogIHJldHVybiBsYWJlbEVuZDsKfTsKCn0se31dLDEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKCnZhciB1bmVzY2FwZU1kID0gcmVxdWlyZSgnLi4vY29tbW9uL3V0aWxzJykudW5lc2NhcGVNZDsKCi8qKgogKiBQYXJzZSBsaW5rIHRpdGxlCiAqCiAqICAgLSBvbiBzdWNjZXNzIGl0IHJldHVybnMgYSBzdHJpbmcgYW5kIHVwZGF0ZXMgc3RhdGUucG9zOwogKiAgIC0gb24gZmFpbHVyZSBpdCByZXR1cm5zIG51bGwKICoKICogQHBhcmFtICB7T2JqZWN0fSBzdGF0ZQogKiBAcGFyYW0gIHtOdW1iZXJ9IHBvcwogKiBAYXBpIHByaXZhdGUKICovCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcnNlTGlua1RpdGxlKHN0YXRlLCBwb3MpIHsKICB2YXIgY29kZSwKICAgICAgc3RhcnQgPSBwb3MsCiAgICAgIG1heCA9IHN0YXRlLnBvc01heCwKICAgICAgbWFya2VyID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKTsKCiAgaWYgKG1hcmtlciAhPT0gMHgyMiAvKiAiICovICYmIG1hcmtlciAhPT0gMHgyNyAvKiAnICovICYmIG1hcmtlciAhPT0gMHgyOCAvKiAoICovKSB7IHJldHVybiBmYWxzZTsgfQoKICBwb3MrKzsKCiAgLy8gaWYgb3BlbmluZyBtYXJrZXIgaXMgIigiLCBzd2l0Y2ggaXQgdG8gY2xvc2luZyBtYXJrZXIgIikiCiAgaWYgKG1hcmtlciA9PT0gMHgyOCkgeyBtYXJrZXIgPSAweDI5OyB9CgogIHdoaWxlIChwb3MgPCBtYXgpIHsKICAgIGNvZGUgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpOwogICAgaWYgKGNvZGUgPT09IG1hcmtlcikgewogICAgICBzdGF0ZS5wb3MgPSBwb3MgKyAxOwogICAgICBzdGF0ZS5saW5rQ29udGVudCA9IHVuZXNjYXBlTWQoc3RhdGUuc3JjLnNsaWNlKHN0YXJ0ICsgMSwgcG9zKSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgaWYgKGNvZGUgPT09IDB4NUMgLyogXCAqLyAmJiBwb3MgKyAxIDwgbWF4KSB7CiAgICAgIHBvcyArPSAyOwogICAgICBjb250aW51ZTsKICAgIH0KCiAgICBwb3MrKzsKICB9CgogIHJldHVybiBmYWxzZTsKfTsKCn0seyIuLi9jb21tb24vdXRpbHMiOjV9XSwxNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCi8qKgogKiBMb2NhbCBkZXBlbmRlbmNpZXMKICovCgp2YXIgYXNzaWduICAgICAgID0gcmVxdWlyZSgnLi9jb21tb24vdXRpbHMnKS5hc3NpZ247CnZhciBSZW5kZXJlciAgICAgPSByZXF1aXJlKCcuL3JlbmRlcmVyJyk7CnZhciBQYXJzZXJDb3JlICAgPSByZXF1aXJlKCcuL3BhcnNlcl9jb3JlJyk7CnZhciBQYXJzZXJCbG9jayAgPSByZXF1aXJlKCcuL3BhcnNlcl9ibG9jaycpOwp2YXIgUGFyc2VySW5saW5lID0gcmVxdWlyZSgnLi9wYXJzZXJfaW5saW5lJyk7CnZhciBSdWxlciAgICAgICAgPSByZXF1aXJlKCcuL3J1bGVyJyk7CgovKioKICogUHJlc2V0IGNvbmZpZ3MKICovCgp2YXIgY29uZmlnID0gewogICdkZWZhdWx0JzogICAgcmVxdWlyZSgnLi9jb25maWdzL2RlZmF1bHQnKSwKICAnZnVsbCc6ICAgICAgIHJlcXVpcmUoJy4vY29uZmlncy9mdWxsJyksCiAgJ2NvbW1vbm1hcmsnOiByZXF1aXJlKCcuL2NvbmZpZ3MvY29tbW9ubWFyaycpCn07CgovKioKICogVGhlIGBTdGF0ZUNvcmVgIGNsYXNzIG1hbmFnZXMgc3RhdGUuCiAqCiAqIEBwYXJhbSB7T2JqZWN0fSBgaW5zdGFuY2VgIFJlbWFya2FibGUgaW5zdGFuY2UKICogQHBhcmFtIHtTdHJpbmd9IGBzdHJgIE1hcmtkb3duIHN0cmluZwogKiBAcGFyYW0ge09iamVjdH0gYGVudmAKICovCgpmdW5jdGlvbiBTdGF0ZUNvcmUoaW5zdGFuY2UsIHN0ciwgZW52KSB7CiAgdGhpcy5zcmMgPSBzdHI7CiAgdGhpcy5lbnYgPSBlbnY7CiAgdGhpcy5vcHRpb25zID0gaW5zdGFuY2Uub3B0aW9uczsKICB0aGlzLnRva2VucyA9IFtdOwogIHRoaXMuaW5saW5lTW9kZSA9IGZhbHNlOwoKICB0aGlzLmlubGluZSA9IGluc3RhbmNlLmlubGluZTsKICB0aGlzLmJsb2NrID0gaW5zdGFuY2UuYmxvY2s7CiAgdGhpcy5yZW5kZXJlciA9IGluc3RhbmNlLnJlbmRlcmVyOwogIHRoaXMudHlwb2dyYXBoZXIgPSBpbnN0YW5jZS50eXBvZ3JhcGhlcjsKfQoKLyoqCiAqIFRoZSBtYWluIGBSZW1hcmthYmxlYCBjbGFzcy4gQ3JlYXRlIGFuIGluc3RhbmNlIG9mCiAqIGBSZW1hcmthYmxlYCB3aXRoIGEgYHByZXNldGAgYW5kL29yIGBvcHRpb25zYC4KICoKICogQHBhcmFtIHtTdHJpbmd9IGBwcmVzZXRgIElmIG5vIHByZXNldCBpcyBnaXZlbiwgYGRlZmF1bHRgIGlzIHVzZWQuCiAqIEBwYXJhbSB7T2JqZWN0fSBgb3B0aW9uc2AKICovCgpmdW5jdGlvbiBSZW1hcmthYmxlKHByZXNldCwgb3B0aW9ucykgewogIGlmICh0eXBlb2YgcHJlc2V0ICE9PSAnc3RyaW5nJykgewogICAgb3B0aW9ucyA9IHByZXNldDsKICAgIHByZXNldCA9ICdkZWZhdWx0JzsKICB9CgogIHRoaXMuaW5saW5lICAgPSBuZXcgUGFyc2VySW5saW5lKCk7CiAgdGhpcy5ibG9jayAgICA9IG5ldyBQYXJzZXJCbG9jaygpOwogIHRoaXMuY29yZSAgICAgPSBuZXcgUGFyc2VyQ29yZSgpOwogIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIoKTsKICB0aGlzLnJ1bGVyICAgID0gbmV3IFJ1bGVyKCk7CgogIHRoaXMub3B0aW9ucyAgPSB7fTsKICB0aGlzLmNvbmZpZ3VyZShjb25maWdbcHJlc2V0XSk7CiAgdGhpcy5zZXQob3B0aW9ucyB8fCB7fSk7Cn0KCi8qKgogKiBTZXQgb3B0aW9ucyBhcyBhbiBhbHRlcm5hdGl2ZSB0byBwYXNzaW5nIHRoZW0KICogdG8gdGhlIGNvbnN0cnVjdG9yLgogKgogKiBgYGBqcwogKiBtZC5zZXQoe3R5cG9ncmFwaGVyOiB0cnVlfSk7CiAqIGBgYAogKiBAcGFyYW0ge09iamVjdH0gYG9wdGlvbnNgCiAqIEBhcGkgcHVibGljCiAqLwoKUmVtYXJrYWJsZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICBhc3NpZ24odGhpcy5vcHRpb25zLCBvcHRpb25zKTsKfTsKCi8qKgogKiBCYXRjaCBsb2FkZXIgZm9yIGNvbXBvbmVudHMgcnVsZXMgc3RhdGVzLCBhbmQgb3B0aW9ucwogKgogKiBAcGFyYW0gIHtPYmplY3R9IGBwcmVzZXRzYAogKi8KClJlbWFya2FibGUucHJvdG90eXBlLmNvbmZpZ3VyZSA9IGZ1bmN0aW9uIChwcmVzZXRzKSB7CiAgdmFyIHNlbGYgPSB0aGlzOwoKICBpZiAoIXByZXNldHMpIHsgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyBgcmVtYXJrYWJsZWAgcHJlc2V0LCBjaGVjayBuYW1lL2NvbnRlbnQnKTsgfQogIGlmIChwcmVzZXRzLm9wdGlvbnMpIHsgc2VsZi5zZXQocHJlc2V0cy5vcHRpb25zKTsgfQogIGlmIChwcmVzZXRzLmNvbXBvbmVudHMpIHsKICAgIE9iamVjdC5rZXlzKHByZXNldHMuY29tcG9uZW50cykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICBpZiAocHJlc2V0cy5jb21wb25lbnRzW25hbWVdLnJ1bGVzKSB7CiAgICAgICAgc2VsZltuYW1lXS5ydWxlci5lbmFibGUocHJlc2V0cy5jb21wb25lbnRzW25hbWVdLnJ1bGVzLCB0cnVlKTsKICAgICAgfQogICAgfSk7CiAgfQp9OwoKLyoqCiAqIFVzZSBhIHBsdWdpbi4KICoKICogYGBganMKICogdmFyIG1kID0gbmV3IFJlbWFya2FibGUoKTsKICoKICogbWQudXNlKHBsdWdpbjEpCiAqICAgLnVzZShwbHVnaW4yLCBvcHRzKQogKiAgIC51c2UocGx1Z2luMyk7CiAqIGBgYAogKgogKiBAcGFyYW0gIHtGdW5jdGlvbn0gYHBsdWdpbmAKICogQHBhcmFtICB7T2JqZWN0fSBgb3B0aW9uc2AKICogQHJldHVybiB7T2JqZWN0fSBgUmVtYXJrYWJsZWAgZm9yIGNoYWluaW5nCiAqLwoKUmVtYXJrYWJsZS5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gKHBsdWdpbiwgb3B0aW9ucykgewogIHBsdWdpbih0aGlzLCBvcHRpb25zKTsKICByZXR1cm4gdGhpczsKfTsKCgovKioKICogUGFyc2UgdGhlIGlucHV0IGBzdHJpbmdgIGFuZCByZXR1cm4gYSB0b2tlbnMgYXJyYXkuCiAqIE1vZGlmaWVzIGBlbnZgIHdpdGggZGVmaW5pdGlvbnMgZGF0YS4KICoKICogQHBhcmFtICB7U3RyaW5nfSBgc3RyaW5nYAogKiBAcGFyYW0gIHtPYmplY3R9IGBlbnZgCiAqIEByZXR1cm4ge0FycmF5fSBBcnJheSBvZiB0b2tlbnMKICovCgpSZW1hcmthYmxlLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChzdHIsIGVudikgewogIHZhciBzdGF0ZSA9IG5ldyBTdGF0ZUNvcmUodGhpcywgc3RyLCBlbnYpOwogIHRoaXMuY29yZS5wcm9jZXNzKHN0YXRlKTsKICByZXR1cm4gc3RhdGUudG9rZW5zOwp9OwoKLyoqCiAqIFRoZSBtYWluIGAucmVuZGVyKClgIG1ldGhvZCB0aGF0IGRvZXMgYWxsIHRoZSBtYWdpYyA6KQogKgogKiBAcGFyYW0gIHtTdHJpbmd9IGBzdHJpbmdgCiAqIEBwYXJhbSAge09iamVjdH0gYGVudmAKICogQHJldHVybiB7U3RyaW5nfSBSZW5kZXJlZCBIVE1MLgogKi8KClJlbWFya2FibGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChzdHIsIGVudikgewogIGVudiA9IGVudiB8fCB7fTsKICByZXR1cm4gdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5wYXJzZShzdHIsIGVudiksIHRoaXMub3B0aW9ucywgZW52KTsKfTsKCi8qKgogKiBQYXJzZSB0aGUgZ2l2ZW4gY29udGVudCBgc3RyaW5nYCBhcyBhIHNpbmdsZSBzdHJpbmcuCiAqCiAqIEBwYXJhbSAge1N0cmluZ30gYHN0cmluZ2AKICogQHBhcmFtICB7T2JqZWN0fSBgZW52YAogKiBAcmV0dXJuIHtBcnJheX0gQXJyYXkgb2YgdG9rZW5zCiAqLwoKUmVtYXJrYWJsZS5wcm90b3R5cGUucGFyc2VJbmxpbmUgPSBmdW5jdGlvbiAoc3RyLCBlbnYpIHsKICB2YXIgc3RhdGUgPSBuZXcgU3RhdGVDb3JlKHRoaXMsIHN0ciwgZW52KTsKICBzdGF0ZS5pbmxpbmVNb2RlID0gdHJ1ZTsKICB0aGlzLmNvcmUucHJvY2VzcyhzdGF0ZSk7CiAgcmV0dXJuIHN0YXRlLnRva2VuczsKfTsKCi8qKgogKiBSZW5kZXIgYSBzaW5nbGUgY29udGVudCBgc3RyaW5nYCwgd2l0aG91dCB3cmFwcGluZyBpdAogKiB0byBwYXJhZ3JhcGhzCiAqCiAqIEBwYXJhbSAge1N0cmluZ30gYHN0cmAKICogQHBhcmFtICB7T2JqZWN0fSBgZW52YAogKiBAcmV0dXJuIHtTdHJpbmd9CiAqLwoKUmVtYXJrYWJsZS5wcm90b3R5cGUucmVuZGVySW5saW5lID0gZnVuY3Rpb24gKHN0ciwgZW52KSB7CiAgZW52ID0gZW52IHx8IHt9OwogIHJldHVybiB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnBhcnNlSW5saW5lKHN0ciwgZW52KSwgdGhpcy5vcHRpb25zLCBlbnYpOwp9OwoKLyoqCiAqIEV4cG9zZSBgUmVtYXJrYWJsZWAKICovCgptb2R1bGUuZXhwb3J0cyA9IFJlbWFya2FibGU7CgovKioKICogRXhwb3NlIGB1dGlsc2AsIFVzZWZ1bCBoZWxwZXIgZnVuY3Rpb25zIGZvciBjdXN0b20KICogcmVuZGVyaW5nLgogKi8KCm1vZHVsZS5leHBvcnRzLnV0aWxzID0gcmVxdWlyZSgnLi9jb21tb24vdXRpbHMnKTsKCn0seyIuL2NvbW1vbi91dGlscyI6NSwiLi9jb25maWdzL2NvbW1vbm1hcmsiOjYsIi4vY29uZmlncy9kZWZhdWx0Ijo3LCIuL2NvbmZpZ3MvZnVsbCI6OCwiLi9wYXJzZXJfYmxvY2siOjE1LCIuL3BhcnNlcl9jb3JlIjoxNiwiLi9wYXJzZXJfaW5saW5lIjoxNywiLi9yZW5kZXJlciI6MTgsIi4vcnVsZXIiOjE5fV0sMTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgovKioKICogTG9jYWwgZGVwZW5kZW5jaWVzCiAqLwoKdmFyIFJ1bGVyICAgICAgPSByZXF1aXJlKCcuL3J1bGVyJyk7CnZhciBTdGF0ZUJsb2NrID0gcmVxdWlyZSgnLi9ydWxlc19ibG9jay9zdGF0ZV9ibG9jaycpOwoKLyoqCiAqIFBhcnNlciBydWxlcwogKi8KCnZhciBfcnVsZXMgPSBbCiAgWyAnY29kZScsICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfYmxvY2svY29kZScpIF0sCiAgWyAnZmVuY2VzJywgICAgIHJlcXVpcmUoJy4vcnVsZXNfYmxvY2svZmVuY2VzJyksICAgICBbICdwYXJhZ3JhcGgnLCAnYmxvY2txdW90ZScsICdsaXN0JyBdIF0sCiAgWyAnYmxvY2txdW90ZScsIHJlcXVpcmUoJy4vcnVsZXNfYmxvY2svYmxvY2txdW90ZScpLCBbICdwYXJhZ3JhcGgnLCAnYmxvY2txdW90ZScsICdsaXN0JyBdIF0sCiAgWyAnaHInLCAgICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfYmxvY2svaHInKSwgICAgICAgICBbICdwYXJhZ3JhcGgnLCAnYmxvY2txdW90ZScsICdsaXN0JyBdIF0sCiAgWyAnbGlzdCcsICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfYmxvY2svbGlzdCcpLCAgICAgICBbICdwYXJhZ3JhcGgnLCAnYmxvY2txdW90ZScgXSBdLAogIFsgJ2Zvb3Rub3RlJywgICByZXF1aXJlKCcuL3J1bGVzX2Jsb2NrL2Zvb3Rub3RlJyksICAgWyAncGFyYWdyYXBoJyBdIF0sCiAgWyAnaGVhZGluZycsICAgIHJlcXVpcmUoJy4vcnVsZXNfYmxvY2svaGVhZGluZycpLCAgICBbICdwYXJhZ3JhcGgnLCAnYmxvY2txdW90ZScgXSBdLAogIFsgJ2xoZWFkaW5nJywgICByZXF1aXJlKCcuL3J1bGVzX2Jsb2NrL2xoZWFkaW5nJykgXSwKICBbICdodG1sYmxvY2snLCAgcmVxdWlyZSgnLi9ydWxlc19ibG9jay9odG1sYmxvY2snKSwgIFsgJ3BhcmFncmFwaCcsICdibG9ja3F1b3RlJyBdIF0sCiAgWyAndGFibGUnLCAgICAgIHJlcXVpcmUoJy4vcnVsZXNfYmxvY2svdGFibGUnKSwgICAgICBbICdwYXJhZ3JhcGgnIF0gXSwKICBbICdkZWZsaXN0JywgICAgcmVxdWlyZSgnLi9ydWxlc19ibG9jay9kZWZsaXN0JyksICAgIFsgJ3BhcmFncmFwaCcgXSBdLAogIFsgJ3BhcmFncmFwaCcsICByZXF1aXJlKCcuL3J1bGVzX2Jsb2NrL3BhcmFncmFwaCcpIF0KXTsKCi8qKgogKiBCbG9jayBQYXJzZXIgY2xhc3MKICoKICogQGFwaSBwcml2YXRlCiAqLwoKZnVuY3Rpb24gUGFyc2VyQmxvY2soKSB7CiAgdGhpcy5ydWxlciA9IG5ldyBSdWxlcigpOwogIGZvciAodmFyIGkgPSAwOyBpIDwgX3J1bGVzLmxlbmd0aDsgaSsrKSB7CiAgICB0aGlzLnJ1bGVyLnB1c2goX3J1bGVzW2ldWzBdLCBfcnVsZXNbaV1bMV0sIHsKICAgICAgYWx0OiAoX3J1bGVzW2ldWzJdIHx8IFtdKS5zbGljZSgpCiAgICB9KTsKICB9Cn0KCi8qKgogKiBHZW5lcmF0ZSB0b2tlbnMgZm9yIHRoZSBnaXZlbiBpbnB1dCByYW5nZS4KICoKICogQHBhcmFtICB7T2JqZWN0fSBgc3RhdGVgIEhhcyBwcm9wZXJ0aWVzIGxpa2UgYHNyY2AsIGBwYXJzZXJgLCBgb3B0aW9uc2AgZXRjCiAqIEBwYXJhbSAge051bWJlcn0gYHN0YXJ0TGluZWAKICogQHBhcmFtICB7TnVtYmVyfSBgZW5kTGluZWAKICogQGFwaSBwcml2YXRlCiAqLwoKUGFyc2VyQmxvY2sucHJvdG90eXBlLnRva2VuaXplID0gZnVuY3Rpb24gKHN0YXRlLCBzdGFydExpbmUsIGVuZExpbmUpIHsKICB2YXIgcnVsZXMgPSB0aGlzLnJ1bGVyLmdldFJ1bGVzKCcnKTsKICB2YXIgbGVuID0gcnVsZXMubGVuZ3RoOwogIHZhciBsaW5lID0gc3RhcnRMaW5lOwogIHZhciBoYXNFbXB0eUxpbmVzID0gZmFsc2U7CiAgdmFyIG9rLCBpOwoKICB3aGlsZSAobGluZSA8IGVuZExpbmUpIHsKICAgIHN0YXRlLmxpbmUgPSBsaW5lID0gc3RhdGUuc2tpcEVtcHR5TGluZXMobGluZSk7CiAgICBpZiAobGluZSA+PSBlbmRMaW5lKSB7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIC8vIFRlcm1pbmF0aW9uIGNvbmRpdGlvbiBmb3IgbmVzdGVkIGNhbGxzLgogICAgLy8gTmVzdGVkIGNhbGxzIGN1cnJlbnRseSB1c2VkIGZvciBibG9ja3F1b3RlcyAmIGxpc3RzCiAgICBpZiAoc3RhdGUudFNoaWZ0W2xpbmVdIDwgc3RhdGUuYmxrSW5kZW50KSB7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIC8vIFRyeSBhbGwgcG9zc2libGUgcnVsZXMuCiAgICAvLyBPbiBzdWNjZXNzLCBydWxlIHNob3VsZDoKICAgIC8vCiAgICAvLyAtIHVwZGF0ZSBgc3RhdGUubGluZWAKICAgIC8vIC0gdXBkYXRlIGBzdGF0ZS50b2tlbnNgCiAgICAvLyAtIHJldHVybiB0cnVlCgogICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIG9rID0gcnVsZXNbaV0oc3RhdGUsIGxpbmUsIGVuZExpbmUsIGZhbHNlKTsKICAgICAgaWYgKG9rKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICAvLyBzZXQgc3RhdGUudGlnaHQgaWZmIHdlIGhhZCBhbiBlbXB0eSBsaW5lIGJlZm9yZSBjdXJyZW50IHRhZwogICAgLy8gaS5lLiBsYXRlc3QgZW1wdHkgbGluZSBzaG91bGQgbm90IGNvdW50CiAgICBzdGF0ZS50aWdodCA9ICFoYXNFbXB0eUxpbmVzOwoKICAgIC8vIHBhcmFncmFwaCBtaWdodCAiZWF0IiBvbmUgbmV3bGluZSBhZnRlciBpdCBpbiBuZXN0ZWQgbGlzdHMKICAgIGlmIChzdGF0ZS5pc0VtcHR5KHN0YXRlLmxpbmUgLSAxKSkgewogICAgICBoYXNFbXB0eUxpbmVzID0gdHJ1ZTsKICAgIH0KCiAgICBsaW5lID0gc3RhdGUubGluZTsKCiAgICBpZiAobGluZSA8IGVuZExpbmUgJiYgc3RhdGUuaXNFbXB0eShsaW5lKSkgewogICAgICBoYXNFbXB0eUxpbmVzID0gdHJ1ZTsKICAgICAgbGluZSsrOwoKICAgICAgLy8gdHdvIGVtcHR5IGxpbmVzIHNob3VsZCBzdG9wIHRoZSBwYXJzZXIgaW4gbGlzdCBtb2RlCiAgICAgIGlmIChsaW5lIDwgZW5kTGluZSAmJiBzdGF0ZS5wYXJlbnRUeXBlID09PSAnbGlzdCcgJiYgc3RhdGUuaXNFbXB0eShsaW5lKSkgeyBicmVhazsgfQogICAgICBzdGF0ZS5saW5lID0gbGluZTsKICAgIH0KICB9Cn07Cgp2YXIgVEFCU19TQ0FOX1JFID0gL1tcblx0XS9nOwp2YXIgTkVXTElORVNfUkUgID0gL1xyW1xuXHUwMDg1XXxbXHUyNDI0XHUyMDI4XHUwMDg1XS9nOwp2YXIgU1BBQ0VTX1JFICAgID0gL1x1MDBhMC9nOwoKLyoqCiAqIFRva2VuaXplIHRoZSBnaXZlbiBgc3RyYC4KICoKICogQHBhcmFtICB7U3RyaW5nfSBgc3RyYCBTb3VyY2Ugc3RyaW5nCiAqIEBwYXJhbSAge09iamVjdH0gYG9wdGlvbnNgCiAqIEBwYXJhbSAge09iamVjdH0gYGVudmAKICogQHBhcmFtICB7QXJyYXl9IGBvdXRUb2tlbnNgCiAqIEBhcGkgcHJpdmF0ZQogKi8KClBhcnNlckJsb2NrLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChzdHIsIG9wdGlvbnMsIGVudiwgb3V0VG9rZW5zKSB7CiAgdmFyIHN0YXRlLCBsaW5lU3RhcnQgPSAwLCBsYXN0VGFiUG9zID0gMDsKICBpZiAoIXN0cikgeyByZXR1cm4gW107IH0KCiAgLy8gTm9ybWFsaXplIHNwYWNlcwogIHN0ciA9IHN0ci5yZXBsYWNlKFNQQUNFU19SRSwgJyAnKTsKCiAgLy8gTm9ybWFsaXplIG5ld2xpbmVzCiAgc3RyID0gc3RyLnJlcGxhY2UoTkVXTElORVNfUkUsICdcbicpOwoKICAvLyBSZXBsYWNlIHRhYnMgd2l0aCBwcm9wZXIgbnVtYmVyIG9mIHNwYWNlcyAoMS4uNCkKICBpZiAoc3RyLmluZGV4T2YoJ1x0JykgPj0gMCkgewogICAgc3RyID0gc3RyLnJlcGxhY2UoVEFCU19TQ0FOX1JFLCBmdW5jdGlvbiAobWF0Y2gsIG9mZnNldCkgewogICAgICB2YXIgcmVzdWx0OwogICAgICBpZiAoc3RyLmNoYXJDb2RlQXQob2Zmc2V0KSA9PT0gMHgwQSkgewogICAgICAgIGxpbmVTdGFydCA9IG9mZnNldCArIDE7CiAgICAgICAgbGFzdFRhYlBvcyA9IDA7CiAgICAgICAgcmV0dXJuIG1hdGNoOwogICAgICB9CiAgICAgIHJlc3VsdCA9ICcgICAgJy5zbGljZSgob2Zmc2V0IC0gbGluZVN0YXJ0IC0gbGFzdFRhYlBvcykgJSA0KTsKICAgICAgbGFzdFRhYlBvcyA9IG9mZnNldCAtIGxpbmVTdGFydCArIDE7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9KTsKICB9CgogIHN0YXRlID0gbmV3IFN0YXRlQmxvY2soc3RyLCB0aGlzLCBvcHRpb25zLCBlbnYsIG91dFRva2Vucyk7CiAgdGhpcy50b2tlbml6ZShzdGF0ZSwgc3RhdGUubGluZSwgc3RhdGUubGluZU1heCk7Cn07CgovKioKICogRXhwb3NlIGBQYXJzZXJCbG9ja2AKICovCgptb2R1bGUuZXhwb3J0cyA9IFBhcnNlckJsb2NrOwoKfSx7Ii4vcnVsZXIiOjE5LCIuL3J1bGVzX2Jsb2NrL2Jsb2NrcXVvdGUiOjIxLCIuL3J1bGVzX2Jsb2NrL2NvZGUiOjIyLCIuL3J1bGVzX2Jsb2NrL2RlZmxpc3QiOjIzLCIuL3J1bGVzX2Jsb2NrL2ZlbmNlcyI6MjQsIi4vcnVsZXNfYmxvY2svZm9vdG5vdGUiOjI1LCIuL3J1bGVzX2Jsb2NrL2hlYWRpbmciOjI2LCIuL3J1bGVzX2Jsb2NrL2hyIjoyNywiLi9ydWxlc19ibG9jay9odG1sYmxvY2siOjI4LCIuL3J1bGVzX2Jsb2NrL2xoZWFkaW5nIjoyOSwiLi9ydWxlc19ibG9jay9saXN0IjozMCwiLi9ydWxlc19ibG9jay9wYXJhZ3JhcGgiOjMxLCIuL3J1bGVzX2Jsb2NrL3N0YXRlX2Jsb2NrIjozMiwiLi9ydWxlc19ibG9jay90YWJsZSI6MzN9XSwxNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCi8qKgogKiBMb2NhbCBkZXBlbmRlbmNpZXMKICovCgp2YXIgUnVsZXIgPSByZXF1aXJlKCcuL3J1bGVyJyk7CgovKioKICogQ29yZSBwYXJzZXIgYHJ1bGVzYAogKi8KCnZhciBfcnVsZXMgPSBbCiAgWyAnYmxvY2snLCAgICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2NvcmUvYmxvY2snKSAgICAgICAgICBdLAogIFsgJ2FiYnInLCAgICAgICAgICAgcmVxdWlyZSgnLi9ydWxlc19jb3JlL2FiYnInKSAgICAgICAgICAgXSwKICBbICdyZWZlcmVuY2VzJywgICAgIHJlcXVpcmUoJy4vcnVsZXNfY29yZS9yZWZlcmVuY2VzJykgICAgIF0sCiAgWyAnaW5saW5lJywgICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2NvcmUvaW5saW5lJykgICAgICAgICBdLAogIFsgJ2Zvb3Rub3RlX3RhaWwnLCAgcmVxdWlyZSgnLi9ydWxlc19jb3JlL2Zvb3Rub3RlX3RhaWwnKSAgXSwKICBbICdhYmJyMicsICAgICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfY29yZS9hYmJyMicpICAgICAgICAgIF0sCiAgWyAncmVwbGFjZW1lbnRzJywgICByZXF1aXJlKCcuL3J1bGVzX2NvcmUvcmVwbGFjZW1lbnRzJykgICBdLAogIFsgJ3NtYXJ0cXVvdGVzJywgICAgcmVxdWlyZSgnLi9ydWxlc19jb3JlL3NtYXJ0cXVvdGVzJykgICAgXSwKICBbICdsaW5raWZ5JywgICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfY29yZS9saW5raWZ5JykgICAgICAgIF0KXTsKCi8qKgogKiBDbGFzcyBmb3IgdG9wIGxldmVsIChgY29yZWApIHBhcnNlciBydWxlcwogKgogKiBAYXBpIHByaXZhdGUKICovCgpmdW5jdGlvbiBDb3JlKCkgewogIHRoaXMub3B0aW9ucyA9IHt9OwogIHRoaXMucnVsZXIgPSBuZXcgUnVsZXIoKTsKICBmb3IgKHZhciBpID0gMDsgaSA8IF9ydWxlcy5sZW5ndGg7IGkrKykgewogICAgdGhpcy5ydWxlci5wdXNoKF9ydWxlc1tpXVswXSwgX3J1bGVzW2ldWzFdKTsKICB9Cn0KCi8qKgogKiBQcm9jZXNzIHJ1bGVzIHdpdGggdGhlIGdpdmVuIGBzdGF0ZWAKICoKICogQHBhcmFtICB7T2JqZWN0fSBgc3RhdGVgCiAqIEBhcGkgcHJpdmF0ZQogKi8KCkNvcmUucHJvdG90eXBlLnByb2Nlc3MgPSBmdW5jdGlvbiAoc3RhdGUpIHsKICB2YXIgaSwgbCwgcnVsZXM7CiAgcnVsZXMgPSB0aGlzLnJ1bGVyLmdldFJ1bGVzKCcnKTsKICBmb3IgKGkgPSAwLCBsID0gcnVsZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICBydWxlc1tpXShzdGF0ZSk7CiAgfQp9OwoKLyoqCiAqIEV4cG9zZSBgQ29yZWAKICovCgptb2R1bGUuZXhwb3J0cyA9IENvcmU7Cgp9LHsiLi9ydWxlciI6MTksIi4vcnVsZXNfY29yZS9hYmJyIjozNCwiLi9ydWxlc19jb3JlL2FiYnIyIjozNSwiLi9ydWxlc19jb3JlL2Jsb2NrIjozNiwiLi9ydWxlc19jb3JlL2Zvb3Rub3RlX3RhaWwiOjM3LCIuL3J1bGVzX2NvcmUvaW5saW5lIjozOCwiLi9ydWxlc19jb3JlL2xpbmtpZnkiOjM5LCIuL3J1bGVzX2NvcmUvcmVmZXJlbmNlcyI6NDAsIi4vcnVsZXNfY29yZS9yZXBsYWNlbWVudHMiOjQxLCIuL3J1bGVzX2NvcmUvc21hcnRxdW90ZXMiOjQyfV0sMTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgovKioKICogTG9jYWwgZGVwZW5kZW5jaWVzCiAqLwoKdmFyIFJ1bGVyICAgICAgID0gcmVxdWlyZSgnLi9ydWxlcicpOwp2YXIgU3RhdGVJbmxpbmUgPSByZXF1aXJlKCcuL3J1bGVzX2lubGluZS9zdGF0ZV9pbmxpbmUnKTsKdmFyIHV0aWxzICAgICAgID0gcmVxdWlyZSgnLi9jb21tb24vdXRpbHMnKTsKCi8qKgogKiBJbmxpbmUgUGFyc2VyIGBydWxlc2AKICovCgp2YXIgX3J1bGVzID0gWwogIFsgJ3RleHQnLCAgICAgICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfaW5saW5lL3RleHQnKSBdLAogIFsgJ25ld2xpbmUnLCAgICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfaW5saW5lL25ld2xpbmUnKSBdLAogIFsgJ2VzY2FwZScsICAgICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfaW5saW5lL2VzY2FwZScpIF0sCiAgWyAnYmFja3RpY2tzJywgICAgICAgcmVxdWlyZSgnLi9ydWxlc19pbmxpbmUvYmFja3RpY2tzJykgXSwKICBbICdkZWwnLCAgICAgICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2lubGluZS9kZWwnKSBdLAogIFsgJ2lucycsICAgICAgICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfaW5saW5lL2lucycpIF0sCiAgWyAnbWFyaycsICAgICAgICAgICAgcmVxdWlyZSgnLi9ydWxlc19pbmxpbmUvbWFyaycpIF0sCiAgWyAnZW1waGFzaXMnLCAgICAgICAgcmVxdWlyZSgnLi9ydWxlc19pbmxpbmUvZW1waGFzaXMnKSBdLAogIFsgJ3N1YicsICAgICAgICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfaW5saW5lL3N1YicpIF0sCiAgWyAnc3VwJywgICAgICAgICAgICAgcmVxdWlyZSgnLi9ydWxlc19pbmxpbmUvc3VwJykgXSwKICBbICdsaW5rcycsICAgICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2lubGluZS9saW5rcycpIF0sCiAgWyAnZm9vdG5vdGVfaW5saW5lJywgcmVxdWlyZSgnLi9ydWxlc19pbmxpbmUvZm9vdG5vdGVfaW5saW5lJykgXSwKICBbICdmb290bm90ZV9yZWYnLCAgICByZXF1aXJlKCcuL3J1bGVzX2lubGluZS9mb290bm90ZV9yZWYnKSBdLAogIFsgJ2F1dG9saW5rJywgICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfaW5saW5lL2F1dG9saW5rJykgXSwKICBbICdodG1sdGFnJywgICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2lubGluZS9odG1sdGFnJykgXSwKICBbICdlbnRpdHknLCAgICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2lubGluZS9lbnRpdHknKSBdCl07CgovKioKICogSW5saW5lIFBhcnNlciBjbGFzcy4gTm90ZSB0aGF0IGxpbmsgdmFsaWRhdGlvbiBpcyBzdHJpY3RlcgogKiBpbiBSZW1hcmthYmxlIHRoYW4gd2hhdCBpcyBzcGVjaWZpZWQgYnkgQ29tbW9uTWFyay4gSWYgeW91CiAqIHdhbnQgdG8gY2hhbmdlIHRoaXMgeW91IGNhbiB1c2UgYSBjdXN0b20gdmFsaWRhdG9yLgogKgogKiBAYXBpIHByaXZhdGUKICovCgpmdW5jdGlvbiBQYXJzZXJJbmxpbmUoKSB7CiAgdGhpcy5ydWxlciA9IG5ldyBSdWxlcigpOwogIGZvciAodmFyIGkgPSAwOyBpIDwgX3J1bGVzLmxlbmd0aDsgaSsrKSB7CiAgICB0aGlzLnJ1bGVyLnB1c2goX3J1bGVzW2ldWzBdLCBfcnVsZXNbaV1bMV0pOwogIH0KCiAgLy8gQ2FuIGJlIG92ZXJyaWRkZW4gd2l0aCBhIGN1c3RvbSB2YWxpZGF0b3IKICB0aGlzLnZhbGlkYXRlTGluayA9IHZhbGlkYXRlTGluazsKfQoKLyoqCiAqIFNraXAgYSBzaW5nbGUgdG9rZW4gYnkgcnVubmluZyBhbGwgcnVsZXMgaW4gdmFsaWRhdGlvbiBtb2RlLgogKiBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgcnVsZSByZXBvcnRzIHN1Y2Nlc3MuCiAqCiAqIEBwYXJhbSAge09iamVjdH0gYHN0YXRlYAogKiBAYXBpIHByaXZhZ2UKICovCgpQYXJzZXJJbmxpbmUucHJvdG90eXBlLnNraXBUb2tlbiA9IGZ1bmN0aW9uIChzdGF0ZSkgewogIHZhciBydWxlcyA9IHRoaXMucnVsZXIuZ2V0UnVsZXMoJycpOwogIHZhciBsZW4gPSBydWxlcy5sZW5ndGg7CiAgdmFyIHBvcyA9IHN0YXRlLnBvczsKICB2YXIgaSwgY2FjaGVkX3BvczsKCiAgaWYgKChjYWNoZWRfcG9zID0gc3RhdGUuY2FjaGVHZXQocG9zKSkgPiAwKSB7CiAgICBzdGF0ZS5wb3MgPSBjYWNoZWRfcG9zOwogICAgcmV0dXJuOwogIH0KCiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICBpZiAocnVsZXNbaV0oc3RhdGUsIHRydWUpKSB7CiAgICAgIHN0YXRlLmNhY2hlU2V0KHBvcywgc3RhdGUucG9zKTsKICAgICAgcmV0dXJuOwogICAgfQogIH0KCiAgc3RhdGUucG9zKys7CiAgc3RhdGUuY2FjaGVTZXQocG9zLCBzdGF0ZS5wb3MpOwp9OwoKLyoqCiAqIEdlbmVyYXRlIHRva2VucyBmb3IgdGhlIGdpdmVuIGlucHV0IHJhbmdlLgogKgogKiBAcGFyYW0gIHtPYmplY3R9IGBzdGF0ZWAKICogQGFwaSBwcml2YXRlCiAqLwoKUGFyc2VySW5saW5lLnByb3RvdHlwZS50b2tlbml6ZSA9IGZ1bmN0aW9uIChzdGF0ZSkgewogIHZhciBydWxlcyA9IHRoaXMucnVsZXIuZ2V0UnVsZXMoJycpOwogIHZhciBsZW4gPSBydWxlcy5sZW5ndGg7CiAgdmFyIGVuZCA9IHN0YXRlLnBvc01heDsKICB2YXIgb2ssIGk7CgogIHdoaWxlIChzdGF0ZS5wb3MgPCBlbmQpIHsKCiAgICAvLyBUcnkgYWxsIHBvc3NpYmxlIHJ1bGVzLgogICAgLy8gT24gc3VjY2VzcywgdGhlIHJ1bGUgc2hvdWxkOgogICAgLy8KICAgIC8vIC0gdXBkYXRlIGBzdGF0ZS5wb3NgCiAgICAvLyAtIHVwZGF0ZSBgc3RhdGUudG9rZW5zYAogICAgLy8gLSByZXR1cm4gdHJ1ZQogICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIG9rID0gcnVsZXNbaV0oc3RhdGUsIGZhbHNlKTsKCiAgICAgIGlmIChvaykgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgaWYgKG9rKSB7CiAgICAgIGlmIChzdGF0ZS5wb3MgPj0gZW5kKSB7IGJyZWFrOyB9CiAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIHN0YXRlLnBlbmRpbmcgKz0gc3RhdGUuc3JjW3N0YXRlLnBvcysrXTsKICB9CgogIGlmIChzdGF0ZS5wZW5kaW5nKSB7CiAgICBzdGF0ZS5wdXNoUGVuZGluZygpOwogIH0KfTsKCi8qKgogKiBQYXJzZSB0aGUgZ2l2ZW4gaW5wdXQgc3RyaW5nLgogKgogKiBAcGFyYW0gIHtTdHJpbmd9IGBzdHJgCiAqIEBwYXJhbSAge09iamVjdH0gYG9wdGlvbnNgCiAqIEBwYXJhbSAge09iamVjdH0gYGVudmAKICogQHBhcmFtICB7QXJyYXl9IGBvdXRUb2tlbnNgCiAqIEBhcGkgcHJpdmF0ZQogKi8KClBhcnNlcklubGluZS5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoc3RyLCBvcHRpb25zLCBlbnYsIG91dFRva2VucykgewogIHZhciBzdGF0ZSA9IG5ldyBTdGF0ZUlubGluZShzdHIsIHRoaXMsIG9wdGlvbnMsIGVudiwgb3V0VG9rZW5zKTsKICB0aGlzLnRva2VuaXplKHN0YXRlKTsKfTsKCi8qKgogKiBWYWxpZGF0ZSB0aGUgZ2l2ZW4gYHVybGAgYnkgY2hlY2tpbmcgZm9yIGJhZCBwcm90b2NvbHMuCiAqCiAqIEBwYXJhbSAge1N0cmluZ30gYHVybGAKICogQHJldHVybiB7Qm9vbGVhbn0KICovCgpmdW5jdGlvbiB2YWxpZGF0ZUxpbmsodXJsKSB7CiAgdmFyIEJBRF9QUk9UT0NPTFMgPSBbICd2YnNjcmlwdCcsICdqYXZhc2NyaXB0JywgJ2ZpbGUnIF07CiAgdmFyIHN0ciA9IHVybC50cmltKCkudG9Mb3dlckNhc2UoKTsKICAvLyBDYXJlIGFib3V0IGRpZ2l0YWwgZW50aXRpZXMgImphdmFzY3JpcHQmI3gzQTthbGVydCgxKSIKICBzdHIgPSB1dGlscy5yZXBsYWNlRW50aXRpZXMoc3RyKTsKICBpZiAoc3RyLmluZGV4T2YoJzonKSAhPT0gLTEgJiYgQkFEX1BST1RPQ09MUy5pbmRleE9mKHN0ci5zcGxpdCgnOicpWzBdKSAhPT0gLTEpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgcmV0dXJuIHRydWU7Cn0KCi8qKgogKiBFeHBvc2UgYFBhcnNlcklubGluZWAKICovCgptb2R1bGUuZXhwb3J0cyA9IFBhcnNlcklubGluZTsKCn0seyIuL2NvbW1vbi91dGlscyI6NSwiLi9ydWxlciI6MTksIi4vcnVsZXNfaW5saW5lL2F1dG9saW5rIjo0MywiLi9ydWxlc19pbmxpbmUvYmFja3RpY2tzIjo0NCwiLi9ydWxlc19pbmxpbmUvZGVsIjo0NSwiLi9ydWxlc19pbmxpbmUvZW1waGFzaXMiOjQ2LCIuL3J1bGVzX2lubGluZS9lbnRpdHkiOjQ3LCIuL3J1bGVzX2lubGluZS9lc2NhcGUiOjQ4LCIuL3J1bGVzX2lubGluZS9mb290bm90ZV9pbmxpbmUiOjQ5LCIuL3J1bGVzX2lubGluZS9mb290bm90ZV9yZWYiOjUwLCIuL3J1bGVzX2lubGluZS9odG1sdGFnIjo1MSwiLi9ydWxlc19pbmxpbmUvaW5zIjo1MiwiLi9ydWxlc19pbmxpbmUvbGlua3MiOjUzLCIuL3J1bGVzX2lubGluZS9tYXJrIjo1NCwiLi9ydWxlc19pbmxpbmUvbmV3bGluZSI6NTUsIi4vcnVsZXNfaW5saW5lL3N0YXRlX2lubGluZSI6NTYsIi4vcnVsZXNfaW5saW5lL3N1YiI6NTcsIi4vcnVsZXNfaW5saW5lL3N1cCI6NTgsIi4vcnVsZXNfaW5saW5lL3RleHQiOjU5fV0sMTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgovKioKICogTG9jYWwgZGVwZW5kZW5jaWVzCiAqLwoKdmFyIHV0aWxzID0gcmVxdWlyZSgnLi9jb21tb24vdXRpbHMnKTsKdmFyIHJ1bGVzID0gcmVxdWlyZSgnLi9ydWxlcycpOwoKLyoqCiAqIEV4cG9zZSBgUmVuZGVyZXJgCiAqLwoKbW9kdWxlLmV4cG9ydHMgPSBSZW5kZXJlcjsKCi8qKgogKiBSZW5kZXJlciBjbGFzcy4gUmVuZGVycyBIVE1MIGFuZCBleHBvc2VzIGBydWxlc2AgdG8gYWxsb3cKICogbG9jYWwgbW9kaWZpY2F0aW9ucy4KICovCgpmdW5jdGlvbiBSZW5kZXJlcigpIHsKICB0aGlzLnJ1bGVzID0gdXRpbHMuYXNzaWduKHt9LCBydWxlcyk7CgogIC8vIGV4cG9ydGVkIGhlbHBlciwgZm9yIGN1c3RvbSBydWxlcyBvbmx5CiAgdGhpcy5nZXRCcmVhayA9IHJ1bGVzLmdldEJyZWFrOwp9CgovKioKICogUmVuZGVyIGEgc3RyaW5nIG9mIGlubGluZSBIVE1MIHdpdGggdGhlIGdpdmVuIGB0b2tlbnNgIGFuZAogKiBgb3B0aW9uc2AuCiAqCiAqIEBwYXJhbSAge0FycmF5fSBgdG9rZW5zYAogKiBAcGFyYW0gIHtPYmplY3R9IGBvcHRpb25zYAogKiBAcGFyYW0gIHtPYmplY3R9IGBlbnZgCiAqIEByZXR1cm4ge1N0cmluZ30KICogQGFwaSBwdWJsaWMKICovCgpSZW5kZXJlci5wcm90b3R5cGUucmVuZGVySW5saW5lID0gZnVuY3Rpb24gKHRva2Vucywgb3B0aW9ucywgZW52KSB7CiAgdmFyIF9ydWxlcyA9IHRoaXMucnVsZXM7CiAgdmFyIGxlbiA9IHRva2Vucy5sZW5ndGgsIGkgPSAwOwogIHZhciByZXN1bHQgPSAnJzsKCiAgd2hpbGUgKGxlbi0tKSB7CiAgICByZXN1bHQgKz0gX3J1bGVzW3Rva2Vuc1tpXS50eXBlXSh0b2tlbnMsIGkrKywgb3B0aW9ucywgZW52LCB0aGlzKTsKICB9CgogIHJldHVybiByZXN1bHQ7Cn07CgovKioKICogUmVuZGVyIGEgc3RyaW5nIG9mIEhUTUwgd2l0aCB0aGUgZ2l2ZW4gYHRva2Vuc2AgYW5kCiAqIGBvcHRpb25zYC4KICoKICogQHBhcmFtICB7QXJyYXl9IGB0b2tlbnNgCiAqIEBwYXJhbSAge09iamVjdH0gYG9wdGlvbnNgCiAqIEBwYXJhbSAge09iamVjdH0gYGVudmAKICogQHJldHVybiB7U3RyaW5nfQogKiBAYXBpIHB1YmxpYwogKi8KClJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAodG9rZW5zLCBvcHRpb25zLCBlbnYpIHsKICB2YXIgX3J1bGVzID0gdGhpcy5ydWxlczsKICB2YXIgbGVuID0gdG9rZW5zLmxlbmd0aCwgaSA9IC0xOwogIHZhciByZXN1bHQgPSAnJzsKCiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgaWYgKHRva2Vuc1tpXS50eXBlID09PSAnaW5saW5lJykgewogICAgICByZXN1bHQgKz0gdGhpcy5yZW5kZXJJbmxpbmUodG9rZW5zW2ldLmNoaWxkcmVuLCBvcHRpb25zLCBlbnYpOwogICAgfSBlbHNlIHsKICAgICAgcmVzdWx0ICs9IF9ydWxlc1t0b2tlbnNbaV0udHlwZV0odG9rZW5zLCBpLCBvcHRpb25zLCBlbnYsIHRoaXMpOwogICAgfQogIH0KICByZXR1cm4gcmVzdWx0Owp9OwoKfSx7Ii4vY29tbW9uL3V0aWxzIjo1LCIuL3J1bGVzIjoyMH1dLDE5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKLyoqCiAqIFJ1bGVyIGlzIGEgaGVscGVyIGNsYXNzIGZvciBidWlsZGluZyByZXNwb25zaWJpbGl0eSBjaGFpbnMgZnJvbQogKiBwYXJzZSBydWxlcy4gSXQgYWxsb3dzOgogKgogKiAgIC0gZWFzeSBzdGFjayBydWxlcyBjaGFpbnMKICogICAtIGdldHRpbmcgbWFpbiBjaGFpbiBhbmQgbmFtZWQgY2hhaW5zIGNvbnRlbnQgKGFzIGFycmF5cyBvZiBmdW5jdGlvbnMpCiAqCiAqIEhlbHBlciBtZXRob2RzLCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuCiAqIEBhcGkgcHJpdmF0ZQogKi8KCmZ1bmN0aW9uIFJ1bGVyKCkgewogIC8vIExpc3Qgb2YgYWRkZWQgcnVsZXMuIEVhY2ggZWxlbWVudCBpczoKICAvLwogIC8vIHsgbmFtZTogWFhYLAogIC8vICAgZW5hYmxlZDogQm9vbGVhbiwKICAvLyAgIGZuOiBGdW5jdGlvbigpLAogIC8vICAgYWx0OiBbIG5hbWUyLCBuYW1lMyBdIH0KICAvLwogIHRoaXMuX19ydWxlc19fID0gW107CgogIC8vIENhY2hlZCBydWxlIGNoYWlucy4KICAvLwogIC8vIEZpcnN0IGxldmVsIC0gY2hhaW4gbmFtZSwgJycgZm9yIGRlZmF1bHQuCiAgLy8gU2Vjb25kIGxldmVsIC0gZGlnaXRhbCBhbmNob3IgZm9yIGZhc3QgZmlsdGVyaW5nIGJ5IGNoYXJjb2Rlcy4KICAvLwogIHRoaXMuX19jYWNoZV9fID0gbnVsbDsKfQoKLyoqCiAqIEZpbmQgdGhlIGluZGV4IG9mIGEgcnVsZSBieSBgbmFtZWAuCiAqCiAqIEBwYXJhbSAge1N0cmluZ30gYG5hbWVgCiAqIEByZXR1cm4ge051bWJlcn0gSW5kZXggb2YgdGhlIGdpdmVuIGBuYW1lYAogKiBAYXBpIHByaXZhdGUKICovCgpSdWxlci5wcm90b3R5cGUuX19maW5kX18gPSBmdW5jdGlvbiAobmFtZSkgewogIHZhciBsZW4gPSB0aGlzLl9fcnVsZXNfXy5sZW5ndGg7CiAgdmFyIGkgPSAtMTsKCiAgd2hpbGUgKGxlbi0tKSB7CiAgICBpZiAodGhpcy5fX3J1bGVzX19bKytpXS5uYW1lID09PSBuYW1lKSB7CiAgICAgIHJldHVybiBpOwogICAgfQogIH0KICByZXR1cm4gLTE7Cn07CgovKioKICogQnVpbGQgdGhlIHJ1bGVzIGxvb2t1cCBjYWNoZQogKgogKiBAYXBpIHByaXZhdGUKICovCgpSdWxlci5wcm90b3R5cGUuX19jb21waWxlX18gPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHNlbGYgPSB0aGlzOwogIHZhciBjaGFpbnMgPSBbICcnIF07CgogIC8vIGNvbGxlY3QgdW5pcXVlIG5hbWVzCiAgc2VsZi5fX3J1bGVzX18uZm9yRWFjaChmdW5jdGlvbiAocnVsZSkgewogICAgaWYgKCFydWxlLmVuYWJsZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHJ1bGUuYWx0LmZvckVhY2goZnVuY3Rpb24gKGFsdE5hbWUpIHsKICAgICAgaWYgKGNoYWlucy5pbmRleE9mKGFsdE5hbWUpIDwgMCkgewogICAgICAgIGNoYWlucy5wdXNoKGFsdE5hbWUpOwogICAgICB9CiAgICB9KTsKICB9KTsKCiAgc2VsZi5fX2NhY2hlX18gPSB7fTsKCiAgY2hhaW5zLmZvckVhY2goZnVuY3Rpb24gKGNoYWluKSB7CiAgICBzZWxmLl9fY2FjaGVfX1tjaGFpbl0gPSBbXTsKICAgIHNlbGYuX19ydWxlc19fLmZvckVhY2goZnVuY3Rpb24gKHJ1bGUpIHsKICAgICAgaWYgKCFydWxlLmVuYWJsZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChjaGFpbiAmJiBydWxlLmFsdC5pbmRleE9mKGNoYWluKSA8IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc2VsZi5fX2NhY2hlX19bY2hhaW5dLnB1c2gocnVsZS5mbik7CiAgICB9KTsKICB9KTsKfTsKCi8qKgogKiBSdWxlciBwdWJsaWMgbWV0aG9kcwogKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICovCgovKioKICogUmVwbGFjZSBydWxlIGZ1bmN0aW9uCiAqCiAqIEBwYXJhbSAge1N0cmluZ30gYG5hbWVgIFJ1bGUgbmFtZQogKiBAcGFyYW0gIHtGdW5jdGlvbiBgZm5gCiAqIEBwYXJhbSAge09iamVjdH0gYG9wdGlvbnNgCiAqIEBhcGkgcHJpdmF0ZQogKi8KClJ1bGVyLnByb3RvdHlwZS5hdCA9IGZ1bmN0aW9uIChuYW1lLCBmbiwgb3B0aW9ucykgewogIHZhciBpZHggPSB0aGlzLl9fZmluZF9fKG5hbWUpOwogIHZhciBvcHQgPSBvcHRpb25zIHx8IHt9OwoKICBpZiAoaWR4ID09PSAtMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdQYXJzZXIgcnVsZSBub3QgZm91bmQ6ICcgKyBuYW1lKTsKICB9CgogIHRoaXMuX19ydWxlc19fW2lkeF0uZm4gPSBmbjsKICB0aGlzLl9fcnVsZXNfX1tpZHhdLmFsdCA9IG9wdC5hbHQgfHwgW107CiAgdGhpcy5fX2NhY2hlX18gPSBudWxsOwp9OwoKLyoqCiAqIEFkZCBhIHJ1bGUgdG8gdGhlIGNoYWluIGJlZm9yZSBnaXZlbiB0aGUgYHJ1bGVOYW1lYC4KICoKICogQHBhcmFtICB7U3RyaW5nfSAgIGBiZWZvcmVOYW1lYAogKiBAcGFyYW0gIHtTdHJpbmd9ICAgYHJ1bGVOYW1lYAogKiBAcGFyYW0gIHtGdW5jdGlvbn0gYGZuYAogKiBAcGFyYW0gIHtPYmplY3R9ICAgYG9wdGlvbnNgCiAqIEBhcGkgcHJpdmF0ZQogKi8KClJ1bGVyLnByb3RvdHlwZS5iZWZvcmUgPSBmdW5jdGlvbiAoYmVmb3JlTmFtZSwgcnVsZU5hbWUsIGZuLCBvcHRpb25zKSB7CiAgdmFyIGlkeCA9IHRoaXMuX19maW5kX18oYmVmb3JlTmFtZSk7CiAgdmFyIG9wdCA9IG9wdGlvbnMgfHwge307CgogIGlmIChpZHggPT09IC0xKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ1BhcnNlciBydWxlIG5vdCBmb3VuZDogJyArIGJlZm9yZU5hbWUpOwogIH0KCiAgdGhpcy5fX3J1bGVzX18uc3BsaWNlKGlkeCwgMCwgewogICAgbmFtZTogcnVsZU5hbWUsCiAgICBlbmFibGVkOiB0cnVlLAogICAgZm46IGZuLAogICAgYWx0OiBvcHQuYWx0IHx8IFtdCiAgfSk7CgogIHRoaXMuX19jYWNoZV9fID0gbnVsbDsKfTsKCi8qKgogKiBBZGQgYSBydWxlIHRvIHRoZSBjaGFpbiBhZnRlciB0aGUgZ2l2ZW4gYHJ1bGVOYW1lYC4KICoKICogQHBhcmFtICB7U3RyaW5nfSAgIGBhZnRlck5hbWVgCiAqIEBwYXJhbSAge1N0cmluZ30gICBgcnVsZU5hbWVgCiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBgZm5gCiAqIEBwYXJhbSAge09iamVjdH0gICBgb3B0aW9uc2AKICogQGFwaSBwcml2YXRlCiAqLwoKUnVsZXIucHJvdG90eXBlLmFmdGVyID0gZnVuY3Rpb24gKGFmdGVyTmFtZSwgcnVsZU5hbWUsIGZuLCBvcHRpb25zKSB7CiAgdmFyIGlkeCA9IHRoaXMuX19maW5kX18oYWZ0ZXJOYW1lKTsKICB2YXIgb3B0ID0gb3B0aW9ucyB8fCB7fTsKCiAgaWYgKGlkeCA9PT0gLTEpIHsKICAgIHRocm93IG5ldyBFcnJvcignUGFyc2VyIHJ1bGUgbm90IGZvdW5kOiAnICsgYWZ0ZXJOYW1lKTsKICB9CgogIHRoaXMuX19ydWxlc19fLnNwbGljZShpZHggKyAxLCAwLCB7CiAgICBuYW1lOiBydWxlTmFtZSwKICAgIGVuYWJsZWQ6IHRydWUsCiAgICBmbjogZm4sCiAgICBhbHQ6IG9wdC5hbHQgfHwgW10KICB9KTsKCiAgdGhpcy5fX2NhY2hlX18gPSBudWxsOwp9OwoKLyoqCiAqIEFkZCBhIHJ1bGUgdG8gdGhlIGVuZCBvZiBjaGFpbi4KICoKICogQHBhcmFtICB7U3RyaW5nfSAgIGBydWxlTmFtZWAKICogQHBhcmFtICB7RnVuY3Rpb259IGBmbmAKICogQHBhcmFtICB7T2JqZWN0fSAgIGBvcHRpb25zYAogKiBAcmV0dXJuIHtTdHJpbmd9CiAqLwoKUnVsZXIucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAocnVsZU5hbWUsIGZuLCBvcHRpb25zKSB7CiAgdmFyIG9wdCA9IG9wdGlvbnMgfHwge307CgogIHRoaXMuX19ydWxlc19fLnB1c2goewogICAgbmFtZTogcnVsZU5hbWUsCiAgICBlbmFibGVkOiB0cnVlLAogICAgZm46IGZuLAogICAgYWx0OiBvcHQuYWx0IHx8IFtdCiAgfSk7CgogIHRoaXMuX19jYWNoZV9fID0gbnVsbDsKfTsKCi8qKgogKiBFbmFibGUgYSBydWxlIG9yIGxpc3Qgb2YgcnVsZXMuCiAqCiAqIEBwYXJhbSAge1N0cmluZ3xBcnJheX0gYGxpc3RgIE5hbWUgb3IgYXJyYXkgb2YgcnVsZSBuYW1lcyB0byBlbmFibGUKICogQHBhcmFtICB7Qm9vbGVhbn0gYHN0cmljdGAgSWYgYHRydWVgLCBhbGwgbm9uIGxpc3RlZCBydWxlcyB3aWxsIGJlIGRpc2FibGVkLgogKiBAYXBpIHByaXZhdGUKICovCgpSdWxlci5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24gKGxpc3QsIHN0cmljdCkgewogIGxpc3QgPSAhQXJyYXkuaXNBcnJheShsaXN0KQogICAgPyBbIGxpc3QgXQogICAgOiBsaXN0OwoKICAvLyBJbiBzdHJpY3QgbW9kZSBkaXNhYmxlIGFsbCBleGlzdGluZyBydWxlcyBmaXJzdAogIGlmIChzdHJpY3QpIHsKICAgIHRoaXMuX19ydWxlc19fLmZvckVhY2goZnVuY3Rpb24gKHJ1bGUpIHsKICAgICAgcnVsZS5lbmFibGVkID0gZmFsc2U7CiAgICB9KTsKICB9CgogIC8vIFNlYXJjaCBieSBuYW1lIGFuZCBlbmFibGUKICBsaXN0LmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgIHZhciBpZHggPSB0aGlzLl9fZmluZF9fKG5hbWUpOwogICAgaWYgKGlkeCA8IDApIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdSdWxlcyBtYW5hZ2VyOiBpbnZhbGlkIHJ1bGUgbmFtZSAnICsgbmFtZSk7CiAgICB9CiAgICB0aGlzLl9fcnVsZXNfX1tpZHhdLmVuYWJsZWQgPSB0cnVlOwogIH0sIHRoaXMpOwoKICB0aGlzLl9fY2FjaGVfXyA9IG51bGw7Cn07CgoKLyoqCiAqIERpc2FibGUgYSBydWxlIG9yIGxpc3Qgb2YgcnVsZXMuCiAqCiAqIEBwYXJhbSAge1N0cmluZ3xBcnJheX0gYGxpc3RgIE5hbWUgb3IgYXJyYXkgb2YgcnVsZSBuYW1lcyB0byBkaXNhYmxlCiAqIEBhcGkgcHJpdmF0ZQogKi8KClJ1bGVyLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKGxpc3QpIHsKICBsaXN0ID0gIUFycmF5LmlzQXJyYXkobGlzdCkKICAgID8gWyBsaXN0IF0KICAgIDogbGlzdDsKCiAgLy8gU2VhcmNoIGJ5IG5hbWUgYW5kIGRpc2FibGUKICBsaXN0LmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgIHZhciBpZHggPSB0aGlzLl9fZmluZF9fKG5hbWUpOwogICAgaWYgKGlkeCA8IDApIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdSdWxlcyBtYW5hZ2VyOiBpbnZhbGlkIHJ1bGUgbmFtZSAnICsgbmFtZSk7CiAgICB9CiAgICB0aGlzLl9fcnVsZXNfX1tpZHhdLmVuYWJsZWQgPSBmYWxzZTsKICB9LCB0aGlzKTsKCiAgdGhpcy5fX2NhY2hlX18gPSBudWxsOwp9OwoKLyoqCiAqIEdldCBhIHJ1bGVzIGxpc3QgYXMgYW4gYXJyYXkgb2YgZnVuY3Rpb25zLgogKgogKiBAcGFyYW0gIHtTdHJpbmd9IGBjaGFpbk5hbWVgCiAqIEByZXR1cm4ge09iamVjdH0KICogQGFwaSBwcml2YXRlCiAqLwoKUnVsZXIucHJvdG90eXBlLmdldFJ1bGVzID0gZnVuY3Rpb24gKGNoYWluTmFtZSkgewogIGlmICh0aGlzLl9fY2FjaGVfXyA9PT0gbnVsbCkgewogICAgdGhpcy5fX2NvbXBpbGVfXygpOwogIH0KICByZXR1cm4gdGhpcy5fX2NhY2hlX19bY2hhaW5OYW1lXTsKfTsKCi8qKgogKiBFeHBvc2UgYFJ1bGVyYAogKi8KCm1vZHVsZS5leHBvcnRzID0gUnVsZXI7Cgp9LHt9XSwyMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCi8qKgogKiBMb2NhbCBkZXBlbmRlbmNpZXMKICovCgp2YXIgaGFzICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9jb21tb24vdXRpbHMnKS5oYXM7CnZhciB1bmVzY2FwZU1kICAgICAgPSByZXF1aXJlKCcuL2NvbW1vbi91dGlscycpLnVuZXNjYXBlTWQ7CnZhciByZXBsYWNlRW50aXRpZXMgPSByZXF1aXJlKCcuL2NvbW1vbi91dGlscycpLnJlcGxhY2VFbnRpdGllczsKdmFyIGVzY2FwZUh0bWwgICAgICA9IHJlcXVpcmUoJy4vY29tbW9uL3V0aWxzJykuZXNjYXBlSHRtbDsKCi8qKgogKiBSZW5kZXJlciBydWxlcyBjYWNoZQogKi8KCnZhciBydWxlcyA9IHt9OwoKLyoqCiAqIEJsb2NrcXVvdGVzCiAqLwoKcnVsZXMuYmxvY2txdW90ZV9vcGVuID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzxibG9ja3F1b3RlPlxuJzsKfTsKCnJ1bGVzLmJsb2NrcXVvdGVfY2xvc2UgPSBmdW5jdGlvbiAodG9rZW5zLCBpZHggLyosIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPC9ibG9ja3F1b3RlPicgKyBnZXRCcmVhayh0b2tlbnMsIGlkeCk7Cn07CgovKioKICogQ29kZQogKi8KCnJ1bGVzLmNvZGUgPSBmdW5jdGlvbiAodG9rZW5zLCBpZHggLyosIG9wdGlvbnMsIGVudiAqLykgewogIGlmICh0b2tlbnNbaWR4XS5ibG9jaykgewogICAgcmV0dXJuICc8cHJlPjxjb2RlPicgKyBlc2NhcGVIdG1sKHRva2Vuc1tpZHhdLmNvbnRlbnQpICsgJzwvY29kZT48L3ByZT4nICsgZ2V0QnJlYWsodG9rZW5zLCBpZHgpOwogIH0KICByZXR1cm4gJzxjb2RlPicgKyBlc2NhcGVIdG1sKHRva2Vuc1tpZHhdLmNvbnRlbnQpICsgJzwvY29kZT4nOwp9OwoKLyoqCiAqIEZlbmNlZCBjb2RlIGJsb2NrcwogKi8KCnJ1bGVzLmZlbmNlID0gZnVuY3Rpb24gKHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYsIGluc3RhbmNlKSB7CiAgdmFyIHRva2VuID0gdG9rZW5zW2lkeF07CiAgdmFyIGxhbmdDbGFzcyA9ICcnOwogIHZhciBsYW5nUHJlZml4ID0gb3B0aW9ucy5sYW5nUHJlZml4OwogIHZhciBsYW5nTmFtZSA9ICcnLCBmZW5jZU5hbWU7CiAgdmFyIGhpZ2hsaWdodGVkOwoKICBpZiAodG9rZW4ucGFyYW1zKSB7CgogICAgLy8KICAgIC8vIGBgYGZvbyBiYXIKICAgIC8vCiAgICAvLyBUcnkgY3VzdG9tIHJlbmRlcmVyICJmb28iIGZpcnN0LiBUaGF0IHdpbGwgc2ltcGxpZnkgb3ZlcndyaXRlCiAgICAvLyBmb3IgZGlhZ3JhbXMsIGxhdGV4LCBhbmQgYW55IG90aGVyIGZlbmNlZCBibG9jayB3aXRoIGN1c3RvbSBsb29rCiAgICAvLwoKICAgIGZlbmNlTmFtZSA9IHRva2VuLnBhcmFtcy5zcGxpdCgvXHMrL2cpWzBdOwoKICAgIGlmIChoYXMoaW5zdGFuY2UucnVsZXMuZmVuY2VfY3VzdG9tLCBmZW5jZU5hbWUpKSB7CiAgICAgIHJldHVybiBpbnN0YW5jZS5ydWxlcy5mZW5jZV9jdXN0b21bZmVuY2VOYW1lXSh0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52LCBpbnN0YW5jZSk7CiAgICB9CgogICAgbGFuZ05hbWUgPSBlc2NhcGVIdG1sKHJlcGxhY2VFbnRpdGllcyh1bmVzY2FwZU1kKGZlbmNlTmFtZSkpKTsKICAgIGxhbmdDbGFzcyA9ICcgY2xhc3M9IicgKyBsYW5nUHJlZml4ICsgbGFuZ05hbWUgKyAnIic7CiAgfQoKICBpZiAob3B0aW9ucy5oaWdobGlnaHQpIHsKICAgIGhpZ2hsaWdodGVkID0gb3B0aW9ucy5oaWdobGlnaHQodG9rZW4uY29udGVudCwgbGFuZ05hbWUpIHx8IGVzY2FwZUh0bWwodG9rZW4uY29udGVudCk7CiAgfSBlbHNlIHsKICAgIGhpZ2hsaWdodGVkID0gZXNjYXBlSHRtbCh0b2tlbi5jb250ZW50KTsKICB9CgogIHJldHVybiAnPHByZT48Y29kZScgKyBsYW5nQ2xhc3MgKyAnPicKICAgICAgICArIGhpZ2hsaWdodGVkCiAgICAgICAgKyAnPC9jb2RlPjwvcHJlPicKICAgICAgICArIGdldEJyZWFrKHRva2VucywgaWR4KTsKfTsKCnJ1bGVzLmZlbmNlX2N1c3RvbSA9IHt9OwoKLyoqCiAqIEhlYWRpbmdzCiAqLwoKcnVsZXMuaGVhZGluZ19vcGVuID0gZnVuY3Rpb24gKHRva2VucywgaWR4IC8qLCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzxoJyArIHRva2Vuc1tpZHhdLmhMZXZlbCArICc+JzsKfTsKcnVsZXMuaGVhZGluZ19jbG9zZSA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCAvKiwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8L2gnICsgdG9rZW5zW2lkeF0uaExldmVsICsgJz5cbic7Cn07CgovKioKICogSG9yaXpvbnRhbCBydWxlcwogKi8KCnJ1bGVzLmhyID0gZnVuY3Rpb24gKHRva2VucywgaWR4LCBvcHRpb25zIC8qLCBlbnYgKi8pIHsKICByZXR1cm4gKG9wdGlvbnMueGh0bWxPdXQgPyAnPGhyIC8+JyA6ICc8aHI+JykgKyBnZXRCcmVhayh0b2tlbnMsIGlkeCk7Cn07CgovKioKICogQnVsbGV0cwogKi8KCnJ1bGVzLmJ1bGxldF9saXN0X29wZW4gPSBmdW5jdGlvbiAoLyogdG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPHVsPlxuJzsKfTsKcnVsZXMuYnVsbGV0X2xpc3RfY2xvc2UgPSBmdW5jdGlvbiAodG9rZW5zLCBpZHggLyosIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPC91bD4nICsgZ2V0QnJlYWsodG9rZW5zLCBpZHgpOwp9OwoKLyoqCiAqIExpc3QgaXRlbXMKICovCgpydWxlcy5saXN0X2l0ZW1fb3BlbiA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8bGk+JzsKfTsKcnVsZXMubGlzdF9pdGVtX2Nsb3NlID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzwvbGk+XG4nOwp9OwoKLyoqCiAqIE9yZGVyZWQgbGlzdCBpdGVtcwogKi8KCnJ1bGVzLm9yZGVyZWRfbGlzdF9vcGVuID0gZnVuY3Rpb24gKHRva2VucywgaWR4IC8qLCBvcHRpb25zLCBlbnYgKi8pIHsKICB2YXIgdG9rZW4gPSB0b2tlbnNbaWR4XTsKICB2YXIgb3JkZXIgPSB0b2tlbi5vcmRlciA+IDEgPyAnIHN0YXJ0PSInICsgdG9rZW4ub3JkZXIgKyAnIicgOiAnJzsKICByZXR1cm4gJzxvbCcgKyBvcmRlciArICc+XG4nOwp9OwpydWxlcy5vcmRlcmVkX2xpc3RfY2xvc2UgPSBmdW5jdGlvbiAodG9rZW5zLCBpZHggLyosIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPC9vbD4nICsgZ2V0QnJlYWsodG9rZW5zLCBpZHgpOwp9OwoKLyoqCiAqIFBhcmFncmFwaHMKICovCgpydWxlcy5wYXJhZ3JhcGhfb3BlbiA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCAvKiwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuIHRva2Vuc1tpZHhdLnRpZ2h0ID8gJycgOiAnPHA+JzsKfTsKcnVsZXMucGFyYWdyYXBoX2Nsb3NlID0gZnVuY3Rpb24gKHRva2VucywgaWR4IC8qLCBvcHRpb25zLCBlbnYgKi8pIHsKICB2YXIgYWRkQnJlYWsgPSAhKHRva2Vuc1tpZHhdLnRpZ2h0ICYmIGlkeCAmJiB0b2tlbnNbaWR4IC0gMV0udHlwZSA9PT0gJ2lubGluZScgJiYgIXRva2Vuc1tpZHggLSAxXS5jb250ZW50KTsKICByZXR1cm4gKHRva2Vuc1tpZHhdLnRpZ2h0ID8gJycgOiAnPC9wPicpICsgKGFkZEJyZWFrID8gZ2V0QnJlYWsodG9rZW5zLCBpZHgpIDogJycpOwp9OwoKLyoqCiAqIExpbmtzCiAqLwoKcnVsZXMubGlua19vcGVuID0gZnVuY3Rpb24gKHRva2VucywgaWR4LCBvcHRpb25zIC8qIGVudiAqLykgewogIHZhciB0aXRsZSA9IHRva2Vuc1tpZHhdLnRpdGxlID8gKCcgdGl0bGU9IicgKyBlc2NhcGVIdG1sKHJlcGxhY2VFbnRpdGllcyh0b2tlbnNbaWR4XS50aXRsZSkpICsgJyInKSA6ICcnOwogIHZhciB0YXJnZXQgPSBvcHRpb25zLmxpbmtUYXJnZXQgPyAoJyB0YXJnZXQ9IicgKyBvcHRpb25zLmxpbmtUYXJnZXQgKyAnIicpIDogJyc7CiAgcmV0dXJuICc8YSBocmVmPSInICsgZXNjYXBlSHRtbCh0b2tlbnNbaWR4XS5ocmVmKSArICciJyArIHRpdGxlICsgdGFyZ2V0ICsgJz4nOwp9OwpydWxlcy5saW5rX2Nsb3NlID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzwvYT4nOwp9OwoKLyoqCiAqIEltYWdlcwogKi8KCnJ1bGVzLmltYWdlID0gZnVuY3Rpb24gKHRva2VucywgaWR4LCBvcHRpb25zIC8qLCBlbnYgKi8pIHsKICB2YXIgc3JjID0gJyBzcmM9IicgKyBlc2NhcGVIdG1sKHRva2Vuc1tpZHhdLnNyYykgKyAnIic7CiAgdmFyIHRpdGxlID0gdG9rZW5zW2lkeF0udGl0bGUgPyAoJyB0aXRsZT0iJyArIGVzY2FwZUh0bWwocmVwbGFjZUVudGl0aWVzKHRva2Vuc1tpZHhdLnRpdGxlKSkgKyAnIicpIDogJyc7CiAgdmFyIGFsdCA9ICcgYWx0PSInICsgKHRva2Vuc1tpZHhdLmFsdCA/IGVzY2FwZUh0bWwocmVwbGFjZUVudGl0aWVzKHRva2Vuc1tpZHhdLmFsdCkpIDogJycpICsgJyInOwogIHZhciBzdWZmaXggPSBvcHRpb25zLnhodG1sT3V0ID8gJyAvJyA6ICcnOwogIHJldHVybiAnPGltZycgKyBzcmMgKyBhbHQgKyB0aXRsZSArIHN1ZmZpeCArICc+JzsKfTsKCi8qKgogKiBUYWJsZXMKICovCgpydWxlcy50YWJsZV9vcGVuID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzx0YWJsZT5cbic7Cn07CnJ1bGVzLnRhYmxlX2Nsb3NlID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzwvdGFibGU+XG4nOwp9OwpydWxlcy50aGVhZF9vcGVuID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzx0aGVhZD5cbic7Cn07CnJ1bGVzLnRoZWFkX2Nsb3NlID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzwvdGhlYWQ+XG4nOwp9OwpydWxlcy50Ym9keV9vcGVuID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzx0Ym9keT5cbic7Cn07CnJ1bGVzLnRib2R5X2Nsb3NlID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzwvdGJvZHk+XG4nOwp9OwpydWxlcy50cl9vcGVuID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzx0cj4nOwp9OwpydWxlcy50cl9jbG9zZSA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8L3RyPlxuJzsKfTsKcnVsZXMudGhfb3BlbiA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCAvKiwgb3B0aW9ucywgZW52ICovKSB7CiAgdmFyIHRva2VuID0gdG9rZW5zW2lkeF07CiAgcmV0dXJuICc8dGgnCiAgICArICh0b2tlbi5hbGlnbiA/ICcgc3R5bGU9InRleHQtYWxpZ246JyArIHRva2VuLmFsaWduICsgJyInIDogJycpCiAgICArICc+JzsKfTsKcnVsZXMudGhfY2xvc2UgPSBmdW5jdGlvbiAoLyogdG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPC90aD4nOwp9OwpydWxlcy50ZF9vcGVuID0gZnVuY3Rpb24gKHRva2VucywgaWR4IC8qLCBvcHRpb25zLCBlbnYgKi8pIHsKICB2YXIgdG9rZW4gPSB0b2tlbnNbaWR4XTsKICByZXR1cm4gJzx0ZCcKICAgICsgKHRva2VuLmFsaWduID8gJyBzdHlsZT0idGV4dC1hbGlnbjonICsgdG9rZW4uYWxpZ24gKyAnIicgOiAnJykKICAgICsgJz4nOwp9OwpydWxlcy50ZF9jbG9zZSA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8L3RkPic7Cn07CgovKioKICogQm9sZAogKi8KCnJ1bGVzLnN0cm9uZ19vcGVuID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzxzdHJvbmc+JzsKfTsKcnVsZXMuc3Ryb25nX2Nsb3NlID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzwvc3Ryb25nPic7Cn07CgovKioKICogSXRhbGljaXplCiAqLwoKcnVsZXMuZW1fb3BlbiA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8ZW0+JzsKfTsKcnVsZXMuZW1fY2xvc2UgPSBmdW5jdGlvbiAoLyogdG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPC9lbT4nOwp9OwoKLyoqCiAqIFN0cmlrZXRocm91Z2gKICovCgpydWxlcy5kZWxfb3BlbiA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8ZGVsPic7Cn07CnJ1bGVzLmRlbF9jbG9zZSA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8L2RlbD4nOwp9OwoKLyoqCiAqIEluc2VydAogKi8KCnJ1bGVzLmluc19vcGVuID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzxpbnM+JzsKfTsKcnVsZXMuaW5zX2Nsb3NlID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzwvaW5zPic7Cn07CgovKioKICogSGlnaGxpZ2h0CiAqLwoKcnVsZXMubWFya19vcGVuID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzxtYXJrPic7Cn07CnJ1bGVzLm1hcmtfY2xvc2UgPSBmdW5jdGlvbiAoLyogdG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPC9tYXJrPic7Cn07CgovKioKICogU3VwZXItIGFuZCBzdWItc2NyaXB0CiAqLwoKcnVsZXMuc3ViID0gZnVuY3Rpb24gKHRva2VucywgaWR4IC8qLCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzxzdWI+JyArIGVzY2FwZUh0bWwodG9rZW5zW2lkeF0uY29udGVudCkgKyAnPC9zdWI+JzsKfTsKcnVsZXMuc3VwID0gZnVuY3Rpb24gKHRva2VucywgaWR4IC8qLCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzxzdXA+JyArIGVzY2FwZUh0bWwodG9rZW5zW2lkeF0uY29udGVudCkgKyAnPC9zdXA+JzsKfTsKCi8qKgogKiBCcmVha3MKICovCgpydWxlcy5oYXJkYnJlYWsgPSBmdW5jdGlvbiAodG9rZW5zLCBpZHgsIG9wdGlvbnMgLyosIGVudiAqLykgewogIHJldHVybiBvcHRpb25zLnhodG1sT3V0ID8gJzxiciAvPlxuJyA6ICc8YnI+XG4nOwp9OwpydWxlcy5zb2Z0YnJlYWsgPSBmdW5jdGlvbiAodG9rZW5zLCBpZHgsIG9wdGlvbnMgLyosIGVudiAqLykgewogIHJldHVybiBvcHRpb25zLmJyZWFrcyA/IChvcHRpb25zLnhodG1sT3V0ID8gJzxiciAvPlxuJyA6ICc8YnI+XG4nKSA6ICdcbic7Cn07CgovKioKICogVGV4dAogKi8KCnJ1bGVzLnRleHQgPSBmdW5jdGlvbiAodG9rZW5zLCBpZHggLyosIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiBlc2NhcGVIdG1sKHRva2Vuc1tpZHhdLmNvbnRlbnQpOwp9OwoKLyoqCiAqIENvbnRlbnQKICovCgpydWxlcy5odG1sYmxvY2sgPSBmdW5jdGlvbiAodG9rZW5zLCBpZHggLyosIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiB0b2tlbnNbaWR4XS5jb250ZW50Owp9OwpydWxlcy5odG1sdGFnID0gZnVuY3Rpb24gKHRva2VucywgaWR4IC8qLCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gdG9rZW5zW2lkeF0uY29udGVudDsKfTsKCi8qKgogKiBBYmJyZXZpYXRpb25zLCBpbml0aWFsaXNtCiAqLwoKcnVsZXMuYWJicl9vcGVuID0gZnVuY3Rpb24gKHRva2VucywgaWR4IC8qLCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzxhYmJyIHRpdGxlPSInICsgZXNjYXBlSHRtbChyZXBsYWNlRW50aXRpZXModG9rZW5zW2lkeF0udGl0bGUpKSArICciPic7Cn07CnJ1bGVzLmFiYnJfY2xvc2UgPSBmdW5jdGlvbiAoLyogdG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPC9hYmJyPic7Cn07CgovKioKICogRm9vdG5vdGVzCiAqLwoKcnVsZXMuZm9vdG5vdGVfcmVmID0gZnVuY3Rpb24gKHRva2VucywgaWR4KSB7CiAgdmFyIG4gPSBOdW1iZXIodG9rZW5zW2lkeF0uaWQgKyAxKS50b1N0cmluZygpOwogIHZhciBpZCA9ICdmbnJlZicgKyBuOwogIGlmICh0b2tlbnNbaWR4XS5zdWJJZCA+IDApIHsKICAgIGlkICs9ICc6JyArIHRva2Vuc1tpZHhdLnN1YklkOwogIH0KICByZXR1cm4gJzxzdXAgY2xhc3M9ImZvb3Rub3RlLXJlZiI+PGEgaHJlZj0iI2ZuJyArIG4gKyAnIiBpZD0iJyArIGlkICsgJyI+WycgKyBuICsgJ108L2E+PC9zdXA+JzsKfTsKcnVsZXMuZm9vdG5vdGVfYmxvY2tfb3BlbiA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCwgb3B0aW9ucykgewogIHZhciBociA9IG9wdGlvbnMueGh0bWxPdXQKICAgID8gJzxociBjbGFzcz0iZm9vdG5vdGVzLXNlcCIgLz5cbicKICAgIDogJzxociBjbGFzcz0iZm9vdG5vdGVzLXNlcCI+XG4nOwogIHJldHVybiAgaHIgKyAnPHNlY3Rpb24gY2xhc3M9ImZvb3Rub3RlcyI+XG48b2wgY2xhc3M9ImZvb3Rub3Rlcy1saXN0Ij5cbic7Cn07CnJ1bGVzLmZvb3Rub3RlX2Jsb2NrX2Nsb3NlID0gZnVuY3Rpb24gKCkgewogIHJldHVybiAnPC9vbD5cbjwvc2VjdGlvbj5cbic7Cn07CnJ1bGVzLmZvb3Rub3RlX29wZW4gPSBmdW5jdGlvbiAodG9rZW5zLCBpZHgpIHsKICB2YXIgaWQgPSBOdW1iZXIodG9rZW5zW2lkeF0uaWQgKyAxKS50b1N0cmluZygpOwogIHJldHVybiAnPGxpIGlkPSJmbicgKyBpZCArICciICBjbGFzcz0iZm9vdG5vdGUtaXRlbSI+JzsKfTsKcnVsZXMuZm9vdG5vdGVfY2xvc2UgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuICc8L2xpPlxuJzsKfTsKcnVsZXMuZm9vdG5vdGVfYW5jaG9yID0gZnVuY3Rpb24gKHRva2VucywgaWR4KSB7CiAgdmFyIG4gPSBOdW1iZXIodG9rZW5zW2lkeF0uaWQgKyAxKS50b1N0cmluZygpOwogIHZhciBpZCA9ICdmbnJlZicgKyBuOwogIGlmICh0b2tlbnNbaWR4XS5zdWJJZCA+IDApIHsKICAgIGlkICs9ICc6JyArIHRva2Vuc1tpZHhdLnN1YklkOwogIH0KICByZXR1cm4gJyA8YSBocmVmPSIjJyArIGlkICsgJyIgY2xhc3M9ImZvb3Rub3RlLWJhY2tyZWYiPuKGqTwvYT4nOwp9OwoKLyoqCiAqIERlZmluaXRpb24gbGlzdHMKICovCgpydWxlcy5kbF9vcGVuID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuICc8ZGw+XG4nOwp9OwpydWxlcy5kdF9vcGVuID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuICc8ZHQ+JzsKfTsKcnVsZXMuZGRfb3BlbiA9IGZ1bmN0aW9uKCkgewogIHJldHVybiAnPGRkPic7Cn07CnJ1bGVzLmRsX2Nsb3NlID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuICc8L2RsPlxuJzsKfTsKcnVsZXMuZHRfY2xvc2UgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gJzwvZHQ+XG4nOwp9OwpydWxlcy5kZF9jbG9zZSA9IGZ1bmN0aW9uKCkgewogIHJldHVybiAnPC9kZD5cbic7Cn07CgovKioKICogSGVscGVyIGZ1bmN0aW9ucwogKi8KCmZ1bmN0aW9uIG5leHRUb2tlbih0b2tlbnMsIGlkeCkgewogIGlmICgrK2lkeCA+PSB0b2tlbnMubGVuZ3RoIC0gMikgewogICAgcmV0dXJuIGlkeDsKICB9CiAgaWYgKCh0b2tlbnNbaWR4XS50eXBlID09PSAncGFyYWdyYXBoX29wZW4nICYmIHRva2Vuc1tpZHhdLnRpZ2h0KSAmJgogICAgICAodG9rZW5zW2lkeCArIDFdLnR5cGUgPT09ICdpbmxpbmUnICYmIHRva2Vuc1tpZHggKyAxXS5jb250ZW50Lmxlbmd0aCA9PT0gMCkgJiYKICAgICAgKHRva2Vuc1tpZHggKyAyXS50eXBlID09PSAncGFyYWdyYXBoX2Nsb3NlJyAmJiB0b2tlbnNbaWR4ICsgMl0udGlnaHQpKSB7CiAgICByZXR1cm4gbmV4dFRva2VuKHRva2VucywgaWR4ICsgMik7CiAgfQogIHJldHVybiBpZHg7Cn0KCi8qKgogKiBDaGVjayB0byBzZWUgaWYgYFxuYCBpcyBuZWVkZWQgYmVmb3JlIHRoZSBuZXh0IHRva2VuLgogKgogKiBAcGFyYW0gIHtBcnJheX0gYHRva2Vuc2AKICogQHBhcmFtICB7TnVtYmVyfSBgaWR4YAogKiBAcmV0dXJuIHtTdHJpbmd9IEVtcHR5IHN0cmluZyBvciBuZXdsaW5lCiAqIEBhcGkgcHJpdmF0ZQogKi8KCnZhciBnZXRCcmVhayA9IHJ1bGVzLmdldEJyZWFrID0gZnVuY3Rpb24gZ2V0QnJlYWsodG9rZW5zLCBpZHgpIHsKICBpZHggPSBuZXh0VG9rZW4odG9rZW5zLCBpZHgpOwogIGlmIChpZHggPCB0b2tlbnMubGVuZ3RoICYmIHRva2Vuc1tpZHhdLnR5cGUgPT09ICdsaXN0X2l0ZW1fY2xvc2UnKSB7CiAgICByZXR1cm4gJyc7CiAgfQogIHJldHVybiAnXG4nOwp9OwoKLyoqCiAqIEV4cG9zZSBgcnVsZXNgCiAqLwoKbW9kdWxlLmV4cG9ydHMgPSBydWxlczsKCn0seyIuL2NvbW1vbi91dGlscyI6NX1dLDIxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gQmxvY2sgcXVvdGVzCgondXNlIHN0cmljdCc7CgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBibG9ja3F1b3RlKHN0YXRlLCBzdGFydExpbmUsIGVuZExpbmUsIHNpbGVudCkgewogIHZhciBuZXh0TGluZSwgbGFzdExpbmVFbXB0eSwgb2xkVFNoaWZ0LCBvbGRCTWFya3MsIG9sZEluZGVudCwgb2xkUGFyZW50VHlwZSwgbGluZXMsCiAgICAgIHRlcm1pbmF0b3JSdWxlcywKICAgICAgaSwgbCwgdGVybWluYXRlLAogICAgICBwb3MgPSBzdGF0ZS5iTWFya3Nbc3RhcnRMaW5lXSArIHN0YXRlLnRTaGlmdFtzdGFydExpbmVdLAogICAgICBtYXggPSBzdGF0ZS5lTWFya3Nbc3RhcnRMaW5lXTsKCiAgaWYgKHBvcyA+IG1heCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgLy8gY2hlY2sgdGhlIGJsb2NrIHF1b3RlIG1hcmtlcgogIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MrKykgIT09IDB4M0UvKiA+ICovKSB7IHJldHVybiBmYWxzZTsgfQoKICBpZiAoc3RhdGUubGV2ZWwgPj0gc3RhdGUub3B0aW9ucy5tYXhOZXN0aW5nKSB7IHJldHVybiBmYWxzZTsgfQoKICAvLyB3ZSBrbm93IHRoYXQgaXQncyBnb2luZyB0byBiZSBhIHZhbGlkIGJsb2NrcXVvdGUsCiAgLy8gc28gbm8gcG9pbnQgdHJ5aW5nIHRvIGZpbmQgdGhlIGVuZCBvZiBpdCBpbiBzaWxlbnQgbW9kZQogIGlmIChzaWxlbnQpIHsgcmV0dXJuIHRydWU7IH0KCiAgLy8gc2tpcCBvbmUgb3B0aW9uYWwgc3BhY2UgYWZ0ZXIgJz4nCiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgPT09IDB4MjApIHsgcG9zKys7IH0KCiAgb2xkSW5kZW50ID0gc3RhdGUuYmxrSW5kZW50OwogIHN0YXRlLmJsa0luZGVudCA9IDA7CgogIG9sZEJNYXJrcyA9IFsgc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV0gXTsKICBzdGF0ZS5iTWFya3Nbc3RhcnRMaW5lXSA9IHBvczsKCiAgLy8gY2hlY2sgaWYgd2UgaGF2ZSBhbiBlbXB0eSBibG9ja3F1b3RlCiAgcG9zID0gcG9zIDwgbWF4ID8gc3RhdGUuc2tpcFNwYWNlcyhwb3MpIDogcG9zOwogIGxhc3RMaW5lRW1wdHkgPSBwb3MgPj0gbWF4OwoKICBvbGRUU2hpZnQgPSBbIHN0YXRlLnRTaGlmdFtzdGFydExpbmVdIF07CiAgc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV0gPSBwb3MgLSBzdGF0ZS5iTWFya3Nbc3RhcnRMaW5lXTsKCiAgdGVybWluYXRvclJ1bGVzID0gc3RhdGUucGFyc2VyLnJ1bGVyLmdldFJ1bGVzKCdibG9ja3F1b3RlJyk7CgogIC8vIFNlYXJjaCB0aGUgZW5kIG9mIHRoZSBibG9jawogIC8vCiAgLy8gQmxvY2sgZW5kcyB3aXRoIGVpdGhlcjoKICAvLyAgMS4gYW4gZW1wdHkgbGluZSBvdXRzaWRlOgogIC8vICAgICBgYGAKICAvLyAgICAgPiB0ZXN0CiAgLy8KICAvLyAgICAgYGBgCiAgLy8gIDIuIGFuIGVtcHR5IGxpbmUgaW5zaWRlOgogIC8vICAgICBgYGAKICAvLyAgICAgPgogIC8vICAgICB0ZXN0CiAgLy8gICAgIGBgYAogIC8vICAzLiBhbm90aGVyIHRhZwogIC8vICAgICBgYGAKICAvLyAgICAgPiB0ZXN0CiAgLy8gICAgICAtIC0gLQogIC8vICAgICBgYGAKICBmb3IgKG5leHRMaW5lID0gc3RhcnRMaW5lICsgMTsgbmV4dExpbmUgPCBlbmRMaW5lOyBuZXh0TGluZSsrKSB7CiAgICBwb3MgPSBzdGF0ZS5iTWFya3NbbmV4dExpbmVdICsgc3RhdGUudFNoaWZ0W25leHRMaW5lXTsKICAgIG1heCA9IHN0YXRlLmVNYXJrc1tuZXh0TGluZV07CgogICAgaWYgKHBvcyA+PSBtYXgpIHsKICAgICAgLy8gQ2FzZSAxOiBsaW5lIGlzIG5vdCBpbnNpZGUgdGhlIGJsb2NrcXVvdGUsIGFuZCB0aGlzIGxpbmUgaXMgZW1wdHkuCiAgICAgIGJyZWFrOwogICAgfQoKICAgIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MrKykgPT09IDB4M0UvKiA+ICovKSB7CiAgICAgIC8vIFRoaXMgbGluZSBpcyBpbnNpZGUgdGhlIGJsb2NrcXVvdGUuCgogICAgICAvLyBza2lwIG9uZSBvcHRpb25hbCBzcGFjZSBhZnRlciAnPicKICAgICAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgPT09IDB4MjApIHsgcG9zKys7IH0KCiAgICAgIG9sZEJNYXJrcy5wdXNoKHN0YXRlLmJNYXJrc1tuZXh0TGluZV0pOwogICAgICBzdGF0ZS5iTWFya3NbbmV4dExpbmVdID0gcG9zOwoKICAgICAgcG9zID0gcG9zIDwgbWF4ID8gc3RhdGUuc2tpcFNwYWNlcyhwb3MpIDogcG9zOwogICAgICBsYXN0TGluZUVtcHR5ID0gcG9zID49IG1heDsKCiAgICAgIG9sZFRTaGlmdC5wdXNoKHN0YXRlLnRTaGlmdFtuZXh0TGluZV0pOwogICAgICBzdGF0ZS50U2hpZnRbbmV4dExpbmVdID0gcG9zIC0gc3RhdGUuYk1hcmtzW25leHRMaW5lXTsKICAgICAgY29udGludWU7CiAgICB9CgogICAgLy8gQ2FzZSAyOiBsaW5lIGlzIG5vdCBpbnNpZGUgdGhlIGJsb2NrcXVvdGUsIGFuZCB0aGUgbGFzdCBsaW5lIHdhcyBlbXB0eS4KICAgIGlmIChsYXN0TGluZUVtcHR5KSB7IGJyZWFrOyB9CgogICAgLy8gQ2FzZSAzOiBhbm90aGVyIHRhZyBmb3VuZC4KICAgIHRlcm1pbmF0ZSA9IGZhbHNlOwogICAgZm9yIChpID0gMCwgbCA9IHRlcm1pbmF0b3JSdWxlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgaWYgKHRlcm1pbmF0b3JSdWxlc1tpXShzdGF0ZSwgbmV4dExpbmUsIGVuZExpbmUsIHRydWUpKSB7CiAgICAgICAgdGVybWluYXRlID0gdHJ1ZTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgaWYgKHRlcm1pbmF0ZSkgeyBicmVhazsgfQoKICAgIG9sZEJNYXJrcy5wdXNoKHN0YXRlLmJNYXJrc1tuZXh0TGluZV0pOwogICAgb2xkVFNoaWZ0LnB1c2goc3RhdGUudFNoaWZ0W25leHRMaW5lXSk7CgogICAgLy8gQSBuZWdhdGl2ZSBudW1iZXIgbWVhbnMgdGhhdCB0aGlzIGlzIGEgcGFyYWdyYXBoIGNvbnRpbnVhdGlvbjsKICAgIC8vCiAgICAvLyBBbnkgbmVnYXRpdmUgbnVtYmVyIHdpbGwgZG8gdGhlIGpvYiBoZXJlLCBidXQgaXQncyBiZXR0ZXIgZm9yIGl0CiAgICAvLyB0byBiZSBsYXJnZSBlbm91Z2ggdG8gbWFrZSBhbnkgYnVncyBvYnZpb3VzLgogICAgc3RhdGUudFNoaWZ0W25leHRMaW5lXSA9IC0xMzM3OwogIH0KCiAgb2xkUGFyZW50VHlwZSA9IHN0YXRlLnBhcmVudFR5cGU7CiAgc3RhdGUucGFyZW50VHlwZSA9ICdibG9ja3F1b3RlJzsKICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICB0eXBlOiAnYmxvY2txdW90ZV9vcGVuJywKICAgIGxpbmVzOiBsaW5lcyA9IFsgc3RhcnRMaW5lLCAwIF0sCiAgICBsZXZlbDogc3RhdGUubGV2ZWwrKwogIH0pOwogIHN0YXRlLnBhcnNlci50b2tlbml6ZShzdGF0ZSwgc3RhcnRMaW5lLCBuZXh0TGluZSk7CiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ2Jsb2NrcXVvdGVfY2xvc2UnLAogICAgbGV2ZWw6IC0tc3RhdGUubGV2ZWwKICB9KTsKICBzdGF0ZS5wYXJlbnRUeXBlID0gb2xkUGFyZW50VHlwZTsKICBsaW5lc1sxXSA9IHN0YXRlLmxpbmU7CgogIC8vIFJlc3RvcmUgb3JpZ2luYWwgdFNoaWZ0OyB0aGlzIG1pZ2h0IG5vdCBiZSBuZWNlc3Nhcnkgc2luY2UgdGhlIHBhcnNlcgogIC8vIGhhcyBhbHJlYWR5IGJlZW4gaGVyZSwgYnV0IGp1c3QgdG8gbWFrZSBzdXJlIHdlIGNhbiBkbyB0aGF0LgogIGZvciAoaSA9IDA7IGkgPCBvbGRUU2hpZnQubGVuZ3RoOyBpKyspIHsKICAgIHN0YXRlLmJNYXJrc1tpICsgc3RhcnRMaW5lXSA9IG9sZEJNYXJrc1tpXTsKICAgIHN0YXRlLnRTaGlmdFtpICsgc3RhcnRMaW5lXSA9IG9sZFRTaGlmdFtpXTsKICB9CiAgc3RhdGUuYmxrSW5kZW50ID0gb2xkSW5kZW50OwoKICByZXR1cm4gdHJ1ZTsKfTsKCn0se31dLDIyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gQ29kZSBibG9jayAoNCBzcGFjZXMgcGFkZGVkKQoKJ3VzZSBzdHJpY3QnOwoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY29kZShzdGF0ZSwgc3RhcnRMaW5lLCBlbmRMaW5lLyosIHNpbGVudCovKSB7CiAgdmFyIG5leHRMaW5lLCBsYXN0OwoKICBpZiAoc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV0gLSBzdGF0ZS5ibGtJbmRlbnQgPCA0KSB7IHJldHVybiBmYWxzZTsgfQoKICBsYXN0ID0gbmV4dExpbmUgPSBzdGFydExpbmUgKyAxOwoKICB3aGlsZSAobmV4dExpbmUgPCBlbmRMaW5lKSB7CiAgICBpZiAoc3RhdGUuaXNFbXB0eShuZXh0TGluZSkpIHsKICAgICAgbmV4dExpbmUrKzsKICAgICAgY29udGludWU7CiAgICB9CiAgICBpZiAoc3RhdGUudFNoaWZ0W25leHRMaW5lXSAtIHN0YXRlLmJsa0luZGVudCA+PSA0KSB7CiAgICAgIG5leHRMaW5lKys7CiAgICAgIGxhc3QgPSBuZXh0TGluZTsKICAgICAgY29udGludWU7CiAgICB9CiAgICBicmVhazsKICB9CgogIHN0YXRlLmxpbmUgPSBuZXh0TGluZTsKICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICB0eXBlOiAnY29kZScsCiAgICBjb250ZW50OiBzdGF0ZS5nZXRMaW5lcyhzdGFydExpbmUsIGxhc3QsIDQgKyBzdGF0ZS5ibGtJbmRlbnQsIHRydWUpLAogICAgYmxvY2s6IHRydWUsCiAgICBsaW5lczogWyBzdGFydExpbmUsIHN0YXRlLmxpbmUgXSwKICAgIGxldmVsOiBzdGF0ZS5sZXZlbAogIH0pOwoKICByZXR1cm4gdHJ1ZTsKfTsKCn0se31dLDIzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gRGVmaW5pdGlvbiBsaXN0cwoKJ3VzZSBzdHJpY3QnOwoKCi8vIFNlYXJjaCBgWzp+XVtcbiBdYCwgcmV0dXJucyBuZXh0IHBvcyBhZnRlciBtYXJrZXIgb24gc3VjY2VzcwovLyBvciAtMSBvbiBmYWlsLgpmdW5jdGlvbiBza2lwTWFya2VyKHN0YXRlLCBsaW5lKSB7CiAgdmFyIHBvcywgbWFya2VyLAogICAgICBzdGFydCA9IHN0YXRlLmJNYXJrc1tsaW5lXSArIHN0YXRlLnRTaGlmdFtsaW5lXSwKICAgICAgbWF4ID0gc3RhdGUuZU1hcmtzW2xpbmVdOwoKICBpZiAoc3RhcnQgPj0gbWF4KSB7IHJldHVybiAtMTsgfQoKICAvLyBDaGVjayBidWxsZXQKICBtYXJrZXIgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCsrKTsKICBpZiAobWFya2VyICE9PSAweDdFLyogfiAqLyAmJiBtYXJrZXIgIT09IDB4M0EvKiA6ICovKSB7IHJldHVybiAtMTsgfQoKICBwb3MgPSBzdGF0ZS5za2lwU3BhY2VzKHN0YXJ0KTsKCiAgLy8gcmVxdWlyZSBzcGFjZSBhZnRlciAiOiIKICBpZiAoc3RhcnQgPT09IHBvcykgeyByZXR1cm4gLTE7IH0KCiAgLy8gbm8gZW1wdHkgZGVmaW5pdGlvbnMsIGUuZy4gIiAgOiAiCiAgaWYgKHBvcyA+PSBtYXgpIHsgcmV0dXJuIC0xOyB9CgogIHJldHVybiBwb3M7Cn0KCmZ1bmN0aW9uIG1hcmtUaWdodFBhcmFncmFwaHMoc3RhdGUsIGlkeCkgewogIHZhciBpLCBsLAogICAgICBsZXZlbCA9IHN0YXRlLmxldmVsICsgMjsKCiAgZm9yIChpID0gaWR4ICsgMiwgbCA9IHN0YXRlLnRva2Vucy5sZW5ndGggLSAyOyBpIDwgbDsgaSsrKSB7CiAgICBpZiAoc3RhdGUudG9rZW5zW2ldLmxldmVsID09PSBsZXZlbCAmJiBzdGF0ZS50b2tlbnNbaV0udHlwZSA9PT0gJ3BhcmFncmFwaF9vcGVuJykgewogICAgICBzdGF0ZS50b2tlbnNbaSArIDJdLnRpZ2h0ID0gdHJ1ZTsKICAgICAgc3RhdGUudG9rZW5zW2ldLnRpZ2h0ID0gdHJ1ZTsKICAgICAgaSArPSAyOwogICAgfQogIH0KfQoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWZsaXN0KHN0YXRlLCBzdGFydExpbmUsIGVuZExpbmUsIHNpbGVudCkgewogIHZhciBjb250ZW50U3RhcnQsCiAgICAgIGRkTGluZSwKICAgICAgZHRMaW5lLAogICAgICBpdGVtTGluZXMsCiAgICAgIGxpc3RMaW5lcywKICAgICAgbGlzdFRva0lkeCwKICAgICAgbmV4dExpbmUsCiAgICAgIG9sZEluZGVudCwKICAgICAgb2xkRERJbmRlbnQsCiAgICAgIG9sZFBhcmVudFR5cGUsCiAgICAgIG9sZFRTaGlmdCwKICAgICAgb2xkVGlnaHQsCiAgICAgIHByZXZFbXB0eUVuZCwKICAgICAgdGlnaHQ7CgogIGlmIChzaWxlbnQpIHsKICAgIC8vIHF1aXJrOiB2YWxpZGF0aW9uIG1vZGUgdmFsaWRhdGVzIGEgZGQgYmxvY2sgb25seSwgbm90IGEgd2hvbGUgZGVmbGlzdAogICAgaWYgKHN0YXRlLmRkSW5kZW50IDwgMCkgeyByZXR1cm4gZmFsc2U7IH0KICAgIHJldHVybiBza2lwTWFya2VyKHN0YXRlLCBzdGFydExpbmUpID49IDA7CiAgfQoKICBuZXh0TGluZSA9IHN0YXJ0TGluZSArIDE7CiAgaWYgKHN0YXRlLmlzRW1wdHkobmV4dExpbmUpKSB7CiAgICBpZiAoKytuZXh0TGluZSA+IGVuZExpbmUpIHsgcmV0dXJuIGZhbHNlOyB9CiAgfQoKICBpZiAoc3RhdGUudFNoaWZ0W25leHRMaW5lXSA8IHN0YXRlLmJsa0luZGVudCkgeyByZXR1cm4gZmFsc2U7IH0KICBjb250ZW50U3RhcnQgPSBza2lwTWFya2VyKHN0YXRlLCBuZXh0TGluZSk7CiAgaWYgKGNvbnRlbnRTdGFydCA8IDApIHsgcmV0dXJuIGZhbHNlOyB9CgogIGlmIChzdGF0ZS5sZXZlbCA+PSBzdGF0ZS5vcHRpb25zLm1heE5lc3RpbmcpIHsgcmV0dXJuIGZhbHNlOyB9CgogIC8vIFN0YXJ0IGxpc3QKICBsaXN0VG9rSWR4ID0gc3RhdGUudG9rZW5zLmxlbmd0aDsKCiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ2RsX29wZW4nLAogICAgbGluZXM6IGxpc3RMaW5lcyA9IFsgc3RhcnRMaW5lLCAwIF0sCiAgICBsZXZlbDogc3RhdGUubGV2ZWwrKwogIH0pOwoKICAvLwogIC8vIEl0ZXJhdGUgbGlzdCBpdGVtcwogIC8vCgogIGR0TGluZSA9IHN0YXJ0TGluZTsKICBkZExpbmUgPSBuZXh0TGluZTsKCiAgLy8gT25lIGRlZmluaXRpb24gbGlzdCBjYW4gY29udGFpbiBtdWx0aXBsZSBEVHMsCiAgLy8gYW5kIG9uZSBEVCBjYW4gYmUgZm9sbG93ZWQgYnkgbXVsdGlwbGUgRERzLgogIC8vCiAgLy8gVGh1cywgdGhlcmUgaXMgdHdvIGxvb3BzIGhlcmUsIGFuZCBsYWJlbCBpcwogIC8vIG5lZWRlZCB0byBicmVhayBvdXQgb2YgdGhlIHNlY29uZCBvbmUKICAvLwogIC8qZXNsaW50IG5vLWxhYmVsczowLGJsb2NrLXNjb3BlZC12YXI6MCovCiAgT1VURVI6CiAgZm9yICg7OykgewogICAgdGlnaHQgPSB0cnVlOwogICAgcHJldkVtcHR5RW5kID0gZmFsc2U7CgogICAgc3RhdGUudG9rZW5zLnB1c2goewogICAgICB0eXBlOiAnZHRfb3BlbicsCiAgICAgIGxpbmVzOiBbIGR0TGluZSwgZHRMaW5lIF0sCiAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbCsrCiAgICB9KTsKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgdHlwZTogJ2lubGluZScsCiAgICAgIGNvbnRlbnQ6IHN0YXRlLmdldExpbmVzKGR0TGluZSwgZHRMaW5lICsgMSwgc3RhdGUuYmxrSW5kZW50LCBmYWxzZSkudHJpbSgpLAogICAgICBsZXZlbDogc3RhdGUubGV2ZWwgKyAxLAogICAgICBsaW5lczogWyBkdExpbmUsIGR0TGluZSBdLAogICAgICBjaGlsZHJlbjogW10KICAgIH0pOwogICAgc3RhdGUudG9rZW5zLnB1c2goewogICAgICB0eXBlOiAnZHRfY2xvc2UnLAogICAgICBsZXZlbDogLS1zdGF0ZS5sZXZlbAogICAgfSk7CgogICAgZm9yICg7OykgewogICAgICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICAgICAgdHlwZTogJ2RkX29wZW4nLAogICAgICAgIGxpbmVzOiBpdGVtTGluZXMgPSBbIG5leHRMaW5lLCAwIF0sCiAgICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsKysKICAgICAgfSk7CgogICAgICBvbGRUaWdodCA9IHN0YXRlLnRpZ2h0OwogICAgICBvbGREREluZGVudCA9IHN0YXRlLmRkSW5kZW50OwogICAgICBvbGRJbmRlbnQgPSBzdGF0ZS5ibGtJbmRlbnQ7CiAgICAgIG9sZFRTaGlmdCA9IHN0YXRlLnRTaGlmdFtkZExpbmVdOwogICAgICBvbGRQYXJlbnRUeXBlID0gc3RhdGUucGFyZW50VHlwZTsKICAgICAgc3RhdGUuYmxrSW5kZW50ID0gc3RhdGUuZGRJbmRlbnQgPSBzdGF0ZS50U2hpZnRbZGRMaW5lXSArIDI7CiAgICAgIHN0YXRlLnRTaGlmdFtkZExpbmVdID0gY29udGVudFN0YXJ0IC0gc3RhdGUuYk1hcmtzW2RkTGluZV07CiAgICAgIHN0YXRlLnRpZ2h0ID0gdHJ1ZTsKICAgICAgc3RhdGUucGFyZW50VHlwZSA9ICdkZWZsaXN0JzsKCiAgICAgIHN0YXRlLnBhcnNlci50b2tlbml6ZShzdGF0ZSwgZGRMaW5lLCBlbmRMaW5lLCB0cnVlKTsKCiAgICAgIC8vIElmIGFueSBvZiBsaXN0IGl0ZW0gaXMgdGlnaHQsIG1hcmsgbGlzdCBhcyB0aWdodAogICAgICBpZiAoIXN0YXRlLnRpZ2h0IHx8IHByZXZFbXB0eUVuZCkgewogICAgICAgIHRpZ2h0ID0gZmFsc2U7CiAgICAgIH0KICAgICAgLy8gSXRlbSBiZWNvbWUgbG9vc2UgaWYgZmluaXNoIHdpdGggZW1wdHkgbGluZSwKICAgICAgLy8gYnV0IHdlIHNob3VsZCBmaWx0ZXIgbGFzdCBlbGVtZW50LCBiZWNhdXNlIGl0IG1lYW5zIGxpc3QgZmluaXNoCiAgICAgIHByZXZFbXB0eUVuZCA9IChzdGF0ZS5saW5lIC0gZGRMaW5lKSA+IDEgJiYgc3RhdGUuaXNFbXB0eShzdGF0ZS5saW5lIC0gMSk7CgogICAgICBzdGF0ZS50U2hpZnRbZGRMaW5lXSA9IG9sZFRTaGlmdDsKICAgICAgc3RhdGUudGlnaHQgPSBvbGRUaWdodDsKICAgICAgc3RhdGUucGFyZW50VHlwZSA9IG9sZFBhcmVudFR5cGU7CiAgICAgIHN0YXRlLmJsa0luZGVudCA9IG9sZEluZGVudDsKICAgICAgc3RhdGUuZGRJbmRlbnQgPSBvbGREREluZGVudDsKCiAgICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgICB0eXBlOiAnZGRfY2xvc2UnLAogICAgICAgIGxldmVsOiAtLXN0YXRlLmxldmVsCiAgICAgIH0pOwoKICAgICAgaXRlbUxpbmVzWzFdID0gbmV4dExpbmUgPSBzdGF0ZS5saW5lOwoKICAgICAgaWYgKG5leHRMaW5lID49IGVuZExpbmUpIHsgYnJlYWsgT1VURVI7IH0KCiAgICAgIGlmIChzdGF0ZS50U2hpZnRbbmV4dExpbmVdIDwgc3RhdGUuYmxrSW5kZW50KSB7IGJyZWFrIE9VVEVSOyB9CiAgICAgIGNvbnRlbnRTdGFydCA9IHNraXBNYXJrZXIoc3RhdGUsIG5leHRMaW5lKTsKICAgICAgaWYgKGNvbnRlbnRTdGFydCA8IDApIHsgYnJlYWs7IH0KCiAgICAgIGRkTGluZSA9IG5leHRMaW5lOwoKICAgICAgLy8gZ28gdG8gdGhlIG5leHQgbG9vcCBpdGVyYXRpb246CiAgICAgIC8vIGluc2VydCBERCB0YWcgYW5kIHJlcGVhdCBjaGVja2luZwogICAgfQoKICAgIGlmIChuZXh0TGluZSA+PSBlbmRMaW5lKSB7IGJyZWFrOyB9CiAgICBkdExpbmUgPSBuZXh0TGluZTsKCiAgICBpZiAoc3RhdGUuaXNFbXB0eShkdExpbmUpKSB7IGJyZWFrOyB9CiAgICBpZiAoc3RhdGUudFNoaWZ0W2R0TGluZV0gPCBzdGF0ZS5ibGtJbmRlbnQpIHsgYnJlYWs7IH0KCiAgICBkZExpbmUgPSBkdExpbmUgKyAxOwogICAgaWYgKGRkTGluZSA+PSBlbmRMaW5lKSB7IGJyZWFrOyB9CiAgICBpZiAoc3RhdGUuaXNFbXB0eShkZExpbmUpKSB7IGRkTGluZSsrOyB9CiAgICBpZiAoZGRMaW5lID49IGVuZExpbmUpIHsgYnJlYWs7IH0KCiAgICBpZiAoc3RhdGUudFNoaWZ0W2RkTGluZV0gPCBzdGF0ZS5ibGtJbmRlbnQpIHsgYnJlYWs7IH0KICAgIGNvbnRlbnRTdGFydCA9IHNraXBNYXJrZXIoc3RhdGUsIGRkTGluZSk7CiAgICBpZiAoY29udGVudFN0YXJ0IDwgMCkgeyBicmVhazsgfQoKICAgIC8vIGdvIHRvIHRoZSBuZXh0IGxvb3AgaXRlcmF0aW9uOgogICAgLy8gaW5zZXJ0IERUIGFuZCBERCB0YWdzIGFuZCByZXBlYXQgY2hlY2tpbmcKICB9CgogIC8vIEZpbmlsaXplIGxpc3QKICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICB0eXBlOiAnZGxfY2xvc2UnLAogICAgbGV2ZWw6IC0tc3RhdGUubGV2ZWwKICB9KTsKICBsaXN0TGluZXNbMV0gPSBuZXh0TGluZTsKCiAgc3RhdGUubGluZSA9IG5leHRMaW5lOwoKICAvLyBtYXJrIHBhcmFncmFwaHMgdGlnaHQgaWYgbmVlZGVkCiAgaWYgKHRpZ2h0KSB7CiAgICBtYXJrVGlnaHRQYXJhZ3JhcGhzKHN0YXRlLCBsaXN0VG9rSWR4KTsKICB9CgogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sMjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBmZW5jZXMgKGBgYCBsYW5nLCB+fn4gbGFuZykKCid1c2Ugc3RyaWN0JzsKCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGZlbmNlcyhzdGF0ZSwgc3RhcnRMaW5lLCBlbmRMaW5lLCBzaWxlbnQpIHsKICB2YXIgbWFya2VyLCBsZW4sIHBhcmFtcywgbmV4dExpbmUsIG1lbSwKICAgICAgaGF2ZUVuZE1hcmtlciA9IGZhbHNlLAogICAgICBwb3MgPSBzdGF0ZS5iTWFya3Nbc3RhcnRMaW5lXSArIHN0YXRlLnRTaGlmdFtzdGFydExpbmVdLAogICAgICBtYXggPSBzdGF0ZS5lTWFya3Nbc3RhcnRMaW5lXTsKCiAgaWYgKHBvcyArIDMgPiBtYXgpIHsgcmV0dXJuIGZhbHNlOyB9CgogIG1hcmtlciA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcyk7CgogIGlmIChtYXJrZXIgIT09IDB4N0UvKiB+ICovICYmIG1hcmtlciAhPT0gMHg2MCAvKiBgICovKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICAvLyBzY2FuIG1hcmtlciBsZW5ndGgKICBtZW0gPSBwb3M7CiAgcG9zID0gc3RhdGUuc2tpcENoYXJzKHBvcywgbWFya2VyKTsKCiAgbGVuID0gcG9zIC0gbWVtOwoKICBpZiAobGVuIDwgMykgeyByZXR1cm4gZmFsc2U7IH0KCiAgcGFyYW1zID0gc3RhdGUuc3JjLnNsaWNlKHBvcywgbWF4KS50cmltKCk7CgogIGlmIChwYXJhbXMuaW5kZXhPZignYCcpID49IDApIHsgcmV0dXJuIGZhbHNlOyB9CgogIC8vIFNpbmNlIHN0YXJ0IGlzIGZvdW5kLCB3ZSBjYW4gcmVwb3J0IHN1Y2Nlc3MgaGVyZSBpbiB2YWxpZGF0aW9uIG1vZGUKICBpZiAoc2lsZW50KSB7IHJldHVybiB0cnVlOyB9CgogIC8vIHNlYXJjaCBlbmQgb2YgYmxvY2sKICBuZXh0TGluZSA9IHN0YXJ0TGluZTsKCiAgZm9yICg7OykgewogICAgbmV4dExpbmUrKzsKICAgIGlmIChuZXh0TGluZSA+PSBlbmRMaW5lKSB7CiAgICAgIC8vIHVuY2xvc2VkIGJsb2NrIHNob3VsZCBiZSBhdXRvY2xvc2VkIGJ5IGVuZCBvZiBkb2N1bWVudC4KICAgICAgLy8gYWxzbyBibG9jayBzZWVtcyB0byBiZSBhdXRvY2xvc2VkIGJ5IGVuZCBvZiBwYXJlbnQKICAgICAgYnJlYWs7CiAgICB9CgogICAgcG9zID0gbWVtID0gc3RhdGUuYk1hcmtzW25leHRMaW5lXSArIHN0YXRlLnRTaGlmdFtuZXh0TGluZV07CiAgICBtYXggPSBzdGF0ZS5lTWFya3NbbmV4dExpbmVdOwoKICAgIGlmIChwb3MgPCBtYXggJiYgc3RhdGUudFNoaWZ0W25leHRMaW5lXSA8IHN0YXRlLmJsa0luZGVudCkgewogICAgICAvLyBub24tZW1wdHkgbGluZSB3aXRoIG5lZ2F0aXZlIGluZGVudCBzaG91bGQgc3RvcCB0aGUgbGlzdDoKICAgICAgLy8gLSBgYGAKICAgICAgLy8gIHRlc3QKICAgICAgYnJlYWs7CiAgICB9CgogICAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgIT09IG1hcmtlcikgeyBjb250aW51ZTsgfQoKICAgIGlmIChzdGF0ZS50U2hpZnRbbmV4dExpbmVdIC0gc3RhdGUuYmxrSW5kZW50ID49IDQpIHsKICAgICAgLy8gY2xvc2luZyBmZW5jZSBzaG91bGQgYmUgaW5kZW50ZWQgbGVzcyB0aGFuIDQgc3BhY2VzCiAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIHBvcyA9IHN0YXRlLnNraXBDaGFycyhwb3MsIG1hcmtlcik7CgogICAgLy8gY2xvc2luZyBjb2RlIGZlbmNlIG11c3QgYmUgYXQgbGVhc3QgYXMgbG9uZyBhcyB0aGUgb3BlbmluZyBvbmUKICAgIGlmIChwb3MgLSBtZW0gPCBsZW4pIHsgY29udGludWU7IH0KCiAgICAvLyBtYWtlIHN1cmUgdGFpbCBoYXMgc3BhY2VzIG9ubHkKICAgIHBvcyA9IHN0YXRlLnNraXBTcGFjZXMocG9zKTsKCiAgICBpZiAocG9zIDwgbWF4KSB7IGNvbnRpbnVlOyB9CgogICAgaGF2ZUVuZE1hcmtlciA9IHRydWU7CiAgICAvLyBmb3VuZCEKICAgIGJyZWFrOwogIH0KCiAgLy8gSWYgYSBmZW5jZSBoYXMgaGVhZGluZyBzcGFjZXMsIHRoZXkgc2hvdWxkIGJlIHJlbW92ZWQgZnJvbSBpdHMgaW5uZXIgYmxvY2sKICBsZW4gPSBzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXTsKCiAgc3RhdGUubGluZSA9IG5leHRMaW5lICsgKGhhdmVFbmRNYXJrZXIgPyAxIDogMCk7CiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ2ZlbmNlJywKICAgIHBhcmFtczogcGFyYW1zLAogICAgY29udGVudDogc3RhdGUuZ2V0TGluZXMoc3RhcnRMaW5lICsgMSwgbmV4dExpbmUsIGxlbiwgdHJ1ZSksCiAgICBsaW5lczogWyBzdGFydExpbmUsIHN0YXRlLmxpbmUgXSwKICAgIGxldmVsOiBzdGF0ZS5sZXZlbAogIH0pOwoKICByZXR1cm4gdHJ1ZTsKfTsKCn0se31dLDI1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gUHJvY2VzcyBmb290bm90ZSByZWZlcmVuY2UgbGlzdAoKJ3VzZSBzdHJpY3QnOwoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZm9vdG5vdGUoc3RhdGUsIHN0YXJ0TGluZSwgZW5kTGluZSwgc2lsZW50KSB7CiAgdmFyIG9sZEJNYXJrLCBvbGRUU2hpZnQsIG9sZFBhcmVudFR5cGUsIHBvcywgbGFiZWwsCiAgICAgIHN0YXJ0ID0gc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV0gKyBzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXSwKICAgICAgbWF4ID0gc3RhdGUuZU1hcmtzW3N0YXJ0TGluZV07CgogIC8vIGxpbmUgc2hvdWxkIGJlIGF0IGxlYXN0IDUgY2hhcnMgLSAiW154XToiCiAgaWYgKHN0YXJ0ICsgNCA+IG1heCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0KSAhPT0gMHg1Qi8qIFsgKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0ICsgMSkgIT09IDB4NUUvKiBeICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzdGF0ZS5sZXZlbCA+PSBzdGF0ZS5vcHRpb25zLm1heE5lc3RpbmcpIHsgcmV0dXJuIGZhbHNlOyB9CgogIGZvciAocG9zID0gc3RhcnQgKyAyOyBwb3MgPCBtYXg7IHBvcysrKSB7CiAgICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gMHgyMCkgeyByZXR1cm4gZmFsc2U7IH0KICAgIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpID09PSAweDVEIC8qIF0gKi8pIHsKICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICBpZiAocG9zID09PSBzdGFydCArIDIpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIG5vIGVtcHR5IGZvb3Rub3RlIGxhYmVscwogIGlmIChwb3MgKyAxID49IG1heCB8fCBzdGF0ZS5zcmMuY2hhckNvZGVBdCgrK3BvcykgIT09IDB4M0EgLyogOiAqLykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc2lsZW50KSB7IHJldHVybiB0cnVlOyB9CiAgcG9zKys7CgogIGlmICghc3RhdGUuZW52LmZvb3Rub3RlcykgeyBzdGF0ZS5lbnYuZm9vdG5vdGVzID0ge307IH0KICBpZiAoIXN0YXRlLmVudi5mb290bm90ZXMucmVmcykgeyBzdGF0ZS5lbnYuZm9vdG5vdGVzLnJlZnMgPSB7fTsgfQogIGxhYmVsID0gc3RhdGUuc3JjLnNsaWNlKHN0YXJ0ICsgMiwgcG9zIC0gMik7CiAgc3RhdGUuZW52LmZvb3Rub3Rlcy5yZWZzWyc6JyArIGxhYmVsXSA9IC0xOwoKICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICB0eXBlOiAnZm9vdG5vdGVfcmVmZXJlbmNlX29wZW4nLAogICAgbGFiZWw6IGxhYmVsLAogICAgbGV2ZWw6IHN0YXRlLmxldmVsKysKICB9KTsKCiAgb2xkQk1hcmsgPSBzdGF0ZS5iTWFya3Nbc3RhcnRMaW5lXTsKICBvbGRUU2hpZnQgPSBzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXTsKICBvbGRQYXJlbnRUeXBlID0gc3RhdGUucGFyZW50VHlwZTsKICBzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXSA9IHN0YXRlLnNraXBTcGFjZXMocG9zKSAtIHBvczsKICBzdGF0ZS5iTWFya3Nbc3RhcnRMaW5lXSA9IHBvczsKICBzdGF0ZS5ibGtJbmRlbnQgKz0gNDsKICBzdGF0ZS5wYXJlbnRUeXBlID0gJ2Zvb3Rub3RlJzsKCiAgaWYgKHN0YXRlLnRTaGlmdFtzdGFydExpbmVdIDwgc3RhdGUuYmxrSW5kZW50KSB7CiAgICBzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXSArPSBzdGF0ZS5ibGtJbmRlbnQ7CiAgICBzdGF0ZS5iTWFya3Nbc3RhcnRMaW5lXSAtPSBzdGF0ZS5ibGtJbmRlbnQ7CiAgfQoKICBzdGF0ZS5wYXJzZXIudG9rZW5pemUoc3RhdGUsIHN0YXJ0TGluZSwgZW5kTGluZSwgdHJ1ZSk7CgogIHN0YXRlLnBhcmVudFR5cGUgPSBvbGRQYXJlbnRUeXBlOwogIHN0YXRlLmJsa0luZGVudCAtPSA0OwogIHN0YXRlLnRTaGlmdFtzdGFydExpbmVdID0gb2xkVFNoaWZ0OwogIHN0YXRlLmJNYXJrc1tzdGFydExpbmVdID0gb2xkQk1hcms7CgogIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgIHR5cGU6ICdmb290bm90ZV9yZWZlcmVuY2VfY2xvc2UnLAogICAgbGV2ZWw6IC0tc3RhdGUubGV2ZWwKICB9KTsKCiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSwyNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGhlYWRpbmcgKCMsICMjLCAuLi4pCgondXNlIHN0cmljdCc7CgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBoZWFkaW5nKHN0YXRlLCBzdGFydExpbmUsIGVuZExpbmUsIHNpbGVudCkgewogIHZhciBjaCwgbGV2ZWwsIHRtcCwKICAgICAgcG9zID0gc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV0gKyBzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXSwKICAgICAgbWF4ID0gc3RhdGUuZU1hcmtzW3N0YXJ0TGluZV07CgogIGlmIChwb3MgPj0gbWF4KSB7IHJldHVybiBmYWxzZTsgfQoKICBjaCAgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpOwoKICBpZiAoY2ggIT09IDB4MjMvKiAjICovIHx8IHBvcyA+PSBtYXgpIHsgcmV0dXJuIGZhbHNlOyB9CgogIC8vIGNvdW50IGhlYWRpbmcgbGV2ZWwKICBsZXZlbCA9IDE7CiAgY2ggPSBzdGF0ZS5zcmMuY2hhckNvZGVBdCgrK3Bvcyk7CiAgd2hpbGUgKGNoID09PSAweDIzLyogIyAqLyAmJiBwb3MgPCBtYXggJiYgbGV2ZWwgPD0gNikgewogICAgbGV2ZWwrKzsKICAgIGNoID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQoKytwb3MpOwogIH0KCiAgaWYgKGxldmVsID4gNiB8fCAocG9zIDwgbWF4ICYmIGNoICE9PSAweDIwLyogc3BhY2UgKi8pKSB7IHJldHVybiBmYWxzZTsgfQoKICBpZiAoc2lsZW50KSB7IHJldHVybiB0cnVlOyB9CgogIC8vIExldCdzIGN1dCB0YWlscyBsaWtlICcgICAgIyMjICAnIGZyb20gdGhlIGVuZCBvZiBzdHJpbmcKCiAgbWF4ID0gc3RhdGUuc2tpcENoYXJzQmFjayhtYXgsIDB4MjAsIHBvcyk7IC8vIHNwYWNlCiAgdG1wID0gc3RhdGUuc2tpcENoYXJzQmFjayhtYXgsIDB4MjMsIHBvcyk7IC8vICMKICBpZiAodG1wID4gcG9zICYmIHN0YXRlLnNyYy5jaGFyQ29kZUF0KHRtcCAtIDEpID09PSAweDIwLyogc3BhY2UgKi8pIHsKICAgIG1heCA9IHRtcDsKICB9CgogIHN0YXRlLmxpbmUgPSBzdGFydExpbmUgKyAxOwoKICBzdGF0ZS50b2tlbnMucHVzaCh7IHR5cGU6ICdoZWFkaW5nX29wZW4nLAogICAgaExldmVsOiBsZXZlbCwKICAgIGxpbmVzOiBbIHN0YXJ0TGluZSwgc3RhdGUubGluZSBdLAogICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgfSk7CgogIC8vIG9ubHkgaWYgaGVhZGVyIGlzIG5vdCBlbXB0eQogIGlmIChwb3MgPCBtYXgpIHsKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgdHlwZTogJ2lubGluZScsCiAgICAgIGNvbnRlbnQ6IHN0YXRlLnNyYy5zbGljZShwb3MsIG1heCkudHJpbSgpLAogICAgICBsZXZlbDogc3RhdGUubGV2ZWwgKyAxLAogICAgICBsaW5lczogWyBzdGFydExpbmUsIHN0YXRlLmxpbmUgXSwKICAgICAgY2hpbGRyZW46IFtdCiAgICB9KTsKICB9CiAgc3RhdGUudG9rZW5zLnB1c2goeyB0eXBlOiAnaGVhZGluZ19jbG9zZScsIGhMZXZlbDogbGV2ZWwsIGxldmVsOiBzdGF0ZS5sZXZlbCB9KTsKCiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSwyNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIEhvcml6b250YWwgcnVsZQoKJ3VzZSBzdHJpY3QnOwoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaHIoc3RhdGUsIHN0YXJ0TGluZSwgZW5kTGluZSwgc2lsZW50KSB7CiAgdmFyIG1hcmtlciwgY250LCBjaCwKICAgICAgcG9zID0gc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV0sCiAgICAgIG1heCA9IHN0YXRlLmVNYXJrc1tzdGFydExpbmVdOwoKICBwb3MgKz0gc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV07CgogIGlmIChwb3MgPiBtYXgpIHsgcmV0dXJuIGZhbHNlOyB9CgogIG1hcmtlciA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcysrKTsKCiAgLy8gQ2hlY2sgaHIgbWFya2VyCiAgaWYgKG1hcmtlciAhPT0gMHgyQS8qICogKi8gJiYKICAgICAgbWFya2VyICE9PSAweDJELyogLSAqLyAmJgogICAgICBtYXJrZXIgIT09IDB4NUYvKiBfICovKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICAvLyBtYXJrZXJzIGNhbiBiZSBtaXhlZCB3aXRoIHNwYWNlcywgYnV0IHRoZXJlIHNob3VsZCBiZSBhdCBsZWFzdCAzIG9uZQoKICBjbnQgPSAxOwogIHdoaWxlIChwb3MgPCBtYXgpIHsKICAgIGNoID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKyspOwogICAgaWYgKGNoICE9PSBtYXJrZXIgJiYgY2ggIT09IDB4MjAvKiBzcGFjZSAqLykgeyByZXR1cm4gZmFsc2U7IH0KICAgIGlmIChjaCA9PT0gbWFya2VyKSB7IGNudCsrOyB9CiAgfQoKICBpZiAoY250IDwgMykgeyByZXR1cm4gZmFsc2U7IH0KCiAgaWYgKHNpbGVudCkgeyByZXR1cm4gdHJ1ZTsgfQoKICBzdGF0ZS5saW5lID0gc3RhcnRMaW5lICsgMTsKICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICB0eXBlOiAnaHInLAogICAgbGluZXM6IFsgc3RhcnRMaW5lLCBzdGF0ZS5saW5lIF0sCiAgICBsZXZlbDogc3RhdGUubGV2ZWwKICB9KTsKCiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSwyODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIEhUTUwgYmxvY2sKCid1c2Ugc3RyaWN0JzsKCgp2YXIgYmxvY2tfbmFtZXMgPSByZXF1aXJlKCcuLi9jb21tb24vaHRtbF9ibG9ja3MnKTsKCgp2YXIgSFRNTF9UQUdfT1BFTl9SRSA9IC9ePChbYS16QS1aXXsxLDE1fSlbXHNcLz5dLzsKdmFyIEhUTUxfVEFHX0NMT1NFX1JFID0gL148XC8oW2EtekEtWl17MSwxNX0pW1xzPl0vOwoKZnVuY3Rpb24gaXNMZXR0ZXIoY2gpIHsKICAvKmVzbGludCBuby1iaXR3aXNlOjAqLwogIHZhciBsYyA9IGNoIHwgMHgyMDsgLy8gdG8gbG93ZXIgY2FzZQogIHJldHVybiAobGMgPj0gMHg2MS8qIGEgKi8pICYmIChsYyA8PSAweDdhLyogeiAqLyk7Cn0KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaHRtbGJsb2NrKHN0YXRlLCBzdGFydExpbmUsIGVuZExpbmUsIHNpbGVudCkgewogIHZhciBjaCwgbWF0Y2gsIG5leHRMaW5lLAogICAgICBwb3MgPSBzdGF0ZS5iTWFya3Nbc3RhcnRMaW5lXSwKICAgICAgbWF4ID0gc3RhdGUuZU1hcmtzW3N0YXJ0TGluZV0sCiAgICAgIHNoaWZ0ID0gc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV07CgogIHBvcyArPSBzaGlmdDsKCiAgaWYgKCFzdGF0ZS5vcHRpb25zLmh0bWwpIHsgcmV0dXJuIGZhbHNlOyB9CgogIGlmIChzaGlmdCA+IDMgfHwgcG9zICsgMiA+PSBtYXgpIHsgcmV0dXJuIGZhbHNlOyB9CgogIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpICE9PSAweDNDLyogPCAqLykgeyByZXR1cm4gZmFsc2U7IH0KCiAgY2ggPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MgKyAxKTsKCiAgaWYgKGNoID09PSAweDIxLyogISAqLyB8fCBjaCA9PT0gMHgzRi8qID8gKi8pIHsKICAgIC8vIERpcmVjdGl2ZSBzdGFydCAvIGNvbW1lbnQgc3RhcnQgLyBwcm9jZXNzaW5nIGluc3RydWN0aW9uIHN0YXJ0CiAgICBpZiAoc2lsZW50KSB7IHJldHVybiB0cnVlOyB9CgogIH0gZWxzZSBpZiAoY2ggPT09IDB4MkYvKiAvICovIHx8IGlzTGV0dGVyKGNoKSkgewoKICAgIC8vIFByb2JhYmx5IHN0YXJ0IG9yIGVuZCBvZiB0YWcKICAgIGlmIChjaCA9PT0gMHgyRi8qIFwgKi8pIHsKICAgICAgLy8gY2xvc2luZyB0YWcKICAgICAgbWF0Y2ggPSBzdGF0ZS5zcmMuc2xpY2UocG9zLCBtYXgpLm1hdGNoKEhUTUxfVEFHX0NMT1NFX1JFKTsKICAgICAgaWYgKCFtYXRjaCkgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0gZWxzZSB7CiAgICAgIC8vIG9wZW5pbmcgdGFnCiAgICAgIG1hdGNoID0gc3RhdGUuc3JjLnNsaWNlKHBvcywgbWF4KS5tYXRjaChIVE1MX1RBR19PUEVOX1JFKTsKICAgICAgaWYgKCFtYXRjaCkgeyByZXR1cm4gZmFsc2U7IH0KICAgIH0KICAgIC8vIE1ha2Ugc3VyZSB0YWcgbmFtZSBpcyB2YWxpZAogICAgaWYgKGJsb2NrX25hbWVzW21hdGNoWzFdLnRvTG93ZXJDYXNlKCldICE9PSB0cnVlKSB7IHJldHVybiBmYWxzZTsgfQogICAgaWYgKHNpbGVudCkgeyByZXR1cm4gdHJ1ZTsgfQoKICB9IGVsc2UgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8gSWYgd2UgYXJlIGhlcmUgLSB3ZSBkZXRlY3RlZCBIVE1MIGJsb2NrLgogIC8vIExldCdzIHJvbGwgZG93biB0aWxsIGVtcHR5IGxpbmUgKGJsb2NrIGVuZCkuCiAgbmV4dExpbmUgPSBzdGFydExpbmUgKyAxOwogIHdoaWxlIChuZXh0TGluZSA8IHN0YXRlLmxpbmVNYXggJiYgIXN0YXRlLmlzRW1wdHkobmV4dExpbmUpKSB7CiAgICBuZXh0TGluZSsrOwogIH0KCiAgc3RhdGUubGluZSA9IG5leHRMaW5lOwogIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgIHR5cGU6ICdodG1sYmxvY2snLAogICAgbGV2ZWw6IHN0YXRlLmxldmVsLAogICAgbGluZXM6IFsgc3RhcnRMaW5lLCBzdGF0ZS5saW5lIF0sCiAgICBjb250ZW50OiBzdGF0ZS5nZXRMaW5lcyhzdGFydExpbmUsIG5leHRMaW5lLCAwLCB0cnVlKQogIH0pOwoKICByZXR1cm4gdHJ1ZTsKfTsKCn0seyIuLi9jb21tb24vaHRtbF9ibG9ja3MiOjJ9XSwyOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGxoZWFkaW5nICgtLS0sID09PSkKCid1c2Ugc3RyaWN0JzsKCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGxoZWFkaW5nKHN0YXRlLCBzdGFydExpbmUsIGVuZExpbmUvKiwgc2lsZW50Ki8pIHsKICB2YXIgbWFya2VyLCBwb3MsIG1heCwKICAgICAgbmV4dCA9IHN0YXJ0TGluZSArIDE7CgogIGlmIChuZXh0ID49IGVuZExpbmUpIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHN0YXRlLnRTaGlmdFtuZXh0XSA8IHN0YXRlLmJsa0luZGVudCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgLy8gU2NhbiBuZXh0IGxpbmUKCiAgaWYgKHN0YXRlLnRTaGlmdFtuZXh0XSAtIHN0YXRlLmJsa0luZGVudCA+IDMpIHsgcmV0dXJuIGZhbHNlOyB9CgogIHBvcyA9IHN0YXRlLmJNYXJrc1tuZXh0XSArIHN0YXRlLnRTaGlmdFtuZXh0XTsKICBtYXggPSBzdGF0ZS5lTWFya3NbbmV4dF07CgogIGlmIChwb3MgPj0gbWF4KSB7IHJldHVybiBmYWxzZTsgfQoKICBtYXJrZXIgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpOwoKICBpZiAobWFya2VyICE9PSAweDJELyogLSAqLyAmJiBtYXJrZXIgIT09IDB4M0QvKiA9ICovKSB7IHJldHVybiBmYWxzZTsgfQoKICBwb3MgPSBzdGF0ZS5za2lwQ2hhcnMocG9zLCBtYXJrZXIpOwoKICBwb3MgPSBzdGF0ZS5za2lwU3BhY2VzKHBvcyk7CgogIGlmIChwb3MgPCBtYXgpIHsgcmV0dXJuIGZhbHNlOyB9CgogIHBvcyA9IHN0YXRlLmJNYXJrc1tzdGFydExpbmVdICsgc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV07CgogIHN0YXRlLmxpbmUgPSBuZXh0ICsgMTsKICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICB0eXBlOiAnaGVhZGluZ19vcGVuJywKICAgIGhMZXZlbDogbWFya2VyID09PSAweDNELyogPSAqLyA/IDEgOiAyLAogICAgbGluZXM6IFsgc3RhcnRMaW5lLCBzdGF0ZS5saW5lIF0sCiAgICBsZXZlbDogc3RhdGUubGV2ZWwKICB9KTsKICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICB0eXBlOiAnaW5saW5lJywKICAgIGNvbnRlbnQ6IHN0YXRlLnNyYy5zbGljZShwb3MsIHN0YXRlLmVNYXJrc1tzdGFydExpbmVdKS50cmltKCksCiAgICBsZXZlbDogc3RhdGUubGV2ZWwgKyAxLAogICAgbGluZXM6IFsgc3RhcnRMaW5lLCBzdGF0ZS5saW5lIC0gMSBdLAogICAgY2hpbGRyZW46IFtdCiAgfSk7CiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ2hlYWRpbmdfY2xvc2UnLAogICAgaExldmVsOiBtYXJrZXIgPT09IDB4M0QvKiA9ICovID8gMSA6IDIsCiAgICBsZXZlbDogc3RhdGUubGV2ZWwKICB9KTsKCiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSwzMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIExpc3RzCgondXNlIHN0cmljdCc7CgoKLy8gU2VhcmNoIGBbLSsqXVtcbiBdYCwgcmV0dXJucyBuZXh0IHBvcyBhcnRlciBtYXJrZXIgb24gc3VjY2VzcwovLyBvciAtMSBvbiBmYWlsLgpmdW5jdGlvbiBza2lwQnVsbGV0TGlzdE1hcmtlcihzdGF0ZSwgc3RhcnRMaW5lKSB7CiAgdmFyIG1hcmtlciwgcG9zLCBtYXg7CgogIHBvcyA9IHN0YXRlLmJNYXJrc1tzdGFydExpbmVdICsgc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV07CiAgbWF4ID0gc3RhdGUuZU1hcmtzW3N0YXJ0TGluZV07CgogIGlmIChwb3MgPj0gbWF4KSB7IHJldHVybiAtMTsgfQoKICBtYXJrZXIgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MrKyk7CiAgLy8gQ2hlY2sgYnVsbGV0CiAgaWYgKG1hcmtlciAhPT0gMHgyQS8qICogKi8gJiYKICAgICAgbWFya2VyICE9PSAweDJELyogLSAqLyAmJgogICAgICBtYXJrZXIgIT09IDB4MkIvKiArICovKSB7CiAgICByZXR1cm4gLTE7CiAgfQoKICBpZiAocG9zIDwgbWF4ICYmIHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgIT09IDB4MjApIHsKICAgIC8vICIgMS50ZXN0ICIgLSBpcyBub3QgYSBsaXN0IGl0ZW0KICAgIHJldHVybiAtMTsKICB9CgogIHJldHVybiBwb3M7Cn0KCi8vIFNlYXJjaCBgXGQrWy4pXVtcbiBdYCwgcmV0dXJucyBuZXh0IHBvcyBhcnRlciBtYXJrZXIgb24gc3VjY2VzcwovLyBvciAtMSBvbiBmYWlsLgpmdW5jdGlvbiBza2lwT3JkZXJlZExpc3RNYXJrZXIoc3RhdGUsIHN0YXJ0TGluZSkgewogIHZhciBjaCwKICAgICAgcG9zID0gc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV0gKyBzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXSwKICAgICAgbWF4ID0gc3RhdGUuZU1hcmtzW3N0YXJ0TGluZV07CgogIGlmIChwb3MgKyAxID49IG1heCkgeyByZXR1cm4gLTE7IH0KCiAgY2ggPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MrKyk7CgogIGlmIChjaCA8IDB4MzAvKiAwICovIHx8IGNoID4gMHgzOS8qIDkgKi8pIHsgcmV0dXJuIC0xOyB9CgogIGZvciAoOzspIHsKICAgIC8vIEVPTCAtPiBmYWlsCiAgICBpZiAocG9zID49IG1heCkgeyByZXR1cm4gLTE7IH0KCiAgICBjaCA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcysrKTsKCiAgICBpZiAoY2ggPj0gMHgzMC8qIDAgKi8gJiYgY2ggPD0gMHgzOS8qIDkgKi8pIHsKICAgICAgY29udGludWU7CiAgICB9CgogICAgLy8gZm91bmQgdmFsaWQgbWFya2VyCiAgICBpZiAoY2ggPT09IDB4MjkvKiApICovIHx8IGNoID09PSAweDJlLyogLiAqLykgewogICAgICBicmVhazsKICAgIH0KCiAgICByZXR1cm4gLTE7CiAgfQoKCiAgaWYgKHBvcyA8IG1heCAmJiBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpICE9PSAweDIwLyogc3BhY2UgKi8pIHsKICAgIC8vICIgMS50ZXN0ICIgLSBpcyBub3QgYSBsaXN0IGl0ZW0KICAgIHJldHVybiAtMTsKICB9CiAgcmV0dXJuIHBvczsKfQoKZnVuY3Rpb24gbWFya1RpZ2h0UGFyYWdyYXBocyhzdGF0ZSwgaWR4KSB7CiAgdmFyIGksIGwsCiAgICAgIGxldmVsID0gc3RhdGUubGV2ZWwgKyAyOwoKICBmb3IgKGkgPSBpZHggKyAyLCBsID0gc3RhdGUudG9rZW5zLmxlbmd0aCAtIDI7IGkgPCBsOyBpKyspIHsKICAgIGlmIChzdGF0ZS50b2tlbnNbaV0ubGV2ZWwgPT09IGxldmVsICYmIHN0YXRlLnRva2Vuc1tpXS50eXBlID09PSAncGFyYWdyYXBoX29wZW4nKSB7CiAgICAgIHN0YXRlLnRva2Vuc1tpICsgMl0udGlnaHQgPSB0cnVlOwogICAgICBzdGF0ZS50b2tlbnNbaV0udGlnaHQgPSB0cnVlOwogICAgICBpICs9IDI7CiAgICB9CiAgfQp9CgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBsaXN0KHN0YXRlLCBzdGFydExpbmUsIGVuZExpbmUsIHNpbGVudCkgewogIHZhciBuZXh0TGluZSwKICAgICAgaW5kZW50LAogICAgICBvbGRUU2hpZnQsCiAgICAgIG9sZEluZGVudCwKICAgICAgb2xkVGlnaHQsCiAgICAgIG9sZFBhcmVudFR5cGUsCiAgICAgIHN0YXJ0LAogICAgICBwb3NBZnRlck1hcmtlciwKICAgICAgbWF4LAogICAgICBpbmRlbnRBZnRlck1hcmtlciwKICAgICAgbWFya2VyVmFsdWUsCiAgICAgIG1hcmtlckNoYXJDb2RlLAogICAgICBpc09yZGVyZWQsCiAgICAgIGNvbnRlbnRTdGFydCwKICAgICAgbGlzdFRva0lkeCwKICAgICAgcHJldkVtcHR5RW5kLAogICAgICBsaXN0TGluZXMsCiAgICAgIGl0ZW1MaW5lcywKICAgICAgdGlnaHQgPSB0cnVlLAogICAgICB0ZXJtaW5hdG9yUnVsZXMsCiAgICAgIGksIGwsIHRlcm1pbmF0ZTsKCiAgLy8gRGV0ZWN0IGxpc3QgdHlwZSBhbmQgcG9zaXRpb24gYWZ0ZXIgbWFya2VyCiAgaWYgKChwb3NBZnRlck1hcmtlciA9IHNraXBPcmRlcmVkTGlzdE1hcmtlcihzdGF0ZSwgc3RhcnRMaW5lKSkgPj0gMCkgewogICAgaXNPcmRlcmVkID0gdHJ1ZTsKICB9IGVsc2UgaWYgKChwb3NBZnRlck1hcmtlciA9IHNraXBCdWxsZXRMaXN0TWFya2VyKHN0YXRlLCBzdGFydExpbmUpKSA+PSAwKSB7CiAgICBpc09yZGVyZWQgPSBmYWxzZTsKICB9IGVsc2UgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgaWYgKHN0YXRlLmxldmVsID49IHN0YXRlLm9wdGlvbnMubWF4TmVzdGluZykgeyByZXR1cm4gZmFsc2U7IH0KCiAgLy8gV2Ugc2hvdWxkIHRlcm1pbmF0ZSBsaXN0IG9uIHN0eWxlIGNoYW5nZS4gUmVtZW1iZXIgZmlyc3Qgb25lIHRvIGNvbXBhcmUuCiAgbWFya2VyQ2hhckNvZGUgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3NBZnRlck1hcmtlciAtIDEpOwoKICAvLyBGb3IgdmFsaWRhdGlvbiBtb2RlIHdlIGNhbiB0ZXJtaW5hdGUgaW1tZWRpYXRlbHkKICBpZiAoc2lsZW50KSB7IHJldHVybiB0cnVlOyB9CgogIC8vIFN0YXJ0IGxpc3QKICBsaXN0VG9rSWR4ID0gc3RhdGUudG9rZW5zLmxlbmd0aDsKCiAgaWYgKGlzT3JkZXJlZCkgewogICAgc3RhcnQgPSBzdGF0ZS5iTWFya3Nbc3RhcnRMaW5lXSArIHN0YXRlLnRTaGlmdFtzdGFydExpbmVdOwogICAgbWFya2VyVmFsdWUgPSBOdW1iZXIoc3RhdGUuc3JjLnN1YnN0cihzdGFydCwgcG9zQWZ0ZXJNYXJrZXIgLSBzdGFydCAtIDEpKTsKCiAgICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICAgIHR5cGU6ICdvcmRlcmVkX2xpc3Rfb3BlbicsCiAgICAgIG9yZGVyOiBtYXJrZXJWYWx1ZSwKICAgICAgbGluZXM6IGxpc3RMaW5lcyA9IFsgc3RhcnRMaW5lLCAwIF0sCiAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbCsrCiAgICB9KTsKCiAgfSBlbHNlIHsKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgdHlwZTogJ2J1bGxldF9saXN0X29wZW4nLAogICAgICBsaW5lczogbGlzdExpbmVzID0gWyBzdGFydExpbmUsIDAgXSwKICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsKysKICAgIH0pOwogIH0KCiAgLy8KICAvLyBJdGVyYXRlIGxpc3QgaXRlbXMKICAvLwoKICBuZXh0TGluZSA9IHN0YXJ0TGluZTsKICBwcmV2RW1wdHlFbmQgPSBmYWxzZTsKICB0ZXJtaW5hdG9yUnVsZXMgPSBzdGF0ZS5wYXJzZXIucnVsZXIuZ2V0UnVsZXMoJ2xpc3QnKTsKCiAgd2hpbGUgKG5leHRMaW5lIDwgZW5kTGluZSkgewogICAgY29udGVudFN0YXJ0ID0gc3RhdGUuc2tpcFNwYWNlcyhwb3NBZnRlck1hcmtlcik7CiAgICBtYXggPSBzdGF0ZS5lTWFya3NbbmV4dExpbmVdOwoKICAgIGlmIChjb250ZW50U3RhcnQgPj0gbWF4KSB7CiAgICAgIC8vIHRyaW1taW5nIHNwYWNlIGluICItICAgIFxuICAzIiBjYXNlLCBpbmRlbnQgaXMgMSBoZXJlCiAgICAgIGluZGVudEFmdGVyTWFya2VyID0gMTsKICAgIH0gZWxzZSB7CiAgICAgIGluZGVudEFmdGVyTWFya2VyID0gY29udGVudFN0YXJ0IC0gcG9zQWZ0ZXJNYXJrZXI7CiAgICB9CgogICAgLy8gSWYgd2UgaGF2ZSBtb3JlIHRoYW4gNCBzcGFjZXMsIHRoZSBpbmRlbnQgaXMgMQogICAgLy8gKHRoZSByZXN0IGlzIGp1c3QgaW5kZW50ZWQgY29kZSBibG9jaykKICAgIGlmIChpbmRlbnRBZnRlck1hcmtlciA+IDQpIHsgaW5kZW50QWZ0ZXJNYXJrZXIgPSAxOyB9CgogICAgLy8gSWYgaW5kZW50IGlzIGxlc3MgdGhhbiAxLCBhc3N1bWUgdGhhdCBpdCdzIG9uZSwgZXhhbXBsZToKICAgIC8vICAiLVxuICB0ZXN0IgogICAgaWYgKGluZGVudEFmdGVyTWFya2VyIDwgMSkgeyBpbmRlbnRBZnRlck1hcmtlciA9IDE7IH0KCiAgICAvLyAiICAtICB0ZXN0IgogICAgLy8gIF5eXl5eIC0gY2FsY3VsYXRpbmcgdG90YWwgbGVuZ3RoIG9mIHRoaXMgdGhpbmcKICAgIGluZGVudCA9IChwb3NBZnRlck1hcmtlciAtIHN0YXRlLmJNYXJrc1tuZXh0TGluZV0pICsgaW5kZW50QWZ0ZXJNYXJrZXI7CgogICAgLy8gUnVuIHN1YnBhcnNlciAmIHdyaXRlIHRva2VucwogICAgc3RhdGUudG9rZW5zLnB1c2goewogICAgICB0eXBlOiAnbGlzdF9pdGVtX29wZW4nLAogICAgICBsaW5lczogaXRlbUxpbmVzID0gWyBzdGFydExpbmUsIDAgXSwKICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsKysKICAgIH0pOwoKICAgIG9sZEluZGVudCA9IHN0YXRlLmJsa0luZGVudDsKICAgIG9sZFRpZ2h0ID0gc3RhdGUudGlnaHQ7CiAgICBvbGRUU2hpZnQgPSBzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXTsKICAgIG9sZFBhcmVudFR5cGUgPSBzdGF0ZS5wYXJlbnRUeXBlOwogICAgc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV0gPSBjb250ZW50U3RhcnQgLSBzdGF0ZS5iTWFya3Nbc3RhcnRMaW5lXTsKICAgIHN0YXRlLmJsa0luZGVudCA9IGluZGVudDsKICAgIHN0YXRlLnRpZ2h0ID0gdHJ1ZTsKICAgIHN0YXRlLnBhcmVudFR5cGUgPSAnbGlzdCc7CgogICAgc3RhdGUucGFyc2VyLnRva2VuaXplKHN0YXRlLCBzdGFydExpbmUsIGVuZExpbmUsIHRydWUpOwoKICAgIC8vIElmIGFueSBvZiBsaXN0IGl0ZW0gaXMgdGlnaHQsIG1hcmsgbGlzdCBhcyB0aWdodAogICAgaWYgKCFzdGF0ZS50aWdodCB8fCBwcmV2RW1wdHlFbmQpIHsKICAgICAgdGlnaHQgPSBmYWxzZTsKICAgIH0KICAgIC8vIEl0ZW0gYmVjb21lIGxvb3NlIGlmIGZpbmlzaCB3aXRoIGVtcHR5IGxpbmUsCiAgICAvLyBidXQgd2Ugc2hvdWxkIGZpbHRlciBsYXN0IGVsZW1lbnQsIGJlY2F1c2UgaXQgbWVhbnMgbGlzdCBmaW5pc2gKICAgIHByZXZFbXB0eUVuZCA9IChzdGF0ZS5saW5lIC0gc3RhcnRMaW5lKSA+IDEgJiYgc3RhdGUuaXNFbXB0eShzdGF0ZS5saW5lIC0gMSk7CgogICAgc3RhdGUuYmxrSW5kZW50ID0gb2xkSW5kZW50OwogICAgc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV0gPSBvbGRUU2hpZnQ7CiAgICBzdGF0ZS50aWdodCA9IG9sZFRpZ2h0OwogICAgc3RhdGUucGFyZW50VHlwZSA9IG9sZFBhcmVudFR5cGU7CgogICAgc3RhdGUudG9rZW5zLnB1c2goewogICAgICB0eXBlOiAnbGlzdF9pdGVtX2Nsb3NlJywKICAgICAgbGV2ZWw6IC0tc3RhdGUubGV2ZWwKICAgIH0pOwoKICAgIG5leHRMaW5lID0gc3RhcnRMaW5lID0gc3RhdGUubGluZTsKICAgIGl0ZW1MaW5lc1sxXSA9IG5leHRMaW5lOwogICAgY29udGVudFN0YXJ0ID0gc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV07CgogICAgaWYgKG5leHRMaW5lID49IGVuZExpbmUpIHsgYnJlYWs7IH0KCiAgICBpZiAoc3RhdGUuaXNFbXB0eShuZXh0TGluZSkpIHsKICAgICAgYnJlYWs7CiAgICB9CgogICAgLy8KICAgIC8vIFRyeSB0byBjaGVjayBpZiBsaXN0IGlzIHRlcm1pbmF0ZWQgb3IgY29udGludWVkLgogICAgLy8KICAgIGlmIChzdGF0ZS50U2hpZnRbbmV4dExpbmVdIDwgc3RhdGUuYmxrSW5kZW50KSB7IGJyZWFrOyB9CgogICAgLy8gZmFpbCBpZiB0ZXJtaW5hdGluZyBibG9jayBmb3VuZAogICAgdGVybWluYXRlID0gZmFsc2U7CiAgICBmb3IgKGkgPSAwLCBsID0gdGVybWluYXRvclJ1bGVzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBpZiAodGVybWluYXRvclJ1bGVzW2ldKHN0YXRlLCBuZXh0TGluZSwgZW5kTGluZSwgdHJ1ZSkpIHsKICAgICAgICB0ZXJtaW5hdGUgPSB0cnVlOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpZiAodGVybWluYXRlKSB7IGJyZWFrOyB9CgogICAgLy8gZmFpbCBpZiBsaXN0IGhhcyBhbm90aGVyIHR5cGUKICAgIGlmIChpc09yZGVyZWQpIHsKICAgICAgcG9zQWZ0ZXJNYXJrZXIgPSBza2lwT3JkZXJlZExpc3RNYXJrZXIoc3RhdGUsIG5leHRMaW5lKTsKICAgICAgaWYgKHBvc0FmdGVyTWFya2VyIDwgMCkgeyBicmVhazsgfQogICAgfSBlbHNlIHsKICAgICAgcG9zQWZ0ZXJNYXJrZXIgPSBza2lwQnVsbGV0TGlzdE1hcmtlcihzdGF0ZSwgbmV4dExpbmUpOwogICAgICBpZiAocG9zQWZ0ZXJNYXJrZXIgPCAwKSB7IGJyZWFrOyB9CiAgICB9CgogICAgaWYgKG1hcmtlckNoYXJDb2RlICE9PSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3NBZnRlck1hcmtlciAtIDEpKSB7IGJyZWFrOyB9CiAgfQoKICAvLyBGaW5pbGl6ZSBsaXN0CiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogaXNPcmRlcmVkID8gJ29yZGVyZWRfbGlzdF9jbG9zZScgOiAnYnVsbGV0X2xpc3RfY2xvc2UnLAogICAgbGV2ZWw6IC0tc3RhdGUubGV2ZWwKICB9KTsKICBsaXN0TGluZXNbMV0gPSBuZXh0TGluZTsKCiAgc3RhdGUubGluZSA9IG5leHRMaW5lOwoKICAvLyBtYXJrIHBhcmFncmFwaHMgdGlnaHQgaWYgbmVlZGVkCiAgaWYgKHRpZ2h0KSB7CiAgICBtYXJrVGlnaHRQYXJhZ3JhcGhzKHN0YXRlLCBsaXN0VG9rSWR4KTsKICB9CgogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sMzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBQYXJhZ3JhcGgKCid1c2Ugc3RyaWN0JzsKCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcmFncmFwaChzdGF0ZSwgc3RhcnRMaW5lLyosIGVuZExpbmUqLykgewogIHZhciBlbmRMaW5lLCBjb250ZW50LCB0ZXJtaW5hdGUsIGksIGwsCiAgICAgIG5leHRMaW5lID0gc3RhcnRMaW5lICsgMSwKICAgICAgdGVybWluYXRvclJ1bGVzOwoKICBlbmRMaW5lID0gc3RhdGUubGluZU1heDsKCiAgLy8ganVtcCBsaW5lLWJ5LWxpbmUgdW50aWwgZW1wdHkgb25lIG9yIEVPRgogIGlmIChuZXh0TGluZSA8IGVuZExpbmUgJiYgIXN0YXRlLmlzRW1wdHkobmV4dExpbmUpKSB7CiAgICB0ZXJtaW5hdG9yUnVsZXMgPSBzdGF0ZS5wYXJzZXIucnVsZXIuZ2V0UnVsZXMoJ3BhcmFncmFwaCcpOwoKICAgIGZvciAoOyBuZXh0TGluZSA8IGVuZExpbmUgJiYgIXN0YXRlLmlzRW1wdHkobmV4dExpbmUpOyBuZXh0TGluZSsrKSB7CiAgICAgIC8vIHRoaXMgd291bGQgYmUgYSBjb2RlIGJsb2NrIG5vcm1hbGx5LCBidXQgYWZ0ZXIgcGFyYWdyYXBoCiAgICAgIC8vIGl0J3MgY29uc2lkZXJlZCBhIGxhenkgY29udGludWF0aW9uIHJlZ2FyZGxlc3Mgb2Ygd2hhdCdzIHRoZXJlCiAgICAgIGlmIChzdGF0ZS50U2hpZnRbbmV4dExpbmVdIC0gc3RhdGUuYmxrSW5kZW50ID4gMykgeyBjb250aW51ZTsgfQoKICAgICAgLy8gU29tZSB0YWdzIGNhbiB0ZXJtaW5hdGUgcGFyYWdyYXBoIHdpdGhvdXQgZW1wdHkgbGluZS4KICAgICAgdGVybWluYXRlID0gZmFsc2U7CiAgICAgIGZvciAoaSA9IDAsIGwgPSB0ZXJtaW5hdG9yUnVsZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgaWYgKHRlcm1pbmF0b3JSdWxlc1tpXShzdGF0ZSwgbmV4dExpbmUsIGVuZExpbmUsIHRydWUpKSB7CiAgICAgICAgICB0ZXJtaW5hdGUgPSB0cnVlOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0ZXJtaW5hdGUpIHsgYnJlYWs7IH0KICAgIH0KICB9CgogIGNvbnRlbnQgPSBzdGF0ZS5nZXRMaW5lcyhzdGFydExpbmUsIG5leHRMaW5lLCBzdGF0ZS5ibGtJbmRlbnQsIGZhbHNlKS50cmltKCk7CgogIHN0YXRlLmxpbmUgPSBuZXh0TGluZTsKICBpZiAoY29udGVudC5sZW5ndGgpIHsKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgdHlwZTogJ3BhcmFncmFwaF9vcGVuJywKICAgICAgdGlnaHQ6IGZhbHNlLAogICAgICBsaW5lczogWyBzdGFydExpbmUsIHN0YXRlLmxpbmUgXSwKICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgICB9KTsKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgdHlwZTogJ2lubGluZScsCiAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsCiAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbCArIDEsCiAgICAgIGxpbmVzOiBbIHN0YXJ0TGluZSwgc3RhdGUubGluZSBdLAogICAgICBjaGlsZHJlbjogW10KICAgIH0pOwogICAgc3RhdGUudG9rZW5zLnB1c2goewogICAgICB0eXBlOiAncGFyYWdyYXBoX2Nsb3NlJywKICAgICAgdGlnaHQ6IGZhbHNlLAogICAgICBsZXZlbDogc3RhdGUubGV2ZWwKICAgIH0pOwogIH0KCiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSwzMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFBhcnNlciBzdGF0ZSBjbGFzcwoKJ3VzZSBzdHJpY3QnOwoKCmZ1bmN0aW9uIFN0YXRlQmxvY2soc3JjLCBwYXJzZXIsIG9wdGlvbnMsIGVudiwgdG9rZW5zKSB7CiAgdmFyIGNoLCBzLCBzdGFydCwgcG9zLCBsZW4sIGluZGVudCwgaW5kZW50X2ZvdW5kOwoKICB0aGlzLnNyYyA9IHNyYzsKCiAgLy8gU2hvcnRjdXRzIHRvIHNpbXBsaWZ5IG5lc3RlZCBjYWxscwogIHRoaXMucGFyc2VyID0gcGFyc2VyOwoKICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwoKICB0aGlzLmVudiA9IGVudjsKCiAgLy8KICAvLyBJbnRlcm5hbCBzdGF0ZSB2YXJ0aWFibGVzCiAgLy8KCiAgdGhpcy50b2tlbnMgPSB0b2tlbnM7CgogIHRoaXMuYk1hcmtzID0gW107ICAvLyBsaW5lIGJlZ2luIG9mZnNldHMgZm9yIGZhc3QganVtcHMKICB0aGlzLmVNYXJrcyA9IFtdOyAgLy8gbGluZSBlbmQgb2Zmc2V0cyBmb3IgZmFzdCBqdW1wcwogIHRoaXMudFNoaWZ0ID0gW107ICAvLyBpbmRlbnQgZm9yIGVhY2ggbGluZQoKICAvLyBibG9jayBwYXJzZXIgdmFyaWFibGVzCiAgdGhpcy5ibGtJbmRlbnQgID0gMDsgLy8gcmVxdWlyZWQgYmxvY2sgY29udGVudCBpbmRlbnQKICAgICAgICAgICAgICAgICAgICAgICAvLyAoZm9yIGV4YW1wbGUsIGlmIHdlIGFyZSBpbiBsaXN0KQogIHRoaXMubGluZSAgICAgICA9IDA7IC8vIGxpbmUgaW5kZXggaW4gc3JjCiAgdGhpcy5saW5lTWF4ICAgID0gMDsgLy8gbGluZXMgY291bnQKICB0aGlzLnRpZ2h0ICAgICAgPSBmYWxzZTsgIC8vIGxvb3NlL3RpZ2h0IG1vZGUgZm9yIGxpc3RzCiAgdGhpcy5wYXJlbnRUeXBlID0gJ3Jvb3QnOyAvLyBpZiBgbGlzdGAsIGJsb2NrIHBhcnNlciBzdG9wcyBvbiB0d28gbmV3bGluZXMKICB0aGlzLmRkSW5kZW50ICAgPSAtMTsgLy8gaW5kZW50IG9mIHRoZSBjdXJyZW50IGRkIGJsb2NrICgtMSBpZiB0aGVyZSBpc24ndCBhbnkpCgogIHRoaXMubGV2ZWwgPSAwOwoKICAvLyByZW5kZXJlcgogIHRoaXMucmVzdWx0ID0gJyc7CgogIC8vIENyZWF0ZSBjYWNoZXMKICAvLyBHZW5lcmF0ZSBtYXJrZXJzLgogIHMgPSB0aGlzLnNyYzsKICBpbmRlbnQgPSAwOwogIGluZGVudF9mb3VuZCA9IGZhbHNlOwoKICBmb3IgKHN0YXJ0ID0gcG9zID0gaW5kZW50ID0gMCwgbGVuID0gcy5sZW5ndGg7IHBvcyA8IGxlbjsgcG9zKyspIHsKICAgIGNoID0gcy5jaGFyQ29kZUF0KHBvcyk7CgogICAgaWYgKCFpbmRlbnRfZm91bmQpIHsKICAgICAgaWYgKGNoID09PSAweDIwLyogc3BhY2UgKi8pIHsKICAgICAgICBpbmRlbnQrKzsKICAgICAgICBjb250aW51ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpbmRlbnRfZm91bmQgPSB0cnVlOwogICAgICB9CiAgICB9CgogICAgaWYgKGNoID09PSAweDBBIHx8IHBvcyA9PT0gbGVuIC0gMSkgewogICAgICBpZiAoY2ggIT09IDB4MEEpIHsgcG9zKys7IH0KICAgICAgdGhpcy5iTWFya3MucHVzaChzdGFydCk7CiAgICAgIHRoaXMuZU1hcmtzLnB1c2gocG9zKTsKICAgICAgdGhpcy50U2hpZnQucHVzaChpbmRlbnQpOwoKICAgICAgaW5kZW50X2ZvdW5kID0gZmFsc2U7CiAgICAgIGluZGVudCA9IDA7CiAgICAgIHN0YXJ0ID0gcG9zICsgMTsKICAgIH0KICB9CgogIC8vIFB1c2ggZmFrZSBlbnRyeSB0byBzaW1wbGlmeSBjYWNoZSBib3VuZHMgY2hlY2tzCiAgdGhpcy5iTWFya3MucHVzaChzLmxlbmd0aCk7CiAgdGhpcy5lTWFya3MucHVzaChzLmxlbmd0aCk7CiAgdGhpcy50U2hpZnQucHVzaCgwKTsKCiAgdGhpcy5saW5lTWF4ID0gdGhpcy5iTWFya3MubGVuZ3RoIC0gMTsgLy8gZG9uJ3QgY291bnQgbGFzdCBmYWtlIGxpbmUKfQoKU3RhdGVCbG9jay5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkobGluZSkgewogIHJldHVybiB0aGlzLmJNYXJrc1tsaW5lXSArIHRoaXMudFNoaWZ0W2xpbmVdID49IHRoaXMuZU1hcmtzW2xpbmVdOwp9OwoKU3RhdGVCbG9jay5wcm90b3R5cGUuc2tpcEVtcHR5TGluZXMgPSBmdW5jdGlvbiBza2lwRW1wdHlMaW5lcyhmcm9tKSB7CiAgZm9yICh2YXIgbWF4ID0gdGhpcy5saW5lTWF4OyBmcm9tIDwgbWF4OyBmcm9tKyspIHsKICAgIGlmICh0aGlzLmJNYXJrc1tmcm9tXSArIHRoaXMudFNoaWZ0W2Zyb21dIDwgdGhpcy5lTWFya3NbZnJvbV0pIHsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiBmcm9tOwp9OwoKLy8gU2tpcCBzcGFjZXMgZnJvbSBnaXZlbiBwb3NpdGlvbi4KU3RhdGVCbG9jay5wcm90b3R5cGUuc2tpcFNwYWNlcyA9IGZ1bmN0aW9uIHNraXBTcGFjZXMocG9zKSB7CiAgZm9yICh2YXIgbWF4ID0gdGhpcy5zcmMubGVuZ3RoOyBwb3MgPCBtYXg7IHBvcysrKSB7CiAgICBpZiAodGhpcy5zcmMuY2hhckNvZGVBdChwb3MpICE9PSAweDIwLyogc3BhY2UgKi8pIHsgYnJlYWs7IH0KICB9CiAgcmV0dXJuIHBvczsKfTsKCi8vIFNraXAgY2hhciBjb2RlcyBmcm9tIGdpdmVuIHBvc2l0aW9uClN0YXRlQmxvY2sucHJvdG90eXBlLnNraXBDaGFycyA9IGZ1bmN0aW9uIHNraXBDaGFycyhwb3MsIGNvZGUpIHsKICBmb3IgKHZhciBtYXggPSB0aGlzLnNyYy5sZW5ndGg7IHBvcyA8IG1heDsgcG9zKyspIHsKICAgIGlmICh0aGlzLnNyYy5jaGFyQ29kZUF0KHBvcykgIT09IGNvZGUpIHsgYnJlYWs7IH0KICB9CiAgcmV0dXJuIHBvczsKfTsKCi8vIFNraXAgY2hhciBjb2RlcyByZXZlcnNlIGZyb20gZ2l2ZW4gcG9zaXRpb24gLSAxClN0YXRlQmxvY2sucHJvdG90eXBlLnNraXBDaGFyc0JhY2sgPSBmdW5jdGlvbiBza2lwQ2hhcnNCYWNrKHBvcywgY29kZSwgbWluKSB7CiAgaWYgKHBvcyA8PSBtaW4pIHsgcmV0dXJuIHBvczsgfQoKICB3aGlsZSAocG9zID4gbWluKSB7CiAgICBpZiAoY29kZSAhPT0gdGhpcy5zcmMuY2hhckNvZGVBdCgtLXBvcykpIHsgcmV0dXJuIHBvcyArIDE7IH0KICB9CiAgcmV0dXJuIHBvczsKfTsKCi8vIGN1dCBsaW5lcyByYW5nZSBmcm9tIHNvdXJjZS4KU3RhdGVCbG9jay5wcm90b3R5cGUuZ2V0TGluZXMgPSBmdW5jdGlvbiBnZXRMaW5lcyhiZWdpbiwgZW5kLCBpbmRlbnQsIGtlZXBMYXN0TEYpIHsKICB2YXIgaSwgZmlyc3QsIGxhc3QsIHF1ZXVlLCBzaGlmdCwKICAgICAgbGluZSA9IGJlZ2luOwoKICBpZiAoYmVnaW4gPj0gZW5kKSB7CiAgICByZXR1cm4gJyc7CiAgfQoKICAvLyBPcHQ6IGRvbid0IHVzZSBwdXNoIHF1ZXVlIGZvciBzaW5nbGUgbGluZTsKICBpZiAobGluZSArIDEgPT09IGVuZCkgewogICAgZmlyc3QgPSB0aGlzLmJNYXJrc1tsaW5lXSArIE1hdGgubWluKHRoaXMudFNoaWZ0W2xpbmVdLCBpbmRlbnQpOwogICAgbGFzdCA9IGtlZXBMYXN0TEYgPyB0aGlzLmVNYXJrc1tsaW5lXSArIDEgOiB0aGlzLmVNYXJrc1tsaW5lXTsKICAgIHJldHVybiB0aGlzLnNyYy5zbGljZShmaXJzdCwgbGFzdCk7CiAgfQoKICBxdWV1ZSA9IG5ldyBBcnJheShlbmQgLSBiZWdpbik7CgogIGZvciAoaSA9IDA7IGxpbmUgPCBlbmQ7IGxpbmUrKywgaSsrKSB7CiAgICBzaGlmdCA9IHRoaXMudFNoaWZ0W2xpbmVdOwogICAgaWYgKHNoaWZ0ID4gaW5kZW50KSB7IHNoaWZ0ID0gaW5kZW50OyB9CiAgICBpZiAoc2hpZnQgPCAwKSB7IHNoaWZ0ID0gMDsgfQoKICAgIGZpcnN0ID0gdGhpcy5iTWFya3NbbGluZV0gKyBzaGlmdDsKCiAgICBpZiAobGluZSArIDEgPCBlbmQgfHwga2VlcExhc3RMRikgewogICAgICAvLyBObyBuZWVkIGZvciBib3VuZHMgY2hlY2sgYmVjYXVzZSB3ZSBoYXZlIGZha2UgZW50cnkgb24gdGFpbC4KICAgICAgbGFzdCA9IHRoaXMuZU1hcmtzW2xpbmVdICsgMTsKICAgIH0gZWxzZSB7CiAgICAgIGxhc3QgPSB0aGlzLmVNYXJrc1tsaW5lXTsKICAgIH0KCiAgICBxdWV1ZVtpXSA9IHRoaXMuc3JjLnNsaWNlKGZpcnN0LCBsYXN0KTsKICB9CgogIHJldHVybiBxdWV1ZS5qb2luKCcnKTsKfTsKCgptb2R1bGUuZXhwb3J0cyA9IFN0YXRlQmxvY2s7Cgp9LHt9XSwzMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIEdGTSB0YWJsZSwgbm9uLXN0YW5kYXJkCgondXNlIHN0cmljdCc7CgoKZnVuY3Rpb24gZ2V0TGluZShzdGF0ZSwgbGluZSkgewogIHZhciBwb3MgPSBzdGF0ZS5iTWFya3NbbGluZV0gKyBzdGF0ZS5ibGtJbmRlbnQsCiAgICAgIG1heCA9IHN0YXRlLmVNYXJrc1tsaW5lXTsKCiAgcmV0dXJuIHN0YXRlLnNyYy5zdWJzdHIocG9zLCBtYXggLSBwb3MpOwp9CgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0YWJsZShzdGF0ZSwgc3RhcnRMaW5lLCBlbmRMaW5lLCBzaWxlbnQpIHsKICB2YXIgY2gsIGxpbmVUZXh0LCBwb3MsIGksIG5leHRMaW5lLCByb3dzLAogICAgICBhbGlnbnMsIHQsIHRhYmxlTGluZXMsIHRib2R5TGluZXM7CgogIC8vIHNob3VsZCBoYXZlIGF0IGxlYXN0IHRocmVlIGxpbmVzCiAgaWYgKHN0YXJ0TGluZSArIDIgPiBlbmRMaW5lKSB7IHJldHVybiBmYWxzZTsgfQoKICBuZXh0TGluZSA9IHN0YXJ0TGluZSArIDE7CgogIGlmIChzdGF0ZS50U2hpZnRbbmV4dExpbmVdIDwgc3RhdGUuYmxrSW5kZW50KSB7IHJldHVybiBmYWxzZTsgfQoKICAvLyBmaXJzdCBjaGFyYWN0ZXIgb2YgdGhlIHNlY29uZCBsaW5lIHNob3VsZCBiZSAnfCcgb3IgJy0nCgogIHBvcyA9IHN0YXRlLmJNYXJrc1tuZXh0TGluZV0gKyBzdGF0ZS50U2hpZnRbbmV4dExpbmVdOwogIGlmIChwb3MgPj0gc3RhdGUuZU1hcmtzW25leHRMaW5lXSkgeyByZXR1cm4gZmFsc2U7IH0KCiAgY2ggPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpOwogIGlmIChjaCAhPT0gMHg3Qy8qIHwgKi8gJiYgY2ggIT09IDB4MkQvKiAtICovICYmIGNoICE9PSAweDNBLyogOiAqLykgeyByZXR1cm4gZmFsc2U7IH0KCiAgbGluZVRleHQgPSBnZXRMaW5lKHN0YXRlLCBzdGFydExpbmUgKyAxKTsKICBpZiAoIS9eWy06fCBdKyQvLnRlc3QobGluZVRleHQpKSB7IHJldHVybiBmYWxzZTsgfQoKICByb3dzID0gbGluZVRleHQuc3BsaXQoJ3wnKTsKICBpZiAocm93cyA8PSAyKSB7IHJldHVybiBmYWxzZTsgfQogIGFsaWducyA9IFtdOwogIGZvciAoaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7CiAgICB0ID0gcm93c1tpXS50cmltKCk7CiAgICBpZiAoIXQpIHsKICAgICAgLy8gYWxsb3cgZW1wdHkgY29sdW1ucyBiZWZvcmUgYW5kIGFmdGVyIHRhYmxlLCBidXQgbm90IGluIGJldHdlZW4gY29sdW1uczsKICAgICAgLy8gZS5nLiBhbGxvdyBgIHwtLS18IGAsIGRpc2FsbG93IGAgLS0tfHwtLS0gYAogICAgICBpZiAoaSA9PT0gMCB8fCBpID09PSByb3dzLmxlbmd0aCAtIDEpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoIS9eOj8tKzo/JC8udGVzdCh0KSkgeyByZXR1cm4gZmFsc2U7IH0KICAgIGlmICh0LmNoYXJDb2RlQXQodC5sZW5ndGggLSAxKSA9PT0gMHgzQS8qIDogKi8pIHsKICAgICAgYWxpZ25zLnB1c2godC5jaGFyQ29kZUF0KDApID09PSAweDNBLyogOiAqLyA/ICdjZW50ZXInIDogJ3JpZ2h0Jyk7CiAgICB9IGVsc2UgaWYgKHQuY2hhckNvZGVBdCgwKSA9PT0gMHgzQS8qIDogKi8pIHsKICAgICAgYWxpZ25zLnB1c2goJ2xlZnQnKTsKICAgIH0gZWxzZSB7CiAgICAgIGFsaWducy5wdXNoKCcnKTsKICAgIH0KICB9CgogIGxpbmVUZXh0ID0gZ2V0TGluZShzdGF0ZSwgc3RhcnRMaW5lKS50cmltKCk7CiAgaWYgKGxpbmVUZXh0LmluZGV4T2YoJ3wnKSA9PT0gLTEpIHsgcmV0dXJuIGZhbHNlOyB9CiAgcm93cyA9IGxpbmVUZXh0LnJlcGxhY2UoL15cfHxcfCQvZywgJycpLnNwbGl0KCd8Jyk7CiAgaWYgKGFsaWducy5sZW5ndGggIT09IHJvd3MubGVuZ3RoKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzaWxlbnQpIHsgcmV0dXJuIHRydWU7IH0KCiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ3RhYmxlX29wZW4nLAogICAgbGluZXM6IHRhYmxlTGluZXMgPSBbIHN0YXJ0TGluZSwgMCBdLAogICAgbGV2ZWw6IHN0YXRlLmxldmVsKysKICB9KTsKICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICB0eXBlOiAndGhlYWRfb3BlbicsCiAgICBsaW5lczogWyBzdGFydExpbmUsIHN0YXJ0TGluZSArIDEgXSwKICAgIGxldmVsOiBzdGF0ZS5sZXZlbCsrCiAgfSk7CgogIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgIHR5cGU6ICd0cl9vcGVuJywKICAgIGxpbmVzOiBbIHN0YXJ0TGluZSwgc3RhcnRMaW5lICsgMSBdLAogICAgbGV2ZWw6IHN0YXRlLmxldmVsKysKICB9KTsKICBmb3IgKGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykgewogICAgc3RhdGUudG9rZW5zLnB1c2goewogICAgICB0eXBlOiAndGhfb3BlbicsCiAgICAgIGFsaWduOiBhbGlnbnNbaV0sCiAgICAgIGxpbmVzOiBbIHN0YXJ0TGluZSwgc3RhcnRMaW5lICsgMSBdLAogICAgICBsZXZlbDogc3RhdGUubGV2ZWwrKwogICAgfSk7CiAgICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICAgIHR5cGU6ICdpbmxpbmUnLAogICAgICBjb250ZW50OiByb3dzW2ldLnRyaW0oKSwKICAgICAgbGluZXM6IFsgc3RhcnRMaW5lLCBzdGFydExpbmUgKyAxIF0sCiAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbCwKICAgICAgY2hpbGRyZW46IFtdCiAgICB9KTsKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsgdHlwZTogJ3RoX2Nsb3NlJywgbGV2ZWw6IC0tc3RhdGUubGV2ZWwgfSk7CiAgfQogIHN0YXRlLnRva2Vucy5wdXNoKHsgdHlwZTogJ3RyX2Nsb3NlJywgbGV2ZWw6IC0tc3RhdGUubGV2ZWwgfSk7CiAgc3RhdGUudG9rZW5zLnB1c2goeyB0eXBlOiAndGhlYWRfY2xvc2UnLCBsZXZlbDogLS1zdGF0ZS5sZXZlbCB9KTsKCiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ3Rib2R5X29wZW4nLAogICAgbGluZXM6IHRib2R5TGluZXMgPSBbIHN0YXJ0TGluZSArIDIsIDAgXSwKICAgIGxldmVsOiBzdGF0ZS5sZXZlbCsrCiAgfSk7CgogIGZvciAobmV4dExpbmUgPSBzdGFydExpbmUgKyAyOyBuZXh0TGluZSA8IGVuZExpbmU7IG5leHRMaW5lKyspIHsKICAgIGlmIChzdGF0ZS50U2hpZnRbbmV4dExpbmVdIDwgc3RhdGUuYmxrSW5kZW50KSB7IGJyZWFrOyB9CgogICAgbGluZVRleHQgPSBnZXRMaW5lKHN0YXRlLCBuZXh0TGluZSkudHJpbSgpOwogICAgaWYgKGxpbmVUZXh0LmluZGV4T2YoJ3wnKSA9PT0gLTEpIHsgYnJlYWs7IH0KICAgIHJvd3MgPSBsaW5lVGV4dC5yZXBsYWNlKC9eXHx8XHwkL2csICcnKS5zcGxpdCgnfCcpOwoKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsgdHlwZTogJ3RyX29wZW4nLCBsZXZlbDogc3RhdGUubGV2ZWwrKyB9KTsKICAgIGZvciAoaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHN0YXRlLnRva2Vucy5wdXNoKHsgdHlwZTogJ3RkX29wZW4nLCBhbGlnbjogYWxpZ25zW2ldLCBsZXZlbDogc3RhdGUubGV2ZWwrKyB9KTsKICAgICAgc3RhdGUudG9rZW5zLnB1c2goewogICAgICAgIHR5cGU6ICdpbmxpbmUnLAogICAgICAgIGNvbnRlbnQ6IHJvd3NbaV0ucmVwbGFjZSgvXlx8PyAqfCAqXHw/JC9nLCAnJyksCiAgICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsLAogICAgICAgIGNoaWxkcmVuOiBbXQogICAgICB9KTsKICAgICAgc3RhdGUudG9rZW5zLnB1c2goeyB0eXBlOiAndGRfY2xvc2UnLCBsZXZlbDogLS1zdGF0ZS5sZXZlbCB9KTsKICAgIH0KICAgIHN0YXRlLnRva2Vucy5wdXNoKHsgdHlwZTogJ3RyX2Nsb3NlJywgbGV2ZWw6IC0tc3RhdGUubGV2ZWwgfSk7CiAgfQogIHN0YXRlLnRva2Vucy5wdXNoKHsgdHlwZTogJ3Rib2R5X2Nsb3NlJywgbGV2ZWw6IC0tc3RhdGUubGV2ZWwgfSk7CiAgc3RhdGUudG9rZW5zLnB1c2goeyB0eXBlOiAndGFibGVfY2xvc2UnLCBsZXZlbDogLS1zdGF0ZS5sZXZlbCB9KTsKCiAgdGFibGVMaW5lc1sxXSA9IHRib2R5TGluZXNbMV0gPSBuZXh0TGluZTsKICBzdGF0ZS5saW5lID0gbmV4dExpbmU7CiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSwzNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFBhcnNlIGFiYnJldmlhdGlvbiBkZWZpbml0aW9ucywgaS5lLiBgKlthYmJyXTogZGVzY3JpcHRpb25gCi8vCgondXNlIHN0cmljdCc7CgoKdmFyIFN0YXRlSW5saW5lICAgID0gcmVxdWlyZSgnLi4vcnVsZXNfaW5saW5lL3N0YXRlX2lubGluZScpOwp2YXIgcGFyc2VMaW5rTGFiZWwgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3BhcnNlX2xpbmtfbGFiZWwnKTsKCgpmdW5jdGlvbiBwYXJzZUFiYnIoc3RyLCBwYXJzZXJJbmxpbmUsIG9wdGlvbnMsIGVudikgewogIHZhciBzdGF0ZSwgbGFiZWxFbmQsIHBvcywgbWF4LCBsYWJlbCwgdGl0bGU7CgogIGlmIChzdHIuY2hhckNvZGVBdCgwKSAhPT0gMHgyQS8qICogKi8pIHsgcmV0dXJuIC0xOyB9CiAgaWYgKHN0ci5jaGFyQ29kZUF0KDEpICE9PSAweDVCLyogWyAqLykgeyByZXR1cm4gLTE7IH0KCiAgaWYgKHN0ci5pbmRleE9mKCddOicpID09PSAtMSkgeyByZXR1cm4gLTE7IH0KCiAgc3RhdGUgPSBuZXcgU3RhdGVJbmxpbmUoc3RyLCBwYXJzZXJJbmxpbmUsIG9wdGlvbnMsIGVudiwgW10pOwogIGxhYmVsRW5kID0gcGFyc2VMaW5rTGFiZWwoc3RhdGUsIDEpOwoKICBpZiAobGFiZWxFbmQgPCAwIHx8IHN0ci5jaGFyQ29kZUF0KGxhYmVsRW5kICsgMSkgIT09IDB4M0EvKiA6ICovKSB7IHJldHVybiAtMTsgfQoKICBtYXggPSBzdGF0ZS5wb3NNYXg7CgogIC8vIGFiYnIgdGl0bGUgaXMgYWx3YXlzIG9uZSBsaW5lLCBzbyBsb29raW5nIGZvciBlbmRpbmcgIlxuIiBoZXJlCiAgZm9yIChwb3MgPSBsYWJlbEVuZCArIDI7IHBvcyA8IG1heDsgcG9zKyspIHsKICAgIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpID09PSAweDBBKSB7IGJyZWFrOyB9CiAgfQoKICBsYWJlbCA9IHN0ci5zbGljZSgyLCBsYWJlbEVuZCk7CiAgdGl0bGUgPSBzdHIuc2xpY2UobGFiZWxFbmQgKyAyLCBwb3MpLnRyaW0oKTsKICBpZiAodGl0bGUubGVuZ3RoID09PSAwKSB7IHJldHVybiAtMTsgfQogIGlmICghZW52LmFiYnJldmlhdGlvbnMpIHsgZW52LmFiYnJldmlhdGlvbnMgPSB7fTsgfQogIC8vIHByZXBlbmQgJzonIHRvIGF2b2lkIGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZSBtZW1iZXJzCiAgaWYgKHR5cGVvZiBlbnYuYWJicmV2aWF0aW9uc1snOicgKyBsYWJlbF0gPT09ICd1bmRlZmluZWQnKSB7CiAgICBlbnYuYWJicmV2aWF0aW9uc1snOicgKyBsYWJlbF0gPSB0aXRsZTsKICB9CgogIHJldHVybiBwb3M7Cn0KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYWJicihzdGF0ZSkgewogIHZhciB0b2tlbnMgPSBzdGF0ZS50b2tlbnMsIGksIGwsIGNvbnRlbnQsIHBvczsKCiAgaWYgKHN0YXRlLmlubGluZU1vZGUpIHsKICAgIHJldHVybjsKICB9CgogIC8vIFBhcnNlIGlubGluZXMKICBmb3IgKGkgPSAxLCBsID0gdG9rZW5zLmxlbmd0aCAtIDE7IGkgPCBsOyBpKyspIHsKICAgIGlmICh0b2tlbnNbaSAtIDFdLnR5cGUgPT09ICdwYXJhZ3JhcGhfb3BlbicgJiYKICAgICAgICB0b2tlbnNbaV0udHlwZSA9PT0gJ2lubGluZScgJiYKICAgICAgICB0b2tlbnNbaSArIDFdLnR5cGUgPT09ICdwYXJhZ3JhcGhfY2xvc2UnKSB7CgogICAgICBjb250ZW50ID0gdG9rZW5zW2ldLmNvbnRlbnQ7CiAgICAgIHdoaWxlIChjb250ZW50Lmxlbmd0aCkgewogICAgICAgIHBvcyA9IHBhcnNlQWJicihjb250ZW50LCBzdGF0ZS5pbmxpbmUsIHN0YXRlLm9wdGlvbnMsIHN0YXRlLmVudik7CiAgICAgICAgaWYgKHBvcyA8IDApIHsgYnJlYWs7IH0KICAgICAgICBjb250ZW50ID0gY29udGVudC5zbGljZShwb3MpLnRyaW0oKTsKICAgICAgfQoKICAgICAgdG9rZW5zW2ldLmNvbnRlbnQgPSBjb250ZW50OwogICAgICBpZiAoIWNvbnRlbnQubGVuZ3RoKSB7CiAgICAgICAgdG9rZW5zW2kgLSAxXS50aWdodCA9IHRydWU7CiAgICAgICAgdG9rZW5zW2kgKyAxXS50aWdodCA9IHRydWU7CiAgICAgIH0KICAgIH0KICB9Cn07Cgp9LHsiLi4vaGVscGVycy9wYXJzZV9saW5rX2xhYmVsIjoxMiwiLi4vcnVsZXNfaW5saW5lL3N0YXRlX2lubGluZSI6NTZ9XSwzNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIEVuY2xvc2UgYWJicmV2aWF0aW9ucyBpbiA8YWJicj4gdGFncwovLwondXNlIHN0cmljdCc7CgoKdmFyIFBVTkNUX0NIQVJTID0gJyBcbigpW11cJyIuLCE/LSc7CgoKLy8gZnJvbSBHb29nbGUgY2xvc3VyZSBsaWJyYXJ5Ci8vIGh0dHA6Ly9jbG9zdXJlLWxpYnJhcnkuZ29vZ2xlY29kZS5jb20vZ2l0LWhpc3RvcnkvZG9jcy9sb2NhbF9jbG9zdXJlX2dvb2dfc3RyaW5nX3N0cmluZy5qcy5zb3VyY2UuaHRtbCNsaW5lMTAyMQpmdW5jdGlvbiByZWdFc2NhcGUocykgewogIHJldHVybiBzLnJlcGxhY2UoLyhbLSgpXFtcXXt9Kz8qLiRcXnwsOiM8IVxcXSkvZywgJ1xcJDEnKTsKfQoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYWJicjIoc3RhdGUpIHsKICB2YXIgaSwgaiwgbCwgdG9rZW5zLCB0b2tlbiwgdGV4dCwgbm9kZXMsIHBvcywgbGV2ZWwsIHJlZywgbSwgcmVnVGV4dCwKICAgICAgYmxvY2tUb2tlbnMgPSBzdGF0ZS50b2tlbnM7CgogIGlmICghc3RhdGUuZW52LmFiYnJldmlhdGlvbnMpIHsgcmV0dXJuOyB9CiAgaWYgKCFzdGF0ZS5lbnYuYWJiclJlZ0V4cCkgewogICAgcmVnVGV4dCA9ICcoXnxbJyArIFBVTkNUX0NIQVJTLnNwbGl0KCcnKS5tYXAocmVnRXNjYXBlKS5qb2luKCcnKSArICddKScKICAgICAgICAgICAgKyAnKCcgKyBPYmplY3Qua2V5cyhzdGF0ZS5lbnYuYWJicmV2aWF0aW9ucykubWFwKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5zdWJzdHIoMSk7CiAgICAgICAgICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIubGVuZ3RoIC0gYS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgfSkubWFwKHJlZ0VzY2FwZSkuam9pbignfCcpICsgJyknCiAgICAgICAgICAgICsgJygkfFsnICsgUFVOQ1RfQ0hBUlMuc3BsaXQoJycpLm1hcChyZWdFc2NhcGUpLmpvaW4oJycpICsgJ10pJzsKICAgIHN0YXRlLmVudi5hYmJyUmVnRXhwID0gbmV3IFJlZ0V4cChyZWdUZXh0LCAnZycpOwogIH0KICByZWcgPSBzdGF0ZS5lbnYuYWJiclJlZ0V4cDsKCiAgZm9yIChqID0gMCwgbCA9IGJsb2NrVG9rZW5zLmxlbmd0aDsgaiA8IGw7IGorKykgewogICAgaWYgKGJsb2NrVG9rZW5zW2pdLnR5cGUgIT09ICdpbmxpbmUnKSB7IGNvbnRpbnVlOyB9CiAgICB0b2tlbnMgPSBibG9ja1Rva2Vuc1tqXS5jaGlsZHJlbjsKCiAgICAvLyBXZSBzY2FuIGZyb20gdGhlIGVuZCwgdG8ga2VlcCBwb3NpdGlvbiB3aGVuIG5ldyB0YWdzIGFkZGVkLgogICAgZm9yIChpID0gdG9rZW5zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgIHRva2VuID0gdG9rZW5zW2ldOwogICAgICBpZiAodG9rZW4udHlwZSAhPT0gJ3RleHQnKSB7IGNvbnRpbnVlOyB9CgogICAgICBwb3MgPSAwOwogICAgICB0ZXh0ID0gdG9rZW4uY29udGVudDsKICAgICAgcmVnLmxhc3RJbmRleCA9IDA7CiAgICAgIGxldmVsID0gdG9rZW4ubGV2ZWw7CiAgICAgIG5vZGVzID0gW107CgogICAgICB3aGlsZSAoKG0gPSByZWcuZXhlYyh0ZXh0KSkpIHsKICAgICAgICBpZiAocmVnLmxhc3RJbmRleCA+IHBvcykgewogICAgICAgICAgbm9kZXMucHVzaCh7CiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgY29udGVudDogdGV4dC5zbGljZShwb3MsIG0uaW5kZXggKyBtWzFdLmxlbmd0aCksCiAgICAgICAgICAgIGxldmVsOiBsZXZlbAogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBub2Rlcy5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdhYmJyX29wZW4nLAogICAgICAgICAgdGl0bGU6IHN0YXRlLmVudi5hYmJyZXZpYXRpb25zWyc6JyArIG1bMl1dLAogICAgICAgICAgbGV2ZWw6IGxldmVsKysKICAgICAgICB9KTsKICAgICAgICBub2Rlcy5wdXNoKHsKICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgIGNvbnRlbnQ6IG1bMl0sCiAgICAgICAgICBsZXZlbDogbGV2ZWwKICAgICAgICB9KTsKICAgICAgICBub2Rlcy5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdhYmJyX2Nsb3NlJywKICAgICAgICAgIGxldmVsOiAtLWxldmVsCiAgICAgICAgfSk7CiAgICAgICAgcG9zID0gcmVnLmxhc3RJbmRleCAtIG1bM10ubGVuZ3RoOwogICAgICB9CgogICAgICBpZiAoIW5vZGVzLmxlbmd0aCkgeyBjb250aW51ZTsgfQoKICAgICAgaWYgKHBvcyA8IHRleHQubGVuZ3RoKSB7CiAgICAgICAgbm9kZXMucHVzaCh7CiAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICBjb250ZW50OiB0ZXh0LnNsaWNlKHBvcyksCiAgICAgICAgICBsZXZlbDogbGV2ZWwKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gcmVwbGFjZSBjdXJyZW50IG5vZGUKICAgICAgYmxvY2tUb2tlbnNbal0uY2hpbGRyZW4gPSB0b2tlbnMgPSBbXS5jb25jYXQodG9rZW5zLnNsaWNlKDAsIGkpLCBub2RlcywgdG9rZW5zLnNsaWNlKGkgKyAxKSk7CiAgICB9CiAgfQp9OwoKfSx7fV0sMzY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJsb2NrKHN0YXRlKSB7CgogIGlmIChzdGF0ZS5pbmxpbmVNb2RlKSB7CiAgICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICAgIHR5cGU6ICdpbmxpbmUnLAogICAgICBjb250ZW50OiBzdGF0ZS5zcmMucmVwbGFjZSgvXG4vZywgJyAnKS50cmltKCksCiAgICAgIGxldmVsOiAwLAogICAgICBsaW5lczogWyAwLCAxIF0sCiAgICAgIGNoaWxkcmVuOiBbXQogICAgfSk7CgogIH0gZWxzZSB7CiAgICBzdGF0ZS5ibG9jay5wYXJzZShzdGF0ZS5zcmMsIHN0YXRlLm9wdGlvbnMsIHN0YXRlLmVudiwgc3RhdGUudG9rZW5zKTsKICB9Cn07Cgp9LHt9XSwzNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGZvb3Rub3RlX2Jsb2NrKHN0YXRlKSB7CiAgdmFyIGksIGwsIGosIHQsIGxhc3RQYXJhZ3JhcGgsIGxpc3QsIHRva2VucywgY3VycmVudCwgY3VycmVudExhYmVsLAogICAgICBsZXZlbCA9IDAsCiAgICAgIGluc2lkZVJlZiA9IGZhbHNlLAogICAgICByZWZUb2tlbnMgPSB7fTsKCiAgaWYgKCFzdGF0ZS5lbnYuZm9vdG5vdGVzKSB7IHJldHVybjsgfQoKICBzdGF0ZS50b2tlbnMgPSBzdGF0ZS50b2tlbnMuZmlsdGVyKGZ1bmN0aW9uKHRvaykgewogICAgaWYgKHRvay50eXBlID09PSAnZm9vdG5vdGVfcmVmZXJlbmNlX29wZW4nKSB7CiAgICAgIGluc2lkZVJlZiA9IHRydWU7CiAgICAgIGN1cnJlbnQgPSBbXTsKICAgICAgY3VycmVudExhYmVsID0gdG9rLmxhYmVsOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAodG9rLnR5cGUgPT09ICdmb290bm90ZV9yZWZlcmVuY2VfY2xvc2UnKSB7CiAgICAgIGluc2lkZVJlZiA9IGZhbHNlOwogICAgICAvLyBwcmVwZW5kICc6JyB0byBhdm9pZCBjb25mbGljdCB3aXRoIE9iamVjdC5wcm90b3R5cGUgbWVtYmVycwogICAgICByZWZUb2tlbnNbJzonICsgY3VycmVudExhYmVsXSA9IGN1cnJlbnQ7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmIChpbnNpZGVSZWYpIHsgY3VycmVudC5wdXNoKHRvayk7IH0KICAgIHJldHVybiAhaW5zaWRlUmVmOwogIH0pOwoKICBpZiAoIXN0YXRlLmVudi5mb290bm90ZXMubGlzdCkgeyByZXR1cm47IH0KICBsaXN0ID0gc3RhdGUuZW52LmZvb3Rub3Rlcy5saXN0OwoKICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICB0eXBlOiAnZm9vdG5vdGVfYmxvY2tfb3BlbicsCiAgICBsZXZlbDogbGV2ZWwrKwogIH0pOwogIGZvciAoaSA9IDAsIGwgPSBsaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgc3RhdGUudG9rZW5zLnB1c2goewogICAgICB0eXBlOiAnZm9vdG5vdGVfb3BlbicsCiAgICAgIGlkOiBpLAogICAgICBsZXZlbDogbGV2ZWwrKwogICAgfSk7CgogICAgaWYgKGxpc3RbaV0udG9rZW5zKSB7CiAgICAgIHRva2VucyA9IFtdOwogICAgICB0b2tlbnMucHVzaCh7CiAgICAgICAgdHlwZTogJ3BhcmFncmFwaF9vcGVuJywKICAgICAgICB0aWdodDogZmFsc2UsCiAgICAgICAgbGV2ZWw6IGxldmVsKysKICAgICAgfSk7CiAgICAgIHRva2Vucy5wdXNoKHsKICAgICAgICB0eXBlOiAnaW5saW5lJywKICAgICAgICBjb250ZW50OiAnJywKICAgICAgICBsZXZlbDogbGV2ZWwsCiAgICAgICAgY2hpbGRyZW46IGxpc3RbaV0udG9rZW5zCiAgICAgIH0pOwogICAgICB0b2tlbnMucHVzaCh7CiAgICAgICAgdHlwZTogJ3BhcmFncmFwaF9jbG9zZScsCiAgICAgICAgdGlnaHQ6IGZhbHNlLAogICAgICAgIGxldmVsOiAtLWxldmVsCiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChsaXN0W2ldLmxhYmVsKSB7CiAgICAgIHRva2VucyA9IHJlZlRva2Vuc1snOicgKyBsaXN0W2ldLmxhYmVsXTsKICAgIH0KCiAgICBzdGF0ZS50b2tlbnMgPSBzdGF0ZS50b2tlbnMuY29uY2F0KHRva2Vucyk7CiAgICBpZiAoc3RhdGUudG9rZW5zW3N0YXRlLnRva2Vucy5sZW5ndGggLSAxXS50eXBlID09PSAncGFyYWdyYXBoX2Nsb3NlJykgewogICAgICBsYXN0UGFyYWdyYXBoID0gc3RhdGUudG9rZW5zLnBvcCgpOwogICAgfSBlbHNlIHsKICAgICAgbGFzdFBhcmFncmFwaCA9IG51bGw7CiAgICB9CgogICAgdCA9IGxpc3RbaV0uY291bnQgPiAwID8gbGlzdFtpXS5jb3VudCA6IDE7CiAgICBmb3IgKGogPSAwOyBqIDwgdDsgaisrKSB7CiAgICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgICB0eXBlOiAnZm9vdG5vdGVfYW5jaG9yJywKICAgICAgICBpZDogaSwKICAgICAgICBzdWJJZDogaiwKICAgICAgICBsZXZlbDogbGV2ZWwKICAgICAgfSk7CiAgICB9CgogICAgaWYgKGxhc3RQYXJhZ3JhcGgpIHsKICAgICAgc3RhdGUudG9rZW5zLnB1c2gobGFzdFBhcmFncmFwaCk7CiAgICB9CgogICAgc3RhdGUudG9rZW5zLnB1c2goewogICAgICB0eXBlOiAnZm9vdG5vdGVfY2xvc2UnLAogICAgICBsZXZlbDogLS1sZXZlbAogICAgfSk7CiAgfQogIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgIHR5cGU6ICdmb290bm90ZV9ibG9ja19jbG9zZScsCiAgICBsZXZlbDogLS1sZXZlbAogIH0pOwp9OwoKfSx7fV0sMzg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlubGluZShzdGF0ZSkgewogIHZhciB0b2tlbnMgPSBzdGF0ZS50b2tlbnMsIHRvaywgaSwgbDsKCiAgLy8gUGFyc2UgaW5saW5lcwogIGZvciAoaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICB0b2sgPSB0b2tlbnNbaV07CiAgICBpZiAodG9rLnR5cGUgPT09ICdpbmxpbmUnKSB7CiAgICAgIHN0YXRlLmlubGluZS5wYXJzZSh0b2suY29udGVudCwgc3RhdGUub3B0aW9ucywgc3RhdGUuZW52LCB0b2suY2hpbGRyZW4pOwogICAgfQogIH0KfTsKCn0se31dLDM5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gUmVwbGFjZSBsaW5rLWxpa2UgdGV4dHMgd2l0aCBsaW5rIG5vZGVzLgovLwovLyBDdXJyZW50bHkgcmVzdHJpY3RlZCBieSBgaW5saW5lLnZhbGlkYXRlTGluaygpYCB0byBodHRwL2h0dHBzL2Z0cAovLwondXNlIHN0cmljdCc7CgoKdmFyIEF1dG9saW5rZXIgPSByZXF1aXJlKCdhdXRvbGlua2VyJyk7CgoKdmFyIExJTktfU0NBTl9SRSA9IC93d3d8QHxcOlwvXC8vOwoKCmZ1bmN0aW9uIGlzTGlua09wZW4oc3RyKSB7CiAgcmV0dXJuIC9ePGFbPlxzXS9pLnRlc3Qoc3RyKTsKfQpmdW5jdGlvbiBpc0xpbmtDbG9zZShzdHIpIHsKICByZXR1cm4gL148XC9hXHMqPi9pLnRlc3Qoc3RyKTsKfQoKLy8gU3R1cGlkIGZhYnJpYyB0byBhdm9pZCBzaW5nbGV0b25zLCBmb3IgdGhyZWFkIHNhZmV0eS4KLy8gUmVxdWlyZWQgZm9yIGVuZ2luZXMgbGlrZSBOYXNob3JuLgovLwpmdW5jdGlvbiBjcmVhdGVMaW5raWZpZXIoKSB7CiAgdmFyIGxpbmtzID0gW107CiAgdmFyIGF1dG9saW5rZXIgPSBuZXcgQXV0b2xpbmtlcih7CiAgICBzdHJpcFByZWZpeDogZmFsc2UsCiAgICB1cmw6IHRydWUsCiAgICBlbWFpbDogdHJ1ZSwKICAgIHR3aXR0ZXI6IGZhbHNlLAogICAgcmVwbGFjZUZuOiBmdW5jdGlvbiAobGlua2VyLCBtYXRjaCkgewogICAgICAvLyBPbmx5IGNvbGxlY3QgbWF0Y2hlZCBzdHJpbmdzIGJ1dCBkb24ndCBjaGFuZ2UgYW55dGhpbmcuCiAgICAgIHN3aXRjaCAobWF0Y2guZ2V0VHlwZSgpKSB7CiAgICAgICAgLyplc2xpbnQgZGVmYXVsdC1jYXNlOjAqLwogICAgICAgIGNhc2UgJ3VybCc6CiAgICAgICAgICBsaW5rcy5wdXNoKHsKICAgICAgICAgICAgdGV4dDogbWF0Y2gubWF0Y2hlZFRleHQsCiAgICAgICAgICAgIHVybDogbWF0Y2guZ2V0VXJsKCkKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnZW1haWwnOgogICAgICAgICAgbGlua3MucHVzaCh7CiAgICAgICAgICAgIHRleHQ6IG1hdGNoLm1hdGNoZWRUZXh0LAogICAgICAgICAgICAvLyBub3JtYWxpemUgZW1haWwgcHJvdG9jb2wKICAgICAgICAgICAgdXJsOiAnbWFpbHRvOicgKyBtYXRjaC5nZXRFbWFpbCgpLnJlcGxhY2UoL15tYWlsdG86L2ksICcnKQogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSk7CgogIHJldHVybiB7CiAgICBsaW5rczogbGlua3MsCiAgICBhdXRvbGlua2VyOiBhdXRvbGlua2VyCiAgfTsKfQoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbGlua2lmeShzdGF0ZSkgewogIHZhciBpLCBqLCBsLCB0b2tlbnMsIHRva2VuLCB0ZXh0LCBub2RlcywgbG4sIHBvcywgbGV2ZWwsIGh0bWxMaW5rTGV2ZWwsCiAgICAgIGJsb2NrVG9rZW5zID0gc3RhdGUudG9rZW5zLAogICAgICBsaW5raWZpZXIgPSBudWxsLCBsaW5rcywgYXV0b2xpbmtlcjsKCiAgaWYgKCFzdGF0ZS5vcHRpb25zLmxpbmtpZnkpIHsgcmV0dXJuOyB9CgogIGZvciAoaiA9IDAsIGwgPSBibG9ja1Rva2Vucy5sZW5ndGg7IGogPCBsOyBqKyspIHsKICAgIGlmIChibG9ja1Rva2Vuc1tqXS50eXBlICE9PSAnaW5saW5lJykgeyBjb250aW51ZTsgfQogICAgdG9rZW5zID0gYmxvY2tUb2tlbnNbal0uY2hpbGRyZW47CgogICAgaHRtbExpbmtMZXZlbCA9IDA7CgogICAgLy8gV2Ugc2NhbiBmcm9tIHRoZSBlbmQsIHRvIGtlZXAgcG9zaXRpb24gd2hlbiBuZXcgdGFncyBhZGRlZC4KICAgIC8vIFVzZSByZXZlcnNlZCBsb2dpYyBpbiBsaW5rcyBzdGFydC9lbmQgbWF0Y2gKICAgIGZvciAoaSA9IHRva2Vucy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICB0b2tlbiA9IHRva2Vuc1tpXTsKCiAgICAgIC8vIFNraXAgY29udGVudCBvZiBtYXJrZG93biBsaW5rcwogICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ2xpbmtfY2xvc2UnKSB7CiAgICAgICAgaS0tOwogICAgICAgIHdoaWxlICh0b2tlbnNbaV0ubGV2ZWwgIT09IHRva2VuLmxldmVsICYmIHRva2Vuc1tpXS50eXBlICE9PSAnbGlua19vcGVuJykgewogICAgICAgICAgaS0tOwogICAgICAgIH0KICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgLy8gU2tpcCBjb250ZW50IG9mIGh0bWwgdGFnIGxpbmtzCiAgICAgIGlmICh0b2tlbi50eXBlID09PSAnaHRtbHRhZycpIHsKICAgICAgICBpZiAoaXNMaW5rT3Blbih0b2tlbi5jb250ZW50KSAmJiBodG1sTGlua0xldmVsID4gMCkgewogICAgICAgICAgaHRtbExpbmtMZXZlbC0tOwogICAgICAgIH0KICAgICAgICBpZiAoaXNMaW5rQ2xvc2UodG9rZW4uY29udGVudCkpIHsKICAgICAgICAgIGh0bWxMaW5rTGV2ZWwrKzsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGh0bWxMaW5rTGV2ZWwgPiAwKSB7IGNvbnRpbnVlOyB9CgogICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ3RleHQnICYmIExJTktfU0NBTl9SRS50ZXN0KHRva2VuLmNvbnRlbnQpKSB7CgogICAgICAgIC8vIEluaXQgbGlua2lmaWVyIGluIGxhenkgbWFubmVyLCBvbmx5IGlmIHJlcXVpcmVkLgogICAgICAgIGlmICghbGlua2lmaWVyKSB7CiAgICAgICAgICBsaW5raWZpZXIgPSBjcmVhdGVMaW5raWZpZXIoKTsKICAgICAgICAgIGxpbmtzID0gbGlua2lmaWVyLmxpbmtzOwogICAgICAgICAgYXV0b2xpbmtlciA9IGxpbmtpZmllci5hdXRvbGlua2VyOwogICAgICAgIH0KCiAgICAgICAgdGV4dCA9IHRva2VuLmNvbnRlbnQ7CiAgICAgICAgbGlua3MubGVuZ3RoID0gMDsKICAgICAgICBhdXRvbGlua2VyLmxpbmsodGV4dCk7CgogICAgICAgIGlmICghbGlua3MubGVuZ3RoKSB7IGNvbnRpbnVlOyB9CgogICAgICAgIC8vIE5vdyBzcGxpdCBzdHJpbmcgdG8gbm9kZXMKICAgICAgICBub2RlcyA9IFtdOwogICAgICAgIGxldmVsID0gdG9rZW4ubGV2ZWw7CgogICAgICAgIGZvciAobG4gPSAwOyBsbiA8IGxpbmtzLmxlbmd0aDsgbG4rKykgewoKICAgICAgICAgIGlmICghc3RhdGUuaW5saW5lLnZhbGlkYXRlTGluayhsaW5rc1tsbl0udXJsKSkgeyBjb250aW51ZTsgfQoKICAgICAgICAgIHBvcyA9IHRleHQuaW5kZXhPZihsaW5rc1tsbl0udGV4dCk7CgogICAgICAgICAgaWYgKHBvcykgewogICAgICAgICAgICBsZXZlbCA9IGxldmVsOwogICAgICAgICAgICBub2Rlcy5wdXNoKHsKICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICAgICAgY29udGVudDogdGV4dC5zbGljZSgwLCBwb3MpLAogICAgICAgICAgICAgIGxldmVsOiBsZXZlbAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIG5vZGVzLnB1c2goewogICAgICAgICAgICB0eXBlOiAnbGlua19vcGVuJywKICAgICAgICAgICAgaHJlZjogbGlua3NbbG5dLnVybCwKICAgICAgICAgICAgdGl0bGU6ICcnLAogICAgICAgICAgICBsZXZlbDogbGV2ZWwrKwogICAgICAgICAgfSk7CiAgICAgICAgICBub2Rlcy5wdXNoKHsKICAgICAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgICAgICBjb250ZW50OiBsaW5rc1tsbl0udGV4dCwKICAgICAgICAgICAgbGV2ZWw6IGxldmVsCiAgICAgICAgICB9KTsKICAgICAgICAgIG5vZGVzLnB1c2goewogICAgICAgICAgICB0eXBlOiAnbGlua19jbG9zZScsCiAgICAgICAgICAgIGxldmVsOiAtLWxldmVsCiAgICAgICAgICB9KTsKICAgICAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKHBvcyArIGxpbmtzW2xuXS50ZXh0Lmxlbmd0aCk7CiAgICAgICAgfQogICAgICAgIGlmICh0ZXh0Lmxlbmd0aCkgewogICAgICAgICAgbm9kZXMucHVzaCh7CiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgY29udGVudDogdGV4dCwKICAgICAgICAgICAgbGV2ZWw6IGxldmVsCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vIHJlcGxhY2UgY3VycmVudCBub2RlCiAgICAgICAgYmxvY2tUb2tlbnNbal0uY2hpbGRyZW4gPSB0b2tlbnMgPSBbXS5jb25jYXQodG9rZW5zLnNsaWNlKDAsIGkpLCBub2RlcywgdG9rZW5zLnNsaWNlKGkgKyAxKSk7CiAgICAgIH0KICAgIH0KICB9Cn07Cgp9LHsiYXV0b2xpbmtlciI6NjB9XSw0MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCgp2YXIgU3RhdGVJbmxpbmUgICAgICAgICAgPSByZXF1aXJlKCcuLi9ydWxlc19pbmxpbmUvc3RhdGVfaW5saW5lJyk7CnZhciBwYXJzZUxpbmtMYWJlbCAgICAgICA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvcGFyc2VfbGlua19sYWJlbCcpOwp2YXIgcGFyc2VMaW5rRGVzdGluYXRpb24gPSByZXF1aXJlKCcuLi9oZWxwZXJzL3BhcnNlX2xpbmtfZGVzdGluYXRpb24nKTsKdmFyIHBhcnNlTGlua1RpdGxlICAgICAgID0gcmVxdWlyZSgnLi4vaGVscGVycy9wYXJzZV9saW5rX3RpdGxlJyk7CnZhciBub3JtYWxpemVSZWZlcmVuY2UgICA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvbm9ybWFsaXplX3JlZmVyZW5jZScpOwoKCmZ1bmN0aW9uIHBhcnNlUmVmZXJlbmNlKHN0ciwgcGFyc2VyLCBvcHRpb25zLCBlbnYpIHsKICB2YXIgc3RhdGUsIGxhYmVsRW5kLCBwb3MsIG1heCwgY29kZSwgc3RhcnQsIGhyZWYsIHRpdGxlLCBsYWJlbDsKCiAgaWYgKHN0ci5jaGFyQ29kZUF0KDApICE9PSAweDVCLyogWyAqLykgeyByZXR1cm4gLTE7IH0KCiAgaWYgKHN0ci5pbmRleE9mKCddOicpID09PSAtMSkgeyByZXR1cm4gLTE7IH0KCiAgc3RhdGUgPSBuZXcgU3RhdGVJbmxpbmUoc3RyLCBwYXJzZXIsIG9wdGlvbnMsIGVudiwgW10pOwogIGxhYmVsRW5kID0gcGFyc2VMaW5rTGFiZWwoc3RhdGUsIDApOwoKICBpZiAobGFiZWxFbmQgPCAwIHx8IHN0ci5jaGFyQ29kZUF0KGxhYmVsRW5kICsgMSkgIT09IDB4M0EvKiA6ICovKSB7IHJldHVybiAtMTsgfQoKICBtYXggPSBzdGF0ZS5wb3NNYXg7CgogIC8vIFtsYWJlbF06ICAgZGVzdGluYXRpb24gICAndGl0bGUnCiAgLy8gICAgICAgICBeXl4gc2tpcCBvcHRpb25hbCB3aGl0ZXNwYWNlIGhlcmUKICBmb3IgKHBvcyA9IGxhYmVsRW5kICsgMjsgcG9zIDwgbWF4OyBwb3MrKykgewogICAgY29kZSA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcyk7CiAgICBpZiAoY29kZSAhPT0gMHgyMCAmJiBjb2RlICE9PSAweDBBKSB7IGJyZWFrOyB9CiAgfQoKICAvLyBbbGFiZWxdOiAgIGRlc3RpbmF0aW9uICAgJ3RpdGxlJwogIC8vICAgICAgICAgICAgXl5eXl5eXl5eXl4gcGFyc2UgdGhpcwogIGlmICghcGFyc2VMaW5rRGVzdGluYXRpb24oc3RhdGUsIHBvcykpIHsgcmV0dXJuIC0xOyB9CiAgaHJlZiA9IHN0YXRlLmxpbmtDb250ZW50OwogIHBvcyA9IHN0YXRlLnBvczsKCiAgLy8gW2xhYmVsXTogICBkZXN0aW5hdGlvbiAgICd0aXRsZScKICAvLyAgICAgICAgICAgICAgICAgICAgICAgXl5eIHNraXBwaW5nIHRob3NlIHNwYWNlcwogIHN0YXJ0ID0gcG9zOwogIGZvciAocG9zID0gcG9zICsgMTsgcG9zIDwgbWF4OyBwb3MrKykgewogICAgY29kZSA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcyk7CiAgICBpZiAoY29kZSAhPT0gMHgyMCAmJiBjb2RlICE9PSAweDBBKSB7IGJyZWFrOyB9CiAgfQoKICAvLyBbbGFiZWxdOiAgIGRlc3RpbmF0aW9uICAgJ3RpdGxlJwogIC8vICAgICAgICAgICAgICAgICAgICAgICAgICBeXl5eXl5eIHBhcnNlIHRoaXMKICBpZiAocG9zIDwgbWF4ICYmIHN0YXJ0ICE9PSBwb3MgJiYgcGFyc2VMaW5rVGl0bGUoc3RhdGUsIHBvcykpIHsKICAgIHRpdGxlID0gc3RhdGUubGlua0NvbnRlbnQ7CiAgICBwb3MgPSBzdGF0ZS5wb3M7CiAgfSBlbHNlIHsKICAgIHRpdGxlID0gJyc7CiAgICBwb3MgPSBzdGFydDsKICB9CgogIC8vIGVuc3VyZSB0aGF0IHRoZSBlbmQgb2YgdGhlIGxpbmUgaXMgZW1wdHkKICB3aGlsZSAocG9zIDwgbWF4ICYmIHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgPT09IDB4MjAvKiBzcGFjZSAqLykgeyBwb3MrKzsgfQogIGlmIChwb3MgPCBtYXggJiYgc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSAhPT0gMHgwQSkgeyByZXR1cm4gLTE7IH0KCiAgbGFiZWwgPSBub3JtYWxpemVSZWZlcmVuY2Uoc3RyLnNsaWNlKDEsIGxhYmVsRW5kKSk7CiAgaWYgKHR5cGVvZiBlbnYucmVmZXJlbmNlc1tsYWJlbF0gPT09ICd1bmRlZmluZWQnKSB7CiAgICBlbnYucmVmZXJlbmNlc1tsYWJlbF0gPSB7IHRpdGxlOiB0aXRsZSwgaHJlZjogaHJlZiB9OwogIH0KCiAgcmV0dXJuIHBvczsKfQoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVmZXJlbmNlcyhzdGF0ZSkgewogIHZhciB0b2tlbnMgPSBzdGF0ZS50b2tlbnMsIGksIGwsIGNvbnRlbnQsIHBvczsKCiAgc3RhdGUuZW52LnJlZmVyZW5jZXMgPSBzdGF0ZS5lbnYucmVmZXJlbmNlcyB8fCB7fTsKCiAgaWYgKHN0YXRlLmlubGluZU1vZGUpIHsKICAgIHJldHVybjsKICB9CgogIC8vIFNjYW4gZGVmaW5pdGlvbnMgaW4gcGFyYWdyYXBoIGlubGluZXMKICBmb3IgKGkgPSAxLCBsID0gdG9rZW5zLmxlbmd0aCAtIDE7IGkgPCBsOyBpKyspIHsKICAgIGlmICh0b2tlbnNbaV0udHlwZSA9PT0gJ2lubGluZScgJiYKICAgICAgICB0b2tlbnNbaSAtIDFdLnR5cGUgPT09ICdwYXJhZ3JhcGhfb3BlbicgJiYKICAgICAgICB0b2tlbnNbaSArIDFdLnR5cGUgPT09ICdwYXJhZ3JhcGhfY2xvc2UnKSB7CgogICAgICBjb250ZW50ID0gdG9rZW5zW2ldLmNvbnRlbnQ7CiAgICAgIHdoaWxlIChjb250ZW50Lmxlbmd0aCkgewogICAgICAgIHBvcyA9IHBhcnNlUmVmZXJlbmNlKGNvbnRlbnQsIHN0YXRlLmlubGluZSwgc3RhdGUub3B0aW9ucywgc3RhdGUuZW52KTsKICAgICAgICBpZiAocG9zIDwgMCkgeyBicmVhazsgfQogICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnNsaWNlKHBvcykudHJpbSgpOwogICAgICB9CgogICAgICB0b2tlbnNbaV0uY29udGVudCA9IGNvbnRlbnQ7CiAgICAgIGlmICghY29udGVudC5sZW5ndGgpIHsKICAgICAgICB0b2tlbnNbaSAtIDFdLnRpZ2h0ID0gdHJ1ZTsKICAgICAgICB0b2tlbnNbaSArIDFdLnRpZ2h0ID0gdHJ1ZTsKICAgICAgfQogICAgfQogIH0KfTsKCn0seyIuLi9oZWxwZXJzL25vcm1hbGl6ZV9yZWZlcmVuY2UiOjEwLCIuLi9oZWxwZXJzL3BhcnNlX2xpbmtfZGVzdGluYXRpb24iOjExLCIuLi9oZWxwZXJzL3BhcnNlX2xpbmtfbGFiZWwiOjEyLCIuLi9oZWxwZXJzL3BhcnNlX2xpbmtfdGl0bGUiOjEzLCIuLi9ydWxlc19pbmxpbmUvc3RhdGVfaW5saW5lIjo1Nn1dLDQxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gU2ltcGxlIHR5cG9ncmFwaGljYWwgcmVwbGFjZW1lbnRzCi8vCid1c2Ugc3RyaWN0JzsKCi8vIFRPRE86Ci8vIC0gZnJhY3Rpb25hbHMgMS8yLCAxLzQsIDMvNCAtPiDCvSwgwrwsIMK+Ci8vIC0gbWlsdGlwbGljYXRpb24gMiB4IDQgLT4gMiDDlyA0Cgp2YXIgUkFSRV9SRSA9IC9cKy18XC5cLnxcP1w/XD9cP3whISEhfCwsfC0tLzsKCnZhciBTQ09QRURfQUJCUl9SRSA9IC9cKChjfHRtfHJ8cClcKS9pZzsKdmFyIFNDT1BFRF9BQkJSID0gewogICdjJzogJ8KpJywKICAncic6ICfCricsCiAgJ3AnOiAnwqcnLAogICd0bSc6ICfihKInCn07CgpmdW5jdGlvbiByZXBsYWNlU2NvcGVkQWJicihzdHIpIHsKICBpZiAoc3RyLmluZGV4T2YoJygnKSA8IDApIHsgcmV0dXJuIHN0cjsgfQoKICByZXR1cm4gc3RyLnJlcGxhY2UoU0NPUEVEX0FCQlJfUkUsIGZ1bmN0aW9uKG1hdGNoLCBuYW1lKSB7CiAgICByZXR1cm4gU0NPUEVEX0FCQlJbbmFtZS50b0xvd2VyQ2FzZSgpXTsKICB9KTsKfQoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVwbGFjZShzdGF0ZSkgewogIHZhciBpLCB0b2tlbiwgdGV4dCwgaW5saW5lVG9rZW5zLCBibGtJZHg7CgogIGlmICghc3RhdGUub3B0aW9ucy50eXBvZ3JhcGhlcikgeyByZXR1cm47IH0KCiAgZm9yIChibGtJZHggPSBzdGF0ZS50b2tlbnMubGVuZ3RoIC0gMTsgYmxrSWR4ID49IDA7IGJsa0lkeC0tKSB7CgogICAgaWYgKHN0YXRlLnRva2Vuc1tibGtJZHhdLnR5cGUgIT09ICdpbmxpbmUnKSB7IGNvbnRpbnVlOyB9CgogICAgaW5saW5lVG9rZW5zID0gc3RhdGUudG9rZW5zW2Jsa0lkeF0uY2hpbGRyZW47CgogICAgZm9yIChpID0gaW5saW5lVG9rZW5zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgIHRva2VuID0gaW5saW5lVG9rZW5zW2ldOwogICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ3RleHQnKSB7CiAgICAgICAgdGV4dCA9IHRva2VuLmNvbnRlbnQ7CgogICAgICAgIHRleHQgPSByZXBsYWNlU2NvcGVkQWJicih0ZXh0KTsKCiAgICAgICAgaWYgKFJBUkVfUkUudGVzdCh0ZXh0KSkgewogICAgICAgICAgdGV4dCA9IHRleHQKICAgICAgICAgICAgLnJlcGxhY2UoL1wrLS9nLCAnwrEnKQogICAgICAgICAgICAvLyAuLiwgLi4uLCAuLi4uLi4uIC0+IOKApgogICAgICAgICAgICAvLyBidXQgPy4uLi4uICYgIS4uLi4uIC0+ID8uLiAmICEuLgogICAgICAgICAgICAucmVwbGFjZSgvXC57Mix9L2csICfigKYnKS5yZXBsYWNlKC8oWz8hXSnigKYvZywgJyQxLi4nKQogICAgICAgICAgICAucmVwbGFjZSgvKFs/IV0pezQsfS9nLCAnJDEkMSQxJykucmVwbGFjZSgvLHsyLH0vZywgJywnKQogICAgICAgICAgICAvLyBlbS1kYXNoCiAgICAgICAgICAgIC5yZXBsYWNlKC8oXnxbXi1dKS0tLShbXi1dfCQpL21nLCAnJDFcdTIwMTQkMicpCiAgICAgICAgICAgIC8vIGVuLWRhc2gKICAgICAgICAgICAgLnJlcGxhY2UoLyhefFxzKS0tKFxzfCQpL21nLCAnJDFcdTIwMTMkMicpCiAgICAgICAgICAgIC5yZXBsYWNlKC8oXnxbXi1cc10pLS0oW14tXHNdfCQpL21nLCAnJDFcdTIwMTMkMicpOwogICAgICAgIH0KCiAgICAgICAgdG9rZW4uY29udGVudCA9IHRleHQ7CiAgICAgIH0KICAgIH0KICB9Cn07Cgp9LHt9XSw0MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIENvbnZlcnQgc3RyYWlnaHQgcXVvdGF0aW9uIG1hcmtzIHRvIHR5cG9ncmFwaGljIG9uZXMKLy8KJ3VzZSBzdHJpY3QnOwoKCnZhciBRVU9URV9URVNUX1JFID0gL1snIl0vOwp2YXIgUVVPVEVfUkUgPSAvWyciXS9nOwp2YXIgUFVOQ1RfUkUgPSAvWy1ccygpXFtcXV0vOwp2YXIgQVBPU1RST1BIRSA9ICfigJknOwoKLy8gVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRydWUgaWYgdGhlIGNoYXJhY3RlciBhdCBgcG9zYAovLyBjb3VsZCBiZSBpbnNpZGUgYSB3b3JkLgpmdW5jdGlvbiBpc0xldHRlcihzdHIsIHBvcykgewogIGlmIChwb3MgPCAwIHx8IHBvcyA+PSBzdHIubGVuZ3RoKSB7IHJldHVybiBmYWxzZTsgfQogIHJldHVybiAhUFVOQ1RfUkUudGVzdChzdHJbcG9zXSk7Cn0KCgpmdW5jdGlvbiByZXBsYWNlQXQoc3RyLCBpbmRleCwgY2gpIHsKICByZXR1cm4gc3RyLnN1YnN0cigwLCBpbmRleCkgKyBjaCArIHN0ci5zdWJzdHIoaW5kZXggKyAxKTsKfQoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc21hcnRxdW90ZXMoc3RhdGUpIHsKICAvKmVzbGludCBtYXgtZGVwdGg6MCovCiAgdmFyIGksIHRva2VuLCB0ZXh0LCB0LCBwb3MsIG1heCwgdGhpc0xldmVsLCBsYXN0U3BhY2UsIG5leHRTcGFjZSwgaXRlbSwKICAgICAgY2FuT3BlbiwgY2FuQ2xvc2UsIGosIGlzU2luZ2xlLCBibGtJZHgsIHRva2VucywKICAgICAgc3RhY2s7CgogIGlmICghc3RhdGUub3B0aW9ucy50eXBvZ3JhcGhlcikgeyByZXR1cm47IH0KCiAgc3RhY2sgPSBbXTsKCiAgZm9yIChibGtJZHggPSBzdGF0ZS50b2tlbnMubGVuZ3RoIC0gMTsgYmxrSWR4ID49IDA7IGJsa0lkeC0tKSB7CgogICAgaWYgKHN0YXRlLnRva2Vuc1tibGtJZHhdLnR5cGUgIT09ICdpbmxpbmUnKSB7IGNvbnRpbnVlOyB9CgogICAgdG9rZW5zID0gc3RhdGUudG9rZW5zW2Jsa0lkeF0uY2hpbGRyZW47CiAgICBzdGFjay5sZW5ndGggPSAwOwoKICAgIGZvciAoaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHsKICAgICAgdG9rZW4gPSB0b2tlbnNbaV07CgogICAgICBpZiAodG9rZW4udHlwZSAhPT0gJ3RleHQnIHx8IFFVT1RFX1RFU1RfUkUudGVzdCh0b2tlbi50ZXh0KSkgeyBjb250aW51ZTsgfQoKICAgICAgdGhpc0xldmVsID0gdG9rZW5zW2ldLmxldmVsOwoKICAgICAgZm9yIChqID0gc3RhY2subGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICBpZiAoc3RhY2tbal0ubGV2ZWwgPD0gdGhpc0xldmVsKSB7IGJyZWFrOyB9CiAgICAgIH0KICAgICAgc3RhY2subGVuZ3RoID0gaiArIDE7CgogICAgICB0ZXh0ID0gdG9rZW4uY29udGVudDsKICAgICAgcG9zID0gMDsKICAgICAgbWF4ID0gdGV4dC5sZW5ndGg7CgogICAgICAvKmVzbGludCBuby1sYWJlbHM6MCxibG9jay1zY29wZWQtdmFyOjAqLwogICAgICBPVVRFUjoKICAgICAgd2hpbGUgKHBvcyA8IG1heCkgewogICAgICAgIFFVT1RFX1JFLmxhc3RJbmRleCA9IHBvczsKICAgICAgICB0ID0gUVVPVEVfUkUuZXhlYyh0ZXh0KTsKICAgICAgICBpZiAoIXQpIHsgYnJlYWs7IH0KCiAgICAgICAgbGFzdFNwYWNlID0gIWlzTGV0dGVyKHRleHQsIHQuaW5kZXggLSAxKTsKICAgICAgICBwb3MgPSB0LmluZGV4ICsgMTsKICAgICAgICBpc1NpbmdsZSA9ICh0WzBdID09PSAiJyIpOwogICAgICAgIG5leHRTcGFjZSA9ICFpc0xldHRlcih0ZXh0LCBwb3MpOwoKICAgICAgICBpZiAoIW5leHRTcGFjZSAmJiAhbGFzdFNwYWNlKSB7CiAgICAgICAgICAvLyBtaWRkbGUgb2Ygd29yZAogICAgICAgICAgaWYgKGlzU2luZ2xlKSB7CiAgICAgICAgICAgIHRva2VuLmNvbnRlbnQgPSByZXBsYWNlQXQodG9rZW4uY29udGVudCwgdC5pbmRleCwgQVBPU1RST1BIRSk7CiAgICAgICAgICB9CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIGNhbk9wZW4gPSAhbmV4dFNwYWNlOwogICAgICAgIGNhbkNsb3NlID0gIWxhc3RTcGFjZTsKCiAgICAgICAgaWYgKGNhbkNsb3NlKSB7CiAgICAgICAgICAvLyB0aGlzIGNvdWxkIGJlIGEgY2xvc2luZyBxdW90ZSwgcmV3aW5kIHRoZSBzdGFjayB0byBnZXQgYSBtYXRjaAogICAgICAgICAgZm9yIChqID0gc3RhY2subGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgICAgaXRlbSA9IHN0YWNrW2pdOwogICAgICAgICAgICBpZiAoc3RhY2tbal0ubGV2ZWwgPCB0aGlzTGV2ZWwpIHsgYnJlYWs7IH0KICAgICAgICAgICAgaWYgKGl0ZW0uc2luZ2xlID09PSBpc1NpbmdsZSAmJiBzdGFja1tqXS5sZXZlbCA9PT0gdGhpc0xldmVsKSB7CiAgICAgICAgICAgICAgaXRlbSA9IHN0YWNrW2pdOwogICAgICAgICAgICAgIGlmIChpc1NpbmdsZSkgewogICAgICAgICAgICAgICAgdG9rZW5zW2l0ZW0udG9rZW5dLmNvbnRlbnQgPSByZXBsYWNlQXQodG9rZW5zW2l0ZW0udG9rZW5dLmNvbnRlbnQsIGl0ZW0ucG9zLCBzdGF0ZS5vcHRpb25zLnF1b3Rlc1syXSk7CiAgICAgICAgICAgICAgICB0b2tlbi5jb250ZW50ID0gcmVwbGFjZUF0KHRva2VuLmNvbnRlbnQsIHQuaW5kZXgsIHN0YXRlLm9wdGlvbnMucXVvdGVzWzNdKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdG9rZW5zW2l0ZW0udG9rZW5dLmNvbnRlbnQgPSByZXBsYWNlQXQodG9rZW5zW2l0ZW0udG9rZW5dLmNvbnRlbnQsIGl0ZW0ucG9zLCBzdGF0ZS5vcHRpb25zLnF1b3Rlc1swXSk7CiAgICAgICAgICAgICAgICB0b2tlbi5jb250ZW50ID0gcmVwbGFjZUF0KHRva2VuLmNvbnRlbnQsIHQuaW5kZXgsIHN0YXRlLm9wdGlvbnMucXVvdGVzWzFdKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc3RhY2subGVuZ3RoID0gajsKICAgICAgICAgICAgICBjb250aW51ZSBPVVRFUjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGNhbk9wZW4pIHsKICAgICAgICAgIHN0YWNrLnB1c2goewogICAgICAgICAgICB0b2tlbjogaSwKICAgICAgICAgICAgcG9zOiB0LmluZGV4LAogICAgICAgICAgICBzaW5nbGU6IGlzU2luZ2xlLAogICAgICAgICAgICBsZXZlbDogdGhpc0xldmVsCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKGNhbkNsb3NlICYmIGlzU2luZ2xlKSB7CiAgICAgICAgICB0b2tlbi5jb250ZW50ID0gcmVwbGFjZUF0KHRva2VuLmNvbnRlbnQsIHQuaW5kZXgsIEFQT1NUUk9QSEUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTsKCn0se31dLDQzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gUHJvY2VzcyBhdXRvbGlua3MgJzxwcm90b2NvbDouLi4+JwoKJ3VzZSBzdHJpY3QnOwoKdmFyIHVybF9zY2hlbWFzICAgPSByZXF1aXJlKCcuLi9jb21tb24vdXJsX3NjaGVtYXMnKTsKdmFyIG5vcm1hbGl6ZUxpbmsgPSByZXF1aXJlKCcuLi9oZWxwZXJzL25vcm1hbGl6ZV9saW5rJyk7CgoKLyplc2xpbnQgbWF4LWxlbjowKi8KdmFyIEVNQUlMX1JFICAgID0gL148KFthLXpBLVowLTkuISMkJSYnKitcLz0/Xl9ge3x9fi1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcLlthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqKT4vOwp2YXIgQVVUT0xJTktfUkUgPSAvXjwoW2EtekEtWi5cLV17MSwyNX0pOihbXjw+XHgwMC1ceDIwXSopPi87CgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhdXRvbGluayhzdGF0ZSwgc2lsZW50KSB7CiAgdmFyIHRhaWwsIGxpbmtNYXRjaCwgZW1haWxNYXRjaCwgdXJsLCBmdWxsVXJsLCBwb3MgPSBzdGF0ZS5wb3M7CgogIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpICE9PSAweDNDLyogPCAqLykgeyByZXR1cm4gZmFsc2U7IH0KCiAgdGFpbCA9IHN0YXRlLnNyYy5zbGljZShwb3MpOwoKICBpZiAodGFpbC5pbmRleE9mKCc+JykgPCAwKSB7IHJldHVybiBmYWxzZTsgfQoKICBsaW5rTWF0Y2ggPSB0YWlsLm1hdGNoKEFVVE9MSU5LX1JFKTsKCiAgaWYgKGxpbmtNYXRjaCkgewogICAgaWYgKHVybF9zY2hlbWFzLmluZGV4T2YobGlua01hdGNoWzFdLnRvTG93ZXJDYXNlKCkpIDwgMCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgICB1cmwgPSBsaW5rTWF0Y2hbMF0uc2xpY2UoMSwgLTEpOwogICAgZnVsbFVybCA9IG5vcm1hbGl6ZUxpbmsodXJsKTsKICAgIGlmICghc3RhdGUucGFyc2VyLnZhbGlkYXRlTGluayh1cmwpKSB7IHJldHVybiBmYWxzZTsgfQoKICAgIGlmICghc2lsZW50KSB7CiAgICAgIHN0YXRlLnB1c2goewogICAgICAgIHR5cGU6ICdsaW5rX29wZW4nLAogICAgICAgIGhyZWY6IGZ1bGxVcmwsCiAgICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgICAgIH0pOwogICAgICBzdGF0ZS5wdXNoKHsKICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgY29udGVudDogdXJsLAogICAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbCArIDEKICAgICAgfSk7CiAgICAgIHN0YXRlLnB1c2goeyB0eXBlOiAnbGlua19jbG9zZScsIGxldmVsOiBzdGF0ZS5sZXZlbCB9KTsKICAgIH0KCiAgICBzdGF0ZS5wb3MgKz0gbGlua01hdGNoWzBdLmxlbmd0aDsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgZW1haWxNYXRjaCA9IHRhaWwubWF0Y2goRU1BSUxfUkUpOwoKICBpZiAoZW1haWxNYXRjaCkgewoKICAgIHVybCA9IGVtYWlsTWF0Y2hbMF0uc2xpY2UoMSwgLTEpOwoKICAgIGZ1bGxVcmwgPSBub3JtYWxpemVMaW5rKCdtYWlsdG86JyArIHVybCk7CiAgICBpZiAoIXN0YXRlLnBhcnNlci52YWxpZGF0ZUxpbmsoZnVsbFVybCkpIHsgcmV0dXJuIGZhbHNlOyB9CgogICAgaWYgKCFzaWxlbnQpIHsKICAgICAgc3RhdGUucHVzaCh7CiAgICAgICAgdHlwZTogJ2xpbmtfb3BlbicsCiAgICAgICAgaHJlZjogZnVsbFVybCwKICAgICAgICBsZXZlbDogc3RhdGUubGV2ZWwKICAgICAgfSk7CiAgICAgIHN0YXRlLnB1c2goewogICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICBjb250ZW50OiB1cmwsCiAgICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsICsgMQogICAgICB9KTsKICAgICAgc3RhdGUucHVzaCh7IHR5cGU6ICdsaW5rX2Nsb3NlJywgbGV2ZWw6IHN0YXRlLmxldmVsIH0pOwogICAgfQoKICAgIHN0YXRlLnBvcyArPSBlbWFpbE1hdGNoWzBdLmxlbmd0aDsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgcmV0dXJuIGZhbHNlOwp9OwoKfSx7Ii4uL2NvbW1vbi91cmxfc2NoZW1hcyI6NCwiLi4vaGVscGVycy9ub3JtYWxpemVfbGluayI6OX1dLDQ0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gUGFyc2UgYmFja3RpY2tzCgondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJhY2t0aWNrcyhzdGF0ZSwgc2lsZW50KSB7CiAgdmFyIHN0YXJ0LCBtYXgsIG1hcmtlciwgbWF0Y2hTdGFydCwgbWF0Y2hFbmQsCiAgICAgIHBvcyA9IHN0YXRlLnBvcywKICAgICAgY2ggPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpOwoKICBpZiAoY2ggIT09IDB4NjAvKiBgICovKSB7IHJldHVybiBmYWxzZTsgfQoKICBzdGFydCA9IHBvczsKICBwb3MrKzsKICBtYXggPSBzdGF0ZS5wb3NNYXg7CgogIHdoaWxlIChwb3MgPCBtYXggJiYgc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gMHg2MC8qIGAgKi8pIHsgcG9zKys7IH0KCiAgbWFya2VyID0gc3RhdGUuc3JjLnNsaWNlKHN0YXJ0LCBwb3MpOwoKICBtYXRjaFN0YXJ0ID0gbWF0Y2hFbmQgPSBwb3M7CgogIHdoaWxlICgobWF0Y2hTdGFydCA9IHN0YXRlLnNyYy5pbmRleE9mKCdgJywgbWF0Y2hFbmQpKSAhPT0gLTEpIHsKICAgIG1hdGNoRW5kID0gbWF0Y2hTdGFydCArIDE7CgogICAgd2hpbGUgKG1hdGNoRW5kIDwgbWF4ICYmIHN0YXRlLnNyYy5jaGFyQ29kZUF0KG1hdGNoRW5kKSA9PT0gMHg2MC8qIGAgKi8pIHsgbWF0Y2hFbmQrKzsgfQoKICAgIGlmIChtYXRjaEVuZCAtIG1hdGNoU3RhcnQgPT09IG1hcmtlci5sZW5ndGgpIHsKICAgICAgaWYgKCFzaWxlbnQpIHsKICAgICAgICBzdGF0ZS5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdjb2RlJywKICAgICAgICAgIGNvbnRlbnQ6IHN0YXRlLnNyYy5zbGljZShwb3MsIG1hdGNoU3RhcnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bIFxuXSsvZywgJyAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJpbSgpLAogICAgICAgICAgYmxvY2s6IGZhbHNlLAogICAgICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgc3RhdGUucG9zID0gbWF0Y2hFbmQ7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KCiAgaWYgKCFzaWxlbnQpIHsgc3RhdGUucGVuZGluZyArPSBtYXJrZXI7IH0KICBzdGF0ZS5wb3MgKz0gbWFya2VyLmxlbmd0aDsKICByZXR1cm4gdHJ1ZTsKfTsKCn0se31dLDQ1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gUHJvY2VzcyB+fmRlbGV0ZWQgdGV4dH5+CgondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlbChzdGF0ZSwgc2lsZW50KSB7CiAgdmFyIGZvdW5kLAogICAgICBwb3MsCiAgICAgIHN0YWNrLAogICAgICBtYXggPSBzdGF0ZS5wb3NNYXgsCiAgICAgIHN0YXJ0ID0gc3RhdGUucG9zLAogICAgICBsYXN0Q2hhciwKICAgICAgbmV4dENoYXI7CgogIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCkgIT09IDB4N0UvKiB+ICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzaWxlbnQpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIGRvbid0IHJ1biBhbnkgcGFpcnMgaW4gdmFsaWRhdGlvbiBtb2RlCiAgaWYgKHN0YXJ0ICsgNCA+PSBtYXgpIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0ICsgMSkgIT09IDB4N0UvKiB+ICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzdGF0ZS5sZXZlbCA+PSBzdGF0ZS5vcHRpb25zLm1heE5lc3RpbmcpIHsgcmV0dXJuIGZhbHNlOyB9CgogIGxhc3RDaGFyID0gc3RhcnQgPiAwID8gc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQgLSAxKSA6IC0xOwogIG5leHRDaGFyID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQgKyAyKTsKCiAgaWYgKGxhc3RDaGFyID09PSAweDdFLyogfiAqLykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAobmV4dENoYXIgPT09IDB4N0UvKiB+ICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChuZXh0Q2hhciA9PT0gMHgyMCB8fCBuZXh0Q2hhciA9PT0gMHgwQSkgeyByZXR1cm4gZmFsc2U7IH0KCiAgcG9zID0gc3RhcnQgKyAyOwogIHdoaWxlIChwb3MgPCBtYXggJiYgc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gMHg3RS8qIH4gKi8pIHsgcG9zKys7IH0KICBpZiAocG9zID4gc3RhcnQgKyAzKSB7CiAgICAvLyBzZXF1ZW5jZSBvZiA0KyBtYXJrZXJzIHRha2luZyBhcyBsaXRlcmFsLCBzYW1lIGFzIGluIGEgZW1waGFzaXMKICAgIHN0YXRlLnBvcyArPSBwb3MgLSBzdGFydDsKICAgIGlmICghc2lsZW50KSB7IHN0YXRlLnBlbmRpbmcgKz0gc3RhdGUuc3JjLnNsaWNlKHN0YXJ0LCBwb3MpOyB9CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHN0YXRlLnBvcyA9IHN0YXJ0ICsgMjsKICBzdGFjayA9IDE7CgogIHdoaWxlIChzdGF0ZS5wb3MgKyAxIDwgbWF4KSB7CiAgICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhdGUucG9zKSA9PT0gMHg3RS8qIH4gKi8pIHsKICAgICAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXRlLnBvcyArIDEpID09PSAweDdFLyogfiAqLykgewogICAgICAgIGxhc3RDaGFyID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhdGUucG9zIC0gMSk7CiAgICAgICAgbmV4dENoYXIgPSBzdGF0ZS5wb3MgKyAyIDwgbWF4ID8gc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhdGUucG9zICsgMikgOiAtMTsKICAgICAgICBpZiAobmV4dENoYXIgIT09IDB4N0UvKiB+ICovICYmIGxhc3RDaGFyICE9PSAweDdFLyogfiAqLykgewogICAgICAgICAgaWYgKGxhc3RDaGFyICE9PSAweDIwICYmIGxhc3RDaGFyICE9PSAweDBBKSB7CiAgICAgICAgICAgIC8vIGNsb3NpbmcgJ35+JwogICAgICAgICAgICBzdGFjay0tOwogICAgICAgICAgfSBlbHNlIGlmIChuZXh0Q2hhciAhPT0gMHgyMCAmJiBuZXh0Q2hhciAhPT0gMHgwQSkgewogICAgICAgICAgICAvLyBvcGVuaW5nICd+ficKICAgICAgICAgICAgc3RhY2srKzsKICAgICAgICAgIH0gLy8gZWxzZSB7CiAgICAgICAgICAgIC8vICAvLyBzdGFuZGFsb25lICcgfn4gJyBpbmRlbnRlZCB3aXRoIHNwYWNlcwogICAgICAgICAgICAvLyB9CiAgICAgICAgICBpZiAoc3RhY2sgPD0gMCkgewogICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHN0YXRlLnBhcnNlci5za2lwVG9rZW4oc3RhdGUpOwogIH0KCiAgaWYgKCFmb3VuZCkgewogICAgLy8gcGFyc2VyIGZhaWxlZCB0byBmaW5kIGVuZGluZyB0YWcsIHNvIGl0J3Mgbm90IHZhbGlkIGVtcGhhc2lzCiAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIC8vIGZvdW5kIQogIHN0YXRlLnBvc01heCA9IHN0YXRlLnBvczsKICBzdGF0ZS5wb3MgPSBzdGFydCArIDI7CgogIGlmICghc2lsZW50KSB7CiAgICBzdGF0ZS5wdXNoKHsgdHlwZTogJ2RlbF9vcGVuJywgbGV2ZWw6IHN0YXRlLmxldmVsKysgfSk7CiAgICBzdGF0ZS5wYXJzZXIudG9rZW5pemUoc3RhdGUpOwogICAgc3RhdGUucHVzaCh7IHR5cGU6ICdkZWxfY2xvc2UnLCBsZXZlbDogLS1zdGF0ZS5sZXZlbCB9KTsKICB9CgogIHN0YXRlLnBvcyA9IHN0YXRlLnBvc01heCArIDI7CiAgc3RhdGUucG9zTWF4ID0gbWF4OwogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sNDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBQcm9jZXNzICp0aGlzKiBhbmQgX3RoYXRfCgondXNlIHN0cmljdCc7CgoKZnVuY3Rpb24gaXNBbHBoYU51bShjb2RlKSB7CiAgcmV0dXJuIChjb2RlID49IDB4MzAgLyogMCAqLyAmJiBjb2RlIDw9IDB4MzkgLyogOSAqLykgfHwKICAgICAgICAgKGNvZGUgPj0gMHg0MSAvKiBBICovICYmIGNvZGUgPD0gMHg1QSAvKiBaICovKSB8fAogICAgICAgICAoY29kZSA+PSAweDYxIC8qIGEgKi8gJiYgY29kZSA8PSAweDdBIC8qIHogKi8pOwp9CgovLyBwYXJzZSBzZXF1ZW5jZSBvZiBlbXBoYXNpcyBtYXJrZXJzLAovLyAic3RhcnQiIHNob3VsZCBwb2ludCBhdCBhIHZhbGlkIG1hcmtlcgpmdW5jdGlvbiBzY2FuRGVsaW1zKHN0YXRlLCBzdGFydCkgewogIHZhciBwb3MgPSBzdGFydCwgbGFzdENoYXIsIG5leHRDaGFyLCBjb3VudCwKICAgICAgY2FuX29wZW4gPSB0cnVlLAogICAgICBjYW5fY2xvc2UgPSB0cnVlLAogICAgICBtYXggPSBzdGF0ZS5wb3NNYXgsCiAgICAgIG1hcmtlciA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0KTsKCiAgbGFzdENoYXIgPSBzdGFydCA+IDAgPyBzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCAtIDEpIDogLTE7CgogIHdoaWxlIChwb3MgPCBtYXggJiYgc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gbWFya2VyKSB7IHBvcysrOyB9CiAgaWYgKHBvcyA+PSBtYXgpIHsgY2FuX29wZW4gPSBmYWxzZTsgfQogIGNvdW50ID0gcG9zIC0gc3RhcnQ7CgogIGlmIChjb3VudCA+PSA0KSB7CiAgICAvLyBzZXF1ZW5jZSBvZiBmb3VyIG9yIG1vcmUgdW5lc2NhcGVkIG1hcmtlcnMgY2FuJ3Qgc3RhcnQvZW5kIGFuIGVtcGhhc2lzCiAgICBjYW5fb3BlbiA9IGNhbl9jbG9zZSA9IGZhbHNlOwogIH0gZWxzZSB7CiAgICBuZXh0Q2hhciA9IHBvcyA8IG1heCA/IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgOiAtMTsKCiAgICAvLyBjaGVjayB3aGl0ZXNwYWNlIGNvbmRpdGlvbnMKICAgIGlmIChuZXh0Q2hhciA9PT0gMHgyMCB8fCBuZXh0Q2hhciA9PT0gMHgwQSkgeyBjYW5fb3BlbiA9IGZhbHNlOyB9CiAgICBpZiAobGFzdENoYXIgPT09IDB4MjAgfHwgbGFzdENoYXIgPT09IDB4MEEpIHsgY2FuX2Nsb3NlID0gZmFsc2U7IH0KCiAgICBpZiAobWFya2VyID09PSAweDVGIC8qIF8gKi8pIHsKICAgICAgLy8gY2hlY2sgaWYgd2UgYXJlbid0IGluc2lkZSB0aGUgd29yZAogICAgICBpZiAoaXNBbHBoYU51bShsYXN0Q2hhcikpIHsgY2FuX29wZW4gPSBmYWxzZTsgfQogICAgICBpZiAoaXNBbHBoYU51bShuZXh0Q2hhcikpIHsgY2FuX2Nsb3NlID0gZmFsc2U7IH0KICAgIH0KICB9CgogIHJldHVybiB7CiAgICBjYW5fb3BlbjogY2FuX29wZW4sCiAgICBjYW5fY2xvc2U6IGNhbl9jbG9zZSwKICAgIGRlbGltczogY291bnQKICB9Owp9Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVtcGhhc2lzKHN0YXRlLCBzaWxlbnQpIHsKICB2YXIgc3RhcnRDb3VudCwKICAgICAgY291bnQsCiAgICAgIGZvdW5kLAogICAgICBvbGRDb3VudCwKICAgICAgbmV3Q291bnQsCiAgICAgIHN0YWNrLAogICAgICByZXMsCiAgICAgIG1heCA9IHN0YXRlLnBvc01heCwKICAgICAgc3RhcnQgPSBzdGF0ZS5wb3MsCiAgICAgIG1hcmtlciA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0KTsKCiAgaWYgKG1hcmtlciAhPT0gMHg1Ri8qIF8gKi8gJiYgbWFya2VyICE9PSAweDJBIC8qICogKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHNpbGVudCkgeyByZXR1cm4gZmFsc2U7IH0gLy8gZG9uJ3QgcnVuIGFueSBwYWlycyBpbiB2YWxpZGF0aW9uIG1vZGUKCiAgcmVzID0gc2NhbkRlbGltcyhzdGF0ZSwgc3RhcnQpOwogIHN0YXJ0Q291bnQgPSByZXMuZGVsaW1zOwogIGlmICghcmVzLmNhbl9vcGVuKSB7CiAgICBzdGF0ZS5wb3MgKz0gc3RhcnRDb3VudDsKICAgIGlmICghc2lsZW50KSB7IHN0YXRlLnBlbmRpbmcgKz0gc3RhdGUuc3JjLnNsaWNlKHN0YXJ0LCBzdGF0ZS5wb3MpOyB9CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGlmIChzdGF0ZS5sZXZlbCA+PSBzdGF0ZS5vcHRpb25zLm1heE5lc3RpbmcpIHsgcmV0dXJuIGZhbHNlOyB9CgogIHN0YXRlLnBvcyA9IHN0YXJ0ICsgc3RhcnRDb3VudDsKICBzdGFjayA9IFsgc3RhcnRDb3VudCBdOwoKICB3aGlsZSAoc3RhdGUucG9zIDwgbWF4KSB7CiAgICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhdGUucG9zKSA9PT0gbWFya2VyKSB7CiAgICAgIHJlcyA9IHNjYW5EZWxpbXMoc3RhdGUsIHN0YXRlLnBvcyk7CiAgICAgIGNvdW50ID0gcmVzLmRlbGltczsKICAgICAgaWYgKHJlcy5jYW5fY2xvc2UpIHsKICAgICAgICBvbGRDb3VudCA9IHN0YWNrLnBvcCgpOwogICAgICAgIG5ld0NvdW50ID0gY291bnQ7CgogICAgICAgIHdoaWxlIChvbGRDb3VudCAhPT0gbmV3Q291bnQpIHsKICAgICAgICAgIGlmIChuZXdDb3VudCA8IG9sZENvdW50KSB7CiAgICAgICAgICAgIHN0YWNrLnB1c2gob2xkQ291bnQgLSBuZXdDb3VudCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIGFzc2VydChuZXdDb3VudCA+IG9sZENvdW50KQogICAgICAgICAgbmV3Q291bnQgLT0gb2xkQ291bnQ7CgogICAgICAgICAgaWYgKHN0YWNrLmxlbmd0aCA9PT0gMCkgeyBicmVhazsgfQogICAgICAgICAgc3RhdGUucG9zICs9IG9sZENvdW50OwogICAgICAgICAgb2xkQ291bnQgPSBzdGFjay5wb3AoKTsKICAgICAgICB9CgogICAgICAgIGlmIChzdGFjay5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHN0YXJ0Q291bnQgPSBvbGRDb3VudDsKICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBzdGF0ZS5wb3MgKz0gY291bnQ7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIGlmIChyZXMuY2FuX29wZW4pIHsgc3RhY2sucHVzaChjb3VudCk7IH0KICAgICAgc3RhdGUucG9zICs9IGNvdW50OwogICAgICBjb250aW51ZTsKICAgIH0KCiAgICBzdGF0ZS5wYXJzZXIuc2tpcFRva2VuKHN0YXRlKTsKICB9CgogIGlmICghZm91bmQpIHsKICAgIC8vIHBhcnNlciBmYWlsZWQgdG8gZmluZCBlbmRpbmcgdGFnLCBzbyBpdCdzIG5vdCB2YWxpZCBlbXBoYXNpcwogICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICAvLyBmb3VuZCEKICBzdGF0ZS5wb3NNYXggPSBzdGF0ZS5wb3M7CiAgc3RhdGUucG9zID0gc3RhcnQgKyBzdGFydENvdW50OwoKICBpZiAoIXNpbGVudCkgewogICAgaWYgKHN0YXJ0Q291bnQgPT09IDIgfHwgc3RhcnRDb3VudCA9PT0gMykgewogICAgICBzdGF0ZS5wdXNoKHsgdHlwZTogJ3N0cm9uZ19vcGVuJywgbGV2ZWw6IHN0YXRlLmxldmVsKysgfSk7CiAgICB9CiAgICBpZiAoc3RhcnRDb3VudCA9PT0gMSB8fCBzdGFydENvdW50ID09PSAzKSB7CiAgICAgIHN0YXRlLnB1c2goeyB0eXBlOiAnZW1fb3BlbicsIGxldmVsOiBzdGF0ZS5sZXZlbCsrIH0pOwogICAgfQoKICAgIHN0YXRlLnBhcnNlci50b2tlbml6ZShzdGF0ZSk7CgogICAgaWYgKHN0YXJ0Q291bnQgPT09IDEgfHwgc3RhcnRDb3VudCA9PT0gMykgewogICAgICBzdGF0ZS5wdXNoKHsgdHlwZTogJ2VtX2Nsb3NlJywgbGV2ZWw6IC0tc3RhdGUubGV2ZWwgfSk7CiAgICB9CiAgICBpZiAoc3RhcnRDb3VudCA9PT0gMiB8fCBzdGFydENvdW50ID09PSAzKSB7CiAgICAgIHN0YXRlLnB1c2goeyB0eXBlOiAnc3Ryb25nX2Nsb3NlJywgbGV2ZWw6IC0tc3RhdGUubGV2ZWwgfSk7CiAgICB9CiAgfQoKICBzdGF0ZS5wb3MgPSBzdGF0ZS5wb3NNYXggKyBzdGFydENvdW50OwogIHN0YXRlLnBvc01heCA9IG1heDsKICByZXR1cm4gdHJ1ZTsKfTsKCn0se31dLDQ3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gUHJvY2VzcyBodG1sIGVudGl0eSAtICYjMTIzOywgJiN4QUY7LCAmcXVvdDssIC4uLgoKJ3VzZSBzdHJpY3QnOwoKdmFyIGVudGl0aWVzICAgICAgICAgID0gcmVxdWlyZSgnLi4vY29tbW9uL2VudGl0aWVzJyk7CnZhciBoYXMgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4uL2NvbW1vbi91dGlscycpLmhhczsKdmFyIGlzVmFsaWRFbnRpdHlDb2RlID0gcmVxdWlyZSgnLi4vY29tbW9uL3V0aWxzJykuaXNWYWxpZEVudGl0eUNvZGU7CnZhciBmcm9tQ29kZVBvaW50ICAgICA9IHJlcXVpcmUoJy4uL2NvbW1vbi91dGlscycpLmZyb21Db2RlUG9pbnQ7CgoKdmFyIERJR0lUQUxfUkUgPSAvXiYjKCg/OnhbYS1mMC05XXsxLDh9fFswLTldezEsOH0pKTsvaTsKdmFyIE5BTUVEX1JFICAgPSAvXiYoW2Etel1bYS16MC05XXsxLDMxfSk7L2k7CgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbnRpdHkoc3RhdGUsIHNpbGVudCkgewogIHZhciBjaCwgY29kZSwgbWF0Y2gsIHBvcyA9IHN0YXRlLnBvcywgbWF4ID0gc3RhdGUucG9zTWF4OwoKICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSAhPT0gMHgyNi8qICYgKi8pIHsgcmV0dXJuIGZhbHNlOyB9CgogIGlmIChwb3MgKyAxIDwgbWF4KSB7CiAgICBjaCA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcyArIDEpOwoKICAgIGlmIChjaCA9PT0gMHgyMyAvKiAjICovKSB7CiAgICAgIG1hdGNoID0gc3RhdGUuc3JjLnNsaWNlKHBvcykubWF0Y2goRElHSVRBTF9SRSk7CiAgICAgIGlmIChtYXRjaCkgewogICAgICAgIGlmICghc2lsZW50KSB7CiAgICAgICAgICBjb2RlID0gbWF0Y2hbMV1bMF0udG9Mb3dlckNhc2UoKSA9PT0gJ3gnID8gcGFyc2VJbnQobWF0Y2hbMV0uc2xpY2UoMSksIDE2KSA6IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7CiAgICAgICAgICBzdGF0ZS5wZW5kaW5nICs9IGlzVmFsaWRFbnRpdHlDb2RlKGNvZGUpID8gZnJvbUNvZGVQb2ludChjb2RlKSA6IGZyb21Db2RlUG9pbnQoMHhGRkZEKTsKICAgICAgICB9CiAgICAgICAgc3RhdGUucG9zICs9IG1hdGNoWzBdLmxlbmd0aDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgbWF0Y2ggPSBzdGF0ZS5zcmMuc2xpY2UocG9zKS5tYXRjaChOQU1FRF9SRSk7CiAgICAgIGlmIChtYXRjaCkgewogICAgICAgIGlmIChoYXMoZW50aXRpZXMsIG1hdGNoWzFdKSkgewogICAgICAgICAgaWYgKCFzaWxlbnQpIHsgc3RhdGUucGVuZGluZyArPSBlbnRpdGllc1ttYXRjaFsxXV07IH0KICAgICAgICAgIHN0YXRlLnBvcyArPSBtYXRjaFswXS5sZW5ndGg7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGlmICghc2lsZW50KSB7IHN0YXRlLnBlbmRpbmcgKz0gJyYnOyB9CiAgc3RhdGUucG9zKys7CiAgcmV0dXJuIHRydWU7Cn07Cgp9LHsiLi4vY29tbW9uL2VudGl0aWVzIjoxLCIuLi9jb21tb24vdXRpbHMiOjV9XSw0ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFByb2NlZXNzIGVzY2FwZWQgY2hhcnMgYW5kIGhhcmRicmVha3MKCid1c2Ugc3RyaWN0JzsKCnZhciBFU0NBUEVEID0gW107Cgpmb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgaSsrKSB7IEVTQ0FQRUQucHVzaCgwKTsgfQoKJ1xcISIjJCUmXCcoKSorLC4vOjs8PT4/QFtdXl9ge3x9fi0nCiAgLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uKGNoKSB7IEVTQ0FQRURbY2guY2hhckNvZGVBdCgwKV0gPSAxOyB9KTsKCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVzY2FwZShzdGF0ZSwgc2lsZW50KSB7CiAgdmFyIGNoLCBwb3MgPSBzdGF0ZS5wb3MsIG1heCA9IHN0YXRlLnBvc01heDsKCiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgIT09IDB4NUMvKiBcICovKSB7IHJldHVybiBmYWxzZTsgfQoKICBwb3MrKzsKCiAgaWYgKHBvcyA8IG1heCkgewogICAgY2ggPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpOwoKICAgIGlmIChjaCA8IDI1NiAmJiBFU0NBUEVEW2NoXSAhPT0gMCkgewogICAgICBpZiAoIXNpbGVudCkgeyBzdGF0ZS5wZW5kaW5nICs9IHN0YXRlLnNyY1twb3NdOyB9CiAgICAgIHN0YXRlLnBvcyArPSAyOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBpZiAoY2ggPT09IDB4MEEpIHsKICAgICAgaWYgKCFzaWxlbnQpIHsKICAgICAgICBzdGF0ZS5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdoYXJkYnJlYWsnLAogICAgICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHBvcysrOwogICAgICAvLyBza2lwIGxlYWRpbmcgd2hpdGVzcGFjZXMgZnJvbSBuZXh0IGxpbmUKICAgICAgd2hpbGUgKHBvcyA8IG1heCAmJiBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpID09PSAweDIwKSB7IHBvcysrOyB9CgogICAgICBzdGF0ZS5wb3MgPSBwb3M7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KCiAgaWYgKCFzaWxlbnQpIHsgc3RhdGUucGVuZGluZyArPSAnXFwnOyB9CiAgc3RhdGUucG9zKys7CiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSw0OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFByb2Nlc3MgaW5saW5lIGZvb3Rub3RlcyAoXlsuLi5dKQoKJ3VzZSBzdHJpY3QnOwoKdmFyIHBhcnNlTGlua0xhYmVsID0gcmVxdWlyZSgnLi4vaGVscGVycy9wYXJzZV9saW5rX2xhYmVsJyk7CgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBmb290bm90ZV9pbmxpbmUoc3RhdGUsIHNpbGVudCkgewogIHZhciBsYWJlbFN0YXJ0LAogICAgICBsYWJlbEVuZCwKICAgICAgZm9vdG5vdGVJZCwKICAgICAgb2xkTGVuZ3RoLAogICAgICBtYXggPSBzdGF0ZS5wb3NNYXgsCiAgICAgIHN0YXJ0ID0gc3RhdGUucG9zOwoKICBpZiAoc3RhcnQgKyAyID49IG1heCkgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQpICE9PSAweDVFLyogXiAqLykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQgKyAxKSAhPT0gMHg1Qi8qIFsgKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHN0YXRlLmxldmVsID49IHN0YXRlLm9wdGlvbnMubWF4TmVzdGluZykgeyByZXR1cm4gZmFsc2U7IH0KCiAgbGFiZWxTdGFydCA9IHN0YXJ0ICsgMjsKICBsYWJlbEVuZCA9IHBhcnNlTGlua0xhYmVsKHN0YXRlLCBzdGFydCArIDEpOwoKICAvLyBwYXJzZXIgZmFpbGVkIHRvIGZpbmQgJ10nLCBzbyBpdCdzIG5vdCBhIHZhbGlkIG5vdGUKICBpZiAobGFiZWxFbmQgPCAwKSB7IHJldHVybiBmYWxzZTsgfQoKICAvLyBXZSBmb3VuZCB0aGUgZW5kIG9mIHRoZSBsaW5rLCBhbmQga25vdyBmb3IgYSBmYWN0IGl0J3MgYSB2YWxpZCBsaW5rOwogIC8vIHNvIGFsbCB0aGF0J3MgbGVmdCB0byBkbyBpcyB0byBjYWxsIHRva2VuaXplci4KICAvLwogIGlmICghc2lsZW50KSB7CiAgICBpZiAoIXN0YXRlLmVudi5mb290bm90ZXMpIHsgc3RhdGUuZW52LmZvb3Rub3RlcyA9IHt9OyB9CiAgICBpZiAoIXN0YXRlLmVudi5mb290bm90ZXMubGlzdCkgeyBzdGF0ZS5lbnYuZm9vdG5vdGVzLmxpc3QgPSBbXTsgfQogICAgZm9vdG5vdGVJZCA9IHN0YXRlLmVudi5mb290bm90ZXMubGlzdC5sZW5ndGg7CgogICAgc3RhdGUucG9zID0gbGFiZWxTdGFydDsKICAgIHN0YXRlLnBvc01heCA9IGxhYmVsRW5kOwoKICAgIHN0YXRlLnB1c2goewogICAgICB0eXBlOiAnZm9vdG5vdGVfcmVmJywKICAgICAgaWQ6IGZvb3Rub3RlSWQsCiAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbAogICAgfSk7CiAgICBzdGF0ZS5saW5rTGV2ZWwrKzsKICAgIG9sZExlbmd0aCA9IHN0YXRlLnRva2Vucy5sZW5ndGg7CiAgICBzdGF0ZS5wYXJzZXIudG9rZW5pemUoc3RhdGUpOwogICAgc3RhdGUuZW52LmZvb3Rub3Rlcy5saXN0W2Zvb3Rub3RlSWRdID0geyB0b2tlbnM6IHN0YXRlLnRva2Vucy5zcGxpY2Uob2xkTGVuZ3RoKSB9OwogICAgc3RhdGUubGlua0xldmVsLS07CiAgfQoKICBzdGF0ZS5wb3MgPSBsYWJlbEVuZCArIDE7CiAgc3RhdGUucG9zTWF4ID0gbWF4OwogIHJldHVybiB0cnVlOwp9OwoKfSx7Ii4uL2hlbHBlcnMvcGFyc2VfbGlua19sYWJlbCI6MTJ9XSw1MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFByb2Nlc3MgZm9vdG5vdGUgcmVmZXJlbmNlcyAoW14uLi5dKQoKJ3VzZSBzdHJpY3QnOwoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZm9vdG5vdGVfcmVmKHN0YXRlLCBzaWxlbnQpIHsKICB2YXIgbGFiZWwsCiAgICAgIHBvcywKICAgICAgZm9vdG5vdGVJZCwKICAgICAgZm9vdG5vdGVTdWJJZCwKICAgICAgbWF4ID0gc3RhdGUucG9zTWF4LAogICAgICBzdGFydCA9IHN0YXRlLnBvczsKCiAgLy8gc2hvdWxkIGJlIGF0IGxlYXN0IDQgY2hhcnMgLSAiW154XSIKICBpZiAoc3RhcnQgKyAzID4gbWF4KSB7IHJldHVybiBmYWxzZTsgfQoKICBpZiAoIXN0YXRlLmVudi5mb290bm90ZXMgfHwgIXN0YXRlLmVudi5mb290bm90ZXMucmVmcykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQpICE9PSAweDVCLyogWyAqLykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQgKyAxKSAhPT0gMHg1RS8qIF4gKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHN0YXRlLmxldmVsID49IHN0YXRlLm9wdGlvbnMubWF4TmVzdGluZykgeyByZXR1cm4gZmFsc2U7IH0KCiAgZm9yIChwb3MgPSBzdGFydCArIDI7IHBvcyA8IG1heDsgcG9zKyspIHsKICAgIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpID09PSAweDIwKSB7IHJldHVybiBmYWxzZTsgfQogICAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgPT09IDB4MEEpIHsgcmV0dXJuIGZhbHNlOyB9CiAgICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gMHg1RCAvKiBdICovKSB7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgaWYgKHBvcyA9PT0gc3RhcnQgKyAyKSB7IHJldHVybiBmYWxzZTsgfSAvLyBubyBlbXB0eSBmb290bm90ZSBsYWJlbHMKICBpZiAocG9zID49IG1heCkgeyByZXR1cm4gZmFsc2U7IH0KICBwb3MrKzsKCiAgbGFiZWwgPSBzdGF0ZS5zcmMuc2xpY2Uoc3RhcnQgKyAyLCBwb3MgLSAxKTsKICBpZiAodHlwZW9mIHN0YXRlLmVudi5mb290bm90ZXMucmVmc1snOicgKyBsYWJlbF0gPT09ICd1bmRlZmluZWQnKSB7IHJldHVybiBmYWxzZTsgfQoKICBpZiAoIXNpbGVudCkgewogICAgaWYgKCFzdGF0ZS5lbnYuZm9vdG5vdGVzLmxpc3QpIHsgc3RhdGUuZW52LmZvb3Rub3Rlcy5saXN0ID0gW107IH0KCiAgICBpZiAoc3RhdGUuZW52LmZvb3Rub3Rlcy5yZWZzWyc6JyArIGxhYmVsXSA8IDApIHsKICAgICAgZm9vdG5vdGVJZCA9IHN0YXRlLmVudi5mb290bm90ZXMubGlzdC5sZW5ndGg7CiAgICAgIHN0YXRlLmVudi5mb290bm90ZXMubGlzdFtmb290bm90ZUlkXSA9IHsgbGFiZWw6IGxhYmVsLCBjb3VudDogMCB9OwogICAgICBzdGF0ZS5lbnYuZm9vdG5vdGVzLnJlZnNbJzonICsgbGFiZWxdID0gZm9vdG5vdGVJZDsKICAgIH0gZWxzZSB7CiAgICAgIGZvb3Rub3RlSWQgPSBzdGF0ZS5lbnYuZm9vdG5vdGVzLnJlZnNbJzonICsgbGFiZWxdOwogICAgfQoKICAgIGZvb3Rub3RlU3ViSWQgPSBzdGF0ZS5lbnYuZm9vdG5vdGVzLmxpc3RbZm9vdG5vdGVJZF0uY291bnQ7CiAgICBzdGF0ZS5lbnYuZm9vdG5vdGVzLmxpc3RbZm9vdG5vdGVJZF0uY291bnQrKzsKCiAgICBzdGF0ZS5wdXNoKHsKICAgICAgdHlwZTogJ2Zvb3Rub3RlX3JlZicsCiAgICAgIGlkOiBmb290bm90ZUlkLAogICAgICBzdWJJZDogZm9vdG5vdGVTdWJJZCwKICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgICB9KTsKICB9CgogIHN0YXRlLnBvcyA9IHBvczsKICBzdGF0ZS5wb3NNYXggPSBtYXg7CiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSw1MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFByb2Nlc3MgaHRtbCB0YWdzCgondXNlIHN0cmljdCc7CgoKdmFyIEhUTUxfVEFHX1JFID0gcmVxdWlyZSgnLi4vY29tbW9uL2h0bWxfcmUnKS5IVE1MX1RBR19SRTsKCgpmdW5jdGlvbiBpc0xldHRlcihjaCkgewogIC8qZXNsaW50IG5vLWJpdHdpc2U6MCovCiAgdmFyIGxjID0gY2ggfCAweDIwOyAvLyB0byBsb3dlciBjYXNlCiAgcmV0dXJuIChsYyA+PSAweDYxLyogYSAqLykgJiYgKGxjIDw9IDB4N2EvKiB6ICovKTsKfQoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaHRtbHRhZyhzdGF0ZSwgc2lsZW50KSB7CiAgdmFyIGNoLCBtYXRjaCwgbWF4LCBwb3MgPSBzdGF0ZS5wb3M7CgogIGlmICghc3RhdGUub3B0aW9ucy5odG1sKSB7IHJldHVybiBmYWxzZTsgfQoKICAvLyBDaGVjayBzdGFydAogIG1heCA9IHN0YXRlLnBvc01heDsKICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSAhPT0gMHgzQy8qIDwgKi8gfHwKICAgICAgcG9zICsgMiA+PSBtYXgpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIC8vIFF1aWNrIGZhaWwgb24gc2Vjb25kIGNoYXIKICBjaCA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcyArIDEpOwogIGlmIChjaCAhPT0gMHgyMS8qICEgKi8gJiYKICAgICAgY2ggIT09IDB4M0YvKiA/ICovICYmCiAgICAgIGNoICE9PSAweDJGLyogLyAqLyAmJgogICAgICAhaXNMZXR0ZXIoY2gpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBtYXRjaCA9IHN0YXRlLnNyYy5zbGljZShwb3MpLm1hdGNoKEhUTUxfVEFHX1JFKTsKICBpZiAoIW1hdGNoKSB7IHJldHVybiBmYWxzZTsgfQoKICBpZiAoIXNpbGVudCkgewogICAgc3RhdGUucHVzaCh7CiAgICAgIHR5cGU6ICdodG1sdGFnJywKICAgICAgY29udGVudDogc3RhdGUuc3JjLnNsaWNlKHBvcywgcG9zICsgbWF0Y2hbMF0ubGVuZ3RoKSwKICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgICB9KTsKICB9CiAgc3RhdGUucG9zICs9IG1hdGNoWzBdLmxlbmd0aDsKICByZXR1cm4gdHJ1ZTsKfTsKCn0seyIuLi9jb21tb24vaHRtbF9yZSI6M31dLDUyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gUHJvY2VzcyArK2luc2VydGVkIHRleHQrKwoKJ3VzZSBzdHJpY3QnOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbnMoc3RhdGUsIHNpbGVudCkgewogIHZhciBmb3VuZCwKICAgICAgcG9zLAogICAgICBzdGFjaywKICAgICAgbWF4ID0gc3RhdGUucG9zTWF4LAogICAgICBzdGFydCA9IHN0YXRlLnBvcywKICAgICAgbGFzdENoYXIsCiAgICAgIG5leHRDaGFyOwoKICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQpICE9PSAweDJCLyogKyAqLykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc2lsZW50KSB7IHJldHVybiBmYWxzZTsgfSAvLyBkb24ndCBydW4gYW55IHBhaXJzIGluIHZhbGlkYXRpb24gbW9kZQogIGlmIChzdGFydCArIDQgPj0gbWF4KSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCArIDEpICE9PSAweDJCLyogKyAqLykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc3RhdGUubGV2ZWwgPj0gc3RhdGUub3B0aW9ucy5tYXhOZXN0aW5nKSB7IHJldHVybiBmYWxzZTsgfQoKICBsYXN0Q2hhciA9IHN0YXJ0ID4gMCA/IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0IC0gMSkgOiAtMTsKICBuZXh0Q2hhciA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0ICsgMik7CgogIGlmIChsYXN0Q2hhciA9PT0gMHgyQi8qICsgKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKG5leHRDaGFyID09PSAweDJCLyogKyAqLykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAobmV4dENoYXIgPT09IDB4MjAgfHwgbmV4dENoYXIgPT09IDB4MEEpIHsgcmV0dXJuIGZhbHNlOyB9CgogIHBvcyA9IHN0YXJ0ICsgMjsKICB3aGlsZSAocG9zIDwgbWF4ICYmIHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgPT09IDB4MkIvKiArICovKSB7IHBvcysrOyB9CiAgaWYgKHBvcyAhPT0gc3RhcnQgKyAyKSB7CiAgICAvLyBzZXF1ZW5jZSBvZiAzKyBtYXJrZXJzIHRha2luZyBhcyBsaXRlcmFsLCBzYW1lIGFzIGluIGEgZW1waGFzaXMKICAgIHN0YXRlLnBvcyArPSBwb3MgLSBzdGFydDsKICAgIGlmICghc2lsZW50KSB7IHN0YXRlLnBlbmRpbmcgKz0gc3RhdGUuc3JjLnNsaWNlKHN0YXJ0LCBwb3MpOyB9CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHN0YXRlLnBvcyA9IHN0YXJ0ICsgMjsKICBzdGFjayA9IDE7CgogIHdoaWxlIChzdGF0ZS5wb3MgKyAxIDwgbWF4KSB7CiAgICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhdGUucG9zKSA9PT0gMHgyQi8qICsgKi8pIHsKICAgICAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXRlLnBvcyArIDEpID09PSAweDJCLyogKyAqLykgewogICAgICAgIGxhc3RDaGFyID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhdGUucG9zIC0gMSk7CiAgICAgICAgbmV4dENoYXIgPSBzdGF0ZS5wb3MgKyAyIDwgbWF4ID8gc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhdGUucG9zICsgMikgOiAtMTsKICAgICAgICBpZiAobmV4dENoYXIgIT09IDB4MkIvKiArICovICYmIGxhc3RDaGFyICE9PSAweDJCLyogKyAqLykgewogICAgICAgICAgaWYgKGxhc3RDaGFyICE9PSAweDIwICYmIGxhc3RDaGFyICE9PSAweDBBKSB7CiAgICAgICAgICAgIC8vIGNsb3NpbmcgJysrJwogICAgICAgICAgICBzdGFjay0tOwogICAgICAgICAgfSBlbHNlIGlmIChuZXh0Q2hhciAhPT0gMHgyMCAmJiBuZXh0Q2hhciAhPT0gMHgwQSkgewogICAgICAgICAgICAvLyBvcGVuaW5nICcrKycKICAgICAgICAgICAgc3RhY2srKzsKICAgICAgICAgIH0gLy8gZWxzZSB7CiAgICAgICAgICAgIC8vICAvLyBzdGFuZGFsb25lICcgKysgJyBpbmRlbnRlZCB3aXRoIHNwYWNlcwogICAgICAgICAgICAvLyB9CiAgICAgICAgICBpZiAoc3RhY2sgPD0gMCkgewogICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHN0YXRlLnBhcnNlci5za2lwVG9rZW4oc3RhdGUpOwogIH0KCiAgaWYgKCFmb3VuZCkgewogICAgLy8gcGFyc2VyIGZhaWxlZCB0byBmaW5kIGVuZGluZyB0YWcsIHNvIGl0J3Mgbm90IHZhbGlkIGVtcGhhc2lzCiAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIC8vIGZvdW5kIQogIHN0YXRlLnBvc01heCA9IHN0YXRlLnBvczsKICBzdGF0ZS5wb3MgPSBzdGFydCArIDI7CgogIGlmICghc2lsZW50KSB7CiAgICBzdGF0ZS5wdXNoKHsgdHlwZTogJ2luc19vcGVuJywgbGV2ZWw6IHN0YXRlLmxldmVsKysgfSk7CiAgICBzdGF0ZS5wYXJzZXIudG9rZW5pemUoc3RhdGUpOwogICAgc3RhdGUucHVzaCh7IHR5cGU6ICdpbnNfY2xvc2UnLCBsZXZlbDogLS1zdGF0ZS5sZXZlbCB9KTsKICB9CgogIHN0YXRlLnBvcyA9IHN0YXRlLnBvc01heCArIDI7CiAgc3RhdGUucG9zTWF4ID0gbWF4OwogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sNTM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBQcm9jZXNzIFtsaW5rc10oPHRvPiAic3R1ZmYiKQoKJ3VzZSBzdHJpY3QnOwoKdmFyIHBhcnNlTGlua0xhYmVsICAgICAgID0gcmVxdWlyZSgnLi4vaGVscGVycy9wYXJzZV9saW5rX2xhYmVsJyk7CnZhciBwYXJzZUxpbmtEZXN0aW5hdGlvbiA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvcGFyc2VfbGlua19kZXN0aW5hdGlvbicpOwp2YXIgcGFyc2VMaW5rVGl0bGUgICAgICAgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3BhcnNlX2xpbmtfdGl0bGUnKTsKdmFyIG5vcm1hbGl6ZVJlZmVyZW5jZSAgID0gcmVxdWlyZSgnLi4vaGVscGVycy9ub3JtYWxpemVfcmVmZXJlbmNlJyk7CgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBsaW5rcyhzdGF0ZSwgc2lsZW50KSB7CiAgdmFyIGxhYmVsU3RhcnQsCiAgICAgIGxhYmVsRW5kLAogICAgICBsYWJlbCwKICAgICAgaHJlZiwKICAgICAgdGl0bGUsCiAgICAgIHBvcywKICAgICAgcmVmLAogICAgICBjb2RlLAogICAgICBpc0ltYWdlID0gZmFsc2UsCiAgICAgIG9sZFBvcyA9IHN0YXRlLnBvcywKICAgICAgbWF4ID0gc3RhdGUucG9zTWF4LAogICAgICBzdGFydCA9IHN0YXRlLnBvcywKICAgICAgbWFya2VyID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQpOwoKICBpZiAobWFya2VyID09PSAweDIxLyogISAqLykgewogICAgaXNJbWFnZSA9IHRydWU7CiAgICBtYXJrZXIgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdCgrK3N0YXJ0KTsKICB9CgogIGlmIChtYXJrZXIgIT09IDB4NUIvKiBbICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzdGF0ZS5sZXZlbCA+PSBzdGF0ZS5vcHRpb25zLm1heE5lc3RpbmcpIHsgcmV0dXJuIGZhbHNlOyB9CgogIGxhYmVsU3RhcnQgPSBzdGFydCArIDE7CiAgbGFiZWxFbmQgPSBwYXJzZUxpbmtMYWJlbChzdGF0ZSwgc3RhcnQpOwoKICAvLyBwYXJzZXIgZmFpbGVkIHRvIGZpbmQgJ10nLCBzbyBpdCdzIG5vdCBhIHZhbGlkIGxpbmsKICBpZiAobGFiZWxFbmQgPCAwKSB7IHJldHVybiBmYWxzZTsgfQoKICBwb3MgPSBsYWJlbEVuZCArIDE7CiAgaWYgKHBvcyA8IG1heCAmJiBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpID09PSAweDI4LyogKCAqLykgewogICAgLy8KICAgIC8vIElubGluZSBsaW5rCiAgICAvLwoKICAgIC8vIFtsaW5rXSggIDxocmVmPiAgInRpdGxlIiAgKQogICAgLy8gICAgICAgIF5eIHNraXBwaW5nIHRoZXNlIHNwYWNlcwogICAgcG9zKys7CiAgICBmb3IgKDsgcG9zIDwgbWF4OyBwb3MrKykgewogICAgICBjb2RlID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKTsKICAgICAgaWYgKGNvZGUgIT09IDB4MjAgJiYgY29kZSAhPT0gMHgwQSkgeyBicmVhazsgfQogICAgfQogICAgaWYgKHBvcyA+PSBtYXgpIHsgcmV0dXJuIGZhbHNlOyB9CgogICAgLy8gW2xpbmtdKCAgPGhyZWY+ICAidGl0bGUiICApCiAgICAvLyAgICAgICAgICBeXl5eXl4gcGFyc2luZyBsaW5rIGRlc3RpbmF0aW9uCiAgICBzdGFydCA9IHBvczsKICAgIGlmIChwYXJzZUxpbmtEZXN0aW5hdGlvbihzdGF0ZSwgcG9zKSkgewogICAgICBocmVmID0gc3RhdGUubGlua0NvbnRlbnQ7CiAgICAgIHBvcyA9IHN0YXRlLnBvczsKICAgIH0gZWxzZSB7CiAgICAgIGhyZWYgPSAnJzsKICAgIH0KCiAgICAvLyBbbGlua10oICA8aHJlZj4gICJ0aXRsZSIgICkKICAgIC8vICAgICAgICAgICAgICAgIF5eIHNraXBwaW5nIHRoZXNlIHNwYWNlcwogICAgc3RhcnQgPSBwb3M7CiAgICBmb3IgKDsgcG9zIDwgbWF4OyBwb3MrKykgewogICAgICBjb2RlID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKTsKICAgICAgaWYgKGNvZGUgIT09IDB4MjAgJiYgY29kZSAhPT0gMHgwQSkgeyBicmVhazsgfQogICAgfQoKICAgIC8vIFtsaW5rXSggIDxocmVmPiAgInRpdGxlIiAgKQogICAgLy8gICAgICAgICAgICAgICAgICBeXl5eXl5eIHBhcnNpbmcgbGluayB0aXRsZQogICAgaWYgKHBvcyA8IG1heCAmJiBzdGFydCAhPT0gcG9zICYmIHBhcnNlTGlua1RpdGxlKHN0YXRlLCBwb3MpKSB7CiAgICAgIHRpdGxlID0gc3RhdGUubGlua0NvbnRlbnQ7CiAgICAgIHBvcyA9IHN0YXRlLnBvczsKCiAgICAgIC8vIFtsaW5rXSggIDxocmVmPiAgInRpdGxlIiAgKQogICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICBeXiBza2lwcGluZyB0aGVzZSBzcGFjZXMKICAgICAgZm9yICg7IHBvcyA8IG1heDsgcG9zKyspIHsKICAgICAgICBjb2RlID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKTsKICAgICAgICBpZiAoY29kZSAhPT0gMHgyMCAmJiBjb2RlICE9PSAweDBBKSB7IGJyZWFrOyB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRpdGxlID0gJyc7CiAgICB9CgogICAgaWYgKHBvcyA+PSBtYXggfHwgc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSAhPT0gMHgyOS8qICkgKi8pIHsKICAgICAgc3RhdGUucG9zID0gb2xkUG9zOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBwb3MrKzsKICB9IGVsc2UgewogICAgLy8KICAgIC8vIExpbmsgcmVmZXJlbmNlCiAgICAvLwoKICAgIC8vIGRvIG5vdCBhbGxvdyBuZXN0ZWQgcmVmZXJlbmNlIGxpbmtzCiAgICBpZiAoc3RhdGUubGlua0xldmVsID4gMCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgICAvLyBbZm9vXSAgW2Jhcl0KICAgIC8vICAgICAgXl4gb3B0aW9uYWwgd2hpdGVzcGFjZSAoY2FuIGluY2x1ZGUgbmV3bGluZXMpCiAgICBmb3IgKDsgcG9zIDwgbWF4OyBwb3MrKykgewogICAgICBjb2RlID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKTsKICAgICAgaWYgKGNvZGUgIT09IDB4MjAgJiYgY29kZSAhPT0gMHgwQSkgeyBicmVhazsgfQogICAgfQoKICAgIGlmIChwb3MgPCBtYXggJiYgc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gMHg1Qi8qIFsgKi8pIHsKICAgICAgc3RhcnQgPSBwb3MgKyAxOwogICAgICBwb3MgPSBwYXJzZUxpbmtMYWJlbChzdGF0ZSwgcG9zKTsKICAgICAgaWYgKHBvcyA+PSAwKSB7CiAgICAgICAgbGFiZWwgPSBzdGF0ZS5zcmMuc2xpY2Uoc3RhcnQsIHBvcysrKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwb3MgPSBzdGFydCAtIDE7CiAgICAgIH0KICAgIH0KCiAgICAvLyBjb3ZlcnMgbGFiZWwgPT09ICcnIGFuZCBsYWJlbCA9PT0gdW5kZWZpbmVkCiAgICAvLyAoY29sbGFwc2VkIHJlZmVyZW5jZSBsaW5rIGFuZCBzaG9ydGN1dCByZWZlcmVuY2UgbGluayByZXNwZWN0aXZlbHkpCiAgICBpZiAoIWxhYmVsKSB7CiAgICAgIGlmICh0eXBlb2YgbGFiZWwgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgcG9zID0gbGFiZWxFbmQgKyAxOwogICAgICB9CiAgICAgIGxhYmVsID0gc3RhdGUuc3JjLnNsaWNlKGxhYmVsU3RhcnQsIGxhYmVsRW5kKTsKICAgIH0KCiAgICByZWYgPSBzdGF0ZS5lbnYucmVmZXJlbmNlc1tub3JtYWxpemVSZWZlcmVuY2UobGFiZWwpXTsKICAgIGlmICghcmVmKSB7CiAgICAgIHN0YXRlLnBvcyA9IG9sZFBvczsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaHJlZiA9IHJlZi5ocmVmOwogICAgdGl0bGUgPSByZWYudGl0bGU7CiAgfQoKICAvLwogIC8vIFdlIGZvdW5kIHRoZSBlbmQgb2YgdGhlIGxpbmssIGFuZCBrbm93IGZvciBhIGZhY3QgaXQncyBhIHZhbGlkIGxpbms7CiAgLy8gc28gYWxsIHRoYXQncyBsZWZ0IHRvIGRvIGlzIHRvIGNhbGwgdG9rZW5pemVyLgogIC8vCiAgaWYgKCFzaWxlbnQpIHsKICAgIHN0YXRlLnBvcyA9IGxhYmVsU3RhcnQ7CiAgICBzdGF0ZS5wb3NNYXggPSBsYWJlbEVuZDsKCiAgICBpZiAoaXNJbWFnZSkgewogICAgICBzdGF0ZS5wdXNoKHsKICAgICAgICB0eXBlOiAnaW1hZ2UnLAogICAgICAgIHNyYzogaHJlZiwKICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgYWx0OiBzdGF0ZS5zcmMuc3Vic3RyKGxhYmVsU3RhcnQsIGxhYmVsRW5kIC0gbGFiZWxTdGFydCksCiAgICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgc3RhdGUucHVzaCh7CiAgICAgICAgdHlwZTogJ2xpbmtfb3BlbicsCiAgICAgICAgaHJlZjogaHJlZiwKICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsKysKICAgICAgfSk7CiAgICAgIHN0YXRlLmxpbmtMZXZlbCsrOwogICAgICBzdGF0ZS5wYXJzZXIudG9rZW5pemUoc3RhdGUpOwogICAgICBzdGF0ZS5saW5rTGV2ZWwtLTsKICAgICAgc3RhdGUucHVzaCh7IHR5cGU6ICdsaW5rX2Nsb3NlJywgbGV2ZWw6IC0tc3RhdGUubGV2ZWwgfSk7CiAgICB9CiAgfQoKICBzdGF0ZS5wb3MgPSBwb3M7CiAgc3RhdGUucG9zTWF4ID0gbWF4OwogIHJldHVybiB0cnVlOwp9OwoKfSx7Ii4uL2hlbHBlcnMvbm9ybWFsaXplX3JlZmVyZW5jZSI6MTAsIi4uL2hlbHBlcnMvcGFyc2VfbGlua19kZXN0aW5hdGlvbiI6MTEsIi4uL2hlbHBlcnMvcGFyc2VfbGlua19sYWJlbCI6MTIsIi4uL2hlbHBlcnMvcGFyc2VfbGlua190aXRsZSI6MTN9XSw1NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFByb2Nlc3MgPT1oaWdobGlnaHRlZCB0ZXh0PT0KCid1c2Ugc3RyaWN0JzsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVsKHN0YXRlLCBzaWxlbnQpIHsKICB2YXIgZm91bmQsCiAgICAgIHBvcywKICAgICAgc3RhY2ssCiAgICAgIG1heCA9IHN0YXRlLnBvc01heCwKICAgICAgc3RhcnQgPSBzdGF0ZS5wb3MsCiAgICAgIGxhc3RDaGFyLAogICAgICBuZXh0Q2hhcjsKCiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0KSAhPT0gMHgzRC8qID0gKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHNpbGVudCkgeyByZXR1cm4gZmFsc2U7IH0gLy8gZG9uJ3QgcnVuIGFueSBwYWlycyBpbiB2YWxpZGF0aW9uIG1vZGUKICBpZiAoc3RhcnQgKyA0ID49IG1heCkgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQgKyAxKSAhPT0gMHgzRC8qID0gKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHN0YXRlLmxldmVsID49IHN0YXRlLm9wdGlvbnMubWF4TmVzdGluZykgeyByZXR1cm4gZmFsc2U7IH0KCiAgbGFzdENoYXIgPSBzdGFydCA+IDAgPyBzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCAtIDEpIDogLTE7CiAgbmV4dENoYXIgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCArIDIpOwoKICBpZiAobGFzdENoYXIgPT09IDB4M0QvKiA9ICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChuZXh0Q2hhciA9PT0gMHgzRC8qID0gKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKG5leHRDaGFyID09PSAweDIwIHx8IG5leHRDaGFyID09PSAweDBBKSB7IHJldHVybiBmYWxzZTsgfQoKICBwb3MgPSBzdGFydCArIDI7CiAgd2hpbGUgKHBvcyA8IG1heCAmJiBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpID09PSAweDNELyogPSAqLykgeyBwb3MrKzsgfQogIGlmIChwb3MgIT09IHN0YXJ0ICsgMikgewogICAgLy8gc2VxdWVuY2Ugb2YgMysgbWFya2VycyB0YWtpbmcgYXMgbGl0ZXJhbCwgc2FtZSBhcyBpbiBhIGVtcGhhc2lzCiAgICBzdGF0ZS5wb3MgKz0gcG9zIC0gc3RhcnQ7CiAgICBpZiAoIXNpbGVudCkgeyBzdGF0ZS5wZW5kaW5nICs9IHN0YXRlLnNyYy5zbGljZShzdGFydCwgcG9zKTsgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICBzdGF0ZS5wb3MgPSBzdGFydCArIDI7CiAgc3RhY2sgPSAxOwoKICB3aGlsZSAoc3RhdGUucG9zICsgMSA8IG1heCkgewogICAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXRlLnBvcykgPT09IDB4M0QvKiA9ICovKSB7CiAgICAgIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGF0ZS5wb3MgKyAxKSA9PT0gMHgzRC8qID0gKi8pIHsKICAgICAgICBsYXN0Q2hhciA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXRlLnBvcyAtIDEpOwogICAgICAgIG5leHRDaGFyID0gc3RhdGUucG9zICsgMiA8IG1heCA/IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXRlLnBvcyArIDIpIDogLTE7CiAgICAgICAgaWYgKG5leHRDaGFyICE9PSAweDNELyogPSAqLyAmJiBsYXN0Q2hhciAhPT0gMHgzRC8qID0gKi8pIHsKICAgICAgICAgIGlmIChsYXN0Q2hhciAhPT0gMHgyMCAmJiBsYXN0Q2hhciAhPT0gMHgwQSkgewogICAgICAgICAgICAvLyBjbG9zaW5nICc9PScKICAgICAgICAgICAgc3RhY2stLTsKICAgICAgICAgIH0gZWxzZSBpZiAobmV4dENoYXIgIT09IDB4MjAgJiYgbmV4dENoYXIgIT09IDB4MEEpIHsKICAgICAgICAgICAgLy8gb3BlbmluZyAnPT0nCiAgICAgICAgICAgIHN0YWNrKys7CiAgICAgICAgICB9IC8vIGVsc2UgewogICAgICAgICAgICAvLyAgLy8gc3RhbmRhbG9uZSAnID09ICcgaW5kZW50ZWQgd2l0aCBzcGFjZXMKICAgICAgICAgICAgLy8gfQogICAgICAgICAgaWYgKHN0YWNrIDw9IDApIHsKICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzdGF0ZS5wYXJzZXIuc2tpcFRva2VuKHN0YXRlKTsKICB9CgogIGlmICghZm91bmQpIHsKICAgIC8vIHBhcnNlciBmYWlsZWQgdG8gZmluZCBlbmRpbmcgdGFnLCBzbyBpdCdzIG5vdCB2YWxpZCBlbXBoYXNpcwogICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICAvLyBmb3VuZCEKICBzdGF0ZS5wb3NNYXggPSBzdGF0ZS5wb3M7CiAgc3RhdGUucG9zID0gc3RhcnQgKyAyOwoKICBpZiAoIXNpbGVudCkgewogICAgc3RhdGUucHVzaCh7IHR5cGU6ICdtYXJrX29wZW4nLCBsZXZlbDogc3RhdGUubGV2ZWwrKyB9KTsKICAgIHN0YXRlLnBhcnNlci50b2tlbml6ZShzdGF0ZSk7CiAgICBzdGF0ZS5wdXNoKHsgdHlwZTogJ21hcmtfY2xvc2UnLCBsZXZlbDogLS1zdGF0ZS5sZXZlbCB9KTsKICB9CgogIHN0YXRlLnBvcyA9IHN0YXRlLnBvc01heCArIDI7CiAgc3RhdGUucG9zTWF4ID0gbWF4OwogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sNTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBQcm9jZWVzcyAnXG4nCgondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG5ld2xpbmUoc3RhdGUsIHNpbGVudCkgewogIHZhciBwbWF4LCBtYXgsIHBvcyA9IHN0YXRlLnBvczsKCiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgIT09IDB4MEEvKiBcbiAqLykgeyByZXR1cm4gZmFsc2U7IH0KCiAgcG1heCA9IHN0YXRlLnBlbmRpbmcubGVuZ3RoIC0gMTsKICBtYXggPSBzdGF0ZS5wb3NNYXg7CgogIC8vICcgIFxuJyAtPiBoYXJkYnJlYWsKICAvLyBMb29rdXAgaW4gcGVuZGluZyBjaGFycyBpcyBiYWQgcHJhY3RpY2UhIERvbid0IGNvcHkgdG8gb3RoZXIgcnVsZXMhCiAgLy8gUGVuZGluZyBzdHJpbmcgaXMgc3RvcmVkIGluIGNvbmNhdCBtb2RlLCBpbmRleGVkIGxvb2t1cHMgd2lsbCBjYXVzZQogIC8vIGNvbnZlcnRpb24gdG8gZmxhdCBtb2RlLgogIGlmICghc2lsZW50KSB7CiAgICBpZiAocG1heCA+PSAwICYmIHN0YXRlLnBlbmRpbmcuY2hhckNvZGVBdChwbWF4KSA9PT0gMHgyMCkgewogICAgICBpZiAocG1heCA+PSAxICYmIHN0YXRlLnBlbmRpbmcuY2hhckNvZGVBdChwbWF4IC0gMSkgPT09IDB4MjApIHsKICAgICAgICBzdGF0ZS5wZW5kaW5nID0gc3RhdGUucGVuZGluZy5yZXBsYWNlKC8gKyQvLCAnJyk7CiAgICAgICAgc3RhdGUucHVzaCh7CiAgICAgICAgICB0eXBlOiAnaGFyZGJyZWFrJywKICAgICAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRlLnBlbmRpbmcgPSBzdGF0ZS5wZW5kaW5nLnNsaWNlKDAsIC0xKTsKICAgICAgICBzdGF0ZS5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdzb2Z0YnJlYWsnLAogICAgICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICB9IGVsc2UgewogICAgICBzdGF0ZS5wdXNoKHsKICAgICAgICB0eXBlOiAnc29mdGJyZWFrJywKICAgICAgICBsZXZlbDogc3RhdGUubGV2ZWwKICAgICAgfSk7CiAgICB9CiAgfQoKICBwb3MrKzsKCiAgLy8gc2tpcCBoZWFkaW5nIHNwYWNlcyBmb3IgbmV4dCBsaW5lCiAgd2hpbGUgKHBvcyA8IG1heCAmJiBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpID09PSAweDIwKSB7IHBvcysrOyB9CgogIHN0YXRlLnBvcyA9IHBvczsKICByZXR1cm4gdHJ1ZTsKfTsKCn0se31dLDU2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gSW5saW5lIHBhcnNlciBzdGF0ZQoKJ3VzZSBzdHJpY3QnOwoKCmZ1bmN0aW9uIFN0YXRlSW5saW5lKHNyYywgcGFyc2VySW5saW5lLCBvcHRpb25zLCBlbnYsIG91dFRva2VucykgewogIHRoaXMuc3JjID0gc3JjOwogIHRoaXMuZW52ID0gZW52OwogIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CiAgdGhpcy5wYXJzZXIgPSBwYXJzZXJJbmxpbmU7CiAgdGhpcy50b2tlbnMgPSBvdXRUb2tlbnM7CiAgdGhpcy5wb3MgPSAwOwogIHRoaXMucG9zTWF4ID0gdGhpcy5zcmMubGVuZ3RoOwogIHRoaXMubGV2ZWwgPSAwOwogIHRoaXMucGVuZGluZyA9ICcnOwogIHRoaXMucGVuZGluZ0xldmVsID0gMDsKCiAgdGhpcy5jYWNoZSA9IFtdOyAgICAgICAgLy8gU3RvcmVzIHsgc3RhcnQ6IGVuZCB9IHBhaXJzLiBVc2VmdWwgZm9yIGJhY2t0cmFjawogICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9wdGltaXphdGlvbiBvZiBwYWlycyBwYXJzZSAoZW1waGFzaXMsIHN0cmlrZXMpLgoKICAvLyBMaW5rIHBhcnNlciBzdGF0ZSB2YXJzCgogIHRoaXMuaXNJbkxhYmVsID0gZmFsc2U7IC8vIFNldCB0cnVlIHdoZW4gc2VlayBsaW5rIGxhYmVsIC0gd2Ugc2hvdWxkIGRpc2FibGUKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAicGFpcmVkIiBydWxlcyAoZW1waGFzaXMsIHN0cmlrZXMpIHRvIG5vdCBza2lwCiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFpbGluZyBgXWAKCiAgdGhpcy5saW5rTGV2ZWwgPSAwOyAgICAgLy8gSW5jcmVtZW50IGZvciBlYWNoIG5lc3RpbmcgbGluay4gVXNlZCB0byBwcmV2ZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVzdGluZyBpbiBkZWZpbml0aW9ucwoKICB0aGlzLmxpbmtDb250ZW50ID0gJyc7ICAvLyBUZW1wb3Jhcnkgc3RvcmFnZSBmb3IgbGluayB1cmwKCiAgdGhpcy5sYWJlbFVubWF0Y2hlZFNjb3BlcyA9IDA7IC8vIFRyYWNrIHVucGFpcmVkIGBbYCBmb3IgbGluayBsYWJlbHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gKGJhY2t0cmFjayBvcHRpbWl6YXRpb24pCn0KCgovLyBGbHVzaCBwZW5kaW5nIHRleHQKLy8KU3RhdGVJbmxpbmUucHJvdG90eXBlLnB1c2hQZW5kaW5nID0gZnVuY3Rpb24gKCkgewogIHRoaXMudG9rZW5zLnB1c2goewogICAgdHlwZTogJ3RleHQnLAogICAgY29udGVudDogdGhpcy5wZW5kaW5nLAogICAgbGV2ZWw6IHRoaXMucGVuZGluZ0xldmVsCiAgfSk7CiAgdGhpcy5wZW5kaW5nID0gJyc7Cn07CgoKLy8gUHVzaCBuZXcgdG9rZW4gdG8gInN0cmVhbSIuCi8vIElmIHBlbmRpbmcgdGV4dCBleGlzdHMgLSBmbHVzaCBpdCBhcyB0ZXh0IHRva2VuCi8vClN0YXRlSW5saW5lLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKHRva2VuKSB7CiAgaWYgKHRoaXMucGVuZGluZykgewogICAgdGhpcy5wdXNoUGVuZGluZygpOwogIH0KCiAgdGhpcy50b2tlbnMucHVzaCh0b2tlbik7CiAgdGhpcy5wZW5kaW5nTGV2ZWwgPSB0aGlzLmxldmVsOwp9OwoKCi8vIFN0b3JlIHZhbHVlIHRvIGNhY2hlLgovLyAhISEgSW1wbGVtZW50YXRpb24gaGFzIHBhcnNlci1zcGVjaWZpYyBvcHRpbWl6YXRpb25zCi8vICEhISBrZXlzIE1VU1QgYmUgaW50ZWdlciwgPj0gMDsgdmFsdWVzIE1VU1QgYmUgaW50ZWdlciwgPiAwCi8vClN0YXRlSW5saW5lLnByb3RvdHlwZS5jYWNoZVNldCA9IGZ1bmN0aW9uIChrZXksIHZhbCkgewogIGZvciAodmFyIGkgPSB0aGlzLmNhY2hlLmxlbmd0aDsgaSA8PSBrZXk7IGkrKykgewogICAgdGhpcy5jYWNoZS5wdXNoKDApOwogIH0KCiAgdGhpcy5jYWNoZVtrZXldID0gdmFsOwp9OwoKCi8vIEdldCBjYWNoZSB2YWx1ZQovLwpTdGF0ZUlubGluZS5wcm90b3R5cGUuY2FjaGVHZXQgPSBmdW5jdGlvbiAoa2V5KSB7CiAgcmV0dXJuIGtleSA8IHRoaXMuY2FjaGUubGVuZ3RoID8gdGhpcy5jYWNoZVtrZXldIDogMDsKfTsKCgptb2R1bGUuZXhwb3J0cyA9IFN0YXRlSW5saW5lOwoKfSx7fV0sNTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBQcm9jZXNzIH5zdWJzY3JpcHR+CgondXNlIHN0cmljdCc7CgovLyBzYW1lIGFzIFVORVNDQVBFX01EX1JFIHBsdXMgYSBzcGFjZQp2YXIgVU5FU0NBUEVfUkUgPSAvXFwoWyBcXCEiIyQlJicoKSorLC5cLzo7PD0+P0BbXF1eX2B7fH1+LV0pL2c7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN1YihzdGF0ZSwgc2lsZW50KSB7CiAgdmFyIGZvdW5kLAogICAgICBjb250ZW50LAogICAgICBtYXggPSBzdGF0ZS5wb3NNYXgsCiAgICAgIHN0YXJ0ID0gc3RhdGUucG9zOwoKICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQpICE9PSAweDdFLyogfiAqLykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc2lsZW50KSB7IHJldHVybiBmYWxzZTsgfSAvLyBkb24ndCBydW4gYW55IHBhaXJzIGluIHZhbGlkYXRpb24gbW9kZQogIGlmIChzdGFydCArIDIgPj0gbWF4KSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzdGF0ZS5sZXZlbCA+PSBzdGF0ZS5vcHRpb25zLm1heE5lc3RpbmcpIHsgcmV0dXJuIGZhbHNlOyB9CgogIHN0YXRlLnBvcyA9IHN0YXJ0ICsgMTsKCiAgd2hpbGUgKHN0YXRlLnBvcyA8IG1heCkgewogICAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXRlLnBvcykgPT09IDB4N0UvKiB+ICovKSB7CiAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgc3RhdGUucGFyc2VyLnNraXBUb2tlbihzdGF0ZSk7CiAgfQoKICBpZiAoIWZvdW5kIHx8IHN0YXJ0ICsgMSA9PT0gc3RhdGUucG9zKSB7CiAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGNvbnRlbnQgPSBzdGF0ZS5zcmMuc2xpY2Uoc3RhcnQgKyAxLCBzdGF0ZS5wb3MpOwoKICAvLyBkb24ndCBhbGxvdyB1bmVzY2FwZWQgc3BhY2VzL25ld2xpbmVzIGluc2lkZQogIGlmIChjb250ZW50Lm1hdGNoKC8oXnxbXlxcXSkoXFxcXCkqXHMvKSkgewogICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICAvLyBmb3VuZCEKICBzdGF0ZS5wb3NNYXggPSBzdGF0ZS5wb3M7CiAgc3RhdGUucG9zID0gc3RhcnQgKyAxOwoKICBpZiAoIXNpbGVudCkgewogICAgc3RhdGUucHVzaCh7CiAgICAgIHR5cGU6ICdzdWInLAogICAgICBsZXZlbDogc3RhdGUubGV2ZWwsCiAgICAgIGNvbnRlbnQ6IGNvbnRlbnQucmVwbGFjZShVTkVTQ0FQRV9SRSwgJyQxJykKICAgIH0pOwogIH0KCiAgc3RhdGUucG9zID0gc3RhdGUucG9zTWF4ICsgMTsKICBzdGF0ZS5wb3NNYXggPSBtYXg7CiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSw1ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFByb2Nlc3MgXnN1cGVyc2NyaXB0XgoKJ3VzZSBzdHJpY3QnOwoKLy8gc2FtZSBhcyBVTkVTQ0FQRV9NRF9SRSBwbHVzIGEgc3BhY2UKdmFyIFVORVNDQVBFX1JFID0gL1xcKFsgXFwhIiMkJSYnKCkqKywuXC86Ozw9Pj9AW1xdXl9ge3x9fi1dKS9nOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzdXAoc3RhdGUsIHNpbGVudCkgewogIHZhciBmb3VuZCwKICAgICAgY29udGVudCwKICAgICAgbWF4ID0gc3RhdGUucG9zTWF4LAogICAgICBzdGFydCA9IHN0YXRlLnBvczsKCiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0KSAhPT0gMHg1RS8qIF4gKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHNpbGVudCkgeyByZXR1cm4gZmFsc2U7IH0gLy8gZG9uJ3QgcnVuIGFueSBwYWlycyBpbiB2YWxpZGF0aW9uIG1vZGUKICBpZiAoc3RhcnQgKyAyID49IG1heCkgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc3RhdGUubGV2ZWwgPj0gc3RhdGUub3B0aW9ucy5tYXhOZXN0aW5nKSB7IHJldHVybiBmYWxzZTsgfQoKICBzdGF0ZS5wb3MgPSBzdGFydCArIDE7CgogIHdoaWxlIChzdGF0ZS5wb3MgPCBtYXgpIHsKICAgIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGF0ZS5wb3MpID09PSAweDVFLyogXiAqLykgewogICAgICBmb3VuZCA9IHRydWU7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIHN0YXRlLnBhcnNlci5za2lwVG9rZW4oc3RhdGUpOwogIH0KCiAgaWYgKCFmb3VuZCB8fCBzdGFydCArIDEgPT09IHN0YXRlLnBvcykgewogICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBjb250ZW50ID0gc3RhdGUuc3JjLnNsaWNlKHN0YXJ0ICsgMSwgc3RhdGUucG9zKTsKCiAgLy8gZG9uJ3QgYWxsb3cgdW5lc2NhcGVkIHNwYWNlcy9uZXdsaW5lcyBpbnNpZGUKICBpZiAoY29udGVudC5tYXRjaCgvKF58W15cXF0pKFxcXFwpKlxzLykpIHsKICAgIHN0YXRlLnBvcyA9IHN0YXJ0OwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8gZm91bmQhCiAgc3RhdGUucG9zTWF4ID0gc3RhdGUucG9zOwogIHN0YXRlLnBvcyA9IHN0YXJ0ICsgMTsKCiAgaWYgKCFzaWxlbnQpIHsKICAgIHN0YXRlLnB1c2goewogICAgICB0eXBlOiAnc3VwJywKICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsLAogICAgICBjb250ZW50OiBjb250ZW50LnJlcGxhY2UoVU5FU0NBUEVfUkUsICckMScpCiAgICB9KTsKICB9CgogIHN0YXRlLnBvcyA9IHN0YXRlLnBvc01heCArIDE7CiAgc3RhdGUucG9zTWF4ID0gbWF4OwogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sNTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBTa2lwIHRleHQgY2hhcmFjdGVycyBmb3IgdGV4dCB0b2tlbiwgcGxhY2UgdGhvc2UgdG8gcGVuZGluZyBidWZmZXIKLy8gYW5kIGluY3JlbWVudCBjdXJyZW50IHBvcwoKJ3VzZSBzdHJpY3QnOwoKCi8vIFJ1bGUgdG8gc2tpcCBwdXJlIHRleHQKLy8gJ3t9JCVAfis9OicgcmVzZXJ2ZWQgZm9yIGV4dGVudGlvbnMKCmZ1bmN0aW9uIGlzVGVybWluYXRvckNoYXIoY2gpIHsKICBzd2l0Y2ggKGNoKSB7CiAgICBjYXNlIDB4MEEvKiBcbiAqLzoKICAgIGNhc2UgMHg1Qy8qIFwgKi86CiAgICBjYXNlIDB4NjAvKiBgICovOgogICAgY2FzZSAweDJBLyogKiAqLzoKICAgIGNhc2UgMHg1Ri8qIF8gKi86CiAgICBjYXNlIDB4NUUvKiBeICovOgogICAgY2FzZSAweDVCLyogWyAqLzoKICAgIGNhc2UgMHg1RC8qIF0gKi86CiAgICBjYXNlIDB4MjEvKiAhICovOgogICAgY2FzZSAweDI2LyogJiAqLzoKICAgIGNhc2UgMHgzQy8qIDwgKi86CiAgICBjYXNlIDB4M0UvKiA+ICovOgogICAgY2FzZSAweDdCLyogeyAqLzoKICAgIGNhc2UgMHg3RC8qIH0gKi86CiAgICBjYXNlIDB4MjQvKiAkICovOgogICAgY2FzZSAweDI1LyogJSAqLzoKICAgIGNhc2UgMHg0MC8qIEAgKi86CiAgICBjYXNlIDB4N0UvKiB+ICovOgogICAgY2FzZSAweDJCLyogKyAqLzoKICAgIGNhc2UgMHgzRC8qID0gKi86CiAgICBjYXNlIDB4M0EvKiA6ICovOgogICAgICByZXR1cm4gdHJ1ZTsKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBmYWxzZTsKICB9Cn0KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGV4dChzdGF0ZSwgc2lsZW50KSB7CiAgdmFyIHBvcyA9IHN0YXRlLnBvczsKCiAgd2hpbGUgKHBvcyA8IHN0YXRlLnBvc01heCAmJiAhaXNUZXJtaW5hdG9yQ2hhcihzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpKSkgewogICAgcG9zKys7CiAgfQoKICBpZiAocG9zID09PSBzdGF0ZS5wb3MpIHsgcmV0dXJuIGZhbHNlOyB9CgogIGlmICghc2lsZW50KSB7IHN0YXRlLnBlbmRpbmcgKz0gc3RhdGUuc3JjLnNsaWNlKHN0YXRlLnBvcywgcG9zKTsgfQoKICBzdGF0ZS5wb3MgPSBwb3M7CgogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sNjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7CiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUgdW5sZXNzIGFtZE1vZHVsZUlkIGlzIHNldAogICAgZGVmaW5lKFtdLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAocm9vdFsnQXV0b2xpbmtlciddID0gZmFjdG9yeSgpKTsKICAgIH0pOwogIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7CiAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXQKICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLAogICAgLy8gbGlrZSBOb2RlLgogICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7CiAgfSBlbHNlIHsKICAgIHJvb3RbJ0F1dG9saW5rZXInXSA9IGZhY3RvcnkoKTsKICB9Cn0odGhpcywgZnVuY3Rpb24gKCkgewoKLyohCiAqIEF1dG9saW5rZXIuanMKICogMC4xNS4zCiAqCiAqIENvcHlyaWdodChjKSAyMDE1IEdyZWdvcnkgSmFjb2JzIDxncmVnQGdyZWctamFjb2JzLmNvbT4KICogTUlUIExpY2Vuc2VkLiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocAogKgogKiBodHRwczovL2dpdGh1Yi5jb20vZ3JlZ2phY29icy9BdXRvbGlua2VyLmpzCiAqLwovKioKICogQGNsYXNzIEF1dG9saW5rZXIKICogQGV4dGVuZHMgT2JqZWN0CiAqIAogKiBVdGlsaXR5IGNsYXNzIHVzZWQgdG8gcHJvY2VzcyBhIGdpdmVuIHN0cmluZyBvZiB0ZXh0LCBhbmQgd3JhcCB0aGUgVVJMcywgZW1haWwgYWRkcmVzc2VzLCBhbmQgVHdpdHRlciBoYW5kbGVzIGluIAogKiB0aGUgYXBwcm9wcmlhdGUgYW5jaG9yICgmbHQ7YSZndDspIHRhZ3MgdG8gdHVybiB0aGVtIGludG8gbGlua3MuCiAqIAogKiBBbnkgb2YgdGhlIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBtYXkgYmUgcHJvdmlkZWQgaW4gYW4gT2JqZWN0IChtYXApIHByb3ZpZGVkIHRvIHRoZSBBdXRvbGlua2VyIGNvbnN0cnVjdG9yLCB3aGljaAogKiB3aWxsIGNvbmZpZ3VyZSBob3cgdGhlIHtAbGluayAjbGluayBsaW5rKCl9IG1ldGhvZCB3aWxsIHByb2Nlc3MgdGhlIGxpbmtzLgogKiAKICogRm9yIGV4YW1wbGU6CiAqIAogKiAgICAgdmFyIGF1dG9saW5rZXIgPSBuZXcgQXV0b2xpbmtlciggewogKiAgICAgICAgIG5ld1dpbmRvdyA6IGZhbHNlLAogKiAgICAgICAgIHRydW5jYXRlICA6IDMwCiAqICAgICB9ICk7CiAqICAgICAKICogICAgIHZhciBodG1sID0gYXV0b2xpbmtlci5saW5rKCAiSm9lIHdlbnQgdG8gd3d3LnlhaG9vLmNvbSIgKTsKICogICAgIC8vIHByb2R1Y2VzOiAnSm9lIHdlbnQgdG8gPGEgaHJlZj0iaHR0cDovL3d3dy55YWhvby5jb20iPnlhaG9vLmNvbTwvYT4nCiAqIAogKiAKICogVGhlIHtAbGluayAjc3RhdGljLWxpbmsgc3RhdGljIGxpbmsoKX0gbWV0aG9kIG1heSBhbHNvIGJlIHVzZWQgdG8gaW5saW5lIG9wdGlvbnMgaW50byBhIHNpbmdsZSBjYWxsLCB3aGljaCBtYXkKICogYmUgbW9yZSBjb252ZW5pZW50IGZvciBvbmUtb2ZmIHVzZXMuIEZvciBleGFtcGxlOgogKiAKICogICAgIHZhciBodG1sID0gQXV0b2xpbmtlci5saW5rKCAiSm9lIHdlbnQgdG8gd3d3LnlhaG9vLmNvbSIsIHsKICogICAgICAgICBuZXdXaW5kb3cgOiBmYWxzZSwKICogICAgICAgICB0cnVuY2F0ZSAgOiAzMAogKiAgICAgfSApOwogKiAgICAgLy8gcHJvZHVjZXM6ICdKb2Ugd2VudCB0byA8YSBocmVmPSJodHRwOi8vd3d3LnlhaG9vLmNvbSI+eWFob28uY29tPC9hPicKICogCiAqIAogKiAjIyBDdXN0b20gUmVwbGFjZW1lbnRzIG9mIExpbmtzCiAqIAogKiBJZiB0aGUgY29uZmlndXJhdGlvbiBvcHRpb25zIGRvIG5vdCBwcm92aWRlIGVub3VnaCBmbGV4aWJpbGl0eSwgYSB7QGxpbmsgI3JlcGxhY2VGbn0gbWF5IGJlIHByb3ZpZGVkIHRvIGZ1bGx5IGN1c3RvbWl6ZQogKiB0aGUgb3V0cHV0IG9mIEF1dG9saW5rZXIuIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG9uY2UgZm9yIGVhY2ggVVJML0VtYWlsL1R3aXR0ZXIgaGFuZGxlIG1hdGNoIHRoYXQgaXMgZW5jb3VudGVyZWQuCiAqIAogKiBGb3IgZXhhbXBsZToKICogCiAqICAgICB2YXIgaW5wdXQgPSAiLi4uIjsgIC8vIHN0cmluZyB3aXRoIFVSTHMsIEVtYWlsIEFkZHJlc3NlcywgYW5kIFR3aXR0ZXIgSGFuZGxlcwogKiAgICAgCiAqICAgICB2YXIgbGlua2VkVGV4dCA9IEF1dG9saW5rZXIubGluayggaW5wdXQsIHsKICogICAgICAgICByZXBsYWNlRm4gOiBmdW5jdGlvbiggYXV0b2xpbmtlciwgbWF0Y2ggKSB7CiAqICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAiaHJlZiA9ICIsIG1hdGNoLmdldEFuY2hvckhyZWYoKSApOwogKiAgICAgICAgICAgICBjb25zb2xlLmxvZyggInRleHQgPSAiLCBtYXRjaC5nZXRBbmNob3JUZXh0KCkgKTsKICogICAgICAgICAKICogICAgICAgICAgICAgc3dpdGNoKCBtYXRjaC5nZXRUeXBlKCkgKSB7CiAqICAgICAgICAgICAgICAgICBjYXNlICd1cmwnIDogCiAqICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coICJ1cmw6ICIsIG1hdGNoLmdldFVybCgpICk7CiAqICAgICAgICAgICAgICAgICAgICAgCiAqICAgICAgICAgICAgICAgICAgICAgaWYoIG1hdGNoLmdldFVybCgpLmluZGV4T2YoICdteXNpdGUuY29tJyApID09PSAtMSApIHsKICogICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IGF1dG9saW5rZXIuZ2V0VGFnQnVpbGRlcigpLmJ1aWxkKCBtYXRjaCApOyAgLy8gcmV0dXJucyBhbiBgQXV0b2xpbmtlci5IdG1sVGFnYCBpbnN0YW5jZSwgd2hpY2ggcHJvdmlkZXMgbXV0YXRvciBtZXRob2RzIGZvciBlYXN5IGNoYW5nZXMKICogICAgICAgICAgICAgICAgICAgICAgICAgdGFnLnNldEF0dHIoICdyZWwnLCAnbm9mb2xsb3cnICk7CiAqICAgICAgICAgICAgICAgICAgICAgICAgIHRhZy5hZGRDbGFzcyggJ2V4dGVybmFsLWxpbmsnICk7CiAqICAgICAgICAgICAgICAgICAgICAgICAgIAogKiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFnOwogKiAgICAgICAgICAgICAgICAgICAgICAgICAKICogICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogKiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsgIC8vIGxldCBBdXRvbGlua2VyIHBlcmZvcm0gaXRzIG5vcm1hbCBhbmNob3IgdGFnIHJlcGxhY2VtZW50CiAqICAgICAgICAgICAgICAgICAgICAgfQogKiAgICAgICAgICAgICAgICAgICAgIAogKiAgICAgICAgICAgICAgICAgY2FzZSAnZW1haWwnIDoKICogICAgICAgICAgICAgICAgICAgICB2YXIgZW1haWwgPSBtYXRjaC5nZXRFbWFpbCgpOwogKiAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAiZW1haWw6ICIsIGVtYWlsICk7CiAqICAgICAgICAgICAgICAgICAgICAgCiAqICAgICAgICAgICAgICAgICAgICAgaWYoIGVtYWlsID09PSAibXlAb3duLmFkZHJlc3MiICkgewogKiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7ICAvLyBkb24ndCBhdXRvLWxpbmsgdGhpcyBwYXJ0aWN1bGFyIGVtYWlsIGFkZHJlc3M7IGxlYXZlIGFzLWlzCiAqICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICogICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAgLy8gbm8gcmV0dXJuIHZhbHVlIHdpbGwgaGF2ZSBBdXRvbGlua2VyIHBlcmZvcm0gaXRzIG5vcm1hbCBhbmNob3IgdGFnIHJlcGxhY2VtZW50IChzYW1lIGFzIHJldHVybmluZyBgdHJ1ZWApCiAqICAgICAgICAgICAgICAgICAgICAgfQogKiAgICAgICAgICAgICAgICAgCiAqICAgICAgICAgICAgICAgICBjYXNlICd0d2l0dGVyJyA6CiAqICAgICAgICAgICAgICAgICAgICAgdmFyIHR3aXR0ZXJIYW5kbGUgPSBtYXRjaC5nZXRUd2l0dGVySGFuZGxlKCk7CiAqICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIHR3aXR0ZXJIYW5kbGUgKTsKICogICAgICAgICAgICAgICAgICAgICAKICogICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzxhIGhyZWY9Imh0dHA6Ly9uZXdwbGFjZS50by5saW5rLnR3aXR0ZXIuaGFuZGxlcy50by8iPicgKyB0d2l0dGVySGFuZGxlICsgJzwvYT4nOwogKiAgICAgICAgICAgICB9CiAqICAgICAgICAgfQogKiAgICAgfSApOwogKiAKICogCiAqIFRoZSBmdW5jdGlvbiBtYXkgcmV0dXJuIHRoZSBmb2xsb3dpbmcgdmFsdWVzOgogKiAKICogLSBgdHJ1ZWAgKEJvb2xlYW4pOiBBbGxvdyBBdXRvbGlua2VyIHRvIHJlcGxhY2UgdGhlIG1hdGNoIGFzIGl0IG5vcm1hbGx5IHdvdWxkLgogKiAtIGBmYWxzZWAgKEJvb2xlYW4pOiBEbyBub3QgcmVwbGFjZSB0aGUgY3VycmVudCBtYXRjaCBhdCBhbGwgLSBsZWF2ZSBhcy1pcy4KICogLSBBbnkgU3RyaW5nOiBJZiBhIHN0cmluZyBpcyByZXR1cm5lZCBmcm9tIHRoZSBmdW5jdGlvbiwgdGhlIHN0cmluZyB3aWxsIGJlIHVzZWQgZGlyZWN0bHkgYXMgdGhlIHJlcGxhY2VtZW50IEhUTUwgZm9yCiAqICAgdGhlIG1hdGNoLgogKiAtIEFuIHtAbGluayBBdXRvbGlua2VyLkh0bWxUYWd9IGluc3RhbmNlLCB3aGljaCBjYW4gYmUgdXNlZCB0byBidWlsZC9tb2RpZnkgYW4gSFRNTCB0YWcgYmVmb3JlIHdyaXRpbmcgb3V0IGl0cyBIVE1MIHRleHQuCiAqIAogKiBAY29uc3RydWN0b3IKICogQHBhcmFtIHtPYmplY3R9IFtjb25maWddIFRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBBdXRvbGlua2VyIGluc3RhbmNlLCBzcGVjaWZpZWQgaW4gYW4gT2JqZWN0IChtYXApLgogKi8KdmFyIEF1dG9saW5rZXIgPSBmdW5jdGlvbiggY2ZnICkgewoJQXV0b2xpbmtlci5VdGlsLmFzc2lnbiggdGhpcywgY2ZnICk7ICAvLyBhc3NpZ24gdGhlIHByb3BlcnRpZXMgb2YgYGNmZ2Agb250byB0aGUgQXV0b2xpbmtlciBpbnN0YW5jZS4gUHJvdG90eXBlIHByb3BlcnRpZXMgd2lsbCBiZSB1c2VkIGZvciBtaXNzaW5nIGNvbmZpZ3MuCn07CgoKQXV0b2xpbmtlci5wcm90b3R5cGUgPSB7Cgljb25zdHJ1Y3RvciA6IEF1dG9saW5rZXIsICAvLyBmaXggY29uc3RydWN0b3IgcHJvcGVydHkKCQoJLyoqCgkgKiBAY2ZnIHtCb29sZWFufSB1cmxzCgkgKiAKCSAqIGB0cnVlYCBpZiBtaXNjZWxsYW5lb3VzIFVSTHMgc2hvdWxkIGJlIGF1dG9tYXRpY2FsbHkgbGlua2VkLCBgZmFsc2VgIGlmIHRoZXkgc2hvdWxkIG5vdCBiZS4KCSAqLwoJdXJscyA6IHRydWUsCgkKCS8qKgoJICogQGNmZyB7Qm9vbGVhbn0gZW1haWwKCSAqIAoJICogYHRydWVgIGlmIGVtYWlsIGFkZHJlc3NlcyBzaG91bGQgYmUgYXV0b21hdGljYWxseSBsaW5rZWQsIGBmYWxzZWAgaWYgdGhleSBzaG91bGQgbm90IGJlLgoJICovCgllbWFpbCA6IHRydWUsCgkKCS8qKgoJICogQGNmZyB7Qm9vbGVhbn0gdHdpdHRlcgoJICogCgkgKiBgdHJ1ZWAgaWYgVHdpdHRlciBoYW5kbGVzICgiQGV4YW1wbGUiKSBzaG91bGQgYmUgYXV0b21hdGljYWxseSBsaW5rZWQsIGBmYWxzZWAgaWYgdGhleSBzaG91bGQgbm90IGJlLgoJICovCgl0d2l0dGVyIDogdHJ1ZSwKCQoJLyoqCgkgKiBAY2ZnIHtCb29sZWFufSBuZXdXaW5kb3cKCSAqIAoJICogYHRydWVgIGlmIHRoZSBsaW5rcyBzaG91bGQgb3BlbiBpbiBhIG5ldyB3aW5kb3csIGBmYWxzZWAgb3RoZXJ3aXNlLgoJICovCgluZXdXaW5kb3cgOiB0cnVlLAoJCgkvKioKCSAqIEBjZmcge0Jvb2xlYW59IHN0cmlwUHJlZml4CgkgKiAKCSAqIGB0cnVlYCBpZiAnaHR0cDovLycgb3IgJ2h0dHBzOi8vJyBhbmQvb3IgdGhlICd3d3cuJyBzaG91bGQgYmUgc3RyaXBwZWQgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIFVSTCBsaW5rcycgdGV4dCwgCgkgKiBgZmFsc2VgIG90aGVyd2lzZS4KCSAqLwoJc3RyaXBQcmVmaXggOiB0cnVlLAoJCgkvKioKCSAqIEBjZmcge051bWJlcn0gdHJ1bmNhdGUKCSAqIAoJICogQSBudW1iZXIgZm9yIGhvdyBtYW55IGNoYXJhY3RlcnMgbG9uZyBVUkxzL2VtYWlscy90d2l0dGVyIGhhbmRsZXMgc2hvdWxkIGJlIHRydW5jYXRlZCB0byBpbnNpZGUgdGhlIHRleHQgb2YgCgkgKiBhIGxpbmsuIElmIHRoZSBVUkwvZW1haWwvdHdpdHRlciBpcyBvdmVyIHRoaXMgbnVtYmVyIG9mIGNoYXJhY3RlcnMsIGl0IHdpbGwgYmUgdHJ1bmNhdGVkIHRvIHRoaXMgbGVuZ3RoIGJ5IAoJICogYWRkaW5nIGEgdHdvIHBlcmlvZCBlbGxpcHNpcyAoJy4uJykgdG8gdGhlIGVuZCBvZiB0aGUgc3RyaW5nLgoJICogCgkgKiBGb3IgZXhhbXBsZTogQSB1cmwgbGlrZSAnaHR0cDovL3d3dy55YWhvby5jb20vc29tZS9sb25nL3BhdGgvdG8vYS9maWxlJyB0cnVuY2F0ZWQgdG8gMjUgY2hhcmFjdGVycyBtaWdodCBsb29rCgkgKiBzb21ldGhpbmcgbGlrZSB0aGlzOiAneWFob28uY29tL3NvbWUvbG9uZy9wYXQuLicKCSAqLwoJdHJ1bmNhdGUgOiB1bmRlZmluZWQsCgkKCS8qKgoJICogQGNmZyB7U3RyaW5nfSBjbGFzc05hbWUKCSAqIAoJICogQSBDU1MgY2xhc3MgbmFtZSB0byBhZGQgdG8gdGhlIGdlbmVyYXRlZCBsaW5rcy4gVGhpcyBjbGFzcyB3aWxsIGJlIGFkZGVkIHRvIGFsbCBsaW5rcywgYXMgd2VsbCBhcyB0aGlzIGNsYXNzCgkgKiBwbHVzIHVybC9lbWFpbC90d2l0dGVyIHN1ZmZpeGVzIGZvciBzdHlsaW5nIHVybC9lbWFpbC90d2l0dGVyIGxpbmtzIGRpZmZlcmVudGx5LgoJICogCgkgKiBGb3IgZXhhbXBsZSwgaWYgdGhpcyBjb25maWcgaXMgcHJvdmlkZWQgYXMgIm15TGluayIsIHRoZW46CgkgKiAKCSAqIC0gVVJMIGxpbmtzIHdpbGwgaGF2ZSB0aGUgQ1NTIGNsYXNzZXM6ICJteUxpbmsgbXlMaW5rLXVybCIKCSAqIC0gRW1haWwgbGlua3Mgd2lsbCBoYXZlIHRoZSBDU1MgY2xhc3NlczogIm15TGluayBteUxpbmstZW1haWwiLCBhbmQKCSAqIC0gVHdpdHRlciBsaW5rcyB3aWxsIGhhdmUgdGhlIENTUyBjbGFzc2VzOiAibXlMaW5rIG15TGluay10d2l0dGVyIgoJICovCgljbGFzc05hbWUgOiAiIiwKCQoJLyoqCgkgKiBAY2ZnIHtGdW5jdGlvbn0gcmVwbGFjZUZuCgkgKiAKCSAqIEEgZnVuY3Rpb24gdG8gaW5kaXZpZHVhbGx5IHByb2Nlc3MgZWFjaCBVUkwvRW1haWwvVHdpdHRlciBtYXRjaCBmb3VuZCBpbiB0aGUgaW5wdXQgc3RyaW5nLgoJICogCgkgKiBTZWUgdGhlIGNsYXNzJ3MgZGVzY3JpcHRpb24gZm9yIHVzYWdlLgoJICogCgkgKiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczoKCSAqIAoJICogQGNmZyB7QXV0b2xpbmtlcn0gcmVwbGFjZUZuLmF1dG9saW5rZXIgVGhlIEF1dG9saW5rZXIgaW5zdGFuY2UsIHdoaWNoIG1heSBiZSB1c2VkIHRvIHJldHJpZXZlIGNoaWxkIG9iamVjdHMgZnJvbSAoc3VjaAoJICogICBhcyB0aGUgaW5zdGFuY2UncyB7QGxpbmsgI2dldFRhZ0J1aWxkZXIgdGFnIGJ1aWxkZXJ9KS4KCSAqIEBjZmcge0F1dG9saW5rZXIubWF0Y2guTWF0Y2h9IHJlcGxhY2VGbi5tYXRjaCBUaGUgTWF0Y2ggaW5zdGFuY2Ugd2hpY2ggY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlCgkgKiAgIHtAbGluayBBdXRvbGlua2VyLm1hdGNoLlVybCBVUkx9L3tAbGluayBBdXRvbGlua2VyLm1hdGNoLkVtYWlsIGVtYWlsfS97QGxpbmsgQXV0b2xpbmtlci5tYXRjaC5Ud2l0dGVyIFR3aXR0ZXJ9CgkgKiAgIG1hdGNoIHRoYXQgdGhlIGByZXBsYWNlRm5gIGlzIGN1cnJlbnRseSBwcm9jZXNzaW5nLgoJICovCgkKCQoJLyoqCgkgKiBAcHJpdmF0ZQoJICogQHByb3BlcnR5IHtBdXRvbGlua2VyLmh0bWxQYXJzZXIuSHRtbFBhcnNlcn0gaHRtbFBhcnNlcgoJICogCgkgKiBUaGUgSHRtbFBhcnNlciBpbnN0YW5jZSB1c2VkIHRvIHNraXAgb3ZlciBIVE1MIHRhZ3MsIHdoaWxlIGZpbmRpbmcgdGV4dCBub2RlcyB0byBwcm9jZXNzLiBUaGlzIGlzIGxhemlseSBpbnN0YW50aWF0ZWQKCSAqIGluIHRoZSB7QGxpbmsgI2dldEh0bWxQYXJzZXJ9IG1ldGhvZC4KCSAqLwoJaHRtbFBhcnNlciA6IHVuZGVmaW5lZCwKCQoJLyoqCgkgKiBAcHJpdmF0ZQoJICogQHByb3BlcnR5IHtBdXRvbGlua2VyLm1hdGNoUGFyc2VyLk1hdGNoUGFyc2VyfSBtYXRjaFBhcnNlcgoJICogCgkgKiBUaGUgTWF0Y2hQYXJzZXIgaW5zdGFuY2UgdXNlZCB0byBmaW5kIFVSTC9lbWFpbC9Ud2l0dGVyIG1hdGNoZXMgaW4gdGhlIHRleHQgbm9kZXMgb2YgYW4gaW5wdXQgc3RyaW5nIHBhc3NlZCB0bwoJICoge0BsaW5rICNsaW5rfS4gVGhpcyBpcyBsYXppbHkgaW5zdGFudGlhdGVkIGluIHRoZSB7QGxpbmsgI2dldE1hdGNoUGFyc2VyfSBtZXRob2QuCgkgKi8KCW1hdGNoUGFyc2VyIDogdW5kZWZpbmVkLAoJCgkvKioKCSAqIEBwcml2YXRlCgkgKiBAcHJvcGVydHkge0F1dG9saW5rZXIuQW5jaG9yVGFnQnVpbGRlcn0gdGFnQnVpbGRlcgoJICogCgkgKiBUaGUgQW5jaG9yVGFnQnVpbGRlciBpbnN0YW5jZSB1c2VkIHRvIGJ1aWxkIHRoZSBVUkwvZW1haWwvVHdpdHRlciByZXBsYWNlbWVudCBhbmNob3IgdGFncy4gVGhpcyBpcyBsYXppbHkgaW5zdGFudGlhdGVkCgkgKiBpbiB0aGUge0BsaW5rICNnZXRUYWdCdWlsZGVyfSBtZXRob2QuCgkgKi8KCXRhZ0J1aWxkZXIgOiB1bmRlZmluZWQsCgkKCQoJLyoqCgkgKiBBdXRvbWF0aWNhbGx5IGxpbmtzIFVSTHMsIGVtYWlsIGFkZHJlc3NlcywgYW5kIFR3aXR0ZXIgaGFuZGxlcyBmb3VuZCBpbiB0aGUgZ2l2ZW4gY2h1bmsgb2YgSFRNTC4gCgkgKiBEb2VzIG5vdCBsaW5rIFVSTHMgZm91bmQgd2l0aGluIEhUTUwgdGFncy4KCSAqIAoJICogRm9yIGluc3RhbmNlLCBpZiBnaXZlbiB0aGUgdGV4dDogYFlvdSBzaG91bGQgZ28gdG8gaHR0cDovL3d3dy55YWhvby5jb21gLCB0aGVuIHRoZSByZXN1bHQKCSAqIHdpbGwgYmUgYFlvdSBzaG91bGQgZ28gdG8gJmx0O2EgaHJlZj0iaHR0cDovL3d3dy55YWhvby5jb20iJmd0O2h0dHA6Ly93d3cueWFob28uY29tJmx0Oy9hJmd0O2AKCSAqIAoJICogVGhpcyBtZXRob2QgZmluZHMgdGhlIHRleHQgYXJvdW5kIGFueSBIVE1MIGVsZW1lbnRzIGluIHRoZSBpbnB1dCBgdGV4dE9ySHRtbGAsIHdoaWNoIHdpbGwgYmUgdGhlIHRleHQgdGhhdCBpcyBwcm9jZXNzZWQuCgkgKiBBbnkgb3JpZ2luYWwgSFRNTCBlbGVtZW50cyB3aWxsIGJlIGxlZnQgYXMtaXMsIGFzIHdlbGwgYXMgdGhlIHRleHQgdGhhdCBpcyBhbHJlYWR5IHdyYXBwZWQgaW4gYW5jaG9yICgmbHQ7YSZndDspIHRhZ3MuCgkgKiAKCSAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0T3JIdG1sIFRoZSBIVE1MIG9yIHRleHQgdG8gbGluayBVUkxzLCBlbWFpbCBhZGRyZXNzZXMsIGFuZCBUd2l0dGVyIGhhbmRsZXMgd2l0aGluIChkZXBlbmRpbmcgb24gaWYKCSAqICAgdGhlIHtAbGluayAjdXJsc30sIHtAbGluayAjZW1haWx9LCBhbmQge0BsaW5rICN0d2l0dGVyfSBvcHRpb25zIGFyZSBlbmFibGVkKS4KCSAqIEByZXR1cm4ge1N0cmluZ30gVGhlIEhUTUwsIHdpdGggVVJMcy9lbWFpbHMvVHdpdHRlciBoYW5kbGVzIGF1dG9tYXRpY2FsbHkgbGlua2VkLgoJICovCglsaW5rIDogZnVuY3Rpb24oIHRleHRPckh0bWwgKSB7CgkJdmFyIGh0bWxQYXJzZXIgPSB0aGlzLmdldEh0bWxQYXJzZXIoKSwKCQkgICAgaHRtbE5vZGVzID0gaHRtbFBhcnNlci5wYXJzZSggdGV4dE9ySHRtbCApLAoJCSAgICBhbmNob3JUYWdTdGFja0NvdW50ID0gMCwgIC8vIHVzZWQgdG8gb25seSBwcm9jZXNzIHRleHQgYXJvdW5kIGFuY2hvciB0YWdzLCBhbmQgYW55IGlubmVyIHRleHQvaHRtbCB0aGV5IG1heSBoYXZlCgkJICAgIHJlc3VsdEh0bWwgPSBbXTsKCQkKCQlmb3IoIHZhciBpID0gMCwgbGVuID0gaHRtbE5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrICkgewoJCQl2YXIgbm9kZSA9IGh0bWxOb2Rlc1sgaSBdLAoJCQkgICAgbm9kZVR5cGUgPSBub2RlLmdldFR5cGUoKSwKCQkJICAgIG5vZGVUZXh0ID0gbm9kZS5nZXRUZXh0KCk7CgkJCQoJCQlpZiggbm9kZVR5cGUgPT09ICdlbGVtZW50JyApIHsKCQkJCS8vIFByb2Nlc3MgSFRNTCBub2RlcyBpbiB0aGUgaW5wdXQgYHRleHRPckh0bWxgCgkJCQlpZiggbm9kZS5nZXRUYWdOYW1lKCkgPT09ICdhJyApIHsKCQkJCQlpZiggIW5vZGUuaXNDbG9zaW5nKCkgKSB7ICAvLyBpdCdzIHRoZSBzdGFydCA8YT4gdGFnCgkJCQkJCWFuY2hvclRhZ1N0YWNrQ291bnQrKzsKCQkJCQl9IGVsc2UgeyAgIC8vIGl0J3MgdGhlIGVuZCA8L2E+IHRhZwoJCQkJCQlhbmNob3JUYWdTdGFja0NvdW50ID0gTWF0aC5tYXgoIGFuY2hvclRhZ1N0YWNrQ291bnQgLSAxLCAwICk7ICAvLyBhdHRlbXB0IHRvIGhhbmRsZSBleHRyYW5lb3VzIDwvYT4gdGFncyBieSBtYWtpbmcgc3VyZSB0aGUgc3RhY2sgY291bnQgbmV2ZXIgZ29lcyBiZWxvdyAwCgkJCQkJfQoJCQkJfQoJCQkJcmVzdWx0SHRtbC5wdXNoKCBub2RlVGV4dCApOyAgLy8gbm93IGFkZCB0aGUgdGV4dCBvZiB0aGUgdGFnIGl0c2VsZiB2ZXJiYXRpbQoJCQkJCgkJCX0gZWxzZSBpZiggbm9kZVR5cGUgPT09ICdlbnRpdHknICkgewoJCQkJcmVzdWx0SHRtbC5wdXNoKCBub2RlVGV4dCApOyAgLy8gYXBwZW5kIEhUTUwgZW50aXR5IG5vZGVzIChzdWNoIGFzICcmbmJzcDsnKSB2ZXJiYXRpbQoJCQkJCgkJCX0gZWxzZSB7CgkJCQkvLyBQcm9jZXNzIHRleHQgbm9kZXMgaW4gdGhlIGlucHV0IGB0ZXh0T3JIdG1sYAoJCQkJaWYoIGFuY2hvclRhZ1N0YWNrQ291bnQgPT09IDAgKSB7CgkJCQkJLy8gSWYgd2UncmUgbm90IHdpdGhpbiBhbiA8YT4gdGFnLCBwcm9jZXNzIHRoZSB0ZXh0IG5vZGUgdG8gbGlua2lmeQoJCQkJCXZhciBsaW5raWZpZWRTdHIgPSB0aGlzLmxpbmtpZnlTdHIoIG5vZGVUZXh0ICk7CgkJCQkJcmVzdWx0SHRtbC5wdXNoKCBsaW5raWZpZWRTdHIgKTsKCQkJCQkKCQkJCX0gZWxzZSB7CgkJCQkJLy8gYHRleHRgIGlzIHdpdGhpbiBhbiA8YT4gdGFnLCBzaW1wbHkgYXBwZW5kIHRoZSB0ZXh0IC0gd2UgZG8gbm90IHdhbnQgdG8gYXV0b2xpbmsgYW55dGhpbmcgCgkJCQkJLy8gYWxyZWFkeSB3aXRoaW4gYW4gPGE+Li4uPC9hPiB0YWcKCQkJCQlyZXN1bHRIdG1sLnB1c2goIG5vZGVUZXh0ICk7CgkJCQl9CgkJCX0KCQl9CgkJCgkJcmV0dXJuIHJlc3VsdEh0bWwuam9pbiggIiIgKTsKCX0sCgkKCQoJLyoqCgkgKiBQcm9jZXNzIHRoZSB0ZXh0IHRoYXQgbGllcyBpbiBiZXR3ZWVuIEhUTUwgdGFncywgcGVyZm9ybWluZyB0aGUgYW5jaG9yIHRhZyByZXBsYWNlbWVudHMgZm9yIG1hdGNoZWQgCgkgKiBVUkxzL2VtYWlscy9Ud2l0dGVyIGhhbmRsZXMsIGFuZCByZXR1cm5zIHRoZSBzdHJpbmcgd2l0aCB0aGUgcmVwbGFjZW1lbnRzIG1hZGUuIAoJICogCgkgKiBUaGlzIG1ldGhvZCBkb2VzIHRoZSBhY3R1YWwgd3JhcHBpbmcgb2YgVVJMcy9lbWFpbHMvVHdpdHRlciBoYW5kbGVzIHdpdGggYW5jaG9yIHRhZ3MuCgkgKiAKCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBzdHJpbmcgb2YgdGV4dCB0byBhdXRvLWxpbmsuCgkgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSB0ZXh0IHdpdGggYW5jaG9yIHRhZ3MgYXV0by1maWxsZWQuCgkgKi8KCWxpbmtpZnlTdHIgOiBmdW5jdGlvbiggc3RyICkgewoJCXJldHVybiB0aGlzLmdldE1hdGNoUGFyc2VyKCkucmVwbGFjZSggc3RyLCB0aGlzLmNyZWF0ZU1hdGNoUmV0dXJuVmFsLCB0aGlzICk7Cgl9LAoJCgkKCS8qKgoJICogQ3JlYXRlcyB0aGUgcmV0dXJuIHN0cmluZyB2YWx1ZSBmb3IgYSBnaXZlbiBtYXRjaCBpbiB0aGUgaW5wdXQgc3RyaW5nLCBmb3IgdGhlIHtAbGluayAjcHJvY2Vzc1RleHROb2RlfSBtZXRob2QuCgkgKiAKCSAqIFRoaXMgbWV0aG9kIGhhbmRsZXMgdGhlIHtAbGluayAjcmVwbGFjZUZufSwgaWYgb25lIHdhcyBwcm92aWRlZC4KCSAqIAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7QXV0b2xpbmtlci5tYXRjaC5NYXRjaH0gbWF0Y2ggVGhlIE1hdGNoIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIG1hdGNoLgoJICogQHJldHVybiB7U3RyaW5nfSBUaGUgc3RyaW5nIHRoYXQgdGhlIGBtYXRjaGAgc2hvdWxkIGJlIHJlcGxhY2VkIHdpdGguIFRoaXMgaXMgdXN1YWxseSB0aGUgYW5jaG9yIHRhZyBzdHJpbmcsIGJ1dAoJICogICBtYXkgYmUgdGhlIGBtYXRjaFN0cmAgaXRzZWxmIGlmIHRoZSBtYXRjaCBpcyBub3QgdG8gYmUgcmVwbGFjZWQuCgkgKi8KCWNyZWF0ZU1hdGNoUmV0dXJuVmFsIDogZnVuY3Rpb24oIG1hdGNoICkgewoJCS8vIEhhbmRsZSBhIGN1c3RvbSBgcmVwbGFjZUZuYCBiZWluZyBwcm92aWRlZAoJCXZhciByZXBsYWNlRm5SZXN1bHQ7CgkJaWYoIHRoaXMucmVwbGFjZUZuICkgewoJCQlyZXBsYWNlRm5SZXN1bHQgPSB0aGlzLnJlcGxhY2VGbi5jYWxsKCB0aGlzLCB0aGlzLCBtYXRjaCApOyAgLy8gQXV0b2xpbmtlciBpbnN0YW5jZSBpcyB0aGUgY29udGV4dCwgYW5kIHRoZSBmaXJzdCBhcmcKCQl9CgkJCgkJaWYoIHR5cGVvZiByZXBsYWNlRm5SZXN1bHQgPT09ICdzdHJpbmcnICkgewoJCQlyZXR1cm4gcmVwbGFjZUZuUmVzdWx0OyAgLy8gYHJlcGxhY2VGbmAgcmV0dXJuZWQgYSBzdHJpbmcsIHVzZSB0aGF0CgkJCQoJCX0gZWxzZSBpZiggcmVwbGFjZUZuUmVzdWx0ID09PSBmYWxzZSApIHsKCQkJcmV0dXJuIG1hdGNoLmdldE1hdGNoZWRUZXh0KCk7ICAvLyBubyByZXBsYWNlbWVudCBmb3IgdGhlIG1hdGNoCgkJCQoJCX0gZWxzZSBpZiggcmVwbGFjZUZuUmVzdWx0IGluc3RhbmNlb2YgQXV0b2xpbmtlci5IdG1sVGFnICkgewoJCQlyZXR1cm4gcmVwbGFjZUZuUmVzdWx0LnRvU3RyaW5nKCk7CgkJCgkJfSBlbHNlIHsgIC8vIHJlcGxhY2VGblJlc3VsdCA9PT0gdHJ1ZSwgb3Igbm8vdW5rbm93biByZXR1cm4gdmFsdWUgZnJvbSBmdW5jdGlvbgoJCQkvLyBQZXJmb3JtIEF1dG9saW5rZXIncyBkZWZhdWx0IGFuY2hvciB0YWcgZ2VuZXJhdGlvbgoJCQl2YXIgdGFnQnVpbGRlciA9IHRoaXMuZ2V0VGFnQnVpbGRlcigpLAoJCQkgICAgYW5jaG9yVGFnID0gdGFnQnVpbGRlci5idWlsZCggbWF0Y2ggKTsgIC8vIHJldHVybnMgYW4gQXV0b2xpbmtlci5IdG1sVGFnIGluc3RhbmNlCgkJCQoJCQlyZXR1cm4gYW5jaG9yVGFnLnRvU3RyaW5nKCk7CgkJfQoJfSwKCQoJCgkvKioKCSAqIExhemlseSBpbnN0YW50aWF0ZXMgYW5kIHJldHVybnMgdGhlIHtAbGluayAjaHRtbFBhcnNlcn0gaW5zdGFuY2UgZm9yIHRoaXMgQXV0b2xpbmtlciBpbnN0YW5jZS4KCSAqIAoJICogQHByb3RlY3RlZAoJICogQHJldHVybiB7QXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxQYXJzZXJ9CgkgKi8KCWdldEh0bWxQYXJzZXIgOiBmdW5jdGlvbigpIHsKCQl2YXIgaHRtbFBhcnNlciA9IHRoaXMuaHRtbFBhcnNlcjsKCQkKCQlpZiggIWh0bWxQYXJzZXIgKSB7CgkJCWh0bWxQYXJzZXIgPSB0aGlzLmh0bWxQYXJzZXIgPSBuZXcgQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxQYXJzZXIoKTsKCQl9CgkJCgkJcmV0dXJuIGh0bWxQYXJzZXI7Cgl9LAoJCgkKCS8qKgoJICogTGF6aWx5IGluc3RhbnRpYXRlcyBhbmQgcmV0dXJucyB0aGUge0BsaW5rICNtYXRjaFBhcnNlcn0gaW5zdGFuY2UgZm9yIHRoaXMgQXV0b2xpbmtlciBpbnN0YW5jZS4KCSAqIAoJICogQHByb3RlY3RlZAoJICogQHJldHVybiB7QXV0b2xpbmtlci5tYXRjaFBhcnNlci5NYXRjaFBhcnNlcn0KCSAqLwoJZ2V0TWF0Y2hQYXJzZXIgOiBmdW5jdGlvbigpIHsKCQl2YXIgbWF0Y2hQYXJzZXIgPSB0aGlzLm1hdGNoUGFyc2VyOwoJCQoJCWlmKCAhbWF0Y2hQYXJzZXIgKSB7CgkJCW1hdGNoUGFyc2VyID0gdGhpcy5tYXRjaFBhcnNlciA9IG5ldyBBdXRvbGlua2VyLm1hdGNoUGFyc2VyLk1hdGNoUGFyc2VyKCB7CgkJCQl1cmxzIDogdGhpcy51cmxzLAoJCQkJZW1haWwgOiB0aGlzLmVtYWlsLAoJCQkJdHdpdHRlciA6IHRoaXMudHdpdHRlciwKCQkJCXN0cmlwUHJlZml4IDogdGhpcy5zdHJpcFByZWZpeAoJCQl9ICk7CgkJfQoJCQoJCXJldHVybiBtYXRjaFBhcnNlcjsKCX0sCgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSB7QGxpbmsgI3RhZ0J1aWxkZXJ9IGluc3RhbmNlIGZvciB0aGlzIEF1dG9saW5rZXIgaW5zdGFuY2UsIGxhemlseSBpbnN0YW50aWF0aW5nIGl0CgkgKiBpZiBpdCBkb2VzIG5vdCB5ZXQgZXhpc3QuCgkgKiAKCSAqIFRoaXMgbWV0aG9kIG1heSBiZSB1c2VkIGluIGEge0BsaW5rICNyZXBsYWNlRm59IHRvIGdlbmVyYXRlIHRoZSB7QGxpbmsgQXV0b2xpbmtlci5IdG1sVGFnIEh0bWxUYWd9IGluc3RhbmNlIHRoYXQgCgkgKiBBdXRvbGlua2VyIHdvdWxkIG5vcm1hbGx5IGdlbmVyYXRlLCBhbmQgdGhlbiBhbGxvdyBmb3IgbW9kaWZpY2F0aW9ucyBiZWZvcmUgcmV0dXJuaW5nIGl0LiBGb3IgZXhhbXBsZToKCSAqIAoJICogICAgIHZhciBodG1sID0gQXV0b2xpbmtlci5saW5rKCAiVGVzdCBnb29nbGUuY29tIiwgewoJICogICAgICAgICByZXBsYWNlRm4gOiBmdW5jdGlvbiggYXV0b2xpbmtlciwgbWF0Y2ggKSB7CgkgKiAgICAgICAgICAgICB2YXIgdGFnID0gYXV0b2xpbmtlci5nZXRUYWdCdWlsZGVyKCkuYnVpbGQoIG1hdGNoICk7ICAvLyByZXR1cm5zIGFuIHtAbGluayBBdXRvbGlua2VyLkh0bWxUYWd9IGluc3RhbmNlCgkgKiAgICAgICAgICAgICB0YWcuc2V0QXR0ciggJ3JlbCcsICdub2ZvbGxvdycgKTsKCSAqICAgICAgICAgICAgIAoJICogICAgICAgICAgICAgcmV0dXJuIHRhZzsKCSAqICAgICAgICAgfQoJICogICAgIH0gKTsKCSAqICAgICAKCSAqICAgICAvLyBnZW5lcmF0ZWQgaHRtbDoKCSAqICAgICAvLyAgIFRlc3QgPGEgaHJlZj0iaHR0cDovL2dvb2dsZS5jb20iIHRhcmdldD0iX2JsYW5rIiByZWw9Im5vZm9sbG93Ij5nb29nbGUuY29tPC9hPgoJICogCgkgKiBAcmV0dXJuIHtBdXRvbGlua2VyLkFuY2hvclRhZ0J1aWxkZXJ9CgkgKi8KCWdldFRhZ0J1aWxkZXIgOiBmdW5jdGlvbigpIHsKCQl2YXIgdGFnQnVpbGRlciA9IHRoaXMudGFnQnVpbGRlcjsKCQkKCQlpZiggIXRhZ0J1aWxkZXIgKSB7CgkJCXRhZ0J1aWxkZXIgPSB0aGlzLnRhZ0J1aWxkZXIgPSBuZXcgQXV0b2xpbmtlci5BbmNob3JUYWdCdWlsZGVyKCB7CgkJCQluZXdXaW5kb3cgICA6IHRoaXMubmV3V2luZG93LAoJCQkJdHJ1bmNhdGUgICAgOiB0aGlzLnRydW5jYXRlLAoJCQkJY2xhc3NOYW1lICAgOiB0aGlzLmNsYXNzTmFtZQoJCQl9ICk7CgkJfQoJCQoJCXJldHVybiB0YWdCdWlsZGVyOwoJfQoKfTsKCgovKioKICogQXV0b21hdGljYWxseSBsaW5rcyBVUkxzLCBlbWFpbCBhZGRyZXNzZXMsIGFuZCBUd2l0dGVyIGhhbmRsZXMgZm91bmQgaW4gdGhlIGdpdmVuIGNodW5rIG9mIEhUTUwuIAogKiBEb2VzIG5vdCBsaW5rIFVSTHMgZm91bmQgd2l0aGluIEhUTUwgdGFncy4KICogCiAqIEZvciBpbnN0YW5jZSwgaWYgZ2l2ZW4gdGhlIHRleHQ6IGBZb3Ugc2hvdWxkIGdvIHRvIGh0dHA6Ly93d3cueWFob28uY29tYCwgdGhlbiB0aGUgcmVzdWx0CiAqIHdpbGwgYmUgYFlvdSBzaG91bGQgZ28gdG8gJmx0O2EgaHJlZj0iaHR0cDovL3d3dy55YWhvby5jb20iJmd0O2h0dHA6Ly93d3cueWFob28uY29tJmx0Oy9hJmd0O2AKICogCiAqIEV4YW1wbGU6CiAqIAogKiAgICAgdmFyIGxpbmtlZFRleHQgPSBBdXRvbGlua2VyLmxpbmsoICJHbyB0byBnb29nbGUuY29tIiwgeyBuZXdXaW5kb3c6IGZhbHNlIH0gKTsKICogICAgIC8vIFByb2R1Y2VzOiAiR28gdG8gPGEgaHJlZj0iaHR0cDovL2dvb2dsZS5jb20iPmdvb2dsZS5jb208L2E+IgogKiAKICogQHN0YXRpYwogKiBAcGFyYW0ge1N0cmluZ30gdGV4dE9ySHRtbCBUaGUgSFRNTCBvciB0ZXh0IHRvIGZpbmQgVVJMcywgZW1haWwgYWRkcmVzc2VzLCBhbmQgVHdpdHRlciBoYW5kbGVzIHdpdGhpbiAoZGVwZW5kaW5nIG9uIGlmCiAqICAgdGhlIHtAbGluayAjdXJsc30sIHtAbGluayAjZW1haWx9LCBhbmQge0BsaW5rICN0d2l0dGVyfSBvcHRpb25zIGFyZSBlbmFibGVkKS4KICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBBbnkgb2YgdGhlIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIEF1dG9saW5rZXIgY2xhc3MsIHNwZWNpZmllZCBpbiBhbiBPYmplY3QgKG1hcCkuCiAqICAgU2VlIHRoZSBjbGFzcyBkZXNjcmlwdGlvbiBmb3IgYW4gZXhhbXBsZSBjYWxsLgogKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBIVE1MIHRleHQsIHdpdGggVVJMcyBhdXRvbWF0aWNhbGx5IGxpbmtlZAogKi8KQXV0b2xpbmtlci5saW5rID0gZnVuY3Rpb24oIHRleHRPckh0bWwsIG9wdGlvbnMgKSB7Cgl2YXIgYXV0b2xpbmtlciA9IG5ldyBBdXRvbGlua2VyKCBvcHRpb25zICk7CglyZXR1cm4gYXV0b2xpbmtlci5saW5rKCB0ZXh0T3JIdG1sICk7Cn07CgoKLy8gQXV0b2xpbmtlciBOYW1lc3BhY2VzCkF1dG9saW5rZXIubWF0Y2ggPSB7fTsKQXV0b2xpbmtlci5odG1sUGFyc2VyID0ge307CkF1dG9saW5rZXIubWF0Y2hQYXJzZXIgPSB7fTsKLypnbG9iYWwgQXV0b2xpbmtlciAqLwovKmpzaGludCBlcW51bGw6dHJ1ZSwgYm9zczp0cnVlICovCi8qKgogKiBAY2xhc3MgQXV0b2xpbmtlci5VdGlsCiAqIEBzaW5nbGV0b24KICogCiAqIEEgZmV3IHV0aWxpdHkgbWV0aG9kcyBmb3IgQXV0b2xpbmtlci4KICovCkF1dG9saW5rZXIuVXRpbCA9IHsKCQoJLyoqCgkgKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBhYnN0cmFjdE1ldGhvZAoJICogCgkgKiBBIGZ1bmN0aW9uIG9iamVjdCB3aGljaCByZXByZXNlbnRzIGFuIGFic3RyYWN0IG1ldGhvZC4KCSAqLwoJYWJzdHJhY3RNZXRob2QgOiBmdW5jdGlvbigpIHsgdGhyb3cgImFic3RyYWN0IjsgfSwKCQoJCgkvKioKCSAqIEFzc2lnbnMgKHNoYWxsb3cgY29waWVzKSB0aGUgcHJvcGVydGllcyBvZiBgc3JjYCBvbnRvIGBkZXN0YC4KCSAqIAoJICogQHBhcmFtIHtPYmplY3R9IGRlc3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC4KCSAqIEBwYXJhbSB7T2JqZWN0fSBzcmMgVGhlIHNvdXJjZSBvYmplY3QuCgkgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QgKGBkZXN0YCkKCSAqLwoJYXNzaWduIDogZnVuY3Rpb24oIGRlc3QsIHNyYyApIHsKCQlmb3IoIHZhciBwcm9wIGluIHNyYyApIHsKCQkJaWYoIHNyYy5oYXNPd25Qcm9wZXJ0eSggcHJvcCApICkgewoJCQkJZGVzdFsgcHJvcCBdID0gc3JjWyBwcm9wIF07CgkJCX0KCQl9CgkJCgkJcmV0dXJuIGRlc3Q7Cgl9LAoJCgkKCS8qKgoJICogRXh0ZW5kcyBgc3VwZXJjbGFzc2AgdG8gY3JlYXRlIGEgbmV3IHN1YmNsYXNzLCBhZGRpbmcgdGhlIGBwcm90b1Byb3BzYCB0byB0aGUgbmV3IHN1YmNsYXNzJ3MgcHJvdG90eXBlLgoJICogCgkgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdXBlcmNsYXNzIFRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBmb3IgdGhlIHN1cGVyY2xhc3MuCgkgKiBAcGFyYW0ge09iamVjdH0gcHJvdG9Qcm9wcyBUaGUgbWV0aG9kcy9wcm9wZXJ0aWVzIHRvIGFkZCB0byB0aGUgc3ViY2xhc3MncyBwcm90b3R5cGUuIFRoaXMgbWF5IGNvbnRhaW4gdGhlCgkgKiAgIHNwZWNpYWwgcHJvcGVydHkgYGNvbnN0cnVjdG9yYCwgd2hpY2ggd2lsbCBiZSB1c2VkIGFzIHRoZSBuZXcgc3ViY2xhc3MncyBjb25zdHJ1Y3RvciBmdW5jdGlvbi4KCSAqIEByZXR1cm4ge0Z1bmN0aW9ufSBUaGUgbmV3IHN1YmNsYXNzIGZ1bmN0aW9uLgoJICovCglleHRlbmQgOiBmdW5jdGlvbiggc3VwZXJjbGFzcywgcHJvdG9Qcm9wcyApIHsKCQl2YXIgc3VwZXJjbGFzc1Byb3RvID0gc3VwZXJjbGFzcy5wcm90b3R5cGU7CgkJCgkJdmFyIEYgPSBmdW5jdGlvbigpIHt9OwoJCUYucHJvdG90eXBlID0gc3VwZXJjbGFzc1Byb3RvOwoJCQoJCXZhciBzdWJjbGFzczsKCQlpZiggcHJvdG9Qcm9wcy5oYXNPd25Qcm9wZXJ0eSggJ2NvbnN0cnVjdG9yJyApICkgewoJCQlzdWJjbGFzcyA9IHByb3RvUHJvcHMuY29uc3RydWN0b3I7CgkJfSBlbHNlIHsKCQkJc3ViY2xhc3MgPSBmdW5jdGlvbigpIHsgc3VwZXJjbGFzc1Byb3RvLmNvbnN0cnVjdG9yLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsgfTsKCQl9CgkJCgkJdmFyIHN1YmNsYXNzUHJvdG8gPSBzdWJjbGFzcy5wcm90b3R5cGUgPSBuZXcgRigpOyAgLy8gc2V0IHVwIHByb3RvdHlwZSBjaGFpbgoJCXN1YmNsYXNzUHJvdG8uY29uc3RydWN0b3IgPSBzdWJjbGFzczsgIC8vIGZpeCBjb25zdHJ1Y3RvciBwcm9wZXJ0eQoJCXN1YmNsYXNzUHJvdG8uc3VwZXJjbGFzcyA9IHN1cGVyY2xhc3NQcm90bzsKCQkKCQlkZWxldGUgcHJvdG9Qcm9wcy5jb25zdHJ1Y3RvcjsgIC8vIGRvbid0IHJlLWFzc2lnbiBjb25zdHJ1Y3RvciBwcm9wZXJ0eSB0byB0aGUgcHJvdG90eXBlLCBzaW5jZSBhIG5ldyBmdW5jdGlvbiBtYXkgaGF2ZSBiZWVuIGNyZWF0ZWQgKGBzdWJjbGFzc2ApLCB3aGljaCBpcyBub3cgYWxyZWFkeSB0aGVyZQoJCUF1dG9saW5rZXIuVXRpbC5hc3NpZ24oIHN1YmNsYXNzUHJvdG8sIHByb3RvUHJvcHMgKTsKCQkKCQlyZXR1cm4gc3ViY2xhc3M7Cgl9LAoJCgkKCS8qKgoJICogVHJ1bmNhdGVzIHRoZSBgc3RyYCBhdCBgbGVuIC0gZWxsaXBzaXNDaGFycy5sZW5ndGhgLCBhbmQgYWRkcyB0aGUgYGVsbGlwc2lzQ2hhcnNgIHRvIHRoZQoJICogZW5kIG9mIHRoZSBzdHJpbmcgKGJ5IGRlZmF1bHQsIHR3byBwZXJpb2RzOiAnLi4nKS4gSWYgdGhlIGBzdHJgIGxlbmd0aCBkb2VzIG5vdCBleGNlZWQgCgkgKiBgbGVuYCwgdGhlIHN0cmluZyB3aWxsIGJlIHJldHVybmVkIHVuY2hhbmdlZC4KCSAqIAoJICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIHRvIHRydW5jYXRlIGFuZCBhZGQgYW4gZWxsaXBzaXMgdG8uCgkgKiBAcGFyYW0ge051bWJlcn0gdHJ1bmNhdGVMZW4gVGhlIGxlbmd0aCB0byB0cnVuY2F0ZSB0aGUgc3RyaW5nIGF0LgoJICogQHBhcmFtIHtTdHJpbmd9IFtlbGxpcHNpc0NoYXJzPS4uXSBUaGUgZWxsaXBzaXMgY2hhcmFjdGVyKHMpIHRvIGFkZCB0byB0aGUgZW5kIG9mIGBzdHJgCgkgKiAgIHdoZW4gdHJ1bmNhdGVkLiBEZWZhdWx0cyB0byAnLi4nCgkgKi8KCWVsbGlwc2lzIDogZnVuY3Rpb24oIHN0ciwgdHJ1bmNhdGVMZW4sIGVsbGlwc2lzQ2hhcnMgKSB7CgkJaWYoIHN0ci5sZW5ndGggPiB0cnVuY2F0ZUxlbiApIHsKCQkJZWxsaXBzaXNDaGFycyA9ICggZWxsaXBzaXNDaGFycyA9PSBudWxsICkgPyAnLi4nIDogZWxsaXBzaXNDaGFyczsKCQkJc3RyID0gc3RyLnN1YnN0cmluZyggMCwgdHJ1bmNhdGVMZW4gLSBlbGxpcHNpc0NoYXJzLmxlbmd0aCApICsgZWxsaXBzaXNDaGFyczsKCQl9CgkJcmV0dXJuIHN0cjsKCX0sCgkKCQoJLyoqCgkgKiBTdXBwb3J0cyBgQXJyYXkucHJvdG90eXBlLmluZGV4T2YoKWAgZnVuY3Rpb25hbGl0eSBmb3Igb2xkIElFIChJRTggYW5kIGJlbG93KS4KCSAqIAoJICogQHBhcmFtIHtBcnJheX0gYXJyIFRoZSBhcnJheSB0byBmaW5kIGFuIGVsZW1lbnQgb2YuCgkgKiBAcGFyYW0geyp9IGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gZmluZCBpbiB0aGUgYXJyYXksIGFuZCByZXR1cm4gdGhlIGluZGV4IG9mLgoJICogQHJldHVybiB7TnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIGBlbGVtZW50YCwgb3IgLTEgaWYgaXQgd2FzIG5vdCBmb3VuZC4KCSAqLwoJaW5kZXhPZiA6IGZ1bmN0aW9uKCBhcnIsIGVsZW1lbnQgKSB7CgkJaWYoIEFycmF5LnByb3RvdHlwZS5pbmRleE9mICkgewoJCQlyZXR1cm4gYXJyLmluZGV4T2YoIGVsZW1lbnQgKTsKCQkJCgkJfSBlbHNlIHsKCQkJZm9yKCB2YXIgaSA9IDAsIGxlbiA9IGFyci5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHsKCQkJCWlmKCBhcnJbIGkgXSA9PT0gZWxlbWVudCApIHJldHVybiBpOwoJCQl9CgkJCXJldHVybiAtMTsKCQl9Cgl9LAoJCgkKCQoJLyoqCgkgKiBQZXJmb3JtcyB0aGUgZnVuY3Rpb25hbGl0eSBvZiB3aGF0IG1vZGVybiBicm93c2VycyBkbyB3aGVuIGBTdHJpbmcucHJvdG90eXBlLnNwbGl0KClgIGlzIGNhbGxlZAoJICogd2l0aCBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGNvbnRhaW5zIGNhcHR1cmluZyBwYXJlbnRoZXNpcy4KCSAqIAoJICogRm9yIGV4YW1wbGU6CgkgKiAKCSAqICAgICAvLyBNb2Rlcm4gYnJvd3NlcnM6IAoJICogICAgICJhLGIsYyIuc3BsaXQoIC8oLCkvICk7ICAvLyAtLT4gWyAnYScsICcsJywgJ2InLCAnLCcsICdjJyBdCgkgKiAgICAgCgkgKiAgICAgLy8gT2xkIElFIChpbmNsdWRpbmcgSUU4KToKCSAqICAgICAiYSxiLGMiLnNwbGl0KCAvKCwpLyApOyAgLy8gLS0+IFsgJ2EnLCAnYicsICdjJyBdCgkgKiAgICAgCgkgKiBUaGlzIG1ldGhvZCBlbXVsYXRlcyB0aGUgZnVuY3Rpb25hbGl0eSBvZiBtb2Rlcm4gYnJvd3NlcnMgZm9yIHRoZSBvbGQgSUUgY2FzZS4KCSAqIAoJICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIHRvIHNwbGl0LgoJICogQHBhcmFtIHtSZWdFeHB9IHNwbGl0UmVnZXggVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzcGxpdCB0aGUgaW5wdXQgYHN0cmAgb24uIFRoZSBzcGxpdHRpbmcKCSAqICAgY2hhcmFjdGVyKHMpIHdpbGwgYmUgc3BsaWNlZCBpbnRvIHRoZSBhcnJheSwgYXMgaW4gdGhlICJtb2Rlcm4gYnJvd3NlcnMiIGV4YW1wbGUgaW4gdGhlIAoJICogICBkZXNjcmlwdGlvbiBvZiB0aGlzIG1ldGhvZC4gCgkgKiAgIE5vdGUgIzE6IHRoZSBzdXBwbGllZCByZWd1bGFyIGV4cHJlc3Npb24gKiptdXN0KiogaGF2ZSB0aGUgJ2cnIGZsYWcgc3BlY2lmaWVkLgoJICogICBOb3RlICMyOiBmb3Igc2ltcGxpY2l0eSdzIHNha2UsIHRoZSByZWd1bGFyIGV4cHJlc3Npb24gZG9lcyBub3QgbmVlZCAKCSAqICAgdG8gY29udGFpbiBjYXB0dXJpbmcgcGFyZW50aGVzaXMgLSBpdCB3aWxsIGJlIGFzc3VtZWQgdGhhdCBhbnkgbWF0Y2ggaGFzIHRoZW0uCgkgKiBAcmV0dXJuIHtTdHJpbmdbXX0gVGhlIHNwbGl0IGFycmF5IG9mIHN0cmluZ3MsIHdpdGggdGhlIHNwbGl0dGluZyBjaGFyYWN0ZXIocykgaW5jbHVkZWQuCgkgKi8KCXNwbGl0QW5kQ2FwdHVyZSA6IGZ1bmN0aW9uKCBzdHIsIHNwbGl0UmVnZXggKSB7CgkJaWYoICFzcGxpdFJlZ2V4Lmdsb2JhbCApIHRocm93IG5ldyBFcnJvciggImBzcGxpdFJlZ2V4YCBtdXN0IGhhdmUgdGhlICdnJyBmbGFnIHNldCIgKTsKCQkKCQl2YXIgcmVzdWx0ID0gW10sCgkJICAgIGxhc3RJZHggPSAwLAoJCSAgICBtYXRjaDsKCQkKCQl3aGlsZSggbWF0Y2ggPSBzcGxpdFJlZ2V4LmV4ZWMoIHN0ciApICkgewoJCQlyZXN1bHQucHVzaCggc3RyLnN1YnN0cmluZyggbGFzdElkeCwgbWF0Y2guaW5kZXggKSApOwoJCQlyZXN1bHQucHVzaCggbWF0Y2hbIDAgXSApOyAgLy8gcHVzaCB0aGUgc3BsaXR0aW5nIGNoYXIocykKCQkJCgkJCWxhc3RJZHggPSBtYXRjaC5pbmRleCArIG1hdGNoWyAwIF0ubGVuZ3RoOwoJCX0KCQlyZXN1bHQucHVzaCggc3RyLnN1YnN0cmluZyggbGFzdElkeCApICk7CgkJCgkJcmV0dXJuIHJlc3VsdDsKCX0KCQp9OwovKmdsb2JhbCBBdXRvbGlua2VyICovCi8qanNoaW50IGJvc3M6dHJ1ZSAqLwovKioKICogQGNsYXNzIEF1dG9saW5rZXIuSHRtbFRhZwogKiBAZXh0ZW5kcyBPYmplY3QKICogCiAqIFJlcHJlc2VudHMgYW4gSFRNTCB0YWcsIHdoaWNoIGNhbiBiZSB1c2VkIHRvIGVhc2lseSBidWlsZC9tb2RpZnkgSFRNTCB0YWdzIHByb2dyYW1tYXRpY2FsbHkuCiAqIAogKiBBdXRvbGlua2VyIHVzZXMgdGhpcyBhYnN0cmFjdGlvbiB0byBjcmVhdGUgSFRNTCB0YWdzLCBhbmQgdGhlbiB3cml0ZSB0aGVtIG91dCBhcyBzdHJpbmdzLiBZb3UgbWF5IGFsc28gdXNlCiAqIHRoaXMgY2xhc3MgaW4geW91ciBjb2RlLCBlc3BlY2lhbGx5IHdpdGhpbiBhIHtAbGluayBBdXRvbGlua2VyI3JlcGxhY2VGbiByZXBsYWNlRm59LgogKiAKICogIyMgRXhhbXBsZXMKICogCiAqIEV4YW1wbGUgaW5zdGFudGlhdGlvbjoKICogCiAqICAgICB2YXIgdGFnID0gbmV3IEF1dG9saW5rZXIuSHRtbFRhZyggewogKiAgICAgICAgIHRhZ05hbWUgOiAnYScsCiAqICAgICAgICAgYXR0cnMgICA6IHsgJ2hyZWYnOiAnaHR0cDovL2dvb2dsZS5jb20nLCAnY2xhc3MnOiAnZXh0ZXJuYWwtbGluaycgfSwKICogICAgICAgICBpbm5lckh0bWwgOiAnR29vZ2xlJwogKiAgICAgfSApOwogKiAgICAgCiAqICAgICB0YWcudG9TdHJpbmcoKTsgIC8vIDxhIGhyZWY9Imh0dHA6Ly9nb29nbGUuY29tIiBjbGFzcz0iZXh0ZXJuYWwtbGluayI+R29vZ2xlPC9hPgogKiAgICAgCiAqICAgICAvLyBJbmRpdmlkdWFsIGFjY2Vzc29yIG1ldGhvZHMKICogICAgIHRhZy5nZXRUYWdOYW1lKCk7ICAgICAgICAgICAgICAgICAvLyAnYScKICogICAgIHRhZy5nZXRBdHRyKCAnaHJlZicgKTsgICAgICAgICAgICAvLyAnaHR0cDovL2dvb2dsZS5jb20nCiAqICAgICB0YWcuaGFzQ2xhc3MoICdleHRlcm5hbC1saW5rJyApOyAgLy8gdHJ1ZQogKiAKICogCiAqIFVzaW5nIG11dGF0b3IgbWV0aG9kcyAod2hpY2ggbWF5IGJlIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCBpbnN0YW50aWF0aW9uIGNvbmZpZyBwcm9wZXJ0aWVzKToKICogCiAqICAgICB2YXIgdGFnID0gbmV3IEF1dG9saW5rZXIuSHRtbFRhZygpOwogKiAgICAgdGFnLnNldFRhZ05hbWUoICdhJyApOwogKiAgICAgdGFnLnNldEF0dHIoICdocmVmJywgJ2h0dHA6Ly9nb29nbGUuY29tJyApOwogKiAgICAgdGFnLmFkZENsYXNzKCAnZXh0ZXJuYWwtbGluaycgKTsKICogICAgIHRhZy5zZXRJbm5lckh0bWwoICdHb29nbGUnICk7CiAqICAgICAKICogICAgIHRhZy5nZXRUYWdOYW1lKCk7ICAgICAgICAgICAgICAgICAvLyAnYScKICogICAgIHRhZy5nZXRBdHRyKCAnaHJlZicgKTsgICAgICAgICAgICAvLyAnaHR0cDovL2dvb2dsZS5jb20nCiAqICAgICB0YWcuaGFzQ2xhc3MoICdleHRlcm5hbC1saW5rJyApOyAgLy8gdHJ1ZQogKiAgICAgCiAqICAgICB0YWcudG9TdHJpbmcoKTsgIC8vIDxhIGhyZWY9Imh0dHA6Ly9nb29nbGUuY29tIiBjbGFzcz0iZXh0ZXJuYWwtbGluayI+R29vZ2xlPC9hPgogKiAgICAgCiAqIAogKiAjIyBFeGFtcGxlIHVzZSB3aXRoaW4gYSB7QGxpbmsgQXV0b2xpbmtlciNyZXBsYWNlRm4gcmVwbGFjZUZufQogKiAKICogICAgIHZhciBodG1sID0gQXV0b2xpbmtlci5saW5rKCAiVGVzdCBnb29nbGUuY29tIiwgewogKiAgICAgICAgIHJlcGxhY2VGbiA6IGZ1bmN0aW9uKCBhdXRvbGlua2VyLCBtYXRjaCApIHsKICogICAgICAgICAgICAgdmFyIHRhZyA9IGF1dG9saW5rZXIuZ2V0VGFnQnVpbGRlcigpLmJ1aWxkKCBtYXRjaCApOyAgLy8gcmV0dXJucyBhbiB7QGxpbmsgQXV0b2xpbmtlci5IdG1sVGFnfSBpbnN0YW5jZSwgY29uZmlndXJlZCB3aXRoIHRoZSBNYXRjaCdzIGhyZWYgYW5kIGFuY2hvciB0ZXh0CiAqICAgICAgICAgICAgIHRhZy5zZXRBdHRyKCAncmVsJywgJ25vZm9sbG93JyApOwogKiAgICAgICAgICAgICAKICogICAgICAgICAgICAgcmV0dXJuIHRhZzsKICogICAgICAgICB9CiAqICAgICB9ICk7CiAqICAgICAKICogICAgIC8vIGdlbmVyYXRlZCBodG1sOgogKiAgICAgLy8gICBUZXN0IDxhIGhyZWY9Imh0dHA6Ly9nb29nbGUuY29tIiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub2ZvbGxvdyI+Z29vZ2xlLmNvbTwvYT4KICogICAgIAogKiAgICAgCiAqICMjIEV4YW1wbGUgdXNlIHdpdGggYSBuZXcgdGFnIGZvciB0aGUgcmVwbGFjZW1lbnQKICogCiAqICAgICB2YXIgaHRtbCA9IEF1dG9saW5rZXIubGluayggIlRlc3QgZ29vZ2xlLmNvbSIsIHsKICogICAgICAgICByZXBsYWNlRm4gOiBmdW5jdGlvbiggYXV0b2xpbmtlciwgbWF0Y2ggKSB7CiAqICAgICAgICAgICAgIHZhciB0YWcgPSBuZXcgQXV0b2xpbmtlci5IdG1sVGFnKCB7CiAqICAgICAgICAgICAgICAgICB0YWdOYW1lIDogJ2J1dHRvbicsCiAqICAgICAgICAgICAgICAgICBhdHRycyAgIDogeyAndGl0bGUnOiAnTG9hZCBVUkw6ICcgKyBtYXRjaC5nZXRBbmNob3JIcmVmKCkgfSwKICogICAgICAgICAgICAgICAgIGlubmVySHRtbCA6ICdMb2FkIFVSTDogJyArIG1hdGNoLmdldEFuY2hvclRleHQoKQogKiAgICAgICAgICAgICB9ICk7CiAqICAgICAgICAgICAgIAogKiAgICAgICAgICAgICByZXR1cm4gdGFnOwogKiAgICAgICAgIH0KICogICAgIH0gKTsKICogICAgIAogKiAgICAgLy8gZ2VuZXJhdGVkIGh0bWw6CiAqICAgICAvLyAgIFRlc3QgPGJ1dHRvbiB0aXRsZT0iTG9hZCBVUkw6IGh0dHA6Ly9nb29nbGUuY29tIj5Mb2FkIFVSTDogZ29vZ2xlLmNvbTwvYnV0dG9uPgogKi8KQXV0b2xpbmtlci5IdG1sVGFnID0gQXV0b2xpbmtlci5VdGlsLmV4dGVuZCggT2JqZWN0LCB7CgkKCS8qKgoJICogQGNmZyB7U3RyaW5nfSB0YWdOYW1lCgkgKiAKCSAqIFRoZSB0YWcgbmFtZS4gRXg6ICdhJywgJ2J1dHRvbicsIGV0Yy4KCSAqIAoJICogTm90IHJlcXVpcmVkIGF0IGluc3RhbnRpYXRpb24gdGltZSwgYnV0IHNob3VsZCBiZSBzZXQgdXNpbmcge0BsaW5rICNzZXRUYWdOYW1lfSBiZWZvcmUge0BsaW5rICN0b1N0cmluZ30KCSAqIGlzIGV4ZWN1dGVkLgoJICovCgkKCS8qKgoJICogQGNmZyB7T2JqZWN0LjxTdHJpbmcsIFN0cmluZz59IGF0dHJzCgkgKiAKCSAqIEFuIGtleS92YWx1ZSBPYmplY3QgKG1hcCkgb2YgYXR0cmlidXRlcyB0byBjcmVhdGUgdGhlIHRhZyB3aXRoLiBUaGUga2V5cyBhcmUgdGhlIGF0dHJpYnV0ZSBuYW1lcywgYW5kIHRoZQoJICogdmFsdWVzIGFyZSB0aGUgYXR0cmlidXRlIHZhbHVlcy4KCSAqLwoJCgkvKioKCSAqIEBjZmcge1N0cmluZ30gaW5uZXJIdG1sCgkgKiAKCSAqIFRoZSBpbm5lciBIVE1MIGZvciB0aGUgdGFnLiAKCSAqIAoJICogTm90ZSB0aGUgY2FtZWwgY2FzZSBuYW1lIG9uIGBpbm5lckh0bWxgLiBBY3JvbnltcyBhcmUgY2FtZWxDYXNlZCBpbiB0aGlzIHV0aWxpdHkgKHN1Y2ggYXMgbm90IHRvIHJ1biBpbnRvIHRoZSBhY3JvbnltIAoJICogbmFtaW5nIGluY29uc2lzdGVuY3kgdGhhdCB0aGUgRE9NIGRldmVsb3BlcnMgY3JlYXRlZCB3aXRoIGBYTUxIdHRwUmVxdWVzdGApLiBZb3UgbWF5IGFsdGVybmF0aXZlbHkgdXNlIHtAbGluayAjaW5uZXJIVE1MfQoJICogaWYgeW91IHByZWZlciwgYnV0IHRoaXMgb25lIGlzIHJlY29tbWVuZGVkLgoJICovCgkKCS8qKgoJICogQGNmZyB7U3RyaW5nfSBpbm5lckhUTUwKCSAqIAoJICogQWxpYXMgb2Yge0BsaW5rICNpbm5lckh0bWx9LCBhY2NlcHRlZCBmb3IgY29uc2lzdGVuY3kgd2l0aCB0aGUgYnJvd3NlciBET00gYXBpLCBidXQgcHJlZmVyIHRoZSBjYW1lbENhc2VkIHZlcnNpb24KCSAqIGZvciBhY3JvbnltIG5hbWVzLgoJICovCgkKCQoJLyoqCgkgKiBAcHJvdGVjdGVkCgkgKiBAcHJvcGVydHkge1JlZ0V4cH0gd2hpdGVzcGFjZVJlZ2V4CgkgKiAKCSAqIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIG1hdGNoIHdoaXRlc3BhY2UgaW4gYSBzdHJpbmcgb2YgQ1NTIGNsYXNzZXMuCgkgKi8KCXdoaXRlc3BhY2VSZWdleCA6IC9ccysvLAoJCgkKCS8qKgoJICogQGNvbnN0cnVjdG9yCgkgKiBAcGFyYW0ge09iamVjdH0gW2NmZ10gVGhlIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcyBmb3IgdGhpcyBjbGFzcywgaW4gYW4gT2JqZWN0IChtYXApCgkgKi8KCWNvbnN0cnVjdG9yIDogZnVuY3Rpb24oIGNmZyApIHsKCQlBdXRvbGlua2VyLlV0aWwuYXNzaWduKCB0aGlzLCBjZmcgKTsKCQkKCQl0aGlzLmlubmVySHRtbCA9IHRoaXMuaW5uZXJIdG1sIHx8IHRoaXMuaW5uZXJIVE1MOyAgLy8gYWNjZXB0IGVpdGhlciB0aGUgY2FtZWxDYXNlZCBmb3JtIG9yIHRoZSBmdWxseSBjYXBpdGFsaXplZCBhY3JvbnltCgl9LAoJCgkKCS8qKgoJICogU2V0cyB0aGUgdGFnIG5hbWUgdGhhdCB3aWxsIGJlIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIHRhZyB3aXRoLgoJICogCgkgKiBAcGFyYW0ge1N0cmluZ30gdGFnTmFtZQoJICogQHJldHVybiB7QXV0b2xpbmtlci5IdG1sVGFnfSBUaGlzIEh0bWxUYWcgaW5zdGFuY2UsIHNvIHRoYXQgbWV0aG9kIGNhbGxzIG1heSBiZSBjaGFpbmVkLgoJICovCglzZXRUYWdOYW1lIDogZnVuY3Rpb24oIHRhZ05hbWUgKSB7CgkJdGhpcy50YWdOYW1lID0gdGFnTmFtZTsKCQlyZXR1cm4gdGhpczsKCX0sCgkKCQoJLyoqCgkgKiBSZXRyaWV2ZXMgdGhlIHRhZyBuYW1lLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldFRhZ05hbWUgOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy50YWdOYW1lIHx8ICIiOwoJfSwKCQoJCgkvKioKCSAqIFNldHMgYW4gYXR0cmlidXRlIG9uIHRoZSBIdG1sVGFnLgoJICogCgkgKiBAcGFyYW0ge1N0cmluZ30gYXR0ck5hbWUgVGhlIGF0dHJpYnV0ZSBuYW1lIHRvIHNldC4KCSAqIEBwYXJhbSB7U3RyaW5nfSBhdHRyVmFsdWUgVGhlIGF0dHJpYnV0ZSB2YWx1ZSB0byBzZXQuCgkgKiBAcmV0dXJuIHtBdXRvbGlua2VyLkh0bWxUYWd9IFRoaXMgSHRtbFRhZyBpbnN0YW5jZSwgc28gdGhhdCBtZXRob2QgY2FsbHMgbWF5IGJlIGNoYWluZWQuCgkgKi8KCXNldEF0dHIgOiBmdW5jdGlvbiggYXR0ck5hbWUsIGF0dHJWYWx1ZSApIHsKCQl2YXIgdGFnQXR0cnMgPSB0aGlzLmdldEF0dHJzKCk7CgkJdGFnQXR0cnNbIGF0dHJOYW1lIF0gPSBhdHRyVmFsdWU7CgkJCgkJcmV0dXJuIHRoaXM7Cgl9LAoJCgkKCS8qKgoJICogUmV0cmlldmVzIGFuIGF0dHJpYnV0ZSBmcm9tIHRoZSBIdG1sVGFnLiBJZiB0aGUgYXR0cmlidXRlIGRvZXMgbm90IGV4aXN0LCByZXR1cm5zIGB1bmRlZmluZWRgLgoJICogCgkgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBUaGUgYXR0cmlidXRlIG5hbWUgdG8gcmV0cmlldmUuCgkgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBhdHRyaWJ1dGUncyB2YWx1ZSwgb3IgYHVuZGVmaW5lZGAgaWYgaXQgZG9lcyBub3QgZXhpc3Qgb24gdGhlIEh0bWxUYWcuCgkgKi8KCWdldEF0dHIgOiBmdW5jdGlvbiggYXR0ck5hbWUgKSB7CgkJcmV0dXJuIHRoaXMuZ2V0QXR0cnMoKVsgYXR0ck5hbWUgXTsKCX0sCgkKCQoJLyoqCgkgKiBTZXRzIG9uZSBvciBtb3JlIGF0dHJpYnV0ZXMgb24gdGhlIEh0bWxUYWcuCgkgKiAKCSAqIEBwYXJhbSB7T2JqZWN0LjxTdHJpbmcsIFN0cmluZz59IGF0dHJzIEEga2V5L3ZhbHVlIE9iamVjdCAobWFwKSBvZiB0aGUgYXR0cmlidXRlcyB0byBzZXQuCgkgKiBAcmV0dXJuIHtBdXRvbGlua2VyLkh0bWxUYWd9IFRoaXMgSHRtbFRhZyBpbnN0YW5jZSwgc28gdGhhdCBtZXRob2QgY2FsbHMgbWF5IGJlIGNoYWluZWQuCgkgKi8KCXNldEF0dHJzIDogZnVuY3Rpb24oIGF0dHJzICkgewoJCXZhciB0YWdBdHRycyA9IHRoaXMuZ2V0QXR0cnMoKTsKCQlBdXRvbGlua2VyLlV0aWwuYXNzaWduKCB0YWdBdHRycywgYXR0cnMgKTsKCQkKCQlyZXR1cm4gdGhpczsKCX0sCgkKCQoJLyoqCgkgKiBSZXRyaWV2ZXMgdGhlIGF0dHJpYnV0ZXMgT2JqZWN0IChtYXApIGZvciB0aGUgSHRtbFRhZy4KCSAqIAoJICogQHJldHVybiB7T2JqZWN0LjxTdHJpbmcsIFN0cmluZz59IEEga2V5L3ZhbHVlIG9iamVjdCBvZiB0aGUgYXR0cmlidXRlcyBmb3IgdGhlIEh0bWxUYWcuCgkgKi8KCWdldEF0dHJzIDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuYXR0cnMgfHwgKCB0aGlzLmF0dHJzID0ge30gKTsKCX0sCgkKCQoJLyoqCgkgKiBTZXRzIHRoZSBwcm92aWRlZCBgY3NzQ2xhc3NgLCBvdmVyd3JpdGluZyBhbnkgY3VycmVudCBDU1MgY2xhc3NlcyBvbiB0aGUgSHRtbFRhZy4KCSAqIAoJICogQHBhcmFtIHtTdHJpbmd9IGNzc0NsYXNzIE9uZSBvciBtb3JlIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byBzZXQgKG92ZXJ3cml0ZSkuCgkgKiBAcmV0dXJuIHtBdXRvbGlua2VyLkh0bWxUYWd9IFRoaXMgSHRtbFRhZyBpbnN0YW5jZSwgc28gdGhhdCBtZXRob2QgY2FsbHMgbWF5IGJlIGNoYWluZWQuCgkgKi8KCXNldENsYXNzIDogZnVuY3Rpb24oIGNzc0NsYXNzICkgewoJCXJldHVybiB0aGlzLnNldEF0dHIoICdjbGFzcycsIGNzc0NsYXNzICk7Cgl9LAoJCgkKCS8qKgoJICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIGFkZCBvbmUgb3IgbW9yZSBDU1MgY2xhc3NlcyB0byB0aGUgSHRtbFRhZy4gV2lsbCBub3QgYWRkIGR1cGxpY2F0ZSBDU1MgY2xhc3Nlcy4KCSAqIAoJICogQHBhcmFtIHtTdHJpbmd9IGNzc0NsYXNzIE9uZSBvciBtb3JlIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byBhZGQuCgkgKiBAcmV0dXJuIHtBdXRvbGlua2VyLkh0bWxUYWd9IFRoaXMgSHRtbFRhZyBpbnN0YW5jZSwgc28gdGhhdCBtZXRob2QgY2FsbHMgbWF5IGJlIGNoYWluZWQuCgkgKi8KCWFkZENsYXNzIDogZnVuY3Rpb24oIGNzc0NsYXNzICkgewoJCXZhciBjbGFzc0F0dHIgPSB0aGlzLmdldENsYXNzKCksCgkJICAgIHdoaXRlc3BhY2VSZWdleCA9IHRoaXMud2hpdGVzcGFjZVJlZ2V4LAoJCSAgICBpbmRleE9mID0gQXV0b2xpbmtlci5VdGlsLmluZGV4T2YsICAvLyB0byBzdXBwb3J0IElFOCBhbmQgYmVsb3cKCQkgICAgY2xhc3NlcyA9ICggIWNsYXNzQXR0ciApID8gW10gOiBjbGFzc0F0dHIuc3BsaXQoIHdoaXRlc3BhY2VSZWdleCApLAoJCSAgICBuZXdDbGFzc2VzID0gY3NzQ2xhc3Muc3BsaXQoIHdoaXRlc3BhY2VSZWdleCApLAoJCSAgICBuZXdDbGFzczsKCQkKCQl3aGlsZSggbmV3Q2xhc3MgPSBuZXdDbGFzc2VzLnNoaWZ0KCkgKSB7CgkJCWlmKCBpbmRleE9mKCBjbGFzc2VzLCBuZXdDbGFzcyApID09PSAtMSApIHsKCQkJCWNsYXNzZXMucHVzaCggbmV3Q2xhc3MgKTsKCQkJfQoJCX0KCQkKCQl0aGlzLmdldEF0dHJzKClbICdjbGFzcycgXSA9IGNsYXNzZXMuam9pbiggIiAiICk7CgkJcmV0dXJuIHRoaXM7Cgl9LAoJCgkKCS8qKgoJICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIHJlbW92ZSBvbmUgb3IgbW9yZSBDU1MgY2xhc3NlcyBmcm9tIHRoZSBIdG1sVGFnLgoJICogCgkgKiBAcGFyYW0ge1N0cmluZ30gY3NzQ2xhc3MgT25lIG9yIG1vcmUgc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIHJlbW92ZS4KCSAqIEByZXR1cm4ge0F1dG9saW5rZXIuSHRtbFRhZ30gVGhpcyBIdG1sVGFnIGluc3RhbmNlLCBzbyB0aGF0IG1ldGhvZCBjYWxscyBtYXkgYmUgY2hhaW5lZC4KCSAqLwoJcmVtb3ZlQ2xhc3MgOiBmdW5jdGlvbiggY3NzQ2xhc3MgKSB7CgkJdmFyIGNsYXNzQXR0ciA9IHRoaXMuZ2V0Q2xhc3MoKSwKCQkgICAgd2hpdGVzcGFjZVJlZ2V4ID0gdGhpcy53aGl0ZXNwYWNlUmVnZXgsCgkJICAgIGluZGV4T2YgPSBBdXRvbGlua2VyLlV0aWwuaW5kZXhPZiwgIC8vIHRvIHN1cHBvcnQgSUU4IGFuZCBiZWxvdwoJCSAgICBjbGFzc2VzID0gKCAhY2xhc3NBdHRyICkgPyBbXSA6IGNsYXNzQXR0ci5zcGxpdCggd2hpdGVzcGFjZVJlZ2V4ICksCgkJICAgIHJlbW92ZUNsYXNzZXMgPSBjc3NDbGFzcy5zcGxpdCggd2hpdGVzcGFjZVJlZ2V4ICksCgkJICAgIHJlbW92ZUNsYXNzOwoJCQoJCXdoaWxlKCBjbGFzc2VzLmxlbmd0aCAmJiAoIHJlbW92ZUNsYXNzID0gcmVtb3ZlQ2xhc3Nlcy5zaGlmdCgpICkgKSB7CgkJCXZhciBpZHggPSBpbmRleE9mKCBjbGFzc2VzLCByZW1vdmVDbGFzcyApOwoJCQlpZiggaWR4ICE9PSAtMSApIHsKCQkJCWNsYXNzZXMuc3BsaWNlKCBpZHgsIDEgKTsKCQkJfQoJCX0KCQkKCQl0aGlzLmdldEF0dHJzKClbICdjbGFzcycgXSA9IGNsYXNzZXMuam9pbiggIiAiICk7CgkJcmV0dXJuIHRoaXM7Cgl9LAoJCgkKCS8qKgoJICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIHJldHJpZXZlIHRoZSBDU1MgY2xhc3MoZXMpIGZvciB0aGUgSHRtbFRhZywgd2hpY2ggd2lsbCBlYWNoIGJlIHNlcGFyYXRlZCBieSBzcGFjZXMgd2hlbgoJICogdGhlcmUgYXJlIG11bHRpcGxlLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldENsYXNzIDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuZ2V0QXR0cnMoKVsgJ2NsYXNzJyBdIHx8ICIiOwoJfSwKCQoJCgkvKioKCSAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBjaGVjayBpZiB0aGUgdGFnIGhhcyBhIENTUyBjbGFzcyBvciBub3QuCgkgKiAKCSAqIEBwYXJhbSB7U3RyaW5nfSBjc3NDbGFzcyBUaGUgQ1NTIGNsYXNzIHRvIGNoZWNrIGZvci4KCSAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgSHRtbFRhZyBoYXMgdGhlIENTUyBjbGFzcywgYGZhbHNlYCBvdGhlcndpc2UuCgkgKi8KCWhhc0NsYXNzIDogZnVuY3Rpb24oIGNzc0NsYXNzICkgewoJCXJldHVybiAoICcgJyArIHRoaXMuZ2V0Q2xhc3MoKSArICcgJyApLmluZGV4T2YoICcgJyArIGNzc0NsYXNzICsgJyAnICkgIT09IC0xOwoJfSwKCQoJCgkvKioKCSAqIFNldHMgdGhlIGlubmVyIEhUTUwgZm9yIHRoZSB0YWcuCgkgKiAKCSAqIEBwYXJhbSB7U3RyaW5nfSBodG1sIFRoZSBpbm5lciBIVE1MIHRvIHNldC4KCSAqIEByZXR1cm4ge0F1dG9saW5rZXIuSHRtbFRhZ30gVGhpcyBIdG1sVGFnIGluc3RhbmNlLCBzbyB0aGF0IG1ldGhvZCBjYWxscyBtYXkgYmUgY2hhaW5lZC4KCSAqLwoJc2V0SW5uZXJIdG1sIDogZnVuY3Rpb24oIGh0bWwgKSB7CgkJdGhpcy5pbm5lckh0bWwgPSBodG1sOwoJCQoJCXJldHVybiB0aGlzOwoJfSwKCQoJCgkvKioKCSAqIFJldHJpZXZlcyB0aGUgaW5uZXIgSFRNTCBmb3IgdGhlIHRhZy4KCSAqIAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRJbm5lckh0bWwgOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5pbm5lckh0bWwgfHwgIiI7Cgl9LAoJCgkKCS8qKgoJICogT3ZlcnJpZGUgb2Ygc3VwZXJjbGFzcyBtZXRob2QgdXNlZCB0byBnZW5lcmF0ZSB0aGUgSFRNTCBzdHJpbmcgZm9yIHRoZSB0YWcuCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJdG9TdHJpbmcgOiBmdW5jdGlvbigpIHsKCQl2YXIgdGFnTmFtZSA9IHRoaXMuZ2V0VGFnTmFtZSgpLAoJCSAgICBhdHRyc1N0ciA9IHRoaXMuYnVpbGRBdHRyc1N0cigpOwoJCQoJCWF0dHJzU3RyID0gKCBhdHRyc1N0ciApID8gJyAnICsgYXR0cnNTdHIgOiAnJzsgIC8vIHByZXBlbmQgYSBzcGFjZSBpZiB0aGVyZSBhcmUgYWN0dWFsbHkgYXR0cmlidXRlcwoJCQoJCXJldHVybiBbICc8JywgdGFnTmFtZSwgYXR0cnNTdHIsICc+JywgdGhpcy5nZXRJbm5lckh0bWwoKSwgJzwvJywgdGFnTmFtZSwgJz4nIF0uam9pbiggIiIgKTsKCX0sCgkKCQoJLyoqCgkgKiBTdXBwb3J0IG1ldGhvZCBmb3Ige0BsaW5rICN0b1N0cmluZ30sIHJldHVybnMgdGhlIHN0cmluZyBzcGFjZS1zZXBhcmF0ZWQga2V5PSJ2YWx1ZSIgcGFpcnMsIHVzZWQgdG8gcG9wdWxhdGUgCgkgKiB0aGUgc3RyaW5naWZpZWQgSHRtbFRhZy4KCSAqIAoJICogQHByb3RlY3RlZAoJICogQHJldHVybiB7U3RyaW5nfSBFeGFtcGxlIHJldHVybjogYGF0dHIxPSJ2YWx1ZTEiIGF0dHIyPSJ2YWx1ZTIiYAoJICovCglidWlsZEF0dHJzU3RyIDogZnVuY3Rpb24oKSB7CgkJaWYoICF0aGlzLmF0dHJzICkgcmV0dXJuICIiOyAgLy8gbm8gYGF0dHJzYCBPYmplY3QgKG1hcCkgaGFzIGJlZW4gc2V0LCByZXR1cm4gZW1wdHkgc3RyaW5nCgkJCgkJdmFyIGF0dHJzID0gdGhpcy5nZXRBdHRycygpLAoJCSAgICBhdHRyc0FyciA9IFtdOwoJCQoJCWZvciggdmFyIHByb3AgaW4gYXR0cnMgKSB7CgkJCWlmKCBhdHRycy5oYXNPd25Qcm9wZXJ0eSggcHJvcCApICkgewoJCQkJYXR0cnNBcnIucHVzaCggcHJvcCArICc9IicgKyBhdHRyc1sgcHJvcCBdICsgJyInICk7CgkJCX0KCQl9CgkJcmV0dXJuIGF0dHJzQXJyLmpvaW4oICIgIiApOwoJfQoJCn0gKTsKLypnbG9iYWwgQXV0b2xpbmtlciAqLwovKmpzaGludCBzdWI6dHJ1ZSAqLwovKioKICogQHByb3RlY3RlZAogKiBAY2xhc3MgQXV0b2xpbmtlci5BbmNob3JUYWdCdWlsZGVyCiAqIEBleHRlbmRzIE9iamVjdAogKiAKICogQnVpbGRzIGFuY2hvciAoJmx0O2EmZ3Q7KSB0YWdzIGZvciB0aGUgQXV0b2xpbmtlciB1dGlsaXR5IHdoZW4gYSBtYXRjaCBpcyBmb3VuZC4KICogCiAqIE5vcm1hbGx5IHRoaXMgY2xhc3MgaXMgaW5zdGFudGlhdGVkLCBjb25maWd1cmVkLCBhbmQgdXNlZCBpbnRlcm5hbGx5IGJ5IGFuIHtAbGluayBBdXRvbGlua2VyfSBpbnN0YW5jZSwgYnV0IG1heSAKICogYWN0dWFsbHkgYmUgcmV0cmlldmVkIGluIGEge0BsaW5rIEF1dG9saW5rZXIjcmVwbGFjZUZuIHJlcGxhY2VGbn0gdG8gY3JlYXRlIHtAbGluayBBdXRvbGlua2VyLkh0bWxUYWcgSHRtbFRhZ30gaW5zdGFuY2VzCiAqIHdoaWNoIG1heSBiZSBtb2RpZmllZCBiZWZvcmUgcmV0dXJuaW5nIGZyb20gdGhlIHtAbGluayBBdXRvbGlua2VyI3JlcGxhY2VGbiByZXBsYWNlRm59LiBGb3IgZXhhbXBsZToKICogCiAqICAgICB2YXIgaHRtbCA9IEF1dG9saW5rZXIubGluayggIlRlc3QgZ29vZ2xlLmNvbSIsIHsKICogICAgICAgICByZXBsYWNlRm4gOiBmdW5jdGlvbiggYXV0b2xpbmtlciwgbWF0Y2ggKSB7CiAqICAgICAgICAgICAgIHZhciB0YWcgPSBhdXRvbGlua2VyLmdldFRhZ0J1aWxkZXIoKS5idWlsZCggbWF0Y2ggKTsgIC8vIHJldHVybnMgYW4ge0BsaW5rIEF1dG9saW5rZXIuSHRtbFRhZ30gaW5zdGFuY2UKICogICAgICAgICAgICAgdGFnLnNldEF0dHIoICdyZWwnLCAnbm9mb2xsb3cnICk7CiAqICAgICAgICAgICAgIAogKiAgICAgICAgICAgICByZXR1cm4gdGFnOwogKiAgICAgICAgIH0KICogICAgIH0gKTsKICogICAgIAogKiAgICAgLy8gZ2VuZXJhdGVkIGh0bWw6CiAqICAgICAvLyAgIFRlc3QgPGEgaHJlZj0iaHR0cDovL2dvb2dsZS5jb20iIHRhcmdldD0iX2JsYW5rIiByZWw9Im5vZm9sbG93Ij5nb29nbGUuY29tPC9hPgogKi8KQXV0b2xpbmtlci5BbmNob3JUYWdCdWlsZGVyID0gQXV0b2xpbmtlci5VdGlsLmV4dGVuZCggT2JqZWN0LCB7CgkKCS8qKgoJICogQGNmZyB7Qm9vbGVhbn0gbmV3V2luZG93CgkgKiBAaW5oZXJpdGRvYyBBdXRvbGlua2VyI25ld1dpbmRvdwoJICovCgkKCS8qKgoJICogQGNmZyB7TnVtYmVyfSB0cnVuY2F0ZQoJICogQGluaGVyaXRkb2MgQXV0b2xpbmtlciN0cnVuY2F0ZQoJICovCgkKCS8qKgoJICogQGNmZyB7U3RyaW5nfSBjbGFzc05hbWUKCSAqIEBpbmhlcml0ZG9jIEF1dG9saW5rZXIjY2xhc3NOYW1lCgkgKi8KCQoJCgkvKioKCSAqIEBjb25zdHJ1Y3RvcgoJICogQHBhcmFtIHtPYmplY3R9IFtjZmddIFRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBBbmNob3JUYWdCdWlsZGVyIGluc3RhbmNlLCBzcGVjaWZpZWQgaW4gYW4gT2JqZWN0IChtYXApLgoJICovCgljb25zdHJ1Y3RvciA6IGZ1bmN0aW9uKCBjZmcgKSB7CgkJQXV0b2xpbmtlci5VdGlsLmFzc2lnbiggdGhpcywgY2ZnICk7Cgl9LAoJCgkKCS8qKgoJICogR2VuZXJhdGVzIHRoZSBhY3R1YWwgYW5jaG9yICgmbHQ7YSZndDspIHRhZyB0byB1c2UgaW4gcGxhY2Ugb2YgdGhlIG1hdGNoZWQgVVJML2VtYWlsL1R3aXR0ZXIgdGV4dCwKCSAqIHZpYSBpdHMgYG1hdGNoYCBvYmplY3QuCgkgKiAKCSAqIEBwYXJhbSB7QXV0b2xpbmtlci5tYXRjaC5NYXRjaH0gbWF0Y2ggVGhlIE1hdGNoIGluc3RhbmNlIHRvIGdlbmVyYXRlIGFuIGFuY2hvciB0YWcgZnJvbS4KCSAqIEByZXR1cm4ge0F1dG9saW5rZXIuSHRtbFRhZ30gVGhlIEh0bWxUYWcgaW5zdGFuY2UgZm9yIHRoZSBhbmNob3IgdGFnLgoJICovCglidWlsZCA6IGZ1bmN0aW9uKCBtYXRjaCApIHsKCQl2YXIgdGFnID0gbmV3IEF1dG9saW5rZXIuSHRtbFRhZyggewoJCQl0YWdOYW1lICAgOiAnYScsCgkJCWF0dHJzICAgICA6IHRoaXMuY3JlYXRlQXR0cnMoIG1hdGNoLmdldFR5cGUoKSwgbWF0Y2guZ2V0QW5jaG9ySHJlZigpICksCgkJCWlubmVySHRtbCA6IHRoaXMucHJvY2Vzc0FuY2hvclRleHQoIG1hdGNoLmdldEFuY2hvclRleHQoKSApCgkJfSApOwoJCQoJCXJldHVybiB0YWc7Cgl9LAoJCgkKCS8qKgoJICogQ3JlYXRlcyB0aGUgT2JqZWN0IChtYXApIG9mIHRoZSBIVE1MIGF0dHJpYnV0ZXMgZm9yIHRoZSBhbmNob3IgKCZsdDthJmd0OykgdGFnIGJlaW5nIGdlbmVyYXRlZC4KCSAqIAoJICogQHByb3RlY3RlZAoJICogQHBhcmFtIHsidXJsIi8iZW1haWwiLyJ0d2l0dGVyIn0gbWF0Y2hUeXBlIFRoZSB0eXBlIG9mIG1hdGNoIHRoYXQgYW4gYW5jaG9yIHRhZyBpcyBiZWluZyBnZW5lcmF0ZWQgZm9yLgoJICogQHBhcmFtIHtTdHJpbmd9IGhyZWYgVGhlIGhyZWYgZm9yIHRoZSBhbmNob3IgdGFnLgoJICogQHJldHVybiB7T2JqZWN0fSBBIGtleS92YWx1ZSBPYmplY3QgKG1hcCkgb2YgdGhlIGFuY2hvciB0YWcncyBhdHRyaWJ1dGVzLiAKCSAqLwoJY3JlYXRlQXR0cnMgOiBmdW5jdGlvbiggbWF0Y2hUeXBlLCBhbmNob3JIcmVmICkgewoJCXZhciBhdHRycyA9IHsKCQkJJ2hyZWYnIDogYW5jaG9ySHJlZiAgLy8gd2UnbGwgYWx3YXlzIGhhdmUgdGhlIGBocmVmYCBhdHRyaWJ1dGUKCQl9OwoJCQoJCXZhciBjc3NDbGFzcyA9IHRoaXMuY3JlYXRlQ3NzQ2xhc3MoIG1hdGNoVHlwZSApOwoJCWlmKCBjc3NDbGFzcyApIHsKCQkJYXR0cnNbICdjbGFzcycgXSA9IGNzc0NsYXNzOwoJCX0KCQlpZiggdGhpcy5uZXdXaW5kb3cgKSB7CgkJCWF0dHJzWyAndGFyZ2V0JyBdID0gIl9ibGFuayI7CgkJfQoJCQoJCXJldHVybiBhdHRyczsKCX0sCgkKCQoJLyoqCgkgKiBDcmVhdGVzIHRoZSBDU1MgY2xhc3MgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGEgZ2l2ZW4gYW5jaG9yIHRhZywgYmFzZWQgb24gdGhlIGBtYXRjaFR5cGVgIGFuZCB0aGUge0BsaW5rICNjbGFzc05hbWV9CgkgKiBjb25maWcuCgkgKiAKCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0geyJ1cmwiLyJlbWFpbCIvInR3aXR0ZXIifSBtYXRjaFR5cGUgVGhlIHR5cGUgb2YgbWF0Y2ggdGhhdCBhbiBhbmNob3IgdGFnIGlzIGJlaW5nIGdlbmVyYXRlZCBmb3IuCgkgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBDU1MgY2xhc3Mgc3RyaW5nIGZvciB0aGUgbGluay4gRXhhbXBsZSByZXR1cm46ICJteUxpbmsgbXlMaW5rLXVybCIuIElmIG5vIHtAbGluayAjY2xhc3NOYW1lfQoJICogICB3YXMgY29uZmlndXJlZCwgcmV0dXJucyBhbiBlbXB0eSBzdHJpbmcuCgkgKi8KCWNyZWF0ZUNzc0NsYXNzIDogZnVuY3Rpb24oIG1hdGNoVHlwZSApIHsKCQl2YXIgY2xhc3NOYW1lID0gdGhpcy5jbGFzc05hbWU7CgkJCgkJaWYoICFjbGFzc05hbWUgKSAKCQkJcmV0dXJuICIiOwoJCWVsc2UKCQkJcmV0dXJuIGNsYXNzTmFtZSArICIgIiArIGNsYXNzTmFtZSArICItIiArIG1hdGNoVHlwZTsgIC8vIGV4OiAibXlMaW5rIG15TGluay11cmwiLCAibXlMaW5rIG15TGluay1lbWFpbCIsIG9yICJteUxpbmsgbXlMaW5rLXR3aXR0ZXIiCgl9LAoJCgkKCS8qKgoJICogUHJvY2Vzc2VzIHRoZSBgYW5jaG9yVGV4dGAgYnkgdHJ1bmNhdGluZyB0aGUgdGV4dCBhY2NvcmRpbmcgdG8gdGhlIHtAbGluayAjdHJ1bmNhdGV9IGNvbmZpZy4KCSAqIAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7U3RyaW5nfSBhbmNob3JUZXh0IFRoZSBhbmNob3IgdGFnJ3MgdGV4dCAoaS5lLiB3aGF0IHdpbGwgYmUgZGlzcGxheWVkKS4KCSAqIEByZXR1cm4ge1N0cmluZ30gVGhlIHByb2Nlc3NlZCBgYW5jaG9yVGV4dGAuCgkgKi8KCXByb2Nlc3NBbmNob3JUZXh0IDogZnVuY3Rpb24oIGFuY2hvclRleHQgKSB7CgkJYW5jaG9yVGV4dCA9IHRoaXMuZG9UcnVuY2F0ZSggYW5jaG9yVGV4dCApOwoJCQoJCXJldHVybiBhbmNob3JUZXh0OwoJfSwKCQoJCgkvKioKCSAqIFBlcmZvcm1zIHRoZSB0cnVuY2F0aW9uIG9mIHRoZSBgYW5jaG9yVGV4dGAsIGlmIHRoZSBgYW5jaG9yVGV4dGAgaXMgbG9uZ2VyIHRoYW4gdGhlIHtAbGluayAjdHJ1bmNhdGV9IG9wdGlvbi4KCSAqIFRydW5jYXRlcyB0aGUgdGV4dCB0byAyIGNoYXJhY3RlcnMgZmV3ZXIgdGhhbiB0aGUge0BsaW5rICN0cnVuY2F0ZX0gb3B0aW9uLCBhbmQgYWRkcyAiLi4iIHRvIHRoZSBlbmQuCgkgKiAKCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBUaGUgYW5jaG9yIHRhZydzIHRleHQgKGkuZS4gd2hhdCB3aWxsIGJlIGRpc3BsYXllZCkuCgkgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSB0cnVuY2F0ZWQgYW5jaG9yIHRleHQuCgkgKi8KCWRvVHJ1bmNhdGUgOiBmdW5jdGlvbiggYW5jaG9yVGV4dCApIHsKCQlyZXR1cm4gQXV0b2xpbmtlci5VdGlsLmVsbGlwc2lzKCBhbmNob3JUZXh0LCB0aGlzLnRydW5jYXRlIHx8IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSApOwoJfQoJCn0gKTsKLypnbG9iYWwgQXV0b2xpbmtlciAqLwovKioKICogQHByaXZhdGUKICogQGNsYXNzIEF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sUGFyc2VyCiAqIEBleHRlbmRzIE9iamVjdAogKiAKICogQW4gSFRNTCBwYXJzZXIgaW1wbGVtZW50YXRpb24gd2hpY2ggc2ltcGx5IHdhbGtzIGFuIEhUTUwgc3RyaW5nIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIAogKiB7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxOb2RlIEh0bWxOb2Rlc30gdGhhdCByZXByZXNlbnQgdGhlIGJhc2ljIEhUTUwgc3RydWN0dXJlIG9mIHRoZSBpbnB1dCBzdHJpbmcuCiAqIAogKiBBdXRvbGlua2VyIHVzZXMgdGhpcyB0byBvbmx5IGxpbmsgVVJMcy9lbWFpbHMvVHdpdHRlciBoYW5kbGVzIHdpdGhpbiB0ZXh0IG5vZGVzLCBlZmZlY3RpdmVseSBpZ25vcmluZyAvICJ3YWxraW5nCiAqIGFyb3VuZCIgSFRNTCB0YWdzLgogKi8KQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxQYXJzZXIgPSBBdXRvbGlua2VyLlV0aWwuZXh0ZW5kKCBPYmplY3QsIHsKCQoJLyoqCgkgKiBAcHJpdmF0ZQoJICogQHByb3BlcnR5IHtSZWdFeHB9IGh0bWxSZWdleAoJICogCgkgKiBUaGUgcmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gcHVsbCBvdXQgSFRNTCB0YWdzIGZyb20gYSBzdHJpbmcuIEhhbmRsZXMgbmFtZXNwYWNlZCBIVE1MIHRhZ3MgYW5kCgkgKiBhdHRyaWJ1dGUgbmFtZXMsIGFzIHNwZWNpZmllZCBieSBodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sLW1hcmt1cC9zeW50YXguaHRtbC4KCSAqIAoJICogQ2FwdHVyaW5nIGdyb3VwczoKCSAqIAoJICogMS4gVGhlICIhRE9DVFlQRSIgdGFnIG5hbWUsIGlmIGEgdGFnIGlzIGEgJmx0OyFET0NUWVBFJmd0OyB0YWcuCgkgKiAyLiBJZiBpdCBpcyBhbiBlbmQgdGFnLCB0aGlzIGdyb3VwIHdpbGwgaGF2ZSB0aGUgJy8nLgoJICogMy4gVGhlIHRhZyBuYW1lIGZvciBhbGwgdGFncyAob3RoZXIgdGhhbiB0aGUgJmx0OyFET0NUWVBFJmd0OyB0YWcpCgkgKi8KCWh0bWxSZWdleCA6IChmdW5jdGlvbigpIHsKCQl2YXIgdGFnTmFtZVJlZ2V4ID0gL1swLTlhLXpBLVpdWzAtOWEtekEtWjpdKi8sCgkJICAgIGF0dHJOYW1lUmVnZXggPSAvW15cc1wwIic+XC89XHgwMS1ceDFGXHg3Rl0rLywgICAvLyB0aGUgdW5pY29kZSByYW5nZSBhY2NvdW50cyBmb3IgZXhjbHVkaW5nIGNvbnRyb2wgY2hhcnMsIGFuZCB0aGUgZGVsZXRlIGNoYXIKCQkgICAgYXR0clZhbHVlUmVnZXggPSAvKD86IlteIl0qPyJ8J1teJ10qPyd8W14nIj08PmBcc10rKS8sIC8vIGRvdWJsZSBxdW90ZWQsIHNpbmdsZSBxdW90ZWQsIG9yIHVucXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZXMKCQkgICAgbmFtZUVxdWFsc1ZhbHVlUmVnZXggPSBhdHRyTmFtZVJlZ2V4LnNvdXJjZSArICcoPzpcXHMqPVxccyonICsgYXR0clZhbHVlUmVnZXguc291cmNlICsgJyk/JzsgIC8vIG9wdGlvbmFsICc9W3ZhbHVlXScKCQkKCQlyZXR1cm4gbmV3IFJlZ0V4cCggWwoJCQkvLyBmb3IgPCFET0NUWVBFPiB0YWcuIEV4OiA8IURPQ1RZUEUgaHRtbCBQVUJMSUMgIi0vL1czQy8vRFREIFhIVE1MIDEuMCBTdHJpY3QvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvVFIveGh0bWwxL0RURC94aHRtbDEtc3RyaWN0LmR0ZCI+KSAKCQkJJyg/OicsCgkJCQknPCghRE9DVFlQRSknLCAgLy8gKioqIENhcHR1cmluZyBHcm91cCAxIC0gSWYgaXQncyBhIGRvY3R5cGUgdGFnCgkJCQkJCgkJCQkJLy8gWmVybyBvciBtb3JlIGF0dHJpYnV0ZXMgZm9sbG93aW5nIHRoZSB0YWcgbmFtZQoJCQkJCScoPzonLAoJCQkJCQknXFxzKycsICAvLyBvbmUgb3IgbW9yZSB3aGl0ZXNwYWNlIGNoYXJzIGJlZm9yZSBhbiBhdHRyaWJ1dGUKCQkJCQkJCgkJCQkJCS8vIEVpdGhlcjoKCQkJCQkJLy8gQS4gYXR0cj0idmFsdWUiLCBvciAKCQkJCQkJLy8gQi4gInZhbHVlIiBhbG9uZSAoVG8gY292ZXIgZXhhbXBsZSBkb2N0eXBlIHRhZzogPCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBYSFRNTCAxLjAgU3RyaWN0Ly9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSL3hodG1sMS9EVEQveGh0bWwxLXN0cmljdC5kdGQiPikgCgkJCQkJCScoPzonLCBuYW1lRXF1YWxzVmFsdWVSZWdleCwgJ3wnLCBhdHRyVmFsdWVSZWdleC5zb3VyY2UgKyAnKScsCgkJCQkJJykqJywKCQkJCSc+JywKCQkJJyknLAoJCQkKCQkJJ3wnLAoJCQkKCQkJLy8gQWxsIG90aGVyIEhUTUwgdGFncyAoaS5lLiB0YWdzIHRoYXQgYXJlIG5vdCA8IURPQ1RZUEU+KQoJCQknKD86JywKCQkJCSc8KC8pPycsICAvLyBCZWdpbm5pbmcgb2YgYSB0YWcuIEVpdGhlciAnPCcgZm9yIGEgc3RhcnQgdGFnLCBvciAnPC8nIGZvciBhbiBlbmQgdGFnLiAKCQkJCSAgICAgICAgICAvLyAqKiogQ2FwdHVyaW5nIEdyb3VwIDI6IFRoZSBzbGFzaCBvciBhbiBlbXB0eSBzdHJpbmcuIFNsYXNoICgnLycpIGZvciBlbmQgdGFnLCBlbXB0eSBzdHJpbmcgZm9yIHN0YXJ0IG9yIHNlbGYtY2xvc2luZyB0YWcuCgkJCQoJCQkJCS8vICoqKiBDYXB0dXJpbmcgR3JvdXAgMyAtIFRoZSB0YWcgbmFtZQoJCQkJCScoJyArIHRhZ05hbWVSZWdleC5zb3VyY2UgKyAnKScsCgkJCQkJCgkJCQkJLy8gWmVybyBvciBtb3JlIGF0dHJpYnV0ZXMgZm9sbG93aW5nIHRoZSB0YWcgbmFtZQoJCQkJCScoPzonLAoJCQkJCQknXFxzKycsICAgICAgICAgICAgICAgIC8vIG9uZSBvciBtb3JlIHdoaXRlc3BhY2UgY2hhcnMgYmVmb3JlIGFuIGF0dHJpYnV0ZQoJCQkJCQluYW1lRXF1YWxzVmFsdWVSZWdleCwgIC8vIGF0dHI9InZhbHVlIiAod2l0aCBvcHRpb25hbCA9InZhbHVlIiBwYXJ0KQoJCQkJCScpKicsCgkJCQkJCgkJCQkJJ1xccyovPycsICAvLyBhbnkgdHJhaWxpbmcgc3BhY2VzIGFuZCBvcHRpb25hbCAnLycgYmVmb3JlIHRoZSBjbG9zaW5nICc+JwoJCQkJJz4nLAoJCQknKScKCQldLmpvaW4oICIiICksICdnaScgKTsKCX0gKSgpLAoJCgkvKioKCSAqIEBwcml2YXRlCgkgKiBAcHJvcGVydHkge1JlZ0V4cH0gaHRtbENoYXJhY3RlckVudGl0aWVzUmVnZXgKCSAqCgkgKiBUaGUgcmVndWxhciBleHByZXNzaW9uIHRoYXQgbWF0Y2hlcyBjb21tb24gSFRNTCBjaGFyYWN0ZXIgZW50aXRpZXMuCgkgKiAKCSAqIElnbm9yaW5nICZhbXA7IGFzIGl0IGNvdWxkIGJlIHBhcnQgb2YgYSBxdWVyeSBzdHJpbmcgLS0gaGFuZGxpbmcgaXQgc2VwYXJhdGVseS4KCSAqLwoJaHRtbENoYXJhY3RlckVudGl0aWVzUmVnZXg6IC8oJm5ic3A7fCYjMTYwO3wmbHQ7fCYjNjA7fCZndDt8JiM2Mjt8JnF1b3Q7fCYjMzQ7fCYjMzk7KS9naSwKCQoJCgkvKioKCSAqIFBhcnNlcyBhbiBIVE1MIHN0cmluZyBhbmQgcmV0dXJucyBhIHNpbXBsZSBhcnJheSBvZiB7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxOb2RlIEh0bWxOb2Rlc30gdG8gcmVwcmVzZW50CgkgKiB0aGUgSFRNTCBzdHJ1Y3R1cmUgb2YgdGhlIGlucHV0IHN0cmluZy4gCgkgKiAKCSAqIEBwYXJhbSB7U3RyaW5nfSBodG1sIFRoZSBIVE1MIHRvIHBhcnNlLgoJICogQHJldHVybiB7QXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxOb2RlW119CgkgKi8KCXBhcnNlIDogZnVuY3Rpb24oIGh0bWwgKSB7CgkJdmFyIGh0bWxSZWdleCA9IHRoaXMuaHRtbFJlZ2V4LAoJCSAgICBjdXJyZW50UmVzdWx0LAoJCSAgICBsYXN0SW5kZXggPSAwLAoJCSAgICB0ZXh0QW5kRW50aXR5Tm9kZXMsCgkJICAgIG5vZGVzID0gW107ICAvLyB3aWxsIGJlIHRoZSByZXN1bHQgb2YgdGhlIG1ldGhvZAoJCQoJCXdoaWxlKCAoIGN1cnJlbnRSZXN1bHQgPSBodG1sUmVnZXguZXhlYyggaHRtbCApICkgIT09IG51bGwgKSB7CgkJCXZhciB0YWdUZXh0ID0gY3VycmVudFJlc3VsdFsgMCBdLAoJCQkgICAgdGFnTmFtZSA9IGN1cnJlbnRSZXN1bHRbIDEgXSB8fCBjdXJyZW50UmVzdWx0WyAzIF0sICAvLyBUaGUgPCFET0NUWVBFPiB0YWcgKGV4OiAiIURPQ1RZUEUiKSwgb3IgYW5vdGhlciB0YWcgKGV4OiAiYSIgb3IgImltZyIpIAoJCQkgICAgaXNDbG9zaW5nVGFnID0gISFjdXJyZW50UmVzdWx0WyAyIF0sCgkJCSAgICBpbkJldHdlZW5UYWdzVGV4dCA9IGh0bWwuc3Vic3RyaW5nKCBsYXN0SW5kZXgsIGN1cnJlbnRSZXN1bHQuaW5kZXggKTsKCQkJCgkJCS8vIFB1c2ggVGV4dE5vZGVzIGFuZCBFbnRpdHlOb2RlcyBmb3IgYW55IHRleHQgZm91bmQgYmV0d2VlbiB0YWdzCgkJCWlmKCBpbkJldHdlZW5UYWdzVGV4dCApIHsKCQkJCXRleHRBbmRFbnRpdHlOb2RlcyA9IHRoaXMucGFyc2VUZXh0QW5kRW50aXR5Tm9kZXMoIGluQmV0d2VlblRhZ3NUZXh0ICk7CgkJCQlub2Rlcy5wdXNoLmFwcGx5KCBub2RlcywgdGV4dEFuZEVudGl0eU5vZGVzICk7CgkJCX0KCQkJCgkJCS8vIFB1c2ggdGhlIEVsZW1lbnROb2RlCgkJCW5vZGVzLnB1c2goIHRoaXMuY3JlYXRlRWxlbWVudE5vZGUoIHRhZ1RleHQsIHRhZ05hbWUsIGlzQ2xvc2luZ1RhZyApICk7CgkJCQoJCQlsYXN0SW5kZXggPSBjdXJyZW50UmVzdWx0LmluZGV4ICsgdGFnVGV4dC5sZW5ndGg7CgkJfQoJCQoJCS8vIFByb2Nlc3MgYW55IHJlbWFpbmluZyB0ZXh0IGFmdGVyIHRoZSBsYXN0IEhUTUwgZWxlbWVudC4gV2lsbCBwcm9jZXNzIGFsbCBvZiB0aGUgdGV4dCBpZiB0aGVyZSB3ZXJlIG5vIEhUTUwgZWxlbWVudHMuCgkJaWYoIGxhc3RJbmRleCA8IGh0bWwubGVuZ3RoICkgewoJCQl2YXIgdGV4dCA9IGh0bWwuc3Vic3RyaW5nKCBsYXN0SW5kZXggKTsKCQkJCgkJCS8vIFB1c2ggVGV4dE5vZGVzIGFuZCBFbnRpdHlOb2RlcyBmb3IgYW55IHRleHQgZm91bmQgYmV0d2VlbiB0YWdzCgkJCWlmKCB0ZXh0ICkgewoJCQkJdGV4dEFuZEVudGl0eU5vZGVzID0gdGhpcy5wYXJzZVRleHRBbmRFbnRpdHlOb2RlcyggdGV4dCApOwoJCQkJbm9kZXMucHVzaC5hcHBseSggbm9kZXMsIHRleHRBbmRFbnRpdHlOb2RlcyApOwoJCQl9CgkJfQoJCQoJCXJldHVybiBub2RlczsKCX0sCgkKCQoJLyoqCgkgKiBQYXJzZXMgdGV4dCBhbmQgSFRNTCBlbnRpdHkgbm9kZXMgZnJvbSBhIGdpdmVuIHN0cmluZy4gVGhlIGlucHV0IHN0cmluZyBzaG91bGQgbm90IGhhdmUgYW55IEhUTUwgdGFncyAoZWxlbWVudHMpCgkgKiB3aXRoaW4gaXQuCgkgKiAKCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBwYXJzZS4KCSAqIEByZXR1cm4ge0F1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sTm9kZVtdfSBBbiBhcnJheSBvZiBIdG1sTm9kZXMgdG8gcmVwcmVzZW50IHRoZSAKCSAqICAge0BsaW5rIEF1dG9saW5rZXIuaHRtbFBhcnNlci5UZXh0Tm9kZSBUZXh0Tm9kZXN9IGFuZCB7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkVudGl0eU5vZGUgRW50aXR5Tm9kZXN9IGZvdW5kLgoJICovCglwYXJzZVRleHRBbmRFbnRpdHlOb2RlcyA6IGZ1bmN0aW9uKCB0ZXh0ICkgewoJCXZhciBub2RlcyA9IFtdLAoJCSAgICB0ZXh0QW5kRW50aXR5VG9rZW5zID0gQXV0b2xpbmtlci5VdGlsLnNwbGl0QW5kQ2FwdHVyZSggdGV4dCwgdGhpcy5odG1sQ2hhcmFjdGVyRW50aXRpZXNSZWdleCApOyAgLy8gc3BsaXQgYXQgSFRNTCBlbnRpdGllcywgYnV0IGluY2x1ZGUgdGhlIEhUTUwgZW50aXRpZXMgaW4gdGhlIHJlc3VsdHMgYXJyYXkKCQkKCQkvLyBFdmVyeSBldmVuIG51bWJlcmVkIHRva2VuIGlzIGEgVGV4dE5vZGUsIGFuZCBldmVyeSBvZGQgbnVtYmVyZWQgdG9rZW4gaXMgYW4gRW50aXR5Tm9kZQoJCS8vIEZvciBleGFtcGxlOiBhbiBpbnB1dCBgdGV4dGAgb2YgIlRlc3QgJnF1b3Q7dGhpcyZxdW90OyB0b2RheSIgd291bGQgdHVybiBpbnRvIHRoZSAKCQkvLyAgIGB0ZXh0QW5kRW50aXR5VG9rZW5zYDogWyAnVGVzdCAnLCAnJnF1b3Q7JywgJ3RoaXMnLCAnJnF1b3Q7JywgJyB0b2RheScgXQoJCWZvciggdmFyIGkgPSAwLCBsZW4gPSB0ZXh0QW5kRW50aXR5VG9rZW5zLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAyICkgewoJCQl2YXIgdGV4dFRva2VuID0gdGV4dEFuZEVudGl0eVRva2Vuc1sgaSBdLAoJCQkgICAgZW50aXR5VG9rZW4gPSB0ZXh0QW5kRW50aXR5VG9rZW5zWyBpICsgMSBdOwoJCQkKCQkJaWYoIHRleHRUb2tlbiApIG5vZGVzLnB1c2goIHRoaXMuY3JlYXRlVGV4dE5vZGUoIHRleHRUb2tlbiApICk7CgkJCWlmKCBlbnRpdHlUb2tlbiApIG5vZGVzLnB1c2goIHRoaXMuY3JlYXRlRW50aXR5Tm9kZSggZW50aXR5VG9rZW4gKSApOwoJCX0KCQlyZXR1cm4gbm9kZXM7Cgl9LAoJCgkKCS8qKgoJICogRmFjdG9yeSBtZXRob2QgdG8gY3JlYXRlIGFuIHtAbGluayBBdXRvbGlua2VyLmh0bWxQYXJzZXIuRWxlbWVudE5vZGUgRWxlbWVudE5vZGV9LgoJICogCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IHRhZ1RleHQgVGhlIGZ1bGwgdGV4dCBvZiB0aGUgdGFnIChlbGVtZW50KSB0aGF0IHdhcyBtYXRjaGVkLCBpbmNsdWRpbmcgaXRzIGF0dHJpYnV0ZXMuCgkgKiBAcGFyYW0ge1N0cmluZ30gdGFnTmFtZSBUaGUgbmFtZSBvZiB0aGUgdGFnLiBFeDogQW4gJmx0O2ltZyZndDsgdGFnIHdvdWxkIGJlIHBhc3NlZCB0byB0aGlzIG1ldGhvZCBhcyAiaW1nIi4KCSAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNDbG9zaW5nVGFnIGB0cnVlYCBpZiBpdCdzIGEgY2xvc2luZyB0YWcsIGZhbHNlIG90aGVyd2lzZS4KCSAqIEByZXR1cm4ge0F1dG9saW5rZXIuaHRtbFBhcnNlci5FbGVtZW50Tm9kZX0KCSAqLwoJY3JlYXRlRWxlbWVudE5vZGUgOiBmdW5jdGlvbiggdGFnVGV4dCwgdGFnTmFtZSwgaXNDbG9zaW5nVGFnICkgewoJCXJldHVybiBuZXcgQXV0b2xpbmtlci5odG1sUGFyc2VyLkVsZW1lbnROb2RlKCB7CgkJCXRleHQgICAgOiB0YWdUZXh0LAoJCQl0YWdOYW1lIDogdGFnTmFtZS50b0xvd2VyQ2FzZSgpLAoJCQljbG9zaW5nIDogaXNDbG9zaW5nVGFnCgkJfSApOwoJfSwKCQoJCgkvKioKCSAqIEZhY3RvcnkgbWV0aG9kIHRvIGNyZWF0ZSBhIHtAbGluayBBdXRvbGlua2VyLmh0bWxQYXJzZXIuRW50aXR5Tm9kZSBFbnRpdHlOb2RlfS4KCSAqIAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRoYXQgd2FzIG1hdGNoZWQgZm9yIHRoZSBIVE1MIGVudGl0eSAoc3VjaCBhcyAnJmFtcDtuYnNwOycpLgoJICogQHJldHVybiB7QXV0b2xpbmtlci5odG1sUGFyc2VyLkVudGl0eU5vZGV9CgkgKi8KCWNyZWF0ZUVudGl0eU5vZGUgOiBmdW5jdGlvbiggdGV4dCApIHsKCQlyZXR1cm4gbmV3IEF1dG9saW5rZXIuaHRtbFBhcnNlci5FbnRpdHlOb2RlKCB7IHRleHQ6IHRleHQgfSApOwoJfSwKCQoJCgkvKioKCSAqIEZhY3RvcnkgbWV0aG9kIHRvIGNyZWF0ZSBhIHtAbGluayBBdXRvbGlua2VyLmh0bWxQYXJzZXIuVGV4dE5vZGUgVGV4dE5vZGV9LgoJICogCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGhlIHRleHQgdGhhdCB3YXMgbWF0Y2hlZC4KCSAqIEByZXR1cm4ge0F1dG9saW5rZXIuaHRtbFBhcnNlci5UZXh0Tm9kZX0KCSAqLwoJY3JlYXRlVGV4dE5vZGUgOiBmdW5jdGlvbiggdGV4dCApIHsKCQlyZXR1cm4gbmV3IEF1dG9saW5rZXIuaHRtbFBhcnNlci5UZXh0Tm9kZSggeyB0ZXh0OiB0ZXh0IH0gKTsKCX0KCQp9ICk7Ci8qZ2xvYmFsIEF1dG9saW5rZXIgKi8KLyoqCiAqIEBhYnN0cmFjdAogKiBAY2xhc3MgQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxOb2RlCiAqIAogKiBSZXByZXNlbnRzIGFuIEhUTUwgbm9kZSBmb3VuZCBpbiBhbiBpbnB1dCBzdHJpbmcuIEFuIEhUTUwgbm9kZSBpcyBvbmUgb2YgdGhlIGZvbGxvd2luZzoKICogCiAqIDEuIEFuIHtAbGluayBBdXRvbGlua2VyLmh0bWxQYXJzZXIuRWxlbWVudE5vZGUgRWxlbWVudE5vZGV9LCB3aGljaCByZXByZXNlbnRzIEhUTUwgdGFncy4KICogMi4gQSB7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLlRleHROb2RlIFRleHROb2RlfSwgd2hpY2ggcmVwcmVzZW50cyB0ZXh0IG91dHNpZGUgb3Igd2l0aGluIEhUTUwgdGFncy4KICogMy4gQSB7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkVudGl0eU5vZGUgRW50aXR5Tm9kZX0sIHdoaWNoIHJlcHJlc2VudHMgb25lIG9mIHRoZSBrbm93biBIVE1MCiAqICAgIGVudGl0aWVzIHRoYXQgQXV0b2xpbmtlciBsb29rcyBmb3IuIFRoaXMgaW5jbHVkZXMgY29tbW9uIG9uZXMgc3VjaCBhcyAmYW1wO3F1b3Q7IGFuZCAmYW1wO25ic3A7CiAqLwpBdXRvbGlua2VyLmh0bWxQYXJzZXIuSHRtbE5vZGUgPSBBdXRvbGlua2VyLlV0aWwuZXh0ZW5kKCBPYmplY3QsIHsKCQoJLyoqCgkgKiBAY2ZnIHtTdHJpbmd9IHRleHQgKHJlcXVpcmVkKQoJICogCgkgKiBUaGUgb3JpZ2luYWwgdGV4dCB0aGF0IHdhcyBtYXRjaGVkIGZvciB0aGUgSHRtbE5vZGUuIAoJICogCgkgKiAtIEluIHRoZSBjYXNlIG9mIGFuIHtAbGluayBBdXRvbGlua2VyLmh0bWxQYXJzZXIuRWxlbWVudE5vZGUgRWxlbWVudE5vZGV9LCB0aGlzIHdpbGwgYmUgdGhlIHRhZydzCgkgKiAgIHRleHQuCgkgKiAtIEluIHRoZSBjYXNlIG9mIGEge0BsaW5rIEF1dG9saW5rZXIuaHRtbFBhcnNlci5UZXh0Tm9kZSBUZXh0Tm9kZX0sIHRoaXMgd2lsbCBiZSB0aGUgdGV4dCBpdHNlbGYuCgkgKiAtIEluIHRoZSBjYXNlIG9mIGEge0BsaW5rIEF1dG9saW5rZXIuaHRtbFBhcnNlci5FbnRpdHlOb2RlIEVudGl0eU5vZGV9LCB0aGlzIHdpbGwgYmUgdGhlIHRleHQgb2YKCSAqICAgdGhlIEhUTUwgZW50aXR5LgoJICovCgl0ZXh0IDogIiIsCgkKCQoJLyoqCgkgKiBAY29uc3RydWN0b3IKCSAqIEBwYXJhbSB7T2JqZWN0fSBjZmcgVGhlIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcyBmb3IgdGhlIE1hdGNoIGluc3RhbmNlLCBzcGVjaWZpZWQgaW4gYW4gT2JqZWN0IChtYXApLgoJICovCgljb25zdHJ1Y3RvciA6IGZ1bmN0aW9uKCBjZmcgKSB7CgkJQXV0b2xpbmtlci5VdGlsLmFzc2lnbiggdGhpcywgY2ZnICk7Cgl9LAoKCQoJLyoqCgkgKiBSZXR1cm5zIGEgc3RyaW5nIG5hbWUgZm9yIHRoZSB0eXBlIG9mIG5vZGUgdGhhdCB0aGlzIGNsYXNzIHJlcHJlc2VudHMuCgkgKiAKCSAqIEBhYnN0cmFjdAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRUeXBlIDogQXV0b2xpbmtlci5VdGlsLmFic3RyYWN0TWV0aG9kLAoJCgkKCS8qKgoJICogUmV0cmlldmVzIHRoZSB7QGxpbmsgI3RleHR9IGZvciB0aGUgSHRtbE5vZGUuCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0VGV4dCA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLnRleHQ7Cgl9Cgp9ICk7Ci8qZ2xvYmFsIEF1dG9saW5rZXIgKi8KLyoqCiAqIEBjbGFzcyBBdXRvbGlua2VyLmh0bWxQYXJzZXIuRWxlbWVudE5vZGUKICogQGV4dGVuZHMgQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxOb2RlCiAqIAogKiBSZXByZXNlbnRzIGFuIEhUTUwgZWxlbWVudCBub2RlIHRoYXQgaGFzIGJlZW4gcGFyc2VkIGJ5IHRoZSB7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxQYXJzZXJ9LgogKiAKICogU2VlIHRoaXMgY2xhc3MncyBzdXBlcmNsYXNzICh7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxOb2RlfSkgZm9yIG1vcmUgZGV0YWlscy4KICovCkF1dG9saW5rZXIuaHRtbFBhcnNlci5FbGVtZW50Tm9kZSA9IEF1dG9saW5rZXIuVXRpbC5leHRlbmQoIEF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sTm9kZSwgewoJCgkvKioKCSAqIEBjZmcge1N0cmluZ30gdGFnTmFtZSAocmVxdWlyZWQpCgkgKiAKCSAqIFRoZSBuYW1lIG9mIHRoZSB0YWcgdGhhdCB3YXMgbWF0Y2hlZC4KCSAqLwoJdGFnTmFtZSA6ICcnLAoJCgkvKioKCSAqIEBjZmcge0Jvb2xlYW59IGNsb3NpbmcgKHJlcXVpcmVkKQoJICogCgkgKiBgdHJ1ZWAgaWYgdGhlIGVsZW1lbnQgKHRhZykgaXMgYSBjbG9zaW5nIHRhZywgYGZhbHNlYCBpZiBpdHMgYW4gb3BlbmluZyB0YWcuCgkgKi8KCWNsb3NpbmcgOiBmYWxzZSwKCgkKCS8qKgoJICogUmV0dXJucyBhIHN0cmluZyBuYW1lIGZvciB0aGUgdHlwZSBvZiBub2RlIHRoYXQgdGhpcyBjbGFzcyByZXByZXNlbnRzLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldFR5cGUgOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gJ2VsZW1lbnQnOwoJfSwKCQoKCS8qKgoJICogUmV0dXJucyB0aGUgSFRNTCBlbGVtZW50J3MgKHRhZydzKSBuYW1lLiBFeDogZm9yIGFuICZsdDtpbWcmZ3Q7IHRhZywgcmV0dXJucyAiaW1nIi4KCSAqIAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRUYWdOYW1lIDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMudGFnTmFtZTsKCX0sCgkKCQoJLyoqCgkgKiBEZXRlcm1pbmVzIGlmIHRoZSBIVE1MIGVsZW1lbnQgKHRhZykgaXMgYSBjbG9zaW5nIHRhZy4gRXg6ICZsdDtkaXYmZ3Q7IHJldHVybnMKCSAqIGBmYWxzZWAsIHdoaWxlICZsdDsvZGl2Jmd0OyByZXR1cm5zIGB0cnVlYC4KCSAqIAoJICogQHJldHVybiB7Qm9vbGVhbn0KCSAqLwoJaXNDbG9zaW5nIDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuY2xvc2luZzsKCX0KCQp9ICk7Ci8qZ2xvYmFsIEF1dG9saW5rZXIgKi8KLyoqCiAqIEBjbGFzcyBBdXRvbGlua2VyLmh0bWxQYXJzZXIuRW50aXR5Tm9kZQogKiBAZXh0ZW5kcyBBdXRvbGlua2VyLmh0bWxQYXJzZXIuSHRtbE5vZGUKICogCiAqIFJlcHJlc2VudHMgYSBrbm93biBIVE1MIGVudGl0eSBub2RlIHRoYXQgaGFzIGJlZW4gcGFyc2VkIGJ5IHRoZSB7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxQYXJzZXJ9LgogKiBFeDogJyZhbXA7bmJzcDsnLCBvciAnJmFtcCMxNjA7JyAod2hpY2ggd2lsbCBiZSByZXRyaWV2YWJsZSBmcm9tIHRoZSB7QGxpbmsgI2dldFRleHR9IG1ldGhvZC4KICogCiAqIE5vdGUgdGhhdCB0aGlzIGNsYXNzIHdpbGwgb25seSBiZSByZXR1cm5lZCBmcm9tIHRoZSBIdG1sUGFyc2VyIGZvciB0aGUgc2V0IG9mIGNoZWNrZWQgSFRNTCBlbnRpdHkgbm9kZXMgCiAqIGRlZmluZWQgYnkgdGhlIHtAbGluayBBdXRvbGlua2VyLmh0bWxQYXJzZXIuSHRtbFBhcnNlciNodG1sQ2hhcmFjdGVyRW50aXRpZXNSZWdleH0uCiAqIAogKiBTZWUgdGhpcyBjbGFzcydzIHN1cGVyY2xhc3MgKHtAbGluayBBdXRvbGlua2VyLmh0bWxQYXJzZXIuSHRtbE5vZGV9KSBmb3IgbW9yZSBkZXRhaWxzLgogKi8KQXV0b2xpbmtlci5odG1sUGFyc2VyLkVudGl0eU5vZGUgPSBBdXRvbGlua2VyLlV0aWwuZXh0ZW5kKCBBdXRvbGlua2VyLmh0bWxQYXJzZXIuSHRtbE5vZGUsIHsKCQoJLyoqCgkgKiBSZXR1cm5zIGEgc3RyaW5nIG5hbWUgZm9yIHRoZSB0eXBlIG9mIG5vZGUgdGhhdCB0aGlzIGNsYXNzIHJlcHJlc2VudHMuCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0VHlwZSA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiAnZW50aXR5JzsKCX0KCQp9ICk7Ci8qZ2xvYmFsIEF1dG9saW5rZXIgKi8KLyoqCiAqIEBjbGFzcyBBdXRvbGlua2VyLmh0bWxQYXJzZXIuVGV4dE5vZGUKICogQGV4dGVuZHMgQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxOb2RlCiAqIAogKiBSZXByZXNlbnRzIGEgdGV4dCBub2RlIHRoYXQgaGFzIGJlZW4gcGFyc2VkIGJ5IHRoZSB7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxQYXJzZXJ9LgogKiAKICogU2VlIHRoaXMgY2xhc3MncyBzdXBlcmNsYXNzICh7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxOb2RlfSkgZm9yIG1vcmUgZGV0YWlscy4KICovCkF1dG9saW5rZXIuaHRtbFBhcnNlci5UZXh0Tm9kZSA9IEF1dG9saW5rZXIuVXRpbC5leHRlbmQoIEF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sTm9kZSwgewoJCgkvKioKCSAqIFJldHVybnMgYSBzdHJpbmcgbmFtZSBmb3IgdGhlIHR5cGUgb2Ygbm9kZSB0aGF0IHRoaXMgY2xhc3MgcmVwcmVzZW50cy4KCSAqIAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRUeXBlIDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuICd0ZXh0JzsKCX0KCQp9ICk7Ci8qZ2xvYmFsIEF1dG9saW5rZXIgKi8KLyoqCiAqIEBwcml2YXRlCiAqIEBjbGFzcyBBdXRvbGlua2VyLm1hdGNoUGFyc2VyLk1hdGNoUGFyc2VyCiAqIEBleHRlbmRzIE9iamVjdAogKiAKICogVXNlZCBieSBBdXRvbGlua2VyIHRvIHBhcnNlIHtAbGluayAjdXJscyBVUkxzfSwge0BsaW5rICNlbWFpbHMgZW1haWwgYWRkcmVzc2VzfSwgYW5kIHtAbGluayAjdHdpdHRlciBUd2l0dGVyIGhhbmRsZXN9LCAKICogZ2l2ZW4gYW4gaW5wdXQgc3RyaW5nIG9mIHRleHQuCiAqIAogKiBUaGUgTWF0Y2hQYXJzZXIgaXMgZmVkIGEgbm9uLUhUTUwgc3RyaW5nIGluIG9yZGVyIHRvIHNlYXJjaCBvdXQgVVJMcywgZW1haWwgYWRkcmVzc2VzIGFuZCBUd2l0dGVyIGhhbmRsZXMuIEF1dG9saW5rZXIKICogZmlyc3QgdXNlcyB0aGUge0BsaW5rIEh0bWxQYXJzZXJ9IHRvICJ3YWxrIGFyb3VuZCIgSFRNTCB0YWdzLCBhbmQgdGhlbiB0aGUgdGV4dCBhcm91bmQgdGhlIEhUTUwgdGFncyBpcyBwYXNzZWQgaW50bwogKiB0aGUgTWF0Y2hQYXJzZXIgaW4gb3JkZXIgdG8gZmluZCB0aGUgYWN0dWFsIG1hdGNoZXMuCiAqLwpBdXRvbGlua2VyLm1hdGNoUGFyc2VyLk1hdGNoUGFyc2VyID0gQXV0b2xpbmtlci5VdGlsLmV4dGVuZCggT2JqZWN0LCB7CgkKCS8qKgoJICogQGNmZyB7Qm9vbGVhbn0gdXJscwoJICogCgkgKiBgdHJ1ZWAgaWYgbWlzY2VsbGFuZW91cyBVUkxzIHNob3VsZCBiZSBhdXRvbWF0aWNhbGx5IGxpbmtlZCwgYGZhbHNlYCBpZiB0aGV5IHNob3VsZCBub3QgYmUuCgkgKi8KCXVybHMgOiB0cnVlLAoJCgkvKioKCSAqIEBjZmcge0Jvb2xlYW59IGVtYWlsCgkgKiAKCSAqIGB0cnVlYCBpZiBlbWFpbCBhZGRyZXNzZXMgc2hvdWxkIGJlIGF1dG9tYXRpY2FsbHkgbGlua2VkLCBgZmFsc2VgIGlmIHRoZXkgc2hvdWxkIG5vdCBiZS4KCSAqLwoJZW1haWwgOiB0cnVlLAoJCgkvKioKCSAqIEBjZmcge0Jvb2xlYW59IHR3aXR0ZXIKCSAqIAoJICogYHRydWVgIGlmIFR3aXR0ZXIgaGFuZGxlcyAoIkBleGFtcGxlIikgc2hvdWxkIGJlIGF1dG9tYXRpY2FsbHkgbGlua2VkLCBgZmFsc2VgIGlmIHRoZXkgc2hvdWxkIG5vdCBiZS4KCSAqLwoJdHdpdHRlciA6IHRydWUsCgkKCS8qKgoJICogQGNmZyB7Qm9vbGVhbn0gc3RyaXBQcmVmaXgKCSAqIAoJICogYHRydWVgIGlmICdodHRwOi8vJyBvciAnaHR0cHM6Ly8nIGFuZC9vciB0aGUgJ3d3dy4nIHNob3VsZCBiZSBzdHJpcHBlZCBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgVVJMIGxpbmtzJyB0ZXh0CgkgKiBpbiB7QGxpbmsgQXV0b2xpbmtlci5tYXRjaC5VcmwgVVJMIG1hdGNoZXN9LCBgZmFsc2VgIG90aGVyd2lzZS4KCSAqIAoJICogVE9ETzogSGFuZGxlIHRoaXMgYmVmb3JlIGEgVVJMIE1hdGNoIG9iamVjdCBpcyBpbnN0YW50aWF0ZWQuCgkgKi8KCXN0cmlwUHJlZml4IDogdHJ1ZSwKCQoJCgkvKioKCSAqIEBwcml2YXRlCgkgKiBAcHJvcGVydHkge1JlZ0V4cH0gbWF0Y2hlclJlZ2V4CgkgKiAKCSAqIFRoZSByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBtYXRjaGVzIFVSTHMsIGVtYWlsIGFkZHJlc3NlcywgYW5kIFR3aXR0ZXIgaGFuZGxlcy4KCSAqIAoJICogVGhpcyByZWd1bGFyIGV4cHJlc3Npb24gaGFzIHRoZSBmb2xsb3dpbmcgY2FwdHVyaW5nIGdyb3VwczoKCSAqIAoJICogMS4gR3JvdXAgdGhhdCBpcyB1c2VkIHRvIGRldGVybWluZSBpZiB0aGVyZSBpcyBhIFR3aXR0ZXIgaGFuZGxlIG1hdGNoIChpLmUuIFxAc29tZVR3aXR0ZXJVc2VyKS4gU2ltcGx5IGNoZWNrIGZvciBpdHMgCgkgKiAgICBleGlzdGVuY2UgdG8gZGV0ZXJtaW5lIGlmIHRoZXJlIGlzIGEgVHdpdHRlciBoYW5kbGUgbWF0Y2guIFRoZSBuZXh0IGNvdXBsZSBvZiBjYXB0dXJpbmcgZ3JvdXBzIGdpdmUgaW5mb3JtYXRpb24gCgkgKiAgICBhYm91dCB0aGUgVHdpdHRlciBoYW5kbGUgbWF0Y2guCgkgKiAyLiBUaGUgd2hpdGVzcGFjZSBjaGFyYWN0ZXIgYmVmb3JlIHRoZSBcQHNpZ24gaW4gYSBUd2l0dGVyIGhhbmRsZS4gVGhpcyBpcyBuZWVkZWQgYmVjYXVzZSB0aGVyZSBhcmUgbm8gbG9va2JlaGluZHMgaW4KCSAqICAgIEpTIHJlZ3VsYXIgZXhwcmVzc2lvbnMsIGFuZCBjYW4gYmUgdXNlZCB0byByZWNvbnN0cnVjdCB0aGUgb3JpZ2luYWwgc3RyaW5nIGluIGEgcmVwbGFjZSgpLgoJICogMy4gVGhlIFR3aXR0ZXIgaGFuZGxlIGl0c2VsZiBpbiBhIFR3aXR0ZXIgbWF0Y2guIElmIHRoZSBtYXRjaCBpcyAnQHNvbWVUd2l0dGVyVXNlcicsIHRoZSBoYW5kbGUgaXMgJ3NvbWVUd2l0dGVyVXNlcicuCgkgKiA0LiBHcm91cCB0aGF0IG1hdGNoZXMgYW4gZW1haWwgYWRkcmVzcy4gVXNlZCB0byBkZXRlcm1pbmUgaWYgdGhlIG1hdGNoIGlzIGFuIGVtYWlsIGFkZHJlc3MsIGFzIHdlbGwgYXMgaG9sZGluZyB0aGUgZnVsbCAKCSAqICAgIGFkZHJlc3MuIEV4OiAnbWVAbXkuY29tJwoJICogNS4gR3JvdXAgdGhhdCBtYXRjaGVzIGEgVVJMIGluIHRoZSBpbnB1dCB0ZXh0LiBFeDogJ2h0dHA6Ly9nb29nbGUuY29tJywgJ3d3dy5nb29nbGUuY29tJywgb3IganVzdCAnZ29vZ2xlLmNvbScuCgkgKiAgICBUaGlzIGFsc28gaW5jbHVkZXMgYSBwYXRoLCB1cmwgcGFyYW1ldGVycywgb3IgaGFzaCBhbmNob3JzLiBFeDogZ29vZ2xlLmNvbS9wYXRoL3RvL2ZpbGU/cTE9MSZxMj0yI215QW5jaG9yCgkgKiA2LiBHcm91cCB0aGF0IG1hdGNoZXMgYSBwcm90b2NvbCBVUkwgKGkuZS4gJ2h0dHA6Ly9nb29nbGUuY29tJykuIFRoaXMgaXMgdXNlZCB0byBtYXRjaCBwcm90b2NvbCBVUkxzIHdpdGgganVzdCBhIHNpbmdsZQoJICogICAgd29yZCwgbGlrZSAnaHR0cDovL2xvY2FsaG9zdCcsIHdoZXJlIHdlIHdvbid0IGRvdWJsZSBjaGVjayB0aGF0IHRoZSBkb21haW4gbmFtZSBoYXMgYXQgbGVhc3Qgb25lICcuJyBpbiBpdC4KCSAqIDcuIEEgcHJvdG9jb2wtcmVsYXRpdmUgKCcvLycpIG1hdGNoIGZvciB0aGUgY2FzZSBvZiBhICd3d3cuJyBwcmVmaXhlZCBVUkwuIFdpbGwgYmUgYW4gZW1wdHkgc3RyaW5nIGlmIGl0IGlzIG5vdCBhIAoJICogICAgcHJvdG9jb2wtcmVsYXRpdmUgbWF0Y2guIFdlIG5lZWQgdG8ga25vdyB0aGUgY2hhcmFjdGVyIGJlZm9yZSB0aGUgJy8vJyBpbiBvcmRlciB0byBkZXRlcm1pbmUgaWYgaXQgaXMgYSB2YWxpZCBtYXRjaAoJICogICAgb3IgdGhlIC8vIHdhcyBpbiBhIHN0cmluZyB3ZSBkb24ndCB3YW50IHRvIGF1dG8tbGluay4KCSAqIDguIEEgcHJvdG9jb2wtcmVsYXRpdmUgKCcvLycpIG1hdGNoIGZvciB0aGUgY2FzZSBvZiBhIGtub3duIFRMRCBwcmVmaXhlZCBVUkwuIFdpbGwgYmUgYW4gZW1wdHkgc3RyaW5nIGlmIGl0IGlzIG5vdCBhIAoJICogICAgcHJvdG9jb2wtcmVsYXRpdmUgbWF0Y2guIFNlZSAjNiBmb3IgbW9yZSBpbmZvLiAKCSAqLwoJbWF0Y2hlclJlZ2V4IDogKGZ1bmN0aW9uKCkgewoJCXZhciB0d2l0dGVyUmVnZXggPSAvKF58W15cd10pQChcd3sxLDE1fSkvLCAgICAgICAgICAgICAgLy8gRm9yIG1hdGNoaW5nIGEgdHdpdHRlciBoYW5kbGUuIEV4OiBAZ3JlZ29yeV9qYWNvYnMKCQkgICAgCgkJICAgIGVtYWlsUmVnZXggPSAvKD86W1wtOzomPVwrXCQsXHdcLl0rQCkvLCAgICAgICAgICAgICAvLyBzb21ldGhpbmdAIGZvciBlbWFpbCBhZGRyZXNzZXMgKGEuay5hLiBsb2NhbC1wYXJ0KQoJCSAgICAKCQkgICAgcHJvdG9jb2xSZWdleCA9IC8oPzpbQS1aYS16XVstLitBLVphLXowLTldKzooPyFbQS1aYS16XVstLitBLVphLXowLTldKzpcL1wvKSg/IVxkK1wvPykoPzpcL1wvKT8pLywgIC8vIG1hdGNoIHByb3RvY29sLCBhbGxvdyBpbiBmb3JtYXQgImh0dHA6Ly8iIG9yICJtYWlsdG86Ii4gSG93ZXZlciwgZG8gbm90IG1hdGNoIHRoZSBmaXJzdCBwYXJ0IG9mIHNvbWV0aGluZyBsaWtlICdsaW5rOmh0dHA6Ly93d3cuZ29vZ2xlLmNvbScgKGkuZS4gZG9uJ3QgbWF0Y2ggImxpbms6IikuIEFsc28sIG1ha2Ugc3VyZSB3ZSBkb24ndCBpbnRlcnByZXQgJ2dvb2dsZS5jb206ODAwMCcgYXMgaWYgJ2dvb2dsZS5jb20nIHdhcyBhIHByb3RvY29sIGhlcmUgKGkuZS4gaWdub3JlIGEgdHJhaWxpbmcgcG9ydCBudW1iZXIgaW4gdGhpcyByZWdleCkKCQkgICAgd3d3UmVnZXggPSAvKD86d3d3XC4pLywgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0aW5nIHdpdGggJ3d3dy4nCgkJICAgIGRvbWFpbk5hbWVSZWdleCA9IC9bQS1aYS16MC05XC5cLV0qW0EtWmEtejAtOVwtXS8sICAvLyBhbnl0aGluZyBsb29raW5nIGF0IGFsbCBsaWtlIGEgZG9tYWluLCBub24tdW5pY29kZSBkb21haW5zLCBub3QgZW5kaW5nIGluIGEgcGVyaW9kCgkJICAgIHRsZFJlZ2V4ID0gL1wuKD86aW50ZXJuYXRpb25hbHxjb25zdHJ1Y3Rpb258Y29udHJhY3RvcnN8ZW50ZXJwcmlzZXN8cGhvdG9ncmFwaHl8cHJvZHVjdGlvbnN8Zm91bmRhdGlvbnxpbW1vYmlsaWVufGluZHVzdHJpZXN8bWFuYWdlbWVudHxwcm9wZXJ0aWVzfHRlY2hub2xvZ3l8Y2hyaXN0bWFzfGNvbW11bml0eXxkaXJlY3Rvcnl8ZWR1Y2F0aW9ufGVxdWlwbWVudHxpbnN0aXR1dGV8bWFya2V0aW5nfHNvbHV0aW9uc3x2YWNhdGlvbnN8YmFyZ2FpbnN8Ym91dGlxdWV8YnVpbGRlcnN8Y2F0ZXJpbmd8Y2xlYW5pbmd8Y2xvdGhpbmd8Y29tcHV0ZXJ8ZGVtb2NyYXR8ZGlhbW9uZHN8Z3JhcGhpY3N8aG9sZGluZ3N8bGlnaHRpbmd8cGFydG5lcnN8cGx1bWJpbmd8c3VwcGxpZXN8dHJhaW5pbmd8dmVudHVyZXN8YWNhZGVteXxjYXJlZXJzfGNvbXBhbnl8Y3J1aXNlc3xkb21haW5zfGV4cG9zZWR8ZmxpZ2h0c3xmbG9yaXN0fGdhbGxlcnl8Z3VpdGFyc3xob2xpZGF5fGtpdGNoZW58bmV1c3Rhcnxva2luYXdhfHJlY2lwZXN8cmVudGFsc3xyZXZpZXdzfHNoaWtzaGF8c2luZ2xlc3xzdXBwb3J0fHN5c3RlbXN8YWdlbmN5fGJlcmxpbnxjYW1lcmF8Y2VudGVyfGNvZmZlZXxjb25kb3N8ZGF0aW5nfGVzdGF0ZXxldmVudHN8ZXhwZXJ0fGZ1dGJvbHxrYXVmZW58bHV4dXJ5fG1haXNvbnxtb25hc2h8bXVzZXVtfG5hZ295YXxwaG90b3N8cmVwYWlyfHJlcG9ydHxzb2NpYWx8c3VwcGx5fHRhdHRvb3x0aWVuZGF8dHJhdmVsfHZpYWplc3x2aWxsYXN8dmlzaW9ufHZvdGluZ3x2b3lhZ2V8YWN0b3J8YnVpbGR8Y2FyZHN8Y2hlYXB8Y29kZXN8ZGFuY2V8ZW1haWx8Z2xhc3N8aG91c2V8bWFuZ298bmluamF8cGFydHN8cGhvdG98c2hvZXN8c29sYXJ8dG9kYXl8dG9reW98dG9vbHN8d2F0Y2h8d29ya3N8YWVyb3xhcnBhfGFzaWF8YmVzdHxiaWtlfGJsdWV8YnV6enxjYW1wfGNsdWJ8Y29vbHxjb29wfGZhcm18ZmlzaHxnaWZ0fGd1cnV8aW5mb3xqb2JzfGtpd2l8a3JlZHxsYW5kfGxpbW98bGlua3xtZW51fG1vYml8bW9kYXxuYW1lfHBpY3N8cGlua3xwb3N0fHFwb258cmljaHxydWhyfHNleHl8dGlwc3x2b3RlfHZvdG98d2FuZ3x3aWVufHdpa2l8em9uZXxiYXJ8YmlkfGJpenxjYWJ8Y2F0fGNlb3xjb218ZWR1fGdvdnxpbnR8a2ltfG1pbHxuZXR8b25sfG9yZ3xwcm98cHVifHJlZHx0ZWx8dW5vfHdlZHx4eHh8eHl6fGFjfGFkfGFlfGFmfGFnfGFpfGFsfGFtfGFufGFvfGFxfGFyfGFzfGF0fGF1fGF3fGF4fGF6fGJhfGJifGJkfGJlfGJmfGJnfGJofGJpfGJqfGJtfGJufGJvfGJyfGJzfGJ0fGJ2fGJ3fGJ5fGJ6fGNhfGNjfGNkfGNmfGNnfGNofGNpfGNrfGNsfGNtfGNufGNvfGNyfGN1fGN2fGN3fGN4fGN5fGN6fGRlfGRqfGRrfGRtfGRvfGR6fGVjfGVlfGVnfGVyfGVzfGV0fGV1fGZpfGZqfGZrfGZtfGZvfGZyfGdhfGdifGdkfGdlfGdmfGdnfGdofGdpfGdsfGdtfGdufGdwfGdxfGdyfGdzfGd0fGd1fGd3fGd5fGhrfGhtfGhufGhyfGh0fGh1fGlkfGllfGlsfGltfGlufGlvfGlxfGlyfGlzfGl0fGplfGptfGpvfGpwfGtlfGtnfGtofGtpfGttfGtufGtwfGtyfGt3fGt5fGt6fGxhfGxifGxjfGxpfGxrfGxyfGxzfGx0fGx1fGx2fGx5fG1hfG1jfG1kfG1lfG1nfG1ofG1rfG1sfG1tfG1ufG1vfG1wfG1xfG1yfG1zfG10fG11fG12fG13fG14fG15fG16fG5hfG5jfG5lfG5mfG5nfG5pfG5sfG5vfG5wfG5yfG51fG56fG9tfHBhfHBlfHBmfHBnfHBofHBrfHBsfHBtfHBufHByfHBzfHB0fHB3fHB5fHFhfHJlfHJvfHJzfHJ1fHJ3fHNhfHNifHNjfHNkfHNlfHNnfHNofHNpfHNqfHNrfHNsfHNtfHNufHNvfHNyfHN0fHN1fHN2fHN4fHN5fHN6fHRjfHRkfHRmfHRnfHRofHRqfHRrfHRsfHRtfHRufHRvfHRwfHRyfHR0fHR2fHR3fHR6fHVhfHVnfHVrfHVzfHV5fHV6fHZhfHZjfHZlfHZnfHZpfHZufHZ1fHdmfHdzfHllfHl0fHphfHptfHp3KVxiLywgICAvLyBtYXRjaCBvdXIga25vd24gdG9wIGxldmVsIGRvbWFpbnMgKFRMRHMpCgkJICAgIAoJCSAgICAvLyBBbGxvdyBvcHRpb25hbCBwYXRoLCBxdWVyeSBzdHJpbmcsIGFuZCBoYXNoIGFuY2hvciwgbm90IGVuZGluZyBpbiB0aGUgZm9sbG93aW5nIGNoYXJhY3RlcnM6ICI/ITosLjsiCgkJICAgIC8vIGh0dHA6Ly9ibG9nLmNvZGluZ2hvcnJvci5jb20vdGhlLXByb2JsZW0td2l0aC11cmxzLwoJCSAgICB1cmxTdWZmaXhSZWdleCA9IC9bXC1BLVphLXowLTkrJkAjXC8lPX5fKCl8JyQqXFtcXT8hOiwuO10qW1wtQS1aYS16MC05KyZAI1wvJT1+XygpfCckKlxbXF1dLzsKCQkKCQlyZXR1cm4gbmV3IFJlZ0V4cCggWwoJCQknKCcsICAvLyAqKiogQ2FwdHVyaW5nIGdyb3VwICQxLCB3aGljaCBjYW4gYmUgdXNlZCB0byBjaGVjayBmb3IgYSB0d2l0dGVyIGhhbmRsZSBtYXRjaC4gVXNlIGdyb3VwICQzIGZvciB0aGUgYWN0dWFsIHR3aXR0ZXIgaGFuZGxlIHRob3VnaC4gJDIgbWF5IGJlIHVzZWQgdG8gcmVjb25zdHJ1Y3QgdGhlIG9yaWdpbmFsIHN0cmluZyBpbiBhIHJlcGxhY2UoKSAKCQkJCS8vICoqKiBDYXB0dXJpbmcgZ3JvdXAgJDIsIHdoaWNoIG1hdGNoZXMgdGhlIHdoaXRlc3BhY2UgY2hhcmFjdGVyIGJlZm9yZSB0aGUgJ0AnIHNpZ24gKG5lZWRlZCBiZWNhdXNlIG9mIG5vIGxvb2tiZWhpbmRzKSwgYW5kIAoJCQkJLy8gKioqIENhcHR1cmluZyBncm91cCAkMywgd2hpY2ggbWF0Y2hlcyB0aGUgYWN0dWFsIHR3aXR0ZXIgaGFuZGxlCgkJCQl0d2l0dGVyUmVnZXguc291cmNlLAoJCQknKScsCgkJCQoJCQknfCcsCgkJCQoJCQknKCcsICAvLyAqKiogQ2FwdHVyaW5nIGdyb3VwICQ0LCB3aGljaCBpcyB1c2VkIHRvIGRldGVybWluZSBhbiBlbWFpbCBtYXRjaAoJCQkJZW1haWxSZWdleC5zb3VyY2UsCgkJCQlkb21haW5OYW1lUmVnZXguc291cmNlLAoJCQkJdGxkUmVnZXguc291cmNlLAoJCQknKScsCgkJCQoJCQknfCcsCgkJCQoJCQknKCcsICAvLyAqKiogQ2FwdHVyaW5nIGdyb3VwICQ1LCB3aGljaCBpcyB1c2VkIHRvIG1hdGNoIGEgVVJMCgkJCQknKD86JywgLy8gcGFyZW5zIHRvIGNvdmVyIG1hdGNoIGZvciBwcm90b2NvbCAob3B0aW9uYWwpLCBhbmQgZG9tYWluCgkJCQkJJygnLCAgLy8gKioqIENhcHR1cmluZyBncm91cCAkNiwgZm9yIGEgcHJvdG9jb2wtcHJlZml4ZWQgdXJsIChleDogaHR0cDovL2dvb2dsZS5jb20pCgkJCQkJCXByb3RvY29sUmVnZXguc291cmNlLAoJCQkJCQlkb21haW5OYW1lUmVnZXguc291cmNlLAoJCQkJCScpJywKCQkJCQkKCQkJCQknfCcsCgkJCQkJCgkJCQkJJyg/OicsICAvLyBub24tY2FwdHVyaW5nIHBhcmVuIGZvciBhICd3d3cuJyBwcmVmaXhlZCB1cmwgKGV4OiB3d3cuZ29vZ2xlLmNvbSkKCQkJCQkJJyguPy8vKT8nLCAgLy8gKioqIENhcHR1cmluZyBncm91cCAkNyBmb3IgYW4gb3B0aW9uYWwgcHJvdG9jb2wtcmVsYXRpdmUgVVJMLiBNdXN0IGJlIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZyBvciBzdGFydCB3aXRoIGEgbm9uLXdvcmQgY2hhcmFjdGVyCgkJCQkJCXd3d1JlZ2V4LnNvdXJjZSwKCQkJCQkJZG9tYWluTmFtZVJlZ2V4LnNvdXJjZSwKCQkJCQknKScsCgkJCQkJCgkJCQkJJ3wnLAoJCQkJCQoJCQkJCScoPzonLCAgLy8gbm9uLWNhcHR1cmluZyBwYXJlbiBmb3Iga25vd24gYSBUTEQgdXJsIChleDogZ29vZ2xlLmNvbSkKCQkJCQkJJyguPy8vKT8nLCAgLy8gKioqIENhcHR1cmluZyBncm91cCAkOCBmb3IgYW4gb3B0aW9uYWwgcHJvdG9jb2wtcmVsYXRpdmUgVVJMLiBNdXN0IGJlIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZyBvciBzdGFydCB3aXRoIGEgbm9uLXdvcmQgY2hhcmFjdGVyCgkJCQkJCWRvbWFpbk5hbWVSZWdleC5zb3VyY2UsCgkJCQkJCXRsZFJlZ2V4LnNvdXJjZSwKCQkJCQknKScsCgkJCQknKScsCgkJCQkKCQkJCScoPzonICsgdXJsU3VmZml4UmVnZXguc291cmNlICsgJyk/JywgIC8vIG1hdGNoIGZvciBwYXRoLCBxdWVyeSBzdHJpbmcsIGFuZC9vciBoYXNoIGFuY2hvciAtIG9wdGlvbmFsCgkJCScpJwoJCV0uam9pbiggIiIgKSwgJ2dpJyApOwoJfSApKCksCgkKCS8qKgoJICogQHByaXZhdGUKCSAqIEBwcm9wZXJ0eSB7UmVnRXhwfSBjaGFyQmVmb3JlUHJvdG9jb2xSZWxNYXRjaFJlZ2V4CgkgKiAKCSAqIFRoZSByZWd1bGFyIGV4cHJlc3Npb24gdXNlZCB0byByZXRyaWV2ZSB0aGUgY2hhcmFjdGVyIGJlZm9yZSBhIHByb3RvY29sLXJlbGF0aXZlIFVSTCBtYXRjaC4KCSAqIAoJICogVGhpcyBpcyB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIHtAbGluayAjbWF0Y2hlclJlZ2V4fSwgd2hpY2ggbmVlZHMgdG8gZ3JhYiB0aGUgY2hhcmFjdGVyIGJlZm9yZSBhIHByb3RvY29sLXJlbGF0aXZlCgkgKiAnLy8nIGR1ZSB0byB0aGUgbGFjayBvZiBhIG5lZ2F0aXZlIGxvb2stYmVoaW5kIGluIEphdmFTY3JpcHQgcmVndWxhciBleHByZXNzaW9ucy4gVGhlIGNoYXJhY3RlciBiZWZvcmUgdGhlIG1hdGNoIGlzIHN0cmlwcGVkCgkgKiBmcm9tIHRoZSBVUkwuCgkgKi8KCWNoYXJCZWZvcmVQcm90b2NvbFJlbE1hdGNoUmVnZXggOiAvXiguKT9cL1wvLywKCQoJLyoqCgkgKiBAcHJpdmF0ZQoJICogQHByb3BlcnR5IHtBdXRvbGlua2VyLk1hdGNoVmFsaWRhdG9yfSBtYXRjaFZhbGlkYXRvcgoJICogCgkgKiBUaGUgTWF0Y2hWYWxpZGF0b3Igb2JqZWN0LCB1c2VkIHRvIGZpbHRlciBvdXQgYW55IGZhbHNlIHBvc2l0aXZlcyBmcm9tIHRoZSB7QGxpbmsgI21hdGNoZXJSZWdleH0uIFNlZQoJICoge0BsaW5rIEF1dG9saW5rZXIuTWF0Y2hWYWxpZGF0b3J9IGZvciBkZXRhaWxzLgoJICovCgkKCQoJLyoqCgkgKiBAY29uc3RydWN0b3IKCSAqIEBwYXJhbSB7T2JqZWN0fSBbY2ZnXSBUaGUgY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgQW5jaG9yVGFnQnVpbGRlciBpbnN0YW5jZSwgc3BlY2lmaWVkIGluIGFuIE9iamVjdCAobWFwKS4KCSAqLwoJY29uc3RydWN0b3IgOiBmdW5jdGlvbiggY2ZnICkgewoJCUF1dG9saW5rZXIuVXRpbC5hc3NpZ24oIHRoaXMsIGNmZyApOwoJCgkJdGhpcy5tYXRjaFZhbGlkYXRvciA9IG5ldyBBdXRvbGlua2VyLk1hdGNoVmFsaWRhdG9yKCk7Cgl9LAoJCgkKCS8qKgoJICogUGFyc2VzIHRoZSBpbnB1dCBgdGV4dGAgdG8gc2VhcmNoIGZvciBVUkxzL2VtYWlscy9Ud2l0dGVyIGhhbmRsZXMsIGFuZCBjYWxscyB0aGUgYHJlcGxhY2VGbmAKCSAqIHRvIGFsbG93IHJlcGxhY2VtZW50cyBvZiB0aGUgbWF0Y2hlcy4gUmV0dXJucyB0aGUgYHRleHRgIHdpdGggbWF0Y2hlcyByZXBsYWNlZC4KCSAqIAoJICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGhlIHRleHQgdG8gc2VhcmNoIGFuZCByZXBhY2UgbWF0Y2hlcyBpbi4KCSAqIEBwYXJhbSB7RnVuY3Rpb259IHJlcGxhY2VGbiBUaGUgaXRlcmF0b3IgZnVuY3Rpb24gdG8gaGFuZGxlIHRoZSByZXBsYWNlbWVudHMuIFRoZSBmdW5jdGlvbiB0YWtlcyBhCgkgKiAgIHNpbmdsZSBhcmd1bWVudCwgYSB7QGxpbmsgQXV0b2xpbmtlci5tYXRjaC5NYXRjaH0gb2JqZWN0LCBhbmQgc2hvdWxkIHJldHVybiB0aGUgdGV4dCB0aGF0IHNob3VsZAoJICogICBtYWtlIHRoZSByZXBsYWNlbWVudC4KCSAqIEBwYXJhbSB7T2JqZWN0fSBbY29udGV4dE9iaj13aW5kb3ddIFRoZSBjb250ZXh0IG9iamVjdCAoInNjb3BlIikgdG8gcnVuIHRoZSBgcmVwbGFjZUZuYCBpbi4KCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJcmVwbGFjZSA6IGZ1bmN0aW9uKCB0ZXh0LCByZXBsYWNlRm4sIGNvbnRleHRPYmogKSB7CgkJdmFyIG1lID0gdGhpczsgIC8vIGZvciBjbG9zdXJlCgkJCgkJcmV0dXJuIHRleHQucmVwbGFjZSggdGhpcy5tYXRjaGVyUmVnZXgsIGZ1bmN0aW9uKCBtYXRjaFN0ciwgJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcsICQ4ICkgewoJCQl2YXIgbWF0Y2hEZXNjT2JqID0gbWUucHJvY2Vzc0NhbmRpZGF0ZU1hdGNoKCBtYXRjaFN0ciwgJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcsICQ4ICk7ICAvLyAibWF0Y2ggZGVzY3JpcHRpb24iIG9iamVjdAoJCQkKCQkJLy8gUmV0dXJuIG91dCB3aXRoIG5vIGNoYW5nZXMgZm9yIG1hdGNoIHR5cGVzIHRoYXQgYXJlIGRpc2FibGVkICh1cmwsIGVtYWlsLCB0d2l0dGVyKSwgb3IgZm9yIG1hdGNoZXMgdGhhdCBhcmUgCgkJCS8vIGludmFsaWQgKGZhbHNlIHBvc2l0aXZlcyBmcm9tIHRoZSBtYXRjaGVyUmVnZXgsIHdoaWNoIGNhbid0IHVzZSBsb29rLWJlaGluZHMgc2luY2UgdGhleSBhcmUgdW5hdmFpbGFibGUgaW4gSlMpLgoJCQlpZiggIW1hdGNoRGVzY09iaiApIHsKCQkJCXJldHVybiBtYXRjaFN0cjsKCQkJCQoJCQl9IGVsc2UgewoJCQkJLy8gR2VuZXJhdGUgcmVwbGFjZW1lbnQgdGV4dCBmb3IgdGhlIG1hdGNoIGZyb20gdGhlIGByZXBsYWNlRm5gCgkJCQl2YXIgcmVwbGFjZVN0ciA9IHJlcGxhY2VGbi5jYWxsKCBjb250ZXh0T2JqLCBtYXRjaERlc2NPYmoubWF0Y2ggKTsKCQkJCXJldHVybiBtYXRjaERlc2NPYmoucHJlZml4U3RyICsgcmVwbGFjZVN0ciArIG1hdGNoRGVzY09iai5zdWZmaXhTdHI7CgkJCX0KCQl9ICk7Cgl9LAoJCgkKCS8qKgoJICogUHJvY2Vzc2VzIGEgY2FuZGlkYXRlIG1hdGNoIGZyb20gdGhlIHtAbGluayAjbWF0Y2hlclJlZ2V4fS4gCgkgKiAKCSAqIE5vdCBhbGwgbWF0Y2hlcyBmb3VuZCBieSB0aGUgcmVnZXggYXJlIGFjdHVhbCBVUkwvZW1haWwvVHdpdHRlciBtYXRjaGVzLCBhcyBkZXRlcm1pbmVkIGJ5IHRoZSB7QGxpbmsgI21hdGNoVmFsaWRhdG9yfS4gSW4KCSAqIHRoaXMgY2FzZSwgdGhlIG1ldGhvZCByZXR1cm5zIGBudWxsYC4gT3RoZXJ3aXNlLCBhIHZhbGlkIE9iamVjdCB3aXRoIGBwcmVmaXhTdHJgLCBgbWF0Y2hgLCBhbmQgYHN1ZmZpeFN0cmAgaXMgcmV0dXJuZWQuCgkgKiAKCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge1N0cmluZ30gbWF0Y2hTdHIgVGhlIGZ1bGwgbWF0Y2ggdGhhdCB3YXMgZm91bmQgYnkgdGhlIHtAbGluayAjbWF0Y2hlclJlZ2V4fS4KCSAqIEBwYXJhbSB7U3RyaW5nfSB0d2l0dGVyTWF0Y2ggVGhlIG1hdGNoZWQgdGV4dCBvZiBhIFR3aXR0ZXIgaGFuZGxlLCBpZiB0aGUgbWF0Y2ggaXMgYSBUd2l0dGVyIG1hdGNoLgoJICogQHBhcmFtIHtTdHJpbmd9IHR3aXR0ZXJIYW5kbGVQcmVmaXhXaGl0ZXNwYWNlQ2hhciBUaGUgd2hpdGVzcGFjZSBjaGFyIGJlZm9yZSB0aGUgQCBzaWduIGluIGEgVHdpdHRlciBoYW5kbGUgbWF0Y2guIFRoaXMgCgkgKiAgIGlzIG5lZWRlZCBiZWNhdXNlIG9mIG5vIGxvb2tiZWhpbmRzIGluIEpTIHJlZ2V4ZXMsIGFuZCBpcyBuZWVkIHRvIHJlLWluY2x1ZGUgdGhlIGNoYXJhY3RlciBmb3IgdGhlIGFuY2hvciB0YWcgcmVwbGFjZW1lbnQuCgkgKiBAcGFyYW0ge1N0cmluZ30gdHdpdHRlckhhbmRsZSBUaGUgYWN0dWFsIFR3aXR0ZXIgdXNlciAoaS5lIHRoZSB3b3JkIGFmdGVyIHRoZSBAIHNpZ24gaW4gYSBUd2l0dGVyIG1hdGNoKS4KCSAqIEBwYXJhbSB7U3RyaW5nfSBlbWFpbEFkZHJlc3NNYXRjaCBUaGUgbWF0Y2hlZCBlbWFpbCBhZGRyZXNzIGZvciBhbiBlbWFpbCBhZGRyZXNzIG1hdGNoLgoJICogQHBhcmFtIHtTdHJpbmd9IHVybE1hdGNoIFRoZSBtYXRjaGVkIFVSTCBzdHJpbmcgZm9yIGEgVVJMIG1hdGNoLgoJICogQHBhcmFtIHtTdHJpbmd9IHByb3RvY29sVXJsTWF0Y2ggVGhlIG1hdGNoIFVSTCBzdHJpbmcgZm9yIGEgcHJvdG9jb2wgbWF0Y2guIEV4OiAnaHR0cDovL3lhaG9vLmNvbScuIFRoaXMgaXMgdXNlZCB0byBtYXRjaAoJICogICBzb21ldGhpbmcgbGlrZSAnaHR0cDovL2xvY2FsaG9zdCcsIHdoZXJlIHdlIHdvbid0IGRvdWJsZSBjaGVjayB0aGF0IHRoZSBkb21haW4gbmFtZSBoYXMgYXQgbGVhc3Qgb25lICcuJyBpbiBpdC4KCSAqIEBwYXJhbSB7U3RyaW5nfSB3d3dQcm90b2NvbFJlbGF0aXZlTWF0Y2ggVGhlICcvLycgZm9yIGEgcHJvdG9jb2wtcmVsYXRpdmUgbWF0Y2ggZnJvbSBhICd3d3cnIHVybCwgd2l0aCB0aGUgY2hhcmFjdGVyIHRoYXQgCgkgKiAgIGNvbWVzIGJlZm9yZSB0aGUgJy8vJy4KCSAqIEBwYXJhbSB7U3RyaW5nfSB0bGRQcm90b2NvbFJlbGF0aXZlTWF0Y2ggVGhlICcvLycgZm9yIGEgcHJvdG9jb2wtcmVsYXRpdmUgbWF0Y2ggZnJvbSBhIFRMRCAodG9wIGxldmVsIGRvbWFpbikgbWF0Y2gsIHdpdGggCgkgKiAgIHRoZSBjaGFyYWN0ZXIgdGhhdCBjb21lcyBiZWZvcmUgdGhlICcvLycuCgkgKiAgIAoJICogQHJldHVybiB7T2JqZWN0fSBBICJtYXRjaCBkZXNjcmlwdGlvbiBvYmplY3QiLiBUaGlzIHdpbGwgYmUgYG51bGxgIGlmIHRoZSBtYXRjaCB3YXMgaW52YWxpZCwgb3IgaWYgYSBtYXRjaCB0eXBlIGlzIGRpc2FibGVkLgoJICogICBPdGhlcndpc2UsIHRoaXMgd2lsbCBiZSBhbiBPYmplY3QgKG1hcCkgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6CgkgKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybi5wcmVmaXhTdHIgVGhlIGNoYXIocykgdGhhdCBzaG91bGQgYmUgcHJlcGVuZGVkIHRvIHRoZSByZXBsYWNlbWVudCBzdHJpbmcuIFRoZXNlIGFyZSBjaGFyKHMpIHRoYXQKCSAqICAgd2VyZSBuZWVkZWQgdG8gYmUgaW5jbHVkZWQgZnJvbSB0aGUgcmVnZXggbWF0Y2ggdGhhdCB3ZXJlIGlnbm9yZWQgYnkgcHJvY2Vzc2luZyBjb2RlLCBhbmQgc2hvdWxkIGJlIHJlLWluc2VydGVkIGludG8gCgkgKiAgIHRoZSByZXBsYWNlbWVudCBzdHJlYW0uCgkgKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybi5zdWZmaXhTdHIgVGhlIGNoYXIocykgdGhhdCBzaG91bGQgYmUgYXBwZW5kZWQgdG8gdGhlIHJlcGxhY2VtZW50IHN0cmluZy4gVGhlc2UgYXJlIGNoYXIocykgdGhhdAoJICogICB3ZXJlIG5lZWRlZCB0byBiZSBpbmNsdWRlZCBmcm9tIHRoZSByZWdleCBtYXRjaCB0aGF0IHdlcmUgaWdub3JlZCBieSBwcm9jZXNzaW5nIGNvZGUsIGFuZCBzaG91bGQgYmUgcmUtaW5zZXJ0ZWQgaW50byAKCSAqICAgdGhlIHJlcGxhY2VtZW50IHN0cmVhbS4KCSAqIEByZXR1cm4ge0F1dG9saW5rZXIubWF0Y2guTWF0Y2h9IHJldHVybi5tYXRjaCBUaGUgTWF0Y2ggb2JqZWN0IHRoYXQgcmVwcmVzZW50cyB0aGUgbWF0Y2ggdGhhdCB3YXMgZm91bmQuCgkgKi8KCXByb2Nlc3NDYW5kaWRhdGVNYXRjaCA6IGZ1bmN0aW9uKCAKCQltYXRjaFN0ciwgdHdpdHRlck1hdGNoLCB0d2l0dGVySGFuZGxlUHJlZml4V2hpdGVzcGFjZUNoYXIsIHR3aXR0ZXJIYW5kbGUsIAoJCWVtYWlsQWRkcmVzc01hdGNoLCB1cmxNYXRjaCwgcHJvdG9jb2xVcmxNYXRjaCwgd3d3UHJvdG9jb2xSZWxhdGl2ZU1hdGNoLCB0bGRQcm90b2NvbFJlbGF0aXZlTWF0Y2gKCSkgewoJCS8vIE5vdGU6IFRoZSBgbWF0Y2hTdHJgIHZhcmlhYmxlIHdpbCBiZSBmaXhlZCB1cCB0byByZW1vdmUgY2hhcmFjdGVycyB0aGF0IGFyZSBubyBsb25nZXIgbmVlZGVkICh3aGljaCB3aWxsIAoJCS8vIGJlIGFkZGVkIHRvIGBwcmVmaXhTdHJgIGFuZCBgc3VmZml4U3RyYCkuCgkJCgkJdmFyIHByb3RvY29sUmVsYXRpdmVNYXRjaCA9IHd3d1Byb3RvY29sUmVsYXRpdmVNYXRjaCB8fCB0bGRQcm90b2NvbFJlbGF0aXZlTWF0Y2gsCgkJICAgIG1hdGNoLCAgLy8gV2lsbCBiZSBhbiBBdXRvbGlua2VyLm1hdGNoLk1hdGNoIG9iamVjdAoJCSAgICAKCQkgICAgcHJlZml4U3RyID0gIiIsICAgICAgIC8vIEEgc3RyaW5nIHRvIHVzZSB0byBwcmVmaXggdGhlIGFuY2hvciB0YWcgdGhhdCBpcyBjcmVhdGVkLiBUaGlzIGlzIG5lZWRlZCBmb3IgdGhlIFR3aXR0ZXIgaGFuZGxlIG1hdGNoCgkJICAgIHN1ZmZpeFN0ciA9ICIiOyAgICAgICAvLyBBIHN0cmluZyB0byBzdWZmaXggdGhlIGFuY2hvciB0YWcgdGhhdCBpcyBjcmVhdGVkLiBUaGlzIGlzIHVzZWQgaWYgdGhlcmUgaXMgYSB0cmFpbGluZyBwYXJlbnRoZXNpcyB0aGF0IHNob3VsZCBub3QgYmUgYXV0by1saW5rZWQuCgkJICAgIAoJCQoJCS8vIFJldHVybiBvdXQgd2l0aCBgbnVsbGAgZm9yIG1hdGNoIHR5cGVzIHRoYXQgYXJlIGRpc2FibGVkICh1cmwsIGVtYWlsLCB0d2l0dGVyKSwgb3IgZm9yIG1hdGNoZXMgdGhhdCBhcmUgCgkJLy8gaW52YWxpZCAoZmFsc2UgcG9zaXRpdmVzIGZyb20gdGhlIG1hdGNoZXJSZWdleCwgd2hpY2ggY2FuJ3QgdXNlIGxvb2stYmVoaW5kcyBzaW5jZSB0aGV5IGFyZSB1bmF2YWlsYWJsZSBpbiBKUykuCgkJaWYoCgkJCSggdHdpdHRlck1hdGNoICYmICF0aGlzLnR3aXR0ZXIgKSB8fCAoIGVtYWlsQWRkcmVzc01hdGNoICYmICF0aGlzLmVtYWlsICkgfHwgKCB1cmxNYXRjaCAmJiAhdGhpcy51cmxzICkgfHwKCQkJIXRoaXMubWF0Y2hWYWxpZGF0b3IuaXNWYWxpZE1hdGNoKCB1cmxNYXRjaCwgcHJvdG9jb2xVcmxNYXRjaCwgcHJvdG9jb2xSZWxhdGl2ZU1hdGNoICkgCgkJKSB7CgkJCXJldHVybiBudWxsOwoJCX0KCQkKCQkvLyBIYW5kbGUgYSBjbG9zaW5nIHBhcmVudGhlc2lzIGF0IHRoZSBlbmQgb2YgdGhlIG1hdGNoLCBhbmQgZXhjbHVkZSBpdCBpZiB0aGVyZSBpcyBub3QgYSBtYXRjaGluZyBvcGVuIHBhcmVudGhlc2lzCgkJLy8gaW4gdGhlIG1hdGNoIGl0c2VsZi4gCgkJaWYoIHRoaXMubWF0Y2hIYXNVbmJhbGFuY2VkQ2xvc2luZ1BhcmVuKCBtYXRjaFN0ciApICkgewoJCQltYXRjaFN0ciA9IG1hdGNoU3RyLnN1YnN0ciggMCwgbWF0Y2hTdHIubGVuZ3RoIC0gMSApOyAgLy8gcmVtb3ZlIHRoZSB0cmFpbGluZyAiKSIKCQkJc3VmZml4U3RyID0gIikiOyAgLy8gdGhpcyB3aWxsIGJlIGFkZGVkIGFmdGVyIHRoZSBnZW5lcmF0ZWQgPGE+IHRhZwoJCX0KCQkKCQkKCQlpZiggZW1haWxBZGRyZXNzTWF0Y2ggKSB7CgkJCW1hdGNoID0gbmV3IEF1dG9saW5rZXIubWF0Y2guRW1haWwoIHsgbWF0Y2hlZFRleHQ6IG1hdGNoU3RyLCBlbWFpbDogZW1haWxBZGRyZXNzTWF0Y2ggfSApOwoJCQkKCQl9IGVsc2UgaWYoIHR3aXR0ZXJNYXRjaCApIHsKCQkJLy8gZml4IHVwIHRoZSBgbWF0Y2hTdHJgIGlmIHRoZXJlIHdhcyBhIHByZWNlZGluZyB3aGl0ZXNwYWNlIGNoYXIsIHdoaWNoIHdhcyBuZWVkZWQgdG8gZGV0ZXJtaW5lIHRoZSBtYXRjaCAKCQkJLy8gaXRzZWxmIChzaW5jZSB0aGVyZSBhcmUgbm8gbG9vay1iZWhpbmRzIGluIEpTIHJlZ2V4ZXMpCgkJCWlmKCB0d2l0dGVySGFuZGxlUHJlZml4V2hpdGVzcGFjZUNoYXIgKSB7CgkJCQlwcmVmaXhTdHIgPSB0d2l0dGVySGFuZGxlUHJlZml4V2hpdGVzcGFjZUNoYXI7CgkJCQltYXRjaFN0ciA9IG1hdGNoU3RyLnNsaWNlKCAxICk7ICAvLyByZW1vdmUgdGhlIHByZWZpeGVkIHdoaXRlc3BhY2UgY2hhciBmcm9tIHRoZSBtYXRjaAoJCQl9CgkJCW1hdGNoID0gbmV3IEF1dG9saW5rZXIubWF0Y2guVHdpdHRlciggeyBtYXRjaGVkVGV4dDogbWF0Y2hTdHIsIHR3aXR0ZXJIYW5kbGU6IHR3aXR0ZXJIYW5kbGUgfSApOwoJCQkKCQl9IGVsc2UgeyAgLy8gdXJsIG1hdGNoCgkJCS8vIElmIGl0J3MgYSBwcm90b2NvbC1yZWxhdGl2ZSAnLy8nIG1hdGNoLCByZW1vdmUgdGhlIGNoYXJhY3RlciBiZWZvcmUgdGhlICcvLycgKHdoaWNoIHRoZSBtYXRjaGVyUmVnZXggbmVlZGVkCgkJCS8vIHRvIG1hdGNoIGR1ZSB0byB0aGUgbGFjayBvZiBhIG5lZ2F0aXZlIGxvb2stYmVoaW5kIGluIEphdmFTY3JpcHQgcmVndWxhciBleHByZXNzaW9ucykKCQkJaWYoIHByb3RvY29sUmVsYXRpdmVNYXRjaCApIHsKCQkJCXZhciBjaGFyQmVmb3JlTWF0Y2ggPSBwcm90b2NvbFJlbGF0aXZlTWF0Y2gubWF0Y2goIHRoaXMuY2hhckJlZm9yZVByb3RvY29sUmVsTWF0Y2hSZWdleCApWyAxIF0gfHwgIiI7CgkJCQkKCQkJCWlmKCBjaGFyQmVmb3JlTWF0Y2ggKSB7ICAvLyBmaXggdXAgdGhlIGBtYXRjaFN0cmAgaWYgdGhlcmUgd2FzIGEgcHJlY2VkaW5nIGNoYXIgYmVmb3JlIGEgcHJvdG9jb2wtcmVsYXRpdmUgbWF0Y2gsIHdoaWNoIHdhcyBuZWVkZWQgdG8gZGV0ZXJtaW5lIHRoZSBtYXRjaCBpdHNlbGYgKHNpbmNlIHRoZXJlIGFyZSBubyBsb29rLWJlaGluZHMgaW4gSlMgcmVnZXhlcykKCQkJCQlwcmVmaXhTdHIgPSBjaGFyQmVmb3JlTWF0Y2g7CgkJCQkJbWF0Y2hTdHIgPSBtYXRjaFN0ci5zbGljZSggMSApOyAgLy8gcmVtb3ZlIHRoZSBwcmVmaXhlZCBjaGFyIGZyb20gdGhlIG1hdGNoCgkJCQl9CgkJCX0KCQkJCgkJCW1hdGNoID0gbmV3IEF1dG9saW5rZXIubWF0Y2guVXJsKCB7CgkJCQltYXRjaGVkVGV4dCA6IG1hdGNoU3RyLAoJCQkJdXJsIDogbWF0Y2hTdHIsCgkJCQlwcm90b2NvbFVybE1hdGNoIDogISFwcm90b2NvbFVybE1hdGNoLAoJCQkJcHJvdG9jb2xSZWxhdGl2ZU1hdGNoIDogISFwcm90b2NvbFJlbGF0aXZlTWF0Y2gsCgkJCQlzdHJpcFByZWZpeCA6IHRoaXMuc3RyaXBQcmVmaXgKCQkJfSApOwoJCX0KCQkKCQlyZXR1cm4gewoJCQlwcmVmaXhTdHIgOiBwcmVmaXhTdHIsCgkJCXN1ZmZpeFN0ciA6IHN1ZmZpeFN0ciwKCQkJbWF0Y2ggICAgIDogbWF0Y2gKCQl9OwoJfSwKCQoJCgkvKioKCSAqIERldGVybWluZXMgaWYgYSBtYXRjaCBmb3VuZCBoYXMgYW4gdW5tYXRjaGVkIGNsb3NpbmcgcGFyZW50aGVzaXMuIElmIHNvLCB0aGlzIHBhcmVudGhlc2lzIHdpbGwgYmUgcmVtb3ZlZAoJICogZnJvbSB0aGUgbWF0Y2ggaXRzZWxmLCBhbmQgYXBwZW5kZWQgYWZ0ZXIgdGhlIGdlbmVyYXRlZCBhbmNob3IgdGFnIGluIHtAbGluayAjcHJvY2Vzc1RleHROb2RlfS4KCSAqIAoJICogQSBtYXRjaCBtYXkgaGF2ZSBhbiBleHRyYSBjbG9zaW5nIHBhcmVudGhlc2lzIGF0IHRoZSBlbmQgb2YgdGhlIG1hdGNoIGJlY2F1c2UgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBtdXN0IGluY2x1ZGUgcGFyZW50aGVzaXMKCSAqIGZvciBVUkxzIHN1Y2ggYXMgIndpa2lwZWRpYS5jb20vc29tZXRoaW5nXyhkaXNhbWJpZ3VhdGlvbikiLCB3aGljaCBzaG91bGQgYmUgYXV0by1saW5rZWQuIAoJICogCgkgKiBIb3dldmVyLCBhbiBleHRyYSBwYXJlbnRoZXNpcyAqd2lsbCogYmUgaW5jbHVkZWQgd2hlbiB0aGUgVVJMIGl0c2VsZiBpcyB3cmFwcGVkIGluIHBhcmVudGhlc2lzLCBzdWNoIGFzIGluIHRoZSBjYXNlIG9mCgkgKiAiKHdpa2lwZWRpYS5jb20vc29tZXRoaW5nXyhkaXNhbWJpZ3VhdGlvbikpIi4gSW4gdGhpcyBjYXNlLCB0aGUgbGFzdCBjbG9zaW5nIHBhcmVudGhlc2lzIHNob3VsZCAqbm90KiBiZSBwYXJ0IG9mIHRoZSBVUkwgCgkgKiBpdHNlbGYsIGFuZCB0aGlzIG1ldGhvZCB3aWxsIHJldHVybiBgdHJ1ZWAuCgkgKiAKCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge1N0cmluZ30gbWF0Y2hTdHIgVGhlIGZ1bGwgbWF0Y2ggc3RyaW5nIGZyb20gdGhlIHtAbGluayAjbWF0Y2hlclJlZ2V4fS4KCSAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGVyZSBpcyBhbiB1bmJhbGFuY2VkIGNsb3NpbmcgcGFyZW50aGVzaXMgYXQgdGhlIGVuZCBvZiB0aGUgYG1hdGNoU3RyYCwgYGZhbHNlYCBvdGhlcndpc2UuCgkgKi8KCW1hdGNoSGFzVW5iYWxhbmNlZENsb3NpbmdQYXJlbiA6IGZ1bmN0aW9uKCBtYXRjaFN0ciApIHsKCQl2YXIgbGFzdENoYXIgPSBtYXRjaFN0ci5jaGFyQXQoIG1hdGNoU3RyLmxlbmd0aCAtIDEgKTsKCQkKCQlpZiggbGFzdENoYXIgPT09ICcpJyApIHsKCQkJdmFyIG9wZW5QYXJlbnNNYXRjaCA9IG1hdGNoU3RyLm1hdGNoKCAvXCgvZyApLAoJCQkgICAgY2xvc2VQYXJlbnNNYXRjaCA9IG1hdGNoU3RyLm1hdGNoKCAvXCkvZyApLAoJCQkgICAgbnVtT3BlblBhcmVucyA9ICggb3BlblBhcmVuc01hdGNoICYmIG9wZW5QYXJlbnNNYXRjaC5sZW5ndGggKSB8fCAwLAoJCQkgICAgbnVtQ2xvc2VQYXJlbnMgPSAoIGNsb3NlUGFyZW5zTWF0Y2ggJiYgY2xvc2VQYXJlbnNNYXRjaC5sZW5ndGggKSB8fCAwOwoJCQkKCQkJaWYoIG51bU9wZW5QYXJlbnMgPCBudW1DbG9zZVBhcmVucyApIHsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQp9ICk7Ci8qZ2xvYmFsIEF1dG9saW5rZXIgKi8KLypqc2hpbnQgc2NyaXB0dXJsOnRydWUgKi8KLyoqCiAqIEBwcml2YXRlCiAqIEBjbGFzcyBBdXRvbGlua2VyLk1hdGNoVmFsaWRhdG9yCiAqIEBleHRlbmRzIE9iamVjdAogKiAKICogVXNlZCBieSBBdXRvbGlua2VyIHRvIGZpbHRlciBvdXQgZmFsc2UgcG9zaXRpdmVzIGZyb20gdGhlIHtAbGluayBBdXRvbGlua2VyI21hdGNoZXJSZWdleH0uCiAqIAogKiBEdWUgdG8gdGhlIGxpbWl0YXRpb25zIG9mIHJlZ3VsYXIgZXhwcmVzc2lvbnMgKGluY2x1ZGluZyB0aGUgbWlzc2luZyBmZWF0dXJlIG9mIGxvb2stYmVoaW5kcyBpbiBKUyByZWd1bGFyIGV4cHJlc3Npb25zKSwKICogd2UgY2Fubm90IGFsd2F5cyBkZXRlcm1pbmUgdGhlIHZhbGlkaXR5IG9mIGEgZ2l2ZW4gbWF0Y2guIFRoaXMgY2xhc3MgYXBwbGllcyBhIGJpdCBvZiBhZGRpdGlvbmFsIGxvZ2ljIHRvIGZpbHRlciBvdXQgYW55CiAqIGZhbHNlIHBvc2l0aXZlcyB0aGF0IGhhdmUgYmVlbiBtYXRjaGVkIGJ5IHRoZSB7QGxpbmsgQXV0b2xpbmtlciNtYXRjaGVyUmVnZXh9LgogKi8KQXV0b2xpbmtlci5NYXRjaFZhbGlkYXRvciA9IEF1dG9saW5rZXIuVXRpbC5leHRlbmQoIE9iamVjdCwgewoJCgkvKioKCSAqIEBwcml2YXRlCgkgKiBAcHJvcGVydHkge1JlZ0V4cH0gaW52YWxpZFByb3RvY29sUmVsTWF0Y2hSZWdleAoJICogCgkgKiBUaGUgcmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gY2hlY2sgYSBwb3RlbnRpYWwgcHJvdG9jb2wtcmVsYXRpdmUgVVJMIG1hdGNoLCBjb21pbmcgZnJvbSB0aGUgCgkgKiB7QGxpbmsgQXV0b2xpbmtlciNtYXRjaGVyUmVnZXh9LiBBIHByb3RvY29sLXJlbGF0aXZlIFVSTCBpcywgZm9yIGV4YW1wbGUsICIvL3lhaG9vLmNvbSIKCSAqIAoJICogVGhpcyByZWd1bGFyIGV4cHJlc3Npb24gY2hlY2tzIHRvIHNlZSBpZiB0aGVyZSBpcyBhIHdvcmQgY2hhcmFjdGVyIGJlZm9yZSB0aGUgJy8vJyBtYXRjaCBpbiBvcmRlciB0byBkZXRlcm1pbmUgaWYgCgkgKiB3ZSBzaG91bGQgYWN0dWFsbHkgYXV0b2xpbmsgYSBwcm90b2NvbC1yZWxhdGl2ZSBVUkwuIFRoaXMgaXMgbmVlZGVkIGJlY2F1c2UgdGhlcmUgaXMgbm8gbmVnYXRpdmUgbG9vay1iZWhpbmQgaW4gCgkgKiBKYXZhU2NyaXB0IHJlZ3VsYXIgZXhwcmVzc2lvbnMuIAoJICogCgkgKiBGb3IgaW5zdGFuY2UsIHdlIHdhbnQgdG8gYXV0b2xpbmsgc29tZXRoaW5nIGxpa2UgIkdvIHRvOiAvL2dvb2dsZS5jb20iLCBidXQgd2UgZG9uJ3Qgd2FudCB0byBhdXRvbGluayBzb21ldGhpbmcgCgkgKiBsaWtlICJhYmMvL2dvb2dsZS5jb20iCgkgKi8KCWludmFsaWRQcm90b2NvbFJlbE1hdGNoUmVnZXggOiAvXltcd11cL1wvLywKCQoJLyoqCgkgKiBSZWdleCB0byB0ZXN0IGZvciBhIGZ1bGwgcHJvdG9jb2wsIHdpdGggdGhlIHR3byB0cmFpbGluZyBzbGFzaGVzLiBFeDogJ2h0dHA6Ly8nCgkgKiAKCSAqIEBwcml2YXRlCgkgKiBAcHJvcGVydHkge1JlZ0V4cH0gaGFzRnVsbFByb3RvY29sUmVnZXgKCSAqLwoJaGFzRnVsbFByb3RvY29sUmVnZXggOiAvXltBLVphLXpdWy0uK0EtWmEtejAtOV0rOlwvXC8vLAoJCgkvKioKCSAqIFJlZ2V4IHRvIGZpbmQgdGhlIFVSSSBzY2hlbWUsIHN1Y2ggYXMgJ21haWx0bzonLgoJICogCgkgKiBUaGlzIGlzIHVzZWQgdG8gZmlsdGVyIG91dCAnamF2YXNjcmlwdDonIGFuZCAndmJzY3JpcHQ6JyBzY2hlbWVzLgoJICogCgkgKiBAcHJpdmF0ZQoJICogQHByb3BlcnR5IHtSZWdFeHB9IHVyaVNjaGVtZVJlZ2V4CgkgKi8KCXVyaVNjaGVtZVJlZ2V4IDogL15bQS1aYS16XVstLitBLVphLXowLTldKzovLAoJCgkvKioKCSAqIFJlZ2V4IHRvIGRldGVybWluZSBpZiBhdCBsZWFzdCBvbmUgd29yZCBjaGFyIGV4aXN0cyBhZnRlciB0aGUgcHJvdG9jb2wgKGkuZS4gYWZ0ZXIgdGhlICc6JykKCSAqIAoJICogQHByaXZhdGUKCSAqIEBwcm9wZXJ0eSB7UmVnRXhwfSBoYXNXb3JkQ2hhckFmdGVyUHJvdG9jb2xSZWdleAoJICovCgloYXNXb3JkQ2hhckFmdGVyUHJvdG9jb2xSZWdleCA6IC86W15cc10qP1tBLVphLXpdLywKCQoJCgkvKioKCSAqIERldGVybWluZXMgaWYgYSBnaXZlbiBtYXRjaCBmb3VuZCBieSB7QGxpbmsgQXV0b2xpbmtlciNwcm9jZXNzVGV4dE5vZGV9IGlzIHZhbGlkLiBXaWxsIHJldHVybiBgZmFsc2VgIGZvcjoKCSAqIAoJICogMSkgVVJMIG1hdGNoZXMgd2hpY2ggZG8gbm90IGhhdmUgYXQgbGVhc3QgaGF2ZSBvbmUgcGVyaW9kICgnLicpIGluIHRoZSBkb21haW4gbmFtZSAoZWZmZWN0aXZlbHkgc2tpcHBpbmcgb3ZlciAKCSAqICAgIG1hdGNoZXMgbGlrZSAiYWJjOmRlZiIpLiBIb3dldmVyLCBVUkwgbWF0Y2hlcyB3aXRoIGEgcHJvdG9jb2wgd2lsbCBiZSBhbGxvd2VkIChleDogJ2h0dHA6Ly9sb2NhbGhvc3QnKQoJICogMikgVVJMIG1hdGNoZXMgd2hpY2ggZG8gbm90IGhhdmUgYXQgbGVhc3Qgb25lIHdvcmQgY2hhcmFjdGVyIGluIHRoZSBkb21haW4gbmFtZSAoZWZmZWN0aXZlbHkgc2tpcHBpbmcgb3ZlcgoJICogICAgbWF0Y2hlcyBsaWtlICJnaXQ6MS4wIikuCgkgKiAzKSBBIHByb3RvY29sLXJlbGF0aXZlIHVybCBtYXRjaCAoYSBVUkwgYmVnaW5uaW5nIHdpdGggJy8vJykgd2hvc2UgcHJldmlvdXMgY2hhcmFjdGVyIGlzIGEgd29yZCBjaGFyYWN0ZXIgCgkgKiAgICAoZWZmZWN0aXZlbHkgc2tpcHBpbmcgb3ZlciBzdHJpbmdzIGxpa2UgImFiYy8vZ29vZ2xlLmNvbSIpCgkgKiAKCSAqIE90aGVyd2lzZSwgcmV0dXJucyBgdHJ1ZWAuCgkgKiAKCSAqIEBwYXJhbSB7U3RyaW5nfSB1cmxNYXRjaCBUaGUgbWF0Y2hlZCBVUkwsIGlmIHRoZXJlIHdhcyBvbmUuIFdpbGwgYmUgYW4gZW1wdHkgc3RyaW5nIGlmIHRoZSBtYXRjaCBpcyBub3QgYSBVUkwgbWF0Y2guCgkgKiBAcGFyYW0ge1N0cmluZ30gcHJvdG9jb2xVcmxNYXRjaCBUaGUgbWF0Y2ggVVJMIHN0cmluZyBmb3IgYSBwcm90b2NvbCBtYXRjaC4gRXg6ICdodHRwOi8veWFob28uY29tJy4gVGhpcyBpcyB1c2VkIHRvIG1hdGNoCgkgKiAgIHNvbWV0aGluZyBsaWtlICdodHRwOi8vbG9jYWxob3N0Jywgd2hlcmUgd2Ugd29uJ3QgZG91YmxlIGNoZWNrIHRoYXQgdGhlIGRvbWFpbiBuYW1lIGhhcyBhdCBsZWFzdCBvbmUgJy4nIGluIGl0LgoJICogQHBhcmFtIHtTdHJpbmd9IHByb3RvY29sUmVsYXRpdmVNYXRjaCBUaGUgcHJvdG9jb2wtcmVsYXRpdmUgc3RyaW5nIGZvciBhIFVSTCBtYXRjaCAoaS5lLiAnLy8nKSwgcG9zc2libHkgd2l0aCBhIHByZWNlZGluZwoJICogICBjaGFyYWN0ZXIgKGV4LCBhIHNwYWNlLCBzdWNoIGFzOiAnIC8vJywgb3IgYSBsZXR0ZXIsIHN1Y2ggYXM6ICdhLy8nKS4gVGhlIG1hdGNoIGlzIGludmFsaWQgaWYgdGhlcmUgaXMgYSB3b3JkIGNoYXJhY3RlcgoJICogICBwcmVjZWRpbmcgdGhlICcvLycuCgkgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIG1hdGNoIGdpdmVuIGlzIHZhbGlkIGFuZCBzaG91bGQgYmUgcHJvY2Vzc2VkLCBvciBgZmFsc2VgIGlmIHRoZSBtYXRjaCBpcyBpbnZhbGlkIGFuZC9vciAKCSAqICAgc2hvdWxkIGp1c3Qgbm90IGJlIHByb2Nlc3NlZC4KCSAqLwoJaXNWYWxpZE1hdGNoIDogZnVuY3Rpb24oIHVybE1hdGNoLCBwcm90b2NvbFVybE1hdGNoLCBwcm90b2NvbFJlbGF0aXZlTWF0Y2ggKSB7CgkJaWYoCgkJCSggcHJvdG9jb2xVcmxNYXRjaCAmJiAhdGhpcy5pc1ZhbGlkVXJpU2NoZW1lKCBwcm90b2NvbFVybE1hdGNoICkgKSB8fAoJCQl0aGlzLnVybE1hdGNoRG9lc05vdEhhdmVQcm90b2NvbE9yRG90KCB1cmxNYXRjaCwgcHJvdG9jb2xVcmxNYXRjaCApIHx8ICAgICAgIC8vIEF0IGxlYXN0IG9uZSBwZXJpb2QgKCcuJykgbXVzdCBleGlzdCBpbiB0aGUgVVJMIG1hdGNoIGZvciB1cyB0byBjb25zaWRlciBpdCBhbiBhY3R1YWwgVVJMLCAqdW5sZXNzKiBpdCB3YXMgYSBmdWxsIHByb3RvY29sIG1hdGNoIChsaWtlICdodHRwOi8vbG9jYWxob3N0JykKCQkJdGhpcy51cmxNYXRjaERvZXNOb3RIYXZlQXRMZWFzdE9uZVdvcmRDaGFyKCB1cmxNYXRjaCwgcHJvdG9jb2xVcmxNYXRjaCApIHx8ICAvLyBBdCBsZWFzdCBvbmUgbGV0dGVyIGNoYXJhY3RlciBtdXN0IGV4aXN0IGluIHRoZSBkb21haW4gbmFtZSBhZnRlciBhIHByb3RvY29sIG1hdGNoLiBFeDogc2tpcCBvdmVyIHNvbWV0aGluZyBsaWtlICJnaXQ6MS4wIgoJCQl0aGlzLmlzSW52YWxpZFByb3RvY29sUmVsYXRpdmVNYXRjaCggcHJvdG9jb2xSZWxhdGl2ZU1hdGNoICkgICAgICAgICAgICAgICAgIC8vIEEgcHJvdG9jb2wtcmVsYXRpdmUgbWF0Y2ggd2hpY2ggaGFzIGEgd29yZCBjaGFyYWN0ZXIgaW4gZnJvbnQgb2YgaXQgKHNvIHdlIGNhbiBza2lwIHNvbWV0aGluZyBsaWtlICJhYmMvL2dvb2dsZS5jb20iKQoJCSkgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCQoJCXJldHVybiB0cnVlOwoJfSwKCQoJCgkvKioKCSAqIERldGVybWluZXMgaWYgdGhlIFVSSSBzY2hlbWUgaXMgYSB2YWxpZCBzY2hlbWUgdG8gYmUgYXV0b2xpbmtlZC4gUmV0dXJucyBgZmFsc2VgIGlmIHRoZSBzY2hlbWUgaXMgCgkgKiAnamF2YXNjcmlwdDonIG9yICd2YnNjcmlwdDonCgkgKiAKCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge1N0cmluZ30gdXJpU2NoZW1lTWF0Y2ggVGhlIG1hdGNoIFVSTCBzdHJpbmcgZm9yIGEgZnVsbCBVUkkgc2NoZW1lIG1hdGNoLiBFeDogJ2h0dHA6Ly95YWhvby5jb20nIAoJICogICBvciAnbWFpbHRvOmFAYS5jb20nLgoJICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBzY2hlbWUgaXMgYSB2YWxpZCBvbmUsIGBmYWxzZWAgb3RoZXJ3aXNlLgoJICovCglpc1ZhbGlkVXJpU2NoZW1lIDogZnVuY3Rpb24oIHVyaVNjaGVtZU1hdGNoICkgewoJCXZhciB1cmlTY2hlbWUgPSB1cmlTY2hlbWVNYXRjaC5tYXRjaCggdGhpcy51cmlTY2hlbWVSZWdleCApWyAwIF0udG9Mb3dlckNhc2UoKTsKCQkKCQlyZXR1cm4gKCB1cmlTY2hlbWUgIT09ICdqYXZhc2NyaXB0OicgJiYgdXJpU2NoZW1lICE9PSAndmJzY3JpcHQ6JyApOwoJfSwKCQoJCgkvKioKCSAqIERldGVybWluZXMgaWYgYSBVUkwgbWF0Y2ggZG9lcyBub3QgaGF2ZSBlaXRoZXI6CgkgKiAKCSAqIGEpIGEgZnVsbCBwcm90b2NvbCAoaS5lLiAnaHR0cDovLycpLCBvcgoJICogYikgYXQgbGVhc3Qgb25lIGRvdCAoJy4nKSBpbiB0aGUgZG9tYWluIG5hbWUgKGZvciBhIG5vbi1mdWxsLXByb3RvY29sIG1hdGNoKS4KCSAqIAoJICogRWl0aGVyIHNpdHVhdGlvbiBpcyBjb25zaWRlcmVkIGFuIGludmFsaWQgVVJMIChleDogJ2dpdDpkJyBkb2VzIG5vdCBoYXZlIGVpdGhlciB0aGUgJzovLycgcGFydCwgb3IgYXQgbGVhc3Qgb25lIGRvdAoJICogaW4gdGhlIGRvbWFpbiBuYW1lLiBJZiB0aGUgbWF0Y2ggd2FzICdnaXQ6YWJjLmNvbScsIHdlIHdvdWxkIGNvbnNpZGVyIHRoaXMgdmFsaWQuKQoJICogCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IHVybE1hdGNoIFRoZSBtYXRjaGVkIFVSTCwgaWYgdGhlcmUgd2FzIG9uZS4gV2lsbCBiZSBhbiBlbXB0eSBzdHJpbmcgaWYgdGhlIG1hdGNoIGlzIG5vdCBhIFVSTCBtYXRjaC4KCSAqIEBwYXJhbSB7U3RyaW5nfSBwcm90b2NvbFVybE1hdGNoIFRoZSBtYXRjaCBVUkwgc3RyaW5nIGZvciBhIHByb3RvY29sIG1hdGNoLiBFeDogJ2h0dHA6Ly95YWhvby5jb20nLiBUaGlzIGlzIHVzZWQgdG8gbWF0Y2gKCSAqICAgc29tZXRoaW5nIGxpa2UgJ2h0dHA6Ly9sb2NhbGhvc3QnLCB3aGVyZSB3ZSB3b24ndCBkb3VibGUgY2hlY2sgdGhhdCB0aGUgZG9tYWluIG5hbWUgaGFzIGF0IGxlYXN0IG9uZSAnLicgaW4gaXQuCgkgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIFVSTCBtYXRjaCBkb2VzIG5vdCBoYXZlIGEgZnVsbCBwcm90b2NvbCwgb3IgYXQgbGVhc3Qgb25lIGRvdCAoJy4nKSBpbiBhIG5vbi1mdWxsLXByb3RvY29sCgkgKiAgIG1hdGNoLgoJICovCgl1cmxNYXRjaERvZXNOb3RIYXZlUHJvdG9jb2xPckRvdCA6IGZ1bmN0aW9uKCB1cmxNYXRjaCwgcHJvdG9jb2xVcmxNYXRjaCApIHsKCQlyZXR1cm4gKCAhIXVybE1hdGNoICYmICggIXByb3RvY29sVXJsTWF0Y2ggfHwgIXRoaXMuaGFzRnVsbFByb3RvY29sUmVnZXgudGVzdCggcHJvdG9jb2xVcmxNYXRjaCApICkgJiYgdXJsTWF0Y2guaW5kZXhPZiggJy4nICkgPT09IC0xICk7Cgl9LAoJCgkKCS8qKgoJICogRGV0ZXJtaW5lcyBpZiBhIFVSTCBtYXRjaCBkb2VzIG5vdCBoYXZlIGF0IGxlYXN0IG9uZSB3b3JkIGNoYXJhY3RlciBhZnRlciB0aGUgcHJvdG9jb2wgKGkuZS4gaW4gdGhlIGRvbWFpbiBuYW1lKS4KCSAqIAoJICogQXQgbGVhc3Qgb25lIGxldHRlciBjaGFyYWN0ZXIgbXVzdCBleGlzdCBpbiB0aGUgZG9tYWluIG5hbWUgYWZ0ZXIgYSBwcm90b2NvbCBtYXRjaC4gRXg6IHNraXAgb3ZlciBzb21ldGhpbmcgCgkgKiBsaWtlICJnaXQ6MS4wIgoJICogCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IHVybE1hdGNoIFRoZSBtYXRjaGVkIFVSTCwgaWYgdGhlcmUgd2FzIG9uZS4gV2lsbCBiZSBhbiBlbXB0eSBzdHJpbmcgaWYgdGhlIG1hdGNoIGlzIG5vdCBhIFVSTCBtYXRjaC4KCSAqIEBwYXJhbSB7U3RyaW5nfSBwcm90b2NvbFVybE1hdGNoIFRoZSBtYXRjaCBVUkwgc3RyaW5nIGZvciBhIHByb3RvY29sIG1hdGNoLiBFeDogJ2h0dHA6Ly95YWhvby5jb20nLiBUaGlzIGlzIHVzZWQgdG8KCSAqICAga25vdyB3aGV0aGVyIG9yIG5vdCB3ZSBoYXZlIGEgcHJvdG9jb2wgaW4gdGhlIFVSTCBzdHJpbmcsIGluIG9yZGVyIHRvIGNoZWNrIGZvciBhIHdvcmQgY2hhcmFjdGVyIGFmdGVyIHRoZSBwcm90b2NvbAoJICogICBzZXBhcmF0b3IgKCc6JykuCgkgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIFVSTCBtYXRjaCBkb2VzIG5vdCBoYXZlIGF0IGxlYXN0IG9uZSB3b3JkIGNoYXJhY3RlciBpbiBpdCBhZnRlciB0aGUgcHJvdG9jb2wsIGBmYWxzZWAKCSAqICAgb3RoZXJ3aXNlLgoJICovCgl1cmxNYXRjaERvZXNOb3RIYXZlQXRMZWFzdE9uZVdvcmRDaGFyIDogZnVuY3Rpb24oIHVybE1hdGNoLCBwcm90b2NvbFVybE1hdGNoICkgewoJCWlmKCB1cmxNYXRjaCAmJiBwcm90b2NvbFVybE1hdGNoICkgewoJCQlyZXR1cm4gIXRoaXMuaGFzV29yZENoYXJBZnRlclByb3RvY29sUmVnZXgudGVzdCggdXJsTWF0Y2ggKTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfSwKCQoJCgkvKioKCSAqIERldGVybWluZXMgaWYgYSBwcm90b2NvbC1yZWxhdGl2ZSBtYXRjaCBpcyBhbiBpbnZhbGlkIG9uZS4gVGhpcyBtZXRob2QgcmV0dXJucyBgdHJ1ZWAgaWYgdGhlcmUgaXMgYSBgcHJvdG9jb2xSZWxhdGl2ZU1hdGNoYCwKCSAqIGFuZCB0aGF0IG1hdGNoIGNvbnRhaW5zIGEgd29yZCBjaGFyYWN0ZXIgYmVmb3JlIHRoZSAnLy8nIChpLmUuIGl0IG11c3QgY29udGFpbiB3aGl0ZXNwYWNlIG9yIG5vdGhpbmcgYmVmb3JlIHRoZSAnLy8nIGluCgkgKiBvcmRlciB0byBiZSBjb25zaWRlcmVkIHZhbGlkKS4KCSAqIAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7U3RyaW5nfSBwcm90b2NvbFJlbGF0aXZlTWF0Y2ggVGhlIHByb3RvY29sLXJlbGF0aXZlIHN0cmluZyBmb3IgYSBVUkwgbWF0Y2ggKGkuZS4gJy8vJyksIHBvc3NpYmx5IHdpdGggYSBwcmVjZWRpbmcKCSAqICAgY2hhcmFjdGVyIChleCwgYSBzcGFjZSwgc3VjaCBhczogJyAvLycsIG9yIGEgbGV0dGVyLCBzdWNoIGFzOiAnYS8vJykuIFRoZSBtYXRjaCBpcyBpbnZhbGlkIGlmIHRoZXJlIGlzIGEgd29yZCBjaGFyYWN0ZXIKCSAqICAgcHJlY2VkaW5nIHRoZSAnLy8nLgoJICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIGl0IGlzIGFuIGludmFsaWQgcHJvdG9jb2wtcmVsYXRpdmUgbWF0Y2gsIGBmYWxzZWAgb3RoZXJ3aXNlLgoJICovCglpc0ludmFsaWRQcm90b2NvbFJlbGF0aXZlTWF0Y2ggOiBmdW5jdGlvbiggcHJvdG9jb2xSZWxhdGl2ZU1hdGNoICkgewoJCXJldHVybiAoICEhcHJvdG9jb2xSZWxhdGl2ZU1hdGNoICYmIHRoaXMuaW52YWxpZFByb3RvY29sUmVsTWF0Y2hSZWdleC50ZXN0KCBwcm90b2NvbFJlbGF0aXZlTWF0Y2ggKSApOwoJfQoKfSApOwovKmdsb2JhbCBBdXRvbGlua2VyICovCi8qKgogKiBAYWJzdHJhY3QKICogQGNsYXNzIEF1dG9saW5rZXIubWF0Y2guTWF0Y2gKICogCiAqIFJlcHJlc2VudHMgYSBtYXRjaCBmb3VuZCBpbiBhbiBpbnB1dCBzdHJpbmcgd2hpY2ggc2hvdWxkIGJlIEF1dG9saW5rZWQuIEEgTWF0Y2ggb2JqZWN0IGlzIHdoYXQgaXMgcHJvdmlkZWQgaW4gYSAKICoge0BsaW5rIEF1dG9saW5rZXIjcmVwbGFjZUZuIHJlcGxhY2VGbn0sIGFuZCBtYXkgYmUgdXNlZCB0byBxdWVyeSBmb3IgZGV0YWlscyBhYm91dCB0aGUgbWF0Y2guCiAqIAogKiBGb3IgZXhhbXBsZToKICogCiAqICAgICB2YXIgaW5wdXQgPSAiLi4uIjsgIC8vIHN0cmluZyB3aXRoIFVSTHMsIEVtYWlsIEFkZHJlc3NlcywgYW5kIFR3aXR0ZXIgSGFuZGxlcwogKiAgICAgCiAqICAgICB2YXIgbGlua2VkVGV4dCA9IEF1dG9saW5rZXIubGluayggaW5wdXQsIHsKICogICAgICAgICByZXBsYWNlRm4gOiBmdW5jdGlvbiggYXV0b2xpbmtlciwgbWF0Y2ggKSB7CiAqICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAiaHJlZiA9ICIsIG1hdGNoLmdldEFuY2hvckhyZWYoKSApOwogKiAgICAgICAgICAgICBjb25zb2xlLmxvZyggInRleHQgPSAiLCBtYXRjaC5nZXRBbmNob3JUZXh0KCkgKTsKICogICAgICAgICAKICogICAgICAgICAgICAgc3dpdGNoKCBtYXRjaC5nZXRUeXBlKCkgKSB7CiAqICAgICAgICAgICAgICAgICBjYXNlICd1cmwnIDogCiAqICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coICJ1cmw6ICIsIG1hdGNoLmdldFVybCgpICk7CiAqICAgICAgICAgICAgICAgICAgICAgCiAqICAgICAgICAgICAgICAgICBjYXNlICdlbWFpbCcgOgogKiAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAiZW1haWw6ICIsIG1hdGNoLmdldEVtYWlsKCkgKTsKICogICAgICAgICAgICAgICAgICAgICAKICogICAgICAgICAgICAgICAgIGNhc2UgJ3R3aXR0ZXInIDoKICogICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggInR3aXR0ZXI6ICIsIG1hdGNoLmdldFR3aXR0ZXJIYW5kbGUoKSApOwogKiAgICAgICAgICAgICB9CiAqICAgICAgICAgfQogKiAgICAgfSApOwogKiAgICAgCiAqIFNlZSB0aGUge0BsaW5rIEF1dG9saW5rZXJ9IGNsYXNzIGZvciBtb3JlIGRldGFpbHMgb24gdXNpbmcgdGhlIHtAbGluayBBdXRvbGlua2VyI3JlcGxhY2VGbiByZXBsYWNlRm59LgogKi8KQXV0b2xpbmtlci5tYXRjaC5NYXRjaCA9IEF1dG9saW5rZXIuVXRpbC5leHRlbmQoIE9iamVjdCwgewoJCgkvKioKCSAqIEBjZmcge1N0cmluZ30gbWF0Y2hlZFRleHQgKHJlcXVpcmVkKQoJICogCgkgKiBUaGUgb3JpZ2luYWwgdGV4dCB0aGF0IHdhcyBtYXRjaGVkLgoJICovCgkKCQoJLyoqCgkgKiBAY29uc3RydWN0b3IKCSAqIEBwYXJhbSB7T2JqZWN0fSBjZmcgVGhlIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcyBmb3IgdGhlIE1hdGNoIGluc3RhbmNlLCBzcGVjaWZpZWQgaW4gYW4gT2JqZWN0IChtYXApLgoJICovCgljb25zdHJ1Y3RvciA6IGZ1bmN0aW9uKCBjZmcgKSB7CgkJQXV0b2xpbmtlci5VdGlsLmFzc2lnbiggdGhpcywgY2ZnICk7Cgl9LAoKCQoJLyoqCgkgKiBSZXR1cm5zIGEgc3RyaW5nIG5hbWUgZm9yIHRoZSB0eXBlIG9mIG1hdGNoIHRoYXQgdGhpcyBjbGFzcyByZXByZXNlbnRzLgoJICogCgkgKiBAYWJzdHJhY3QKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0VHlwZSA6IEF1dG9saW5rZXIuVXRpbC5hYnN0cmFjdE1ldGhvZCwKCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIG9yaWdpbmFsIHRleHQgdGhhdCB3YXMgbWF0Y2hlZC4KCSAqIAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRNYXRjaGVkVGV4dCA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLm1hdGNoZWRUZXh0OwoJfSwKCQoKCS8qKgoJICogUmV0dXJucyB0aGUgYW5jaG9yIGhyZWYgdGhhdCBzaG91bGQgYmUgZ2VuZXJhdGVkIGZvciB0aGUgbWF0Y2guCgkgKiAKCSAqIEBhYnN0cmFjdAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRBbmNob3JIcmVmIDogQXV0b2xpbmtlci5VdGlsLmFic3RyYWN0TWV0aG9kLAoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgYW5jaG9yIHRleHQgdGhhdCBzaG91bGQgYmUgZ2VuZXJhdGVkIGZvciB0aGUgbWF0Y2guCgkgKiAKCSAqIEBhYnN0cmFjdAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRBbmNob3JUZXh0IDogQXV0b2xpbmtlci5VdGlsLmFic3RyYWN0TWV0aG9kCgp9ICk7Ci8qZ2xvYmFsIEF1dG9saW5rZXIgKi8KLyoqCiAqIEBjbGFzcyBBdXRvbGlua2VyLm1hdGNoLkVtYWlsCiAqIEBleHRlbmRzIEF1dG9saW5rZXIubWF0Y2guTWF0Y2gKICogCiAqIFJlcHJlc2VudHMgYSBFbWFpbCBtYXRjaCBmb3VuZCBpbiBhbiBpbnB1dCBzdHJpbmcgd2hpY2ggc2hvdWxkIGJlIEF1dG9saW5rZWQuCiAqIAogKiBTZWUgdGhpcyBjbGFzcydzIHN1cGVyY2xhc3MgKHtAbGluayBBdXRvbGlua2VyLm1hdGNoLk1hdGNofSkgZm9yIG1vcmUgZGV0YWlscy4KICovCkF1dG9saW5rZXIubWF0Y2guRW1haWwgPSBBdXRvbGlua2VyLlV0aWwuZXh0ZW5kKCBBdXRvbGlua2VyLm1hdGNoLk1hdGNoLCB7CgkKCS8qKgoJICogQGNmZyB7U3RyaW5nfSBlbWFpbCAocmVxdWlyZWQpCgkgKiAKCSAqIFRoZSBlbWFpbCBhZGRyZXNzIHRoYXQgd2FzIG1hdGNoZWQuCgkgKi8KCQoKCS8qKgoJICogUmV0dXJucyBhIHN0cmluZyBuYW1lIGZvciB0aGUgdHlwZSBvZiBtYXRjaCB0aGF0IHRoaXMgY2xhc3MgcmVwcmVzZW50cy4KCSAqIAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRUeXBlIDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuICdlbWFpbCc7Cgl9LAoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgZW1haWwgYWRkcmVzcyB0aGF0IHdhcyBtYXRjaGVkLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldEVtYWlsIDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuZW1haWw7Cgl9LAoJCgoJLyoqCgkgKiBSZXR1cm5zIHRoZSBhbmNob3IgaHJlZiB0aGF0IHNob3VsZCBiZSBnZW5lcmF0ZWQgZm9yIHRoZSBtYXRjaC4KCSAqIAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRBbmNob3JIcmVmIDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuICdtYWlsdG86JyArIHRoaXMuZW1haWw7Cgl9LAoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgYW5jaG9yIHRleHQgdGhhdCBzaG91bGQgYmUgZ2VuZXJhdGVkIGZvciB0aGUgbWF0Y2guCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0QW5jaG9yVGV4dCA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLmVtYWlsOwoJfQoJCn0gKTsKLypnbG9iYWwgQXV0b2xpbmtlciAqLwovKioKICogQGNsYXNzIEF1dG9saW5rZXIubWF0Y2guVHdpdHRlcgogKiBAZXh0ZW5kcyBBdXRvbGlua2VyLm1hdGNoLk1hdGNoCiAqIAogKiBSZXByZXNlbnRzIGEgVHdpdHRlciBtYXRjaCBmb3VuZCBpbiBhbiBpbnB1dCBzdHJpbmcgd2hpY2ggc2hvdWxkIGJlIEF1dG9saW5rZWQuCiAqIAogKiBTZWUgdGhpcyBjbGFzcydzIHN1cGVyY2xhc3MgKHtAbGluayBBdXRvbGlua2VyLm1hdGNoLk1hdGNofSkgZm9yIG1vcmUgZGV0YWlscy4KICovCkF1dG9saW5rZXIubWF0Y2guVHdpdHRlciA9IEF1dG9saW5rZXIuVXRpbC5leHRlbmQoIEF1dG9saW5rZXIubWF0Y2guTWF0Y2gsIHsKCQoJLyoqCgkgKiBAY2ZnIHtTdHJpbmd9IHR3aXR0ZXJIYW5kbGUgKHJlcXVpcmVkKQoJICogCgkgKiBUaGUgVHdpdHRlciBoYW5kbGUgdGhhdCB3YXMgbWF0Y2hlZC4KCSAqLwoJCgoJLyoqCgkgKiBSZXR1cm5zIHRoZSB0eXBlIG9mIG1hdGNoIHRoYXQgdGhpcyBjbGFzcyByZXByZXNlbnRzLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldFR5cGUgOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gJ3R3aXR0ZXInOwoJfSwKCQoJCgkvKioKCSAqIFJldHVybnMgYSBzdHJpbmcgbmFtZSBmb3IgdGhlIHR5cGUgb2YgbWF0Y2ggdGhhdCB0aGlzIGNsYXNzIHJlcHJlc2VudHMuCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0VHdpdHRlckhhbmRsZSA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLnR3aXR0ZXJIYW5kbGU7Cgl9LAoJCgoJLyoqCgkgKiBSZXR1cm5zIHRoZSBhbmNob3IgaHJlZiB0aGF0IHNob3VsZCBiZSBnZW5lcmF0ZWQgZm9yIHRoZSBtYXRjaC4KCSAqIAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRBbmNob3JIcmVmIDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuICdodHRwczovL3R3aXR0ZXIuY29tLycgKyB0aGlzLnR3aXR0ZXJIYW5kbGU7Cgl9LAoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgYW5jaG9yIHRleHQgdGhhdCBzaG91bGQgYmUgZ2VuZXJhdGVkIGZvciB0aGUgbWF0Y2guCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0QW5jaG9yVGV4dCA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiAnQCcgKyB0aGlzLnR3aXR0ZXJIYW5kbGU7Cgl9CgkKfSApOwovKmdsb2JhbCBBdXRvbGlua2VyICovCi8qKgogKiBAY2xhc3MgQXV0b2xpbmtlci5tYXRjaC5VcmwKICogQGV4dGVuZHMgQXV0b2xpbmtlci5tYXRjaC5NYXRjaAogKiAKICogUmVwcmVzZW50cyBhIFVybCBtYXRjaCBmb3VuZCBpbiBhbiBpbnB1dCBzdHJpbmcgd2hpY2ggc2hvdWxkIGJlIEF1dG9saW5rZWQuCiAqIAogKiBTZWUgdGhpcyBjbGFzcydzIHN1cGVyY2xhc3MgKHtAbGluayBBdXRvbGlua2VyLm1hdGNoLk1hdGNofSkgZm9yIG1vcmUgZGV0YWlscy4KICovCkF1dG9saW5rZXIubWF0Y2guVXJsID0gQXV0b2xpbmtlci5VdGlsLmV4dGVuZCggQXV0b2xpbmtlci5tYXRjaC5NYXRjaCwgewoJCgkvKioKCSAqIEBjZmcge1N0cmluZ30gdXJsIChyZXF1aXJlZCkKCSAqIAoJICogVGhlIHVybCB0aGF0IHdhcyBtYXRjaGVkLgoJICovCgkKCS8qKgoJICogQGNmZyB7Qm9vbGVhbn0gcHJvdG9jb2xVcmxNYXRjaCAocmVxdWlyZWQpCgkgKiAKCSAqIGB0cnVlYCBpZiB0aGUgVVJMIGlzIGEgbWF0Y2ggd2hpY2ggYWxyZWFkeSBoYXMgYSBwcm90b2NvbCAoaS5lLiAnaHR0cDovLycpLCBgZmFsc2VgIGlmIHRoZSBtYXRjaCB3YXMgZnJvbSBhICd3d3cnIG9yCgkgKiBrbm93biBUTEQgbWF0Y2guCgkgKi8KCQoJLyoqCgkgKiBAY2ZnIHtCb29sZWFufSBwcm90b2NvbFJlbGF0aXZlTWF0Y2ggKHJlcXVpcmVkKQoJICogCgkgKiBgdHJ1ZWAgaWYgdGhlIFVSTCBpcyBhIHByb3RvY29sLXJlbGF0aXZlIG1hdGNoLiBBIHByb3RvY29sLXJlbGF0aXZlIG1hdGNoIGlzIGEgVVJMIHRoYXQgc3RhcnRzIHdpdGggJy8vJywKCSAqIGFuZCB3aWxsIGJlIGVpdGhlciBodHRwOi8vIG9yIGh0dHBzOi8vIGJhc2VkIG9uIHRoZSBwcm90b2NvbCB0aGF0IHRoZSBzaXRlIGlzIGxvYWRlZCB1bmRlci4KCSAqLwoJCgkvKioKCSAqIEBjZmcge0Jvb2xlYW59IHN0cmlwUHJlZml4IChyZXF1aXJlZCkKCSAqIEBpbmhlcml0ZG9jIEF1dG9saW5rZXIjc3RyaXBQcmVmaXgKCSAqLwoJCgoJLyoqCgkgKiBAcHJpdmF0ZQoJICogQHByb3BlcnR5IHtSZWdFeHB9IHVybFByZWZpeFJlZ2V4CgkgKiAKCSAqIEEgcmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gcmVtb3ZlIHRoZSAnaHR0cDovLycgb3IgJ2h0dHBzOi8vJyBhbmQvb3IgdGhlICd3d3cuJyBmcm9tIFVSTHMuCgkgKi8KCXVybFByZWZpeFJlZ2V4OiAvXihodHRwcz86XC9cLyk/KHd3d1wuKT8vaSwKCQoJLyoqCgkgKiBAcHJpdmF0ZQoJICogQHByb3BlcnR5IHtSZWdFeHB9IHByb3RvY29sUmVsYXRpdmVSZWdleAoJICogCgkgKiBUaGUgcmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gcmVtb3ZlIHRoZSBwcm90b2NvbC1yZWxhdGl2ZSAnLy8nIGZyb20gdGhlIHtAbGluayAjdXJsfSBzdHJpbmcsIGZvciBwdXJwb3NlcwoJICogb2Yge0BsaW5rICNnZXRBbmNob3JUZXh0fS4gQSBwcm90b2NvbC1yZWxhdGl2ZSBVUkwgaXMsIGZvciBleGFtcGxlLCAiLy95YWhvby5jb20iCgkgKi8KCXByb3RvY29sUmVsYXRpdmVSZWdleCA6IC9eXC9cLy8sCgkKCS8qKgoJICogQHByaXZhdGUKCSAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gcHJvdG9jb2xQcmVwZW5kZWQKCSAqIAoJICogV2lsbCBiZSBzZXQgdG8gYHRydWVgIGlmIHRoZSAnaHR0cDovLycgcHJvdG9jb2wgaGFzIGJlZW4gcHJlcGVuZGVkIHRvIHRoZSB7QGxpbmsgI3VybH0gKGJlY2F1c2UgdGhlCgkgKiB7QGxpbmsgI3VybH0gZGlkIG5vdCBoYXZlIGEgcHJvdG9jb2wpCgkgKi8KCXByb3RvY29sUHJlcGVuZGVkIDogZmFsc2UsCgkKCgkvKioKCSAqIFJldHVybnMgYSBzdHJpbmcgbmFtZSBmb3IgdGhlIHR5cGUgb2YgbWF0Y2ggdGhhdCB0aGlzIGNsYXNzIHJlcHJlc2VudHMuCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0VHlwZSA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiAndXJsJzsKCX0sCgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSB1cmwgdGhhdCB3YXMgbWF0Y2hlZCwgYXNzdW1pbmcgdGhlIHByb3RvY29sIHRvIGJlICdodHRwOi8vJyBpZiB0aGUgb3JpZ2luYWwKCSAqIG1hdGNoIHdhcyBtaXNzaW5nIGEgcHJvdG9jb2wuCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0VXJsIDogZnVuY3Rpb24oKSB7CgkJdmFyIHVybCA9IHRoaXMudXJsOwoJCQoJCS8vIGlmIHRoZSB1cmwgc3RyaW5nIGRvZXNuJ3QgYmVnaW4gd2l0aCBhIHByb3RvY29sLCBhc3N1bWUgJ2h0dHA6Ly8nCgkJaWYoICF0aGlzLnByb3RvY29sUmVsYXRpdmVNYXRjaCAmJiAhdGhpcy5wcm90b2NvbFVybE1hdGNoICYmICF0aGlzLnByb3RvY29sUHJlcGVuZGVkICkgewoJCQl1cmwgPSB0aGlzLnVybCA9ICdodHRwOi8vJyArIHVybDsKCQkJCgkJCXRoaXMucHJvdG9jb2xQcmVwZW5kZWQgPSB0cnVlOwoJCX0KCQkKCQlyZXR1cm4gdXJsOwoJfSwKCQoKCS8qKgoJICogUmV0dXJucyB0aGUgYW5jaG9yIGhyZWYgdGhhdCBzaG91bGQgYmUgZ2VuZXJhdGVkIGZvciB0aGUgbWF0Y2guCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0QW5jaG9ySHJlZiA6IGZ1bmN0aW9uKCkgewoJCXZhciB1cmwgPSB0aGlzLmdldFVybCgpOwoJCQoJCXJldHVybiB1cmwucmVwbGFjZSggLyZhbXA7L2csICcmJyApOyAgLy8gYW55ICZhbXA7J3MgaW4gdGhlIFVSTCBzaG91bGQgYmUgY29udmVydGVkIGJhY2sgdG8gJyYnIGlmIHRoZXkgd2VyZSBkaXNwbGF5ZWQgYXMgJmFtcDsgaW4gdGhlIHNvdXJjZSBodG1sIAoJfSwKCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGFuY2hvciB0ZXh0IHRoYXQgc2hvdWxkIGJlIGdlbmVyYXRlZCBmb3IgdGhlIG1hdGNoLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldEFuY2hvclRleHQgOiBmdW5jdGlvbigpIHsKCQl2YXIgYW5jaG9yVGV4dCA9IHRoaXMuZ2V0VXJsKCk7CgkJCgkJaWYoIHRoaXMucHJvdG9jb2xSZWxhdGl2ZU1hdGNoICkgewoJCQkvLyBTdHJpcCBvZmYgYW55IHByb3RvY29sLXJlbGF0aXZlICcvLycgZnJvbSB0aGUgYW5jaG9yIHRleHQKCQkJYW5jaG9yVGV4dCA9IHRoaXMuc3RyaXBQcm90b2NvbFJlbGF0aXZlUHJlZml4KCBhbmNob3JUZXh0ICk7CgkJfQoJCWlmKCB0aGlzLnN0cmlwUHJlZml4ICkgewoJCQlhbmNob3JUZXh0ID0gdGhpcy5zdHJpcFVybFByZWZpeCggYW5jaG9yVGV4dCApOwoJCX0KCQlhbmNob3JUZXh0ID0gdGhpcy5yZW1vdmVUcmFpbGluZ1NsYXNoKCBhbmNob3JUZXh0ICk7ICAvLyByZW1vdmUgdHJhaWxpbmcgc2xhc2gsIGlmIHRoZXJlIGlzIG9uZQoJCQoJCXJldHVybiBhbmNob3JUZXh0OwoJfSwKCQoJCgkvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQoJLy8gVXRpbGl0eSBGdW5jdGlvbmFsaXR5CgkKCS8qKgoJICogU3RyaXBzIHRoZSBVUkwgcHJlZml4IChzdWNoIGFzICJodHRwOi8vIiBvciAiaHR0cHM6Ly8iKSBmcm9tIHRoZSBnaXZlbiB0ZXh0LgoJICogCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGhlIHRleHQgb2YgdGhlIGFuY2hvciB0aGF0IGlzIGJlaW5nIGdlbmVyYXRlZCwgZm9yIHdoaWNoIHRvIHN0cmlwIG9mZiB0aGUKCSAqICAgdXJsIHByZWZpeCAoc3VjaCBhcyBzdHJpcHBpbmcgb2ZmICJodHRwOi8vIikKCSAqIEByZXR1cm4ge1N0cmluZ30gVGhlIGBhbmNob3JUZXh0YCwgd2l0aCB0aGUgcHJlZml4IHN0cmlwcGVkLgoJICovCglzdHJpcFVybFByZWZpeCA6IGZ1bmN0aW9uKCB0ZXh0ICkgewoJCXJldHVybiB0ZXh0LnJlcGxhY2UoIHRoaXMudXJsUHJlZml4UmVnZXgsICcnICk7Cgl9LAoJCgkKCS8qKgoJICogU3RyaXBzIGFueSBwcm90b2NvbC1yZWxhdGl2ZSAnLy8nIGZyb20gdGhlIGFuY2hvciB0ZXh0LgoJICogCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGhlIHRleHQgb2YgdGhlIGFuY2hvciB0aGF0IGlzIGJlaW5nIGdlbmVyYXRlZCwgZm9yIHdoaWNoIHRvIHN0cmlwIG9mZiB0aGUKCSAqICAgcHJvdG9jb2wtcmVsYXRpdmUgcHJlZml4IChzdWNoIGFzIHN0cmlwcGluZyBvZmYgIi8vIikKCSAqIEByZXR1cm4ge1N0cmluZ30gVGhlIGBhbmNob3JUZXh0YCwgd2l0aCB0aGUgcHJvdG9jb2wtcmVsYXRpdmUgcHJlZml4IHN0cmlwcGVkLgoJICovCglzdHJpcFByb3RvY29sUmVsYXRpdmVQcmVmaXggOiBmdW5jdGlvbiggdGV4dCApIHsKCQlyZXR1cm4gdGV4dC5yZXBsYWNlKCB0aGlzLnByb3RvY29sUmVsYXRpdmVSZWdleCwgJycgKTsKCX0sCgkKCQoJLyoqCgkgKiBSZW1vdmVzIGFueSB0cmFpbGluZyBzbGFzaCBmcm9tIHRoZSBnaXZlbiBgYW5jaG9yVGV4dGAsIGluIHByZXBhcmF0aW9uIGZvciB0aGUgdGV4dCB0byBiZSBkaXNwbGF5ZWQuCgkgKiAKCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge1N0cmluZ30gYW5jaG9yVGV4dCBUaGUgdGV4dCBvZiB0aGUgYW5jaG9yIHRoYXQgaXMgYmVpbmcgZ2VuZXJhdGVkLCBmb3Igd2hpY2ggdG8gcmVtb3ZlIGFueSB0cmFpbGluZwoJICogICBzbGFzaCAoJy8nKSB0aGF0IG1heSBleGlzdC4KCSAqIEByZXR1cm4ge1N0cmluZ30gVGhlIGBhbmNob3JUZXh0YCwgd2l0aCB0aGUgdHJhaWxpbmcgc2xhc2ggcmVtb3ZlZC4KCSAqLwoJcmVtb3ZlVHJhaWxpbmdTbGFzaCA6IGZ1bmN0aW9uKCBhbmNob3JUZXh0ICkgewoJCWlmKCBhbmNob3JUZXh0LmNoYXJBdCggYW5jaG9yVGV4dC5sZW5ndGggLSAxICkgPT09ICcvJyApIHsKCQkJYW5jaG9yVGV4dCA9IGFuY2hvclRleHQuc2xpY2UoIDAsIC0xICk7CgkJfQoJCXJldHVybiBhbmNob3JUZXh0OwoJfQoJCn0gKTsKcmV0dXJuIEF1dG9saW5rZXI7Cgp9KSk7Cgp9LHt9XSwiLyI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgoKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi8nKTsKCn0seyIuL2xpYi8iOjE0fV19LHt9LFtdKSgiLyIpCn0pOw==';
</script></html>
