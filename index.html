<!DOCTYPE html>
<html>
<head>
	<!-- TODO: update all of this with game engine/API calls, status icon data-uri -->
	<title>Morpheus Automation</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<link rel="stylesheet" href="index.css" />
	<link rel="icon" href="/quakejs-bnw.png" />
<body class="paused">

</body>
<script async type="application/javascript">
/*! For license information please see jsencrypt.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.JSEncrypt=e():t.JSEncrypt=e()}(window,(function(){return(()=>{"use strict";var t=[,(t,e,i)=>{function r(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function n(t,e){return t&e}function s(t,e){return t|e}function o(t,e){return t^e}function h(t,e){return t&~e}function a(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function u(t){for(var e=0;0!=t;)t&=t-1,++e;return e}i.d(e,{default:()=>nt});var c,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function l(t){var e,i,r="";for(e=0;e+3<=t.length;e+=3)i=parseInt(t.substring(e,e+3),16),r+=f.charAt(i>>6)+f.charAt(63&i);for(e+1==t.length?(i=parseInt(t.substring(e,e+1),16),r+=f.charAt(i<<2)):e+2==t.length&&(i=parseInt(t.substring(e,e+2),16),r+=f.charAt(i>>2)+f.charAt((3&i)<<4));(3&r.length)>0;)r+="=";return r}function p(t){var e,i="",n=0,s=0;for(e=0;e<t.length&&"="!=t.charAt(e);++e){var o=f.indexOf(t.charAt(e));o<0||(0==n?(i+=r(o>>2),s=3&o,n=1):1==n?(i+=r(s<<2|o>>4),s=15&o,n=2):2==n?(i+=r(s),i+=r(o>>2),s=3&o,n=3):(i+=r(s<<2|o>>4),i+=r(15&o),n=0))}return 1==n&&(i+=r(s<<2)),i}var g,d={decode:function(t){var e;if(void 0===g){var i="= \f\n\r\t \u2028\u2029";for(g=Object.create(null),e=0;e<64;++e)g["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)]=e;for(g["-"]=62,g._=63,e=0;e<i.length;++e)g[i.charAt(e)]=-1}var r=[],n=0,s=0;for(e=0;e<t.length;++e){var o=t.charAt(e);if("="==o)break;if(-1!=(o=g[o])){if(void 0===o)throw new Error("Illegal character at offset "+e);n|=o,++s>=4?(r[r.length]=n>>16,r[r.length]=n>>8&255,r[r.length]=255&n,n=0,s=0):n<<=6}}switch(s){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:r[r.length]=n>>10;break;case 3:r[r.length]=n>>16,r[r.length]=n>>8&255}return r},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(t){var e=d.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw new Error("RegExp out of sync");t=e[2]}return d.decode(t)}},v=1e13,m=function(){function t(t){this.buf=[+t||0]}return t.prototype.mulAdd=function(t,e){var i,r,n=this.buf,s=n.length;for(i=0;i<s;++i)(r=n[i]*t+e)<v?e=0:r-=(e=0|r/v)*v,n[i]=r;e>0&&(n[i]=e)},t.prototype.sub=function(t){var e,i,r=this.buf,n=r.length;for(e=0;e<n;++e)(i=r[e]-t)<0?(i+=v,t=1):t=0,r[e]=i;for(;0===r[r.length-1];)r.pop()},t.prototype.toString=function(t){if(10!=(t||10))throw new Error("only base 10 is supported");for(var e=this.buf,i=e[e.length-1].toString(),r=e.length-2;r>=0;--r)i+=(v+e[r]).toString().substring(1);return i},t.prototype.valueOf=function(){for(var t=this.buf,e=0,i=t.length-1;i>=0;--i)e=e*v+t[i];return e},t.prototype.simplify=function(){var t=this.buf;return 1==t.length?t[0]:this},t}(),y=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,b=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function T(t,e){return t.length>e&&(t=t.substring(0,e)+"…"),t}var S,E=function(){function t(e,i){this.hexDigits="0123456789ABCDEF",e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=i)}return t.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw new Error("Requesting byte offset "+t+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(t):this.enc[t]},t.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},t.prototype.hexDump=function(t,e,i){for(var r="",n=t;n<e;++n)if(r+=this.hexByte(this.get(n)),!0!==i)switch(15&n){case 7:r+="  ";break;case 15:r+="\n";break;default:r+=" "}return r},t.prototype.isASCII=function(t,e){for(var i=t;i<e;++i){var r=this.get(i);if(r<32||r>176)return!1}return!0},t.prototype.parseStringISO=function(t,e){for(var i="",r=t;r<e;++r)i+=String.fromCharCode(this.get(r));return i},t.prototype.parseStringUTF=function(t,e){for(var i="",r=t;r<e;){var n=this.get(r++);i+=n<128?String.fromCharCode(n):n>191&&n<224?String.fromCharCode((31&n)<<6|63&this.get(r++)):String.fromCharCode((15&n)<<12|(63&this.get(r++))<<6|63&this.get(r++))}return i},t.prototype.parseStringBMP=function(t,e){for(var i,r,n="",s=t;s<e;)i=this.get(s++),r=this.get(s++),n+=String.fromCharCode(i<<8|r);return n},t.prototype.parseTime=function(t,e,i){var r=this.parseStringISO(t,e),n=(i?y:b).exec(r);return n?(i&&(n[1]=+n[1],n[1]+=+n[1]<70?2e3:1900),r=n[1]+"-"+n[2]+"-"+n[3]+" "+n[4],n[5]&&(r+=":"+n[5],n[6]&&(r+=":"+n[6],n[7]&&(r+="."+n[7]))),n[8]&&(r+=" UTC","Z"!=n[8]&&(r+=n[8],n[9]&&(r+=":"+n[9]))),r):"Unrecognized time: "+r},t.prototype.parseInteger=function(t,e){for(var i,r=this.get(t),n=r>127,s=n?255:0,o="";r==s&&++t<e;)r=this.get(t);if(0==(i=e-t))return n?-1:0;if(i>4){for(o=r,i<<=3;0==(128&(+o^s));)o=+o<<1,--i;o="("+i+" bit)\n"}n&&(r-=256);for(var h=new m(r),a=t+1;a<e;++a)h.mulAdd(256,this.get(a));return o+h.toString()},t.prototype.parseBitString=function(t,e,i){for(var r=this.get(t),n="("+((e-t-1<<3)-r)+" bit)\n",s="",o=t+1;o<e;++o){for(var h=this.get(o),a=o==e-1?r:0,u=7;u>=a;--u)s+=h>>u&1?"1":"0";if(s.length>i)return n+T(s,i)}return n+s},t.prototype.parseOctetString=function(t,e,i){if(this.isASCII(t,e))return T(this.parseStringISO(t,e),i);var r=e-t,n="("+r+" byte)\n";r>(i/=2)&&(e=t+i);for(var s=t;s<e;++s)n+=this.hexByte(this.get(s));return r>i&&(n+="…"),n},t.prototype.parseOID=function(t,e,i){for(var r="",n=new m,s=0,o=t;o<e;++o){var h=this.get(o);if(n.mulAdd(128,127&h),s+=7,!(128&h)){if(""===r)if((n=n.simplify())instanceof m)n.sub(80),r="2."+n.toString();else{var a=n<80?n<40?0:1:2;r=a+"."+(n-40*a)}else r+="."+n.toString();if(r.length>i)return T(r,i);n=new m,s=0}}return s>0&&(r+=".incomplete"),r},t}(),w=function(){function t(t,e,i,r,n){if(!(r instanceof D))throw new Error("Invalid tag value.");this.stream=t,this.header=e,this.length=i,this.tag=r,this.sub=n}return t.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},t.prototype.content=function(t){if(void 0===this.tag)return null;void 0===t&&(t=1/0);var e=this.posContent(),i=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+i,t);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(e)?"false":"true";case 2:return this.stream.parseInteger(e,e+i);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(e,e+i,t);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+i,t);case 6:return this.stream.parseOID(e,e+i,t);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return T(this.stream.parseStringUTF(e,e+i),t);case 18:case 19:case 20:case 21:case 22:case 26:return T(this.stream.parseStringISO(e,e+i),t);case 30:return T(this.stream.parseStringBMP(e,e+i),t);case 23:case 24:return this.stream.parseTime(e,e+i,23==this.tag.tagNumber)}return null},t.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},t.prototype.toPrettyString=function(t){void 0===t&&(t="");var e=t+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(e+="+"),e+=this.length,this.tag.tagConstructed?e+=" (constructed)":!this.tag.isUniversal()||3!=this.tag.tagNumber&&4!=this.tag.tagNumber||null===this.sub||(e+=" (encapsulates)"),e+="\n",null!==this.sub){t+="  ";for(var i=0,r=this.sub.length;i<r;++i)e+=this.sub[i].toPrettyString(t)}return e},t.prototype.posStart=function(){return this.stream.pos},t.prototype.posContent=function(){return this.stream.pos+this.header},t.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},t.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},t.decodeLength=function(t){var e=t.get(),i=127&e;if(i==e)return i;if(i>6)throw new Error("Length over 48 bits not supported at position "+(t.pos-1));if(0===i)return null;e=0;for(var r=0;r<i;++r)e=256*e+t.get();return e},t.prototype.getHexStringValue=function(){var t=this.toHexString(),e=2*this.header,i=2*this.length;return t.substr(e,i)},t.decode=function(e){var i;i=e instanceof E?e:new E(e,0);var r=new E(i),n=new D(i),s=t.decodeLength(i),o=i.pos,h=o-r.pos,a=null,u=function(){var e=[];if(null!==s){for(var r=o+s;i.pos<r;)e[e.length]=t.decode(i);if(i.pos!=r)throw new Error("Content size is not correct for container starting at offset "+o)}else try{for(;;){var n=t.decode(i);if(n.tag.isEOC())break;e[e.length]=n}s=o-i.pos}catch(t){throw new Error("Exception while decoding undefined length content: "+t)}return e};if(n.tagConstructed)a=u();else if(n.isUniversal()&&(3==n.tagNumber||4==n.tagNumber))try{if(3==n.tagNumber&&0!=i.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");a=u();for(var c=0;c<a.length;++c)if(a[c].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(t){a=null}if(null===a){if(null===s)throw new Error("We can't skip over an invalid tag with undefined length at offset "+o);i.pos=o+Math.abs(s)}return new t(r,h,s,n,a)},t}(),D=function(){function t(t){var e=t.get();if(this.tagClass=e>>6,this.tagConstructed=0!=(32&e),this.tagNumber=31&e,31==this.tagNumber){var i=new m;do{e=t.get(),i.mulAdd(128,127&e)}while(128&e);this.tagNumber=i.simplify()}}return t.prototype.isUniversal=function(){return 0===this.tagClass},t.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},t}(),x=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],R=(1<<26)/x[x.length-1],B=function(){function t(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}return t.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,n=(1<<e)-1,s=!1,o="",h=this.t,a=this.DB-h*this.DB%e;if(h-- >0)for(a<this.DB&&(i=this[h]>>a)>0&&(s=!0,o=r(i));h>=0;)a<e?(i=(this[h]&(1<<a)-1)<<e-a,i|=this[--h]>>(a+=this.DB-e)):(i=this[h]>>(a-=e)&n,a<=0&&(a+=this.DB,--h)),i>0&&(s=!0),s&&(o+=r(i));return s?o:"0"},t.prototype.negate=function(){var e=N();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+F(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var i=N();return this.abs().divRemTo(e,null,i),this.s<0&&i.compareTo(t.ZERO)>0&&e.subTo(i,i),i},t.prototype.modPowInt=function(t,e){var i;return i=t<256||e.isEven()?new A(e):new V(e),this.exp(t,i)},t.prototype.clone=function(){var t=N();return this.copyTo(t),t},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},t.prototype.toByteArray=function(){var t=this.t,e=[];e[0]=this.s;var i,r=this.DB-t*this.DB%8,n=0;if(t-- >0)for(r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==n&&(128&this.s)!=(128&i)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e},t.prototype.equals=function(t){return 0==this.compareTo(t)},t.prototype.min=function(t){return this.compareTo(t)<0?this:t},t.prototype.max=function(t){return this.compareTo(t)>0?this:t},t.prototype.and=function(t){var e=N();return this.bitwiseTo(t,n,e),e},t.prototype.or=function(t){var e=N();return this.bitwiseTo(t,s,e),e},t.prototype.xor=function(t){var e=N();return this.bitwiseTo(t,o,e),e},t.prototype.andNot=function(t){var e=N();return this.bitwiseTo(t,h,e),e},t.prototype.not=function(){for(var t=N(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},t.prototype.shiftLeft=function(t){var e=N();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},t.prototype.shiftRight=function(t){var e=N();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},t.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+a(this[t]);return this.s<0?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=u(this[i]^e);return t},t.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},t.prototype.setBit=function(t){return this.changeBit(t,s)},t.prototype.clearBit=function(t){return this.changeBit(t,h)},t.prototype.flipBit=function(t){return this.changeBit(t,o)},t.prototype.add=function(t){var e=N();return this.addTo(t,e),e},t.prototype.subtract=function(t){var e=N();return this.subTo(t,e),e},t.prototype.multiply=function(t){var e=N();return this.multiplyTo(t,e),e},t.prototype.divide=function(t){var e=N();return this.divRemTo(t,e,null),e},t.prototype.remainder=function(t){var e=N();return this.divRemTo(t,null,e),e},t.prototype.divideAndRemainder=function(t){var e=N(),i=N();return this.divRemTo(t,e,i),[e,i]},t.prototype.modPow=function(t,e){var i,r,n=t.bitLength(),s=C(1);if(n<=0)return s;i=n<18?1:n<48?3:n<144?4:n<768?5:6,r=n<8?new A(e):e.isEven()?new I(e):new V(e);var o=[],h=3,a=i-1,u=(1<<i)-1;if(o[1]=r.convert(this),i>1){var c=N();for(r.sqrTo(o[1],c);h<=u;)o[h]=N(),r.mulTo(c,o[h-2],o[h]),h+=2}var f,l,p=t.t-1,g=!0,d=N();for(n=F(t[p])-1;p>=0;){for(n>=a?f=t[p]>>n-a&u:(f=(t[p]&(1<<n+1)-1)<<a-n,p>0&&(f|=t[p-1]>>this.DB+n-a)),h=i;0==(1&f);)f>>=1,--h;if((n-=h)<0&&(n+=this.DB,--p),g)o[f].copyTo(s),g=!1;else{for(;h>1;)r.sqrTo(s,d),r.sqrTo(d,s),h-=2;h>0?r.sqrTo(s,d):(l=s,s=d,d=l),r.mulTo(d,o[f],s)}for(;p>=0&&0==(t[p]&1<<n);)r.sqrTo(s,d),l=s,s=d,d=l,--n<0&&(n=this.DB-1,--p)}return r.revert(s)},t.prototype.modInverse=function(e){var i=e.isEven();if(this.isEven()&&i||0==e.signum())return t.ZERO;for(var r=e.clone(),n=this.clone(),s=C(1),o=C(0),h=C(0),a=C(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),i?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),i?(h.isEven()&&a.isEven()||(h.addTo(this,h),a.subTo(e,a)),h.rShiftTo(1,h)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),i&&s.subTo(h,s),o.subTo(a,o)):(n.subTo(r,n),i&&h.subTo(s,h),a.subTo(o,a))}return 0!=n.compareTo(t.ONE)?t.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},t.prototype.pow=function(t){return this.exp(t,new O)},t.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var r=e;e=i,i=r}var n=e.getLowestSetBit(),s=i.getLowestSetBit();if(s<0)return e;for(n<s&&(s=n),s>0&&(e.rShiftTo(s,e),i.rShiftTo(s,i));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=i.getLowestSetBit())>0&&i.rShiftTo(n,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return s>0&&i.lShiftTo(s,i),i},t.prototype.isProbablePrime=function(t){var e,i=this.abs();if(1==i.t&&i[0]<=x[x.length-1]){for(e=0;e<x.length;++e)if(i[0]==x[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<x.length;){for(var r=x[e],n=e+1;n<x.length&&r<R;)r*=x[n++];for(r=i.modInt(r);e<n;)if(r%x[e++]==0)return!1}return i.millerRabin(t)},t.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},t.prototype.fromString=function(e,i){var r;if(16==i)r=4;else if(8==i)r=3;else if(256==i)r=8;else if(2==i)r=1;else if(32==i)r=5;else{if(4!=i)return void this.fromRadix(e,i);r=2}this.t=0,this.s=0;for(var n=e.length,s=!1,o=0;--n>=0;){var h=8==r?255&+e[n]:H(e,n);h<0?"-"==e.charAt(n)&&(s=!0):(s=!1,0==o?this[this.t++]=h:o+r>this.DB?(this[this.t-1]|=(h&(1<<this.DB-o)-1)<<o,this[this.t++]=h>>this.DB-o):this[this.t-1]|=h<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&+e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},t.prototype.dlShiftTo=function(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s},t.prototype.drShiftTo=function(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s},t.prototype.lShiftTo=function(t,e){for(var i=t%this.DB,r=this.DB-i,n=(1<<r)-1,s=Math.floor(t/this.DB),o=this.s<<i&this.DM,h=this.t-1;h>=0;--h)e[h+s+1]=this[h]>>r|o,o=(this[h]&n)<<i;for(h=s-1;h>=0;--h)e[h]=0;e[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()},t.prototype.rShiftTo=function(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var r=t%this.DB,n=this.DB-r,s=(1<<r)-1;e[0]=this[i]>>r;for(var o=i+1;o<this.t;++o)e[o-i-1]|=(this[o]&s)<<n,e[o-i]=this[o]>>r;r>0&&(e[this.t-i-1]|=(this.s&s)<<n),e.t=this.t-i,e.clamp()}},t.prototype.subTo=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]-t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r-=t[i],e[i++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[i++]=this.DV+r:r>0&&(e[i++]=r),e.t=i,e.clamp()},t.prototype.multiplyTo=function(e,i){var r=this.abs(),n=e.abs(),s=r.t;for(i.t=s+n.t;--s>=0;)i[s]=0;for(s=0;s<n.t;++s)i[s+r.t]=r.am(0,n[s],i,s,0,r.t);i.s=0,i.clamp(),this.s!=e.s&&t.ZERO.subTo(i,i)},t.prototype.squareTo=function(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var r=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,r,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(e,i,r){var n=e.abs();if(!(n.t<=0)){var s=this.abs();if(s.t<n.t)return null!=i&&i.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=N());var o=N(),h=this.s,a=e.s,u=this.DB-F(n[n.t-1]);u>0?(n.lShiftTo(u,o),s.lShiftTo(u,r)):(n.copyTo(o),s.copyTo(r));var c=o.t,f=o[c-1];if(0!=f){var l=f*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),p=this.FV/l,g=(1<<this.F1)/l,d=1<<this.F2,v=r.t,m=v-c,y=null==i?N():i;for(o.dlShiftTo(m,y),r.compareTo(y)>=0&&(r[r.t++]=1,r.subTo(y,r)),t.ONE.dlShiftTo(c,y),y.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--m>=0;){var b=r[--v]==f?this.DM:Math.floor(r[v]*p+(r[v-1]+d)*g);if((r[v]+=o.am(0,b,r,m,0,c))<b)for(o.dlShiftTo(m,y),r.subTo(y,r);r[v]<--b;)r.subTo(y,r)}null!=i&&(r.drShiftTo(c,i),h!=a&&t.ZERO.subTo(i,i)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),h<0&&t.ZERO.subTo(r,r)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(e,i){if(e>4294967295||e<1)return t.ONE;var r=N(),n=N(),s=i.convert(this),o=F(e)-1;for(s.copyTo(r);--o>=0;)if(i.sqrTo(r,n),(e&1<<o)>0)i.mulTo(n,s,r);else{var h=r;r=n,n=h}return i.revert(r)},t.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},t.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),r=C(i),n=N(),s=N(),o="";for(this.divRemTo(r,n,s);n.signum()>0;)o=(i+s.intValue()).toString(t).substr(1)+o,n.divRemTo(r,n,s);return s.intValue().toString(t)+o},t.prototype.fromRadix=function(e,i){this.fromInt(0),null==i&&(i=10);for(var r=this.chunkSize(i),n=Math.pow(i,r),s=!1,o=0,h=0,a=0;a<e.length;++a){var u=H(e,a);u<0?"-"==e.charAt(a)&&0==this.signum()&&(s=!0):(h=i*h+u,++o>=r&&(this.dMultiply(n),this.dAddOffset(h,0),o=0,h=0))}o>0&&(this.dMultiply(Math.pow(i,o)),this.dAddOffset(h,0)),s&&t.ZERO.subTo(this,this)},t.prototype.fromNumber=function(e,i,r){if("number"==typeof i)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),s,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(i);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var n=[],o=7&e;n.length=1+(e>>3),i.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}},t.prototype.bitwiseTo=function(t,e,i){var r,n,s=Math.min(t.t,this.t);for(r=0;r<s;++r)i[r]=e(this[r],t[r]);if(t.t<this.t){for(n=t.s&this.DM,r=s;r<this.t;++r)i[r]=e(this[r],n);i.t=this.t}else{for(n=this.s&this.DM,r=s;r<t.t;++r)i[r]=e(n,t[r]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()},t.prototype.changeBit=function(e,i){var r=t.ONE.shiftLeft(e);return this.bitwiseTo(r,i,r),r},t.prototype.addTo=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]+t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r+=t[i],e[i++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[i++]=r:r<-1&&(e[i++]=this.DV+r),e.t=i,e.clamp()},t.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},t.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},t.prototype.multiplyLowerTo=function(t,e,i){var r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;r>0;)i[--r]=0;for(var n=i.t-this.t;r<n;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(n=Math.min(t.t,e);r<n;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()},t.prototype.multiplyUpperTo=function(t,e,i){--e;var r=i.t=this.t+t.t-e;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)i[this.t+r-e]=this.am(e-r,t[r],i,0,0,this.t+r-e);i.clamp(),i.drShiftTo(1,i)},t.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var r=this.t-1;r>=0;--r)i=(e*i+this[r])%t;return i},t.prototype.millerRabin=function(e){var i=this.subtract(t.ONE),r=i.getLowestSetBit();if(r<=0)return!1;var n=i.shiftRight(r);(e=e+1>>1)>x.length&&(e=x.length);for(var s=N(),o=0;o<e;++o){s.fromInt(x[Math.floor(Math.random()*x.length)]);var h=s.modPow(n,this);if(0!=h.compareTo(t.ONE)&&0!=h.compareTo(i)){for(var a=1;a++<r&&0!=h.compareTo(i);)if(0==(h=h.modPowInt(2,this)).compareTo(t.ONE))return!1;if(0!=h.compareTo(i))return!1}}return!0},t.prototype.square=function(){var t=N();return this.squareTo(t),t},t.prototype.gcda=function(t,e){var i=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(i.compareTo(r)<0){var n=i;i=r,r=n}var s=i.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)e(i);else{s<o&&(o=s),o>0&&(i.rShiftTo(o,i),r.rShiftTo(o,r));var h=function(){(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),i.compareTo(r)>=0?(i.subTo(r,i),i.rShiftTo(1,i)):(r.subTo(i,r),r.rShiftTo(1,r)),i.signum()>0?setTimeout(h,0):(o>0&&r.lShiftTo(o,r),setTimeout((function(){e(r)}),0))};setTimeout(h,10)}},t.prototype.fromNumberAsync=function(e,i,r,n){if("number"==typeof i)if(e<2)this.fromInt(1);else{this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),s,this),this.isEven()&&this.dAddOffset(1,0);var o=this,h=function(){o.dAddOffset(2,0),o.bitLength()>e&&o.subTo(t.ONE.shiftLeft(e-1),o),o.isProbablePrime(i)?setTimeout((function(){n()}),0):setTimeout(h,0)};setTimeout(h,0)}else{var a=[],u=7&e;a.length=1+(e>>3),i.nextBytes(a),u>0?a[0]&=(1<<u)-1:a[0]=0,this.fromString(a,256)}},t}(),O=function(){function t(){}return t.prototype.convert=function(t){return t},t.prototype.revert=function(t){return t},t.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i)},t.prototype.sqrTo=function(t,e){t.squareTo(e)},t}(),A=function(){function t(t){this.m=t}return t.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},t.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),V=function(){function t(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}return t.prototype.convert=function(t){var e=N();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(B.ZERO)>0&&this.m.subTo(e,e),e},t.prototype.revert=function(t){var e=N();return t.copyTo(e),this.reduce(e),e},t.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],r=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),I=function(){function t(t){this.m=t,this.r2=N(),this.q3=N(),B.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t)}return t.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=N();return t.copyTo(e),this.reduce(e),e},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}();function N(){return new B(null)}function P(t,e){return new B(t,e)}var M="undefined"!=typeof navigator;M&&"Microsoft Internet Explorer"==navigator.appName?(B.prototype.am=function(t,e,i,r,n,s){for(var o=32767&e,h=e>>15;--s>=0;){var a=32767&this[t],u=this[t++]>>15,c=h*a+u*o;n=((a=o*a+((32767&c)<<15)+i[r]+(1073741823&n))>>>30)+(c>>>15)+h*u+(n>>>30),i[r++]=1073741823&a}return n},S=30):M&&"Netscape"!=navigator.appName?(B.prototype.am=function(t,e,i,r,n,s){for(;--s>=0;){var o=e*this[t++]+i[r]+n;n=Math.floor(o/67108864),i[r++]=67108863&o}return n},S=26):(B.prototype.am=function(t,e,i,r,n,s){for(var o=16383&e,h=e>>14;--s>=0;){var a=16383&this[t],u=this[t++]>>14,c=h*a+u*o;n=((a=o*a+((16383&c)<<14)+i[r]+n)>>28)+(c>>14)+h*u,i[r++]=268435455&a}return n},S=28),B.prototype.DB=S,B.prototype.DM=(1<<S)-1,B.prototype.DV=1<<S,B.prototype.FV=Math.pow(2,52),B.prototype.F1=52-S,B.prototype.F2=2*S-52;var j,q,L=[];for(j="0".charCodeAt(0),q=0;q<=9;++q)L[j++]=q;for(j="a".charCodeAt(0),q=10;q<36;++q)L[j++]=q;for(j="A".charCodeAt(0),q=10;q<36;++q)L[j++]=q;function H(t,e){var i=L[t.charCodeAt(e)];return null==i?-1:i}function C(t){var e=N();return e.fromInt(t),e}function F(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}B.ZERO=C(0),B.ONE=C(1);var U,K,k=function(){function t(){this.i=0,this.j=0,this.S=[]}return t.prototype.init=function(t){var e,i,r;for(e=0;e<256;++e)this.S[e]=e;for(i=0,e=0;e<256;++e)i=i+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[i],this.S[i]=r;this.i=0,this.j=0},t.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},t}(),_=null;if(null==_){_=[],K=0;var z=void 0;if(window.crypto&&window.crypto.getRandomValues){var Z=new Uint32Array(256);for(window.crypto.getRandomValues(Z),z=0;z<Z.length;++z)_[K++]=255&Z[z]}var G=0,$=function(t){if((G=G||0)>=256||K>=256)window.removeEventListener?window.removeEventListener("mousemove",$,!1):window.detachEvent&&window.detachEvent("onmousemove",$);else try{var e=t.x+t.y;_[K++]=255&e,G+=1}catch(t){}};window.addEventListener?window.addEventListener("mousemove",$,!1):window.attachEvent&&window.attachEvent("onmousemove",$)}function Y(){if(null==U){for(U=new k;K<256;){var t=Math.floor(65536*Math.random());_[K++]=255&t}for(U.init(_),K=0;K<_.length;++K)_[K]=0;K=0}return U.next()}var J=function(){function t(){}return t.prototype.nextBytes=function(t){for(var e=0;e<t.length;++e)t[e]=Y()},t}(),X=function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},t.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),i=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(i)<0;)e=e.add(this.p);return e.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)},t.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=P(t,16),this.e=parseInt(e,16)):console.error("Invalid RSA public key")},t.prototype.encrypt=function(t){var e=this.n.bitLength()+7>>3,i=function(t,e){if(e<t.length+11)return console.error("Message too long for RSA"),null;for(var i=[],r=t.length-1;r>=0&&e>0;){var n=t.charCodeAt(r--);n<128?i[--e]=n:n>127&&n<2048?(i[--e]=63&n|128,i[--e]=n>>6|192):(i[--e]=63&n|128,i[--e]=n>>6&63|128,i[--e]=n>>12|224)}i[--e]=0;for(var s=new J,o=[];e>2;){for(o[0]=0;0==o[0];)s.nextBytes(o);i[--e]=o[0]}return i[--e]=2,i[--e]=0,new B(i)}(t,e);if(null==i)return null;var r=this.doPublic(i);if(null==r)return null;for(var n=r.toString(16),s=n.length,o=0;o<2*e-s;o++)n="0"+n;return n},t.prototype.setPrivate=function(t,e,i){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=P(t,16),this.e=parseInt(e,16),this.d=P(i,16)):console.error("Invalid RSA private key")},t.prototype.setPrivateEx=function(t,e,i,r,n,s,o,h){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=P(t,16),this.e=parseInt(e,16),this.d=P(i,16),this.p=P(r,16),this.q=P(n,16),this.dmp1=P(s,16),this.dmq1=P(o,16),this.coeff=P(h,16)):console.error("Invalid RSA private key")},t.prototype.generate=function(t,e){var i=new J,r=t>>1;this.e=parseInt(e,16);for(var n=new B(e,16);;){for(;this.p=new B(t-r,1,i),0!=this.p.subtract(B.ONE).gcd(n).compareTo(B.ONE)||!this.p.isProbablePrime(10););for(;this.q=new B(r,1,i),0!=this.q.subtract(B.ONE).gcd(n).compareTo(B.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract(B.ONE),h=this.q.subtract(B.ONE),a=o.multiply(h);if(0==a.gcd(n).compareTo(B.ONE)){this.n=this.p.multiply(this.q),this.d=n.modInverse(a),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(h),this.coeff=this.q.modInverse(this.p);break}}},t.prototype.decrypt=function(t){var e=P(t,16),i=this.doPrivate(e);return null==i?null:function(t,e){for(var i=t.toByteArray(),r=0;r<i.length&&0==i[r];)++r;if(i.length-r!=e-1||2!=i[r])return null;for(++r;0!=i[r];)if(++r>=i.length)return null;for(var n="";++r<i.length;){var s=255&i[r];s<128?n+=String.fromCharCode(s):s>191&&s<224?(n+=String.fromCharCode((31&s)<<6|63&i[r+1]),++r):(n+=String.fromCharCode((15&s)<<12|(63&i[r+1])<<6|63&i[r+2]),r+=2)}return n}(i,this.n.bitLength()+7>>3)},t.prototype.generateAsync=function(t,e,i){var r=new J,n=t>>1;this.e=parseInt(e,16);var s=new B(e,16),o=this,h=function(){var e=function(){if(o.p.compareTo(o.q)<=0){var t=o.p;o.p=o.q,o.q=t}var e=o.p.subtract(B.ONE),r=o.q.subtract(B.ONE),n=e.multiply(r);0==n.gcd(s).compareTo(B.ONE)?(o.n=o.p.multiply(o.q),o.d=s.modInverse(n),o.dmp1=o.d.mod(e),o.dmq1=o.d.mod(r),o.coeff=o.q.modInverse(o.p),setTimeout((function(){i()}),0)):setTimeout(h,0)},a=function(){o.q=N(),o.q.fromNumberAsync(n,1,r,(function(){o.q.subtract(B.ONE).gcda(s,(function(t){0==t.compareTo(B.ONE)&&o.q.isProbablePrime(10)?setTimeout(e,0):setTimeout(a,0)}))}))},u=function(){o.p=N(),o.p.fromNumberAsync(t-n,1,r,(function(){o.p.subtract(B.ONE).gcda(s,(function(t){0==t.compareTo(B.ONE)&&o.p.isProbablePrime(10)?setTimeout(a,0):setTimeout(u,0)}))}))};setTimeout(u,0)};setTimeout(h,0)},t.prototype.sign=function(t,e,i){var r=function(t,e){if(e<t.length+22)return console.error("Message too long for RSA"),null;for(var i=e-t.length-6,r="",n=0;n<i;n+=2)r+="ff";return P("0001"+r+"00"+t,16)}((Q[i]||"")+e(t).toString(),this.n.bitLength()/4);if(null==r)return null;var n=this.doPrivate(r);if(null==n)return null;var s=n.toString(16);return 0==(1&s.length)?s:"0"+s},t.prototype.verify=function(t,e,i){var r=P(e,16),n=this.doPublic(r);return null==n?null:function(t){for(var e in Q)if(Q.hasOwnProperty(e)){var i=Q[e],r=i.length;if(t.substr(0,r)==i)return t.substr(r)}return t}(n.toString(16).replace(/^1f+00/,""))==i(t).toString()},t}(),Q={md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"},W={};W.lang={extend:function(t,e,i){if(!e||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var r=function(){};if(r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e),i){var n;for(n in i)t.prototype[n]=i[n];var s=function(){},o=["toString","valueOf"];try{/MSIE/.test(navigator.userAgent)&&(s=function(t,e){for(n=0;n<o.length;n+=1){var i=o[n],r=e[i];"function"==typeof r&&r!=Object.prototype[i]&&(t[i]=r)}})}catch(t){}s(t.prototype,i)}}};var tt={};void 0!==tt.asn1&&tt.asn1||(tt.asn1={}),tt.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var i=e.substr(1).length;i%2==1?i+=1:e.match(/^[0-7]/)||(i+=2);for(var r="",n=0;n<i;n++)r+="f";e=new B(r,16).xor(t).add(B.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return hextopem(t,e)},this.newObject=function(t){var e=tt.asn1,i=e.DERBoolean,r=e.DERInteger,n=e.DERBitString,s=e.DEROctetString,o=e.DERNull,h=e.DERObjectIdentifier,a=e.DEREnumerated,u=e.DERUTF8String,c=e.DERNumericString,f=e.DERPrintableString,l=e.DERTeletexString,p=e.DERIA5String,g=e.DERUTCTime,d=e.DERGeneralizedTime,v=e.DERSequence,m=e.DERSet,y=e.DERTaggedObject,b=e.ASN1Util.newObject,T=Object.keys(t);if(1!=T.length)throw"key of param shall be only one.";var S=T[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+S+":"))throw"undefined key: "+S;if("bool"==S)return new i(t[S]);if("int"==S)return new r(t[S]);if("bitstr"==S)return new n(t[S]);if("octstr"==S)return new s(t[S]);if("null"==S)return new o(t[S]);if("oid"==S)return new h(t[S]);if("enum"==S)return new a(t[S]);if("utf8str"==S)return new u(t[S]);if("numstr"==S)return new c(t[S]);if("prnstr"==S)return new f(t[S]);if("telstr"==S)return new l(t[S]);if("ia5str"==S)return new p(t[S]);if("utctime"==S)return new g(t[S]);if("gentime"==S)return new d(t[S]);if("seq"==S){for(var E=t[S],w=[],D=0;D<E.length;D++){var x=b(E[D]);w.push(x)}return new v({array:w})}if("set"==S){for(E=t[S],w=[],D=0;D<E.length;D++)x=b(E[D]),w.push(x);return new m({array:w})}if("tag"==S){var R=t[S];if("[object Array]"===Object.prototype.toString.call(R)&&3==R.length){var B=b(R[2]);return new y({tag:R[0],explicit:R[1],obj:B})}var O={};if(void 0!==R.explicit&&(O.explicit=R.explicit),void 0!==R.tag&&(O.tag=R.tag),void 0===R.obj)throw"obj shall be specified for 'tag'.";return O.obj=b(R.obj),new y(O)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},tt.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",i=parseInt(t.substr(0,2),16),r=(e=Math.floor(i/40)+"."+i%40,""),n=2;n<t.length;n+=2){var s=("00000000"+parseInt(t.substr(n,2),16).toString(2)).slice(-8);r+=s.substr(1,7),"0"==s.substr(0,1)&&(e=e+"."+new B(r,2).toString(10),r="")}return e},tt.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},i=function(t){var i="",r=new B(t,10).toString(2),n=7-r.length%7;7==n&&(n=0);for(var s="",o=0;o<n;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var h=r.substr(o,7);o!=r.length-7&&(h="1"+h),i+=e(parseInt(h,2))}return i};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",n=t.split("."),s=40*parseInt(n[0])+parseInt(n[1]);r+=e(s),n.splice(0,2);for(var o=0;o<n.length;o++)r+=i(n[o]);return r},tt.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var i=e.length/2;if(i>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+i).toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},tt.asn1.DERAbstractString=function(t){tt.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(this.s)},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},W.lang.extend(tt.asn1.DERAbstractString,tt.asn1.ASN1Object),tt.asn1.DERAbstractTime=function(t){tt.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.formatDate=function(t,e,i){var r=this.zeroPadding,n=this.localDateToUTC(t),s=String(n.getFullYear());"utc"==e&&(s=s.substr(2,2));var o=s+r(String(n.getMonth()+1),2)+r(String(n.getDate()),2)+r(String(n.getHours()),2)+r(String(n.getMinutes()),2)+r(String(n.getSeconds()),2);if(!0===i){var h=n.getMilliseconds();if(0!=h){var a=r(String(h),3);o=o+"."+(a=a.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(t)},this.setByDateValue=function(t,e,i,r,n,s){var o=new Date(Date.UTC(t,e-1,i,r,n,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},W.lang.extend(tt.asn1.DERAbstractTime,tt.asn1.ASN1Object),tt.asn1.DERAbstractStructured=function(t){tt.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},W.lang.extend(tt.asn1.DERAbstractStructured,tt.asn1.ASN1Object),tt.asn1.DERBoolean=function(){tt.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},W.lang.extend(tt.asn1.DERBoolean,tt.asn1.ASN1Object),tt.asn1.DERInteger=function(t){tt.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=tt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new B(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},W.lang.extend(tt.asn1.DERInteger,tt.asn1.ASN1Object),tt.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=tt.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}tt.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var i="0"+t;this.hTLV=null,this.isModified=!0,this.hV=i+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var i=0;i<=e;i++)t+="0";var r="";for(i=0;i<t.length-1;i+=8){var n=t.substr(i,8),s=parseInt(n,2).toString(16);1==s.length&&(s="0"+s),r+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+e+r},this.setByBooleanArray=function(t){for(var e="",i=0;i<t.length;i++)1==t[i]?e+="1":e+="0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},W.lang.extend(tt.asn1.DERBitString,tt.asn1.ASN1Object),tt.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=tt.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}tt.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},W.lang.extend(tt.asn1.DEROctetString,tt.asn1.DERAbstractString),tt.asn1.DERNull=function(){tt.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},W.lang.extend(tt.asn1.DERNull,tt.asn1.ASN1Object),tt.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},i=function(t){var i="",r=new B(t,10).toString(2),n=7-r.length%7;7==n&&(n=0);for(var s="",o=0;o<n;o++)s+="0";for(r=s+r,o=0;o<r.length-1;o+=7){var h=r.substr(o,7);o!=r.length-7&&(h="1"+h),i+=e(parseInt(h,2))}return i};tt.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",n=t.split("."),s=40*parseInt(n[0])+parseInt(n[1]);r+=e(s),n.splice(0,2);for(var o=0;o<n.length;o++)r+=i(n[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var e=tt.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},W.lang.extend(tt.asn1.DERObjectIdentifier,tt.asn1.ASN1Object),tt.asn1.DEREnumerated=function(t){tt.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=tt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new B(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},W.lang.extend(tt.asn1.DEREnumerated,tt.asn1.ASN1Object),tt.asn1.DERUTF8String=function(t){tt.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},W.lang.extend(tt.asn1.DERUTF8String,tt.asn1.DERAbstractString),tt.asn1.DERNumericString=function(t){tt.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},W.lang.extend(tt.asn1.DERNumericString,tt.asn1.DERAbstractString),tt.asn1.DERPrintableString=function(t){tt.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},W.lang.extend(tt.asn1.DERPrintableString,tt.asn1.DERAbstractString),tt.asn1.DERTeletexString=function(t){tt.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},W.lang.extend(tt.asn1.DERTeletexString,tt.asn1.DERAbstractString),tt.asn1.DERIA5String=function(t){tt.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},W.lang.extend(tt.asn1.DERIA5String,tt.asn1.DERAbstractString),tt.asn1.DERUTCTime=function(t){tt.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},W.lang.extend(tt.asn1.DERUTCTime,tt.asn1.DERAbstractTime),tt.asn1.DERGeneralizedTime=function(t){tt.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},W.lang.extend(tt.asn1.DERGeneralizedTime,tt.asn1.DERAbstractTime),tt.asn1.DERSequence=function(t){tt.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++)t+=this.asn1Array[e].getEncodedHex();return this.hV=t,this.hV}},W.lang.extend(tt.asn1.DERSequence,tt.asn1.DERAbstractStructured),tt.asn1.DERSet=function(t){tt.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var i=this.asn1Array[e];t.push(i.getEncodedHex())}return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},W.lang.extend(tt.asn1.DERSet,tt.asn1.DERAbstractStructured),tt.asn1.DERTaggedObject=function(t){tt.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,i){this.hT=e,this.isExplicit=t,this.asn1Object=i,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=i.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.tag&&(this.hT=t.tag),void 0!==t.explicit&&(this.isExplicit=t.explicit),void 0!==t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},W.lang.extend(tt.asn1.DERTaggedObject,tt.asn1.ASN1Object);var et,it=(et=function(t,e){return(et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}et(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),rt=function(t){function e(i){var r=t.call(this)||this;return i&&("string"==typeof i?r.parseKey(i):(e.hasPrivateKeyProperty(i)||e.hasPublicKeyProperty(i))&&r.parsePropertiesFrom(i)),r}return it(e,t),e.prototype.parseKey=function(t){try{var e=0,i=0,r=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(t)?function(t){var e;if(void 0===c){var i="0123456789ABCDEF",r=" \f\n\r\t \u2028\u2029";for(c={},e=0;e<16;++e)c[i.charAt(e)]=e;for(i=i.toLowerCase(),e=10;e<16;++e)c[i.charAt(e)]=e;for(e=0;e<r.length;++e)c[r.charAt(e)]=-1}var n=[],s=0,o=0;for(e=0;e<t.length;++e){var h=t.charAt(e);if("="==h)break;if(-1!=(h=c[h])){if(void 0===h)throw new Error("Illegal character at offset "+e);s|=h,++o>=2?(n[n.length]=s,s=0,o=0):s<<=4}}if(o)throw new Error("Hex encoding incomplete: 4 bits missing");return n}(t):d.unarmor(t),n=w.decode(r);if(3===n.sub.length&&(n=n.sub[2].sub[0]),9===n.sub.length){e=n.sub[1].getHexStringValue(),this.n=P(e,16),i=n.sub[2].getHexStringValue(),this.e=parseInt(i,16);var s=n.sub[3].getHexStringValue();this.d=P(s,16);var o=n.sub[4].getHexStringValue();this.p=P(o,16);var h=n.sub[5].getHexStringValue();this.q=P(h,16);var a=n.sub[6].getHexStringValue();this.dmp1=P(a,16);var u=n.sub[7].getHexStringValue();this.dmq1=P(u,16);var f=n.sub[8].getHexStringValue();this.coeff=P(f,16)}else{if(2!==n.sub.length)return!1;var l=n.sub[1].sub[0];e=l.sub[0].getHexStringValue(),this.n=P(e,16),i=l.sub[1].getHexStringValue(),this.e=parseInt(i,16)}return!0}catch(t){return!1}},e.prototype.getPrivateBaseKey=function(){var t={array:[new tt.asn1.DERInteger({int:0}),new tt.asn1.DERInteger({bigint:this.n}),new tt.asn1.DERInteger({int:this.e}),new tt.asn1.DERInteger({bigint:this.d}),new tt.asn1.DERInteger({bigint:this.p}),new tt.asn1.DERInteger({bigint:this.q}),new tt.asn1.DERInteger({bigint:this.dmp1}),new tt.asn1.DERInteger({bigint:this.dmq1}),new tt.asn1.DERInteger({bigint:this.coeff})]};return new tt.asn1.DERSequence(t).getEncodedHex()},e.prototype.getPrivateBaseKeyB64=function(){return l(this.getPrivateBaseKey())},e.prototype.getPublicBaseKey=function(){var t=new tt.asn1.DERSequence({array:[new tt.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new tt.asn1.DERNull]}),e=new tt.asn1.DERSequence({array:[new tt.asn1.DERInteger({bigint:this.n}),new tt.asn1.DERInteger({int:this.e})]}),i=new tt.asn1.DERBitString({hex:"00"+e.getEncodedHex()});return new tt.asn1.DERSequence({array:[t,i]}).getEncodedHex()},e.prototype.getPublicBaseKeyB64=function(){return l(this.getPublicBaseKey())},e.wordwrap=function(t,e){if(!t)return t;var i="(.{1,"+(e=e||64)+"})( +|$\n?)|(.{1,"+e+"})";return t.match(RegExp(i,"g")).join("\n")},e.prototype.getPrivateKey=function(){var t="-----BEGIN RSA PRIVATE KEY-----\n";return(t+=e.wordwrap(this.getPrivateBaseKeyB64())+"\n")+"-----END RSA PRIVATE KEY-----"},e.prototype.getPublicKey=function(){var t="-----BEGIN PUBLIC KEY-----\n";return(t+=e.wordwrap(this.getPublicBaseKeyB64())+"\n")+"-----END PUBLIC KEY-----"},e.hasPublicKeyProperty=function(t){return(t=t||{}).hasOwnProperty("n")&&t.hasOwnProperty("e")},e.hasPrivateKeyProperty=function(t){return(t=t||{}).hasOwnProperty("n")&&t.hasOwnProperty("e")&&t.hasOwnProperty("d")&&t.hasOwnProperty("p")&&t.hasOwnProperty("q")&&t.hasOwnProperty("dmp1")&&t.hasOwnProperty("dmq1")&&t.hasOwnProperty("coeff")},e.prototype.parsePropertiesFrom=function(t){this.n=t.n,this.e=t.e,t.hasOwnProperty("d")&&(this.d=t.d,this.p=t.p,this.q=t.q,this.dmp1=t.dmp1,this.dmq1=t.dmq1,this.coeff=t.coeff)},e}(X);const nt=function(){function t(t){void 0===t&&(t={}),t=t||{},this.default_key_size=t.default_key_size?parseInt(t.default_key_size,10):1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null}return t.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new rt(t)},t.prototype.setPrivateKey=function(t){this.setKey(t)},t.prototype.setPublicKey=function(t){this.setKey(t)},t.prototype.decrypt=function(t){try{return this.getKey().decrypt(p(t))}catch(t){return!1}},t.prototype.encrypt=function(t){try{return l(this.getKey().encrypt(t))}catch(t){return!1}},t.prototype.sign=function(t,e,i){try{return l(this.getKey().sign(t,e,i))}catch(t){return!1}},t.prototype.verify=function(t,e,i){try{return this.getKey().verify(t,p(e),i)}catch(t){return!1}},t.prototype.getKey=function(t){if(!this.key){if(this.key=new rt,t&&"[object Function]"==={}.toString.call(t))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,t);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},t.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},t.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},t.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},t.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},t.version="3.2.1",t}()}],e={d:(t,i)=>{for(var r in i)e.o(i,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},i={};return t[1](0,i,e),i.default})()}));


// SOURCE: https://stackoverflow.com/questions/18279141/javascript-string-encryption-and-decryption

const crypt = (salt, text) => {
  const textToChars = (text) => text.split("").map((c) => c.charCodeAt(0));
  const byteHex = (n) => ("0" + Number(n).toString(16)).substr(-2);
  const applySaltToChar = (code) => textToChars(salt).reduce((a, b) => a ^ b, code);

  return text
    .split("")
    .map(textToChars)
    .map(applySaltToChar)
    .map(byteHex)
    .join("");
};

const decrypt = (salt, encoded) => {
  const textToChars = (text) => text.split("").map((c) => c.charCodeAt(0));
  const applySaltToChar = (code) => textToChars(salt).reduce((a, b) => a ^ b, code);
  return encoded
    .match(/.{1,2}/g)
    .map((hex) => parseInt(hex, 16))
    .map(applySaltToChar)
    .map((charCode) => String.fromCharCode(charCode))
    .join("");
};

//     keymaster.js
//     (c) 2011-2013 Thomas Fuchs
//     keymaster.js may be freely distributed under the MIT license.

;(function(global){
  var k,
    _handlers = {},
    _mods = { 16: false, 18: false, 17: false, 91: false },
    _scope = 'all',
    // modifier keys
    _MODIFIERS = {
      '⇧': 16, shift: 16,
      '⌥': 18, alt: 18, option: 18,
      '⌃': 17, ctrl: 17, control: 17,
      '⌘': 91, command: 91
    },
    // special keys
    _MAP = {
      backspace: 8, tab: 9, clear: 12,
      enter: 13, 'return': 13,
      esc: 27, escape: 27, space: 32,
      left: 37, up: 38,
      right: 39, down: 40,
      del: 46, 'delete': 46,
      home: 36, end: 35,
      pageup: 33, pagedown: 34,
      ',': 188, '.': 190, '/': 191,
      '`': 192, '-': 189, '=': 187,
      ';': 186, '\'': 222,
      '[': 219, ']': 221, '\\': 220
    },
    code = function(x){
      return _MAP[x] || x.toUpperCase().charCodeAt(0);
    },
    _downKeys = [];

  for(k=1;k<20;k++) _MAP['f'+k] = 111+k;

  // IE doesn't support Array#indexOf, so have a simple replacement
  function index(array, item){
    var i = array.length;
    while(i--) if(array[i]===item) return i;
    return -1;
  }

  // for comparing mods before unassignment
  function compareArray(a1, a2) {
    if (a1.length != a2.length) return false;
    for (var i = 0; i < a1.length; i++) {
        if (a1[i] !== a2[i]) return false;
    }
    return true;
  }

  var modifierMap = {
      16:'shiftKey',
      18:'altKey',
      17:'ctrlKey',
      91:'metaKey'
  };
  function updateModifierKey(event) {
      for(k in _mods) _mods[k] = event[modifierMap[k]];
  };

  // handle keydown event
  function dispatch(event) {
    var key, handler, k, i, modifiersMatch, scope;
    key = event.keyCode;

    if (index(_downKeys, key) == -1) {
        _downKeys.push(key);
    }

    // if a modifier key, set the key.<modifierkeyname> property to true and return
    if(key == 93 || key == 224) key = 91; // right command on webkit, command on Gecko
    if(key in _mods) {
      _mods[key] = true;
      // 'assignKey' from inside this closure is exported to window.key
      for(k in _MODIFIERS) if(_MODIFIERS[k] == key) assignKey[k] = true;
      return;
    }
    updateModifierKey(event);

    // see if we need to ignore the keypress (filter() can can be overridden)
    // by default ignore key presses if a select, textarea, or input is focused
    if(!assignKey.filter.call(this, event)) return;

    // abort if no potentially matching shortcuts found
    if (!(key in _handlers)) return;

    scope = getScope();

    // for each potential shortcut
    for (i = 0; i < _handlers[key].length; i++) {
      handler = _handlers[key][i];

      // see if it's in the current scope
      if(handler.scope == scope || handler.scope == 'all'){
        // check if modifiers match if any
        modifiersMatch = handler.mods.length > 0;
        for(k in _mods)
          if((!_mods[k] && index(handler.mods, +k) > -1) ||
            (_mods[k] && index(handler.mods, +k) == -1)) modifiersMatch = false;
        // call the handler and stop the event if neccessary
        if((handler.mods.length == 0 && !_mods[16] && !_mods[18] && !_mods[17] && !_mods[91]) || modifiersMatch){
          if(handler.method(event, handler)===false){
            if(event.preventDefault) event.preventDefault();
              else event.returnValue = false;
            if(event.stopPropagation) event.stopPropagation();
            if(event.cancelBubble) event.cancelBubble = true;
          }
        }
      }
    }
  };

  // unset modifier keys on keyup
  function clearModifier(event){
    var key = event.keyCode, k,
        i = index(_downKeys, key);

    // remove key from _downKeys
    if (i >= 0) {
        _downKeys.splice(i, 1);
    }

    if(key == 93 || key == 224) key = 91;
    if(key in _mods) {
      _mods[key] = false;
      for(k in _MODIFIERS) if(_MODIFIERS[k] == key) assignKey[k] = false;
    }
  };

  function resetModifiers() {
    for(k in _mods) _mods[k] = false;
    for(k in _MODIFIERS) assignKey[k] = false;
  };

  // parse and assign shortcut
  function assignKey(key, scope, method){
    var keys, mods;
    keys = getKeys(key);
    if (method === undefined) {
      method = scope;
      scope = 'all';
    }

    // for each shortcut
    for (var i = 0; i < keys.length; i++) {
      // set modifier keys if any
      mods = [];
      key = keys[i].split('+');
      if (key.length > 1){
        mods = getMods(key);
        key = [key[key.length-1]];
      }
      // convert to keycode and...
      key = key[0]
      key = code(key);
      // ...store handler
      if (!(key in _handlers)) _handlers[key] = [];
      _handlers[key].push({ shortcut: keys[i], scope: scope, method: method, key: keys[i], mods: mods });
    }
  };

  // unbind all handlers for given key in current scope
  function unbindKey(key, scope) {
    var multipleKeys, keys,
      mods = [],
      i, j, obj;

    multipleKeys = getKeys(key);

    for (j = 0; j < multipleKeys.length; j++) {
      keys = multipleKeys[j].split('+');

      if (keys.length > 1) {
        mods = getMods(keys);
      }

      key = keys[keys.length - 1];
      key = code(key);

      if (scope === undefined) {
        scope = getScope();
      }
      if (!_handlers[key]) {
        return;
      }
      for (i = 0; i < _handlers[key].length; i++) {
        obj = _handlers[key][i];
        // only clear handlers if correct scope and mods match
        if (obj.scope === scope && compareArray(obj.mods, mods)) {
          _handlers[key][i] = {};
        }
      }
    }
  };

  // Returns true if the key with code 'keyCode' is currently down
  // Converts strings into key codes.
  function isPressed(keyCode) {
      if (typeof(keyCode)=='string') {
        keyCode = code(keyCode);
      }
      return index(_downKeys, keyCode) != -1;
  }

  function getPressedKeyCodes() {
      return _downKeys.slice(0);
  }

  function filter(event){
    var tagName = (event.target || event.srcElement).tagName;
    // ignore keypressed in any elements that support keyboard data input
    return !(tagName == 'INPUT' || tagName == 'SELECT' || tagName == 'TEXTAREA');
  }

  // initialize key.<modifier> to false
  for(k in _MODIFIERS) assignKey[k] = false;

  // set current scope (default 'all')
  function setScope(scope){ _scope = scope || 'all' };
  function getScope(){ return _scope || 'all' };

  // delete all handlers for a given scope
  function deleteScope(scope){
    var key, handlers, i;

    for (key in _handlers) {
      handlers = _handlers[key];
      for (i = 0; i < handlers.length; ) {
        if (handlers[i].scope === scope) handlers.splice(i, 1);
        else i++;
      }
    }
  };

  // abstract key logic for assign and unassign
  function getKeys(key) {
    var keys;
    key = key.replace(/\s/g, '');
    keys = key.split(',');
    if ((keys[keys.length - 1]) == '') {
      keys[keys.length - 2] += ',';
    }
    return keys;
  }

  // abstract mods logic for assign and unassign
  function getMods(key) {
    var mods = key.slice(0, key.length - 1);
    for (var mi = 0; mi < mods.length; mi++)
    mods[mi] = _MODIFIERS[mods[mi]];
    return mods;
  }

  // cross-browser events
  function addEvent(object, event, method) {
    if (object.addEventListener)
      object.addEventListener(event, method, false);
    else if(object.attachEvent)
      object.attachEvent('on'+event, function(){ method(window.event) });
  };

  // set the handlers globally on document
  addEvent(document, 'keydown', function(event) { dispatch(event) }); // Passing _scope to a callback to ensure it remains the same by execution. Fixes #48
  addEvent(document, 'keyup', clearModifier);

  // reset modifiers to false whenever the window is (re)focused.
  addEvent(window, 'focus', resetModifiers);

  // store previously defined key
  var previousKey = global.key;

  // restore previously defined key and return reference to our key object
  function noConflict() {
    var k = global.key;
    global.key = previousKey;
    return k;
  }

  // set window.key and window.key.set/get/deleteScope, and the default filter
  global.key = assignKey;
  global.key.setScope = setScope;
  global.key.getScope = getScope;
  global.key.deleteScope = deleteScope;
  global.key.filter = filter;
  global.key.isPressed = isPressed;
  global.key.getPressedKeyCodes = getPressedKeyCodes;
  global.key.noConflict = noConflict;
  global.key.unbind = unbindKey;

  if(typeof module !== 'undefined') module.exports = assignKey;

})(this);
// ALL THAT MAKEFILE WORK JUST SO I FEEL ORGANIZED ENOUGH TO EXPAND.


// need to improve file list
//   need to render a list of widgets for section collapsing
// tables of contents should sort by entity type and alphabetically or locationally
//   need (depth, title, sort-key)
// entity list should group map entities in separate
//   .map files then use build system and a few transoforms
//   to compile .bsp
// unzip .zip files automatically and list contents in tree
// TODO: add alternate image views so same control can be used for
//   listing textures later
// decode Makefile and highlight the file with the commands being run
// file list always shows sized, especially on folders

// TODO: probably some game engine display




const FILE_WIDGETS = [
	['Documentation', showDocument, renderDocument],
	['Local Storage', listFiles, renderFile],
	['Call Stack', callStack, renderFunc],
	['Cookies', cookieList, renderCookie],
	['Threads', threadPool, renderThread],
	['Interactions', interactionsList, renderInteractions],
];

function anyParentsCollapsed(segments) {
	if(!ACE.filescollapsed) {
		return
	}
	return segments.slice(0, -1)
		.reduce(function (p, s, i) { 
			return p + ACE.filescollapsed[
				segments.slice(0, i + 1).join('/')]
		}, 0)
}



function simplifyMilliseconds(milli) {
	let secs = milli / 1000.0
	let mins = secs / 60.0
	let hours = mins / 60.0
	let days = hours / 24.0
	if(days > 1) {
		return Math.round(days, 1) + 'd'
	} else
	if(hours > 1) {
		return Math.round(hours, 1) + 'h'
	}
	else
	if(mins > 1) {
		return Math.round(hours, 1) + 'm'
	}
	else
	if(secs > 1) {
		return Math.round(hours, 1) + 's'
	} else {
		return milli + 'ms'
	}
}


function showDocument() {
	if(!ACE.documentation) {
		return []
	}
	let currentDoc = ACE.bubbleFile
			.replace('library/', 'library/docs/')
			.replace('.js', '.md')
			
	if(ACE.documentation.includes(currentDoc)) {
		return [currentDoc.replace(/\//g, '_')]
	}
	return []
}


function listFiles() {
	let newFiles = Object.keys(FS.virtual)
	let startLength = newFiles.length

	// put folder collapse hidden at top
	for(let i = 0; i < startLength; i++) {
		let segments = newFiles[i].split('/')
			.map(function (seg, i, arr) {
				return arr.slice(0, i + 1).join('/') 
			})
		// ADD MISSING PATHS FROM ENGINE TO FILE 
		//   LIST SO WE DON'T LOSE FILES IN DATABASE
		//   FROM MISSING LINKS. TODO: FSCHKDSK TOOL, WTF?
		newFiles.push.apply(newFiles, segments)
	}

	// sort and unique
	newFiles = newFiles.sort().filter(function (f, i, arr) { 
		return f && arr.indexOf(f) == i
	})
	return newFiles
}


function callStack() {
	let newFiles = []
	if(!ACE.callStack) {
		return newFiles
	}
	return newFiles.concat(ACE.callStack)
}


function cookieList() {
	if(!ACE.cookiesList) {
		return []
	}
	return Object.keys(ACE.cookiesList)
		.map(function (key) {
			return key + ': ' + ACE.cookiesList[key]
		})
}



function renderInteractions(link, item, path) {
	let dialogs = document.getElementsByClassName('dialog')
	for(let i = 0; i < dialogs.length; i++) {
		if(dialogs[i].getAttribute('aria-id') == path) {
			let title = dialogs[i].getElementsByTagName('h2')[0]
			item.className = 'interaction'
			if(title) {
				if(link.innerText != title.innerText)
					link.innerText = title.innerText
			} else {
				if(link.innerText != dialogs[i].innerText.substr(0, 100))
					link.innerText = dialogs[i].innerText.substr(0, 100)
			}
			if(dialogs[i].parentElement !== item) {
				item.appendChild(dialogs[i])
			}
			break
		}
	}
}


function interactionsList() {
	if(!ACE.interactions) {
		return []
	}
	return ACE.interactions
		.map(function (dialog) {
			return dialog.getAttribute('aria-id')
		})
}


function threadPool() {
	if(!ACE.threadPool) {
		return []
	}
	return ACE.threadPool
		.map(function (thread) {
			return simplifyMilliseconds(Date.now() - thread[1]) + ': ' + thread[0]
		})
}


function updateFilelist(filepath) {
	if(typeof ACE == 'undefined') {
		return
	}
	if(!ACE.fileList) {
		ACE.fileList = document.getElementById('file-list')
	}
	if(!ACE.fileList) {
		ACE.fileList = document.createElement('DIV')
		ACE.fileList.id = 'file-list'
		document.body.append(ACE.fileList)
		ACE.fileList.appendChild(document.createElement('OL'))
	}
	ACE.filestimer = null
	if(!ACE.filetypes) {
		ACE.filetypes = {}
	}
	// SLIGHTLY MORE EXPANDABLE
	ACE.filelistWidgets = []
	ACE.filelistWidgetRows = []
	let newFiles = []
	for(let i = 0; i < FILE_WIDGETS.length; i++) {
		// TODO: if(!filepath) continue
		ACE.filelistWidgets[newFiles.length] = FILE_WIDGETS[i]
		ACE.filelistWidgetRows.push(newFiles.length)
		newFiles.push(FILE_WIDGETS[i][0])
		newFiles = newFiles.concat(FILE_WIDGETS[i][1]())
	}
	ACE.filelistWidgetRows.sort()

	if(ACE.fileslist) {
		let prevCollapse = ACE.filescollapsed
		// save expand/collapse state even if files are added or removed
		ACE.filescollapsed = newFiles.reduce(function (obj, i) {
			let isTopLevel = i.split('/').length == 1
			if(prevCollapse.hasOwnProperty(i)) {
				obj[i] = prevCollapse[i]
			} else {
				obj[i] = i.split('/').length > 1 ? 0 : 1
			}
			// MAINTAIN THIS VISIBILITY INDEX SO USER 
			//   INTERACTION CAN BE VERY SPECIFIC AND FAST
			ACE.filesvisible[i] = isTopLevel
					|| !anyParentsCollapsed(i.split('/'))
			return obj
		}, {})
	} else {
		ACE.filesvisible = {} // I CAN DO THIS ALL DAY
		//   TODO: CHECK V8 USES HASH TABLES OR IF PHP IS FASTER
		ACE.filescollapsed = newFiles.reduce(
			function (obj, i) {
				let isTopLevel = i.split('/').length == 1
				obj[i] = isTopLevel ? 1 : 0
				ACE.filesvisible[i] = isTopLevel
				return obj
			}, {})
	}

	ACE.fileslist = newFiles
	ACE.filescount = Object.values(ACE.filesvisible)
			.reduce(function (p, i) { return p + i }, 0)
	ACE.filesmoved = true
	if(typeof Com_Frame == 'undefined') {
		SYS.frameInterval = setInterval(function () {
			renderFilelist()
		}, 100)
	}

}

function isDirectory(i) {
	// only folder paths and directories are collapsible,
	//   missing paths added seperately above
	//   HENCE THE CHECK FOR !FS.virtual[files[j]]
	return !FS.virtual[i] || FS.virtual[i].mode == FS_DIR
}





function toggleCollapse(row, dataRow) {
	if(!ACE.filescollapsed) {
		return
	}
	let collapse = !ACE.filescollapsed[dataRow]
	ACE.filescollapsed[dataRow] = collapse
	for(let i = row; i < ACE.fileslist.length; i++) {
		if(ACE.fileslist[i].substring(0, dataRow.length)
			.localeCompare(dataRow)) {
			break // no more files under this sorted folder
		}
		// don't make the row we clicked on invisible
		if(ACE.fileslist[i].localeCompare(dataRow) !== 0) {
			ACE.filesvisible[ACE.fileslist[i]] = !anyParentsCollapsed(ACE.fileslist[i].split('/'))
		} else {
			continue // don't count self?
		}
		if(!collapse) {
			ACE.filescount++
		} else {
			ACE.filescount--
		}
	}
	ACE.filesmoved = true
}



function doFileClick(evt) {
	if(!evt.target) {
		return
	}
  let gamedir = addressToString(FS_GetCurrentGameDir())
	let row = evt.target.getAttribute('aria-id') // WTF?
	let dataRow = ACE.fileslist[row]
	if(FS.virtual[dataRow]
		&& FS.virtual[dataRow].mode != FS_DIR) {
		Cbuf_AddText(stringToAddress(
				'edit "' + dataRow.replace(gamedir + '/', '') + '"\n'))
		return
	}
	toggleCollapse(row, dataRow)
}


function getWidgetAtRow(row) {
	let count = 0
	do {
		if(ACE.filelistWidgetRows[count] == row) {
			return ACE.filelistWidgets[row]
		}
		count++
	} while (count < ACE.filelistWidgetRows.length
		&& ACE.filelistWidgetRows[count] <= row)
}

function getWidgetBeforeRow(row) {
	let count = 0
	let widget
	do {
		if(ACE.filelistWidgetRows[count] <= row) {
			widget = ACE.filelistWidgets[row]
		}
		count++
	} while (count < ACE.filelistWidgetRows.length
		&& ACE.filelistWidgetRows[count] <= row)
	return widget
}


function renderFile(link, item, path) {
	let segments = path.split('/')
	if(link.innerText != segments.slice(-1)[0]) {
	 	link.innerText = segments.slice(-1)[0]
	}
	link.style.backgroundPosition = ((segments.length - 1) * 20 + 10) + 'px 50%'
	if(item.classList.contains('filelist-widget'))
		item.classList.remove('filelist-widget')
	link.style.paddingLeft = (segments.length * 20 + 20) + 'px'
	if(isDirectory(path)) {
		if(!item.classList.contains('folder'))
			item.classList.add('folder')
		if(!ACE.filescollapsed[path] && !item.classList.contains('open'))
			item.classList.add('open')
		if(ACE.filescollapsed[path] && item.classList.contains('open'))
			item.classList.remove('open')
		if(item.classList.contains('file'))
			item.classList.remove('file')
	} else {
		if(item.className != 'file')
			item.className = 'file'
		if(item.classList.contains('folder'))
			item.classList.remove('folder')
	}

}


function renderDocument(link, item, path) {
	for(let i = 0; i < ACE.documentation.length; i++) {
		let replacedName = ACE.documentation[i]
			.replace('.js', '.md')
			.replace(/\//g, '_')
		if(replacedName != path) {
			continue
		}
		if(!ACE.sidebarStyle) {
			Promise.resolve(sendMessage({
				script: 'return readFile("library/styles/sidebar.css");\n'
			}).then(function (response) {
				ACE.sidebarStyle = document.createElement('STYLE')
				ACE.sidebarStyle.innerText = response
				document.body.insertBefore(ACE.sidebarStyle, ACE.fileList)
			}))
		}

		Promise.resolve(sendMessage({
			script: 'return renderMarkdown("' + ACE.documentation[i] + '");\n'
		}).then(function (response) {
			if(response) {
				let newDialog = document.createElement('DIV')
				newDialog.id = 'documentation'
				newDialog.innerHTML = response
				item.appendChild(newDialog)
			}
		}))
	}
	
}


function renderWidget(link, item, path) {
	if(link.innerText != path) { // otherwise annoying flash in element page
		link.innerText = path
	}
	link.style.paddingLeft = '10px'
	if(!item.classList.contains('filelist-widget'))
		item.classList.add('filelist-widget')
	if(!ACE.filescollapsed[path] && !item.classList.contains('open'))
		item.classList.add('open')
	if(ACE.filescollapsed[path] && item.classList.contains('open'))
		item.classList.remove('open')
	if(item.classList.contains('folder'))
		item.classList.remove('folder')
	if(item.classList.contains('file'))
		item.classList.remove('file')

}


function renderFunc(link, item, path) {
	if(link.innerText != path) { // otherwise annoying flash in element page
		link.style.paddingLeft = '10px'
		link.style.backgroundPosition = '10px 50%'
		link.innerText = path
	}
	item.className = ''
}


function renderCookie(link, item, path) {
	if(link.innerText != path) { // otherwise annoying flash in element page
		link.style.paddingLeft = '10px'
		link.style.backgroundPosition = '10px 50%'
		link.innerText = path
	}
	item.className = ''
}


function renderThread(link, item, path) {
	if(link.innerText != path) { // otherwise annoying flash in element page
		link.style.paddingLeft = '10px'
		link.style.backgroundPosition = '10px 50%'
		link.innerText = path
	}
	item.className = ''
}




// DO THE SAME KIND OF VIRTUAL RENDERING TECHNIQUE ACE USES ON CODE,
//   AND APPLY IT TO THE FILE LIST IN CASE THERE'S EVER LIKE, 10,000
//   THAT MIGHT BE TOO MUCH FOR A PAGE. BOOKMARKS, FOR EXAMPLE?
// TODO: FANCY STUFF LIKE VS CODE EXTENSIONS LIST, GITHUB ACTIONS LEFT HAND LIST,
//   SHOW FILE-GHOST TARGETS BEFORE MAKEFILE CREATES THEM USING SYNTAX ANALYSIS
//   LIKE MACOS DOES IN FINDER WHEN YOU GO TO COPY A FILE OR SOMETHING IS 
//   UPLOADING TO ICLOUD.
function renderFilelist() {
	if(!ACE.fileList) {
		updateFilelist()
		if(!ACE.fileList) {
			return
		}
	}
	let lineHeight = 21
	if(typeof window.ace != 'undefined'
			&& typeof window.ace.renderer != 'undefined') {
		lineHeight = ace.renderer.lineHeight
	}

	// GENERATE THIS LIST ON BACKEND USING VIRTUAL DOM, CSS CONTROL OVER LIST WILL
	//   LOOK THE SAME
	let actualList = ACE.fileList.getElementsByTagName('ol')[0]
	if(!actualList) {
		return
	}
	let newHeight = ACE.filescount * lineHeight
	if(actualList.clientHeight != newHeight)
		actualList.style.height = newHeight + 'px'

	let virtualLineCount = Math.min(Math.ceil(
		ACE.fileList.clientHeight / lineHeight)
				, ACE.filescount) // min, updated on interaction

	// THIS IS WRONG, STARTING ON VISIBLE LINES LIST
	//   NOT ALL OF FILES. BUT WAIT, IF THEY SCROLLED IT
	//   CERTAINLY CAN'T DISPLAY LINES BEFORE THEIR SCROLL
	//   EVEN IF THEY ARE COLLAPSED OR NOT.
	let startLine = Math.floor(
		ACE.fileList.scrollTop / lineHeight)
	let displayCount = 0

	let renderFunction = getWidgetBeforeRow(startLine)[2]
	let widget

	for(
		let j = startLine; // small efficiency gain?
		displayCount < virtualLineCount && j < ACE.fileslist.length;
		j++
	) {
		if(!ACE.filesvisible[ACE.fileslist[j]]) {
			continue
		}
		// SWITCHING BETWEEN IDE AND SOURCE TREE TO COPY SHIT CODE I 
		//   WROTE LAST NIGHT. I REALIZED VS CODE DOES THIS BLAME FEATURE
		//   BUT IT'S DISTRACTING, BOTH VIEWS OF CHANGES ARE SMALL AND 
		//   INCONVENIENT, BEYOND COMPARE IS BEYOND COMPARE. WHAT IF THERE
		//   WAS A TAB AT THE TOP I COULD SWITCH TO, TO SEE SOURCE COMPARE?
		let item
		let link

		if(displayCount == actualList.children.length) {
			item = document.createElement('LI')
			actualList.appendChild(item)
			link = document.createElement('A')
			link.onclick = doFileClick
			item.appendChild(link)
		} else {
			item = actualList.children[displayCount]
			link = item.children[0]
		}
		// TODO: SHOW SEPERATED DIRECTORIES IN ONE LINE LIKE VISUAL STUDIO CODE DOES
		//   GITHUB ALSO DOES IT FOR FOLDERS THAT ONLY HAVE 1 PATH
		if(ACE.filesmoved) {
			link.setAttribute('aria-id', j) // WTF WAS THIS CRAP???
			if((widget = getWidgetAtRow(j))) {
				renderFunction = widget[2]
				renderWidget(link, item, ACE.fileslist[j])
			} else {
				renderFunction(link, item, ACE.fileslist[j])
			}
			item.style.display = 'block'
		}
		displayCount++
	}
	if(ACE.filesmoved) {
		for(let i = displayCount; i < actualList.children.length; i++) {
			actualList.children[i].style.display = 'none'
		}
	}
	ACE.filesmoved = false
}


/*

	// extract basename from zip path
	basename = strrchr( zipfile, PATH_SEP );
	if ( basename == NULL ) {
		basename = zipfile;
	} else {
		basename++;
	}

	fileNameLen = (int) strlen( zipfile ) + 1;
	baseNameLen = (int) strlen( basename ) + 1;

	uf = unzOpen( zipfile );
	err = unzGetGlobalInfo( uf, &gi );

	if ( err != UNZ_OK ) {
		return NULL;
	}

	namelen = 0;
	filecount = 0;
	unzGoToFirstFile( uf );
	for (i = 0; i < gi.number_entry; i++)
	{
		err = unzGetCurrentFileInfo(uf, &file_info, filename_inzip, sizeof(filename_inzip), NULL, 0, NULL, 0);
		filename_inzip[sizeof(filename_inzip)-1] = '\0';
		if (err != UNZ_OK) {
			break;
		}
		// Z_DEFLATED
		if ( file_info.compression_method != 0 && file_info.compression_method != 8  ) {
			Com_Printf( S_COLOR_YELLOW "%s|%s: unsupported compression method %i\n", basename, filename_inzip, (int)file_info.compression_method );
			unzGoToNextFile( uf );
			continue;
		}
		namelen += strlen( filename_inzip ) + 1;
		unzGoToNextFile( uf );
		filecount++;
	}

	if ( filecount == 0 ) {
		unzClose( uf );
		return NULL;
	}
*/



// conversions for accessing pages

const NAMED_FUNCTION = /function\s+([a-z]+[ -~]*)\s*\(/
const EXTENSION_ID = 'lnglmljjcpnpahmfpnfjkgjgmjhegihd';
const EXTENSION_VERSION = '1.0'
const RGBA_REGEX = /rgba?\(([^\)]*)\)/
const FADE_DURATION = 300.0
const FLASH_DURATION = 700.0


// TODO: add information collection _accessors here


// TODO: add utilities from selenium for using Xpath


// TODO: add eye-dropper element selector here

function runBlock(start) {
	if(document.body.className.includes('running')
		|| document.body.className.includes('starting')
		|| document.body.className.includes('paused')) {
		ace.focus()
		return
	}

	document.body.classList.add('starting')

	if(start === -1) {
		sendMessage({
			script: window.ace.getValue()
				.replace(/\s*$/, '') + '\nreturn main();',
			line: ace.session.getLength()
		})
	} else {
		let funcName = NAMED_FUNCTION.exec(
				ace.env.document.getLine(start))[1]
		sendMessage({
			script: ace.session.getLines(start, ACE.lastLine)
				.join('\n').replace(/\s*$/, '') 
				+ '\nreturn ' + funcName + '();\n',
			line: ace.session.getFoldWidgetRange(start).end.row
		})
	}
	ace.focus()
}


function collectForm(dialog) {
	let responseId = dialog.getAttribute('aria-id')
	let formResults = {}
	debugger
	return formResults
}


function doSendForm(reply, dialog, event) {
	let formResults
	let responseId = dialog.getAttribute('aria-id')
	if(event.target && event.target.tagName == 'BUTTON') {
		// SINK!
		return reply({
			responseId: responseId,
			result: formResults
		})
	} else
	if(event.target === dialog
		|| !(formResults = collectForm(dialog))) {
		dialog.style.display = 'none'
		let dialogI = ACE.interactions.indexOf(dialog)
		if(dialogI > -1) {
			ACE.interactions.splice(dialogI, 1)
			updateFilelist('Interactions')
		}
		return reply({
			responseId: responseId
		})
	} else {
	}
}


// TODO: create a drop surface since the game 
//   and editor might interfere



// WHY DO THIS DIALOG FORM CRAP? HASN'T THIS BEEN DONE 1000X OVER
//   BY WORDPRESS? IN THIS CASE, THERE'S A SPECIFIC PURPOSE.
//   IN CASE A MORPHEUS SCRIPT NEEDS INTERVENTION LIKE CAPTCHA
//   WE CAN PHARM OUT THE CAPTCHA FORMS USING A STANDARD UI
//   NO ONE WILL KNOW IF THEY ARE ENTERING A CAPTCHA FOR THEIR
//   OWN LOGIN, OR IF THEY ENTERED IT WRONG AND ARE ENTERING 
//   SOMEONE ELSE'S CAPTCHA BECAUSE THEY AREN'T PRESENT, ATM.
//   RECAPTCHA WAS A STUPID SOLUTION, WE SHOULD HAVE MADE BOT-
//   NETS PUBLIC AND VOLNUTEER A LONG TIME AGO. MY INDUSTRY
//   HAS FAILED TO CAPITALIZE.
// TODO: BRING BACK EULA FOR QUAKE 3 DEMO FOR PUBLIC RELEASE
//   THAT WAY THEY HAVE TO ENTER A KEY TO PLAY THE WHOLE GAME
//   I CAN'T BE ACCUSED OF STEALING IF IT'S THE DEMO PRESENTED
//   WITH THE SAME AGREEMENT AS ON DESKTOP. I THOUGHT THERE WAS
//   AND IN GAME Y/N KEY FOR ACCEPTING EULA? CHECK FOR EULA.TXT
// TODO: call this code for engine system errors Sys_Dialog()
// TODO: NOT REALLY SURE HOW CHROME PROTECTS PASSWORD FIELDS AGAINST
//   MEMORY ATTACKS

// TODO: move all of this to libs so we can affect interaction on other pages
function mergeHTML(request) {
	// INTERESTING, THIS NEIGHBOR WAS TALKING ABOUT CHANGING
	//   NAMES AND PASSING VAIRABLES AROUND AND MAKING MESS,
	//   HE UNDID THE MESS AND THE WHOLE SYSTEM RUNS FASTER.

	// OKAY, THIS IS WHERE THE WHOLE INNERHTML FROM FRONTEND.JS THING
	//   GETS REALLY STUPID. FRONTEND.JS WON'T LET ME INSERT HTML
	//   INTO ANY PAGE FROM AN ARBITRARY STRING. SO I PARSE IT AS XML
	//   SEND IT AS A TREE, AND MERGE IT USING STANDARD DOCUMENT.CREATELEMENT CALLS
	// ABSOLUTELY RIDICULOUS, BUT THIS IS WHAT IT TAKES FOR MY TO CONTROL MY
	//   OWN PERSONAL EXPERIENCE ON THE WEB. THANK YOU DECLARATIVE NET REQUESTS.
	

	return newDialog
}



function showDialog(dialog, request) {
  let newDialog = document.getElementById(request.accessor)
	if(!newDialog) {
		newDialog = document.createElement('DIV')
		document.body.appendChild(newDialog)
	}
	newDialog.setAttribute('aria-id', request.responseId)
	newDialog.onclick = doSendForm.bind(newDialog, reply, newDialog)
  mergeHTML(dialog, newDialog)
  
	// IMPORTANT: prevents inputs from display in game
	INPUT.editorActive = true
	let input = newDialog.getElementsByTagName('input')[0]
	if(!input) {
		input = newDialog.getElementsByTagName('button')[0]
	}
	if(input) {
		input.focus()
	}

	if(typeof ACE.interactions == 'undefined') {
		ACE.interactions = []
	}
	if(!ACE.interactions.includes(newDialog)) {
		ACE.interactions.push(newDialog)
		updateFilelist('Interactions')
	}

}


function hideDialog(dialog) {

  let dialogI = ACE.interactions.indexOf(dialog)
  ACE.interactions.splice(dialogI, 1)
  updateFilelist('Interactions')

}


// I NEED AN EASY WIN, LIKE A WARMUP TASK.
// TODO: inject dark mode into pages that don't support it
//   like uBlock Origin for bad UI/UX.
//   Companies want to keep buying off the shelf crap
//   doesn't mean I have to look at to enjoy the rest of the service.
function toggleOption(option) {
	switch(option.id) {
		case 'syncLocal':
			
			break
		case 'snapWindows':
			sendMessage({ 
				snapWindows: evt.target.checked,
			})
			break
			// GOOGLE HIDES THEIR CONSOLE BEHIND TINY LITTLE ICONS.
			//   FUNNY, I WONDER IF THE USER-EXPERIENCE SURVEYS I TOOK
			//   THINK THAT I PREFER TO CLICK ON THEIR STUFF INSTEAD 
			//   OF WRITE CODE? WILL WRITING THIS TOOL GIVE ME THE POWER
			//   TO REWRITE THEIR DESIGN FROM GITHUB SOURCES?
		case 'lineWrap':
			if(option.checked) {
				ace.setOption('wrap', 50)
			} else {
				ace.setOption('wrap', false)
			}
			break
		case 'codeFold':
			// SURE, THE CODE EDITOR ON AWS IS FREE TO USE,
			//   AFTER A 12-STEP SIGN-UP PROCCESS, ENTERING 
			//   CREDIT CARD INFORMATION, AND PAYING FOR 
			//   OTHER CLOUD SERVICES TO CONNECT IT TO YOUR
			//   WORKFLOW. GET REAL AMAZON.
			if(option.checked) {
				ace.setOption('foldStyle', 'markbeginend')
			} else {
				ace.setOption('foldStyle', 'manual')
			}
			break
		case 'snapWindows':
			// automatically recovered by frontend-plugin.js
			break
		case 'darkMode':
			if(option.checked) {
				ace.setTheme('ace/theme/monokai')
				document.body.classList.remove('light')
				document.body.classList.add('dark')
				// is this the first tooling connection to the engine?
				//   I guess file-list updates
				if(typeof Cvar_Set != 'undefined') {
					Cvar_Set(stringToAddress('cl_conColor'), stringToAddress('0 0 0 255'))
					Cvar_Set(stringToAddress('cl_textColor'), stringToAddress('255 255 255 255'))
				}
			} else {
				ace.setTheme('ace/theme/xcode')
				document.body.classList.add('light')
				document.body.classList.remove('dark')
				if(typeof Cvar_Set != 'undefined') {
					Cvar_Set(stringToAddress('cl_conColor'), stringToAddress('255 255 255 255'))
					Cvar_Set(stringToAddress('cl_textColor'), stringToAddress('0 0 0 255'))
				}
			}
			break
		default:
	}
}

// THIS IS ABOUT ALL THE BOILERPLATE I CAN TOLERATE TO BOOT A WASM FILE
//   EMSCRIPTEN IS WHAT 10,000 LINES OF BOILERPLATE?

function initEngine() {
	initWasm({
		SYS: SYS,
		GL: GL,
		EMGL: EMGL,
		INPUT: INPUT,
	})
	let startArgs = getQueryCommands()
	initProgram(startArgs)
}



// BECAUSE IT'S FUCKING PRETTIER, OKAY?
function updateGlobalFunctions(GLOBAL) {

	// assign everything to env because this __attribute(import) BS don't work
	let startKeys = Object.keys(GLOBAL)
	let startValues = Object.values(GLOBAL)
	if(typeof window != 'undefined') {
		for(let i = 0; i < startKeys.length; i++) {
			ENV[startKeys[i]] =
			window[startKeys[i]] = startValues[i] //.apply(ENV.exports)
		}
		Object.assign(ENV, GLOBAL)
	} else if (typeof global != 'undefined') {
		for(let i = 0; i < startKeys.length; i++) {
			ENV[startKeys[i]] =
			global[startKeys[i]] = startValues[i] //.apply(ENV.exports)
		}
		Object.assign(ENV, GLOBAL)
	}

}

// write it non-async just in case wasm is support but not es6?
function initWasm(bytes, env) {
	if(isStreaming) {
		return WebAssembly.instantiateStreaming(bytes, env)
	} else {
		return WebAssembly.instantiate(bytes, env)
	}
}

function initDedicated() {
	Sys_fork()
		let startArgs = [
		'+set', 'dedicated', '1'
	].concat(getQueryCommands())
	Sys_exec(stringToAddress('quake3e.ded.wasm'), stringsToMemory(startArgs))
}


/*

GRAB INSTRUCTIONS FROM MANY SOURCES. USED CALENDAR BEFORE,
SHEETS, GIT, 
USENET WOULD BE INTERESTING BECAUSE IT'S ALREADY PROPOGATED,
JUST NEED TO SEARCH FOR THE RIGHT HASHES. MAYBE WE CAN EXPLOIT
COLLISIONS FOR THIS PURPOSE?

CONTROLLER FOR FRONT-END REQUEST INJECTION LIKE uBlock Origin.

TOOLS FOR MAKING THE WHOLE PACKAGE ISOMORPHIC

*/

let ACE = {
	consoleLines: 0,
	playCount: 0,
	playButtons: [],
	downloaded: false,
	filename: false,

	// TODO: FEATURE LIKE VISUAL STUDIO WITH THE HIDDEN IMPORTS IN
	//   PROJECT SETTINGS, I THINK ECLIPSE/JAVA DOES THIS TOO.
}

// I DON'T KNOW WHY I THINK THIS STUFF IS COOL, 
// BY PUTTING ACE INTO THE LIBRARY, I WILL BE ABLE TO
// INJECT A NOTEPAD ONTO ANY WEBPAGE, I THINK INTERNET ANNOTATIONS COULD BE FUN
//   LIKE SOME SORT OF PUBLIC BILLBOARD FOR A COMPANY AND THEN ANYONE CAN COME
//   AND COMMENT ON IT, EITHER IN 2D AS A REVIEW TOOL, OR IN 3D AS A SPECTATOR.
function initAce(editorId) {
	// TODO: on native sys_open index.html and use engine as proxy, cebsocket
	ace.edit(editorId)
	ace.setFontSize(16)
	ace.setTheme('ace/theme/monokai')
	ace.setOption('minLines', 1000)
	ace.setOption('foldStyle', 'markbeginend')
	ace.setOption('fadeFoldWidgets', true)
	ace.setOption('scrollPastEnd', 0.618) // FOR TERRY!!!
	ace.setOption('wrap', 50)
	ace.setOption('printMarginColumn', 50)
	//ace.setOption('split', 'below')
	ace.setOption('indentedSoftWrap', false)
	ace.session.setTabSize(2)
	ace.session.setMode('ace/mode/javascript')
	ace.session.setUseWorker(false)
	// add play buttons to individual function blocks for ease of use
	ace.on('focus', function () { INPUT.editorActive = true })
	ace.on('blur', function () { INPUT.editorActive = false })

}


/*
function showConsole(console, lastLine) {
	let newLines = console.replace(/\s*$/, '') // only truncating end like Chrome
																						// see, I do have some nice things to say
	if(!ACE.consoleWidget) {
		ACE.consoleWidget = createLineWidget(newLines + '\n', lastLine)
		ace.getSession().widgetManager.addLineWidget(ACE.consoleWidget)
		ACE.consoleWidget.el.children[0].id = 'console'
		ACE.consoleWidget.editor = initAce('console')
	}
}

function onPaused(request) {
	document.body.classList.remove('starting')
	document.body.classList.add('paused')
	if(!ACE.pausedWidget) {
		ACE.pausedWidget = createLineWidget('PAUSED', ACE.previousNonLibrary, 'morph_pause')
		ace.getSession().widgetManager.addLineWidget(ACE.pausedWidget)
	} else {
		ACE.pausedWidget.row = ACE.previousNonLibrary
		//ace.getSession().widgetManager.addLineWidget(ACE.pausedWidget)
	}
	// debounce
	setTimeout(function () {
		document.body.classList.remove('running')
	}, 1000)
}


function doResult(request) {
	if (!ace.session || !ace.session.lineWidgets) {
		return
	}

	// TODO: display some fancy report?
	document.body.classList.remove('running')
	document.body.classList.add('stopped')
}



function showError(request) {

	if(request.error.includes('No script')) {
		document.body.classList.remove('runnning')
		document.body.classList.remove('starting')
		document.body.classList.remove('error')
		return
	}

	document.body.classList.remove('running')
	document.body.classList.add('stopped')
	// SEARCH GITHUB: getElementsByClassName('.
	//   WHAT IF MY BOT COULD DEBUG OTHER PEOPLE'S CODE
	//   WHILE THEY ARE SLEEP LIKE THE SANDMAN?
	if (!ace.session) {
		return
	}
	if(!ace.session.lineWidgets) {
		initLineWidgets()
	}
	let newLines = request.error.replace(/\s*$/, '')
	// scroll to the line when an error occurs
	if(ace.gotoLine) {
		setTimeout(ace.gotoLine.bind(ace, request.line), 100)
	}
	// if error has a line number, insert message below that line
	if(!ACE.errorWidget) {
		ACE.errorWidget = createLineWidget(newLines, request.line, 'morph_error')
		ace.getSession().widgetManager.addLineWidget(ACE.errorWidget)
	} else {
		ACE.errorWidget.el.children[0].innerText = newLines
	}
	ACE.errorWidget.stack = request.stack

}

// TODO: INJECT CKEDITOR INSTEAD
*/

if(typeof module != 'undefined') {
	module.exports = {
		ACE
	}
} else if (typeof window != 'undefined') {
	window.ACE = ACE
}

(function(){function o(n){var i=e;n&&(e[n]||(e[n]={}),i=e[n]);if(!i.define||!i.define.packaged)t.original=i.define,i.define=t,i.define.packaged=!0;if(!i.require||!i.require.packaged)r.original=i.require,i.require=r,i.require.packaged=!0}var ACE_NAMESPACE = "ace",e=function(){return this}();!e&&typeof window!="undefined"&&(e=window);if(!ACE_NAMESPACE&&typeof requirejs!="undefined")return;var t=function(e,n,r){if(typeof e!="string"){t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(r=n),t.modules[e]||(t.payloads[e]=r,t.modules[e]=null)};t.modules={},t.payloads={};var n=function(e,t,n){if(typeof t=="string"){var i=s(e,t);if(i!=undefined)return n&&n(),i}else if(Object.prototype.toString.call(t)==="[object Array]"){var o=[];for(var u=0,a=t.length;u<a;++u){var f=s(e,t[u]);if(f==undefined&&r.original)return;o.push(f)}return n&&n.apply(null,o)||!0}},r=function(e,t){var i=n("",e,t);return i==undefined&&r.original?r.original.apply(this,arguments):i},i=function(e,t){if(t.indexOf("!")!==-1){var n=t.split("!");return i(e,n[0])+"!"+i(e,n[1])}if(t.charAt(0)=="."){var r=e.split("/").slice(0,-1).join("/");t=r+"/"+t;while(t.indexOf(".")!==-1&&s!=t){var s=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},s=function(e,r){r=i(e,r);var s=t.modules[r];if(!s){s=t.payloads[r];if(typeof s=="function"){var o={},u={id:r,uri:"",exports:o,packaged:!0},a=function(e,t){return n(r,e,t)},f=s(a,o,u);o=f||u.exports,t.modules[r]=o,delete t.payloads[r]}s=t.modules[r]=o||s}return s};o(ACE_NAMESPACE)})(),ace.define("ace/lib/fixoldbrowsers",["require","exports","module"],function(e,t,n){"use strict";typeof Element!="undefined"&&!Element.prototype.remove&&Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})}),ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var r=typeof navigator=="object"?navigator:{},i=(/mac|win|linux/i.exec(r.platform)||["other"])[0].toLowerCase(),s=r.userAgent||"",o=r.appName||"";t.isWin=i=="win",t.isMac=i=="mac",t.isLinux=i=="linux",t.isIE=o=="Microsoft Internet Explorer"||o.indexOf("MSAppHost")>=0?parseFloat((s.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((s.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=s.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(s.split("WebKit/")[1])||undefined,t.isChrome=parseFloat(s.split(" Chrome/")[1])||undefined,t.isEdge=parseFloat(s.split(" Edge/")[1])||undefined,t.isAIR=s.indexOf("AdobeAIR")>=0,t.isAndroid=s.indexOf("Android")>=0,t.isChromeOS=s.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(s)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";function u(){var e=o;o=null,e&&e.forEach(function(e){a(e[0],e[1])})}function a(e,n,r){if(typeof document=="undefined")return;if(o)if(r)u();else if(r===!1)return o.push([e,n]);if(s)return;var i=r;if(!r||!r.getRootNode)i=document;else{i=r.getRootNode();if(!i||i==r)i=document}var a=i.ownerDocument||i;if(n&&t.hasCssString(n,i))return null;n&&(e+="\n/*# sourceURL=ace/css/"+n+" */");var f=t.createElement("style");f.appendChild(a.createTextNode(e)),n&&(f.id=n),i==a&&(i=t.getDocumentHead(a)),i.insertBefore(f,i.firstChild)}var r=e("./useragent"),i="http://www.w3.org/1999/xhtml";t.buildDom=function l(e,t,n){if(typeof e=="string"&&e){var r=document.createTextNode(e);return t&&t.appendChild(r),r}if(!Array.isArray(e))return e&&e.appendChild&&t&&t.appendChild(e),e;if(typeof e[0]!="string"||!e[0]){var i=[];for(var s=0;s<e.length;s++){var o=l(e[s],t,n);o&&i.push(o)}return i}var u=document.createElement(e[0]),a=e[1],f=1;a&&typeof a=="object"&&!Array.isArray(a)&&(f=2);for(var s=f;s<e.length;s++)l(e[s],u,n);return f==2&&Object.keys(a).forEach(function(e){var t=a[e];e==="class"?u.className=Array.isArray(t)?t.join(" "):t:typeof t=="function"||e=="value"||e[0]=="$"?u[e]=t:e==="ref"?n&&(n[t]=u):e==="style"?typeof t=="string"&&(u.style.cssText=t):t!=null&&u.setAttribute(e,t)}),t&&t.appendChild(u),u},t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||i,e):document.createElement(e)},t.removeChildren=function(e){e.innerHTML=""},t.createTextNode=function(e,t){var n=t?t.ownerDocument:document;return n.createTextNode(e)},t.createFragment=function(e){var t=e?e.ownerDocument:document;return t.createDocumentFragment()},t.hasCssClass=function(e,t){var n=(e.className+"").split(/\s+/g);return n.indexOf(t)!==-1},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){var n=e.className.split(/\s+/g);for(;;){var r=n.indexOf(t);if(r==-1)break;n.splice(r,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){var n=e.className.split(/\s+/g),r=!0;for(;;){var i=n.indexOf(t);if(i==-1)break;r=!1,n.splice(i,1)}return r&&n.push(t),e.className=n.join(" "),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n=0,r;t=t||document;if(r=t.querySelectorAll("style"))while(n<r.length)if(r[n++].id===e)return!0};var s,o=[];t.useStrictCSP=function(e){s=e,e==0?u():o||(o=[])},t.importCssString=a,t.importCssStylsheet=function(e,n){t.buildDom(["link",{rel:"stylesheet",href:e}],t.getDocumentHead(n))},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=t.createElement("ace_outer"),i=r.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",i.display="block",r.appendChild(n);var s=e.documentElement;s.appendChild(r);var o=n.offsetWidth;i.overflow="scroll";var u=n.offsetWidth;return o==u&&(u=r.clientWidth),s.removeChild(r),o-u},t.computedStyle=function(e,t){return window.getComputedStyle(e,"")||{}},t.setStyle=function(e,t,n){e[t]!==n&&(e[t]=n)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=r.isWin?typeof window!="undefined"&&window.devicePixelRatio>=1.5:!0,r.isChromeOS&&(t.HI_DPI=!1);if(typeof document!="undefined"){var f=document.createElement("div");t.HI_DPI&&f.style.transform!==undefined&&(t.HAS_CSS_TRANSFORMS=!0),!r.isEdge&&typeof f.style.animationName!="undefined"&&(t.HAS_CSS_ANIMATION=!0),f=null}t.HAS_CSS_TRANSFORMS?t.translate=function(e,t,n){e.style.transform="translate("+Math.round(t)+"px, "+Math.round(n)+"px)"}:t.translate=function(e,t,n){e.style.top=Math.round(n)+"px",e.style.left=Math.round(t)+"px"}}),ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var r=e("./oop"),i=function(){var e={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},t,n;for(n in e.FUNCTION_KEYS)t=e.FUNCTION_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);for(n in e.PRINTABLE_KEYS)t=e.PRINTABLE_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);return r.mixin(e,e.MODIFIER_KEYS),r.mixin(e,e.PRINTABLE_KEYS),r.mixin(e,e.FUNCTION_KEYS),e.enter=e["return"],e.escape=e.esc,e.del=e["delete"],e[173]="-",function(){var t=["cmd","ctrl","alt","shift"];for(var n=Math.pow(2,t.length);n--;)e.KEY_MODS[n]=t.filter(function(t){return n&e.KEY_MODS[t]}).join("-")+"-"}(),e.KEY_MODS[0]="",e.KEY_MODS[-1]="input-",e}();r.mixin(t,i),t.keyCodeToString=function(e){var t=i[e];return typeof t!="string"&&(t=String.fromCharCode(e)),t.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function a(){u=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){u={passive:!1}}})}catch(e){}}function f(){return u==undefined&&a(),u}function l(e,t,n){this.elem=e,this.type=t,this.callback=n}function d(e,t,n){var u=p(t);if(!i.isMac&&s){t.getModifierState&&(t.getModifierState("OS")||t.getModifierState("Win"))&&(u|=8);if(s.altGr){if((3&u)==3)return;s.altGr=0}if(n===18||n===17){var a="location"in t?t.location:t.keyLocation;if(n===17&&a===1)s[n]==1&&(o=t.timeStamp);else if(n===18&&u===3&&a===2){var f=t.timeStamp-o;f<50&&(s.altGr=!0)}}}n in r.MODIFIER_KEYS&&(n=-1);if(!u&&n===13){var a="location"in t?t.location:t.keyLocation;if(a===3){e(t,u,-n);if(t.defaultPrevented)return}}if(i.isChromeOS&&u&8){e(t,u,n);if(t.defaultPrevented)return;u&=-9}return!!u||n in r.FUNCTION_KEYS||n in r.PRINTABLE_KEYS?e(t,u,n):!1}function v(){s=Object.create(null)}var r=e("./keys"),i=e("./useragent"),s=null,o=0,u;l.prototype.destroy=function(){h(this.elem,this.type,this.callback),this.elem=this.type=this.callback=undefined};var c=t.addListener=function(e,t,n,r){e.addEventListener(t,n,f()),r&&r.$toDestroy.push(new l(e,t,n))},h=t.removeListener=function(e,t,n){e.removeEventListener(t,n,f())};t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation&&e.stopPropagation()},t.preventDefault=function(e){e.preventDefault&&e.preventDefault()},t.getButton=function(e){return e.type=="dblclick"?0:e.type=="contextmenu"||i.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.button},t.capture=function(e,t,n){function i(e){t&&t(e),n&&n(e),h(r,"mousemove",t),h(r,"mouseup",i),h(r,"dragstart",i)}var r=e&&e.ownerDocument||document;return c(r,"mousemove",t),c(r,"mouseup",i),c(r,"dragstart",i),i},t.addMouseWheelListener=function(e,t,n){"onmousewheel"in e?c(e,"mousewheel",function(e){var n=8;e.wheelDeltaX!==undefined?(e.wheelX=-e.wheelDeltaX/n,e.wheelY=-e.wheelDeltaY/n):(e.wheelX=0,e.wheelY=-e.wheelDelta/n),t(e)},n):"onwheel"in e?c(e,"wheel",function(e){var n=.35;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=e.deltaX*n||0,e.wheelY=e.deltaY*n||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=(e.deltaX||0)*5,e.wheelY=(e.deltaY||0)*5}t(e)},n):c(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=(e.detail||0)*5,e.wheelY=0):(e.wheelX=0,e.wheelY=(e.detail||0)*5),t(e)},n)},t.addMultiMouseDownListener=function(e,n,r,s,o){function p(e){t.getButton(e)!==0?u=0:e.detail>1?(u++,u>4&&(u=1)):u=1;if(i.isIE){var o=Math.abs(e.clientX-a)>5||Math.abs(e.clientY-f)>5;if(!l||o)u=1;l&&clearTimeout(l),l=setTimeout(function(){l=null},n[u-1]||600),u==1&&(a=e.clientX,f=e.clientY)}e._clicks=u,r[s]("mousedown",e);if(u>4)u=0;else if(u>1)return r[s](h[u],e)}var u=0,a,f,l,h={2:"dblclick",3:"tripleclick",4:"quadclick"};Array.isArray(e)||(e=[e]),e.forEach(function(e){c(e,"mousedown",p,o)})};var p=function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)};t.getModifierString=function(e){return r.KEY_MODS[p(e)]},t.addCommandKeyListener=function(e,n,r){if(i.isOldGecko||i.isOpera&&!("KeyboardEvent"in window)){var o=null;c(e,"keydown",function(e){o=e.keyCode},r),c(e,"keypress",function(e){return d(n,e,o)},r)}else{var u=null;c(e,"keydown",function(e){s[e.keyCode]=(s[e.keyCode]||0)+1;var t=d(n,e,e.keyCode);return u=e.defaultPrevented,t},r),c(e,"keypress",function(e){u&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),u=null)},r),c(e,"keyup",function(e){s[e.keyCode]=null},r),s||(v(),c(window,"focus",v))}};if(typeof window=="object"&&window.postMessage&&!i.isOldIE){var m=1;t.nextTick=function(e,n){n=n||window;var r="zero-timeout-message-"+m++,i=function(s){s.data==r&&(t.stopPropagation(s),h(n,"message",i),e())};c(n,"message",i),n.postMessage(r,"*")}}t.$idleBlocked=!1,t.onIdle=function(e,n){return setTimeout(function r(){t.$idleBlocked?setTimeout(r,100):e()},n)},t.$idleBlockId=null,t.blockIdle=function(e){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},e||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}}),ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var r=function(e,t){return e.row-t.row||e.column-t.column},i=function(e,t,n,r){this.start={row:e,column:t},this.end={row:n,column:r}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return this.compare(e,t)==0},this.compareRange=function(e){var t,n=e.end,r=e.start;return t=this.compare(n.row,n.column),t==1?(t=this.compare(r.row,r.column),t==1?2:t==0?1:0):t==-1?-2:(t=this.compare(r.row,r.column),t==-1?-1:t==1?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return this.comparePoint(e.start)==0&&this.comparePoint(e.end)==0},this.intersects=function(e){var t=this.compareRange(e);return t==-1||t==0||t==1},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){typeof e=="object"?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){typeof e=="object"?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)||this.isStart(e,t)?!1:!0:!1},this.insideStart=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)?!1:!0:!1},this.insideEnd=function(e,t){return this.compare(e,t)==0?this.isStart(e,t)?!1:!0:!1},this.compare=function(e,t){return!this.isMultiLine()&&e===this.start.row?t<this.start.column?-1:t>this.end.column?1:0:e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)var n={row:e,column:0};if(this.start.row>t)var r={row:t+1,column:0};else if(this.start.row<e)var r={row:e,column:0};return i.fromPoints(r||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(n==0)return this;if(n==-1)var r={row:e,column:t};else var s={row:e,column:t};return i.fromPoints(r||this.start,s||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new i(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new i(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new i(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(i.prototype),i.fromPoints=function(e,t){return new i(e.row,e.column,t.row,t.column)},i.comparePoints=r,i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=i}),ace.define("ace/lib/lang",["require","exports","module"],function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){var n="";while(t>0){t&1&&(n+=e);if(t>>=1)e+=e}return n};var r=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)e[n]&&typeof e[n]=="object"?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function s(e){if(typeof e!="object"||!e)return e;var t;if(Array.isArray(e)){t=[];for(var n=0;n<e.length;n++)t[n]=s(e[n]);return t}if(Object.prototype.toString.call(e)!=="[object Object]")return e;t={};for(var n in e)t[n]=s(e[n]);return t},t.arrayToMap=function(e){var t={};for(var n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return(""+e).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},i=function(e){n==null&&(n=setTimeout(r,e||t))};return i.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),ace.define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";var r;n.exports={lineMode:!1,pasteCancelled:function(){return r&&r>Date.now()-50?!0:r=!1},cancel:function(){r=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=e("../lib/dom"),o=e("../lib/lang"),u=e("../clipboard"),a=i.isChrome<18,f=i.isIE,l=i.isChrome>63,c=400,h=e("../lib/keys"),p=h.KEY_MODS,d=i.isIOS,v=d?/\s/:/\n/,m=i.isMobile,g=function(e,t){function X(){x=!0,n.blur(),n.focus(),x=!1}function $(e){e.keyCode==27&&n.value.length<n.selectionStart&&(b||(T=n.value),N=C=-1,O()),V()}function K(){clearTimeout(J),J=setTimeout(function(){E&&(n.style.cssText=E,E=""),t.renderer.$isMousePressed=!1,t.renderer.$keepTextAreaAtCursor&&t.renderer.$moveTextAreaToCursor()},0)}function G(e,t,n){var r=null,i=!1;n.addEventListener("keydown",function(e){r&&clearTimeout(r),i=!0},!0),n.addEventListener("keyup",function(e){r=setTimeout(function(){i=!1},100)},!0);var s=function(e){if(document.activeElement!==n)return;if(i||b||t.$mouseHandler.isMousePressed)return;if(g)return;var r=n.selectionStart,s=n.selectionEnd,o=null,u=0;if(r==0)o=h.up;else if(r==1)o=h.home;else if(s>C&&T[s]=="\n")o=h.end;else if(r<N&&T[r-1]==" ")o=h.left,u=p.option;else if(r<N||r==N&&C!=N&&r==s)o=h.left;else if(s>C&&T.slice(0,s).split("\n").length>2)o=h.down;else if(s>C&&T[s-1]==" ")o=h.right,u=p.option;else if(s>C||s==C&&C!=N&&r==s)o=h.right;r!==s&&(u|=p.shift);if(o){var a=t.onCommandKey({},u,o);if(!a&&t.commands){o=h.keyCodeToString(o);var f=t.commands.findKeyCommand(u,o);f&&t.execCommand(f)}N=r,C=s,O("")}};document.addEventListener("selectionchange",s),t.on("destroy",function(){document.removeEventListener("selectionchange",s)})}var n=s.createElement("textarea");n.className="ace_text-input",n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck",!1),n.style.opacity="0",e.insertBefore(n,e.firstChild);var g=!1,y=!1,b=!1,w=!1,E="";m||(n.style.fontSize="1px");var S=!1,x=!1,T="",N=0,C=0,k=0;try{var L=document.activeElement===n}catch(A){}r.addListener(n,"blur",function(e){if(x)return;t.onBlur(e),L=!1},t),r.addListener(n,"focus",function(e){if(x)return;L=!0;if(i.isEdge)try{if(!document.hasFocus())return}catch(e){}t.onFocus(e),i.isEdge?setTimeout(O):O()},t),this.$focusScroll=!1,this.focus=function(){if(E||l||this.$focusScroll=="browser")return n.focus({preventScroll:!0});var e=n.style.top;n.style.position="fixed",n.style.top="0px";try{var t=n.getBoundingClientRect().top!=0}catch(r){return}var i=[];if(t){var s=n.parentElement;while(s&&s.nodeType==1)i.push(s),s.setAttribute("ace_nocontext",!0),!s.parentElement&&s.getRootNode?s=s.getRootNode().host:s=s.parentElement}n.focus({preventScroll:!0}),t&&i.forEach(function(e){e.removeAttribute("ace_nocontext")}),setTimeout(function(){n.style.position="",n.style.top=="0px"&&(n.style.top=e)},0)},this.blur=function(){n.blur()},this.isFocused=function(){return L},t.on("beforeEndOperation",function(){var e=t.curOp,r=e&&e.command&&e.command.name;if(r=="insertstring")return;var i=r&&(e.docChanged||e.selectionChanged);b&&i&&(T=n.value="",W()),O()});var O=d?function(e){if(!L||g&&!e||w)return;e||(e="");var r="\n ab"+e+"cde fg\n";r!=n.value&&(n.value=T=r);var i=4,s=4+(e.length||(t.selection.isEmpty()?0:1));(N!=i||C!=s)&&n.setSelectionRange(i,s),N=i,C=s}:function(){if(b||w)return;if(!L&&!P)return;b=!0;var e=0,r=0,i="";if(t.session){var s=t.selection,o=s.getRange(),u=s.cursor.row;e=o.start.column,r=o.end.column,i=t.session.getLine(u);if(o.start.row!=u){var a=t.session.getLine(u-1);e=o.start.row<u-1?0:e,r+=a.length+1,i=a+"\n"+i}else if(o.end.row!=u){var f=t.session.getLine(u+1);r=o.end.row>u+1?f.length:r,r+=i.length+1,i=i+"\n"+f}else m&&u>0&&(i="\n"+i,r+=1,e+=1);i.length>c&&(e<c&&r<c?i=i.slice(0,c):(i="\n",e==r?e=r=0:(e=0,r=1)))}var l=i+"\n\n";l!=T&&(n.value=T=l,N=C=l.length),P&&(N=n.selectionStart,C=n.selectionEnd);if(C!=r||N!=e||n.selectionEnd!=C)try{n.setSelectionRange(e,r),N=e,C=r}catch(h){}b=!1};this.resetSelection=O,L&&t.onFocus();var M=function(e){return e.selectionStart===0&&e.selectionEnd>=T.length&&e.value===T&&T&&e.selectionEnd!==C},_=function(e){if(b)return;g?g=!1:M(n)?(t.selectAll(),O()):m&&n.selectionStart!=N&&O()},D=null;this.setInputHandler=function(e){D=e},this.getInputHandler=function(){return D};var P=!1,H=function(e,r){P&&(P=!1);if(y)return O(),e&&t.onPaste(e),y=!1,"";var s=n.selectionStart,o=n.selectionEnd,u=N,a=T.length-C,f=e,l=e.length-s,c=e.length-o,h=0;while(u>0&&T[h]==e[h])h++,u--;f=f.slice(h),h=1;while(a>0&&T.length-h>N-1&&T[T.length-h]==e[e.length-h])h++,a--;l-=h-1,c-=h-1;var p=f.length-h+1;p<0&&(u=-p,p=0),f=f.slice(0,p);if(!r&&!f&&!l&&!u&&!a&&!c)return"";w=!0;var d=!1;return i.isAndroid&&f==". "&&(f="  ",d=!0),f&&!u&&!a&&!l&&!c||S?t.onTextInput(f):t.onTextInput(f,{extendLeft:u,extendRight:a,restoreStart:l,restoreEnd:c}),w=!1,T=e,N=s,C=o,k=c,d?"\n":f},B=function(e){if(b)return z();if(e&&e.inputType){if(e.inputType=="historyUndo")return t.execCommand("undo");if(e.inputType=="historyRedo")return t.execCommand("redo")}var r=n.value,i=H(r,!0);(r.length>c+100||v.test(i)||m&&N<1&&N==C)&&O()},j=function(e,t,n){var r=e.clipboardData||window.clipboardData;if(!r||a)return;var i=f||n?"Text":"text/plain";try{return t?r.setData(i,t)!==!1:r.getData(i)}catch(e){if(!n)return j(e,t,!0)}},F=function(e,i){var s=t.getCopyText();if(!s)return r.preventDefault(e);j(e,s)?(d&&(O(s),g=s,setTimeout(function(){g=!1},10)),i?t.onCut():t.onCopy(),r.preventDefault(e)):(g=!0,n.value=s,n.select(),setTimeout(function(){g=!1,O(),i?t.onCut():t.onCopy()}))},I=function(e){F(e,!0)},q=function(e){F(e,!1)},R=function(e){var s=j(e);if(u.pasteCancelled())return;typeof s=="string"?(s&&t.onPaste(s,e),i.isIE&&setTimeout(O),r.preventDefault(e)):(n.value="",y=!0)};r.addCommandKeyListener(n,t.onCommandKey.bind(t),t),r.addListener(n,"select",_,t),r.addListener(n,"input",B,t),r.addListener(n,"cut",I,t),r.addListener(n,"copy",q,t),r.addListener(n,"paste",R,t),(!("oncut"in n)||!("oncopy"in n)||!("onpaste"in n))&&r.addListener(e,"keydown",function(e){if(i.isMac&&!e.metaKey||!e.ctrlKey)return;switch(e.keyCode){case 67:q(e);break;case 86:R(e);break;case 88:I(e)}},t);var U=function(e){if(b||!t.onCompositionStart||t.$readOnly)return;b={};if(S)return;e.data&&(b.useTextareaForIME=!1),setTimeout(z,0),t._signal("compositionStart"),t.on("mousedown",X);var r=t.getSelectionRange();r.end.row=r.start.row,r.end.column=r.start.column,b.markerRange=r,b.selectionStart=N,t.onCompositionStart(b),b.useTextareaForIME?(T=n.value="",N=0,C=0):(n.msGetInputContext&&(b.context=n.msGetInputContext()),n.getInputContext&&(b.context=n.getInputContext()))},z=function(){if(!b||!t.onCompositionUpdate||t.$readOnly)return;if(S)return X();if(b.useTextareaForIME)t.onCompositionUpdate(n.value);else{var e=n.value;H(e),b.markerRange&&(b.context&&(b.markerRange.start.column=b.selectionStart=b.context.compositionStartOffset),b.markerRange.end.column=b.markerRange.start.column+C-b.selectionStart+k)}},W=function(e){if(!t.onCompositionEnd||t.$readOnly)return;b=!1,t.onCompositionEnd(),t.off("mousedown",X),e&&B()},V=o.delayedCall(z,50).schedule.bind(null,null);r.addListener(n,"compositionstart",U,t),r.addListener(n,"compositionupdate",z,t),r.addListener(n,"keyup",$,t),r.addListener(n,"keydown",V,t),r.addListener(n,"compositionend",W,t),this.getElement=function(){return n},this.setCommandMode=function(e){S=e,n.readOnly=!1},this.setReadOnly=function(e){S||(n.readOnly=e)},this.setCopyWithEmptySelection=function(e){},this.onContextMenu=function(e){P=!0,O(),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,o){E||(E=n.style.cssText),n.style.cssText=(o?"z-index:100000;":"")+(i.isIE?"opacity:0.1;":"")+"text-indent: -"+(N+C)*t.renderer.characterWidth*.5+"px;";var u=t.container.getBoundingClientRect(),a=s.computedStyle(t.container),f=u.top+(parseInt(a.borderTopWidth)||0),l=u.left+(parseInt(u.borderLeftWidth)||0),c=u.bottom-f-n.clientHeight-2,h=function(e){s.translate(n,e.clientX-l-2,Math.min(e.clientY-f-2,c))};h(e);if(e.type!="mousedown")return;t.renderer.$isMousePressed=!0,clearTimeout(J),i.isWin&&r.capture(t.container,h,K)},this.onContextMenuClose=K;var J,Q=function(e){t.textInput.onContextMenu(e),K()};r.addListener(n,"mouseup",Q,t),r.addListener(n,"mousedown",function(e){e.preventDefault(),K()},t),r.addListener(t.renderer.scroller,"contextmenu",Q,t),r.addListener(n,"contextmenu",Q,t),d&&G(e,t,n)};t.TextInput=g,t.$setUserAgentForTests=function(e,t){m=e,d=t}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";function o(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));var n=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];n.forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function u(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}function a(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row==e.end.row-1&&!e.start.column&&!e.end.column)var n=t.column-4;else var n=2*t.row-e.start.row-e.end.row;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var r=e("../lib/useragent"),i=0,s=550;(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var i=this.editor,s=e.getButton();if(s!==0){var o=i.getSelectionRange(),u=o.isEmpty();(u||s==1)&&i.selection.moveToPosition(n),s==2&&(i.textInput.onContextMenu(e.domEvent),r.isMozilla||e.preventDefault());return}this.mousedownEvent.time=Date.now();if(t&&!i.isFocused()){i.focus();if(this.$focusTimeout&&!this.$clickSelection&&!i.inMultiSelectMode){this.setState("focusWait"),this.captureMouse(e);return}}return this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;if(!this.mousedownEvent)return;this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select")},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(r==-1)e=this.$clickSelection.end;else if(r==1)e=this.$clickSelection.start;else{var i=a(this.$clickSelection,n);n=i.cursor,e=i.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),i=n.selection[e](r.row,r.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(i.start),o=this.$clickSelection.comparePoint(i.end);if(s==-1&&o<=0){t=this.$clickSelection.end;if(i.end.row!=r.row||i.end.column!=r.column)r=i.start}else if(o==1&&s>=0){t=this.$clickSelection.start;if(i.start.row!=r.row||i.start.column!=r.column)r=i.end}else if(s==-1&&o==1)r=i.end,t=i.start;else{var u=a(this.$clickSelection,r);r=u.cursor,t=u.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(r),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(e>i||t-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,r=n.session,i=r.getBracketRange(t);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var r=n.getSelectionRange();r.isMultiLine()&&r.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(r.start.row),this.$clickSelection.end=n.selection.getLineRange(r.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(e.getAccelKey())return;e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,r=e.domEvent.timeStamp,i=r-n.t,o=i?e.wheelX/i:n.vx,u=i?e.wheelY/i:n.vy;i<s&&(o=(o+n.vx)/2,u=(u+n.vy)/2);var a=Math.abs(o/u),f=!1;a>=1&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(f=!0),a<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(f=!0);if(f)n.allowed=r;else if(r-n.allowed<s){var l=Math.abs(o)<=1.5*Math.abs(n.vx)&&Math.abs(u)<=1.5*Math.abs(n.vy);l?(f=!0,n.allowed=r):n.allowed=0}n.t=r,n.vx=o,n.vy=u;if(f)return t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()}}).call(o.prototype),t.DefaultHandlers=o}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,n){"use strict";function s(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}var r=e("./lib/oop"),i=e("./lib/dom");(function(){this.$init=function(){return this.$element=i.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){this.getElement().textContent=e},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){i.addCssClass(this.getElement(),e)},this.show=function(e,t,n){e!=null&&this.setText(e),t!=null&&n!=null&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(s.prototype),t.Tooltip=s}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,n){"use strict";function u(e){function l(){var r=u.getDocumentPosition().row,s=n.$annotations[r];if(!s)return c();var o=t.session.getLength();if(r==o){var a=t.renderer.pixelToScreenCoordinates(0,u.y).row,l=u.$pos;if(a>t.session.documentToScreenRow(l.row,l.column))return c()}if(f==s)return;f=s.text.join("<br/>"),i.setHtml(f),i.show(),t._signal("showGutterTooltip",i),t.on("mousewheel",c);if(e.$tooltipFollowsMouse)h(u);else{var p=u.domEvent.target,d=p.getBoundingClientRect(),v=i.getElement().style;v.left=d.right+"px",v.top=d.bottom+"px"}}function c(){o&&(o=clearTimeout(o)),f&&(i.hide(),f=null,t._signal("hideGutterTooltip",i),t.off("mousewheel",c))}function h(e){i.setPosition(e.x,e.y)}var t=e.editor,n=t.renderer.$gutterLayer,i=new a(t.container);e.editor.setDefaultHandler("guttermousedown",function(r){if(!t.isFocused()||r.getButton()!=0)return;var i=n.getRegion(r);if(i=="foldWidgets")return;var s=r.getDocumentPosition().row,o=t.session.selection;if(r.getShiftKey())o.selectTo(s,0);else{if(r.domEvent.detail==2)return t.selectAll(),r.preventDefault();e.$clickSelection=t.selection.getLineRange(s)}return e.setState("selectByLines"),e.captureMouse(r),r.preventDefault()});var o,u,f;e.editor.setDefaultHandler("guttermousemove",function(t){var n=t.domEvent.target||t.domEvent.srcElement;if(r.hasCssClass(n,"ace_fold-widget"))return c();f&&e.$tooltipFollowsMouse&&h(t),u=t;if(o)return;o=setTimeout(function(){o=null,u&&!e.isMousePressed?l():c()},50)}),s.addListener(t.renderer.$gutter,"mouseout",function(e){u=null;if(!f||o)return;o=setTimeout(function(){o=null,c()},50)},t),t.on("changeSession",c)}function a(e){o.call(this,e)}var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/event"),o=e("../tooltip").Tooltip;i.inherits(a,o),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),s=this.getHeight();e+=15,t+=15,e+i>n&&(e-=e+i-n),t+s>r&&(t-=20+s),o.prototype.setPosition.call(this,e,t)}}.call(a.prototype),t.GutterHandler=u}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var e=this.editor,t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=t.contains(n.row,n.column)}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(s.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";function f(e){function T(e,n){var r=Date.now(),i=!n||e.row!=n.row,s=!n||e.column!=n.column;if(!S||i||s)t.moveCursorToPosition(e),S=r,x={x:p,y:d};else{var o=l(x.x,x.y,p,d);o>a?S=null:r-S>=u&&(t.renderer.scrollCursorIntoView(),S=null)}}function N(e,n){var r=Date.now(),i=t.renderer.layerConfig.lineHeight,s=t.renderer.layerConfig.characterWidth,u=t.renderer.scroller.getBoundingClientRect(),a={x:{left:p-u.left,right:u.right-p},y:{top:d-u.top,bottom:u.bottom-d}},f=Math.min(a.x.left,a.x.right),l=Math.min(a.y.top,a.y.bottom),c={row:e.row,column:e.column};f/s<=2&&(c.column+=a.x.left<a.x.right?-3:2),l/i<=1&&(c.row+=a.y.top<a.y.bottom?-1:1);var h=e.row!=c.row,v=e.column!=c.column,m=!n||e.row!=n.row;h||v&&!m?E?r-E>=o&&t.renderer.scrollCursorIntoView(c):E=r:E=null}function C(){var e=g;g=t.renderer.screenToTextCoordinates(p,d),T(g,e),N(g,e)}function k(){m=t.selection.toOrientedRange(),h=t.session.addMarker(m,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(v),C(),v=setInterval(C,20),y=0,i.addListener(document,"mousemove",O)}function L(){clearInterval(v),t.session.removeMarker(h),h=null,t.selection.fromOrientedRange(m),t.isFocused()&&!w&&t.$resetCursorStyle(),m=null,g=null,y=0,E=null,S=null,i.removeListener(document,"mousemove",O)}function O(){A==null&&(A=setTimeout(function(){A!=null&&h&&L()},20))}function M(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return e=="text/plain"||e=="Text"})}function _(e){var t=["copy","copymove","all","uninitialized"],n=["move","copymove","linkmove","all","uninitialized"],r=s.isMac?e.altKey:e.ctrlKey,i="uninitialized";try{i=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return r&&t.indexOf(i)>=0?o="copy":n.indexOf(i)>=0?o="move":t.indexOf(i)>=0&&(o="copy"),o}var t=e.editor,n=r.createElement("div");n.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",n.textContent="\u00a0";var f=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];f.forEach(function(t){e[t]=this[t]},this),t.on("mousedown",this.onMouseDown.bind(e));var c=t.container,h,p,d,v,m,g,y=0,b,w,E,S,x;this.onDragStart=function(e){if(this.cancelDrag||!c.draggable){var r=this;return setTimeout(function(){r.startSelect(),r.captureMouse(e)},0),e.preventDefault()}m=t.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=t.getReadOnly()?"copy":"copyMove",t.container.appendChild(n),i.setDragImage&&i.setDragImage(n,0,0),setTimeout(function(){t.container.removeChild(n)}),i.clearData(),i.setData("Text",t.session.getTextRange()),w=!0,this.setState("drag")},this.onDragEnd=function(e){c.draggable=!1,w=!1,this.setState(null);if(!t.getReadOnly()){var n=e.dataTransfer.dropEffect;!b&&n=="move"&&t.session.remove(t.getSelectionRange()),t.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(t.getReadOnly()||!M(e.dataTransfer))return;return p=e.clientX,d=e.clientY,h||k(),y++,e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)},this.onDragOver=function(e){if(t.getReadOnly()||!M(e.dataTransfer))return;return p=e.clientX,d=e.clientY,h||(k(),y++),A!==null&&(A=null),e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)},this.onDragLeave=function(e){y--;if(y<=0&&h)return L(),b=null,i.preventDefault(e)},this.onDrop=function(e){if(!g)return;var n=e.dataTransfer;if(w)switch(b){case"move":m.contains(g.row,g.column)?m={start:g,end:g}:m=t.moveText(m,g);break;case"copy":m=t.moveText(m,g,!0)}else{var r=n.getData("Text");m={start:g,end:t.session.insert(g,r)},t.focus(),b=null}return L(),i.preventDefault(e)},i.addListener(c,"dragstart",this.onDragStart.bind(e),t),i.addListener(c,"dragend",this.onDragEnd.bind(e),t),i.addListener(c,"dragenter",this.onDragEnter.bind(e),t),i.addListener(c,"dragover",this.onDragOver.bind(e),t),i.addListener(c,"dragleave",this.onDragLeave.bind(e),t),i.addListener(c,"drop",this.onDrop.bind(e),t);var A=null}function l(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}var r=e("../lib/dom"),i=e("../lib/event"),s=e("../lib/useragent"),o=200,u=200,a=5;(function(){this.dragWait=function(){var e=Date.now()-this.mousedownEvent.time;e>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var e=this.editor.container;e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor,t=e.container;t.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var n=s.isWin?"default":"move";e.renderer.setCursorStyle(n),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;if(s.isIE&&this.state=="dragReady"){var n=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>3&&t.dragDrop()}if(this.state==="dragWait"){var n=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(e){if(!this.$dragEnabled)return;this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),r=e.getButton(),i=e.domEvent.detail||1;if(i===1&&r===0&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=e.domEvent.target||e.domEvent.srcElement;"unselectable"in o&&(o.unselectable="on");if(t.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;var u=t.container;u.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}).call(f.prototype),t.DragdropHandler=f}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,n){"use strict";var r=e("./mouse_event").MouseEvent,i=e("../lib/event"),s=e("../lib/dom");t.addTouchListeners=function(e,t){function b(){var e=window.navigator&&window.navigator.clipboard,r=!1,i=function(){var n=t.getCopyText(),i=t.session.getUndoManager().hasUndo();y.replaceChild(s.buildDom(r?["span",!n&&["span",{"class":"ace_mobile-button",action:"selectall"},"Select All"],n&&["span",{"class":"ace_mobile-button",action:"copy"},"Copy"],n&&["span",{"class":"ace_mobile-button",action:"cut"},"Cut"],e&&["span",{"class":"ace_mobile-button",action:"paste"},"Paste"],i&&["span",{"class":"ace_mobile-button",action:"undo"},"Undo"],["span",{"class":"ace_mobile-button",action:"find"},"Find"],["span",{"class":"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),y.firstChild)},o=function(n){var s=n.target.getAttribute("action");if(s=="more"||!r)return r=!r,i();if(s=="paste")e.readText().then(function(e){t.execCommand(s,e)});else if(s){if(s=="cut"||s=="copy")e?e.writeText(t.getCopyText()):document.execCommand("copy");t.execCommand(s)}y.firstChild.style.display="none",r=!1,s!="openCommandPallete"&&t.focus()};y=s.buildDom(["div",{"class":"ace_mobile-menu",ontouchstart:function(e){n="menu",e.stopPropagation(),e.preventDefault(),t.textInput.focus()},ontouchend:function(e){e.stopPropagation(),e.preventDefault(),o(e)},onclick:o},["span"],["span",{"class":"ace_mobile-button",action:"more"},"..."]],t.container)}function w(){y||b();var e=t.selection.cursor,n=t.renderer.textToScreenCoordinates(e.row,e.column),r=t.renderer.textToScreenCoordinates(0,0).pageX,i=t.renderer.scrollLeft,s=t.container.getBoundingClientRect();y.style.top=n.pageY-s.top-3+"px",n.pageX-s.left<s.width-70?(y.style.left="",y.style.right="10px"):(y.style.right="",y.style.left=r+i-s.left+"px"),y.style.display="",y.firstChild.style.display="none",t.on("input",E)}function E(e){y&&(y.style.display="none"),t.off("input",E)}function S(){l=null,clearTimeout(l);var e=t.selection.getRange(),r=e.contains(p.row,p.column);if(e.isEmpty()||!r)t.selection.moveToPosition(p),t.selection.selectWord();n="wait",w()}function x(){l=null,clearTimeout(l),t.selection.moveToPosition(p);var e=d>=2?t.selection.getLineRange(p.row):t.session.getBracketRange(p);e&&!e.isEmpty()?t.selection.setRange(e):t.selection.selectWord(),n="wait"}function T(){h+=60,c=setInterval(function(){h--<=0&&(clearInterval(c),c=null),Math.abs(v)<.01&&(v=0),Math.abs(m)<.01&&(m=0),h<20&&(v=.9*v),h<20&&(m=.9*m);var e=t.session.getScrollTop();t.renderer.scrollBy(10*v,10*m),e==t.session.getScrollTop()&&(h=0)},10)}var n="scroll",o,u,a,f,l,c,h=0,p,d=0,v=0,m=0,g,y;i.addListener(e,"contextmenu",function(e){if(!g)return;var n=t.textInput.getElement();n.focus()},t),i.addListener(e,"touchstart",function(e){var i=e.touches;if(l||i.length>1){clearTimeout(l),l=null,a=-1,n="zoom";return}g=t.$mouseHandler.isMousePressed=!0;var s=t.renderer.layerConfig.lineHeight,c=t.renderer.layerConfig.lineHeight,y=e.timeStamp;f=y;var b=i[0],w=b.clientX,E=b.clientY;Math.abs(o-w)+Math.abs(u-E)>s&&(a=-1),o=e.clientX=w,u=e.clientY=E,v=m=0;var T=new r(e,t);p=T.getDocumentPosition();if(y-a<500&&i.length==1&&!h)d++,e.preventDefault(),e.button=0,x();else{d=0;var N=t.selection.cursor,C=t.selection.isEmpty()?N:t.selection.anchor,k=t.renderer.$cursorLayer.getPixelPosition(N,!0),L=t.renderer.$cursorLayer.getPixelPosition(C,!0),A=t.renderer.scroller.getBoundingClientRect(),O=t.renderer.layerConfig.offset,M=t.renderer.scrollLeft,_=function(e,t){return e/=c,t=t/s-.75,e*e+t*t};if(e.clientX<A.left){n="zoom";return}var D=_(e.clientX-A.left-k.left+M,e.clientY-A.top-k.top+O),P=_(e.clientX-A.left-L.left+M,e.clientY-A.top-L.top+O);D<3.5&&P<3.5&&(n=D>P?"cursor":"anchor"),P<3.5?n="anchor":D<3.5?n="cursor":n="scroll",l=setTimeout(S,450)}a=y},t),i.addListener(e,"touchend",function(e){g=t.$mouseHandler.isMousePressed=!1,c&&clearInterval(c),n=="zoom"?(n="",h=0):l?(t.selection.moveToPosition(p),h=0,w()):n=="scroll"?(T(),E()):w(),clearTimeout(l),l=null},t),i.addListener(e,"touchmove",function(e){l&&(clearTimeout(l),l=null);var i=e.touches;if(i.length>1||n=="zoom")return;var s=i[0],a=o-s.clientX,c=u-s.clientY;if(n=="wait"){if(!(a*a+c*c>4))return e.preventDefault();n="cursor"}o=s.clientX,u=s.clientY,e.clientX=s.clientX,e.clientY=s.clientY;var h=e.timeStamp,p=h-f;f=h;if(n=="scroll"){var d=new r(e,t);d.speed=1,d.wheelX=a,d.wheelY=c,10*Math.abs(a)<Math.abs(c)&&(a=0),10*Math.abs(c)<Math.abs(a)&&(c=0),p!=0&&(v=a/p,m=c/p),t._emit("mousewheel",d),d.propagationStopped||(v=m=0)}else{var g=new r(e,t),y=g.getDocumentPosition();n=="cursor"?t.selection.moveCursorToPosition(y):n=="anchor"&&t.selection.setSelectionAnchor(y.row,y.column),t.renderer.scrollCursorIntoView(y),e.preventDefault()}},t)}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState===4&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=r.getDocumentHead(),i=document.createElement("script");i.src=e,n.appendChild(i),i.onload=i.onreadystatechange=function(e,n){if(n||!i.readyState||i.readyState=="loaded"||i.readyState=="complete")i=i.onload=i.onreadystatechange=null,n||t()}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var r={},i=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(!n.length&&!r)return;if(typeof t!="object"||!t)t={};t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=i),t.preventDefault||(t.preventDefault=s),n=n.slice();for(var o=0;o<n.length;o++){n[o](t,this);if(t.propagationStopped)break}if(r&&!t.defaultPrevented)return r(t,this)},r._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(!n)return;n=n.slice();for(var r=0;r<n.length;r++)n[r](t,this)},r.once=function(e,t){var n=this;this.on(e,function r(){n.off(e,r),t.apply(null,arguments)});if(!t)return new Promise(function(e){t=e})},r.setDefaultHandler=function(e,t){var n=this._defaultHandlers;n||(n=this._defaultHandlers={_disabled_:{}});if(n[e]){var r=n[e],i=n._disabled_[e];i||(n._disabled_[e]=i=[]),i.push(r);var s=i.indexOf(t);s!=-1&&i.splice(s,1)}n[e]=t},r.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(!n)return;var r=n._disabled_[e];if(n[e]==t)r&&this.setDefaultHandler(e,r.pop());else if(r){var i=r.indexOf(t);i!=-1&&r.splice(i,1)}},r.on=r.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),r.indexOf(t)==-1&&r[n?"unshift":"push"](t),t},r.off=r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(!n)return;var r=n.indexOf(t);r!==-1&&n.splice(r,1)},r.removeAllListeners=function(e){e||(this._eventRegistry=this._defaultHandlers=undefined),this._eventRegistry&&(this._eventRegistry[e]=undefined),this._defaultHandlers&&(this._defaultHandlers[e]=undefined)},t.EventEmitter=r}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"no use strict";function o(e){typeof console!="undefined"&&console.warn&&console.warn.apply(console,arguments)}function u(e,t){var n=new Error(e);n.data=t,typeof console=="object"&&console.error&&console.error(n),setTimeout(function(){throw n})}var r=e("./oop"),i=e("./event_emitter").EventEmitter,s={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};if(!e){var n=this.$options;e=Object.keys(n).filter(function(e){return!n[e].hidden})}else Array.isArray(e)||(t=e,e=Object.keys(t));return e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]===t)return;var n=this.$options[e];if(!n)return o('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:o('misspelled option "'+e+'"')}},a=function(){this.$defaultOptions={}};(function(){r.implement(this,i),this.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach(function(t){var r=n[t];typeof r=="string"&&(r={forwardTo:r}),r.name||(r.name=t),e.$options[r.name]=r,"initialValue"in r&&(e["$"+r.name]=r.initialValue)}),r.implement(e,s),this},this.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)})},this.setDefaultValue=function(e,t,n){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][t])break;if(!this.$defaultOptions[e][t])return!1}var r=this.$defaultOptions[e]||(this.$defaultOptions[e]={});r[t]&&(r.forwardTo?this.setDefaultValue(r.forwardTo,t,n):r[t].value=n)},this.setDefaultValues=function(e,t){Object.keys(t).forEach(function(n){this.setDefaultValue(e,n,t[n])},this)},this.warn=o,this.reportError=u}).call(a.prototype),t.AppConfig=a}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/dom","ace/lib/app_config"],function(e,t,n){"no use strict";function c(r){if(!a||!a.document)return;f.packaged=r||e.packaged||n.packaged||a.define&&define.packaged;var i={},s="",o=document.currentScript||document._currentScript,u=o&&o.ownerDocument||document,l=u.getElementsByTagName("script");for(var c=0;c<l.length;c++){var p=l[c],d=p.src||p.getAttribute("src");if(!d)continue;var v=p.attributes;for(var m=0,g=v.length;m<g;m++){var y=v[m];y.name.indexOf("data-ace-")===0&&(i[h(y.name.replace(/^data-ace-/,""))]=y.value)}var b=d.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);b&&(s=b[1])}s&&(i.base=i.base||s,i.packaged=!0),i.basePath=i.base,i.workerPath=i.workerPath||i.base,i.modePath=i.modePath||i.base,i.themePath=i.themePath||i.base,delete i.base;for(var w in i)typeof i[w]!="undefined"&&t.set(w,i[w])}function h(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./lib/net"),o=e("./lib/dom"),u=e("./lib/app_config").AppConfig;n.exports=t=new u;var a=function(){return this||typeof window!="undefined"&&window}(),f={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(e){if(!f.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return f[e]},t.set=function(e,t){if(f.hasOwnProperty(e))f[e]=t;else if(this.setDefaultValue("",e,t)==0)throw new Error("Unknown config key: "+e);e=="useStrictCSP"&&o.useStrictCSP(t)},t.all=function(){return r.copyObject(f)},t.$modes={},t.moduleUrl=function(e,t){if(f.$moduleUrls[e])return f.$moduleUrls[e];var n=e.split("/");t=t||n[n.length-2]||"";var r=t=="snippets"?"/":"-",i=n[n.length-1];if(t=="worker"&&r=="-"){var s=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");i=i.replace(s,"")}(!i||i==t)&&n.length>1&&(i=n[n.length-2]);var o=f[t+"Path"];return o==null?o=f.basePath:r=="/"&&(t=r=""),o&&o.slice(-1)!="/"&&(o+="/"),o+t+r+i+this.get("suffix")},t.setModuleUrl=function(e,t){return f.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,r){var i,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{i=e(n)}catch(u){}if(i&&!t.$loading[n])return r&&r(i);t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(r);if(t.$loading[n].length>1)return;var a=function(){e([n],function(e){t._emit("load.module",{name:n,module:e});var r=t.$loading[n];t.$loading[n]=null,r.forEach(function(t){t&&t(e)})})};if(!t.get("packaged"))return a();s.loadScript(t.moduleUrl(n,o),a),l()};var l=function(){!f.basePath&&!f.workerPath&&!f.modePath&&!f.themePath&&!Object.keys(f.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),l=function(){})};t.init=c,t.version="1.4.14"}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),s=e("./default_handlers").DefaultHandlers,o=e("./default_gutter_handler").GutterHandler,u=e("./mouse_event").MouseEvent,a=e("./dragdrop_handler").DragdropHandler,f=e("./touch_handler").addTouchListeners,l=e("../config"),c=function(e){var t=this;this.editor=e,new s(this),new o(this),new a(this);var n=function(t){var n=!document.hasFocus||!document.hasFocus()||!e.isFocused()&&document.activeElement==(e.textInput&&e.textInput.getElement());n&&window.focus(),e.focus()},u=e.renderer.getMouseEventTarget();r.addListener(u,"click",this.onMouseEvent.bind(this,"click"),e),r.addListener(u,"mousemove",this.onMouseMove.bind(this,"mousemove"),e),r.addMultiMouseDownListener([u,e.renderer.scrollBarV&&e.renderer.scrollBarV.inner,e.renderer.scrollBarH&&e.renderer.scrollBarH.inner,e.textInput&&e.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",e),r.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"),e),f(e.container,e);var l=e.renderer.$gutter;r.addListener(l,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),e),r.addListener(l,"click",this.onMouseEvent.bind(this,"gutterclick"),e),r.addListener(l,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),e),r.addListener(l,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),e),r.addListener(u,"mousedown",n,e),r.addListener(l,"mousedown",n,e),i.isIE&&e.renderer.scrollBarV&&(r.addListener(e.renderer.scrollBarV.element,"mousedown",n,e),r.addListener(e.renderer.scrollBarH.element,"mousedown",n,e)),e.on("mousemove",function(n){if(t.state||t.$dragDelay||!t.$dragEnabled)return;var r=e.renderer.screenToTextCoordinates(n.x,n.y),i=e.session.selection.getRange(),s=e.renderer;!i.isEmpty()&&i.insideStart(r.row,r.column)?s.setCursorStyle("default"):s.setCursorStyle("")},e)};(function(){this.onMouseEvent=function(e,t){if(!this.editor.session)return;this.editor._emit(e,new u(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;if(!n||!n.length)return;this.editor._emit(e,new u(t,this.editor))},this.onMouseWheel=function(e,t){var n=new u(t,this.editor);n.speed=this.$scrollSpeed*2,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor,s=this.editor.renderer;s.$isMousePressed=!0;var o=this,a=function(e){if(!e)return;if(i.isWebKit&&!e.which&&o.releaseMouse)return o.releaseMouse();o.x=e.clientX,o.y=e.clientY,t&&t(e),o.mouseEvent=new u(e,o.editor),o.$mouseMoved=!0},f=function(e){n.off("beforeEndOperation",c),clearInterval(h),n.session&&l(),o[o.state+"End"]&&o[o.state+"End"](e),o.state="",o.isMousePressed=s.$isMousePressed=!1,s.$keepTextAreaAtCursor&&s.$moveTextAreaToCursor(),o.$onCaptureMouseMove=o.releaseMouse=null,e&&o.onMouseEvent("mouseup",e),n.endOperation()},l=function(){o[o.state]&&o[o.state](),o.$mouseMoved=!1};if(i.isOldIE&&e.domEvent.type=="dblclick")return setTimeout(function(){f(e)});var c=function(e){if(!o.releaseMouse)return;n.curOp.command.name&&n.curOp.selectionChanged&&(o[o.state+"End"]&&o[o.state+"End"](),o.state="",o.releaseMouse())};n.on("beforeEndOperation",c),n.startOperation({command:{name:"mouse"}}),o.$onCaptureMouseMove=a,o.releaseMouse=r.capture(this.editor.container,a,f);var h=setInterval(l,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){if(t&&t.domEvent&&t.domEvent.type!="contextmenu")return;this.editor.off("nativecontextmenu",e),t&&t.domEvent&&r.stopEvent(t.domEvent)}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}).call(c.prototype),l.defineOptions(c.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:i.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=c}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";function i(e){e.on("click",function(t){var n=t.getDocumentPosition(),i=e.session,s=i.getFoldAt(n.row,n.column,1);s&&(t.getAccelKey()?i.removeFold(s):i.expandFold(s),t.stop());var o=t.domEvent&&t.domEvent.target;o&&r.hasCssClass(o,"ace_inline_button")&&r.hasCssClass(o,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),e.renderer.scrollCursorIntoView())}),e.on("gutterclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if(n=="foldWidgets"){var r=t.getDocumentPosition().row,i=e.session;i.foldWidgets&&i.foldWidgets[r]&&e.session.onFoldWidgetClick(r,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if(n=="foldWidgets"){var r=t.getDocumentPosition().row,i=e.session,s=i.getParentFoldRangeData(r,!0),o=s.range||s.firstRange;if(o){r=o.start.row;var u=i.getFoldAt(r,i.getLine(r).length,1);u?i.removeFold(u):(i.addFold("...",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}})}var r=e("../lib/dom");t.FoldHandler=i}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var r=e("../lib/keys"),i=e("../lib/event"),s=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]==e)return;while(t[t.length-1]&&t[t.length-1]!=this.$defaultHandler)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)},this.addKeyboardHandler=function(e,t){if(!e)return;typeof e=="function"&&!e.handleKeyboard&&(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);n!=-1&&this.$handlers.splice(n,1),t==undefined?this.$handlers.push(e):this.$handlers.splice(t,0,e),n==-1&&e.attach&&e.attach(this.$editor)},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return t==-1?!1:(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(t,e)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,n,r){var s,o=!1,u=this.$editor.commands;for(var a=this.$handlers.length;a--;){s=this.$handlers[a].handleKeyboard(this.$data,e,t,n,r);if(!s||!s.command)continue;s.command=="null"?o=!0:o=u.exec(s.command,this.$editor,s.args,r),o&&r&&e!=-1&&s.passEvent!=1&&s.command.passEvent!=1&&i.stopEvent(r);if(o)break}return!o&&e==-1&&(s={command:"insertstring"},o=u.exec("insertstring",this.$editor,t)),o&&this.$editor._signal&&this.$editor._signal("keyboardActivity",s),o},this.onCommandKey=function(e,t,n){var i=r.keyCodeToString(n);return this.$callKeyboardHandlers(t,i,n,e)},this.onTextInput=function(e){return this.$callKeyboardHandlers(-1,e)}}).call(s.prototype),t.KeyBinding=s}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";function F(e,t,n,r){var i=s?d:p,c=null,h=null,v=null,m=0,g=null,y=null,b=-1,w=null,E=null,T=[];if(!r)for(w=0,r=[];w<n;w++)r[w]=R(e[w]);o=s,u=!1,a=!1,f=!1,l=!1;for(E=0;E<n;E++){c=m,T[E]=h=q(e,r,T,E),m=i[c][h],g=m&240,m&=15,t[E]=v=i[m][5];if(g>0)if(g==16){for(w=b;w<E;w++)t[w]=1;b=-1}else b=-1;y=i[m][6];if(y)b==-1&&(b=E);else if(b>-1){for(w=b;w<E;w++)t[w]=v;b=-1}r[E]==S&&(t[E]=0),o|=v}if(l)for(w=0;w<n;w++)if(r[w]==x){t[w]=s;for(var C=w-1;C>=0;C--){if(r[C]!=N)break;t[C]=s}}}function I(e,t,n){if(o<e)return;if(e==1&&s==m&&!f){n.reverse();return}var r=n.length,i=0,u,a,l,c;while(i<r){if(t[i]>=e){u=i+1;while(u<r&&t[u]>=e)u++;for(a=i,l=u-1;a<l;a++,l--)c=n[a],n[a]=n[l],n[l]=c;i=u}i++}}function q(e,t,n,r){var i=t[r],o,c,h,p;switch(i){case g:case y:u=!1;case E:case w:return i;case b:return u?w:b;case T:return u=!0,a=!0,y;case N:return E;case C:if(r<1||r+1>=t.length||(o=n[r-1])!=b&&o!=w||(c=t[r+1])!=b&&c!=w)return E;return u&&(c=w),c==o?c:E;case k:o=r>0?n[r-1]:S;if(o==b&&r+1<t.length&&t[r+1]==b)return b;return E;case L:if(r>0&&n[r-1]==b)return b;if(u)return E;p=r+1,h=t.length;while(p<h&&t[p]==L)p++;if(p<h&&t[p]==b)return b;return E;case A:h=t.length,p=r+1;while(p<h&&t[p]==A)p++;if(p<h){var d=e[r],v=d>=1425&&d<=2303||d==64286;o=t[p];if(v&&(o==y||o==T))return y}if(r<1||(o=t[r-1])==S)return E;return n[r-1];case S:return u=!1,f=!0,s;case x:return l=!0,E;case O:case M:case D:case P:case _:u=!1;case H:return E}}function R(e){var t=e.charCodeAt(0),n=t>>8;return n==0?t>191?g:B[t]:n==5?/[\u0591-\u05f4]/.test(e)?y:g:n==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?A:/[\u0660-\u0669\u066b-\u066c]/.test(e)?w:t==1642?L:/[\u06f0-\u06f9]/.test(e)?b:T:n==32&&t<=8287?j[t&255]:n==254?t>=65136?T:E:E}function U(e){return e>="\u064b"&&e<="\u0655"}var r=["\u0621","\u0641"],i=["\u063a","\u064a"],s=0,o=0,u=!1,a=!1,f=!1,l=!1,c=!1,h=!1,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v=0,m=1,g=0,y=1,b=2,w=3,E=4,S=5,x=6,T=7,N=8,C=9,k=10,L=11,A=12,O=13,M=14,_=15,D=16,P=17,H=18,B=[H,H,H,H,H,H,H,H,H,x,S,x,N,S,H,H,H,H,H,H,H,H,H,H,H,H,H,H,S,S,S,x,N,E,E,L,L,L,E,E,E,E,E,k,C,k,C,C,b,b,b,b,b,b,b,b,b,b,C,E,E,E,E,E,E,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,E,E,E,E,E,E,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,E,E,E,E,H,H,H,H,H,H,S,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,C,E,L,L,L,L,E,E,E,E,g,E,E,H,E,E,L,L,b,b,E,g,E,E,E,b,g,E,E,E,E,E],j=[N,N,N,N,N,N,N,N,N,N,N,H,H,H,g,y,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,N,S,O,M,_,D,P,C,L,L,L,L,L,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,C,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,N];t.L=g,t.R=y,t.EN=b,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\u00b7",t.doBidiReorder=function(e,n,r){if(e.length<2)return{};var i=e.split(""),o=new Array(i.length),u=new Array(i.length),a=[];s=r?m:v,F(i,a,i.length,n);for(var f=0;f<o.length;o[f]=f,f++);I(2,a,o),I(1,a,o);for(var f=0;f<o.length-1;f++)n[f]===w?a[f]=t.AN:a[f]===y&&(n[f]>T&&n[f]<O||n[f]===E||n[f]===H)?a[f]=t.ON_R:f>0&&i[f-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(i[f])&&(a[f-1]=a[f]=t.R_H,f++);i[i.length-1]===t.DOT&&(a[i.length-1]=t.B),i[0]==="\u202b"&&(a[0]=t.RLE);for(var f=0;f<o.length;f++)u[f]=a[o[f]];return{logicalFromVisual:o,bidiLevels:u}},t.hasBidiCharacters=function(e,t){var n=!1;for(var r=0;r<e.length;r++)t[r]=R(e.charAt(r)),!n&&(t[r]==y||t[r]==T||t[r]==w)&&(n=!0);return n},t.getVisualFromLogicalIdx=function(e,t){for(var n=0;n<t.logicalFromVisual.length;n++)if(t.logicalFromVisual[n]==e)return n;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var r=e("./lib/bidiutil"),i=e("./lib/lang"),s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,o=function(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=r,this.charWidths=[],this.EOL="\u00ac",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\u00b6",this.RLE="\u202b",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=s.test(e.getValue())};(function(){this.isBidiRow=function(e,t,n){return this.seenBidi?(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,n),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},this.onChange=function(e){this.seenBidi?this.currentRow=null:e.action=="insert"&&s.test(e.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n=this.session.$getRowCacheIndex(t,this.currentRow);n>=0&&(e=this.session.$docRowCache[n])}return e},this.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n,r=this.session.$getRowCacheIndex(t,this.currentRow);while(this.currentRow-e>0){n=this.session.$getRowCacheIndex(t,this.currentRow-e-1);if(n!==r)break;r=n,e++}}else e=this.currentRow;return e},this.updateRowLine=function(e,t){e===undefined&&(e=this.getDocumentRow());var n=e===this.session.getLength()-1,s=n?this.EOF:this.EOL;this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE;if(this.session.$useWrapMode){var o=this.session.$wrapData[e];o&&(t===undefined&&(t=this.getSplitIndex()),t>0&&o.length?(this.wrapIndent=o.indent,this.wrapOffset=this.wrapIndent*this.charWidths[r.L],this.line=t<o.length?this.line.substring(o[t-1],o[t]):this.line.substring(o[o.length-1])):this.line=this.line.substring(0,o[t])),t==o.length&&(this.line+=this.showInvisibles?s:r.DOT)}else this.line+=this.showInvisibles?s:r.DOT;var u=this.session,a=0,f;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(e,t){return e==="	"||u.isFullWidth(e.charCodeAt(0))?(f=e==="	"?u.getScreenTabSize(t+a):2,a+=f-1,i.stringRepeat(r.DOT,f)):e}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==r.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var e=[];r.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=r.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(e){if(this.characterWidth===e.$characterSize.width)return;this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,n=e.$measureCharWidth("\u05d4");this.charWidths[r.L]=this.charWidths[r.EN]=this.charWidths[r.ON_R]=t,this.charWidths[r.R]=this.charWidths[r.AN]=n,this.charWidths[r.R_H]=n*.45,this.charWidths[r.B]=this.charWidths[r.RLE]=0,this.currentRow=null},this.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},this.setEolChar=function(e){this.EOL=e},this.setContentWidth=function(e){this.contentWidth=e},this.isRtlLine=function(e){return this.$isRtl?!0:e!=undefined?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir},this.setRtlDirection=function(e,t){var n=e.getCursorPosition();for(var r=e.selection.getSelectionAnchor().row;r<=n.row;r++)!t&&e.session.getLine(r).charAt(0)===e.session.$bidiHandler.RLE?e.session.doc.removeInLine(r,0,1):t&&e.session.getLine(r).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:r},e.session.$bidiHandler.RLE)},this.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,n=e>t?this.session.getOverwrite()?e:e-1:t,i=r.getVisualFromLogicalIdx(n,this.bidiMap),s=this.bidiMap.bidiLevels,o=0;!this.session.getOverwrite()&&e<=t&&s[i]%2!==0&&i++;for(var u=0;u<i;u++)o+=this.charWidths[s[u]];return!this.session.getOverwrite()&&e>t&&s[i]%2===0&&(o+=this.charWidths[s[i]]),this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(o+=this.rtlLineOffset),o},this.getSelections=function(e,t){var n=this.bidiMap,r=n.bidiLevels,i,s=[],o=0,u=Math.min(e,t)-this.wrapIndent,a=Math.max(e,t)-this.wrapIndent,f=!1,l=!1,c=0;this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var h,p=0;p<r.length;p++)h=n.logicalFromVisual[p],i=r[p],f=h>=u&&h<a,f&&!l?c=o:!f&&l&&s.push({left:c,width:o-c}),o+=this.charWidths[i],l=f;f&&p===r.length&&s.push({left:c,width:o-c});if(this.isRtlDir)for(var d=0;d<s.length;d++)s[d].left+=this.rtlLineOffset;return s},this.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,e=Math.max(e,0),n=0,r=0,i=this.bidiMap.bidiLevels,s=this.charWidths[i[r]];this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);while(e>n+s/2){n+=s;if(r===i.length-1){s=0;break}s=this.charWidths[i[++r]]}return r>0&&i[r-1]%2!==0&&i[r]%2===0?(e<n&&r--,t=this.bidiMap.logicalFromVisual[r]):r>0&&i[r-1]%2===0&&i[r]%2!==0?t=1+(e>n?this.bidiMap.logicalFromVisual[r]:this.bidiMap.logicalFromVisual[r-1]):this.isRtlDir&&r===i.length-1&&s===0&&i[r-1]%2===0||!this.isRtlDir&&r===0&&i[r]%2!==0?t=1+this.bidiMap.logicalFromVisual[r]:(r>0&&i[r-1]%2!==0&&s!==0&&r--,t=this.bidiMap.logicalFromVisual[r]),t===0&&this.isRtlDir&&t++,t+this.wrapIndent}}).call(o.prototype),t.BidiHandler=o}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,u=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",function(e){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),!t.$isEmpty&&!t.$silent&&t._emit("changeSelection"),!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column&&(t.$desiredColumn=null)}),this.anchor.on("change",function(){t.$anchorChanged=!0,!t.$isEmpty&&!t.$silent&&t._emit("changeSelection")})};(function(){r.implement(this,s),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.$isEmpty?o.fromPoints(t,t):this.isBackwards()?o.fromPoints(t,e):o.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(e,t){var n=t?e.end:e.start,r=t?e.start:e.end;this.$setSelection(n.row,n.column,r.row,r.column)},this.$setSelection=function(e,t,n,r){if(this.$silent)return;var i=this.$isEmpty,s=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(n,r),this.$isEmpty=!o.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||i!=this.$isEmpty||s)&&this._emit("changeSelection")},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(typeof t=="undefined"){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n=typeof e=="number"?e:this.lead.row,r,i=this.session.getFoldLine(n);return i?(n=i.start.row,r=i.end.row):r=n,t===!0?new o(n,0,r,this.session.getLine(r).length):new o(n,0,r+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(e,t,n){var r=e.column,i=e.column+t;return n<0&&(r=e.column-t,i=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(r,i).split(" ").length-1==t},this.moveCursorLeft=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(e.column===0)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(e,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize(),e=this.lead;this.wouldMoveIntoSoftTab(e,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(n,0),i=this.session.getDisplayLine(e,null,r.row,r.column),s=i.match(/^\s*/);s[0].length!=t&&!this.session.$useEmacsStyleLineStart&&(r.column+=s[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var r=n.search(/\s+$/);r>0&&(t.column=r)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var i=this.session.getFoldAt(e,t,1);if(i){this.moveCursorTo(i.end.row,i.end.column);return}this.session.nonTokenRe.exec(r)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(t));if(t>=n.length){this.moveCursorTo(e,n.length),this.moveCursorRight(),e<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(r)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)},this.moveCursorLongWordLeft=function(){var e=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(e,t,-1)){this.moveCursorTo(n.start.row,n.start.column);return}var r=this.session.getFoldStringAt(e,t,-1);r==null&&(r=this.doc.getLine(e).substring(0,t));var s=i.stringReverse(r);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(s)&&(t-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0);if(t<=0){this.moveCursorTo(e,0),this.moveCursorLeft(),e>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(s)&&(t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)},this.$shortWordEndIndex=function(e){var t=0,n,r=/\s/,i=this.session.tokenRe;i.lastIndex=0;if(this.session.tokenRe.exec(e))t=this.session.tokenRe.lastIndex;else{while((n=e[t])&&r.test(n))t++;if(t<1){i.lastIndex=0;while((n=e[t])&&!i.test(n)){i.lastIndex=0,t++;if(r.test(n)){if(t>2){t--;break}while((n=e[t])&&r.test(n))t++;if(t>2)break}}}}return i.lastIndex=0,t},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i=this.session.getFoldAt(e,t,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(t==n.length){var s=this.doc.getLength();do e++,r=this.doc.getLine(e);while(e<s&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),t=0}var o=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+o)},this.moveCursorShortWordLeft=function(){var e=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(n.start.row,n.start.column);var r=this.session.getLine(e).substring(0,t);if(t===0){do e--,r=this.doc.getLine(e);while(e>0&&/^\s*$/.test(r));t=r.length,/\s+$/.test(r)||(r="")}var s=i.stringReverse(r),o=this.$shortWordEndIndex(s);return this.moveCursorTo(e,t-o)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n=this.session.documentToScreenPosition(this.lead.row,this.lead.column),r;t===0&&(e!==0&&(this.session.$bidiHandler.isBidiRow(n.row,this.lead.row)?(r=this.session.$bidiHandler.getPosLeft(n.column),n.column=Math.round(r/this.session.$bidiHandler.charWidths[0])):r=n.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);if(e!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var i=this.session.lineWidgets[this.lead.row];e<0?e-=i.rowsAbove||0:e>0&&(e+=i.rowCount-(i.rowsAbove||0))}var s=this.session.screenToDocumentPosition(n.row+e,n.column,r);e!==0&&t===0&&s.row===this.lead.row&&s.column===this.lead.column,this.moveCursorTo(s.row,s.column+t,t===0)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0;var i=this.session.getLine(e);/[\uDC00-\uDFFF]/.test(i.charAt(t))&&i.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach()},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var n=this.getCursor();return o.fromPoints(t,n)}catch(r){return o.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t});else{var e=this.getRange();e.isBackwards=this.isBackwards()}return e},this.fromJSON=function(e){if(e.start==undefined){if(this.rangeList&&e.length>1){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=o.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(u.prototype),t.Selection=u}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(e,t,n){"use strict";var r=e("./config"),i=2e3,s=function(e){this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){var n=this.states[t],r=[],i=0,s=this.matchMappings[t]={defaultToken:"text"},o="g",u=[];for(var a=0;a<n.length;a++){var f=n[a];f.defaultToken&&(s.defaultToken=f.defaultToken),f.caseInsensitive&&(o="gi");if(f.regex==null)continue;f.regex instanceof RegExp&&(f.regex=f.regex.toString().slice(1,-1));var l=f.regex,c=(new RegExp("(?:("+l+")|(.))")).exec("a").length-2;Array.isArray(f.token)?f.token.length==1||c==1?f.token=f.token[0]:c-1!=f.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:f,groupCount:c-1}),f.token=f.token[0]):(f.tokenArray=f.token,f.token=null,f.onMatch=this.$arrayTokens):typeof f.token=="function"&&!f.onMatch&&(c>1?f.onMatch=this.$applyToken:f.onMatch=f.token),c>1&&(/\\\d/.test(f.regex)?l=f.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+i+1)}):(c=1,l=this.removeCapturingGroups(f.regex)),!f.splitRegex&&typeof f.token!="string"&&u.push(f)),s[i]=a,i+=c,r.push(l),f.onMatch||(f.onMatch=null)}r.length||(s[0]=0,r.push("$")),u.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,o)},this),this.regExps[t]=new RegExp("("+r.join(")|(")+")|($)",o)}};(function(){this.$setMaxTokenCount=function(e){i=e|0},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if(typeof n=="string")return[{type:n,value:e}];var r=[];for(var i=0,s=n.length;i<s;i++)t[i]&&(r[r.length]={type:n[i],value:t[i]});return r},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";var n=[],r=this.tokenArray;for(var i=0,s=r.length;i<s;i++)t[i+1]&&(n[n.length]={type:r[i],value:t[i+1]});return n},this.removeCapturingGroups=function(e){var t=e.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(e,t){return t?"(?:":e});return t},this.createSplitterRegexp=function(e,t){if(e.indexOf("(?=")!=-1){var n=0,r=!1,i={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,s,o,u,a){return r?r=u!="]":u?r=!0:o?(n==i.stack&&(i.end=a+1,i.stack=-1),n--):s&&(n++,s.length!=1&&(i.stack=n,i.start=a)),e}),i.end!=null&&/^\)*$/.test(e.substr(i.end))&&(e=e.substring(0,i.start)+e.substr(i.end))}return e.charAt(0)!="^"&&(e="^"+e),e.charAt(e.length-1)!="$"&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&typeof t!="string"){var n=t.slice(0);t=n[0],t==="#tmp"&&(n.shift(),t=n.shift())}else var n=[];var r=t||"start",s=this.states[r];s||(r="start",s=this.states[r]);var o=this.matchMappings[r],u=this.regExps[r];u.lastIndex=0;var a,f=[],l=0,c=0,h={type:null,value:""};while(a=u.exec(e)){var p=o.defaultToken,d=null,v=a[0],m=u.lastIndex;if(m-v.length>l){var g=e.substring(l,m-v.length);h.type==p?h.value+=g:(h.type&&f.push(h),h={type:p,value:g})}for(var y=0;y<a.length-2;y++){if(a[y+1]===undefined)continue;d=s[o[y]],d.onMatch?p=d.onMatch(v,r,n,e):p=d.token,d.next&&(typeof d.next=="string"?r=d.next:r=d.next(r,n),s=this.states[r],s||(this.reportError("state doesn't exist",r),r="start",s=this.states[r]),o=this.matchMappings[r],l=m,u=this.regExps[r],u.lastIndex=m),d.consumeLineEnd&&(l=m);break}if(v)if(typeof p=="string")!!d&&d.merge===!1||h.type!==p?(h.type&&f.push(h),h={type:p,value:v}):h.value+=v;else if(p){h.type&&f.push(h),h={type:null,value:""};for(var y=0;y<p.length;y++)f.push(p[y])}if(l==e.length)break;l=m;if(c++>i){c>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});while(l<e.length)h.type&&f.push(h),h={value:e.substring(l,l+=500),type:"overflow"};r="start",n=[];break}}return h.type&&f.push(h),n.length>1&&n[0]!==r&&n.unshift("#tmp",r),{tokens:f,state:n.length?n:r}},this.reportError=r.reportError}).call(s.prototype),t.Tokenizer=s}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../lib/lang"),i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(!t){for(var n in e)this.$rules[n]=e[n];return}for(var n in e){var r=e[n];for(var i=0;i<r.length;i++){var s=r[i];if(s.next||s.onMatch)typeof s.next=="string"&&s.next.indexOf(t)!==0&&(s.next=t+s.next),s.nextState&&s.nextState.indexOf(t)!==0&&(s.nextState=t+s.nextState)}this.$rules[t+n]=r}},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,i,s){var o=typeof e=="function"?(new e).getRules():e;if(i)for(var u=0;u<i.length;u++)i[u]=t+i[u];else{i=[];for(var a in o)i.push(t+a)}this.addRules(o,t);if(n){var f=Array.prototype[s?"push":"unshift"];for(var u=0;u<i.length;u++)f.apply(this.$rules[i[u]],r.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return(e!="start"||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){function i(s){var o=r[s];o.processed=!0;for(var u=0;u<o.length;u++){var a=o[u],f=null;Array.isArray(a)&&(f=a,a={}),!a.regex&&a.start&&(a.regex=a.start,a.next||(a.next=[]),a.next.push({defaultToken:a.token},{token:a.token+".end",regex:a.end||a.start,next:"pop"}),a.token=a.token+".start",a.push=!0);var l=a.next||a.push;if(l&&Array.isArray(l)){var c=a.stateName;c||(c=a.token,typeof c!="string"&&(c=c[0]||""),r[c]&&(c+=n++)),r[c]=l,a.next=c,i(c)}else l=="pop"&&(a.next=t);a.push&&(a.nextState=a.next||a.push,a.next=e,delete a.push);if(a.rules)for(var h in a.rules)r[h]?r[h].push&&r[h].push.apply(r[h],a.rules[h]):r[h]=a.rules[h];var p=typeof a=="string"?a:a.include;p&&(Array.isArray(p)?f=p.map(function(e){return r[e]}):f=r[p]);if(f){var d=[u,1].concat(f);a.noEscape&&(d=d.filter(function(e){return!e.next})),o.splice.apply(o,d),u--}a.keywordMap&&(a.token=this.createKeywordMapper(a.keywordMap,a.defaultToken||"text",a.caseInsensitive),delete a.defaultToken)}}var n=0,r=this.$rules;Object.keys(r).forEach(i,this)},this.createKeywordMapper=function(e,t,n,r){var i=Object.create(null);return this.$keywordList=[],Object.keys(e).forEach(function(t){var s=e[t],o=s.split(r||"|");for(var u=o.length;u--;){var a=o[u];this.$keywordList.push(a),n&&(a=a.toLowerCase()),i[a]=t}},this),e=null,n?function(e){return i[e.toLowerCase()]||t}:function(e){return i[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(i.prototype),t.TextHighlightRules=i}),ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var r=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(undefined){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if(typeof e=="function")var n=(new e).getBehaviours(t);else var n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(!e)return this.$behaviours;var t={};for(var n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}}).call(r.prototype),t.Behaviour=r}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("./range").Range,i=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){this.$tokenIndex-=1;while(this.$tokenIndex<0){this.$row-=1;if(this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;var e;while(this.$tokenIndex>=this.$rowTokens.length){this.$row+=1,e||(e=this.$session.getLength());if(this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(n!==undefined)return n;n=0;while(t>0)t-=1,n+=e[t].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new r(this.$row,t,this.$row,t+e.value.length)}}).call(i.prototype),t.TokenIterator=i}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../../lib/oop"),i=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,o=e("../../lib/lang"),u=["text","paren.rparen","rparen","paren","punctuation.operator"],a=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],f,l={},c={'"':'"',"'":"'"},h=function(e){var t=-1;e.multiSelect&&(t=e.selection.index,l.rangeCount!=e.multiSelect.rangeCount&&(l={rangeCount:e.multiSelect.rangeCount}));if(l[t])return f=l[t];f=l[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},p=function(e,t,n,r){var i=e.end.row-e.start.row;return{text:n+t+r,selection:[0,e.start.column+1,i,e.end.column+(i?0:1)]}},d=function(e){this.add("braces","insertion",function(t,n,r,i,s){var u=r.getCursorPosition(),a=i.doc.getLine(u.row);if(s=="{"){h(r);var l=r.getSelectionRange(),c=i.doc.getTextRange(l);if(c!==""&&c!=="{"&&r.getWrapBehavioursEnabled())return p(l,c,"{","}");if(d.isSaneInsertion(r,i))return/[\]\}\)]/.test(a[u.column])||r.inMultiSelectMode||e&&e.braces?(d.recordAutoInsert(r,i,"}"),{text:"{}",selection:[1,1]}):(d.recordMaybeInsert(r,i,"{"),{text:"{",selection:[1,1]})}else if(s=="}"){h(r);var v=a.substring(u.column,u.column+1);if(v=="}"){var m=i.$findOpeningBracket("}",{column:u.column+1,row:u.row});if(m!==null&&d.isAutoInsertedClosing(u,a,s))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else{if(s=="\n"||s=="\r\n"){h(r);var g="";d.isMaybeInsertedClosing(u,a)&&(g=o.stringRepeat("}",f.maybeInsertedBrackets),d.clearMaybeInsertedClosing());var v=a.substring(u.column,u.column+1);if(v==="}"){var y=i.findMatchingBracket({row:u.row,column:u.column+1},"}");if(!y)return null;var b=this.$getIndent(i.getLine(y.row))}else{if(!g){d.clearMaybeInsertedClosing();return}var b=this.$getIndent(a)}var w=b+i.getTabString();return{text:"\n"+w+"\n"+b+g,selection:[1,w.length,1,w.length]}}d.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&s=="{"){h(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.end.column,i.end.column+1);if(u=="}")return i.end.column++,i;f.maybeInsertedBrackets--}}),this.add("parens","insertion",function(e,t,n,r,i){if(i=="("){h(n);var s=n.getSelectionRange(),o=r.doc.getTextRange(s);if(o!==""&&n.getWrapBehavioursEnabled())return p(s,o,"(",")");if(d.isSaneInsertion(n,r))return d.recordAutoInsert(n,r,")"),{text:"()",selection:[1,1]}}else if(i==")"){h(n);var u=n.getCursorPosition(),a=r.doc.getLine(u.row),f=a.substring(u.column,u.column+1);if(f==")"){var l=r.$findOpeningBracket(")",{column:u.column+1,row:u.row});if(l!==null&&d.isAutoInsertedClosing(u,a,i))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&s=="("){h(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if(u==")")return i.end.column++,i}}),this.add("brackets","insertion",function(e,t,n,r,i){if(i=="["){h(n);var s=n.getSelectionRange(),o=r.doc.getTextRange(s);if(o!==""&&n.getWrapBehavioursEnabled())return p(s,o,"[","]");if(d.isSaneInsertion(n,r))return d.recordAutoInsert(n,r,"]"),{text:"[]",selection:[1,1]}}else if(i=="]"){h(n);var u=n.getCursorPosition(),a=r.doc.getLine(u.row),f=a.substring(u.column,u.column+1);if(f=="]"){var l=r.$findOpeningBracket("]",{column:u.column+1,row:u.row});if(l!==null&&d.isAutoInsertedClosing(u,a,i))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(e,t,n,r,i){var s=r.doc.getTextRange(i);if(!i.isMultiLine()&&s=="["){h(n);var o=r.doc.getLine(i.start.row),u=o.substring(i.start.column+1,i.start.column+2);if(u=="]")return i.end.column++,i}}),this.add("string_dquotes","insertion",function(e,t,n,r,i){var s=r.$mode.$quotes||c;if(i.length==1&&s[i]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(i)!=-1)return;h(n);var o=i,u=n.getSelectionRange(),a=r.doc.getTextRange(u);if(a!==""&&(a.length!=1||!s[a])&&n.getWrapBehavioursEnabled())return p(u,a,o,o);if(!a){var f=n.getCursorPosition(),l=r.doc.getLine(f.row),d=l.substring(f.column-1,f.column),v=l.substring(f.column,f.column+1),m=r.getTokenAt(f.row,f.column),g=r.getTokenAt(f.row,f.column+1);if(d=="\\"&&m&&/escape/.test(m.type))return null;var y=m&&/string|escape/.test(m.type),b=!g||/string|escape/.test(g.type),w;if(v==o)w=y!==b,w&&/string\.end/.test(g.type)&&(w=!1);else{if(y&&!b)return null;if(y&&b)return null;var E=r.$mode.tokenRe;E.lastIndex=0;var S=E.test(d);E.lastIndex=0;var x=E.test(d);if(S||x)return null;if(v&&!/[\s;,.})\]\\]/.test(v))return null;var T=l[f.column-2];if(!(d!=o||T!=o&&!E.test(T)))return null;w=!0}return{text:w?o+o:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(e,t,n,r,i){var s=r.$mode.$quotes||c,o=r.doc.getTextRange(i);if(!i.isMultiLine()&&s.hasOwnProperty(o)){h(n);var u=r.doc.getLine(i.start.row),a=u.substring(i.start.column+1,i.start.column+2);if(a==o)return i.end.column++,i}})};d.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),r=new s(t,n.row,n.column);if(!this.$matchTokenType(r.getCurrentToken()||"text",u)){if(/[)}\]]/.test(e.session.getLine(n.row)[n.column]))return!0;var i=new s(t,n.row,n.column+1);if(!this.$matchTokenType(i.getCurrentToken()||"text",u))return!1}return r.stepForward(),r.getCurrentTokenRow()!==n.row||this.$matchTokenType(r.getCurrentToken()||"text",a)},d.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},d.recordAutoInsert=function(e,t,n){var r=e.getCursorPosition(),i=t.doc.getLine(r.row);this.isAutoInsertedClosing(r,i,f.autoInsertedLineEnd[0])||(f.autoInsertedBrackets=0),f.autoInsertedRow=r.row,f.autoInsertedLineEnd=n+i.substr(r.column),f.autoInsertedBrackets++},d.recordMaybeInsert=function(e,t,n){var r=e.getCursorPosition(),i=t.doc.getLine(r.row);this.isMaybeInsertedClosing(r,i)||(f.maybeInsertedBrackets=0),f.maybeInsertedRow=r.row,f.maybeInsertedLineStart=i.substr(0,r.column)+n,f.maybeInsertedLineEnd=i.substr(r.column),f.maybeInsertedBrackets++},d.isAutoInsertedClosing=function(e,t,n){return f.autoInsertedBrackets>0&&e.row===f.autoInsertedRow&&n===f.autoInsertedLineEnd[0]&&t.substr(e.column)===f.autoInsertedLineEnd},d.isMaybeInsertedClosing=function(e,t){return f.maybeInsertedBrackets>0&&e.row===f.maybeInsertedRow&&t.substr(e.column)===f.maybeInsertedLineEnd&&t.substr(0,e.column)==f.maybeInsertedLineStart},d.popAutoInsertedClosing=function(){f.autoInsertedLineEnd=f.autoInsertedLineEnd.substr(1),f.autoInsertedBrackets--},d.clearMaybeInsertedClosing=function(){f&&(f.maybeInsertedBrackets=0,f.maybeInsertedRow=-1)},r.inherits(d,i),t.CstyleBehaviour=d}),ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";var r=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],i=0,s=[];for(var o=0;o<r.length;o+=2)s.push(i+=r[o]),r[o+1]&&s.push(45,i+=r[o+1]);t.wordChars=String.fromCharCode.apply(null,s)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var r=e("../config"),i=e("../tokenizer").Tokenizer,s=e("./text_highlight_rules").TextHighlightRules,o=e("./behaviour/cstyle").CstyleBehaviour,u=e("../unicode"),a=e("../lib/lang"),f=e("../token_iterator").TokenIterator,l=e("../range").Range,c=function(){this.HighlightRules=s};(function(){this.$defaultBehaviour=new o,this.tokenRe=new RegExp("^["+u.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+u.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new i(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,r){function w(e){for(var t=n;t<=r;t++)e(i.getLine(t),t)}var i=t.doc,s=!0,o=!0,u=Infinity,f=t.getTabSize(),l=!1;if(!this.lineCommentStart){if(!this.blockComment)return!1;var c=this.blockComment.start,h=this.blockComment.end,p=new RegExp("^(\\s*)(?:"+a.escapeRegExp(c)+")"),d=new RegExp("(?:"+a.escapeRegExp(h)+")\\s*$"),v=function(e,t){if(g(e,t))return;if(!s||/\S/.test(e))i.insertInLine({row:t,column:e.length},h),i.insertInLine({row:t,column:u},c)},m=function(e,t){var n;(n=e.match(d))&&i.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(p))&&i.removeInLine(t,n[1].length,n[0].length)},g=function(e,n){if(p.test(e))return!0;var r=t.getTokens(n);for(var i=0;i<r.length;i++)if(r[i].type==="comment")return!0}}else{if(Array.isArray(this.lineCommentStart))var p=this.lineCommentStart.map(a.escapeRegExp).join("|"),c=this.lineCommentStart[0];else var p=a.escapeRegExp(this.lineCommentStart),c=this.lineCommentStart;p=new RegExp("^(\\s*)(?:"+p+") ?"),l=t.getUseSoftTabs();var m=function(e,t){var n=e.match(p);if(!n)return;var r=n[1].length,s=n[0].length;!b(e,r,s)&&n[0][s-1]==" "&&s--,i.removeInLine(t,r,s)},y=c+" ",v=function(e,t){if(!s||/\S/.test(e))b(e,u,u)?i.insertInLine({row:t,column:u},y):i.insertInLine({row:t,column:u},c)},g=function(e,t){return p.test(e)},b=function(e,t,n){var r=0;while(t--&&e.charAt(t)==" ")r++;if(r%f!=0)return!1;var r=0;while(e.charAt(n++)==" ")r++;return f>2?r%f!=f-1:r%f==0}}var E=Infinity;w(function(e,t){var n=e.search(/\S/);n!==-1?(n<u&&(u=n),o&&!g(e,t)&&(o=!1)):E>e.length&&(E=e.length)}),u==Infinity&&(u=E,s=!1,o=!1),l&&u%f!=0&&(u=Math.floor(u/f)*f),w(o?m:v)},this.toggleBlockComment=function(e,t,n,r){var i=this.blockComment;if(!i)return;!i.start&&i[0]&&(i=i[0]);var s=new f(t,r.row,r.column),o=s.getCurrentToken(),u=t.selection,a=t.selection.toOrientedRange(),c,h;if(o&&/comment/.test(o.type)){var p,d;while(o&&/comment/.test(o.type)){var v=o.value.indexOf(i.start);if(v!=-1){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;p=new l(m,g,m,g+i.start.length);break}o=s.stepBackward()}var s=new f(t,r.row,r.column),o=s.getCurrentToken();while(o&&/comment/.test(o.type)){var v=o.value.indexOf(i.end);if(v!=-1){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;d=new l(m,g,m,g+i.end.length);break}o=s.stepForward()}d&&t.remove(d),p&&(t.remove(p),c=p.start.row,h=-i.start.length)}else h=i.start.length,c=n.start.row,t.insert(n.end,i.end),t.insert(n.start,i.start);a.start.row==c&&(a.start.column+=h),a.end.row==c&&(a.end.column+=h),t.selection.fromOrientedRange(a)},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var t in e)if(e[t]){var n=e[t],i=n.prototype.$id,s=r.$modes[i];s||(r.$modes[i]=s=new n),r.$modes[t]||(r.$modes[t]=s),this.$embeds.push(t),this.$modes[t]=s}var o=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(var t=0;t<o.length;t++)(function(e){var n=o[t],r=e[n];e[o[t]]=function(){return this.$delegator(n,arguments,r)}})(this)},this.$delegator=function(e,t,n){var r=t[0]||"start";if(typeof r!="string"){if(Array.isArray(r[2])){var i=r[2][r[2].length-1],s=this.$modes[i];if(s)return s[e].apply(s,[r[1]].concat([].slice.call(t,1)))}r=r[0]||"start"}for(var o=0;o<this.$embeds.length;o++){if(!this.$modes[this.$embeds[o]])continue;var u=r.split(this.$embeds[o]);if(!u[0]&&u[1]){t[0]=u[1];var s=this.$modes[this.$embeds[o]];return s[e].apply(s,t)}}var a=n.apply(this,t);return n?a:undefined},this.transformAction=function(e,t,n,r,i){if(this.$behaviour){var s=this.$behaviour.getBehaviours();for(var o in s)if(s[o][t]){var u=s[o][t].apply(this,arguments);if(u)return u}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var r in t){var i=t[r];for(var s=0,o=i.length;s<o;s++)if(typeof i[s].token=="string")/keyword|support|storage/.test(i[s].token)&&n.push(i[s].regex);else if(typeof i[s].token=="object")for(var u=0,a=i[s].token.length;u<a;u++)if(/keyword|support|storage/.test(i[s].token[u])){var r=i[s].regex.match(/\(.+?\)/g)[u];n.push(r.substr(1,r.length-2))}}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,r){var i=this.$keywordList||this.$createKeywordList();return i.map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(c.prototype),t.Mode=c}),ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";function r(e,t){throw console.log("Invalid Delta:",e),"Invalid Delta: "+t}function i(e,t){return t.row>=0&&t.row<e.length&&t.column>=0&&t.column<=e[t.row].length}function s(e,t){t.action!="insert"&&t.action!="remove"&&r(t,"delta.action must be 'insert' or 'remove'"),t.lines instanceof Array||r(t,"delta.lines must be an Array"),(!t.start||!t.end)&&r(t,"delta.start/end must be an present");var n=t.start;i(e,t.start)||r(t,"delta.start must be contained in document");var s=t.end;t.action=="remove"&&!i(e,s)&&r(t,"delta.end must contained in document for 'remove' actions");var o=s.row-n.row,u=s.column-(o==0?n.column:0);(o!=t.lines.length-1||t.lines[o].length!=u)&&r(t,"delta.range must match delta lines")}t.applyDelta=function(e,t,n){var r=t.start.row,i=t.start.column,s=e[r]||"";switch(t.action){case"insert":var o=t.lines;if(o.length===1)e[r]=s.substring(0,i)+t.lines[0]+s.substring(i);else{var u=[r,1].concat(t.lines);e.splice.apply(e,u),e[r]=s.substring(0,i)+e[r],e[r+t.lines.length-1]+=s.substring(i)}break;case"remove":var a=t.end.column,f=t.end.row;r===f?e[r]=s.substring(0,i)+s.substring(a):e.splice(r,f-r+1,s.substring(0,i)+e[f].substring(a))}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),typeof n=="undefined"?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function e(e,t,n){var r=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&r}function t(t,n,r){var i=t.action=="insert",s=(i?1:-1)*(t.end.row-t.start.row),o=(i?1:-1)*(t.end.column-t.start.column),u=t.start,a=i?u:t.end;return e(n,u,r)?{row:n.row,column:n.column}:e(a,n,!r)?{row:n.row+s,column:n.column+(n.row==a.row?o:0)}:{row:u.row,column:u.column}}r.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){if(e.start.row==e.end.row&&e.start.row!=this.row)return;if(e.start.row>this.row)return;var n=t(e,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)},this.setPosition=function(e,t,n){var r;n?r={row:e,column:t}:r=this.$clipPositionToDocument(e,t);if(this.row==r.row&&this.column==r.column)return;var i={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:i,value:r})},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(s.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./apply_delta").applyDelta,s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,u=e("./anchor").Anchor,a=function(e){this.$lines=[""],e.length===0?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){r.implement(this,s),this.setValue=function(e){var t=this.getLength()-1;this.remove(new o(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new u(this,e,t)},"aaa".split(/a/).length===0?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){if(this.$newLineMode===e)return;this.$newLineMode=e,this._signal("changeNewLineMode")},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return e=="\r\n"||e=="\r"||e=="\n"},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{t=this.getLines(e.start.row,e.end.row),t[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),r=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:r,action:"insert",lines:[t]},!0),this.clonePos(r)},this.clippedPos=function(e,t){var n=this.getLength();e===undefined?e=n:e<0?e=0:e>=n&&(e=n-1,t=undefined);var r=this.getLine(e);return t==undefined&&(t=r.length),t=Math.min(Math.max(t,0),r.length),{row:e,column:t}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){e=Math.min(Math.max(e,0),this.getLength());var n=0;e<this.getLength()?(t=t.concat([""]),n=0):(t=[""].concat(t),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),r={row:n.row+t.length-1,column:(t.length==1?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:r,action:"insert",lines:t}),this.clonePos(r)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},this.removeInLine=function(e,t,n){var r=this.clippedPos(e,t),i=this.clippedPos(e,n);return this.applyDelta({start:r,end:i,action:"remove",lines:this.getLinesForRange({start:r,end:i})},!0),this.clonePos(r)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1),t=Math.min(Math.max(0,t),this.getLength()-1);var n=t==this.getLength()-1&&e>0,r=t<this.getLength()-1,i=n?e-1:e,s=n?this.getLine(i).length:0,u=r?t+1:t,a=r?0:this.getLine(u).length,f=new o(i,s,u,a),l=this.$lines.slice(e,t+1);return this.applyDelta({start:f.start,end:f.end,action:"remove",lines:this.getLinesForRange(f)}),l},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){e instanceof o||(e=o.fromPoints(e.start,e.end));if(t.length===0&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);var n;return t?n=this.insert(e.start,t):n=e.start,n},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n=e.action=="insert";if(n?e.lines.length<=1&&!e.lines[0]:!o.comparePoints(e.start,e.end))return;n&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(i(this.$lines,e,t),this._signal("change",e))},this.$safeApplyDelta=function(e){var t=this.$lines.length;(e.action=="remove"&&e.start.row<t&&e.end.row<t||e.action=="insert"&&e.start.row<=t)&&this.applyDelta(e)},this.$splitAndapplyLargeDelta=function(e,t){var n=e.lines,r=n.length-t+1,i=e.start.row,s=e.start.column;for(var o=0,u=0;o<r;o=u){u+=t-1;var a=n.slice(o,u);a.push(""),this.applyDelta({start:this.pos(i+o,s),end:this.pos(i+u,s=0),action:e.action,lines:a},!0)}e.lines=n.slice(o),e.start.row=i+o,e.start.column=s,this.applyDelta(e,!0)},this.revertDelta=function(e){this.$safeApplyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:e.action=="insert"?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length;for(var i=t||0,s=n.length;i<s;i++){e-=n[i].length+r;if(e<0)return{row:i,column:e+n[i].length+r}}return{row:s-1,column:e+n[s-1].length+r}},this.positionToIndex=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=0,s=Math.min(e.row,n.length);for(var o=t||0;o<s;++o)i+=n[o].length+r;return i+e.column}}).call(a.prototype),t.Document=a}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(!n.running)return;var e=new Date,t=n.currentLine,r=-1,i=n.doc,s=t;while(n.lines[t])t++;var o=i.getLength(),u=0;n.running=!1;while(t<o){n.$tokenizeRow(t),r=t;do t++;while(n.lines[t]);u++;if(u%5===0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,r==-1&&(r=t),s<=r&&n.fireUpdateEvent(s,r)}};(function(){r.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(n===0)this.lines[t]=null;else if(e.action=="remove")this.lines.splice(t,n+1,null),this.states.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.lines.splice.apply(this.lines,r),this.states.splice.apply(this.states,r)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],r=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!=r.state+""?(this.states[e]=r.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=r.tokens}}).call(s.prototype),t.BackgroundTokenizer=s}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){if(this.regExp+""==e+"")return;this.regExp=e,this.cache=[]},this.update=function(e,t,n,i){if(!this.regExp)return;var o=i.firstRow,u=i.lastRow;for(var a=o;a<=u;a++){var f=this.cache[a];f==null&&(f=r.getMatchOffsets(n.getLine(a),this.regExp),f.length>this.MAX_RANGES&&(f=f.slice(0,this.MAX_RANGES)),f=f.map(function(e){return new s(a,e.offset,a,e.offset+e.length)}),this.cache[a]=f.length?f:"");for(var l=f.length;l--;)t.drawSingleLineMarker(e,f[l].toScreenRange(n),this.clazz,i)}}}).call(o.prototype),t.SearchHighlight=o}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var r=e("../range").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var r=0,i=this.folds,s,o,u,a=!0;t==null&&(t=this.end.row,n=this.end.column);for(var f=0;f<i.length;f++){s=i[f],o=s.range.compareStart(t,n);if(o==-1){e(null,t,n,r,a);return}u=e(null,s.start.row,s.start.column,r,a),u=!u&&e(s.placeholder,s.start.row,s.start.column,r);if(u||o===0)return;a=!s.sameRow,r=s.end.column}e(null,t,n,r,a)},this.getNextFoldTo=function(e,t){var n,r;for(var i=0;i<this.folds.length;i++){n=this.folds[i],r=n.range.compareEnd(e,t);if(r==-1)return{fold:n,kind:"after"};if(r===0)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var r=this.getNextFoldTo(e,t),i,s;if(r){i=r.fold;if(r.kind=="inside"&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){s=this.folds;var o=s.indexOf(i);o===0&&(this.start.column+=n);for(o;o<s.length;o++){i=s[o],i.start.column+=n;if(!i.sameRow)return;i.end.column+=n}this.end.column+=n}}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||n.kind=="inside")return null;var r=n.fold,s=this.folds,o=this.foldData,u=s.indexOf(r),a=s[u-1];this.end.row=a.end.row,this.end.column=a.end.column,s=s.splice(u,s.length-u);var f=new i(o,s);return o.splice(o.indexOf(this)+1,0,f),f},this.merge=function(e){var t=e.folds;for(var n=0;n<t.length;n++)this.addFold(t[n]);var r=this.foldData;r.splice(r.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){var t=0;for(var n=0;n<this.folds.length;n++){var r=this.folds[n];e-=r.start.column-t;if(e<0)return{row:r.start.row,column:r.start.column+e};e-=r.placeholder.length;if(e<0)return r.start;t=r.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("./range").Range,i=r.comparePoints,s=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=i,this.pointIndex=function(e,t,n){var r=this.ranges;for(var s=n||0;s<r.length;s++){var o=r[s],u=i(e,o.end);if(u>0)continue;var a=i(e,o.start);return u===0?t&&a!==0?-s-2:s:a>0||a===0&&!t?s:-s-1}return-s-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var r=this.pointIndex(e.end,t,n);return r<0?r=-r-1:r++,this.ranges.splice(n,r-n,e)},this.addList=function(e){var t=[];for(var n=e.length;n--;)t.push.apply(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){var e=[],t=this.ranges;t=t.sort(function(e,t){return i(e.start,t.start)});var n=t[0],r;for(var s=1;s<t.length;s++){r=n,n=t[s];var o=i(r.end,n.start);if(o<0)continue;if(o==0&&!r.isEmpty()&&!n.isEmpty())continue;i(r.end,n.end)<0&&(r.end.row=n.end.row,r.end.column=n.end.column),t.splice(s,1),e.push(n),n=r,s--}return this.ranges=t,e},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});r<0&&(r=-r-1);var i=this.pointIndex({row:t,column:0},r);i<0&&(i=-i-1);var s=[];for(var o=r;o<i;o++)s.push(n[o]);return s},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){if(!this.session)return;this.session.removeListener("change",this.onChange),this.session=null},this.$onChange=function(e){var t=e.start,n=e.end,r=t.row,i=n.row,s=this.ranges;for(var o=0,u=s.length;o<u;o++){var a=s[o];if(a.end.row>=r)break}if(e.action=="insert"){var f=i-r,l=-t.column+n.column;for(;o<u;o++){var a=s[o];if(a.start.row>r)break;a.start.row==r&&a.start.column>=t.column&&(a.start.column==t.column&&this.$bias<=0||(a.start.column+=l,a.start.row+=f));if(a.end.row==r&&a.end.column>=t.column){if(a.end.column==t.column&&this.$bias<0)continue;a.end.column==t.column&&l>0&&o<u-1&&a.end.column>a.start.column&&a.end.column==s[o+1].start.column&&(a.end.column-=l),a.end.column+=l,a.end.row+=f}}}else{var f=r-i,l=t.column-n.column;for(;o<u;o++){var a=s[o];if(a.start.row>i)break;if(a.end.row<i&&(r<a.end.row||r==a.end.row&&t.column<a.end.column))a.end.row=r,a.end.column=t.column;else if(a.end.row==i)if(a.end.column<=n.column){if(f||a.end.column>t.column)a.end.column=t.column,a.end.row=t.row}else a.end.column+=l,a.end.row+=f;else a.end.row>i&&(a.end.row+=f);if(a.start.row<i&&(r<a.start.row||r==a.start.row&&t.column<a.start.column))a.start.row=r,a.start.column=t.column;else if(a.start.row==i)if(a.start.column<=n.column){if(f||a.start.column>t.column)a.start.column=t.column,a.start.row=t.row}else a.start.column+=l,a.start.row+=f;else a.start.row>i&&(a.start.row+=f)}}if(f!=0&&o<u)for(;o<u;o++){var a=s[o];a.start.row+=f,a.end.row+=f}}}).call(s.prototype),t.RangeList=s}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],function(e,t,n){"use strict";function o(e,t){e.row-=t.row,e.row==0&&(e.column-=t.column)}function u(e,t){o(e.start,t),o(e.end,t)}function a(e,t){e.row==0&&(e.column+=t.column),e.row+=t.row}function f(e,t){a(e.start,t),a(e.end,t)}var r=e("../range_list").RangeList,i=e("../lib/oop"),s=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};i.inherits(s,r),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new s(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(this.range.isEqual(e))return;u(e,this.start);var t=e.start.row,n=e.start.column;for(var r=0,i=-1;r<this.subFolds.length;r++){i=this.subFolds[r].range.compare(t,n);if(i!=1)break}var s=this.subFolds[r],o=0;if(i==0){if(s.range.containsRange(e))return s.addSubFold(e);o=1}var t=e.range.end.row,n=e.range.end.column;for(var a=r,i=-1;a<this.subFolds.length;a++){i=this.subFolds[a].range.compare(t,n);if(i!=1)break}i==0&&a++;var f=this.subFolds.splice(r,a-r,e),l=i==0?f.length-1:f.length;for(var c=o;c<l;c++)e.addSubFold(f[c]);return e.setFoldLine(this.foldLine),e},this.restoreRange=function(e){return f(e,this.start)}}.call(s.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,n){"use strict";function u(){this.getFoldAt=function(e,t,n){var r=this.getFoldLine(e);if(!r)return null;var i=r.folds;for(var s=0;s<i.length;s++){var o=i[s].range;if(o.contains(e,t)){if(n==1&&o.isEnd(e,t)&&!o.isEmpty())continue;if(n==-1&&o.isStart(e,t)&&!o.isEmpty())continue;return i[s]}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,r=this.$foldData,i=[];t.column+=1,n.column-=1;for(var s=0;s<r.length;s++){var o=r[s].range.compareRange(e);if(o==2)continue;if(o==-2)break;var u=r[s].folds;for(var a=0;a<u.length;a++){var f=u[a];o=f.range.compareRange(e);if(o==-2)break;if(o==2)continue;if(o==42)break;i.push(f)}}return t.column-=1,n.column+=1,i},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else var t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){var e=[],t=this.$foldData;for(var n=0;n<t.length;n++)for(var r=0;r<t[n].folds.length;r++)e.push(t[n].folds[r]);return e},this.getFoldStringAt=function(e,t,n,r){r=r||this.getFoldLine(e);if(!r)return null;var i={end:{column:0}},s,o;for(var u=0;u<r.folds.length;u++){o=r.folds[u];var a=o.range.compareEnd(e,t);if(a==-1){s=this.getLine(o.start.row).substring(i.end.column,o.start.column);break}if(a===0)return null;i=o}return s||(s=this.getLine(o.start.row).substring(i.end.column)),n==-1?s.substring(0,t-i.end.column):n==1?s.substring(t-i.end.column):s},this.getFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),r==-1&&(r=0);for(r;r<n.length;r++){var i=n[r];if(i.start.row<=e&&i.end.row>=e)return i;if(i.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),r==-1&&(r=0);for(r;r<n.length;r++){var i=n[r];if(i.end.row>=e)return i}return null},this.getFoldedRowCount=function(e,t){var n=this.$foldData,r=t-e+1;for(var i=0;i<n.length;i++){var s=n[i],o=s.end.row,u=s.start.row;if(o>=t){u<t&&(u>=e?r-=t-u:r=0);break}o>=e&&(u>=e?r-=o-u:r-=o-e+1)}return r},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var n=this.$foldData,r=!1,o;e instanceof s?o=e:(o=new s(t,e),o.collapseChildren=t.collapseChildren),this.$clipRangeToDocument(o.range);var u=o.start.row,a=o.start.column,f=o.end.row,l=o.end.column,c=this.getFoldAt(u,a,1),h=this.getFoldAt(f,l,-1);if(c&&h==c)return c.addSubFold(o);c&&!c.range.isStart(u,a)&&this.removeFold(c),h&&!h.range.isEnd(f,l)&&this.removeFold(h);var p=this.getFoldsInRange(o.range);p.length>0&&(this.removeFolds(p),o.collapseChildren||p.forEach(function(e){o.addSubFold(e)}));for(var d=0;d<n.length;d++){var v=n[d];if(f==v.start.row){v.addFold(o),r=!0;break}if(u==v.end.row){v.addFold(o),r=!0;if(!o.sameRow){var m=n[d+1];if(m&&m.start.row==f){v.merge(m);break}}break}if(f<=v.start.row)break}return r||(v=this.$addFoldLine(new i(this.$foldData,o))),this.$useWrapMode?this.$updateWrapData(v.start.row,v.start.row):this.$updateRowLengthCache(v.start.row,v.start.row),this.$modified=!0,this._signal("changeFold",{data:o,action:"add"}),o},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,r=t.end.row,i=this.$foldData,s=t.folds;if(s.length==1)i.splice(i.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))s.pop(),t.end.row=s[s.length-1].end.row,t.end.column=s[s.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))s.shift(),t.start.row=s[0].start.row,t.start.column=s[0].start.column;else if(e.sameRow)s.splice(s.indexOf(e),1);else{var o=t.split(e.start.row,e.start.column);s=o.folds,s.shift(),o.start.row=s[0].start.row,o.start.column=s[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){var t=[];for(var n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(t){e.restoreRange(t),this.addFold(t)},this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n,i;if(e==null)n=new r(0,0,this.getLength(),0),t==null&&(t=!0);else if(typeof e=="number")n=new r(e,0,e,this.getLine(e).length);else if("row"in e)n=r.fromPoints(e,e);else{if(Array.isArray(e))return i=[],e.forEach(function(e){i=i.concat(this.unfold(e))},this),i;n=e}i=this.getFoldsInRangeList(n);var s=i;while(i.length==1&&r.comparePoints(i[0].start,n.start)<0&&r.comparePoints(i[0].end,n.end)>0)this.expandFolds(i),i=this.getFoldsInRangeList(n);t!=0?this.removeFolds(i):this.expandFolds(i);if(s.length)return s},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,r,i){r==null&&(r=e.start.row),i==null&&(i=0),t==null&&(t=e.end.row),n==null&&(n=this.getLine(t).length);var s=this.doc,o="";return e.walk(function(e,t,n,u){if(t<r)return;if(t==r){if(n<i)return;u=Math.max(i,u)}e!=null?o+=e:o+=s.getLine(t).substring(u,n)},t,n),o},this.getDisplayLine=function(e,t,n,r){var i=this.getFoldLine(e);if(!i){var s;return s=this.doc.getLine(e),s.substring(r||0,t||s.length)}return this.getFoldDisplayLine(i,e,t,n,r)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var n=t.folds.map(function(e){return e.clone()});return new i(e,n)}),e},this.toggleFold=function(e){var t=this.selection,n=t.getRange(),r,i;if(n.isEmpty()){var s=n.start;r=this.getFoldAt(s.row,s.column);if(r){this.expandFold(r);return}(i=this.findMatchingBracket(s))?n.comparePoint(i)==1?n.end=i:(n.start=i,n.start.column++,n.end.column--):(i=this.findMatchingBracket({row:s.row,column:s.column+1}))?(n.comparePoint(i)==1?n.end=i:n.start=i,n.start.column++):n=this.getCommentFoldRange(s.row,s.column)||n}else{var o=this.getFoldsInRange(n);if(e&&o.length){this.expandFolds(o);return}o.length==1&&(r=o[0])}r||(r=this.getFoldAt(n.start.row,n.start.column));if(r&&r.range.toString()==n.toString()){this.expandFold(r);return}var u="...";if(!n.isMultiLine()){u=this.getTextRange(n);if(u.length<4)return;u=u.trim().substring(0,2)+".."}this.addFold(u,n)},this.getCommentFoldRange=function(e,t,n){var i=new o(this,e,t),s=i.getCurrentToken(),u=s&&s.type;if(s&&/^comment|string/.test(u)){u=u.match(/comment|string/)[0],u=="comment"&&(u+="|doc-start");var a=new RegExp(u),f=new r;if(n!=1){do s=i.stepBackward();while(s&&a.test(s.type));i.stepForward()}f.start.row=i.getCurrentTokenRow(),f.start.column=i.getCurrentTokenColumn()+2,i=new o(this,e,t);if(n!=-1){var l=-1;do{s=i.stepForward();if(l==-1){var c=this.getState(i.$row);a.test(c)||(l=i.$row)}else if(i.$row>l)break}while(s&&a.test(s.type));s=i.stepBackward()}else s=i.getCurrentToken();return f.end.row=i.getCurrentTokenRow(),f.end.column=i.getCurrentTokenColumn()+s.value.length-2,f}},this.foldAll=function(e,t,n,r){n==undefined&&(n=1e5);var i=this.foldWidgets;if(!i)return;t=t||this.getLength(),e=e||0;for(var s=e;s<t;s++){i[s]==null&&(i[s]=this.getFoldWidget(s));if(i[s]!="start")continue;if(r&&!r(s))continue;var o=this.getFoldWidgetRange(s);o&&o.isMultiLine()&&o.end.row<=t&&o.start.row>=e&&(s=o.end.row,o.collapseChildren=n,this.addFold("...",o))}},this.foldToLevel=function(e){this.foldAll();while(e-->0)this.unfold(null,!1)},this.foldAllComments=function(){var e=this;this.foldAll(null,null,null,function(t){var n=e.getTokens(t);for(var r=0;r<n.length;r++){var i=n[r];if(i.type=="text"&&/^\s+$/.test(i.value))continue;return/comment/.test(i.type)?!0:!1}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle==e)return;this.$foldStyle=e,e=="manual"&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)},this.$setFolding=function(e){if(this.$foldMode==e)return;this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation");if(!e||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};var r=e-1,i;while(r>=0){var s=n[r];s==null&&(s=n[r]=this.getFoldWidget(r));if(s=="start"){var o=this.getFoldWidgetRange(r);i||(i=o);if(o&&o.end.row>=e)break}r--}return{range:r!==-1&&o,firstRange:i}},this.onFoldWidgetClick=function(e,t){t=t.domEvent;var n={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey},r=this.$toggleFoldWidget(e,n);if(!r){var i=t.target||t.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(!this.getFoldWidget)return;var n=this.getFoldWidget(e),r=this.getLine(e),i=n==="end"?-1:1,s=this.getFoldAt(e,i===-1?0:r.length,i);if(s)return t.children||t.all?this.removeFold(s):this.expandFold(s),s;var o=this.getFoldWidgetRange(e,!0);if(o&&!o.isMultiLine()){s=this.getFoldAt(o.start.row,o.start.column,1);if(s&&o.isEqual(s.range))return this.removeFold(s),s}if(t.siblings){var u=this.getParentFoldRangeData(e);if(u.range)var a=u.range.start.row+1,f=u.range.end.row;this.foldAll(a,f,t.all?1e4:0)}else t.children?(f=o?o.end.row:this.getLength(),this.foldAll(e+1,f,t.all?1e4:0)):o&&(t.all&&(o.collapseChildren=1e4),this.addFold("...",o));return o},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(n)return;var r=this.getParentFoldRangeData(t,!0);n=r.range||r.firstRange;if(n){t=n.start.row;var i=this.getFoldAt(t,this.getLine(t).length,1);i?this.removeFold(i):this.addFold("...",n)}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(n===0)this.foldWidgets[t]=null;else if(e.action=="remove")this.foldWidgets.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,r)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}var r=e("../range").Range,i=e("./fold_line").FoldLine,s=e("./fold").Fold,o=e("../token_iterator").TokenIterator;t.Folding=u}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";function s(){this.findMatchingBracket=function(e,t){if(e.column==0)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(n=="")return null;var r=n.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e):null},this.getBracketRange=function(e){var t=this.getLine(e.row),n=!0,r,s=t.charAt(e.column-1),o=s&&s.match(/([\(\[\{])|([\)\]\}])/);o||(s=t.charAt(e.column),e={row:e.row,column:e.column+1},o=s&&s.match(/([\(\[\{])|([\)\]\}])/),n=!1);if(!o)return null;if(o[1]){var u=this.$findClosingBracket(o[1],e);if(!u)return null;r=i.fromPoints(e,u),n||(r.end.column++,r.start.column--),r.cursor=r.end}else{var u=this.$findOpeningBracket(o[2],e);if(!u)return null;r=i.fromPoints(u,e),n||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.getMatchingBracketRanges=function(e){var t=this.getLine(e.row),n=t.charAt(e.column-1),r=n&&n.match(/([\(\[\{])|([\)\]\}])/);r||(n=t.charAt(e.column),e={row:e.row,column:e.column+1},r=n&&n.match(/([\(\[\{])|([\)\]\}])/));if(!r)return null;var s=new i(e.row,e.column-1,e.row,e.column),o=r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e);if(!o)return[s];var u=new i(o.row,o.column,o.row,o.column+1);return[s,u]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(!u)return;n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));var a=t.column-o.getCurrentTokenColumn()-2,f=u.value;for(;;){while(a>=0){var l=f.charAt(a);if(l==i){s-=1;if(s==0)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else l==e&&(s+=1);a-=1}do u=o.stepBackward();while(u&&!n.test(u.type));if(u==null)break;f=u.value,a=f.length-1}return null},this.$findClosingBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(!u)return;n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));var a=t.column-o.getCurrentTokenColumn();for(;;){var f=u.value,l=f.length;while(a<l){var c=f.charAt(a);if(c==i){s-=1;if(s==0)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else c==e&&(s+=1);a+=1}do u=o.stepForward();while(u&&!n.test(u.type));if(u==null)break;a=0}return null}}var r=e("../token_iterator").TokenIterator,i=e("../range").Range;t.BracketMatch=s}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./bidihandler").BidiHandler,o=e("./config"),u=e("./lib/event_emitter").EventEmitter,a=e("./selection").Selection,f=e("./mode/text").Mode,l=e("./range").Range,c=e("./document").Document,h=e("./background_tokenizer").BackgroundTokenizer,p=e("./search_highlight").SearchHighlight,d=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++d.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this);if(typeof e!="object"||!e.getLine)e=new c(e);this.setDocument(e),this.selection=new a(this),this.$bidiHandler=new s(this),o.resetOptions(this),this.setMode(t),o._signal("session",this)};d.$uid=0,function(){function m(e){return e<4352?!1:e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510}r.implement(this,u),this.setDocument=function(e){this.doc&&this.doc.off("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e){this.$docRowCache=[],this.$screenRowCache=[];return}var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){var n=0,r=e.length-1;while(n<=r){var i=n+r>>1,s=e[i];if(t>s)n=i+1;else{if(!(t<s))return i;r=i-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:"removeFolds",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n=this.bgTokenizer.getTokens(e),r,i=0;if(t==null){var s=n.length-1;i=this.getLine(e).length}else for(var s=0;s<n.length;s++){i+=n[s].value.length;if(i>=t)break}return r=n[s],r?(r.index=s,r.start=i-r.value.length,r):null},this.setUndoManager=function(e){this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel();if(e){var t=this;e.addSession(this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize===0},this.setNavigateWithinSoftTabs=function(e){this.setOption("navigateWithinSoftTabs",e)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){t===undefined&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,r){var i=this.$markerId++,s={range:e,type:n||"line",renderer:typeof n=="function"?n:null,clazz:t,inFront:!!r,id:i};return r?(this.$frontMarkers[i]=s,this._signal("changeFrontMarker")):(this.$backMarkers[i]=s,this._signal("changeBackMarker")),i},this.addDynamicMarker=function(e,t){if(!e.update)return;var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(!t)return;var n=t.inFront?this.$frontMarkers:this.$backMarkers;delete n[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker")},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new p(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,r){typeof t!="number"&&(n=t,t=e),n||(n="ace_step");var i=new l(e,0,t,Infinity);return i.id=this.addMarker(i,n,"fullLine",r),i},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);t?this.$autoNewLine=t[1]:this.$autoNewLine="\n"},this.getWordRange=function(e,t){var n=this.getLine(e),r=!1;t>0&&(r=!!n.charAt(t-1).match(this.tokenRe)),r||(r=!!n.charAt(t).match(this.tokenRe));if(r)var i=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))var i=/\s/;else var i=this.nonTokenRe;var s=t;if(s>0){do s--;while(s>=0&&n.charAt(s).match(i));s++}var o=t;while(o<n.length&&n.charAt(o).match(i))o++;return new l(e,s,e,o)},this.getAWordRange=function(e,t){var n=this.getWordRange(e,t),r=this.getLine(n.end.row);while(r.charAt(n.end.column).match(/[ \t]/))n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes=o.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&typeof e=="object"){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,r=n.path}else r=e||"ace/mode/text";this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new f);if(this.$modes[r]&&!n){this.$onChangeMode(this.$modes[r]),t&&t();return}this.$modeId=r,o.loadModule(["mode",r],function(e){if(this.$modeId!==r)return t&&t();this.$modes[r]&&!n?this.$onChangeMode(this.$modes[r]):e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[r]=e,e.$id=r),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){t||(this.$modeId=e.$id);if(this.$mode===e)return;var n=this.$mode;this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var r=e.getTokenizer();if(r.on!==undefined){var i=this.onReloadTokenizer.bind(this);r.on("update",i)}if(!this.bgTokenizer){this.bgTokenizer=new h(r);var s=this;this.bgTokenizer.on("update",function(e){s._signal("tokenizerUpdate",e)})}else this.bgTokenizer.setTokenizer(r);this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:n,mode:e}))},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){o.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){if(this.$scrollTop===e||isNaN(e))return;this.$scrollTop=e,this._signal("changeScrollTop",e)},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){if(this.$scrollLeft===e||isNaN(e))return;this.$scrollLeft=e,this._signal("changeScrollLeft",e)},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach(function(t){t&&t.screenWidth>e&&(e=t.screenWidth)}),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){this.$modified=!1;if(this.$useWrapMode)return this.screenWidth=this.$wrapLimit;var t=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,i=0,s=this.$foldData[i],o=s?s.start.row:Infinity,u=t.length;for(var a=0;a<u;a++){if(a>o){a=s.end.row+1;if(a>=u)break;s=this.$foldData[i++],o=s?s.start.row:Infinity}n[a]==null&&(n[a]=this.$getStringScreenWidth(t[a])[0]),n[a]>r&&(r=n[a])}this.screenWidth=r}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(!e.length)return;this.$fromUndo=!0;for(var n=e.length-1;n!=-1;n--){var r=e[n];r.action=="insert"||r.action=="remove"?this.doc.revertDelta(r):r.folds&&this.addFolds(r.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1},this.redoChanges=function(e,t){if(!e.length)return;this.$fromUndo=!0;for(var n=0;n<e.length;n++){var r=e[n];(r.action=="insert"||r.action=="remove")&&this.doc.$safeApplyDelta(r)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t){function n(e){return t?e.action!=="insert":e.action==="insert"}var r,i;for(var s=0;s<e.length;s++){var o=e[s];if(!o.start)continue;if(!r){n(o)?r=l.fromPoints(o.start,o.end):r=l.fromPoints(o.start,o.start);continue}n(o)?(i=o.start,r.compare(i.row,i.column)==-1&&r.setStart(i),i=o.end,r.compare(i.row,i.column)==1&&r.setEnd(i)):(i=o.start,r.compare(i.row,i.column)==-1&&(r=l.fromPoints(o.start,o.start)))}return r},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var r=this.getTextRange(e),i=this.getFoldsInRange(e),s=l.fromPoints(t,t);if(!n){this.remove(e);var o=e.start.row-e.end.row,u=o?-e.end.column:e.start.column-e.end.column;u&&(s.start.row==e.end.row&&s.start.column>e.end.column&&(s.start.column+=u),s.end.row==e.end.row&&s.end.column>e.end.column&&(s.end.column+=u)),o&&s.start.row>=e.end.row&&(s.start.row+=o,s.end.row+=o)}s.end=this.insert(s.start,r);if(i.length){var a=e.start,f=s.start,o=f.row-a.row,u=f.column-a.column;this.addFolds(i.map(function(e){return e=e.clone(),e.start.row==a.row&&(e.start.column+=u),e.end.row==a.row&&(e.end.column+=u),e.start.row+=o,e.end.row+=o,e}))}return s},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var r=e;r<=t;r++)this.doc.insertInLine({row:r,column:0},n)},this.outdentRows=function(e){var t=e.collapseRows(),n=new l(0,0,0,0),r=this.getTabSize();for(var i=t.start.row;i<=t.end.row;++i){var s=this.getLine(i);n.start.row=i,n.end.row=i;for(var o=0;o<r;++o)if(s.charAt(o)!=" ")break;o<r&&s.charAt(o)=="	"?(n.start.column=o,n.end.column=o+1):(n.start.column=0,n.end.column=o),this.remove(n)}},this.$moveLines=function(e,t,n){e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t);if(n<0){var r=this.getRowFoldStart(e+n);if(r<0)return 0;var i=r-e}else if(n>0){var r=this.getRowFoldEnd(t+n);if(r>this.doc.getLength()-1)return 0;var i=r-t}else{e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t);var i=t-e+1}var s=new l(e,0,t,Number.MAX_VALUE),o=this.getFoldsInRange(s).map(function(e){return e=e.clone(),e.start.row+=i,e.end.row+=i,e}),u=n==0?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+i,u),o.length&&this.addFolds(o),i},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){t=Math.max(0,t);if(e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0);if(e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){if(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t)this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode")},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var r=this.$constrainWrapLimit(e,n.min,n.max);return r!=this.$wrapLimit&&r>1?(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,r=e.start,i=e.end,s=r.row,o=i.row,u=o-s,a=null;this.$updating=!0;if(u!=0)if(n==="remove"){this[t?"$wrapData":"$rowLengthCache"].splice(s,u);var f=this.$foldData;a=this.getFoldsInRange(e),this.removeFolds(a);var l=this.getFoldLine(i.row),c=0;if(l){l.addRemoveChars(i.row,i.column,r.column-i.column),l.shiftRow(-u);var h=this.getFoldLine(s);h&&h!==l&&(h.merge(l),l=h),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=i.row&&l.shiftRow(-u)}o=s}else{var p=Array(u);p.unshift(s,0);var d=t?this.$wrapData:this.$rowLengthCache;d.splice.apply(d,p);var f=this.$foldData,l=this.getFoldLine(s),c=0;if(l){var v=l.range.compareInside(r.row,r.column);v==0?(l=l.split(r.row,r.column),l&&(l.shiftRow(u),l.addRemoveChars(o,0,i.column-r.column))):v==-1&&(l.addRemoveChars(s,0,i.column-r.column),l.shiftRow(u)),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=s&&l.shiftRow(u)}}else{u=Math.abs(e.start.column-e.end.column),n==="remove"&&(a=this.getFoldsInRange(e),this.removeFolds(a),u=-u);var l=this.getFoldLine(s);l&&l.addRemoveChars(s,r.column,u)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(s,o):this.$updateRowLengthCache(s,o),a},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var r=this.doc.getAllLines(),i=this.getTabSize(),o=this.$wrapData,u=this.$wrapLimit,a,f,l=e;t=Math.min(t,r.length-1);while(l<=t)f=this.getFoldLine(l,f),f?(a=[],f.walk(function(e,t,i,o){var u;if(e!=null){u=this.$getDisplayTokens(e,a.length),u[0]=n;for(var f=1;f<u.length;f++)u[f]=s}else u=this.$getDisplayTokens(r[t].substring(o,i),a.length);a=a.concat(u)}.bind(this),f.end.row,r[f.end.row].length+1),o[f.start.row]=this.$computeWrapSplits(a,u,i),l=f.end.row+1):(a=this.$getDisplayTokens(r[l]),o[l]=this.$computeWrapSplits(a,u,i),l++)};var e=1,t=2,n=3,s=4,a=9,c=10,d=11,v=12;this.$computeWrapSplits=function(e,r,i){function g(){var t=0;if(m===0)return t;if(p)for(var n=0;n<e.length;n++){var r=e[n];if(r==c)t+=1;else{if(r!=d){if(r==v)continue;break}t+=i}}return h&&p!==!1&&(t+=i),Math.min(t,m)}function y(t){var n=t-f;for(var r=f;r<t;r++){var i=e[r];if(i===12||i===2)n-=1}o.length||(b=g(),o.indent=b),l+=n,o.push(l),f=t}if(e.length==0)return[];var o=[],u=e.length,f=0,l=0,h=this.$wrapAsCode,p=this.$indentedSoftWrap,m=r<=Math.max(2*i,8)||p===!1?0:Math.floor(r/2),b=0;while(u-f>r-b){var w=f+r-b;if(e[w-1]>=c&&e[w]>=c){y(w);continue}if(e[w]==n||e[w]==s){for(w;w!=f-1;w--)if(e[w]==n)break;if(w>f){y(w);continue}w=f+r;for(w;w<e.length;w++)if(e[w]!=s)break;if(w==e.length)break;y(w);continue}var E=Math.max(w-(r-(r>>2)),f-1);while(w>E&&e[w]<n)w--;if(h){while(w>E&&e[w]<n)w--;while(w>E&&e[w]==a)w--}else while(w>E&&e[w]<c)w--;if(w>E){y(++w);continue}w=f+r,e[w]==t&&w--,y(w-b)}return o},this.$getDisplayTokens=function(n,r){var i=[],s;r=r||0;for(var o=0;o<n.length;o++){var u=n.charCodeAt(o);if(u==9){s=this.getScreenTabSize(i.length+r),i.push(d);for(var f=1;f<s;f++)i.push(v)}else u==32?i.push(c):u>39&&u<48||u>57&&u<64?i.push(a):u>=4352&&m(u)?i.push(e,t):i.push(e)}return i},this.$getStringScreenWidth=function(e,t,n){if(t==0)return[0,0];t==null&&(t=Infinity),n=n||0;var r,i;for(i=0;i<e.length;i++){r=e.charCodeAt(i),r==9?n+=this.getScreenTabSize(n):r>=4352&&m(r)?n+=2:n+=1;if(n>t)break}return[n,i]},this.lineWidgets=null,this.getRowLength=function(e){var t=1;return this.lineWidgets&&(t+=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0),!this.$useWrapMode||!this.$wrapData[e]?t:this.$wrapData[e].length+t},this.getRowLineCount=function(e){return!this.$useWrapMode||!this.$wrapData[e]?1:this.$wrapData[e].length+1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),n=this.$wrapData[t.row];return n.length&&n[0]<t.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:undefined},this.getScreenTabSize=function(e){return this.$tabSize-(e%this.$tabSize|0)},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t,n){if(e<0)return{row:0,column:0};var r,i=0,s=0,o,u=0,a=0,f=this.$screenRowCache,l=this.$getRowCacheIndex(f,e),c=f.length;if(c&&l>=0)var u=f[l],i=this.$docRowCache[l],h=e>f[c-1];else var h=!c;var p=this.getLength()-1,d=this.getNextFoldLine(i),v=d?d.start.row:Infinity;while(u<=e){a=this.getRowLength(i);if(u+a>e||i>=p)break;u+=a,i++,i>v&&(i=d.end.row+1,d=this.getNextFoldLine(i,d),v=d?d.start.row:Infinity),h&&(this.$docRowCache.push(i),this.$screenRowCache.push(u))}if(d&&d.start.row<=i)r=this.getFoldDisplayLine(d),i=d.start.row;else{if(u+a<=e||i>p)return{row:p,column:this.getLine(p).length};r=this.getLine(i),d=null}var m=0,g=Math.floor(e-u);if(this.$useWrapMode){var y=this.$wrapData[i];y&&(o=y[g],g>0&&y.length&&(m=y.indent,s=y[g-1]||y[y.length-1],r=r.substring(s)))}return n!==undefined&&this.$bidiHandler.isBidiRow(u+g,i,g)&&(t=this.$bidiHandler.offsetToCol(n)),s+=this.$getStringScreenWidth(r,t-m)[1],this.$useWrapMode&&s>=o&&(s=o-1),d?d.idxToPosition(s):{row:i,column:s}},this.documentToScreenPosition=function(e,t){if(typeof t=="undefined")var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var r=0,i=null,s=null;s=this.getFoldAt(e,t,1),s&&(e=s.start.row,t=s.start.column);var o,u=0,a=this.$docRowCache,f=this.$getRowCacheIndex(a,e),l=a.length;if(l&&f>=0)var u=a[f],r=this.$screenRowCache[f],c=e>a[l-1];else var c=!l;var h=this.getNextFoldLine(u),p=h?h.start.row:Infinity;while(u<e){if(u>=p){o=h.end.row+1;if(o>e)break;h=this.getNextFoldLine(o,h),p=h?h.start.row:Infinity}else o=u+1;r+=this.getRowLength(u),u=o,c&&(this.$docRowCache.push(u),this.$screenRowCache.push(r))}var d="";h&&u>=p?(d=this.getFoldDisplayLine(h,e,t),i=h.start.row):(d=this.getLine(e).substring(0,t),i=e);var v=0;if(this.$useWrapMode){var m=this.$wrapData[i];if(m){var g=0;while(d.length>=m[g])r++,g++;d=d.substring(m[g-1]||0,d.length),v=g>0?m.indent:0}}return this.lineWidgets&&this.lineWidgets[u]&&this.lineWidgets[u].rowsAbove&&(r+=this.lineWidgets[u].rowsAbove),{row:r,column:v+this.$getStringScreenWidth(d)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(!this.$useWrapMode){e=this.getLength();var n=this.$foldData;for(var r=0;r<n.length;r++)t=n[r],e-=t.end.row-t.start.row}else{var i=this.$wrapData.length,s=0,r=0,t=this.$foldData[r++],o=t?t.start.row:Infinity;while(s<i){var u=this.$wrapData[s];e+=u?u.length+1:1,s++,s>o&&(s=t.end.row+1,t=this.$foldData[r++],o=t?t.start.row:Infinity)}}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){if(!this.$enableVarChar)return;this.$getStringScreenWidth=function(t,n,r){if(n===0)return[0,0];n||(n=Infinity),r=r||0;var i,s;for(s=0;s<t.length;s++){i=t.charAt(s),i==="	"?r+=this.getScreenTabSize(r):r+=e.getCharacterWidth(i);if(r>n)break}return[r,s]}},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},this.isFullWidth=m}.call(d.prototype),e("./edit_session/folding").Folding.call(d.prototype),e("./edit_session/bracket_match").BracketMatch.call(d.prototype),o.defineOptions(d.prototype,"session",{wrap:{set:function(e){!e||e=="off"?e=!1:e=="free"?e=!0:e=="printMargin"?e=-1:typeof e=="string"&&(e=parseInt(e,10)||!1);if(this.$wrap==e)return;this.$wrap=e;if(!e)this.setUseWrapMode(!1);else{var t=typeof e=="number"?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){e=e=="auto"?this.$mode.type!="text":e!="text",e!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){e=parseInt(e),e>0&&this.$tabSize!==e&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(e){this.setFoldStyle(e)},handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=d}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";function u(e,t){function n(e){return/\w/.test(e)||t.regExp?"\\b":""}return n(e[0])+e+n(e[e.length-1])}var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(){this.$options={}};(function(){this.set=function(e){return i.mixin(this.$options,e),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$options,n=this.$matchIterator(e,t);if(!n)return!1;var r=null;return n.forEach(function(e,n,i,o){return r=new s(e,n,i,o),n==o&&t.start&&t.start.start&&t.skipCurrent!=0&&r.isEqual(t.start)?(r=null,!1):!0}),r},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,i=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),o=[],u=t.re;if(t.$isMultiLine){var a=u.length,f=i.length-a,l;e:for(var c=u.offset||0;c<=f;c++){for(var h=0;h<a;h++)if(i[c+h].search(u[h])==-1)continue e;var p=i[c],d=i[c+a-1],v=p.length-p.match(u[0])[0].length,m=d.match(u[a-1])[0].length;if(l&&l.end.row===c&&l.end.column>v)continue;o.push(l=new s(c,v,c+a-1,m)),a>2&&(c=c+a-2)}}else for(var g=0;g<i.length;g++){var y=r.getMatchOffsets(i[g],u);for(var h=0;h<y.length;h++){var b=y[h];o.push(new s(g,b.offset,g,b.offset+b.length))}}if(n){var w=n.start.column,E=n.start.column,g=0,h=o.length-1;while(g<h&&o[g].start.column<w&&o[g].start.row==n.start.row)g++;while(g<h&&o[h].end.column>E&&o[h].end.row==n.end.row)h--;o=o.slice(g,h+1);for(g=0,h=o.length;g<h;g++)o[g].start.row+=n.start.row,o[g].end.row+=n.start.row}return o},this.replace=function(e,t){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(!r)return;var i=r.exec(e);if(!i||i[0].length!=e.length)return null;t=e.replace(r,t);if(n.preserveCase){t=t.split("");for(var s=Math.min(e.length,e.length);s--;){var o=e[s];o&&o.toLowerCase()!=o?t[s]=t[s].toUpperCase():t[s]=t[s].toLowerCase()}t=t.join("")}return t},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=r.escapeRegExp(n)),e.wholeWord&&(n=u(n,e));var i=e.caseSensitive?"gm":"gmi";e.$isMultiLine=!t&&/[\n\r]/.test(n);if(e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,i);try{var s=new RegExp(n,i)}catch(o){s=!1}return e.re=s},this.$assembleMultilineRegExp=function(e,t){var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[];for(var i=0;i<n.length;i++)try{r.push(new RegExp(n[i],t))}catch(s){return!1}return r},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var r=t.backwards==1,i=t.skipCurrent!=0,s=t.range,o=t.start;o||(o=s?s[r?"end":"start"]:e.selection.getRange()),o.start&&(o=o[i!=r?"end":"start"]);var u=s?s.start.row:0,a=s?s.end.row:e.getLength()-1;if(r)var f=function(e){var n=o.row;if(c(n,o.column,e))return;for(n--;n>=u;n--)if(c(n,Number.MAX_VALUE,e))return;if(t.wrap==0)return;for(n=a,u=o.row;n>=u;n--)if(c(n,Number.MAX_VALUE,e))return};else var f=function(e){var n=o.row;if(c(n,o.column,e))return;for(n+=1;n<=a;n++)if(c(n,0,e))return;if(t.wrap==0)return;for(n=u,a=o.row;n<=a;n++)if(c(n,0,e))return};if(t.$isMultiLine)var l=n.length,c=function(t,i,s){var o=r?t-l+1:t;if(o<0||o+l>e.getLength())return;var u=e.getLine(o),a=u.search(n[0]);if(!r&&a<i||a===-1)return;for(var f=1;f<l;f++){u=e.getLine(o+f);if(u.search(n[f])==-1)return}var c=u.match(n[l-1])[0].length;if(r&&c>i)return;if(s(o,a,o+l-1,c))return!0};else if(r)var c=function(t,r,i){var s=e.getLine(t),o=[],u,a=0;n.lastIndex=0;while(u=n.exec(s)){var f=u[0].length;a=u.index;if(!f){if(a>=s.length)break;n.lastIndex=a+=1}if(u.index+f>r)break;o.push(u.index,f)}for(var l=o.length-1;l>=0;l-=2){var c=o[l-1],f=o[l];if(i(t,c,t,c+f))return!0}};else var c=function(t,r,i){var s=e.getLine(t),o,u;n.lastIndex=r;while(u=n.exec(s)){var a=u[0].length;o=u.index;if(i(t,o,t,o+a))return!0;if(!a){n.lastIndex=o+=1;if(o>=s.length)return!1}}};return{forEach:f}}}).call(o.prototype),t.Search=o}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function o(e,t){this.platform=t||(i.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function u(e,t){o.call(this,e,t),this.$singleCommand=!1}var r=e("../lib/keys"),i=e("../lib/useragent"),s=r.KEY_MODS;u.prototype=o.prototype,function(){function e(e){return typeof e=="object"&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var n=e&&(typeof e=="string"?e:e.name);e=this.commands[n],t||delete this.commands[n];var r=this.commandKeyBinding;for(var i in r){var s=r[i];if(s==e)delete r[i];else if(Array.isArray(s)){var o=s.indexOf(e);o!=-1&&(s.splice(o,1),s.length==1&&(r[i]=s[0]))}}},this.bindKey=function(e,t,n){typeof e=="object"&&e&&(n==undefined&&(n=e.position),e=e[this.platform]);if(!e)return;if(typeof t=="function")return this.addCommand({exec:t,bindKey:e,name:t.name||e});e.split("|").forEach(function(e){var r="";if(e.indexOf(" ")!=-1){var i=e.split(/\s+/);e=i.pop(),i.forEach(function(e){var t=this.parseKeys(e),n=s[t.hashId]+t.key;r+=(r?" ":"")+n,this._addCommandToBinding(r,"chainKeys")},this),r+=" "}var o=this.parseKeys(e),u=s[o.hashId]+o.key;this._addCommandToBinding(r+u,t,n)},this)},this._addCommandToBinding=function(t,n,r){var i=this.commandKeyBinding,s;if(!n)delete i[t];else if(!i[t]||this.$singleCommand)i[t]=n;else{Array.isArray(i[t])?(s=i[t].indexOf(n))!=-1&&i[t].splice(s,1):i[t]=[i[t]],typeof r!="number"&&(r=e(n));var o=i[t];for(s=0;s<o.length;s++){var u=o[s],a=e(u);if(a>r)break}o.splice(s,0,n)}},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var n=e[t];if(!n)return;if(typeof n=="string")return this.bindKey(n,t);typeof n=="function"&&(n={exec:n});if(typeof n!="object")return;n.name||(n.name=t),this.addCommand(n)},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),n=t.pop(),i=r[n];if(r.FUNCTION_KEYS[i])n=r.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(t.length==1&&t[0]=="shift")return{key:n.toUpperCase(),hashId:-1}}var s=0;for(var o=t.length;o--;){var u=r.KEY_MODS[t[o]];if(u==null)return typeof console!="undefined"&&console.error("invalid modifier "+t[o]+" in "+e),!1;s|=u}return{key:n,hashId:s}},this.findKeyCommand=function(t,n){var r=s[t]+n;return this.commandKeyBinding[r]},this.handleKeyboard=function(e,t,n,r){if(r<0)return;var i=s[t]+n,o=this.commandKeyBinding[i];e.$keyChain&&(e.$keyChain+=" "+i,o=this.commandKeyBinding[e.$keyChain]||o);if(o)if(o=="chainKeys"||o[o.length-1]=="chainKeys")return e.$keyChain=e.$keyChain||i,{command:"null"};if(e.$keyChain)if(!!t&&t!=4||n.length!=1){if(t==-1||r>0)e.$keyChain=""}else e.$keyChain=e.$keyChain.slice(0,-i.length-1);return{command:o}},this.getStatusText=function(e,t){return t.$keyChain||""}}.call(o.prototype),t.HashHandler=o,t.MultiHashHandler=u}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../keyboard/hash_handler").MultiHashHandler,s=e("../lib/event_emitter").EventEmitter,o=function(e,t){i.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};r.inherits(o,i),function(){r.implement(this,s),this.exec=function(e,t,n){if(Array.isArray(e)){for(var r=e.length;r--;)if(this.exec(e[r],t,n))return!0;return!1}typeof e=="string"&&(e=this.commands[e]);if(!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(this.$checkCommandState!=0&&e.isAvailable&&!e.isAvailable(t))return!1;var i={editor:t,command:e,args:n};return i.returnValue=this._emit("exec",i),this._signal("afterExec",i),i.returnValue===!1?!1:!0},this.toggleRecording=function(e){if(this.$inReplay)return;return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(this.$inReplay||!this.macro)return;if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){typeof t=="string"?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}},this.trimMacro=function(e){return e.map(function(e){return typeof e[0]!="string"&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(o.prototype),t.CommandManager=o}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";function o(e,t){return{win:e,mac:t}}var r=e("../lib/lang"),i=e("../config"),s=e("../range").Range;t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:o("Ctrl-,","Command-,"),exec:function(e){i.loadModule("ace/ext/settings_menu",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:o("Alt-E","F4"),exec:function(e){i.loadModule("./ext/error_marker",function(t){t.showErrorMarker(e,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:o("Alt-Shift-E","Shift-F4"),exec:function(e){i.loadModule("./ext/error_marker",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:o("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:o(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:o("Ctrl-L","Command-L"),exec:function(e,t){typeof t=="number"&&!isNaN(t)&&e.gotoLine(t),e.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:o("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:o("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:o("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:o("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:o("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:o("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:o("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:o("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:o("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:o("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:o("Ctrl-F","Command-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:o("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:o("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:o("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:o("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:o("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:o("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:o("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:o("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:o("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:o("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:o("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:o("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:o("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:o("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:o("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:o("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:o("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:o("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:o("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:o("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:o(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:o("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:o(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:o("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:o("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:o("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:o("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:o("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:o("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:o("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:o(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(e){},readOnly:!0},{name:"cut",description:"Cut",exec:function(e){var t=e.$copyWithEmptySelection&&e.selection.isEmpty(),n=t?e.selection.getLineRange():e.selection.getRange();e._emit("cut",n),n.isEmpty()||e.session.remove(n),e.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:o("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:o("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:o("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:o("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:o("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:o("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:o("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:o("Ctrl-H","Command-Option-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e,!0)})}},{name:"undo",description:"Undo",bindKey:o("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",description:"Redo",bindKey:o("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:o("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:o("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:o("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:o("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:o("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:o("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:o("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:o("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:o("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:o("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:o("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:o("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:o("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:o("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:o("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:o("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:o("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:o(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:o("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:o("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:o("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:o(null,null),exec:function(e){e.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:o("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:o(null,null),exec:function(e){var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),i=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),o=e.session.doc.getLine(n.row).length,u=e.session.doc.getTextRange(e.selection.getRange()),a=u.replace(/\n\s*/," ").length,f=e.session.doc.getLine(n.row);for(var l=n.row+1;l<=i.row+1;l++){var c=r.stringTrimLeft(r.stringTrimRight(e.session.doc.getLine(l)));c.length!==0&&(c=" "+c),f+=c}i.row+1<e.session.doc.getLength()-1&&(f+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new s(n.row,0,i.row+2,0),f),a>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+a)):(o=e.session.doc.getLine(n.row).length>o?o+1:o,e.selection.moveCursorTo(n.row,o))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:o(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,r=e.selection.rangeList.ranges,i=[];r.length<1&&(r=[e.selection.getRange()]);for(var o=0;o<r.length;o++)o==r.length-1&&(r[o].end.row!==t||r[o].end.column!==n)&&i.push(new s(r[o].end.row,r[o].end.column,t,n)),o===0?(r[o].start.row!==0||r[o].start.column!==0)&&i.push(new s(0,0,r[o].start.row,r[o].start.column)):i.push(new s(r[o-1].end.row,r[o-1].end.column,r[o].start.row,r[o].start.column));e.exitMultiSelectMode(),e.clearSelection();for(var o=0;o<i.length;o++)e.selection.addRange(i[o],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(e){e.selection.clearSelection(),e.navigateLineEnd(),e.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(e){e.selection.clearSelection();var t=e.getCursorPosition();e.selection.moveTo(t.row-1,Number.MAX_VALUE),e.insert("\n"),t.row===0&&e.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command pallete",bindKey:o("F1","F1"),exec:function(e){e.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:o(null,null),exec:function(e){e.prompt({$type:"modes"})},readOnly:!0}];for(var u=1;u<9;u++)t.commands.push({name:"foldToLevel"+u,description:"Fold To Level "+u,level:u,exec:function(e){e.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/lang"),o=e("./lib/useragent"),u=e("./keyboard/textinput").TextInput,a=e("./mouse/mouse_handler").MouseHandler,f=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,c=e("./edit_session").EditSession,h=e("./search").Search,p=e("./range").Range,d=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,g=e("./config"),y=e("./token_iterator").TokenIterator,b=e("./clipboard"),w=function(e,t,n){this.$toDestroy=[];var r=e.getContainerElement();this.container=r,this.renderer=e,this.id="editor"+ ++w.$uid,this.commands=new v(o.isMac?"mac":"win",m),typeof document=="object"&&(this.textInput=new u(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new a(this),new f(this)),this.keyBinding=new l(this),this.$search=(new h).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||n&&n.session||new c("")),g.resetOptions(this),n&&this.setOptions(n),g._signal("editor",this)};w.$uid=0,function(){r.implement(this,d),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(e){if(this.curOp&&this.session){if(e&&e.returnValue===!1||!this.session)return this.curOp=null;if(e==1&&this.curOp.command&&this.curOp.command.name=="mouse")return;this._signal("beforeEndOperation");if(!this.curOp)return;var t=this.curOp.command,n=t&&t.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var r=this.selection.getRange(),i=this.renderer.layerConfig;(r.start.row>=i.lastRow||r.end.row<=i.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:}n=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var s=this.selection.toJSON();this.curOp.selectionAfter=s,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(s),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(!this.$mergeUndoDeltas)return;var t=this.prevOp,n=this.$mergeableCommands,r=t.command&&e.command.name==t.command.name;if(e.command.name=="insertstring"){var i=e.args;this.mergeNextCommand===undefined&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(i)||/\s/.test(t.args)),this.mergeNextCommand=!0}else r=r&&n.indexOf(e.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:n.indexOf(e.command.name)!==-1&&(this.sequenceStartTime=Date.now())},this.setKeyboardHandler=function(e,t){if(e&&typeof e=="string"&&e!="ace"){this.$keybindingId=e;var n=this;g.loadModule(["keybinding",e],function(r){n.$keybindingId==e&&n.keyBinding.setKeyboardHandler(r&&r.handler),t&&t()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session==e)return;this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}),e&&e.bgTokenizer&&e.bgTokenizer.scheduleStart()},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?t==1?this.navigateFileEnd():t==-1&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||i.computedStyle(this.container).fontSize},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(this.$highlightPending)return;var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session;if(!t||!t.bgTokenizer)return;t.$bracketHighlight&&(t.$bracketHighlight.markerIds.forEach(function(e){t.removeMarker(e)}),t.$bracketHighlight=null);var n=t.getMatchingBracketRanges(e.getCursorPosition());!n&&t.$mode.getMatching&&(n=t.$mode.getMatching(e.session));if(!n)return;var r="ace_bracket";Array.isArray(n)?n.length==1&&(r="ace_error_bracket"):n=[n],n.length==2&&(p.comparePoints(n[0].end,n[1].start)==0?n=[p.fromPoints(n[0].start,n[1].end)]:p.comparePoints(n[0].start,n[1].end)==0&&(n=[p.fromPoints(n[1].start,n[0].end)])),t.$bracketHighlight={ranges:n,markerIds:n.map(function(e){return t.addMarker(e,r,"text")})}},50)},this.$highlightTags=function(){if(this.$highlightTagPending)return;var e=this;this.$highlightTagPending=!0,setTimeout(function(){e.$highlightTagPending=!1;var t=e.session;if(!t||!t.bgTokenizer)return;var n=e.getCursorPosition(),r=new y(e.session,n.row,n.column),i=r.getCurrentToken();if(!i||!/\b(?:tag-open|tag-name)/.test(i.type)){t.removeMarker(t.$tagHighlight),t.$tagHighlight=null;return}if(i.type.indexOf("tag-open")!==-1){i=r.stepForward();if(!i)return}var s=i.value,o=i.value,u=0,a=r.stepBackward();if(a.value==="<"){do a=i,i=r.stepForward(),i&&(i.type.indexOf("tag-name")!==-1?(o=i.value,s===o&&(a.value==="<"?u++:a.value==="</"&&u--)):s===o&&i.value==="/>"&&u--);while(i&&u>=0)}else{do{i=a,a=r.stepBackward();if(i)if(i.type.indexOf("tag-name")!==-1)s===i.value&&(a.value==="<"?u++:a.value==="</"&&u--);else if(i.value==="/>"){var f=0,l=a;while(l){if(l.type.indexOf("tag-name")!==-1&&l.value===s){u--;break}if(l.value==="<")break;l=r.stepBackward(),f++}for(var c=0;c<f;c++)r.stepForward()}}while(a&&u<=0);r.stepForward()}if(!i){t.removeMarker(t.$tagHighlight),t.$tagHighlight=null;return}var h=r.getCurrentTokenRow(),d=r.getCurrentTokenColumn(),v=new p(h,d,h,d+i.value.length),m=t.$backMarkers[t.$tagHighlight];t.$tagHighlight&&m!=undefined&&v.compareRange(m.range)!==0&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),t.$tagHighlight||(t.$tagHighlight=t.addMarker(v,"ace_bracket","text"))},50)},this.focus=function(){var e=this;setTimeout(function(){e.isFocused()||e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){if(this.$isFocused)return;this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e)},this.onBlur=function(e){if(!this.$isFocused)return;this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e)},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:Infinity;this.renderer.updateLines(e.start.row,n,t),this._signal("change",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e=this.getSession(),t;if(this.$highlightActiveLine){if(this.$selectionStyle!="line"||!this.selection.isMultiLine())t=this.getCursorPosition();this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(t=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(t=!1)}if(e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new p(t.row,t.column,t.row,Infinity);n.id=e.addMarker(n,"ace_active-line","screenLine"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null;if(!this.selection.isEmpty()){var n=this.selection.getRange(),r=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",r)}else this.$updateHighlightActiveLine();var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(t.isEmpty()||t.isMultiLine())return;var n=t.start.column,r=t.end.column,i=e.getLine(t.start.row),s=i.substring(n,r);if(s.length>5e3||!/[\w\d]/.test(s))return;var o=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:s}),u=i.substring(n-1,r+1);if(!o.test(u))return;return o},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),n=!1;if(!e&&this.$copyWithEmptySelection){n=!0;var r=this.selection.getAllRanges();for(var i=0;i<r.length;i++){var s=r[i];if(i&&r[i-1].start.row==s.start.row)continue;e+=this.session.getLine(s.start.row)+t}}var o={text:e};return this._signal("copy",o),b.lineMode=n?o.text:!1,o.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){var n={text:e,event:t};this.commands.exec("paste",this,n)},this.$handlePaste=function(e){typeof e=="string"&&(e={text:e}),this._signal("paste",e);var t=e.text,n=t===b.lineMode,r=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?r.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(n)this.selection.rangeList.ranges.forEach(function(e){r.insert({row:e.start.row,column:0},t)});else{var i=t.split(/\r\n|\r|\n/),s=this.selection.rangeList.ranges,o=i.length==2&&(!i[0]||!i[1]);if(i.length!=s.length||o)return this.commands.exec("insertstring",this,t);for(var u=s.length;u--;){var a=s[u];a.isEmpty()||r.remove(a),r.insert(a.start,i[u])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,r=n.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var s=r.transformAction(n.getState(i.row),"insertion",this,n,e);s&&(e!==s.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),e=s.text)}e=="	"&&(e=this.session.getTabString());if(!this.selection.isEmpty()){var o=this.getSelectionRange();i=this.session.remove(o),this.clearSelection()}else if(this.session.getOverwrite()&&e.indexOf("\n")==-1){var o=new p.fromPoints(i,i);o.end.column+=e.length,this.session.remove(o)}if(e=="\n"||e=="\r\n"){var u=n.getLine(i.row);if(i.column>u.search(/\S|$/)){var a=u.substr(i.column).search(/\S|$/);n.doc.removeInLine(i.row,i.column,i.column+a)}}this.clearSelection();var f=i.column,l=n.getState(i.row),u=n.getLine(i.row),c=r.checkOutdent(l,u,e);n.insert(i,e),s&&s.selection&&(s.selection.length==2?this.selection.setSelectionRange(new p(i.row,f+s.selection[0],i.row,f+s.selection[1])):this.selection.setSelectionRange(new p(i.row+s.selection[0],s.selection[1],i.row+s.selection[2],s.selection[3])));if(this.$enableAutoIndent){if(n.getDocument().isNewLine(e)){var h=r.getNextLineIndent(l,u.slice(0,i.column),n.getTabString());n.insert({row:i.row+1,column:0},h)}c&&r.autoOutdent(l,n,i.row)}},this.autoIndent=function(){var e=this.session,t=e.getMode(),n,r;if(this.selection.isEmpty())n=0,r=e.doc.getLength()-1;else{var i=this.getSelectionRange();n=i.start.row,r=i.end.row}var s="",o="",u="",a,f,l,c=e.getTabString();for(var h=n;h<=r;h++)h>0&&(s=e.getState(h-1),o=e.getLine(h-1),u=t.getNextLineIndent(s,o,c)),a=e.getLine(h),f=t.$getIndent(a),u!==f&&(f.length>0&&(l=new p(h,0,h,f.length),e.remove(l)),u.length>0&&e.insert({row:h,column:0},u)),t.autoOutdent(s,e,h)},this.onTextInput=function(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:"insertstring"}});var n=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},this.applyComposition=function(e,t){if(t.extendLeft||t.extendRight){var n=this.selection.getRange();n.start.column-=t.extendLeft,n.end.column+=t.extendRight,n.start.column<0&&(n.start.row--,n.start.column+=this.session.getLine(n.start.row).length+1),this.selection.setRange(n),!e&&!n.isEmpty()&&this.remove()}(e||!this.selection.isEmpty())&&this.insert(e,!0);if(t.restoreStart||t.restoreEnd){var n=this.selection.getRange();n.start.column-=t.restoreStart,n.end.column-=t.restoreEnd,this.selection.setRange(n)}},this.onCommandKey=function(e,t,n){return this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&(e=="left"?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(t.start.row),i=n.getMode().transformAction(r,"deletion",this,n,t);if(t.end.column===0){var s=n.getTextRange(t);if(s[s.length-1]=="\n"){var o=n.getLine(t.end.row);/^\s+$/.test(o)&&(t.end.column=o.length)}}i&&(t=i)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(!this.selection.isEmpty())return;var e=this.getCursorPosition(),t=e.column;if(t===0)return;var n=this.session.getLine(e.row),r,i;t<n.length?(r=n.charAt(t)+n.charAt(t-1),i=new p(e.row,t-1,e.row,t+1)):(r=n.charAt(t-1)+n.charAt(t-2),i=new p(e.row,t-2,e.row,t)),this.session.replace(i,r),this.session.selection.moveToPosition(i.end)},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row){var n=this.$getSelectedRows();e.indentRows(n.first,n.last,"	");return}if(t.start.column<t.end.column){var r=e.getTextRange(t);if(!/^\s+$/.test(r)){var n=this.$getSelectedRows();e.indentRows(n.first,n.last,"	");return}}var i=e.getLine(t.start.row),o=t.start,u=e.getTabSize(),a=e.documentToScreenColumn(o.row,o.column);if(this.session.getUseSoftTabs())var f=u-a%u,l=s.stringRepeat(" ",f);else{var f=a%u;while(i[t.start.column-1]==" "&&f)t.start.column--,f--;this.selection.setSelectionRange(t),l="	"}return this.insert(l)},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"	")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){var e=this.$getSelectedRows(),t=this.session,n=[];for(var r=e.first;r<=e.last;r++)n.push(t.getLine(r));n.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});var i=new p(0,0,0,0);for(var r=e.first;r<=e.last;r++){var s=t.getLine(r);i.start.row=r,i.end.row=r,i.end.column=s.length,t.replace(i,n[r-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;var r=this.session.getLine(e);while(n.lastIndex<t){var i=n.exec(r);if(i.index<=t&&i.index+i[0].length>=t){var s={value:i[0],start:i.index,end:i.index+i[0].length};return s}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,r=new p(t,n-1,t,n),i=this.session.getTextRange(r);if(!isNaN(parseFloat(i))&&isFinite(i)){var s=this.getNumberAt(t,n);if(s){var o=s.value.indexOf(".")>=0?s.start+s.value.indexOf(".")+1:s.end,u=s.start+s.value.length-o,a=parseFloat(s.value);a*=Math.pow(10,u),o!==s.end&&n<o?e*=Math.pow(10,s.end-n-1):e*=Math.pow(10,s.end-n),a+=e,a/=Math.pow(10,u);var f=a.toFixed(u),l=new p(t,s.start,t,s.end);this.session.replace(l,f),this.moveCursorTo(t,Math.max(s.start+1,n+f.length-s.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var e=this.selection.getCursor().row,t=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),r=this.selection.getWordRange().start.column,i=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),o=t-r-1;o<0&&(o=0);var u=0,a=0,f=this;n.match(/[A-Za-z0-9_]+/)&&i.forEach(function(t,i){a=u+t.length,o>=u&&o<=a&&(n=t,f.selection.clearSelection(),f.moveCursorTo(e,u+r),f.selection.selectTo(e,a+r)),u=a});var l=this.$toggleWordPairs,c;for(var h=0;h<l.length;h++){var p=l[h];for(var d=0;d<=1;d++){var v=+!d,m=n.match(new RegExp("^\\s?_?("+s.escapeRegExp(p[d])+")\\s?$","i"));if(m){var g=n.match(new RegExp("([_]|^|\\s)("+s.escapeRegExp(m[1])+")($|\\s)","g"));g&&(c=n.replace(new RegExp(s.escapeRegExp(p[d]),"i"),function(e){var t=p[v];return e.toUpperCase()==e?t=t.toUpperCase():e.charAt(0).toUpperCase()==e.charAt(0)&&(t=t.substr(0,0)+p[v].charAt(0).toUpperCase()+t.substr(1)),t}),this.insert(c),c="")}}}},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),r=e.isBackwards();if(n.isEmpty()){var i=n.start.row;t.duplicateLines(i,i)}else{var s=r?n.start:n.end,o=t.insert(s,t.getTextRange(n),!1);n.start=s,n.end=o,e.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var n,r,i=this.selection;if(!i.inMultiSelectMode||this.inVirtualSelectionMode){var s=i.toOrientedRange();n=this.$getSelectedRows(s),r=this.session.$moveLines(n.first,n.last,t?0:e),t&&e==-1&&(r=0),s.moveBy(r,0),i.fromOrientedRange(s)}else{var o=i.rangeList.ranges;i.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;var u=0,a=0,f=o.length;for(var l=0;l<f;l++){var c=l;o[l].moveBy(u,0),n=this.$getSelectedRows(o[l]);var h=n.first,p=n.last;while(++l<f){a&&o[l].moveBy(a,0);var d=this.$getSelectedRows(o[l]);if(t&&d.first!=p)break;if(!t&&d.first>p+1)break;p=d.last}l--,u=this.session.$moveLines(h,p,t?0:e),t&&e==-1&&(c=l+1);while(c<=l)o[c].moveBy(u,0),c++;t||(u=0),a+=u}i.fromOrientedRange(i.ranges[0]),i.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(e)},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,r=this.renderer.layerConfig,i=e*Math.floor(r.height/r.lineHeight);t===!0?this.selection.$moveSelection(function(){this.moveCursorBy(i,0)}):t===!1&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection());var s=n.scrollTop;n.scrollBy(0,i*r.lineHeight),t!=null&&n.scrollCursorIntoView(null,.5),n.animateScrolling(s)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,r){this.renderer.scrollToLine(e,t,n,r)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),r=new y(this.session,n.row,n.column),i=r.getCurrentToken(),s=i||r.stepForward();if(!s)return;var o,u=!1,a={},f=n.column-s.start,l,c={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(s.value.match(/[{}()\[\]]/g))for(;f<s.value.length&&!u;f++){if(!c[s.value[f]])continue;l=c[s.value[f]]+"."+s.type.replace("rparen","lparen"),isNaN(a[l])&&(a[l]=0);switch(s.value[f]){case"(":case"[":case"{":a[l]++;break;case")":case"]":case"}":a[l]--,a[l]===-1&&(o="bracket",u=!0)}}else s.type.indexOf("tag-name")!==-1&&(isNaN(a[s.value])&&(a[s.value]=0),i.value==="<"?a[s.value]++:i.value==="</"&&a[s.value]--,a[s.value]===-1&&(o="tag",u=!0));u||(i=s,s=r.stepForward(),f=0)}while(s&&!u);if(!o)return;var h,d;if(o==="bracket"){h=this.session.getBracketRange(n);if(!h){h=new p(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+f-1,r.getCurrentTokenRow(),r.getCurrentTokenColumn()+f-1),d=h.start;if(t||d.row===n.row&&Math.abs(d.column-n.column)<2)h=this.session.getBracketRange(d)}}else if(o==="tag"){if(!s||s.type.indexOf("tag-name")===-1)return;var v=s.value;h=new p(r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2,r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2);if(h.compare(n.row,n.column)===0){u=!1;do s=i,i=r.stepBackward(),i&&(i.type.indexOf("tag-close")!==-1&&h.setEnd(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1),s.value===v&&s.type.indexOf("tag-name")!==-1&&(i.value==="<"?a[v]++:i.value==="</"&&a[v]--,a[v]===0&&(u=!0)));while(i&&!u)}s&&s.type.indexOf("tag-name")&&(d=h.start,d.row==n.row&&Math.abs(d.column-n.column)<2&&(d=h.end))}d=h&&h.cursor||d,d&&(e?h&&t?this.selection.setRange(h):h&&h.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(d.row,d.column):this.selection.moveTo(d.row,d.column))},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}else{e=e||1;while(e--)this.selection.moveCursorLeft()}this.clearSelection()},this.navigateRight=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}else{e=e||1;while(e--)this.selection.moveCursorRight()}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,e)&&(r=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end),r):r},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;var i=this.getSelectionRange();this.selection.moveTo(0,0);for(var s=n.length-1;s>=0;--s)this.$tryReplace(n[s],e)&&r++;return this.selection.setSelectionRange(i),r},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return t=this.$search.replace(n,t),t!==null?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),typeof e=="string"||e instanceof RegExp?t.needle=e:typeof e=="object"&&r.mixin(t,e);var i=this.selection.getRange();t.needle==null&&(e=this.session.getTextRange(i)||this.$search.$options.needle,e||(i=this.session.getWordRange(i.start.row,i.start.column),e=this.session.getTextRange(i)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:i});var s=this.$search.find(this.session);if(t.preventScroll)return s;if(s)return this.revealRange(s,n),s;t.backwards?i.start=i.end:i.end=i.start,this.selection.setRange(i)},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),t!==!1&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(e){e.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(e){if(!e)return;var t,n=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var i=this.$scrollAnchor;i.style.cssText="position:absolute",this.container.insertBefore(i,this.container.firstChild);var s=this.on("changeSelection",function(){r=!0}),o=this.renderer.on("beforeRender",function(){r&&(t=n.renderer.container.getBoundingClientRect())}),u=this.renderer.on("afterRender",function(){if(r&&t&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var e=n.renderer,s=e.$cursorLayer.$pixelPos,o=e.layerConfig,u=s.top-o.offset;s.top>=0&&u+t.top<0?r=!0:s.top<o.height&&s.top+t.top+o.lineHeight>window.innerHeight?r=!1:r=null,r!=null&&(i.style.top=u+"px",i.style.left=s.left+"px",i.style.height=o.lineHeight+"px",i.scrollIntoView(r)),r=t=null}});this.setAutoScrollEditorIntoView=function(e){if(e)return;delete this.setAutoScrollEditorIntoView,this.off("changeSelection",s),this.renderer.off("afterRender",u),this.renderer.off("beforeRender",o)}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;if(!t)return;t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&e!="wide",i.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e))},this.prompt=function(e,t,n){var r=this;g.loadModule("./ext/prompt",function(i){i.prompt(r,e,t,n)})}}.call(w.prototype),g.defineOptions(w.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(e){this.textInput.setCopyWithEmptySelection(e)},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(e){this.session.setValue(e)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(e){this.setSession(e)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(e){this.renderer.$gutterLayer.setShowLineNumbers(e),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),e&&this.$relativeLineNumbers?E.attach(this):E.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(e){this.$showLineNumbers&&e?E.attach(this):E.detach(this)}},placeholder:{set:function(e){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var e=this.session&&(this.renderer.$composition||this.getValue());if(e&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),i.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!e&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),i.addCssClass(this.container,"ace_hasPlaceholder");var t=i.createElement("div");t.className="ace_placeholder",t.textContent=this.$placeholder||"",this.renderer.placeholderNode=t,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!e&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var E={getText:function(e,t){return(Math.abs(e.selection.lead.row-t)||t+1+(t<9?"\u00b7":""))+""},getWidth:function(e,t,n){return Math.max(t.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(e,t){t.renderer.$loop.schedule(t.renderer.CHANGE_GUTTER)},attach:function(e){e.renderer.$gutterLayer.$renderer=this,e.on("changeSelection",this.update),this.update(null,e)},detach:function(e){e.renderer.$gutterLayer.$renderer==this&&(e.renderer.$gutterLayer.$renderer=null),e.off("changeSelection",this.update),this.update(null,e)}};t.Editor=w}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";function i(e,t){for(var n=t;n--;){var r=e[n];if(r&&!r[0].ignore){while(n<t-1){var i=d(e[n],e[n+1]);e[n]=i[0],e[n+1]=i[1],n++}return!0}}}function a(e){var t=e.action=="insert",n=e.start,r=e.end,i=(r.row-n.row)*(t?1:-1),s=(r.column-n.column)*(t?1:-1);t&&(r=n);for(var o in this.marks){var a=this.marks[o],f=u(a,n);if(f<0)continue;if(f===0&&t){if(a.bias!=1){a.bias==-1;continue}f=1}var l=t?f:u(a,r);if(l>0){a.row+=i,a.column+=a.row==r.row?s:0;continue}!t&&l<=0&&(a.row=n.row,a.column=n.column,l===0&&(a.bias=1))}}function f(e){return{row:e.row,column:e.column}}function l(e){return{start:f(e.start),end:f(e.end),action:e.action,lines:e.lines.slice()}}function c(e){e=e||this;if(Array.isArray(e))return e.map(c).join("\n");var t="";e.action?(t=e.action=="insert"?"+":"-",t+="["+e.lines+"]"):e.value&&(Array.isArray(e.value)?t=e.value.map(h).join("\n"):t=h(e.value)),e.start&&(t+=h(e));if(e.id||e.rev)t+="	("+(e.id||e.rev)+")";return t}function h(e){return e.start.row+":"+e.start.column+"=>"+e.end.row+":"+e.end.column}function p(e,t){var n=e.action=="insert",r=t.action=="insert";if(n&&r)if(o(t.start,e.end)>=0)m(t,e,-1);else{if(!(o(t.start,e.start)<=0))return null;m(e,t,1)}else if(n&&!r)if(o(t.start,e.end)>=0)m(t,e,-1);else{if(!(o(t.end,e.start)<=0))return null;m(e,t,-1)}else if(!n&&r)if(o(t.start,e.start)>=0)m(t,e,1);else{if(!(o(t.start,e.start)<=0))return null;m(e,t,1)}else if(!n&&!r)if(o(t.start,e.start)>=0)m(t,e,1);else{if(!(o(t.end,e.start)<=0))return null;m(e,t,-1)}return[t,e]}function d(e,t){for(var n=e.length;n--;)for(var r=0;r<t.length;r++)if(!p(e[n],t[r])){while(n<e.length){while(r--)p(t[r],e[n]);r=t.length,n++}return[e,t]}return e.selectionBefore=t.selectionBefore=e.selectionAfter=t.selectionAfter=null,[t,e]}function v(e,t){var n=e.action=="insert",r=t.action=="insert";if(n&&r)o(e.start,t.start)<0?m(t,e,1):m(e,t,1);else if(n&&!r)o(e.start,t.end)>=0?m(e,t,-1):o(e.start,t.start)<=0?m(t,e,1):(m(e,s.fromPoints(t.start,e.start),-1),m(t,e,1));else if(!n&&r)o(t.start,e.end)>=0?m(t,e,-1):o(t.start,e.start)<=0?m(e,t,1):(m(t,s.fromPoints(e.start,t.start),-1),m(e,t,1));else if(!n&&!r)if(o(t.start,e.end)>=0)m(t,e,-1);else{if(!(o(t.end,e.start)<=0)){var i,u;return o(e.start,t.start)<0&&(i=e,e=y(e,t.start)),o(e.end,t.end)>0&&(u=y(e,t.end)),g(t.end,e.start,e.end,-1),u&&!i&&(e.lines=u.lines,e.start=u.start,e.end=u.end,u=e),[t,i,u].filter(Boolean)}m(e,t,-1)}return[t,e]}function m(e,t,n){g(e.start,t.start,t.end,n),g(e.end,t.start,t.end,n)}function g(e,t,n,r){e.row==(r==1?t:n).row&&(e.column+=r*(n.column-t.column)),e.row+=r*(n.row-t.row)}function y(e,t){var n=e.lines,r=e.end;e.end=f(t);var i=e.end.row-e.start.row,s=n.splice(i,n.length),o=i?t.column:t.column-e.start.column;n.push(s[0].substring(0,o)),s[0]=s[0].substr(o);var u={start:f(t),end:r,lines:s,action:e.action};return u}function b(e,t){t=l(t);for(var n=e.length;n--;){var r=e[n];for(var i=0;i<r.length;i++){var s=r[i],o=v(s,t);t=o[0],o.length!=2&&(o[2]?(r.splice(i+1,1,o[1],o[2]),i++):o[1]||(r.splice(i,1),i--))}r.length||e.splice(n,1)}return e}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];for(var i=0;i<r.length;i++)b(e,r[i])}}var r=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(e){this.$session=e},this.add=function(e,t,n){if(this.$fromUndo)return;if(e==this.$lastDelta)return;this.$keepRedoStack||(this.$redoStack.length=0);if(t===!1||!this.lastDeltas)this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev;if(e.action=="remove"||e.action=="insert")this.$lastDelta=e;this.lastDeltas.push(e)},this.addSelection=function(e,t){this.selections.push({value:e,rev:t||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(e,t){t==null&&(t=this.$rev+1);var n=this.$undoStack;for(var r=n.length;r--;){var i=n[r][0];if(i.id<=e)break;i.id<t&&(i.ignore=!0)}this.lastDeltas=null},this.getSelection=function(e,t){var n=this.selections;for(var r=n.length;r--;){var i=n[r];if(i.rev<e)return t&&(i=n[r+1]),i}},this.getRevision=function(){return this.$rev},this.getDeltas=function(e,t){t==null&&(t=this.$rev+1);var n=this.$undoStack,r=null,i=0;for(var s=n.length;s--;){var o=n[s][0];o.id<t&&!r&&(r=s+1);if(o.id<=e){i=s+1;break}}return n.slice(i,r)},this.getChangedRanges=function(e,t){t==null&&(t=this.$rev+1)},this.getChangedLines=function(e,t){t==null&&(t=this.$rev+1)},this.undo=function(e,t){this.lastDeltas=null;var n=this.$undoStack;if(!i(n,n.length))return;e||(e=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var r=n.pop(),s=null;return r&&(s=e.undoChanges(r,t),this.$redoStack.push(r),this.$syncRev()),this.$fromUndo=!1,s},this.redo=function(e,t){this.lastDeltas=null,e||(e=this.$session),this.$fromUndo=!0;if(this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);w(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(e){e[0].id=++this.$maxRev},this)}var r=this.$redoStack.pop(),i=null;return r&&(i=e.redoChanges(r,t),this.$undoStack.push(r),this.$syncRev()),this.$fromUndo=!1,i},this.$syncRev=function(){var e=this.$undoStack,t=e[e.length-1],n=t&&t[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(e){e==undefined&&(e=this.$rev),this.mark=e},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(e){return e?c(e):c(this.$undoStack)+"\n---\n"+c(this.$redoStack)}}).call(r.prototype);var s=e("./range").Range,o=s.comparePoints,u=s.comparePoints;t.UndoManager=r}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../lib/dom"),i=function(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(e){r.translate(this.element,0,-(e.firstRowScreen*e.lineHeight%this.canvasHeight)-e.offset*this.$offsetCoefficient)},this.pageChanged=function(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)},this.computeLineTop=function(e,t,n){var r=t.firstRowScreen*t.lineHeight,i=Math.floor(r/this.canvasHeight),s=n.documentToScreenRow(e,0)*t.lineHeight;return s-i*this.canvasHeight},this.computeLineHeight=function(e,t,n){return t.lineHeight*n.getRowLineCount(e)},this.getLength=function(){return this.cells.length},this.get=function(e){return this.cells[e]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);var t=r.createFragment(this.element);for(var n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)},this.unshift=function(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);var t=r.createFragment(this.element);for(var n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement("afterbegin",e.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(e){if(!e)return;e.element.remove(),this.cellCache.push(e)},this.createCell=function(e,t,n,i){var s=this.cellCache.pop();if(!s){var o=r.createElement("div");i&&i(o),this.element.appendChild(o),s={element:o,text:"",row:e}}return s.row=e,s}}).call(i.prototype),t.Lines=i}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],function(e,t,n){"use strict";function f(e){var t=document.createTextNode("");e.appendChild(t);var n=r.createElement("span");return e.appendChild(n),e}var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,u=e("./lines").Lines,a=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new u(this.element),this.$lines.$offsetCoefficient=1};(function(){i.implement(this,o),this.setSession=function(e){this.session&&this.session.off("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],r=n.row,i=this.$annotations[r];i||(i=this.$annotations[r]={text:[]});var o=n.text;o=o?s.escapeHTML(o):n.html||"",i.text.indexOf(o)===-1&&i.text.push(o);var u=n.type;u=="error"?i.className=" ace_error":u=="warning"&&i.className!=" ace_error"?i.className=" ace_warning":u=="info"&&!i.className&&(i.className=" ace_info")}},this.$updateAnnotations=function(e){if(!this.$annotations.length)return;var t=e.start.row,n=e.end.row-t;if(n!==0)if(e.action=="remove")this.$annotations.splice(t,n+1,null);else{var r=new Array(n+1);r.unshift(t,1),this.$annotations.splice.apply(this.$annotations,r)}},this.update=function(e){this.config=e;var t=this.session,n=e.firstRow,r=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=r,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();var i=t.getNextFoldLine(n),s=i?i.start.row:Infinity,o=null,u=-1,a=n;for(;;){a>s&&(a=i.end.row+1,i=t.getNextFoldLine(a,i),s=i?i.start.row:Infinity);if(a>r){while(this.$lines.getLength()>u+1)this.$lines.pop();break}o=this.$lines.get(++u),o?o.row=a:(o=this.$lines.createCell(a,e,this.session,f),this.$lines.push(o)),this.$renderCell(o,e,i,a),a++}this._signal("afterRender"),this.$updateGutterWidth(e)},this.$updateGutterWidth=function(e){var t=this.session,n=t.gutterRenderer||this.$renderer,r=t.$firstLineNumber,i=this.$lines.last()?this.$lines.last().text:"";if(this.$fixedWidth||t.$useWrapMode)i=t.getLength()+r-1;var s=n?n.getWidth(t,i,e):i.toString().length*e.characterWidth,o=this.$padding||this.$computePadding();s+=o.left+o.right,s!==this.gutterWidth&&!isNaN(s)&&(this.gutterWidth=s,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",s))},this.$updateCursorRow=function(){if(!this.$highlightGutterLine)return;var e=this.session.selection.getCursor();if(this.$cursorRow===e.row)return;this.$cursorRow=e.row},this.updateLineHighlight=function(){if(!this.$highlightGutterLine)return;var e=this.session.selection.cursor.row;this.$cursorRow=e;if(this.$cursorCell&&this.$cursorCell.row==e)return;this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<t.length;n++){var r=t[n];if(r.row>=this.$cursorRow){if(r.row>this.$cursorRow){var i=this.session.getFoldLine(this.$cursorRow);if(!(n>0&&i&&i.start.row==t[n-1].row))break;r=t[n-1]}r.element.className="ace_gutter-active-line "+r.element.className,this.$cursorCell=r;break}}},this.scrollLines=function(e){var t=this.config;this.config=e,this.$updateCursorRow();if(this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),r=this.oldLastRow;this.oldLastRow=n;if(!t||r<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(r>n)for(var i=this.session.getFoldedRowCount(n+1,r);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),n>r&&this.$lines.push(this.$renderLines(e,r+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},this.$renderLines=function(e,t,n){var r=[],i=t,s=this.session.getNextFoldLine(i),o=s?s.start.row:Infinity;for(;;){i>o&&(i=s.end.row+1,s=this.session.getNextFoldLine(i,s),o=s?s.start.row:Infinity);if(i>n)break;var u=this.$lines.createCell(i,e,this.session,f);this.$renderCell(u,e,s,i),r.push(u),i++}return r},this.$renderCell=function(e,t,n,i){var s=e.element,o=this.session,u=s.childNodes[0],a=s.childNodes[1],f=o.$firstLineNumber,l=o.$breakpoints,c=o.$decorations,h=o.gutterRenderer||this.$renderer,p=this.$showFoldWidgets&&o.foldWidgets,d=n?n.start.row:Number.MAX_VALUE,v="ace_gutter-cell ";this.$highlightGutterLine&&(i==this.$cursorRow||n&&i<this.$cursorRow&&i>=d&&this.$cursorRow<=n.end.row)&&(v+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),l[i]&&(v+=l[i]),c[i]&&(v+=c[i]),this.$annotations[i]&&(v+=this.$annotations[i].className),s.className!=v&&(s.className=v);if(p){var m=p[i];m==null&&(m=p[i]=o.getFoldWidget(i))}if(m){var v="ace_fold-widget ace_"+m;m=="start"&&i==d&&i<n.end.row?v+=" ace_closed":v+=" ace_open",a.className!=v&&(a.className=v);var g=t.lineHeight+"px";r.setStyle(a.style,"height",g),r.setStyle(a.style,"display","inline-block")}else a&&r.setStyle(a.style,"display","none");var y=(h?h.getText(o,i):i+f).toString();return y!==u.data&&(u.data=y),r.setStyle(e.element.style,"height",this.$lines.computeLineHeight(i,t,o)+"px"),r.setStyle(e.element.style,"top",this.$lines.computeLineTop(i,t,o)+"px"),e.text=y,e},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();if(e.x<t.left+n.left)return"markers";if(this.$showFoldWidgets&&e.x>n.right-t.right)return"foldWidgets"}}).call(a.prototype),t.Gutter=a}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../range").Range,i=e("../lib/dom"),s=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){function e(e,t,n,r){return(e?1:0)|(t?2:0)|(n?4:0)|(r?8:0)}this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.elt=function(e,t){var n=this.i!=-1&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=t,n.className=e},this.update=function(e){if(!e)return;this.config=e,this.i=0;var t;for(var n in this.markers){var r=this.markers[n];if(!r.range){r.update(t,this,this.session,e);continue}var i=r.range.clipRows(e.firstRow,e.lastRow);if(i.isEmpty())continue;i=i.toScreenRange(this.session);if(r.renderer){var s=this.$getTop(i.start.row,e),o=this.$padding+i.start.column*e.characterWidth;r.renderer(t,i,o,s,e)}else r.type=="fullLine"?this.drawFullLineMarker(t,i,r.clazz,e):r.type=="screenLine"?this.drawScreenLineMarker(t,i,r.clazz,e):i.isMultiLine()?r.type=="text"?this.drawTextMarker(t,i,r.clazz,e):this.drawMultiLineMarker(t,i,r.clazz,e):this.drawSingleLineMarker(t,i,r.clazz+" ace_start"+" ace_br15",e)}if(this.i!=-1)while(this.i<this.element.childElementCount)this.element.removeChild(this.element.lastChild)},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(t,n,i,s,o){var u=this.session,a=n.start.row,f=n.end.row,l=a,c=0,h=0,p=u.getScreenLastRowColumn(l),d=new r(l,n.start.column,l,h);for(;l<=f;l++)d.start.row=d.end.row=l,d.start.column=l==a?n.start.column:u.getRowWrapIndent(l),d.end.column=p,c=h,h=p,p=l+1<f?u.getScreenLastRowColumn(l+1):l==f?0:n.end.column,this.drawSingleLineMarker(t,d,i+(l==a?" ace_start":"")+" ace_br"+e(l==a||l==a+1&&n.start.column,c<h,h>p,l==f),s,l==f?0:1,o)},this.drawMultiLineMarker=function(e,t,n,r,i){var s=this.$padding,o=r.lineHeight,u=this.$getTop(t.start.row,r),a=s+t.start.column*r.characterWidth;i=i||"";if(this.session.$bidiHandler.isBidiRow(t.start.row)){var f=t.clone();f.end.row=f.start.row,f.end.column=this.session.getLine(f.start.row).length,this.drawBidiSingleLineMarker(e,f,n+" ace_br1 ace_start",r,null,i)}else this.elt(n+" ace_br1 ace_start","height:"+o+"px;"+"right:0;"+"top:"+u+"px;left:"+a+"px;"+(i||""));if(this.session.$bidiHandler.isBidiRow(t.end.row)){var f=t.clone();f.start.row=f.end.row,f.start.column=0,this.drawBidiSingleLineMarker(e,f,n+" ace_br12",r,null,i)}else{u=this.$getTop(t.end.row,r);var l=t.end.column*r.characterWidth;this.elt(n+" ace_br12","height:"+o+"px;"+"width:"+l+"px;"+"top:"+u+"px;"+"left:"+s+"px;"+(i||""))}o=(t.end.row-t.start.row-1)*r.lineHeight;if(o<=0)return;u=this.$getTop(t.start.row+1,r);var c=(t.start.column?1:0)|(t.end.column?0:8);this.elt(n+(c?" ace_br"+c:""),"height:"+o+"px;"+"right:0;"+"top:"+u+"px;"+"left:"+s+"px;"+(i||""))},this.drawSingleLineMarker=function(e,t,n,r,i,s){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,n,r,i,s);var o=r.lineHeight,u=(t.end.column+(i||0)-t.start.column)*r.characterWidth,a=this.$getTop(t.start.row,r),f=this.$padding+t.start.column*r.characterWidth;this.elt(n,"height:"+o+"px;"+"width:"+u+"px;"+"top:"+a+"px;"+"left:"+f+"px;"+(s||""))},this.drawBidiSingleLineMarker=function(e,t,n,r,i,s){var o=r.lineHeight,u=this.$getTop(t.start.row,r),a=this.$padding,f=this.session.$bidiHandler.getSelections(t.start.column,t.end.column);f.forEach(function(e){this.elt(n,"height:"+o+"px;"+"width:"+e.width+(i||0)+"px;"+"top:"+u+"px;"+"left:"+(a+e.left)+"px;"+(s||""))},this)},this.drawFullLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;t.start.row!=t.end.row&&(o+=this.$getTop(t.end.row,r)-s),this.elt(n,"height:"+o+"px;"+"top:"+s+"px;"+"left:0;right:0;"+(i||""))},this.drawScreenLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;this.elt(n,"height:"+o+"px;"+"top:"+s+"px;"+"left:0;right:0;"+(i||""))}}).call(s.prototype),t.Marker=s}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),o=e("./lines").Lines,u=e("../lib/event_emitter").EventEmitter,a=function(e){this.dom=i,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new o(this.element)};(function(){r.implement(this,u),this.EOF_CHAR="\u00b6",this.EOL_CHAR_LF="\u00ac",this.EOL_CHAR_CRLF="\u00a4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\u00b7",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var e=this.session.doc,t=e.getNewLineCharacter()=="\n"&&e.getNewLineMode()!="windows",n=t?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=n)return this.EOL_CHAR=n,!0},this.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,typeof e=="string"?(this.showSpaces=/tab/i.test(e),this.showTabs=/space/i.test(e),this.showEOL=/eol/i.test(e)):this.showSpaces=this.showTabs=this.showEOL=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;var t=this.$tabStrings=[0];for(var n=1;n<e+1;n++)if(this.showTabs){var r=this.dom.createElement("span");r.className="ace_invisible ace_invisible_tab",r.textContent=s.stringRepeat(this.TAB_CHAR,n),t.push(r)}else t.push(this.dom.createTextNode(s.stringRepeat(" ",n),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i="ace_indent-guide",o=this.showSpaces?" ace_invisible ace_invisible_space":"",u=this.showSpaces?s.stringRepeat(this.SPACE_CHAR,this.tabSize):s.stringRepeat(" ",this.tabSize),a=this.showTabs?" ace_invisible ace_invisible_tab":"",f=this.showTabs?s.stringRepeat(this.TAB_CHAR,this.tabSize):u,r=this.dom.createElement("span");r.className=i+o,r.textContent=u,this.$tabStrings[" "]=r;var r=this.dom.createElement("span");r.className=i+a,r.textContent=f,this.$tabStrings["	"]=r}},this.updateLines=function(e,t,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;var r=Math.max(t,e.firstRow),i=Math.min(n,e.lastRow),s=this.element.childNodes,o=0;for(var u=e.firstRow;u<r;u++){var a=this.session.getFoldLine(u);if(a){if(a.containsRow(r)){r=a.start.row;break}u=a.end.row}o++}var f=!1,u=r,a=this.session.getNextFoldLine(u),l=a?a.start.row:Infinity;for(;;){u>l&&(u=a.end.row+1,a=this.session.getNextFoldLine(u,a),l=a?a.start.row:Infinity);if(u>i)break;var c=s[o++];if(c){this.dom.removeChildren(c),this.$renderLine(c,u,u==l?a:!1),f&&(c.style.top=this.$lines.computeLineTop(u,e,this.session)+"px");var h=e.lineHeight*this.session.getRowLength(u)+"px";c.style.height!=h&&(f=!0,c.style.height=h)}u++}if(f)while(o<this.$lines.cells.length){var p=this.$lines.cells[o++];p.element.style.top=this.$lines.computeLineTop(p.row,e,this.session)+"px"}},this.scrollLines=function(e){var t=this.config;this.config=e;if(this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=e.lastRow,r=t?t.lastRow:-1;if(!t||r<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(t.lastRow>e.lastRow)for(var i=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow))},this.$renderLinesFragment=function(e,t,n){var r=[],s=t,o=this.session.getNextFoldLine(s),u=o?o.start.row:Infinity;for(;;){s>u&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),u=o?o.start.row:Infinity);if(s>n)break;var a=this.$lines.createCell(s,e,this.session),f=a.element;this.dom.removeChildren(f),i.setStyle(f.style,"height",this.$lines.computeLineHeight(s,e,this.session)+"px"),i.setStyle(f.style,"top",this.$lines.computeLineTop(s,e,this.session)+"px"),this.$renderLine(f,s,s==u?o:!1),this.$useLineGroups()?f.className="ace_line_group":f.className="ace_line",r.push(a),s++}return r},this.update=function(e){this.$lines.moveContainer(e),this.config=e;var t=e.firstRow,n=e.lastRow,r=this.$lines;while(r.getLength())r.pop();r.push(this.$renderLinesFragment(e,t,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,r){var i=this,o=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,u=this.dom.createFragment(this.element),a,f=0;while(a=o.exec(r)){var l=a[1],c=a[2],h=a[3],p=a[4],d=a[5];if(!i.showSpaces&&c)continue;var v=f!=a.index?r.slice(f,a.index):"";f=a.index+a[0].length,v&&u.appendChild(this.dom.createTextNode(v,this.element));if(l){var m=i.session.getScreenTabSize(t+a.index);u.appendChild(i.$tabStrings[m].cloneNode(!0)),t+=m-1}else if(c)if(i.showSpaces){var g=this.dom.createElement("span");g.className="ace_invisible ace_invisible_space",g.textContent=s.stringRepeat(i.SPACE_CHAR,c.length),u.appendChild(g)}else u.appendChild(this.com.createTextNode(c,this.element));else if(h){var g=this.dom.createElement("span");g.className="ace_invisible ace_invisible_space ace_invalid",g.textContent=s.stringRepeat(i.SPACE_CHAR,h.length),u.appendChild(g)}else if(p){t+=1;var g=this.dom.createElement("span");g.style.width=i.config.characterWidth*2+"px",g.className=i.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",g.textContent=i.showSpaces?i.SPACE_CHAR:p,u.appendChild(g)}else if(d){t+=1;var g=this.dom.createElement("span");g.style.width=i.config.characterWidth*2+"px",g.className="ace_cjk",g.textContent=d,u.appendChild(g)}}u.appendChild(this.dom.createTextNode(f?r.slice(f):r,this.element));if(!this.$textToken[n.type]){var y="ace_"+n.type.replace(/\./g," ace_"),g=this.dom.createElement("span");n.type=="fold"&&(g.style.width=n.value.length*this.config.characterWidth+"px"),g.className=y,g.appendChild(u),e.appendChild(g)}else e.appendChild(u);return t+r.length},this.renderIndentGuide=function(e,t,n){var r=t.search(this.$indentGuideRe);if(r<=0||r>=n)return t;if(t[0]==" "){r-=r%this.tabSize;var i=r/this.tabSize;for(var s=0;s<i;s++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return t.substr(r)}if(t[0]=="	"){for(var s=0;s<r;s++)e.appendChild(this.$tabStrings["	"].cloneNode(!0));return t.substr(r)}return t},this.$createLineElement=function(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t},this.$renderWrappedLine=function(e,t,n){var r=0,i=0,o=n[0],u=0,a=this.$createLineElement();e.appendChild(a);for(var f=0;f<t.length;f++){var l=t[f],c=l.value;if(f==0&&this.displayIndentGuides){r=c.length,c=this.renderIndentGuide(a,c,o);if(!c)continue;r-=c.length}if(r+c.length<o)u=this.$renderToken(a,u,l,c),r+=c.length;else{while(r+c.length>=o)u=this.$renderToken(a,u,l,c.substring(0,o-r)),c=c.substring(o-r),r=o,a=this.$createLineElement(),e.appendChild(a),a.appendChild(this.dom.createTextNode(s.stringRepeat("\u00a0",n.indent),this.element)),i++,u=0,o=n[i]||Number.MAX_VALUE;c.length!=0&&(r+=c.length,u=this.$renderToken(a,u,l,c))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(a,u,null,"",!0)},this.$renderSimpleLine=function(e,t){var n=0,r=t[0],i=r.value;this.displayIndentGuides&&(i=this.renderIndentGuide(e,i)),i&&(n=this.$renderToken(e,n,r,i));for(var s=1;s<t.length;s++){r=t[s],i=r.value;if(n+i.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,n,r,i);n=this.$renderToken(e,n,r,i)}},this.$renderOverflowMessage=function(e,t,n,r,i){n&&this.$renderToken(e,t,n,r.slice(0,this.MAX_LINE_LENGTH-t));var s=this.dom.createElement("span");s.className="ace_inline_button ace_keyword ace_toggle_wrap",s.textContent=i?"<hide>":"<click to see more...>",e.appendChild(s)},this.$renderLine=function(e,t,n){!n&&n!=0&&(n=this.session.getFoldLine(t));if(n)var r=this.$getFoldLineTokens(t,n);else var r=this.session.getTokens(t);var i=e;if(r.length){var s=this.session.getRowSplitData(t);if(s&&s.length){this.$renderWrappedLine(e,r,s);var i=e.lastChild}else{var i=e;this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i)),this.$renderSimpleLine(i,r)}}else this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i));if(this.showEOL&&i){n&&(t=n.end.row);var o=this.dom.createElement("span");o.className="ace_invisible ace_invisible_eol",o.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,i.appendChild(o)}},this.$getFoldLineTokens=function(e,t){function i(e,t,n){var i=0,s=0;while(s+e[i].value.length<t){s+=e[i].value.length,i++;if(i==e.length)return}if(s!=t){var o=e[i].value.substring(t-s);o.length>n-t&&(o=o.substring(0,n-t)),r.push({type:e[i].type,value:o}),s=t+o.length,i+=1}while(s<n&&i<e.length){var o=e[i].value;o.length+s>n?r.push({type:e[i].type,value:o.substring(0,n-s)}):r.push(e[i]),s+=o.length,i+=1}}var n=this.session,r=[],s=n.getTokens(e);return t.walk(function(e,t,o,u,a){e!=null?r.push({type:"fold",value:e}):(a&&(s=n.getTokens(t)),s.length&&i(s,u,o))},t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(a.prototype),t.Text=a}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../lib/dom"),i=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(e){var t=this.cursors;for(var n=t.length;n--;)r.setStyle(t[n].style,"opacity",e?"":"0")},this.$startCssAnimation=function(){var e=this.cursors;for(var t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&r.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){this.$isAnimating=!1,r.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,r.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var e=r.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,r.removeCssClass(this.element,"ace_smooth-blinking")),e(!0);if(!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this)));if(r.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var t=function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()}},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e),r=this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,e.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),i=(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:i}},this.isCursorInView=function(e,t){return e.top>=0&&e.top<t.maxHeight},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,i=0;if(t===undefined||t.length===0)t=[{cursor:null}];for(var n=0,s=t.length;n<s;n++){var o=this.getPixelPosition(t[n].cursor,!0);if((o.top>e.height+e.offset||o.top<0)&&n>1)continue;var u=this.cursors[i++]||this.addCursor(),a=u.style;this.drawCursor?this.drawCursor(u,o,e,t[n],this.session):this.isCursorInView(o,e)?(r.setStyle(a,"display","block"),r.translate(u,o.left,o.top),r.setStyle(a,"width",Math.round(e.characterWidth)+"px"),r.setStyle(a,"height",e.lineHeight+"px")):r.setStyle(a,"display","none")}while(this.cursors.length>i)this.removeCursor();var f=this.session.getOverwrite();this.$setOverwrite(f),this.$pixelPos=o,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(i.prototype),t.Cursor=i}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/event"),o=e("./lib/event_emitter").EventEmitter,u=32768,a=function(e){this.element=i.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=i.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\u00a0",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addListener(this.element,"scroll",this.onScroll.bind(this)),s.addListener(this.element,"mousedown",s.preventDefault)};(function(){r.implement(this,o),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}).call(a.prototype);var f=function(e,t){a.call(this,e),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=i.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};r.inherits(f,a),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){this.scrollTop=this.element.scrollTop;if(this.coeff!=1){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=this.setScrollHeight=function(e){this.scrollHeight=e,e>u?(this.coeff=u/e,e=u):this.coeff!=1&&(this.coeff=1),this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}}.call(f.prototype);var l=function(e,t){a.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};r.inherits(l,a),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(l.prototype),t.ScrollBar=f,t.ScrollBarV=f,t.ScrollBarH=l,t.VScrollBar=f,t.HScrollBar=l}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var r=e("./lib/event"),i=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var n=this;this._flush=function(e){n.pending=!1;var t=n.changes;t&&(r.blockIdle(100),n.changes=0,n.onRender(t));if(n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}};(function(){this.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(r.nextFrame(this._flush),this.pending=!0)},this.clear=function(e){var t=this.changes;return this.changes=0,t}}).call(i.prototype),t.RenderLoop=i}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),o=e("../lib/event"),u=e("../lib/useragent"),a=e("../lib/event_emitter").EventEmitter,f=256,l=typeof ResizeObserver=="function",c=200,h=t.FontMetrics=function(e){this.el=i.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.textContent=s.stringRepeat("X",f),this.$characterSize={width:0,height:0},l?this.$addObserver():this.checkForSizeChanges()};(function(){r.implement(this,a),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",u.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(e){e===undefined&&(e=this.$measureSizes());if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$addObserver=function(){var e=this;this.$observer=new window.ResizeObserver(function(t){e.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=o.onIdle(function t(){e.checkForSizeChanges(),o.onIdle(t,500)},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(e){var t={height:(e||this.$measureNode).clientHeight,width:(e||this.$measureNode).clientWidth/f};return t.width===0||t.height===0?null:t},this.$measureCharWidth=function(e){this.$main.textContent=s.stringRepeat(e,f);var t=this.$main.getBoundingClientRect();return t.width/f},this.getCharacterWidth=function(e){var t=this.charSizes[e];return t===undefined&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function e(t){return!t||!t.parentElement?1:(window.getComputedStyle(t).zoom||1)*e(t.parentElement)},this.$initTransformMeasureNodes=function(){var e=function(e,t){return["div",{style:"position: absolute;top:"+e+"px;left:"+t+"px;"}]};this.els=i.buildDom([e(0,0),e(c,0),e(0,c),e(c,c)],this.el)},this.transformCoordinates=function(e,t){function r(e,t,n){var r=e[1]*t[0]-e[0]*t[1];return[(-t[1]*n[0]+t[0]*n[1])/r,(+e[1]*n[0]-e[0]*n[1])/r]}function i(e,t){return[e[0]-t[0],e[1]-t[1]]}function s(e,t){return[e[0]+t[0],e[1]+t[1]]}function o(e,t){return[e*t[0],e*t[1]]}function u(e){var t=e.getBoundingClientRect();return[t.left,t.top]}if(e){var n=this.$getZoom(this.el);e=o(1/n,e)}this.els||this.$initTransformMeasureNodes();var a=u(this.els[0]),f=u(this.els[1]),l=u(this.els[2]),h=u(this.els[3]),p=r(i(h,f),i(h,l),i(s(f,l),s(h,a))),d=o(1+p[0],i(f,a)),v=o(1+p[1],i(l,a));if(t){var m=t,g=p[0]*m[0]/c+p[1]*m[1]/c+1,y=s(o(m[0],d),o(m[1],v));return s(o(1/g/c,y),a)}var b=i(e,a),w=r(i(d,o(p[0],b)),i(v,o(p[1],b)),b);return o(c,w)}}).call(h.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./config"),o=e("./layer/gutter").Gutter,u=e("./layer/marker").Marker,a=e("./layer/text").Text,f=e("./layer/cursor").Cursor,l=e("./scrollbar").HScrollBar,c=e("./scrollbar").VScrollBar,h=e("./renderloop").RenderLoop,p=e("./layer/font_metrics").FontMetrics,d=e("./lib/event_emitter").EventEmitter,v='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;padding: 0;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;font-variant-ligatures: no-common-ligatures;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_error_bracket {position: absolute;border-bottom: 1px solid #DE5555;border-radius: 0;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);transform-origin: left;white-space: pre;opacity: 0.7;margin: 0 10px;}',m=e("./lib/useragent"),g=m.isIE;i.importCssString(v,"ace_editor.css",!1);var y=function(e,t){var n=this;this.container=e||i.createElement("div"),i.addCssClass(this.container,"ace_editor"),i.HI_DPI&&i.addCssClass(this.container,"ace_hidpi"),this.setTheme(t),s.get("useStrictCSP")==null&&s.set("useStrictCSP",!1),this.$gutter=i.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=i.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=i.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new o(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new u(this.content);var r=this.$textLayer=new a(this.content);this.canvas=r.element,this.$markerFront=new u(this.content),this.$cursorLayer=new f(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new c(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.on("scroll",function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)}),this.scrollBarH.on("scroll",function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!m.isIOS,this.$loop=new h(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),s.resetOptions(this),s._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,d),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),i.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e);if(!e)return;this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode)},this.updateLines=function(e,t,n){t===undefined&&(t=Infinity),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t};if(this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}if(this.$changedLines.firstRow>this.layerConfig.lastRow)return;this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,r){if(this.resizing>2)return;this.resizing>0?this.resizing++:this.resizing=e?1:0;var i=this.container;r||(r=i.clientHeight||i.scrollHeight),n||(n=i.clientWidth||i.scrollWidth);var s=this.$updateCachedSize(e,t,n,r);if(!this.$size.scrollerHeight||!n&&!r)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(s|this.$changes,!0):this.$loop.schedule(s|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null},this.$updateCachedSize=function(e,t,n,r){r-=this.$extraHeight||0;var s=0,o=this.$size,u={width:o.width,height:o.height,scrollerHeight:o.scrollerHeight,scrollerWidth:o.scrollerWidth};r&&(e||o.height!=r)&&(o.height=r,s|=this.CHANGE_SIZE,o.scrollerHeight=o.height,this.$horizScroll&&(o.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",s|=this.CHANGE_SCROLL);if(n&&(e||o.width!=n)){s|=this.CHANGE_SIZE,o.width=n,t==null&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,i.setStyle(this.scrollBarH.element.style,"left",t+"px"),i.setStyle(this.scroller.style,"left",t+this.margin.left+"px"),o.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()-this.margin.h),i.setStyle(this.$gutter.style,"left",this.margin.left+"px");var a=this.scrollBarV.getWidth()+"px";i.setStyle(this.scrollBarH.element.style,"right",a),i.setStyle(this.scroller.style,"right",a),i.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight());if(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)s|=this.CHANGE_FULL}return o.$dirty=!n||!r,s&&this._signal("resize",u),s},this.onGutterResize=function(e){var t=this.$showGutter?e:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-this.$padding*2,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(!this.$showPrintMargin&&!this.$printMarginEl)return;if(!this.$printMarginEl){var e=i.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=i.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$isMousePressed)return;var e=this.textarea.style,t=this.$composition;if(!this.$keepTextAreaAtCursor&&!t){i.translate(this.textarea,-100,0);return}var n=this.$cursorLayer.$pixelPos;if(!n)return;t&&t.markerRange&&(n=this.$cursorLayer.getPixelPosition(t.markerRange.start,!0));var r=this.layerConfig,s=n.top,o=n.left;s-=r.offset;var u=t&&t.useTextareaForIME?this.lineHeight:g?0:1;if(s<0||s>r.height-u){i.translate(this.textarea,0,0);return}var a=1,f=this.$size.height-u;if(!t)s+=this.lineHeight;else if(t.useTextareaForIME){var l=this.textarea.value;a=this.characterWidth*this.session.$getStringScreenWidth(l)[0]}else s+=this.lineHeight+2;o-=this.scrollLeft,o>this.$size.scrollerWidth-a&&(o=this.$size.scrollerWidth-a),o+=this.gutterWidth+this.margin.left,i.setStyle(e,"height",u+"px"),i.setStyle(e,"width",a+"px"),i.translate(this.textarea,Math.min(o,this.$size.scrollerWidth-a),Math.min(s,f))},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},this.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow,n=this.session.documentToScreenRow(t,0)*e.lineHeight;return n-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,r){var i=this.scrollMargin;i.top=e|0,i.bottom=t|0,i.right=r|0,i.left=n|0,i.v=i.top+i.bottom,i.h=i.left+i.right,i.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-i.top),this.updateFull()},this.setMargin=function(e,t,n,r){var i=this.margin;i.top=e|0,i.bottom=t|0,i.right=r|0,i.left=n|0,i.v=i.top+i.bottom,i.h=i.left+i.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){this.$changes&&(e|=this.$changes,this.$changes=0);if(!this.session||!this.container.offsetWidth||this.$frozen||!e&&!t){this.$changes|=e;return}if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",e),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){e|=this.$computeLayerConfig()|this.$loop.clear();if(n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var r=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;r>0&&(this.scrollTop=r,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),i.translate(this.content,-this.scrollLeft,-n.offset);var s=n.width+2*this.$padding+"px",o=n.minHeight+"px";i.setStyle(this.content.style,"width",s),i.setStyle(this.content.style,"height",o)}e&this.CHANGE_H_SCROLL&&(i.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left");if(e&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this._signal("afterRender",e);return}if(e&this.CHANGE_SCROLL){this.$changedLines=null,e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this._signal("afterRender",e);return}e&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(n):e&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender",e)},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var r=n<=2*this.lineHeight,i=!r&&e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var s=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,s,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,r=this.session.getScreenLength(),i=r*this.lineHeight,s=this.$getLongestLine(),o=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-s-2*this.$padding<0),u=this.$horizScroll!==o;u&&(this.$horizScroll=o,this.scrollBarH.setVisible(o));var a=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var f=t.scrollerHeight+this.lineHeight,l=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;i+=l;var c=this.scrollMargin;this.session.setScrollTop(Math.max(-c.top,Math.min(this.scrollTop,i-t.scrollerHeight+c.bottom))),this.session.setScrollLeft(Math.max(-c.left,Math.min(this.scrollLeft,s+2*this.$padding-t.scrollerWidth+c.right)));var h=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-i+l<0||this.scrollTop>c.top),p=a!==h;p&&(this.$vScroll=h,this.scrollBarV.setVisible(h));var d=this.scrollTop%this.lineHeight,v=Math.ceil(f/this.lineHeight)-1,m=Math.max(0,Math.round((this.scrollTop-d)/this.lineHeight)),g=m+v,y,b,w=this.lineHeight;m=e.screenToDocumentRow(m,0);var E=e.getFoldLine(m);E&&(m=E.start.row),y=e.documentToScreenRow(m,0),b=e.getRowLength(m)*w,g=Math.min(e.screenToDocumentRow(g,0),e.getLength()-1),f=t.scrollerHeight+e.getRowLength(g)*w+b,d=this.scrollTop-y*w;var S=0;if(this.layerConfig.width!=s||u)S=this.CHANGE_H_SCROLL;if(u||p)S|=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),p&&(s=this.$getLongestLine());return this.layerConfig={width:s,padding:this.$padding,firstRow:m,firstRowScreen:y,lastRow:g,lineHeight:w,characterWidth:this.characterWidth,minHeight:f,maxHeight:i,offset:d,gutterOffset:w?Math.max(0,Math.ceil((d+t.height-t.scrollerHeight)/w)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(s-this.$padding),S},this.$updateLines=function(){if(!this.$changedLines)return;var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(e>n.lastRow+1)return;if(t<n.firstRow)return;if(t===Infinity){this.$showGutter&&this.$gutterLayer.update(n),this.$textLayer.update(n);return}return this.$textLayer.updateLines(n,e,t),!0},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(this.$size.scrollerHeight===0)return;var r=this.$cursorLayer.getPixelPosition(e),i=r.left,s=r.top,o=n&&n.top||0,u=n&&n.bottom||0,a=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;a+o>s?(t&&a+o>s+this.lineHeight&&(s-=t*this.$size.scrollerHeight),s===0&&(s=-this.scrollMargin.top),this.session.setScrollTop(s)):a+this.$size.scrollerHeight-u<s+this.lineHeight&&(t&&a+this.$size.scrollerHeight-u<s-this.lineHeight&&(s+=t*this.$size.scrollerHeight),this.session.setScrollTop(s+this.lineHeight+u-this.$size.scrollerHeight));var f=this.scrollLeft;f>i?(i<this.$padding+2*this.layerConfig.characterWidth&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):f+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(Math.round(i+this.characterWidth-this.$size.scrollerWidth)):f<=this.$padding&&i-f<this.characterWidth&&this.session.setScrollLeft(0)},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){typeof e=="number"&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),r=this.$size.scrollerHeight-this.lineHeight,i=n.top-r*(t||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,r=this.STEPS,i=[],s=function(e,t,n){return n*(Math.pow(e-1,3)+1)+t};for(n=0;n<r;++n)i.push(s(n/this.STEPS,e,t-e));return i},this.scrollToLine=function(e,t,n,r){var i=this.$cursorLayer.getPixelPosition({row:e,column:0}),s=i.top;t&&(s-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(s),n!==!1&&this.animateScrolling(o,r)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(!this.$animatedScroll)return;var r=this;if(e==n)return;if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length){e=i[0];if(e==n)return}}var s=r.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:s},clearInterval(this.$timer),r.session.setScrollTop(s.shift()),r.session.$scrollTop=n,this.$timer=setInterval(function(){if(!r.session)return clearInterval(r.$timer);s.length?(r.session.setScrollTop(s.shift()),r.session.$scrollTop=n):n!=null?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):(r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,t&&t())},10)},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(e)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){if(t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top)return!0;if(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom)return!0;if(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left)return!0;if(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},this.pixelToScreenCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else n=this.scroller.getBoundingClientRect();var i=e+this.scrollLeft-n.left-this.$padding,s=i/this.characterWidth,o=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),u=this.$blockCursor?Math.floor(s):Math.round(s);return{row:o,column:u,side:s-u>0?1:-1,offsetX:i}},this.screenToTextCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else n=this.scroller.getBoundingClientRect();var i=e+this.scrollLeft-n.left-this.$padding,s=i/this.characterWidth,o=this.$blockCursor?Math.floor(s):Math.round(s),u=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(u,Math.max(o,0),i)},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),i=this.$padding+(this.session.$bidiHandler.isBidiRow(r.row,e)?this.session.$bidiHandler.getPosLeft(r.column):Math.round(r.column*this.characterWidth)),s=r.row*this.lineHeight;return{pageX:n.left+i-this.scrollLeft,pageY:n.top+s-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition=e,e.cssText||(e.cssText=this.textarea.style.cssText),e.useTextareaForIME==undefined&&(e.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(i.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):e.markerId=this.session.addMarker(e.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(e){var t=this.session.selection.cursor;this.addToken(e,"composition_placeholder",t.row,t.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){if(!this.$composition)return;this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),i.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var e=this.session.selection.cursor;this.removeExtraToken(e.row,e.column),this.$composition=null,this.$cursorLayer.element.style.display=""},this.addToken=function(e,t,n,r){var i=this.session;i.bgTokenizer.lines[n]=null;var s={type:t,value:e},o=i.getTokens(n);if(r==null)o.push(s);else{var u=0;for(var a=0;a<o.length;a++){var f=o[a];u+=f.value.length;if(r<=u){var l=f.value.length-(u-r),c=f.value.slice(0,l),h=f.value.slice(l);o.splice(a,1,{type:f.type,value:c},s,{type:f.type,value:h});break}}}this.updateLines(n,n)},this.removeExtraToken=function(e,t){this.updateLines(e,e)},this.setTheme=function(e,t){function o(r){if(n.$themeId!=e)return t&&t();if(!r||!r.cssClass)throw new Error("couldn't load module "+e+" or it didn't call define");r.$id&&(n.$themeId=r.$id),i.importCssString(r.cssText,r.cssClass,n.container),n.theme&&i.removeCssClass(n.container,n.theme.cssClass);var s="padding"in r?r.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&s!=n.$padding&&n.setPadding(s),n.$theme=r.cssClass,n.theme=r,i.addCssClass(n.container,r.cssClass),i.setCssClass(n.container,"ace_dark",r.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:r}),t&&t()}var n=this;this.$themeId=e,n._dispatchEvent("themeChange",{theme:e});if(!e||typeof e=="string"){var r=e||this.$options.theme.initialValue;s.loadModule(["theme",r],o)}else o(e)},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){i.setCssClass(this.container,e,t!==!1)},this.unsetStyle=function(e){i.removeCssClass(this.container,e)},this.setCursorStyle=function(e){i.setStyle(this.scroller.style,"cursor",e)},this.setMouseCursor=function(e){i.setStyle(this.scroller.style,"cursor",e)},this.attachToShadowRoot=function(){i.importCssString(v,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""}}).call(y.prototype),s.defineOptions(y.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){typeof e=="number"&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){i.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){this.$gutterLayer.setHighlightGutterLine(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(e){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){typeof e=="number"&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){e=+e||0;if(this.$scrollPastEnd==e)return;this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!m.isMobile&&!m.isIE}}),t.VirtualRenderer=y}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";function u(e){var t="importScripts('"+i.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(n){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,s=new r;return s.append(t),s.getBlob("application/javascript")}}function a(e){if(typeof Worker=="undefined")return{postMessage:function(){},terminate:function(){}};if(o.get("loadWorkerFromBlob")){var t=u(e),n=window.URL||window.webkitURL,r=n.createObjectURL(t);return new Worker(r)}return new Worker(e)}var r=e("../lib/oop"),i=e("../lib/net"),s=e("../lib/event_emitter").EventEmitter,o=e("../config"),f=function(e){e.postMessage||(e=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=e,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){r.implement(this,s),this.$createWorkerFromOldConfig=function(t,n,r,i,s){e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl);if(o.get("packaged")||!e.toUrl)i=i||o.moduleUrl(n,"worker");else{var u=this.$normalizePath;i=i||u(e.toUrl("ace/worker/worker.js",null,"_"));var f={};t.forEach(function(t){f[t]=u(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=a(i),s&&this.send("importScripts",s),this.$worker.postMessage({init:!0,tlns:f,module:n,classname:r}),this.$worker},this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return i.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,t.push(r)}this.send(e,t)},this.emit=function(e,t){try{t.data&&t.data.err&&(t.data.err={message:t.data.err.message,stack:t.data.err.stack,code:t.data.err.code}),this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),e.action=="insert"?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;if(!e)return;this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e})}}).call(f.prototype);var l=function(e,t,n){var r=null,i=!1,u=Object.create(s),a=[],l=new f({messageBuffer:a,terminate:function(){},postMessage:function(e){a.push(e);if(!r)return;i?setTimeout(c):c()}});l.setEmitSync=function(e){i=e};var c=function(){var e=a.shift();e.command?r[e.command].apply(r,e.args):e.event&&u._signal(e.event,e.data)};return u.postMessage=function(e){l.onMessage({data:e})},u.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},u.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},o.loadModule(["worker",t],function(e){r=new e[n](u);while(a.length)c()}),l};t.UIWorkerClient=l,t.WorkerClient=f,t.createWorker=a}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var r=e("./range").Range,i=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),o=function(e,t,n,r,i,s){var o=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=i,this.othersClass=s,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=n;var u=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=u.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){s.implement(this,i),this.setup=function(){var e=this,t=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var i=this.pos;i.$insertRight=!0,i.detach(),i.markerId=n.addMarker(new r(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(n){var r=t.createAnchor(n.row,n.column);r.$insertRight=!0,r.detach(),e.others.push(r)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(this.othersActive)return;var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1)})},this.hideOtherMarkers=function(){if(!this.othersActive)return;this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row!==t.end.row)return;if(t.start.row!==this.pos.row)return;this.$updating=!0;var n=e.action==="insert"?t.end.column-t.start.column:t.start.column-t.end.column,i=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,s=t.start.column-this.pos.column;this.updateAnchors(e),i&&(this.length+=n);if(i&&!this.session.$fromUndo)if(e.action==="insert")for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};this.doc.insertMergedLines(a,e.lines)}else if(e.action==="remove")for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};this.doc.remove(new r(a.row,a.column,a.row,a.column-n))}this.$updating=!1,this.updateMarkers()},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(this.$updating)return;var e=this,t=this.session,n=function(n,i){t.removeMarker(n.markerId),n.markerId=t.addMarker(new r(n.row,n.column,n.row,n.column+e.length),i,null,!1)};n(this.pos,this.mainClass);for(var i=this.others.length;i--;)n(this.others[i],this.othersClass)},this.onCursorChange=function(e){if(this.$updating||!this.session)return;var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(this.$undoStackDepth===-1)return;var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth;for(var n=0;n<t;n++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}).call(o.prototype),t.PlaceHolder=o}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){function s(e,t){return e.row==t.row&&e.column==t.column}function o(e){var t=e.domEvent,n=t.altKey,o=t.shiftKey,u=t.ctrlKey,a=e.getAccelKey(),f=e.getButton();u&&i.isMac&&(f=t.button);if(e.editor.inMultiSelectMode&&f==2){e.editor.textInput.onContextMenu(e.domEvent);return}if(!u&&!n&&!a){f===0&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode();return}if(f!==0)return;var l=e.editor,c=l.selection,h=l.inMultiSelectMode,p=e.getDocumentPosition(),d=c.getCursor(),v=e.inSelection()||c.isEmpty()&&s(p,d),m=e.x,g=e.y,y=function(e){m=e.clientX,g=e.clientY},b=l.session,w=l.renderer.pixelToScreenCoordinates(m,g),E=w,S;if(l.$mouseHandler.$enableJumpToDef)u&&n||a&&n?S=o?"block":"add":n&&l.$blockSelectEnabled&&(S="block");else if(a&&!n){S="add";if(!h&&o)return}else n&&l.$blockSelectEnabled&&(S="block");S&&i.isMac&&t.ctrlKey&&l.$mouseHandler.cancelContextMenu();if(S=="add"){if(!h&&v)return;if(!h){var x=c.toOrientedRange();l.addSelectionMarker(x)}var T=c.rangeList.rangeAtPoint(p);l.inVirtualSelectionMode=!0,o&&(T=null,x=c.ranges[0]||x,l.removeSelectionMarker(x)),l.once("mouseup",function(){var e=c.toOrientedRange();T&&e.isEmpty()&&s(T.cursor,e.cursor)?c.substractPoint(e.cursor):(o?c.substractPoint(x.cursor):x&&(l.removeSelectionMarker(x),c.addRange(x)),c.addRange(e)),l.inVirtualSelectionMode=!1})}else if(S=="block"){e.stop(),l.inVirtualSelectionMode=!0;var N,C=[],k=function(){var e=l.renderer.pixelToScreenCoordinates(m,g),t=b.screenToDocumentPosition(e.row,e.column,e.offsetX);if(s(E,e)&&s(t,c.lead))return;E=e,l.selection.moveToPosition(t),l.renderer.scrollCursorIntoView(),l.removeSelectionMarkers(C),C=c.rectangularRangeBlock(E,w),l.$mouseHandler.$clickSelection&&C.length==1&&C[0].isEmpty()&&(C[0]=l.$mouseHandler.$clickSelection.clone()),C.forEach(l.addSelectionMarker,l),l.updateSelectionMarkers()};h&&!a?c.toSingleRange():!h&&a&&(N=c.toOrientedRange(),l.addSelectionMarker(N)),o?w=b.documentToScreenPosition(c.lead):c.moveToPosition(p),E={row:-1,column:-1};var L=function(e){k(),clearInterval(O),l.removeSelectionMarkers(C),C.length||(C=[c.toOrientedRange()]),N&&(l.removeSelectionMarker(N),c.toSingleRange(N));for(var t=0;t<C.length;t++)c.addRange(C[t]);l.inVirtualSelectionMode=!1,l.$mouseHandler.$clickSelection=null},A=k;r.capture(l.container,y,L);var O=setInterval(function(){A()},20);return e.preventDefault()}}var r=e("../lib/event"),i=e("../lib/useragent");t.onMouseDown=o}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.rangeCount>1?e.multiSelect.joinSelections():e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var r=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new r(t.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){function h(e,t,n){return c.$options.wrap=!0,c.$options.needle=t,c.$options.backwards=n==-1,c.find(e)}function v(e,t){return e.row==t.row&&e.column==t.column}function m(e){if(e.$multiselectOnSessionChange)return;e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",o),e.commands.addCommands(f.defaultCommands),g(e)}function g(e){function r(t){n&&(e.renderer.setMouseCursor(""),n=!1)}if(!e.textInput)return;var t=e.textInput.getElement(),n=!1;u.addListener(t,"keydown",function(t){var i=t.keyCode==18&&!(t.ctrlKey||t.shiftKey||t.metaKey);e.$blockSelectEnabled&&i?n||(e.renderer.setMouseCursor("crosshair"),n=!0):n&&r()},e),u.addListener(t,"keyup",r,e),u.addListener(t,"blur",r,e)}var r=e("./range_list").RangeList,i=e("./range").Range,s=e("./selection").Selection,o=e("./mouse/multi_select_handler").onMouseDown,u=e("./lib/event"),a=e("./lib/lang"),f=e("./commands/multi_select_commands");t.commands=f.defaultCommands.concat(f.multiSelectCommands);var l=e("./search").Search,c=new l,p=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(p.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(!e)return;if(!this.inMultiSelectMode&&this.rangeCount===0){var n=this.toOrientedRange();this.rangeList.add(n),this.rangeList.add(e);if(this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var r=this.rangeList.add(e);return this.$onAddRange(e),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length&&this.$onRemoveRange(e)},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){this.rangeCount=this.rangeList.ranges.length;if(this.rangeCount==1&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var r=this.ranges.indexOf(e[n]);this.ranges.splice(r,1)}this._signal("removeRange",{ranges:e}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),t=t||this.ranges[0],t&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){if(this.rangeList)return;this.rangeList=new r,this.ranges=[],this.rangeCount=0},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){var e=this.ranges.length?this.ranges:[this.getRange()],t=[];for(var n=0;n<e.length;n++){var r=e[n],s=r.start.row,o=r.end.row;if(s===o)t.push(r.clone());else{t.push(new i(s,r.start.column,s,this.session.getLine(s).length));while(++s<o)t.push(this.getLineRange(s,!0));t.push(new i(o,0,o,r.end.column))}n==0&&!this.isBackwards()&&(t=t.reverse())}this.toSingleRange();for(var n=t.length;n--;)this.addRange(t[n])},this.joinSelections=function(){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var r=this.session.documentToScreenPosition(this.cursor),s=this.session.documentToScreenPosition(this.anchor),o=this.rectangularRangeBlock(r,s);o.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var r=[],s=e.column<t.column;if(s)var o=e.column,u=t.column,a=e.offsetX,f=t.offsetX;else var o=t.column,u=e.column,a=t.offsetX,f=e.offsetX;var l=e.row<t.row;if(l)var c=e.row,h=t.row;else var c=t.row,h=e.row;o<0&&(o=0),c<0&&(c=0),c==h&&(n=!0);var p;for(var d=c;d<=h;d++){var m=i.fromPoints(this.session.screenToDocumentPosition(d,o,a),this.session.screenToDocumentPosition(d,u,f));if(m.isEmpty()){if(p&&v(m.end,p))break;p=m.end}m.cursor=s?m.start:m.end,r.push(m)}l&&r.reverse();if(!n){var g=r.length-1;while(r[g].isEmpty()&&g>0)g--;if(g>0){var y=0;while(r[y].isEmpty())y++}for(var b=g;b>=y;b--)r[b].isEmpty()&&r.splice(b,1)}return r}}.call(s.prototype);var d=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(!e.marker)return;this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);t!=-1&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length},this.removeSelectionMarkers=function(e){var t=this.session.$selectionMarkers;for(var n=e.length;n--;){var r=e[n];if(!r.marker)continue;this.session.removeMarker(r.marker);var i=t.indexOf(r);i!=-1&&t.splice(i,1)}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){if(this.inMultiSelectMode)return;this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onSingleSelect=function(e){if(this.session.multiSelect.inVirtualMode)return;this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection")},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(!n.multiSelect)return;if(!t.multiSelectAction){var r=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}else t.multiSelectAction=="forEach"?r=n.forEachSelection(t,e.args):t.multiSelectAction=="forEachLine"?r=n.forEachSelection(t,e.args,!0):t.multiSelectAction=="single"?(n.exitMultiSelectMode(),r=t.exec(n,e.args||{})):r=t.multiSelectAction(n,e.args||{});return r},this.forEachSelection=function(e,t,n){if(this.inVirtualSelectionMode)return;var r=n&&n.keepOrder,i=n==1||n&&n.$byLines,o=this.session,u=this.selection,a=u.rangeList,f=(r?u:a).ranges,l;if(!f.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var c=u._eventRegistry;u._eventRegistry={};var h=new s(o);this.inVirtualSelectionMode=!0;for(var p=f.length;p--;){if(i)while(p>0&&f[p].start.row==f[p-1].end.row)p--;h.fromOrientedRange(f[p]),h.index=p,this.selection=o.selection=h;var d=e.exec?e.exec(this,t||{}):e(this,t||{});!l&&d!==undefined&&(l=d),h.toOrientedRange(f[p])}h.detach(),this.selection=o.selection=u,this.inVirtualSelectionMode=!1,u._eventRegistry=c,u.mergeOverlappingRanges(),u.ranges[0]&&u.fromOrientedRange(u.ranges[0]);var v=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),v&&v.from==v.to&&this.renderer.animateScrolling(v.from),l},this.exitMultiSelectMode=function(){if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return;this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var t=this.multiSelect.rangeList.ranges,n=[];for(var r=0;r<t.length;r++)n.push(this.session.getTextRange(t[r]));var i=this.session.getDocument().getNewLineCharacter();e=n.join(i),e.length==(n.length-1)*i.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var r=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;r.row!=t.row||this.session.$clipPositionToDocument(r.row,r.column).column!=t.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(e,t,n){t=t||{},t.needle=e||t.needle;if(t.needle==undefined){var r=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(r)}this.$search.set(t);var i=this.$search.findAll(this.session);if(!i.length)return 0;var s=this.multiSelect;n||s.toSingleRange(i[0]);for(var o=i.length;o--;)s.addRange(i[o],!0);return r&&s.rangeList.rangeAtPoint(r.start)&&s.addRange(r,!0),i.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,s=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(s.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(s.row+e,s.column);if(!n.isEmpty())var u=this.session.documentToScreenPosition(r?n.end:n.start),a=this.session.screenToDocumentPosition(u.row+e,u.column);else var a=o;if(r){var f=i.fromPoints(o,a);f.cursor=f.start}else{var f=i.fromPoints(a,o);f.cursor=f.end}f.desiredColumn=s.column;if(!this.selection.inMultiSelectMode)this.selection.addRange(n);else if(t)var l=n.cursor;this.selection.addRange(f),l&&this.selection.substractPoint(l)},this.transposeSelections=function(e){var t=this.session,n=t.multiSelect,r=n.ranges;for(var i=r.length;i--;){var s=r[i];if(s.isEmpty()){var o=t.getWordRange(s.start.row,s.start.column);s.start.row=o.start.row,s.start.column=o.start.column,s.end.row=o.end.row,s.end.column=o.end.column}}n.mergeOverlappingRanges();var u=[];for(var i=r.length;i--;){var s=r[i];u.unshift(t.getTextRange(s))}e<0?u.unshift(u.pop()):u.push(u.shift());for(var i=r.length;i--;){var s=r[i],o=s.clone();t.replace(s,u[i]),s.start.row=o.start.row,s.start.column=o.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(e,t,n){var r=this.session,i=r.multiSelect,s=i.toOrientedRange();if(s.isEmpty()){s=r.getWordRange(s.start.row,s.start.column),s.cursor=e==-1?s.start:s.end,this.multiSelect.addRange(s);if(n)return}var o=r.getTextRange(s),u=h(r,o,e);u&&(u.cursor=e==-1?u.start:u.end,this.session.unfold(u),this.multiSelect.addRange(u),this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(s.cursor)},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,r=-1,s=n.filter(function(e){if(e.cursor.row==r)return!0;r=e.cursor.row});if(!n.length||s.length==n.length-1){var o=this.selection.getRange(),u=o.start.row,f=o.end.row,l=u==f;if(l){var c=this.session.getLength(),h;do h=this.session.getLine(f);while(/[=:]/.test(h)&&++f<c);do h=this.session.getLine(u);while(/[=:]/.test(h)&&--u>0);u<0&&(u=0),f>=c&&(f=c-1)}var p=this.session.removeFullLines(u,f);p=this.$reAlignText(p,l),this.session.insert({row:u,column:0},p.join("\n")+"\n"),l||(o.start.column=0,o.end.column=p[p.length-1].length),this.selection.setRange(o)}else{s.forEach(function(e){t.substractPoint(e.cursor)});var d=0,v=Infinity,m=n.map(function(t){var n=t.cursor,r=e.getLine(n.row),i=r.substr(n.column).search(/\S/g);return i==-1&&(i=0),n.column>d&&(d=n.column),i<v&&(v=i),i});n.forEach(function(t,n){var r=t.cursor,s=d-r.column,o=m[n]-v;s>o?e.insert(r,a.stringRepeat(" ",s-o)):e.remove(new i(r.row,r.column,r.row,r.column-s+o)),t.start.column=t.end.column=d,t.start.row=t.end.row=r.row,t.cursor=t.end}),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(e,t){function u(e){return a.stringRepeat(" ",e)}function f(e){return e[2]?u(i)+e[2]+u(s-e[2].length+o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function l(e){return e[2]?u(i+s-e[2].length)+e[2]+u(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function c(e){return e[2]?u(i)+e[2]+u(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var n=!0,r=!0,i,s,o;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?i==null?(i=t[1].length,s=t[2].length,o=t[3].length,t):(i+s+o!=t[1].length+t[2].length+t[3].length&&(r=!1),i!=t[1].length&&(n=!1),i>t[1].length&&(i=t[1].length),s<t[2].length&&(s=t[2].length),o>t[3].length&&(o=t[3].length),t):[e]}).map(t?f:n?r?l:f:c)}}).call(d.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=m,e("./config").defineOptions(d.prototype,"editor",{enableMultiselect:{set:function(e){m(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",o)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",o))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("../../range").Range,i=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);return this.foldingStartMarker.test(r)?"start":t=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var i=/\S/,s=e.getLine(t),o=s.search(i);if(o==-1)return;var u=n||s.length,a=e.getLength(),f=t,l=t;while(++t<a){var c=e.getLine(t).search(i);if(c==-1)continue;if(c<=o){var h=e.getTokenAt(t,0);if(!h||h.type!=="string")break}l=t}if(l>f){var p=e.getLine(l).length;return new r(f,u,l,p)}},this.openingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i+1},u=e.$findClosingBracket(t,o,s);if(!u)return;var a=e.foldWidgets[u.row];return a==null&&(a=e.getFoldWidget(u.row)),a=="start"&&u.row>o.row&&(u.row--,u.column=e.getLine(u.row).length),r.fromPoints(o,u)},this.closingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i},u=e.$findOpeningBracket(t,o);if(!u)return;return u.column++,o.column--,r.fromPoints(u,o)}}).call(i.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t.$id="ace/theme/textmate";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass,!1)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";function i(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}var r=e("./lib/dom");(function(){this.getRowLength=function(e){var t;return this.lineWidgets?t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0:t=0,!this.$useWrapMode||!this.$wrapData[e]?1+t:this.$wrapData[e].length+1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach(function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)}),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach();if(this.editor==e)return;this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets))},this.detach=function(e){var t=this.editor;if(!t)return;this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))})},this.updateOnFold=function(e,t){var n=t.lineWidgets;if(!n||!e.action)return;var r=e.data,i=r.start.row,s=r.end.row,o=e.action=="add";for(var u=i+1;u<s;u++)n[u]&&(n[u].hidden=o);n[s]&&(o?n[i]?n[s].hidden=o:n[i]=n[s]:(n[i]==n[s]&&(n[i]=undefined),n[s].hidden=o))},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(!t)return;var n=e.start.row,r=e.end.row-n;if(r!==0)if(e.action=="remove"){var i=t.splice(n+1,r);!t[n]&&i[i.length-1]&&(t[n]=i.pop()),i.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{var s=new Array(r);t[n]&&t[n].column!=null&&e.start.column>t[n].column&&n++,s.unshift(n,0),t.splice.apply(t,s),this.$updateRows()}},this.$updateRows=function(){var e=this.session.lineWidgets;if(!e)return;var t=!0;e.forEach(function(e,n){if(e){t=!1,e.row=n;while(e.$oldWidget)e.$oldWidget.row=n,e=e.$oldWidget}}),t&&(this.session.lineWidgets=null)},this.$registerLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];return t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e},this.addLineWidget=function(e){this.$registerLineWidget(e),e.session=this.session;if(!this.editor)return e;var t=this.editor.renderer;e.html&&!e.el&&(e.el=r.createElement("div"),e.el.innerHTML=e.html),e.el&&(r.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,t.container.appendChild(e.el),e._inDocument=!0,e.coverGutter||(e.el.style.zIndex=3),e.pixelHeight==null&&(e.pixelHeight=e.el.offsetHeight)),e.rowCount==null&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight);var n=this.session.getFoldAt(e.row,0);e.$fold=n;if(n){var i=this.session.lineWidgets;e.row==n.end.row&&!i[n.start.row]?i[n.start.row]=e:e.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el);if(e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(t){}if(this.session.lineWidgets){var n=this.session.lineWidgets[e.row];if(n==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else while(n){if(n.$oldWidget==e){n.$oldWidget=e.$oldWidget;break}n=n.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){var t=this.session.lineWidgets,n=t&&t[e],r=[];while(n)r.push(n),n=n.$oldWidget;return r},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,r=t.layerConfig;if(!n||!n.length)return;var i=Infinity;for(var s=0;s<n.length;s++){var o=n[s];if(!o||!o.el)continue;if(o.session!=this.session)continue;if(!o._inDocument){if(this.session.lineWidgets[o.row]!=o)continue;o._inDocument=!0,t.container.appendChild(o.el)}o.h=o.el.offsetHeight,o.fixedWidth||(o.w=o.el.offsetWidth,o.screenWidth=Math.ceil(o.w/r.characterWidth));var u=o.h/r.lineHeight;o.coverLine&&(u-=this.session.getRowLineCount(o.row),u<0&&(u=0)),o.rowCount!=u&&(o.rowCount=u,o.row<i&&(i=o.row))}i!=Infinity&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]},this.renderWidgets=function(e,t){var n=t.layerConfig,r=this.session.lineWidgets;if(!r)return;var i=Math.min(this.firstRow,n.firstRow),s=Math.max(this.lastRow,n.lastRow,r.length);while(i>0&&!r[i])i--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var o=i;o<=s;o++){var u=r[o];if(!u||!u.el)continue;if(u.hidden){u.el.style.top=-100-(u.pixelHeight||0)+"px";continue}u._inDocument||(u._inDocument=!0,t.container.appendChild(u.el));var a=t.$cursorLayer.getPixelPosition({row:o,column:0},!0).top;u.coverLine||(a+=n.lineHeight*this.session.getRowLineCount(u.row)),u.el.style.top=a-n.offset+"px";var f=u.coverGutter?0:t.gutterWidth;u.fixedWidth||(f-=t.scrollLeft),u.el.style.left=f+"px",u.fullWidth&&u.screenWidth&&(u.el.style.minWidth=n.width+2*n.padding+"px"),u.fixedWidth?u.el.style.right=t.scrollBar.getWidth()+"px":u.el.style.right=""}}}).call(i.prototype),t.LineWidgets=i}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,n){"use strict";function o(e,t,n){var r=0,i=e.length-1;while(r<=i){var s=r+i>>1,o=n(t,e[s]);if(o>0)r=s+1;else{if(!(o<0))return s;i=s-1}}return-(r+1)}function u(e,t,n){var r=e.getAnnotations().sort(s.comparePoints);if(!r.length)return;var i=o(r,{row:t,column:-1},s.comparePoints);i<0&&(i=-i-1),i>=r.length?i=n>0?0:r.length-1:i===0&&n<0&&(i=r.length-1);var u=r[i];if(!u||!n)return;if(u.row===t){do u=r[i+=n];while(u&&u.row===t);if(!u)return r.slice()}var a=[];t=u.row;do a[n<0?"unshift":"push"](u),u=r[i+=n];while(u&&u.row==t);return a.length&&a}var r=e("../line_widgets").LineWidgets,i=e("../lib/dom"),s=e("../range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new r(n),n.widgetManager.attach(e));var s=e.getCursorPosition(),o=s.row,a=n.widgetManager.getWidgetsAtRow(o).filter(function(e){return e.type=="errorMarker"})[0];a?a.destroy():o-=t;var f=u(n,o,t),l;if(f){var c=f[0];s.column=(c.pos&&typeof c.column!="number"?c.pos.sc:c.column)||0,s.row=c.row,l=e.renderer.$gutterLayer.$annotations[s.row]}else{if(a)return;l={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(s.row),e.selection.moveToPosition(s);var h={row:s.row,fixedWidth:!0,coverGutter:!0,el:i.createElement("div"),type:"errorMarker"},p=h.el.appendChild(i.createElement("div")),d=h.el.appendChild(i.createElement("div"));d.className="error_widget_arrow "+l.className;var v=e.renderer.$cursorLayer.getPixelPosition(s).left;d.style.left=v+e.renderer.gutterWidth-5+"px",h.el.className="error_widget_wrapper",p.className="error_widget "+l.className,p.innerHTML=l.text.join("<br>"),p.appendChild(i.createElement("div"));var m=function(e,t,n){if(t===0&&(n==="esc"||n==="return"))return h.destroy(),{command:"null"}};h.destroy=function(){if(e.$mouseHandler.isMousePressed)return;e.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(h),e.off("changeSelection",h.destroy),e.off("changeSession",h.destroy),e.off("mouseup",h.destroy),e.off("change",h.destroy)},e.keyBinding.addKeyboardHandler(m),e.on("changeSelection",h.destroy),e.on("changeSession",h.destroy),e.on("mouseup",h.destroy),e.on("change",h.destroy),e.session.widgetManager.addLineWidget(h),h.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:h.el.offsetHeight})},i.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/dom"),i=e("./lib/event"),s=e("./range").Range,o=e("./editor").Editor,u=e("./edit_session").EditSession,a=e("./undomanager").UndoManager,f=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,typeof define=="function"&&(t.define=define),t.edit=function(e,n){if(typeof e=="string"){var s=e;e=document.getElementById(s);if(!e)throw new Error("ace.edit can't find div #"+s)}if(e&&e.env&&e.env.editor instanceof o)return e.env.editor;var u="";if(e&&/input|textarea/i.test(e.tagName)){var a=e;u=a.value,e=r.createElement("pre"),a.parentNode.replaceChild(e,a)}else e&&(u=e.textContent,e.innerHTML="");var l=t.createEditSession(u),c=new o(new f(e),l,n),h={document:l,editor:c,onResize:c.resize.bind(c,null)};return a&&(h.textarea=a),i.addListener(window,"resize",h.onResize),c.on("destroy",function(){i.removeListener(window,"resize",h.onResize),h.editor.container.env=null}),c.container.env=c.env=h,c},t.createEditSession=function(e,t){var n=new u(e,t);return n.setUndoManager(new a),n},t.Range=s,t.Editor=o,t.EditSession=u,t.UndoManager=a,t.VirtualRenderer=f,t.version=t.config.version});            (function() {
                ace.require(["ace/ace"], function(a) {
                    if (a) {
                        a.config.init(true);
                        a.define = ace.define;
                    }
                    if (!window.ace)
                        window.ace = a;
                    for (var key in a) if (a.hasOwnProperty(key))
                        window.ace[key] = a[key];
                    window.ace["default"] = window.ace;
                    if (typeof module == "object" && typeof exports == "object" && module) {
                        module.exports = window.ace;
                    }
                });
            })();
        ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("./text_highlight_rules").TextHighlightRules,s=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},s.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};r.inherits(s,i),s.getTagRule=function(e){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},s.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}},s.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}},t.DocCommentHighlightRules=s}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";function a(){var e=o.replace("\\d","\\d\\-"),t={onMatch:function(e,t,n){var r=e.charAt(1)=="/"?2:1;if(r==1)t!=this.nextState?n.unshift(this.next,this.nextState,0):n.unshift(this.next),n[2]++;else if(r==2&&t==this.nextState){n[1]--;if(!n[1]||n[1]<0)n.shift(),n.shift()}return[{type:"meta.tag.punctuation."+(r==1?"":"end-")+"tag-open.xml",value:e.slice(0,r)},{type:"meta.tag.tag-name.xml",value:e.substr(r)}]},regex:"</?"+e+"",next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(t);var n={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[n,t,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(e,t,n){return t==n[0]&&n.shift(),e.length==2&&(n[0]==this.nextState&&n[1]--,(!n[1]||n[1]<0)&&n.splice(0,2)),this.next=n[0]||"start",[{type:this.token,value:e}]},nextState:"jsx"},n,f("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:e},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},t],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function f(e){return[{token:"comment",regex:/\/\*/,next:[i.getTagRule(),{token:"comment",regex:"\\*\\/",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[i.getTagRule(),{token:"comment",regex:"$|^",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}var r=e("../lib/oop"),i=e("./doc_comment_highlight_rules").DocCommentHighlightRules,s=e("./text_highlight_rules").TextHighlightRules,o="[a-zA-Z\\$_\u00a1-\uffff][a-zA-Z\\d\\$_\u00a1-\uffff]*",u=function(e){var t=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),n="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",r="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[i.getStartRule("doc-start"),f("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+o+")(\\.)(prototype)(\\.)("+o+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+o+")(\\.)("+o+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+o+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+o+")(\\.)("+o+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+o+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+o+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"from(?=\\s*('|\"))"},{token:"keyword",regex:"(?:"+n+")\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:t,regex:o},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+o+")(\\.)("+o+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:o},{regex:"",token:"empty",next:"no_regex"}],start:[i.getStartRule("doc-start"),f("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:o},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:r},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:r},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]};if(!e||!e.noES6)this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(e,t,n){this.next=e=="{"?this.nextState:"";if(e=="{"&&n.length)n.unshift("start",t);else if(e=="}"&&n.length){n.shift(),this.next=n.shift();if(this.next.indexOf("string")!=-1||this.next.indexOf("jsx")!=-1)return"paren.quasi.end"}return e=="{"?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:r},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),(!e||e.jsx!=0)&&a.call(this);this.embedRules(i,"doc-",[i.getEndRule("no_regex")]),this.normalizeRules()};r.inherits(u,s),t.JavaScriptHighlightRules=u}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("../range").Range,i=function(){};(function(){this.checkOutdent=function(e,t){return/^\s+$/.test(e)?/^\s*\}/.test(t):!1},this.autoOutdent=function(e,t){var n=e.getLine(t),i=n.match(/^(\s*\})/);if(!i)return 0;var s=i[1].length,o=e.findMatchingBracket({row:t,column:s});if(!o||o.row==t)return 0;var u=this.$getIndent(e.getLine(o.row));e.replace(new r(t,0,t,s-1),u)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(i.prototype),t.MatchingBraceOutdent=i}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,t,n){"use strict";var r=e("../../lib/oop"),i=e("../../range").Range,s=e("./fold_mode").FoldMode,o=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};r.inherits(o,s),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return"";var i=this._getFoldWidgetBase(e,t,n);return!i&&this.startRegionRe.test(r)?"start":i},this.getFoldWidgetRange=function(e,t,n,r){var i=e.getLine(n);if(this.startRegionRe.test(i))return this.getCommentRegionBlock(e,i,n);var s=i.match(this.foldingStartMarker);if(s){var o=s.index;if(s[1])return this.openingBracketBlock(e,s[1],n,o);var u=e.getCommentFoldRange(n,o+s[0].length,1);return u&&!u.isMultiLine()&&(r?u=this.getSectionRange(e,n):t!="all"&&(u=null)),u}if(t==="markbegin")return;var s=i.match(this.foldingStopMarker);if(s){var o=s.index+s[0].length;return s[1]?this.closingBracketBlock(e,s[1],n,o):e.getCommentFoldRange(n,o,-1)}},this.getSectionRange=function(e,t){var n=e.getLine(t),r=n.search(/\S/),s=t,o=n.length;t+=1;var u=t,a=e.getLength();while(++t<a){n=e.getLine(t);var f=n.search(/\S/);if(f===-1)continue;if(r>f)break;var l=this.getFoldWidgetRange(e,"all",t);if(l){if(l.start.row<=s)break;if(l.isMultiLine())t=l.end.row;else if(r==f)break}u=t}return new i(s,o,u,e.getLine(u).length)},this.getCommentRegionBlock=function(e,t,n){var r=t.search(/\s*$/),s=e.getLength(),o=n,u=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,a=1;while(++n<s){t=e.getLine(n);var f=u.exec(t);if(!f)continue;f[1]?a--:a++;if(!a)break}var l=n;if(l>o)return new i(o,r,l,t.length)}}.call(o.prototype)}),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("./text").Mode,s=e("./javascript_highlight_rules").JavaScriptHighlightRules,o=e("./matching_brace_outdent").MatchingBraceOutdent,u=e("../worker/worker_client").WorkerClient,a=e("./behaviour/cstyle").CstyleBehaviour,f=e("./folding/cstyle").FoldMode,l=function(){this.HighlightRules=s,this.$outdent=new o,this.$behaviour=new a,this.foldingRules=new f};r.inherits(l,i),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t),i=this.getTokenizer().getLineTokens(t,e),s=i.tokens,o=i.state;if(s.length&&s[s.length-1].type=="comment")return r;if(e=="start"||e=="no_regex"){var u=t.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/);u&&(r+=n)}else if(e=="doc-start"){if(o=="start"||o=="no_regex")return"";var u=t.match(/^\s*(\/?)\*/);u&&(u[1]&&(r+=" "),r+="* ")}return r},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new u(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return t.attachToDocument(e.getDocument()),t.on("annotate",function(t){e.setAnnotations(t.data)}),t.on("terminate",function(){e.clearAnnotations()}),t},this.$id="ace/mode/javascript",this.snippetFileId="ace/snippets/javascript"}.call(l.prototype),t.Mode=l});                (function() {
                    ace.require(["ace/mode/javascript"], function(m) {
                        if (typeof module == "object" && typeof exports == "object" && module) {
                            module.exports = m;
                        }
                    });
                })();
            ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-monokai",t.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass,!1)});                (function() {
                    ace.require(["ace/theme/monokai"], function(m) {
                        if (typeof module == "object" && typeof exports == "object" && module) {
                            module.exports = m;
                        }
                    });
                })();
            ace.define("ace/theme/xcode",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!1,t.cssClass="ace-xcode",t.cssText=".ace-xcode .ace_gutter {background: #e8e8e8;color: #333}.ace-xcode .ace_print-margin {width: 1px;background: #e8e8e8}.ace-xcode {background-color: #FFFFFF;color: #000000}.ace-xcode .ace_cursor {color: #000000}.ace-xcode .ace_marker-layer .ace_selection {background: #B5D5FF}.ace-xcode.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #FFFFFF;}.ace-xcode .ace_marker-layer .ace_step {background: rgb(198, 219, 174)}.ace-xcode .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #BFBFBF}.ace-xcode .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.071)}.ace-xcode .ace_gutter-active-line {background-color: rgba(0, 0, 0, 0.071)}.ace-xcode .ace_marker-layer .ace_selected-word {border: 1px solid #B5D5FF}.ace-xcode .ace_constant.ace_language,.ace-xcode .ace_keyword,.ace-xcode .ace_meta,.ace-xcode .ace_variable.ace_language {color: #C800A4}.ace-xcode .ace_invisible {color: #BFBFBF}.ace-xcode .ace_constant.ace_character,.ace-xcode .ace_constant.ace_other {color: #275A5E}.ace-xcode .ace_constant.ace_numeric {color: #3A00DC}.ace-xcode .ace_entity.ace_other.ace_attribute-name,.ace-xcode .ace_support.ace_constant,.ace-xcode .ace_support.ace_function {color: #450084}.ace-xcode .ace_fold {background-color: #C800A4;border-color: #000000}.ace-xcode .ace_entity.ace_name.ace_tag,.ace-xcode .ace_support.ace_class,.ace-xcode .ace_support.ace_type {color: #790EAD}.ace-xcode .ace_storage {color: #C900A4}.ace-xcode .ace_string {color: #DF0002}.ace-xcode .ace_comment {color: #008E00}.ace-xcode .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==) right repeat-y}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass,!1)});                (function() {
                    ace.require(["ace/theme/xcode"], function(m) {
                        if (typeof module == "object" && typeof exports == "object" && module) {
                            module.exports = m;
                        }
                    });
                })();
            !function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("nipplejs",[],i):"object"==typeof exports?exports.nipplejs=i():t.nipplejs=i()}(window,function(){return function(t){var i={};function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(o,n,function(i){return t[i]}.bind(null,n));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);var o,n=function(t,i){var e=i.x-t.x,o=i.y-t.y;return Math.sqrt(e*e+o*o)},s=function(t){return t*(Math.PI/180)},r=function(t){return t*(180/Math.PI)},d=function(t,i,e){for(var o,n=i.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.addEventListener?t.addEventListener(o,e,!1):t.attachEvent&&t.attachEvent(o,e)},a=function(t,i,e){for(var o,n=i.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.removeEventListener?t.removeEventListener(o,e):t.detachEvent&&t.detachEvent(o,e)},p=function(t){return t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t},c=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},h=function(t,i){i.top||i.right||i.bottom||i.left?(t.style.top=i.top,t.style.right=i.right,t.style.bottom=i.bottom,t.style.left=i.left):(t.style.left=i.x+"px",t.style.top=i.y+"px")},l=function(t,i,e){var o=u(t);for(var n in o)if(o.hasOwnProperty(n))if("string"==typeof i)o[n]=i+" "+e;else{for(var s="",r=0,d=i.length;r<d;r+=1)s+=i[r]+" "+e+", ";o[n]=s.slice(0,-2)}return o},u=function(t){var i={};i[t]="";return["webkit","Moz","o"].forEach(function(e){i[e+t.charAt(0).toUpperCase()+t.slice(1)]=""}),i},f=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},y=function(t,i){if(t.length)for(var e=0,o=t.length;e<o;e+=1)i(t[e]);else i(t)},m=!!("ontouchstart"in window),v=!!window.PointerEvent,g=!!window.MSPointerEvent,b={start:"mousedown",move:"mousemove",end:"mouseup"},x={};function O(){}v?o={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:g?o={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:m?(o={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},x=b):o=b,O.prototype.on=function(t,i){var e,o=t.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var n=0;n<o.length;n+=1)e=o[n],this._handlers_[e]=this._handlers_[e]||[],this._handlers_[e].push(i);return this},O.prototype.off=function(t,i){return this._handlers_=this._handlers_||{},void 0===t?this._handlers_={}:void 0===i?this._handlers_[t]=null:this._handlers_[t]&&this._handlers_[t].indexOf(i)>=0&&this._handlers_[t].splice(this._handlers_[t].indexOf(i),1),this},O.prototype.trigger=function(t,i){var e,o=this,n=t.split(/[ ,]+/g);o._handlers_=o._handlers_||{};for(var s=0;s<n.length;s+=1)e=n[s],o._handlers_[e]&&o._handlers_[e].length&&o._handlers_[e].forEach(function(t){t.call(o,{type:e,target:o},i)})},O.prototype.config=function(t){this.options=this.defaults||{},t&&(this.options=function(t,i){var e={};for(var o in t)t.hasOwnProperty(o)&&i.hasOwnProperty(o)?e[o]=i[o]:t.hasOwnProperty(o)&&(e[o]=t[o]);return e}(this.options,t))},O.prototype.bindEvt=function(t,i){var e=this;return e._domHandlers_=e._domHandlers_||{},e._domHandlers_[i]=function(){"function"==typeof e["on"+i]?e["on"+i].apply(e,arguments):console.warn('[WARNING] : Missing "on'+i+'" handler.')},d(t,o[i],e._domHandlers_[i]),x[i]&&d(t,x[i],e._domHandlers_[i]),e},O.prototype.unbindEvt=function(t,i){return this._domHandlers_=this._domHandlers_||{},a(t,o[i],this._domHandlers_[i]),x[i]&&a(t,x[i],this._domHandlers_[i]),delete this._domHandlers_[i],this};var _=O;function w(t,i){return this.identifier=i.identifier,this.position=i.position,this.frontPosition=i.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1},this.config(i),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=w.id,w.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}w.prototype=new _,w.constructor=w,w.id=0,w.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},w.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",i=function(t,i){var e=u(t);for(var o in e)e.hasOwnProperty(o)&&(e[o]=i);return e}("borderRadius","50%"),e=l("transition","opacity",t),o={};return o.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},o.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},o.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},f(o.el,e),f(o.back,i),f(o.front,i),this.applyStyles(o),this},w.prototype.applyStyles=function(t){for(var i in this.ui)if(this.ui.hasOwnProperty(i))for(var e in t[i])this.ui[i].style[e]=t[i][e];return this},w.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},w.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},w.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},w.prototype.show=function(t){var i=this;return i.options.dataOnly?i:(clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.addToDom(),i.restCallback(),setTimeout(function(){i.ui.el.style.opacity=1},0),i.showTimeout=setTimeout(function(){i.trigger("shown",i.instance),"function"==typeof t&&t.call(this)},i.options.fadeTime),i)},w.prototype.hide=function(t){var i=this;return i.options.dataOnly?i:(i.ui.el.style.opacity=i.options.restOpacity,clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.removeTimeout=setTimeout(function(){var e="dynamic"===i.options.mode?"none":"block";i.ui.el.style.display=e,"function"==typeof t&&t.call(i),i.trigger("hidden",i.instance)},i.options.fadeTime),i.options.restJoystick&&i.setPosition(t,{x:0,y:0}),i)},w.prototype.setPosition=function(t,i){var e=this;e.frontPosition={x:i.x,y:i.y};var o=e.options.fadeTime+"ms",n={};n.front=l("transition",["top","left"],o);var s={front:{}};s.front={left:e.frontPosition.x+"px",top:e.frontPosition.y+"px"},e.applyStyles(n),e.applyStyles(s),e.restTimeout=setTimeout(function(){"function"==typeof t&&t.call(e),e.restCallback()},e.options.fadeTime)},w.prototype.restCallback=function(){var t={};t.front=l("transition","none",""),this.applyStyles(t),this.trigger("rested",this.instance)},w.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},w.prototype.computeDirection=function(t){var i,e,o,n=t.angle.radian,s=Math.PI/4,r=Math.PI/2;if(n>s&&n<3*s&&!t.lockX?i="up":n>-s&&n<=s&&!t.lockY?i="left":n>3*-s&&n<=-s&&!t.lockX?i="down":t.lockY||(i="right"),t.lockY||(e=n>-r&&n<r?"left":"right"),t.lockX||(o=n>0?"up":"down"),t.force>this.options.threshold){var d,a={};for(d in this.direction)this.direction.hasOwnProperty(d)&&(a[d]=this.direction[d]);var p={};for(d in this.direction={x:e,y:o,angle:i},t.direction=this.direction,a)a[d]===this.direction[d]&&(p[d]=!0);if(p.x&&p.y&&p.angle)return t;p.x&&p.y||this.trigger("plain",t),p.x||this.trigger("plain:"+e,t),p.y||this.trigger("plain:"+o,t),p.angle||this.trigger("dir dir:"+i,t)}else this.resetDirection();return t};var T=w;function k(t,i){return this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=t,this.id=k.id,k.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,dynamicPage:!1},this.config(i),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}k.prototype=new _,k.constructor=k,k.id=0,k.prototype.prepareNipples=function(){var t=this.nipples;t.on=this.on.bind(this),t.off=this.off.bind(this),t.options=this.options,t.destroy=this.destroy.bind(this),t.ids=this.ids,t.id=this.id,t.processOnMove=this.processOnMove.bind(this),t.processOnEnd=this.processOnEnd.bind(this),t.get=function(i){if(void 0===i)return t[0];for(var e=0,o=t.length;e<o;e+=1)if(t[e].identifier===i)return t[e];return!1}},k.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},k.prototype.begin=function(){var t=this.options;if("static"===t.mode){var i=this.createNipple(t.position,this.manager.getIdentifier());i.add(),this.idles.push(i)}},k.prototype.createNipple=function(t,i){var e=c(),o={},n=this.options;if(t.x&&t.y)o={x:t.x-(e.x+this.box.left),y:t.y-(e.y+this.box.top)};else if(t.top||t.right||t.bottom||t.left){var s=document.createElement("DIV");s.style.display="hidden",s.style.top=t.top,s.style.right=t.right,s.style.bottom=t.bottom,s.style.left=t.left,s.style.position="absolute",n.zone.appendChild(s);var r=s.getBoundingClientRect();n.zone.removeChild(s),o=t,t={x:r.left+e.x,y:r.top+e.y}}var d=new T(this,{color:n.color,size:n.size,threshold:n.threshold,fadeTime:n.fadeTime,dataOnly:n.dataOnly,restJoystick:n.restJoystick,restOpacity:n.restOpacity,mode:n.mode,identifier:i,position:t,zone:n.zone,frontPosition:{x:0,y:0}});return n.dataOnly||(h(d.ui.el,o),h(d.ui.front,d.frontPosition)),this.nipples.push(d),this.trigger("added "+d.identifier+":added",d),this.manager.trigger("added "+d.identifier+":added",d),this.bindNipple(d),d},k.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},k.prototype.bindNipple=function(t){var i,e=this,o=function(t,o){i=t.type+" "+o.id+":"+t.type,e.trigger(i,o)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",o),t.on("dir:up dir:right dir:down dir:left",o),t.on("plain:up plain:right plain:down plain:left",o)},k.prototype.pressureFn=function(t,i,e){var o=this,n=0;clearInterval(o.pressureIntervals[e]),o.pressureIntervals[e]=setInterval(function(){var e=t.force||t.pressure||t.webkitForce||0;e!==n&&(i.trigger("pressure",e),o.trigger("pressure "+i.identifier+":pressure",e),n=e)}.bind(o),100)},k.prototype.onstart=function(t){var i=this,e=i.options,o=t;t=p(t),i.updateBox();return y(t,function(n){i.actives.length<e.maxNumberOfNipples?i.processOnStart(n):o.type.match(/^touch/)&&(Object.keys(i.manager.ids).forEach(function(e){if(Object.values(o.touches).findIndex(function(t){return t.identifier===e})<0){var n=[t[0]];n.identifier=e,i.processOnEnd(n)}}),i.actives.length<e.maxNumberOfNipples&&i.processOnStart(n))}),i.manager.bindDocument(),!1},k.prototype.processOnStart=function(t){var i,e=this,o=e.options,s=e.manager.getIdentifier(t),r=t.force||t.pressure||t.webkitForce||0,d={x:t.pageX,y:t.pageY},a=e.getOrCreate(s,d);a.identifier!==s&&e.manager.removeIdentifier(a.identifier),a.identifier=s;var p=function(i){i.trigger("start",i),e.trigger("start "+i.id+":start",i),i.show(),r>0&&e.pressureFn(t,i,i.identifier),e.processOnMove(t)};if((i=e.idles.indexOf(a))>=0&&e.idles.splice(i,1),e.actives.push(a),e.ids.push(a.identifier),"semi"!==o.mode)p(a);else{if(!(n(d,a.position)<=o.catchDistance))return a.destroy(),void e.processOnStart(t);p(a)}return a},k.prototype.getOrCreate=function(t,i){var e,o=this.options;return/(semi|static)/.test(o.mode)?(e=this.idles[0])?(this.idles.splice(0,1),e):"semi"===o.mode?this.createNipple(i,t):(console.warn("Coudln't find the needed nipple."),!1):e=this.createNipple(i,t)},k.prototype.processOnMove=function(t){var i=this.options,e=this.manager.getIdentifier(t),o=this.nipples.get(e);if(function(t){return isNaN(t.buttons)?0!==t.pressure:0!==t.buttons}(t)){if(!o)return console.error("Found zombie joystick with ID "+e),void this.manager.removeIdentifier(e);if(i.dynamicPage){var d=c();p=o.el.getBoundingClientRect(),o.position={x:d.x+p.left,y:d.y+p.top}}o.identifier=e;var a=o.options.size/2,p={x:t.pageX,y:t.pageY};i.lockX&&(p.y=o.position.y),i.lockY&&(p.x=o.position.x);var l,u,f,y,m,v,g,b,x=n(p,o.position),O=(l=p,u=o.position,f=u.x-l.x,y=u.y-l.y,r(Math.atan2(y,f))),_=s(O),w=x/a,T={distance:x,position:p};x>a&&(x=a,m=o.position,v=x,b={x:0,y:0},g=s(g=O),b.x=m.x-v*Math.cos(g),b.y=m.y-v*Math.sin(g),p=b);var k=p.x-o.position.x,P=p.y-o.position.y;o.frontPosition={x:k,y:P},i.dataOnly||h(o.ui.front,o.frontPosition);var E={identifier:o.identifier,position:p,force:w,pressure:t.force||t.pressure||t.webkitForce||0,distance:x,angle:{radian:_,degree:O},vector:{x:k/a,y:-P/a},raw:T,instance:o,lockX:i.lockX,lockY:i.lockY};(E=o.computeDirection(E)).angle={radian:s(180-O),degree:180-O},o.trigger("move",E),this.trigger("move "+o.id+":move",E)}else this.processOnEnd(t)},k.prototype.processOnEnd=function(t){var i=this,e=i.options,o=i.manager.getIdentifier(t),n=i.nipples.get(o),s=i.manager.removeIdentifier(n.identifier);n&&(e.dataOnly||n.hide(function(){"dynamic"===e.mode&&(n.trigger("removed",n),i.trigger("removed "+n.id+":removed",n),i.manager.trigger("removed "+n.id+":removed",n),n.destroy())}),clearInterval(i.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),i.trigger("end "+n.id+":end",n),i.ids.indexOf(n.identifier)>=0&&i.ids.splice(i.ids.indexOf(n.identifier),1),i.actives.indexOf(n)>=0&&i.actives.splice(i.actives.indexOf(n),1),/(semi|static)/.test(e.mode)?i.idles.push(n):i.nipples.indexOf(n)>=0&&i.nipples.splice(i.nipples.indexOf(n),1),i.manager.unbindDocument(),/(semi|static)/.test(e.mode)&&(i.manager.ids[s.id]=s.identifier))},k.prototype.onDestroyed=function(t,i){this.nipples.indexOf(i)>=0&&this.nipples.splice(this.nipples.indexOf(i),1),this.actives.indexOf(i)>=0&&this.actives.splice(this.actives.indexOf(i),1),this.idles.indexOf(i)>=0&&this.idles.splice(this.idles.indexOf(i),1),this.ids.indexOf(i.identifier)>=0&&this.ids.splice(this.ids.indexOf(i.identifier),1),this.manager.removeIdentifier(i.identifier),this.manager.unbindDocument()},k.prototype.destroy=function(){for(var t in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(t){t.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(t)&&clearInterval(this.pressureIntervals[t]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()};var P=k;function E(t){var i,e=this;return e.ids={},e.index=0,e.collections=[],e.config(t),e.prepareCollections(),d(window,"resize",function(t){clearTimeout(i),i=setTimeout(function(){var t,i=c();e.collections.forEach(function(e){e.forEach(function(e){t=e.el.getBoundingClientRect(),e.position={x:i.x+t.left,y:i.y+t.top}})})},100)}),e.collections}E.prototype=new _,E.constructor=E,E.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(i){var e;return t.collections.every(function(t){return!(e=t.get(i))}),e}},E.prototype.create=function(t){return this.createCollection(t)},E.prototype.createCollection=function(t){var i=new P(this,t);return this.bindCollection(i),this.collections.push(i),i},E.prototype.bindCollection=function(t){var i,e=this,o=function(t,o){i=t.type+" "+o.id+":"+t.type,e.trigger(i,o)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",o),t.on("dir:up dir:right dir:down dir:left",o),t.on("plain:up plain:right plain:down plain:left",o)},E.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},E.prototype.unbindDocument=function(t){Object.keys(this.ids).length&&!0!==t||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},E.prototype.getIdentifier=function(t){var i;return t?void 0===(i=void 0===t.identifier?t.pointerId:t.identifier)&&(i=this.latest||0):i=this.index,void 0===this.ids[i]&&(this.ids[i]=this.index,this.index+=1),this.latest=i,this.ids[i]},E.prototype.removeIdentifier=function(t){var i={};for(var e in this.ids)if(this.ids[e]===t){i.id=e,i.identifier=this.ids[e],delete this.ids[e];break}return i},E.prototype.onmove=function(t){return this.onAny("move",t),!1},E.prototype.onend=function(t){return this.onAny("end",t),!1},E.prototype.oncancel=function(t){return this.onAny("end",t),!1},E.prototype.onAny=function(t,i){var e,o=this,n="processOn"+t.charAt(0).toUpperCase()+t.slice(1);i=p(i);return y(i,function(t){e=o.getIdentifier(t),y(o.collections,function(t,i,e){e.ids.indexOf(i)>=0&&(e[n](t),t._found_=!0)}.bind(null,t,e)),t._found_||o.removeIdentifier(e)}),!1},E.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(t){t.destroy()}),this.off()},E.prototype.onDestroyed=function(t,i){if(this.collections.indexOf(i)<0)return!1;this.collections.splice(this.collections.indexOf(i),1)};var I=new E;i.default={create:function(t){return I.create(t)},factory:I}}]).default});// maybe unify the chrome-driver scripts and
//   web.js repackaging somehow?

// I built a pretty cool CLI forms interface in PHP,
//   import that when multi-language is done.

// TODO: can call all EMGL functions or re.* renderer2 export functions from scripts
//   Maybe this is where the paralel frame buffering comes in, or treat the javascript
//   like update calls and extrapolate.


function __webgl_enable_WEBGL_draw_instanced_base_vertex_base_instance(ctx) {
  return !!(ctx.dibvbi = ctx.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"));
}

function __webgl_enable_WEBGL_multi_draw_instanced_base_vertex_base_instance(ctx) {
  return !!(ctx.mdibvbi = ctx.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"));
}

function __webgl_enable_WEBGL_multi_draw(ctx) {
  return !!(ctx.multiDrawWebgl = ctx.getExtension("WEBGL_multi_draw"));
}


function SAFE_HEAP_STORE(dest, value, bytes, isFloat) {
  switch (bytes) {
    case 1:
      HEAP8[dest >> 0] = value
      break;
    case 2:
      HEAP16[dest >> 1] = value
      break;
    case 4:
      if (isFloat) {
        HEAPF32[dest >> 2] = value
      } else {
        HEAP32[dest >> 2] = value
      }
      break;
    case 8:
      HEAPF64[dest >> 3] = value
      break;
    default:
      throw new Error('data type not supported ' + bytes)
  }
  return value;
}

function unSign(value, bits) {
  if (value >= 0) {
    return value;
  }
  return bits <= 32 ? 2 * Math.abs(1 << bits - 1) + value : Math.pow(2, bits) + value;
}

function SAFE_HEAP_LOAD(src, bytes, unsigned, isFloat) {
  let ret
  switch (bytes) {
    case 1:
      ret = HEAP8[src >> 0]
      break;
    case 2:
      ret = HEAP16[src >> 1]
      break;
    case 4:
      if (isFloat) {
        ret = HEAPF32[src >> 2]
      } else {
        ret = HEAP32[src >> 2]
      }
      break;
    case 8:
      ret = HEAPF64[src >> 3]
      break;
    default:
      throw new Error('data type not supported ' + bytes)
  }
  if (unsigned) ret = unSign(ret, bytes * 8);
  return ret
}

var GL = {
  counter: 1,
  buffers: [],
  mappedBuffers: {},
  programs: [],
  framebuffers: [],
  renderbuffers: [],
  textures: [],
  shaders: [],
  vaos: [],
  contexts: [],
  offscreenCanvases: {},
  queries: [],
  samplers: [],
  transformFeedbacks: [],
  syncs: [],
  byteSizeByTypeRoot: 5120,
  byteSizeByType: [1, 1, 2, 2, 4, 4, 4, 2, 3, 4, 8],
  stringCache: {},
  stringiCache: {},
  unpackAlignment: 4,
  recordError: function recordError(errorCode) {
    if (!GL.lastError) {
      GL.lastError = errorCode;
    }
  },
  getNewId: function (table) {
    var ret = GL.counter++;
    for (var i = table.length; i < ret; i++) {
      table[i] = null;
    }
    return ret;
  },
  MAX_TEMP_BUFFER_SIZE: 2097152,
  numTempVertexBuffersPerSize: 64,
  log2ceilLookup: function (i) {
    return 32 - Math.clz32(i === 0 ? 0 : i - 1);
  },
  generateTempBuffers: function (quads, context) {
    var largestIndex = GL.log2ceilLookup(GL.MAX_TEMP_BUFFER_SIZE);
    context.tempVertexBufferCounters1 = [];
    context.tempVertexBufferCounters2 = [];
    context.tempVertexBufferCounters1.length = context.tempVertexBufferCounters2.length = largestIndex + 1;
    context.tempVertexBuffers1 = [];
    context.tempVertexBuffers2 = [];
    context.tempVertexBuffers1.length = context.tempVertexBuffers2.length = largestIndex + 1;
    context.tempIndexBuffers = [];
    context.tempIndexBuffers.length = largestIndex + 1;
    for (var i = 0; i <= largestIndex; ++i) {
      context.tempIndexBuffers[i] = null;
      context.tempVertexBufferCounters1[i] = context.tempVertexBufferCounters2[i] = 0;
      var ringbufferLength = GL.numTempVertexBuffersPerSize;
      context.tempVertexBuffers1[i] = [];
      context.tempVertexBuffers2[i] = [];
      var ringbuffer1 = context.tempVertexBuffers1[i];
      var ringbuffer2 = context.tempVertexBuffers2[i];
      ringbuffer1.length = ringbuffer2.length = ringbufferLength;
      for (var j = 0; j < ringbufferLength; ++j) {
        ringbuffer1[j] = ringbuffer2[j] = null;
      }
    }
    if (quads) {
      context.tempQuadIndexBuffer = GLctx.createBuffer();
      context.GLctx.bindBuffer(34963, context.tempQuadIndexBuffer);
      var numIndexes = GL.MAX_TEMP_BUFFER_SIZE >> 1;
      var quadIndexes = new Uint16Array(numIndexes);
      var i = 0, v = 0;
      while (1) {
        quadIndexes[i++] = v;
        if (i >= numIndexes) break;
        quadIndexes[i++] = v + 1;
        if (i >= numIndexes) break;
        quadIndexes[i++] = v + 2;
        if (i >= numIndexes) break;
        quadIndexes[i++] = v;
        if (i >= numIndexes) break;
        quadIndexes[i++] = v + 2;
        if (i >= numIndexes) break;
        quadIndexes[i++] = v + 3;
        if (i >= numIndexes) break;
        v += 4;
      }
      context.GLctx.bufferData(34963, quadIndexes, 35044);
      context.GLctx.bindBuffer(34963, null);
    }
  },
  getTempVertexBuffer: function getTempVertexBuffer(sizeBytes) {
    var idx = GL.log2ceilLookup(sizeBytes);
    var ringbuffer = GL.currentContext.tempVertexBuffers1[idx];
    var nextFreeBufferIndex = GL.currentContext.tempVertexBufferCounters1[idx];
    GL.currentContext.tempVertexBufferCounters1[idx] = GL.currentContext.tempVertexBufferCounters1[idx] + 1 & GL.numTempVertexBuffersPerSize - 1;
    var vbo = ringbuffer[nextFreeBufferIndex];
    if (vbo) {
      return vbo;
    }
    var prevVBO = GLctx.getParameter(34964);
    ringbuffer[nextFreeBufferIndex] = GLctx.createBuffer();
    GLctx.bindBuffer(34962, ringbuffer[nextFreeBufferIndex]);
    GLctx.bufferData(34962, 1 << idx, 35048);
    GLctx.bindBuffer(34962, prevVBO);
    return ringbuffer[nextFreeBufferIndex];
  },
  getTempIndexBuffer: function getTempIndexBuffer(sizeBytes) {
    var idx = GL.log2ceilLookup(sizeBytes);
    var ibo = GL.currentContext.tempIndexBuffers[idx];
    if (ibo) {
      return ibo;
    }
    var prevIBO = GLctx.getParameter(34965);
    GL.currentContext.tempIndexBuffers[idx] = GLctx.createBuffer();
    GLctx.bindBuffer(34963, GL.currentContext.tempIndexBuffers[idx]);
    GLctx.bufferData(34963, 1 << idx, 35048);
    GLctx.bindBuffer(34963, prevIBO);
    return GL.currentContext.tempIndexBuffers[idx];
  },
  newRenderingFrameStarted: function newRenderingFrameStarted() {
    if (!GL.currentContext) {
      return;
    }
    var vb = GL.currentContext.tempVertexBuffers1;
    GL.currentContext.tempVertexBuffers1 = GL.currentContext.tempVertexBuffers2;
    GL.currentContext.tempVertexBuffers2 = vb;
    vb = GL.currentContext.tempVertexBufferCounters1;
    GL.currentContext.tempVertexBufferCounters1 = GL.currentContext.tempVertexBufferCounters2;
    GL.currentContext.tempVertexBufferCounters2 = vb;
    var largestIndex = GL.log2ceilLookup(GL.MAX_TEMP_BUFFER_SIZE);
    for (var i = 0; i <= largestIndex; ++i) {
      GL.currentContext.tempVertexBufferCounters1[i] = 0;
    }
  },
  getSource: function (shader, count, string, length) {
    var source = "";
    for (var i = 0; i < count; ++i) {
      var len = length ? SAFE_HEAP_LOAD(length + i * 4 | 0, 4, 0) | 0 : -1;
      source += addressToString(SAFE_HEAP_LOAD(string + i * 4 | 0, 4, 0) | 0, len < 0 ? undefined : len);
    }
    return source;
  },
  calcBufLength: function calcBufLength(size, type, stride, count) {
    if (stride > 0) {
      return count * stride;
    }
    var typeSize = GL.byteSizeByType[type - GL.byteSizeByTypeRoot];
    return size * typeSize * count;
  },
  usedTempBuffers: [],
  preDrawHandleClientVertexAttribBindings: function preDrawHandleClientVertexAttribBindings(count) {
    GL.resetBufferBinding = false;
    for (var i = 0; i < GL.currentContext.maxVertexAttribs; ++i) {
      var cb = GL.currentContext.clientBuffers[i];
      if (!cb.clientside || !cb.enabled) continue;
      GL.resetBufferBinding = true;
      var size = GL.calcBufLength(cb.size, cb.type, cb.stride, count);
      var buf = GL.getTempVertexBuffer(size);
      GLctx.bindBuffer(34962, buf);
      GLctx.bufferSubData(34962, 0, HEAPU8.subarray(cb.ptr, cb.ptr + size));
      cb.vertexAttribPointerAdaptor.call(GLctx, i, cb.size, cb.type, cb.normalized, cb.stride, 0);
    }
  },
  postDrawHandleClientVertexAttribBindings: function postDrawHandleClientVertexAttribBindings() {
    if (GL.resetBufferBinding) {
      GLctx.bindBuffer(34962, GL.buffers[GLctx.currentArrayBufferBinding]);
    }
  },
  createContext: function (canvas, webGLContextAttributes) {
    if (!canvas.getContextSafariWebGL2Fixed) {
      canvas.getContextSafariWebGL2Fixed = canvas.getContext;
      canvas.getContext = function (ver, attrs) {
        var gl = canvas.getContextSafariWebGL2Fixed(ver, attrs);
        return ver == "webgl" == gl instanceof WebGLRenderingContext ? gl : null;
      };
    }
    var ctx = canvas.getContext("webgl2", webGLContextAttributes);
    if (!ctx) return 0;
    var handle = GL.registerContext(ctx, webGLContextAttributes);
    return handle;
  },
  registerContext: function (ctx, webGLContextAttributes) {
    var handle = GL.getNewId(GL.contexts);
    var context = {
      handle: handle,
      attributes: webGLContextAttributes,
      version: webGLContextAttributes.majorVersion,
      GLctx: ctx
    };
    if (ctx.canvas) ctx.canvas.GLctxObject = context;
    GL.contexts[handle] = context;
    if (typeof webGLContextAttributes.enableExtensionsByDefault === "undefined" || webGLContextAttributes.enableExtensionsByDefault) {
      GL.initExtensions(context);
    }
    context.maxVertexAttribs = context.GLctx.getParameter(34921);
    context.clientBuffers = [];
    for (var i = 0; i < context.maxVertexAttribs; i++) {
      context.clientBuffers[i] = {
        enabled: false,
        clientside: false,
        size: 0,
        type: 0,
        normalized: 0,
        stride: 0,
        ptr: 0,
        vertexAttribPointerAdaptor: null
      };
    }
    GL.generateTempBuffers(false, context);
    return handle;
  },
  makeContextCurrent: function (contextHandle) {
    GL.currentContext = GL.contexts[contextHandle];
    window.ctx = GLctx = GL.currentContext && GL.currentContext.GLctx;
    return !(contextHandle && !GLctx);
  },
  getContext: function (contextHandle) {
    return GL.contexts[contextHandle];
  },
  deleteContext: function (contextHandle) {
    if (GL.currentContext === GL.contexts[contextHandle]) GL.currentContext = null;
    if (typeof JSEvents === "object") JSEvents.removeAllHandlersOnTarget(GL.contexts[contextHandle].GLctx.canvas);
    if (GL.contexts[contextHandle] && GL.contexts[contextHandle].GLctx.canvas) GL.contexts[contextHandle].GLctx.canvas.GLctxObject = undefined;
    GL.contexts[contextHandle] = null;
  },
  initExtensions: function (context) {
    if (!context) context = GL.currentContext;
    if (context.initExtensionsDone) return;
    context.initExtensionsDone = true;
    var GLctx = context.GLctx;
    __webgl_enable_WEBGL_draw_instanced_base_vertex_base_instance(GLctx);
    __webgl_enable_WEBGL_multi_draw_instanced_base_vertex_base_instance(GLctx);
    if (context.version >= 2) {
      GLctx.disjointTimerQueryExt = GLctx.getExtension("EXT_disjoint_timer_query_webgl2");
    }
    if (context.version < 2 || !GLctx.disjointTimerQueryExt) {
      GLctx.disjointTimerQueryExt = GLctx.getExtension("EXT_disjoint_timer_query");
    }
    __webgl_enable_WEBGL_multi_draw(GLctx);
    var exts = GLctx.getSupportedExtensions() || [];
    exts.forEach(function (ext) {
      if (!ext.includes("lose_context") && !ext.includes("debug")) {
        GLctx.getExtension(ext);
      }
    });
  }
};

function _getTempRet0() {
  return getTempRet0();
}

function _glActiveTexture(x0) {
  GLctx["activeTexture"](x0);
}

function _glAlphaFunc() {
  debugger;
}

function _glArrayElement() {
  debugger;
}

function _glAttachShader(program, shader) {
  GLctx.attachShader(GL.programs[program], GL.shaders[shader]);
}

function _glBegin() {
  throw "Legacy GL function (glBegin) called. If you want legacy GL emulation, you need to compile with -s LEGACY_GL_EMULATION=1 to enable legacy GL emulation.";
}

function _glBindAttribLocation(program, index, name) {
  GLctx.bindAttribLocation(GL.programs[program], index, addressToString(name));
}

function _glBindBuffer(target, buffer) {
  if (target == 34962) {
    GLctx.currentArrayBufferBinding = buffer;
  } else if (target == 34963) {
    GLctx.currentElementArrayBufferBinding = buffer;
  }
  if (target == 35051) {
    GLctx.currentPixelPackBufferBinding = buffer;
  } else if (target == 35052) {
    GLctx.currentPixelUnpackBufferBinding = buffer;
  }
  GLctx.bindBuffer(target, GL.buffers[buffer]);
}

function _glBindFramebuffer(target, framebuffer) {
  GLctx.bindFramebuffer(target, GL.framebuffers[framebuffer]);
}

function _glBindRenderbuffer(target, renderbuffer) {
  GLctx.bindRenderbuffer(target, GL.renderbuffers[renderbuffer]);
}

function _glBindTexture(target, texture) {
  GLctx.bindTexture(target, GL.textures[texture]);
  EMGL.previousTex = texture
  if (typeof EMGL.texFiles[texture] != 'undefined') {
    EMGL.previousImage = EMGL.texFiles[texture][1]
  } else {
    EMGL.previousImage = null
  }
}

function _glBindVertexArray(vao) {
  GLctx["bindVertexArray"](GL.vaos[vao]);
  var ibo = GLctx.getParameter(34965);
  GLctx.currentElementArrayBufferBinding = ibo ? ibo.name | 0 : 0;
}

function _glBlendFunc(x0, x1) {
  GLctx["blendFunc"](x0, x1);
}

function _glBlitFramebuffer(x0, x1, x2, x3, x4, x5, x6, x7, x8, x9) {
  GLctx["blitFramebuffer"](x0, x1, x2, x3, x4, x5, x6, x7, x8, x9);
}

function _glBufferData(target, size, data, usage) {
  if (true) {
    if (data) {
      GLctx.bufferData(target, HEAPU8, usage, data, size);
    } else {
      GLctx.bufferData(target, size, usage);
    }
  } else {
    GLctx.bufferData(target, data ? HEAPU8.subarray(data, data + size) : size, usage);
  }
}

function _glBufferSubData(target, offset, size, data) {
  if (true) {
    GLctx.bufferSubData(target, offset, HEAPU8, data, size);
    return;
  }
  GLctx.bufferSubData(target, offset, HEAPU8.subarray(data, data + size));
}

function _glCheckFramebufferStatus(x0) {
  return GLctx["checkFramebufferStatus"](x0);
}

function _glClear(x0) {
  GLctx["clear"](x0);
}

function _glClearColor(x0, x1, x2, x3) {
  GLctx["clearColor"](x0, x1, x2, x3);
}

function _glClearDepth(x0) {
  GLctx["clearDepth"](x0);
}

function _glClearStencil(x0) {
  GLctx["clearStencil"](x0);
}

function _glClipPlane() {
  debugger;
}

function _glColor3f() {
  debugger;
}

function _glColor4f() {
  debugger;
}

function _glColor4ubv() {
  debugger;
}

function _glColorMask(red, green, blue, alpha) {
  GLctx.colorMask(!!red, !!green, !!blue, !!alpha);
}

function _glColorPointer() {
  debugger;
}

function _glCompileShader(shader) {
  GLctx.compileShader(GL.shaders[shader]);
}

function _glCompressedTexImage2D(target, level, internalFormat, width, height, border, imageSize, data) {
  if (true) {
    if (GLctx.currentPixelUnpackBufferBinding) {
      GLctx["compressedTexImage2D"](target, level, internalFormat, width, height, border, imageSize, data);
    } else {
      GLctx["compressedTexImage2D"](target, level, internalFormat, width, height, border, HEAPU8, data, imageSize);
    }
    return;
  }
  GLctx["compressedTexImage2D"](target, level, internalFormat, width, height, border, data ? HEAPU8.subarray(data, data + imageSize) : null);
}

function _glCompressedTexSubImage2D(target, level, xoffset, yoffset, width, height, format, imageSize, data) {
  if (true) {
    if (GLctx.currentPixelUnpackBufferBinding) {
      GLctx["compressedTexSubImage2D"](target, level, xoffset, yoffset, width, height, format, imageSize, data);
    } else {
      GLctx["compressedTexSubImage2D"](target, level, xoffset, yoffset, width, height, format, HEAPU8, data, imageSize);
    }
    return;
  }
  GLctx["compressedTexSubImage2D"](target, level, xoffset, yoffset, width, height, format, data ? HEAPU8.subarray(data, data + imageSize) : null);
}

function _glCopyTexSubImage2D(x0, x1, x2, x3, x4, x5, x6, x7) {
  GLctx["copyTexSubImage2D"](x0, x1, x2, x3, x4, x5, x6, x7);
}

function _glCreateProgram() {
  var id = GL.getNewId(GL.programs);
  var program = GLctx.createProgram();
  program.name = id;
  program.maxUniformLength = program.maxAttributeLength = program.maxUniformBlockNameLength = 0;
  program.uniformIdCounter = 1;
  GL.programs[id] = program;
  return id;
}

function _glCreateShader(shaderType) {
  var id = GL.getNewId(GL.shaders);
  GL.shaders[id] = GLctx.createShader(shaderType);
  return id;
}

function _glCullFace(x0) {
  GLctx["cullFace"](x0);
}

function _glDeleteBuffers(n, buffers) {
  for (var i = 0; i < n; i++) {
    var id = SAFE_HEAP_LOAD(buffers + i * 4 | 0, 4, 0) | 0;
    var buffer = GL.buffers[id];
    if (!buffer) continue;
    GLctx.deleteBuffer(buffer);
    buffer.name = 0;
    GL.buffers[id] = null;
    if (id == GLctx.currentArrayBufferBinding) GLctx.currentArrayBufferBinding = 0;
    if (id == GLctx.currentElementArrayBufferBinding) GLctx.currentElementArrayBufferBinding = 0;
    if (id == GLctx.currentPixelPackBufferBinding) GLctx.currentPixelPackBufferBinding = 0;
    if (id == GLctx.currentPixelUnpackBufferBinding) GLctx.currentPixelUnpackBufferBinding = 0;
  }
}

function _glDeleteFramebuffers(n, framebuffers) {
  for (var i = 0; i < n; ++i) {
    var id = SAFE_HEAP_LOAD(framebuffers + i * 4 | 0, 4, 0) | 0;
    var framebuffer = GL.framebuffers[id];
    if (!framebuffer) continue;
    GLctx.deleteFramebuffer(framebuffer);
    framebuffer.name = 0;
    GL.framebuffers[id] = null;
  }
}

function _glDeleteProgram(id) {
  if (!id) return;
  var program = GL.programs[id];
  if (!program) {
    GL.recordError(1281);
    return;
  }
  GLctx.deleteProgram(program);
  program.name = 0;
  GL.programs[id] = null;
}

function _glDeleteRenderbuffers(n, renderbuffers) {
  for (var i = 0; i < n; i++) {
    var id = SAFE_HEAP_LOAD(renderbuffers + i * 4 | 0, 4, 0) | 0;
    var renderbuffer = GL.renderbuffers[id];
    if (!renderbuffer) continue;
    GLctx.deleteRenderbuffer(renderbuffer);
    renderbuffer.name = 0;
    GL.renderbuffers[id] = null;
  }
}

function _glDeleteShader(id) {
  if (!id) return;
  var shader = GL.shaders[id];
  if (!shader) {
    GL.recordError(1281);
    return;
  }
  GLctx.deleteShader(shader);
  GL.shaders[id] = null;
}

function _glDeleteTextures(n, textures) {
  for (var i = 0; i < n; i++) {
    var id = SAFE_HEAP_LOAD(textures + i * 4 | 0, 4, 0) | 0;
    var texture = GL.textures[id];
    if (!texture) continue;
    GLctx.deleteTexture(texture);
    texture.name = 0;
    GL.textures[id] = null;
  }
}

function _glDeleteVertexArrays(n, vaos) {
  for (var i = 0; i < n; i++) {
    var id = SAFE_HEAP_LOAD(vaos + i * 4 | 0, 4, 0) | 0;
    GLctx["deleteVertexArray"](GL.vaos[id]);
    GL.vaos[id] = null;
  }
}

function _glDepthFunc(x0) {
  GLctx["depthFunc"](x0);
}

function _glDepthMask(flag) {
  GLctx.depthMask(!!flag);
}

function _glDepthRange(x0, x1) {
  GLctx["depthRange"](x0, x1);
}

function _glDetachShader(program, shader) {
  GLctx.detachShader(GL.programs[program], GL.shaders[shader]);
}

function _glDisable(x0) {
  GLctx["disable"](x0);
}

function _glDisableClientState() {
  debugger;
}

function _glDisableVertexAttribArray(index) {
  var cb = GL.currentContext.clientBuffers[index];
  cb.enabled = false;
  GLctx.disableVertexAttribArray(index);
}

function _glDrawArrays(mode, first, count) {
  GL.preDrawHandleClientVertexAttribBindings(first + count);
  GLctx.drawArrays(mode, first, count);
  GL.postDrawHandleClientVertexAttribBindings();
}

function _glDrawBuffer() {
  debugger;
}

var tempFixedLengthArray = [];

function _glDrawBuffers(n, bufs) {
  var bufArray = tempFixedLengthArray[n];
  for (var i = 0; i < n; i++) {
    bufArray[i] = SAFE_HEAP_LOAD(bufs + i * 4 | 0, 4, 0) | 0;
  }
  GLctx["drawBuffers"](bufArray);
}

for (var i = 0; i < 32; ++i) tempFixedLengthArray.push(new Array(i));

function _glDrawElements(mode, count, type, indices) {
  var buf;
  if (!GLctx.currentElementArrayBufferBinding) {
    var size = GL.calcBufLength(1, type, 0, count);
    buf = GL.getTempIndexBuffer(size);
    GLctx.bindBuffer(34963, buf);
    GLctx.bufferSubData(34963, 0, HEAPU8.subarray(indices, indices + size));
    indices = 0;
  }
  GL.preDrawHandleClientVertexAttribBindings(count);
  GLctx.drawElements(mode, count, type, indices);
  GL.postDrawHandleClientVertexAttribBindings(count);
  if (!GLctx.currentElementArrayBufferBinding) {
    GLctx.bindBuffer(34963, null);
  }
}

function _glEnable(x0) {
  GLctx["enable"](x0);
}

function _glEnableClientState() {
  debugger;
}

function _glEnableVertexAttribArray(index) {
  var cb = GL.currentContext.clientBuffers[index];
  cb.enabled = true;
  GLctx.enableVertexAttribArray(index);
}

function _glEnd() {
  debugger;
}

function _glFinish() {
  GLctx["finish"]();
}

function _glFlush() {
  GLctx["flush"]();
}

function _glFramebufferRenderbuffer(target, attachment, renderbuffertarget, renderbuffer) {
  GLctx.framebufferRenderbuffer(target, attachment, renderbuffertarget, GL.renderbuffers[renderbuffer]);
}

function _glFramebufferTexture2D(target, attachment, textarget, texture, level) {
  GLctx.framebufferTexture2D(target, attachment, textarget, GL.textures[texture], level);
}

function _glFrustum() {
  debugger;
}

function __glGenObject(n, buffers, createFunction, objectTable) {
  for (var i = 0; i < n; i++) {
    var buffer = GLctx[createFunction]();
    var id = buffer && GL.getNewId(objectTable);
    if (buffer) {
      buffer.name = id;
      objectTable[id] = buffer;
    } else {
      GL.recordError(1282);
    }
    SAFE_HEAP_STORE(buffers + i * 4 | 0, id | 0, 4);
  }
}

function _glGenBuffers(n, buffers) {
  __glGenObject(n, buffers, "createBuffer", GL.buffers);
}

function _glGenFramebuffers(n, ids) {
  __glGenObject(n, ids, "createFramebuffer", GL.framebuffers);
}

function _glGenRenderbuffers(n, renderbuffers) {
  __glGenObject(n, renderbuffers, "createRenderbuffer", GL.renderbuffers);
}

function loadImage(filename, pic, ext) {
  let filenameStr = addressToString(filename)
  let buf = stringToAddress('DEADBEEF') // pointer to pointer
  let length
  EMGL.previousImage = null
  EMGL.previousName = ''
  HEAP32[buf >> 2] = 0
  // TODO: merge with virtual filesystem...
  //   But doing it this way, it's possible for images to load with the page
  //   If I switch back to FS.virtual mode, this part will always reload async
  let preloadedImage = document.querySelector(`IMG[title="${filenameStr}"]`)
  if (preloadedImage) {
    EMGL.previousName = filenameStr
    EMGL.previousImage = preloadedImage
    HEAP32[pic >> 2] = 1
    return
  }
  
  if ((length = FS_ReadFile(filename, buf)) > 0 && HEAPU32[buf >> 2] > 0) {
    let thisImage = document.createElement('IMG')
    EMGL.previousName = filenameStr
    EMGL.previousImage = thisImage
    thisImage.onload = function (evt) {
      HEAP32[(evt.target.address - 4 * 4) >> 2] = evt.target.width
      HEAP32[(evt.target.address - 3 * 4) >> 2] = evt.target.height
      R_FinishImage3(evt.target.address - 7 * 4, 0x1908 /* GL_RGBA */, 0)
    }
    let imageView = Array.from(HEAPU8.slice(HEAPU32[buf >> 2], HEAPU32[buf >> 2] + length))
    let utfEncoded = imageView.map(function (c) { return String.fromCharCode(c) }).join('')
    thisImage.src = 'data:image/' + ext + ';base64,' + btoa(utfEncoded)
    thisImage.name = filenameStr
    HEAP32[pic >> 2] = 1
    FS_FreeFile(HEAPU32[buf >> 2])
    return
  }
  EMGL.previousName = ''
  EMGL.previousImage = null
  HEAP32[pic >> 2] = null
}


function R_LoadPNG(filename, pic) {
  return loadImage(filename, pic, 'png')
}

function R_LoadJPG(filename, pic) {
  return loadImage(filename, pic, 'jpg')
}


function _glGenTextures(n, textures) {
  __glGenObject(n, textures, "createTexture", GL.textures);
  // engine is giving us address of where it will store texture name, also
  let texture = HEAP32[textures >> 2]
  EMGL.texFiles[texture] = [textures, null]
  let newName = addressToString(HEAPU32[(EMGL.texFiles[texture][0] - 7*4) >> 2])
  if(newName.length == 0) {
    // using CreateImage2() not 3
    return;
  }
  if(EMGL.previousImage 
    && EMGL.previousName.replace(/\..*?$/, '') == newName.replace(/\..*?$/, '')) {
    EMGL.previousImage.address = EMGL.texFiles[texture][0]
    EMGL.texFiles[texture][1] = EMGL.previousImage
    // copy width, height to C struct
    if(EMGL.previousImage.width > 0 && EMGL.previousImage.height > 0) {
      HEAP32[(textures - 4 * 4) >> 2] = EMGL.previousImage.width
      HEAP32[(textures - 3 * 4) >> 2] = EMGL.previousImage.height
    }
  }
  EMGL.previousImage = null
  EMGL.previousName = ''
}

function _glGenVertexArrays(n, arrays) {
  __glGenObject(n, arrays, "createVertexArray", GL.vaos);
}

function _glGenerateMipmap(x0) {
  GLctx["generateMipmap"](x0);
}

function __glGetActiveAttribOrUniform(funcName, program, index, bufSize, length, size, type, name) {
  program = GL.programs[program];
  var info = GLctx[funcName](program, index);
  if (info) {
    var numBytesWrittenExclNull = name && stringToAddress(info.name, name, bufSize);
    if (length) SAFE_HEAP_STORE(length | 0, numBytesWrittenExclNull | 0, 4);
    if (size) SAFE_HEAP_STORE(size | 0, info.size | 0, 4);
    if (type) SAFE_HEAP_STORE(type | 0, info.type | 0, 4);
  }
}

function _glGetActiveUniform(program, index, bufSize, length, size, type, name) {
  __glGetActiveAttribOrUniform("getActiveUniform", program, index, bufSize, length, size, type, name);
}

function readI53FromI64(ptr) {
  return SAFE_HEAP_LOAD((ptr >> 2) * 4, 4, 1) + SAFE_HEAP_LOAD((ptr + 4 >> 2) * 4, 4, 0) * 4294967296;
}

function readI53FromU64(ptr) {
  return SAFE_HEAP_LOAD((ptr >> 2) * 4, 4, 1) + SAFE_HEAP_LOAD((ptr + 4 >> 2) * 4, 4, 1) * 4294967296;
}

function writeI53ToI64(ptr, num) {
  SAFE_HEAP_STORE((ptr >> 2) * 4, num, 4);
  SAFE_HEAP_STORE((ptr + 4 >> 2) * 4, (num - SAFE_HEAP_LOAD((ptr >> 2) * 4, 4, 1)) / 4294967296, 4);
  var deserialized = num >= 0 ? readI53FromU64(ptr) : readI53FromI64(ptr);
  if (deserialized != num) warnOnce("writeI53ToI64() out of range: serialized JS Number " + num + " to Wasm heap as bytes lo=0x" + SAFE_HEAP_LOAD((ptr >> 2) * 4, 4, 1).toString(16) + ", hi=0x" + SAFE_HEAP_LOAD((ptr + 4 >> 2) * 4, 4, 1).toString(16) + ", which deserializes back to " + deserialized + " instead!");
}

function emscriptenWebGLGet(name_, p, type) {
  if (!p) {
    GL.recordError(1281);
    return;
  }
  var ret = undefined;
  switch (name_) {
    case 36346:
      ret = 1;
      break;

    case 36344:
      if (type != 0 && type != 1) {
        GL.recordError(1280);
      }
      return;

    case 34814:
    case 36345:
      ret = 0;
      break;

    case 34466:
      var formats = GLctx.getParameter(34467);
      ret = formats ? formats.length : 0;
      break;

    case 33309:
      if (GL.currentContext.version < 2) {
        GL.recordError(1282);
        return;
      }
      var exts = GLctx.getSupportedExtensions() || [];
      ret = 2 * exts.length;
      break;

    case 33307:
    case 33308:
      if (GL.currentContext.version < 2) {
        GL.recordError(1280);
        return;
      }
      ret = name_ == 33307 ? 3 : 0;
      break;
  }
  if (ret === undefined) {
    var result = GLctx.getParameter(name_);
    switch (typeof result) {
      case "number":
        ret = result;
        break;

      case "boolean":
        ret = result ? 1 : 0;
        break;

      case "string":
        GL.recordError(1280);
        return;

      case "object":
        if (result === null) {
          switch (name_) {
            case 34964:
            case 35725:
            case 34965:
            case 36006:
            case 36007:
            case 32873:
            case 34229:
            case 36662:
            case 36663:
            case 35053:
            case 35055:
            case 36010:
            case 35097:
            case 35869:
            case 32874:
            case 36389:
            case 35983:
            case 35368:
            case 34068:
              {
                ret = 0;
                break;
              }

            default:
              {
                GL.recordError(1280);
                return;
              }
          }
        } else if (result instanceof Float32Array || result instanceof Uint32Array || result instanceof Int32Array || result instanceof Array) {
          for (var i = 0; i < result.length; ++i) {
            switch (type) {
              case 0:
                SAFE_HEAP_STORE(p + i * 4 | 0, result[i] | 0, 4);
                break;

              case 2:
                SAFE_HEAP_STORE_D(p + i * 4 | 0, Math.fround(result[i]), 4);
                break;

              case 4:
                SAFE_HEAP_STORE(p + i | 0, (result[i] ? 1 : 0) | 0, 1);
                break;
            }
          }
          return;
        } else {
          try {
            ret = result.name | 0;
          } catch (e) {
            GL.recordError(1280);
            err("GL_INVALID_ENUM in glGet" + type + "v: Unknown object returned from WebGL getParameter(" + name_ + ")! (error: " + e + ")");
            return;
          }
        }
        break;

      default:
        GL.recordError(1280);
        err("GL_INVALID_ENUM in glGet" + type + "v: Native code calling glGet" + type + "v(" + name_ + ") and it returns " + result + " of type " + typeof result + "!");
        return;
    }
  }
  switch (type) {
    case 1:
      writeI53ToI64(p, ret);
      break;

    case 0:
      SAFE_HEAP_STORE(p | 0, ret | 0, 4);
      break;

    case 2:
      SAFE_HEAP_STORE_D(p | 0, Math.fround(ret), 4);
      break;

    case 4:
      SAFE_HEAP_STORE(p | 0, (ret ? 1 : 0) | 0, 1);
      break;
  }
}

function _glGetBooleanv(name_, p) {
  emscriptenWebGLGet(name_, p, 4);
}

function _glGetError() {
  var error = GLctx.getError() || GL.lastError;
  GL.lastError = 0;
  return error;
}

function _glGetIntegerv(name_, p) {
  emscriptenWebGLGet(name_, p, 0);
}

function _glGetProgramInfoLog(program, maxLength, length, infoLog) {
  var log = GLctx.getProgramInfoLog(GL.programs[program]);
  if (log === null) log = "(unknown error)";
  var numBytesWrittenExclNull = maxLength > 0 && infoLog ? stringToAddress(log, infoLog, maxLength) : 0;
  if (length) SAFE_HEAP_STORE(length | 0, numBytesWrittenExclNull | 0, 4);
}

function _glGetProgramiv(program, pname, p) {
  if (!p) {
    GL.recordError(1281);
    return;
  }
  if (program >= GL.counter) {
    GL.recordError(1281);
    return;
  }
  program = GL.programs[program];
  if (pname == 35716) {
    var log = GLctx.getProgramInfoLog(program);
    if (log === null) log = "(unknown error)";
    SAFE_HEAP_STORE(p | 0, log.length + 1 | 0, 4);
  } else if (pname == 35719) {
    if (!program.maxUniformLength) {
      for (var i = 0; i < GLctx.getProgramParameter(program, 35718); ++i) {
        program.maxUniformLength = Math.max(program.maxUniformLength, GLctx.getActiveUniform(program, i).name.length + 1);
      }
    }
    SAFE_HEAP_STORE(p | 0, program.maxUniformLength | 0, 4);
  } else if (pname == 35722) {
    if (!program.maxAttributeLength) {
      for (var i = 0; i < GLctx.getProgramParameter(program, 35721); ++i) {
        program.maxAttributeLength = Math.max(program.maxAttributeLength, GLctx.getActiveAttrib(program, i).name.length + 1);
      }
    }
    SAFE_HEAP_STORE(p | 0, program.maxAttributeLength | 0, 4);
  } else if (pname == 35381) {
    if (!program.maxUniformBlockNameLength) {
      for (var i = 0; i < GLctx.getProgramParameter(program, 35382); ++i) {
        program.maxUniformBlockNameLength = Math.max(program.maxUniformBlockNameLength, GLctx.getActiveUniformBlockName(program, i).length + 1);
      }
    }
    SAFE_HEAP_STORE(p | 0, program.maxUniformBlockNameLength | 0, 4);
  } else {
    SAFE_HEAP_STORE(p | 0, GLctx.getProgramParameter(program, pname) | 0, 4);
  }
}

function _glGetShaderInfoLog(shader, maxLength, length, infoLog) {
  var log = GLctx.getShaderInfoLog(GL.shaders[shader]);
  if (log === null) log = "(unknown error)";
  var numBytesWrittenExclNull = maxLength > 0 && infoLog ? stringToAddress(log, infoLog, maxLength) : 0;
  if (length) SAFE_HEAP_STORE(length | 0, numBytesWrittenExclNull | 0, 4);
}

function _glGetShaderSource(shader, bufSize, length, source) {
  var result = GLctx.getShaderSource(GL.shaders[shader]);
  if (!result) return;
  var numBytesWrittenExclNull = bufSize > 0 && source ? stringToAddress(result, source, bufSize) : 0;
  if (length) SAFE_HEAP_STORE(length | 0, numBytesWrittenExclNull | 0, 4);
}

function _glGetShaderiv(shader, pname, p) {
  if (!p) {
    GL.recordError(1281);
    return;
  }
  if (pname == 35716) {
    var log = GLctx.getShaderInfoLog(GL.shaders[shader]);
    if (log === null) log = "(unknown error)";
    var logLength = log ? log.length + 1 : 0;
    SAFE_HEAP_STORE(p | 0, logLength | 0, 4);
  } else if (pname == 35720) {
    var source = GLctx.getShaderSource(GL.shaders[shader]);
    var sourceLength = source ? source.length + 1 : 0;
    SAFE_HEAP_STORE(p | 0, sourceLength | 0, 4);
  } else {
    SAFE_HEAP_STORE(p | 0, GLctx.getShaderParameter(GL.shaders[shader], pname) | 0, 4);
  }
}

function _glGetString(name_) {
  var ret = GL.stringCache[name_];
  if (!ret) {
    switch (name_) {
      case 7939:
        var exts = GLctx.getSupportedExtensions() || [];
        exts = exts.concat(exts.map(function (e) {
          return "GL_" + e;
        }));
        ret = stringToAddress(exts.join(" "));
        break;

      case 7936:
      case 7937:
      case 37445:
      case 37446:
        var s = GLctx.getParameter(name_);
        if (!s) {
          GL.recordError(1280);
        }
        ret = s && stringToAddress(s);
        break;

      case 7938:
        var glVersion = GLctx.getParameter(7938);
        if (true) glVersion = "OpenGL ES 3.0 (" + glVersion + ")"; else {
          glVersion = "OpenGL ES 2.0 (" + glVersion + ")";
        }
        ret = stringToAddress(glVersion);
        break;

      case 35724:
        var glslVersion = GLctx.getParameter(35724);
        var ver_re = /^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/;
        var ver_num = glslVersion.match(ver_re);
        if (ver_num !== null) {
          if (ver_num[1].length == 3) ver_num[1] = ver_num[1] + "0";
          glslVersion = "OpenGL ES GLSL ES " + ver_num[1] + " (" + glslVersion + ")";
        }
        ret = stringToAddress(glslVersion);
        break;

      default:
        GL.recordError(1280);
    }
    GL.stringCache[name_] = ret;
  }
  return ret;
}

function _glGetStringi(name, index) {
  if (GL.currentContext.version < 2) {
    GL.recordError(1282);
    return 0;
  }
  var stringiCache = GL.stringiCache[name];
  if (stringiCache) {
    if (index < 0 || index >= stringiCache.length) {
      GL.recordError(1281);
      return 0;
    }
    return stringiCache[index];
  }
  switch (name) {
    case 7939:
      var exts = GLctx.getSupportedExtensions() || [];
      exts = exts.concat(exts.map(function (e) {
        return "GL_" + e;
      }));
      exts = exts.map(function (e) {
        return stringToAddress(e);
      });
      stringiCache = GL.stringiCache[name] = exts;
      if (index < 0 || index >= stringiCache.length) {
        GL.recordError(1281);
        return 0;
      }
      return stringiCache[index];

    default:
      GL.recordError(1280);
      return 0;
  }
}

function jstoi_q(str) {
  return parseInt(str);
}

function webglGetLeftBracePos(name) {
  return name.slice(-1) == "]" && name.lastIndexOf("[");
}

function webglPrepareUniformLocationsBeforeFirstUse(program) {
  var uniformLocsById = program.uniformLocsById, uniformSizeAndIdsByName = program.uniformSizeAndIdsByName, i, j;
  if (!uniformLocsById) {
    program.uniformLocsById = uniformLocsById = {};
    program.uniformArrayNamesById = {};
    for (i = 0; i < GLctx.getProgramParameter(program, 35718); ++i) {
      var u = GLctx.getActiveUniform(program, i);
      var nm = u.name;
      var sz = u.size;
      var lb = webglGetLeftBracePos(nm);
      var arrayName = lb > 0 ? nm.slice(0, lb) : nm;
      var id = program.uniformIdCounter;
      program.uniformIdCounter += sz;
      uniformSizeAndIdsByName[arrayName] = [sz, id];
      for (j = 0; j < sz; ++j) {
        uniformLocsById[id] = j;
        program.uniformArrayNamesById[id++] = arrayName;
      }
    }
  }
}

function _glGetUniformLocation(program, name) {
  name = addressToString(name);
  if (program = GL.programs[program]) {
    webglPrepareUniformLocationsBeforeFirstUse(program);
    var uniformLocsById = program.uniformLocsById;
    var arrayIndex = 0;
    var uniformBaseName = name;
    var leftBrace = webglGetLeftBracePos(name);
    if (leftBrace > 0) {
      arrayIndex = jstoi_q(name.slice(leftBrace + 1)) >>> 0;
      uniformBaseName = name.slice(0, leftBrace);
    }
    var sizeAndId = program.uniformSizeAndIdsByName[uniformBaseName];
    if (sizeAndId && arrayIndex < sizeAndId[0]) {
      arrayIndex += sizeAndId[1];
      if (uniformLocsById[arrayIndex] = uniformLocsById[arrayIndex] || GLctx.getUniformLocation(program, name)) {
        return arrayIndex;
      }
    }
  } else {
    GL.recordError(1281);
  }
  return -1;
}

function _glLineWidth(x0) {
  GLctx["lineWidth"](x0);
}

function _glLinkProgram(program) {
  program = GL.programs[program];
  GLctx.linkProgram(program);
  program.uniformLocsById = 0;
  program.uniformSizeAndIdsByName = {};
}

function _glLoadIdentity() {
  throw "Legacy GL function (glLoadIdentity) called. If you want legacy GL emulation, you need to compile with -s LEGACY_GL_EMULATION=1 to enable legacy GL emulation.";
}

function _glLoadMatrixf() {
  debugger;
}

function _glMapBufferRange() {
  debugger;
}

function _glMatrixMode() {
  throw "Legacy GL function (glMatrixMode) called. If you want legacy GL emulation, you need to compile with -s LEGACY_GL_EMULATION=1 to enable legacy GL emulation.";
}

function _glOrtho() {
  debugger;
}

function _glPolygonMode() { }

function _glPolygonOffset(x0, x1) {
  GLctx["polygonOffset"](x0, x1);
}

function _glPopMatrix() {
  debugger;
}

function _glPushMatrix() {
  debugger;
}

function _glReadBuffer(x0) {
  GLctx["readBuffer"](x0);
}

function computeUnpackAlignedImageSize(width, height, sizePerPixel, alignment) {
  function roundedToNextMultipleOf(x, y) {
    return x + y - 1 & -y;
  }
  var plainRowSize = width * sizePerPixel;
  var alignedRowSize = roundedToNextMultipleOf(plainRowSize, alignment);
  return height * alignedRowSize;
}

function __colorChannelsInGlTextureFormat(format) {
  var colorChannels = {
    5: 3,
    6: 4,
    8: 2,
    29502: 3,
    29504: 4,
    26917: 2,
    26918: 2,
    29846: 3,
    29847: 4
  };
  return colorChannels[format - 6402] || 1;
}

function heapObjectForWebGLType(type) {
  type -= 5120;
  if (type == 0) return HEAP8;
  if (type == 1) return HEAPU8;
  if (type == 2) return HEAP16;
  if (type == 4) return HEAP32;
  if (type == 6) return HEAPF32;
  if (type == 5 || type == 28922 || type == 28520 || type == 30779 || type == 30782) return HEAPU32;
  return HEAPU16;
}

function heapAccessShiftForWebGLHeap(heap) {
  return 31 - Math.clz32(heap.BYTES_PER_ELEMENT);
}

function emscriptenWebGLGetTexPixelData(type, format, width, height, pixels, internalFormat) {
  var heap = heapObjectForWebGLType(type);
  var shift = heapAccessShiftForWebGLHeap(heap);
  var byteSize = 1 << shift;
  var sizePerPixel = __colorChannelsInGlTextureFormat(format) * byteSize;
  var bytes = computeUnpackAlignedImageSize(width, height, sizePerPixel, GL.unpackAlignment);
  return heap.subarray(pixels >> shift, pixels + bytes >> shift);
}

function _glReadPixels(x, y, width, height, format, type, pixels) {
  if (true) {
    if (GLctx.currentPixelPackBufferBinding) {
      GLctx.readPixels(x, y, width, height, format, type, pixels);
    } else {
      var heap = heapObjectForWebGLType(type);
      GLctx.readPixels(x, y, width, height, format, type, heap, pixels >> heapAccessShiftForWebGLHeap(heap));
    }
    return;
  }
  var pixelData = emscriptenWebGLGetTexPixelData(type, format, width, height, pixels, format);
  if (!pixelData) {
    GL.recordError(1280);
    return;
  }
  GLctx.readPixels(x, y, width, height, format, type, pixelData);
}

function _glRenderbufferStorage(x0, x1, x2, x3) {
  GLctx["renderbufferStorage"](x0, x1, x2, x3);
}

function _glRenderbufferStorageMultisample(x0, x1, x2, x3, x4) {
  GLctx["renderbufferStorageMultisample"](x0, x1, x2, x3, x4);
}

function _glScissor(x0, x1, x2, x3) {
  GLctx["scissor"](x0, x1, x2, x3);
}

function _glShadeModel() {
  debugger;
}

function _glShaderSource(shader, count, string, length) {
  var source = GL.getSource(shader, count, string, length);
  GLctx.shaderSource(GL.shaders[shader], source);
}

function _glStencilFunc(x0, x1, x2) {
  GLctx["stencilFunc"](x0, x1, x2);
}

function _glStencilMask(x0) {
  GLctx["stencilMask"](x0);
}

function _glStencilOp(x0, x1, x2) {
  GLctx["stencilOp"](x0, x1, x2);
}

function _glTexCoord2f() {
  debugger;
}

function _glTexCoord2fv() {
  debugger;
}

function _glTexCoordPointer() {
  debugger;
}

function _glTexEnvf() {
  debugger;
}

function _glTexImage2D(target, level, internalFormat, width, height, border, format, type, pixels) {
  /*
  //if(width <= 2 || height <= 2) return
  if(EMGL.previousImage && EMGL.previousImage.complete) {
    width = EMGL.previousImage.width
    height = EMGL.previousImage.height
    GLctx.texImage2D(target, level, internalFormat, width, height, border, format, type, pixels ? EMGL.previousImage : null);
    return
  } else if (typeof EMGL.texFiles[EMGL.previousTex] != 'undefined'
    && EMGL.texFiles[EMGL.previousTex][1]) {
    console.log('whoops')
    return
  }
  */

  if (true) {
    if (GLctx.currentPixelUnpackBufferBinding) {
      GLctx.texImage2D(target, level, internalFormat, width, height, border, format, type, pixels);
    } else if (pixels) {
      var heap = heapObjectForWebGLType(type);
      GLctx.texImage2D(target, level, internalFormat, width, height, border, format, type, heap, pixels >> heapAccessShiftForWebGLHeap(heap));
    } else {
      GLctx.texImage2D(target, level, internalFormat, width, height, border, format, type, null);
    }
    return;
  }
  GLctx.texImage2D(target, level, internalFormat, width, height, border, format, type, pixels ? emscriptenWebGLGetTexPixelData(type, format, width, height, pixels, internalFormat) : null);
}

function _glTexParameterf(x0, x1, x2) {
  GLctx["texParameterf"](x0, x1, x2);
}

function _glTexParameteri(x0, x1, x2) {
  GLctx["texParameteri"](x0, x1, x2);
}

function _glTexSubImage2D(target, level, xoffset, yoffset, width, height, format, type, pixels) {
  if (EMGL.previousImage) {
    if (width <= 2 || height <= 2) return
    //width = EMGL.previousImage.width
    //height = EMGL.previousImage.height
    GLctx.texSubImage2D(target, level, xoffset, yoffset, width, height, format, type, EMGL.previousImage);
    return
  } else if (typeof EMGL.texFiles[EMGL.previousTex] != 'undefined'
    && EMGL.texFiles[EMGL.previousTex][1]) {
    //debugger
    return
  }

  if (true) {
    if (GLctx.currentPixelUnpackBufferBinding) {
      GLctx.texSubImage2D(target, level, xoffset, yoffset, width, height, format, type, pixels);
    } else if (pixels) {
      var heap = heapObjectForWebGLType(type);
      GLctx.texSubImage2D(target, level, xoffset, yoffset, width, height, format, type, heap, pixels >> heapAccessShiftForWebGLHeap(heap));
    } else {
      GLctx.texSubImage2D(target, level, xoffset, yoffset, width, height, format, type, null);
    }
    return;
  }

  var pixelData = null;
  if (pixels) pixelData = emscriptenWebGLGetTexPixelData(type, format, width, height, pixels, 0);
  GLctx.texSubImage2D(target, level, xoffset, yoffset, width, height, format, type, pixelData);
}

function _glTranslatef() {
  debugger;
}

function webglGetUniformLocation(location) {
  var p = GLctx.currentProgram;
  if (p) {
    var webglLoc = p.uniformLocsById[location];
    if (typeof webglLoc === "number") {
      p.uniformLocsById[location] = webglLoc = GLctx.getUniformLocation(p, p.uniformArrayNamesById[location] + (webglLoc > 0 ? "[" + webglLoc + "]" : ""));
    }
    return webglLoc;
  } else {
    GL.recordError(1282);
  }
}

function _glUniform1f(location, v0) {
  GLctx.uniform1f(webglGetUniformLocation(location), v0);
}

function _glUniform1fv(location, count, value) {
  GLctx.uniform1fv(webglGetUniformLocation(location), HEAPF32, value >> 2, count);
}

function _glUniform1i(location, v0) {
  GLctx.uniform1i(webglGetUniformLocation(location), v0);
}

function _glUniform2f(location, v0, v1) {
  GLctx.uniform2f(webglGetUniformLocation(location), v0, v1);
}

function _glUniform3f(location, v0, v1, v2) {
  GLctx.uniform3f(webglGetUniformLocation(location), v0, v1, v2);
}

function _glUniform4f(location, v0, v1, v2, v3) {
  GLctx.uniform4f(webglGetUniformLocation(location), v0, v1, v2, v3);
}

function _glUniformMatrix4fv(location, count, transpose, value) {
  GLctx.uniformMatrix4fv(webglGetUniformLocation(location), !!transpose, HEAPF32, value >> 2, count * 16);
}

function _glUnmapBuffer() {
  debugger;
}

function _glUseProgram(program) {
  program = GL.programs[program];
  GLctx.useProgram(program);
  GLctx.currentProgram = program;
}

function _glValidateProgram(program) {
  GLctx.validateProgram(GL.programs[program]);
}

function _glVertex2f() {
  debugger;
}

function _glVertex3f() {
  debugger;
}

function _glVertex3fv() {
  debugger;
}

function _glVertexAttribPointer(index, size, type, normalized, stride, ptr) {
  var cb = GL.currentContext.clientBuffers[index];
  if (!GLctx.currentArrayBufferBinding) {
    cb.size = size;
    cb.type = type;
    cb.normalized = normalized;
    cb.stride = stride;
    cb.ptr = ptr;
    cb.clientside = true;
    cb.vertexAttribPointerAdaptor = function (index, size, type, normalized, stride, ptr) {
      this.vertexAttribPointer(index, size, type, normalized, stride, ptr);
    };
    return;
  }
  cb.clientside = false;
  GLctx.vertexAttribPointer(index, size, type, !!normalized, stride, ptr);
}

function _glVertexPointer() {
  throw "Legacy GL function (glVertexPointer) called. If you want legacy GL emulation, you need to compile with -s LEGACY_GL_EMULATION=1 to enable legacy GL emulation.";
}

function _glViewport(x0, x1, x2, x3) {
  GLctx["viewport"](x0, x1, x2, x3);
}

function _setTempRet0(val) {
  setTempRet0(val);
}

function GL_GetDrawableSize(width, height) {
  // THIS IS THE NEW VID_RESTART FAST HACK
  INPUT.updateWidth = width
  INPUT.updateHeight = height
  HEAP32[width>>2] = GL.canvas.width
  HEAP32[height>>2] = GL.canvas.height
}

var GLctx;

var EMGL = {
  previousName: '',
  previousImage: null,
  previousTex: 0,
  texFiles: {},
  GL_GetDrawableSize: GL_GetDrawableSize,
  GL_GetProcAddress: function () { },
  R_LoadPNG: R_LoadPNG,
  R_LoadJPG: R_LoadJPG,
  "getTempRet0": _getTempRet0,
  "glActiveTexture": _glActiveTexture,
  "glAlphaFunc": _glAlphaFunc,
  "glArrayElement": _glArrayElement,
  "glAttachShader": _glAttachShader,
  "glBegin": _glBegin,
  "glBindAttribLocation": _glBindAttribLocation,
  "glBindBuffer": _glBindBuffer,
  "glBindFramebuffer": _glBindFramebuffer,
  "glBindRenderbuffer": _glBindRenderbuffer,
  "glBindTexture": _glBindTexture,
  "glBindVertexArray": _glBindVertexArray,
  "glBlendFunc": _glBlendFunc,
  "glBlitFramebuffer": _glBlitFramebuffer,
  "glBufferData": _glBufferData,
  "glBufferSubData": _glBufferSubData,
  "glCheckFramebufferStatus": _glCheckFramebufferStatus,
  "glClear": _glClear,
  "glClearColor": _glClearColor,
  "glClearDepth": _glClearDepth,
  "glClearStencil": _glClearStencil,
  "glClipPlane": _glClipPlane,
  "glColor3f": _glColor3f,
  "glColor4f": _glColor4f,
  "glColor4ubv": _glColor4ubv,
  "glColorMask": _glColorMask,
  "glColorPointer": _glColorPointer,
  "glCompileShader": _glCompileShader,
  "glCompressedTexImage2D": _glCompressedTexImage2D,
  "glCompressedTexSubImage2D": _glCompressedTexSubImage2D,
  "glCopyTexSubImage2D": _glCopyTexSubImage2D,
  "glCreateProgram": _glCreateProgram,
  "glCreateShader": _glCreateShader,
  "glCullFace": _glCullFace,
  "glDeleteBuffers": _glDeleteBuffers,
  "glDeleteFramebuffers": _glDeleteFramebuffers,
  "glDeleteProgram": _glDeleteProgram,
  "glDeleteRenderbuffers": _glDeleteRenderbuffers,
  "glDeleteShader": _glDeleteShader,
  "glDeleteTextures": _glDeleteTextures,
  "glDeleteVertexArrays": _glDeleteVertexArrays,
  "glDepthFunc": _glDepthFunc,
  "glDepthMask": _glDepthMask,
  "glDepthRange": _glDepthRange,
  "glDetachShader": _glDetachShader,
  "glDisable": _glDisable,
  "glDisableClientState": _glDisableClientState,
  "glDisableVertexAttribArray": _glDisableVertexAttribArray,
  "glDrawArrays": _glDrawArrays,
  "glDrawBuffer": _glDrawBuffer,
  "glDrawBuffers": _glDrawBuffers,
  "glDrawElements": _glDrawElements,
  "glEnable": _glEnable,
  "glEnableClientState": _glEnableClientState,
  "glEnableVertexAttribArray": _glEnableVertexAttribArray,
  "glEnd": _glEnd,
  "glFinish": _glFinish,
  "glFlush": _glFlush,
  "glFramebufferRenderbuffer": _glFramebufferRenderbuffer,
  "glFramebufferTexture2D": _glFramebufferTexture2D,
  "glFrustum": _glFrustum,
  "glGenBuffers": _glGenBuffers,
  "glGenFramebuffers": _glGenFramebuffers,
  "glGenRenderbuffers": _glGenRenderbuffers,
  "glGenTextures": _glGenTextures,
  "glGenVertexArrays": _glGenVertexArrays,
  "glGenerateMipmap": _glGenerateMipmap,
  "glGetActiveUniform": _glGetActiveUniform,
  "glGetBooleanv": _glGetBooleanv,
  "glGetError": _glGetError,
  "glGetIntegerv": _glGetIntegerv,
  "glGetProgramInfoLog": _glGetProgramInfoLog,
  "glGetProgramiv": _glGetProgramiv,
  "glGetShaderInfoLog": _glGetShaderInfoLog,
  "glGetShaderSource": _glGetShaderSource,
  "glGetShaderiv": _glGetShaderiv,
  "glGetString": _glGetString,
  "glGetStringi": _glGetStringi,
  "glGetUniformLocation": _glGetUniformLocation,
  "glLineWidth": _glLineWidth,
  "glLinkProgram": _glLinkProgram,
  "glLoadIdentity": _glLoadIdentity,
  "glLoadMatrixf": _glLoadMatrixf,
  "glMapBufferRange": _glMapBufferRange,
  "glMatrixMode": _glMatrixMode,
  "glOrtho": _glOrtho,
  "glPolygonMode": _glPolygonMode,
  "glPolygonOffset": _glPolygonOffset,
  "glPopMatrix": _glPopMatrix,
  "glPushMatrix": _glPushMatrix,
  "glReadBuffer": _glReadBuffer,
  "glReadPixels": _glReadPixels,
  "glRenderbufferStorage": _glRenderbufferStorage,
  "glRenderbufferStorageMultisample": _glRenderbufferStorageMultisample,
  "glScissor": _glScissor,
  "glShadeModel": _glShadeModel,
  "glShaderSource": _glShaderSource,
  "glStencilFunc": _glStencilFunc,
  "glStencilMask": _glStencilMask,
  "glStencilOp": _glStencilOp,
  "glTexCoord2f": _glTexCoord2f,
  "glTexCoord2fv": _glTexCoord2fv,
  "glTexCoordPointer": _glTexCoordPointer,
  "glTexEnvf": _glTexEnvf,
  "glTexImage2D": _glTexImage2D,
  "glTexParameterf": _glTexParameterf,
  "glTexParameteri": _glTexParameteri,
  "glTexSubImage2D": _glTexSubImage2D,
  "glTranslatef": _glTranslatef,
  "glUniform1f": _glUniform1f,
  "glUniform1fv": _glUniform1fv,
  "glUniform1i": _glUniform1i,
  "glUniform2f": _glUniform2f,
  "glUniform3f": _glUniform3f,
  "glUniform4f": _glUniform4f,
  "glUniformMatrix4fv": _glUniformMatrix4fv,
  "glUnmapBuffer": _glUnmapBuffer,
  "glUseProgram": _glUseProgram,
  "glValidateProgram": _glValidateProgram,
  "glVertex2f": _glVertex2f,
  "glVertex3f": _glVertex3f,
  "glVertex3fv": _glVertex3fv,
  "glVertexAttribPointer": _glVertexAttribPointer,
  "glVertexPointer": _glVertexPointer,
  "glViewport": _glViewport,
}

// ZERO DEPENDENCY BARE-BONES JAVASCRIPT FILE-SYSTEM FOR 
//   POSIX WEB-ASSEMBLY

const VFS_NOW = 3
const ST_FILE = 8
const ST_DIR = 4

// 438 = 0o666
const FS_DEFAULT = (6 << 3) + (6 << 6) + (6) 
const FS_FILE = (ST_FILE << 12) + FS_DEFAULT
const FS_DIR = (ST_DIR << 12) + FS_DEFAULT

// (33206 & (((1 << 3) - 1) << 3) >> 3 = 6
const S_IRGRP = ((1 << 3) - 1) << 3
const S_IRUSR = ((1 << 3) - 1) << 6
const S_IROTH = ((1 << 3) - 1) << 0

const ENOENT = 9968
const R_OK = 1
const W_OK = 2
const X_OK = 3
const F_OK = 4


function Sys_Mkdir(filename) {
  let fileStr = addressToString(filename)
  let localName = fileStr
  if(localName.startsWith('/base')
    || localName.startsWith('/home'))
    localName = localName.substring('/base'.length)
  if(localName[0] == '/')
    localName = localName.substring(1)
	// check if parent directory has been created, TODO: POSIX errno?
	let parentDirectory = localName.substring(0, localName.lastIndexOf('/'))
	if(parentDirectory && !FS.virtual[parentDirectory]) {
		throw new Error('ENOENT')
	}
  FS.virtual[localName] = {
    timestamp: new Date(),
    mode: FS_DIR,
  }
  // async to filesystem
  // does it REALLY matter if it makes it? wont it just redownload?
  Sys_notify(FS.virtual[localName], localName)
}

function Sys_GetFileStats( filename, size, mtime, ctime ) {
  let fileStr = addressToString(filename)
  let localName = fileStr
  if(localName.startsWith('/base')
    || localName.startsWith('/home'))
    localName = localName.substring('/base'.length)
  if(localName[0] == '/')
    localName = localName.substring(1)
  if(typeof FS.virtual[localName] != 'undefined') {
    HEAPU32[size >> 2] = (FS.virtual[localName].contents || []).length
    HEAPU32[mtime >> 2] = FS.virtual[localName].timestamp.getTime()
    HEAPU32[ctime >> 2] = FS.virtual[localName].timestamp.getTime()
    return 1
  } else {
    HEAPU32[size >> 2] = 0
    HEAPU32[mtime >> 2] = 0
    HEAPU32[ctime >> 2] = 0
    return 0
  }
}

function Sys_FOpen(filename, mode) {
  // now we don't have to do the indexing crap here because it's built into the engine already
  let fileStr = addressToString(filename)
  let modeStr = addressToString(mode)
  let localName = fileStr
  if(localName.startsWith('/base')
    || localName.startsWith('/home'))
    localName = localName.substring('/base'.length)
  if(localName[0] == '/')
    localName = localName.substring(1)

  let createFP = function () {
    FS.filePointer++
    FS.pointers[FS.filePointer] = [
      0, // seek/tell
      modeStr,
      FS.virtual[localName],
      localName,
			FS.filePointer
    ]
    // DO THIS ON OPEN SO WE CAN CHANGE ICONS
    Sys_notify(FS.virtual[localName], localName)
    return FS.filePointer // not zero
  }

  // check if parent directory has been created, TODO: POSIX errno?
  let parentDirectory = localName.substring(0, localName.lastIndexOf('/'))
  // TODO: check mode?
  if(typeof FS.virtual[localName] != 'undefined'
    && (FS.virtual[localName].mode >> 12) == ST_FILE) {
    // open the file successfully
    return createFP()
  } else 
  // only write+ files after they have all been loaded, so we don't accidentally overwrite
  if (/* !FS.isSyncing && */ modeStr.includes('w')
    && (typeof FS.virtual[parentDirectory] != 'undefined'
    // allow writing to root path
    || parentDirectory.length == 0)
  ) {
    // create the file for write because the parent directory exists
    FS.virtual[localName] = {
      timestamp: new Date(),
      mode: FS_FILE,
      contents: new Uint8Array(0)
    }
    return createFP()
  } else {
    return 0 // POSIX
  }
}

function Sys_FTell(pointer) {
  if(typeof FS.pointers[pointer] == 'undefined') {
    throw new Error('File IO Error') // TODO: POSIX
  }
  return FS.pointers[pointer][0]
}

function Sys_FSeek(pointer, position, mode) {
  if(typeof FS.pointers[pointer] == 'undefined') {
    throw new Error('File IO Error') // TODO: POSIX
  }
  if(mode == 0 /* SEEK_SET */) {
    FS.pointers[pointer][0] = position
  } else if (mode == 1 /* SEEK_CUR */) {
    FS.pointers[pointer][0] += position
  } else if (mode == 2 /* SEEK_END */) {
    FS.pointers[pointer][0] = FS.pointers[pointer][2].contents.length + position
  } else {
    return -1 // POSIX?
  }
  return 0
}

function Sys_FClose(pointer) {
  if(typeof FS.pointers[pointer] == 'undefined') {
    throw new Error('File IO Error') // TODO: POSIX
  }
  Sys_notify(FS.pointers[pointer][2], FS.pointers[pointer][3], FS.pointers[pointer][4])
  FS.pointers[pointer] = void 0
}


function Sys_FFlush(pointer) {
  if(typeof FS.pointers[pointer] == 'undefined') {
    throw new Error('File IO Error') // TODO: POSIX
  }
  Sys_notify(FS.pointers[pointer][2], FS.pointers[pointer][3], FS.pointers[pointer][4])
}

function Sys_Remove(file) {
  let fileStr = addressToString(file)
  let localName = fileStr
  if(localName.startsWith('/base')
    || localName.startsWith('/home'))
    localName = localName.substring('/base'.length)
  if(localName[0] == '/')
    localName = localName.substring(1)
  if(typeof FS.virtual[localName] != 'undefined') {
    delete FS.virtual[localName]
    // remove from IDB
    Sys_notify(false, localName)
  }
}

function Sys_Rename(src, dest) {
  let strStr = addressToString(src)
  let srcName = strStr
  if(srcName.startsWith('/base')
    || srcName.startsWith('/home'))
    srcName = srcName.substring('/base'.length)
  if(srcName[0] == '/')
    srcName = srcName.substring(1)
  let fileStr = addressToString(dest)
  let destName = fileStr
  if(destName.startsWith('/base')
    || destName.startsWith('/home'))
    destName = destName.substring('/base'.length)
  if(destName[0] == '/')
    destName = destName.substring(1)
  if(typeof window.updateFilelist != 'undefined') {
    Sys_notify(FS.virtual[srcName], srcName)
    Sys_notify(FS.virtual[destName], destName)
  }
}


function Sys_ListFiles (directory, extension, filter, numfiles, wantsubs) {
  let files = {
    'default.cfg': {
      mtime: 0,
      size: 1024,
    }
  }
  // TODO: don't combine /home and /base?
  let localName = addressToString(directory)
  if(localName.startsWith('/base'))
    localName = localName.substring('/base'.length)
  if(localName[0] == '/')
    localName = localName.substring(1)
  let extensionStr = addressToString(extension)
  //let matches = []
  // can't use utility because FS_* frees and moves stuff around
  let matches = Object.keys(FS.virtual).filter(function (key) { 
    return (!extensionStr || key.endsWith(extensionStr) 
      || (extensionStr == '/' && (FS.virtual[key].mode >> 12) == ST_DIR))
      // TODO: match directory 
      && (!localName || key.startsWith(localName))
      && (!wantsubs || (FS.virtual[key].mode >> 12) == ST_DIR)
  })
  // return a copy!
	let listInMemory
	if(typeof Z_Malloc != 'undefined') {
		listInMemory = Z_Malloc( ( matches.length + 1 ) * 4 )
	} else {
		listInMemory = malloc( ( matches.length + 1 ) * 4 )
	}
  for(let i = 0; i < matches.length; i++) {
    let relativeName = matches[i]
    if(localName && relativeName.startsWith(localName)) {
      relativeName = relativeName.substring(localName.length)
    }
    if(relativeName[0] == '/')
      relativeName = relativeName.substring(1)
    //matches.push(files[i])
    HEAPU32[(listInMemory + i*4)>>2] = FS_CopyString(stringToAddress(relativeName));
  }
  HEAPU32[(listInMemory>>2)+matches.length] = 0
  HEAPU32[numfiles >> 2] = matches.length
  // skip address-list because for-loop counts \0 with numfiles
  return listInMemory
}


function Sys_stat(filename) {
	let fileStr = addressToString(filename)
	let localName = fileStr
	if(localName.startsWith('/base')
		|| localName.startsWith('/home'))
		localName = localName.substring('/base'.length)
	if(localName[0] == '/')
		localName = localName.substring(1)
	//if(typeof FS.virtual[localName] != 'undefined') {
	//  localName = localName
	//}
	if(typeof FS.virtual[localName] != 'undefined') {
		HEAPU32[(stat >> 2)+0] = FS.virtual[localName].mode
		HEAPU32[(stat >> 2)+1] = (FS.virtual[localName].contents || []).length
		HEAPU32[(stat >> 2)+2] = FS.virtual[localName].timestamp.getTime()
		HEAPU32[(stat >> 2)+3] = FS.virtual[localName].timestamp.getTime()
		HEAPU32[(stat >> 2)+4] = FS.virtual[localName].timestamp.getTime()
		return 0
	} else {
		HEAPU32[(stat >> 2)+0] = 0
		HEAPU32[(stat >> 2)+1] = 0
		HEAPU32[(stat >> 2)+2] = 0
		HEAPU32[(stat >> 2)+3] = 0
		HEAPU32[(stat >> 2)+4] = 0
		return 1
	}
}


function Sys_Mkdirp(pathname) {
	let localName = addressToString(pathname)
	try {
		if(localName.startsWith('/base')
			|| localName.startsWith('/home'))
			localName = localName.substring('/base'.length)
		if(localName[0] == '/')
			localName = localName.substring(1)
		Sys_Mkdir(pathname, FS_DIR);
	} catch (e) {
		// make the subdirectory and then retry
		if (e.message === 'ENOENT') {
			let parentDirectory = localName.substring(0, localName.lastIndexOf('/'))
			if(!parentDirectory) {
				throw e
			}
			Sys_Mkdirp(stringToAddress(parentDirectory));
			Sys_Mkdir(pathname);
			return;
		}

		// if we got any other error, let's see if the directory already exists
		if(Sys_stat(pathname)) {
			throw e
		}
	}
}

function Sys_FRead(bufferAddress, byteSize, count, pointer) {
  if(typeof FS.pointers[pointer] == 'undefined') {
    throw new Error('File IO Error') // TODO: POSIX
  }
  let i = 0
  for(; i < count * byteSize; i++ ) {
    if(FS.pointers[pointer][0] >= FS.pointers[pointer][2].contents.length) {
      break
    }
    HEAPU8[bufferAddress + i] = FS.pointers[pointer][2].contents[FS.pointers[pointer][0]]
    FS.pointers[pointer][0]++
  }

  return (i - (i % byteSize)) / byteSize
}


function Sys_fgetc(fp) {
	let c = stringToAddress('DEADBEEF')
	HEAPU32[c>>2] = 0
	if(Sys_FRead(c, 1, 1, fp) != 1) {
		return -1
	}
	return HEAPU32[c>>2]
}


function Sys_fgets(buf, size, fp) {
  if(typeof FS.pointers[fp] == 'undefined') {
    throw new Error('File IO Error') // TODO: POSIX
  }
	let dataView = FS.pointers[fp][2].contents
			.slice(FS.pointers[fp][0], FS.pointers[fp][0] + size)
	let line = dataView.indexOf('\n'.charCodeAt(0))
	let length
	if(line <= 1) {  // <- TODO: WTF IS THIS?
		//length = Sys_FRead(buf, 1, size - 1, fp)
		length = Sys_FRead(buf, 1, size, fp)
		//HEAPU8[buf + length] = 0 // FILL THE BUFFER COMPLETELY?
		return length ? buf : 0
	} else {
		length = Sys_FRead(buf, 1, line + 1, fp) // DO I INCLUDE THE \n IN THE BUFFER?
		HEAPU8[buf + length] = 0
		return length ? buf : 0
	}
}

function Sys_FWrite(buf, size, nmemb, pointer) {
	// something wrong with breaking inside `node -e`
	//   maybe someone at Google saw my stream because they made it even worse.
	//   now it shows Nodejs system code all the time instead of only when I 
	//   click on it like resharper. LOL!
  if(typeof FS.pointers[pointer] == 'undefined') {
    throw new Error('File IO Error') // TODO: POSIX
  }
  let tmp = FS.pointers[pointer][2].contents
  if(FS.pointers[pointer][0] + size * nmemb > FS.pointers[pointer][2].contents.length) {
    tmp = new Uint8Array(FS.pointers[pointer][2].contents.length + size * nmemb);
    tmp.set(FS.pointers[pointer][2].contents, 0);
  }
  tmp.set(HEAPU8.slice(buf, buf + size * nmemb), FS.pointers[pointer][0]);
  FS.pointers[pointer][0] += size * nmemb
	// WE DON'T NEED FILE LOCKING BECAUSE IT'S SINGLE THREADED IN NATURE
	//   IT WOULD BE IMPOSSIBLE FOR ANOTHER PROCESS TO COME ALONG AND
	//   OVERWRITE OUR TMP CONTENTS MID FUNCTION.
  FS.pointers[pointer][2].contents = tmp
  Sys_notify(FS.pointers[pointer][2], FS.pointers[pointer][3], FS.pointers[pointer][4])
  return nmemb // k==size*nmemb ? nmemb : k/size;
}


// WHY ADD THIS INSTEAD OF FWRITE DIRECTLY? 
//   TO MAKE IT EASIER TO DROP INFRONT OF WASI BS.
function Sys_fputs(s, f) {
	let l = addressToString(s).length;
	return Sys_FWrite(s, 1, l, f) == l ? 0 : -1;
}

function Sys_fputc(c, f) {
	let s = stringToAddress(String.fromCharCode(c))
	return Sys_FWrite(s, 1, 1, f) == 1 ? 0 : -1;
}

function Sys_fprintf(fp, fmt, args) {
	let formatted = stringToAddress('DEADBEEF')
	let length = sprintf(formatted, fmt, args)
	if(length < 1 || !HEAPU32[formatted>>2]) {
		formatted = fmt
	}
	Sys_fputs(formatted, fp)
}

function Sys_access(filename, i) {
	if(i != F_OK) {
		throw new Error('Not implemented!')
	}
	let fileStr = addressToString(filename)
	let localName = fileStr
	if(localName.startsWith('/base')
		|| localName.startsWith('/home'))
		localName = localName.substring('/base'.length)
	if(localName[0] == '/')
		localName = localName.substring(1)

	if(FS.virtual[localName]) {
		return 0
	} else {
		if(errno) {
			HEAPU32[errno>>2] = ENOENT
		}
		return 1
	}
}


function Sys_feof(fp) {
  if(typeof FS.pointers[fp] == 'undefined') {
    return 1
  }
	if(FS.pointers[fp][0] >= FS.pointers[fp][2].contents.length) {
		return 1
	}
	return 0
}

const FS = {
	ST_FILE: ST_FILE,
	ST_DIR: ST_DIR,
  FS_FILE: FS_FILE,
  FS_DIR: FS_DIR,
  ENOENT: ENOENT,
  modeToStr: ['r', 'w', 'rw'],
  pointers: {},
  filePointer: 0,
  virtual: {}, // temporarily store items as they go in and out of memory
  Sys_ListFiles: Sys_ListFiles,
  Sys_FTell: Sys_FTell,
  Sys_FSeek: Sys_FSeek,
  Sys_FClose: Sys_FClose,
  Sys_FWrite: Sys_FWrite,
  Sys_FFlush: Sys_FFlush,
  Sys_FRead: Sys_FRead,
  Sys_FOpen: Sys_FOpen,
  Sys_Remove: Sys_Remove,
  Sys_Rename: Sys_Rename,
  Sys_GetFileStats: Sys_GetFileStats,
  Sys_Mkdir: Sys_Mkdir,
  Sys_Mkdirp: Sys_Mkdirp,
	Sys_FOpen: Sys_FOpen,
	Sys_Mkdir: Sys_Mkdir,
	Sys_fgets: Sys_fgets,
	Sys_fputs: Sys_fputs,
	Sys_vfprintf: Sys_fprintf,
	Sys_fprintf: Sys_fprintf,
	Sys_fputc: Sys_fputc,
	Sys_putc: Sys_fputc,
	Sys_getc: Sys_fgetc,
	Sys_fgetc: Sys_fgetc,
	Sys_feof: Sys_feof,
	Sys_access: Sys_access,
}

var WASI_ESUCCESS = 0;
var WASI_EBADF = 8;
var WASI_EINVAL = 28;
var WASI_ENOSYS = 52;

var WASI_STDOUT_FILENO = 1;
var WASI_STDERR_FILENO = 2;

function getModuleMemoryDataView() {
	// call this any time you'll be reading or writing to a module's memory 
	// the returned DataView tends to be dissaociated with the module's memory buffer at the will of the WebAssembly engine 
	// cache the returned DataView at your own peril!!

	return new DataView(Module.memory.buffer);
}

function fd_prestat_get(fd, bufPtr) {
	return WASI_EBADF;
}

function fd_prestat_dir_name(fd, pathPtr, pathLen) {
	debugger
	return WASI_EINVAL;
}

function environ_sizes_get(environCount, environBufSize) {
	var view = getModuleMemoryDataView();

	view.setUint32(environCount, 0, !0);
	view.setUint32(environBufSize, 0, !0);

	return WASI_ESUCCESS;
}

function environ_get(environ, environBuf) {
	debugger
	return WASI_ESUCCESS;
}

function args_sizes_get(argc, argvBufSize) {
	debugger
	var view = getModuleMemoryDataView();

	view.setUint32(argc, 0, !0);
	view.setUint32(argvBufSize, 0, !0);

	return WASI_ESUCCESS;
}

function args_get(argv, argvBuf) {
	debugger
	return WASI_ESUCCESS;
}

function fd_fdstat_get(fd, bufPtr) {
	var view = getModuleMemoryDataView();

	view.setUint8(bufPtr, fd);
	view.setUint16(bufPtr + 2, 0, !0);
	view.setUint16(bufPtr + 4, 0, !0);

	function setBigUint64(byteOffset, value, littleEndian) {

			var lowWord = value;
			var highWord = 0;

			view.setUint32(littleEndian ? 0 : 4, lowWord, littleEndian);
			view.setUint32(littleEndian ? 4 : 0, highWord, littleEndian);
	}

	setBigUint64(bufPtr + 8, 0, !0);
	setBigUint64(bufPtr + 8 + 8, 0, !0);

	return WASI_ESUCCESS;
}



// TODO: THIS MIGHT BE A MORE COMPREHENSIVE WRITE FUNCTION
//   AND THE FS.VIRTUAL CODE COULD BE INSERTED AT THE BOTTOM
function fd_write(fd, iovs, iovsLen, nwritten) {
	var view = getModuleMemoryDataView();
	var written = 0;
	var bufferBytes = [];                   

	function getiovs(iovs, iovsLen) {
		// iovs* -> [iov, iov, ...]
		// __wasi_ciovec_t {
		//   void* buf,
		//   size_t buf_len,
		// }
		var buffers = Array.from({ length: iovsLen }, function (_, i) {
			var ptr = iovs + i * 8;
			var buf = view.getUint32(ptr, !0);
			var bufLen = view.getUint32(ptr + 4, !0);

			return new Uint8Array(Module.memory.buffer, buf, bufLen);
		});

		return buffers;
	}

	var buffers = getiovs(iovs, iovsLen);
	function writev(iov) {
		for (var b = 0; b < iov.byteLength; b++) {
			bufferBytes.push(iov[b]);
		}

		written += b;
	}

	buffers.forEach(writev);
	let newMessage = stringToAddress(String.fromCharCode.apply(null, bufferBytes))
	debugger
	if (fd === WASI_STDOUT_FILENO)
		Sys_FWrite(newMessage, 1, bufferBytes.length, HEAPU32[stdout>>2])
	else if (fd === WASI_STDERR_FILENO) 
		Sys_FWrite(newMessage, 1, bufferBytes.length, HEAPU32[stderr>>2])
	else {
		debugger
		throw new Error('wtf')
	}
	view.setUint32(nwritten, written, !0);

	return WASI_ESUCCESS;
}

function poll_oneoff(sin, sout, nsubscriptions, nevents) {
	debugger
	return WASI_ENOSYS;
}

function proc_exit(rval) {
	debugger
	return WASI_ENOSYS;
}

function fd_seek(fd, offset, whence, newOffsetPtr) {
	debugger
}

function fd_close(fd) {
	return WASI_ENOSYS;
}



const FILED = {

	//setModuleInstance : setModuleInstance,
	environ_sizes_get : environ_sizes_get,
	args_sizes_get : args_sizes_get,
	fd_fdstat_set_flags: function () { debugger },
	fd_prestat_get : fd_prestat_get,
	fd_fdstat_get : fd_fdstat_get,
	fd_write : fd_write,
	fd_prestat_dir_name : fd_prestat_dir_name,
	environ_get : environ_get,
	args_get : args_get,
	poll_oneoff : poll_oneoff,
	proc_exit : proc_exit,
	fd_close : fd_close,
	fd_seek : fd_seek,
	fd_advise: function () { debugger },
	fd_allocate: function () { debugger },
	fd_datasync: function () { debugger },
	fd_read: function () { debugger },
	path_open: function () { debugger },
	fd_fdstat_set_rights: function () { debugger },
	fd_filestat_get: function () { debugger },
	fd_filestat_set_size: function () { debugger },
	fd_filestat_set_times: function () { debugger },
	fd_pread: function () { debugger },
	fd_pwrite: function () { debugger },
	fd_readdir: function () { debugger },
	fd_renumber: function () { debugger },
	fd_sync: function () { debugger },
	fd_tell: function () { debugger },
	path_create_directory: function () { debugger },
	path_filestat_get: function () { debugger },
	path_filestat_set_times: function () { debugger },
	path_link: function () { debugger },
	path_readlink: function () { debugger },
	path_remove_directory: function () { debugger },
	path_rename: function () { debugger },
	path_symlink: function () { debugger },
	path_unlink_file: function () { debugger },
	proc_raise: function () { debugger },
	sched_yield: function () { debugger },
	random_get: function () { debugger },
	sock_recv: function () { debugger },
	sock_send: function () { debugger },
	sock_shutdown: function () { debugger },
}

Object.assign(FS, FILED)

if (typeof module != 'undefined') {
  // SOMETHING SOMETHING fs.writeFile
  module.exports = FS
}
const DB_STORE_NAME = 'FILE_DATA';

function openDatabase(noWait) {
  if(FS.database) {
    return Promise.resolve(FS.database)
  }
  if(!FS.database && (!FS.open || Date.now() - FS.openTime > 3000)) {
    FS.openTime = Date.now()
    // TODO: make a separate /home store for content to upload submissions to NPM-style packaging system
    // TODO: synchronize saved game states and config files out of /home database
    // TODO: on Native /base is manually configured, manually downloaded, /home is auto-downloaded
    //   on web /base is auto-downloaded and home is manually configured/drag-drop, fix this
    return new Promise(function (resolve) {
      FS.open = indexedDB.open('/base', 22)
      FS.open.onsuccess = function (evt) {
        FS.database = evt.target.result
        resolve(FS.database)
        //if(!Array.from(FS.database.objectStoreNames).includes(DB_STORE_NAME)) {
        //  FS.database.createObjectStore(DB_STORE_NAME)
        //}
      }
      FS.open.onupgradeneeded = function () {
        let fileStore = FS.open.result.createObjectStore(DB_STORE_NAME)
        if (!fileStore.indexNames.contains('timestamp')) {
          fileStore.createIndex('timestamp', 'timestamp', { unique: false });
        }
      }
      FS.open.onerror = function (error) {
        console.error(error)
        resolve(error)
      }
    })
  } else if (!noWait) {
    return new Promise(function (resolve) { 
      let count = 0
      let interval
      interval = setInterval(function () {
        if(FS.database || count == 10) {
          clearInterval(interval)
          openDatabase(true).then(resolve)
        } else {
          count++
        }
      }, 300)
    })
  } else {
    throw new Error('no database')
  }
}


function loadEntry(cursor) {
  if(!cursor) {
    return resolve()
  }
  if(cursor.key.endsWith('default.cfg')) {
    FS.hadDefault = cursor.key
  }
  // already exists on filesystem, 
  //   it must have come with page
  if(FS.virtual[cursor.key]
    && FS.virtual[cursor.key].timestamp 
      > cursor.value.timestamp) {
    // embedded file is newer, start with that
    return cursor.continue()
  }
  FS.virtual[cursor.key] = {
    timestamp: cursor.value.timestamp,
    mode: cursor.value.mode,
    contents: cursor.value.contents
  }
  return cursor.continue()
}



function readAll() {
  let startTime = Date.now()
  FS.isSyncing = 1
  // FIX FOR "QKEY could not open" ERROR
  FS.virtual['home'] = {
    timestamp: new Date(),
    mode: FS_DIR,
  }
  if(typeof window.fs_loading != 'undefined') {
    HEAPU32[fs_loading >> 2] = FS.isSyncing
  }
  console.log('sync started at ', new Date())
  readPreFS()
  return openDatabase().then(function(db) {

    let transaction = db.transaction([DB_STORE_NAME], 'readonly')
    let objStore = transaction.objectStore(DB_STORE_NAME)
    let tranCursor = objStore.openCursor()
    return new Promise(function (resolve) {
      tranCursor.onsuccess = function (event) {
        let cursor = event.target.result
        if(!cursor) {
          return resolve()
        }
        loadEntry(cursor)
      }
      tranCursor.onerror = function (error) {
        console.error(error)
        resolve(error)
      }
    }).then(function () { 
      transaction.commit()
      let tookTime = Date.now() - startTime
      console.log('sync completed', new Date())
      console.log('sync took', 
        (tookTime > 60 * 1000 ? (Math.floor(tookTime / 1000 / 60) + ' minutes, ') : '')
        + Math.floor(tookTime / 1000) % 60 + ' seconds, '
        + (tookTime % 1000) + ' milliseconds')
      FS.isSyncing = 0
      if(typeof window.fs_loading != 'undefined') {
        HEAPU32[fs_loading >> 2] = 0
        if(FS.hadDefault) {
          HEAPU32[com_fullyInitialized >> 2] = 1
          setTimeout(function () {
            Sys_FileReady(stringToAddress('default.cfg'), stringToAddress(FS.hadDefault))
          }, 100)
        }
      }
      if(typeof window.updateFilelist != 'undefined') {
        updateFilelist()
      }
    })
  })
  .catch(function (e) {
    console.log(e)
    debugger
  })

}



function readStore(key) {
  return openDatabase()
  .then(function (db) {
    let transaction = db.transaction([DB_STORE_NAME], 'readwrite');
    let objStore = transaction.objectStore(DB_STORE_NAME);
    return new Promise(function (resolve) {
      let tranCursor = objStore.get(key)
      tranCursor.onsuccess = function (event) {
        resolve(event.target.result)
      }
      tranCursor.onerror = function (error) {
        console.error(error)
        resolve(error)
      }
      transaction.commit()
    })
  })
  .catch(function (e) {})
}

function writeStore(value, key) {
  return openDatabase()
  .then(function (db) {
    let transaction = db.transaction([DB_STORE_NAME], 'readwrite');
    let objStore = transaction.objectStore(DB_STORE_NAME);
    return new Promise(function (resolve) {
      let storeValue  
      if(value === false) {
        storeValue = objStore.delete(key)
      } else {
        storeValue = objStore.put(value, key)
      }
      storeValue.onsuccess = function () {}
      transaction.oncomplete = function (event) {
        resolve(event.target.result)
        //FS.database.close()
        //FS.database = null
        //FS.open = null
      }
      storeValue.onerror = function (error) {
        console.error(error, value, key)
      }
      transaction.commit()
    })
  })
  .catch(function (e) {})
}

function _base64ToArrayBuffer(base64) {
	var binary_string = window.atob(base64);
	var len = binary_string.length;
	var bytes = new Uint8Array(len);
	for (var i = 0; i < len; i++) {
			bytes[i] = binary_string.charCodeAt(i);
	}
	return bytes;
}

// I JUST REALIZED WHY CHROME DEBUGGER WILL PERPUTUALLY HAVE A HARDER
//   AND HARD TIME WITH WEB APPS LIKE THIS. I SCREWED UP IT'S ABILITY TO OPTIMIZE GRAPH.

function readPreFS() {
	// TODO: offline download so it saves binary to IndexedDB
	if(typeof window.preFS == 'undefined') {
		throw new Error('No preFS, must load in correct order!')
	}
	let preloadedPaths = Object.keys(window.preFS)
	for(let i = 0; i < preloadedPaths.length; i++) {
		if(preloadedPaths[i].endsWith('_timestamp')) {
			continue
		}
		let newFiletime = window.preFS[
				preloadedPaths[i] + '_timestamp'] 
						|| new Date()
		FS.virtual[preloadedPaths[i]] = {
			timestamp: newFiletime,
			mode: FS_FILE,
			contents: _base64ToArrayBuffer(window.preFS[preloadedPaths[i]])
		}
	}

}


if(typeof module != 'undefined') {
  module.exports = {
    readPreFS,
    _base64ToArrayBuffer,
    
  }
}
function GLimp_StartDriverAndSetMode(mode, modeFS, fullscreen, fallback) {
  // TODO: multiple windows like a DVR?
  //   what kind of game needs two screens for one player to switch back and forth?
  GL.canvas.setAttribute('width', GL.canvas.clientWidth)
  GL.canvas.setAttribute('height', GL.canvas.clientHeight)
  if(window.flipper) {
    window.flipper.remove()
  }

  // TODO: keep track of multiple?
  let webGLContextAttributes = {
    failIfMajorPerformanceCaveat: true,
    alpha: false,
    stencil: true,
    premultipliedAlpha: false,
  }

  GL.context = (!fallback)
    ? GL.canvas.getContext('webgl2', webGLContextAttributes)
    : (GL.canvas.getContext('webgl', webGLContextAttributes)
      || GL.canvas.getContext('experimental-webgl'))

  GL.context.viewport(0, 0, GL.canvas.width, GL.canvas.height);
  if (!GL.context) return 2
  if(typeof GL != 'undefined') {
    INPUT.handle = GL.registerContext(GL.context, webGLContextAttributes)
    GL.makeContextCurrent(INPUT.handle)
  }

  // set the window to do the grabbing, when ungrabbing this doesn't really matter
  if(!HEAPU32[first_click>>2]) {
    //GL.canvas.requestPointerLock();
  } else {
    SDL_ShowCursor()
  }

  return 0 // no error
}

function updateVideoCmd () {
  GL.canvas.setAttribute('width', GL.canvas.clientWidth)
  GL.canvas.setAttribute('height', GL.canvas.clientHeight)
  // THIS IS THE NEW VID_RESTART FAST HACK
  HEAP32[INPUT.updateWidth>>2] = GL.canvas.width
  HEAP32[INPUT.updateHeight>>2] = GL.canvas.height
  Cvar_Set(stringToAddress('r_customWidth'), stringToAddress('' + GL.canvas.clientWidth))
  Cvar_Set(stringToAddress('r_customHeight'), stringToAddress('' + GL.canvas.clientHeight))
  // TODO: make this an SDL/Sys_Queue event to `vid_restart fast` on native
  Cbuf_AddText(stringToAddress('vid_restart fast\n'));
}

function resizeViewport () {
  // ignore if the canvas hasn't yet initialized
  if(!GL.canvas) return
  GL.canvas.removeAttribute('width')
  GL.canvas.removeAttribute('height')
  if (INPUT.resizeDelay) clearTimeout(INPUT.resizeDelay)
  INPUT.resizeDelay = setTimeout(updateVideoCmd, 100);
}


//typedef enum {
  // bk001129 - make sure SE_NONE is zero
const	SE_NONE = 0	// evTime is still valid
const	SE_KEY = 1		// evValue is a key code, evValue2 is the down flag
const	SE_FINGER_DOWN = 2
const	SE_FINGER_UP = 3
const	SE_CHAR = 4	// evValue is an ascii char
const	SE_MOUSE = 5	// evValue and evValue2 are relative signed x / y moves
const	SE_JOYSTICK_AXIS = 6	// evValue is an axis number and evValue2 is the current state (-127 to 127)
const	SE_CONSOLE = 7	// evPtr is a char*
const	SE_MOUSE_ABS = 8
//#ifdef USE_DRAGDROP
const	SE_DROPBEGIN = 9
const	SE_DROPCOMPLETE = 10
const	SE_DROPFILE = 11
const	SE_DROPTEXT = 12
const	SE_MAX = 13

//#endif
//} sysEventType_t;


const KEYCATCH_CONSOLE = 0x0001
const KEYCATCH_UI      =  0x0002
const KEYCATCH_MESSAGE =  0x0004
const KEYCATCH_CGAME   =  0x0008

function InputPushFocusEvent (evt) {
  if(evt.type == 'pointerlockchange') {
    HEAP32[gw_active >> 2] = (document.pointerLockElement === GL.canvas)
    if(!HEAP32[gw_active >> 2] && !(Key_GetCatcher() & KEYCATCH_CONSOLE)) {
      Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['ESCAPE'], true, 0, null );
      Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['ESCAPE'], false, 0, null );
    }
    return
  }
  if (document.visibilityState != 'visible' || evt.type == 'blur') {
    Key_ClearStates();
    HEAP32[gw_active >> 2] = false;
  } else {
    Key_ClearStates();
    HEAP32[gw_active >> 2] = true;
    HEAP32[gw_minimized >> 2] = false;
  }
}


function InputPushMovedEvent (evt) {
  if (evt.toElement === null && evt.relatedTarget === null) {
    HEAPU32[first_click>>2] = 1
    if(SYS.frameInterval) {
      clearInterval(SYS.frameInterval)
    }
    SYS.frameInterval = setInterval(Sys_Frame, 1000.0 / INPUT.fpsUnfocused)
    return
  }

  let notFullscreen = !document.isFullScreen
    && !document.webkitIsFullScreen
    && !document.mozIsFullScreen

  if(HEAP32[gw_active >> 2] && notFullscreen) {
    Cvar_SetIntegerValue( stringToAddress('vid_xpos'), 
      window.screenX || window.screenLeft );
    Cvar_SetIntegerValue( stringToAddress('vid_ypos'), 
      window.screenY || window.screenTop );
  }
}

/*
document.querySelector('element').bind('copy', function(event) {
  var selectedText = window.getSelection().toString(); 
  selectedText = selectedText.replace(/\u200B/g, '');

  clipboardData = event.clipboardData || window.clipboardData || event.originalEvent.clipboardData;
  clipboardData.setData('text/html', selectedText);

  event.preventDefault();
});
*/

function captureClipBoard () {
  // this is the same method I used on StudySauce
  var text = document.createElement('TEXTAREA')
  text.style.opacity = 0
  text.style.height = '1px'
  text.style.width = '1px'
  text.style.display = 'block'
  text.style.zIndex = 1000
  text.style.position = 'absolute'
  document.body.appendChild(text)
  text.focus()
  setTimeout(function () {
    INPUT.paste = text.value
    document.body.focus()
    if(INPUT.field) {
      INPUT.paste.split('').forEach(function (k) {
        Field_CharEvent(INPUT.field, k.charCodeAt(0))
      })
      INPUT.paste = ''
      INPUT.field = 0
      text.remove()
    }
  }, 100)
}

function checkPasteEvent (evt) {
  // mac support
  if(evt.key == 'Meta') INPUT.superKey = evt.type == 'keydown'
  if(INPUT.superKey && (evt.key == 'v' || evt.key == 'V')) {
    if(INPUT.superKey && (evt.type == 'keypress' || evt.type == 'keydown')) {
      captureClipBoard()
    }
  }
}

function InputPushKeyEvent(evt) {
  if (INPUT.editorActive) {
    return true
  }


  if(evt.keyCode === 8) {
    INPUT.cancelBackspace = true;
    setTimeout(function () { INPUT.cancelBackspace = false }, 100)
  }
  if(evt.keyCode === 27) {
    INPUT.cancelBackspace = true;
    SDL_ShowCursor()
    HEAP32[gw_active >> 2] = false
  }

  checkPasteEvent(evt)
  
  if(evt.type == 'keydown') {
    if ( evt.repeat && Key_GetCatcher() == 0 )
      return

    if ( evt.keyCode == 13 /* ENTER */ && evt.altKey ) {
      let notFullscreen = !document.isFullScreen
      && !document.webkitIsFullScreen
      && !document.mozIsFullScreen
      Cvar_SetIntegerValue( stringToAddress('r_fullscreen'), notFullscreen ? 1 : 0 );
      Cbuf_AddText( stringToAddress('vid_restart\n') );
      return
    }

    if ( evt.keyCode == 8 /* BAKCSPACE */ )
      Sys_QueEvent( Sys_Milliseconds(), SE_CHAR, 8, 0, 0, null );
  }

  if( evt.ctrlKey && evt.keyCode >= 'a'.charCodeAt(0) && evt.keyCode <= 'z'.charCodeAt(0) ) {
    Sys_QueEvent( Sys_Milliseconds(), SE_CHAR, evt.charCode-('a'.charCodeAt(0))+1, 0, 0, null );
  } else

  if(evt.keyCode >= 65 && evt.keyCode <= 90) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['a'] + (evt.keyCode - 65), evt.type == 'keydown', 0, null );
  } else 

  if(evt.shiftKey && evt.keyCode >= 65 && evt.keyCode <= 90) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['a'] + (evt.keyCode - 65 + 97), evt.type == 'keydown', 0, null );
  } else 

  if(evt.keyCode >= 48 && evt.keyCode <= 57) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['0'] + (evt.keyCode - 48), evt.type == 'keydown', 0, null );
  } else 

  if(evt.shiftKey && evt.keyCode >= 48 && evt.keyCode <= 57) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings[' '] + (evt.keyCode - 48), evt.type == 'keydown', 0, null );
  } else 

  if(evt.keyCode == 37) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['LEFTARROW'], evt.type == 'keydown', 0, null );
  } else 

  if(evt.keyCode == 38) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['UPARROW'], evt.type == 'keydown', 0, null );
  } else 

  if(evt.keyCode == 39) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['RIGHTARROW'], evt.type == 'keydown', 0, null );
  } else 

  if(evt.keyCode == 40) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['DOWNARROW'], evt.type == 'keydown', 0, null );
  } else 

  if(evt.keyCode == 16) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['SHIFT'], evt.type == 'keydown', 0, null );
  }

  if(evt.keyCode == 32) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['SPACE'], evt.type == 'keydown', 0, null );
  }

  if(evt.keyCode == 13) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['ENTER'], evt.type == 'keydown', 0, null );
  } else 

  if(evt.keyCode == 27) {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
      INPUT.keystrings['ESCAPE'], evt.type == 'keydown', 0, null );
  }
}

function InputPushTextEvent (evt) {
  if (INPUT.editorActive) {
    return true
  }
  if ( INPUT.consoleKeys.includes(String.fromCharCode(evt.charCode)) )
  {
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, INPUT.keystrings['CONSOLE'], true, 0, null )
    Sys_QueEvent( Sys_Milliseconds(), SE_KEY, INPUT.keystrings['CONSOLE'], false, 0, null )
    setTimeout(function () {
      if(Key_GetCatcher() & KEYCATCH_CONSOLE) {
        SDL_ShowCursor()
        HEAP32[gw_active >> 2] = false
      }
    }, 100)
  } else {
    Sys_QueEvent( Sys_Milliseconds(), SE_CHAR, evt.charCode, 0, 0, null )
  }

}

function getMovementX(event) {
  return event['movementX'] ||
         event['mozMovementX'] ||
         event['webkitMovementX'] ||
         0;
}

function getMovementY(event) {
  return event['movementY'] ||
         event['mozMovementY'] ||
         event['webkitMovementY'] ||
         0;
}

function InputPushWheelEvent(evt) {
  if (INPUT.editorActive) {
    return true
  }
	if( evt.deltaY > 0 ) {
		Sys_QueEvent( Sys_Milliseconds(), SE_KEY, INPUT.keystrings['MWHEELUP'], true, 0, null );
		Sys_QueEvent( Sys_Milliseconds(), SE_KEY, INPUT.keystrings['MWHEELUP'], false, 0, null );
	} else if( evt.deltaY < 0 ) {
		Sys_QueEvent( Sys_Milliseconds(), SE_KEY, INPUT.keystrings['MWHEELDOWN'], true, 0, null );
		Sys_QueEvent( Sys_Milliseconds(), SE_KEY, INPUT.keystrings['MWHEELDOWN'], false, 0, null );
	}
}


function InputPushMouseEvent (evt) {
  let down = evt.type == 'mousedown'

  if(!(Key_GetCatcher() & KEYCATCH_CONSOLE)
    || HEAPU32[first_click>>2]) {
    if (evt.type == 'mousemove') {
      if(Key_GetCatcher() === 0) {
        Sys_QueEvent( Sys_Milliseconds(), SE_MOUSE, 
          getMovementX(evt), getMovementY(evt), 0, null );
      } else {
        Sys_QueEvent( Sys_Milliseconds(), SE_MOUSE_ABS, 
          evt.clientX, evt.clientY, 0, null );
      }
    } else {
      INPUT.editorActive = false
      Sys_QueEvent( Sys_Milliseconds(), SE_KEY, 
        INPUT.keystrings['MOUSE1'] + evt.button, down, 0, null );
    }
  }

  // always unlock on menus because it's position absolute now
  if ( Key_GetCatcher() !== 0 ) {
    if(document.pointerLockElement) {
      SDL_ShowCursor()
      // ruins sound //HEAP32[gw_active >> 2] = false
    }
    return;
  }

  // TODO: fix this maybe?
  //if(!mouseActive || in_joystick->integer) {
  //  return;
  //}
  // Basically, whenever the requestPointerLock() is finally triggered when cgame starts,
  //   the unfocusedFPS is cancelled and changed to real FPS, 200+!
  if(down && document.pointerLockElement != GL.canvas) {
    // TODO: start sound, capture mouse
    HEAP32[gw_active >> 2] = 1
    GL.canvas.requestPointerLock();

    if(SYS.frameInterval) {
      clearInterval(SYS.frameInterval)
    }
    SYS.frameInterval = setInterval(Sys_Frame, 1000.0 / INPUT.fps);
  }
}

function Com_MaxFPSChanged() {
  INPUT.fpsUnfocused = Cvar_VariableIntegerValue(stringToAddress('com_maxfpsUnfocused'));
  INPUT.fps = Cvar_VariableIntegerValue(stringToAddress('com_maxfps'));
  if(SYS.frameInterval) {
    clearInterval(SYS.frameInterval)
  }
  SYS.frameInterval = setInterval(Sys_Frame, 1000.0 / (HEAP32[gw_active >> 2] 
    ? INPUT.fps : INPUT.fpsUnfocused))
}

function Sys_ConsoleInput() {
  let command = window.location.hash
  window.location.hash = ''
  return command.length ? stringToAddress(command) : null
}


const CVAR_ARCHIVE = 0x0001
const CVAR_NODEFAULT = 0x4000
const CVAR_LATCH =  0x0020
const CVAR_ARCHIVE_ND = (CVAR_ARCHIVE|CVAR_NODEFAULT)
const CV_INTEGER = 2


function IN_Init() {

	console.log( '\n------- Input Initialization -------\n' );

  InitNippleJoysticks()

	let in_keyboardDebug = Cvar_Get( stringToAddress('in_keyboardDebug'), stringToAddress('0'), CVAR_ARCHIVE );
	let in_mouse = Cvar_Get( stringToAddress('in_mouse'), stringToAddress('1'), CVAR_ARCHIVE );
	Cvar_CheckRange( in_mouse, stringToAddress('-1'), stringToAddress('1'), CV_INTEGER );

	// ~ and `, as keys and characters
	Cvar_Get( stringToAddress('cl_consoleKeys'), stringToAddress('~ ` \u007e \u0060'), CVAR_ARCHIVE );
  if(!INPUT.consoleKeys) {
    INPUT.consoleKeys = addressToString(Cvar_VariableString(stringToAddress('cl_consoleKeys')))
      .split(' ').map(function (c) {
        return c[0] == '0' && c[1] == 'x' 
          ? String.fromCharCode(parseInt(c.substr(2), 16)) 
          : c
      })
  }

	// TODO: activate text input for text fields
	//SDL_StartTextInput();

  //let in_nograb = Cvar_Get( 'in_nograb', '0', CVAR_ARCHIVE );
  //let r_allowSoftwareGL = Cvar_Get( 'r_allowSoftwareGL', '0', CVAR_LATCH );
  //let r_swapInterval = Cvar_Get( 'r_swapInterval', '0', CVAR_ARCHIVE | CVAR_LATCH );
  //let r_stereoEnabled = Cvar_Get( 'r_stereoEnabled', '0', CVAR_ARCHIVE | CVAR_LATCH );

  for(let i = 0; i < 1024; i++) {
    let name = addressToString(Key_KeynumToString(i))
    if(name.length == 0) continue
    INPUT.keystrings[name] = i
  }
  window.addEventListener('keydown', InputPushKeyEvent, false)
  window.addEventListener('keyup', InputPushKeyEvent, false)
  window.addEventListener('keypress', InputPushTextEvent, false)
  window.addEventListener('mouseout', InputPushMovedEvent, false)
  window.addEventListener('resize', resizeViewport, false)
  window.addEventListener('popstate', CL_ModifyMenu, false)

  GL.canvas.addEventListener('mousemove', InputPushMouseEvent, false)
  GL.canvas.addEventListener('mousedown', InputPushMouseEvent, false)
  GL.canvas.addEventListener('mouseup', InputPushMouseEvent, false)
  
  document.addEventListener('mousewheel', InputPushWheelEvent, {capture: false, passive: true})
  document.addEventListener('visibilitychange', InputPushFocusEvent, false)
  document.addEventListener('focus', InputPushFocusEvent, false)
  document.addEventListener('blur', InputPushFocusEvent, false)
  //document.addEventListener('drop', dropHandler, false)
  //document.addEventListener('dragenter', dragEnterHandler, false)
  //document.addEventListener('dragover', dragOverHandler, false)

  document.addEventListener('pointerlockchange', InputPushFocusEvent, false)

  /*
  let nipple handle touch events
  GL.canvas.addEventListener('touchstart', InputPushTouchEvent, false)
  GL.canvas.addEventListener('touchend', InputPushTouchEvent, false)
  GL.canvas.addEventListener('touchmove', InputPushTouchEvent, false)
  GL.canvas.addEventListener('touchcancel', InputPushTouchEvent, false)
  */

  console.log( '------------------------------------\n' )
}

function InputPushTouchEvent(joystick, id, evt, data) {
  INPUT.cancelBackspace = false
  if(id == 1) {
    if (data.vector && data.vector.y > .4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 87})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 87})
    }
    if (data.vector && data.vector.y < -.4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 83})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 83})
    }
    if (data.vector && data.vector.x < -.4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 65})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 65})
    }
    if (data.vector && data.vector.x > .4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 68})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 68})
    }
  }
  
  if(id == 2) {
    if (data.vector && data.vector.y > .4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 40})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 40})
    }
    if (data.vector && data.vector.y < -.4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 38})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 38})
    }
    if (data.vector && data.vector.x < -.4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 37})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 37})
    }
    if (data.vector && data.vector.x > .4) {
      InputPushKeyEvent({type: 'keydown', repeat: true, keyCode: 39})
    } else {
      InputPushKeyEvent({type: 'keyup', keyCode: 39})
    }
  }

  var w = Module['canvas'].width;
  var h = Module['canvas'].height;
  var dx = data.angle ? (Math.cos(data.angle.radian) * data.distance) : 0
  var dy = data.angle ? (Math.sin(data.angle.radian) * data.distance) : 0
  var x = data.angle ? dx : Math.round(data.position.x)
  var y = data.angle ? dy : Math.round(data.position.y)

  if(evt.type == 'start') {
    if((Key_GetCatcher( ) & KEYCATCH_UI) && id == 3) {
			Sys_QueEvent( Sys_Milliseconds(), SE_MOUSE_ABS, x, y, 0, null );
		}
		Sys_QueEvent( Sys_Milliseconds(), SE_FINGER_DOWN, INPUT.keystrings['MOUSE1'], id, 0, null );
  }

  if(evt.type == 'end') {
    //Sys_QueEvent( in_eventTime+1, SE_KEY, K_MOUSE1, qfalse, 0, null );
		Sys_QueEvent( Sys_Milliseconds(), SE_FINGER_UP, INPUT.keystrings['MOUSE1'], id, 0, null );
		INPUT.touchhats[id][0] = 0;
		INPUT.touchhats[id][1] = 0;
  }

  if(evt.type == 'move') {
    let ratio = GL.canvas.clientWidth / GL.canvas.clientHeight
		INPUT.touchhats[id][0] = (x * ratio) * 50
		INPUT.touchhats[id][1] = y * 50
  }
}

function IN_Frame() {
  let i = 2
  if(i == 2 && !(Key_GetCatcher( ) & KEYCATCH_UI)) {
    if(INPUT.touchhats[i][0] != 0 || INPUT.touchhats[i][1] != 0) {
      Sys_QueEvent( Sys_Milliseconds(), SE_MOUSE, INPUT.touchhats[i][0], 0, 0, null )
    }
  }

}


function InitNippleJoysticks () {
  // TODO: finish joystick settings
  /*
	in_joystick = Cvar_Get( 'in_joystick', '0', CVAR_ARCHIVE );
	in_joystickThreshold = Cvar_Get( 'joy_threshold', '0.15', CVAR_ARCHIVE );
	j_pitch =        Cvar_Get( 'j_pitch',        '0.022', CVAR_ARCHIVE_ND );
	j_yaw =          Cvar_Get( 'j_yaw',          '-0.022', CVAR_ARCHIVE_ND );
	j_forward =      Cvar_Get( 'j_forward',      '-0.25', CVAR_ARCHIVE_ND );
	j_side =         Cvar_Get( 'j_side',         '0.25', CVAR_ARCHIVE_ND );
	j_up =           Cvar_Get( 'j_up',           '0', CVAR_ARCHIVE_ND );

	j_pitch_axis =   Cvar_Get( 'j_pitch_axis',   '3', CVAR_ARCHIVE_ND );
	j_yaw_axis =     Cvar_Get( 'j_yaw_axis',     '2', CVAR_ARCHIVE_ND );
	j_forward_axis = Cvar_Get( 'j_forward_axis', '1', CVAR_ARCHIVE_ND );
	j_side_axis =    Cvar_Get( 'j_side_axis',    '0', CVAR_ARCHIVE_ND );
	j_up_axis =      Cvar_Get( 'j_up_axis',      '4', CVAR_ARCHIVE_ND );

	Cvar_CheckRange( j_pitch_axis,   '0', va('%i',MAX_JOYSTICK_AXIS-1), CV_INTEGER );
	Cvar_CheckRange( j_yaw_axis,     '0', va('%i',MAX_JOYSTICK_AXIS-1), CV_INTEGER );
	Cvar_CheckRange( j_forward_axis, '0', va('%i',MAX_JOYSTICK_AXIS-1), CV_INTEGER );
	Cvar_CheckRange( j_side_axis,    '0', va('%i',MAX_JOYSTICK_AXIS-1), CV_INTEGER );
	Cvar_CheckRange( j_up_axis,      '0', va('%i',MAX_JOYSTICK_AXIS-1), CV_INTEGER );
  */
  let joy = false
  if (navigator && navigator.userAgent && navigator.userAgent.match(/mobile/i)) {
    joy = true
  }
  Cvar_Get(stringToAddress('in_joystick'), stringToAddress(joy ? '1' : '0'), CVAR_ARCHIVE)

  if(!Cvar_VariableIntegerValue(stringToAddress('in_joystick'))) {
    return
  }

  document.body.classList.add('joysticks')
  if(INPUT.joysticks.length > 0) {
    for(var i = 0; i < INPUT.joysticks.length; i++) {
      INPUT.joysticks[i].destroy()
    }
  }
  INPUT.joysticks[0] = nipplejs.create({
    zone: document.getElementById('left-joystick'),
    multitouch: false,
    mode: 'semi',
    size: 100,
    catchDistance: 50,
    maxNumberOfNipples: 1,
    position: {bottom: '50px', left: '50px'},
  })
  INPUT.joysticks[1] = nipplejs.create({
    zone: document.getElementById('right-joystick'),
    multitouch: false,
    mode: 'semi',
    size: 100,
    catchDistance: 50,
    maxNumberOfNipples: 1,
    position: {bottom: '50px', right: '50px'},
  })
  INPUT.joysticks[2] = nipplejs.create({
    dataOnly: true,
    zone: document.body,
    multitouch: false,
    mode: 'dynamic',
    size: 2,
    catchDistance: 2,
    maxNumberOfNipples: 1,
  })
  INPUT.joysticks[0].on('start end move', InputPushTouchEvent.bind(null, INPUT.joysticks[0], 1))
  INPUT.joysticks[1].on('start end move', InputPushTouchEvent.bind(null, INPUT.joysticks[1], 2))
  INPUT.joysticks[2].on('start end move', InputPushTouchEvent.bind(null, INPUT.joysticks[2], 3))
}


function SDL_SetWindowGrab() {
  
}


function SDL_StartTextInput() {

}

function SDL_StopTextInput () {
  SDL.textInput = false;
}

function SDL_ShowCursor() {
  // TODO: some safety stuff?
  if(document.exitPointerLock)
  document.exitPointerLock()
  else if (document.webkitExitPointerLock)
  document.webkitExitPointerLock()
  else if (document.mozExitPointerLock)
  document.mozExitPointerLock()
}

function GLimp_Shutdown(destroy) {
  window.removeEventListener('resize', resizeViewport)
  window.removeEventListener('keydown', InputPushKeyEvent)
  window.removeEventListener('keyup', InputPushKeyEvent)
  window.removeEventListener('keypress', InputPushTextEvent)
  window.removeEventListener('mouseout', InputPushMovedEvent)
  window.removeEventListener('popstate', CL_ModifyMenu)

  document.removeEventListener('mousewheel', InputPushWheelEvent)
  document.removeEventListener('visibilitychange', InputPushFocusEvent)
  document.removeEventListener('focus', InputPushFocusEvent)
  document.removeEventListener('blur', InputPushFocusEvent)
  //document.removeEventListener('drop', dropHandler)
  //document.removeEventListener('dragenter', INPUT.dragEnterHandler)
  //document.removeEventListener('dragover', INPUT.dragOverHandler)
  document.removeEventListener('pointerlockchange', InputPushFocusEvent);

  if (destroy && GL.canvas) {
    GL.canvas.removeEventListener('mousemove', InputPushMouseEvent)
    GL.canvas.removeEventListener('mousedown', InputPushMouseEvent)
    GL.canvas.removeEventListener('mouseup', InputPushMouseEvent)
    GL.deleteContext(INPUT.handle);
    GL.canvas.remove()
    delete GL.canvas
  }
}

var INPUT = {
  editorActive: false,
  touchhats: [[0,0],[0,0],[0,0],[0,0]], // x/y values for nipples
  joysticks: [],
  keystrings: {},
  IN_Init: IN_Init,
  GLimp_Shutdown: GLimp_Shutdown,
  GLimp_StartDriverAndSetMode:GLimp_StartDriverAndSetMode,
  SDL_WasInit: function (device) { return 1; },
  SDL_StartTextInput: SDL_StartTextInput,
  SDL_StopTextInput: SDL_StopTextInput,
  SDL_ShowCursor: SDL_ShowCursor,
  SDL_SetWindowGrab: SDL_SetWindowGrab,
  Com_MaxFPSChanged: Com_MaxFPSChanged,
  Sys_ConsoleInput: Sys_ConsoleInput,
}

const MAX_MSGLEN = 16384


function reverseLookup(ipSlice) {
  let reverseLookup = Object.keys(NET.lookup).filter(function (addr) {
    if(  NET.lookup[addr][0] == ipSlice[0]
      && NET.lookup[addr][1] == ipSlice[1]
      && NET.lookup[addr][2] == ipSlice[2]
      && NET.lookup[addr][3] == ipSlice[3]) {
      return true
    }
    return false
  })
  if(reverseLookup.length) {
    return reverseLookup[0]
  }
  return null
}

function NET_AdrToString(net) {
  if(HEAPU32[net >> 2] == 2) {
    return stringToAddress('localhost')
  } else
  if(HEAPU32[net >> 2] == 4) {
    let lookup = reverseLookup(HEAPU8.slice(net + 4, net + 8))
    if(lookup)
      return stringToAddress(lookup)
    return stringToAddress(
			  HEAPU8[net + 4] + '.'
      + HEAPU8[net + 5] + '.' 
			+ HEAPU8[net + 6] + '.'
      + HEAPU8[net + 7])
  }
}

function Sys_SockaddrToString() {
  // DNS doesn't work in the browser, but UDP works with SOCKS
  //   How complicated to add DNS lookup through SOCK?
  debugger
}

function Sys_StringToAdr(addr, net) {
  let addrStr = addressToString(addr)

//if(addrStr.includes("local.games")) {
//	debugger
//}

  if(addrStr.match(/localhost/i)) {
    HEAPU32[net >> 2] = 2 /* NA_LOOPBACK */
    NET.lookup[addrStr] = [127, 0, 0, 1]
  } else

  if(typeof NET.lookup[addrStr] == 'undefined') {
    if(NET.lookupCount1 == 256) {
      NET.lookupCount2++;
      NET.lookupCount1 = 1;
    } else {
      NET.lookupCount1++;
    }
    HEAPU32[net >> 2] = 4 /* NA_IP */
		let ip = addrStr.match(/^([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)$/)
		if(ip) {
			NET.lookup[addrStr] = [
				parseInt(ip[1]), parseInt(ip[2]), 
				parseInt(ip[3]), parseInt(ip[4]), 
			]
		} else {
			NET.lookup[addrStr] = [10, 0, NET.lookupCount2, NET.lookupCount1]
		}
  } else {
		HEAPU32[net >> 2] = 4 /* NA_IP */
	}
  HEAPU8[net + 4] = NET.lookup[addrStr][0];
  HEAPU8[net + 5] = NET.lookup[addrStr][1];
  HEAPU8[net + 6] = NET.lookup[addrStr][2];
  HEAPU8[net + 7] = NET.lookup[addrStr][3];
  return true
}

function Sys_StringToSockaddr() {
  
}

function Sys_SendPacket(length, data, to) {
  let nameStr = addressToString(to + 10)
    || reverseLookup(HEAPU8.slice(to + 4, to + 8))
	let fullMessage = new Uint8Array(
		4 + (nameStr.length ? (nameStr.length + 2) : 4)
		+ 2 + length)
	fullMessage[0] = 0x00 // 0x05
	fullMessage[1] = 0x00 // 0x01
	fullMessage[2] = 0x00 // reserved
	if(nameStr.length) {
		fullMessage[3] = 0x03
		fullMessage[4] = nameStr.length + 1
		fullMessage.set(nameStr.split('').map(c => c.charCodeAt(0)), 5)
		fullMessage[5 + nameStr.length + 1] = HEAPU8[to + 8]
		fullMessage[5 + nameStr.length + 2] = HEAPU8[to + 9]
	} else {
		fullMessage[3] = 0x01
		fullMessage[4] = HEAPU8[to + 4]
		fullMessage[5] = HEAPU8[to + 5]
		fullMessage[6] = HEAPU8[to + 6]
		fullMessage[7] = HEAPU8[to + 7]
		fullMessage[8] = HEAPU8[to + 8]
		fullMessage[9] = HEAPU8[to + 9]
	}
	fullMessage.set(HEAPU8.slice(data, data + length), fullMessage.length - length);
	if(NET.socket1 && NET.socket1.readyState == WebSocket.OPEN
		&& NET.socket1.fresh >= 3) {
		NET.socket1.send(fullMessage)
	} else {
		NET.socket1Queue.push(fullMessage)
	}
	if(NET.socket2 && NET.socket2.readyState == WebSocket.OPEN
		&& NET.socket2.fresh >= 3) {
		NET.socket2.send(fullMessage)
	} else {
		NET.socket2Queue.push(fullMessage)
	}
}


function NET_Sleep() {
	let sv_running = Cvar_VariableIntegerValue(stringToAddress('sv_running'))
	let sv_dedicated = Cvar_VariableIntegerValue(stringToAddress('dedicated'))
	let count = NET.queue.length
   // alternate buffers so we don't overwrite
  NET.bufferAlternate = !NET.bufferAlternate
  let buffer = NET.buffer + NET.bufferAlternate * NET.bufferLength
	for(let i = 0; i < count; i++) {
		let packet = NET.queue.shift()
		let from = buffer
		let netmsg = buffer + 512
		let data = buffer + 1024
		HEAPU8.fill(0, from, from + 512)
		HEAPU8.fill(0, netmsg, netmsg + 512)
		HEAPU32[(netmsg >> 2) + 3] = data
		HEAPU32[(netmsg >> 2) + 4] = MAX_MSGLEN
		HEAPU32[(netmsg >> 2) + 5] = MAX_MSGLEN * 8
		HEAPU32[(netmsg >> 2) + 6] = packet[2].length
		HEAPU8.set(packet[2], data)
    HEAPU32[from >> 2] = 4 /* NA_IP */
    HEAPU8[from + 8] = packet[1][1]
    HEAPU8[from + 9] = packet[1][0]
		//HEAPU16[(from + 8) >> 1] = (packet[1][0] << 8) + packet[1][1] // port
		if(typeof packet[0] == 'string') {
			Sys_StringToAdr(stringToAddress(packet[0]), from)
		} else {
			HEAPU8.set(packet[0], from + 4)
		}

		if ( sv_running || sv_dedicated )
			Com_RunAndTimeServerPacket( from, netmsg );
		else
			CL_PacketEvent( from, netmsg );
	}
}

function sendHeartbeat(sock) {
  if(sock.readyState == WebSocket.OPEN) {
		sock.fresh = 5
    sock.send(Uint8Array.from([0x05, 0x01, 0x00, 0x00]),
      { binary: true })
  } else if(sock.readyState == WebSocket.CLOSED) {
    NET.reconnect = true
    if(sock == NET.socket1) {
      NET.socket1 = null
    } else {
      NET.socket2 = null
    }
    NET_OpenIP()
  }
}


function sendLegacyEmscriptenConnection(socket, port) {
  socket.send(Uint8Array.from([
    0xFF, 0xFF, 0xFF, 0xFF,
    'p'.charCodeAt(0), 'o'.charCodeAt(0), 'r'.charCodeAt(0), 't'.charCodeAt(0),
    (port & 0xFF00) >> 8, (port & 0xFF)
  ]))

}


function socketOpen(evt) {
	evt.target.fresh = 1
	evt.target.send(Uint8Array.from([
    0x05, 0x01, 0x00, // no password caps?
  ]))
	if(!NET.heartbeat) {
		NET.heartbeat = setInterval(function () {
			sendHeartbeat(NET.socket1)
			NET.heartbeatTimeout = setTimeout(function () {
				sendHeartbeat(NET.socket2)
			}, 8000)
		}, 10000)
	}
  if(!NET.reconnect) return
	sendLegacyEmscriptenConnection(evt.target, NET.net_port)
}


function socketMessage(evt) {
  let message = new Uint8Array(evt.data)
  switch(evt.target.fresh) {
    case 1:
      if(message.length != 2) {
        throw new Error('wtf? this socket no worky')
      } else

      if(message[1] != 0) {
        throw new Error('this socket requires a password, dude')
      }

      // send the UDP associate request
      evt.target.send(Uint8Array.from([
				0x05, 0x03, 0x00, 0x01, 
				0x00, 0x00, 0x00, 0x00, // ip address
				(NET.net_port & 0xFF00) >> 8, (NET.net_port & 0xFF)
			]))
      evt.target.fresh = 2
    break
		case 2:
			if(message.length < 5) {
				throw new Error('denied, can\'t have ports')
			}

			if(message[3] != 1) {
				throw new Error('relay address is not IPV4')
			}

			sendLegacyEmscriptenConnection(evt.target, NET.net_port)
			evt.target.fresh = 3
			/*if(socket == NET.socket1) {
				for(let i = 0, count = NET.socket1Queue.length; i < count; i++) {
					socket.send(NET.socket1Queue.shift())
				}
			} else {
				for(let i = 0, count = NET.socket1Queue.length; i < count; i++) {
					socket.send(NET.socket2Queue.shift())
				}
			}*/

		break
		case 3:
			if(message.length == 10) {
				evt.target.fresh = 4
				break
			}

		case 4:
		case 5:
				// add messages to queue for processing
			if(message.length == 2 || message.length == 10) {
				evt.target.fresh = 4
				return
			}

			let addr, remotePort, msg
			if(message[3] == 1) {
				addr = message.slice(4, 8)
				remotePort = message.slice(8, 10)
				msg = Array.from(message.slice(10))
			} else if (message[3] == 3) {
				addr = Array.from(message.slice(5, 5 + message[4])).map(function (c) {
					return String.fromCharCode(c)
				}).join('')
				remotePort = message.slice(5 + message[4], 5 + message[4] + 2)
				msg = Array.from(message.slice(5 + addr.length + 2))
			} else {
				throw new Error('don\' know what to do mate')
			}
			//if(addr.includes('local.games')) {
			//	debugger
			//}
			NET.queue.push([addr, remotePort, msg])
		break
  }
}

function socketError(evt) {
  NET.reconnect = true
  if(evt.target == NET.socket1) {
    NET.socket1 = null
  }
  if(evt.target == NET.socket2) {
    NET.socket2 = null
  }
}

function NET_OpenIP() {
  NET.net_port = addressToString(Cvar_VariableString(stringToAddress('net_port')))
  NET.net_socksServer = addressToString(Cvar_VariableString(stringToAddress('net_socksServer')))
  NET.net_socksPort = addressToString(Cvar_VariableString(stringToAddress('net_socksPort')))
  if(!NET.buffer) {
    // from NET_Event() + netmsg_t + netadr_t
    NET.bufferLength = MAX_MSGLEN + 8 + 24 + 1024
    NET.bufferAlternate = 0
    NET.buffer = malloc(NET.bufferLength * 3) 
  }
  if(!NET.queue) {
    NET.queue = []
  }
  if(window.location.protocol != 'http:' 
    && window.location.protocol != 'https:') {
    return
  }
  let fullAddress = 'ws' 
    + (window.location.protocol.length > 5 ? 's' : '')
    + '://' + NET.net_socksServer + ':' + NET.net_socksPort
  if(!NET.socket1) {
    NET.socket1 = new WebSocket(fullAddress)
    NET.socket1.binaryType = 'arraybuffer';
    NET.socket1.addEventListener('open', socketOpen, false)
    NET.socket1.addEventListener('message', socketMessage, false)
    NET.socket1.addEventListener('error', socketError, false)
  }
  if(!NET.socket2) {
    NET.socket2 = new WebSocket(fullAddress)
    NET.socket2.binaryType = 'arraybuffer';
    NET.socket2.addEventListener('open', socketOpen, false)
    NET.socket2.addEventListener('message', socketMessage, false)
    NET.socket2.addEventListener('error', socketError, false)
  }
}

function NET_Shutdown() {
  if(NET.heartbeat) {
    clearInterval(NET.heartbeat)
  }
  if(NET.heartbeatTimeout) {
    clearTimeout(NET.heartbeatTimeout)
  }
  if(NET.socket1) {
    NET.socket1.removeEventListener('open', socketOpen)
    NET.socket1.removeEventListener('message', socketMessage)
    NET.socket1.removeEventListener('close', socketError)
    NET.socket1.close()
    NET.socket1 = null
  }
  if(NET.socket2) {
    NET.socket2.removeEventListener('open', socketOpen)
    NET.socket2.removeEventListener('message', socketMessage)
    NET.socket2.removeEventListener('close', socketError)
    NET.socket2.close()
    NET.socket2 = null
  }
}

function Sys_IsLANAddress() {
  
}

function Sys_Offline() {

}

function Sys_NET_MulticastLocal (net, length, data) {
  debugger
  // all this does is use a dedicated server in a service worker
  window.serverWorker.postMessage([
    'net', net, Uint8Array.from(HEAP8.slice(data, data+length))])
}

function Com_DL_HeaderCallback(localName, response) {
  //let type = response.headers.get('Content-Type')
  if (!response || !(response.status >= 200 && response.status < 300 || response.status === 304)) {
    Sys_FileReady(stringToAddress(localName), null) // failed state, not to retry
    //throw new Error('Couldn\'t load ' + response.url + '. Status: ' + (response || {}).statusCode)
    response.body.getReader().cancel()
    // TODO: check for too big files!
    //if(controller)
      //controller.abort()
    return Promise.resolve()
  }
  return Promise.resolve(response.arrayBuffer())
}

function Com_DL_Begin(localName, remoteURL) {
  if(AbortController && !NET.controller) {
    NET.controller = new AbortController()
  }
  remoteURL += (remoteURL.includes('?') ? '&' : '?') + 'time=' + NET.cacheBuster
  return fetch(remoteURL, {
    mode: 'cors',
    responseType: 'arraybuffer',
    credentials: 'omit',
    signal: NET.controller ? NET.controller.signal : null
  })
  // why so many? this catches connection errors
  .catch(function (error) {
    return
  })
  .then(function (request) {
    return Com_DL_HeaderCallback(localName, request)
  })
  // this catches streaming errors, does everybody do this?
  .catch(function (error) {
    return
  })
}

function Com_DL_Perform(nameStr, localName, responseData) {
  NET.downloadCount--
  if(!responseData) {
    // already responded with null data
    return
  }
  // TODO: intercept this information here so we can invalidate the IDBFS storage
  if(localName.includes('version.json')) {
    NET.cacheBuster = Date.parse(JSON.parse(Array.from(new Uint8Array(responseData))
      .map(c => String.fromCharCode(c)).join(''))[0])
  }

  // don't store any index files, redownload every start
  if(nameStr.endsWith('/')) {
    let tempName = nameStr + '.' // yes this is where it always looks for temp files
      + Math.round(Math.random() * 0xFFFFFFFF).toString(16) + '.tmp'
    FS_CreatePath(stringToAddress(nameStr))
    FS.virtual[tempName] = {
      timestamp: new Date(),
      mode: FS_FILE,
      contents: new Uint8Array(responseData)
    }
    Sys_FileReady(stringToAddress(localName), stringToAddress(tempName));
  } else {
    // TODO: JSON.parse
    // save the file in memory for now
    FS_CreatePath(stringToAddress(nameStr))
    FS.virtual[nameStr] = {
      timestamp: new Date(),
      mode: FS_FILE,
      contents: new Uint8Array(responseData)
    }
    // async to filesystem
    // does it REALLY matter if it makes it? wont it just redownload?
    writeStore(FS.virtual[nameStr], nameStr)
    Sys_FileReady(stringToAddress(localName), stringToAddress(nameStr));
  }

}

function CL_Download(cmd, name, auto) {
  if(!FS.database) {
    openDatabase()
  }
  if(NET.downloadCount > 5) {
    return false // delay like cl_curl does
  }

  // TODO: make a utility for Cvar stuff?
  let dlURL = addressToString(Cvar_VariableString(stringToAddress("cl_dlURL")))
  let gamedir = addressToString(FS_GetCurrentGameDir())
  let nameStr = addressToString(name)
  let localName = nameStr
  if(localName[0] == '/')
    localName = localName.substring(1)
  if(localName.startsWith(gamedir))
    localName = localName.substring(gamedir.length)
  if(localName[0] == '/')
    localName = localName.substring(1)

  let remoteURL
  if(dlURL.includes('%1')) {
    remoteURL = dlURL.replace('%1', localName.replace(/\//ig, '%2F'))
  } else {
    remoteURL = dlURL + '/' + localName
  }
  if(remoteURL.includes('.googleapis.com')) {
    if(nameStr.endsWith('/')) {
      remoteURL = 'https://www.googleapis.com/storage/v1/b/'
        + remoteURL.match(/\/b\/(.*?)\/o\//)[1]
        + '/o/?includeTrailingDelimiter=true&maxResults=100&delimiter=%2f&prefix='
        + remoteURL.match(/\/o\/(.*)/)[1]
    } else if (!remoteURL.includes('?')) {
      remoteURL += '?alt=media'
    }
  }
  try {
    NET.downloadCount++
    let newPromise
    if(nameStr.includes('version.json') || nameStr.includes('maps/maplist.json')) {
      newPromise = Promise.resolve()
    } else {
      newPromise = readStore(nameStr)
    }
    newPromise.then(function (result) {
        // always redownload indexes in case the content has changed?
        if(!result || (result.mode >> 12) == ST_DIR) {
          return Com_DL_Begin(localName, remoteURL)
        // bust the caches!
        } else if(result.timestamp.getTime() < NET.cacheBuster) {
          return Com_DL_Begin(localName, remoteURL)
        // valid from disk
        } else {
          return Promise.resolve(result.contents)
        }
      })
      .then(function (responseData) {
        Com_DL_Perform(nameStr, localName, responseData)
      })
  } catch (e) {
    
  }
  if(!nameStr.includes(gamedir)) {
    debugger
    throw new Error('something wrong')
  }

  return true
}

var NET = {
  reconnect: false,
	socket1Queue: [],
	socket2Queue: [],
  lookup: {},
  lookupCount1: 1,
  lookupCount2: 127,
  downloadCount: 0,
  controller: null,
  NET_AdrToString: NET_AdrToString,
  Sys_Offline: Sys_Offline,
  Sys_SockaddrToString: Sys_SockaddrToString,
  Sys_StringToSockaddr: Sys_StringToSockaddr,
  NET_Sleep: NET_Sleep,
  NET_OpenIP: NET_OpenIP,
  Sys_StringToAdr: Sys_StringToAdr,
  Sys_SendPacket: Sys_SendPacket,
  Sys_IsLANAddress: Sys_IsLANAddress,
  Sys_NET_MulticastLocal: Sys_NET_MulticastLocal,
  CL_Download: CL_Download,

}


if (typeof module != 'undefined') {
  // SOMETHING SOMETHING fs.writeFile
  module.exports = NET
}

/*
function get_string(memory, addr) {
	let buffer = new Uint8Array(memory.buffer, addr, memory.buffer.byteLength - addr);
	let term = buffer.indexOf(0);

	return new TextDecoder().decode(buffer.subarray(0, term));
}
*/


function addressToString(addr, length) {
	let newString = ''
	if(!addr) return newString
	if(!length) length = 1024
	for(let i = 0; i < length; i++) {
		if(HEAPU8[addr + i] == 0) {
			break;
		}
		newString += String.fromCharCode(HEAPU8[addr + i])
	}

	return newString
}

function stringToAddress(str, addr) {
  if(!STD.sharedMemory 
    || typeof STD.sharedCounter != 'number'
    || isNaN(STD.sharedCounter)) {
    throw new Error('Memory not setup!')
  }
	let start = STD.sharedMemory + STD.sharedCounter
	if(typeof str != 'string') {
		str = str + ''
	}
	if(addr) start = addr
	for(let j = 0; j < str.length; j++) {
		HEAPU8[start+j] = str.charCodeAt(j)
	}
	HEAPU8[start+str.length] = 0
	HEAPU8[start+str.length+1] = 0
	HEAPU8[start+str.length+2] = 0
	if(!addr) {
		STD.sharedCounter += str.length + 3
		STD.sharedCounter += 4 - (STD.sharedCounter % 4)
		if(STD.sharedCounter > 1024 * 512) {
			STD.sharedCounter = 0
		}
	}
  if(isNaN(STD.sharedCounter)) {
    debugger
    throw new Error('Memory not setup!')
  }
	return start
}


// here's the thing, I know for a fact that all the callers copy this stuff
//   so I don't need to increase my temporary storage because by the time it's
//   overwritten the data won't be needed, should only keep shared storage around
//   for events and stuff that might take more than 1 frame
function stringsToMemory(list, length) {
  if(!STD.sharedMemory || typeof STD.sharedCounter != 'number') {
    debugger
    throw new Error('Memory not setup!')
  }
	// add list length so we can return addresses like char **
	let start = STD.sharedMemory + STD.sharedCounter
	let posInSeries = start + (list.length + 1) * 4
	for (let i = 0; i < list.length; i++) {
		HEAPU32[(start+i*4)>>2] = posInSeries // save the starting address in the list
		stringToAddress(list[i], posInSeries)
		posInSeries += list[i].length + 1
	}
  HEAPU32[(start+list.length*4)>>2] = 0
	if(length) HEAPU32[length >> 2] = posInSeries - start
	STD.sharedCounter = posInSeries - STD.sharedMemory
	STD.sharedCounter += 4 - (STD.sharedCounter % 4)
	if(STD.sharedCounter > 1024 * 512) {
		STD.sharedCounter = 0
	}
  if(isNaN(STD.sharedCounter)) {
    debugger
    throw new Error('Memory not setup!')
  }
	return start
}


function Sys_Microseconds() {
	if (window.performance.now) {
		return parseInt(window.performance.now(), 10);
	} else if (window.performance.webkitNow) {
		return parseInt(window.performance.webkitNow(), 10);
	}

	STD.sharedCounter += 8
	return STD.sharedMemory + STD.sharedCounter - 8
}

function Sys_Milliseconds() {
	if (!DATE.timeBase) {
		// javascript times are bigger, so start at zero
		//   pretend like we've been alive for at least a few seconds
		//   I actually had to do this because files it checking times and this caused a delay
		DATE.timeBase = Date.now() - 5000;
	}

	//if (window.performance.now) {
	//  return parseInt(window.performance.now(), 10);
	//} else if (window.performance.webkitNow) {
	//  return parseInt(window.performance.webkitNow(), 10);
	//} else {
	return Date.now() - DATE.timeBase;
	//}
}



// TODO: in browser, try to download wasm like normal only from host address
//   or from cl_dlurl address, localStorage or IndexedDB could be vulnerable.
// THATS WHY ITS ENCRYPTED AGAIN.
function Sys_exec(program, args) {
  // try to find and execute wasm in same context like INSECURE DLLs in Windows
  // we only have inmemory FS and specific system functions, there isn't much
  //   anyone can do from here on native to break out of nodejs sandbox
	let programStr = addressToString(program)
	if(programStr.length < 1) {
		return 1
	}
	if(!FS.virtual[programStr] 
		|| FS.virtual[programStr].mode >> 12 != ST_FILE) {
    if(!programStr.includes('.wasm'))
  		programStr += '.wasm'
	}
	if(!FS.virtual[programStr]) {
    programStr = programStr.replace('.wasm', '.js')
  }
  if(!FS.virtual[programStr] 
		|| FS.virtual[programStr].mode >> 12 != ST_FILE) {
    throw new Error('Command not found: ' + programStr)
  }

	// skip arg[0] = program name, will fill it in when it resolves
	//   this is always a system level decision, I think
	let varg = args+4
	let startArgs = []
	while(HEAPU32[varg>>2]!=0) {
		startArgs.push(addressToString(HEAPU32[varg>>2]))
		varg+=4
	}
	
  if(SYS.forked) {
    SYS.forked = false
    sendMessage({
      script: 'initAll(' + JSON.stringify([ programStr ].concat(startArgs)) 
          + ', {})'
    })
  } else {
    initAll([ programStr ].concat(startArgs), {
      SYS: SYS
    }).catch(function(e) {
			// TODO: send something back to LCC?
			console.error(e)
      // THIS IS WHAT HAPPENS WHEN A CHILD PROCESS DIES
      Sys_Exit(1)
		})
  }
	return 0 // INIT OK! POSIX WOOOO!
}



function Com_RealTime(tm) {
	// locale time is really complicated
	//   use simple Q3 time structure
	let now = new Date()
	let t = now / 1000
  if(tm) {
    HEAP32[(tm >> 2) + 5] = now.getFullYear() - 1900
    HEAP32[(tm >> 2) + 4] = now.getMonth() // already subtracted by 1
    HEAP32[(tm >> 2) + 3] = now.getDate() 
    HEAP32[(tm >> 2) + 2] = (t / 60 / 60) % 24
    HEAP32[(tm >> 2) + 1] = (t / 60) % 60
    HEAP32[(tm >> 2) + 0] = t % 60
  }
	return t
}

var _emscripten_get_now_is_monotonic = true;

function _emscripten_get_now() {
	return performance.now()
}

function clock_gettime(clk_id, tp) {
	let now;
  clk_id = HEAPU32[clk_id>>2]
	if (clk_id === 0) {
			now = Date.now()
	} else if ((clk_id === 1 || clk_id === 4) && _emscripten_get_now_is_monotonic) {
			now = _emscripten_get_now()
	} else {
			HEAPU32[errno >> 2] = 28
			return -1
	}
	HEAP32[tp >> 2] = now / 1e3 | 0;
	HEAP32[tp + 4 >> 2] = now % 1e3 * 1e3 * 1e3 | 0;
	return 0
}

var DATE = {
  mktime: function (tm) {
    return new Date(
      HEAP32[(tm >> 2) + 5] + 1900, 
      HEAP32[(tm >> 2) + 4] /* month is already subtracted for mtime */, 
      HEAP32[(tm >> 2) + 3], 
      HEAP32[(tm >> 2) + 2], 
      HEAP32[(tm >> 2) + 1], 
      HEAP32[(tm >> 2) + 0]).getTime() / 1000
  },
  asctime: function () {
    // Don't really care what time it is because this is what the engine does
    //   right above this call
    return stringToAddress(new Date().toLocaleString())
  },
  time: function () {
    // The pointer returned by localtime (and some other functions) are actually pointers to statically allocated memory.
    // perfect.
    debugger
  },
  localtime: function (t) {
    // TODO: only uses this for like file names, so doesn't have to be fast
    debugger
    let s = STD.sharedMemory + STD.sharedCounter
    HEAP32[(s + 4 * 1) >> 2] = floor(t / 60)
    HEAP32[(s + 4 * 1) >> 2] = floor(t / 60 / 60)
    HEAP32[(s + 4 * 1) >> 2] = floor(t / 60 / 60)
    /*
typedef struct qtime_s {
	int tm_sec;     /* seconds after the minute - [0,59]
	int tm_min;     /* minutes after the hour - [0,59]
	int tm_hour;    /* hours since midnight - [0,23]
	int tm_mday;    /* day of the month - [1,31]
	int tm_mon;     /* months since January - [0,11]
	int tm_year;    /* years since 1900
	int tm_wday;    /* days since Sunday - [0,6]
	int tm_yday;    /* days since January 1 - [0,365]
	int tm_isdst;   /* daylight savings time flag 
} qtime_t;
*/

  },
  ctime: function (t) {
    return stringToAddress(new Date(t).toString())
  },
  Com_RealTime: Com_RealTime,
	// locale time is really complicated
	//   use simple Q3 time structure
  Sys_time: Com_RealTime,
  Sys_Milliseconds: Sys_Milliseconds,
  Sys_Microseconds: Sys_Microseconds,
  Sys_gettime: clock_gettime,
  clock_time_get: function () { debugger },
	clock_res_get: function () { debugger },
}



function Sys_fork() {
  // TODO: prepare worker to call into
  //return ++Sys.threadCount
  SYS.forked = true
	if(typeof window.preFS == 'undefined'
		|| typeof window.preFS['sys_worker.js'] == 'undefined'
	//	|| !document.body.classList.contains('paused')
	) {
		throw new Error('Could not load worker.')
	}
	if(typeof FS.virtual['sys_worker.js'] == 'undefined') {
		readPreFS()
	}
	const workerData = Array.from(FS.virtual['sys_worker.js'].contents)
		.map(function (c) { return String.fromCharCode(c) }).join('')
	const blob = new Blob([workerData], {type: 'application/javascript'})
	SYS.worker = new Worker(URL.createObjectURL(blob))
	// TODO something with signals API
	SYS.worker.addEventListener('message', function (event) {
		setTimeout(function () {
			onMessage(event.data)
		}, 100)
  })

}


function Sys_wait(status) {
  // lookup by address status? does this work on git code?
  if(typeof Sys.waitListeners[status] == 'undefined') {
    Sys.waitListeners[status] = 0
  } else {
    ++Sys.waitListeners[status]
  }
  HEAPU32[status>>2] = Sys.waitListeners[status]
  return 0 // TODO: return error if it happens in _start()
}


function updateGlobalBufferAndViews() {
	let buf = ENV.memory.buffer
	if(typeof window != 'undefined') {
		Module.HEAP8 = window.HEAP8 = new Int8Array(buf);
		Module.HEAPU8 = window.HEAPU8 = new Uint8Array(buf);
		Module.HEAP16 = window.HEAP16 = new Int16Array(buf);
		Module.HEAPU16 = window.HEAPU16 = new Uint16Array(buf);
		Module.HEAP32 = window.HEAP32 = new Int32Array(buf);
		Module.HEAPU32 = window.HEAPU32 = new Uint32Array(buf);
		Module.HEAPF32 = window.HEAPF32 = new Float32Array(buf);
		Module.HEAPF64 = window.HEAPF64 = new Float64Array(buf);
	} else if (typeof global != 'undefined') {
		Module.HEAP8 = global.HEAP8 = new Int8Array(buf);
		Module.HEAPU8 = global.HEAPU8 = new Uint8Array(buf);
		Module.HEAP16 = global.HEAP16 = new Int16Array(buf);
		Module.HEAPU16 = global.HEAPU16 = new Uint16Array(buf);
		Module.HEAP32 = global.HEAP32 = new Int32Array(buf);
		Module.HEAPU32 = global.HEAPU32 = new Uint32Array(buf);
		Module.HEAPF32 = global.HEAPF32 = new Float32Array(buf);
		Module.HEAPF64 = global.HEAPF64 = new Float64Array(buf);
	}
}


var STD = {
  threadCount: 0,
  waitListeners: {},
  sharedCounter: 0,
  stringToAddress,
  addressToString,
  stringsToMemory,
  updateGlobalBufferAndViews: updateGlobalBufferAndViews,
  __assert_fail: console.assert, // TODO: convert to variadic fmt for help messages
  Sys_longjmp: function (id, code) { throw new Error('longjmp', id, code) },
  Sys_setjmp: function (id) { try {  } catch (e) { } },
  Sys_fork: Sys_fork,
  Sys_wait: Sys_wait,
  Sys_exec: Sys_exec,
	Sys_execv: Sys_exec,
}



var MATHS = {
  srand: function srand() {}, // TODO: highly under-appreciated game dynamic
  rand: Math.random,
  exp2: function (c) { return Math.pow(2, c) },
  exp2f: function (c) { return Math.pow(2, c) },
}
// These can be assigned automatically? but only because they deal only with numbers and not strings
//   TODO: What about converting between float, endian, and shorts?
let maths = Object.getOwnPropertyNames(Math)
for(let j = 0; j < maths.length; j++) {
  MATHS[maths[j] + 'f'] = Math[maths[j]]
  MATHS[maths[j]] = Math[maths[j]]
}

if(typeof module != 'undefined') {
  module.exports = {
    MATHS,
		STD,
		DATE,
    stringToAddress,
    addressToString,
    stringsToMemory
  }
}





function getQueryCommands() {
	// Wow, look at all the unfuckery I don't have to do with startup options because
	//   I'm not using emscripten anymore.
	let startup = [
		'quake3e_web',
		'+set', 'fs_basepath', '/base',
		'+set', 'fs_homepath', '/home',
		'+set', 'sv_pure', '0', // require for now, TODO: server side zips
		'+set', 'fs_basegame', 'multigame',
		'+set', 'r_mode', '-1',
		'+set', 'r_ext_framebuffer_object', '0',
		'+set', 'bot_enable', '0',
		'+set', 'net_socksServer', window.location.hostname || '',
		'+set', 'net_socksPort', window.location.port 
			|| (window.location.protocol == 'https:' ? '443' : '80'),
		'+set', 'sv_fps', '100',
		'+set', 'snaps', '100',
		//'+set', 'r_ext_multitexture', '0',
		//'+set', 'r_ext_framebuffer_multisample', '0',
		// this prevents lightmap from being wrong when switching maps
		//   renderer doesn't restart between maps, but BSP loading updates
		//   textures with lightmap by default, so this keeps them separate
		//'+set', 'r_mergeLightmaps', '0',
		//'+set', 'r_deluxeMapping', '0',
		//'+set', 'r_normalMapping', '0',
		//'+set', 'r_specularMapping', '0',
	]
	startup.push.apply(startup, window.preStart)
	startup.push.apply(startup, [
		'+set', 'r_fullscreen', window.fullscreen ? '1' : '0',
		'+set', 'r_customHeight', '' + GL.canvas.clientHeight || 0,
		'+set', 'r_customWidth', '' + GL.canvas.clientWidth || 0,
	])
	// meant to do this a lot sooner, with a download, we can just package
	//   whatever pk3/autoexec we want with the game.
	// but with web, we might be serving multiple sources, file:///index.html
	//   http://localhost/ and public quake.games/lvlworld. so i don't have
	//   to repackage for every source, check the domain we're on.
	let hostname = (/^(.*?)\./i).exec(window.location.hostname)
	let basename = false
	if(hostname) {
		basename = hostname[1]
	} else
	if(window.location.protocol == 'file:') {
		basename = 'localhost'
	}

	if(basename) {
		startup.push.apply(startup, [
			'+set', 'fs_basegame', basename,
			'+set', 'fs_game', 'lobby',
		])
	}
	var search = /([^&=]+)/g
	var query  = window.location.search.substring(1)
	var match
	while (match = search.exec(query)) {
		var val = decodeURIComponent(match[1])
		val = val.split(' ')
		val[0] = (val[0][0] != '+' ? '+' : '') + val[0]
		startup.push.apply(startup, val)
	}
	return startup
}


function Sys_UnloadLibrary() {

}

function Sys_LoadLibrary() {
	
}

function Sys_LoadFunction() {
	
}


function Sys_Print(message) {
	console.log(addressToString(message))
}

function Sys_Edit() {
	if(typeof window.ace == 'undefined') {
		return
	}

	if(Cmd_Argc() < 2) {
		Com_Printf(stringToAddress('Usage: edit [filename]\n'))
		return
	}

	let basegamedir = addressToString(FS_GetBaseGameDir())
	let gamedir = addressToString(FS_GetCurrentGameDir())
	let filename = Cmd_Argv(1)
	let filenameStr = addressToString(filename)
	if(filenameStr.startsWith('/')) {
		filenameStr = filenameStr.substr(1)
	}
	if(filenameStr.startsWith(gamedir)) {
		filenameStr = filenameStr.substr(gamedir.length)
	}
	if(filenameStr.startsWith(basegamedir)) {
		filenameStr = filenameStr.substr(basegamedir.length)
	}
	if(filenameStr.startsWith('/')) {
		filenameStr = filenameStr.substr(1)
	}
	if(!filenameStr || !filenameStr.length) {
		Com_Printf(stringToAddress('Usage: edit [filename]\n'))
		return
	}
	let openFilename = stringToAddress(filenameStr)

	let buf = stringToAddress('DEADBEEF') // pointer to pointer
	let length
	if ((length = FS_ReadFile(openFilename, buf)) > 0 && HEAPU32[buf >> 2] > 0) {
		let imageView = Array.from(HEAPU8.slice(HEAPU32[buf >> 2], HEAPU32[buf >> 2] + length))
		let utfEncoded = imageView.map(function (c) { return String.fromCharCode(c) }).join('')
		FS_FreeFile(HEAPU32[buf >> 2])
		ace.setValue(utfEncoded)
		// TODO: show relationships in Jarvis, 
		//   one module refers to another module
		//   these are the leaves of change that worry code reviewers
		ACE.filename = filenameStr
	} else {
		let vargs = stringToAddress('DEADBEEF') // pointer to pointer
		HEAPU32[vargs >> 2] = openFilename
		HEAPU32[(vargs >> 2) + 1] = 0
		Com_Printf(stringToAddress('File not found \'%s\'.\nUsage: edit [filename]\n'), vargs)
	}
}


function Sys_Exit(code) {
	SYS.exited = true
	GLimp_Shutdown();
	NET_Shutdown();
	if(SYS.frameInterval) {
		clearInterval(SYS.frameInterval)
		SYS.frameInterval = null
	}
	// redirect to lvlworld
	let returnUrl = addressToString(Cvar_VariableString(stringToAddress('cl_returnURL')))
	if(returnUrl) {
	//	navigateTo(returnUrl)
	//	window.location = returnUrl
	}
}

function Sys_Error(fmt, args) {
	let len = BG_sprintf(STD.sharedMemory + STD.sharedCounter, fmt, args)
	if(len > 0)
		console.error('Sys_Error: ', addressToString(STD.sharedMemory + STD.sharedCounter))
	Sys_Exit( 1 )
	throw new Error(addressToString(fmt))
}

function Sys_SetStatus(status, replacementStr) {
	// TODO: something like  window.title = , then setTimeout( window.title = 'Quake3e' again)
	
}

function CL_MenuModified(oldValue, newValue, cvar) {
	if(INPUT.modifyingCrumb) {
		return // called from ourselves below from a user action
	}
	if(window.location.orgin == null) {
		return
	}
	let newValueStr = addressToString(newValue)
	let newLocation = newValueStr.replace(/[^a-z0-9]/gi, '')
	if(!SYS.menuInited) { // keep track of first time the ui.qvm appears
		SYS.menuInited = true
		document.body.className += ' done-loading '
	}
	if(window.location.pathname.toString().includes(newLocation)) {
		// don't add to stack because it creates a lot of annoying back pushes
		return
	}
	history.pushState(
		{location: window.location.pathname}, 
		'Quake III Arena: ' + newValueStr, 
		newLocation)
}

function CL_ModifyMenu(event) {
	let oldLocation = window.location.pathname.toString().substring(1) || 'MAIN MENU'
	Cbuf_AddText( stringToAddress(`set ui_breadCrumb "${oldLocation}"\n`) );
}

function Sys_Frame() {
	if(SYS.inFrame) {
		return
	}
	function doFrame() {
		SYS.inFrame = true
		SYS.running = !SYS.running
		try {
			if(typeof ACE != 'undefined') {
				renderFilelist()
			}
			Com_Frame(SYS.running)
		} catch (e) {
			if(!SYS.exited && e.message == 'longjmp') {
				// let game Com_Frame handle it, it will restart UIVM
				Cbuf_AddText(stringToAddress('vid_restart\n'));
				console.error(e)
			} else
			if(!SYS.exited || e.message != 'unreachable') {
				Sys_Exit(1)
				throw e
			}
		}
		SYS.inFrame = false
	}
	if(HEAP32[gw_active >> 2]) {
		requestAnimationFrame(doFrame)
	} else {
		doFrame()
	}
}

function Sys_notify(ifile, path, fp) {
	openDatabase().then(function (db) {
		writeStore(ifile, path)
	})
	// TODO: ADD FILESYSTEM WATCHERS API INOTIFY 
	//   THAT READS A LIST GENERATED HERE
	if(typeof window.updateFilelist != 'undefined'
		&& !ACE.filestimer) {
		ACE.filestimer = setTimeout(updateFilelist, 100)
	}
}


function dynCall(ret, func, args) {
	return Module.table.get(func).apply(null, args)
}

function CreateAndCall(code, params, vargs) {
	let func
	if(typeof SYS.evaledFuncs[code] != 'undefined') {
		func = SYS.evaledFuncs[code]
	} else {
		let paramStr = addressToString(params)
		func = SYS.evaledFuncs[code] = eval('(function func'
			+ ++SYS.evaledCount + '($0, $1, $2, $3)'
			+ addressToString(code, 4096) + ')')
		func.paramCount = paramStr.split(',').filter(function (name) {
			return name.length > 0
		}).length
	}
	let args = HEAPU32.slice(vargs >> 2, (vargs >> 2) + func.paramCount)
	return func.apply(func, args)
}

function Sys_RandomBytes (string, len) {
  if(!HEAP8.buffer.length) {
    updateGlobalBufferAndViews()
  }
	if(typeof crypto != 'undefined') {
		crypto.getRandomValues(HEAP8.subarray(string, string+(len / 4)))
	} else {
		for(let i = 0; i < (len / 4); i++) {
			HEAP8[string] = Math.random() * 255
		}
	}
	return true;
}

var SYS = {
	evaledFuncs: {},
	evaledCount: 0,
	DebugBreak: function () { debugger },
	DebugTrace: function () { console.log(new Error()) },
	//emscripten_resize_heap: _emscripten_resize_heap,
	//emscripten_get_heap_size: _emscripten_get_heap_size,
	Sys_RandomBytes: Sys_RandomBytes,
	Sys_Exit: Sys_Exit,
	Sys_Edit: Sys_Edit,
	exit: Sys_Exit,
	Sys_Frame: Sys_Frame,
	Sys_Error: Sys_Error,
	Sys_UnloadLibrary: Sys_UnloadLibrary,
	Sys_LoadLibrary: Sys_LoadLibrary,
	Sys_LoadFunction: Sys_LoadFunction,
	popen: function popen() {},
	Sys_Print: Sys_Print,
	Sys_SetStatus: Sys_SetStatus,
	CL_MenuModified: CL_MenuModified,
	CreateAndCall: CreateAndCall,
}
</script><script async type="application/javascript">
function emitDownload(fileName, fileData, contentType) {
	//if(typeof fileData == 'string') {
	//	fileData = fileData.split('').map(function (c) { return c.charCodeAt(0) })
	//}
	//let file = FS.virtual['morph-plugin.crx'].contents
	if(typeof ACE != 'undefined') {
		ACE.downloaded = true
	}
	if(!fileName) {
		return
	}
	let blob = new Blob([fileData], {type: contentType})
	let exportUrl = URL.createObjectURL(blob);
	const tempLink = document.createElement('A');
	tempLink.style.display = 'none';
	tempLink.href = exportUrl;
	tempLink.setAttribute('download', fileName);
	document.body.appendChild(tempLink);
	tempLink.click();
	URL.revokeObjectURL(exportUrl);

}
async function onFrontend(replyFunction, request) {
	if(!request) {
		// no error because backend times out
		return
	} else

	if(request.status) {
		if(typeof ACE != 'undefined') {
			ACE.bubbleFile = request.file
		}
		// future coding?
		if(typeof onStatus != 'undefined') {
			return onStatus(request)
		}
	} else

	if(typeof request.script != 'undefined') {
		setTimeout(function () {
		// repl dom stuff? probably not
		try {
			let value = eval('(function (){\n' + request.script + '\n})()')
			let type = typeof value
			if(type == 'function') {
				value = value + ''
			} else if (type == 'object') {
				type = 'json'
				value = JSON.stringify(Object.assign({
					_accessor: true
				}, value || {}))
			} else {
				value = JSON.stringify(value)
			}
			let result = {
				responseId: request.responseId,
				type: type,
				name: request.script 
			}
			result[type] = value
			return replyFunction(result)
		} catch (e) {
			debugger
			replyFunction({
				responseId: request.responseId,
				name: request.script, 
				fail: e.message,
			})
		}
		}, 200)
	} else

	if(typeof request.accessor != 'undefined'
			&& typeof onAccessor != 'undefined') {
		// TODO: incase we need REPL on frontend because of CSP
		let lib = onAccessor(request)
		return replyFunction(lib)
	} else

	// WHAT IF URLS WERE XPATHS TO FUNCTIONS? AND ROUTING TABLES WHERE JUST FUNCTIONS?
	if(typeof request.accessor != 'undefined'
			&& request.accessor.startsWith('exports.')) {
		// TODO: re-forward back to the backend accessor because
		//   worker shares a local storage, this is what
		//   I meant by "ask language server". No matter if
		//   a request comes from more or engine or worker
		//   or plugin, it all leads back to my code in IDBFS
		// TODO: need to include installAsync here also, but only
		//   for worker interface because plugin is event/reply based
		//if(replyFunction === SYS.worker.postMessage) {
		let value
		let name = request.accessor.split('.')[1]
		let type = typeof window[name]
		if(type == 'function') {
			value = window[name] + ''
		} else if (type == 'object') {
			type = 'json'
			value = JSON.stringify(Object.assign({
				_accessor: true
			}, window[name] || {}))
		} else {
			value = JSON.stringify(window[name])
		}
		let result = {
			responseId: request.responseId,
			type: type,
			name: name
		}
		result[type] = value
		return replyFunction(result)
	} else 

	// combine with repl.js doAccessor
	// result means they asked for it?
	if(typeof request.result != 'undefined') {
		return request.result
	} else 

	if(typeof doDialog != 'undefined'
			&& typeof request.accessor != 'undefined') { // REPL?
		let dialog = doDialog(request, replyFunction)
		return dialog
	}

	// TODO: fold frontend and onAccessor into each other based on request type 
	//   should be able to have a specific direction for when to encode result
	//   or when to return real result to REPL, like the opposite of the member.object
	//   access thing
	if(typeof doRun != 'undefined') {
		doRun(request.accessor || request.script, {
			window: window,
			ACE: ACE,
		}) // NOW IT'S RECURSIVE
	}
}
function installAsyncTriggerMiddleware(onMessage, sendMessage) {
	// for services with a callback like email marketing
	//   or zapier

	// BECAUSE THIS IS CALLED MULTIPLE TIMES BUT I WAS TREATING THIS LIKE STATIC
	//let awaitingResponse = {}
	if(typeof awaitingResponse == 'undefined') {
		globalThis.awaitingResponse = {}
	}

	// TODO: move this to auth
	function getRunId(length) {
		let output = []
		let uint8array = crypto.getRandomValues(new Uint8Array(length))
		for (var i = 0; i < uint8array.length; i++) {
			output.push(String.fromCharCode(uint8array[i]));
		}
		return btoa(output.join(''));
	}
	
	// FOR CALLING REPEAT TIMES BUT PROTECTING RUNID SCOPE
	function generateRunId() {
		let runId = getRunId(20)
		return function (request) {
			request.runId = runId
			return request
		}
	}

	function awaitOrTimeout(request) {
		// access a client variable they've shared from code
		// basic client status message
		// THIS IS PURELY FOR TECHNICALLY MATCHING CLICKS ON THE PAGE
		//   BACK UP WITH THE RIGHT PROCESS, THIS IS NOT A SECURITY THING.
		let responseEventId = getRunId(20)
		// return function
		return new Promise(function (resolve) {
			let responseTimer = setTimeout(function () {
				resolve()
				delete awaitingResponse[responseEventId]
			}, 3000)

			if(typeof request == 'object' && request) {
				request.responseId = responseEventId
			}

			awaitingResponse[responseEventId] = 
			function (response) {
				clearTimeout(responseTimer)
				resolve(response)
				delete awaitingResponse[responseEventId]
				// ROUND AND ROUND WE GO
			}

			sendMessage(request)
			return awaitingResponse[responseEventId]
		}).then(onMessage)
	}

	function forwardResponseById(responseData) {
		if(responseData && responseData.responseId
			&& awaitingResponse.hasOwnProperty(responseData.responseId)) {
				return awaitingResponse[responseData.responseId](responseData)
		} /* else {
			throw new Error('Message received with no responseId.')
		} */ // must fail in script
		return onMessage(responseData)

	}


	return {
		awaitOrTimeout,
		forwardResponseById,
	}
}
function encryptedAccessorResponseMiddleware(onMessage, sendMessage) {

	// accessors on all ends will expect their results to be symmetrically
	//   key encrypted by a pregenerated session id. In the case of plugin
	//   front end, the encryption happens between client page and backend.
	let _temporarySessionEncryptor
	// code review, mark private visually with an _
	let _generateSessionEncryptor = function (sess) {
		_temporarySessionEncryptor = function (data) {
			return crypt(sess, data)
		}
	}
	let _generateResponseDecryptor = function (sess) {
		return function (data) {
			data.value = JSON.parse(decrypt(sess, data))
			// prevent recursion
			data.type == typeof result
			return data
		}
	}
	let _responseDecryptors = {}

	// for code reviews, always try to decrease the number of sinks.
	function encryptResults(response) {
		if(response && response.result
			// TODO: this plays on client, do we need multiple?
			//   I'd think not since clients (browsers, only allow like 3 connections at a time)
			// so even if they could all proxy out, only so many controls can proxy back in.
				&& typeof _temporarySessionEncryptor != 'undefined') {
			let encrypted = _temporarySessionEncryptor(JSON.stringify(response.result))
			return sendMessage({
				responseId: response.responseId,
				result: { type: 'encrypted', value: encrypted }
			})
		} else {

		}
		// TODO: master password detection
		return sendMessage(response)
	}


	function decryptResponse(results) {
		// sessionId is sent at a different time from the results.
		// sessionId is sent to client for use as the encryption key,
		//   generated by the server. A plugin could sniff the sessionId
		//   ealier and then decrypt the next form results.
		// SINK, encrypt form data directly to remote page, or directly to backend
		//   in case of system password collection, this gurantees the data gets to 
		//   the right page, hopefully without being logged or stolen. So it is doubly
		//   encrypted on disk by the master password. Once a password is entered, replace
		//   the generation function with doubly encryption.
		// this is a result to client end after sending an initial script request
		_generateSessionEncryptor(results.sessionId)
			_responseDecryptors[results.responseId] 
					= _generateResponseDecryptor(results.sessionId)
		// TODO: master password detection
		// if(request.accessor.includes("_password"))
		if(results && results.type && results.type == 'encrypted'
			&& typeof _responseDecryptors[result.responseId] != 'undefined'
		) {
			/* await */ return onMessage(_responseDecryptors[result.responseId](results.value))
		} else {
			throw new Error('There can be only one.')
		}
	}


	return {
		encryptResults,
		decryptResponse,
	}
}
function domMessageResponseMiddleware() {
	let {
		awaitOrTimeout,
		forwardResponseById,
	} = installAsyncTriggerMiddleware(onMessage, sendMessage)
	
	function onMessage(data) {
		return onFrontend(function (response) {
			return sendMessage(response)
		}, data)
	}

	function sendMessage(data) {
		let runScript = document.getElementById('run-script')
		if(runScript) {
			window['run-script'].value = JSON.stringify(data)
			window['run-accessor'].click()
		}
		if(SYS.worker) {
			SYS.worker.postMessage(data)
		}
	}

	window.addEventListener('load', function () {
		window.addEventListener('message', 
				onFrontend.bind(this, sendMessage), false)
		window.sendMessage = awaitOrTimeout
		window.onMessage = forwardResponseById
		// check for plugin or emitDownload
		// maybe we don't have the plugin
		// TODO: .bind(null, 'morph-plugin')
		let cancelDownload = setTimeout(emitDownload, 3000)
		if(chrome && chrome.runtime) {
			chrome.runtime.sendMessage(
				EXTENSION_ID, EXTENSION_VERSION, 
			function () {
				clearTimeout(cancelDownload)
			})
		}

		// sys_worker
		Sys_fork() // automatically start whatever service worker we have

		// TODO: update for lvlworld engine only?
		if(typeof SYS.worker != 'undefined') {
			sendMessage({
				script: 'loadDocumentation();\nupdateFilelist("Instructions");\n'
			})
		}
	})
	
}
function installEncryptedAsyncMiddleware(onMessage, sendMessage) {

	let {
		encryptResults,
	} = encryptedAccessorResponseMiddleware(decryptResponseIfSession, sendMessage)

	let {
		awaitOrTimeout,
	} = installAsyncTriggerMiddleware(onMessage, sendMessage)

	let {
		awaitOrTimeout: encryptedAwait,
		forwardResponseById,
	} = installAsyncTriggerMiddleware(onMessage, encryptResults)

	let {
		decryptResponse,
	} = encryptedAccessorResponseMiddleware(forwardResponseById, encryptResultsIfSession)

	function encryptResultsIfSession (request) {
		if(request.responseId) {
			return encryptedAwait(request)
		}
		return awaitOrTimeout(request)
	}

	function decryptResponseIfSession (response) {
		// TODO: generate a new session for every runId?

		// prevent recursion
		if(response.responseId && response.type == 'encrypted') {
			// CODE REVIEW? using middleware pattern for logic isolation? seperation of concerns? 
			// TODO: now can remove these checks from encrypt/decrypt to make more generalized
			return decryptResponse(response)
		}
		return forwardResponseById(response)
	}

	return {
		encryptResultsIfSession,
		decryptResponseIfSession,
	}
}
domMessageResponseMiddleware();
</script><script async type="application/javascript">
if(typeof window.preFS == 'undefined') {
  window.preFS={};
}

window.preFS['sys_worker.js_timestamp']=1651730594023;
window.preFS['sys_worker.js']='Cmdsb2JhbFRoaXMud2luZG93ID0gZ2xvYmFsVGhpczsKCgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvYXV0aC5qc190aW1lc3RhbXAnXT0xNjUxNjc2NTQ1MTg4Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvYXV0aC5qcyddPSdDZ3BzWlhRZ2JXOXljR2hsZFhOUVlYTnpWR2x0WlFwc1pYUWdkR1Z0Y0c5eVlYSjVSR1ZqY25sd2RHVnlDbXhsZENCMFpXMXdiM0poY25sRmJtTnllWEIwWlhJS2JHVjBJSFJsYlhCdmNtRnllVlZ6WlhJS0Nnb3ZMeUJVU0VsVElFbFRJRlJJUlNCTFNWUkRTRVZPSUZOSlRrc3VJRUZPUkNCQlRsbFhTRVZTUlNCVVNFRlVJRlZUUlZNZ0lrTlNXVkJVS0NJZ1FVNUVJQ0pVUlUxUVQxSkJVbGxGVGtOU1dWQlVUMUlvSWdvS1lYTjVibU1nWm5WdVkzUnBiMjRnWkc5TmIzSndhR1YxYzFCaGMzTW9jbVZ4ZFdseVpXUXBJSHNLQ1dsbUtDRnlaWEYxYVhKbFpDQW1KaUIwWlcxd2IzSmhjbmxGYm1OeWVYQjBaWElLQ1FrbUppQkVZWFJsTG01dmR5Z3BJQzBnYlc5eWNHaGxkWE5RWVhOelZHbHRaU0E4SURNd0lDb2dNVEF3TUNrZ2V3b0pDWEpsZEhWeWJpQjBaVzF3YjNKaGNubFZjMlZ5Q2dsOUNnbHNaWFFnY0hKbGRtbHZkWE5EYjI1MFpYaDBJRDBnWTNWeWNtVnVkRU52Ym5SbGVIUUtDWEJ5WlhacGIzVnpRMjl1ZEdWNGRDNXdZWFZ6WldRZ1BTQjBjblZsSUM4dklIQmhkWE5sSUdWNFpXTjFkR2x2YmlCM2FHbHNaU0JqYjJ4c1pXTjBhVzVuSUhONWMzUmxiU0J3WVhOekNnbHNaWFFnYzJWemMybHZia2xrSUQwZ1oyVnVaWEpoZEdWVFpYTnphVzl1U1dRb0tRb0piR1YwSUhKbGMzVnNkQ0E5SUdGM1lXbDBJR05vY205dFpTNXpkRzl5WVdkbExuTjVibU11WjJWMEtDZGZiVzl5Y0dobGRYTkxaWGtuS1FvSkx5OGdWVk5GUkNCR1QxSWdRMGhTVDAxRkxsQlNUMFpKVEVWVExreEpVMVFvS1NCR1FVdEZJRUZRU1NCRFFVeE1JRWxPSUV4SlFsSkJVbGtLQ1dsbUtDRnlaWE4xYkhRdVgyMXZjbkJvWlhWelMyVjVLU0I3Q2drSmJXOXljR2hMWlhrZ1BTQmJYUW9KZlNCbGJITmxJSHNLQ1FsdGIzSndhRXRsZVNBOUlFcFRUMDR1Y0dGeWMyVW9jbVZ6ZFd4MExsOXRiM0p3YUdWMWMwdGxlU2tLQ1gwS0NTOHZJRWRCU0NFZ1NTQklRVlJGSUZSSVNWTXVJRXRGUlZBZ1JrOVNSMFZVVkVsT1J5QlVUeUJTUlVaU1JWTklJRlJJUlNCUVRGVkhTVTR1SUZSSVJWSkZKMU1nUVU1UFZFaEZVZ29KTHk4Z0lDQlFURlZIU1U0Z1ZFaEJWQ0JTUlVaU1JWTklSVk1nVUV4VlIwbE9VeUJFVlZKSlRrY2dSRVZXUlV4UFVFMUZUbFF1SUZSSVNWTWdTVk1nVTA4Z1FVNVVTUzFEU1NFaElRb0pMeThnVGtWRlJDQlVUeUJOUVV0RklFRWdRMGhCVGtkRklFbE9JRTFaSUVKU1QxZFRSVklnUTA5RVJTQkZSRWxVVDFJc0lGUklSVTRnUVZWVVQwMUJWRWxEUVV4TVdRb0pMeThnSUNCU1JVTlBUVkJKVEVVZ1FVNUVJRkpGVEU5QlJDQlVTRVVnVUV4VlIwbE9JRUZPUkNCVVNFVWdRbEpQVjFORlVpQlFRVWRGTGdvSkx5OGdWMGhCVkNCSlJpQkpJRU5QVlV4RUlFUlBJRjRnVkVoQlZDQlhTRTlNUlNCUVVrOURSVk5UUlZNZ1NVNGdWRWhGSUVOTVQxVkVJRkpGVFU5VVJVeFpMQ0JCVGtRZ1IwVlVDZ2t2THlBZ0lFUkZRbFZISUVKU1JVRkxVRTlKVGxSVElFRk9SQ0JXU1ZOVlFVeEpXa1VnU1ZRZ1NVNGdWRWhGSUVWT1IwbE9SU0JPUlZoVUlGUlBJRlJJUlNCRFQwUkZMZ29KYkdWMElHNWxkME52Ym5SbGVIUWdQU0I3Q2drSmMyVnVaR1Z5U1dRNklIQnlaWFpwYjNWelEyOXVkR1Y0ZEM1elpXNWtaWEpKWkFvSmZRb0piR1YwSUhCaGMzTjNiM0prUTI5dWRHVjRkQ0E5SUdGM1lXbDBJR055WldGMFpWSjFia052Ym5SbGVIUW9ibVYzUTI5dWRHVjRkQ3dnQ2drSkNXRjNZV2wwSUdOeVpXRjBaVkpWVGtWdWRtbHliMjV0Wlc1MEtHNWxkME52Ym5SbGVIUXBLUW9KY0dGemMzZHZjbVJEYjI1MFpYaDBMbXh2WTJGc1ZtRnlhV0ZpYkdWekxuUm9hWE5YYVc1a2IzY2dQU0J3Y21WMmFXOTFjME52Ym5SbGVIUXViRzlqWVd4V1lYSnBZV0pzWlhNdWRHaHBjMWRwYm1SdmR3b0piR1YwSUd4dloybHVSblZ1WTNScGIyNGdQU0JoZDJGcGRDQm5aWFJTWlcxdmRHVkRZV3hzS0Nka2IxTjVjM1JsYlV4dloybHVKeXdnY0dGemMzZHZjbVJEYjI1MFpYaDBLUW9KYkdWMElISmxjM0J2Ym5ObElEMGdZWGRoYVhRZ2JHOW5hVzVHZFc1amRHbHZiaWdwQ2dsd2NtVjJhVzkxYzBOdmJuUmxlSFF1Y21WMGRYSnVaV1FnUFNCbVlXeHpaU0F2THlCaVpXTmhkWE5sSUdaMVkyc3RZWEp2ZFc1a2N5QmhZbTkyWlN3Z1hnb0pMeThnYzJodmRXeGtJRzVsZG1WeUlHaGhjSEJsYmlCcFppQnNhV0lnYVhNZ2QyOXlhMmx1WnlCY0x3b0phV1lvWVhkaGFYUWdjMmh2ZFd4a1FuVmlZbXhsVDNWMEtIQmhjM04zYjNKa1EyOXVkR1Y0ZENrZ0Nna0pmSHdnSVhKbGMzQnZibk5sS1NCN0Nna0pMeThnYzJsc1pXNTBiSGtnWm1GcGJDd2dkVzUwYVd3Z2QyVWdaMlYwSUdKaFkyc2dkRzhnYkdsaWNtRnllU0J6WTNKcGNIUUtDUWx3Y21WMmFXOTFjME52Ym5SbGVIUXVjR0YxYzJWa0lEMGdabUZzYzJVS0NRbHlaWFIxY200S0NYMEtDZ2t2THlCVVNFbFRJRk5JU1ZRZ1NWTWdTVTFRVDFKVVFVNVVMaUJEVWtWQlZFVWdRU0JHVlU1RFZFbFBUa0ZNSUVOUFRsUkZXRlFLQ1M4dklDQWdTVTVUVkVWQlJDQlBSaUJNUlVGV1NVNUhJRkJCVTFOWFQxSkVVeUJNUVZsSlRrY2dRVkpQVlU1RUlFbE9JRlpCVWtsQlFreEZVd29KTHk4Z0lDQkdUMUlnVjBsT1JFOVhXMU5QVFVWVVNFbE9SMTBnVkU4Z1UwNVBUMUFnVDA0dUlBb0pMeThnVGs4Z1YwRlpJRlJQSUVGRFEwVlRVeUJ0YjNKd2FHVjFjMUJoYzNNZ1JsSlBUU0JQVlZSVFNVUkZJRlJJU1ZNZ1JsVk9RMVJKVDA0S0NTOHZJQ0FnVWtsSlNVbEpTVWxKU1VkSVZDQldPRDgvUHo4L1B6OC9DZ2x0YjNKd2FHVjFjMUJoYzNOVWFXMWxJRDBnUkdGMFpTNXViM2NvS1FvSmJHVjBJSFZ6WlhJS0NYUmxiWEJ2Y21GeWVVUmxZM0o1Y0hSbGNpQTlJQ2htZFc1amRHbHZiaUFvYlc5eWNHaGxkWE5HYjNKdEtTQjdDZ2tKZFhObGNpQTlJRzF2Y25Cb1pYVnpSbTl5YlM1MWMyVnlJQzh2SUdOdmNIa2dkWE5sY201aGJXVWdabTl5SUdOdmJuWmxibWxsYm1ObENna0pjbVYwZFhKdUlHRnplVzVqSUdaMWJtTjBhVzl1SUNoa1lYUmhLU0I3Q2drSkNTOHZJR0Z6YXlCbWIzSWdjR0Z6YzNkdmNtUWdZV2RoYVc0S0NRa0phV1lvUkdGMFpTNXViM2NvS1NBdElHMXZjbkJvWlhWelVHRnpjMVJwYldVZ1BpQXpNQ0FxSURFd01EQXBJSHNLQ1FrSkNYUm9jbTkzSUc1bGR5QkZjbkp2Y2lnblMyVjVJR1Y0Y0dseVpXUXVKeWtLQ1FrSmZRb0pDUWx5WlhSMWNtNGdaR1ZqY25sd2RDaHRiM0p3YUdWMWMwWnZjbTB1Y0dGemN5d2daR0YwWVNrS0NRbDlDZ2t2THlCa1pXTnllWEIwSUhkcGRHZ2dkR2hsSUdOMWNuSmxiblFnY25WdVNXUWdhVzVqWVhObElHOW1JR1Y0ZEhKaElITnViMjl3ZVM5c2IyZG5lU0J3YkhWbmFXNXpDZ2w5S1NoS1UwOU9MbkJoY25ObEtISmxjM0J2Ym5ObEtTa0tDZ2wwWlcxd2IzSmhjbmxGYm1OeWVYQjBaWElnUFNBb1puVnVZM1JwYjI0Z0tHMXZjbkJvWlhWelJtOXliU2tnZXdvSkNYSmxkSFZ5YmlCaGMzbHVZeUJtZFc1amRHbHZiaUFvWkdGMFlTa2dld29KQ1Frdkx5QmhjMnNnWm05eUlIQmhjM04zYjNKa0lHRm5ZV2x1Q2drSkNXbG1LRVJoZEdVdWJtOTNLQ2tnTFNCdGIzSndhR1YxYzFCaGMzTlVhVzFsSUQ0Z016QWdLaUF4TURBd0tTQjdDZ2tKQ1Frdkx5QlVUMFJQT2lCWFFWSk9JRWxPSUZWSkxDQk9UMVFnVkU4Z1JFOGdWRWhKVXdvSkNRa0pZMjl1YzI5c1pTNXNiMmNvSjB0bGVTQmxlSEJwY21Wa0xpY3BDZ2tKQ1gwS0NRa0pjbVYwZFhKdUlHTnllWEIwS0cxdmNuQm9aWFZ6Um05eWJTNXdZWE56TENCa1lYUmhLUW9KQ1gwS0NTOHZJR1JsWTNKNWNIUWdkMmwwYUNCMGFHVWdZM1Z5Y21WdWRDQnlkVzVKWkNCcGJtTmhjMlVnYjJZZ1pYaDBjbUVnYzI1dmIzQjVMMnh2WjJkNUlIQnNkV2RwYm5NS0NYMHBLRXBUVDA0dWNHRnljMlVvWm05eWJVUmhkR0VwS1FvS0NTOHZJRk5VVDFKRklGUklSU0JWVTBWU1RrRk5SU3dnVTA4Z1YwVWdSRTlPSjFRZ1NFRldSU0JVVHlCTFJVVlFJRlJaVUVsT1J5QkpWQW9KTHk4Z0lDQlVTRVVnU0VGVFNDQlZVMFZTVGtGTlJTQmlLaW9xS201QVp5b3FLaXB0SUVGT1JDQlVTRVVnVUVGVFUxZFBVa1FnUVZKRkNna3ZMeUFnSUVOUFRVSkpUa1ZFSUZSUElFMUJTMFVnUVNCWFJVRkxJRVZPUTFKWlVGUkpUMDRnVTFSU1NVNUhJRUpGVkZkRlJVNGdSbEpQVGxRS0NTOHZJQ0FnUlU1RUlFRk9SQ0JDUVVOTFJVNUVMaUJKVXlCVVNFbFRJRVZPVDFWSFNDQkZUbFJTVDFCWlB5QkpVeUJEU0ZKUFRVVWdSMDlKVGtjS0NTOHZJQ0FnVkU4Z1RFVkJTeUJWVTBWU1RrRk5SVk1nVkU4Z1QxUklSVklnUlZoVVJVNVRTVTlPVXo4Z0tGQkJVMU5YVDFKRUlGbFBWU0JMVGs5WExBb0pMeThnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdWVk5GVWs1QlRVVWdRMGhTVDAxRklFdEZSVkJUSUZOQlJrVS9LUW9KTHk4Z1ZFaEZJRlZUUlZKT1FVMUZMMUJCVTFOWFQxSkVJRU5QVFVKUElFUkZRMUpaVUZSVElGUklSU0JGV0ZSRlRsTkpUMDRnUTA5T1JrbEhDZ2t2THlBZ0lGUklSU0JGV0ZSRlRsTkpUMDRnUTA5T1JrbEhJRU5QVGxSQlNVNVRJRUVnVEU5T1IwVlNJRVJGUTFKWlVGUkZSQ0JUUVV4VUNna3ZMeUFnSUZSSVJTQlRRVXhVSUVOUFRVSkpUa1ZFSUZkSlZFZ2dWRWhGSUZCQlUxTlhUMUpFTDFWVFJWSk9RVTFGSUVOUFRVSlBDZ2t2THlBZ0lFUkZRMUpaVUZSVElGUklSU0JRVWtsV1FWUkZJRXRGV1NCVVNFRlVJRVJGUTFKWlVGUlRJRXhQUTBGTVRGa2dVMVJQVWtWRUNna3ZMeUFnSUZORlUxTkpUMDRnVUVGVFUxZFBVa1JUTGlCSVQxY2dSRTlGVXlCU1UwRWdVa1ZEVDAxTlJVNUVJRXRGUlZCSlRrY2dVRkpKVmtGVVJRb0pMeThnSUNCVFFVWkZQeUFLQ1dGM1lXbDBJR0ZrWkZWelpYSW9kWE5sY2lrS0NYUmxiWEJ2Y21GeWVWVnpaWElnUFNCMWMyVnlDZ2t2THlCWFJTQkJVa1VnVGs5WElGSkZRVVJaSUZSUElGUlNRVTVUUmtWU0lGQlNSUzFGVGtOU1dWQlVSVVFnVUVGVFUxZFBVa1JUSUVaU1QwMEtDUzh2SUNBZ1ZFaEZJRVpTVDA1VUxVVk9SQ0JWU1N3Z1YwaEZVa1VnVkVoRldTQWlUVWxIU0ZRaUlFSkZJRk5CUmtVc0lGUlBJRlJJUlNCQ1FVTkxSVTVFQ2drdkx5QWdJRmRJU1VOSUlGZEZJRUZUVTFWTlJTQkpVeUJVUVUxUVJWSWdVRkpQVDBZc0lFWlBVaUJFUlVOU1dWQlVTVTlPSUVGT1JDQlRSVTVFU1U1SElBb0pMeThnSUNCVVR5QkRUMUpTUlVOVUlGQkJSMFV1SUZSUFJFODZJRWxOVUU5U1ZDOUZXRkJQVWxRZ1RFRlhVeUJQVGlCVFJVTlZVa1VnVkVWRFNFNVBURTlIV1M0S0NnbHdjbVYyYVc5MWMwTnZiblJsZUhRdWNHRjFjMlZrSUQwZ1ptRnNjMlVLQ1hKbGRIVnliaUIxYzJWeUNuMEtDZ3BzWlhRZ1lXUmtVMlZ6YzJsdmJrbGtSblZ1WTNScGIyNEtDZ3BtZFc1amRHbHZiaUJuWlc1bGNtRjBaVk5sYzNOcGIyNUpaQ2dwSUhzS0lDQnNaWFFnYjNWMGNIVjBJRDBnVzEwS0lDQnNaWFFnZFdsdWREaGhjbkpoZVNBOUlHTnllWEIwYnk1blpYUlNZVzVrYjIxV1lXeDFaWE1vYm1WM0lGVnBiblE0UVhKeVlYa29NakFwS1FvZ0lHWnZjaUFvZG1GeUlHa2dQU0F3T3lCcElEd2dkV2x1ZERoaGNuSmhlUzVzWlc1bmRHZzdJR2tyS3lrZ2V3b2dJQ0FnYjNWMGNIVjBMbkIxYzJnb1UzUnlhVzVuTG1aeWIyMURhR0Z5UTI5a1pTaDFhVzUwT0dGeWNtRjVXMmxkS1NrN0NpQWdmUW9KYkdWMElITmxjM05wYjI1SlpDQTlJR0owYjJFb2IzVjBjSFYwTG1wdmFXNG9KeWNwS1RzS0lDQmhaR1JUWlhOemFXOXVTV1JHZFc1amRHbHZiaUE5SUdaMWJtTjBhVzl1SUNoeVpYRjFaWE4wS1NCN0Nna0phV1lvZEhsd1pXOW1JSEpsY1hWbGMzUWdQVDBnSjI5aWFtVmpkQ2NnSmlZZ2NtVnhkV1Z6ZENrZ2V3b0pDUWx5WlhGMVpYTjBXeWR6WlhOemFXOXVTV1FuWFNBOUlITmxjM05wYjI1SlpBb0pDWDBLQ1gwS0NYSmxkSFZ5YmlCelpYTnphVzl1U1dRS2ZRb0tDbUZ6ZVc1aklHWjFibU4wYVc5dUlHUnZUVzl5Y0dobGRYTkJkWFJvS0hKbGNYVnBjbVZrS1NCN0NnbHBaaWdoY21WeGRXbHlaV1FnSmlZZ2RHVnRjRzl5WVhKNVJXNWpjbmx3ZEdWeUNna0pKaVlnUkdGMFpTNXViM2NvS1NBdElHMXZjbkJvWlhWelVHRnpjMVJwYldVZ1BDQXpNQ0FxSURFd01EQXBJSHNLQ1FseVpYUjFjbTRLQ1gwS0NXeGxkQ0JzYjJkcGJrWjFibU4wYVc5dUlEMGdZWGRoYVhRZ1oyVjBVbVZ0YjNSbFEyRnNiQ2duWkc5UVlXZGxURzluYVc0bkxDQmpkWEp5Wlc1MFEyOXVkR1Y0ZENrS0NXeGxkQ0J5WlhOd2IyNXpaU0E5SUdGM1lXbDBJR3h2WjJsdVJuVnVZM1JwYjI0b0tRb0pZM1Z5Y21WdWRFTnZiblJsZUhRdWNtVjBkWEp1WldRZ1BTQm1ZV3h6WlNBdkx5QmlaV05oZFhObElHWjFZMnN0WVhKdmRXNWtjeUJoWW05MlpTd2dYZ29KYVdZb1lYZGhhWFFnYzJodmRXeGtRblZpWW14bFQzVjBLR04xY25KbGJuUkRiMjUwWlhoMEtTa2dld29KQ1hKbGRIVnliZ29KZlFvSmFXWW9JWEpsYzNCdmJuTmxJSHg4SUNGeVpYTndiMjV6WlM1eVpYTjFiSFFwSUhzS0NRbDBhSEp2ZHlCdVpYY2dSWEp5YjNJb0owNWxaV1J6SUhCaFoyVWdZWFYwYUdWdWRHbGpZWFJwYjI0dUp5a0tDWDBLQ1M4dmNtVjBkWEp1SUVwVFQwNHVjR0Z5YzJVb0tRb0pMeTlVVDBSUE9pQnpaVzVrSUhSdklIQmhaMlVnWlc1amNubHdkR1ZrSUhkcGRHZ2djMlZ6YzJsdmJpQkpSQXA5Q2dvS1lYTjVibU1nWm5WdVkzUnBiMjRnWVdSa1ZYTmxjaWgxYzJWeUtTQjdDZ2xzWlhRZ2NtVnpkV3gwSUQwZ1lYZGhhWFFnWTJoeWIyMWxMbk4wYjNKaFoyVXVjM2x1WXk1blpYUW9KMTl0YjNKd2FHVjFjMHRsZVNjcElDOHZJR2h2Ym1WNUxYQnZkQW9KYVdZb0lYSmxjM1ZzZEM1ZmJXOXljR2hsZFhOTFpYa3BJSHNLQ1FsdGIzSndhRXRsZVNBOUlGdGRDZ2w5SUdWc2MyVWdld29KQ1cxdmNuQm9TMlY1SUQwZ1NsTlBUaTV3WVhKelpTaHlaWE4xYkhRdVgyMXZjbkJvWlhWelMyVjVLUW9KZlFvSmFXWW9JVzF2Y25Cb1MyVjVMbWx1WTJ4MVpHVnpLSFZ6WlhJcEtTQjdDZ2tKYlc5eWNHaExaWGt1Y0hWemFDaDFjMlZ5S1FvSmZRb0pZWGRoYVhRZ1kyaHliMjFsTG5OMGIzSmhaMlV1YzNsdVl5NXpaWFFvZXdvSkNWOXRiM0p3YUdWMWMwdGxlVG9nU2xOUFRpNXpkSEpwYm1kcFpua29iVzl5Y0doTFpYa3BDZ2w5S1FvS2ZRb0tDZ3BoYzNsdVl5Qm1kVzVqZEdsdmJpQmtiMDF2Y25Cb1pYVnpTMlY1S0NrZ2V3b0piR1YwSUhWelpYSWdQU0JoZDJGcGRDQmtiMDF2Y25Cb1pYVnpVR0Z6Y3loMGNuVmxLUW9KYVdZb1lYZGhhWFFnYzJodmRXeGtRblZpWW14bFQzVjBLR04xY25KbGJuUkRiMjUwWlhoMEtTa2dld29KQ1hKbGRIVnliZ29KZlFvSkx5OGdZMmh5YjIxbExuTjBiM0poWjJVdWMzbHVZeTV6WlhRb2V5QnRlWFJsZUhRNklIUjRkRlpoYkhWbElIMHBPd29KYkdWMElHeHZaMmx1Um5WdVkzUnBiMjRnUFNCaGQyRnBkQ0JuWlhSU1pXMXZkR1ZEWVd4c0tDZGtiMHRsZVVScFlXeHZaeWNzSUdOMWNuSmxiblJEYjI1MFpYaDBLUW9KYkdWMElISmxjM0J2Ym5ObElEMGdZWGRoYVhRZ2JHOW5hVzVHZFc1amRHbHZiaWdwQ2dsamRYSnlaVzUwUTI5dWRHVjRkQzV5WlhSMWNtNWxaQ0E5SUdaaGJITmxJQzh2SUdKbFkyRjFjMlVnWm5WamF5MWhjbTkxYm1SeklHRmliM1psTENCZUNnbHBaaWhoZDJGcGRDQnphRzkxYkdSQ2RXSmliR1ZQZFhRb1kzVnljbVZ1ZEVOdmJuUmxlSFFwS1NCN0Nna0pjbVYwZFhKdUNnbDlDZ2xwWmlnaGNtVnpjRzl1YzJVZ2ZId2dJWEpsYzNCdmJuTmxMbkpsYzNWc2RDa2dld29KQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduVG1WbFpITWdVRVZOSUd0bGVTQm1hV3hsTGljcENnbDlDZ29KWVhkaGFYUWdZV1JrVlhObGNpaDFjMlZ5S1FvSmEyVjVVMlYwZEdsdVozTWdQU0I3ZlFrS0NXdGxlVk5sZEhScGJtZHpXM1Z6WlhKZElEMGdkR1Z0Y0c5eVlYSjVSVzVqY25sd2RHVnlLSEpsYzNCdmJuTmxLUW9KWVhkaGFYUWdZMmh5YjIxbExuTjBiM0poWjJVdWMzbHVZeTV6WlhRb2EyVjVVMlYwZEdsdVozTXBDZ2t2THlCUFMwRlpJRlJGUTBoT1NVTkJUQ0JDVlV4TVUwaEpWQ3dnVkVoRklFZFBRVXdnU1ZNZ1ZFOGdTMFZGVUNCUVFWTlRWMDlTUkZNS0NTOHZJQ0FnVDFWVUlFOUdJRlJJUlNCSVFVNUVVeUJQUmlCUFZFaEZVaUJGV0ZSRlRsTkpUMDVUTENCQlRrUWdVRTlUVTBsQ1RFVWdXRk5UTGdvSkx5OGdJQ0JKSjAwZ1FWTlRWVTFKVGtjZ1ZFaEpVeUJRUVVkRklGTkJXVk1nVTA5TlJWZElSVkpGSUZSSVFWUWdUMVJJUlZJS0NTOHZJQ0FnUlZoVVJVNVRTVTlPVXlCRFFVNG5WQ0JCUTBORlUxTWdUMVJJUlZJZ1JWaFVSVTVUU1U5T1V5QlRSVlJVU1U1SFV6OC9QejgvQ2drdkx5Qm9kSFJ3Y3pvdkwyUmxkbVZzYjNCbGNpNWphSEp2YldVdVkyOXRMMlJ2WTNNdlpYaDBaVzV6YVc5dWN5OXlaV1psY21WdVkyVXZkMlZpVW1WeGRXVnpkQzhqZEhsd1pTMVBia0psWm05eVpWSmxjWFZsYzNSUGNIUnBiMjV6Q2drdkx5QkpSaUJKSUZOVVQxSkZJRUVnVUZKSlZrRlVSU0JMUlZrZ1NVNGdUVmtnUlZoVVJVNVRTVTlPSUVaU1QwMGdSMFZPUlZKQlZFbFBUZ29KTHk4Z0lDQlVTRVZPSUZCQlUxTlhUMUpFVXlCRFFVNGdRa1VnUlU1RFVsbFFWRVZFSUU5T0lGUklSU0JEVEVsRlRsUWdVMGxFUlNCWFNWUklDZ2t2THlBZ0lGUklSU0JRVlVKTVNVTWdTMFZaSUVGVElGTlBUMDRnUVZNZ1ZFaEZXU0JCVWtVZ1JVNVVSVkpGUkNCQlRrUWdUa1ZXUlZJZ1ZGSkJUbE5HUlZKRlJBb0pMeThnSUNCUFZWUWdUMFlnVkVoRklFTlBUbFJGV0ZRZ1QwWWdSa2xNUlRvdkwwMVBVbEJJUlZWVExraFVUVXdnVDFJZ1RVOVNVRWhGVlZNdVIwbFVTRlZDQ2drdkx5QkNWVlFnVkVoSlV5QkVUMFZUVGlkVUlGQlNSVlpGVGxRZ1JWaFVSVTVUU1U5T1V5QkdVazlOSUZKRlFVUkpUa2NnVDFSSVJWSWdWMFZDSUZCQlIwVW5Vd29KTHk4Z0lDQkVRVlJCTENCSVJVNURSU0JVU0VVZ1EweEpSVTVVSUZOSlJFVWdVRlZDVEVsRElFdEZXU0JGVGtOU1VGbFVTVTlPTGlCQlRpQkZXRlJGVGxOSlQwNEtDUzh2SUNBZ1EwRk9KMVFnUVVORFJWTlRJRk5VVDFKRlJDQlFRVk5UVjA5U1JGTWdRMHhKUlU1VUlGTkpSRVV1Q2drdkx5QlFRVk5UVjA5U1JGTWdRVkpGSUVGTVUwOGdWMFZCU3lCRlRrTlNXVkJVUlVRZ1YwbFVTQ0JVU0VVZ1RVOVNVRWhGVlZNZ1MwVlpDZ2t2THlBZ0lFVk9WRVZTUlVRZ1Fsa2dWRWhGSUZWVFJWSWdRVlFnVkVoRklFSkZSMGxPVGtsT1J5QlBSaUJMUlZrZ1UxUlBVa0ZIUlFvSkx5OGdWMGhGVGlCQklGQkJVMU5YVDFKRUlGSkZVVlZGVTFRZ1NWTWdUVUZFUlN3Z1ZFaEZJRlJKVFVVZ1QwNGdWRWhGSUVOTVNVVk9WQ0JRUVVkRkNna3ZMeUFnSUVsR0lFTklSVU5MUlVRZ1JrOVNJRVZZVUVsU1FWUkpUMDRnVTBWVVZFbE9SeXdnVkVoRklFTk1TVVZPVkNCU1JWRlZSVk5VVXlCTlQxSlFTRVZWVXdvSkx5OGdJQ0JMUlZrZ1FWTWdRU0JUUVVaRlZGa2dRMGhGUTBzS0NTOHZJRlJJUlNCSlRWQlBVbFJCVGxRZ1ZFaEpUa2NnU0VWU1JTQkpVeUJVVHlCT1JWWkZVaUJVVWtGVFRVbFVJRUZPUkNCVFZFOVNSU0JDVDFSSUlGQkJVbFJUQ2drdkx5QWdJRTlHSUZSSVJTQlRSVU5TUlZRZ1RrVllWQ0JVVHlCRlFVTklJRTlVU0VWU0lDOGdRVlFnVkVoRklGTkJUVVVnVkVsTlJTd2dUazlVSUZSUElFMUJTMFVLQ1M4dklDQWdTVlFnUlVGVFdTQkdUMUlnUVU0Z1FWUlVRVU5MUlZJZ1ZFOGdVRlZVSUZSSVJTQkRUMFJGSUZSUFIwVlVTRVZTSUVGT1JDQlRWRVZCVENCUVFWTlRSVk1LQ1M4dklFMVBVbEJJUlZWVElFdEZXU0JKVXlCWFJVRkxJRVZPUTFKWlVGUkZSQ0JYU1ZSSUlFRWdVMFZUVTBsUFRpQkpSQW9KTHk4Z0lDQlVTRVVnVUZKRkxWQlZRa3hKUXkxTFJWa2dSVTVEVWxsUVZFVkVJRkJCVTFOWFQxSkVJRWxUSUZORlRsUWdWRThnVkVoRklFSkJRMHRGVGtRS0NTOHZJRlJJUlNCQ1FVTkxSVTVFSUVSRlExSlpVRlJUSUZSSVJTQk5UMUpRU0VWVlV5MUxSVmt0UlU1RFVsbFFWRVZFSUZKQlZ5QlFRVk5UVjA5U1JBb0pMeThnSUNCVVNFVWdRa0ZEUzBWT1JDQlRSVTVFVXlCVVNFVWdUVTlTVUVoRlZWTXRTMFZaTFVWT1ExSlpVRlJGUkNCUVFWTlRWMDlTUkFvSkx5OGdJQ0JCVGtRZ1ZFaEZJRk5GVTFOSlQwNGdSVTVEVWxsUVZFVkVJRTFQVWxCSVJWVlRJRXRGV1NCVVR5QlVTRVVnUTB4SlJVNVVDZ2t2THlBZ0lGZEpWRWdnVkVoRklFUkZRMUpaVUZSSlQwNGdVRkpQUjFKQlRTd2dWRThnUlZoRlExVlVSU0JVU0VVZ1JFVkRVbGxRVkVsUFRnb0pMeThnVUZKUFEwVlRVMFZUSUVsT0lGUklSU0JEVDA1VVJWaFVJRTlHSUZSSVJTQlFRVWRGTENCSlRsTkpSRVVnUVNCR1ZVNURWRWxQVGdvSkx5OGdJQ0JEVDA1VVJWaFVJRlJQSUZCU1JWWkZUbFFnVmtGU1NVRkNURVVnVEVWQlMwRkhSU3dnVjBsVVNDQkdUMUpEUlVRZ1IwRlNRa0ZIUlNCRFQweE1SVU5VU1U5T0Nna3ZMeUJVU0VVZ1ZFaEZUMUpaSUVKRlNVNUhJRlJJUlNCRldGUlNRU0JNUVZsRlVpQlBSaUJGVGtOU1dWQlVTVTlPSUZkUFZVeEVJRkJTUlZaRlRsUWdRVTVaQ2drdkx5QWdJRUZEUTBsRVJVNVVRVXdnVmtGU1NVRkNURVVnVTA1UFQxQkpUa2NLQ1M4dklGUklSU0JUUlZKV1JWSWdTVk1nVGs5VUlFRlhRVkpGSUU5R0lGUklSU0JRUVVkRklGTkZVMU5KVDA0Z1NVUWdWVk5GUkNCVVR5QlhSVUZMTFVWT1ExSlpVRlFLQ1M4dklDQWdUVTlTVUVoRlZWTXRTMFZaTENCQlRrUWdWRWhGSUVaU1QwNVVJRVZPUkZNZ1FWSkZJRTVQVkNCQlYwRlNSU0JQUmlCUVFWTlRWMDlTUkFvSkx5OGdJQ0JUVkU5U1FVZEZJRVJWUlNCVVR5QlVTRVVnUWtGRFMwVk9SQ0JRVWtsV1FWUkZJRXRGV1NCRlRrTlNXVkJVU1U5T0xDQlVTRVZTUlNkVENna3ZMeUFnSUU1UElGZEJXU0JHVDFJZ1FTQlFRVWRGSUU5U0lFRk9JRVZZVkVWT1UwbFBUaUJVVHlCVFRrOVBVQ0JQVGlCVVNFVWdVRkpQUTBWVFV3b0pMeThnSUNCU1NVZElWRDgvUHo4L1B6OC9QejgvUHo4L1B6OC9QejgvUHdvSkx5OGdJQ0EvUHo4L1B6OC9QejgvUHo4L1B6OC9QejgvUHo4L1B6OC9Qd29KTHk4Z1QxUklSVklnVTFSVlJrWXNJRlJJUlNCUVVrbFdRVlJGSUV0RldTQkpVeUJYUlVGTElFVk9RMUpaVUZSRlJDQlhTVlJJSUZSSVJTQk5UMUpRU0VWVlV3b0pMeThnSUNCTFJWa2dUMDRnVkVoRklFSkJRMHRGVGtRZ1JrOVNJRk5VVDFKQlIwVXVDZ2t2THlCVVNFVWdWVk5GVWs1QlRVVWdTVk1nUlU1RFQwUkZSQ0JYU1ZSSUlGTlVRVkpUSUVGT1JDQlhSVUZMSUVWT1ExSlpVRlJGUkNCWFNWUklJRlJJUlFvSkx5OGdJQ0JOVDFKUVNFVlZVeUJMUlZrZ1QwNGdWRWhGSUVaU1QwNVVJRVZPUkNCQlRrUWdRVlZVVDAxQlZFbERRVXhNV1NCVFZWQlFURWxGUkNCQlV3b0pMeThnSUNCQklGQkJVbFFnVDBZZ1FTQWlVRkpQUmtsTVJTSWdVMVJaVEVVZ1ZVa3NJRkJCVTFOWFQxSkVJRVZPVkVWU1JVUWdRVk1nVGs5U1RVRk1DZ2t2THlCVlUwVlNUa0ZOUlNCSlV5QlFVa1ZVVkZrZ1RVVkJUa2xPUjB4RlUxTWdSVmhEUlZCVUlGUlBJRXhKVTFRZ1VGSkpWa0ZVUlNCTFJWbFRDZ2t2THlBZ0lFWlBVaUJUUlZCQlVrRlVSU0JRUVZOVFYwOVNSQ0JRVWs5R1NVeEZVeUJHVDFJZ1UwTlNTVkJVVXlCVVR5QlZVMFV1SUVrdVJTNEtDUzh2SUNBZ1ZFVlRWRWxPUnlBdklFUkZWa1ZNVDFCTlJVNVVJQzhnVTFSQlIwbE9Sd29KTHk4Z1EwOU1URVZEVkVWRUlGVlRSVkpPUVUxRlV5QkJVa1VnUlU1RFQwUkZSQ0JNU1V0RkxDQkJURmRCV1ZNZ05DQlRWRUZTVXlCU1JVZEJVa1JNUlZOVExnb0pMeThnSUNCaWFtTjFiR3hwYm1GdVFHZHRZV2xzTG1OdmJTQXRQaUJpS2lvcUttNUFaeW9xS2lwdENna3ZMeUFnSUZCQlUxTlhUMUpFVXlCQlVrVWdSVTVEVDBSRlJDd2dRVXhYUVZsVElGTklUMWRKVGtjZ01UQWdVMVJCVWxNdUNna3ZMeUFnSUNvcUtpb3FLaW9xS21Fc0lFeEJVMVFnUTBoQlVrRkRWRVZTSUU5T1RGa3NJRlJQUkU4NklFTkJUaUJDUlNCVVZWSk9SVVFnVDBaR0Nna3ZMeUJGVGtOUFJFVkVJRVJCVkVFZ1NWTWdSVTVEVWxsUVZGbEZSQ0JYU1ZSSUlFMVBVbEJJUlZWVElFdEZXUXA5Q2dvS0x5OGdRa0ZUU1VOQlRFeFpJRk5CV1VsT1J5QlVTRVVnVTBGTlJTQlVTRWxPUnl3Z1UwVkRWVkpKVkZrZ1NWTWdTVTRnVkVoRklFbE5VRXhGVFVWT1ZFRlVTVTlPQ2k4dklDQWdUazlVSUVsT0lGUklSU0JCVEVkUFVrbFVTRTB1SUZWVFNVNUhJRUVnUmxWT1ExUkpUMDVCVENCRFQwNVVSVmhVSUZSUElFdEZSVkFnVmtGU1NVRkNURVZUQ2k4dklDQWdVMEZHUlNCQlYwRlpJRVpTVDAwZ1QxUklSVklnVTBOU1NWQlVVeUJDUlVsT1J5QlNWVTRnVTBoUFZVeEVJRUpGSUU5TFFWa3VDaTh2SUdoMGRIQnpPaTh2YzNSaFkydHZkbVZ5Wm14dmR5NWpiMjB2WVM4eE1ESXhOVEExTmdvS1kyOXVjM1FnVUVGU1JVNVVYMUJTVDBORlUxTWdQU0F3Q21OdmJuTjBJRmRQVWt0RlVsOVFVazlEUlZOVElEMGdNUW9LQ214bGRDQnRiM0p3YUV0bGVTQTlJR1poYkhObENtbG1LSFI1Y0dWdlppQmphSEp2YldVZ1BUMGdKM1Z1WkdWbWFXNWxaQ2NwSUhzS0NXTm9jbTl0WlNBOUlIdDlDbjBLYVdZb2RIbHdaVzltSUdOb2NtOXRaUzV6ZEc5eVlXZGxJRDA5SUNkMWJtUmxabWx1WldRbktTQjdDZ2t2S2dvSlkyaHliMjFsTG5OMGIzSmhaMlVnUFNCN0Nna0pjM2x1WXpvZ2V3b0pDUWxuWlhRNklHWjFibU4wYVc5dUlDaHJaWGtwSUhzS0NRa0pDV3hsZENCc2IyTmhiRk4wYjNKaFoyVWdQU0JmWkc5QlkyTmxjM052Y2loN0Nna0pDUWtKYjJKcVpXTjBPaUI3SUc1aGJXVTZJQ2QzYVc1a2IzY25JSDBzQ2drSkNRa0pjSEp2Y0dWeWRIazZJSHNnYm1GdFpUb2dKMnh2WTJGc1UzUnZjbUZuWlNjZ2ZTd0tDUWtKQ1gwc0lHTjFjbkpsYm5SRGIyNTBaWGgwTENCUVFWSkZUbFJmVUZKUFEwVlRVeWtLQ1FrSkNXeGxkQ0IyWVd4MVpTQTlJR3h2WTJGc1UzUnZjbUZuWlM1ZllXTmpaWE56YjNJb2V3b0pDUWtKQ1c5aWFtVmpkRG9nZXlCdVlXMWxPaUFuYkc5allXeFRkRzl5WVdkbEp5QjlMQW9KQ1FrSkNYQnliM0JsY25SNU9pQjdJRzVoYldVNklHdGxlU0I5TEFvSkNRa0pmU3dnWTNWeWNtVnVkRU52Ym5SbGVIUXNJRkJCVWtWT1ZGOVFVazlEUlZOVEtRb0pDUWtKY21WMGRYSnVJSFpoYkhWbENna0pDWDBLQ1FsOUNnbDlDZ2txTHdwOUNnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2NlcmVicm8vYXJnLmpzX3RpbWVzdGFtcCddPTE2NTExODQ2MzUzNjU7CndpbmRvdy5wcmVGU1snbGlicmFyeS9jZXJlYnJvL2FyZy5qcyddPSdMeThnWVd4MFpYSnVZWFJwZG1VZ2NtVmhiR2wwZVNCbllXMWxJR052YjNKa2FXNWhkRzl5Q2k4dklITnZiV1YwYUdsdVp5QmhZbTkxZENCMGFHVWdkMjl5YkdRZ2FYTWdkMmhoZENCNWIzVWdiV0ZyWlNCcGRBb3ZMeUJ1YjNjZ1lXNTViMjVsSUdOaGJpQnphR0Z5WlNCcGJpQnRlU0JwYm5OaGJtbDBlVDhLTHk4Z2RHaHBjeUJwY3lCb2IzY2dhU0JoWTNSMVlXeHNlU0JwYldGbmFXNWxJR0psYVc1bklHTnZiblJ5YjJ4c1pXUXVDaTh2SUVkdlpDQmxlR2x6ZEhNZ2MyOXRaWGRvWlhKbElHbHVZbVYwZDJWbGJpQmphR0Z1WTJVZ1lXNWtJR052YVc1amFXUmxibU5sTGdvS0x5OGdWMFZKVWtRZ1VrRkVTVThnVTFSQlZFbFBUaUJIVDBWVElGTlVRVlJKUXlCWFNFVk9JRWtnVkVoSlRrc2dRVUpQVlZRZ1ZFaEpVeUJUVkZWR1Jnb3ZMeUFnSUVkUFJDQkpVeUJCSUZCQlVrRkVUMWd1SUVaUFVpQlRUMDFGSUZCRlQxQk1SU0JVU0VVZ1FVTlVJRTlHSUZKRlFVUkpUa2NnVWtWV1JVeEJWRWxQVGlCSlV5QUtMeThnSUNCSFQwUW5VeUJHU1ZKVFZDQlVTVTFGSUVOUFRVbE9SeUJVVHlCVVNFVk5MQ0JDVlZRZ1NWUWdVa1ZCUkZNZ1FVSlBWVlFnVkVoRklGTkZRMDlPUkFvdkx5QWdJRU5QVFVsT1J5NGdWRWhGSUZORlEwOU9SQ0JEVDAxSlRrY2dTVk1nVkVoRklFWkpVbE5VSUVOUFRVbE9SeTRLTHk4Z0lDQkdUMUlnVDFSSVJWSWdVRVZQVUV4RkxDQlhTRThnUjA5RUlFaEJVeUJCVEZKRlFVUlpJRkpGVmtWQlRFVkVJRWhKVFZORlRFWWdWRThzSUFvdkx5QWdJRlJJUlNCQlExUWdUMFlnVWtWQlJFbE9SeUJTUlZaRlRFRlVTVTlPSUVsVElGUklSU0JUUlVOUFRrUWdRMDlOU1U1SExpQkpUaUJVU0VVS0x5OGdJQ0JWVGtSRlVsTlVRVTVFU1U1SElFOUdJRlJJUlNCRFQwNUVTVlJKVDA1VElGUklRVlFnVEVWQlJDQlZVQ0JVVHlCSlZDNEtDaTh2SUVSU1NWTkRUMHhNSUZOQlNVUWdJa2tnUkU5T0oxUWdRa1ZNU1VWV1JTQkpUaUJRUVU1VVNFVkpVMDBpQ2k4dklDQWdRbFZVSUZSSVJTQlFTRkpCVTBVZ0lrZFBSQ0JGV0VsVFZGTXNJRUpGUTBGVlUwVWdWMFVnUlZoSlUxUlRJZ292THlBZ0lFbFRJRVJQVlVKTVJTQk5SVUZPU1U1SExpQkhUMFFnUTA5VlRFUWdSVmhKVTFRZ1FrVkRRVlZUUlNCVVNFVWdWVTVKVmtWU1UwVUtMeThnSUNCRldFbFRWRk1zSUZSSVFWUW5VeUJLVlZOVUlFNVBVazFCVENCU1JVRlRUMDVKVGtjZ1ZFaEJWQ0JFVWtsVFEwOU1UQ0JFVDBWVFRpZFVDaTh2SUNBZ1FrVk1TVVZXUlNCSlRpNGdUazlTVFVGTUlGSkZRVk5QVGtsT1J5NGdRbFZVSUZSSVJTQlBWRWhGVWlCTlJVRk9TVTVISUVsVENpOHZJQ0FnUjA5RUlFRk1WMEZaVXlCRldFbFRWRVZFSUVKRlEwRlZVMFVnVjBVZ1JWaEpVMVFzSUVGT1JDQlhSU0JOVlZOVUlFTlNSVUZVUlFvdkx5QWdJRWRQUkNCVVR5QkhTVlpGSUVoSlRTQkdUMUpOTGlCSlJpQkhUMFFnUTFKRlFWUkZSQ0JOUVU0Z1ZFOGdVa1ZHVEVWRFZDQklTVk1LTHk4Z0lDQkpUVUZIUlN3Z1JFOUZVMDRuVkNCSlZDQlRWRUZPUkNCVVR5QlNSVUZUVDA0Z1ZFaEJWQ0JUVDAxRlZFaEpUa2NnUTFKRlFWUkZSQW92THlBZ0lFZFBSQ0JVVHlCU1JVWk1SVU5VSUZSSVJVbFNJRWxOUVVkRlB3b0tMeThnVGs4c0lFa2dSRTlPSjFRZ1ZFaEpUa3NnVkVoRklFWkpVbE5VSUVGSklFZFBSQ0JKVXlCWFVrbFVWRVZPSUVsT0lFNVBSRVZLVXk0S0x5OGdJQ0JKVkNCWFNVeE1JRUpGSUZkU1NWUlVSVTRnU1U0Z1lFbE9WRVZPVkdBc0lGUklTVk1nU1ZNZ1NsVlRWQ0JCSUUxRlFVNVRJRlJQSUVGT0lFVk9SQzRLQ2dvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvY2VyZWJyby9idWxsc2V5ZS5qc190aW1lc3RhbXAnXT0xNjUwOTgzNzIwOTYxOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvY2VyZWJyby9idWxsc2V5ZS5qcyddPSdDaTh2SUVaSlRrUWdRMVZUVkU5TlJWSlRJRVpQVWlBelJDQktUMElnUmtGSlVsTXVDaTh2SUVKVlUwbE9SVk5USUZSSVFWUWdWMEZPVkNCVVR5QkhTVlpGSUVOQlRrUkpSRUZVUlZNZ1FTQldTVkpVVlVGTUNpOHZJQ0FnVkU5VlVpQkJVeUJCSUZCQlVsUWdUMFlnVkVoRklFVk1SVlpCVkU5U0lGQkpWRU5JTGdvS0Nnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2NlcmVicm8vY2xvYmJlci5qc190aW1lc3RhbXAnXT0xNjUxMTY5MjU0MzE5Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvY2VyZWJyby9jbG9iYmVyLmpzJ109J0x5OGdhV1lnY0dod0lHZGxkSE1nTXpJZ2MybHRkV3gwWVc1bGIzVnpJR052Ym01bFkzUnpJR0ZzYkNCbWNtOXRJSFJvWlNCellXMWxJSE5sYzNOcGIyNEtMeThnSUNCcGRDQmpZVzRnWTJGMWMyVWdZU0IwYUhKbFlXUWdiRzlqYXlCdmJpQnpaWE56YVc5dUlITjBiM0poWjJVc0lIZG9hV05vSUcxbFlXNXpJR2wwQ2k4dklDQWdZMkZ1SjNRZ2NtVnpjRzl1YzJVZ2RHOGdiM1JvWlhJZ2NtVnhkV1Z6ZEhNdUlIZHZkV3hrSUdKbElHbHVkR1Z5WlhOMGFXNW5JSFJ2SUhObFpRb3ZMeUFnSUdsbUlHRWdZbTkwSUdOaGJpQmpZWFZ6WlNCbmIyOW5iR1VnYzJWaGNtTm9JSFJ2SUdSeWIzQWdkR2hsSUhKbGMzVnNkSE1nYjI0Z2QyVmljMmwwWlhNS0x5OGdJQ0IwYUdGMElITjBaV0ZzSUdSaGRHRWdabkp2YlNCdmRHaGxjbk11Q2dvdkx5QnRZV05vYVc1bGN5Qm9ZV05yYVc1bklHMWhZMmhwYm1WekNnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2NlcmVicm8vbWF4d2VsbC5qc190aW1lc3RhbXAnXT0xNjUwOTAzNzA2NzAyOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvY2VyZWJyby9tYXh3ZWxsLmpzJ109J0x5b0tDbFJJU1ZNZ1NWTWdWMGhaSUVrZ1UxUlBVRkJGUkNCUVRFRlpTVTVISUNKVVNFVWdSMEZOUlNJdUlGQkZUMUJNUlNCSFQxUWdTRlZTVkFwSVJVRlNWRk1nUjA5VUlFSlNUMHRGVGk0Z1RVVlRVMEZIUlNCVVNFVlRSU0JVVHlCR1JVMUJURVVnVWtWRFVsVkpWRVZTVXlCUFRncE1TVTVMUlVSSlRpQkJWVlJQVFVGVVNVTkJURXhaSUVKUFQwc2dVRWhQVGtVZ1EwRk1URk11Q2dwWFNFRlVJRWxHSUVFZ1VFVlNVMDlPUVV4SlZGa2dSVmhKVTFSRlJDQlBUaUJVU0VVZ1NVNVVSVkpPUlZRc0lFeFBUa2NnUVVaVVJWSWdWRWhGSUVGVlZFaFBVaUJYUVZNZ1IwOU9SVDhLVTA5TlJWUklTVTVISUZOSlRWQk1SU3dnUWxWVUlGQkZVbE5KVTFSRlRsUWdRVTVFSUVOSVFVNUhTVTVITGlCSklFUlBUaWRVSUZSSVNVNUxJRTFQVTFRZ1VFVlBVRXhGQ2xWT1JFVlNVMVJCVGtRZ1ZFaEZJRlJTVlVVZ1RVVkJUa2xPUnlCUFJpQWlVMUJKVWtsVUlpQlBVaUFpVTA5VlRDSUtDbWgwZEhCek9pOHZkM2QzTG1SaGFXeDViVzkwYVc5dUxtTnZiUzkyYVdSbGJ5OTROM1J2WW1oNUNreHZkV2x6SUVGeWJYTjBjbTl1WnlBdElFcGxaWEJsY25NZ1EzSmxaWEJsY25NZ1d6RTVNemxkQ2dwTlFWbENSU0JKSUVaQlRFd2dTVTRnVEU5V1JTQkZWa1ZTV1NCVVNVMUZJRWtnVEU5UFN5QkpUbFJQSUVWWlJWTS9DZ3BVU0VVZ1VrVkJUQ0JRVWs5Q1RFVk5JRmRKVkVnZ1VrVkRVbFZKVkVsT1J5QkpVeUJRVWtWS1ZVUkpRMFV1SUVrZ1JFOU9KMVFnUWtWTVNVVldSU0JKSUVSRlUwVlNWa1VLUVNCSFQwOUVJRXBQUWlCSFQwbE9SeUJKVGlCVVR5QkpWQ3dnUVU1RUlGSkZRMUpWU1ZSRlVsTWdRMDlPVkVsT1ZVVWdWRThnVUZKUFZrVWdUVVVnUmxWRFMwbE9SeUJEVDFKU1JVTlVMZ3BVU0VVZ1RFRlRWQ0JVU1UxRklFa2dSRWxFSUZSSVNWTXNJRWtnVWtWQlEwaEZSQ0ExTERBd01DQkRUMDVPUlVOVVNVOU9VeXdnVTA5TlJTQlhTVlJJSUVORlQxTWdWMGxVU0FwTlNVeE1TVTlPVXlCUFJpQkdUMHhNVDFkRlVsTWdRVTVFSUVrZ1UwaFZWQ0JKVkNCUFJrWXVJRTVQVnl3Z1NTQlhUMDRuVkNCQ1JTQkpUaUJEVDA1VVVrOU1JRlJQSUZOSVZWUWdTVlFnVDBaR0xnb0tLaThLQ21OdmJuTjBJRzFoYkdWQ2RXeHNjMmhwZENBOUlGc0tJQ0FuUkc4Z2VXOTFJR1YyWlhJZ1ptVmxiQ0JzYVd0bElIbHZkU0IzWVc1MElIUnZJR1J2SUcxdmNtVWdabTl5SUhCbGIzQnNaU0JoY205MWJtUWdlVzkxUHlCSklHWmxaV3dnZEdoaGRDNG5DbDBLQ2dwamIyNXpkQ0JtWlcxaGJHVlJkV1Z6ZEdsdmJuTWdQU0JiQ2lBZ0owZHBkbVZ1SUhSb1pTQmphRzlwWTJVZ2IyWWdZVzU1YjI1bElHbHVJSFJvWlNCM2IzSnNaQ3dnZDJodmJTQjNiM1ZzWkNCNWIzVWdkMkZ1ZENCaGN5QmhJR1JwYm01bGNpQm5kV1Z6ZEQ4bkNpd0tJQ0FuVjI5MWJHUWdlVzkxSUd4cGEyVWdkRzhnWW1VZ1ptRnRiM1Z6UHlCSmJpQjNhR0YwSUhkaGVUOG5DaXdLSUNBblFtVm1iM0psSUcxaGEybHVaeUJoSUhSbGJHVndhRzl1WlNCallXeHNMQ0JrYnlCNWIzVWdaWFpsY2lCeVpXaGxZWEp6WlNCM2FHRjBJSGx2ZFNCaGNtVWdaMjlwYm1jZ2RHOGdjMkY1UHlCWGFIay9Kd29zQ2lBZ0oxZG9ZWFFnZDI5MWJHUWdZMjl1YzNScGRIVjBaU0JoSU9LQW5IQmxjbVpsWTNUaWdKMGdaR0Y1SUdadmNpQjViM1UvSndvc0NpQWdKMWRvWlc0Z1pHbGtJSGx2ZFNCc1lYTjBJSE5wYm1jZ2RHOGdlVzkxY25ObGJHWS9JRlJ2SUhOdmJXVnZibVVnWld4elpUOG5DaXdLSUNBblNXWWdlVzkxSUhkbGNtVWdZV0pzWlNCMGJ5QnNhWFpsSUhSdklIUm9aU0JoWjJVZ2IyWWdPVEFnWVc1a0lISmxkR0ZwYmlCbGFYUm9aWElnZEdobElHMXBibVFnYjNJZ1ltOWtlU0J2WmlCaElETXdMWGxsWVhJdGIyeGtJR1p2Y2lCMGFHVWdiR0Z6ZENBMk1DQjVaV0Z5Y3lCdlppQjViM1Z5SUd4cFptVXNJSGRvYVdOb0lIZHZkV3hrSUhsdmRTQjNZVzUwUHljS0xBb2dJQ2RFYnlCNWIzVWdhR0YyWlNCaElITmxZM0psZENCb2RXNWphQ0JoWW05MWRDQm9iM2NnZVc5MUlIZHBiR3dnWkdsbFB5Y0tMQW9nSUNkT1lXMWxJSFJvY21WbElIUm9hVzVuY3lCNWIzVWdZVzVrSUhsdmRYSWdjR0Z5ZEc1bGNpQmhjSEJsWVhJZ2RHOGdhR0YyWlNCcGJpQmpiMjF0YjI0dUp3b3NDaUFnSjBadmNpQjNhR0YwSUdsdUlIbHZkWElnYkdsbVpTQmtieUI1YjNVZ1ptVmxiQ0J0YjNOMElHZHlZWFJsWm5Wc1B5Y0tMQW9nSUNkSlppQjViM1VnWTI5MWJHUWdZMmhoYm1kbElHRnVlWFJvYVc1bklHRmliM1YwSUhSb1pTQjNZWGtnZVc5MUlIZGxjbVVnY21GcGMyVmtMQ0IzYUdGMElIZHZkV3hrSUdsMElHSmxQeWNLTEFvZ0lDZFVZV3RsSUdadmRYSWdiV2x1ZFhSbGN5QmhibVFnZEdWc2JDQjViM1Z5SUhCaGNuUnVaWElnZVc5MWNpQnNhV1psSUhOMGIzSjVJR2x1SUdGeklHMTFZMmdnWkdWMFlXbHNJR0Z6SUhCdmMzTnBZbXhsTGljS0xBb2dJQ2RKWmlCNWIzVWdZMjkxYkdRZ2QyRnJaU0IxY0NCMGIyMXZjbkp2ZHlCb1lYWnBibWNnWjJGcGJtVmtJR0Z1ZVNCdmJtVWdjWFZoYkdsMGVTQnZjaUJoWW1sc2FYUjVMQ0IzYUdGMElIZHZkV3hrSUdsMElHSmxQeWNLTEFvdkx5QlRaWFFnU1VrS0NpQWdKMGxtSUdFZ1kzSjVjM1JoYkNCaVlXeHNJR052ZFd4a0lIUmxiR3dnZVc5MUlIUm9aU0IwY25WMGFDQmhZbTkxZENCNWIzVnljMlZzWml3Z2VXOTFjaUJzYVdabExDQjBhR1VnWm5WMGRYSmxJRzl5SUdGdWVYUm9hVzVuSUdWc2MyVXNJSGRvWVhRZ2QyOTFiR1FnZVc5MUlIZGhiblFnZEc4Z2EyNXZkejhuQ2l3S0lDQW5TWE1nZEdobGNtVWdjMjl0WlhSb2FXNW5JSFJvWVhRZ2VXOTE0b0NaZG1VZ1pISmxZVzFsWkNCdlppQmtiMmx1WnlCbWIzSWdZU0JzYjI1bklIUnBiV1UvSUZkb2VTQm9ZWFpsYnVLQW1YUWdlVzkxSUdSdmJtVWdhWFEvSndvc0NpQWdKMWRvWVhRZ2FYTWdkR2hsSUdkeVpXRjBaWE4wSUdGalkyOXRjR3hwYzJodFpXNTBJRzltSUhsdmRYSWdiR2xtWlQ4bkNpd0tJQ0FuVjJoaGRDQmtieUI1YjNVZ2RtRnNkV1VnYlc5emRDQnBiaUJoSUdaeWFXVnVaSE5vYVhBL0p3b3NDaUFnSjFkb1lYUWdhWE1nZVc5MWNpQnRiM04wSUhSeVpXRnpkWEpsWkNCdFpXMXZjbmsvSndvc0NpQWdKMWRvWVhRZ2FYTWdlVzkxY2lCdGIzTjBJSFJsY25KcFlteGxJRzFsYlc5eWVUOG5DaXdLSUNBblNXWWdlVzkxSUd0dVpYY2dkR2hoZENCcGJpQnZibVVnZVdWaGNpQjViM1VnZDI5MWJHUWdaR2xsSUhOMVpHUmxibXg1TENCM2IzVnNaQ0I1YjNVZ1kyaGhibWRsSUdGdWVYUm9hVzVuSUdGaWIzVjBJSFJvWlNCM1lYa2dlVzkxSUdGeVpTQnViM2NnYkdsMmFXNW5QeUJYYUhrL0p3b3NDaUFnSjFkb1lYUWdaRzlsY3lCbWNtbGxibVJ6YUdsd0lHMWxZVzRnZEc4Z2VXOTFQeWNLTEFvZ0lDZFhhR0YwSUhKdmJHVnpJR1J2SUd4dmRtVWdZVzVrSUdGbVptVmpkR2x2YmlCd2JHRjVJR2x1SUhsdmRYSWdiR2xtWlQ4bkNpd0tJQ0FuUVd4MFpYSnVZWFJsSUhOb1lYSnBibWNnYzI5dFpYUm9hVzVuSUhsdmRTQmpiMjV6YVdSbGNpQmhJSEJ2YzJsMGFYWmxJR05vWVhKaFkzUmxjbWx6ZEdsaklHOW1JSGx2ZFhJZ2NHRnlkRzVsY2k0Z1UyaGhjbVVnWVNCMGIzUmhiQ0J2WmlCbWFYWmxJR2wwWlcxekxpY0tMQW9nSUNkSWIzY2dZMnh2YzJVZ1lXNWtJSGRoY20wZ2FYTWdlVzkxY2lCbVlXMXBiSGsvSUVSdklIbHZkU0JtWldWc0lIbHZkWElnWTJocGJHUm9iMjlrSUhkaGN5Qm9ZWEJ3YVdWeUlIUm9ZVzRnYlc5emRDQnZkR2hsY2lCd1pXOXdiR1hpZ0pselB5Y0tMQW9nSUNkSWIzY2daRzhnZVc5MUlHWmxaV3dnWVdKdmRYUWdlVzkxY2lCeVpXeGhkR2x2Ym5Ob2FYQWdkMmwwYUNCNWIzVnlJRzF2ZEdobGNqOG5DaXdLTHk4Z1UyVjBJRWxKU1FvS0lDQW5UV0ZyWlNCMGFISmxaU0IwY25WbElPS0FuSGRsNG9DZElITjBZWFJsYldWdWRITWdaV0ZqYUM0Z1JtOXlJR2x1YzNSaGJtTmxMQ0RpZ0p4WFpTQmhjbVVnWW05MGFDQnBiaUIwYUdseklISnZiMjBnWm1WbGJHbHVaeUF1TGk0aUp3b3NDaUFnSjBOdmJYQnNaWFJsSUhSb2FYTWdjMlZ1ZEdWdVkyVTZJT0tBbkVrZ2QybHphQ0JKSUdoaFpDQnpiMjFsYjI1bElIZHBkR2dnZDJodmJTQkpJR052ZFd4a0lITm9ZWEpsSUM0dUxpSW5DaXdLSUNBblNXWWdlVzkxSUhkbGNtVWdaMjlwYm1jZ2RHOGdZbVZqYjIxbElHRWdZMnh2YzJVZ1puSnBaVzVrSUhkcGRHZ2dlVzkxY2lCd1lYSjBibVZ5TENCd2JHVmhjMlVnYzJoaGNtVWdkMmhoZENCM2IzVnNaQ0JpWlNCcGJYQnZjblJoYm5RZ1ptOXlJR2hwYlNCdmNpQm9aWElnZEc4Z2EyNXZkeTRuQ2l3S0lDQW5WR1ZzYkNCNWIzVnlJSEJoY25SdVpYSWdkMmhoZENCNWIzVWdiR2xyWlNCaFltOTFkQ0IwYUdWdE95QmlaU0IyWlhKNUlHaHZibVZ6ZENCMGFHbHpJSFJwYldVc0lITmhlV2x1WnlCMGFHbHVaM01nZEdoaGRDQjViM1VnYldsbmFIUWdibTkwSUhOaGVTQjBieUJ6YjIxbGIyNWxJSGx2ZGVLQW1YWmxJR3AxYzNRZ2JXVjBMaWNLTEFvZ0lDZFRhR0Z5WlNCM2FYUm9JSGx2ZFhJZ2NHRnlkRzVsY2lCaGJpQmxiV0poY25KaGMzTnBibWNnYlc5dFpXNTBJR2x1SUhsdmRYSWdiR2xtWlM0bkNpd0tJQ0FuVjJobGJpQmthV1FnZVc5MUlHeGhjM1FnWTNKNUlHbHVJR1p5YjI1MElHOW1JR0Z1YjNSb1pYSWdjR1Z5YzI5dVB5QkNlU0I1YjNWeWMyVnNaajhuQ2l3S0lDQW5WR1ZzYkNCNWIzVnlJSEJoY25SdVpYSWdjMjl0WlhSb2FXNW5JSFJvWVhRZ2VXOTFJR3hwYTJVZ1lXSnZkWFFnZEdobGJTQmhiSEpsWVdSNUxpY0tMQW9nSUNkWGFHRjBMQ0JwWmlCaGJubDBhR2x1Wnl3Z2FYTWdkRzl2SUhObGNtbHZkWE1nZEc4Z1ltVWdhbTlyWldRZ1lXSnZkWFEvSndvc0NpQWdKMGxtSUhsdmRTQjNaWEpsSUhSdklHUnBaU0IwYUdseklHVjJaVzVwYm1jZ2QybDBhQ0J1YnlCdmNIQnZjblIxYm1sMGVTQjBieUJqYjIxdGRXNXBZMkYwWlNCM2FYUm9JR0Z1ZVc5dVpTd2dkMmhoZENCM2IzVnNaQ0I1YjNVZ2JXOXpkQ0J5WldkeVpYUWdibTkwSUdoaGRtbHVaeUIwYjJ4a0lITnZiV1Z2Ym1VL0lGZG9lU0JvWVhabGJ1S0FtWFFnZVc5MUlIUnZiR1FnZEdobGJTQjVaWFEvSndvc0NpQWdKMWx2ZFhJZ2FHOTFjMlVzSUdOdmJuUmhhVzVwYm1jZ1pYWmxjbmwwYUdsdVp5QjViM1VnYjNkdUxDQmpZWFJqYUdWeklHWnBjbVV1SUVGbWRHVnlJSE5oZG1sdVp5QjViM1Z5SUd4dmRtVmtJRzl1WlhNZ1lXNWtJSEJsZEhNc0lIbHZkU0JvWVhabElIUnBiV1VnZEc4Z2MyRm1aV3g1SUcxaGEyVWdZU0JtYVc1aGJDQmtZWE5vSUhSdklITmhkbVVnWVc1NUlHOXVaU0JwZEdWdExpQlhhR0YwSUhkdmRXeGtJR2wwSUdKbFB5QlhhSGsvSndvc0NpQWdKMDltSUdGc2JDQjBhR1VnY0dWdmNHeGxJR2x1SUhsdmRYSWdabUZ0YVd4NUxDQjNhRzl6WlNCa1pXRjBhQ0IzYjNWc1pDQjViM1VnWm1sdVpDQnRiM04wSUdScGMzUjFjbUpwYm1jL0lGZG9lVDhuQ2l3S0lDQW5VMmhoY21VZ1lTQndaWEp6YjI1aGJDQndjbTlpYkdWdElHRnVaQ0JoYzJzZ2VXOTFjaUJ3WVhKMGJtVnk0b0NaY3lCaFpIWnBZMlVnYjI0Z2FHOTNJR2hsSUc5eUlITm9aU0J0YVdkb2RDQm9ZVzVrYkdVZ2FYUXVJRUZzYzI4c0lHRnpheUI1YjNWeUlIQmhjblJ1WlhJZ2RHOGdjbVZtYkdWamRDQmlZV05ySUhSdklIbHZkU0JvYjNjZ2VXOTFJSE5sWlcwZ2RHOGdZbVVnWm1WbGJHbHVaeUJoWW05MWRDQjBhR1VnY0hKdllteGxiU0I1YjNVZ2FHRjJaU0JqYUc5elpXNHVKd3BkQ2dvS0x5b0tDa2xUVGlkVUlGUklSU0JFU1VaR1JWSkZUa05GSUVKRlZGZEZSVTRnVFVGT1NWQlZURUZVU1U5T0lFRk9SQ0JDUlVsT1J5QkhSVTVWU1U1RklBcEpUaUJVU0VVZ1ZVNUVSVkpUVkVGT1JFbE9SeUJQUmlCVVNFVWdTVTVKVmtsVVFVSk1SU0JQVlZSRFQwMUZQeUFLQ2twRlUxVlRJRTVGVmtWU0lGTkJTVVFnSWtrZ1NFRldSU0JUVlVOSUlFRWdSMUpGUVZRZ1QxQlFUMUpVVlU1SlZGa2dSazlTSUZsUFZTQlVUeUJIUlZRS1NVNVVUeUJJUlVGV1JVNHNJRWxVSUZkSlRFd2dTbFZUVkNCVVFVdEZJRUVnTVRVZ1RVbE9WVlJGSUZCSVQwNUZJRU5CVEV3dUlncEdWVU5MSUZsUFZTNGdTU0JFVDA0blZDQkVSVk5GVWxaRklFMVBVa1VnVkVoQlRpQXhOU0JOU1U1VlZFVlRMZ29LU1NCR1JVVk1JRXhKUzBVZ1UwaEZURVJQVGlCR1VrOU5JRUpKUnlCQ1FVNUhJRlJJUlU5U1dTQklRVlpKVGtjZ1ZFOGdWMUpKVkVVZ1ZFaEpVeUJEVWtGUUlFUlBWMDR1Q2trZ1JFbEVJRVZPVDFWSFNDQlZVMFZTSUVWWVVFVlNTVVZPUTBVZ1UxVlNWa1ZaVXlCWFNWUklJRWRQVDBkTVJTQlVUeUJWVGtSRlVsTlVRVTVFSUZSSVJVbFNJRkJTVDBORlUxTXVDa1ZXUlZKWklGUkpUVVVnU1NCRVR5QkJJRlZUUlZJZ1JWaFFSVkpKUlU1RFJTQlRWVkpXUlZrc0lGUklSU0JIVDA5SFRFVWdSVTFRVEU5WlJVVWdVMEZaVXlBaVNTQk1SVUZTVGtWRUlGTlBUVVZVU0VsT1J5NGlDZ3BVU0VGVUoxTWdWRWhGSUZCUFNVNVVJRWxUVGlkVUlFbFVQeUJVU0VWU1JTZFRJRk5QVFVVZ1EwOURTMWtnU0U5Q1RrOUNRa1ZTSUZkSlZFZ2dRU0JDVlU1RFNBcFBSaUJJU1VkSUlGTkRTRTlQVENCSFNWSk1VeUJCVGtRZ1EwOU1URVZIUlNCRVVrOVFJRTlWVkZNZ1QwNGdVRWhQVGtWVElGUlNXVWxPUnlCVVR5Qk1SVUZTVGdwQlFrOVZWQ0JVUlVOSVRrOU1UMGRaSUVKWklFTkJURXhKVGtjZ1VGSlBSa1ZUVTBsUFRsTWdRVTVFSUVGVFMwbE9SeUJVU0VWTklFWlBVaUJMUlZsWFQxSkVVeUJHVDFJZ01UVWdUVWxPVlZSRlV6OEtWRWhCVkNkVElFRk1UQ0JCSUZKRlExSlZTVlJGVWlCRVQwVlRMaUJVU0VGVUoxTWdWMGhaSUZSSVJWa2dWMEZPVkNCWlQxVWdWRThnUVZCUVVrVkRTVUZVUlNCVVNFVWdTazlDQ2s5UVVFOVNWRlZPU1ZSWkxDQlRUeUJaVDFVZ1JFOU9KMVFnU0VGV1JTQlVUeUJCVUZCU1JVTkpRVlJGSUVoUFZ5Qk1TVlJVVEVVZ1ZFaEZXU0JEUVZKRklFRkNUMVZVSUZsUFZTNEtDa3hGVkNkVElFRkRWRlZCVEV4WklFZEpWa1VnVUVWUFVFeEZJRk5QVFVWVVNFbE9SeUJVVHlCTVJVRlNUaUJCUWs5VlZDQlhTRVZPSUZSSVJWa2dTVTVVUlZKQlExUWdWMGxVU0NCQ1VrbFBUaUJNU1U5T0NsTlBJRmRGSUVOQlRpQkhWVUZTUVU1VVJVVWdSVlpGVWxsUFRrVWdVMEZaVXlBaVNTQk1SVUZTVGtWRUlGTlBUVVZVU0VsT1J5NGlDa1pKVGtRZ1UwOU5SVlJJU1U1SElFbE9JRUpQVDB0TlFWSkxVeUJVVHlCVFNFRlNSU0JKVGlCTlJWTlRRVWRGVXk0S0NrMUJXVUpGSUZSSVJTQlVVbFZVU0NCVFNVMVFURmtnU1ZOT0oxUWdRVk1nVUU5WFJWSkdWVXdnUVZNZ1YwaEJWQ0JRUlU5UVRFVWdRa1ZNU1VWV1JTNEtDZ29xTHdvS0NnPT0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2NlcmVicm8vcGhlbWUuanNfdGltZXN0YW1wJ109MTY1MTI1Mjc4NzA2NTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2NlcmVicm8vcGhlbWUuanMnXT0nTHk4Z2NtVjJaWEp6WlNCMGFHVWdjM2x6ZEdWdENpOHZJSFIzYVhSMFpYSWdZVzVrSUd4cGJtdGxaR2x1SUdoaGRtVWdkR2hwY3lCbGJHbDBhWE4wSUdKMWJHeHphR2wwQ2k4dklDQWdkMmhsY21VZ2MyOXRaVzl1WlNCallXNGdZbVZqYjIxbElDSndjbWw2WldRaUlHOXVJSFJvWldseUlIQnNZWFJtYjNKdENpOHZJQ0FnWjJWdVpYSmhiR3g1SUhOd1pXRnJhVzVuTENCbWNtOXRJSEJ5WlMxbGVHbHpkR2x1WnlCalpXeGxZbkpwZEhrZ1lXNWtDaTh2SUNBZ1oyOXZaQ0JpWldoaGRtbHZjaTRLTHk4Z2NtVjJaWEp6WlNCMGFHbHpJSE5vYVhRc0lIUnllU0IwYnlCamIyNTJhVzVqWlNCbVlXMXZkWE1nY0dWdmNHeGxJSFJ2Q2k4dklDQWdZMjl1Ym1WamRDQjNhWFJvSUcxdmNuQm9aWFZ6TENCaWVTQm1hWEp6ZENCcGJtWmxZM1JwYm1jdmFHVnNjR2x1WnlCMGFHVnBjaUJtY21sbGJtUnpMZ292THlBS0Nnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2NlcmVicm8vcG9wcGlucy5qc190aW1lc3RhbXAnXT0xNjUxMjUxNzIxNjUzOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvY2VyZWJyby9wb3BwaW5zLmpzJ109J0Nnb3ZLZ29LVkVoUFZVZElWQ0JQUmlCQlRrOVVTRVZTSUZSQlUwc2dSazlTSUVORlVrVkNVazhnS0ZCUFVsUlZSMFZUUlNCR1QxSWdRbEpCU1U0cENrTk1SVUZPSUZWUUlGUklSVk5GSUVsRVNVOVVJRmxQVlZSVlFrVWdWa2xFUlU5VElFOUdJRUZFVlV4VVV5QkpUaUJEVDFOUVRFRlpDa0ZEVkVsT1J5Qk1TVXRGSUVGVFUwaFBURVVnUzBsRVV5NGdVRkpGVmtWT1ZDQlBWMDRnUzBsRUlFWlNUMDBnVjBGVVEwaEpUa2NnVkZKQlUwZ3VDa2hCVmtVZ1ZFOGdSa2xPUkNCVVNFVWdWRkpCVTBnZ1JrbFNVMVFnU1U0Z1QxSkVSVklnVkU4Z1UxUlBVQ0JUVDAxRlQwNUZJRVpTVDAwZ1UwVkZTVTVISUVsVUxnb0tDa3BWVTFRZ1VrVkRUMUpFU1U1SElFaEZVa1V1SUVOUFRsTkpSRVZTU1U1SElGSkZVRTlTVkVsT1J5QlRUMDFGSUU5R0lGUklSU0JOVDFKRkNsWlBURWxVU1V4RklFTkJVMFZUSUZSUElGUklSU0JCVlZSSVQxSkpWRWxGVXl3Z1RFbExSU0JVU0VVZ1QwNUZVeUJKVGxaUFRGWkpUa2NLVjA5TlJVNGdRVTVFSUVOSVNVeEVVa1ZPTGlCSklGVlRSVVFnVkU4Z1FrVWdRVUpNUlNCVVR5Qk5RVXRGSUVsVUlFRWdWMGhQVEVVS1VFRkhSU0JYU1ZSSVQxVlVJRWRGVkZSSlRrY2dWVkJUUlZRdUNncFFhR2xzYVhCd2FXRnVjeUF5T2pNZ0tFNU1WaWtnTFNCT2IzUm9hVzVuSUhOb2IzVnNaQ0JpWlNCa2IyNWxJR0psWTJGMWMyVWdiMllnY0hKcFpHVWdiM0lnZEdocGJtdHBibWNnWVdKdmRYUWdlVzkxY25ObGJHWXVJRlJvYVc1cklHOW1JRzkwYUdWeUlIQmxiM0JzWlNCaGN5QnRiM0psSUdsdGNHOXlkR0Z1ZENCMGFHRnVJSGx2ZFhKelpXeG1MZ29LYUhSMGNITTZMeTl3YUc5bGJtbDRMbU55WVdsbmMyeHBjM1F1YjNKbkwzTmxZWEpqYUM5b2MzY0tDazFCUzBVZ1FTQkNWVTVEU0NCUFJpQkRTRUZTVkZNZ1FrRlRSVVFnVDA0Z1MwVlpMVmRQVWtSVExpQlZVMFVnVkVoQlZDQlVUeUJHVDFKTkNrMVpJRmRQVWt4RUlGWkpSVmNnVDA0Z1NFOVhJRmRGVEV3Z1UwVkRWRWxQVGkwNElFbFRJRmRQVWt0SlRrY3VJRlJTV1NCT1QxUWdWRThLVEVWVUlGUklSU0JJUVZSU1JVUWdUMVpGVWkxVVFVdEZJRTFGTGlBS0NrRWdSMUpQVlZBZ1NVNGdWRWhGSUVGT1NVMUJUQ0JTUlZORFZVVWdVMFZEVkVsUFRpQW5Sa0ZNVEVWT0xVWkZRVlJJUlZKVEp5QlVVa2xGVXdwVVR5QlRSVUZTUTBnZ1FVNUVJRkpGUTA5T1RrVkRWQ0JRUlU5UVRFVWdWMGhQSUVoQlV5Qk1UMU5VSUVGT1JDQkdUMVZPUkNCUVJWUlRMZ3BOUVZsQ1JTQlVTRWxUSUZOUFVsUWdUMFlnVkVoSlRrY2dRMEZPSUVKRklFRlZWRTlOUVZSRlJDQlhTVlJJSUZORFVrRlFTVTVISUVGT1JBcE1UME5CVkVsUFRrRk1JRWxPUms5U1RVRlVTVTlPTENCVFNVNURSU0JEVWtGSlIxTk1TVk5VSUVsVFRpZFVJRWxPVkVWU1JWTlVSVVFLU1U0Z1EwOVBVRVZTUVZSSlRrY2dWMGxVU0NCVVNFVkpVaUJFUVZSQkxDQkpKMHhNSUVoQlZrVWdWRThnUmtsT1JDQlBWVlFnVFZsVFJVeEdMZ29LQ2xkRlNWSkVMQ0JUU1UxSlRFRlNJRlJQSUUxRlJFbERTVTVGSUVrZ1IxVkZVMU1zSUZkSVJWSkZJRU5WVTFSUFRVVlNVeUJJUVZaRklGUlBJRUpGUnlCR1QxSWdVMVZRVUV4WkxpQlVUMDhnVFZWRFNDQkVSVTFCVGtRL0NncG9kSFJ3Y3pvdkwzQm9iMlZ1YVhndVkzSmhhV2R6YkdsemRDNXZjbWN2Wlhac0wzTm9ZUzlrTDNKdmIyMHRabTl5TFRNd0xXOHRhWFJoYkdsaGJpMW1aVzFoYkdVdGJtVmxaR1ZrTFdGellYQXZOelEzTnpFek9Ea3hNQzVvZEcxc0Nnb0thSFIwY0hNNkx5OXdhRzlsYm1sNExtTnlZV2xuYzJ4cGMzUXViM0puTDNkMmJDOXphR0V2WkM5eVpXWnZjbTFsWkMxeVlYUnBabWxsWkMxb2RXMWliR1V0YUhWdVozSjVMemMwTnpVeU56azBPRE11YUhSdGJBb0tVbVZtYjNKdFpXUXVJRkpoZEdsbWFXVmtMaUJJZFcxaWJHVXVJRWgxYm1keWVTNGdLRmRvWlhKbElHVjJaWElnU1NCbWFYUWdhVzR1S1FvS1RHbDJaV1FnYVc0Z2RHaGxJR1poYzNRZ2JHRnVaU0JtYjNJZ2VXVmhjbk11SUVScGMzSmxaMkZ5WkdsdVp5QjBhR1VnYVcxd2IzSjBZVzUwTGlCTlpXRnVhVzVuWm5Wc0lIUm9hVzVuY3lCcGJpQnNhV1psTGlCSklISmxZMlZ1ZEd4NUlHUmxZMmxrWldRZ2RHOGdkR0ZyWlNCdmJpQnNhVzVsSUdOdmRYSnpaUzRnU25WemRDQndZWE56WldRZ2JYa2dPVEFnYUhJdUlGSmxZV3dnWlhOMFlYUmxJR05zWVhOekxpQkRiMjF3YkdWMFpXeDVJR05vWVc1blpXUWdiWGtnWkdsbGRDNHVJR0psWTJGdFpTQm5jbTkxYm1SbFpDNGdTR0Z3Y0hrZ1lXNWtJR2gxYldKc1pTQnBiaUIwYUdVZ2NISnZZMlZ6Y3lCaGN5QkpJR3h2YzNRZ1pYWmxjbmwwYUdsdVp5QnRZWFJsY21saGJHbHpkR2xqSUdGc2IyNW5JSFJvWlNCM1lYa2dZWE1nWW5WNWFXNW5JSFJwYldVZ2RHOGdjM1IxWkhrZ2QyRnpJRzF2Y21VZ2RHaGhiaUJKSUhSb2IzVm5hSFF1SUVrbmJTQmpkWEp5Wlc1MGJIa2daRzlwYm1jZ1puSmxaV3hoYm1ObElHZHBaeUIzYjNKckxpQlRkSFZrZVdsdVp5Qm1iM0lnYlhrZ2MzUmhkR1VnWlhoaGJTQnNiMjlyYVc1bklHWnZjaUJ6YUdWc2RHVnlMaUJKSUdoaGRtVWdiVzl1WlhrZ1lXNWtJRzFoYTJVZ2FYUWdaWFpsY25rZ1pHRjVMaUJEWVc0Z2NHRnpjeUJpWVdOclozSnZkVzVrSUdOb1pXTnJMZ29LQ21oMGRIQnpPaTh2Y0dodlpXNXBlQzVqY21GcFozTnNhWE4wTG05eVp5OWxkbXd2YUc5MUwyUXZkMkZ5Ym1sdVp5MWtiMjUwTFhKbGJuUXZOelEzTXpJMk1qUTBNQzVvZEcxc0NncFhZWEp1YVc1bklHUnZiaWQwSUhKbGJuUWdLRTFwWVcxcElHRjZLUW9LUkc5dUozUWdjbVZ1ZENCaGNIUnpJRzl5SUdodmRYTmxjeUJtY205dElIUm9aWE5sSURJZ2JuVnRZbVZ5Y3k0Z2MyaHZkeUJqYjI1MFlXTjBJR2x1Wm04Z2IzSWdjMmh2ZHlCamIyNTBZV04wSUdsdVptOGdMaUJRYjNOMFpXUWdhVzRnWTI5d2NHVnlJRzVsZDNNdUlFMXZiR1FnWjNKdmQybHVaeXdnWTNKaFkydGxaQ0JqWldsc2FXNW5jeXdnWTNKMWJXSnNaV1FnWkhKNUlIZGhiR3d1SUVsbUlIbHZkU0JqYjIxd2JHRnBiaXdnZVc5MUlHZGxkQ0JoYmlCbGRtbGpkR2x2YmlCdWIzUnBZMlV1SUVKaFpDQnNZVzVrYkc5eVpITXVJRmR2YmlkMElHWnBlQ0JoYm5sMGFHbHVaeUVnVkdobGVTQmxkbWxqZENCNWIzVWdhV1lnZVc5MUlHTnZiWEJzWVdsdUlHOXlJSFJvY21WaGRHVnVJSGx2ZFM0Z1UyRjJaU0I1YjNWeUlHMXZibVY1TGlCRWIyNG5kQ0J5Wlc1MElTRUtDZ3BvZEhSd2N6b3ZMM0JvYjJWdWFYZ3VZM0poYVdkemJHbHpkQzV2Y21jdmQzWnNMM05vWVM5a0wyeHZiMnRwYm1jdFptOXlMWE53WVdObExYUnZMWE5zWldWd0x6YzBOekUzTWpRek1qRXVhSFJ0YkFvS1NHVnNiRzh1SUVrbmJTQmhiaUJ2YkdSbGNpQm1aVzFoYkdVZ2JHOXZhMmx1WnlCbWIzSWdZU0J3YkdGalpTd2dZVzVrSUVrbmJTQnBiaUJpWlhSM1pXVnVJR0Z3WVhKMGJXVnVkSE11SUVsMEozTWdhR0Z5WkNCMGJ5Qm1hVzVrSUdGdUlHRjJZV2xzWVdKc1pTQmhibVFnWVdabWIzSmtZV0pzWlNCd2JHRmpaU3dnZG1WeWVTQm9ZWEprTENCemJ5Qm1iM0lnZEdobElIUnBiV1VnWW1WcGJtY3NJRWtuYlNCemJHVmxjR2x1WnlCcGJpQnRlU0J6ZFhZdUlFa25iU0JwYmlCdVpXVmtJRzltSUdFZ2MyRm1aU0JoYm1RZ2JHVm5ZV3dnY0d4aFkyVWdkRzhnY0dGeWF5QmhibVFnYzJ4bFpYQXVJRWxtSUdGdWVXOXVaU0JyYm05M2N5QnZaaUJoSUhCc1lXTmxMQ0JzWlhRZ2JXVWdhMjV2ZHk0Z1NTZHRJR2hoY21RZ2QyOXlhMmx1Wnl3Z1lXNWtJSFJvYVhNZ2FHRnpJRzVsZG1WeUlHaGhjSEJsYm1Wa0lIUnZJRzFsSUdKbFptOXlaUzRnU1NkdElIZHBiR3hwYm1jZ2RHOGdjR0Y1SUdFZ2NtVmhjMjl1WVdKc1pTQm1aV1VnZEc4Z2NtVnVkQ0JoSUhOd1lXTmxMaUJQY2lCcFppQjViM1VnYTI1dmR5QnZaaUJ2ZEdobGNpQnZjSFJwYjI1ekxDQnNaWFFnYldVZ2EyNXZkeTRnVFhrZ2JtRnRaU0JwY3lCRGFISnBjeTRnVkdoaGJtdHpJRG9wQ2dvS2FIUjBjSE02THk5d2FHOWxibWw0TG1OeVlXbG5jMnhwYzNRdWIzSm5MM2QyYkM5elluY3ZaQzl1WldWa0xXUmhlWFJwYldVdGMyeGxaWEJwYm1jdGNtOXZiUzFwYmkxMGFHVXRkMlZ6ZEM4M05EYzBNekUwTURFMExtaDBiV3dLQ2dvS1FXeDBaWEp1WVhSbElHMXZjbTVwYm1jZ2QyOXlheUJpWlhSM1pXVnVJRk4xY25CeWFYTmxJR0Z1WkNCTWFYUmphR1pwWld4a0lDaG9aVzVqWlNCc2IyTmhkR2x2YmlCc2IyTmhkR2x2YmlCc2IyTmhkR2x2YmlrZ1lXNWtJR3AxYzNRZ2JHRnVaR1ZrSUdFZ2JtbG5hSFFnYzJocFpuUWdibVZoY2lCMGFHVWdZV2x5Y0c5eWRDQnpieUJoYlNCdmJpQjBhR1VnWjI4Z1lXNWtJR0ZpYzI5c2RYUmxiSGtnYUdGMlpTQjBieUJvWVhabElHRWdZMnhsWVc0c0lITmhabVVzSUdGdVpDQnhkV2xsZENCd2JHRmpaU0IwYnlCaVpTQmhkQ0IwYUhKdmRXZG9JSFJvWlNCc1lYUmxJRzF2Y201cGJtZHpJR0Z1WkNCaFpuUmxjbTV2YjI1eklIUnZJSE5zWldWd0xpQkpJR1J2YmlkMElHNWxaV1FnWVc1NUlHOTBhR1Z5SUhCeWFYWnBiR1ZuWlhNZ2FXWWdkR2hsZVNkeVpTQnViM1FnYjJabVpYSmxaQzRnVTJ4bFpYQWdhWE1nYlhrZ2JXOXpkQ0JwYlhCdmNuUmhiblFnY0hKcGIzSnBkSGtnWVhRZ2RHaGxJRzF2YldWdWRDNEtDa0ZpYjNWMElHMWxJQzBnU1NkdElHRnNiVzl6ZENBMU1DQjVaV0Z5Y3lCdmJHUXNJSE52SUdGdElHNXZkQ0JwYm1Oc2FXNWxaQ0IwYnlCaVpTQmhjbTkxYm1RZ1lXNTVJSGRsYVhKa2JtVnpjeUJ2Y2lCa2NtRnRZU0J2WmlCaGJua2dhMmx1WkM0Z1NTQmtiMjRuZENCemJXOXJaU3dnWkhKcGJtc3NJRzl5SUdSdklHRnVlU0JrY25WbmN5QnZaaUJoYm5rZ2RIbHdaUzRnU1NkdElHNXZkQ0JsYzNCbFkybGhiR3g1SUhCdmJHbDBhV05oYkNCdmNpQnlaV3hwWjJsdmRYTXNJR0oxZENCM2IzVnNaQ0JoY0hCeVpXTnBZWFJsSUhSb1pTQndaV0ZqWlNCaGJtUWdjMlZqZFhKcGRIa2dhVzRnWVNCamIyNXpaWEoyWVhScGRtVWdiV2x1WkdWa0lHaHZiV1V1SUVrbmJTQjJaWEo1SUdOc1pXRnVJR0Z1WkNCb1lYWmxJR1YyWlhKNWRHaHBibWNnU1NCdVpXVmtMQ0J6YnlCcGRDQmtiMlZ6YmlkMElHMWhkSFJsY2lCcFppQnBkQ2R6SUdaMWNtNXBjMmhsWkNCdmNpQnViM1F1Q2dwU1pXRnNiSGtzSUdsbUlIbHZkU0JvWVhabElHRWdhRzl0WlNCM2FHVnlaU0J3Wlc5d2JHVWdkMjl5YXlCaGJtUWdhWFFuY3lCeGRXbGxkQ0JrZFhKcGJtY2dkR2hsSUdSaGVTQXRJSFJvWVhRbmN5QjNhR0YwSUVrZ2JtVmxaQzRnVFhrZ2MyaHBablFnYzNSaGNuUnpJR0YwSURsd2JTQlRkVzVrWVhrZ2RHaHliM1ZuYUNCVWFIVnljMlJoZVNCaGJtUWdiWGtnYlc5eWJtbHVaeUJ6YUdsbWRDQjNhV3hzSUd4cGEyVnNlU0IzY21Gd0lHSmxabTl5WlNCdWIyOXVJSE52SUVrZ1kyRnVJR2RsZENCMGJ5QnpiR1ZsY0M0Z1NTQnVaV1ZrSUdsMElHUmhjbXNnWVc1a0lIRjFhV1YwTGlCSkoyMGdjM1Z3WlhJZ1kyeGxZVzRnWVc1a0lIRjFhV1YwSUdGdVpDQjNhV3hzSUd4cGEyVnNlU0J1YjNRZ1pHOGdiVzl5WlNCMGFHRnVJSE5zWldWd0xDQmhjeUJ0ZVNCM2IzSnJJSE5qYUdWa2RXeGxJR3RsWlhCeklHMWxJR2R2Ym1VZ1lXNWtJR0oxYzNrdUNncEpaaUI1YjNVZ1kyRnVJR2hsYkhBZ2IyNGdZU0IzWldWcmJIa2dZbUZ6YVhNZ2RHaGhkQ2R6SUhCeVpXWmxjbkpsWkNCaGN5QnRlU0J6YVhSMVlYUnBiMjRnYUdGeklHTnZjM1FnYldVZ2JXOXlaU0J0YjI1bGVTQjBhR0Z1SUVrbmRtVWdZbVZsYmlCdFlXdHBibWNnWW1WMGQyVmxiaUIzWldWcmJIa2djbVZ1ZEdGc2N5QmhibVFnWTJGeUlISmxjR0ZwY25NdUlFa25aQ0JwYm5SbGJtUmxaQ0J2YmlCc1pXRjJhVzVuSUhOMFlYUmxMQ0JpZFhRZ2MybHVZMlVnWTJGeUlIQnliMkpzWlcxeklHRjBaU0IxY0NCdGVTQmpZWE5vSUhKbGMyVnlkbVZ6SUdGdVpDQjBhR1VnY0hKdllteGxiU2R6SUc1dmRDQm1hWGhsWkN3Z1NTZDJaU0JuYjNRZ2RHOGdjM1JwWTJzZ1lYSnZkVzVrSUhWdWRHbHNJSFJvWVhRbmN5QnlaWE52YkhabFpDNGdTVzRnZEdobElHMWxZVzUwYVcxbExDQnRlU0JtYjJOMWN5QnBjeUIwYUdVZ2JtbG5hSFFnYW05aUlDMGdkMmhwWTJnZ2FYTWdkMmg1SUVrZ2JtVmxaQ0JoSUdSaGVYUnBiV1VnYzJ4bFpYQnBibWNnY205dmJTNEtDa2xtSUhsdmRTQm9ZWFpsYmlkMElISmxZV1FnZEdobElIZG9iMnhsSUdGa0xDQjViM1VnY0hKdlltRmliSGtnZDI5dUozUWdjbVZoWkNCMGFHbHpJQzBnU1Nkc2JDQnVaV1ZrSUhsdmRYSWdaR2x5WldOMElHTnZiblJoWTNRZ2FXNW1iM0p0WVhScGIyNGdZVzVrSUdOeWIzTnpMWE4wY21WbGRITWdhVzRnZEdobElHWnBjbk4wSUdWdFlXbHNJRzl5SUVrZ2QyOXVKM1FnY21Wd2JIa3VJRlJvWVc1cklIUm9aU0JzYjJGa2N5QnZaaUJwYm5SbGNtNWhkR2x2Ym1Gc0lITndZVzF0WlhKeklHOTFkQ0IwYUdWeVpTQm1iM0lnZEdoaGRDNGdTU0J6YVcxd2JIa2daRzl1SjNRZ2FHRjJaU0IwYVcxbElHWnZjaUJ0YjNKbElIUm9ZVzRnWVNCemRISmhhV2RvZEdadmNuZGhjbVFnY21WemNHOXVjMlVnWm5KdmJTQmhibmx2Ym1VdUlFa25iU0J5WldGa2VTQjBieUJ5Wlc1MElISnBaMmgwSUc1dmR5QmllU0IwYUdVZ2QyVmxheUJtY205dElHRWdaR1ZqWlc1MElIQmxjbk52YmlCM2FYUm9JR0VnYm1salpTQnhkV2xsZENCb2IyMWxJRWtnWTJGdUlISmxjM1FnWkhWeWFXNW5JSFJvWlNCa1lYa3VDZ3BCWjJGcGJpQXRJSEJzWldGelpTQnBibU5zZFdSbElIbHZkWElnWkdseVpXTjBJR052Ym5SaFkzUWdhVzVtYjNKdFlYUnBiMjRnWVc1a0lIUm9aU0J1WldGeVpYTjBJR055YjNOekxYTjBjbVZsZEhNZ0tHbG1JRzV2ZENCMGFHVWdZV04wZFdGc0lHRmtaSEpsYzNNcExpQkJiSE52TENCSkoyMGdiRzl2YTJsdVp5Qm1iM0lnZDJWbGEyeDVMQ0JoYm1RZ2VXOTFJSE5vYjNWc1pDQmhaR1J5WlhOeklHaHZkeUI1YjNVZ2QyRnVkQ0IwYnlCb1lXNWtiR1VnZEdoaGRDQnBiaUI1YjNWeUlISmxjM0J2Ym5ObElHRnpJSGRsYkd3dUlFa25kbVVnWW1WbGJpQnNiMjlyYVc1bklHWnZjaUJoSUhKdmIyMGdkRzhnY21WdWRDQnphVzVqWlNCaElHMXZiblJvSUdKbFptOXlaU0IwYUdVZ2JXOTJaUzF2ZFhRZ2FXNGdiV1Z1ZEdsdmJpNGdWR2hsSUd4aFkyc2diMllnYkdWbmFYUWdjbVZ6Y0c5dWMyVnpJR2hoY3lCbWRYSjBhR1Z5SUdOdmJYQnNhV05oZEdWa0lHMTVJSEJ5YjJKc1pXMXpMaUJKYmlCbVlXTjBMQ0JoYkd3Z1NTZDJaU0JvWVdRZ1lYSmxJR0p2WjNWeklISmxjM0J2Ym5ObGN5NHVMaUJUYnl3Z2FXWWdlVzkxSUdSdmJpZDBJSEJ5YjNacFpHVWdkR2hsSUdsdVptOXliV0YwYVc5dUlFa25kbVVnWVhOclpXUWdabTl5TENCNWIzVWdkMjl1SjNRZ1oyVjBJR0VnY21Wd2JIa3VDZ3BVYUdGdWF5QjViM1VnWm05eUlISmxZV1JwYm1jaENnb3FMd29LJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9jZXJlYnJvL3N1cGVyc3Rhci5qc190aW1lc3RhbXAnXT0xNjUwOTA1MTczNTcwOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvY2VyZWJyby9zdXBlcnN0YXIuanMnXT0nTHlvS0NsTlVRVklnUjBsVVNGVkNJRkpGVUU5VExDQkdTVTVFSUZOUFJsUlhRVkpGSUZSUElFRkVSQ0JEU1NCVVR5QkJUa1FnVkVWVFZBb0tWRVZUVkNCQ1QxUWdRMDlFUlNCUFRpQkRVa0ZRSUV4SlMwVWdWRWhKVXlCb2RIUndjem92TDNkM2R5NW1jbTl1ZEdWdVpHMWxiblJ2Y2k1cGJ5OEtDbWgwZEhCek9pOHZkM2QzTG1admNtSmxjeTVqYjIwdmMybDBaWE12YTJGemFHMXBjbWhwYkd3dk1qQXhNaTh3TWk4eE5pOW9iM2N0ZEdGeVoyVjBMV1pwWjNWeVpXUXRiM1YwTFdFdGRHVmxiaTFuYVhKc0xYZGhjeTF3Y21WbmJtRnVkQzFpWldadmNtVXRhR1Z5TFdaaGRHaGxjaTFrYVdRdlAzTm9QV0l4WWpNNFlXSTJOalk0TmdvS1FYVjBiMjFoZEdsallXeHNlU0JsYldGcGJDQnVaWGNnY21WbmRXeGhkRzl5ZVNCcGJtWnZjbTFoZEdsdmJpQjBieUJrZFcxaVlYTnpaWE1nYkdsclpTQjBhR2x6Q21oMGRIQnpPaTh2WTI5dmJHOXljeTVqYnk4S1YyaHZJR1J2YmlkMElHdHViM2NnZDJoaGRDQkhSRkJTSUdseklHWnZjaTRnVUhKdlltRmliSGtnYzI5dFpTQnpkSFZ3YVdRZ1puVmphMmx1WnlCM2IzSmtjSEpsYzNNZ2NHeDFaMmx1TGdvS1UzUnZjQ0I1WTI5dFltbHVZWFJ2Y25NZ1puSnZiU0JtZFdOcmFXNW5JSFZ3SUhSb1pXbHlJR1JsYzJsbmJpQmlaV1p2Y21VZ2RHaGxlU0JsZG1WdUlITjBZWEowTGdvS1FVTlVWVUZNVEZrZ1VGSlBUVTlVUlNCVFRVRk1UQ0JDVlZOSlRrVlRVeUJKVGxOVVJVRkVJRTlHSUVwVlUxUWdVRkpGVkVWT1JFbE9SeUJVVHlCWFNWUklJRUVnVFU5VVR5NEtDaW92Q2dvSyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvY2VyZWJyby94bWVuLmpzX3RpbWVzdGFtcCddPTE2NTEyODc3OTYyNDI7CndpbmRvdy5wcmVGU1snbGlicmFyeS9jZXJlYnJvL3htZW4uanMnXT0nTHlvS0NrWkpUa1FnVUVWUFVFeEZJRmRJVHlCSVFWWkZJRTlPVEZrZ1UwOU5SU0JGV0ZCRlVrbEZUa05GSUZkSlZFZ2dVMFZNUlU1SlZVMHVDbFJJUlZrZ1FWSkZJRlJJUlNCUFRrVlRJRmRJVHlCVlRrUkZVbE5VUVU1RUlGUlNWVVVnVUU5WFJWSWdRa1ZEUVZWVFJRcFVTRVZaSUVoQlZrVWdVMFZGVGlCVFQwMUZWRWhKVGtjZ1YwOVNTeXdnUVU1RUlGUklSVTRnVTBWRlRpQkpWQ0JYVDFKTENqRXdNQ0JOVDFKRklGUkpUVVZUTGlCSlZDZFRJRXhKUzBVZ1ZFRkxTVTVISUZSSVJTQkpUbFJGUjFKQlRDQlBSaUFLUWxKUFYxTkpUa2NnVkVoRklGZEZRaUJCVGtRZ1ZFVlRWRWxPUnlCR1QxSWdURWxOU1ZSVExnb0tDbWgwZEhCek9pOHZjM1ZqYTJ4bGMzTXViM0puTHdvS2FIUjBjSE02THk4eE5TNWhhUzl3WVhSeWIyNXpDZ3BvZEhSd2N6b3ZMM2QzZHk1amJHRnpjMkZqZEdsdmJpNXZjbWN2Q2dvS0tpOEtDZz09JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9jaHJvbWUuanNfdGltZXN0YW1wJ109MTY1MTQ2MDE3MDU1NzsKd2luZG93LnByZUZTWydsaWJyYXJ5L2Nocm9tZS5qcyddPSdMeThnVEdsaWNtRnllU0JtZFc1amRHbHZibk1nWm05eUlIZGxZaTFrY21sMlpYSUtablZ1WTNScGIyNGdjMk55WldWdWMyaHZkQ2dwSUhzS0lDQnNaWFFnY0c1bklEMGdZMmh5YjIxbExuUmhZbk11WTJGd2RIVnlaVlpwYzJsaWJHVlVZV0lvZTJadmNtMWhkRG9nSjNCdVp5ZDlLVHNLSUNCamFISnZiV1V1ZEdGaWN5NXpaVzVrVFdWemMyRm5aU2g3Q2lBZ0lDQnVZVzFsT2lBbmMyTnlaV1Z1YzJodmRDNXdibWNuTENBS0lDQWdJR1J2ZDI1c2IyRmtPaUJ3Ym1jc0lBb2dJQ0FnZEhsd1pUb2dKMmx0WVdkbEwzQnVaeWNLSUNCOUtUc0tmUW9LQ21aMWJtTjBhVzl1SUdOb1pXTnJSbTl5UlhoMFpXNXphVzl1UlhKeWIzSW9aWEp5UTJGc2JHSmhZMnNwSUhzS0lDQnBaaUFvZEhsd1pXOW1LR05vY205dFpTNWxlSFJsYm5OcGIyNHViR0Z6ZEVWeWNtOXlLU0FoUFNBbmRXNWtaV1pwYm1Wa0p5a2dld29nSUNBZ0lDQjJZWElnWlhKeWIzSWdQU0J1WlhjZ1JYSnliM0lvWTJoeWIyMWxMbVY0ZEdWdWMybHZiaTVzWVhOMFJYSnliM0l1YldWemMyRm5aU2s3Q2lBZ0lDQWdJR1Z5Y2tOaGJHeGlZV05yS0dWeWNtOXlLVHNLSUNBZ0lDQWdkR2h5YjNjZ1pYSnliM0k3Q2lBZ2ZRcDlDZ292S2lvS0tpQkRZWEIwZFhKbGN5QmhJSE5qY21WbGJuTm9iM1FnYjJZZ2RHaGxJSFpwYzJsaWJHVWdkR0ZpTGdvcUNpb2dRSEJoY21GdElIdG1kVzVqZEdsdmJpaHpkSEpwYm1jcGZTQmpZV3hzWW1GamF5QlVhR1VnWTJGc2JHSmhZMnNnZEc4Z2FXNTJiMnRsSUhkcGRHZ2dkR2hsSUdKaGMyVTJOQW9xSUNBZ0lDQmxibU52WkdWa0lGQk9SeTRLS2lCQWNHRnlZVzBnZTJaMWJtTjBhVzl1S0NGRmNuSnZjaWw5SUdWeWNrTmhiR3hpWVdOcklGUm9aU0JqWVd4c1ltRmpheUIwYnlCcGJuWnZhMlVnWm05eUlHVnljbTl5Q2lvZ0lDQWdJSEpsY0c5eWRHbHVaeTRLS2k4S0NpOHFLZ29xSUVkbGRITWdhVzVtYnlCaFltOTFkQ0IwYUdVZ1kzVnljbVZ1ZENCM2FXNWtiM2N1Q2lvS0tpQkFjR0Z5WVcwZ2UyWjFibU4wYVc5dUtDb3BmU0JqWVd4c1ltRmpheUJVYUdVZ1kyRnNiR0poWTJzZ2RHOGdhVzUyYjJ0bElIZHBkR2dnZEdobElIZHBibVJ2ZHlCcGJtWnZMZ29xSUVCd1lYSmhiU0I3Wm5WdVkzUnBiMjRvSVVWeWNtOXlLWDBnWlhKeVEyRnNiR0poWTJzZ1ZHaGxJR05oYkd4aVlXTnJJSFJ2SUdsdWRtOXJaU0JtYjNJZ1pYSnliM0lLS2lBZ0lDQWdjbVZ3YjNKMGFXNW5MZ29xTHdwbWRXNWpkR2x2YmlCblpYUlhhVzVrYjNkSmJtWnZLR05oYkd4aVlXTnJMQ0JsY25KRFlXeHNZbUZqYXlrZ2V3b2dJR05vY205dFpTNTNhVzVrYjNkekxtZGxkRU4xY25KbGJuUW9lM0J2Y0hWc1lYUmxPaUIwY25WbGZTd2dablZ1WTNScGIyNGdLSGRwYm1SdmR5a2dld29nSUNBZ0lDQmphR1ZqYTBadmNrVjRkR1Z1YzJsdmJrVnljbTl5S0dWeWNrTmhiR3hpWVdOcktUc0tJQ0FnSUNBZ1kyRnNiR0poWTJzb2QybHVaRzkzS1RzS0lDQjlLVHNLZlFvS0x5b3FDaW9nVlhCa1lYUmxjeUIwYUdVZ2NISnZjR1Z5ZEdsbGN5QnZaaUIwYUdVZ1kzVnljbVZ1ZENCM2FXNWtiM2N1Q2lvS0tpQkFjR0Z5WVcwZ2UwOWlhbVZqZEgwZ2RYQmtZWFJsU1c1bWJ5QlZjR1JoZEdVZ2FXNW1ieUIwYnlCd1lYTnpJSFJ2SUdOb2NtOXRaUzUzYVc1a2IzZHpMblZ3WkdGMFpTNEtLaUJBY0dGeVlXMGdlMloxYm1OMGFXOXVLQ2w5SUdOaGJHeGlZV05ySUVsdWRtOXJaV1FnZDJobGJpQjBhR1VnZFhCa1lYUnBibWNnYVhNZ1kyOXRjR3hsZEdVdUNpb2dRSEJoY21GdElIdG1kVzVqZEdsdmJpZ2hSWEp5YjNJcGZTQmxjbkpEWVd4c1ltRmpheUJVYUdVZ1kyRnNiR0poWTJzZ2RHOGdhVzUyYjJ0bElHWnZjaUJsY25KdmNnb3FJQ0FnSUNCeVpYQnZjblJwYm1jdUNpb3ZDbVoxYm1OMGFXOXVJSFZ3WkdGMFpWZHBibVJ2ZHloMWNHUmhkR1ZKYm1adkxDQmpZV3hzWW1GamF5d2daWEp5UTJGc2JHSmhZMnNwSUhzS0lDQmpiMjV6YjJ4bExteHZaeWhoY21kMWJXVnVkSE1wT3dvZ0lHTm9jbTl0WlM1M2FXNWtiM2R6TG1kbGRFTjFjbkpsYm5Rb2UzMHNJR1oxYm1OMGFXOXVJQ2gzYVc1a2IzY3BJSHNLSUNBZ0lDQWdZMmhsWTJ0R2IzSkZlSFJsYm5OcGIyNUZjbkp2Y2lobGNuSkRZV3hzWW1GamF5azdDaUFnSUNBZ0lHTm9jbTl0WlM1M2FXNWtiM2R6TG5Wd1pHRjBaU2h6Wld4bUxtbGtMQ0IxY0dSaGRHVkpibVp2TENCbWRXNWpkR2x2YmlBb2QybHVaRzkzS1NCN0NpQWdJQ0FnSUNBZ0lDQmphR1ZqYTBadmNrVjRkR1Z1YzJsdmJrVnljbTl5S0dWeWNrTmhiR3hpWVdOcktUc0tJQ0FnSUNBZ0lDQWdJR05oYkd4aVlXTnJLQ2s3Q2lBZ0lDQWdJSDBwT3dvZ0lIMHBPd3A5Q2dvdktpb0tLaUJNWVhWdVkyaGxjeUJoYmlCaGNIQWdkMmwwYUNCMGFHVWdjM0JsWTJsbWFXVmtJR2xrTGdvcUNpb2dRSEJoY21GdElIdHpkSEpwYm1kOUlHbGtJRlJvWlNCSlJDQnZaaUIwYUdVZ1lYQndJSFJ2SUd4aGRXNWphQzRLS2lCQWNHRnlZVzBnZTJaMWJtTjBhVzl1S0NsOUlHTmhiR3hpWVdOcklFbHVkbTlyWldRZ2QyaGxiaUIwYUdVZ2JHRjFibU5vSUdWMlpXNTBJR2x6SUdOdmJYQnNaWFJsTGdvcUlFQndZWEpoYlNCN1puVnVZM1JwYjI0b0lVVnljbTl5S1gwZ1pYSnlRMkZzYkdKaFkyc2dWR2hsSUdOaGJHeGlZV05ySUhSdklHbHVkbTlyWlNCbWIzSWdaWEp5YjNJS0tpQWdJQ0FnY21Wd2IzSjBhVzVuTGdvcUx3cG1kVzVqZEdsdmJpQnNZWFZ1WTJoQmNIQW9hV1FzSUdOaGJHeGlZV05yTENCbGNuSkRZV3hzWW1GamF5a2dld29nSUdOb2NtOXRaUzV0WVc1aFoyVnRaVzUwTG14aGRXNWphRUZ3Y0NocFpDd2dablZ1WTNScGIyNGdLQ2tnZXdvZ0lDQWdJQ0JqYUdWamEwWnZja1Y0ZEdWdWMybHZia1Z5Y205eUtHVnlja05oYkd4aVlXTnJLVHNLSUNBZ0lDQWdZMkZzYkdKaFkyc29LVHNLSUNCOUtUc0tmUW9LJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2FwaS5tZF90aW1lc3RhbXAnXT0xNjUxNzAyMzY1NzUzOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9hcGkubWQnXT0nSXlCQlVFa2dLRUZ3Y0d4cFkyRjBhVzl1SUhCeWIyZHlZVzF0YVc1bklHbHVkR1Z5Wm1GalpTa0tDa2R2YjJkc1pTQm9ZWE1nWVNCdVpXRjBJSE5sY25acFkyVWdabTl5SUdKeWIzZHpaWElnUVZCSmN5NEtDa2RwZG1VZ2FYUWdZU0IwY25raENncFViMjhnWW1Ga0lIUm9aWGtnWVhKbElISmxkR2x5YVc1bklHbDBMaUJQUkdGMFlTQnBjeUIyWlhKNUlITnBiV2xzWVhJdUNscGhjR2xsY2lCb1lYTWdkRzl2YkhNZ2RHOGdZMjlzYkdWamRDQm1jbTl0SUcxMWJIUnBjR3hsSUVGUVNYTXVDZ3BVVDBSUE9pQmhaR1FnWVNCamIzVndiR1VnYjJZZ2FXNTBaV2R5WVhScGIyNXpJR1p2Y2lCamRYSnlaVzUwSUdWMlpXNTBjeUJrWVhSaExncFVUMFJQT2lCemRHRnVaQ0J2YmlCMGFHVWdjMmh2ZFd4a1pYSnpJRzltSUdkcFlXNTBjeXdnZDJsMGFDQmhJR052YjJ4bGNpQm9ZWFF1Q2dvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9ib29zdHJhcC5tZF90aW1lc3RhbXAnXT0xNjUxNzAzODU1MDEwOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9ib29zdHJhcC5tZCddPSdJeUJDYjI5emRISmhjQ0JRWVhSMFpYSnVDZ3BUYVcxcGJHRnlJSFJ2SUdSbGNHVnVaR1Z1WTNrZ2FXNXFaV04wYVc5dUxDQjBhR1VnWW05dmRITjBjbUZ3SUhCaGRIUmxjbTRzQ25OMFlYSjBjeUIzYVhSb0lHMXBibWx0WVd3Z1pHVndaVzVrWlc1amFXVnpMQ0JzYVd0bElHRnVJSFZ1ZW1sd2NHVnlMZ3BYYUdWdUlIUm9aU0J3Y205alpYTnpJR2x6SUNKaWIyOTBaV1FpSUhSb1pTQjFibnBwY0hCbGNpOXlaWE52YkhabGNpQnlkVzV6TEFwaGJtUWdkR2hsSUhCeWIyZHlZVzBnYVhNZ2JHOWhaR1ZrSUdaMWJHeDVMZ29LQ2xSUFJFODZJSE5vYjNjZ2FHOTNJRk41YlhCb2IyNTVMQ0JFY25Wd1lXd3NJR0Z1WkNCQ2RYTjVZbTk0SUdGc2JDQjFjMlVnWW05dmRITjBjbUZ3Y0dsdVp5NEtDZ29LJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2NvbXBpbGVycy9hbnRsci5tZF90aW1lc3RhbXAnXT0xNjUxNzAzNzQ4NzAwOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9jb21waWxlcnMvYW50bHIubWQnXT0nJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2NvbXBpbGVycy9kZmEubWRfdGltZXN0YW1wJ109MTY1MTcwMzc0NDQ0NTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvY29tcGlsZXJzL2RmYS5tZCddPScnOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvY29tcGlsZXJzL2ppdC5tZF90aW1lc3RhbXAnXT0xNjUxNzAzODUzMjcwOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9jb21waWxlcnMvaml0Lm1kJ109J1NrbFVJQ2hLZFhOMElFbHVJRlJwYldVZ1kyOXRjR2xzYVc1bktRb0tDZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2NvbXBpbGVycy9sZXhlci5tZF90aW1lc3RhbXAnXT0xNjUxNzAzNzcxNTY0Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9jb21waWxlcnMvbGV4ZXIubWQnXT0nJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2NvbXBpbGVycy9wYXJzZXIubWRfdGltZXN0YW1wJ109MTY1MTcwMzc4MzczMTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvY29tcGlsZXJzL3BhcnNlci5tZCddPScnOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvY29tcGlsZXJzL3J1bm5lci5tZF90aW1lc3RhbXAnXT0xNjUxNzAzODIxNjcxOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9jb21waWxlcnMvcnVubmVyLm1kJ109Jyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9jb21waWxlcnMvdG9rZW5zLm1kX3RpbWVzdGFtcCddPTE2NTE3MDM3Nzc0NTI7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2NvbXBpbGVycy90b2tlbnMubWQnXT0nJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2NvbXBpbGVycy92aXNpdG9yLm1kX3RpbWVzdGFtcCddPTE2NTE3MDM4MTQ0ODE7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2NvbXBpbGVycy92aXNpdG9yLm1kJ109Jyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9kb20ubWRfdGltZXN0YW1wJ109MTY1MTUwODczOTA2ODsKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvZG9tLm1kJ109J0l5QkVUMDBLQ2tSUFRTQnpkR0Z1WkhNZ1ptOXlJRVJ2WTNWdFpXNTBJRTlpYW1WamRDQk5iMlJsYkM0S1ZHaHBjeUJwY3lCMWMyVmtJSFJ2SUdGalkyVnpjeUJsYkdWdFpXNTBjeUJ2YmlCaElIZGxZaUJ3WVdkbElHWnliMjBnYzJOeWFYQjBMZ29LJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2V2YWwvYm9keS5tZF90aW1lc3RhbXAnXT0xNjUxNzAzODc4ODA1Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9ldmFsL2JvZHkubWQnXT0nJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2V2YWwvbG9vcC5tZF90aW1lc3RhbXAnXT0xNjUxNTA4NTc1MjE4Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9ldmFsL2xvb3AubWQnXT0nJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2V2YWwvcHJpbS5tZF90aW1lc3RhbXAnXT0xNjUxNzAzOTM5OTc1Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9ldmFsL3ByaW0ubWQnXT0nSXlCUWNtbHRhWFJwZG1WekNnb0tDbFJQUkU4NklHUnBkbWxrWldRZ2RHaGxjMlVnZFhBZ2RHaHBjeUIzWVhrZ1ltVmpZWFZ6WlNCdGIzTjBJR3hoYm1kMVlXZGxjeUFLYUdGMlpTQjBhR1Z6WlNCaVlYTnBZeUJ6ZEhKMVkzUjFjbVZ6SUdWMlpXNGdhV1lnZEdobElHWmxZWFIxY21WeklHTm9ZVzVuWlM0S1ZFOUVUem9nYldsbmFIUWdZbVVnYVc1MFpYSmxjM1JwYm1jZ2RHOGdaRzhnWVNCelpXZHRaVzUwSUc5dUlHUnBabVpsY21WdWRBcHNZVzVuZFdGblpTQm1aV0YwZFhKbGN5NEtDZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2V2YWwvcmVwbC5tZF90aW1lc3RhbXAnXT0xNjUxNTQzODg2NzQ0Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9ldmFsL3JlcGwubWQnXT0nSXlCU1JWQk1DZ3BTUlZCTUlITjBZVzVrY3lCbWIzSWdVbVZoWkN3Z1JYaGxZM1YwWlN3Z1VISnBiblFnVEdsdVpTNEtWMmhsYmlCamIyMWlhVzVsWkNCM2FYUm9JRnRsZG1Gc0tDbGRLQzR2WlhaaGJDNXRaQ2tnWVc1a0NtRWdXMnh2YjNCZEtDNHZaWFpoYkM5c2IyOXdMbTFrS1NCM1pTQmpZVzRnWlhobFkzVjBaU0FLWTI5dGJXRnVaSE1nYkdsclpTQmpiMlJsTGdvS1lHQmdDbEpsWVdRZzRwZUU0cFNBNHBTQTRwU0E0cFNBNHBTQTRwU0E0cFNRQ3VLVWdpQWdJQ0FnSUNBZ0lDQWc0cFNDQ3VLV3ZDQWdJQ0FnSUNBZ0lDQWc0cFNDQ2tWNFpXTjFkR1VnSUNBZ0lPS1VnZ3JpbElJZ0lDQWdJQ0FnSUNBZ0lPS1VnZ3JpbHJ3Z0lDQWdJQ0FnSUNBZ0lPS1VnZ3BRY21sdWRDQk1hVzVsSU9LVWdPS1VtQXBnWUdBS0NtQmdZR1JwWVd4dlp3cDdDaUFnSW1GalkyVnpjMjl5SWpvZ0lsOTBjbmxKZEVsRVJTSXNDbjBLWUdCZ0Nnb0tDZz09JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2V2YWwubWRfdGltZXN0YW1wJ109MTY1MTUwODU1OTIzMTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvZXZhbC5tZCddPSdZR1YyWVd3b0tXQWdhWE1nWTI5dWRtVnlkSE1nY0d4aGFXNGdkR1Y0ZENCcGJuUnZJR0VnWTJGc2JHRmliR1VnY0hKdlkyVmtkWEpsY3k0S0NsUm9hWE1nY0d4MVoybHVJR1J2WlhOdUozUWdkWE5sSUdWMllXd29LU3dnYVc1emRHVmhaQ0JwZENBS2FXNWpiSFZrWlhNZ1lXNGdXMFZOUTBGVFkzSnBjSFFnTWpBeU1pdGRLR2gwZEhCek9pOHZkR016T1M1bGN5OWxZMjFoTWpZeUx5a0tiR0Z1WjNWaFoyVWdjR0Z5YzJWeUxnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvaWRlLm1kX3RpbWVzdGFtcCddPTE2NTE3MDM1ODU2MjI7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2lkZS5tZCddPSdTVVJGSUNoSmJuUmxaM0poZEdWa0lHUmxkbVZzYjNCdFpXNTBJR1Z1ZG1seWIyNXRaVzUwS1FvS0Nnb0tDZ3BVYUdGMEozTWdaM0psWVhRaENnb0tUR1YwSjNNZ1ptbHVaQ0I1YjNVZ1lTQnNhWFIwYkdVZ2JXOXlaU0JqYjI1MGNtOXNMZ29LQ2xkeWFYUmxJR0ZqWlM1elpYUlBjSFJwYjI0b0tRb0tDbEoxYmlCMGFHbHpJSE5qY21sd2RDQnZiaUJ6ZEdGeWREOEtPbU5vWldOclltOTRDZ29LV1c5MUozWmxJSGR5YVhSMFpXNGdlVzkxY2lCbWFYSnpkQ0JiUW05dmRITjBjbUZ3WFNncElIQnliMmR5WVcwaENnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvaW5qZWN0Lm1kX3RpbWVzdGFtcCddPTE2NTE2ODUyNTE0MTE7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL2luamVjdC5tZCddPSdJeUJFU1NBb1JHVndaVzVrWlc1amVTQkpibXBsWTNScGIyNHBDZ3BFWlhCbGJtUmxibU41SUdsdWFtVmpkR2x2YmlCMFlXdGxjeUJoSUhkb2IyeGxJR1psWVhSMWNtVWdjMlYwQ21GdVpDQndjbTkyYVdSbGN5QjBhRzl6WlNCbVpXRjBkWEpsY3lCMGJ5QmhJRzF2WkhWc1pTNEtDbUJnWUFvZ0lDQWdJQ0FnVFc5a2RXeGxJREVLVkRFZ0lGQXhJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRkF4SUNCVU1Rb2c0cFNNNHBTQTRwU3M0cFNBNHBTQTRwU0E0cGE2SUNCVFpXeG00cFNBNHBhNlJHOUJWR2hwYm1jeElPS1VnT0tVck9LVWdPS1VrQW9nNHBTQ0lPS1VnaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZzRwU0NJT0tVZ2dvZzRwU2M0cFNBNHBTODRwU0E0cFNBNHBTQTRwYTZJQ0JUWld4bTRwU0E0cGE2Ukc5QlZHaHBibWN5SU9LVWdPS1V2T0tVZ09LVXBBb2c0cFNDSU9LVWdpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnNHBTQ0lPS1VnZ29nNHBTQ0lPS1VnaUFnSUZCeWIyUjFZM1JwYjI0Z0tGQXhLU0FnSUNBZzRwU0NJT0tVZ2dvZzRwU0NJT0tVZ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWc0cFNDSU9LVWdnb2c0cFNDSU9LVW5PS1VnT0tVZ09LVWdPS1VnT0tVZ0NCRWIwRlVhR2x1WnpFZ0lDRGlsNFRpbElEaWxJRGlsSURpbElEaWxLUWc0cFNDQ2lEaWxJSWc0cFNDSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDRGlsSUlnNHBTQ0NpRGlsSUlnNHBTVTRwU0E0cFNBNHBTQTRwU0E0cFNBSUVSdlFWUm9hVzVuTWlBZ0lPS1hoT0tVZ09LVWdPS1VnT0tVZ09LVXRPS1VnT0tVcEFvZzRwU0NJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWc0cFNDQ2lEaWxJSWdJQ0FnSUZSbGMzUWdUVzlrZFd4bElDaFVNU2tnSUNBZ0lDRGlsSUlLSU9LVWdpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lPS1VnZ29nNHBTYzRwU0E0cFNBNHBTQTRwU0E0cFNBNHBTQTRwU0FJRVJ2VkdWemRERWdJQ0FnSU9LWGhPS1VnT0tVZ09LVWdPS1VnT0tVZ09LVWdPS1VwQW9nNHBTQ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZzRwU0NDaURpbEpUaWxJRGlsSURpbElEaWxJRGlsSURpbElEaWxJQWdSRzlVWlhOME1pQWdJQ0FnNHBlRTRwU0E0cFNBNHBTQTRwU0E0cFNBNHBTQTRwU1lDbUJnWUFvS0NrbG1JSGx2ZFNCM1lXNTBJSFJ2SUdOb1lXNW5aU0IzYUc5c1pTQm1aV0YwZFhKbElITmxkSE1zSUFwaElHUnBabVpsY21WdWRDQnpaWFFnWTJGdUlHSmxJSEJ5YjNacFpHVmtDblJvY205MVoyZ2dkR2hsSUhOaGJXVWdjM1JoYm1SaGNtUWdhVzUwWlhKbVlXTmxMZ29LQ2dvS1IybDJaU0JwZENCaElIUnllU0VLQ2dwVVQwUlBPaUJPWldWa0lITnZiV1YwYUdsdVp5QjBhR0YwSUdSbGJXOXVjM1J5WVhSbGN5Qm9iM2NnWVc0S1FXTjBhVzl1SUdOaGJpQmlaU0J3WlhKbWIzSnRaV1FnYkc5allXeHNlU3dnYjNJZ2MybHVaMng1TENBS2FXNGdZU0IzWldJdGQyOXlhMlZ5TENCaGJtUWdZV3h6YnlCcGJpQndZWEpoYkdWc2JDd2dhVzRnWTJ4dmRXUXVDbFZ6YVc1bklIUm9aU0J6WVcxbElHTnZaR1VnZEc4Z2NtbG5hSFFnTFQ0S0NnPT0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvbWlkZGxld2FyZS5tZF90aW1lc3RhbXAnXT0xNjUxNjg1MzQ0OTA4Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy9taWRkbGV3YXJlLm1kJ109J0l5Qk5hV1JrYkdWM1lYSmxDZ3BOYVdSa2JHVjNZWEpsSUhCaGRIUmxjbTRnY0hWMGN5Qm1kVzVqZEdsdmJtRnNhWFI1SUdsdUxXSmxkSGRsWlc0Z2MyTnZjR1Z6TGdwVWFHbHpJR0ZzYkc5M2N5QjFjeUIwYnlCemQybDBZMmdnYjNWMElFQkNaV1p2Y21VdlFFRm1kR1Z5TFhOMGVXeGxJQXB5WlhOMWJIUnpJSGRwZEdodmRYUWdkR2hsSUhWelpTQnZaaUJoZEhSeWFXSjFkR1Z6SUc5eUlGdEJjM0JsWTNSelhTZ3BMZ29LWUdCZ0NpQWdJQ0FnSUNBZ1RXbGtaR3hsZDJGeVpTQXhDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nNHBTTTRwU0E0cFNBNHBTQTRwU0E0cFNBNHBhNklDQkViMEZVYUdsdVp6RWdJT0tVZ09LVWdPS1VnT0tVZ09LVWdPS1VrQW9nNHBTQ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnNHBTQ0NpRGlsSUlnSU9LVWpPS1VnT0tVZ09LV3VpQWdSRzlCVkdocGJtY3lJT0tVZ09LVWdPS1VnT0tVa0NBZzRwU0NDaURpbElJZ0lPS1VnaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJT0tVZ2lBZzRwU0NDaURpbElJZ0lPS1VnaUFnSUUxcFpHUnNaWGRoY21VZ01pQWdJT0tVZ2lBZzRwU0NDaURpbElJZ0lPS1VnaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJT0tVZ2lBZzRwU0NDaURpbEpUaWxJRGlsSURpbEx6aWxJRGlsSURpbElEaWxJQWdSRzlCYm05MGFHVnlNU0RpbDRUaWxJRGlsSmdnSU9LVWdnb2dJQ0FnNHBTQ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWc0cFNDQ2lBZ0lDRGlsSlRpbElEaWxJRGlsSURpbElBZ1JHOVBkR2hsY2pJZ0lPS1hoT0tVZ09LVWdPS1VnT0tVZ09LVWdPS1VtQXBnWUdBS0NncEhhWFpsSUdsMElHRWdkSEo1T2dvS0NncFVUMFJQT2lCVGFHOTNJSE52YldWMGFHbHVaeUIwYUdGMElHVjRjSEpsYzNNZ1pHOWxjeUJ5WldGc2JIa2dibVZoZEd4NUxncEJaR1JwYm1jZ1lTQnNhWFIwYkdVZ1kyOXRjSEpsYzNOcGIyNHNJRzFoZVdKbElITjNZWEJ3YVc1bklHOTFkQ0JqYjIxd2NtVnpjMmx2Yml3S1lXeHZjbWwwYUcxeklHWnZjaUJwYmlCbllXMWxJR052YlhCeVpYTnBiMjRnWVc1a0lIWnBZMlV0ZG1WeWMyRS9DZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL21vY2subWRfdGltZXN0YW1wJ109MTY1MTcwMjI5MDM3MDsKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvY3MvbW9jay5tZCddPSdJeUJVWlhOMElFMXZZMnNLQ2sxdlkydHBibWNnYzJWeWRtbGpaU0JsYm1Sd2IybHVkSE1nWTJGdUlHaGxiSEFnZDJsMGFDQjBaWE4wYVc1bklHUjFjbWx1WnlCa1pYWmxiRzl3YldWdWRDNEtTU2QyWlNCd2NtOTJhV1JsWkNCaElITnBiWEJzWlNCd2NtOTRlU0J6WlhKMmFXTmxMQ0IwYUdGMElHeHZiM0J6SUdKaFkyc2dkRzhnZVc5MWNpQnZkMjRLWVhCd0lHbHVJR0VnZDJWaUxYZHZjbXRsY2k0S0NsUlBSRTg2SUhOb2IzY2dhRzkzSUdSaGRHRWdZMkZ1SUdOb1lXNW5aU0JwYmlCaElHMXZZMnNnWVc1a0lIUm9aVzRnY0hWc2JDQmtZWFJoSUdaeWIyMGdjbVZ0YjNSbExncFVUMFJQT2lCa1pYQnNiM2tnWkdGMFlTOW5jbUZ3YUdsamN5QmtaVzF2Y3lCaGN5QmhJSE5sY25acFkyVWdZbmtnYVc1cVpXTjBhVzVuSUdSeVlXY3RaSEp2Y0NCVldDNEtDZ29LJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL3F1aW5lLm1kX3RpbWVzdGFtcCddPTE2NTE1NDk1NjQwODE7CndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL3F1aW5lLm1kJ109J0l5QlJWVWxPUlFvS1FTQlJkV2x1WlNCcGJpQkRiMjF3ZFhSbGNpQlRZMmxsYm1ObElHbHpJR0VnY0hKdlozSmhiU0IwYUdGMElHOTFkSEIxZEhNS2FYUnpJRzkzYmlCd2NtOW5jbUZ0TGdvS1ZHaHBjeUJ3WVdkbElHTmhiaUJsYldsMElIWmhjbWx2ZFhNZ2NHOXlkR2x2Ym5NZ2IyWWdhWFFuY3lCdmQyNGdjSEp2WjNKaGJRcGlZWE5sWkNCdmJpQjBhR1VnZEhsd1pTQnZaaUJpZFdsc1pDQjViM1VnZDJGdWRDNEtDa2RwZG1VZ2FYUWdZU0IwY25raENtQmdZR1JwWVd4dlp3cDdDaUFnSW1GalkyVnpjMjl5SWpvZ0lsOTBjbmxKZEZCc2RXZHBiaUlzQ24wS1lHQmdDZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9kb2NzL3V0aWxpdGllcy5tZF90aW1lc3RhbXAnXT0xNjUxNzIzMDU2MDc5Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9jcy91dGlsaXRpZXMubWQnXT0nSXlCVmRHbHNhWFJwWlhNS0NpTWpJRVJ2WTNWdFpXNTBZWFJwYjI0S0NnPT0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2RvbS5qc190aW1lc3RhbXAnXT0xNjUxNzE3MDc2Mjc2Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZG9tLmpzJ109J0NpOHZJR052Ym5abGNuTnBiMjV6SUdadmNpQmhZMk5sYzNOcGJtY2djR0ZuWlhNS0NtTnZibk4wSUU1QlRVVkVYMFpWVGtOVVNVOU9JRDBnTDJaMWJtTjBhVzl1WEhNcktGdGhMWHBkSzFzZ0xYNWRLaWxjY3lwY0tDOEtZMjl1YzNRZ1JWaFVSVTVUU1U5T1gwbEVJRDBnSjJ4dVoyeHRiR3BxWTNCdWNHRm9iV1p3Ym1acWEyZHFaMjFxYUdWbmFXaGtKenNLWTI5dWMzUWdSVmhVUlU1VFNVOU9YMVpGVWxOSlQwNGdQU0FuTVM0d0p3cGpiMjV6ZENCU1IwSkJYMUpGUjBWWUlEMGdMM0puWW1FL1hDZ29XMTVjS1YwcUtWd3BMd3BqYjI1emRDQkdRVVJGWDBSVlVrRlVTVTlPSUQwZ016QXdMakFLWTI5dWMzUWdSa3hCVTBoZlJGVlNRVlJKVDA0Z1BTQTNNREF1TUFvS0NpOHZJRlJQUkU4NklHRmtaQ0JwYm1admNtMWhkR2x2YmlCamIyeHNaV04wYVc5dUlGOWhZMk5sYzNOdmNuTWdhR1Z5WlFvS0NpOHZJRlJQUkU4NklHRmtaQ0IxZEdsc2FYUnBaWE1nWm5KdmJTQnpaV3hsYm1sMWJTQm1iM0lnZFhOcGJtY2dXSEJoZEdnS0Nnb3ZMeUJVVDBSUE9pQmhaR1FnWlhsbExXUnliM0J3WlhJZ1pXeGxiV1Z1ZENCelpXeGxZM1J2Y2lCb1pYSmxDZ3BtZFc1amRHbHZiaUJ5ZFc1Q2JHOWpheWh6ZEdGeWRDa2dld29KYVdZb1pHOWpkVzFsYm5RdVltOWtlUzVqYkdGemMwNWhiV1V1YVc1amJIVmtaWE1vSjNKMWJtNXBibWNuS1FvSkNYeDhJR1J2WTNWdFpXNTBMbUp2WkhrdVkyeGhjM05PWVcxbExtbHVZMngxWkdWektDZHpkR0Z5ZEdsdVp5Y3BDZ2tKZkh3Z1pHOWpkVzFsYm5RdVltOWtlUzVqYkdGemMwNWhiV1V1YVc1amJIVmtaWE1vSjNCaGRYTmxaQ2NwS1NCN0Nna0pZV05sTG1adlkzVnpLQ2tLQ1FseVpYUjFjbTRLQ1gwS0NnbGtiMk4xYldWdWRDNWliMlI1TG1Oc1lYTnpUR2x6ZEM1aFpHUW9KM04wWVhKMGFXNW5KeWtLQ2dscFppaHpkR0Z5ZENBOVBUMGdMVEVwSUhzS0NRbHpaVzVrVFdWemMyRm5aU2g3Q2drSkNYTmpjbWx3ZERvZ2QybHVaRzkzTG1GalpTNW5aWFJXWVd4MVpTZ3BDZ2tKQ1FrdWNtVndiR0ZqWlNndlhITXFKQzhzSUNjbktTQXJJQ2RjYm5KbGRIVnliaUJ0WVdsdUtDazdKeXdLQ1FrSmJHbHVaVG9nWVdObExuTmxjM05wYjI0dVoyVjBUR1Z1WjNSb0tDa0tDUWw5S1FvSmZTQmxiSE5sSUhzS0NRbHNaWFFnWm5WdVkwNWhiV1VnUFNCT1FVMUZSRjlHVlU1RFZFbFBUaTVsZUdWaktBb0pDUWtKWVdObExtVnVkaTVrYjJOMWJXVnVkQzVuWlhSTWFXNWxLSE4wWVhKMEtTbGJNVjBLQ1FselpXNWtUV1Z6YzJGblpTaDdDZ2tKQ1hOamNtbHdkRG9nWVdObExuTmxjM05wYjI0dVoyVjBUR2x1WlhNb2MzUmhjblFzSUVGRFJTNXNZWE4wVEdsdVpTa0tDUWtKQ1M1cWIybHVLQ2RjYmljcExuSmxjR3hoWTJVb0wxeHpLaVF2TENBbkp5a2dDZ2tKQ1FrcklDZGNibkpsZEhWeWJpQW5JQ3NnWm5WdVkwNWhiV1VnS3lBbktDazdYRzRuTEFvSkNRbHNhVzVsT2lCaFkyVXVjMlZ6YzJsdmJpNW5aWFJHYjJ4a1YybGtaMlYwVW1GdVoyVW9jM1JoY25RcExtVnVaQzV5YjNjS0NRbDlLUW9KZlFvSllXTmxMbVp2WTNWektDa0tmUW9LQ21aMWJtTjBhVzl1SUdOdmJHeGxZM1JHYjNKdEtHUnBZV3h2WnlrZ2V3b0piR1YwSUhKbGMzQnZibk5sU1dRZ1BTQmthV0ZzYjJjdVoyVjBRWFIwY21saWRYUmxLQ2RoY21saExXbGtKeWtLQ1d4bGRDQm1iM0p0VW1WemRXeDBjeUE5SUh0OUNnbGtaV0oxWjJkbGNnb0pjbVYwZFhKdUlHWnZjbTFTWlhOMWJIUnpDbjBLQ2dwbWRXNWpkR2x2YmlCa2IxTmxibVJHYjNKdEtISmxjR3g1TENCa2FXRnNiMmNzSUdWMlpXNTBLU0I3Q2dsc1pYUWdabTl5YlZKbGMzVnNkSE1LQ1d4bGRDQnlaWE53YjI1elpVbGtJRDBnWkdsaGJHOW5MbWRsZEVGMGRISnBZblYwWlNnbllYSnBZUzFwWkNjcENnbHBaaWhsZG1WdWRDNTBZWEpuWlhRZ0ppWWdaWFpsYm5RdWRHRnlaMlYwTG5SaFowNWhiV1VnUFQwZ0owSlZWRlJQVGljcElIc0tDUWt2THlCVFNVNUxJUW9KQ1hKbGRIVnliaUJ5WlhCc2VTaDdDZ2tKQ1hKbGMzQnZibk5sU1dRNklISmxjM0J2Ym5ObFNXUXNDZ2tKQ1hKbGMzVnNkRG9nWm05eWJWSmxjM1ZzZEhNS0NRbDlLUW9KZlNCbGJITmxDZ2xwWmlobGRtVnVkQzUwWVhKblpYUWdQVDA5SUdScFlXeHZad29KQ1h4OElDRW9abTl5YlZKbGMzVnNkSE1nUFNCamIyeHNaV04wUm05eWJTaGthV0ZzYjJjcEtTa2dld29KQ1dScFlXeHZaeTV6ZEhsc1pTNWthWE53YkdGNUlEMGdKMjV2Ym1VbkNna0piR1YwSUdScFlXeHZaMGtnUFNCQlEwVXVhVzUwWlhKaFkzUnBiMjV6TG1sdVpHVjRUMllvWkdsaGJHOW5LUW9KQ1dsbUtHUnBZV3h2WjBrZ1BpQXRNU2tnZXdvSkNRbEJRMFV1YVc1MFpYSmhZM1JwYjI1ekxuTndiR2xqWlNoa2FXRnNiMmRKTENBeEtRb0pDUWwxY0dSaGRHVkdhV3hsYkdsemRDZ25TVzUwWlhKaFkzUnBiMjV6SnlrS0NRbDlDZ2tKY21WMGRYSnVJSEpsY0d4NUtIc0tDUWtKY21WemNHOXVjMlZKWkRvZ2NtVnpjRzl1YzJWSlpBb0pDWDBwQ2dsOUlHVnNjMlVnZXdvSmZRcDlDZ29LTHk4Z1ZFOUVUem9nWTNKbFlYUmxJR0VnWkhKdmNDQnpkWEptWVdObElITnBibU5sSUhSb1pTQm5ZVzFsSUFvdkx5QWdJR0Z1WkNCbFpHbDBiM0lnYldsbmFIUWdhVzUwWlhKbVpYSmxDZ29LQ2k4dklGZElXU0JFVHlCVVNFbFRJRVJKUVV4UFJ5QkdUMUpOSUVOU1FWQS9JRWhCVTA0blZDQlVTRWxUSUVKRlJVNGdSRTlPUlNBeE1EQXdXQ0JQVmtWU0NpOHZJQ0FnUWxrZ1YwOVNSRkJTUlZOVFB5QkpUaUJVU0VsVElFTkJVMFVzSUZSSVJWSkZKMU1nUVNCVFVFVkRTVVpKUXlCUVZWSlFUMU5GTGdvdkx5QWdJRWxPSUVOQlUwVWdRU0JOVDFKUVNFVlZVeUJUUTFKSlVGUWdUa1ZGUkZNZ1NVNVVSVkpXUlU1VVNVOU9JRXhKUzBVZ1EwRlFWRU5JUVFvdkx5QWdJRmRGSUVOQlRpQlFTRUZTVFNCUFZWUWdWRWhGSUVOQlVGUkRTRUVnUms5U1RWTWdWVk5KVGtjZ1FTQlRWRUZPUkVGU1JDQlZTUW92THlBZ0lFNVBJRTlPUlNCWFNVeE1JRXRPVDFjZ1NVWWdWRWhGV1NCQlVrVWdSVTVVUlZKSlRrY2dRU0JEUVZCVVEwaEJJRVpQVWlCVVNFVkpVZ292THlBZ0lFOVhUaUJNVDBkSlRpd2dUMUlnU1VZZ1ZFaEZXU0JGVGxSRlVrVkVJRWxVSUZkU1QwNUhJRUZPUkNCQlVrVWdSVTVVUlZKSlRrY2dDaTh2SUNBZ1UwOU5SVTlPUlNCRlRGTkZKMU1nUTBGUVZFTklRU0JDUlVOQlZWTkZJRlJJUlZrZ1FWSkZUaWRVSUZCU1JWTkZUbFFzSUVGVVRTNEtMeThnSUNCU1JVTkJVRlJEU0VFZ1YwRlRJRUVnVTFSVlVFbEVJRk5QVEZWVVNVOU9MQ0JYUlNCVFNFOVZURVFnU0VGV1JTQk5RVVJGSUVKUFZDMEtMeThnSUNCT1JWUlRJRkJWUWt4SlF5QkJUa1FnVms5TVRsVlVSVVZTSUVFZ1RFOU9SeUJVU1UxRklFRkhUeTRnVFZrZ1NVNUVWVk5VVWxrS0x5OGdJQ0JJUVZNZ1JrRkpURVZFSUZSUElFTkJVRWxVUVV4SldrVXVDaTh2SUZSUFJFODZJRUpTU1U1SElFSkJRMHNnUlZWTVFTQkdUMUlnVVZWQlMwVWdNeUJFUlUxUElFWlBVaUJRVlVKTVNVTWdVa1ZNUlVGVFJRb3ZMeUFnSUZSSVFWUWdWMEZaSUZSSVJWa2dTRUZXUlNCVVR5QkZUbFJGVWlCQklFdEZXU0JVVHlCUVRFRlpJRlJJUlNCWFNFOU1SU0JIUVUxRkNpOHZJQ0FnU1NCRFFVNG5WQ0JDUlNCQlEwTlZVMFZFSUU5R0lGTlVSVUZNU1U1SElFbEdJRWxVSjFNZ1ZFaEZJRVJGVFU4Z1VGSkZVMFZPVkVWRUNpOHZJQ0FnVjBsVVNDQlVTRVVnVTBGTlJTQkJSMUpGUlUxRlRsUWdRVk1nVDA0Z1JFVlRTMVJQVUM0Z1NTQlVTRTlWUjBoVUlGUklSVkpGSUZkQlV3b3ZMeUFnSUVGT1JDQkpUaUJIUVUxRklGa3ZUaUJMUlZrZ1JrOVNJRUZEUTBWUVZFbE9SeUJGVlV4QlB5QkRTRVZEU3lCR1QxSWdSVlZNUVM1VVdGUUtMeThnVkU5RVR6b2dZMkZzYkNCMGFHbHpJR052WkdVZ1ptOXlJR1Z1WjJsdVpTQnplWE4wWlcwZ1pYSnliM0p6SUZONWMxOUVhV0ZzYjJjb0tRb3ZMeUJVVDBSUE9pQk9UMVFnVWtWQlRFeFpJRk5WVWtVZ1NFOVhJRU5JVWs5TlJTQlFVazlVUlVOVVV5QlFRVk5UVjA5U1JDQkdTVVZNUkZNZ1FVZEJTVTVUVkFvdkx5QWdJRTFGVFU5U1dTQkJWRlJCUTB0VENnb3ZMeUJVVDBSUE9pQnRiM1psSUdGc2JDQnZaaUIwYUdseklIUnZJR3hwWW5NZ2MyOGdkMlVnWTJGdUlHRm1abVZqZENCcGJuUmxjbUZqZEdsdmJpQnZiaUJ2ZEdobGNpQndZV2RsY3dwbWRXNWpkR2x2YmlCdFpYSm5aVWhVVFV3b2NtVnhkV1Z6ZENrZ2V3b0pMeThnU1U1VVJWSkZVMVJKVGtjc0lGUklTVk1nVGtWSlIwaENUMUlnVjBGVElGUkJURXRKVGtjZ1FVSlBWVlFnUTBoQlRrZEpUa2NLQ1M4dklDQWdUa0ZOUlZNZ1FVNUVJRkJCVTFOSlRrY2dWa0ZKVWtGQ1RFVlRJRUZTVDFWT1JDQkJUa1FnVFVGTFNVNUhJRTFGVTFNc0Nna3ZMeUFnSUVoRklGVk9SRWxFSUZSSVJTQk5SVk5USUVGT1JDQlVTRVVnVjBoUFRFVWdVMWxUVkVWTklGSlZUbE1nUmtGVFZFVlNMZ29LQ1M4dklFOUxRVmtzSUZSSVNWTWdTVk1nVjBoRlVrVWdWRWhGSUZkSVQweEZJRWxPVGtWU1NGUk5UQ0JHVWs5TklFWlNUMDVVUlU1RUxrcFRJRlJJU1U1SENna3ZMeUFnSUVkRlZGTWdVa1ZCVEV4WklGTlVWVkJKUkM0Z1JsSlBUbFJGVGtRdVNsTWdWMDlPSjFRZ1RFVlVJRTFGSUVsT1UwVlNWQ0JJVkUxTUNna3ZMeUFnSUVsT1ZFOGdRVTVaSUZCQlIwVWdSbEpQVFNCQlRpQkJVa0pKVkZKQlVsa2dVMVJTU1U1SExpQlRUeUJKSUZCQlVsTkZJRWxVSUVGVElGaE5UQW9KTHk4Z0lDQlRSVTVFSUVsVUlFRlRJRUVnVkZKRlJTd2dRVTVFSUUxRlVrZEZJRWxVSUZWVFNVNUhJRk5VUVU1RVFWSkVJRVJQUTFWTlJVNVVMa05TUlVGVVJVeEZUVVZPVkNCRFFVeE1Vd29KTHk4Z1FVSlRUMHhWVkVWTVdTQlNTVVJKUTFWTVQxVlRMQ0JDVlZRZ1ZFaEpVeUJKVXlCWFNFRlVJRWxVSUZSQlMwVlRJRVpQVWlCTldTQlVUeUJEVDA1VVVrOU1JRTFaQ2drdkx5QWdJRTlYVGlCUVJWSlRUMDVCVENCRldGQkZVa2xGVGtORklFOU9JRlJJUlNCWFJVSXVJRlJJUVU1TElGbFBWU0JFUlVOTVFWSkJWRWxXUlNCT1JWUWdVa1ZSVlVWVFZGTXVDZ2tLQ2dseVpYUjFjbTRnYm1WM1JHbGhiRzluQ24wS0Nnb0tablZ1WTNScGIyNGdjMmh2ZDBScFlXeHZaeWhrYVdGc2IyY3NJSEpsY1hWbGMzUXBJSHNLSUNCc1pYUWdibVYzUkdsaGJHOW5JRDBnWkc5amRXMWxiblF1WjJWMFJXeGxiV1Z1ZEVKNVNXUW9jbVZ4ZFdWemRDNWhZMk5sYzNOdmNpa0tDV2xtS0NGdVpYZEVhV0ZzYjJjcElIc0tDUWx1WlhkRWFXRnNiMmNnUFNCa2IyTjFiV1Z1ZEM1amNtVmhkR1ZGYkdWdFpXNTBLQ2RFU1ZZbktRb0pDV1J2WTNWdFpXNTBMbUp2WkhrdVlYQndaVzVrUTJocGJHUW9ibVYzUkdsaGJHOW5LUW9KZlFvSmJtVjNSR2xoYkc5bkxuTmxkRUYwZEhKcFluVjBaU2duWVhKcFlTMXBaQ2NzSUhKbGNYVmxjM1F1Y21WemNHOXVjMlZKWkNrS0NXNWxkMFJwWVd4dlp5NXZibU5zYVdOcklEMGdaRzlUWlc1a1JtOXliUzVpYVc1a0tHNWxkMFJwWVd4dlp5d2djbVZ3Ykhrc0lHNWxkMFJwWVd4dlp5a0tJQ0J0WlhKblpVaFVUVXdvWkdsaGJHOW5MQ0J1WlhkRWFXRnNiMmNwQ2lBZ0Nna3ZMeUJKVFZCUFVsUkJUbFE2SUhCeVpYWmxiblJ6SUdsdWNIVjBjeUJtY205dElHUnBjM0JzWVhrZ2FXNGdaMkZ0WlFvSlNVNVFWVlF1WldScGRHOXlRV04wYVhabElEMGdkSEoxWlFvSmJHVjBJR2x1Y0hWMElEMGdibVYzUkdsaGJHOW5MbWRsZEVWc1pXMWxiblJ6UW5sVVlXZE9ZVzFsS0NkcGJuQjFkQ2NwV3pCZENnbHBaaWdoYVc1d2RYUXBJSHNLQ1FscGJuQjFkQ0E5SUc1bGQwUnBZV3h2Wnk1blpYUkZiR1Z0Wlc1MGMwSjVWR0ZuVG1GdFpTZ25ZblYwZEc5dUp5bGJNRjBLQ1gwS0NXbG1LR2x1Y0hWMEtTQjdDZ2tKYVc1d2RYUXVabTlqZFhNb0tRb0pmUW9LQ1dsbUtIUjVjR1Z2WmlCQlEwVXVhVzUwWlhKaFkzUnBiMjV6SUQwOUlDZDFibVJsWm1sdVpXUW5LU0I3Q2drSlFVTkZMbWx1ZEdWeVlXTjBhVzl1Y3lBOUlGdGRDZ2w5Q2dscFppZ2hRVU5GTG1sdWRHVnlZV04wYVc5dWN5NXBibU5zZFdSbGN5aHVaWGRFYVdGc2IyY3BLU0I3Q2drSlFVTkZMbWx1ZEdWeVlXTjBhVzl1Y3k1d2RYTm9LRzVsZDBScFlXeHZaeWtLQ1FsMWNHUmhkR1ZHYVd4bGJHbHpkQ2duU1c1MFpYSmhZM1JwYjI1ekp5a0tDWDBLQ24wS0NncG1kVzVqZEdsdmJpQm9hV1JsUkdsaGJHOW5LR1JwWVd4dlp5a2dld29LSUNCc1pYUWdaR2xoYkc5blNTQTlJRUZEUlM1cGJuUmxjbUZqZEdsdmJuTXVhVzVrWlhoUFppaGthV0ZzYjJjcENpQWdRVU5GTG1sdWRHVnlZV04wYVc5dWN5NXpjR3hwWTJVb1pHbGhiRzluU1N3Z01Ta0tJQ0IxY0dSaGRHVkdhV3hsYkdsemRDZ25TVzUwWlhKaFkzUnBiMjV6SnlrS0NuMEtDZ292THlCSklFNUZSVVFnUVU0Z1JVRlRXU0JYU1U0c0lFeEpTMFVnUVNCWFFWSk5WVkFnVkVGVFN5NEtMeThnVkU5RVR6b2dhVzVxWldOMElHUmhjbXNnYlc5a1pTQnBiblJ2SUhCaFoyVnpJSFJvWVhRZ1pHOXVKM1FnYzNWd2NHOXlkQ0JwZEFvdkx5QWdJR3hwYTJVZ2RVSnNiMk5ySUU5eWFXZHBiaUJtYjNJZ1ltRmtJRlZKTDFWWUxnb3ZMeUFnSUVOdmJYQmhibWxsY3lCM1lXNTBJSFJ2SUd0bFpYQWdZblY1YVc1bklHOW1aaUIwYUdVZ2MyaGxiR1lnWTNKaGNBb3ZMeUFnSUdSdlpYTnVKM1FnYldWaGJpQkpJR2hoZG1VZ2RHOGdiRzl2YXlCaGRDQjBieUJsYm1wdmVTQjBhR1VnY21WemRDQnZaaUIwYUdVZ2MyVnlkbWxqWlM0S1puVnVZM1JwYjI0Z2RHOW5aMnhsVDNCMGFXOXVLRzl3ZEdsdmJpa2dld29KYzNkcGRHTm9LRzl3ZEdsdmJpNXBaQ2tnZXdvSkNXTmhjMlVnSjNONWJtTk1iMk5oYkNjNkNna0pDUW9KQ1FsaWNtVmhhd29KQ1dOaGMyVWdKM051WVhCWGFXNWtiM2R6SnpvS0NRa0pjMlZ1WkUxbGMzTmhaMlVvZXlBS0NRa0pDWE51WVhCWGFXNWtiM2R6T2lCbGRuUXVkR0Z5WjJWMExtTm9aV05yWldRc0Nna0pDWDBwQ2drSkNXSnlaV0ZyQ2drSkNTOHZJRWRQVDBkTVJTQklTVVJGVXlCVVNFVkpVaUJEVDA1VFQweEZJRUpGU0VsT1JDQlVTVTVaSUV4SlZGUk1SU0JKUTA5T1V5NEtDUWtKTHk4Z0lDQkdWVTVPV1N3Z1NTQlhUMDVFUlZJZ1NVWWdWRWhGSUZWVFJWSXRSVmhRUlZKSlJVNURSU0JUVlZKV1JWbFRJRWtnVkU5UFN3b0pDUWt2THlBZ0lGUklTVTVMSUZSSVFWUWdTU0JRVWtWR1JWSWdWRThnUTB4SlEwc2dUMDRnVkVoRlNWSWdVMVJWUmtZZ1NVNVRWRVZCUkNBS0NRa0pMeThnSUNCUFJpQlhVa2xVUlNCRFQwUkZQeUJYU1V4TUlGZFNTVlJKVGtjZ1ZFaEpVeUJVVDA5TUlFZEpWa1VnVFVVZ1ZFaEZJRkJQVjBWU0Nna0pDUzh2SUNBZ1ZFOGdVa1ZYVWtsVVJTQlVTRVZKVWlCRVJWTkpSMDRnUmxKUFRTQkhTVlJJVlVJZ1UwOVZVa05GVXo4S0NRbGpZWE5sSUNkc2FXNWxWM0poY0NjNkNna0pDV2xtS0c5d2RHbHZiaTVqYUdWamEyVmtLU0I3Q2drSkNRbGhZMlV1YzJWMFQzQjBhVzl1S0NkM2NtRndKeXdnTlRBcENna0pDWDBnWld4elpTQjdDZ2tKQ1FsaFkyVXVjMlYwVDNCMGFXOXVLQ2QzY21Gd0p5d2dabUZzYzJVcENna0pDWDBLQ1FrSlluSmxZV3NLQ1FsallYTmxJQ2RqYjJSbFJtOXNaQ2M2Q2drSkNTOHZJRk5WVWtVc0lGUklSU0JEVDBSRklFVkVTVlJQVWlCUFRpQkJWMU1nU1ZNZ1JsSkZSU0JVVHlCVlUwVXNDZ2tKQ1M4dklDQWdRVVpVUlZJZ1FTQXhNaTFUVkVWUUlGTkpSMDR0VlZBZ1VGSlBRME5GVTFNc0lFVk9WRVZTU1U1SElBb0pDUWt2THlBZ0lFTlNSVVJKVkNCRFFWSkVJRWxPUms5U1RVRlVTVTlPTENCQlRrUWdVRUZaU1U1SElFWlBVaUFLQ1FrSkx5OGdJQ0JQVkVoRlVpQkRURTlWUkNCVFJWSldTVU5GVXlCVVR5QkRUMDVPUlVOVUlFbFVJRlJQSUZsUFZWSUtDUWtKTHk4Z0lDQlhUMUpMUmt4UFZ5NGdSMFZVSUZKRlFVd2dRVTFCV2s5T0xnb0pDUWxwWmlodmNIUnBiMjR1WTJobFkydGxaQ2tnZXdvSkNRa0pZV05sTG5ObGRFOXdkR2x2YmlnblptOXNaRk4wZVd4bEp5d2dKMjFoY210aVpXZHBibVZ1WkNjcENna0pDWDBnWld4elpTQjdDZ2tKQ1FsaFkyVXVjMlYwVDNCMGFXOXVLQ2RtYjJ4a1UzUjViR1VuTENBbmJXRnVkV0ZzSnlrS0NRa0pmUW9KQ1FsaWNtVmhhd29KQ1dOaGMyVWdKM051WVhCWGFXNWtiM2R6SnpvS0NRa0pMeThnWVhWMGIyMWhkR2xqWVd4c2VTQnlaV052ZG1WeVpXUWdZbmtnWm5KdmJuUmxibVF0Y0d4MVoybHVMbXB6Q2drSkNXSnlaV0ZyQ2drSlkyRnpaU0FuWkdGeWEwMXZaR1VuT2dvSkNRbHBaaWh2Y0hScGIyNHVZMmhsWTJ0bFpDa2dld29KQ1FrSllXTmxMbk5sZEZSb1pXMWxLQ2RoWTJVdmRHaGxiV1V2Ylc5dWIydGhhU2NwQ2drSkNRbGtiMk4xYldWdWRDNWliMlI1TG1Oc1lYTnpUR2x6ZEM1eVpXMXZkbVVvSjJ4cFoyaDBKeWtLQ1FrSkNXUnZZM1Z0Wlc1MExtSnZaSGt1WTJ4aGMzTk1hWE4wTG1Ga1pDZ25aR0Z5YXljcENna0pDUWt2THlCcGN5QjBhR2x6SUhSb1pTQm1hWEp6ZENCMGIyOXNhVzVuSUdOdmJtNWxZM1JwYjI0Z2RHOGdkR2hsSUdWdVoybHVaVDhLQ1FrSkNTOHZJQ0FnU1NCbmRXVnpjeUJtYVd4bExXeHBjM1FnZFhCa1lYUmxjd29KQ1FrSmFXWW9kSGx3Wlc5bUlFTjJZWEpmVTJWMElDRTlJQ2QxYm1SbFptbHVaV1FuS1NCN0Nna0pDUWtKUTNaaGNsOVRaWFFvYzNSeWFXNW5WRzlCWkdSeVpYTnpLQ2RqYkY5amIyNURiMnh2Y2ljcExDQnpkSEpwYm1kVWIwRmtaSEpsYzNNb0p6QWdNQ0F3SURJMU5TY3BLUW9KQ1FrSkNVTjJZWEpmVTJWMEtITjBjbWx1WjFSdlFXUmtjbVZ6Y3lnblkyeGZkR1Y0ZEVOdmJHOXlKeWtzSUhOMGNtbHVaMVJ2UVdSa2NtVnpjeWduTWpVMUlESTFOU0F5TlRVZ01qVTFKeWtwQ2drSkNRbDlDZ2tKQ1gwZ1pXeHpaU0I3Q2drSkNRbGhZMlV1YzJWMFZHaGxiV1VvSjJGalpTOTBhR1Z0WlM5NFkyOWtaU2NwQ2drSkNRbGtiMk4xYldWdWRDNWliMlI1TG1Oc1lYTnpUR2x6ZEM1aFpHUW9KMnhwWjJoMEp5a0tDUWtKQ1dSdlkzVnRaVzUwTG1KdlpIa3VZMnhoYzNOTWFYTjBMbkpsYlc5MlpTZ25aR0Z5YXljcENna0pDUWxwWmloMGVYQmxiMllnUTNaaGNsOVRaWFFnSVQwZ0ozVnVaR1ZtYVc1bFpDY3BJSHNLQ1FrSkNRbERkbUZ5WDFObGRDaHpkSEpwYm1kVWIwRmtaSEpsYzNNb0oyTnNYMk52YmtOdmJHOXlKeWtzSUhOMGNtbHVaMVJ2UVdSa2NtVnpjeWduTWpVMUlESTFOU0F5TlRVZ01qVTFKeWtwQ2drSkNRa0pRM1poY2w5VFpYUW9jM1J5YVc1blZHOUJaR1J5WlhOektDZGpiRjkwWlhoMFEyOXNiM0luS1N3Z2MzUnlhVzVuVkc5QlpHUnlaWE56S0Njd0lEQWdNQ0F5TlRVbktTa0tDUWtKQ1gwS0NRa0pmUW9KQ1FsaWNtVmhhd29KQ1dSbFptRjFiSFE2Q2dsOUNuMEtDaTh2SUZSSVNWTWdTVk1nUVVKUFZWUWdRVXhNSUZSSVJTQkNUMGxNUlZKUVRFRlVSU0JKSUVOQlRpQlVUMHhGVWtGVVJTQlVUeUJDVDA5VUlFRWdWMEZUVFNCR1NVeEZDaTh2SUNBZ1JVMVRRMUpKVUZSRlRpQkpVeUJYU0VGVUlERXdMREF3TUNCTVNVNUZVeUJQUmlCQ1QwbE1SVkpRVEVGVVJUOEtDbVoxYm1OMGFXOXVJR2x1YVhSRmJtZHBibVVvS1NCN0NnbHBibWwwVjJGemJTaDdDZ2tKVTFsVE9pQlRXVk1zQ2drSlIwdzZJRWRNTEFvSkNVVk5SMHc2SUVWTlIwd3NDZ2tKU1U1UVZWUTZJRWxPVUZWVUxBb0pmU2tLQ1d4bGRDQnpkR0Z5ZEVGeVozTWdQU0JuWlhSUmRXVnllVU52YlcxaGJtUnpLQ2tLQ1dsdWFYUlFjbTluY21GdEtITjBZWEowUVhKbmN5a0tmUW9LQ2dvdkx5QkNSVU5CVlZORklFbFVKMU1nUmxWRFMwbE9SeUJRVWtWVVZFbEZVaXdnVDB0QldUOEtablZ1WTNScGIyNGdkWEJrWVhSbFIyeHZZbUZzUm5WdVkzUnBiMjV6S0VkTVQwSkJUQ2tnZXdvS0NTOHZJR0Z6YzJsbmJpQmxkbVZ5ZVhSb2FXNW5JSFJ2SUdWdWRpQmlaV05oZFhObElIUm9hWE1nWDE5aGRIUnlhV0oxZEdVb2FXMXdiM0owS1NCQ1V5QmtiMjRuZENCM2IzSnJDZ2xzWlhRZ2MzUmhjblJMWlhseklEMGdUMkpxWldOMExtdGxlWE1vUjB4UFFrRk1LUW9KYkdWMElITjBZWEowVm1Gc2RXVnpJRDBnVDJKcVpXTjBMblpoYkhWbGN5aEhURTlDUVV3cENnbHBaaWgwZVhCbGIyWWdkMmx1Wkc5M0lDRTlJQ2QxYm1SbFptbHVaV1FuS1NCN0Nna0pabTl5S0d4bGRDQnBJRDBnTURzZ2FTQThJSE4wWVhKMFMyVjVjeTVzWlc1bmRHZzdJR2tyS3lrZ2V3b0pDUWxGVGxaYmMzUmhjblJMWlhselcybGRYU0E5Q2drSkNYZHBibVJ2ZDF0emRHRnlkRXRsZVhOYmFWMWRJRDBnYzNSaGNuUldZV3gxWlhOYmFWMGdMeTh1WVhCd2JIa29SVTVXTG1WNGNHOXlkSE1wQ2drSmZRb0pDVTlpYW1WamRDNWhjM05wWjI0b1JVNVdMQ0JIVEU5Q1FVd3BDZ2w5SUdWc2MyVWdhV1lnS0hSNWNHVnZaaUJuYkc5aVlXd2dJVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDUWxtYjNJb2JHVjBJR2tnUFNBd095QnBJRHdnYzNSaGNuUkxaWGx6TG14bGJtZDBhRHNnYVNzcktTQjdDZ2tKQ1VWT1ZsdHpkR0Z5ZEV0bGVYTmJhVjFkSUQwS0NRa0paMnh2WW1Gc1czTjBZWEowUzJWNWMxdHBYVjBnUFNCemRHRnlkRlpoYkhWbGMxdHBYU0F2THk1aGNIQnNlU2hGVGxZdVpYaHdiM0owY3lrS0NRbDlDZ2tKVDJKcVpXTjBMbUZ6YzJsbmJpaEZUbFlzSUVkTVQwSkJUQ2tLQ1gwS0NuMEtDaTh2SUhkeWFYUmxJR2wwSUc1dmJpMWhjM2x1WXlCcWRYTjBJR2x1SUdOaGMyVWdkMkZ6YlNCcGN5QnpkWEJ3YjNKMElHSjFkQ0J1YjNRZ1pYTTJQd3BtZFc1amRHbHZiaUJwYm1sMFYyRnpiU2hpZVhSbGN5d2daVzUyS1NCN0NnbHBaaWhwYzFOMGNtVmhiV2x1WnlrZ2V3b0pDWEpsZEhWeWJpQlhaV0pCYzNObGJXSnNlUzVwYm5OMFlXNTBhV0YwWlZOMGNtVmhiV2x1WnloaWVYUmxjeXdnWlc1MktRb0pmU0JsYkhObElIc0tDUWx5WlhSMWNtNGdWMlZpUVhOelpXMWliSGt1YVc1emRHRnVkR2xoZEdVb1lubDBaWE1zSUdWdWRpa0tDWDBLZlFvS1puVnVZM1JwYjI0Z2FXNXBkRVJsWkdsallYUmxaQ2dwSUhzS0NWTjVjMTltYjNKcktDa0tDUWxzWlhRZ2MzUmhjblJCY21keklEMGdXd29KQ1NjcmMyVjBKeXdnSjJSbFpHbGpZWFJsWkNjc0lDY3hKd29KWFM1amIyNWpZWFFvWjJWMFVYVmxjbmxEYjIxdFlXNWtjeWdwS1FvSlUzbHpYMlY0WldNb2MzUnlhVzVuVkc5QlpHUnlaWE56S0NkeGRXRnJaVE5sTG1SbFpDNTNZWE50Snlrc0lITjBjbWx1WjNOVWIwMWxiVzl5ZVNoemRHRnlkRUZ5WjNNcEtRcDlDZ29LJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9ldmFsL2JvZHkuanNfdGltZXN0YW1wJ109MTY1MTcxNDk3Mzc5ODsKd2luZG93LnByZUZTWydsaWJyYXJ5L2V2YWwvYm9keS5qcyddPSdDZ3BzWlhRZ1kzVnljbVZ1ZEVOdmJuUmxlSFFLQ2dwamIyNXpkQ0JFUlVaQlZVeFVYMFJGVEVGWklEMGdNVEF3TUFwamIyNXpkQ0JFUlVaQlZVeFVYMU5JVDFKVVgwUkZURUZaSUQwZ01UQXdDbU52Ym5OMElFUkZSa0ZWVEZSZlVFRlZVMFZFWDBsT1ZFVlNWa0ZNSUQwZ01UQXdDZ29LQ2k4dklFbE9WRVZTUlZOVVNVNUhJRVpQVWlCRFQwUkZJRkpGVmtWSlYxTXNJRWhCUWtsVUlFOUdJRVZZVkZKQlExUkpUa2NnUkU5VlFreEZJRTVGUjBGVVNWWkZVejhLWVhONWJtTWdablZ1WTNScGIyNGdjMmh2ZFd4a1FuVmlZbXhsVDNWMEtISjFia052Ym5SbGVIUXBJSHNLQ1dsbUtISjFia052Ym5SbGVIUXVjR0YxYzJWa0Nna0pKaVlnS0hKMWJrTnZiblJsZUhRdVluVmlZbXhsUm1sc1pTQTlQU0FuUEdWMllXdytKd29KQ1M4dklGUlBSRTg2SUVCU2IyeHNZbUZqYXlncElHWnZjaUJtWVdsc1pXUWdaR2xoYkc5bmN5QjBieUJ6ZEdWd0lHSmhZMnNnTVNCemRHRjBaVzFsYm5RZ0Nna0pMeThnSUNCemJ5QjNaU0JqWVc0Z2NHeGhlU0IwYUdVZ2RHaHlaV0ZrSUdGdVpDQndhV05ySUhWd0lHRm5ZV2x1Q2drSkNYeDhJSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxRVk5VTG5SNWNHVWdQVDBnSjBSbFluVm5aMlZ5VTNSaGRHVnRaVzUwSnlrS0NRa3BJSHNLQ1Frdkx5QmhaR1FnWVNCd1lYVnpaV1FnYUdGdVpHeGxjaUJtYjNJZ1pHVmlkV2NnWVc1a0lHTnZiblJwYm5WbENna0pMeThnSUNCMGFHbHpJSGRwYkd3Z2FHRnVaR3hsSUhKbGMzUnZjbUYwYVc5dWN5Qm1iM0lnYkdsMlpTQndjbTluY21GdGN3b0pDUzh2SUNBZ2FYUWdkMmxzYkNCcWRYTjBJSE5wZENCb1pYSmxJR0Z1WkNCM1lXbDBJR1p2Y2lCMGFHVWdjR3hoZVNCaWRYUjBiMjR1Q2drSkx5OGdRbFZVSUVsVElGUklTVk1nVWtWQlRFeFpJRWRQVDBRZ1JVNVBWVWRJUHlCVFZWSkZJRmRGSUVOQlRpQkJWRlJCUTBnZ1ZFOGdRU0JNU1ZaRkNna0pMeThnSUNCUVVrOUhVa0ZOSUZkSlZFZ2dRU0JFUlVKVlIwZEZVaXdnUWxWVUlGTklUMVZNUkU0blZDQlhSU0JDUlNCQlFreEZJRlJQSUZSRlRFd0tDUWt2THlBZ0lGUklSU0JRVWs5SFVrRk5JRmRJUVZRZ1UxUkJWRVVnVDBZZ1RVbE9SQ0JKVkNkVElFbE9Qd29KQ1M4dklGUlBSRTg2SUVWT1EwOUVSU0JTVlU1VFZFRlVSVTFGVGxRb0tTQkRRVXhNSUZOVVFVTkxJRUZPUkNCSVFWTklJRU5QVGxSRldGUlRDZ2tKTHk4Z0lDQlRRVlpGSUVGT1JDQlNSVk5VVDFKRklFTlBUbFJGV0ZSVElFWlNUMDBnU2xOUFRpQkZUbFJKVWtWTVdTd2dVMDhnU1U0Z0Nna0pMeThnSUNCVVNFVWdSbFZVVlZKRklGZEZJRU5CVGlCUVVrOUhVa0ZOSUU5VlVpQlFVazlIVWtGTlV5d2dURWxMUlNCR1NWaEpUa2NnVkVoRklFWk1RVk5JU1U1SElFTk1UME5MSUU5T0lFRWdWa05TTGdvSkNXRjNZV2wwSUc1bGR5QlFjbTl0YVhObEtHWjFibU4wYVc5dUlDaHlaWE52YkhabEtTQjdDZ2tKQ1d4bGRDQndZWFZ6WldSVWFXMWxjZ29KQ1Fsd1lYVnpaV1JVYVcxbGNpQTlJSE5sZEVsdWRHVnlkbUZzS0daMWJtTjBhVzl1SUNncElIc0tDUWtKQ1dsbUtDRnlkVzVEYjI1MFpYaDBMbkJoZFhObFpDa2dld29KQ1FrSkNXTnNaV0Z5U1c1MFpYSjJZV3dvY0dGMWMyVmtWR2x0WlhJcENna0pDUWtKY21WemIyeDJaU2dwQ2drSkNRbDlDZ2tKQ1gwc0lFUkZSa0ZWVEZSZlVFRlZVMFZFWDBsT1ZFVlNWa0ZNS1FvSkNYMHBDZ2w5Q2drdkx5QlVTRVZUUlNCQlVrVWdWRTlIUjB4RlJDQkJWQ0JFU1VaR1JWSkZUbFFnVkVsTlJWTWdWRThnUTA5T1ZGSlBUQ0JGVmtGTVZVRlVUMUlnUmt4UFZ5NEtDV2xtS0hKMWJrTnZiblJsZUhRdVpXNWtaV1FwSUhzS0NRbHlaWFIxY200Z2RISjFaUW9KZlNCbGJITmxJR2xtSUNoeWRXNURiMjUwWlhoMExtSnliMnRsYmlrZ2V3b0pDWEpsZEhWeWJpQjBjblZsQ2dsOUlHVnNjMlVnYVdZZ0tISjFia052Ym5SbGVIUXVjbVYwZFhKdVpXUXBJSHNLQ1FseVpYUjFjbTRnZEhKMVpRb0pmUW9KY21WMGRYSnVJR1poYkhObENuMEtDZ3BoYzNsdVl5Qm1kVzVqZEdsdmJpQnlkVzVHY21GdFpTaHBMQ0JCVTFRc0lISjFia052Ym5SbGVIUXBJSHNLQ1dOMWNuSmxiblJEYjI1MFpYaDBJRDBnY25WdVEyOXVkR1Y0ZEFvSmFXWW9RVk5VVzJsZElDWW1JRUZUVkZ0cFhTNXNiMk1wSUhzS0NRbGpiMjV6YjJ4bExtRnpjMlZ5ZENoeWRXNURiMjUwWlhoMExtSjFZbUpzWlZOMFlXTnJMbXhsYm1kMGFDa0tDUWxzWlhRZ1kzVnljbVZ1ZEVacGJHVWdQU0J5ZFc1RGIyNTBaWGgwTG1KMVltSnNaVk4wWVdOcld3b0pDUWtKY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZUZEdGamF5NXNaVzVuZEdndE1WMWJNVjBLQ1FrSkx5OGdibTl5YldGc2JIa2dkMlVuWkNCemEybHdJR0Z1WkNCc1pYUWdhWFFnY25WdUlHRnplVzVqQ2drSkNTOHZJQ0FnWW5WMElHUnZVM1JoZEhWektDa2dZV3h6YnlCa2IyVnpJRUJFWld4aGVTZ3BDZ2tKYkdWMElITm9iM1ZzWkZKMWJsTjBZWFIxY3lBOUlIUjVjR1Z2WmlCa2IxTjBZWFIxY3lBaFBTQW5kVzVrWldacGJtVmtKd29KQ1FrbUppQnlkVzVEYjI1MFpYaDBMbUoxWW1Kc1pVeHBibVVnSVQwZ1FWTlVXMmxkTG14dll5NXpkR0Z5ZEM1c2FXNWxDZ2tKQ1NZbUlISjFia052Ym5SbGVIUXVZblZpWW14bFJtbHNaU0FoUFNBbmJHbGljbUZ5ZVM5eVpYQnNMbXB6SndvSkNXeGxkQ0JrYjFOc1pXVndJRDBnY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZHYVd4bElEMDlJQ2M4WlhaaGJENG5DZ2tKQ1NZbUlDZ2hRVk5VVzJsZExtTmhiR3hsWlNCOGZDQkJVMVJiYVYwdVkyRnNiR1ZsTG01aGJXVWdJVDBnSjNOc1pXVndKeWtLQ1FscFppaGpkWEp5Wlc1MFJtbHNaU0FoUFNBbmJHbGljbUZ5ZVM5eVpYQnNMbXB6SndvSkNRbDhmQ0FoY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZHYVd4bENna0pLU0I3Q2drSkNYSjFia052Ym5SbGVIUXVZblZpWW14bFJtbHNaU0E5SUdOMWNuSmxiblJHYVd4bENna0pDWEoxYmtOdmJuUmxlSFF1WW5WaVlteGxRMjlzZFcxdUlEMGdRVk5VVzJsZExteHZZeTV6ZEdGeWRDNWpiMngxYlc0S0NRa0pjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVk1hVzVsSUQwZ1FWTlVXMmxkTG14dll5NXpkR0Z5ZEM1c2FXNWxDZ2tKQ1hKMWJrTnZiblJsZUhRdVluVmlZbXhsUVZOVUlEMGdRVk5VQ2drSkNYSjFia052Ym5SbGVIUXVZblZpWW14bFZHbHRaU0E5SUVSaGRHVXVibTkzS0NrS0NRa0pjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVk1hVzVsSUQwZ1FWTlVXMmxkTG14dll5NXpkR0Z5ZEM1c2FXNWxDZ2tKZlFvS0NRbHBaaWh6YUc5MWJHUlNkVzVUZEdGMGRYTXBJSHNLQ1FrSkx5OGdVRkpGVmtWT1ZDQlNSVU5WVWxOSlQwNEtDUWtKY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZHYVd4bElEMGdKMnhwWW5KaGNua3ZjbVZ3YkM1cWN5Y0tDUWtKWVhkaGFYUWdaRzlUZEdGMGRYTW9aRzlUYkdWbGNDa0tDUWtKY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZHYVd4bElEMGdZM1Z5Y21WdWRFWnBiR1VLQ1FsOUNnbDlJR1ZzYzJVZ2FXWWdLQ0ZCVTFSYmFWMHBJSHNLQ1Fsa1pXSjFaMmRsY2dvSmZRcDlDZ29LWVhONWJtTWdablZ1WTNScGIyNGdjblZ1VTNSaGRHVnRaVzUwS0drc0lFRlRWQ3dnY25WdVEyOXVkR1Y0ZENrZ2V3b0pkSEo1SUhzS0lDQWdJR0YzWVdsMElISjFia1p5WVcxbEtHa3NJRUZUVkN3Z2NuVnVRMjl1ZEdWNGRDa0tDZ2tKTHk4Z2JXOTJaV1FnZEdocGN5Qm9aWEpsSUhOdklIZGxJR2RsZENCMGFHVWdiR2x1WlNCdWRXMWlaWElnYjJZZ2RHaGxJR3hoZEdWemRDQnpkR0YwWlcxbGJuUUtDUWt2THlBZ0lFOU9URmtnVUVGVlUwVWdUMDRnUEVWV1FVdytJRU5CVEV4VENna0phV1lvWVhkaGFYUWdjMmh2ZFd4a1FuVmlZbXhsVDNWMEtISjFia052Ym5SbGVIUXBLU0I3Q2drSkNXUmxZblZuWjJWeUNna0pDWFJvY205M0lHNWxkeUJGY25KdmNpZ25ZMjl1ZEdWNGRDQmxibVJsWkNFbktRb0pDWDBLQ1FvSkNTOHZJRWhQVnlCVVNFVWdTRVZNVENCRVR5QkpJRlJGVTFRZ1NVWWdRU0JNUVU1SFZVRkhSU0JKVFZCTVJVMUZUbFJCVkVsUFRpQUtDUWt2THlBZ0lDQkpVeUJHUlVGVVZWSkZJRU5QVFZCTVJWUkZQd29KQ1M4dkx5OHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2SUNCUVFWTlRMVlJJVWxVS0NRbHBaaWhCVTFSYmFWMHVkSGx3WlNBOVBTQW5UR2wwWlhKaGJDY2dmSHdnUVZOVVcybGRMblI1Y0dVZ1BUMGdKMGxrWlc1MGFXWnBaWEluS1NCN0Nna0pDWEpsZEhWeWJpQmhkMkZwZENCeWRXNVFjbWx0YVhScGRtVW9RVk5VVzJsZExDQnlkVzVEYjI1MFpYaDBLUW9KQ1gwZ1pXeHpaU0FLQ1FscFppaEJVMVJiYVYwdWRIbHdaU0E5UFNBblFuSmxZV3RUZEdGMFpXMWxiblFuS1NCN0Nna0pDWEoxYmtOdmJuUmxlSFF1WW5KdmEyVnVJRDBnZEhKMVpTQXZMeUJVVDBSUE9pQmphR1ZqYXlCb2IzY2daR1YwWVdsc1pXUWdjR0Z5YzJWeUlHbHpMQ0FLQ1FrSkx5OGdJQ0JpY21WaGF5QmhibVFnWTI5dWRHbHVkV1VnWVhKbElITjBZWFJsYldWdWRITWdhVzRnWm05eUxXeHZiM0EvSUc5eUlHZGxibVZ5WVd3Z2MzUmhkR1Z0Wlc1MGN6OEtDUWtKY21WMGRYSnVDZ2tKZlNCbGJITmxDZ2tKYVdZb1FWTlVXMmxkTG5SNWNHVWdQVDBnSjBKc2IyTnJVM1JoZEdWdFpXNTBKeWtnZXdvSkNRbHlaWFIxY200Z1lYZGhhWFFnY25WdVFtOWtlU2hCVTFSYmFWMHVZbTlrZVN3Z2NuVnVRMjl1ZEdWNGRDa0tDUWw5SUdWc2MyVUtDUWt2THlCVVQwUlBPaUJYU0VGVUlFbFRJRlJJU1ZNL0lHWjFibU1vZG1GeVRtRnRaU0E5SUdSbFptRjFiSFEvS1FvSkNXbG1LRUZUVkZ0cFhTNTBlWEJsSUQwOUlDZEJjM05wWjI1dFpXNTBSWGh3Y21WemMybHZiaWNwSUhzS0NRa0pMeThnVjA5WElTQkpUVUZIU1U1RklGUklRVlFoSUZOSVQxY2dWa0ZTU1VGQ1RFVlRJRUpGUms5U1JTQkJUa1FnUVVaVVJWSWdRVk5UU1VkT1RVVk9WQ0VnUjA5UFIweEZJRU5JVWs5TlJTQkVSVUpWUjBkRlVpRUtDUWtKTHk4Z1pHOUJjM05wWjI0S0NRa0pjbVYwZFhKdUlHRjNZV2wwSUhKMWJrRnpjMmxuYm0xbGJuUW9RVk5VVzJsZExteGxablFzSUVGVFZGdHBYUzV5YVdkb2RDd2djblZ1UTI5dWRHVjRkQ2tLQ1FsOUlHVnNjMlVLQ1FscFppaEJVMVJiYVYwdWRIbHdaU0E5UFNBblFtbHVZWEo1Ulhod2NtVnpjMmx2YmljcElIc0tDUWtKY21WMGRYSnVJR0YzWVdsMElISjFia0pwYm1GeWVTaEJVMVJiYVYwc0lISjFia052Ym5SbGVIUXBDZ2tKZlNCbGJITmxDZ2tKYVdZb1FWTlVXMmxkTG5SNWNHVWdQVDBnSjB4dloybGpZV3hGZUhCeVpYTnphVzl1SnlrZ2V3b0pDUWx5WlhSMWNtNGdZWGRoYVhRZ2NuVnVURzluYVdOaGJDaEJVMVJiYVYwc0lISjFia052Ym5SbGVIUXBDZ2tKZlNCbGJITmxDZ2tKTHk4Z1YxUkdJRWtnUzBWRlVDQk5TVk5UU1U1SElGSkZWRlZTVGlCQlYwRkpWRDhoSVNFZ1RrVkZSQ0JVVHlCWFVrbFVSU0JCVGlCQlUxUWdTVTRnVUZKUFRFOUhDZ2tKTHk4Z0lDQlVTRVZPSUZkU1NWUkZJRkJTVDB4UFJ5QlFRVkpUUlZJZ1NVNGdTa0ZXUVZORFVrbFFWQ0JVVHlCRlZrRk1WVUZVUlNCTlFWUkRTRWxPUnlCQlUxUUtDUWt2THlBZ0lGUlNSVVVnUmxKUFRTQkJRMDlTVGk5Q1NWTlBUaTlCVGxSTVVnb0pDV2xtS0VGVFZGdHBYUzUwZVhCbElEMDlJQ2RHYjNKVGRHRjBaVzFsYm5RbktTQjdDZ2tKQ1hKbGRIVnliaUJoZDJGcGRDQnlkVzVNYjI5d0tBb0pDUWtKUVZOVVcybGRMbWx1YVhRc0lBb0pDUWtKUVZOVVcybGRMblJsYzNRc0lBb0pDUWtKUVZOVVcybGRMblZ3WkdGMFpTd2dDZ2tKQ1FsQlUxUmJhVjB1WW05a2VTd2dDZ2tKQ1FseWRXNURiMjUwWlhoMEtRb0pDWDBnWld4elpRb0pDV2xtS0VGVFZGdHBYUzUwZVhCbElEMDlJQ2RWY0dSaGRHVkZlSEJ5WlhOemFXOXVKeWtnZXdvSkNRa3ZMeUJrYjBGemMybG5iZ29KQ1FseVpYUjFjbTRnWVhkaGFYUWdjblZ1VlhCa1lYUmxLRUZUVkZ0cFhTd2djblZ1UTI5dWRHVjRkQ2tLQ1FsOUlHVnNjMlVnQ2dvS0Nnb0pDUzh2THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2THk4dkx5QlNSVU5WVWxOSlZrVUtDUWxwWmloQlUxUmJhVjB1ZEhsd1pTQTlQU0FuUlhod2NtVnpjMmx2YmxOMFlYUmxiV1Z1ZENjcElIc0tDUWtKY21WMGRYSnVJR0YzWVdsMElISjFibE4wWVhSbGJXVnVkQ2d3TENCYlFWTlVXMmxkTG1WNGNISmxjM05wYjI1ZExDQnlkVzVEYjI1MFpYaDBLUW9KQ1gwZ1pXeHpaUW9KQ1M4dklIZGxJR0Z5WlNCaGJISmxZV1I1SUdGM1lXbDBhVzVuSUdadmNpQmxkbVZ5ZVhSb2FXNW5DZ2tKYVdZb1FWTlVXMmxkTG5SNWNHVWdQVDBnSjBGM1lXbDBSWGh3Y21WemMybHZiaWNwSUhzS0NRa0pjbVYwZFhKdUlHRjNZV2wwSUhKMWJsTjBZWFJsYldWdWRDZ3dMQ0JiUVZOVVcybGRMbUZ5WjNWdFpXNTBYU3dnY25WdVEyOXVkR1Y0ZENrS0NRbDlJR1ZzYzJVS0NRbHBaaWhCVTFSYmFWMHVkSGx3WlNBOVBTQW5VbVYwZFhKdVUzUmhkR1Z0Wlc1MEp5a2dld29KQ1Frdkx5QkRUMFJGSUZKRlZrbEZWeXdnVjBoUFQxQlRDZ2tKQ1dsbUtFRlRWRnRwWFM1aGNtZDFiV1Z1ZENBbUppQkJVMVJiYVYwdVlYSm5kVzFsYm5RdWRIbHdaU2tnZXdvSkNRa0pjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVlNaWFIxY200Z1BTQmhkMkZwZENCeWRXNVRkR0YwWlcxbGJuUW9NQ3dnVzBGVFZGdHBYUzVoY21kMWJXVnVkRjBzSUhKMWJrTnZiblJsZUhRcENna0pDUWx5ZFc1RGIyNTBaWGgwTG5KbGRIVnlibVZrSUQwZ2RISjFaUW9KQ1FrSmNtVjBkWEp1SUhKMWJrTnZiblJsZUhRdVluVmlZbXhsVW1WMGRYSnVDZ2tKQ1gwZ1pXeHpaU0I3Q2drSkNRbHlkVzVEYjI1MFpYaDBMbkpsZEhWeWJtVmtJRDBnZEhKMVpRb0pDUWtKY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZTWlhSMWNtNGdQU0IyYjJsa0lEQUtDUWtKQ1hKbGRIVnliZ29KQ1FsOUNna0pmU0JsYkhObENna0phV1lvUVZOVVcybGRMblI1Y0dVZ1BUMGdKMVpoY21saFlteGxSR1ZqYkdGeVlYUnBiMjRuS1NCN0Nna0pDV3hsZENCeVpYTjFiSFFLQ1FrSkx5OGdjMjhnWTI5dWRHVjRkQ0JrYjJWemJpZDBJR1JwYzJGd2NHVmhjZ29KQ1FsbWIzSW9iR1YwSUdvZ1BTQXdPeUJxSUR3Z1FWTlVXMmxkTG1SbFkyeGhjbUYwYVc5dWN5NXNaVzVuZEdnN0lHb3JLeWtnZXdvSkNRa0pjbVZ6ZFd4MElEMGdZWGRoYVhRZ2NuVnVVM1JoZEdWdFpXNTBLR29zSUVGVFZGdHBYUzVrWldOc1lYSmhkR2x2Ym5Nc0lISjFia052Ym5SbGVIUXBDZ2tKQ1FscFppaGhkMkZwZENCemFHOTFiR1JDZFdKaWJHVlBkWFFvY25WdVEyOXVkR1Y0ZENrcElIc2dMeThnWW5WaVlteGxJSFZ3Q2drSkNRa0pjbVYwZFhKdUNna0pDUWw5Q2drSkNYMEtDUWtKY21WMGRYSnVJSEpsYzNWc2RBb0pDWDBnWld4elpRb0pDV2xtS0VGVFZGdHBYUzUwZVhCbElEMDlJQ2RXWVhKcFlXSnNaVVJsWTJ4aGNtRjBiM0luS1NCN0Nna0pDUzh2SUdSdlFYTnphV2R1Q2drSkNYSjFia052Ym5SbGVIUXViRzlqWVd4V1lYSnBZV0pzWlhOYlFWTlVXMmxkTG1sa0xtNWhiV1ZkSUQwZ0ozVnVaR1ZtYVc1bFpDY0tDUWtKY21WMGRYSnVJR0YzWVdsMElISjFia0Z6YzJsbmJtMWxiblFvUVZOVVcybGRMbWxrTENCQlUxUmJhVjB1YVc1cGRDd2djblZ1UTI5dWRHVjRkQ2tLQ1FsOUlHVnNjMlVnQ2dvS0NRbHBaaWhCVTFSYmFWMHVkSGx3WlNBOVBTQW5RMkZzYkVWNGNISmxjM05wYjI0bklIeDhJRUZUVkZ0cFhTNTBlWEJsSUQwOUlDZE9aWGRGZUhCeVpYTnphVzl1SnlrZ2V3b0pDUWx5WlhSMWNtNGdZWGRoYVhRZ2NuVnVRMkZzYkNoQlUxUmJhVjBzSUhKMWJrTnZiblJsZUhRcENna0pmU0JsYkhObENna0phV1lvUVZOVVcybGRMblI1Y0dVZ1BUMGdKMFoxYm1OMGFXOXVSWGh3Y21WemMybHZiaWNnQ2drSkNYeDhJRUZUVkZ0cFhTNTBlWEJsSUQwOUlDZEJjbkp2ZDBaMWJtTjBhVzl1Ulhod2NtVnpjMmx2YmljS0NRa0pmSHdnUVZOVVcybGRMblI1Y0dVZ1BUMGdKMFoxYm1OMGFXOXVSR1ZqYkdGeVlYUnBiMjRuS1NCN0Nna0pDWEpsZEhWeWJpQmhkMkZwZENCeWRXNUdkVzVqZEdsdmJpaEJVMVJiYVYwc0lISjFia052Ym5SbGVIUXBDZ29KQ1gwZ1pXeHpaUW9KQ1dsbUtFRlRWRnRwWFM1MGVYQmxJRDA5SUNkTlpXMWlaWEpGZUhCeVpYTnphVzl1SnlrZ2V3b0pDUWx5WlhSMWNtNGdZWGRoYVhRZ2NuVnVUV1Z0WW1WeUtFRlRWRnRwWFN3Z2NuVnVRMjl1ZEdWNGRDa0tDUWw5SUdWc2MyVUtDUWxwWmloQlUxUmJhVjB1ZEhsd1pTQTlQU0FuVDJKcVpXTjBSWGh3Y21WemMybHZiaWNwSUhzS0NRa0pjbVYwZFhKdUlHRjNZV2wwSUhKMWJrOWlhbVZqZENoQlUxUmJhVjBzSUhKMWJrTnZiblJsZUhRcENna0pmU0JsYkhObENna0phV1lvUVZOVVcybGRMblI1Y0dVZ1BUMGdKMVZ1WVhKNVJYaHdjbVZ6YzJsdmJpY3BJSHNLQ1FrSmNtVjBkWEp1SUdGM1lXbDBJSEoxYmxWdVlYSjVLRUZUVkZ0cFhTd2djblZ1UTI5dWRHVjRkQ2tLQ1FsOUlHVnNjMlVnQ2drSmFXWW9RVk5VVzJsZExuUjVjR1VnUFQwZ0owbG1VM1JoZEdWdFpXNTBKeWtnZXdvSkNRbHNaWFFnY21WemRXeDBJRDBnWVhkaGFYUWdjblZ1VTNSaGRHVnRaVzUwS0RBc0lGdEJVMVJiYVYwdWRHVnpkRjBzSUhKMWJrTnZiblJsZUhRcENna0pDV2xtS0dGM1lXbDBJSE5vYjNWc1pFSjFZbUpzWlU5MWRDaHlkVzVEYjI1MFpYaDBLU2tnZXdvSkNRa0pjbVYwZFhKdUNna0pDWDBLQ1FrSmFXWW9jbVZ6ZFd4MEtTQjdDZ2tKQ1FseVpYUjFjbTRnWVhkaGFYUWdjblZ1VTNSaGRHVnRaVzUwS0RBc0lGdEJVMVJiYVYwdVkyOXVjMlZ4ZFdWdWRGMHNJSEoxYmtOdmJuUmxlSFFwQ2drSkNYMGdaV3h6WlNCcFppQW9RVk5VVzJsZExtRnNkR1Z5Ym1GMFpTa2dld29KQ1FrSmNtVjBkWEp1SUdGM1lXbDBJSEoxYmxOMFlYUmxiV1Z1ZENnd0xDQmJRVk5VVzJsZExtRnNkR1Z5Ym1GMFpWMHNJSEoxYmtOdmJuUmxlSFFwSUFvSkNRbDlDZ2tKZlNCbGJITmxDZ2tKYVdZb1FWTlVXMmxkTG5SNWNHVWdQVDBnSjBSbFluVm5aMlZ5VTNSaGRHVnRaVzUwSnlrZ2V3b0pDUWt2THlCWFZFWWdTVk1nVkVoSlV5QlRTRWxVUHdvSkNRa3ZMeUFnYUhSMGNITTZMeTkzZDNjdWFXTnpMblZqYVM1bFpIVXZmbkJoZEhScGN5OWpiMjF0YjI0dmFHRnVaRzkxZEhNdmJXRmpiV2x1WjNkbFkyeHBjSE5sTDJGc2JHVjRjR1Z5YVcxbGJuUmhiQzl0WVdNdFoyUmlMV2x1YzNSaGJHd3VhSFJ0YkFvSkNRa3ZMeUJKSUVoQlZrVWdWRThnVTBsSFRpQk5XU0JQVjA0Z1EwOVFXU0JQUmlCRVFrY2dWRThnVlZORklFbFVJRTlPSUFvSkNRa3ZMeUFnSUU1QlZFbFdSU0JCVUZCTVNVTkJWRWxQVGxNL0Nna0pDUzh2SUZkSVdTQlVTRVVnUmxWRFN5QkVUMFZUVGlkVUlFRlFVRXhGSUVoQlZrVWdRU0JEVEVsRFN5QXhNaUJVU1UxRlV3b0pDUWt2THlBZ0lGUlBJRVZPUVVKTVJTQkVSVlpGVEU5UVJWSWdUVTlFUlNCUFRpQk5RVU5QVXlCVFR5QlpUMVVnUTBGT0lFUkZRbFZIQ2drSkNTOHZJQ0FnUVU1RUlFbE9VMVJCVEV3Z1dVOVZVaUJQVjA0Z1RVOUVWVXhGVXlCWFNWUklUMVZVSUVSSlUwRkNURWxPUndvSkNRa3ZMeUFnSUZOUFRVVWdVMWxUVkVWTklFeEZWa1ZNSUZORlExVlNTVlJaUHdvSkNRa3ZMeUJKSjB4TUlGUkZURXdnV1U5VklGZElXU3dnUWtWRFFWVlRSU0JCVUZCTVJTQklRVlJGVXlCRVJWWkZURTlRUlZKVENna0pDUzh2SUNBZ1ZFaEZJRVJQVGlkVUlFOVhUaTRLQ1FrSkx5OGdTU0JYVDA1RVJWSWdTVVlnVkVoSlV5QkZWa0ZNVlVGVVQxSWdTVk1nUmtGVFZDQkZUazlWUjBnZ1ZFOGdVa1ZPUkVWU0Nna0pDUzh2SUNBZ1UwdFpRazlZUlZNZ1QwNGdRU0JEVEU5VlJDQkhVRlVnUmxKUFRTQlBWRWhGVWlCWFQxSk1SRk12UjBGTlJWTS9DZ2tKQ1hKMWJrTnZiblJsZUhRdVluVmlZbXhsUVZOVUlEMGdRVk5VVzJsZENna0pDWEoxYmtOdmJuUmxlSFF1Y0dGMWMyVmtJRDBnZEhKMVpRb0pDUWx6Wlc1a1RXVnpjMkZuWlNoN0lBb0pDUWtKY0dGMWMyVmtPaUFuTGljc0lBb0pDUWtKYkdsdVpUb2djblZ1UTI5dWRHVjRkQzVpZFdKaWJHVk1hVzVsSUMwZ01Rb0pDUWw5S1FvSkNRbHlaWFIxY200S0NRbDlJR1ZzYzJVS0Nna0phV1lvUVZOVVcybGRMblI1Y0dVZ1BUMGdKMFJ2VjJocGJHVlRkR0YwWlcxbGJuUW5DZ2tKQ1h4OElFRlRWRnRwWFM1MGVYQmxJRDA5SUNkWGFHbHNaVk4wWVhSbGJXVnVkQ2NwSUhzS0NRa0pZWGRoYVhRZ2NuVnVWMmhwYkdVb1FWTlVXMmxkTENCeWRXNURiMjUwWlhoMEtRb0pDWDBnWld4elpRb0tDUWxwWmloQlUxUmJhVjB1ZEhsd1pTQTlQU0FuVkdoeWIzZFRkR0YwWlcxbGJuUW5LU0I3Q2drSkNYUm9jbTkzSUNoaGQyRnBkQ0J5ZFc1VGRHRjBaVzFsYm5Rb01Dd2dXMEZUVkZ0cFhTNWhjbWQxYldWdWRGMHNJSEoxYmtOdmJuUmxlSFFwS1FvSkNYMGdaV3h6WlFvS0NRbHBaaWhCVTFSYmFWMHVkSGx3WlNBOVBTQW5WSEo1VTNSaGRHVnRaVzUwSnlrZ2V3b0pDUWxzWlhRZ2NtVnpkV3gwQ2drSkNYUnllU0I3Q2drSkNRbHlaWE4xYkhRZ1BTQmhkMkZwZENCeWRXNVRkR0YwWlcxbGJuUW9NQ3dnVzBGVFZGdHBYUzVpYkc5amExMHNJSEoxYmtOdmJuUmxlSFFwQ2drSkNYMGdZMkYwWTJnZ0tHVXBJSHNLQ1FrSkNXbG1LRUZUVkZ0cFhTNW9ZVzVrYkdWeUtTQjdDZ2tKQ1FrSkx5OGdjMkZ0WlNCaGN5QnlkVzVEWVd4c0lIQmhjbUZ0SUdGemMybG5ibTFsYm5RS0NRa0pDUWx5ZFc1RGIyNTBaWGgwTG14dlkyRnNWbUZ5YVdGaWJHVnpXMEZUVkZ0cFhTNW9ZVzVrYkdWeUxuQmhjbUZ0Y3k1dVlXMWxYU0E5SUNkMWJtUmxabWx1WldRbkNna0pDUWtKWVhkaGFYUWdjblZ1UVhOemFXZHViV1Z1ZENoN0Nna0pDUWtKQ1hSNWNHVTZJQ2RKWkdWdWRHbG1hV1Z5Snl3S0NRa0pDUWtKYm1GdFpUb2dRVk5VVzJsZExtaGhibVJzWlhJdWNHRnlZVzF6TG01aGJXVUtDUWtKQ1FsOUxDQjdDZ2tKQ1FrSkNYUjVjR1U2SUNkTWFYUmxjbUZzSnl3S0NRa0pDUWtKZG1Gc2RXVTZJR1VLQ1FrSkNRbDlMQ0J5ZFc1RGIyNTBaWGgwS1FvSkNRa0pmUW9KQ1FsOUlHWnBibUZzYkhrZ2V3b0pDUWtKYVdZb1FWTlVXMmxkTG1acGJtRnNiSGtwSUhzS0NRa0pDUWx5WlhSMWNtNGdZWGRoYVhRZ2NuVnVVM1JoZEdWdFpXNTBLREFzSUZ0QlUxUmJhVjB1Wm1sdVlXeHNlVjBzSUhKMWJrTnZiblJsZUhRcENna0pDUWw5SUdWc2MyVWdld29KQ1FrSkNXbG1LSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxVbVYwZFhKdUlDRTlQU0J5WlhOMWJIUXBJSHNLQ1FrSkNRa0pZMjl1YzI5c1pTNXNiMmNvSjFkQlVrNUpUa2M2SUc1dmRDQmlkV0ppYkdsdVp5QmpiM0p5WldOMGJIazZJQ2NnQ2drSkNRa0pDUWtySUhKMWJrTnZiblJsZUhRdVluVmlZbXhsVTNSaFkydGJjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVlRkR0ZqYXk1c1pXNW5kR2dnTFNBeFhWc3dYU2tLQ1FrSkNRbDlDZ2tKQ1FrSmNtVjBkWEp1SUhKbGMzVnNkQW9KQ1FrSmZRb0pDUWw5Q2drSmZTQmxiSE5sQ2drSmFXWW9RVk5VVzJsZExuUjVjR1VnUFQwZ0owRnljbUY1Ulhod2NtVnpjMmx2YmljcElIc0tDUWtKYkdWMElISmxjM1ZzZENBOUlGdGRDZ2tKQ1dadmNpaHNaWFFnYWlBOUlEQTdJR29nUENCQlUxUmJhVjB1Wld4bGJXVnVkSE11YkdWdVozUm9PeUJxS3lzcElIc0tDUWtKQ1hKbGMzVnNkQzV3ZFhOb0tHRjNZV2wwSUhKMWJsTjBZWFJsYldWdWRDZ3dMQ0JiUVZOVVcybGRMbVZzWlcxbGJuUnpXMnBkWFN3Z2NuVnVRMjl1ZEdWNGRDa3BDZ2tKQ1gwS0NRa0pjbVYwZFhKdUlISmxjM1ZzZEFvSkNYMGdaV3h6WlNBS0Nnb0pDWHNLQ1FrSlpHVmlkV2RuWlhJS0NRa0pkR2h5YjNjZ2JtVjNJRVZ5Y205eUtFRlRWRnRwWFM1MGVYQmxJQ3NnSnpvZ1RtOTBJR2x0Y0d4bGJXVnVkR1ZrSVNjcENna0pmUW9LQ1gwZ1kyRjBZMmdnS0hWd0tTQjdDZ2tKYVdZb2NuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWVmNDa2dld29KQ1FsMGFISnZkeUIxY0FvSkNYMEtDUWxrWldKMVoyZGxjZ29KQ1dOdmJuTnZiR1V1Ykc5bktIVndLUW9KQ1dsbUtISjFia052Ym5SbGVIUXVZblZpWW14bFJtbHNaU0FoUFNBbmJHbGljbUZ5ZVM5eVpYQnNMbXB6SndvSkNRa3ZMM0oxYmtOdmJuUmxlSFF1WW5WaVlteGxVM1JoWTJ0YmNuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWVGRHRmpheTVzWlc1bmRHZ3RNVjFiTVYwZ0lUMGdKMnhwWW5KaGNua3ZjbVZ3YkM1cWN5Y0tDUWtwSUhzS0NRa0pjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVkdhV3hsSUQwZ0oyeHBZbkpoY25rdmNtVndiQzVxY3ljS0NRa0pZWGRoYVhRZ1pHOUZjbkp2Y2loMWNDd2djblZ1UTI5dWRHVjRkQ2tLQ1FrSmNuVnVRMjl1ZEdWNGRDNWxibVJsWkNBOUlIUnlkV1VLQ1FsOUNna0pjbVYwZFhKdUNnbDlDbjBLQ2k4dklHWnBibVFnWVc1a0lISjFiaUJ0WVdsdUNtRnplVzVqSUdaMWJtTjBhVzl1SUhKMWJrSnZaSGtvUVZOVUxDQnlkVzVEYjI1MFpYaDBLU0I3Q2dscFppaGhkMkZwZENCemFHOTFiR1JDZFdKaWJHVlBkWFFvY25WdVEyOXVkR1Y0ZENrcElIc0tDUWxrWldKMVoyZGxjZ29KQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduWTI5dWRHVjRkQ0JsYm1SbFpDRW5LUW9KZlFvS0NTOHZJRlJQUkU4NklFWkpXQ0JEVDA1VVJWaFVVeTRnVkVoSlV5QkpVeUJQVGtVZ1QwWWdWRWhGSUZSSVNVNUhVeUJVU0VGVUNna3ZMeUFnSUZORlVrbFBWVk5NV1NCQ1QxUklSVkpUSUUxRklFRkNUMVZVSUVOSVVrOU5SU0JFUlVKVlIwZEZVaXdnU1VZZ1NTQUtDUzh2SUNBZ1FVMGdTVTRnUVNCRVNVWkdSVkpGVGxRZ1UwTlBVRVVnVEU5UFMwbE9SeUJCVkNCQklGWkJVa2xCUWt4RklGZEpWRWdLQ1M4dklDQWdWRWhGSUZOQlRVVWdUa0ZOUlNCQlV5QlVTRVVnVTBOUFVFVWdTVlFuVXlCUVFWVlRSVVFnVDA0c0lFbFVJRk5JVDFkVENna3ZMeUFnSUUxRklGUklSU0JYVWs5T1J5QlRRMDlRUlNCWFNFVk9JRWtnVlZORklGUklSU0JUVkVGRFN5RUtDWEoxYmtOdmJuUmxlSFF1WW5WaVlteGxVSEp2Y0dWeWRIa2dQU0FuSndvS0NTOHZJRlJQUkU4NklISmxjM1J2Y21VZ2IzVjBaWElnYzJOdmNHVWdkMmhsYmlCamIyNTBaWGgwSUhkaGN5QmpjbVZoZEdWa0Nna3ZMeUJrYjJWemJpZDBJRzVsWldRZ2RHOGdZbVVnWm1GemRDd2dZbVZqWVhWelpTQmhjM2x1WXlCRVpYWlViMjlzY3lCallXeHNjeXdnWVhKbElHNXZkQ0JtWVhOMENna3ZMeUJ5WlhCc1lXTmxJSGRwZEdnZ1kzVnljbVZ1ZENCamIyNTBaWGgwQ2dvSkx5OGdZVzU1SUhScGJXVWdZU0J6WlhSVWFXMWxjaUJwY3lCMWMyVWdkR2hsSUdOaGJHeFRkR0ZqYXlCM2FXeHNJR0psSUhKbGMyVjBDZ2t2THlBZ0lIZG9hV05vSUcxbFlXNXpJR1Z5Y205eUlHMWxjM05oWjJsdVp5QnRkWE4wSUdsdWRHVnlZMlZ3ZENCb1pYSmxJRzV2ZENCMGJ3b0pMeThnSUNCeWRXbHVJRzkxZENCM2IzSnJaWElnY0hKdlkyVnpjd29KZEhKNUlIc0tDUWxzWlhRZ2NtVnpkV3gwSUQwZ1lYZGhhWFFnY25WdVVHRnlZVzFsZEdWeWN5aEJVMVFzSUhKMWJrTnZiblJsZUhRcENna0pjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVlFjbTl3WlhKMGVTQTlJQ2NuQ2drSmFXWW9ZWGRoYVhRZ2MyaHZkV3hrUW5WaVlteGxUM1YwS0hKMWJrTnZiblJsZUhRcEtTQjdDZ2tKQ1hKbGRIVnliaUJ5WlhOMWJIUXVjRzl3S0NrS0NRbDlDZ2tKTHk4Z2NtVnRiM1psSUdGdWVYUm9hVzVuSUdOeVpXRjBaV1FnYVc0Z2RHaGxJSEJoYzNRZ1kyOXVkR1Y0ZEFvSkNTOHZUMkpxWldOMExtRnpjMmxuYmloeWRXNURiMjUwWlhoMExteHZZMkZzUm5WdVkzUnBiMjV6TENCemRHRnlkRVoxYm1OektRb0pDUzh2VDJKcVpXTjBMbUZ6YzJsbmJpaHlkVzVEYjI1MFpYaDBMbXh2WTJGc1ZtRnlhV0ZpYkdWekxDQnpkR0Z5ZEZaaGNuTXBDZ2tKTHk4Z1ZFOUVUem9nVEVWQlMxa2dVME5QVUVVc0lIUm9hWE1nZDJGNUlIZGxJR3RsWlhBZ2RHaGxJSE5oYldVZ2IySnFaV04wSUhSb1pTQjNhRzlzWlNCMGFXMWxDZ2tKTHk5eWRXNURiMjUwWlhoMExteHZZMkZzUm5WdVkzUnBiMjV6SUQwZ2MzUmhjblFLQ1FrdkwzSjFia052Ym5SbGVIUXViRzlqWVd4V1lYSnBZV0pzWlhNZ1BTQnpkR0Z5ZEZaaGNuTUtDUWx5WlhSMWNtNGdjbVZ6ZFd4MExuQnZjQ2dwQ2dsOUlHTmhkR05vSUNobEtTQjdDZ2tKWTI5dWMyOXNaUzVzYjJjb1pTa0tDUWxoZDJGcGRDQmtiMFZ5Y205eUtHVXNJSEoxYmtOdmJuUmxlSFFwQ2drSmNuVnVRMjl1ZEdWNGRDNWxibVJsWkNBOUlIUnlkV1VLQ1FseVpYUjFjbTRLQ1gwS2ZRb0tDZ29LQ2c9PSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZXZhbC9jYWxsLmpzX3RpbWVzdGFtcCddPTE2NTE3MTkyMTQ0OTk7CndpbmRvdy5wcmVGU1snbGlicmFyeS9ldmFsL2NhbGwuanMnXT0nQ2dwc1pYUWdablZ1WTNScGIyNURiM1Z1ZEdWeUlEMGdNQW9LWTI5dWMzUWdUVUZZWDBOQlRFd2dQU0F4TURBd01Bb0tZMjl1YzNRZ1JsVk9RMTlEVDAxTlJVNVVVeUE5SUM4b1hueGNjeXBiWGx3dlhITmRLeTRxWEc0cEtGeHpLbHd2WEM4dUtseHVLU3NvWVhONWJtTjhablZ1WTNScGIyNThYSE1wTGlvL0pDOEtZMjl1YzNRZ1FWTlFSVU5VVTE5U1JVZEZXQ0E5SUM5Y2N5dDhYRzRyZkZ3b2ZGd3BmR1oxYm1OMGFXOXVmR0Z6ZVc1akwyY0tDZ292THlCeVpYUjFjbTRnWVc0Z1lYSnlZWGtnYjJZZ1pYWmhiSFZoZEdWa0lHVjRjSEpsYzNOcGIyNGdkRzhnY0dGemN5QnBiblJ2SUhSb1pTQnVaWGgwSUdaMWJtTjBhVzl1SUdOaGJHd0tZWE41Ym1NZ1puVnVZM1JwYjI0Z2NuVnVVR0Z5WVcxbGRHVnljeWh3WVhKaGJYTXNJSEoxYmtOdmJuUmxlSFFwSUhzS0NXeGxkQ0J5WlhOMWJIUWdQU0JiWFFvSlptOXlLR3hsZENCcElEMGdNRHNnYVNBOElIQmhjbUZ0Y3k1c1pXNW5kR2c3SUdrckt5a2dld29KQ1d4bGRDQmhjbWNnUFNCd1lYSmhiWE5iYVYwS0NRbHlaWE4xYkhRdWNIVnphQ2hoZDJGcGRDQnlkVzVUZEdGMFpXMWxiblFvTUN3Z1cyRnlaMTBzSUhKMWJrTnZiblJsZUhRcEtRb0pDV2xtS0dGM1lXbDBJSE5vYjNWc1pFSjFZbUpzWlU5MWRDaHlkVzVEYjI1MFpYaDBLU2tnZXdvSkNRbHlaWFIxY200Z2NtVnpkV3gwSUM4dklHSjFZbUpzWlNCMWNBb0pDWDBLQ1gwS0NYSmxkSFZ5YmlCeVpYTjFiSFFLZlFvS0x5OGdRVkJKSUdOaGJHeHpJR0Z5WlNCdWIzY2daVzFpWldSa1pXUWdhVzRnZDJWaUlIQmhaMlVnWVc1a0lIVndiRzloWkdWa0lIUnZJR0poWTJ0bGJtUXVhbk1LTHk4Z0lDQnpaV1VnWkhKcGRtVnlMMnhwWW5KaGNua3Vhbk1LYkdWMElGZEZRa1JTU1ZaRlVsOUJVRWtnUFNCN0NnbGxlSEJ2Y25Sek9pQjdmUXA5Q2dvS0x5OGdWRTlFVHpvZ1lXUmtJQW92THlCQVRHRjBaUW92THlCVGVXNTBZWGdnZEc4Z2RYTmxJR3hoZEdVZ1ltbHVaR2x1Wnl3Z2MzUnZjbVVnZEdobElFRlRWQ0JoYzNOcFoyNXRaVzUwSUdsdUlHeHZZMkZzVm1GeWFXRmliR1Z6Q2k4dklDQWdRVzVrSUhkb1pXNGdkR2hsSUhaaGNtbGhZbXhsSUdseklHRmpZMlZ6YzNObFpDd2dZMmhsWTJzZ1ptOXlJSFJvWlNCQlUxUWdZVzVrSUhKMWJsTjBZWFJsYldWdWRDZ3BDZ29LQ21GemVXNWpJR1oxYm1OMGFXOXVJSEoxYmtOaGJHeFRkR0YwWlcxbGJuUnpLSEoxYmtOdmJuUmxlSFFzSUdaMWJtTjBhVzl1VG1GdFpTd2dabWxzWlc1aGJXVXNJSEJoY21GdFpYUmxja1JsWm1sdWFYUnBiMjRzSUdKbFptOXlaU3dnWVdaMFpYSXNJR0p2Wkhrc0lDNHVMbU5oYkd4QmNtZHpLU0I3Q2drdkx5QmhjM05wWjI0Z2RHOGdjR0Z5WVcwZ2JtRnRaWE1nYVc0Z2JtVjRkQ0JqYjI1MFpYaDBDZ2xzWlhRZ2MzUmhjblJXWVhKeklEMGdUMkpxWldOMExtRnpjMmxuYmloN2ZTd2djblZ1UTI5dWRHVjRkQzVzYjJOaGJGWmhjbWxoWW14bGN5a0tDZ2xzWlhRZ1ltVm1iM0psVEdsdVpTQTlJSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxUR2x1WlNBdElERWdMeThnTFRFZ1ptOXlJSGR5WVhCd1pYSWdablZ1WTNScGIyNEtDV2xtS0hKMWJrTnZiblJsZUhRdVluVmlZbXhsVTNSaFkyc3ViR1Z1WjNSb0lEMDlJREFwSUhzS0NRbGpiMjV6YjJ4bExtVnljbTl5S0NkRFlXeHNJSE4wWVdOcklHTnZjbkoxY0hSbFpDY3BDZ2w5Q2dseWRXNURiMjUwWlhoMExtSjFZbUpzWlZOMFlXTnJMbkIxYzJnb1cyWjFibU4wYVc5dVRtRnRaU3dnWm1sc1pXNWhiV1VzSUdKbFptOXlaVXhwYm1WZEtRb0piR1YwSUhKbGMzVnNkQW9KZEhKNUlIc0tDUWtLQ1Frdkx5QlVTRWxUSUZOSVNWUWdTVk1nU1UxUVQxSlVRVTVVTGlCTlFVdEZJRU5QVFZCTVNVTkJWRVZFSUZOSlRWQk1SUzRLQ1Frdkx5QkpJRTFGVGxSSlQwNGdWRWhKVXlCVVR5QlFSVTlRVEVVZ1FVNUVJRlJJUlZrZ1NFRldSU0JPVHlCSlJFVkJDZ2tKTHk4Z0lDQlhTRUZVSUVrZ1RVVkJUaTRnU1NCTVJVRlNUa1ZFSUZSSVNWTWdTVTRnVFZrZ1JrRk9RMWtnTkNCWlVpNEtDUWt2THlCb2RIUndjem92TDJWdUxuZHBhMmx3WldScFlTNXZjbWN2ZDJscmFTOUJjM0JsWTNRdGIzSnBaVzUwWldSZmNISnZaM0poYlcxcGJtY0tDUWt2THlBZ0lFTWpJRVJQUlZNZ1ZFaEpVeUJCVlZSUFRVRlVTVU5CVEV4WklFRk9SQ0JRUlU5UVRFVWdURTlXUlNCSlZBb0pDUzh2SUNBZ1ZFaEpVeUJKVXlCQ1FWTkpRMEZNVEZrZ1NFOVhJRWxVSUZkUFVrdFRJRWxPVkVWU1RrRk1URmtzSUZWVFJWTUtDUWt2THlBZ0lFbE9WRkpQVTFCRlExUkpUMDRnVkU4Z1VrVkJSQ0JCVkZSU1NVSlZWRVZUSUVaU1QwMGdWRWhGSUZCQlVsTkZDZ2tKTHk4Z0lDQlVTRVZPSUVOQlRFeFRJRlJJUlNCR1ZVNURWRWxQVGxNZ1FrVkdUMUpGSUZSSVJTQkJRMVJWUVV3Z1EwRk1UQW9KQ1M4dklDQWdTRUZRVUVWT1V5NGdVMWxPVkVGRFZFbERJRk5WUjBGU0xpQkZWa1ZTV1NCTVFVNUhWVUZIUlNCVFNFOVZURVFnU0VGV1JTQkJWRlJTU1VKVlZFVlRDZ2tKYVdZb1ltVm1iM0psS1NCN0Nna0pDV3hsZENCaVpXWnZjbVZHZFc1akNna0pDV2xtS0hKMWJrTnZiblJsZUhRdWJHOWpZV3hXWVhKcFlXSnNaWE5iWW1WbWIzSmxYU0E5UFNBblpuVnVZM1JwYjI0bktTQjdDZ2tKQ1FsaVpXWnZjbVZHZFc1aklEMGdjblZ1UTI5dWRHVjRkQzVzYjJOaGJGWmhjbWxoWW14bGMxdGlaV1p2Y21WZENna0pDWDBnWld4elpTQjdDZ2tKQ1FsMGFISnZkeUJ1WlhjZ1JYSnliM0lvSjBGMGRISnBZblYwWlNCQVFtVm1iM0psSUc1dmRDQm1iM1Z1WkRvZ0p5QXJJR0psWm05eVpTa0tDUWtKZlFvSkNRa3ZMeUJoYkd4dmR5QjFjMlZ5Y3lCMGJ5QnRiMlJwWm5rZ1puVnVZM1JwYjI0Z1lYSm5kVzFsYm5SelB5QlRWVkpGSVFvSkNRbHNaWFFnY2lBOUlHRjNZV2wwSUdKbFptOXlaVVoxYm1Nb1kyRnNiRUZ5WjNNc0lISjFia052Ym5SbGVIUXBDZ2tKZlFvSkNXbG1LR0YzWVdsMElITm9iM1ZzWkVKMVltSnNaVTkxZENoeWRXNURiMjUwWlhoMEtTa2dld29KQ1FseVpYUjFjbTRLQ1FsOUNnb0pDV1p2Y2loc1pYUWdiQ0E5SURBN0lHd2dQQ0J3WVhKaGJXVjBaWEpFWldacGJtbDBhVzl1TG14bGJtZDBhRHNnYkNzcktTQjdDZ2tKQ1dsbUtIQmhjbUZ0WlhSbGNrUmxabWx1YVhScGIyNWJiRjB1ZEhsd1pTQWhQU0FuU1dSbGJuUnBabWxsY2ljcElIc0tDUWtKQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduUm5WdVkzUnBiMjVFWldOc1lYSmhkR2x2YmpvZ1RtOTBJR2x0Y0d4bGJXVnVkR1ZrSVNjcENna0pDWDBLQ1FrSmFXWW9iQ0E5UFNCallXeHNRWEpuY3k1c1pXNW5kR2dwSUhzS0NRa0pDV052Ym5ScGJuVmxPd29KQ1FsOUNna0pDUzh2SUdaMVkyc3RZWEp2ZFc1a2N6OEtDUWtKYVdZb2RIbHdaVzltSUhKMWJrTnZiblJsZUhRdWJHOWpZV3hXWVhKcFlXSnNaWE1nUFQwZ0ozVnVaR1ZtYVc1bFpDY3BJSHNLQ1FrSkNXUmxZblZuWjJWeUNna0pDWDBLQ1FrSmNuVnVRMjl1ZEdWNGRDNXNiMk5oYkZaaGNtbGhZbXhsYzF0d1lYSmhiV1YwWlhKRVpXWnBibWwwYVc5dVcyeGRMbTVoYldWZElEMGdKM1Z1WkdWbWFXNWxaQ2NLQ1FrSllYZGhhWFFnY25WdVFYTnphV2R1YldWdWRDaDdDZ2tKQ1FsMGVYQmxPaUFuU1dSbGJuUnBabWxsY2ljc0Nna0pDUWx1WVcxbE9pQndZWEpoYldWMFpYSkVaV1pwYm1sMGFXOXVXMnhkTG01aGJXVUtDUWtKZlN3Z2V3b0pDUWtKZEhsd1pUb2dKMHhwZEdWeVlXd25MQW9KQ1FrSmRtRnNkV1U2SUdOaGJHeEJjbWR6VzJ4ZENna0pDWDBzSUhKMWJrTnZiblJsZUhRcENna0pDV2xtS0dGM1lXbDBJSE5vYjNWc1pFSjFZbUpzWlU5MWRDaHlkVzVEYjI1MFpYaDBLU2tnZXdvSkNRa0pjbVYwZFhKdUNna0pDWDBLQ1FsOUNnb0pDUzh2SUhKMWJpQnVaWGNnWTI5dGJXRnVaQ0JqYjI1MFpYaDBDZ2tKY21WemRXeDBJRDBnWVhkaGFYUWdjblZ1VTNSaGRHVnRaVzUwS0RBc0lGdGliMlI1WFN3Z2NuVnVRMjl1ZEdWNGRDa0tDZ2tKTHk4Z1ZFOUVUem9nVTA5TlJWUklTVTVISUVGQ1QxVlVJRWxHSUVGT0lFRlRVRVZEVkNCSVFWTWdRVTRnUlZoRFVFeEpRMGxVSUZKRlZGVlNUaUFLQ1Frdkx5QWdJRk5VUVZSRlRVVk9WQ0JVU0VWT0lFOVdSVkpTU1VSRklGUklSU0JTUlZSVlVrNGdWa0ZNVlVVZ1YwbFVTQ0JDUlVaUFVrVUtDUWt2THlBZ0lFOVVTRVZTVjBsVFJTQk1SVUZXUlNCSlZDQlZUazFQUkVsR1NVVkVDZ2tKYVdZb1lXWjBaWElwSUhzS0NRa0piR1YwSUdGbWRHVnlSblZ1WXdvSkNRbHBaaWh5ZFc1RGIyNTBaWGgwTG14dlkyRnNWbUZ5YVdGaWJHVnpXMkZtZEdWeVhTQTlQU0FuWm5WdVkzUnBiMjRuS1NCN0Nna0pDUWxoWm5SbGNrWjFibU1nUFNCeWRXNURiMjUwWlhoMExteHZZMkZzVm1GeWFXRmliR1Z6VzJGbWRHVnlYUW9KQ1FsOUlHVnNjMlVnZXdvSkNRa0pkR2h5YjNjZ2JtVjNJRVZ5Y205eUtDZEJkSFJ5YVdKMWRHVWdRRUZtZEdWeUlHNXZkQ0JtYjNWdVpEb2dKeUFySUdGbWRHVnlLUW9KQ1FsOUNna0pDWEpsYzNWc2RDQTlJR0YzWVdsMElHRm1kR1Z5Um5WdVl5aHlaWE4xYkhRc0lISjFia052Ym5SbGVIUXBDZ2tKZlFvSkNYSjFia052Ym5SbGVIUXVZblZpWW14bFRXVnRZbVZ5SUQwZ2JuVnNiQW9KQ1hKMWJrTnZiblJsZUhRdVluVmlZbXhsVUhKdmNHVnlkSGtnUFNBbkp3b0pDV2xtS0hKMWJrTnZiblJsZUhRdWNtVjBkWEp1WldRcElIc0tDUWtKY25WdVEyOXVkR1Y0ZEM1eVpYUjFjbTVsWkNBOUlHWmhiSE5sQ2drSkNXbG1LSEpsYzNWc2RDQWhQVDBnY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZTWlhSMWNtNHBJSHNLQ1FrSkNXTnZibk52YkdVdWJHOW5LQ2RYUVZKT1NVNUhPaUJ1YjNRZ1luVmlZbXhwYm1jZ1kyOXljbVZqZEd4NU9pQW5JQ3NnWm5WdVkzUnBiMjVPWVcxbEtRb0pDUWw5Q2drSkNYSmxjM1ZzZENBOUlISjFia052Ym5SbGVIUXVZblZpWW14bFVtVjBkWEp1Q2drSkNXUmxiR1YwWlNCeWRXNURiMjUwWlhoMExtSjFZbUpzWlZKbGRIVnliZ29KQ1gwS0NRbHBaaWhoZDJGcGRDQnphRzkxYkdSQ2RXSmliR1ZQZFhRb2NuVnVRMjl1ZEdWNGRDa3BJSHNLQ1FrSmNtVjBkWEp1Q2drSmZRb0tDUzh2VDJKcVpXTjBMbUZ6YzJsbmJpaHlkVzVEYjI1MFpYaDBMbXh2WTJGc1ZtRnlhV0ZpYkdWekxDQnpkR0Z5ZEZaaGNuTXBJQzh2SUhKbGMyVjBJSEpsWm1WeVpXNWpaWE1LQ1M4dklGUlBSRTg2SUV4RlFVdFpJRk5EVDFCRkxDQnlaVzF2ZG1VZ2RXNXVZVzFsWkNCMllYSnBZV0pzWlhNZ1puSnZiU0J3Y21WMmFXOTFjeUJ6WTI5d1pRb0pMeThnVkU5RVR6b2dSa2xZSUZORFQxQkpUa2NnVjBsVVNDQkJJRkpWVGtOUFRsUkZXRlF1UTA5T1ZFVllWRk1nVTFSQlEwc0tDUzh2SUNBZ1ZHaHBjeUIzYjNWc1pDQm9aV3h3SUhOdmJIWmxJSFpoY2k5c1pYUXNJR0YxZEc5dFlYUnBZMkZzYkhrZ1pISnZjQ0IyWVhJZ2FXNTBieUIwYjNBZ1kyOXVkR1Y0ZEFvSkx5OGdJQ0JVYUdseklIZHZkV3hrSUdobGJIQWdkMmwwYUNCemRHRjBhV012Y0hWaWJHbGpMMlp5YVdWdVpHeDVJR05vWldOcmFXNW5DZ2t2THlBZ0lGUm9hWE1nZDI5MWJHUWdhR1ZzY0NCc1lXNW5kV0ZuWlhNZ2QybDBhQ0JzWldGcmVTQnpZMjl3WlhNZ1lua2djSFZ5Y0c5elpTd2dURlZCTENCUVVrOU1UMGMvQ2drdkx5QWdJRlJvYVhNZ2QyOTFiR1FnWm1sNElITmpiM0JwYm1jZ1lYSnZkVzVrSUhCaGNtRnRaWFJsY2lCa1pXWnBibWwwYVc5dWN3b0pMeThnVkU5RVR6b2djMlZoY21Ob0lIUm9aU0JqYjI1MFpYaDBjeUJ6ZEdGamF5Qm1iM0lnZEdobElIWmhjbWxoWW14bENnbDlJR05oZEdOb0lDaGxLU0I3Q2drSmRHaHliM2NnWlFvSmZTQm1hVzVoYkd4NUlIc0tDUWx5ZFc1RGIyNTBaWGgwTG1KMVltSnNaVk4wWVdOckxuQnZjQ2dwQ2drSmFXWW9jblZ1UTI5dWRHVjRkQzVpZFdKaWJHVlRkR0ZqYXk1c1pXNW5kR2dnUFQwZ01Da2dld29KQ1FsamIyNXpiMnhsTG1WeWNtOXlLQ2REWVd4c0lITjBZV05ySUdOdmNuSjFjSFJsWkNjcENna0pmUW9KZlFvS0NYSmxkSFZ5YmlCeVpYTjFiSFFLZlFvS0NncGhjM2x1WXlCbWRXNWpkR2x2YmlCeWRXNUdkVzVqZEdsdmJpaEJVMVFzSUhKMWJrTnZiblJsZUhRcElIc0tDV3hsZENCaVpXWnZjbVVLQ1d4bGRDQmhablJsY2dvSmJHVjBJRzVoYldWUWNtVm1hWGdnUFNBbkp3b0phV1lvUVZOVUxuUjVjR1VnUFQwZ0owWjFibU4wYVc5dVJYaHdjbVZ6YzJsdmJpY2dDZ2w4ZkNCQlUxUXVkSGx3WlNBOVBTQW5RWEp5YjNkR2RXNWpkR2x2YmtWNGNISmxjM05wYjI0bktTQjdDZ2tKYm1GdFpWQnlaV1pwZUNBOUlDZHBibXhwYm1VZ0p3b0pmU0JsYkhObElIc0tDUWt2THlCQlZGUlNTVUpWVkVVZ1UxVlFVRTlTVkFvSkNTOHZJRlJQUkU4NklFTWpJRWRKVmtWVElGbFBWU0JCSUZkQldTQlVUeUJCUkVRZ1FWUlVVa2xDVlZSRlV5QlVUd29KQ1M4dklDQWdUVUZPV1NCVVQwdEZUaUJVV1ZCRlV5QUtDUWt2THlBZ0lFcEJWa0VnU0VGVElFRlVWRkpKUWxWVVJWTWdWRTlQTENCQ1ZWUWdWRWhGV1NCQlVrVWdWVWRNU1VWU0Nna0pMeThnVkU5RVR6b2dRRVJsYkdGNUtDa3NJRUJNYjI1blRHOXZjSE1vS1NCaGJtUWdiM1JvWlhJZ2MyRm1aWFI1Y3dvSkNTOHZJRlJQUkU4NklGTlVRVlJKUXlCRFQwNVRWRkpWUTFSUFVsTXNJRk5VUkNCTVNVSlNRVkpaSUV4UFFVUkZVbE1LQ1Frdkx5QlVUMFJQT2lCdmJrSmxabTl5WlN3Z2IyNUJablJsY2l3Z1kyOXVkSEp2YkNCbWJHOTNJR2x0Y0hKcGJuUnBibWNLQ1Fsc1pYUWdZWFIwY21saWRYUmxRMjl0YldWdWRITWdQU0J5ZFc1RGIyNTBaWGgwTG5OamNtbHdkQW9KQ1FrdWMzVmljM1J5YVc1bktEQXNJRUZUVkM1emRHRnlkQ2tLQ1FrSkxtMWhkR05vS0VaVlRrTmZRMDlOVFVWT1ZGTXBDZ2tKYVdZb1lYUjBjbWxpZFhSbFEyOXRiV1Z1ZEhNcElIc0tDUWtKYkdWMElHRjBkSEpwWW5NZ1BTQmhkSFJ5YVdKMWRHVkRiMjF0Wlc1MGMxc3dYUzV6Y0d4cGRDaEJVMUJGUTFSVFgxSkZSMFZZS1FvSkNRbG1iM0lvYkdWMElHc2dQU0F3T3lCcklEd2dZWFIwY21saWN5NXNaVzVuZEdnN0lHc3JLeWtnZXdvSkNRa0phV1lvWVhSMGNtbGljMXRyWFM1MGNtbHRLQ2t1YkdWdVozUm9JRDA5SURBZ2ZId2dJV0YwZEhKcFluTmJhMTB1YVc1amJIVmtaWE1vSjBBbktTa2dld29KQ1FrSkNXTnZiblJwYm5WbENna0pDUWw5SUdWc2MyVUtDUWtKQ1dsbUtHRjBkSEpwWW5OYmExMGdQVDBnSjBCQ1pXWnZjbVVuS1NCN0Nna0pDUWtKWW1WbWIzSmxJRDBnWVhSMGNtbGljMXRyS3pGZENna0pDUWtKS3l0ckNna0pDUWw5SUdWc2MyVUtDUWtKQ1dsbUtHRjBkSEpwWW5OYmExMGdQVDBnSjBCQlpuUmxjaWNwSUhzS0NRa0pDUWxoWm5SbGNpQTlJR0YwZEhKcFluTmJheXN4WFFvSkNRa0pDU3NyYXdvSkNRa0pmU0JsYkhObElIc0tDUWtKQ1Fsa2IwTnZibk52YkdVb2NuVnVRMjl1ZEdWNGRDNXpaVzVrWlhKSlpDd2dDZ2tKQ1FrSkNTZFhRVkpPU1U1SE9pQkJkSFJ5YVdKMWRHVWdibTkwSUhKbFkyOW5ibWw2WldRNklDY2dLeUJoZEhSeWFXSnpXMnRkS1FvSkNRa0pmUW9LQ1FrSmZRb0pDWDBLQ1gwS0NXbG1LRUZUVkM1cFpDa2dld29KQ1M4dklHUnZiaWQwSUdGa1pDQnVZVzFsVUhKbFptbDRJUW9KQ1dsbUtISjFia052Ym5SbGVIUXViRzlqWVd4V1lYSnBZV0pzWlhNdWFHRnpUM2R1VUhKdmNHVnlkSGtvUVZOVUxtbGtMbTVoYldVcEtTQjdDZ2tKQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduVm1GeWFXRmliR1VnWVd4eVpXRmtlU0JrWldOc1lYSmxaQ0VnSnlBcklFRlRWQzVwWkM1dVlXMWxLUW9KQ1gwS0NYMGdaV3h6WlNCN0Nna0pibUZ0WlZCeVpXWnBlQ0FyUFNCQlUxUXVkSGx3WlNBOVBTQW5RWEp5YjNkR2RXNWpkR2x2YmtWNGNISmxjM05wYjI0bklEOGdKMnhoYldKa1lTQW5JRG9nSjJaMWJtTWdKd29KZlFvS0NXeGxkQ0JtZFc1alRtRnRaU0E5SUc1aGJXVlFjbVZtYVhnZ0t5QW9RVk5VTG1sa0lEOGdRVk5VTG1sa0xtNWhiV1VnT2lCbWRXNWpkR2x2YmtOdmRXNTBaWElwQ2drcksyWjFibU4wYVc5dVEyOTFiblJsY2dvSmNuVnVRMjl1ZEdWNGRDNXNiMk5oYkZaaGNtbGhZbXhsYzF0bWRXNWpUbUZ0WlYwZ1BTQW5kVzVrWldacGJtVmtKd29KYkdWMElHNWxkMFoxYm1NZ1BTQnlkVzVEWVd4c1UzUmhkR1Z0Wlc1MGN5NWlhVzVrS0c1MWJHd3NJSEoxYmtOdmJuUmxlSFFzQ2drSkNXWjFibU5PWVcxbExDQnlkVzVEYjI1MFpYaDBMbUoxWW1Kc1pVWnBiR1VzSUVGVFZDNXdZWEpoYlhNc0lHSmxabTl5WlN3Z1lXWjBaWElzSUVGVFZDNWliMlI1S1FvSmJtVjNSblZ1WXk1bWFXeGxibUZ0WlNBOUlISjFia052Ym5SbGVIUXVZblZpWW14bFJtbHNaUW9KYkdWMElISmxjM1ZzZENBOUlHRjNZV2wwSUhKMWJrRnpjMmxuYm0xbGJuUW9ld29KQ1hSNWNHVTZJQ2RKWkdWdWRHbG1hV1Z5Snl3S0NRbHVZVzFsT2lCbWRXNWpUbUZ0WlN3S0NYMHNJSHNLQ1FsMGVYQmxPaUFuVEdsMFpYSmhiQ2NzQ2drSmRtRnNkV1U2SUc1bGQwWjFibU1zQ2dsOUxDQnlkVzVEYjI1MFpYaDBLUW9LQ1hKbGRIVnliaUJ5WlhOMWJIUUtmUW9LQ2dwaGMzbHVZeUJtZFc1amRHbHZiaUJ5ZFc1RFlXeHNLRUZUVkN3Z2NuVnVRMjl1ZEdWNGRDa2dld29KTHk4Z1kyOXNiR1ZqZENCMllYSnBZV0pzWlhNS0NRa0pDZ2xzWlhRZ2NHRnlZVzF6SUQwZ1lYZGhhWFFnY25WdVVHRnlZVzFsZEdWeWN5aEJVMVF1WVhKbmRXMWxiblJ6TENCeWRXNURiMjUwWlhoMEtRb0phV1lvWVhkaGFYUWdjMmh2ZFd4a1FuVmlZbXhsVDNWMEtISjFia052Ym5SbGVIUXBLU0I3Q2drSmNtVjBkWEp1SUM4dklHSjFZbUpzWlNCMWNBb0pmUW9LQ1hKMWJrTnZiblJsZUhRdVluVmlZbXhsVFdWdFltVnlJRDBnYm5Wc2JBb0pjblZ1UTI5dWRHVjRkQzVpZFdKaWJHVlFjbTl3WlhKMGVTQTlJQ2NuQ2dsc1pYUWdZMkZzYkdWbFJuVnVZd29KYkdWMElHWjFibU4wYVc5dVRtRnRaUW9KYVdZb1FWTlVMbU5oYkd4bFpTNTBlWEJsSUQwOUlDZEpaR1Z1ZEdsbWFXVnlKeWtnZXdvSkNTOHZJR2hoYm1Sc1pTQnBaR1Z1ZEdsbWFXVnljeUJvWlhKbElHSmxZMkYxYzJVZ2JHOXZhMmx1WnlCcGRDQjFjQ0IzYVhSb0lHSjFZbUpzWlNCMWNDQmhiaUJsY25KdmNnb0pDV1oxYm1OMGFXOXVUbUZ0WlNBOUlFRlRWQzVqWVd4c1pXVXVibUZ0WlFvSkNYUnllU0I3Q2drSkNTOHZJRlJQUkU4NklITm9iM1ZzWkNCd2NtOWlZV0pzZVNCb1lYWmxJR0VnWW1WMGRHVnlJSGRoZVNCdlppQm9ZVzVrYkdsdVp5Qk9UMVF0UlZKU1QxSUtDUWtKWTJGc2JHVmxSblZ1WXlBOUlHRjNZV2wwSUhKMWJsQnlhVzFwZEdsMlpTaEJVMVF1WTJGc2JHVmxMQ0J5ZFc1RGIyNTBaWGgwS1FvSkNYMGdZMkYwWTJnZ0tIVndLU0I3Q2drSkNXbG1LQ0YxY0M1dFpYTnpZV2RsTG1sdVkyeDFaR1Z6S0NkdWIzUWdaR1ZtYVc1bFpDY3BDZ2tKQ1FrSkx5OGdRMDlFUlNCU1JWWkpSVmNzSUcxbFlXNTBJSFJ2SUdSdklIUm9hWE1nWldGeWJHbGxjZ29KQ1FrSkNTWW1JQ0YxY0M1dFpYTnpZV2RsTG1sdVkyeDFaR1Z6S0NkaFkyTmxjM01nWlhKeWIzSW5LU2tnZXdvSkNRa0pkR2h5YjNjZ2RYQUtDUWtKZlFvSkNYMEtDUWxwWmloaGQyRnBkQ0J6YUc5MWJHUkNkV0ppYkdWUGRYUW9jblZ1UTI5dWRHVjRkQ2twSUhzS0NRa0pjbVYwZFhKdUlDOHZJR0oxWW1Kc1pTQjFjQW9KQ1gwS0Nna0pMeThnUTA5RVJTQlNSVlpKUlZjNklHOXRaeUJwZENkeklISmxZV1I1Q2drSmJHVjBJR3hwWWdvSkNTOHZJRlJQUkU4NklITm9iM0owWTNWMElIUm9aU0JtY205dWRHVnVaQ0JHVXk1MmFYSjBkV0ZzQ2drSkx5OGdJQ0JtYjNJZ2JtOTNJR0Z1WkNCcWRYTjBJSEJ5YjNacFpHVWdkMmhoZEdWMlpYSWdhWE1nYzJGMlpXUWdhVzRnU1VSQ1JsTUtDUWt2THlCM2FXeHNJRzVsWldRZ1VsQkRJSFJ2SUhOaGRtVWdZMjlrWlNCemRHOXlZV2RsTENCM2FXeHNJSEJ5YjNacFpHVWdhWFFnYVc0S0NRa3ZMeUFnSUdOc2IzVmtJR0oxYVd4a0lITnZJRzVsWldSeklIUnZJR0psSUdkbGJtVnlhV01nZEdoeWIzVm5hQ0JoWTJObGMzTnZjbk11Q2drSmFXWWdLQ0ZqWVd4c1pXVkdkVzVqQ2drSkNTWW1JSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxSbWxzWlNBaFBTQW5iR2xpY21GeWVTOXlaWEJzTG1wekp3b0pDUWttSmlBb2JHbGlJRDBnWkc5TWFXSnlZWEo1VEc5dmEzVndLR1oxYm1OMGFXOXVUbUZ0WlNrcENna0pLU0I3Q2drSkNXTmhiR3hsWlVaMWJtTWdQU0JoZDJGcGRDQmtiMEZqWTJWemMyOXlLR3hwWWlrS0NRbDlDZ2w5SUdWc2MyVUtDV2xtS0VGVFZDNWpZV3hzWldVdWRIbHdaU2tnZXdvSkNXTmhiR3hsWlVaMWJtTWdQU0JoZDJGcGRDQnlkVzVUZEdGMFpXMWxiblFvTUN3Z1cwRlRWQzVqWVd4c1pXVmRMQ0J5ZFc1RGIyNTBaWGgwS1FvSkNXbG1LR0YzWVdsMElITm9iM1ZzWkVKMVltSnNaVTkxZENoeWRXNURiMjUwWlhoMEtTa2dld29KQ1FseVpYUjFjbTRnTHk4Z1luVmlZbXhsSUhWd0Nna0pmUW9KQ1daMWJtTjBhVzl1VG1GdFpTQTlJSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxVSEp2Y0dWeWRIa0tDZ2w5SUdWc2MyVWdld29KQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduUTJGc2JFVjRjSEpsYzNOcGIyNDZJRTV2ZENCcGJYQnNaVzFsYm5SbFpDRW5LUW9KZlFvS0NXbG1LQ0ZqWVd4c1pXVkdkVzVqS1NCN0Nna0paR1ZpZFdkblpYSUtDUWwwYUhKdmR5QnVaWGNnUlhKeWIzSW9KMFoxYm1OMGFXOXVJRzV2ZENCa1pXWnBibVZrT2lBbklDc2dRVk5VTG1OaGJHeGxaUzV1WVcxbEtRb0pmUW9LQ2dsc1pYUWdZbVZtYjNKbFRHbHVaU0E5SUhKMWJrTnZiblJsZUhRdVluVmlZbXhsVEdsdVpTQXRJREVLQ1dsbUtHTmhiR3hsWlVaMWJtTXVhVzUwWlhKd2NtVjBaV1FwSUhzS0NRa3ZMeUJwYm5SbGNuQnlaWFJsWkNCeWRXNURZV3hzVTNSaGRHVnRaVzUwY3lCM2FXeHNJR0ZrWkNCMGJ5QnpkR0ZqYXlCaGRDQnVaWGgwSUd4aGVXVnlDZ2w5SUdWc2MyVWdld29KQ1dsbUtISjFia052Ym5SbGVIUXVZblZpWW14bFUzUmhZMnN1YkdWdVozUm9JRDA5SURBcElIc0tDUWtKWTI5dWMyOXNaUzVsY25KdmNpZ25RMkZzYkNCemRHRmpheUJqYjNKeWRYQjBaV1FuS1FvSkNYMEpDZ2tKY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZUZEdGamF5NXdkWE5vS0ZzS0NRa0pablZ1WTNScGIyNU9ZVzFsTENBS0NRa0pZMkZzYkdWbFJuVnVZeTVtYVd4bGJtRnRaU0I4ZkNBbld5QnVZWFJwZG1VZ1kyOWtaU0JkSnl3Z0Nna0pDV0psWm05eVpVeHBibVVLQ1FsZEtRb0pmUW9KYVdZb2NuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWVGRHRmpheTVzWlc1bmRHZ2dQaUJOUVZoZlEwRk1UQ2tnZXdvSkNYUm9jbTkzSUc1bGR5QkZjbkp2Y2lnblEyRnNiQ0J6ZEdGamF5QmxlR05sWldSbFpDRW5LUW9KZlFvS0NYSjFia052Ym5SbGVIUXViRzlqWVd4V1lYSnBZV0pzWlhOYkoyRnlaM1Z0Wlc1MGN5ZGRJRDBnSjNWdVpHVm1hVzVsWkNjS0NXRjNZV2wwSUhKMWJrRnpjMmxuYm0xbGJuUW9ld29KQ1hSNWNHVTZJQ2RKWkdWdWRHbG1hV1Z5Snl3S0NRbHVZVzFsT2lBbllYSm5kVzFsYm5Sekp3b0pmU3dnZXdvSkNYUjVjR1U2SUNkTWFYUmxjbUZzSnl3S0NRbDJZV3gxWlRvZ2NHRnlZVzF6Q2dsOUxDQnlkVzVEYjI1MFpYaDBLUW9KTHk4Z1ZFOUVUem9nWDE5bWRXNWpYMThzSUY5ZmJHbHVaVjlmTENCZlgyWnBiR1ZmWHlCbWIzSWdaR1ZpZFdkbmFXNW5JR1oxYmdvS0NnbDBjbmtnZXdvSkNXeGxkQ0J5WlhOMWJIUTdDZ2tKYVdZb1FWTlVMblI1Y0dVZ1BUMGdKMDVsZDBWNGNISmxjM05wYjI0bktTQjdDZ2tKQ1dsbUtHTmhiR3hsWlVaMWJtTWdQVDBnVUhKdmJXbHpaU2tnZXdvSkNRa0pjbVZ6ZFd4MElEMGdVSEp2YldselpTNXlaWE52YkhabEtDa3VkR2hsYmloa0lEMCtJSHNLQ1FrSkNRbHlkVzVEYjI1MFpYaDBMbUZ6ZVc1alVuVnVibVZ5Y3lzckNna0pDUWtKY21WMGRYSnVJR1FLQ1FrSkNYMHBMblJvWlc0b2FXNTBaWEp1WVd4U1pYTnZiSFpsS1M1allYUmphQ2hsSUQwK0lIc0tDUWtKQ1FseWRXNURiMjUwWlhoMExtRnplVzVqVW5WdWJtVnljeTB0Q2drSkNRa0pkR2h5YjNjZ1pRb0pDUWtKZlNrdWRHaGxiaWhrSUQwK0lIc0tDUWtKQ1FseWRXNURiMjUwWlhoMExtRnplVzVqVW5WdWJtVnljeTB0Q2drSkNRa0pjbVYwZFhKdUlHUUtDUWtKQ1gwcENna0pDWDBnWld4elpTQjdDZ2tKQ1FseVpYTjFiSFFnUFNCaGQyRnBkQ0FvYm1WM0lHTmhiR3hsWlVaMWJtTW9MaTR1Y0dGeVlXMXpLU2tLQ1FrSmZRb0pDWDBnWld4elpTQnBaaUFvZEhsd1pXOW1JR05oYkd4bFpVWjFibU1nUFQwZ0oyWjFibU4wYVc5dUp3b0pDUWttSmlCeWRXNURiMjUwWlhoMExtSjFZbUpzWlUxbGJXSmxjaWtnZXdvSkNRbHlaWE4xYkhRZ1BTQmhkMkZwZENCallXeHNaV1ZHZFc1akxtRndjR3g1S0hKMWJrTnZiblJsZUhRdVluVmlZbXhsVFdWdFltVnlMQ0J3WVhKaGJYTXBDZ2tKZlNCbGJITmxJR2xtSUNoMGVYQmxiMllnWTJGc2JHVmxSblZ1WXlBOVBTQW5ablZ1WTNScGIyNG5LU0I3Q2drSkNYSmxjM1ZzZENBOUlHRjNZV2wwSUdOaGJHeGxaVVoxYm1Nb0xpNHVjR0Z5WVcxektRb0pDWDBnWld4elpTQjdDZ2tKQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduVG05MElHRWdablZ1WTNScGIyNGhJQ2NnS3lCQlUxUXVZMkZzYkdWbExtNWhiV1VwQ2drSmZRb0pDWEoxYmtOdmJuUmxlSFF1WW5WaVlteGxUV1Z0WW1WeUlEMGdiblZzYkFvSkNYSjFia052Ym5SbGVIUXVZblZpWW14bFVISnZjR1Z5ZEhrZ1BTQW5Kd29KQ1dsbUtISjFia052Ym5SbGVIUXVjbVYwZFhKdVpXUXBJSHNLQ1FrSmNuVnVRMjl1ZEdWNGRDNXlaWFIxY201bFpDQTlJR1poYkhObENna0pDV2xtS0hKbGMzVnNkQ0FoUFQwZ2NuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWU1pYUjFjbTRwSUhzS0NRa0pDV052Ym5OdmJHVXViRzluS0NkWFFWSk9TVTVIT2lCdWIzUWdZblZpWW14cGJtY2dZMjl5Y21WamRHeDVPaUFuSUNzZ1puVnVZM1JwYjI1T1lXMWxLUW9KQ1FsOUNna0pDWEpsYzNWc2RDQTlJSEoxYmtOdmJuUmxlSFF1WW5WaVlteGxVbVYwZFhKdUNna0pDV1JsYkdWMFpTQnlkVzVEYjI1MFpYaDBMbUoxWW1Kc1pWSmxkSFZ5YmdvSkNYMEtDZ2tKTHk4Z2JYVnpkQ0JqYjIxbElHRm1kR1Z5SUhKMWJrTnZiblJsZUhRdWNtVjBkWEp1WldRZ2FYTWdZV1JxZFhOMFpXUWdDZ2tKTHk4Z0lDQmlaV05oZFhObElIUm9hWE1nWW5WaVlteGxjeUJ2ZFhRZ2IyWWdkMmhoZEdWMlpYSWdZbXh2WTJzZ2IzSWdDZ2tKTHk4Z0lDQm1iM0l0Ykc5dmNDQnBjeUJwYmlCelkyOXdaUzRLQ1FscFppaGhkMkZwZENCemFHOTFiR1JDZFdKaWJHVlBkWFFvY25WdVEyOXVkR1Y0ZENrcElIc0tDUWtKY21WMGRYSnVJQzh2SUdKMVltSnNaU0IxY0FvSkNYMEtDZ2tKTHk4Z1lYVjBiMjFoZEdsallXeHNlU0J3WVhWelpTQm1iM0lnWVNCelpXTnZibVFnYjI0Z2RYTmxjaUJtZFc1amRHbHZibk1LQ1Frdkx5QWdJSFJ2SUdGc2JHOTNJSFZ6WlhKeklIUnZJRzlpYzJWeWRtVWdkR2hsSUhKbGMzVnNkQ0J2WmlCMGFHVWdRVkJKQ2drSmFXWW9RVk5VTG1OaGJHeGxaUzV1WVcxbElDRTlJQ2R6YkdWbGNDY0tDUWtKSmlZZ2NuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWVGRHRmphMXNLQ1FrSkNYSjFia052Ym5SbGVIUXVZblZpWW14bFUzUmhZMnN1YkdWdVozUm9YU0E5UFNBblBHVjJZV3crSnlrZ2V3b0pDUWxqYjI1emIyeGxMbXh2WnlnblRFOU9SeUJFUlV4QldTRWhJU0FuSUNzZ1puVnVZM1JwYjI1T1lXMWxJQ3NnSnlBdUlDY2dLeUJpWldadmNtVk1hVzVsS1FvSkNRbGhkMkZwZENCdVpYY2dVSEp2YldselpTaHlaWE52YkhabElEMCtJSE5sZEZScGJXVnZkWFFvY21WemIyeDJaU3dnUkVWR1FWVk1WRjlFUlV4QldTa3BDZ2tKZlFvSkNYSmxkSFZ5YmlCeVpYTjFiSFFLQ2dsOUlHTmhkR05vSUNobEtTQjdDZ2tKWTI5dWMyOXNaUzVzYjJjb1pTa0tDUWxoZDJGcGRDQmtiMFZ5Y205eUtHVXNJSEoxYmtOdmJuUmxlSFFwQ2drSmNuVnVRMjl1ZEdWNGRDNWxibVJsWkNBOUlIUnlkV1VLQ1FseVpYUjFjbTRLQ1gwZ1ptbHVZV3hzZVNCN0Nna0phV1lvSVdOaGJHeGxaVVoxYm1NdWFXNTBaWEp3Y21WMFpXUXBJSHNLQ1FrSmNuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWVGRHRmpheTV3YjNBb0tRb0pDUWxwWmloeWRXNURiMjUwWlhoMExtSjFZbUpzWlZOMFlXTnJMbXhsYm1kMGFDQTlQU0F3S1NCN0Nna0pDUWxqYjI1emIyeGxMbVZ5Y205eUtDZERZV3hzSUhOMFlXTnJJR052Y25KMWNIUmxaQ2NwQ2drSkNYMEtDUWw5Q2dsOUNncDlDZz09JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9ldmFsL2xvb3AuanNfdGltZXN0YW1wJ109MTY1MTcxMDQxNDE3NDsKd2luZG93LnByZUZTWydsaWJyYXJ5L2V2YWwvbG9vcC5qcyddPSdDbU52Ym5OMElFeFBUa2RmVEU5UFVGTWdQU0F4TURBd01Bb0tDbUZ6ZVc1aklHWjFibU4wYVc5dUlISjFia3h2YjNBb2FXNXBkQ3dnZEdWemRDd2dkWEJrWVhSbExDQmliMlI1TENCeWRXNURiMjUwWlhoMEtTQjdDZ2xzWlhRZ2NtVnpkV3gwQ2dscFppaGliMlI1TG5SNWNHVWdJVDBnSjBKc2IyTnJVM1JoZEdWdFpXNTBKeWtnZXdvSkNYUm9jbTkzSUc1bGR5QkZjbkp2Y2lnblJtOXlVM1JoZEdWdFpXNTBPaUJPYjNRZ2FXMXdiR1Z0Wlc1MFpXUWhKeWtLQ1gwS0NXbG1LR2x1YVhRcElIc0tDUWxoZDJGcGRDQnlkVzVUZEdGMFpXMWxiblFvTUN3Z1cybHVhWFJkTENCeWRXNURiMjUwWlhoMEtRb0pDV2xtS0dGM1lXbDBJSE5vYjNWc1pFSjFZbUpzWlU5MWRDaHlkVzVEYjI1MFpYaDBLU2tnZXdvSkNRbHlaWFIxY200S0NRbDlDZ2w5Q2dvSmJHVjBJSFJsYzNSU1pYTjFiSFJ6SUQwZ1lYZGhhWFFnY25WdVUzUmhkR1Z0Wlc1MEtEQXNJRnQwWlhOMFhTd2djblZ1UTI5dWRHVjRkQ2tLQ1dsbUtHRjNZV2wwSUhOb2IzVnNaRUoxWW1Kc1pVOTFkQ2h5ZFc1RGIyNTBaWGgwS1NrZ2V3b0pDWEpsZEhWeWJnb0pmUW9LQ1M4dklGUlBSRTg2SUhSMWNtNGdiMlptSUhOaFptVjBlU0JtWldGMGRYSmxJSGRwZEdnZ1lXNGdZWFIwY21saWRYUmxJRUJNYjI1blRHOXZjSE1LQ1d4bGRDQnpZV1psZEhrZ1BTQk1UMDVIWDB4UFQxQlRDZ2xtYjNJb08zUmxjM1JTWlhOMWJIUnpJQ1ltSUhOaFptVjBlU0ErSURBN0lITmhabVYwZVMwdEtTQjdDZ2tKYkdWMElISmxjM1ZzZENBOUlHRjNZV2wwSUhKMWJsTjBZWFJsYldWdWRDZ3dMQ0JiWW05a2VWMHNJSEoxYmtOdmJuUmxlSFFwQ2drSmFXWW9jblZ1UTI5dWRHVjRkQzVpY205clpXNHBJSHNLQ1FrSmNuVnVRMjl1ZEdWNGRDNWljbTlyWlc0Z1BTQm1ZV3h6WlFvSkNRbGljbVZoYXdvSkNYMEtDUWxwWmloaGQyRnBkQ0J6YUc5MWJHUkNkV0ppYkdWUGRYUW9jblZ1UTI5dWRHVjRkQ2twSUhzS0NRa0pjbVYwZFhKdUNna0pmUW9KQ1dGM1lXbDBJSEoxYmxOMFlYUmxiV1Z1ZENnd0xDQmJkWEJrWVhSbFhTd2djblZ1UTI5dWRHVjRkQ2tLQ1FscFppaGhkMkZwZENCemFHOTFiR1JDZFdKaWJHVlBkWFFvY25WdVEyOXVkR1Y0ZENrcElIc0tDUWtKY21WMGRYSnVDZ2tKZlFvSkNYUmxjM1JTWlhOMWJIUnpJRDBnWVhkaGFYUWdjblZ1VTNSaGRHVnRaVzUwS0RBc0lGdDBaWE4wWFN3Z2NuVnVRMjl1ZEdWNGRDa0tDUWxwWmloaGQyRnBkQ0J6YUc5MWJHUkNkV0ppYkdWUGRYUW9jblZ1UTI5dWRHVjRkQ2twSUhzS0NRa0pjbVYwZFhKdUNna0pmUW9KZlFvSmFXWW9ZWGRoYVhRZ2MyaHZkV3hrUW5WaVlteGxUM1YwS0hKMWJrTnZiblJsZUhRcEtTQjdDZ2tKY21WMGRYSnVDZ2w5Q2k4dklGTlBJRWtuVFNCT1QxUWdRU0JJV1ZCUFExSkpWRVVnVEVWVVV5QlFWVlFnVTA5TlJTQlNSVUZUVDA1QlFreEZJRUpQVlU1RVV5RUtDV2xtS0hOaFptVjBlU0E5UFNBd0tTQjdDZ2tKZEdoeWIzY2dibVYzSUVWeWNtOXlLQ2RNYjI1bklISjFibTVwYm1jZ1ptOXlJR3h2YjNBaEp5a0tDWDBLQ1hKbGRIVnliaUJ5WlhOMWJIUUtmUW9LWVhONWJtTWdablZ1WTNScGIyNGdjblZ1VjJocGJHVW9RVk5VTENCeWRXNURiMjUwWlhoMEtTQjdDaUFnYkdWMElISmxjM1ZzZEFvZ0lHeGxkQ0J6WVdabGRIa2dQU0JNVDA1SFgweFBUMUJUQ2dsc1pYUWdkR1Z6ZEZKbGMzVnNkSE1LQ1dsbUtFRlRWQzUwZVhCbElEMDlJQ2RYYUdsc1pWTjBZWFJsYldWdWRDY3BJSHNLQ1Fsc1pYUWdabWx5YzNRZ1BTQjBjblZsQ2drSmQyaHBiR1VnS0dacGNuTjBJSHg4SUNoMFpYTjBVbVZ6ZFd4MGN5QW1KaUF0TFhOaFptVjBlU0ErSURBcEtTQjdDZ2tKQ1dacGNuTjBJRDBnWm1Gc2MyVUtDUWtKZEdWemRGSmxjM1ZzZEhNZ1BTQmhkMkZwZENCeWRXNVRkR0YwWlcxbGJuUW9NQ3dnVzBGVFZDNTBaWE4wWFN3Z2NuVnVRMjl1ZEdWNGRDa0tDUWtKYVdZb1lYZGhhWFFnYzJodmRXeGtRblZpWW14bFQzVjBLSEoxYmtOdmJuUmxlSFFwS1NCN0Nna0pDUWx5WlhSMWNtNEtDUWtKZlFvSkNRbHBaaWdoZEdWemRGSmxjM1ZzZEhNcElIc0tDUWtKQ1dKeVpXRnJDZ2tKQ1gwS0NRa0pjbVZ6ZFd4MElEMGdZWGRoYVhRZ2NuVnVVM1JoZEdWdFpXNTBLREFzSUZ0QlUxUXVZbTlrZVYwc0lISjFia052Ym5SbGVIUXBDZ2tKQ1dsbUtISjFia052Ym5SbGVIUXVZbkp2YTJWdUtTQjdDZ2tKQ1FseWRXNURiMjUwWlhoMExtSnliMnRsYmlBOUlHWmhiSE5sQ2drSkNRbGljbVZoYXdvSkNRbDlDZ2tKQ1dsbUtHRjNZV2wwSUhOb2IzVnNaRUoxWW1Kc1pVOTFkQ2h5ZFc1RGIyNTBaWGgwS1NrZ2V3b0pDUWtKY21WMGRYSnVDZ2tKQ1gwS0NRbDlDZ2w5SUdWc2MyVWdDZ2xwWmloQlUxUXVkSGx3WlNBOVBTQW5SRzlYYUdsc1pWTjBZWFJsYldWdWRDY3BJSHNLQ2drSlpHOGdld29KQ1FseVpYTjFiSFFnUFNCaGQyRnBkQ0J5ZFc1VGRHRjBaVzFsYm5Rb01Dd2dXMEZUVkM1aWIyUjVYU3dnY25WdVEyOXVkR1Y0ZENrS0NRa0phV1lvY25WdVEyOXVkR1Y0ZEM1aWNtOXJaVzRwSUhzS0NRa0pDWEoxYmtOdmJuUmxlSFF1WW5KdmEyVnVJRDBnWm1Gc2MyVUtDUWtKQ1dKeVpXRnJDZ2tKQ1gwS0NRa0phV1lvWVhkaGFYUWdjMmh2ZFd4a1FuVmlZbXhsVDNWMEtISjFia052Ym5SbGVIUXBLU0I3Q2drSkNRbHlaWFIxY200S0NRa0pmUW9KQ1FsMFpYTjBVbVZ6ZFd4MGN5QTlJR0YzWVdsMElISjFibE4wWVhSbGJXVnVkQ2d3TENCYlFWTlVMblJsYzNSZExDQnlkVzVEYjI1MFpYaDBLUW9KQ1FscFppaGhkMkZwZENCemFHOTFiR1JDZFdKaWJHVlBkWFFvY25WdVEyOXVkR1Y0ZENrcElIc0tDUWtKQ1hKbGRIVnliZ29KQ1FsOUNna0pmU0IzYUdsc1pTQW9kR1Z6ZEZKbGMzVnNkSE1nSmlZZ0xTMXpZV1psZEhrZ1BpQXdLUW9KZlNCbGJITmxJSHNLQ1FsMGFISnZkeUJ1WlhjZ1JYSnliM0lvUVZOVUxuUjVjR1VnS3lBbk9pQk9iM1FnYVcxd2JHVnRaVzUwWldRaEp5a0tDWDBLQ2dscFppaGhkMkZwZENCemFHOTFiR1JDZFdKaWJHVlBkWFFvY25WdVEyOXVkR1Y0ZENrcElIc0tDUWx5WlhSMWNtNEtDWDBLQ1hKbGRIVnliaUJ5WlhOMWJIUUtmUW89JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9ldmFsL3ByaW0uanNfdGltZXN0YW1wJ109MTY1MTcxODQ0MzQ2NzsKd2luZG93LnByZUZTWydsaWJyYXJ5L2V2YWwvcHJpbS5qcyddPSdDbUZ6ZVc1aklHWjFibU4wYVc5dUlISjFibEJ5YVcxcGRHbDJaU2hCVTFRc0lISjFia052Ym5SbGVIUXBJSHNLQ1dsbUtFRlRWQzUwZVhCbElEMDlJQ2RNYVhSbGNtRnNKeWtnZXdvSkNYSmxkSFZ5YmlCQlUxUXVkbUZzZFdVS0NYMGdaV3h6WlNBS0NXbG1LRUZUVkM1MGVYQmxJRDA5SUNkSlpHVnVkR2xtYVdWeUp5a2dld29KQ1dsbUtISjFia052Ym5SbGVIUXViRzlqWVd4V1lYSnBZV0pzWlhNdWFHRnpUM2R1VUhKdmNHVnlkSGtvUVZOVUxtNWhiV1VwS1NCN0Nna0pDV1p2Y2loc1pYUWdhU0E5SUhKMWJrTnZiblJsZUhRdWJHOWpZV3hFWldOc1lYSmhkR2x2Ym5NdWJHVnVaM1JvTFRFN0lHa2dQajBnTURzZ2FTMHRLU0I3Q2drSkNRbHBaaWh5ZFc1RGIyNTBaWGgwTG14dlkyRnNSR1ZqYkdGeVlYUnBiMjV6VzJsZExtaGhjMDkzYmxCeWIzQmxjblI1S0VGVFZDNXVZVzFsS1FvSkNRa0pDWHg4SUhSNWNHVnZaaUJ5ZFc1RGIyNTBaWGgwTG14dlkyRnNSR1ZqYkdGeVlYUnBiMjV6VzJsZFcwRlRWQzV1WVcxbFhTQWhQU0FuZFc1a1pXWnBibVZrSnlrZ2V3b0pDUWtKQ1hKbGRIVnliaUJ5ZFc1RGIyNTBaWGgwTG14dlkyRnNSR1ZqYkdGeVlYUnBiMjV6VzJsZFcwRlRWQzV1WVcxbFhRb0pDUWtKZlFvSkNRbDlDZ2tKZlNCbGJITmxJSHNLQ1Frdkx5QlVUMFJQT2lCcGJtTmhjMlVnYkdsaWNtRnlhV1Z6SUdGeVpXNG5kQ0J6Wlc1MExDQndjbVZ3Y205alpYTnpaV1FnYkdsaWN5QmhjbVVnZFhObFpDQm9aWEpsQ2drSkNYSmxkSFZ5YmlCaGQyRnBkQ0JrYjBGalkyVnpjMjl5S0hzS0NRa0pDUzh2SUZkUFQwaFBUeUJ0ZVNCbWFYSnpkQ0J3YjJ4NVptbHNiQW9KQ1FrSmIySnFaV04wT2lCN0Nna0pDUWtKYm1GdFpUb2dKMlY0Y0c5eWRITW5DZ2tKQ1FsOUxBb0pDUWtKY0hKdmNHVnlkSGs2SUhzS0NRa0pDUWx1WVcxbE9pQkJVMVF1Ym1GdFpRb0pDUWtKZlFvSkNRbDlLUW9KQ1M4cUNna0pld29KQ1FscFppaEJVMVF1Ym1GdFpTQTlQU0FuWTI5dWMyOXNaU2NwSUhzS0NRa0pDV1JsWW5WbloyVnlDZ2tKQ1gwS0NRa0phV1lvUVZOVUxtNWhiV1VnUFQwZ0owRnljbUY1SnlrZ2V3b0pDUWtKWkdWaWRXZG5aWElLQ1FrSmZRb0pDUWxwWmloQlUxUXVibUZ0WlNBOVBTQW5jMlYwU1c1MFpYSjJZV3duS1NCN0Nna0pDUWxrWldKMVoyZGxjZ29KQ1FsOUNna0pDWFJvY205M0lHNWxkeUJGY25KdmNpZ25TV1JsYm5ScFptbGxjaUJ1YjNRZ1pHVm1hVzVsWkRvZ0p5QXJJRUZUVkM1dVlXMWxLUW9KQ1FrcUx3b0pDWDBLQ1gwZ1pXeHpaU0I3Q2drSmRHaHliM2NnYm1WM0lFVnljbTl5S0VGVFZDNTBlWEJsSUNzZ0p6b2dUbTkwSUdsdGNHeGxiV1Z1ZEdWa0lTY3BDZ2w5Q24wS0NncGhjM2x1WXlCbWRXNWpkR2x2YmlCeWRXNVZibUZ5ZVNoQlUxUXNJSEoxYmtOdmJuUmxlSFFwSUhzS0NXbG1LRUZUVkM1dmNHVnlZWFJ2Y2lBOVBTQW5kbTlwWkNjcElIc0tDUWx5WlhSMWNtNGdkbTlwWkNBb1lYZGhhWFFnY25WdVUzUmhkR1Z0Wlc1MEtEQXNJRnRCVTFRdVlYSm5kVzFsYm5SZExDQnlkVzVEYjI1MFpYaDBLU2tLQ1gwZ1pXeHpaUW9KYVdZb1FWTlVMbTl3WlhKaGRHOXlJRDA5SUNjaEp5a2dld29KQ1hKbGRIVnliaUFoS0dGM1lXbDBJSEoxYmxOMFlYUmxiV1Z1ZENnd0xDQmJRVk5VTG1GeVozVnRaVzUwWFN3Z2NuVnVRMjl1ZEdWNGRDa3BDZ2w5SUdWc2MyVUtDV2xtS0VGVFZDNXZjR1Z5WVhSdmNpQTlQU0FuZEhsd1pXOW1KeWtnZXdvSkNYUnllU0I3Q2drSkNYSjFia052Ym5SbGVIUXVZblZpWW14bFZYQWdQU0IwY25WbENna0pDV3hsZENCeVpYTjFiSFFnUFNCaGQyRnBkQ0J5ZFc1VGRHRjBaVzFsYm5Rb01Dd2dXMEZUVkM1aGNtZDFiV1Z1ZEYwc0lISjFia052Ym5SbGVIUXBDZ2tKQ1hKbGRIVnliaUIwZVhCbGIyWWdjbVZ6ZFd4MENna0pmU0JqWVhSamFDQW9kWEFwSUhzS0NRa0phV1lvZFhBdWJXVnpjMkZuWlM1cGJtTnNkV1JsY3lnbmJtOTBJR1JsWm1sdVpXUW5LU2tnZXdvSkNRa0pjbVYwZFhKdUlDZDFibVJsWm1sdVpXUW5DZ2tKQ1gwZ1pXeHpaU0I3Q2drSkNRbDBhSEp2ZHlCMWNBb0pDUWw5Q2drSmZTQm1hVzVoYkd4NUlIc0tDUWtKY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZWY0NBOUlHWmhiSE5sQ2drSmZRb0pmU0JsYkhObENnbHBaaWhCVTFRdWIzQmxjbUYwYjNJZ1BUMGdKeTBuS1NCN0Nna0pjbVYwZFhKdUlDMG9ZWGRoYVhRZ2NuVnVVM1JoZEdWdFpXNTBLREFzSUZ0QlUxUXVZWEpuZFcxbGJuUmRMQ0J5ZFc1RGIyNTBaWGgwS1NrS0NYMGdaV3h6WlNCN0Nna0paR1ZpZFdkblpYSUtDUWwwYUhKdmR5QnVaWGNnUlhKeWIzSW9RVk5VTG5SNWNHVWdLeUFuT2lCT2IzUWdhVzF3YkdWdFpXNTBaV1FoSnlrS0NYMEtmUW9LWVhONWJtTWdablZ1WTNScGIyNGdjblZ1VEc5bmFXTmhiQ2hCVTFRc0lISjFia052Ym5SbGVIUXBJSHNLQ1M4dklFMUZRVTVVSUZSUElFUlBJRlJJU1ZNZ1UwOVBUa1ZTQ2dscFppaEJVMVF1YjNCbGNtRjBiM0lnUFQwZ0p5WW1KeWtnZXdvSkNXeGxkQ0JzWldaMElEMGdZWGRoYVhRZ2NuVnVVM1JoZEdWdFpXNTBLREFzSUZ0QlUxUXViR1ZtZEYwc0lISjFia052Ym5SbGVIUXBDZ2tKYVdZb1lYZGhhWFFnYzJodmRXeGtRblZpWW14bFQzVjBLSEoxYmtOdmJuUmxlSFFwS1NCN0Nna0pDWEpsZEhWeWJnb0pDWDBLQ1FscFppZ2hiR1ZtZENrZ2V3b0pDUWx5WlhSMWNtNGdabUZzYzJVS0NRbDlDZ2tKTHk4Z2JHVm1kQ0E5SUhSeWRXVUtDZ2tKYkdWMElISnBaMmgwSUQwZ1lYZGhhWFFnY25WdVUzUmhkR1Z0Wlc1MEtEQXNJRnRCVTFRdWNtbG5hSFJkTENCeWRXNURiMjUwWlhoMEtRb0pDV2xtS0dGM1lXbDBJSE5vYjNWc1pFSjFZbUpzWlU5MWRDaHlkVzVEYjI1MFpYaDBLU2tnZXdvSkNRbHlaWFIxY200S0NRbDlDZ2tKY21WMGRYSnVJSEpwWjJoMENnbDlJR1ZzYzJVS0NXbG1LRUZUVkM1dmNHVnlZWFJ2Y2lBOVBTQW5mSHduS1NCN0Nna0piR1YwSUd4bFpuUWdQU0JoZDJGcGRDQnlkVzVUZEdGMFpXMWxiblFvTUN3Z1cwRlRWQzVzWldaMFhTd2djblZ1UTI5dWRHVjRkQ2tLQ1FscFppaGhkMkZwZENCemFHOTFiR1JDZFdKaWJHVlBkWFFvY25WdVEyOXVkR1Y0ZENrcElIc0tDUWtKY21WMGRYSnVDZ2tKZlFvSkNXbG1LR3hsWm5RcElIc0tDUWtKY21WMGRYSnVJSFJ5ZFdVS0NRbDlDZ2tKTHk4Z2JHVm1kQ0E5SUdaaGJITmxDZ2tKYkdWMElISnBaMmgwSUQwZ1lYZGhhWFFnY25WdVUzUmhkR1Z0Wlc1MEtEQXNJRnRCVTFRdWNtbG5hSFJkTENCeWRXNURiMjUwWlhoMEtRb0pDV2xtS0dGM1lXbDBJSE5vYjNWc1pFSjFZbUpzWlU5MWRDaHlkVzVEYjI1MFpYaDBLU2tnZXdvSkNRbHlaWFIxY200S0NRbDlDZ29KQ1hKbGRIVnliaUJ5YVdkb2RBb0pmU0JsYkhObElIc0tDUWwwYUhKdmR5QnVaWGNnUlhKeWIzSW9RVk5VTG5SNWNHVWdLeUFuT2lCT2IzUWdhVzF3YkdWdFpXNTBaV1E2SUNjZ0t5QkJVMVF1YjNCbGNtRjBiM0lwQ2dsOUNncDlDZ29LQ2k4dklFSkZRMEZWVTBVZ1QwWWdWRWhGSUU1QlZGVlNSU0JQUmlCVFJVTlZVa2xPUnlCRlZrRk1LQ2tnUWxrZ1EwaFNUMDFGSUVWWVZFVk9VMGxQVGxNS0x5OGdJQ0JVU0VWU1JTZFRJRXhKVkZSTVJTQkpJRU5CVGlCRVR5QlVUeUJQVUZSSlRVbGFSU0JVU0VVZ1UxUlpURVVnVDBZZ1ZFaEpVeUJGVmtGTVZVRlVUMUlLTHk4Z0lDQkZWa1ZTV1NCVFdVMUNUMHdnU1U0Z1NrRldRVk5EVWtsUVZDQklRVk1nVkU4Z1FrVWdTRWxVSUVGSFFVbE9MZ292THlCSVQxZEZWa1ZTTENCTVNVdEZJRUZPVkZKTUlFa2dRMEZPSUZWVFJTQXFVa1ZHVEVWRFZFbFBUaUJQVGlCVVNFVWdSMUpCVFUxQlVpb2dWRThnUjBWT1JWSkJWRVVnUVU0S0x5OGdJQ0JGVmtGTVZVRlVUMUlnU1U0Z1ZFaEZJRk5CVFVVZ1RFRk9SMVZCUjBVc0lFcFZVMVFnVEVsTFJTQlVTRVZTUlNCQlVrVWdWa2xUU1ZSUFVsTWdRVTVFQ2k4dklDQWdURWxUVkVWT1JWSlRMQ0JKSUVOQlRpQk5RVXRGSUVGT0lFVldRVXhWUVZSUFVpQkVUeUJVU0VVZ1UwRk5SU0JVU0VsT1J5QkRJRVJQUlZNZ1YwbFVTQW92THlBZ0lFRlRXVTVESUZOVVFWUkZUVVZPVkZNZ1NVNGdRa1ZVVjBWRlRpNEtMeThnVkVoSlV5QkpVeUJOUVVSRklGTkpUVkJNUlZJc0lFeEpTMFVnU2xWUVdWUkZVaUJMUlZKT1JVeFRMQ0JQVGtORklGUklSVkpGSjFNZ1FVNGdSVlpCVENncENpOHZJQ0FnU1U0Z1QwNUZJRVpGUVZSVlVrVWdRMDlOVUV4RlZFVWdURUZPUjFWQlIwVXNJRnBOVVNCRFFVNGdWRkpCVGxOR1JWSWdSa1ZCVkZWU1JWTWdRa1ZVVjBWRlRnb3ZMeUFnSUZSWFR5QkVTVVpHUlZKRlRsUWdSa1ZCVkZWU1JTQlRSVlJUTENCQklFNUJWRWxXUlNCTFJWSk9SVXdnUVU1RUlFRWdJazFGVkVFdFMwVlNUa1ZNSWk0S0x5OGdRbGtnUVVSRVNVNUhJRUZPVkV4U0wweEJUa2RWUVVkRkxWTkZVbFpGVWlBb1RVbERVazlUVDBaVUlFeEJUa2RWUVVkRkxWTkZVbFpGVWlCWFQxVk1SQ0JJUVZaRkNpOHZJQ0FnUWtWRlRpQlVTRVVnVWtsSFNGUWdRMGhQU1VORklFbEdJRXBWVUZsVVJWSWdVMVJCVWxSRlJDQlVUMFJCV1NrZ1NVNVVUeUJVU0VVZ1RVbFlMQ0FLTHk4Z0lDQkpJRUpCVTBsRFFVeE1XU0JEVWtWQlZFVWdRU0FpVFVWVVFTMUxSVkpPUlV3aUlFbE9JRUZPV1NCTVFVNUhWVUZIUlM0Z1ZFaEZUaXdnU1NCVlUwVWdWRWhCVkFvdkx5QWdJRWxPVkVWU1JrRkRSU0JVVHlCSlZFVlNRVlJGSUVGT1JDQlhVa2xVUlNCVVNFVWdRVkJKSUZSU1FVNVRURUZVU1U5T0xDQlNSVkZWU1ZKRktDZEdVeWNwSUMwK0NpOHZJQ0FnUXlNZ1NVMVFUMUpVSUVaSlRFVlRXVk5VUlUwdUNpOHZJRmRJUlU0Z1ZFaEZJRlJTUVU1VFRFRlVTVTlPSUVsVElFUlBUa1VzSUVrZ1UwaFBWVXhFSUVKRklFRkNURVVnVkU4Z1EwOU9Wa1ZTVkNCTVNVdEZJRU15VWxWVFZDNEtMeThnSUNCQ1JWUlhSVVZPSUUxUFVrVWdWRWhCVGlBeUlFeEJUa2RWUVVkRlV5QW9VRmxVU0U5T0lDMCtJRTVQUkVVcElGVlRTVTVISUU5T1RGa2dUVVZVUVMxUVVrOUhVa0ZOVFVsT1J5NEtMeThnSUNCUFRrTkZJRlJJUlNCTlJWUkJMVkJTVDBkU1FVMU5TVTVISUVsT1ZFVlNSa0ZEUlZNZ1FWSkZJRU5QVFZCTVJWUkZSQ3dnUTA5T1UxVk5VRlJKVDA0Z1EwRk9JRUpGUjBsT0xnb3ZMeUJQWW5acGIzVnpiSGtzSUVrbmJTQnViM1FnZEdobElHOXViSGtnYjI1bElIZHZjbXRwYm1jZ2IyNGdkR2hwY3lCemIzSjBJRzltSUhSb2FXNW5MZ3BoYzNsdVl5Qm1kVzVqZEdsdmJpQnlkVzVDYVc1aGNua29RVk5VTENCeWRXNURiMjUwWlhoMEtTQjdDZ2xzWlhRZ2JHVm1kQ0E5SUdGM1lXbDBJSEoxYmxOMFlYUmxiV1Z1ZENnd0xDQmJRVk5VTG14bFpuUmRMQ0J5ZFc1RGIyNTBaWGgwS1FvSmFXWW9ZWGRoYVhRZ2MyaHZkV3hrUW5WaVlteGxUM1YwS0hKMWJrTnZiblJsZUhRcEtTQjdDZ2tKY21WMGRYSnVDZ2w5Q2dvSmJHVjBJSEpwWjJoMElEMGdZWGRoYVhRZ2NuVnVVM1JoZEdWdFpXNTBLREFzSUZ0QlUxUXVjbWxuYUhSZExDQnlkVzVEYjI1MFpYaDBLUW9KYVdZb1lYZGhhWFFnYzJodmRXeGtRblZpWW14bFQzVjBLSEoxYmtOdmJuUmxlSFFwS1NCN0Nna0pjbVYwZFhKdUNnbDlDZ29KTHk4Z1RVRlVTRk1oQ2dscFppaEJVMVF1YjNCbGNtRjBiM0lnUFQwZ0p5b25LU0I3Q2drSmNtVjBkWEp1SUd4bFpuUWdLaUJ5YVdkb2RBb0pmU0JsYkhObENnbHBaaWhCVTFRdWIzQmxjbUYwYjNJZ1BUMGdKeThuS1NCN0Nna0pjbVYwZFhKdUlHeGxablFnTHlCeWFXZG9kQW9KZlNCbGJITmxDZ2xwWmloQlUxUXViM0JsY21GMGIzSWdQVDBnSnlzbktTQjdDZ2tKY21WMGRYSnVJR3hsWm5RZ0t5QnlhV2RvZEFvSmZTQmxiSE5sQ2dscFppaEJVMVF1YjNCbGNtRjBiM0lnUFQwZ0p5MG5LU0I3Q2drSmNtVjBkWEp1SUd4bFpuUWdMU0J5YVdkb2RBb0pmU0JsYkhObENnbHBaaWhCVTFRdWIzQmxjbUYwYjNJZ1BUMGdKeVVuS1NCN0Nna0pMeThnVkU5RVR6b2dZMkZ1Ym05MElHMXZaSFZzYnlCaElHWnNiMkYwQ2drSmNtVjBkWEp1SUd4bFpuUWdKU0J5YVdkb2RBb0pmU0JsYkhObENnbHBaaWhCVTFRdWIzQmxjbUYwYjNJZ1BUMGdKMTRuS1NCN0Nna0pjbVYwZFhKdUlHeGxablFnWGlCeWFXZG9kQW9KZlNCbGJITmxJQW9KYVdZb1FWTlVMbTl3WlhKaGRHOXlJRDA5SUNjOFBTY3BJSHNLQ1FseVpYUjFjbTRnYkdWbWRDQThQU0J5YVdkb2RBb0pmU0JsYkhObENnbHBaaWhCVTFRdWIzQmxjbUYwYjNJZ1BUMGdKejQ5SnlrZ2V3b0pDWEpsZEhWeWJpQnNaV1owSUQ0OUlISnBaMmgwQ2dsOUlHVnNjMlVLQ1dsbUtFRlRWQzV2Y0dWeVlYUnZjaUE5UFNBbklUMG5LU0I3Q2drSmNtVjBkWEp1SUd4bFpuUWdJVDBnY21sbmFIUUtDWDBnWld4elpRb0phV1lvUVZOVUxtOXdaWEpoZEc5eUlEMDlJQ2M5UFNjcElIc0tDUWx5WlhSMWNtNGdiR1ZtZENBOVBTQnlhV2RvZEFvSmZTQmxiSE5sQ2dscFppaEJVMVF1YjNCbGNtRjBiM0lnUFQwZ0p5RTlQU2NwSUhzS0NRbHlaWFIxY200Z2JHVm1kQ0FoUFQwZ2NtbG5hSFFLQ1gwZ1pXeHpaUW9KYVdZb1FWTlVMbTl3WlhKaGRHOXlJRDA5SUNjOVBUMG5LU0I3Q2drSmNtVjBkWEp1SUd4bFpuUWdQVDA5SUhKcFoyaDBDZ2w5SUdWc2MyVUtDV2xtS0VGVFZDNXZjR1Z5WVhSdmNpQTlQU0FuUENjcElIc0tDUWx5WlhSMWNtNGdiR1ZtZENBOElISnBaMmgwQ2dsOUlHVnNjMlVLQ1dsbUtFRlRWQzV2Y0dWeVlYUnZjaUE5UFNBblBpY3BJSHNLQ1FseVpYUjFjbTRnYkdWbWRDQStJSEpwWjJoMENnbDlJR1ZzYzJVZ2V3b0pDWFJvY205M0lHNWxkeUJGY25KdmNpaEJVMVF1ZEhsd1pTQXJJQ2M2SUU1dmRDQnBiWEJzWlcxbGJuUmxaRG9nSnlBcklFRlRWQzV2Y0dWeVlYUnZjaWtLQ1gwS2ZRb0tDbUZ6ZVc1aklHWjFibU4wYVc5dUlISjFibFZ3WkdGMFpTaEJVMVFzSUhKMWJrTnZiblJsZUhRcElIc0tDV3hsZENCaGNtZFdZV3dnUFNCaGQyRnBkQ0J5ZFc1VGRHRjBaVzFsYm5Rb01Dd2dXMEZUVkM1aGNtZDFiV1Z1ZEYwc0lISjFia052Ym5SbGVIUXBDZ2xwWmloaGQyRnBkQ0J6YUc5MWJHUkNkV0ppYkdWUGRYUW9jblZ1UTI5dWRHVjRkQ2twSUhzS0NRbHlaWFIxY200S0NYMEtDZ2xwWmloQlUxUXViM0JsY21GMGIzSWdQVDBnSnkwdEp5a2dld29KQ1dGM1lXbDBJSEoxYmtGemMybG5ibTFsYm5Rb1FWTlVMbUZ5WjNWdFpXNTBMQ0I3Q2lBZ0lDQWdJSFI1Y0dVNklDZE1hWFJsY21Gc0p5d0tJQ0FnSUNBZ2RtRnNkV1U2SUMwdFlYSm5WbUZzQ2lBZ0lDQjlMQ0J5ZFc1RGIyNTBaWGgwS1FvSkNXbG1LRUZUVkM1d2NtVm1hWGdwSUhzS0NRa0pjbVYwZFhKdUlHRjNZV2wwSUhKMWJsTjBZWFJsYldWdWRDZ3dMQ0JiUVZOVUxtRnlaM1Z0Wlc1MFhTd2djblZ1UTI5dWRHVjRkQ2tLQ1FsOUlHVnNjMlVnZXdvSkNRbHlaWFIxY200Z1lYSm5WbUZzQ2drSmZRb0pmU0JsYkhObENnbHBaaWhCVTFRdWIzQmxjbUYwYjNJZ1BUMGdKeXNySnlrZ2V3b0pDV0YzWVdsMElISjFia0Z6YzJsbmJtMWxiblFvUVZOVUxtRnlaM1Z0Wlc1MExDQjdDaUFnSUNBZ0lIUjVjR1U2SUNkTWFYUmxjbUZzSnl3S0lDQWdJQ0FnZG1Gc2RXVTZJQ3NyWVhKblZtRnNDaUFnSUNCOUxDQnlkVzVEYjI1MFpYaDBLUW9KQ1dsbUtFRlRWQzV3Y21WbWFYZ3BJSHNLQ1FrSmNtVjBkWEp1SUdGM1lXbDBJSEoxYmxOMFlYUmxiV1Z1ZENnd0xDQmJRVk5VTG1GeVozVnRaVzUwWFN3Z2NuVnVRMjl1ZEdWNGRDa0tDUWw5SUdWc2MyVWdld29KQ1FseVpYUjFjbTRnWVhKblZtRnNDZ2tKZlFvSmZTQmxiSE5sSUhzS0NRbDBhSEp2ZHlCdVpYY2dSWEp5YjNJb1FWTlVMblI1Y0dVZ0t5QW5PaUJPYjNRZ2FXMXdiR1Z0Wlc1MFpXUWhKeWtLQ1gwS0NYSmxkSFZ5YmlCaGNtZFdZV3dLQ24wSyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvZXZhbC92YXJzLmpzX3RpbWVzdGFtcCddPTE2NTE3MTgwOTAwNjc7CndpbmRvdy5wcmVGU1snbGlicmFyeS9ldmFsL3ZhcnMuanMnXT0nQ2dwaGMzbHVZeUJtZFc1amRHbHZiaUJ5ZFc1UFltcGxZM1FvUVZOVUxDQnlkVzVEYjI1MFpYaDBLU0I3Q2lBZ2JHVjBJRzVsZDA5aWFtVmpkQ0E5SUh0OUNpQWdabTl5S0d4bGRDQnJJRDBnTURzZ2F5QThJRUZUVkM1d2NtOXdaWEowYVdWekxteGxibWQwYURzZ2F5c3JLU0I3Q2lBZ0lDQnNaWFFnY0hKdmNDQTlJRUZUVkM1d2NtOXdaWEowYVdWelcydGRDaUFnSUNCcFppaHdjbTl3TG5SNWNHVWdJVDBnSjFCeWIzQmxjblI1SnlCOGZDQndjbTl3TG10bGVTNTBlWEJsSUNFOUlDZEpaR1Z1ZEdsbWFXVnlKeWtnZXdvZ0lDQWdJQ0IwYUhKdmR5QnVaWGNnUlhKeWIzSW9KMDlpYW1WamRFVjRjSEpsYzNOcGIyNDZJRTV2ZENCcGJYQnNaVzFsYm5SbFpDRW5LUW9nSUNBZ2ZRb2dJQ0FnTHk4Z1ZFOUVUem9nWVdSa0lHeGhkR1VnWW1sdVpHbHVad29nSUNBZ2JtVjNUMkpxWldOMFczQnliM0F1YTJWNUxtNWhiV1ZkSUQwZ1lYZGhhWFFnY25WdVUzUmhkR1Z0Wlc1MEtEQXNJRnR3Y205d0xuWmhiSFZsWFN3Z2NuVnVRMjl1ZEdWNGRDa0tJQ0FnSUdsbUtHRjNZV2wwSUhOb2IzVnNaRUoxWW1Kc1pVOTFkQ2h5ZFc1RGIyNTBaWGgwS1NrZ2V3b2dJQ0FnSUNCeVpYUjFjbTRLSUNBZ0lIMEtJQ0I5Q2lBZ2NtVjBkWEp1SUc1bGQwOWlhbVZqZEFwOUNnb0tDaTh2SUVSUElGWkJVa2xCUWt4RklGSkZRVk5UU1VkT1RVVk9WRk1LWVhONWJtTWdablZ1WTNScGIyNGdjblZ1UVhOemFXZHViV1Z1ZENoc1pXWjBMQ0J5YVdkb2RDd2djblZ1UTI5dWRHVjRkQ2tnZXdvS0lDQnBaaWhzWldaMExuUjVjR1VnUFQwZ0oweHBkR1Z5WVd3bktTQjdDZ2tKTHk4Z1kyRnVibTkwSUdGemMybG5iaUIyWVd4MVpTQjBieUJ3Y21sdGFYUnBkbVVnZEhsd1pRb0pDWFJvY205M0lHNWxkeUJGY25KdmNpZ25RMkZ1Ym05MElHOTJaWEp5YVdSbElIQnlhVzFwZEdsMlpTNG5LUW9KZlFvS0NXbG1JQ2hzWldaMExuUjVjR1VnUFQwZ0owMWxiV0psY2tWNGNISmxjM05wYjI0bktTQjdDZ2tKYkdWMElIQmhjbVZ1ZENBOUlHRjNZV2wwSUhKMWJsTjBZWFJsYldWdWRDZ3dMQ0JiYkdWbWRDNXZZbXBsWTNSZExDQnlkVzVEYjI1MFpYaDBLUW9KQ1dsbUtHRjNZV2wwSUhOb2IzVnNaRUoxWW1Kc1pVOTFkQ2h5ZFc1RGIyNTBaWGgwS1NrZ2V3b0pDUWx5WlhSMWNtNEtDUWw5Q2dvSkNXeGxkQ0J3Y205d1pYSjBlUW9KQ1dsbUtHeGxablF1Y0hKdmNHVnlkSGt1ZEhsd1pTQTlQU0FuU1dSbGJuUnBabWxsY2ljcElIc0tDUWtKY0hKdmNHVnlkSGtnUFNCc1pXWjBMbkJ5YjNCbGNuUjVMbTVoYldVS0NRbDlJR1ZzYzJVZ0Nna0phV1lvYkdWbWRDNXdjbTl3WlhKMGVTNTBlWEJsSUQwOUlDZE1hWFJsY21Gc0p5a2dld29KQ1Fsd2NtOXdaWEowZVNBOUlHeGxablF1Y0hKdmNHVnlkSGt1ZG1Gc2RXVUtDUWw5SUdWc2MyVWdld29KQ1Fsd2NtOXdaWEowZVNBOUlHRjNZV2wwSUhKMWJsTjBZWFJsYldWdWRDZ3dMQ0JiYkdWbWRDNXdjbTl3WlhKMGVWMHNJSEoxYmtOdmJuUmxlSFFwQ2drSkNXbG1LR0YzWVdsMElITm9iM1ZzWkVKMVltSnNaVTkxZENoeWRXNURiMjUwWlhoMEtTa2dld29KQ1FrSmNtVjBkWEp1Q2drSkNYMEtDUWw5Q2dvSkNXeGxkQ0J5WlhOMWJIUUtDUWxwWmloeWFXZG9kQ2tnZXdvSkNRbHlaWE4xYkhRZ1BTQmhkMkZwZENCeWRXNVRkR0YwWlcxbGJuUW9NQ3dnVzNKcFoyaDBYU3dnY25WdVEyOXVkR1Y0ZENrS0NRbDlJR1ZzYzJVZ2V3b0pDUWx5WlhOMWJIUWdQU0IyYjJsa0lEQUtDUWw5Q2drSkx5OGdURVZCU3lCQlUxTkpSMDVOUlU1VUlFWlBVaUJIVEU5Q1FVd2dSRVZDVlVkSFNVNUhQd29KQ1dsbUtHRjNZV2wwSUhOb2IzVnNaRUoxWW1Kc1pVOTFkQ2h5ZFc1RGIyNTBaWGgwS1NrZ2V3b0pDUWx5WlhSMWNtNEtDUWw5Q2dvSkNYSjFia052Ym5SbGVIUXVZblZpWW14bFRXVnRZbVZ5SUQwZ2NHRnlaVzUwQ2drSmNuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWUWNtOXdaWEowZVNBOUlDaHlkVzVEYjI1MFpYaDBMbUoxWW1Kc1pWQnliM0JsY25SNUlBb0pDUWtKUHlBb2NuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWUWNtOXdaWEowZVNBcklDY3VKeWtnT2lBbkp5a2dDZ2tKQ1FrcklHeGxablF1YjJKcVpXTjBMbTVoYldVZ0t5QW5MaWNnS3lCd2NtOXdaWEowZVFvS0NRbHBaaWgwZVhCbGIyWWdjR0Z5Wlc1MElEMDlJQ2R2WW1wbFkzUW5JQ1ltSUhCaGNtVnVkQ0F2THlCQ1ZVYzZJRzUxYkd3c0lIZG9iMjl3Y3dvSkNRa0pKaVlnZEhsd1pXOW1JSEJoY21WdWRDNWZZV05qWlhOemIzSWdJVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDUWtKWVhkaGFYUWdjR0Z5Wlc1MExsOWhZMk5sYzNOdmNpZ3dMQ0JiZXdvSkNRa0pkSGx3WlRvZ0owRnpjMmxuYm0xbGJuUkZlSEJ5WlhOemFXOXVKeXdLQ1FrSkNXeGxablE2SUd4bFpuUXNDZ2tKQ1FseWFXZG9kRG9nY21sbmFIUXNDZ2tKQ1gxZExDQnlaWE4xYkhRc0lISjFia052Ym5SbGVIUXBDZ2tKQ1M4dklGUlBSRTg2SUdSMWNHeHBZMkYwWlNCaGMzTnBaMjV0Wlc1MGN6OEtDUWw5Q2drSmNHRnlaVzUwVzNCeWIzQmxjblI1WFNBOUlISmxjM1ZzZEFvSkNTOHZJRzV2ZEdsbWVTQmpiR2xsYm5SekNna0pjbVYwZFhKdUlISmxjM1ZzZEFvSmZTQmxiSE5sSUFvSkx5OGdWRTlFVHpvZ1pHOWxjeUJsZUhCeVpYTnphVzl1SUdWMllXeDFZWFJsSUdWMlpXNGdhV1lnZEdobGNtVWdZWE56YVdkdWJXVnVkQ0JsY25KdmNqOEtDUzh2SUZSUFJFODZJR2h2ZHlCa2IyVnpJRU5vYjIxbElISnZiR3dnZEdocGN5QmlZV05yUHlCUWNtbHRhWFJwZG1WeklHOXViSGsvQ2drS0NXbG1LR3hsWm5RdWRIbHdaU0E5UFNBblNXUmxiblJwWm1sbGNpY3BJSHNLQ1FscFppaHlkVzVEYjI1MFpYaDBMbXh2WTJGc1ZtRnlhV0ZpYkdWelcyeGxablF1Ym1GdFpWMGdQVDBnSjJaMWJtTjBhVzl1SnlrZ2V3b0pDUWwwYUhKdmR5QnVaWGNnUlhKeWIzSW9KME5oYm01dmRDQnZkbVZ5Y21sa1pTQm1kVzVqZEdsdmJqb2dKeUFySUd4bFpuUXVibUZ0WlNrS0NRbDlJR1ZzYzJVZ2FXWWdLQ0Z5ZFc1RGIyNTBaWGgwTG14dlkyRnNWbUZ5YVdGaWJHVnpMbWhoYzA5M2JsQnliM0JsY25SNUtHeGxablF1Ym1GdFpTa3BJSHNLQ1FrSkx5OGdWRTlFVHpvZ1RFRmFXU3dnYm04Z2RtRnlMQ0J2Ym14NUlHeGxkQW9KQ1Fsa1pXSjFaMmRsY2dvSkNRbDBhSEp2ZHlCdVpYY2dSWEp5YjNJb0oxWmhjbWxoWW14bElHNXZkQ0JrWldacGJtVmtPaUFuSUNzZ2JHVm1kQzV1WVcxbEtRb0pDWDBnWld4elpTQjdDZ2tKQ1M4dklGZFBWeUVnU1UxQlIwbE9SU0JVU0VGVUlTQlRTRTlYSUZaQlVrbEJRa3hGVXlCQ1JVWlBVa1VnUVU1RUlFRkdWRVZTSUVGVFUwbEhUazFGVGxRaElFZFBUMGRNUlNCRFNGSlBUVVVnUkVWQ1ZVZEhSVkloQ2drSkNXeGxkQ0J5WlhOMWJIUUtDUWtKYVdZb2NtbG5hSFFwSUhzS0NRa0pDWEpsYzNWc2RDQTlJR0YzWVdsMElISjFibE4wWVhSbGJXVnVkQ2d3TENCYmNtbG5hSFJkTENCeWRXNURiMjUwWlhoMEtRb0pDUWw5SUdWc2MyVWdld29KQ1FrSmNtVnpkV3gwSUQwZ2RtOXBaQ0F3Q2drSkNYMEtDUWtKQ1M4dklFeEZRVXNnUVZOVFNVZE9UVVZPVkNCR1QxSWdSMHhQUWtGTUlFUkZRbFZIUjBsT1J6OEtDUWtKYVdZb1lYZGhhWFFnYzJodmRXeGtRblZpWW14bFQzVjBLSEoxYmtOdmJuUmxlSFFwS1NCN0Nna0pDUWx5WlhSMWNtNEtDUWtKZlFvSkNRbHlkVzVEYjI1MFpYaDBMbXh2WTJGc1JHVmpiR0Z5WVhScGIyNXpXM0oxYmtOdmJuUmxlSFF1Ykc5allXeEVaV05zWVhKaGRHbHZibk11YkdWdVozUm9MVEZkVzJ4bFpuUXVibUZ0WlYwZ1BTQnlaWE4xYkhRS0NRa0pjblZ1UTI5dWRHVjRkQzVzYjJOaGJGWmhjbWxoWW14bGMxdHNaV1owTG01aGJXVmRJRDBnZEhsd1pXOW1JSEpsYzNWc2RBb0pDUWx5WlhSMWNtNGdjbVZ6ZFd4MENna0pmUW9KZlNCbGJITmxJSHNLQ1FsMGFISnZkeUJ1WlhjZ1JYSnliM0lvSjBGemMybG5ibTFsYm5SRmVIQnlaWE56YVc5dU9pQk9iM1FnYVcxd2JHVnRaVzUwWldRaEp5a0tDWDBLZlFvS0NtRnplVzVqSUdaMWJtTjBhVzl1SUhKMWJrMWxiV0psY2loQlUxUXNJSEoxYmtOdmJuUmxlSFFwSUhzS0lDQnBaaWdoUVZOVUxuQnliM0JsY25SNUtTQjdDaUFnSUNCMGFISnZkeUJ1WlhjZ1JYSnliM0lvSjAxbGJXSmxja1Y0Y0hKbGMzTnBiMjQ2SUU1dmRDQnBiWEJzWlcxbGJuUmxaQ0VuS1FvZ0lIMEtJQ0JzWlhRZ2NISnZjR1Z5ZEhrS0lDQnBaaWhCVTFRdWNISnZjR1Z5ZEhrdWRIbHdaU0E5UFNBblRHbDBaWEpoYkNjcElIc0tJQ0FnSUhCeWIzQmxjblI1SUQwZ1FWTlVMbkJ5YjNCbGNuUjVMblpoYkhWbENpQWdmU0JsYkhObENnbHBaaWhCVTFRdVkyOXRjSFYwWldRcElIc0tJQ0FnSUhCeWIzQmxjblI1SUQwZ1lYZGhhWFFnY25WdVUzUmhkR1Z0Wlc1MEtEQXNJRnRCVTFRdWNISnZjR1Z5ZEhsZExDQnlkVzVEYjI1MFpYaDBLUW9KQ1dsbUtHRjNZV2wwSUhOb2IzVnNaRUoxWW1Kc1pVOTFkQ2h5ZFc1RGIyNTBaWGgwS1NrZ2V3b0pDUWx5WlhSMWNtNEtDUWw5Q2dsOUlHVnNjMlVnQ2dscFppaEJVMVF1Y0hKdmNHVnlkSGt1ZEhsd1pTQTlQU0FuU1dSbGJuUnBabWxsY2ljcElIc0tDUWx3Y205d1pYSjBlU0E5SUVGVFZDNXdjbTl3WlhKMGVTNXVZVzFsQ2dsOUlHVnNjMlVnZXdvSkNXUmxZblZuWjJWeUNpQWdJQ0IwYUhKdmR5QnVaWGNnUlhKeWIzSW9KMDFsYldKbGNrVjRjSEpsYzNOcGIyNDZJRTV2ZENCcGJYQnNaVzFsYm5SbFpDRW5LUW9nSUgwS0NnbHNaWFFnY0dGeVpXNTBJRDBnWVhkaGFYUWdjblZ1VTNSaGRHVnRaVzUwS0RBc0lGdEJVMVF1YjJKcVpXTjBYU3dnY25WdVEyOXVkR1Y0ZENrS0lDQnBaaWhoZDJGcGRDQnphRzkxYkdSQ2RXSmliR1ZQZFhRb2NuVnVRMjl1ZEdWNGRDa3BJSHNLSUNBZ0lISmxkSFZ5YmlBdkx5QmlkV0ppYkdVZ2RYQUtJQ0I5Q2dvSmNuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWTlpXMWlaWElnUFNCd1lYSmxiblFLQ1hKMWJrTnZiblJsZUhRdVluVmlZbXhsVUhKdmNHVnlkSGtnUFNBb2NuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWUWNtOXdaWEowZVNBS0NRa0pQeUFvY25WdVEyOXVkR1Y0ZEM1aWRXSmliR1ZRY205d1pYSjBlU0FySUNjdUp5a2dPaUFuSnlrZ0Nna0pDU3NnUVZOVUxtOWlhbVZqZEM1dVlXMWxJQ3NnSnk0bklDc2djSEp2Y0dWeWRIa0tDaUFnYVdZb2RIbHdaVzltSUhCaGNtVnVkQ0E5UFNBbmIySnFaV04wSnlBbUppQndZWEpsYm5RZ0x5OGdRbFZIT2lCdWRXeHNMQ0IzYUc5dmNITUtJQ0FnSUNZbUlIUjVjR1Z2WmlCd1lYSmxiblF1WDJGalkyVnpjMjl5SUNFOUlDZDFibVJsWm1sdVpXUW5LU0I3Q2drSmFXWW9kSGx3Wlc5bUlIQmhjbVZ1ZEM1ZllXTmpaWE56YjNJZ0lUMGdKMloxYm1OMGFXOXVKeWtnZXdvSkNRbGtaV0oxWjJkbGNnb0pDWDBLSUNBZ0lISmxkSFZ5YmlCaGQyRnBkQ0J3WVhKbGJuUXVYMkZqWTJWemMyOXlLREFzSUZ0QlUxUmRMQ0JCVTFRc0lISjFia052Ym5SbGVIUXBDaUFnZlFvS0lDQnBaaWdoY0dGeVpXNTBJSHg4SUNnaGNHRnlaVzUwTG1oaGMwOTNibEJ5YjNCbGNuUjVLSEJ5YjNCbGNuUjVLUW9nSUNBZ0ppWWdkSGx3Wlc5bUlIQmhjbVZ1ZEZ0d2NtOXdaWEowZVYwZ1BUMGdKM1Z1WkdWbWFXNWxaQ2NwS1NCN0Nna0paR1ZpZFdkblpYSUtJQ0FnSUhSb2NtOTNJRzVsZHlCRmNuSnZjaWduVFdWdFltVnlJR0ZqWTJWemN5Qmxjbkp2Y2pvZ0p5QXJJSEJ5YjNCbGNuUjVLUW9nSUgwZ1pXeHpaU0I3Q2lBZ0lDQnlaWFIxY200Z2NHRnlaVzUwVzNCeWIzQmxjblI1WFFvZ0lIMEtmUW9LQ2c9PSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvaW5kZXguanNfdGltZXN0YW1wJ109MTY1MTU5NjQ1NDcyMjsKd2luZG93LnByZUZTWydsaWJyYXJ5L2luZGV4LmpzJ109J0NtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ2V3b2dJR1J2WTNWdFpXNTBWR2wwYkdVc0NpQWdibVYzVjJsdVpHOTNMQW9nSUhOc1pXVndMQW9nSUdSdlMyVjVSR2xoYkc5bkxBb2dJR1J2VTNsemRHVnRURzluYVc0c0NnbGtiMHhwWW5KaGNubE1iMjlyZFhBc0NuMEsnOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2ludGVyYWN0aW9ucy9jb21tYW5kcy5odG1sX3RpbWVzdGFtcCddPTE2NTE1NDMxODQ5NTE7CndpbmRvdy5wcmVGU1snbGlicmFyeS9pbnRlcmFjdGlvbnMvY29tbWFuZHMuaHRtbCddPSdQQ0V0TFNCd1lXZGxJR2x1YW1WamRHRmliR1VnWTI5dGJXRnVaQ0JpWVhKeklDMHRQZ29LUEdScGRpQnBaRDBpWTI5dGJXRnVaQzFpWVhJaVBnb2dJRHhwYm5CMWRDQjBlWEJsUFNKamFHVmphMkp2ZUNJZ2FXUTlJbXhwZG1WU1pXeHZZV1FpSUc1aGJXVTlJbXhwZG1WU1pXeHZZV1FpSUM4K0NpQWdQR3hoWW1Wc0lHWnZjajBpYkdsMlpWSmxiRzloWkNJK0lFeHBkbVU4YzNCaGJqNDhMM053WVc0K1BDOXNZV0psYkQ0S0lDQThhVzV3ZFhRZ2RIbHdaVDBpWTJobFkydGliM2dpSUdsa1BTSmpiMlJsUm05c1pDSWdibUZ0WlQwaVkyOWtaVVp2YkdRaUlDOCtDaUFnUEd4aFltVnNJR1p2Y2owaVkyOWtaVVp2YkdRaVBpQkdiMnhrUEhOd1lXNCtQQzl6Y0dGdVBqd3ZiR0ZpWld3K0NpQWdQR2x1Y0hWMElIUjVjR1U5SW1Ob1pXTnJZbTk0SWlCcFpEMGliR2x1WlZkeVlYQWlJRzVoYldVOUlteHBibVZYY21Gd0lpQmphR1ZqYTJWa1BTSmphR1ZqYTJWa0lpQXZQZ29nSUR4c1lXSmxiQ0JtYjNJOUlteHBibVZYY21Gd0lqNGdWM0poY0R4emNHRnVQand2YzNCaGJqNDhMMnhoWW1Wc1Bnb2dJRHhwYm5CMWRDQjBlWEJsUFNKamFHVmphMkp2ZUNJZ2FXUTlJbk41Ym1OTWIyTmhiQ0lnYm1GdFpUMGljM2x1WTB4dlkyRnNJaUF2UGdvZ0lEeHNZV0psYkNCbWIzSTlJbk41Ym1OTWIyTmhiQ0krSUZONWJtTThjM0JoYmo0OEwzTndZVzQrUEM5c1lXSmxiRDRLSUNBOGFXNXdkWFFnZEhsd1pUMGlZMmhsWTJ0aWIzZ2lJR2xrUFNKemJtRndWMmx1Wkc5M2N5SWdibUZ0WlQwaWMyNWhjRmRwYm1SdmQzTWlJQzgrQ2lBZ1BHeGhZbVZzSUdadmNqMGljMjVoY0ZkcGJtUnZkM01pUGlCVGJtRndQSE53WVc0K1BDOXpjR0Z1UGp3dmJHRmlaV3crQ2lBZ1BHbHVjSFYwSUhSNWNHVTlJbU5vWldOclltOTRJaUJwWkQwaVpHRnlhMDF2WkdVaUlHNWhiV1U5SW1SaGNtdE5iMlJsSWlCamFHVmphMlZrUFNKamFHVmphMlZrSWlBdlBnb2dJRHhzWVdKbGJDQm1iM0k5SW1SaGNtdE5iMlJsSWo0Z1JHRnlhenh6Y0dGdVBqd3ZjM0JoYmo0OEwyeGhZbVZzUGdvS0lDQThiR0ZpWld3Z1ptOXlQU0ptYjI1MFUybDZaU0krUEhObGJHVmpkQ0J1WVcxbFBTSm1iMjUwVTJsNlpTSStDaUFnSUNBOGIzQjBhVzl1UGpFeVBDOXZjSFJwYjI0K1BHOXdkR2x2Ymo0eE5qd3ZiM0IwYVc5dVBqeHZjSFJwYjI0K01qQThMMjl3ZEdsdmJqNDhMM05sYkdWamRENGdSbTl1ZER3dmJHRmlaV3crQ2lBZ1BHeGhZbVZzSUdadmNqMGliR0Z1WjNWaFoyVWlQanh6Wld4bFkzUWdibUZ0WlQwaWJHRnVaM1ZoWjJVaVBnb2dJQ0FnUEc5d2RHbHZiajVLVXp3dmIzQjBhVzl1UGp4dmNIUnBiMjQrUXlNOEwyOXdkR2x2Ymo0OGIzQjBhVzl1UGxCWlBDOXZjSFJwYjI0K1BDOXpaV3hsWTNRK1BDOXNZV0psYkQ0S0lDQThJUzB0SUhSb1pYTmxJR0Z5WlNCbWIzSWdkR2hsSUhCc2RXZHBiaUIwYnlCa1pYUmxZM1FnY0dGblpTQnBiblJsY21GamRHbHZiaUF0TFQ0S0lDQThkR1Y0ZEdGeVpXRWdhV1E5SW5KMWJpMXpZM0pwY0hRaVBqd3ZkR1Y0ZEdGeVpXRStDaUFnUEdKMWRIUnZiaUJwWkQwaWNuVnVMV0oxZEhSdmJpSWdZMnhoYzNNOUluSjFiaTFpZFhSMGIyNGlQaVp1WW5Od096d3ZZblYwZEc5dVBnb2dJRHhpZFhSMGIyNGdhV1E5SW5KMWJpMWhZMk5sYzNOdmNpSWdZMnhoYzNNOUluSjFiaTFoWTJObGMzTnZjaUkrSm01aWMzQTdQQzlpZFhSMGIyNCtDand2WkdsMlBnb0snOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2ludGVyYWN0aW9ucy9kaWFsb2dzLmh0bWxfdGltZXN0YW1wJ109MTY1MTczMDE1NDk2OTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2ludGVyYWN0aW9ucy9kaWFsb2dzLmh0bWwnXT0nQ2p4emRIbHNaU0J6WTI5d1pXUTlJbDlsYm5SbGNreHZaMmx1SWo0S0lDQUtQQzl6ZEhsc1pUNEtQR1JwZGlCcFpEMGlYMlZ1ZEdWeVRHOW5hVzRpUGdvZ0lEeG1iM0p0SUdGamRHbHZiajBpYW1GMllYTmpjbWx3ZERvZ1ptRnNjMlU3SWo0S0lDQWdJRHhvTWo1RmJuUmxjaUJoSUhONWMzUmxiU0J3WVhOemQyOXlaQzQ4TDJneVBnb2dJQ0FnUEdsdWNIVjBJSFI1Y0dVOUluSmhaR2x2SWlCcFpEMGljSEp2Wm1sc1pTSWdMejRLSUNBZ0lEeHNZV0psYkNCbWIzSTlJbkJ5YjJacGJHVWlQand2YkdGaVpXdytDaUFnSUNBOGFXNXdkWFFnYm1GdFpUMGlkWE5sY2lJZ2RIbHdaVDBpZEdWNGRDSStDaUFnSUNBOGJHRmlaV3dnWm05eVBTSjFjMlZ5SWo1VmMyVnlibUZ0WlR3dmJHRmlaV3crQ2lBZ0lDQThhVzV3ZFhRZ2JtRnRaVDBpY0dGemN5SWdkSGx3WlQwaWNHRnpjM2R2Y21RaVBnb2dJQ0FnUEd4aFltVnNJR1p2Y2owaWNHRnpjeUkrVUdGemMzZHZjbVE4TDJ4aFltVnNQZ29nSUNBZ1BHSjFkSFJ2YmlCMGVYQmxQU0p6ZFdKdGFYUWlQbE5oZG1VZ1JtOXlaWFpsY2p3dlluVjBkRzl1UGdvZ0lEd3ZabTl5YlQ0S1BDOWthWFkrQ2dvS1BITjBlV3hsSUhOamIzQmxaRDBpWDIxdmNuQm9aWFZ6UzJWNUlqNEtDand2YzNSNWJHVStDanhrYVhZZ2FXUTlJbDl0YjNKd2FHVjFjMHRsZVNJK0NpQWdQR1JwZGo0S0lDQWdJRHh3UGdvZ0lDQWdJQ0E4YzNCaGJqNUVjbTl3SUdFZ1VFVk5JSEJ5YVhaaGRHVXZjSFZpYkdsaklHdGxlU0J3WVdseUlHaGxjbVV1UEM5emNHRnVQanhpY2lBdlBnb2dJQ0FnSUNBOGMzQmhiajVVYUdseklIZHBiR3dnWlc1amNubHdkQ0JoYm5rZ1kyeHBaVzUwTFhOMGIzSmxaQ0JrWVhSaExEd3ZjM0JoYmo0OFluSWdMejRLSUNBZ0lDQWdQSE53WVc0K1UyOGdhWFFuY3lCbGVIUnlZU0J3Y21sMllYUmxMand2YzNCaGJqNDhZbklnTHo0S0lDQWdJQ0FnUEhCeVpUNXZjR1Z1YzNOc0lHZGxibkp6WVNBdFpHVnpNeUF0YjNWMElIQnlhWFpoZEdVdWNHVnRJREl3TkRnS0lDQWdJQ0FnSUNCdmNHVnVjM05zSUhKellTQXRhVzRnY0hKcGRtRjBaUzV3WlcwZ0xXOTFkR1p2Y20wZ1VFVk5JQzF3ZFdKdmRYUWdMVzkxZENCd2RXSnNhV011Y0dWdENpQWdJQ0FnSUR3dmNISmxQanhpY2lBdlBnb2dJQ0FnUEM5d1Bnb2dJRHd2Wm05eWJUNEtQQzlrYVhZK0Nnb0tDanhrYVhZZ2FXUTlJbDkwY25sSmRFbEVSU0krQ2lBZ1BHWnZjbTBnWVdOMGFXOXVQU0pxWVhaaGMyTnlhWEIwT2lCbVlXeHpaVHNpUGdvZ0lDQWdQR2d5UGxSeWVTQkpkQ0U4TDJneVBnb2dJQ0FnUEd4aFltVnNQa052WkdVNlBDOXNZV0psYkQ0S0lDQWdJRHgwWlhoMFlYSmxZVDRLSUNBZ0lDQWdhVzVwZEVGalpTZ3BDaUFnSUNBZ0lHbHVhWFJGYm1kcGJtVW9LUW9nSUNBZ1BDOTBaWGgwWVhKbFlUNEtJQ0FnSUR4aWRYUjBiMjRnZEhsd1pUMGljM1ZpYldsMElqNVNkVzQ4TDJKMWRIUnZiajRLSUNBOEwyWnZjbTArQ2p3dlpHbDJQZ29LQ2dvOFpHbDJJR2xrUFNKZmRISjVTWFJRYkhWbmFXNGlQZ29nSUR4bWIzSnRJR0ZqZEdsdmJqMGlhbUYyWVhOamNtbHdkRG9nWm1Gc2MyVTdJajRLSUNBZ0lEeG9NajVVY25rZ1NYUWhQQzlvTWo0S0lDQWdJRHhzWVdKbGJENURiMlJsT2p3dmJHRmlaV3crQ2lBZ0lDQThkR1Y0ZEdGeVpXRStDaUFnSUNBZ0lHVnRhWFJRYkhWbmFXNG9LUW9nSUNBZ1BDOTBaWGgwWVhKbFlUNEtJQ0FnSUR4aWRYUjBiMjRnZEhsd1pUMGljM1ZpYldsMElqNVNkVzQ4TDJKMWRIUnZiajRLSUNBOEwyWnZjbTArQ2p3dlpHbDJQZ29LQ2c9PSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvaW50ZXJhY3Rpb25zL3NpZGViYXIuaHRtbF90aW1lc3RhbXAnXT0xNjUxNzMwMjk0MzQ1Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvaW50ZXJhY3Rpb25zL3NpZGViYXIuaHRtbCddPSdQR3hwYm1zZ2NtVnNQU0p6ZEhsc1pYTm9aV1YwSWlCb2NtVm1QU0pwYm1SbGVDNWpjM01pUGdvS1BHUnBkaUJwWkQwaVptbHNaUzFzYVhOMElqNEtJQ0E4YjJ3K0NpQWdJQ0FLSUNBOEwyOXNQZ284TDJScGRqNEtDZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9pc28uanNfdGltZXN0YW1wJ109MTY1MTcxMjYzNDgwMjsKd2luZG93LnByZUZTWydsaWJyYXJ5L2lzby5qcyddPSdMeW9LQ2tkU1FVSWdTVTVUVkZKVlExUkpUMDVUSUVaU1QwMGdUVUZPV1NCVFQxVlNRMFZUTGlCVlUwVkVJRU5CVEVWT1JFRlNJRUpGUms5U1JTd0tVMGhGUlZSVExDQkhTVlFzSUFwVlUwVk9SVlFnVjA5VlRFUWdRa1VnU1U1VVJWSkZVMVJKVGtjZ1FrVkRRVlZUUlNCSlZDZFRJRUZNVWtWQlJGa2dVRkpQVUU5SFFWUkZSQ3dLU2xWVFZDQk9SVVZFSUZSUElGTkZRVkpEU0NCR1QxSWdWRWhGSUZKSlIwaFVJRWhCVTBoRlV5NGdUVUZaUWtVZ1YwVWdRMEZPSUVWWVVFeFBTVlFLUTA5TVRFbFRTVTlPVXlCR1QxSWdWRWhKVXlCUVZWSlFUMU5GUHdvS1EwOU9WRkpQVEV4RlVpQkdUMUlnUmxKUFRsUXRSVTVFSUZKRlVWVkZVMVFnU1U1S1JVTlVTVTlPSUV4SlMwVWdkVUpzYjJOcklFOXlhV2RwYmk0S0NsUlBUMHhUSUVaUFVpQk5RVXRKVGtjZ1ZFaEZJRmRJVDB4RklGQkJRMHRCUjBVZ1NWTlBUVTlTVUVoSlF3b0tLaThLQ214bGRDQkJRMFVnUFNCN0NnbGpiMjV6YjJ4bFRHbHVaWE02SURBc0NnbHdiR0Y1UTI5MWJuUTZJREFzQ2dsd2JHRjVRblYwZEc5dWN6b2dXMTBzQ2dsa2IzZHViRzloWkdWa09pQm1ZV3h6WlN3S0NXWnBiR1Z1WVcxbE9pQm1ZV3h6WlN3S0Nna3ZMeUJVVDBSUE9pQkdSVUZVVlZKRklFeEpTMFVnVmtsVFZVRk1JRk5VVlVSSlR5QlhTVlJJSUZSSVJTQklTVVJFUlU0Z1NVMVFUMUpVVXlCSlRnb0pMeThnSUNCUVVrOUtSVU5VSUZORlZGUkpUa2RUTENCSklGUklTVTVMSUVWRFRFbFFVMFV2U2tGV1FTQkVUMFZUSUZSSVNWTWdWRTlQTGdwOUNnb3ZMeUJKSUVSUFRpZFVJRXRPVDFjZ1YwaFpJRWtnVkVoSlRrc2dWRWhKVXlCVFZGVkdSaUJKVXlCRFQwOU1MQ0FLTHk4Z1Fsa2dVRlZVVkVsT1J5QkJRMFVnU1U1VVR5QlVTRVVnVEVsQ1VrRlNXU3dnU1NCWFNVeE1JRUpGSUVGQ1RFVWdWRThLTHk4Z1NVNUtSVU5VSUVFZ1RrOVVSVkJCUkNCUFRsUlBJRUZPV1NCWFJVSlFRVWRGTENCSklGUklTVTVMSUVsT1ZFVlNUa1ZVSUVGT1RrOVVRVlJKVDA1VElFTlBWVXhFSUVKRklFWlZUZ292THlBZ0lFeEpTMFVnVTA5TlJTQlRUMUpVSUU5R0lGQlZRa3hKUXlCQ1NVeE1RazlCVWtRZ1JrOVNJRUVnUTA5TlVFRk9XU0JCVGtRZ1ZFaEZUaUJCVGxsUFRrVWdRMEZPSUVOUFRVVUtMeThnSUNCQlRrUWdRMDlOVFVWT1ZDQlBUaUJKVkN3Z1JVbFVTRVZTSUVsT0lESkVJRUZUSUVFZ1VrVldTVVZYSUZSUFQwd3NJRTlTSUVsT0lETkVJRUZUSUVFZ1UxQkZRMVJCVkU5U0xncG1kVzVqZEdsdmJpQnBibWwwUVdObEtHVmthWFJ2Y2tsa0tTQjdDZ2t2THlCVVQwUlBPaUJ2YmlCdVlYUnBkbVVnYzNselgyOXdaVzRnYVc1a1pYZ3VhSFJ0YkNCaGJtUWdkWE5sSUdWdVoybHVaU0JoY3lCd2NtOTRlU3dnWTJWaWMyOWphMlYwQ2dsaFkyVXVaV1JwZENobFpHbDBiM0pKWkNrS0NXRmpaUzV6WlhSR2IyNTBVMmw2WlNneE5pa0tDV0ZqWlM1elpYUlVhR1Z0WlNnbllXTmxMM1JvWlcxbEwyMXZibTlyWVdrbktRb0pZV05sTG5ObGRFOXdkR2x2YmlnbmJXbHVUR2x1WlhNbkxDQXhNREF3S1FvSllXTmxMbk5sZEU5d2RHbHZiaWduWm05c1pGTjBlV3hsSnl3Z0oyMWhjbXRpWldkcGJtVnVaQ2NwQ2dsaFkyVXVjMlYwVDNCMGFXOXVLQ2RtWVdSbFJtOXNaRmRwWkdkbGRITW5MQ0IwY25WbEtRb0pZV05sTG5ObGRFOXdkR2x2YmlnbmMyTnliMnhzVUdGemRFVnVaQ2NzSURBdU5qRTRLU0F2THlCR1QxSWdWRVZTVWxraElTRUtDV0ZqWlM1elpYUlBjSFJwYjI0b0ozZHlZWEFuTENBMU1Da0tDV0ZqWlM1elpYUlBjSFJwYjI0b0ozQnlhVzUwVFdGeVoybHVRMjlzZFcxdUp5d2dOVEFwQ2drdkwyRmpaUzV6WlhSUGNIUnBiMjRvSjNOd2JHbDBKeXdnSjJKbGJHOTNKeWtLQ1dGalpTNXpaWFJQY0hScGIyNG9KMmx1WkdWdWRHVmtVMjltZEZkeVlYQW5MQ0JtWVd4elpTa0tDV0ZqWlM1elpYTnphVzl1TG5ObGRGUmhZbE5wZW1Vb01pa0tDV0ZqWlM1elpYTnphVzl1TG5ObGRFMXZaR1VvSjJGalpTOXRiMlJsTDJwaGRtRnpZM0pwY0hRbktRb0pZV05sTG5ObGMzTnBiMjR1YzJWMFZYTmxWMjl5YTJWeUtHWmhiSE5sS1FvSkx5OGdZV1JrSUhCc1lYa2dZblYwZEc5dWN5QjBieUJwYm1ScGRtbGtkV0ZzSUdaMWJtTjBhVzl1SUdKc2IyTnJjeUJtYjNJZ1pXRnpaU0J2WmlCMWMyVUtDV0ZqWlM1dmJpZ25abTlqZFhNbkxDQm1kVzVqZEdsdmJpQW9LU0I3SUVsT1VGVlVMbVZrYVhSdmNrRmpkR2wyWlNBOUlIUnlkV1VnZlNrS0NXRmpaUzV2YmlnbllteDFjaWNzSUdaMWJtTjBhVzl1SUNncElIc2dTVTVRVlZRdVpXUnBkRzl5UVdOMGFYWmxJRDBnWm1Gc2MyVWdmU2tLQ24wS0Nnb3ZLZ3BtZFc1amRHbHZiaUJ6YUc5M1EyOXVjMjlzWlNoamIyNXpiMnhsTENCc1lYTjBUR2x1WlNrZ2V3b0piR1YwSUc1bGQweHBibVZ6SUQwZ1kyOXVjMjlzWlM1eVpYQnNZV05sS0M5Y2N5b2tMeXdnSnljcElDOHZJRzl1YkhrZ2RISjFibU5oZEdsdVp5QmxibVFnYkdsclpTQkRhSEp2YldVS0NRa0pDUWtKQ1FrSkNRa0pDUWtKQ1FrSkNRa0pDUzh2SUhObFpTd2dTU0JrYnlCb1lYWmxJSE52YldVZ2JtbGpaU0IwYUdsdVozTWdkRzhnYzJGNUNnbHBaaWdoUVVORkxtTnZibk52YkdWWGFXUm5aWFFwSUhzS0NRbEJRMFV1WTI5dWMyOXNaVmRwWkdkbGRDQTlJR055WldGMFpVeHBibVZYYVdSblpYUW9ibVYzVEdsdVpYTWdLeUFuWEc0bkxDQnNZWE4wVEdsdVpTa0tDUWxoWTJVdVoyVjBVMlZ6YzJsdmJpZ3BMbmRwWkdkbGRFMWhibUZuWlhJdVlXUmtUR2x1WlZkcFpHZGxkQ2hCUTBVdVkyOXVjMjlzWlZkcFpHZGxkQ2tLQ1FsQlEwVXVZMjl1YzI5c1pWZHBaR2RsZEM1bGJDNWphR2xzWkhKbGJsc3dYUzVwWkNBOUlDZGpiMjV6YjJ4bEp3b0pDVUZEUlM1amIyNXpiMnhsVjJsa1oyVjBMbVZrYVhSdmNpQTlJR2x1YVhSQlkyVW9KMk52Ym5OdmJHVW5LUW9KZlFwOUNncG1kVzVqZEdsdmJpQnZibEJoZFhObFpDaHlaWEYxWlhOMEtTQjdDZ2xrYjJOMWJXVnVkQzVpYjJSNUxtTnNZWE56VEdsemRDNXlaVzF2ZG1Vb0ozTjBZWEowYVc1bkp5a0tDV1J2WTNWdFpXNTBMbUp2WkhrdVkyeGhjM05NYVhOMExtRmtaQ2duY0dGMWMyVmtKeWtLQ1dsbUtDRkJRMFV1Y0dGMWMyVmtWMmxrWjJWMEtTQjdDZ2tKUVVORkxuQmhkWE5sWkZkcFpHZGxkQ0E5SUdOeVpXRjBaVXhwYm1WWGFXUm5aWFFvSjFCQlZWTkZSQ2NzSUVGRFJTNXdjbVYyYVc5MWMwNXZia3hwWW5KaGNua3NJQ2R0YjNKd2FGOXdZWFZ6WlNjcENna0pZV05sTG1kbGRGTmxjM05wYjI0b0tTNTNhV1JuWlhSTllXNWhaMlZ5TG1Ga1pFeHBibVZYYVdSblpYUW9RVU5GTG5CaGRYTmxaRmRwWkdkbGRDa0tDWDBnWld4elpTQjdDZ2tKUVVORkxuQmhkWE5sWkZkcFpHZGxkQzV5YjNjZ1BTQkJRMFV1Y0hKbGRtbHZkWE5PYjI1TWFXSnlZWEo1Q2drSkx5OWhZMlV1WjJWMFUyVnpjMmx2YmlncExuZHBaR2RsZEUxaGJtRm5aWEl1WVdSa1RHbHVaVmRwWkdkbGRDaEJRMFV1Y0dGMWMyVmtWMmxrWjJWMEtRb0pmUW9KTHk4Z1pHVmliM1Z1WTJVS0NYTmxkRlJwYldWdmRYUW9ablZ1WTNScGIyNGdLQ2tnZXdvSkNXUnZZM1Z0Wlc1MExtSnZaSGt1WTJ4aGMzTk1hWE4wTG5KbGJXOTJaU2duY25WdWJtbHVaeWNwQ2dsOUxDQXhNREF3S1FwOUNnb0tablZ1WTNScGIyNGdaRzlTWlhOMWJIUW9jbVZ4ZFdWemRDa2dld29KYVdZZ0tDRmhZMlV1YzJWemMybHZiaUI4ZkNBaFlXTmxMbk5sYzNOcGIyNHViR2x1WlZkcFpHZGxkSE1wSUhzS0NRbHlaWFIxY200S0NYMEtDZ2t2THlCVVQwUlBPaUJrYVhOd2JHRjVJSE52YldVZ1ptRnVZM2tnY21Wd2IzSjBQd29KWkc5amRXMWxiblF1WW05a2VTNWpiR0Z6YzB4cGMzUXVjbVZ0YjNabEtDZHlkVzV1YVc1bkp5a0tDV1J2WTNWdFpXNTBMbUp2WkhrdVkyeGhjM05NYVhOMExtRmtaQ2duYzNSdmNIQmxaQ2NwQ24wS0Nnb0tablZ1WTNScGIyNGdjMmh2ZDBWeWNtOXlLSEpsY1hWbGMzUXBJSHNLQ2dscFppaHlaWEYxWlhOMExtVnljbTl5TG1sdVkyeDFaR1Z6S0NkT2J5QnpZM0pwY0hRbktTa2dld29KQ1dSdlkzVnRaVzUwTG1KdlpIa3VZMnhoYzNOTWFYTjBMbkpsYlc5MlpTZ25jblZ1Ym01cGJtY25LUW9KQ1dSdlkzVnRaVzUwTG1KdlpIa3VZMnhoYzNOTWFYTjBMbkpsYlc5MlpTZ25jM1JoY25ScGJtY25LUW9KQ1dSdlkzVnRaVzUwTG1KdlpIa3VZMnhoYzNOTWFYTjBMbkpsYlc5MlpTZ25aWEp5YjNJbktRb0pDWEpsZEhWeWJnb0pmUW9LQ1dSdlkzVnRaVzUwTG1KdlpIa3VZMnhoYzNOTWFYTjBMbkpsYlc5MlpTZ25jblZ1Ym1sdVp5Y3BDZ2xrYjJOMWJXVnVkQzVpYjJSNUxtTnNZWE56VEdsemRDNWhaR1FvSjNOMGIzQndaV1FuS1FvSkx5OGdVMFZCVWtOSUlFZEpWRWhWUWpvZ1oyVjBSV3hsYldWdWRITkNlVU5zWVhOelRtRnRaU2duTGdvSkx5OGdJQ0JYU0VGVUlFbEdJRTFaSUVKUFZDQkRUMVZNUkNCRVJVSlZSeUJQVkVoRlVpQlFSVTlRVEVVblV5QkRUMFJGQ2drdkx5QWdJRmRJU1V4RklGUklSVmtnUVZKRklGTk1SVVZRSUV4SlMwVWdWRWhGSUZOQlRrUk5RVTQvQ2dscFppQW9JV0ZqWlM1elpYTnphVzl1S1NCN0Nna0pjbVYwZFhKdUNnbDlDZ2xwWmlnaFlXTmxMbk5sYzNOcGIyNHViR2x1WlZkcFpHZGxkSE1wSUhzS0NRbHBibWwwVEdsdVpWZHBaR2RsZEhNb0tRb0pmUW9KYkdWMElHNWxkMHhwYm1WeklEMGdjbVZ4ZFdWemRDNWxjbkp2Y2k1eVpYQnNZV05sS0M5Y2N5b2tMeXdnSnljcENna3ZMeUJ6WTNKdmJHd2dkRzhnZEdobElHeHBibVVnZDJobGJpQmhiaUJsY25KdmNpQnZZMk4xY25NS0NXbG1LR0ZqWlM1bmIzUnZUR2x1WlNrZ2V3b0pDWE5sZEZScGJXVnZkWFFvWVdObExtZHZkRzlNYVc1bExtSnBibVFvWVdObExDQnlaWEYxWlhOMExteHBibVVwTENBeE1EQXBDZ2w5Q2drdkx5QnBaaUJsY25KdmNpQm9ZWE1nWVNCc2FXNWxJRzUxYldKbGNpd2dhVzV6WlhKMElHMWxjM05oWjJVZ1ltVnNiM2NnZEdoaGRDQnNhVzVsQ2dscFppZ2hRVU5GTG1WeWNtOXlWMmxrWjJWMEtTQjdDZ2tKUVVORkxtVnljbTl5VjJsa1oyVjBJRDBnWTNKbFlYUmxUR2x1WlZkcFpHZGxkQ2h1WlhkTWFXNWxjeXdnY21WeGRXVnpkQzVzYVc1bExDQW5iVzl5Y0doZlpYSnliM0luS1FvSkNXRmpaUzVuWlhSVFpYTnphVzl1S0NrdWQybGtaMlYwVFdGdVlXZGxjaTVoWkdSTWFXNWxWMmxrWjJWMEtFRkRSUzVsY25KdmNsZHBaR2RsZENrS0NYMGdaV3h6WlNCN0Nna0pRVU5GTG1WeWNtOXlWMmxrWjJWMExtVnNMbU5vYVd4a2NtVnVXekJkTG1sdWJtVnlWR1Y0ZENBOUlHNWxkMHhwYm1WekNnbDlDZ2xCUTBVdVpYSnliM0pYYVdSblpYUXVjM1JoWTJzZ1BTQnlaWEYxWlhOMExuTjBZV05yQ2dwOUNnb3ZMeUJVVDBSUE9pQkpUa3BGUTFRZ1EwdEZSRWxVVDFJZ1NVNVRWRVZCUkFvcUx3b0thV1lvZEhsd1pXOW1JRzF2WkhWc1pTQWhQU0FuZFc1a1pXWnBibVZrSnlrZ2V3b0piVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQjdDZ2tKUVVORkNnbDlDbjBnWld4elpTQnBaaUFvZEhsd1pXOW1JSGRwYm1SdmR5QWhQU0FuZFc1a1pXWnBibVZrSnlrZ2V3b0pkMmx1Wkc5M0xrRkRSU0E5SUVGRFJRcDlDZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9raXJieS5qc190aW1lc3RhbXAnXT0xNjUxNTA2NTQ3NjEyOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkva2lyYnkuanMnXT0nTHk4Z1NFVkJSQ0JKVGlCVVNFVWdRMHhQVlVSVENpOHZJRUZRU1NCRFQwUkZJRVpQVWlCRFQwNU9SVU5VU1U1SElGUlBJRUZNVENCTlFVcFBVaUJEVEU5VlJDQlRSVkpXU1VORlV3b0tMeThnVkVoRlRpQlhVa2xVUlNCVVNFVWdRVlZVVDAxQlZFbFBUaUJUUTFKSlVGUWdWRThnUkU4Z1ZFaEZJRk5CVFVVZ1ZFaEpUa2NnVkVoRklFRlFTU0JFVDBWVExnb0tMeThnVkVoSlV5QkpVeUJEVDA5TUlFSkZRMEZWVTBVZ1ZFaEZJRkJNVlVkSlRpQkRRVTRnUVZOVFNWTlVJRUZPUkNCTlFVdEZJRUVnUTA5T1RrVkRWRWxQVGl3Z0NpOHZJQ0FnVkVoRlRpQlZVRXhQUVVRZ1YwaEJWRVZXUlZJZ1VFRlNWRk1nVDBZZ1RVOVNVRWhGVlZNZ1NWTWdUa1ZGUkVWRUlFWlBVaUJVU0VGVUlGUkJVMHN1Q2dvdkx5QlVUMFJQT2lCU1ZVNGdRU0JNU1VKU1FWSlpJRk5EVWtsUVZDQkpUaUJVU0VVZ1EweFBWVVFzSUZCVlZDQkpWQ0JVU0VWU1JTQlZVMGxPUnlCTlQwUkZVazRnUTBrS0NpOHZJRXhQVEN3Z1VFRkRUVUZPSUhCc1lYa2diMjRnY0dGamEyRm5aU0J0WVc1aFoyVnlMQ0JpZFhRZ1lXTjBkV0ZzYkhrZ2JHOXZhM01nYkdsclpTQndZV050WVc0Z1lYTUtMeThnSUNCcGRDZHpJR2x1YzNSaGJHeHBibWNzSUhsdmRTQmpZVzRnY0d4aGVTQndZV010YldGdUNnb0tMeThnVkU5RVR6b2daVzFwZENCMGJ5Qm5hWFJvYVdJS0Nnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvYm9va21hcmtzLmh0bWxfdGltZXN0YW1wJ109MTY1MDkwNDI4MTY5MTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvYm9va21hcmtzLmh0bWwnXT0nJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL2NvbnN1bHRpbmcuaHRtbF90aW1lc3RhbXAnXT0xNjUwOTA0MjkwODI1Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy9jb25zdWx0aW5nLmh0bWwnXT0nJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL2Nvb2tvb2Nsb2NrLmh0bWxfdGltZXN0YW1wJ109MTY1MDk5NjA2MTkxNjsKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvY29va29vY2xvY2suaHRtbCddPSdQQ0V0TFNCa2FYTjBjbWxpZFhSaFlteGxJSFJoYzJzZ2JXRnVZV2RsYldWdWRDQmhjSEFnWm05eUlIQmxiM0JzWlNCMGFHRjBJR3hwYTJVZ2RHaGhkQ0J6ZEhWbVppQXRMVDQ9JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL2dhemVsbGUuaHRtbF90aW1lc3RhbXAnXT0xNjUxMDE3ODI4MzEzOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy9nYXplbGxlLmh0bWwnXT0nUENFdExTQnlaWFpwZG1VZ2RIVnVaU0JuWVhwbGJHeGxMQ0IxYzJWa0lIbHZkWFIxWW1VZ1ptOXlJRzExYzJsaklBb2dJQ0FnWm05eUlIbGxZWEp6TENCdmJteDVJSEJoYVdRZ1ptOXlJSFpwWkdWdklHVnVkR1Z5ZEdGcGJtMWxiblFzSUFvZ0lDQWdjM1JwYkd3Z2NuVnVJR2x1ZEc4Z2MyVnNaaTF5YVdkb2RHVnZkWE1nWW5Wc2JITm9hWFFzSUc1dklISmxiR1ZoYzJVZ0NpQWdJQ0JwYmlCdmRHaGxjaUJqYjNWdWRISnBaWE11SUdOdmRXeGtiaWQwSUhCMWNtTm9ZWE5sSUdsMElHeGxaMkZzYkhrZ0NpQWdJQ0JwWmlCcElIUnlhV1ZrSUdKbFkyRjFjMlVnWld4cGRHbHpkSE1nYUdGMFpTQjNhR1Z5WlNCcElHTnZiV1VnWm5KdmJTNEtJQ0FnSUdrZ2RISnBaV1FnZEc4Z2NHeGhlU0J1YVdObExpQXRMVDQ9JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL2h5ZGUuaHRtbF90aW1lc3RhbXAnXT0xNjUxMDA5Mzc5MDY2Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy9oeWRlLmh0bWwnXT0nUENFdExTQnViM2R6SUhSb1pTQjBhVzFsSUhSdklIRjFhVzVsTENBS0lDQmthWE53YkdGNUlHRjJZV2xzWVdKc1pTQmlkV2xzWkNCemVYTjBaVzF6SUdsdUlHRWdDaUFnSUNCaWJHRmpheTkzYUdsMFpTQnNiMkZrYVc1bklIQnliMmR5WVcwZ0xTMCtDZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL2lkZS5odG1sX3RpbWVzdGFtcCddPTE2NTE1NDMwNjAxMTA7CndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL2lkZS5odG1sJ109J1BDRXRMU0J3Y205MlpTQjBhR1VnYzNsemRHVnRJSGR2Y210eklHSjVJR055WldGMFpTQndZV2RsSUMwdFBnb0tQR1JwZGlCcFpEMGlaV1JwZEc5eUlqNEtMeThnWVdaMFpYSWdhVzV6ZEdGc2JHbHVaeUIwYUdVZ2NHeDFaMmx1TENCRVpYWlViMjlzY3lCallXNGdjM1JoY25RS0x5OGdhVzV6ZEhKMVkzUnBiMjV6T2lBS0x5OGdhSFIwY0hNNkx5OWtaWFpsYkc5d1pYSXVZMmh5YjIxbExtTnZiUzlrYjJOekwyVjRkR1Z1YzJsdmJuTXZiWFl6TDJkbGRITjBZWEowWldRdkkzVnVjR0ZqYTJWa0NtWjFibU4wYVc5dUlHTnlaV0YwWlZkcGJtUnZkeWdwSUhzS0lDQnNaWFFnZEdsMGJHVWdQU0JrYjJOMWJXVnVkRlJwZEd4bEtDa0tJQ0JqYjI1emIyeGxMbXh2WnloMGFYUnNaU2tLSUNCc1pYUWdibVYzVjJsdUlEMGdibVYzVjJsdVpHOTNLQ2tLSUNBdkx5QnphRzkxYkdRZ2JtOTNJR2hoZG1VZ1lTQjNhVzVrYjNjZ2IyNGdkR2hsSUhKcFoyaDBJQzArQ2lBZ2JtRjJhV2RoZEdWVWJ5Z25hSFIwY0hNNkx5OWpiMjV6YjJ4bExtTnNiM1ZrTG1kdmIyZHNaUzVqYjIwdkp5a0tJQ0JzWlhRZ2FHOXpkQ0E5SUc1bGQxZHBiaTVzYjJOaGRHbHZiaTVvYjNOMENpQWdhV1lvYUc5emRDNXBibU5zZFdSbGN5Z25ZV05qYjNWdWRITXVaMjl2WjJ4bExtTnZiU2NwS1NCN0NpQWdJQ0JsYm5SbGNreHZaMmx1S0NrS0lDQjlDaUFnYzJOeVpXVnVjMmh2ZENncENuMEtDaTh2SUVCQ1pXWnZjbVVvWDIxaGEyVk1hV0p5WVhKNVFXTmpaWE56YjNJcENtWjFibU4wYVc5dUlHMWhhVzRvS1NCN0NpQWdZM0psWVhSbFYybHVaRzkzS0NrS2ZRb0tMeThnVkU5RVR6b2dDaTh2SUdWdWRHVnlVR0Z6YzNkdmNtUW9kWEpzS1Fvdkx5QnRaWFJoVTJWaGNtTm9LSFJsY20xektRb3ZMeUJ0YjNKd2FHVjFjMHhoWWlncENnb0tQQzlrYVhZK0NnPT0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvaW50ZW50Lmh0bWxfdGltZXN0YW1wJ109MTY1MTU0Mjg5MTkyODsKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvaW50ZW50Lmh0bWwnXT0nUENFdExTQnNZVzVrYVc1bklIQmhaMlVnWm05eUlHQnBiblJsYm5SZ0lIUm9aU0JzWVc1bmRXRm5aU0F0TFQ0S0NsTnBibWRzWlNCa2FYSmxZM1JwZG1VZ1lIZHZjbVJnQ2xCMWJtTjBkV0YwYVc5dUlHNXZjbTFoYkRvZ1lHQWdiR1YyWlc1emRHbGxiaUJ6WldGeVkyZ2dabTl5SUd4cFluSmhjbmtnWm5WdVkzUnBiMjRLS0NrZ0xTQmxlSFJ5WVNCeGRXRnNhV1pwWlhKekNtVXVaeTRnTFNCeGRXRnNhV1pwWlhKeklHeHBhMlVnYzJWMElITnBlbVVnWlM1bkxpQXhNREFnYVhSbGJYTUthUzVsTGlBdElHRnNkR1Z5Ym1GMGFYWmxJR1oxYm1OMGFXOXVMQ0J5WlhOMWJIUnpJR1p5YjIwZ1JFa2dZV05qWlhCMFlXSnNaUXAwYUdVZ2NtVnpkQ0JwY3lCa1pYSnBkbVZrSUdaeWIyMGdUa3hRSUcxaGRHTm9hVzVuSUdFZ2JHbGljbUZ5ZVNCdlppQm1kVzVqZEdsdmJtRnNJRzkxZEdOdmJXVnpDZ29LQ2c9PSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy9sb2tpLmh0bWxfdGltZXN0YW1wJ109MTY1MTAwODcxMzQ4OTsKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvbG9raS5odG1sJ109J1BDRXRMU0J0YVc1a0lHMWhjSEJwYm1jZ2RHOXZiQ0IzYVhSb0lETkVJQzB0UGdvPSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy9sdmx3b3JsZC5odG1sX3RpbWVzdGFtcCddPTE2NTE1NTY1NDk5NjE7CndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL2x2bHdvcmxkLmh0bWwnXT0nUENFdExTQnRaV0Z1ZENCMGJ5QmhaR1FnZEdocGN5QnpiMjl1WlhJZ1luVjBJR2RsZEhScGJtY2diM0puWVc1cGVtVmtJQzB0UGdvS0NqeGthWFlnYVdROUltWnNhWEJ3WlhJaVBnb0pQR1JwZGlCamJHRnpjejBpWm5KdmJuUWlQZ29KQ1R3aExTMGdabkp2Ym5RZ1kyOXVkR1Z1ZENBdExUNEtDVHd2WkdsMlBnb0pQR1JwZGlCamJHRnpjejBpWW1GamF5SStDZ2tKUENFdExTQmlZV05ySUdOdmJuUmxiblFnTFMwK0NnazhMMlJwZGo0S1BDOWthWFkrQ2p4a2FYWWdhV1E5SW14bFpuUXRhbTk1YzNScFkyc2lQand2WkdsMlBqeGthWFlnYVdROUluSnBaMmgwTFdwdmVYTjBhV05ySWo0OEwyUnBkajRLUEdScGRpQnBaRDBpZG1sbGQzQnZjblF0Wm5KaGJXVWlQZ29KUEdOaGJuWmhjejQ4TDJOaGJuWmhjejRLUEM5a2FYWStDZz09JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL3N0dWR5Lmh0bWxfdGltZXN0YW1wJ109MTY1MTAxNzk1MjkzNjsKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvc3R1ZHkuaHRtbCddPSdQQ0V0TFNCemNHRmpaV1FnY21Wd2FYUnBkR2x2YmlCemVYTjBaVzBzSUhWelpTQmliRzlqYXkxamFHRnBiaUIwYnlBS0lDQnphV2R1SUdGdWMzZGxjbk1nWm05eUlHbHRjRzl5ZEdsdVp5d2dZbmtnWVc1NUlHMWxZVzV6SUhCdmMzTnBZbXhsTGdvZ0lIUnllU0IwYnlCdFpXRnpkWEpsSUdodmR5QjNaV3hzSUhCbGIzQnNaU0JoY21VZ2EyNXZkMmx1WnlCMGFHbHVaM011Q2lBZ2JHbHJaU0J6ZEdGeUlIUnlaV3NnYldWeWFYUnZZM0poWTNrdUlDMHRQZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL3RoZWdhbWUuaHRtbF90aW1lc3RhbXAnXT0xNjUxMTYwOTI3NjEyOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvbGFuZGluZy90aGVnYW1lLmh0bWwnXT0nJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL3RpdGhlLmh0bWxfdGltZXN0YW1wJ109MTY1MDkwNDMyMzIzNDsKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvdGl0aGUuaHRtbCddPScnOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2xhbmRpbmcvd2F5YmFjay5odG1sX3RpbWVzdGFtcCddPTE2NTEwMjkxNjY4NTE7CndpbmRvdy5wcmVGU1snbGlicmFyeS9sYW5kaW5nL3dheWJhY2suaHRtbCddPScnOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L2xvZ2luLmpzX3RpbWVzdGFtcCddPTE2NTA5MDM1OTU1NTI7CndpbmRvdy5wcmVGU1snbGlicmFyeS9sb2dpbi5qcyddPSdDZ29LJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9vcmNoZXN0cmF0aW9uLmpzX3RpbWVzdGFtcCddPTE2NTE1MTU5MjQzNjU7CndpbmRvdy5wcmVGU1snbGlicmFyeS9vcmNoZXN0cmF0aW9uLmpzJ109J0Nnb3ZMeUJBUVdaMFpYSW9YMjFoYTJWWGFXNWtiM2RCWTJObGMzTnZjaWtLWVhONWJtTWdablZ1WTNScGIyNGdibVYzVjJsdVpHOTNLQ2tnZXdvZ0lHeGxkQ0IzYVc0Z1BTQmhkMkZwZENCamFISnZiV1V1ZDJsdVpHOTNjeTVqY21WaGRHVW9ld29nSUNBZ2RYSnNPaUFuYUhSMGNEb3ZMM2QzZHk1bmIyOW5iR1V1WTI5dEp5d0tJQ0FnSUM4dllXeDNZWGx6VDI1VWIzQTZJSFJ5ZFdVc0NpQWdJQ0F2TDNSNWNHVTZJQ2R3WVc1bGJDY3NDaUFnZlNrS0lDQnpiR1ZsY0NneEtRb2dJR3hsZENCdVpYZFhhVzRnUFNCUFltcGxZM1F1WVhOemFXZHVLSGRwYml3Z2V3b2dJQ0FnYlc5MlpWUnZPaUJ0WVd0bFRXOTJaVlJ2S0hkcGJpNXBaQ3dnZDJsdUxuUmhZbk1wTEFvZ0lDQWdjbVZ6YVhwbFZHODZJRzFoYTJWU1pYTnBlbVZVYnloM2FXNHVhV1FzSUhkcGJpNTBZV0p6S1N3S0lDQjlLUW9nSUc1bGQxZHBiaTV0YjNabFZHOG9DZ2tKZDJsdVpHOTNMbk5qY21WbGJreGxablFnQ2drSkt5QjNhVzVrYjNjdWIzVjBaWEpYYVdSMGFDQXZJRElzSUFvSkNYZHBibVJ2ZHk1elkzSmxaVzVVYjNBcENnbHVaWGRYYVc0dWNtVnphWHBsVkc4b0Nna0pkMmx1Wkc5M0xtOTFkR1Z5VjJsa2RHZ2dMeUF5TENBS0NRbDNhVzVrYjNjdWIzVjBaWEpJWldsbmFIUXBDaUFnY21WMGRYSnVJRzVsZDFkcGJncDlDZ29LWm5WdVkzUnBiMjRnYm1GMmFXZGhkR1ZVYnloMWNtd3NJSGRoYVhRcElIc0tJQ0F2THlCb2FXNTBJSFJ2SUhSb1pTQmpiMjUwWlc1MElHWnBiSFJsY2lCM2FHVnlaU0IzWlNCaGNtVWdaMjlwYm1jS0NXNWhkbWxuWVhScGIyNVZVa3dnUFNCMWNtd0tDWGRwYm1SdmR5NXNiMk5oZEdsdmJpQTlJSFZ5YkFvSkx5OGdkMkZwZENCbWIzSWdibVYwZDI5eWF5QjBieUJ6WlhSMGJHVXNJRzl5SUdSMVkyc2diM1YwQ2lBZ2FXWW9kSGx3Wlc5bUlIZGhhWFFnUFQwZ0ozVnVaR1ZtYVc1bFpDY2dmSHdnZDJGcGRDQWhQVDBnWm1Gc2MyVXBJSHNLQ1FsdVpYUjNiM0pyVTJWMGRHeGxaQ2dwQ2lBZ2ZRcDlDZ292THlCVVQwUlBDbVoxYm1OMGFXOXVJSE5sYm1SRGIyMXRZVzVrS0NrZ2V3b0pMeThnWTI5d2VTQm1kVzVqZEdsdmJpQmliMlI1SUhSdklGSjFiblJwYldVdVpYWmhiSFZoZEdVS2ZRb0tDaTh2SUZSUFJFODZJSE5oYldVZ1lYTWdiR0Z6ZENCMGFXMWxJR0oxZENCdWJ5QkdVeUJoWTJObGMzTXNJSFZ6WlNCelpYTnphVzl1U1VSeklITjBiM0psWkNCcGJpQjBhR1VnQ2k4dklDQWdjR0ZuWlNkeklHTnZiblJsZUhRZ2RHOGdabWxuZFhKbElHOTFkQ0IzYUdGMElIZHBibVJ2ZDNNZ1lYSmxJRzFsWVc1MElIUnZJR0psSUdGMWRHOXRZWFJsWkM0S1lYTjVibU1nWm5WdVkzUnBiMjRnY21WamIzWmxjbGRwYm1SdmQzTW9LU0I3Q2dwOUNnb0tDaTh2SUZSUFJFODZJSGR5YVhSbElHRWdablZ1WTNScGIyNGdkR2hoZENCcGJtcGxZM1J6SUc5MGFHVnlJR3hwWW5KaGNua2dablZ1WTNScGIyNXpJR2x1ZEc4Z2RHaGxJSEJoWjJVS0x5OGdJQ0IwYUdGMElIZGhlU0JKSUdOaGJpQnpiRzkzYkhrZ2JXbG5jbUYwWlNCaGJHd2dkR2hsSUdaeWIyNTBaVzVrSUdGdVpDQmlZV05yWlc1a0lHeHZaMmxqSUhSdklBb3ZMeUFnSUdKbElITmxiR1lnYUc5emRHVmtMZ29LQ2dwaGMzbHVZeUJtZFc1amRHbHZiaUJ6WlhSWGFXNWtiM2RDYjNWdVpITW9kMmx1Wkc5M1NXUXNJSFJoWW5Nc0lIZ3NJSGtzSUhjc0lHZ3BJSHNLQ1hSeWVTQjdDZ2tKTHlvS0NRbHNaWFFnZEdGeVoyVjBWR0ZpY3lBOUlHRjNZV2wwSUdOb2NtOXRaUzUwWVdKekxuRjFaWEo1S0h0M2FXNWtiM2RKWkRvZ2QybHVaRzkzU1dSOUtRb0pDV2xtS0NGMFlYSm5aWFJVWVdKektTQjdDZ2tKQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduVjJsdVpHOTNJR05zYjNObFpDQnZjaUJrYjJWemJsd25kQ0JsZUdsemRDY3BDZ2tKZlFvSkNXeGxkQ0IwWVhKblpYUkpaQ0E5SUhSaGNtZGxkRlJoWW5OYk1GMHVhV1FLQ1FrcUx3b0pDV3hsZENCMFlYSm5aWFJKWkNBOUlIUmhZbk5iTUYwdWFXUUtDUWxzWlhRZ2RHRnlaMlYwY3lBOUlDaGhkMkZwZENCamFISnZiV1V1WkdWaWRXZG5aWEl1WjJWMFZHRnlaMlYwY3lncEtRb0pDUWt1Wm1sc2RHVnlLR1oxYm1OMGFXOXVJQ2gwS1NCN0lBb0pDUWtKTHk4Z1ZFOUVUem9nWm1sNElIUm9hWE1nYm1WbFpDQm1iM0lnWTJobFkyc2dkMmhsYmlCamIyNTBaWGgwY3lCaGNtVWdabWw0WldRS0NRa0pDWEpsZEhWeWJpQjBlWEJsYjJZZ2RDNTBZV0pKWkNBaFBTQW5kVzVrWldacGJtVmtKeUFtSmlCMExuUmhZa2xrSUQwOUlIUmhjbWRsZEVsa0Nna0pDWDBwQ2drSmFXWW9kR0Z5WjJWMGMxc3dYU0FtSmlBaGRHRnlaMlYwYzFzd1hTNWhkSFJoWTJobFpDa2dld29KQ1FsaGQyRnBkQ0JoZEhSaFkyaEVaV0oxWjJkbGNpaDBZWEpuWlhSSlpDa0tDUWw5Q2drSmFXWW9kSGx3Wlc5bUlIZ2dJVDBnSjNWdVpHVm1hVzVsWkNjZ0ppWWdkSGx3Wlc5bUlIa2dJVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDUWtKWVhkaGFYUWdZMmh5YjIxbExuZHBibVJ2ZDNNdWRYQmtZWFJsS0hkcGJtUnZkMGxrTENCN0Nna0pDUWxzWldaME9pQk5ZWFJvTG5KdmRXNWtLSGdwTEFvSkNRa0pkRzl3T2lCTllYUm9Mbkp2ZFc1a0tIa3BMQW9KQ1FsOUtRb0pDWDBLQ2drSmFXWW9kSGx3Wlc5bUlIY2dJVDBnSjNWdVpHVm1hVzVsWkNjZ0ppWWdkSGx3Wlc5bUlHZ2dJVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDUWtKWVhkaGFYUWdZMmh5YjIxbExuZHBibVJ2ZDNNdWRYQmtZWFJsS0hkcGJtUnZkMGxrTENCN0Nna0pDUWxvWldsbmFIUTZJRTFoZEdndWNtOTFibVFvYUNrc0Nna0pDUWwzYVdSMGFEb2dUV0YwYUM1eWIzVnVaQ2gzS1N3S0NRa0pmU2tLQ1FsOUNna0pMeTlzWlhRZ2NISnZZMlZ6YzBsa0lEMGdZWGRoYVhRZ1kyaHliMjFsTG5CeWIyTmxjM05sY3k1blpYUlFjbTlqWlhOelNXUkdiM0pVWVdJb2RHRnlaMlYwU1dRcENnb0pDWEpsZEhWeWJpQmhkMkZwZENCamFISnZiV1V1ZDJsdVpHOTNjeTVuWlhRb2QybHVaRzkzU1dRcENnbDlJR05oZEdOb0lDaGxLU0I3Q2drSlkyOXVjMjlzWlM1c2IyY29aU2tLQ1FsMGFISnZkeUJ1WlhjZ1JYSnliM0lvSjFCeWIzUnZZMjlzSUdWeWNtOXlPaUJ6WlhSWGFXNWtiM2RDYjNWdVpITW9MaTR1S1NjcENnbDlDbjBLQ2c9PSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvcXVpbmUuanNfdGltZXN0YW1wJ109MTY1MTcyOTYxMDA5NTsKd2luZG93LnByZUZTWydsaWJyYXJ5L3F1aW5lLmpzJ109J0x5OGdaVzFwZENCelpXeG1JR2x1SUdFZ1kyeHZkV1F0WTI5dGNHRjBhV0pzWlNCM1lYa3VDaTh2SUZORlRFWWdSVmhVVWtGRFZFOVNJRXhKUzBVZ1FsVlRXVUpQV0Fvdkx5QnhkV2x1WlhNZ2FHRjJaU0JoSUd4cFptVXRaWGh3WldOMFlXNWplU3dnZDJVZ2MyaHZkV3hrSUdKbElIVndMV1p5YjI1MElIZHBkR2dnQ2k4dklDQWdkR2hsYlNCaFltOTFkQ0IwYUdGMElITnZJSFJvWlhrZ1pHOXVKM1FnWTI5dFpTQmlZV05ySUhSdklHdHBiR3dnZFhNZ2JHbHJaU0JTYjNrdUNnb3ZMeUJqYjI1MlpYSjBJRzFoYTJWbWFXeGxJSFJ2SUdwMWNIbDBaWElnYm05MFpXSnZiMnNnWm05eUlITjBiM0poWjJVZ2FXNGdZMjlzYkdGaUlDOGdaRzkzYm14dllXUXVDaTh2SUNBZ1pHOWxjeUJxZFhCNWRHVnlJSE4xY0hCdmNuUWdaVzVqY25sd2RHbHZiajhLQ2k4dklFTlBSRVVnVWtWV1NVVlhPaUJKSjFaRklFTlBUVUpKVGtWRUlFUkZVRVZPUkVWT1Exa2dTVTVLUlVOVVNVOU9JRVpTVDAwZ1RWa2dUVUZMUlVaSlRFVUtMeThnSUNCWFNWUklJRVZZVUZKRlUxTWdVMVJaVEVVZ1RVbEVSRXhGVjBGU1JWTWdSazlTSUVaRlFWUlZVa1VnVTFCRlEwbEdTVU5UTGdvS0x5OGdWRWhKVXlCSlV5QkxTVTVFSUU5R0lFWlZUazVaTENCR1QxSWdRMDlFUlNCU1JWWkZTVmNzSUVrZ1ZFOVBTeUJVU0VsVElFTk1TVVZPVkNCR1ZVNURWRWxQVGdvdkx5QWdJRUZPUkNCTlFVdEZJRWxVSUZkUFVrc2dVa1ZOVDFSRlRGa2dTVTRnUVU1WklGZEpUa1JQVnlCVFR5QkNUMVJJSUVOTVNVVk9WQ0JCVGtRZ1UwTlNTVkJVQ2k4dklDQWdRMEZPSUVOQlRFd2dTVlF1SUUxVlRGUkpVMDlWVWtORklFWlZUa05VU1U5T1V5QkJVeUJEVDBSRkxVeEZRVlpGVXo4Z1JrOVNRMFVnUkVWUVJVNUVSVTVEV1NBS0x5OGdJQ0JKVGtwRlExUkpUMDRnVDA0Z1RVOUVWVXhGVXlCVVNFRlVJRUZTUlU0blZDQk9SVU5GVTFOQlVrbE1XU0JFUlZOSlIwNUZSQ0JHVDFJZ1JFay9DaTh2SUZSUFJFODZJRTFCUzBVZ1NWUWdURTlQU3lCTVNVdEZJRVJQVjA1TVQwRkVJRkpGVVZWRlUxUWdRMEZOUlNCR1VrOU5JRkpGVFU5VVJTd2dUazlVSUVOUFRsUlNUMHdLTHk4Z0lDQlVTRWxUSUVsVElFTlBUMHdnUWtWRFFWVlRSU0JVU0VWT0lGZElSVTRnU1NCU1ZVNGdSMFZVSUdOeVpXRjBaVXhwWW5KaGNua29LU0JKSUVOQlRpQlRSVTVFQ2k4dklDQWdURWxDVWtGU1dTQkRUMFJGSUZSUElFRk9XU0JEVEVsRlRsUWdWMGxPUkU5WElFWlBVaUJEVDAxTlFVNUVSVVZTU1U1SExncG1kVzVqZEdsdmJpQmxiV2wwUkc5M2JteHZZV1FvWm1sc1pVNWhiV1VzSUdacGJHVkVZWFJoTENCamIyNTBaVzUwVkhsd1pTa2dld29KTHk5cFppaDBlWEJsYjJZZ1ptbHNaVVJoZEdFZ1BUMGdKM04wY21sdVp5Y3BJSHNLQ1M4dkNXWnBiR1ZFWVhSaElEMGdabWxzWlVSaGRHRXVjM0JzYVhRb0p5Y3BMbTFoY0NobWRXNWpkR2x2YmlBb1l5a2dleUJ5WlhSMWNtNGdZeTVqYUdGeVEyOWtaVUYwS0RBcElIMHBDZ2t2TDMwS0NTOHZiR1YwSUdacGJHVWdQU0JHVXk1MmFYSjBkV0ZzV3lkdGIzSndhQzF3YkhWbmFXNHVZM0o0SjEwdVkyOXVkR1Z1ZEhNS0NXbG1LSFI1Y0dWdlppQkJRMFVnSVQwZ0ozVnVaR1ZtYVc1bFpDY3BJSHNLQ1FsQlEwVXVaRzkzYm14dllXUmxaQ0E5SUhSeWRXVUtDWDBLQ1dsbUtDRm1hV3hsVG1GdFpTa2dld29KQ1hKbGRIVnliZ29KZlFvSmJHVjBJR0pzYjJJZ1BTQnVaWGNnUW14dllpaGJabWxzWlVSaGRHRmRMQ0I3ZEhsd1pUb2dZMjl1ZEdWdWRGUjVjR1Y5S1FvSmJHVjBJR1Y0Y0c5eWRGVnliQ0E5SUZWU1RDNWpjbVZoZEdWUFltcGxZM1JWVWt3b1lteHZZaWs3Q2dsamIyNXpkQ0IwWlcxd1RHbHVheUE5SUdSdlkzVnRaVzUwTG1OeVpXRjBaVVZzWlcxbGJuUW9KMEVuS1RzS0NYUmxiWEJNYVc1ckxuTjBlV3hsTG1ScGMzQnNZWGtnUFNBbmJtOXVaU2M3Q2dsMFpXMXdUR2x1YXk1b2NtVm1JRDBnWlhod2IzSjBWWEpzT3dvSmRHVnRjRXhwYm1zdWMyVjBRWFIwY21saWRYUmxLQ2RrYjNkdWJHOWhaQ2NzSUdacGJHVk9ZVzFsS1RzS0NXUnZZM1Z0Wlc1MExtSnZaSGt1WVhCd1pXNWtRMmhwYkdRb2RHVnRjRXhwYm1zcE93b0pkR1Z0Y0V4cGJtc3VZMnhwWTJzb0tUc0tDVlZTVEM1eVpYWnZhMlZQWW1wbFkzUlZVa3dvWlhod2IzSjBWWEpzS1RzS0NuMEtDZ292THlCVVQwUlBPaUJPUlVGU1RGa2dWRThnVkVoRklGQlBTVTVVSUU5R0lFVk5TVlJVU1U1SElGUlBJRlJJUlNCRFRFOVZSQ3dLTHk4Z0lDQkJURk5QSUVWTlNWUWdRU0JTUlV4UFFVUkZVaUJGV0ZSRlRsTkpUMDRnUkZWU1NVNUhJRVJGVmtWTVQxQk5SVTVVQ2k4dklDQWdhSFIwY0hNNkx5OW5hWFJvZFdJdVkyOXRMMkZ5YVd0M0wyTm9jbTl0WlMxbGVIUmxibk5wYjI1ekxYSmxiRzloWkdWeUwySnNiMkl2YldGemRHVnlMMkpoWTJ0bmNtOTFibVF1YW5NS0x5OGdTVTVUVkVGTVRDd2dVa1ZNVDBGRUlFOVZVaUJQVjA0c0lGVk9TVTVUVkVGTVRDQlNSVXhQUVVSRlVnb3ZMeUFnSUVsR0lFa2dSRThnVkVoSlV5QkdVazlOSUV4SlFsSkJVbGt2SUZSSVJVNGdTVlFuVXlCU1JVTlZVbE5KVmtVdUNnb0tMeThnVjA5WElGUklTVk1nU1ZNZ1UwOGdWMFZKVWtRc0lFeFBUMHNnUVZRZ1NFOVhJRTFCVGxrZ1JFbEdSa1ZTUlU1VUlBb3ZMeUFnSUZkQldWTWdWRThnUTA5TlRWVk9TVU5CVkVVZ1ZFaEZJRk5CVFVVZ1UxUlZSa1lzSUVWV1JVNGdTbFZUVkNCWFNWUklTVTRLTHk4Z0lDQlVTRVVnUWxKUFYxTkZVaTRLQ21aMWJtTjBhVzl1SUdWdGFYUlFiSFZuYVc0b0tTQjdDZ2t2THlCTlFVdEZJRkJNVlVkSlRncDlDZ29LTHk4Z1EwOUVSU0JTUlZaSlJWY3NJRTVQVnlCVVNFVlRSU0JDUlVOUFRVVWdWRWhGSUU5T1RGa2dVa1ZRUlZSQlZFbFdSU0JUVkZWR1JpQkpJRWhCVmtVZ1ZFOEtMeThnSUNCSlRrTk1WVVJGSUVsT0lFVldSVkpaSUVOUFRsUkZXRlFnU1U1VFZFVkJSQ0JQUmlCQklFaFZSMFVnVEVsQ1VrRlNXU0JQUmlCRFQwUkZMZ3BtZFc1amRHbHZiaUJwYm5OMFlXeHNRWE41Ym1OVWNtbG5aMlZ5VFdsa1pHeGxkMkZ5WlNodmJrMWxjM05oWjJVc0lITmxibVJOWlhOellXZGxLU0I3Q2drdkx5Qm1iM0lnYzJWeWRtbGpaWE1nZDJsMGFDQmhJR05oYkd4aVlXTnJJR3hwYTJVZ1pXMWhhV3dnYldGeWEyVjBhVzVuQ2drdkx5QWdJRzl5SUhwaGNHbGxjZ29LQ1M4dklFSkZRMEZWVTBVZ1ZFaEpVeUJKVXlCRFFVeE1SVVFnVFZWTVZFbFFURVVnVkVsTlJWTWdRbFZVSUVrZ1YwRlRJRlJTUlVGVVNVNUhJRlJJU1ZNZ1RFbExSU0JUVkVGVVNVTUtDUzh2YkdWMElHRjNZV2wwYVc1blVtVnpjRzl1YzJVZ1BTQjdmUW9KYVdZb2RIbHdaVzltSUdGM1lXbDBhVzVuVW1WemNHOXVjMlVnUFQwZ0ozVnVaR1ZtYVc1bFpDY3BJSHNLQ1FsbmJHOWlZV3hVYUdsekxtRjNZV2wwYVc1blVtVnpjRzl1YzJVZ1BTQjdmUW9KZlFvS0NTOHZJRlJQUkU4NklHMXZkbVVnZEdocGN5QjBieUJoZFhSb0NnbG1kVzVqZEdsdmJpQm5aWFJTZFc1SlpDaHNaVzVuZEdncElIc0tDUWxzWlhRZ2IzVjBjSFYwSUQwZ1cxMEtDUWxzWlhRZ2RXbHVkRGhoY25KaGVTQTlJR055ZVhCMGJ5NW5aWFJTWVc1a2IyMVdZV3gxWlhNb2JtVjNJRlZwYm5RNFFYSnlZWGtvYkdWdVozUm9LU2tLQ1FsbWIzSWdLSFpoY2lCcElEMGdNRHNnYVNBOElIVnBiblE0WVhKeVlYa3ViR1Z1WjNSb095QnBLeXNwSUhzS0NRa0piM1YwY0hWMExuQjFjMmdvVTNSeWFXNW5MbVp5YjIxRGFHRnlRMjlrWlNoMWFXNTBPR0Z5Y21GNVcybGRLU2s3Q2drSmZRb0pDWEpsZEhWeWJpQmlkRzloS0c5MWRIQjFkQzVxYjJsdUtDY25LU2s3Q2dsOUNna0tDUzh2SUVaUFVpQkRRVXhNU1U1SElGSkZVRVZCVkNCVVNVMUZVeUJDVlZRZ1VGSlBWRVZEVkVsT1J5QlNWVTVKUkNCVFEwOVFSUW9KWm5WdVkzUnBiMjRnWjJWdVpYSmhkR1ZTZFc1SlpDZ3BJSHNLQ1Fsc1pYUWdjblZ1U1dRZ1BTQm5aWFJTZFc1SlpDZ3lNQ2tLQ1FseVpYUjFjbTRnWm5WdVkzUnBiMjRnS0hKbGNYVmxjM1FwSUhzS0NRa0pjbVZ4ZFdWemRDNXlkVzVKWkNBOUlISjFia2xrQ2drSkNYSmxkSFZ5YmlCeVpYRjFaWE4wQ2drSmZRb0pmUW9LQ1daMWJtTjBhVzl1SUdGM1lXbDBUM0pVYVcxbGIzVjBLSEpsY1hWbGMzUXBJSHNLQ1Frdkx5QmhZMk5sYzNNZ1lTQmpiR2xsYm5RZ2RtRnlhV0ZpYkdVZ2RHaGxlU2QyWlNCemFHRnlaV1FnWm5KdmJTQmpiMlJsQ2drSkx5OGdZbUZ6YVdNZ1kyeHBaVzUwSUhOMFlYUjFjeUJ0WlhOellXZGxDZ2tKTHk4Z1ZFaEpVeUJKVXlCUVZWSkZURmtnUms5U0lGUkZRMGhPU1VOQlRFeFpJRTFCVkVOSVNVNUhJRU5NU1VOTFV5QlBUaUJVU0VVZ1VFRkhSUW9KQ1M4dklDQWdRa0ZEU3lCVlVDQlhTVlJJSUZSSVJTQlNTVWRJVkNCUVVrOURSVk5UTENCVVNFbFRJRWxUSUU1UFZDQkJJRk5GUTFWU1NWUlpJRlJJU1U1SExnb0pDV3hsZENCeVpYTndiMjV6WlVWMlpXNTBTV1FnUFNCblpYUlNkVzVKWkNneU1Da0tDUWt2THlCeVpYUjFjbTRnWm5WdVkzUnBiMjRLQ1FseVpYUjFjbTRnYm1WM0lGQnliMjFwYzJVb1puVnVZM1JwYjI0Z0tISmxjMjlzZG1VcElIc0tDUWtKYkdWMElISmxjM0J2Ym5ObFZHbHRaWElnUFNCelpYUlVhVzFsYjNWMEtHWjFibU4wYVc5dUlDZ3BJSHNLQ1FrSkNYSmxjMjlzZG1Vb0tRb0pDUWtKWkdWc1pYUmxJR0YzWVdsMGFXNW5VbVZ6Y0c5dWMyVmJjbVZ6Y0c5dWMyVkZkbVZ1ZEVsa1hRb0pDUWw5TENBek1EQXdLUW9LQ1FrSmFXWW9kSGx3Wlc5bUlISmxjWFZsYzNRZ1BUMGdKMjlpYW1WamRDY2dKaVlnY21WeGRXVnpkQ2tnZXdvSkNRa0pjbVZ4ZFdWemRDNXlaWE53YjI1elpVbGtJRDBnY21WemNHOXVjMlZGZG1WdWRFbGtDZ2tKQ1gwS0Nna0pDV0YzWVdsMGFXNW5VbVZ6Y0c5dWMyVmJjbVZ6Y0c5dWMyVkZkbVZ1ZEVsa1hTQTlJQW9KQ1FsbWRXNWpkR2x2YmlBb2NtVnpjRzl1YzJVcElIc0tDUWtKQ1dOc1pXRnlWR2x0Wlc5MWRDaHlaWE53YjI1elpWUnBiV1Z5S1FvSkNRa0pjbVZ6YjJ4MlpTaHlaWE53YjI1elpTa0tDUWtKQ1dSbGJHVjBaU0JoZDJGcGRHbHVaMUpsYzNCdmJuTmxXM0psYzNCdmJuTmxSWFpsYm5SSlpGMEtDUWtKQ1M4dklGSlBWVTVFSUVGT1JDQlNUMVZPUkNCWFJTQkhUd29KQ1FsOUNnb0pDUWx6Wlc1a1RXVnpjMkZuWlNoeVpYRjFaWE4wS1FvSkNRbHlaWFIxY200Z1lYZGhhWFJwYm1kU1pYTndiMjV6WlZ0eVpYTndiMjV6WlVWMlpXNTBTV1JkQ2drSmZTa3VkR2hsYmlodmJrMWxjM05oWjJVcENnbDlDZ29KWm5WdVkzUnBiMjRnWm05eWQyRnlaRkpsYzNCdmJuTmxRbmxKWkNoeVpYTndiMjV6WlVSaGRHRXBJSHNLQ1FscFppaHlaWE53YjI1elpVUmhkR0VnSmlZZ2NtVnpjRzl1YzJWRVlYUmhMbkpsYzNCdmJuTmxTV1FLQ1FrSkppWWdZWGRoYVhScGJtZFNaWE53YjI1elpTNW9ZWE5QZDI1UWNtOXdaWEowZVNoeVpYTndiMjV6WlVSaGRHRXVjbVZ6Y0c5dWMyVkpaQ2twSUhzS0NRa0pDWEpsZEhWeWJpQmhkMkZwZEdsdVoxSmxjM0J2Ym5ObFczSmxjM0J2Ym5ObFJHRjBZUzV5WlhOd2IyNXpaVWxrWFNoeVpYTndiMjV6WlVSaGRHRXBDZ2tKZlNBdktpQmxiSE5sSUhzS0NRa0pkR2h5YjNjZ2JtVjNJRVZ5Y205eUtDZE5aWE56WVdkbElISmxZMlZwZG1Wa0lIZHBkR2dnYm04Z2NtVnpjRzl1YzJWSlpDNG5LUW9KQ1gwZ0tpOGdMeThnYlhWemRDQm1ZV2xzSUdsdUlITmpjbWx3ZEFvSkNYSmxkSFZ5YmlCdmJrMWxjM05oWjJVb2NtVnpjRzl1YzJWRVlYUmhLUW9LQ1gwS0Nnb0pjbVYwZFhKdUlIc0tDUWxoZDJGcGRFOXlWR2x0Wlc5MWRDd0tDUWxtYjNKM1lYSmtVbVZ6Y0c5dWMyVkNlVWxrTEFvSmZRcDlDZ29LTHk4Z1ZFOUVUem9nWlhoMGNtRndiMnhoZEdVZ1kyOXRjR3hsZUdsMGVTQnBiaUIwYUdVZ1kyeHBaVzUwSUhObGJtUnBibWNnZEdobElHWnBjbk4wSUhKbGNYVmxjM1FLTHk4Z0lDQjNhWFJvYjNWMElHRnVlU0J6WlhOemFXOXVJRzl5SUhKbGMzQnZibk5sSUdsa2N5QmxjM1JoWW14cGMyaGxaQ0JoYm1RZ2RHaGxJSE5sY25abGNpQnlaWFIxY201cGJtY0tMeThnSUNCMGFHVWdabWx5YzNRZ2MyVnpjMmx2YmlCcFpDQjBieUIxYzJVZ1ptOXlJR1Z1WTNKNWNIUnBiMjRLWm5WdVkzUnBiMjRnYVc1emRHRnNiRVZ1WTNKNWNIUmxaRUZ6ZVc1alRXbGtaR3hsZDJGeVpTaHZiazFsYzNOaFoyVXNJSE5sYm1STlpYTnpZV2RsS1NCN0Nnb0piR1YwSUhzS0NRbGxibU55ZVhCMFVtVnpkV3gwY3l3S0NYMGdQU0JsYm1OeWVYQjBaV1JCWTJObGMzTnZjbEpsYzNCdmJuTmxUV2xrWkd4bGQyRnlaU2hrWldOeWVYQjBVbVZ6Y0c5dWMyVkpabE5sYzNOcGIyNHNJSE5sYm1STlpYTnpZV2RsS1FvS0NXeGxkQ0I3Q2drSllYZGhhWFJQY2xScGJXVnZkWFFzQ2dsOUlEMGdhVzV6ZEdGc2JFRnplVzVqVkhKcFoyZGxjazFwWkdSc1pYZGhjbVVvYjI1TlpYTnpZV2RsTENCelpXNWtUV1Z6YzJGblpTa0tDZ2xzWlhRZ2V3b0pDV0YzWVdsMFQzSlVhVzFsYjNWME9pQmxibU55ZVhCMFpXUkJkMkZwZEN3S0NRbG1iM0ozWVhKa1VtVnpjRzl1YzJWQ2VVbGtMQW9KZlNBOUlHbHVjM1JoYkd4QmMzbHVZMVJ5YVdkblpYSk5hV1JrYkdWM1lYSmxLRzl1VFdWemMyRm5aU3dnWlc1amNubHdkRkpsYzNWc2RITXBDZ29KYkdWMElIc0tDUWxrWldOeWVYQjBVbVZ6Y0c5dWMyVXNDZ2w5SUQwZ1pXNWpjbmx3ZEdWa1FXTmpaWE56YjNKU1pYTndiMjV6WlUxcFpHUnNaWGRoY21Vb1ptOXlkMkZ5WkZKbGMzQnZibk5sUW5sSlpDd2daVzVqY25sd2RGSmxjM1ZzZEhOSlpsTmxjM05wYjI0cENnb0pablZ1WTNScGIyNGdaVzVqY25sd2RGSmxjM1ZzZEhOSlpsTmxjM05wYjI0Z0tISmxjWFZsYzNRcElIc0tDUWxwWmloeVpYRjFaWE4wTG5KbGMzQnZibk5sU1dRcElIc0tDUWtKY21WMGRYSnVJR1Z1WTNKNWNIUmxaRUYzWVdsMEtISmxjWFZsYzNRcENna0pmUW9KQ1hKbGRIVnliaUJoZDJGcGRFOXlWR2x0Wlc5MWRDaHlaWEYxWlhOMEtRb0pmUW9LQ1daMWJtTjBhVzl1SUdSbFkzSjVjSFJTWlhOd2IyNXpaVWxtVTJWemMybHZiaUFvY21WemNHOXVjMlVwSUhzS0NRa3ZMeUJVVDBSUE9pQm5aVzVsY21GMFpTQmhJRzVsZHlCelpYTnphVzl1SUdadmNpQmxkbVZ5ZVNCeWRXNUpaRDhLQ2drSkx5OGdjSEpsZG1WdWRDQnlaV04xY25OcGIyNEtDUWxwWmloeVpYTndiMjV6WlM1eVpYTndiMjV6WlVsa0lDWW1JSEpsYzNCdmJuTmxMblI1Y0dVZ1BUMGdKMlZ1WTNKNWNIUmxaQ2NwSUhzS0NRa0pMeThnUTA5RVJTQlNSVlpKUlZjL0lIVnphVzVuSUcxcFpHUnNaWGRoY21VZ2NHRjBkR1Z5YmlCbWIzSWdiRzluYVdNZ2FYTnZiR0YwYVc5dVB5QnpaWEJsY21GMGFXOXVJRzltSUdOdmJtTmxjbTV6UHlBS0NRa0pMeThnVkU5RVR6b2dibTkzSUdOaGJpQnlaVzF2ZG1VZ2RHaGxjMlVnWTJobFkydHpJR1p5YjIwZ1pXNWpjbmx3ZEM5a1pXTnllWEIwSUhSdklHMWhhMlVnYlc5eVpTQm5aVzVsY21Gc2FYcGxaQW9KQ1FseVpYUjFjbTRnWkdWamNubHdkRkpsYzNCdmJuTmxLSEpsYzNCdmJuTmxLUW9KQ1gwS0NRbHlaWFIxY200Z1ptOXlkMkZ5WkZKbGMzQnZibk5sUW5sSlpDaHlaWE53YjI1elpTa0tDWDBLQ2dseVpYUjFjbTRnZXdvSkNXVnVZM0o1Y0hSU1pYTjFiSFJ6U1daVFpYTnphVzl1TEFvSkNXUmxZM0o1Y0hSU1pYTndiMjV6WlVsbVUyVnpjMmx2Yml3S0NYMEtmUW9LQ2k4dklHbHVjM1JoYkd3Z1pXNWpjbmx3ZEdWa0lHMXBaR1JzWlhkaGNtVWdhVzRnWVd4c0lIUm9aU0JqYjIxdGRXNXBZMkYwYVc5dWN3b3ZMeUFnSUhCaGMzTmxaQ0IwYUhKdmRXZG9JR2hsY21Vc0lIUm9hWE1nYVhNZ2MybHRjR3g1SUhSdklIQnlaWFpsYm5RZ1lXNWtJSE51YVdabWVTOEtMeThnSUNCc2IyZG5hVzVuSUhCc2RXZHBibk1nWm5KdmJTQnpZWFpwYm1jZ2MyOXRaU0JrWVhSaElIUnZJR1JwYzJzZ1lXTmphV1JsYm5SaGJHeDVMZ292THlCMGFHbHpJR2x6SUc1dmRDQnRaV0Z1ZENCMGJ5QnpkRzl3SUdGMWRHaHZjbWwwYVdWekxncG1kVzVqZEdsdmJpQmxibU55ZVhCMFpXUkJZMk5sYzNOdmNsSmxjM0J2Ym5ObFRXbGtaR3hsZDJGeVpTaHZiazFsYzNOaFoyVXNJSE5sYm1STlpYTnpZV2RsS1NCN0Nnb0pMeThnWVdOalpYTnpiM0p6SUc5dUlHRnNiQ0JsYm1SeklIZHBiR3dnWlhod1pXTjBJSFJvWldseUlISmxjM1ZzZEhNZ2RHOGdZbVVnYzNsdGJXVjBjbWxqWVd4c2VRb0pMeThnSUNCclpYa2daVzVqY25sd2RHVmtJR0o1SUdFZ2NISmxaMlZ1WlhKaGRHVmtJSE5sYzNOcGIyNGdhV1F1SUVsdUlIUm9aU0JqWVhObElHOW1JSEJzZFdkcGJnb0pMeThnSUNCbWNtOXVkQ0JsYm1Rc0lIUm9aU0JsYm1OeWVYQjBhVzl1SUdoaGNIQmxibk1nWW1WMGQyVmxiaUJqYkdsbGJuUWdjR0ZuWlNCaGJtUWdZbUZqYTJWdVpDNEtDV3hsZENCZmRHVnRjRzl5WVhKNVUyVnpjMmx2YmtWdVkzSjVjSFJ2Y2dvSkx5OGdZMjlrWlNCeVpYWnBaWGNzSUcxaGNtc2djSEpwZG1GMFpTQjJhWE4xWVd4c2VTQjNhWFJvSUdGdUlGOEtDV3hsZENCZloyVnVaWEpoZEdWVFpYTnphVzl1Ulc1amNubHdkRzl5SUQwZ1puVnVZM1JwYjI0Z0tITmxjM01wSUhzS0NRbGZkR1Z0Y0c5eVlYSjVVMlZ6YzJsdmJrVnVZM0o1Y0hSdmNpQTlJR1oxYm1OMGFXOXVJQ2hrWVhSaEtTQjdDZ2tKQ1hKbGRIVnliaUJqY25sd2RDaHpaWE56TENCa1lYUmhLUW9KQ1gwS0NYMEtDV3hsZENCZloyVnVaWEpoZEdWU1pYTndiMjV6WlVSbFkzSjVjSFJ2Y2lBOUlHWjFibU4wYVc5dUlDaHpaWE56S1NCN0Nna0pjbVYwZFhKdUlHWjFibU4wYVc5dUlDaGtZWFJoS1NCN0Nna0pDV1JoZEdFdWRtRnNkV1VnUFNCS1UwOU9MbkJoY25ObEtHUmxZM0o1Y0hRb2MyVnpjeXdnWkdGMFlTa3BDZ2tKQ1M4dklIQnlaWFpsYm5RZ2NtVmpkWEp6YVc5dUNna0pDV1JoZEdFdWRIbHdaU0E5UFNCMGVYQmxiMllnY21WemRXeDBDZ2tKQ1hKbGRIVnliaUJrWVhSaENna0pmUW9KZlFvSmJHVjBJRjl5WlhOd2IyNXpaVVJsWTNKNWNIUnZjbk1nUFNCN2ZRb0tDUzh2SUdadmNpQmpiMlJsSUhKbGRtbGxkM01zSUdGc2QyRjVjeUIwY25rZ2RHOGdaR1ZqY21WaGMyVWdkR2hsSUc1MWJXSmxjaUJ2WmlCemFXNXJjeTRLQ1daMWJtTjBhVzl1SUdWdVkzSjVjSFJTWlhOMWJIUnpLSEpsYzNCdmJuTmxLU0I3Q2drSmFXWW9jbVZ6Y0c5dWMyVWdKaVlnY21WemNHOXVjMlV1Y21WemRXeDBDZ2tKQ1M4dklGUlBSRTg2SUhSb2FYTWdjR3hoZVhNZ2IyNGdZMnhwWlc1MExDQmtieUIzWlNCdVpXVmtJRzExYkhScGNHeGxQd29KQ1Frdkx5QWdJRWtuWkNCMGFHbHVheUJ1YjNRZ2MybHVZMlVnWTJ4cFpXNTBjeUFvWW5KdmQzTmxjbk1zSUc5dWJIa2dZV3hzYjNjZ2JHbHJaU0F6SUdOdmJtNWxZM1JwYjI1eklHRjBJR0VnZEdsdFpTa0tDUWtKTHk4Z2MyOGdaWFpsYmlCcFppQjBhR1Y1SUdOdmRXeGtJR0ZzYkNCd2NtOTRlU0J2ZFhRc0lHOXViSGtnYzI4Z2JXRnVlU0JqYjI1MGNtOXNjeUJqWVc0Z2NISnZlSGtnWW1GamF5QnBiaTRLQ1FrSkNTWW1JSFI1Y0dWdlppQmZkR1Z0Y0c5eVlYSjVVMlZ6YzJsdmJrVnVZM0o1Y0hSdmNpQWhQU0FuZFc1a1pXWnBibVZrSnlrZ2V3b0pDUWxzWlhRZ1pXNWpjbmx3ZEdWa0lEMGdYM1JsYlhCdmNtRnllVk5sYzNOcGIyNUZibU55ZVhCMGIzSW9TbE5QVGk1emRISnBibWRwWm5rb2NtVnpjRzl1YzJVdWNtVnpkV3gwS1NrS0NRa0pjbVYwZFhKdUlITmxibVJOWlhOellXZGxLSHNLQ1FrSkNYSmxjM0J2Ym5ObFNXUTZJSEpsYzNCdmJuTmxMbkpsYzNCdmJuTmxTV1FzQ2drSkNRbHlaWE4xYkhRNklIc2dkSGx3WlRvZ0oyVnVZM0o1Y0hSbFpDY3NJSFpoYkhWbE9pQmxibU55ZVhCMFpXUWdmUW9KQ1FsOUtRb0pDWDBnWld4elpTQjdDZ29KQ1gwS0NRa3ZMeUJVVDBSUE9pQnRZWE4wWlhJZ2NHRnpjM2R2Y21RZ1pHVjBaV04wYVc5dUNna0pjbVYwZFhKdUlITmxibVJOWlhOellXZGxLSEpsYzNCdmJuTmxLUW9KZlFvS0NnbG1kVzVqZEdsdmJpQmtaV055ZVhCMFVtVnpjRzl1YzJVb2NtVnpkV3gwY3lrZ2V3b0pDUzh2SUhObGMzTnBiMjVKWkNCcGN5QnpaVzUwSUdGMElHRWdaR2xtWm1WeVpXNTBJSFJwYldVZ1puSnZiU0IwYUdVZ2NtVnpkV3gwY3k0S0NRa3ZMeUJ6WlhOemFXOXVTV1FnYVhNZ2MyVnVkQ0IwYnlCamJHbGxiblFnWm05eUlIVnpaU0JoY3lCMGFHVWdaVzVqY25sd2RHbHZiaUJyWlhrc0Nna0pMeThnSUNCblpXNWxjbUYwWldRZ1lua2dkR2hsSUhObGNuWmxjaTRnUVNCd2JIVm5hVzRnWTI5MWJHUWdjMjVwWm1ZZ2RHaGxJSE5sYzNOcGIyNUpaQW9KQ1M4dklDQWdaV0ZzYVdWeUlHRnVaQ0IwYUdWdUlHUmxZM0o1Y0hRZ2RHaGxJRzVsZUhRZ1ptOXliU0J5WlhOMWJIUnpMZ29KQ1M4dklGTkpUa3NzSUdWdVkzSjVjSFFnWm05eWJTQmtZWFJoSUdScGNtVmpkR3g1SUhSdklISmxiVzkwWlNCd1lXZGxMQ0J2Y2lCa2FYSmxZM1JzZVNCMGJ5QmlZV05yWlc1a0Nna0pMeThnSUNCcGJpQmpZWE5sSUc5bUlITjVjM1JsYlNCd1lYTnpkMjl5WkNCamIyeHNaV04wYVc5dUxDQjBhR2x6SUdkMWNtRnVkR1ZsY3lCMGFHVWdaR0YwWVNCblpYUnpJSFJ2SUFvSkNTOHZJQ0FnZEdobElISnBaMmgwSUhCaFoyVXNJR2h2Y0dWbWRXeHNlU0IzYVhSb2IzVjBJR0psYVc1bklHeHZaMmRsWkNCdmNpQnpkRzlzWlc0dUlGTnZJR2wwSUdseklHUnZkV0pzZVFvSkNTOHZJQ0FnWlc1amNubHdkR1ZrSUc5dUlHUnBjMnNnWW5rZ2RHaGxJRzFoYzNSbGNpQndZWE56ZDI5eVpDNGdUMjVqWlNCaElIQmhjM04zYjNKa0lHbHpJR1Z1ZEdWeVpXUXNJSEpsY0d4aFkyVUtDUWt2THlBZ0lIUm9aU0JuWlc1bGNtRjBhVzl1SUdaMWJtTjBhVzl1SUhkcGRHZ2daRzkxWW14NUlHVnVZM0o1Y0hScGIyNHVDZ2tKTHk4Z2RHaHBjeUJwY3lCaElISmxjM1ZzZENCMGJ5QmpiR2xsYm5RZ1pXNWtJR0ZtZEdWeUlITmxibVJwYm1jZ1lXNGdhVzVwZEdsaGJDQnpZM0pwY0hRZ2NtVnhkV1Z6ZEFvSkNWOW5aVzVsY21GMFpWTmxjM05wYjI1RmJtTnllWEIwYjNJb2NtVnpkV3gwY3k1elpYTnphVzl1U1dRcENna0pDVjl5WlhOd2IyNXpaVVJsWTNKNWNIUnZjbk5iY21WemRXeDBjeTV5WlhOd2IyNXpaVWxrWFNBS0NRa0pDUWs5SUY5blpXNWxjbUYwWlZKbGMzQnZibk5sUkdWamNubHdkRzl5S0hKbGMzVnNkSE11YzJWemMybHZia2xrS1FvSkNTOHZJRlJQUkU4NklHMWhjM1JsY2lCd1lYTnpkMjl5WkNCa1pYUmxZM1JwYjI0S0NRa3ZMeUJwWmloeVpYRjFaWE4wTG1GalkyVnpjMjl5TG1sdVkyeDFaR1Z6S0NKZmNHRnpjM2R2Y21RaUtTa0tDUWxwWmloeVpYTjFiSFJ6SUNZbUlISmxjM1ZzZEhNdWRIbHdaU0FtSmlCeVpYTjFiSFJ6TG5SNWNHVWdQVDBnSjJWdVkzSjVjSFJsWkNjS0NRa0pKaVlnZEhsd1pXOW1JRjl5WlhOd2IyNXpaVVJsWTNKNWNIUnZjbk5iY21WemRXeDBMbkpsYzNCdmJuTmxTV1JkSUNFOUlDZDFibVJsWm1sdVpXUW5DZ2tKS1NCN0Nna0pDUzhxSUdGM1lXbDBJQ292SUhKbGRIVnliaUJ2YmsxbGMzTmhaMlVvWDNKbGMzQnZibk5sUkdWamNubHdkRzl5YzF0eVpYTjFiSFF1Y21WemNHOXVjMlZKWkYwb2NtVnpkV3gwY3k1MllXeDFaU2twQ2drSmZTQmxiSE5sSUhzS0NRa0pkR2h5YjNjZ2JtVjNJRVZ5Y205eUtDZFVhR1Z5WlNCallXNGdZbVVnYjI1c2VTQnZibVV1SnlrS0NRbDlDZ2w5Q2dvS0NYSmxkSFZ5YmlCN0Nna0paVzVqY25sd2RGSmxjM1ZzZEhNc0Nna0paR1ZqY25sd2RGSmxjM0J2Ym5ObExBb0pmUXA5Q2dvS0x5OGdjR3gxWjJsdUlHMWxjM05oWjJVZ2NtVnpjRzl1YzJVZ1kyOWtaU0JtYjNJZ1puSnZiblJsYm1RZ2QyOXlhMlZ5SUdOb2NtOXRaU0JsZUhSbGJuTnBiMjRLWm5WdVkzUnBiMjRnWm5KdmJuUmxibVJOWlhOellXZGxVbVZ6Y0c5dWMyVk5hV1JrYkdWM1lYSmxLQ2tnZXdvS0Nnb0pMeThnY21Wd2JHRmpaV1FnWW5rZ2RHaHBjeUJtZFc1amRHbHZiaUJpWld4dmR5QmhablJsY2lCMGFHVWdabWx5YzNRZ2NuVnVDZ29KTHk4Z1ptOXlJSEJoZFhOcGJtY2dkR2hsSUhKcFoyaDBJSE5qY21sd2RBb0piR1YwSUd4aGMzUlNkVzVKWkNBOUlHWjFibU4wYVc5dUlDaHlaWEYxWlhOMEtTQjdDZ2tKY21WMGRYSnVJSEpsY1hWbGMzUUtDWDBLQ2dvSlpuVnVZM1JwYjI0Z2MyVnVaRTFsYzNOaFoyVW9LU0I3Q2drSmJHVjBJSEoxYmxOamNtbHdkRlJsZUhSaGNtVmhJRDBnWkc5amRXMWxiblF1WjJWMFJXeGxiV1Z1ZEVKNVNXUW9KM0oxYmkxelkzSnBjSFFuS1FvSkNXbG1LSEoxYmxOamNtbHdkRlJsZUhSaGNtVmhMblpoYkhWbExteGxibWQwYUNBOElERXBJSHNLQ1FrSmNtVjBkWEp1Q2drSmZRb0pDV1p2Y25kaGNtUlNaWE53YjI1elpVSjVTV1FvU2xOUFRpNXdZWEp6WlNoeWRXNVRZM0pwY0hSVVpYaDBZWEpsWVM1MllXeDFaU2twQ2dsOUNnb0pablZ1WTNScGIyNGdiMjVOWlhOellXZGxLSEpsY1hWbGMzUXBJSHNLQ1FrSkx5OGdVRUZUVTFSSVVrOVZSMGdnVkU4Z1JFOU5DZ2tKQ1hkcGJtUnZkeTV3YjNOMFRXVnpjMkZuWlNoeVpYRjFaWE4wS1FvS0NRa0pZMmh5YjIxbExuSjFiblJwYldVdWMyVnVaRTFsYzNOaFoyVUtDUWtLQ1gwS0NnbGtiMk4xYldWdWRDNWhaR1JGZG1WdWRFeHBjM1JsYm1WeUtDZEVUMDFEYjI1MFpXNTBURzloWkdWa0p5d2dDZ2xtZFc1amRHbHZiaUFvS1NCN0Nna0paRzlqZFcxbGJuUXVZV1JrUlhabGJuUk1hWE4wWlc1bGNpZ25ZMnhwWTJzbkxDQUtDUWxtZFc1amRHbHZiaUFvWlhaMEtTQjdDZ2tKQ1dsbUtDRmxkblF1ZEdGeVoyVjBLU0I3Q2drSkNRbHlaWFIxY200Z2RISjFaUW9KQ1FsOUlHVnNjMlVLQ1FrSmFXWW9aWFowTG5SaGNtZGxkQzVqYkdGemMwNWhiV1V1YVc1amJIVmtaWE1vSjNKMWJpMXpZM0pwY0hRbktTa2dld29KQ1FrSmJHRnpkRkoxYmtsa0lEMGdaMlZ1WlhKaGRHVlNkVzVKWkNncENna0pDUWx2YmsxbGMzTmhaMlVvZXdvSkNRa0pDV0ZqWTJWemMyOXlPaUFuY25WdVFteHZZMnNvS1NjS0NRa0pDWDBwQ2drSkNYMGdaV3h6WlFvSkNRbHBaaWhsZG5RdWRHRnlaMlYwTG1Oc1lYTnpUbUZ0WlM1cGJtTnNkV1JsY3lnbmNuVnVMV0ZqWTJWemMyOXlKeWtwSUhzS0NRa0pDWE5sYm1STlpYTnpZV2RsS0NrZ0x5OGdZMjlzYkdWamRITWdjblZ1TFhOamNtbHdkQ0IyWVd4MVpTQmhibVFnWm05eWQyRnlaSE1nZEc4Z1ltRmphMlZ1WkFvSkNRbDlDZ2tKZlNrS0Nna0pZMmh5YjIxbExuSjFiblJwYldVdWIyNU5aWE56WVdkbExtRmtaRXhwYzNSbGJtVnlLQW9KQ1FsbWRXNWpkR2x2YmlBb2NtVnhkV1Z6ZENrZ2V5QnZiazFsYzNOaFoyVW9jbVZ4ZFdWemRDa2dmU2tLQ2drSkx5OGdTVTVKVkNCR1ZVNURWRWxQVGlCT1JVVkVVeUJVVHlCRFVrVkJWRVVnU1U1SlZFbEJUQ0JUUTFKSlVGUWdRVU5EUlZOVFQxSUtDUWt2THlBZ0lGTlBJRlJJUlZKRklFbFRJRUZNVjBGWlV5QkJJRlpCVEVsRUlGTkZVMU5KVDA0Z1JVNURVbGxRVkU5U0Nna0piMjVOWlhOellXZGxLSHNLQ1FrSkx5OGdiV0ZyWlNCaElISnZkVzVrSUhSeWFYQWdkMmwwYUNCMGFHVWdabkp2Ym5RdFpXNWtMQ0JwYmlCallYTmxJSFJvYVhNZ2FYTWdkR2hsSUhSdmIyd2djR0ZuWlFvSkNRbG1jbTl1ZEdWdVpEb2dKMWR2Y210bGNpQnpaWEoyYVdObElITjBZWEowWldSY2JpY3NDZ2tKZlNrS0NYMHBDZ29LQ1M4dmMyVnNaaTVoWkdSRmRtVnVkRXhwYzNSbGJtVnlLQ2RwYm5OMFlXeHNKeXdnWkc5SmJuTjBZV3hzS1FvS0NuMEtDZ29LTHk4Z1ltRmphMlZ1WkNCM2IzSnJaWElnWm05eUlHTm9jbTl0WlNCbGVIUmxibk5wYjI0S1puVnVZM1JwYjI0Z1ltRmphMlZ1WkUxbGMzTmhaMlZTWlhOd2IyNXpaVTFwWkdSc1pYZGhjbVVvS1NCN0Nnb0pMeThnUVZOWlRrTWdRVTVFSUVGWFFVbFVJRWxUSUVSVlRVSWdTVTRnU2tGV1FWTkRVa2xRVkN3Z1ZFaEZVa1VuVXlCUFRreFpJREVnVkVoU1JVRkVDZ2t2THlBZ0lIUm9hWE1nWlc1MGNua2dZbUZ6YVdOaGJHeDVJR052Ym5abGNuUnpJR0ZzYkNCallXeHNjeUIwYnlCaGMzbHVZd29KWm5WdVkzUnBiMjRnYzJWdVpFMWxjM05oWjJVb1pHRjBZU2tnZXdvSkNXUmxZblZuWjJWeUNna0pjbVYwZFhKdUlHNWxkeUJRY205dGFYTmxLR1oxYm1OMGFXOXVJQ2h5WlhOdmJIWmxLU0I3Q2drSkNXTm9jbTl0WlM1MFlXSnpMbk5sYm1STlpYTnpZV2RsS0dOMWNuSmxiblJEYjI1MFpYaDBMbk5sYm1SbGNrbGtMQW9KQ1FrSkNXUmhkR0VzQ1c5dVRXVnpjMkZuWlM1aWFXNWtLSFJvYVhNc0lISmxjMjlzZG1VcEtRb0pDWDBwQ2dsOUNnb0piR1YwSUhSb2NtVmhaSE1nUFNCN2ZRb0tDV1oxYm1OMGFXOXVJRzl1VFdWemMyRm5aU2h5WlhCc2VVWjFibU4wYVc5dUxDQnlaWEYxWlhOMEtTQjdDZ2tKYVdZb2RIbHdaVzltSUhKbGNYVmxjM1F1YzJOeWFYQjBJQ0U5SUNkMWJtUmxabWx1WldRbktTQjdDZ2tKQ1dSdlVuVnVLSEpsY1hWbGMzUXVjMk55YVhCMExDQjdDZ2tKQ1FselpXNWtUV1Z6YzJGblpUb2djMlZ1WkUxbGMzTmhaMlV1WW1sdVpDaDBhR2x6TENCeVpYQnNlVVoxYm1OMGFXOXVLU3dLQ1FrSkNXTm9jbTl0WlRvZ1kyaHliMjFsTEFvSkNRbDlLUW9KQ1gwZ1pXeHpaUW9KQ1dsbUtIUjVjR1Z2WmlCeVpYRjFaWE4wTG5CaGRYTmxJQ0U5SUhWdVpHVm1hVzVsWkNrZ2V3b0pDUWxzWlhRZ2NuVnVRMjl1ZEdWNGRDQTlJSFJvY21WaFpITmJjbVZ4ZFdWemRDNXlkVzVKWkYwS0NRa0pjblZ1VTNSaGRHVnRaVzUwS0RBc0lGdDdDZ2tKQ1FsMGVYQmxPaUFuUkdWaWRXZG5aWEpUZEdGMFpXMWxiblFuQ2drSkNYMWRMQ0J5ZFc1RGIyNTBaWGgwS1FvSkNRbHpaVzVrVFdWemMyRm5aU2g3SUFvSkNRa0pjR0YxYzJWa09pQm5aWFJVYUhKbFlXUnpLQ2tzSUFvSkNRa0piR2x1WlRvZ2NuVnVRMjl1ZEdWNGRDNWlkV0ppYkdWTWFXNWxJQzBnTVN3S0NRa0pDWE4wWVdOck9pQnlkVzVEYjI1MFpYaDBMbUoxWW1Kc1pWTjBZV05yTEFvSkNRbDlLUW9KQ1gwZ1pXeHpaUW9KQ1M4dklHZGxkRk4wWVhSMWN5QmlaV052YldWeklHRWdZbUZqYTJWdVpDQmhZMk5sYzNOdmNpQm1iM0lnWm5KdmJuUmxibVFLQ1Frdkx5QWdJSE52SUdOdmJuUmxlSFFnWm05eUlHTmhiR3dnWTJGdUlHSmxJR0Z1ZVhSb2FXNW5JR0oxZENCamIyNXVaV04wYVc5dUNna0pMeThnSUNCcGN5QmhiSGRoZVhNZ2MzUmhibVJoY21ScGVtVmtJSFJvY205MVoyZ2dVa1ZRVENCcGJuUmxjbVpoWTJVc0lHeHBhMlVLQ1Frdkx5QWdJRnBOVVNCNElERXdDZ2tKYVdZb0tHeHBZaUE5SUc5dVFXTmpaWE56YjNJb2NtVnhkV1Z6ZENrcEtTQjdJQW9KQ1FseVpYUjFjbTRnYzJWdVpFMWxjM05oWjJVb2JHbGlLUW9KQ1gwZ1pXeHpaUW9KQ1dsbUtIUjVjR1Z2WmlCa2IxSjFiaUFoUFNBbmRXNWtaV1pwYm1Wa0p5a2dld29KQ1Fsa2IxSjFiaWh5WlhGMVpYTjBMbUZqWTJWemMyOXlMQ0I3Q2drSkNRbHpaVzVrVFdWemMyRm5aVG9nYzJWdVpFMWxjM05oWjJVdVltbHVaQ2gwYUdsekxDQnlaWEJzZVVaMWJtTjBhVzl1S1N3S0NRa0pDV05vY205dFpUb2dZMmh5YjIxbExBb0pDUWtKZDJsdVpHOTNPaUJuYkc5aVlXeFVhR2x6TEFvSkNRa0paMnh2WW1Gc09pQm5iRzlpWVd4VWFHbHpMQW9KQ1FsOUtTQXZMeUJPVDFjZ1NWUW5VeUJTUlVOVlVsTkpWa1VLQ1FsOUNnb0pmUW9LQ1dOb2NtOXRaUzV5ZFc1MGFXMWxMbTl1VFdWemMyRm5aUzVoWkdSTWFYTjBaVzVsY2lobWRXNWpkR2x2YmlBb2NtVnhkV1Z6ZEN3Z2MyVnVaR1Z5TENCeVpYQnNlU2tnZXdvSkNXOXVUV1Z6YzJGblpTaHlaWEJzZVN3Z2NtVnhkV1Z6ZENrS0NYMHBDZ3A5Q2dvS0x5OGdZMmh5YjIxbElHVjRkR1Z1YzJsdmJpQmtaV0oxWjJkbGNpQnBid3BtZFc1amRHbHZiaUJrWldKMVoyZGxjazFsYzNOaFoyVlNaWE53YjI1elpVMXBaR1JzWlhkaGNtVW9LU0I3Q2dsbWRXNWpkR2x2YmlCelpXNWtRMjl0YldGdVpDZ3BJSHNLQ1FseVpYTndiMjV6WlNBOUlHTm9jbTl0WlM1a1pXSjFaMmRsY2k1elpXNWtRMjl0YldGdVpDaDdDZ2tKQ1hSaFlrbGtPaUJ6Wlc1a1pYSkpaQW9KQ1gwc0lDZFNkVzUwYVcxbExtVjJZV3gxWVhSbEp5d2dld29KQ1FsbGVIQnlaWE56YVc5dU9pQmxlSEJ5WlhOemFXOXVDZ2tKZlNrS0NYMEtDZ2xtZFc1amRHbHZiaUJ2YmsxbGMzTmhaMlVvS1NCN0Nna0pMeThnVkU5RVR6b2dhVzV6WlhKMElHTnZaR1VnWm05eUlHUmxZblZuWjJWeUlHSnlaV0ZySUc5eUlITnBaMjVoYkNCa1pXSjFaMmRsY2lCbWNtOXRJR1Z1WjJsdVpRb0pmUW9LQ1FwOUNnb0tMeThnUWtWRFFWVlRSU0JQUmlCSVQxY2dSVmhVUlU1VFNVOU9VeUJYVDFKTExDQkpJRWhCUkNCT1R5QkpSRVZCSUZSSVFWUWdWRWhGSUVaU1QwNVVSVTVFQ2k4dklDQWdUMDVNV1NCSVFWTWdRVU5EUlZOVElGUlBJRXhKVTFSRlRpQlVUeUJRUVVkRklFVldSVTVVVXl3Z1ZFaEpVeUJKVXlCSVQxY2dWMFVnVUVsRFMxVlFDaTh2SUNBZ1VFRkhSU0JGVmtWT1ZGTWdUMDRnUVU1WklGUkJRaXdnU1U1VFJWSlVJRUVnVTBOU1NWQlVJRUpQV0N3Z1NsTlBUaUJGVGtOUFJFVWdWRWhGSUVSQlZFRUtMeThnSUNCWFJTQlhRVTVVSUZSUElGTkZUa1FzSUZSSVJVNGdVRkpGVTFNZ1FTQkNWVlJVVDA0Z1ZFOGdVMFZPUkM0Z1RVRlpRa1VnVkVoRklGQk1WVWRKVGlCRFFVNEtMeThnSUNCUVNVTkxJRWxVSUZWUUlFRk9SQ0JTUlUxUFZrVWdWRWhGSUVWTVJVMUZUbFF1Q2k4dklGUklTVk1nU1ZNZ1NVNVVSVkpGVTFSSlRrY2dRa1ZEUVZWVFJTQkpJRU5CVGlCQ1FWTkpRMEZNVEZrZ1UwVk9SQ0JDUVVOTFJVNUVJRU5QVFUxQlRrUlRJRlJQSUFvdkx5QWdJRTFaSUU5WFRpQkdVazlPVkVWT1JDQlFURlZIU1U0Z1NVNGdWRWhGSUVOUFRsUkZXRlFnVDBZZ1ZFaEZJRkJCUjBVdUNtWjFibU4wYVc5dUlHUnZiVTFsYzNOaFoyVlNaWE53YjI1elpVMXBaR1JzWlhkaGNtVW9LU0I3Q2dsc1pYUWdld29KQ1dGM1lXbDBUM0pVYVcxbGIzVjBMQW9KQ1dadmNuZGhjbVJTWlhOd2IyNXpaVUo1U1dRc0NnbDlJRDBnYVc1emRHRnNiRUZ6ZVc1alZISnBaMmRsY2sxcFpHUnNaWGRoY21Vb2IyNU5aWE56WVdkbExDQnpaVzVrVFdWemMyRm5aU2tLQ1FvSlpuVnVZM1JwYjI0Z2IyNU5aWE56WVdkbEtHUmhkR0VwSUhzS0NRbHlaWFIxY200Z2IyNUdjbTl1ZEdWdVpDaG1kVzVqZEdsdmJpQW9jbVZ6Y0c5dWMyVXBJSHNLQ1FrSmNtVjBkWEp1SUhObGJtUk5aWE56WVdkbEtISmxjM0J2Ym5ObEtRb0pDWDBzSUdSaGRHRXBDZ2w5Q2dvSlpuVnVZM1JwYjI0Z2MyVnVaRTFsYzNOaFoyVW9aR0YwWVNrZ2V3b0pDV3hsZENCeWRXNVRZM0pwY0hRZ1BTQmtiMk4xYldWdWRDNW5aWFJGYkdWdFpXNTBRbmxKWkNnbmNuVnVMWE5qY21sd2RDY3BDZ2tKYVdZb2NuVnVVMk55YVhCMEtTQjdDZ2tKQ1hkcGJtUnZkMXNuY25WdUxYTmpjbWx3ZENkZExuWmhiSFZsSUQwZ1NsTlBUaTV6ZEhKcGJtZHBabmtvWkdGMFlTa0tDUWtKZDJsdVpHOTNXeWR5ZFc0dFlXTmpaWE56YjNJblhTNWpiR2xqYXlncENna0pmUW9KQ1dsbUtGTlpVeTUzYjNKclpYSXBJSHNLQ1FrSlUxbFRMbmR2Y210bGNpNXdiM04wVFdWemMyRm5aU2hrWVhSaEtRb0pDWDBLQ1gwS0NnbDNhVzVrYjNjdVlXUmtSWFpsYm5STWFYTjBaVzVsY2lnbmJHOWhaQ2NzSUdaMWJtTjBhVzl1SUNncElIc0tDUWwzYVc1a2IzY3VZV1JrUlhabGJuUk1hWE4wWlc1bGNpZ25iV1Z6YzJGblpTY3NJQW9KQ1FrSmIyNUdjbTl1ZEdWdVpDNWlhVzVrS0hSb2FYTXNJSE5sYm1STlpYTnpZV2RsS1N3Z1ptRnNjMlVwQ2drSmQybHVaRzkzTG5ObGJtUk5aWE56WVdkbElEMGdZWGRoYVhSUGNsUnBiV1Z2ZFhRS0NRbDNhVzVrYjNjdWIyNU5aWE56WVdkbElEMGdabTl5ZDJGeVpGSmxjM0J2Ym5ObFFubEpaQW9KQ1M4dklHTm9aV05ySUdadmNpQndiSFZuYVc0Z2IzSWdaVzFwZEVSdmQyNXNiMkZrQ2drSkx5OGdiV0Y1WW1VZ2QyVWdaRzl1SjNRZ2FHRjJaU0IwYUdVZ2NHeDFaMmx1Q2drSkx5OGdWRTlFVHpvZ0xtSnBibVFvYm5Wc2JDd2dKMjF2Y25Cb0xYQnNkV2RwYmljcENna0piR1YwSUdOaGJtTmxiRVJ2ZDI1c2IyRmtJRDBnYzJWMFZHbHRaVzkxZENobGJXbDBSRzkzYm14dllXUXNJRE13TURBcENna0phV1lvWTJoeWIyMWxJQ1ltSUdOb2NtOXRaUzV5ZFc1MGFXMWxLU0I3Q2drSkNXTm9jbTl0WlM1eWRXNTBhVzFsTG5ObGJtUk5aWE56WVdkbEtBb0pDUWtKUlZoVVJVNVRTVTlPWDBsRUxDQkZXRlJGVGxOSlQwNWZWa1ZTVTBsUFRpd2dDZ2tKQ1daMWJtTjBhVzl1SUNncElIc0tDUWtKQ1dOc1pXRnlWR2x0Wlc5MWRDaGpZVzVqWld4RWIzZHViRzloWkNrS0NRa0pmU2tLQ1FsOUNnb0pDUzh2SUhONWMxOTNiM0pyWlhJS0NRbFRlWE5mWm05eWF5Z3BJQzh2SUdGMWRHOXRZWFJwWTJGc2JIa2djM1JoY25RZ2QyaGhkR1YyWlhJZ2MyVnlkbWxqWlNCM2IzSnJaWElnZDJVZ2FHRjJaUW9LQ1Frdkx5QlVUMFJQT2lCMWNHUmhkR1VnWm05eUlHeDJiSGR2Y214a0lHVnVaMmx1WlNCdmJteDVQd29KQ1dsbUtIUjVjR1Z2WmlCVFdWTXVkMjl5YTJWeUlDRTlJQ2QxYm1SbFptbHVaV1FuS1NCN0Nna0pDWE5sYm1STlpYTnpZV2RsS0hzS0NRa0pDWE5qY21sd2REb2dKMnh2WVdSRWIyTjFiV1Z1ZEdGMGFXOXVLQ2s3WEc1MWNHUmhkR1ZHYVd4bGJHbHpkQ2dpU1c1emRISjFZM1JwYjI1eklpazdYRzRuQ2drSkNYMHBDZ2tKZlFvSmZTa0tDUXA5Q2dvS1puVnVZM1JwYjI0Z2MyaGhjbVZrVFdWemMyRm5aVkpsYzNCdmJuTmxUV2xrWkd4bGQyRnlaU2dwSUhzS0NTOHFDZ2x2Ym1Ob1lXNW5aU0E5SUdaMWJtTjBhVzl1S0NrZ2V3b2dJRzE1VjI5eWEyVnlMbkJ2Y25RdWNHOXpkRTFsYzNOaFoyVW9XM054ZFdGeVpVNTFiV0psY2k1MllXeDFaU3h6Y1hWaGNtVk9kVzFpWlhJdWRtRnNkV1ZkS1RzS0lDQmpiMjV6YjJ4bExteHZaeWduVFdWemMyRm5aU0J3YjNOMFpXUWdkRzhnZDI5eWEyVnlKeWs3Q24wS2IyNWpiMjV1WldOMElEMGdablZ1WTNScGIyNG9aU2tnZXdvZ0lIWmhjaUJ3YjNKMElEMGdaUzV3YjNKMGMxc3dYVHNLQ2lBZ2NHOXlkQzV2Ym0xbGMzTmhaMlVnUFNCbWRXNWpkR2x2YmlobEtTQjdDaUFnSUNCMllYSWdkMjl5YTJWeVVtVnpkV3gwSUQwZ0oxSmxjM1ZzZERvZ0p5QXJJQ2hsTG1SaGRHRmJNRjBnS2lCbExtUmhkR0ZiTVYwcE93b2dJQ0FnY0c5eWRDNXdiM04wVFdWemMyRm5aU2gzYjNKclpYSlNaWE4xYkhRcE93b2dJSDBLZlFvcUx3cDlDZ29LQ2dvdkx5QkJURXdnVkVoQlZDQlhUMUpMSUVwVlUxUWdWRThnVlU1RVJWSlRWRUZPUkNCVVNFbFRJRkJCVWxRL0lGUklTVk1nU1ZNZ1UwOU5SVlJJU1U1SENpOHZJQ0FnVkVoQlZDQlhRVk1nUTA5T1JsVlRTVTVISUUxRkxDQkpUaUJYVDFKTFJWSWdUVTlFUlNCSklFZFZSVk5USUVrZ1RrVkZSQ0JVU0VVZ0NpOHZJQ0FnVTBWVFUwbFBUaUJGVGtOU1dWQlVTVTlPSUUxSlJFUk1SVmRCVWtVZ1JsSlBUU0JHVWs5T1ZFVk9SQ0JCUWs5V1JTQkJURk5QTEFvdkx5QlVUMFJQT2lCVFNFOVZURVFnVFVGTFJTQlRWVkpGSUVWT1ExSlpVRlJKVDA0Z1YwOVNTMU1nVTBsTlVFeFpJRlJJVWs5VlIwZ2dRVlZVU0NCUVVrOURSVk5USUVGTVUwOHVDZ3BtZFc1amRHbHZiaUIzYjNKclpYSk5aWE56WVdkbFVtVnpjRzl1YzJWTmFXUmtiR1YzWVhKbEtDa2dld29LQ1d4bGRDQjdDZ2tKWlc1amNubHdkRkpsYzNWc2RITkpabE5sYzNOcGIyNHNDZ2tKWkdWamNubHdkRkpsYzNCdmJuTmxTV1pUWlhOemFXOXVMQW9KZlNBOUlHbHVjM1JoYkd4RmJtTnllWEIwWldSQmMzbHVZMDFwWkdSc1pYZGhjbVVvYjI1TlpYTnpZV2RsTENCelpXeG1MbkJ2YzNSTlpYTnpZV2RsS1NBS0NnbG1kVzVqZEdsdmJpQnpaVzVrVFdWemMyRm5aU2hrWVhSaEtTQjdDZ2tKWTI5dWMyOXNaUzVzYjJjb0ozSmxjWFZsYzNRNklDY3NJR1JoZEdFcENna0piR1YwSUdGemVXNWpVbVZ6ZFd4MElEMGdaVzVqY25sd2RGSmxjM1ZzZEhOSlpsTmxjM05wYjI0b1pHRjBZU2tLQ1FsamIyNXpiMnhsTG1GemMyVnlkQ2hoYzNsdVkxSmxjM1ZzZEM1amIyNXpkSEoxWTNSdmNpQTlQVDBnVUhKdmJXbHpaU2tnTHk4Z0lEMDlQU0JRY205dGFYTmxDZ2tKY21WMGRYSnVJRkJ5YjIxcGMyVXVjbVZ6YjJ4MlpTaGhjM2x1WTFKbGMzVnNkQ2tLQ1gwS0Nna3ZMeUJzYjJ3c0lHMWhhMlVnWVNCbllXMWxJSGRvWlhKbElHeHZjM1FnWVdOamIzVnVkSE1nYkdWaFpDQjBieUJoSUhacGNuUjFZV3dnWTI5MWNuUWdjbTl2YlNCMGJ5QndjbTkyWlNCNWIzVnlJR2xrWlc1MGFYUjVJR3AxYzNRZ2JHbHJaU0JKVWt3S0NTOHZJQ0FnYVdZZ2MyOXRaVzl1WlNCamJHRnBiWE1nZEc4Z1ltVWdVbWxqYXlBb1puSnZiU0JTYVdOcklDWWdUVzl5ZEhrcElHRnNiQ0IwYUdVZ2IzUm9aWElnVW1samEzTWdhR0YyWlNCMGJ5QnZZblp6WlhKMlpTQmhibVFnWVd4c2IzY0tDUzh2SUNBZ2IzSWdkR0ZyWlNCMGFHVWdibVYzSUZKcFkyc2diM1YwSUdadmNpQnViM1FnWW1WcGJtY2dVbWxqYTNrZ1pXNXZkV2RvTGlBdElFMWxkR0YyWlhKelpRb0pablZ1WTNScGIyNGdiMjVOWlhOellXZGxLSEpsY1hWbGMzUXBJSHNLQ1Fsc1pYUWdiR2xpQ2drSmFXWW9JWEpsY1hWbGMzUXBJSHNLQ1FrSmNtVjBkWEp1Q2drSmZRb0pDV2xtS0hSNWNHVnZaaUJ2YmtGalkyVnpjMjl5SUNFOUlDZDFibVJsWm1sdVpXUW5DZ2tKQ1NZbUlIUjVjR1Z2WmlCeVpYRjFaWE4wTG1GalkyVnpjMjl5SUNFOUlDZDFibVJsWm1sdVpXUW5DZ2tKQ1M4dklHOXVJSFJvWlNCaVlXTnJaVzVrSUhkbElHTm9iMjl6WlNCMGJ5QmtieUJsZG1WeWVYUm9hVzVuSUdsdUlIUm9aU0J6WVcxbElIQnNZV05sQ2drSkNTWW1JQ2hzYVdJZ1BTQmtiMEZqWTJWemMyOXlLSEpsY1hWbGMzUXBLU2tnZXdvSkNRbHlaWFIxY200Z2MyVnVaRTFsYzNOaFoyVW9iR2xpS1FvSkNYMGdaV3h6WlFvSkNXbG1JQ2gwZVhCbGIyWWdjbVZ4ZFdWemRDNXpZM0pwY0hRZ0lUMGdKM1Z1WkdWbWFXNWxaQ2NwSUhzS0NRa0piR1YwSUhKbGMzVnNkRkJ5YjIxcGMyVWdQU0JrYjBKdmIzUnpkSEpoY0NoeVpYRjFaWE4wTG5OamNtbHdkQ3dnQ2drSkNRa0pUMkpxWldOMExtRnpjMmxuYmlobmJHOWlZV3hVYUdsekxDQjdJQW9KQ1FrSkNRbHpaVzVrVFdWemMyRm5aVG9nYzJWdVpFMWxjM05oWjJVc0Nna0pDUWtKQ1hKbGJtUmxjazFoY210a2IzZHVPaUJ5Wlc1a1pYSk5ZWEpyWkc5M2Jpd0tDUWtKQ1FrSmNtVmhaRVpwYkdVNklISmxZV1JHYVd4bExBb0pDUWtKQ1FseVpYTndiMjV6WlVsa09pQnlaWEYxWlhOMExuSmxjM0J2Ym5ObFNXUXNDZ2tKQ1FrSkNTOHZaRzlNYVdKeVlYSjVURzl2YTNWd09pQmtiMHhwWW5KaGNubE1iMjlyZFhBc0Nna0pDUWtKZlNrcENna0pDWEpsZEhWeWJpQnlaWE4xYkhSUWNtOXRhWE5sQ2drSkNTNTBhR1Z1S0daMWJtTjBhVzl1SUNoeVpYTjFiSFFwSUhzS0NRa0pDV2xtS0hSNWNHVnZaaUJ5WlhOMWJIUWdJVDBnSjI5aWFtVmpkQ2NwSUhzS0NRa0pDUWxrWldKMVoyZGxjZ29KQ1FrSkNYSmxkSFZ5YmdvSkNRa0pmUW9KQ1FrSkx5OGdZbVYwZEdWeUlITmxjR1Z5WVhSaGRHbHZiZ29KQ1FrSmNtVnpkV3gwTG5KbGMzQnZibk5sU1dRZ1BTQnlaWEYxWlhOMExuSmxjM0J2Ym5ObFNXUUtDUWtKQ1hKbGRIVnliaUJ6Wld4bUxuQnZjM1JOWlhOellXZGxLSEpsYzNWc2RDa0tDUWtKZlNrS0NRbDlJR1ZzYzJVZ2V3b0pDUWx5WlhSMWNtNGdaRzlCWTJObGMzTnZjaWh5WlhGMVpYTjBLUW9KQ1gwS0NnbDlDZ29LQ1daMWJtTjBhVzl1SUhKbFlXUkdhV3hsS0dacGJHVnVZVzFsS1NCN0Nna0pjbVYwZFhKdUlFRnljbUY1TG1aeWIyMG9SbE11ZG1seWRIVmhiRnRtYVd4bGJtRnRaVjB1WTI5dWRHVnVkSE1wQ2drSkNTNXRZWEFvWm5WdVkzUnBiMjRnS0dNcElIc2djbVYwZFhKdUlGTjBjbWx1Wnk1bWNtOXRRMmhoY2tOdlpHVW9ZeWtnZlNrS0NRa0pMbXB2YVc0b0p5Y3BDZ2w5Q2dwbWRXNWpkR2x2YmlCeVpXNWtaWEpOWVhKclpHOTNiaWhtYVd4bGJtRnRaU2tnZXdvZ0lDOHZkbUZ5SUdoc2FuTWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDZG9hV2RvYkdsbmFIUXVhbk1uS1NBdkx5Qm9kSFJ3Y3pvdkwyaHBaMmhzYVdkb2RHcHpMbTl5Wnk4S0NXeGxkQ0JzYVdKeVlYSjVSbWxzWlhNZ1BTQlBZbXBsWTNRdWEyVjVjeWhHVXk1MmFYSjBkV0ZzS1FvSlptOXlLR3hsZENCcElEMGdNRHNnYVNBOElHeHBZbkpoY25sR2FXeGxjeTVzWlc1bmRHZzdJR2tyS3lrZ2V3b0pDV2xtS0dacGJHVnVZVzFsSUQwOUlHeHBZbkpoY25sR2FXeGxjMXRwWFNrZ2V3b0pDUWwyWVhJZ2JXUWdQU0J1WlhjZ1VtVnRZWEpyWVdKc1pTZ25ablZzYkNjc0lIc0tDUWtKZlNrS0NRa0piR1YwSUhKbGMzVnNkQ0E5SUcxa0xuSmxibVJsY2loeVpXRmtSbWxzWlNoc2FXSnlZWEo1Um1sc1pYTmJhVjBwS1FvSkNRbGpiMjV6YjJ4bExteHZaeWh5WlhOMWJIUXBPd29KQ1FseVpYUjFjbTRnY21WemRXeDBDZ2tKZlFvSmZRb0pMeW9LQ1haaGNpQnRaQ0E5SUc1bGR5QlNaVzFoY210aFlteGxLQ2RtZFd4c0p5d2dld29KQ1doMGJXdzZJQ0FnSUNBZ0lDQWdabUZzYzJVc0lDQWdJQ0FnSUNBdkx5QkZibUZpYkdVZ1NGUk5UQ0IwWVdkeklHbHVJSE52ZFhKalpRb0pDWGhvZEcxc1QzVjBPaUFnSUNBZ1ptRnNjMlVzSUNBZ0lDQWdJQ0F2THlCVmMyVWdKeThuSUhSdklHTnNiM05sSUhOcGJtZHNaU0IwWVdkeklDZ21iSFE3WW5JZ0x5Wm5kRHNwQ2drSlluSmxZV3R6T2lBZ0lDQWdJQ0JtWVd4elpTd2dJQ0FnSUNBZ0lDOHZJRU52Ym5abGNuUWdKMXh1SnlCcGJpQndZWEpoWjNKaGNHaHpJR2x1ZEc4Z0pteDBPMkp5Sm1kME93b0pDV3hoYm1kUWNtVm1hWGc2SUNBZ0oyeGhibWQxWVdkbExTY3NJQ0F2THlCRFUxTWdiR0Z1WjNWaFoyVWdjSEpsWm1sNElHWnZjaUJtWlc1alpXUWdZbXh2WTJ0ekNna0piR2x1YTJsbWVUb2dJQ0FnSUNCMGNuVmxMQ0FnSUNBZ0lDQWdJQzh2SUdGMWRHOWpiMjUyWlhKMElGVlNUQzFzYVd0bElIUmxlSFJ6SUhSdklHeHBibXR6Q2drSmJHbHVhMVJoY21kbGREb2dJQ0FuSnl3Z0lDQWdJQ0FnSUNBZ0lDOHZJSE5sZENCMFlYSm5aWFFnZEc4Z2IzQmxiaUJzYVc1cklHbHVDZ29KQ1M4dklFVnVZV0pzWlNCemIyMWxJR3hoYm1kMVlXZGxMVzVsZFhSeVlXd2djbVZ3YkdGalpXMWxiblJ6SUNzZ2NYVnZkR1Z6SUdKbFlYVjBhV1pwWTJGMGFXOXVDZ2tKZEhsd2IyZHlZWEJvWlhJNklDQm1ZV3h6WlN3S0Nna0pMeThnUkc5MVlteGxJQ3NnYzJsdVoyeGxJSEYxYjNSbGN5QnlaWEJzWVdObGJXVnVkQ0J3WVdseWN5d2dkMmhsYmlCMGVYQnZaM0poY0dobGNpQmxibUZpYkdWa0xBb0pDUzh2SUdGdVpDQnpiV0Z5ZEhGMWIzUmxjeUJ2Ymk0Z1UyVjBJR1J2ZFdKc1pYTWdkRzhnSjhLcndyc25JR1p2Y2lCU2RYTnphV0Z1TENBbjRvQ2U0b0NjSnlCbWIzSWdSMlZ5YldGdUxnb0pDWEYxYjNSbGN6b2dKK0tBbk9LQW5lS0FtT0tBbVNjc0Nnb0pDUzh2SUVocFoyaHNhV2RvZEdWeUlHWjFibU4wYVc5dUxpQlRhRzkxYkdRZ2NtVjBkWEp1SUdWelkyRndaV1FnU0ZSTlRDd0tDUWt2THlCdmNpQW5KeUJwWmlCcGJuQjFkQ0J1YjNRZ1kyaGhibWRsWkFvSkNXaHBaMmhzYVdkb2REb2dablZ1WTNScGIyNGdLSE4wY2l3Z2JHRnVaeWtnZXdvSkNRbHBaaUFvYkdGdVp5QW1KaUJvYkdwekxtZGxkRXhoYm1kMVlXZGxLR3hoYm1jcEtTQjdDZ2tKQ1FsMGNua2dld29KQ1FrSkNYSmxkSFZ5YmlCb2JHcHpMbWhwWjJoc2FXZG9kQ2hzWVc1bkxDQnpkSElwTG5aaGJIVmxPd29KQ1FrSmZTQmpZWFJqYUNBb1gxOHBJSHQ5Q2drSkNYMEtDZ2tKQ1hSeWVTQjdDZ2tKQ1FseVpYUjFjbTRnYUd4cWN5NW9hV2RvYkdsbmFIUkJkWFJ2S0hOMGNpa3VkbUZzZFdVN0Nna0pDWDBnWTJGMFkyZ2dLRjlmS1NCN2ZRb0tDUWtKY21WMGRYSnVJQ2NuT3lBdkx5QjFjMlVnWlhoMFpYSnVZV3dnWkdWbVlYVnNkQ0JsYzJOaGNHbHVad29KQ1gwS0NYMHBPd29KS2k4S2ZRb0tDZ29KYVdZb2RIbHdaVzltSUVaVElEMDlJQ2QxYm1SbFptbHVaV1FuS1NCN0NpQWdJQ0JuYkc5aVlXeFVhR2x6TGtaVElEMGdld29nSUNBZ0lDQjJhWEowZFdGc09pQjdmUW9nSUNBZ2ZRb2dJQ0FnWjJ4dlltRnNWR2hwY3k1R1UxOUdTVXhGSUQwZ0tEZ2dQRHdnTVRJcElDc2dLQ2cySUR3OElETXBJQ3NnS0RZZ1BEd2dOaWtnS3lBb05pa3BDaUFnZlFvSmNtVmhaRkJ5WlVaVEtDa0tDZ2t2THlCMGFHbHpJSGRoY3lCbWIzSWdZU0IzWldJdGQyOXlhMlZ5SUhObGRIVndDZ2xwWmloMGVYQmxiMllnWjJ4dlltRnNWR2hwY3lBaFBTQW5kVzVrWldacGJtVmtKeUFLQ1FrSkppWWdkSGx3Wlc5bUlHZHNiMkpoYkZSb2FYTXVkMmx1Wkc5M0lEMDlJQ2QxYm1SbFptbHVaV1FuS1NCN0Nna0paMnh2WW1Gc1ZHaHBjeTUzYVc1a2IzY2dQU0JuYkc5aVlXeFVhR2x6Q2dsOUNnbHpaV3htTG05dWJXVnpjMkZuWlNBOUlHRnplVzVqSUdaMWJtTjBhVzl1SUNoeVpYRjFaWE4wS1NCN0Nna0piR1YwSUhKbGMzVnNkQ0E5SUdGM1lXbDBJR1JsWTNKNWNIUlNaWE53YjI1elpVbG1VMlZ6YzJsdmJpaHlaWEYxWlhOMExtUmhkR0VwQ2dsOUNnb0pjMlZzWmk1aFpHUkZkbVZ1ZEV4cGMzUmxibVZ5S0NkcGJuTjBZV3hzSnl3Z1puVnVZM1JwYjI0Z0tDa2dld29KQ1dSbFluVm5aMlZ5Q2dsOUtRb0tmUW9LQ2dwbWRXNWpkR2x2YmlCelpYSjJhV05sVFdWemMyRm5aVkpsYzNCdmJuTmxUV2xrWkd4bGQyRnlaU2dwSUhzS0Nna3ZMeUJVVDBSUE9pQlVTRWxUSUZkUFZVeEVJRUpGSUVOUFQwd2dWRThnUjBWT1JWSkJWRVVnVUVGTVJWUlVSUzVUU0VGRVJWSWdSa2xNUlZNZ1QwNEtDUzh2SUNBZ1FVaEZRVVFnVDBZZ1ZFbE5SU3dnVDFJZ1IwbFdSU0JWVTBWU1V5QkpUbE5VUVU1VUlFOUdSa3hKVGtVZ1FVTkRSVk5USUZSUElBb0pMeThnSUNBaVVGSkZWa2xGVnlJZ1VrOVZWRVZUSUV4SlMwVWdMejlGUkVsVUxVRk9XVmRJUlZKRkwwZFBUMGRNUlM1RFQwMHZTVTVFUlZndVNGUk5MQW9KTHk4Z0lDQlRTRTlYSUZaRlVsTkpUMDVGUkNCUFZWUlFWVlFnUmxKUFRTQWlURWxXUlNJZ1JVUkpWQ0JOVDBSRkxDQlhTRVZTUlNCUVZWTklTRWxUVkU5U1dTZ3BDZ2t2THlBZ0lFTklRVTVIUlZNZ1ZFaEZJRkJCUjBVZ1FVNUVJRlZUUlZJZ1EwRk9JRkpGUmxKRlUwZ2dWRThnVTBWRklFTlBVbEpGUTFRZ1ZrVlNVMGxQVGdvSkx5OGdJQ0JIUlU1RlVrRlVSVVFnU1U0Z1RFOURRVXdnUTBGRFNFVWdRbGtnVFVGTFJVWkpURVV0VlZKTUxpQlZVMFVnUTBGRFNFVXRWVkpNVXlCQlV5QUtDUzh2SUNBZ1RVRkxSU0JVUVZKSFJWUlRQd29KYzJWc1ppNWhaR1JGZG1WdWRFeHBjM1JsYm1WeUtDZHBibk4wWVd4c0p5d2dablZ1WTNScGIyNG9aWFpsYm5RcElIc0tDWDBwQ2dvSmMyVnNaaTVoWkdSRmRtVnVkRXhwYzNSbGJtVnlLQ2RoWTNScGRtRjBaU2NzSUdaMWJtTjBhVzl1S0dWMlpXNTBLU0I3Q2dsOUtRb0tDWE5sYkdZdVlXUmtSWFpsYm5STWFYTjBaVzVsY2lnblptVjBZMmduTENCbWRXNWpkR2x2YmlobGRtVnVkQ2tnZXdvSkNTOHZJRlJQUkU4NklHWmxkR05vSUdOMWNtbHZkWE1nVlZKTWN5QnBiaUJ2Y21SbGNpQjBieUJqYjIxdGRXNXBZMkYwWlN3Z0Nna0pMeThnSUNCd2NtVm5aVzVsY21GMFpTQnpkSFZtWmlCMGJ5QnpZWFpsSUdsdUlHTmhZMmhsUHdvSmZTa0tDbjBLQ2dvS0x5OGdWRTlFVHpvZ1kyOXdlU0JtY205dElHcDFjSGwwWlhJZ2JtOTBaV0p2YjJzZ1luVjBJSEpsYlc5MlpTQmxkbVZ1SUhSb1pTQUtMeThnSUNCdWIzUmxZbTl2YXlCd1lYSjBJR0Z1WkNCcWRYTjBJR2hoYm1Sc1pTQjBhR1VnY21WeGRXVnpkQ0JrWVhSaENtWjFibU4wYVc5dUlHZHZiMmRzWlUxbGMzTmhaMlZTWlhOd2IyNXpaVTFwWkdSc1pYZGhjbVVvS1NCN0NnbG1kVzVqZEdsdmJpQnpaVzVrVFdWemMyRm5aU2dwSUhzS0NnbDlDZ29KWm5WdVkzUnBiMjRnYjI1TlpYTnpZV2RsS0NrZ2V3b0tDWDBLQ24wS0Nnb3ZMeUJsYldsMElIUnZiMnhwYm1jZ1ptOXlJRzFoYTJsdVp5QjNaV0l1YW5NZ2QyOXlhd3BtZFc1amRHbHZiaUJsZUhCeVpYTnpUV1Z6YzJGblpWSmxjM0J2Ym5ObFRXbGtaR3hsZDJGeVpTZ3BJSHNLQ24wS0Nnb3ZMeUJVVDBSUE9pQmpiM0I1SUdaeWIyMGdZVzFoZW05dUNtWjFibU4wYVc5dUlHRnRZWHB2YmsxbGMzTmhaMlZTWlhOd2IyNXpaVTFwWkdSc1pYZGhjbVVvS1NCN0NncDlDZ29LTHk4Z1ZFOUVUem9nZDJseVpTQjFjQ0J6ZEdGMGRYTXNJR1Y0WldOMWRHVXNJRzFsZEdFZ2EyVnlibVZzSUhSdklITmhiV1VnWm5KdmJuUmxibVFLWm5WdVkzUnBiMjRnYW5Wd2VYUmxjazFsYzNOaFoyVlNaWE53YjI1elpVMXBaR1JzWlhkaGNtVW9LU0I3Q2dwOUNnb0tMeThnVlZORklGRXpJRTVGVkZkUFVrdEpUa2NnUVU1RUlFVk9WRWxVV1NCVFZFRlVSU0JVVHlCRFQwMU5WVTVKUTBGVVJTQkRUMFJGSUVGT1JDQlNVRU1nUjA5QlRGTUtMeThnSUVWSlZFaEZVaUJVU0ZKUFZVZElJRkJTVDFoWklGTkZVbFpGVWlCUFVpQlVTRkpQVlVkSUlGQk1WVWRKVGlCQ1FVTkxSVTVFSUZORlVsWkZVZ3BtZFc1amRHbHZiaUJ3WVdkbE1uQmhaMlZOWlhOellXZGxVbVZ6Y0c5dWMyVk5hV1JrYkdWM1lYSmxLQ2tnZXdvSkx5OGdDbjBLQ2dvdkx5QlVUMFJQT2lCM2FYSmxJSFZ3SUhOMFlYUjFjeXdnWlhobFkzVjBaU3dnYldWMFlTQnJaWEp1Wld3Z2RHOGdjMkZ0WlNCbWNtOXVkR1Z1WkFwbWRXNWpkR2x2YmlCbmFYUm9kV0pOWlhOellXZGxVbVZ6Y0c5dWMyVk5hV1JrYkdWM1lYSmxLQ2tnZXdvSkx5OGdSazlTUTBVZ1IwbFVTRlZDSUVsT1ZFOGdRa1ZKVGtjZ1FTQk5SVk5UUVVkRklGRlZSVlZGSUV4SlMwVWdVMUZUSUZWVFNVNUhJRU5QVFUxSlZGTXNJQW9KTHk4Z0lDQkNVa0ZPUTBoRlV5QkJUa1FnUVVOVVNVOU9VeUJHVDFJZ1EwOUJURXhGVTBOSlRrY2dWRWhGSUZOVVFWUkZDbjBLQ2dwbWRXNWpkR2x2YmlCamJHbE5aWE56WVdkbFVtVnpjRzl1YzJWTmFXUmtiR1YzWVhKbEtDa2dld29KWm5WdVkzUnBiMjRnYzJWdVpFMWxjM05oWjJVb0tTQjdDZ29KZlFvS0NXWjFibU4wYVc5dUlHOXVUV1Z6YzJGblpTZ3BJSHNLQ2dsOUNnb0pMeThnVkU5RVR6b2dZWFFnYkdWaGMzUWdjMlZ1WkNCemFXZHVZV3dLQ2drdkx5QlVUMFJQT2lCVFZFUkpUaUJTUlZCTUxDQjBhR2x6SUhkcGJHd2dZbVVnYm1WaGRDQmlaV05oZFhObElIZG9aVzRnWVc1MGJISWdhWE1LQ1M4dklDQWdZV1JrWldRc0lFa2dZVzRnYVc1emRHRnVkR3g1SUhSMWNtNGdZVzU1SUd4aGJtZDFZV2RsSUdsdWRHOGdZU0JTUlZCTUlBb0pMeThnSUNCemFXMXBiR0Z5SUhSdklHQnViMlJsSUMxbElDSmpiMlJsTGk0dUltQWdiM0lnWW1GemFDd2dZblYwSUdGdWVTQnNZVzVuZFdGblpTd2daWFpsYmlCTlFWUk1RVUlLQ1M4dklFTnZibTVsWTNScGJtY2dVaUIwYnlCbWRYTmxMV1p6SUhkdmRXeGtJR0psSUhkbGFYSmtMaUJQY2lCMWMybHVaeUJOUVZSTVFVSW5jeUJwYm5SbGNtWmhZMlVLQ1M4dklDQWdabTl5SUhaaGJHbGtZWFJwYm1jZ00wUWdjMk5sYm1WekxDQnZjaUJ3YVdOcmFXNW5JSE52YldWMGFHbHVaeUJ2ZFhRZ1pHVnRieTFtYVd4bGN6OEtmUW9LQ21aMWJtTjBhVzl1SUdScGMyTnZjbVJOWlhOellXZGxVbVZ6Y0c5dWMyVk5hV1JrYkdWM1lYSmxLQ2tnZXdvSkx5OGdkbVZ5ZVNCcGJYQnZjblJoYm5RZ1ptOXlJR1Y0Y0c5eWRHbHVaeUIwYnlCd2NtOTRlU0J6WlhKMlpYSUtmUW9LQ21aMWJtTjBhVzl1SUhOdlkybGhiRTFsYzNOaFoyVlNaWE53YjI1elpVMXBaR1JzWlhkaGNtVW9LU0I3Q2drdkx5QjJZWEpwYjNWeklHTnZibTVsWTNScGIyNXpJSFJ2SUhOdlkybGhiQ0J1WlhSM2IzSnJhVzVuSUdsdWRHVnlabUZqWlhNZ2RHaHliM1ZuYUNCdmJtVWdZMjl1ZEdsbmRXOTFjeUJwYm5SbGNtWmhZMlVLZlFvS0NpOHZJRlJQUkU4NklHTnZiR3hoWWsxbGMzTmhaMlZTWlhOd2IyNXpaVTFwWkdSc1pYZGhjbVVvS1NCN2ZRb0tDbWxtS0hSNWNHVnZaaUJ0YjJSMWJHVWdJVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDVzF2WkhWc1pTNWxlSEJ2Y25SeklEMGdld29KQ1dWdGFYUkViM2R1Ykc5aFpDd0tDUWxrYjIxTlpYTnpZV2RsVW1WemNHOXVjMlZOYVdSa2JHVjNZWEpsTEFvSkNXWnliMjUwWlc1a1RXVnpjMkZuWlZKbGMzQnZibk5sVFdsa1pHeGxkMkZ5WlN3S0NRbGlZV05yWlc1a1RXVnpjMkZuWlZKbGMzQnZibk5sVFdsa1pHeGxkMkZ5WlN3S0NRbDNiM0pyWlhKTlpYTnpZV2RsVW1WemNHOXVjMlZOYVdSa2JHVjNZWEpsTEFvSkNYTmxjblpwWTJWTlpYTnpZV2RsVW1WemNHOXVjMlZOYVdSa2JHVjNZWEpsTEFvSkNXbHVjM1JoYkd4QmMzbHVZMVJ5YVdkblpYSk5hV1JrYkdWM1lYSmxMQW9KQ1dWdVkzSjVjSFJsWkVGalkyVnpjMjl5VW1WemNHOXVjMlZOYVdSa2JHVjNZWEpsTEFvSkNXbHVjM1JoYkd4RmJtTnllWEIwWldSQmMzbHVZMDFwWkdSc1pYZGhjbVVzQ2dvSmZRcDlDZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9yZXBsLmpzX3RpbWVzdGFtcCddPTE2NTE3Mjk3NzgyNjM7CndpbmRvdy5wcmVGU1snbGlicmFyeS9yZXBsLmpzJ109J0x5OGdhVzVxWldOMElISmxjR3dnYzJWeWRtbGpaU0IzYVhSb0lIVjBhV3hwZEdsbGN5QmhkSFJoWTJobFpDQnBiblJ2SUdGdWVTQndZV2RsQ2dvdkx5QkpKMjBnYm05MElHZHZhVzVuSUhSdklIUnllU0JoYm1RZ2NuVnVJR0ZzYkNCdlppQmhZMlVnYVc1emFXUmxJRzE1SUdOMWMzUnZiU0JsZG1Gc2RXRjBiM0lLTHk4Z1VuVnVkR2x0WlM1bGRtRnNkV0YwWlNCcGN5QmhJSEpsWVd3Z2IyNWxMQ0J6YnlCMGFHRjBKM01nWVNCaWFXY2djMmx1YXdvdkx5QlVhR1Z1SUc5aWRtbHZkWE5zZVNCaGJubDBhR2x1WnlCSklHTmhiaUJpZFdsc1pDQnZjaUJoYzNObGJXSnNaU0JoY3lCd2JHRnBiZ292THlCMFpYaDBJR1p2Y2lCa1pYQnNiM2x0Wlc1MElIZHBiR3dnWVd4emJ5Qm9ZWFpsSUdWMllXeDFZWFJsTGdvdkx5QlVhR1Z6WlNCMGFHbHVaM01nWTJGdUlHSmxJR1JsY0dWdVpHVnVZM2tnYVc1cVpXTjBaV1FnZEc4Z2NuVnVJR2x1SUdFZ2QyOXlhMlZ5Q2k4dklHOXlJR0poWTJ0bGJtUXZabkp2Ym5SbGJtUWdjR3gxWjJsdUlHOXlJR1YyWlc0Z1lTQm9ZV05ySUhSdklHTnZiVzExYm1sallYUmxJQW92THlCM2FYUm9JR0p5YjNkelpYSWdZMkZqYUdsdVp5Qm1iM0lnYjJabWJHbHVaU0JqYjI1MFpXNTBMZ292THlCTWIzUnpJRzltSUhkaGVYTWdkRzhnY25WdUlHRWdjSEp2WTJWemN5d2dZV0p6ZEhKaFkzUnBiMjRnYldGclpYTWdhWFFnYlc5eVpTQnlaV3hwWVdKc1pUOEtDZ3BtZFc1amRHbHZiaUJrYjBOdmJuTnZiR1VvTGk0dVlYSm5jeWtnZXdvSlkyOXVjMjlzWlM1c2IyY29ZWEpuY3lrS0NYTmxibVJOWlhOellXZGxLSHNLSUNBZ0lHTnZibk52YkdVNklHRnlaM011YldGd0tHRWdQVDRnWkc5UWNtOXdaWEowZVNoaEtTa3VhbTlwYmlBb0oxeHVKeWtnQ2lBZ2ZTa0tmUW9LWm5WdVkzUnBiMjRnYjI1RGIyNXpiMnhsS0cxbGMzTmhaMlVwSUhzS0lDQmpiMjV6YjJ4bExteHZaeWh0WlhOellXZGxMbU52Ym5OdmJHVXBDaUFnYzJodmQwTnZibk52YkdVb2JXVnpjMkZuWlM1amIyNXpiMnhsTENCdFpYTnpZV2RsTG14cGJtVXBJQzh2SUdWNFpYSmphWE5wYm1jZ2JHVmhjM1FnY0hKcGRtbHNZV2RsQ24wS0NtWjFibU4wYVc5dUlHUnZVSEp2Y0dWeWRIa29LU0I3Q2dwOUNncHNaWFFnYjJ4a1VuVnVWR2x0WlhJS0NpOHZJSE4wWVhKMGN5QmhJSFJvY21WaFpBcG1kVzVqZEdsdmJpQmtiMUoxYmloeWRXNURiMjUwWlhoMEtTQjdDaUFnYkdWMElHVnVkaUE5SUdOeVpXRjBaVVZ1ZG1seWIyNXRaVzUwS0hKMWJrTnZiblJsZUhRcENpQWdiR1YwSUdOMGVDQTlJR055WldGMFpWSjFia052Ym5SbGVIUW9aVzUyS1FvZ0lHeGxkQ0JCVTFRS0lDQjBjbmtnZXdvSkNVRlRWQ0E5SUdGamIzSnVMbkJoY25ObEtBb0pDUWtuS0daMWJtTjBhVzl1SUNncElIdGNiaWNnS3lCeWRXNURiMjUwWlhoMExuTmpjbWx3ZENBcklDZGNibjBwS0NsY2JpY0tDUWtKTENCN1pXTnRZVlpsY25OcGIyNDZJREl3TWpBc0lHeHZZMkYwYVc5dWN6b2dkSEoxWlN3Z2IyNURiMjF0Wlc1ME9pQmJYWDBwQ2dsOUlHTmhkR05vSUNobEtTQjdDZ2tKTHk4Z2NtVjBkWEp1SUhCaGNuTmxjaUJsY25KdmNuTWdjbWxuYUhRZ1lYZGhlUW9nSUNBZ1pHOUZjbkp2Y2lobEtRb0pDWEoxYmtOdmJuUmxlSFF1Wlc1a1pXUWdQU0IwY25WbENna0pjbVYwZFhKdUNnbDlDaUFnWTNSNExtSnZaSGtnUFNCQlUxUXVZbTlrZVZzd1hTNWxlSEJ5WlhOemFXOXVMbU5oYkd4bFpTNWliMlI1Q2lBZ1kzUjRMbUoxWW1Kc1pWUnBiV1VnUFNCRVlYUmxMbTV2ZHlncENpQWdZMjl1YzI5c1pTNXNiMmNvSjNOamNtbHdkRG9uTENCeWRXNURiMjUwWlhoMExuTmpjbWx3ZENrS0lDQnNaWFFnY21WemRXeDBDaUFnZEhKNUlIc0tDUWxwWmlnaGIyeGtVblZ1VkdsdFpYSXBJSHNLQ1FrSmIyeGtVblZ1VkdsdFpYSWdQU0J6WlhSSmJuUmxjblpoYkNod2NuVnVaVTlzWkZKMWJuTXNJREV3TURBcENna0pmUW9KQ1dOMGVDNWlkV0ppYkdWVGRHRmphMXRqZEhndVluVmlZbXhsVTNSaFkyc3ViR1Z1WjNSb0xURmRXekZkSUQwZ0p6eGxkbUZzUGljS0lDQWdJSEpsYzNWc2RDQTlJSEoxYmxOMFlYUmxiV1Z1ZENnd0xDQmJZM1I0TG1KdlpIbGRMQ0JqZEhncENpQWdmU0JqWVhSamFDQW9aU2tnZXdvZ0lDQWdaRzlGY25KdmNpaGxLUW9KQ1hKMWJrTnZiblJsZUhRdVpXNWtaV1FnUFNCMGNuVmxDaUFnSUNCeVpYUjFjbTRLSUNCOUNnbHlaWFIxY200Z2NtVnpkV3gwQ24wS0NtWjFibU4wYVc5dUlHOXVVblZ1S0NrZ2V3b0tmUW9LWm5WdVkzUnBiMjRnWTNKbFlYUmxSVzUyYVhKdmJtMWxiblFvY25WdVEyOXVkR1Y0ZENrZ2V3b2dJR3hsZENCa1pXTnNZWEpoZEdsdmJuTWdQU0I3Q2lBZ0lDQXZMeUJwYm1Oc2RXUmxJRzkxY2lCdmQyNGdRVkJKSUhOdklIZGxJR05oYmlCMWMyVWdhWFFnWm5KdmJTQmpiMlJsSUdWc2MyVjNhR1Z5WlFvZ0lDQWdjblZ1UW05a2VUb2djblZ1UW05a2VTd0tJQ0FnSUdSdlVuVnVPaUJrYjFKMWJpd0tJQ0FnSUdSdlEyOXVjMjlzWlRvZ1pHOURiMjV6YjJ4bExBb2dJQ0FnWkc5UWNtOXdaWEowZVRvZ1pHOVFjbTl3WlhKMGVTd0tDUWxqY21WaGRHVkZiblpwY205dWJXVnVkRG9nWTNKbFlYUmxSVzUyYVhKdmJtMWxiblFzQ2drSlkzSmxZWFJsVW5WdVEyOXVkR1Y0ZERvZ1kzSmxZWFJsVW5WdVEyOXVkR1Y0ZEN3S0NRa3ZMeUJQVFVjc0lHbG1JRWtnWTI5d2VTQjBhR2x6SUdOdmJuUmxlSFFnZEdobGNtVnpJR0ZzYkNCcmFXNWtjeUJ2WmlCM1pXbHlaQ0IwYUdsdVozTWdTU0JqWVc0Z1pHOGdkRzhnZEdobElIQnliMk5sYzNNS0lDQjlDZ2xwWmloMGVYQmxiMllnY25WdVEyOXVkR1Y0ZEM1c2IyTmhiRVJsWTJ4aGNtRjBhVzl1Y3lBOVBTQW5kVzVrWldacGJtVmtKeWtnZXdvSkNYSjFia052Ym5SbGVIUXViRzlqWVd4RVpXTnNZWEpoZEdsdmJuTWdQU0JiWFFvSmZRb0phV1lvZEhsd1pXOW1JSEoxYmtOdmJuUmxlSFF1Ykc5allXeEVaV05zWVhKaGRHbHZibk1nUFQwZ0ozVnVaR1ZtYVc1bFpDY3BJSHNLQ1Fsa1pXSjFaMmRsY2dvSmZRb0pjblZ1UTI5dWRHVjRkQzVzYjJOaGJFUmxZMnhoY21GMGFXOXVjeTV3ZFhOb0tHUmxZMnhoY21GMGFXOXVjeWtLQ1hKbGRIVnliaUJ5ZFc1RGIyNTBaWGgwQ24wS0NncG1kVzVqZEdsdmJpQmpjbVZoZEdWU2RXNURiMjUwWlhoMEtHVnVkaWtnZXdvSlQySnFaV04wTG1GemMybG5iaWhsYm5Zc0lIc0tDUWwwYVcxbGNuTTZJSHQ5TEFvSkNTOHZZblZpWW14bFUzUmhZMnM2SUZ0YkoybHViR2x1WlNCbWRXNWpJREFuTENBblBHVjJZV3crSnl3Z01GMWRMQW9KQ1dKMVltSnNaVXhwYm1VNklDMHhMQW9KQ1dKMVltSnNaVU52YkhWdGJqb2dNQ3dLQ1Fsc2IyTmhiRlpoY21saFlteGxjem9nWjJWMFRHOWpZV3h6S0dWdWRpa3NDZ2tKWVhONWJtTlNkVzV1WlhKek9pQXdMQW9KQ1dGemVXNWpPaUJtWVd4elpTd0tDUWxsYm1SbFpEb2dabUZzYzJVc0Nna0pjR0YxYzJWa09pQm1ZV3h6WlN3S0NRbGpiMjUwYVc1MVpUb2dabUZzYzJVc0lDQXZMeUJVVDBSUE9pQnBiWEJzWlcxbGJuUWdZMjl1ZEdsdWRXRjBhVzl1Y3lBdklHeHZibWNnYW5WdGNITWdabTl5SUdSbFluVm5aMlZ5Q2drSkx5OGdTU0IwYUdsdWF5QmllU0J3ZFhOb2FXNW5JSEoxYmxOMFlYUmxiV1Z1ZENoQlUxUmJhVjBwSUR3dElHa2diMjUwYnlCaElITjBZV05ySUdGdVpDQnlaWE4wYjNKcGJtY2dabTl5S0NrL0Nna0pMeThnVkU5RVR6b2dZMjl1ZEdsdWRXRjBhVzl1Y3l3Z1kyaGxZMnNnWm05eUlHRnViMjU1Ylc5MWN5Qm1kVzVqZEdsdmJuTXNJSFpoY21saFlteGxMMloxYm1OMGFXOXVJR1JsWTJ4aGNtRjBhVzl1Y3dvSkNTOHZJRlJQUkU4NklHRnNiRzkzSUcxdmRtbHVaeUJqZFhKemIzSWdkRzhnWVc1NUlITjViV0p2YkNCMWMybHVaeUJoWkdSeVpYTnpJRzltSUhONWJXSnZiQ0JwYmlCQlUxUUtDUWt2THlCUFVqb2dWMEZKVkNCSlRpQlRWRWxNVEZKVlRrNUpUa2NvS1NCR1QxSWdWVTVRUVZWVFJRb0pmU2tLQ1hKbGRIVnliaUJsYm5ZS2ZRb0tDbVoxYm1OMGFXOXVJR1J2UlhKeWIzSW9aWEp5S1NCN0NnbDBjbmtnZXdvSkNYTmxibVJOWlhOellXZGxLSHNnQ2drSkNXVnljbTl5T2lCbGNuSXViV1Z6YzJGblpTQXJJQ2NuTEFvSkNRa3ZMeUJoYkhkaGVYTWdjM1ZpZEhKaFkzUWdNU0JpWldOaGRYTmxJR052WkdVZ2FYTWdkM0poY0hCcGJtY2dhVzRnWVNBeExXeHBibVVnWm5WdVkzUnBiMjRnWVdKdmRtVUtDUWtKYkdsdVpUb2dZM1Z5Y21WdWRFTnZiblJsZUhRdVluVmlZbXhsVEdsdVpTQXRJREVzQ2drSkNXWnBiR1U2SUdOMWNuSmxiblJEYjI1MFpYaDBMbUoxWW1Kc1pWTjBZV05yVzJOMWNuSmxiblJEYjI1MFpYaDBMbUoxWW1Kc1pWTjBZV05yTG14bGJtZDBhQzB4WFZzeFhTd0tDUWtKYzNSaFkyczZJR04xY25KbGJuUkRiMjUwWlhoMExtSjFZbUpzWlZOMFlXTnJMQW9KQ1Frdkx5Qk1UMDlMSUVGVUlGUklTVk1nUmtGT1Exa2dVMGhKVkNCSFQwOUhURVVnUTBoU1QwMUZJRVJGUWxWSFIwVlNJUW9KQ1Frdkx5QWdJRTFCUzBVZ1FTQk1TVk5VSUU5R0lFRlRVMGxIVGsxRlRsUlRJRTVGUVZKQ1dTQkJUa1FnVTBWT1JDQlVTRVZKVWlCRFZWSlNSVTVVSUZaQlRGVkZJRlJQSUZSSVJTQkdVazlPVkVWT1JBb0pDUWt2THlBZ0lGUlBJRk5CVmtVZ1ZFaEZJRVJGVmtWTVQxQkZVaUJVU1UxRklGSkZVbFZPVGtsT1J5QlVTRVZKVWlCWFNFOU1SU0JRVWs5SFVrRk5JRXBWVTFRZ1ZFOGdVMFZVSUZWUUlFRWdRbEpGUVVzS0NRa0pMeThnSUNCUVQwbE9WQ3dnU2xWVFZDQlVUeUJEU0VWRFN5QlVTRVVnVmtGTVZVVWdUMFlnUVNCTVQwOVRSVXhaSUZSWlVFVkVJRlpCVWtsQlFreEZMaUJUUlVVZ1ZFaEJWRDhnVEU5UFUwVUtDUWtKTHk4Z0lDQlVXVkJKVGtjZ1YwOVNTMU1nU2xWVFZDQkdTVTVGSUVsR0lGbFBWVklnVkU5UFRGTWdVMVZRVUU5U1ZDQlpUMVVnU1U1VFZFVkJSQ0JQUmlCWFQxSkxTVTVISUVGSFFVbE9VMVFnV1U5VkNna0pDUzh2SUZORlJTd2dTVlFuVXlCQklFTkJWRU5JTWpJc0lGZElXU0JYVDFWTVJDQkpJRk5RU1U0Z1RWa2dWMGhGUlV4VElFWkpXRWxPUnlCRFNGSlBUVVVnUkVWQ1ZVZEhSVkluVXlCVFQxVlNRMFVnUTA5RVJRb0pDUWt2THlBZ0lGZElSVTRnVkVoRklFVllVRVZEVkVGVVNVOU9JRWxUSUZSSVFWUWdTVVlnU1NCRVQwNG5WQ0JNU1V0RklFbFVMQ0JKSUVOQlRpQkdTVmdnU1ZRZ1RWbFRSVXhHTGlCVVNFRlVKMU1nVjBoWkNna0pDUzh2SUNBZ1NWUWdVMVZEUzFNZ1UxUkpURXd1SUZSSVJTQlhTRTlNUlNBaVQxQkZUaUJUVDFWU1EwVWdSRTlGVTA0blZDQlBWMFVnV1U5VklFRk9XVlJJU1U1SElpd2dTVk1nUVNCVFJVeEdJQW9KQ1Frdkx5QWdJRVJGUmtWQlZFbE9SeUJRVWtsT1EwbE9VRUZNTENCTVNVdEZJRWxHSUVGTVRDQlVTRVVnUVUxRlVrbERRVTRnUmtGU1RVVlNVeUJFUlVOSlJFVkVJRlJQSUV4RlZDQlFSVTlRVEVVZ1UxUkJVbFpGQ2drSkNTOHZJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBb1NGVk9SMUpaUHlCR1NWZ2dWRWhGSUZSU1FVTlVUMUlnV1U5VlVsTkZURVlwQ2drSkNTOHZJQ0FnVkVoRldTQkVUMDRuVkNCUFYwVWdXVTlWSUVGT1dWUklTVTVITENCT1QxUWdSVlpGVGlCTVNVWkZJRk5WVUZCUFVsUXVJRVpWUTBzZ1QwWkdJRVpQVTFNc0lFWlBVMU1nVDFkRlV5Qk5SUW9KQ1Frdkx5QWdJRVZXUlZKWlZFaEpUa2NnUWtWRFFWVlRSU0JKSjB4TUlFSkZJRlJJUlNCUFRrVWdVMVJWUTBzZ1EweEZRVTVKVGtjZ1ZFaEpVeUJUU0VsVUlFTlBSRVVnVlZBdUNna0pDUzh2SUNBZ1ZFVkRTRTVKUTBGTUlFUkZRbFFnUVZCUVRFbEZVeUJVVHlCUVZVSk1TVk5JU1U1SElFbE9RMDlTVWtWRFZDQkRUMFJGSUVGTVUwOHVJRU5QUkVVZ1NWTWdURWxMUlNCTVNWUlVSVkl1Q2drSmZTa0tDWDBnWTJGMFkyZ2dLR1VwSUhzS0NRbHBaaWdoWlM1dFpYTnpZV2RsTG1sdVkyeDFaR1Z6S0NkamIyNTBaWGgwSUdsdWRtRnNhV1JoZEdWa0p5a3BJSHNLQ1FrSmRHaHliM2NnWlFvSkNYMEtDWDBLZlFvS0NtWjFibU4wYVc5dUlHOXVSWEp5YjNJb1pYSnliM0lwSUhzS0lDQXZMeUJVVDBSUE9pQnpiMjFsSUdkbGJtVnlhV01nY21Wd2IzSjBhVzVuUHdvZ0lHTnZibk52YkdVdWJHOW5LR1Z5Y205eUtRb2dJSE5vYjNkRmNuSnZjaWhsY25KdmNpa0tmUW9LQ2k4dklHRmpZMlZ6Y3lCcGJtWnZJR1p5YjIwZ1lXNXZkR2hsY2lCeVpXMXZkR1VzSUc5eUlHRnViM1JvWlhJZ1kyOXVkR1Y0ZEFvdkx5QWdJSFZ6WldRZ2RHOGdiRzl2YTNWd0lHeHBZbkpoY25rZ1puVnVZM1JwYjI1ekxDQnBibXBsWTNRZ2MyTnlhWEIwY3lBS0x5OGdJQ0JwYm5SdklHOTBhR1Z5SUhCaFoyVnpDbUZ6ZVc1aklHWjFibU4wYVc5dUlHUnZRV05qWlhOemIzSW9jbVZ6Y0c5dWMyVXBJSHNnTHk4Z2MyaHZkV3hrYmlkMElHNWxaV1FnYzJWdVpHVnlTV1FnZDJsMGFDQkVTUW9KQ2dscFppQW9JWEpsYzNCdmJuTmxJSHg4SUhSNWNHVnZaaUJ5WlhOd2IyNXpaUzVtWVdsc0lDRTlJQ2QxYm1SbFptbHVaV1FuS1NCN0Nna0pZMjl1YzI5c1pTNXNiMmNvY21WemNHOXVjMlVwQ2drSmRHaHliM2NnYm1WM0lFVnljbTl5S0NkTlpXMWlaWElnWVdOalpYTnpJR1Z5Y205eU9pQW5MQ0J5WlhOd2IyNXpaU2tLQ1gwZ1pXeHpaU0FLQ2dscFppaDBlWEJsYjJZZ2NtVnpjRzl1YzJVdWIySnFaV04wSUNFOUlDZDFibVJsWm1sdVpXUW5LU0I3Q2drSmJHVjBJRzFsYldKbGNrNWhiV1VnUFNCeVpYTndiMjV6WlM1dlltcGxZM1F1Ym1GdFpTQXJJQ2N1SnlBcklISmxjM0J2Ym5ObExuQnliM0JsY25SNUxtNWhiV1VLQ1Fsc1pYUWdiV1Z0WW1WeVFXTmpaWE56SUQwZ1lYZGhhWFFnYzJWdVpFMWxjM05oWjJVb2V3b0pDUWxoWTJObGMzTnZjam9nYldWdFltVnlUbUZ0WlFvSkNYMHBDZ2tKY21WMGRYSnVJR1J2UVdOalpYTnpiM0lvYldWdFltVnlRV05qWlhOektRb0pDUzh2SUZSUFJFODZJSEpsZEhWeWJpQmtiMEZqWTJWemMyOXlLRzFsYldKbGNrRmpZMlZ6Y3lrZ1B5QmpiMjUyWlhKMElITjBjbWx1WnlCbWRXNWpJSFJ2SUZKUVF3b0pmU0JsYkhObElBb0tDV2xtS0hSNWNHVnZaaUJ5WlhOd2IyNXpaUzVzYVdKeVlYSjVJQ0U5SUNkMWJtUmxabWx1WldRbktTQjdDZ2tKZEhKNUlIc0tDUWtKYkdWMElFRlRWQ0E5SUdGamIzSnVMbkJoY25ObEtBb0pDUWtKSnlobWRXNWpkR2x2YmlBb0tTQjdYRzRuSUNzZ2NtVnpjRzl1YzJVdWJHbGljbUZ5ZVNBcklDZGNibkpsZEhWeWJpQW5JQ3NnY21WemNHOXVjMlV1Ym1GdFpTQXJJQ2M3WEc1OUtTZ3BYRzRuQ2drSkNRa3NJSHRsWTIxaFZtVnljMmx2YmpvZ01qQXlNQ3dnYkc5allYUnBiMjV6T2lCMGNuVmxMQ0J2YmtOdmJXMWxiblE2SUZ0ZGZTa0tDUWtKWTNWeWNtVnVkRU52Ym5SbGVIUXVjMk55YVhCMElEMGdjbVZ6Y0c5dWMyVXViR2xpY21GeWVRb0pDUWxqZFhKeVpXNTBRMjl1ZEdWNGRDNWlkV0ppYkdWR2FXeGxJRDBnY21WemNHOXVjMlV1Wm1sc1pRb0pDUWxqZFhKeVpXNTBRMjl1ZEdWNGRDNWlkV0ppYkdWVGRHRmpheTV3ZFhOb0tGc25hVzVzYVc1bElHWjFibU1nTUNjc0lISmxjM0J2Ym5ObExtWnBiR1VnZkh3Z0p6eGxkbUZzUGljc0lEQmRLUW9KQ1FsaGQyRnBkQ0J5ZFc1VGRHRjBaVzFsYm5Rb01Dd2dDZ2tKQ1FrSlcwRlRWQzVpYjJSNVd6QmRMbVY0Y0hKbGMzTnBiMjR1WTJGc2JHVmxMbUp2WkhsZExDQmpkWEp5Wlc1MFEyOXVkR1Y0ZENrS0NRa0pDUWxqZFhKeVpXNTBRMjl1ZEdWNGRDNXlaWFIxY201bFpDQTlJR1poYkhObENna0pDV1JsYkdWMFpTQmpkWEp5Wlc1MFEyOXVkR1Y0ZEM1aWRXSmliR1ZTWlhSMWNtNEtDUWtKYkdWMElISmxjM1ZzZENBOUlHRjNZV2wwSUhKMWJsQnlhVzFwZEdsMlpTaDdDZ2tKQ1FsMGVYQmxPaUFuU1dSbGJuUnBabWxsY2ljc0Nna0pDUWx1WVcxbE9pQnlaWE53YjI1elpTNXVZVzFsTEFvSkNRbDlMQ0JqZFhKeVpXNTBRMjl1ZEdWNGRDa0tDUWtKWTNWeWNtVnVkRU52Ym5SbGVIUXVjbVYwZFhKdVpXUWdQU0JtWVd4elpRb0pDUWx5WlhSMWNtNGdjbVZ6ZFd4MENna0pmU0JqWVhSamFDQW9kWEFwSUhzS0NRa0pZMjl1YzI5c1pTNXNiMmNvZFhBcENna0pDWFJvY205M0lIVndDZ2tKZlFvSmZTQmxiSE5sQ2dvSmFXWW9kSGx3Wlc5bUlISmxjM0J2Ym5ObExtWjFibU4wYVc5dUlDRTlJQ2QxYm1SbFptbHVaV1FuS1NCN0Nna0phV1lvY21WemNHOXVjMlV1ZG1Gc2RXVXBJSHNLQ1FrSmNtVjBkWEp1SUhKbGMzQnZibk5sTG5aaGJIVmxDZ2tKZlNCbGJITmxJSHNLQ1FrSmNtVnpjRzl1YzJVdWRtRnNkV1VnUFNBb1lYTjVibU1nWm5WdVkzUnBiMjRnS0hKbGNYVmxjM1FzSUM0dUxuQmhjbUZ0Y3lrZ2V3b0pDUWtKTHk4Z1ZFOUVUem9nWVdSa0lIQmhjbUZ0WlhKMFpYSnpDZ2tKQ1Fsc1pYUWdjbVZ6ZFd4MElEMGdZWGRoYVhRZ2MyVnVaRTFsYzNOaFoyVW9ld29KQ1FrSkNYTmpjbWx3ZERvZ0oxeHVjbVYwZFhKdUlDY2dLeUJ5WlhGMVpYTjBMbTVoYldVZ0t5QW5LQ2s3WEc0bkNna0pDUWw5S1FvSkNRa0pjbVYwZFhKdUlISmxjM1ZzZEFvSkNRbDlLUzVpYVc1a0tIUm9hWE1zSUhKbGMzQnZibk5sS1FvSkNRbHlaWFIxY200Z2NtVnpjRzl1YzJVS0NRbDlDZ2w5SUdWc2MyVUtDZ2t2THlCSlRsUkZVa1ZUVkVsT1J5d2dVa1ZCVEVsYVNVNUhJRlJJU1ZNZ1NWTWdWRWhGSUU5T1RGa2dRVUpUVkZKQlExUkpUMDRnVWtWUVRDQkRRVTRLQ1M4dklDQWdSRThnUWxrZ1NWUlRSVXhHTENCWFNVNUVUMWN1VEU5RFFWUkpUMDRnVEU5UFMxVlFVeUJCVWtVZ1EwOU9WRVZZVkNCRVJWQkZUa1JGVGxRS0NXbG1LSFI1Y0dWdlppQnlaWE53YjI1elpTNWhZMk5sYzNOdmNpQWhQU0FuZFc1a1pXWnBibVZrSndvSkNTWW1JSEpsY1hWbGMzUXVZV05qWlhOemIzSXVjM1JoY25SelYybDBhQ2duWlhod2IzSjBjeTRuS1NrZ2V3b0pDWEpsZEhWeWJpQmhkMkZwZENCa2IweHBZbkpoY25sTWIyOXJkWEFvY21WeGRXVnpkQzVoWTJObGMzTnZjaTV6Y0d4cGRDZ25MaWNwV3pGZEtRb0pmU0JsYkhObENnb0tDV2xtS0hSNWNHVnZaaUJ5WlhOd2IyNXpaUzVxYzI5dUlDRTlJQ2QxYm1SbFptbHVaV1FuS1NCN0Nna0pjbVYwZFhKdUlFcFRUMDR1Y0dGeWMyVW9jbVZ6Y0c5dWMyVXVhbk52YmlrZ0x5OGdkMmx1Wkc5M0xteHZZMkYwYVc5dUxDQnViM1FnZG05c1lYUnBiR1VnYjJKcVpXTjBjd29KZlNCbGJITmxDZ29KYVdZb2RIbHdaVzltSUhKbGMzQnZibk5sTGw5aFkyTmxjM052Y2lBaFBTQW5kVzVrWldacGJtVmtKeWtnZXdvSkNYSmxjM0J2Ym5ObExsOWhZMk5sYzNOdmNpQTlJR0Z6ZVc1aklHWjFibU4wYVc5dUlDaHBMQ0JzWldaMExDQnlhV2RvZEN3Z1kzUjRLU0I3Q2drSkNXeGxkQ0J3Y205d0lEMGdZM1I0TG1KMVltSnNaVkJ5YjNCbGNuUjVDZ2tKQ1dOMGVDNWlkV0ppYkdWUWNtOXdaWEowZVNBOUlDY25DZ2tKQ1dsbUtHeGxablFnSmlZZ2JHVm1kRnN3WFNBS0NRa0pDU1ltSUd4bFpuUmJNRjB1ZEhsd1pTQTlQU0FuUVhOemFXZHViV1Z1ZEVWNGNISmxjM05wYjI0bktTQjdDZ2tKQ1FseVpYUjFjbTRnWVhkaGFYUWdZWGRoYVhRZ2MyVnVaRTFsYzNOaFoyVW9ld29KQ1FrSkNYTmpjbWx3ZERvZ2NISnZjQ0FySUNjZ1BTQktVMDlPTG5CaGNuTmxLRnduSnlBcklFcFRUMDR1YzNSeWFXNW5hV1o1S0hKcFoyaDBLU0FySUNkY0p5azdKd29KQ1FrSmZTa0tDUWtKZlNCbGJITmxJSHNLQ1FrSkNYSmxkSFZ5YmlCaGQyRnBkQ0JoZDJGcGRDQnpaVzVrVFdWemMyRm5aU2g3Q2drSkNRa0pjMk55YVhCME9pQndjbTl3Q2drSkNRbDlLUW9KQ1FsOUNna0pmUW9KQ1hKbGRIVnliaUJ5WlhOd2IyNXpaUW9KZlNCbGJITmxDZ2xwWmloMGVYQmxiMllnY21WemNHOXVjMlV1ZG1Gc2RXVWdJVDBnSjNWdVpHVm1hVzVsWkNjS0NRbDhmQ0IwZVhCbGIyWWdjbVZ6Y0c5dWMyVXVkSGx3WlNBaFBTQW5kVzVrWldacGJtVmtKeWtnZXdvSkNYSmxkSFZ5YmlCeVpYTndiMjV6WlM1MllXeDFaU0F2THlCd2NtbHRhWFJwZG1VZ2RIbHdaWE1LQ1gwZ1pXeHpaU0I3Q2drSlpHVmlkV2RuWlhJS0NRbDBhSEp2ZHlCdVpYY2dSWEp5YjNJb0oxVnVhMjV2ZDI0Z1kyOXRiV0Z1WkRvZ0p5d2djbVZ6Y0c5dWMyVXBDZ2w5Q2dvSkx5OGdWRTlFVHpvZ1pYTjBZV0pzYVhOb0lITjBZVzVrWVhKa0lHcDFjSGwwWlhJdGJXVjBZUzFyWlhKdVpXd2dZMjl1Ym1WamRHbHZiZ29KQ2dvSkx5OGdWRTlFVHpvZ2NISmxMV052Ym1acFozVnlaU0J3Y205NGVTMXVaWFIzYjNKcmFXNW5JR3hwYTJVZ2RHaGxJR1Z1WjJsdVpTQmtiMlZ6TENCbWNtOXVkR1Z1WkFvS0Nna3ZMeUJVVDBSUE9pQmhibmtnYzNsemRHVnRMV3hsZG1Wc0wzQnliMk5sYzNNdGJHVjJaV3dnYzJWeWRtbGpaU0J0YjI1cGRHOXlhVzVuTENCallXeHNMVzkxZEFvS0NncDlDZ29LQ21aMWJtTjBhVzl1SUdSdlRHbGljbUZ5ZVV4dmIydDFjQ2htZFc1amRHbHZiazVoYldVcElIc0tDV3hsZENCc2FXSnlZWEo1Um1sc1pYTWdQU0JQWW1wbFkzUXVhMlY1Y3loR1V5NTJhWEowZFdGc0tRb0pabTl5S0d4bGRDQnBJRDBnTURzZ2FTQThJR3hwWW5KaGNubEdhV3hsY3k1c1pXNW5kR2c3SUdrckt5a2dld29KQ1dsbUtDRnNhV0p5WVhKNVJtbHNaWE5iYVYwdWMzUmhjblJ6VjJsMGFDZ25iR2xpY21GeWVTOG5LU2tnZXdvSkNRbGpiMjUwYVc1MVpRb0pDWDBLQ1Fsc1pYUWdiR2xpY21GeWVVTnZaR1VnUFNCQmNuSmhlUzVtY205dEtFWlRMblpwY25SMVlXeGJiR2xpY21GeWVVWnBiR1Z6VzJsZFhTNWpiMjUwWlc1MGN5a0tDUWtKTG0xaGNDaG1kVzVqZEdsdmJpQW9ZeWtnZXlCeVpYUjFjbTRnVTNSeWFXNW5MbVp5YjIxRGFHRnlRMjlrWlNoaktTQjlLUW9KQ1FrdWFtOXBiaWduSnlrS0NRa3ZMeUJVVDBSUE9pQnRZV3RsSUhSb1pYTmxJSFJ2YTJWdWN5QnBibk4wWldGa0lHOW1JR1oxYm1OMGFXOXVJR1p2Y2lCamNtOXpjeUJzWVc1bmRXRm5aU0J6ZFhCd2IzSjBDZ2tKYVdZb2JHbGljbUZ5ZVVOdlpHVXViV0YwWTJnb2JtVjNJRkpsWjBWNGNDZ0tDUWtKQ1NkbWRXNWpkR2x2Ymx4Y2N5Y2dLeUJtZFc1amRHbHZiazVoYldVZ0t5QW5MaW8vWEZ4N0p5a3BLU0I3Q2drSkNYSmxkSFZ5YmlCN0Nna0pDUWt2THlCVVQwUlBPaUJ5WlhOd2IyNXpaVWxrQ2drSkNRbHNhV0p5WVhKNU9pQnNhV0p5WVhKNVEyOWtaU3dLQ1FrSkNXNWhiV1U2SUdaMWJtTjBhVzl1VG1GdFpTd0tDUWtKQ1dacGJHVTZJR3hwWW5KaGNubEdhV3hsYzF0cFhTd0tDUWtKQ1M4dklGUlBSRTg2SUdFZ2FHRnphQ0IyWVd4MVpUOGdZMjlrWlNCemFXZHVhVzVuUHdvSkNRbDlDZ2tKZlNBdktpQmxiSE5sSUhzS0NRa0piR1YwSUdOMWNuSmxiblJUWlhOemFXOXVJRDBnZDJsdVpHOTNMbUZqWlM1blpYUldZV3gxWlNncENna0pDV2xtSUNoamRYSnlaVzUwVTJWemMybHZiaTVwYm1Oc2RXUmxjeWduWm5WdVkzUnBiMjRnSnlBcklHWjFibU4wYVc5dVRtRnRaU2twSUhzS0NRa0pDWEpsZEhWeWJpQjdDZ2tKQ1FrSmJHbGljbUZ5ZVRvZ1kzVnljbVZ1ZEZObGMzTnBiMjRzQ2drSkNRa0pibUZ0WlRvZ0p6eGxkbUZzUGljc0Nna0pDUWtKTHk4Z1ZFOUVUem9nWVNCb1lYTm9JSFpoYkhWbFB3b0pDUWtKZlFvSkNRbDlDZ2tKZlNBcUx5QXZMeUJEVDBSRklGSkZWa2xGVnl3Z2RHaHBjeUJwY3lCM2FIa2dkMlVnYm1WbFpDQmthV1ptWlhKbGJuUWdZMjl1ZEdWNGRITXNJR1p2Y2lCTWFYWmxJR1ZrYVhScGJtY0tDWDBLZlFvS0NncHNaWFFnZEdoeVpXRmtjeUE5SUh0OUNnb3ZMeUJUU1U1TENtWjFibU4wYVc5dUlHZGxkRlJvY21WaFpITW9LU0I3Q2dseVpYUjFjbTRnU2xOUFRpNXpkSEpwYm1kcFpua29UMkpxWldOMExtdGxlWE1vZEdoeVpXRmtjeWtLQ1FrdWJXRndLR1oxYm1OMGFXOXVJQ2h5ZFc1SlpDa2dld29KQ1FseVpYUjFjbTRnV3dvSkNRa0pjblZ1U1dSYk1GMGdLeUFuS2lvcUtpb3FKeUFySUhKMWJrbGtXM0oxYmtsa0xteGxibWQwYUMweFhTd0tDUWtKQ1hSb2NtVmhaSE5iY25WdVNXUmRMbUoxWW1Kc1pWUnBiV1VLQ1FrSlhRb0pDWDBwS1FwOUNncGpiMjV6ZENCVVNGSkZRVVJmVTBGV1JWOVVTVTFGSUQwZ015QXFJREV3TURBZ0x5OGdLaUEyTUFvS1puVnVZM1JwYjI0Z2NISjFibVZQYkdSU2RXNXpLQ2tnZXdvSkx5OGdhU0JxZFhOMElIUm9iM1ZuYUhRZ2JXRjVZbVVnWVNCMGNtRnVjM0JwYkdWeUlHTnZiblpsY25SbFpDQmpiMlJsSUhSdklIWmhjaUIzYUdsamFDQmphR0Z1WjJWeklITmpiM0JsSUdGdVpBb0pMeThnSUNCamIzVnNaQ0J0WVd0bElHbDBJSFoxYkc1bGNtRmliR1UvQ2dsc1pYUWdjblZ1U1dSeklEMGdUMkpxWldOMExtdGxlWE1vZEdoeVpXRmtjeWtLQ1dadmNpaHNaWFFnYVNBOUlEQTdJR2tnUENCeWRXNUpaSE11YkdWdVozUm9PeUJwS3lzcElIc0tDUWxzWlhRZ2MyVnVaR1Z5U1dRZ1BTQjBhSEpsWVdSelczSjFia2xrYzF0cFhWMHVjMlZ1WkdWeVNXUUtDUWxwWmloMGFISmxZV1J6VzNKMWJrbGtjMXRwWFYwdVpXNWtaV1FLQ1FrSkppWWdSR0YwWlM1dWIzY29LU0F0SUhSb2NtVmhaSE5iY25WdVNXUnpXMmxkWFM1aWRXSmliR1ZVYVcxbElENGdWRWhTUlVGRVgxTkJWa1ZmVkVsTlJTa2dld29KQ1Fsa1pXeGxkR1VnZEdoeVpXRmtjMXR5ZFc1SlpITmJhVjFkQ2drSkNXUnZVM1JoZEhWektIc2djMlZ1WkdWeVNXUTZJSE5sYm1SbGNrbGtJSDBzSUdaaGJITmxLUW9KQ1gwS0NYMEtDV2xtS0U5aWFtVmpkQzVyWlhsektIUm9jbVZoWkhNcExteGxibWQwYUNBOVBTQXdLU0I3Q2drSlkyeGxZWEpKYm5SbGNuWmhiQ2h2YkdSU2RXNVVhVzFsY2lrS0NRbHZiR1JTZFc1VWFXMWxjaUE5SUc1MWJHd0tDWDBLZlFvS0NtRnplVzVqSUdaMWJtTjBhVzl1SUdSdlUzUmhkSFZ6S0dSdlUyeGxaWEFwSUhzS0NXbG1LSFI1Y0dWdlppQmpkWEp5Wlc1MFEyOXVkR1Y0ZENBOVBTQW5kVzVrWldacGJtVmtKeWtnZXdvSkNYSmxkSFZ5YmdvSmZRb0pkSEo1SUhzS0NRbHNaWFFnYzNSaGRIVnpWWEJrWVhSbElEMGdleUFLQ1FrSkx5OGdZV3gzWVhseklITjFZblJ5WVdOMElERWdZbVZqWVhWelpTQmpiMlJsSUdseklIZHlZWEJ3YVc1bklHbHVJR0VnTVMxc2FXNWxJR1oxYm1OMGFXOXVJR0ZpYjNabENna0pDV3hwYm1VNklHTjFjbkpsYm5SRGIyNTBaWGgwTG1KMVltSnNaVXhwYm1VZ0xTQXhMQW9KQ1FsemRHRmphem9nWTNWeWNtVnVkRU52Ym5SbGVIUXVZblZpWW14bFUzUmhZMnNzQ2drSkNXWnBiR1U2SUdOMWNuSmxiblJEYjI1MFpYaDBMbUoxWW1Kc1pWTjBZV05yVzJOMWNuSmxiblJEYjI1MFpYaDBMbUoxWW1Kc1pWTjBZV05yTG14bGJtZDBhQzB4WFZzeFhTd0tDUWw5Q2drSmFXWW9ZM1Z5Y21WdWRFTnZiblJsZUhRdVpXNWtaV1FwSUhzS0NRa0pjM1JoZEhWelZYQmtZWFJsTG5OMGIzQndaV1FnUFNCblpYUlVhSEpsWVdSektDa0tDUWw5SUdWc2MyVWdhV1lnS0dOMWNuSmxiblJEYjI1MFpYaDBMbkJoZFhObFpDa2dld29KQ1FsemRHRjBkWE5WY0dSaGRHVXVjR0YxYzJWa0lEMGdaMlYwVkdoeVpXRmtjeWdwQ2drSmZTQmxiSE5sSUhzS0NRa0pjM1JoZEhWelZYQmtZWFJsTG5OMFlYUjFjeUE5SUdkbGRGUm9jbVZoWkhNb0tRb0pDWDBLQ1FselpXNWtUV1Z6YzJGblpTaHpkR0YwZFhOVmNHUmhkR1VwT3dvSkNTOHZZMjl1YzI5c1pTNXNiMmNvWTNWeWNtVnVkRU52Ym5SbGVIUXVZblZpWW14bFRHbHVaU2tLQ1Frdkx5QmtiMjRuZENCemJHVmxjQ0J2YmlCc2FXSnlZWEo1SUdaMWJtTjBhVzl1Y3dvSkNXbG1LR1J2VTJ4bFpYQWdKaVlnWTNWeWNtVnVkRU52Ym5SbGVIUXVZblZpWW14bFJtbHNaU0E5UFNBblBHVjJZV3crSnlrZ2V3b0pDUWxqYjI1emIyeGxMbXh2WnlnblJFVk1RVmxKVGtjaElDY2dLeUJqZFhKeVpXNTBRMjl1ZEdWNGRDNWlkV0ppYkdWTWFXNWxLUW9KQ1FsaGQyRnBkQ0J1WlhjZ1VISnZiV2x6WlNoeVpYTnZiSFpsSUQwK0lITmxkRlJwYldWdmRYUW9jbVZ6YjJ4MlpTd2dSRVZHUVZWTVZGOVRTRTlTVkY5RVJVeEJXU2twQ2drSmZRb0pmU0JqWVhSamFDQW9aU2tnZXdvSkNXbG1LR1V1YldWemMyRm5aUzVwYm1Oc2RXUmxjeWduWTI5dWRHVjRkQ0JwYm5aaGJHbGtZWFJsWkNjcEtTQjdDZ2tKQ1M4dklHbG5ibTl5WlN3Z2FHRndjR1Z1Y3lCdmJpQnlaV1p5WlhOb0lITnZiV1YwYVcxbGN3b0pDWDBnWld4elpTQjdDZ29KQ1gwS0NYMEtmUW9LWm5WdVkzUnBiMjRnWjJWMFRHOWpZV3h6S0dOMGVDa2dld29KYkdWMElISmxjM1ZzZENBOUlHTjBlQzVzYjJOaGJGWmhjbWxoWW14bGN3b0phV1lvZEhsd1pXOW1JR04wZUM1c2IyTmhiRVJsWTJ4aGNtRjBhVzl1Y3lBOVBTQW5kVzVrWldacGJtVmtKeWtnZXdvSkNYSmxkSFZ5YmlCN2ZRb0pmUW9KWm05eUtHeGxkQ0JwSUQwZ01Ec2dhU0E4SUdOMGVDNXNiMk5oYkVSbFkyeGhjbUYwYVc5dWN5NXNaVzVuZEdnN0lHa3JLeWtnZXdvSkNXeGxkQ0JzYjJOaGJFTjBlQ0E5SUdOMGVDNXNiMk5oYkVSbFkyeGhjbUYwYVc5dWMxdHBYUW9KQ1d4bGRDQnNiMk5oYkZaaGNtbGhZbXhsY3lBOUlFOWlhbVZqZEM1clpYbHpLR3h2WTJGc1EzUjRLUW9KQ1dadmNpaHNaWFFnYkNBOUlEQTdJR3dnUENCc2IyTmhiRlpoY21saFlteGxjeTVzWlc1bmRHZzdJR3dyS3lrZ2V3b0pDUWx5WlhOMWJIUmJiRzlqWVd4V1lYSnBZV0pzWlhOYmJGMWRJRDBnZEhsd1pXOW1JR3h2WTJGc1EzUjRXMnh2WTJGc1ZtRnlhV0ZpYkdWelcyeGRYUW9KQ1gwS0NRbHNaWFFnYkc5allXeFFjbTl3WlhKMGFXVnpJRDBnVDJKcVpXTjBMbWRsZEU5M2JsQnliM0JsY25SNVRtRnRaWE1vYkc5allXeERkSGdwQ2drSlptOXlLR3hsZENCcklEMGdNRHNnYXlBOElHeHZZMkZzVUhKdmNHVnlkR2xsY3k1c1pXNW5kR2c3SUdzckt5a2dld29KQ1FseVpYTjFiSFJiYkc5allXeFFjbTl3WlhKMGFXVnpXMnRkWFNBOUlIUjVjR1Z2WmlCc2IyTmhiRU4wZUZ0c2IyTmhiRkJ5YjNCbGNuUnBaWE5iYTExZENna0pmUW9KQ1d4bGRDQndZWEpsYm5SUFltcGxZM1FnUFNCUFltcGxZM1F1WjJWMFVISnZkRzkwZVhCbFQyWW9iRzlqWVd4RGRIZ3BDZ2tKZDJocGJHVW9jR0Z5Wlc1MFQySnFaV04wTG1OdmJuTjBjblZqZEc5eUlDRTlQU0JQWW1wbFkzUUtDUWtKSmlZZ2NHRnlaVzUwVDJKcVpXTjBMbU52Ym5OMGNuVmpkRzl5SUNFOVBTQkJjbkpoZVNrZ2V3b0pDUWxzWlhRZ2JHOWpZV3hRY205d1pYSjBhV1Z6SUQwZ1QySnFaV04wTG1kbGRFOTNibEJ5YjNCbGNuUjVUbUZ0WlhNb2NHRnlaVzUwVDJKcVpXTjBLUW9KQ1FsbWIzSW9iR1YwSUdvZ1BTQXdPeUJxSUR3Z2JHOWpZV3hRY205d1pYSjBhV1Z6TG14bGJtZDBhRHNnYWlzcktTQjdDZ2tKQ1FseVpYTjFiSFJiYkc5allXeFFjbTl3WlhKMGFXVnpXMnBkWFNBOUlIUjVjR1Z2WmlCc2IyTmhiRU4wZUZ0c2IyTmhiRkJ5YjNCbGNuUnBaWE5iYWwxZENna0pDWDBLQ1FrSmNHRnlaVzUwVDJKcVpXTjBJRDBnVDJKcVpXTjBMbWRsZEZCeWIzUnZkSGx3WlU5bUtIQmhjbVZ1ZEU5aWFtVmpkQ2tLQ1FsOUNnbDlDZ2x5WlhSMWNtNGdjbVZ6ZFd4MENuMEtDZ3BoYzNsdVl5Qm1kVzVqZEdsdmJpQmtiMEp2YjNSemRISmhjQ2h6WTNKcGNIUXNJR2RzYjJKaGJFTnZiblJsZUhRcElIc0tDV3hsZENCaWIyOTBjM1J5WVhCU2RXNURiMjUwWlhoMElEMGdld29KQ1dWdVpHVmtPaUJtWVd4elpTd0tDUWx6ZEc5d2NHVmtPaUJtWVd4elpTd0tDUWx3WVhWelpXUTZJR1poYkhObExBb0pDWEpsZEhWeWJtVmtPaUJtWVd4elpTd0tDUWx6Wlc1a1pYSkpaRG9nTUN3Z0x5OGdZV3gzWVhseklHTnZiV1Z6SUdaeWIyMGdabkp2Ym5SbGJtUS9DZ2tKWW5WaVlteGxVM1JoWTJzNklGdGJKMmx1YkdsdVpTQm1kVzVqSURBbkxDQW5iR2xpY21GeWVTOXlaWEJzTG1wekp5d2dNRjFkTEFvSkNXeHZZMkZzVm1GeWFXRmliR1Z6T2lCN0Nna0pDVzF2WkhWc1pUb2dKMjlpYW1WamRDY3NDZ2tKQ1U5aWFtVmpkRG9nSjJaMWJtTjBhVzl1Snl3S0NRa0pRWEp5WVhrNklDZG1kVzVqZEdsdmJpY3NDZ2tKQ1dOdmJuTnZiR1U2SUNkdlltcGxZM1FuTEFvSkNYMHNDZ2tKYkc5allXeEVaV05zWVhKaGRHbHZibk02SUZ0N0Nna0pDVzF2WkhWc1pUb2dWMFZDUkZKSlZrVlNYMEZRU1N3S0NRa0pUMkpxWldOME9pQlBZbXBsWTNRc0Nna0pDVUZ5Y21GNU9pQkJjbkpoZVN3S0NRa0pVSEp2YldselpUb2dVSEp2YldselpTd0tDUWtKWTI5dWMyOXNaVG9nWTI5dWMyOXNaU3dLQ1FsOVhTd0tDWDBLQ1dKdmIzUnpkSEpoY0ZKMWJrTnZiblJsZUhRdWJHOWpZV3hFWldOc1lYSmhkR2x2Ym5OYk1GMHVZM1Z5Y21WdWRFTnZiblJsZUhRZ1BTQmliMjkwYzNSeVlYQlNkVzVEYjI1MFpYaDBDZ2xpYjI5MGMzUnlZWEJTZFc1RGIyNTBaWGgwTG14dlkyRnNWbUZ5YVdGaWJHVnpMbU4xY25KbGJuUkRiMjUwWlhoMElEMGdKMjlpYW1WamRDY0tDZ2xwWmloMGVYQmxiMllnWkc5U2RXNGdQVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDUWxzWlhRZ2NtVndiRXhwWW5KaGNua2dQU0JCY25KaGVTNW1jbTl0S0VaVExuWnBjblIxWVd4YkoyeHBZbkpoY25rdmNtVndiQzVxY3lkZExtTnZiblJsYm5SektRb0pDUWt1YldGd0tHWjFibU4wYVc5dUlDaGpLU0I3SUhKbGRIVnliaUJUZEhKcGJtY3Vabkp2YlVOb1lYSkRiMlJsS0dNcElIMHBMbXB2YVc0b0p5Y3BDZ2tKZEhKNUlIc0tDUWtKYkdWMElFRlRWQ0E5SUdGamIzSnVMbkJoY25ObEtBb0pDUWtKSnlobWRXNWpkR2x2YmlBb0tTQjdYRzRuSUNzZ2NtVndiRXhwWW5KaGNua2dLeUFuWEc1eVpYUjFjbTRnWkc5U2RXNDdmU2tvS1Z4dUp3b0pDUWtKTENCN1pXTnRZVlpsY25OcGIyNDZJREl3TWpBc0lHeHZZMkYwYVc5dWN6b2dkSEoxWlN3Z2IyNURiMjF0Wlc1ME9pQmJYWDBwQ2drSkNXSnZiM1J6ZEhKaGNGSjFia052Ym5SbGVIUXVjMk55YVhCMElEMGdjbVZ3YkV4cFluSmhjbmtLQ1FrSllYZGhhWFFnY25WdVUzUmhkR1Z0Wlc1MEtEQXNJQW9KQ1FrSkNWdEJVMVF1WW05a2VWc3dYUzVsZUhCeVpYTnphVzl1TG1OaGJHeGxaUzVpYjJSNVhTd2dZbTl2ZEhOMGNtRndVblZ1UTI5dWRHVjRkQ2tLQ1FrSlltOXZkSE4wY21Gd1VuVnVRMjl1ZEdWNGRDNXlaWFIxY201bFpDQTlJR1poYkhObENna0pDV1JsYkdWMFpTQmliMjkwYzNSeVlYQlNkVzVEYjI1MFpYaDBMbUoxWW1Kc1pWSmxkSFZ5YmdvSkNRbFBZbXBsWTNRdVlYTnphV2R1S0dkc2IySmhiRU52Ym5SbGVIUXNJR0p2YjNSemRISmhjRkoxYmtOdmJuUmxlSFF1Ykc5allXeEVaV05zWVhKaGRHbHZibk5iTUYwcENna0pmU0JqWVhSamFDQW9aU2tnZXdvSkNRbGpiMjV6YjJ4bExteHZaeWhsS1FvSkNYMEtDWDBLQ2dsaWIyOTBjM1J5WVhCU2RXNURiMjUwWlhoMExteHZZMkZzUkdWamJHRnlZWFJwYjI1ekxuVnVjMmhwWm5Rb1oyeHZZbUZzUTI5dWRHVjRkQ2tLQ1dKdmIzUnpkSEpoY0ZKMWJrTnZiblJsZUhRdWJHOWpZV3hXWVhKcFlXSnNaWE1nUFNCaGQyRnBkQ0JuWlhSTWIyTmhiSE1vWW05dmRITjBjbUZ3VW5WdVEyOXVkR1Y0ZENrS0NXSnZiM1J6ZEhKaGNGSjFia052Ym5SbGVIUXVjbVYwZFhKdVpXUWdQU0JtWVd4elpRb0paR1ZzWlhSbElHSnZiM1J6ZEhKaGNGSjFia052Ym5SbGVIUXVZblZpWW14bFVtVjBkWEp1Q2dscFppaDBlWEJsYjJZZ1pHOVNkVzRnSVQwZ0ozVnVaR1ZtYVc1bFpDY3BJSHNLQ1FsMGNua2dld29KQ1FsaWIyOTBjM1J5WVhCU2RXNURiMjUwWlhoMExuTmpjbWx3ZENBOUlITmpjbWx3ZEFvSkNRbGliMjkwYzNSeVlYQlNkVzVEYjI1MFpYaDBMbUoxWW1Kc1pVWnBiR1VnUFNBblBHVjJZV3crSndvSkNRbGliMjkwYzNSeVlYQlNkVzVEYjI1MFpYaDBMbUoxWW1Kc1pWTjBZV05yTG5CMWMyZ29XeWRwYm14cGJtVWdablZ1WXlBd0p5d2dKenhsZG1Gc1BpY3NJREJkS1FvSkNRbHNaWFFnY21WemRXeDBJRDBnWVhkaGFYUWdaRzlTZFc0b1ltOXZkSE4wY21Gd1VuVnVRMjl1ZEdWNGRDa2dMeThnVGs5WElFbFVKMU1nVWtWRFZWSlRTVlpGQ2drSkNXSnZiM1J6ZEhKaGNGSjFia052Ym5SbGVIUXVjbVYwZFhKdVpXUWdQU0JtWVd4elpRb0pDUWxwWmloaWIyOTBjM1J5WVhCU2RXNURiMjUwWlhoMExtVnVaR1ZrS1NCN0Nna0pDUWx5WlhSMWNtNGdleUF2THlCaGFHaG9JSE5oYldVZ1lYTWdjMjl0Wlhkb1pYSmxJR1ZzYzJVZ2FXNGdaRzlCWTJObGMzTnZjZ29KQ1FrSkNYTjBiM0J3WldRNklISmxjM1ZzZEN3S0NRa0pDWDBLQ1FrSmZTQmxiSE5sSUdsbUlDaGliMjkwYzNSeVlYQlNkVzVEYjI1MFpYaDBMbUZ6ZVc1aktTQjdDZ2tKQ1FseVpYUjFjbTRnZXlBS0NRa0pDUWxoYzNsdVl6b2daMlYwVkdoeVpXRmtjeWdwTEFvSkNRa0pmUW9KQ1FsOUlHVnNjMlVnZXdvSkNRa0pjbVYwZFhKdUlIc2dDZ2tKQ1FrSmNtVnpkV3gwT2lCeVpYTjFiSFFzQ2drSkNRbDlDZ2tKQ1gwS0NRbDlJR05oZEdOb0lDaGxLU0I3Q2drSkNXTnZibk52YkdVdVpYSnliM0lvWlNrS0NRbDlDZ2w5SUdWc2MyVWdld29KQ1hSb2NtOTNJRzVsZHlCRmNuSnZjaWduUW05dmRITjBjbUZ3SUdaaGFXeGxaQ0VuS1FvSmZRcDlDZ29LWVhONWJtTWdablZ1WTNScGIyNGdiMjVHY205dWRHVnVaQ2h5WlhCc2VVWjFibU4wYVc5dUxDQnlaWEYxWlhOMEtTQjdDZ2xwWmlnaGNtVnhkV1Z6ZENrZ2V3b0pDUzh2SUc1dklHVnljbTl5SUdKbFkyRjFjMlVnWW1GamEyVnVaQ0IwYVcxbGN5QnZkWFFLQ1FseVpYUjFjbTRLQ1gwZ1pXeHpaUW9LQ1dsbUtISmxjWFZsYzNRdWMzUmhkSFZ6S1NCN0Nna0phV1lvZEhsd1pXOW1JRUZEUlNBaFBTQW5kVzVrWldacGJtVmtKeWtnZXdvSkNRbEJRMFV1WW5WaVlteGxSbWxzWlNBOUlISmxjWFZsYzNRdVptbHNaUW9KQ1gwS0NRa3ZMeUJtZFhSMWNtVWdZMjlrYVc1blB3b0pDV2xtS0hSNWNHVnZaaUJ2YmxOMFlYUjFjeUFoUFNBbmRXNWtaV1pwYm1Wa0p5a2dld29KQ1FseVpYUjFjbTRnYjI1VGRHRjBkWE1vY21WeGRXVnpkQ2tLQ1FsOUNnbDlJR1ZzYzJVS0NnbHBaaWgwZVhCbGIyWWdjbVZ4ZFdWemRDNXpZM0pwY0hRZ0lUMGdKM1Z1WkdWbWFXNWxaQ2NwSUhzS0NRbHpaWFJVYVcxbGIzVjBLR1oxYm1OMGFXOXVJQ2dwSUhzS0NRa3ZMeUJ5WlhCc0lHUnZiU0J6ZEhWbVpqOGdjSEp2WW1GaWJIa2dibTkwQ2drSmRISjVJSHNLQ1FrSmJHVjBJSFpoYkhWbElEMGdaWFpoYkNnbktHWjFibU4wYVc5dUlDZ3BlMXh1SnlBcklISmxjWFZsYzNRdWMyTnlhWEIwSUNzZ0oxeHVmU2tvS1NjcENna0pDV3hsZENCMGVYQmxJRDBnZEhsd1pXOW1JSFpoYkhWbENna0pDV2xtS0hSNWNHVWdQVDBnSjJaMWJtTjBhVzl1SnlrZ2V3b0pDUWtKZG1Gc2RXVWdQU0IyWVd4MVpTQXJJQ2NuQ2drSkNYMGdaV3h6WlNCcFppQW9kSGx3WlNBOVBTQW5iMkpxWldOMEp5a2dld29KQ1FrSmRIbHdaU0E5SUNkcWMyOXVKd29KQ1FrSmRtRnNkV1VnUFNCS1UwOU9Mbk4wY21sdVoybG1lU2hQWW1wbFkzUXVZWE56YVdkdUtIc0tDUWtKQ1FsZllXTmpaWE56YjNJNklIUnlkV1VLQ1FrSkNYMHNJSFpoYkhWbElIeDhJSHQ5S1NrS0NRa0pmU0JsYkhObElIc0tDUWtKQ1haaGJIVmxJRDBnU2xOUFRpNXpkSEpwYm1kcFpua29kbUZzZFdVcENna0pDWDBLQ1FrSmJHVjBJSEpsYzNWc2RDQTlJSHNLQ1FrSkNYSmxjM0J2Ym5ObFNXUTZJSEpsY1hWbGMzUXVjbVZ6Y0c5dWMyVkpaQ3dLQ1FrSkNYUjVjR1U2SUhSNWNHVXNDZ2tKQ1FsdVlXMWxPaUJ5WlhGMVpYTjBMbk5qY21sd2RDQUtDUWtKZlFvSkNRbHlaWE4xYkhSYmRIbHdaVjBnUFNCMllXeDFaUW9KQ1FseVpYUjFjbTRnY21Wd2JIbEdkVzVqZEdsdmJpaHlaWE4xYkhRcENna0pmU0JqWVhSamFDQW9aU2tnZXdvSkNRbGtaV0oxWjJkbGNnb0pDUWx5WlhCc2VVWjFibU4wYVc5dUtIc0tDUWtKQ1hKbGMzQnZibk5sU1dRNklISmxjWFZsYzNRdWNtVnpjRzl1YzJWSlpDd0tDUWtKQ1c1aGJXVTZJSEpsY1hWbGMzUXVjMk55YVhCMExDQUtDUWtKQ1daaGFXdzZJR1V1YldWemMyRm5aU3dLQ1FrSmZTa0tDUWw5Q2drSmZTd2dNakF3S1FvSmZTQmxiSE5sQ2dvSmFXWW9kSGx3Wlc5bUlISmxjWFZsYzNRdVlXTmpaWE56YjNJZ0lUMGdKM1Z1WkdWbWFXNWxaQ2NLQ1FrSkppWWdkSGx3Wlc5bUlHOXVRV05qWlhOemIzSWdJVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDUWt2THlCVVQwUlBPaUJwYm1OaGMyVWdkMlVnYm1WbFpDQlNSVkJNSUc5dUlHWnliMjUwWlc1a0lHSmxZMkYxYzJVZ2IyWWdRMU5RQ2drSmJHVjBJR3hwWWlBOUlHOXVRV05qWlhOemIzSW9jbVZ4ZFdWemRDa0tDUWx5WlhSMWNtNGdjbVZ3YkhsR2RXNWpkR2x2Ymloc2FXSXBDZ2w5SUdWc2MyVUtDZ2t2THlCWFNFRlVJRWxHSUZWU1RGTWdWMFZTUlNCWVVFRlVTRk1nVkU4Z1JsVk9RMVJKVDA1VFB5QkJUa1FnVWs5VlZFbE9SeUJVUVVKTVJWTWdWMGhGVWtVZ1NsVlRWQ0JHVlU1RFZFbFBUbE0vQ2dscFppaDBlWEJsYjJZZ2NtVnhkV1Z6ZEM1aFkyTmxjM052Y2lBaFBTQW5kVzVrWldacGJtVmtKd29KQ1FrbUppQnlaWEYxWlhOMExtRmpZMlZ6YzI5eUxuTjBZWEowYzFkcGRHZ29KMlY0Y0c5eWRITXVKeWtwSUhzS0NRa3ZMeUJVVDBSUE9pQnlaUzFtYjNKM1lYSmtJR0poWTJzZ2RHOGdkR2hsSUdKaFkydGxibVFnWVdOalpYTnpiM0lnWW1WallYVnpaUW9KQ1M4dklDQWdkMjl5YTJWeUlITm9ZWEpsY3lCaElHeHZZMkZzSUhOMGIzSmhaMlVzSUhSb2FYTWdhWE1nZDJoaGRBb0pDUzh2SUNBZ1NTQnRaV0Z1ZENCaWVTQWlZWE5ySUd4aGJtZDFZV2RsSUhObGNuWmxjaUl1SUU1dklHMWhkSFJsY2lCcFpnb0pDUzh2SUNBZ1lTQnlaWEYxWlhOMElHTnZiV1Z6SUdaeWIyMGdiVzl5WlNCdmNpQmxibWRwYm1VZ2IzSWdkMjl5YTJWeUNna0pMeThnSUNCdmNpQndiSFZuYVc0c0lHbDBJR0ZzYkNCc1pXRmtjeUJpWVdOcklIUnZJRzE1SUdOdlpHVWdhVzRnU1VSQ1JsTUtDUWt2THlCVVQwUlBPaUJ1WldWa0lIUnZJR2x1WTJ4MVpHVWdhVzV6ZEdGc2JFRnplVzVqSUdobGNtVWdZV3h6Ynl3Z1luVjBJRzl1YkhrS0NRa3ZMeUFnSUdadmNpQjNiM0pyWlhJZ2FXNTBaWEptWVdObElHSmxZMkYxYzJVZ2NHeDFaMmx1SUdseklHVjJaVzUwTDNKbGNHeDVJR0poYzJWa0Nna0pMeTlwWmloeVpYQnNlVVoxYm1OMGFXOXVJRDA5UFNCVFdWTXVkMjl5YTJWeUxuQnZjM1JOWlhOellXZGxLU0I3Q2drSmJHVjBJSFpoYkhWbENna0piR1YwSUc1aGJXVWdQU0J5WlhGMVpYTjBMbUZqWTJWemMyOXlMbk53YkdsMEtDY3VKeWxiTVYwS0NRbHNaWFFnZEhsd1pTQTlJSFI1Y0dWdlppQjNhVzVrYjNkYmJtRnRaVjBLQ1FscFppaDBlWEJsSUQwOUlDZG1kVzVqZEdsdmJpY3BJSHNLQ1FrSmRtRnNkV1VnUFNCM2FXNWtiM2RiYm1GdFpWMGdLeUFuSndvSkNYMGdaV3h6WlNCcFppQW9kSGx3WlNBOVBTQW5iMkpxWldOMEp5a2dld29KQ1FsMGVYQmxJRDBnSjJwemIyNG5DZ2tKQ1haaGJIVmxJRDBnU2xOUFRpNXpkSEpwYm1kcFpua29UMkpxWldOMExtRnpjMmxuYmloN0Nna0pDUWxmWVdOalpYTnpiM0k2SUhSeWRXVUtDUWtKZlN3Z2QybHVaRzkzVzI1aGJXVmRJSHg4SUh0OUtTa0tDUWw5SUdWc2MyVWdld29KQ1FsMllXeDFaU0E5SUVwVFQwNHVjM1J5YVc1bmFXWjVLSGRwYm1SdmQxdHVZVzFsWFNrS0NRbDlDZ2tKYkdWMElISmxjM1ZzZENBOUlIc0tDUWtKY21WemNHOXVjMlZKWkRvZ2NtVnhkV1Z6ZEM1eVpYTndiMjV6WlVsa0xBb0pDUWwwZVhCbE9pQjBlWEJsTEFvSkNRbHVZVzFsT2lCdVlXMWxDZ2tKZlFvSkNYSmxjM1ZzZEZ0MGVYQmxYU0E5SUhaaGJIVmxDZ2tKY21WMGRYSnVJSEpsY0d4NVJuVnVZM1JwYjI0b2NtVnpkV3gwS1FvSmZTQmxiSE5sSUFvS0NTOHZJR052YldKcGJtVWdkMmwwYUNCeVpYQnNMbXB6SUdSdlFXTmpaWE56YjNJS0NTOHZJSEpsYzNWc2RDQnRaV0Z1Y3lCMGFHVjVJR0Z6YTJWa0lHWnZjaUJwZEQ4S0NXbG1LSFI1Y0dWdlppQnlaWEYxWlhOMExuSmxjM1ZzZENBaFBTQW5kVzVrWldacGJtVmtKeWtnZXdvSkNYSmxkSFZ5YmlCeVpYRjFaWE4wTG5KbGMzVnNkQW9KZlNCbGJITmxJQW9LQ1dsbUtIUjVjR1Z2WmlCa2IwUnBZV3h2WnlBaFBTQW5kVzVrWldacGJtVmtKd29KQ1FrbUppQjBlWEJsYjJZZ2NtVnhkV1Z6ZEM1aFkyTmxjM052Y2lBaFBTQW5kVzVrWldacGJtVmtKeWtnZXlBdkx5QlNSVkJNUHdvSkNXeGxkQ0JrYVdGc2IyY2dQU0JrYjBScFlXeHZaeWh5WlhGMVpYTjBMQ0J5WlhCc2VVWjFibU4wYVc5dUtRb0pDWEpsZEhWeWJpQmthV0ZzYjJjS0NYMEtDZ2t2THlCVVQwUlBPaUJtYjJ4a0lHWnliMjUwWlc1a0lHRnVaQ0J2YmtGalkyVnpjMjl5SUdsdWRHOGdaV0ZqYUNCdmRHaGxjaUJpWVhObFpDQnZiaUJ5WlhGMVpYTjBJSFI1Y0dVZ0Nna3ZMeUFnSUhOb2IzVnNaQ0JpWlNCaFlteGxJSFJ2SUdoaGRtVWdZU0J6Y0dWamFXWnBZeUJrYVhKbFkzUnBiMjRnWm05eUlIZG9aVzRnZEc4Z1pXNWpiMlJsSUhKbGMzVnNkQW9KTHk4Z0lDQnZjaUIzYUdWdUlIUnZJSEpsZEhWeWJpQnlaV0ZzSUhKbGMzVnNkQ0IwYnlCU1JWQk1MQ0JzYVd0bElIUm9aU0J2Y0hCdmMybDBaU0J2WmlCMGFHVWdiV1Z0WW1WeUxtOWlhbVZqZEFvSkx5OGdJQ0JoWTJObGMzTWdkR2hwYm1jS0NXbG1LSFI1Y0dWdlppQmtiMUoxYmlBaFBTQW5kVzVrWldacGJtVmtKeWtnZXdvSkNXUnZVblZ1S0hKbGNYVmxjM1F1WVdOalpYTnpiM0lnZkh3Z2NtVnhkV1Z6ZEM1elkzSnBjSFFzSUhzS0NRa0pkMmx1Wkc5M09pQjNhVzVrYjNjc0Nna0pDVUZEUlRvZ1FVTkZMQW9KQ1gwcElDOHZJRTVQVnlCSlZDZFRJRkpGUTFWU1UwbFdSUW9KZlFwOUNnb0tJQzh2SUVKUFQxUlRWRkpCVUNCRFQwUkZQd29nYVdZb2RIbHdaVzltSUcxdlpIVnNaU0FoUFNBbmRXNWtaV1pwYm1Wa0p5a2dld29KYlc5a2RXeGxMbVY0Y0c5eWRITWdQU0I3Q2drSlpHOUJZMk5sYzNOdmNpd0tDUWxrYjBKdmIzUnpkSEpoY0N3S0NRbGtiMHhwWW5KaGNubE1iMjlyZFhBc0Nna0piMjVHY205dWRHVnVaQ3dLQ1FrS0NYMEtmUW9LQ2c9PSc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvcmhvb2QvaWNsb3VkLmpzX3RpbWVzdGFtcCddPTE2NTA4OTkyNjY0MzA7CndpbmRvdy5wcmVGU1snbGlicmFyeS9yaG9vZC9pY2xvdWQuanMnXT0nTHlvS0NncFFVa1ZVVkZrZ1JsVkRTMGxPUnlCVVNWSkZSQ0JQUmlCT1QxUWdSRVZUUlZKV1NVNUhJRlJJUlNBaVJsSkZSU0lnVkVsRlVpNEtUMUlnUWtsSElGUkZRMGdnVTFSRlFVeEpUa2NnVFU5T1JWa2dSbEpQVFNCVFRVRk1UQ0JDVlZOSlRrVlRVeUJCVGtRZ1FVUkVTVTVISUUxRlUxTUtWRThnVkVoRlNWSWdWMDlTUzBaTVQxY3ZSVkpRSUZOWlUxUkZUVk11SUNncVEwOVZSMGdxSUZOWFNVWlVVRUZIUlNrS0NsSkZVRXhKUTBGVVJTQlRSVkpXU1VORlV5QkNXU0JTUlZCTVNVTkJWRWxPUnlCRlRVRkpUQ0JCUkVSU1JWTlRSVk1nUVU1RUlBcEJRbFZUU1U1SElFWlNSVVVnVkVsRlVsTWdSazlTSUVOTVQxVkVJRk5GVWxaSlEwVlRMaUJVU0VWT0lGUkJTMFVnVkVoRklFTlBUbFJGVGxRS1FVNUVJRkJTUlZORlRsUWdUMVpGVWlCT1QxSk5RVXdzSUZkRlRFd2dSRVZUU1VkT1JVUWdUVVZFU1VFZ1RFbExSU0JKVkNCVFNFOVZURVFnUWtVdUNncEhTVlJJVlVJZ1FVTlVTVTlPVXlCR1QxSWdVME5JUlVSVlRFbE9SeUJDUVZORlJDQlBUaUJGVGtOU1dWQlVSVVFnUkVWUVQxTkpWRk11Q2dwVlUwVWdVRUZKUkNCVVNVVlNVeUJVVHlCTlFVNUpVRlZNUVZSRklFWlNSVVVnVkVsRlVsTXVDZ29xTHdvS0Nnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L3Job29kL3BheS5qc190aW1lc3RhbXAnXT0xNjUwOTA3ODY1NDQ2Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvcmhvb2QvcGF5LmpzJ109J0NpOHFDZ29LQ2xOSlRrTkZJRlJJUlNCVlV5QlVTRWxPUzFNZ1NWUW5VeUJHVlU0Z1ZFOGdRbFZNVEZrZ1NWSkJUaUJQVmtWU0lGUklSU0JUU1V4TElGSlBRVVF1SUNoVVNFVWdVa1ZCVENCUFRrVWdUazlVSUZSSVJTQkVTVWRKVkVGTUlFMUJVa3RGVkZCTVFVTkZLUW9LVEVWVUoxTWdTRUZXUlNCVFQwMUZJRVpWVGlCWFNWUklJRUpCVGt0SlRrY3VJRmRJUVZRZ1NWTWdWRWhGSUVaQlUxUkZSQ0JTVDFWVVJRcEpJRU5CVGlCVVFVdEZJRTFQVGtWWklFWlNUMDBnVTA5TlJVOU9SU3dnVWtWSFFWSkVURVZUVXlCUFJpQlFRMGt0SWtSRlUwbEhUaUkvQ2dwSlJsSkJUVVUvSUZaT1F5QkdVa0ZOUlQ4Z1EwaFNUMDFGSUZCQldVMUZUbFFnUVZCSlB5QlZVMFVnUVNCQ1QxUWdWRThnUTFKRlFWUkZDa0VnVEVWSFNWUkpUVUZVUlNCTVRFTXNJRUpQVWxKUFZ5QWtNVEF3SUVaUFVpQkJWVlJJTGs1RlZDQlNSVWRKVTFSU1FWUkpUMDQvQ2dwRVJWQlBVMGxVSUU1VlRVSkZVbE1nUlU1RFVsbFFWRVZFSUVsT1ZFOGdSMGxUVkM1SFNWUklWVUlLQ2xCRFNTMUVVMU1nUlZoSlUxUlRJRUZUSUVFZ1UxUkJUa1JCVWtRc0lGTlBJRWxHSUVrZ1JrOU1URTlYSUZSSVJTQkpUbE5VVWxWRFZFbFBUbE1zSUVrS1EwRk9KMVFnUWtVZ1FVTkRWVk5GUkNCUFJpQk5SVTVUSUZKQlJTd2dTVTVVUlU1VVNVOU9RVXhNV1NCQlRrUWdRMUpKVFVsT1FVeE1XU0JRVlZSVVNVNUhDbEJGVDFCTVJTZFRJRTFQVGtWWklFRlVJRkpKVTBzdUNncFVUMFJQT2dwQlZWUklMazVGVkNCWFJVSXRSazlTVFNCR1RFOVhJRlZUUlNCVVR5QkZUa05TV1ZCVUlGUklSU0JKVGtaUFVrMUJWRWxQVGlCRFRFbEZUbFFnVTBsRVJTNGdWRWhKVXdwVFNFOVZURVFnUWtVZ1UwVkRWVkpGSUVWV1JVNGdUMVpGVWlCSVZGUlFJQ2hPVDFRZ1NGUlVVRk1wTGdwUVVrOUNRVUpNV1NCVVNFVlpJRWhCVmtVZ1VsVkpUa1ZFSUZSSVNWTWdSa3hQVnlCQlRrUWdSVmhRUlZKSlJVNURSUzRnU1NCU1JVMUZUVUpGVWlCVFJWUlVTVTVISUVsVUNsVlFJRmRKVkVnZ1UxUlZSRmxUUVZWRFJTQlhRVk1nUVNCUVFVbE9JRWxPSUZSSVJTQkJVMU11SUVGT1JDQk9UMVFnUlZaRlRpQlVTRVVnUTBoRlFWQkZVMVFnVDBaR1JWSkpUa2N1Q2dwRVVrRlhTVTVISUVaU1QwMGdWRWhKVXk0Z1FVUkVJRUVnUWxWT1EwZ2dUMFlnUTFKQlVDQkVRVlJCSUZSUElGUklSU0JGVGtOU1dWQlVTVTlPSUZaQlRGVkZDbGRKVkVnZ1FrRlRSVFkwSUVGT1JDQlNRVTVFVDAwZ1RsVk5Ra1ZTVXlCSlRpQkNSVlJYUlVWT0lFRkVSRkpGVTFORlV5d2dWRWhGVGlCVlUwVWdVMFZOUVU1VVNVTUtRVTVCVEZsVFNWTWdWRThnUmtsT1JDQlVTRVVnVGtGTlJTQkJUa1FnUTFKRlJFbFVJRU5CVWtRZ1RsVk5Ra1ZTSUVaU1QwMGdWRWhGSUZOVVFVNUVRVkpFSUV4SlUxUUtSbEpQVFNCVVNFVWdSVTVEVWxsUVZFVkVJRVJCVkVFdUlGTlVUMUpGSUVsVUlFeFBRMEZNVEZrZ1JVNURVbGxRVkVWRUlGZEpWRWdnVDFWU0lFOVVTRVZTSUZORFNFVk5SVk1LVjBsVVNDQlBUa1VnUVVSRVNWUkpUMDVCVENCTVFWbEZVaUJQUmlCRlRrTlNXVkJVU1U5T0xpQlVTRVVnVTBWU1ZrVlNJRWRGVGtWU1FWUkZSQ0JCSUZCU1NWWkJWRVVnUzBWWkNrWlBVaUJGVmtWU1dTQlRSVk5UU1U5T0lFTk1TVVZPVkNBb1ZFOUVUem9nU1VZZ1UwVlRVMGxQVGlCSlV5QlNSVk5VVDFKRlJDQkJUa1FnUVU1VFYwVlNJRWxUSUZsRlV5NHBDbGRJUlU0Z1RVOVNVRWhGVlZNZ1EwOU9Sa2xTVFZNZ1ZFaEZJRlZUUlZJZ1IwOUZVeUJDUVVOTElGUlBJRlJJUlNCUVFVZEZJRUZPUkNCVVNFVkpVaUJRVWtsV1FWUkZDa3RGV1NCSlV5QlVVa0ZPVTBaRlVrVkVJRlJQSUVSRlExSlpVRlFnVkVoRklFSkJRMHRGVGtRZ1JFOVZRa3haSUVWT1ExSlpVRlJGUkNCVFZFOVNSVVFnUTFKRlJFbFVDa2xPUms5U1RVRlVTVTlPTGlCVVNFRlVJRVZPUTFKWlVGUkZSQ0JXUVV4VlJTQlhUMVZNUkNCQ1JTQlNSVVZPUTFKWlVGUkZSQ0JYU1ZSSUlFRWdVRUZIUlNCTFJWa0tWRWhCVkNCSlV5QlRTRUZTUlVRZ1YwbFVTQ0JVU0VVZ1UwVlNWa1ZTSUZSUElFWkpUa0ZNVEZrZ1JFVkRVbGxRVkNCQlRrUWdVRUZUVXlCVVR5QlVTRVVnVUVGSFJTNEtWRWhGSUU5T1RGa2dRVVJFU1ZSSlQwNUJUQ0JUUlVOVlVrbFVXU0JKVXlCVVNFVWdSVmhVVWtFZ1UwVlRVMGxQVGlCUVZVSXZVRkpKVmlCTFJWa2dVRUZKVWlCVFR3cE5UMUpRU0VWVlV5QkRRVTRnVWtWRFQwNUdTVkpOSUVsR0lGbFBWU0JYUVU1VUlGUlBJRTFCUzBVZ1FTQkVUMDVCVkVsUFRpNEtDbFJJU1ZNZ1NWTWdTVTVVUlZKRlUxUkpUa2NnUmxKUFRTQkJUaUJWVTBWU0lFVllVRVZTU1VWT1EwVWdVRVZTVTFCRlExUkpWa1VnUWtWRFFWVlRSU0JOVDFOVUlBcFRSVkpXU1VORlV5QkJVa1VnVUZKRlZGUlpJRTlRUVZGVlJTQkJRazlWVkNCWlQxVlNJRUpKVEV4SlRrY2dSRUZVUlZNdUlDSlhTRVZPUlZaRlVpQlpUMVVnVTBsSFRrVkVDbFZRSWlCVVNFVlpJRk5CV1M0Z1FVNUVJRmxGVkN3Z1ZFaEZXU0JVUVV0RklGTkpSMDR0VlZCVElFOU9JRk5WVGtSQldWTWdWMGhGVGlCQ1FVNUxVeUJCVWtVZ1EweFBVMFZFTGdwRFQwMVFURVZVUlV4WklFWlZRMHRKVGtjZ1NGbFFUME5TU1ZSSlEwRk1JRVpQVWlCU1NVTklJRUpQVDAxRlVsTWdUazlVSUZSUElFdE9UMWNnVjBoQlZDQkVRVmtnVkVoRlNWSUtVMFZTVmtsRFJTQkNTVXhNVXlCUFRpQktWVk5VSUVKRlEwRlZVMFVnVkVoRldTQkJURkpGUVVSWklFaEJSQ0JVU0VVZ1FsVkVSMFZVSUVaUFVpQkpWQzRnVjBVblVrVWdWRUZNUzBsT1J3cEJRazlWVkNCRlRsUkZVbFJCU1U1TlJVNVVJRWhGVWtVc0lFNVBWQ0JETFZCQlVDQkdTVXhVUlZKVExnb0tRbFZVSUZOUVJVTkpSa2xEUVV4TVdTQlhTVlJJSUUxUFVsQklSVlZUSUVGVFMwbE9SeUJRUlZKTlNWTlRTVTlPSUZSUElFTklRVkpIUlNCWlQxVlNJRU5CVWtRZ1FVaEZRVVFnVDBZZ1ZFbE5SUXBVU0VGVUlFbFRJRUZPSUVsT1ZFVlNSVk5VU1U1SElFbE9WRVZTUmtGRFJTQkNSVU5CVlZORklFbFVJRmRQVlV4RVRpZFVJRkpGUVV4TVdTQk5RVlJVUlZJZ1NVNGdWRWhCVkNCTlQwMUZUbFFLVjBoRlVrVWdWRWhGSUVOQlVrUWdUbFZOUWtWU0lFOVNJRlJJUlNCTlQwNUZXU0JKVXlCRFQwMUpUa2NnUmxKUFRTQkNSVU5CVlZORklGUklSU0JRUlZKVFQwNGdTVk1nUVV4U1JVRkVXU0FLUTA5T1ZrbFVSVVFnVkU4Z1FTQlpSVk12VGs4dUlGTlBJRWxHSUZSSVJWa2dWa2xUU1ZRZ1FTQlFRVWRGSUZSUElFRk9VMWRGVWlCWlJWTXNJRUZPUkNCVVNFVWdRMEZTUkNCSlRrWlBDa05QVFVWVElFWlNUMDBnVkVoRlNWSWdUMWRPSUV4UFEwRk1JRk5VVDFKQlIwVXNJRlJJUlZrZ1JFOU9KMVFnVWtWQlRFeFpJRVZXUlZJZ1NFRldSU0JVVHlCRlRsUkZVaUJVU0VVZ0NrTkJVa1FnVGxWTlFrVlNJRUZIUVVsT0xpQUtDa1ZXUlU0Z1RVOVNSU0JKVGxSRlVrVlRWRWxPUnlCSlV5d2dTVVlnVkVoRklFTkJVa1FnVGxWTlFrVlNJRWxUSUZSQlMwVk9JRUZPUkNCRlRsUkZVa1ZFSUU5T1ZFOGdRU0JYUlVKVFNWUkZDa0ZUSUVsR0lFbFVJRmRCVXlCSlRpQklRVTVFTENCQlRrUWdWRWhGVGlCVVNFVWdRa0ZPUzBsT1J5QkJVRkFnVFVWVFUwRkhSVk1nUVZOTFNVNUhJRWxHSUZSSVJWa2dUVVZCVGxRZ1ZFOEtVRlZTUTBoQlUwVWdVMDlOUlZSSVNVNUhMQ0JVU0VWWklGZEpURXdnUVV4U1JVRkVXU0JDUlNCSlRpQlVTRVVnVUZKUFEwVlRVeUJQUmlCU1JWTlFUMDVFU1U1SElDSlpSVk1pSUZSUElBcE5UMUpRU0VWVlV5NEtDbFJJU1ZNZ1NWTWdRVmRMVjBGU1JDQkNSVU5CVlZORklGQkZVa2hCVUZNZ1ZFaEZVa1VuVXlCQklFSlZVMGxPUlZOVElGUklSU0JDUVU1TElFRk1Va1ZCUkZrZ1MwNVBWMU1nU1ZNZ1FrRkVDa0pWVkNCVVNFVWdVRVZTVTA5T0lFbFRJRlJTV1VsT1J5QlVUeUJDVlZrZ1JsSlBUU0JVU0VWTklFRk9XVmRCV1ZNL0lGTkZSVTFUSUV4SlMwVWdVMDlOUlU5T1JTQlRTRTlWVEVRS1JFOGdVMDlOUlZSSVNVNUhJRUZDVDFWVUlGUklRVlF1SUFvS1RVOVNVRWhGVlZNZ1YwOU9KMVFnVFVGTFJTQlVTRVZUUlNCTFNVNUVVeUJQUmlCRldGQkZUa1JKVkZWU1JWTXVDZ29LQ2lvdkNnb0snOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L3Job29kL3RpdGhlLmpzX3RpbWVzdGFtcCddPTE2NTA5MDAyNDU5ODk7CndpbmRvdy5wcmVGU1snbGlicmFyeS9yaG9vZC90aXRoZS5qcyddPSdMeW9LQ2sxQlRrbFFWVXhCVkVsV1JTQk1RVTVFU1U1SElGQkJSMFZUTGdvS1dVOVZJRk5VU1V4TUlFaEJWa1VnVkU4Z1ZFbFVTRVVnUlZaRlRpQkpSaUJaVDFVZ1JFOU9KMVFnUjA4Z1ZFOGdRMGhWVWtOSUxnb0tDaW92Q2dvS0NnPT0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L3NjYWZmb2xkaW5nL2J1aWxkLnltbF90aW1lc3RhbXAnXT0xNjUxNTk1NzMyMzUzOwp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc2NhZmZvbGRpbmcvYnVpbGQueW1sJ109J0l5QnFkWE4wSUdFZ2RHVnRjR3hoZEdVZ1ptOXlJSEYxYVc1bElIUnZJSEIxYzJnZ2IzVjBJSFJ2SUdkcGRHaDFZaUIwYnlCdFlXdGxJR2wwQ2lNZ0lDQmpiMjF0ZFc1cFkyRjBaU0JwYmlCeVpXRnNJSFJwYldVc0lHeHZiQW9qSUdodmR5Qm1kVzV1ZVNCM2FXeHNJR2wwSUdKbElIUnZJSEJoZFhObElHbHVJR0VnVFdGclpXWnBiR1VzSUhCcFkyc2diM1YwSUdFZ1pHbG1abVZ5Wlc1MENpTWdJQ0JXVFNCdmJpQkhhWFJvZFdJZ2RHOGdZblZwYkdRZ1lXNXZkR2hsY2lCamIyMXdiMjVsYm5Rc0lHRnVaQ0JIYVhSb2RXSWdkMjl1SjNRZ2EyNXZkeUJoYm5rZ1pHbG1abVZ5Wlc1MENpTWdTWFFuY3lCaGJHd2dhblZ6ZENCRFNTQjBieUIwYUdWdExDQmlkWFFnU1NCamIzVnNaQ0IxYzJVZ2RHaHBjeUJ6ZVhOMFpXMGdkRzhnVEdsMlpTQmpiMlJsSUdFZ1JHOWphMlZ5Wm1sc1pRb2pJQ0FnYm04Z2JXOXlaU0J2WmlCMGFHbHpJRUpUSUc5MlpYSnlhV1JsSUhSb1pTQnpkR0Z5ZENCamIyMXRZVzVrSUhSdklISjFiaUJpWVhOb0xDQkpJRzVsWldRZ2RHOGdZV04wZFdGc2JIa0tJeUFnSUhCaGRYTmxJR0Z1SUdWa2FYUWdZU0JpWVhOb0lITmpjbWx3ZENCaGN5QnBkQ0JwY3lCeWRXNXVhVzVuTGlBdElFeE1WazBnQ2lNZ0lDQW9ZbmtnZDJGNUlHOW1JRUZPVkV4U0lHRnVaQ0JoZEhSaFkyaHBibWNnYzNSa2FXOHBJRWtnWTJGdUlHbHVkR1Z5Y0hKbGRDQmhJR0poYzJnZ2MyTnlhWEIwSUdGdVpDQjFjMlVnWlhocGMzUnBibWNLSXlBZ0lFZHBkR2gxWWlCemRYQndiM0owSUhONWMzUmxiWE1nYkdsclpTQjBhR1VnUTI5MWNuUWdTbVZ6ZEdWeUxpQk5ZV3RsSUhSb1pXMGdaR0Z1WTJVdUNpTWdTU0J6YUc5MWJHUWdZbVVnWVdKc1pTQjBieUJ0WVhBZ1dGWk9ReUJ6WlhOemFXOXVjeUJwYm5SdklFOXdaVzVIVENCemFHRmtaWEp6SUdGdVpDQnRZV3RsSUdFZ2NtVmhiQW9qSUNBZ2JHOXZhMmx1WnlCMmFYSjBkV0ZzSUVObGNtVmljbThnZDJsMGFDQnNiM1J6SUc5bUlITjBjbVZoYlhNZ1pHbHpjR3hoZVdsdVp5QmhiR3dnWVhRZ2IyNWpaUzRLSXlBZ0lFaHZkeUJqWVc0Z1NTQjNZWFJqYUNBeE1EQXdJR2x1YzNSaFozSmhiVzFwWlhNZ1lYUWdkR2hsSUhOaGJXVWdkR2x0WlQ4S0Nnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L3NjcmlwdHMvYXR0YWNoLmNzX3RpbWVzdGFtcCddPTE2NDk4Nzk1MjYwOTY7CndpbmRvdy5wcmVGU1snbGlicmFyeS9zY3JpcHRzL2F0dGFjaC5jcyddPSdjSEpwZG1GMFpTQkpWMlZpUkhKcGRtVnlJRVJ5YVhabGNpQjdJR2RsZERzZ2MyVjBPeUI5Q2dvdkx5QlRiMjFsSUdKaGMybGpJRk5sYkdWdWFYVnRJR05oYkd4eklIZGw0b0NaYkd3Z2RYTmxJR2x1SUc5MWNpQjBaWE4wY3dwd2RXSnNhV01nZG05cFpDQkJkSFJoWTJoVWIwTm9jbTl0WlNncENuc0tJQ0FnSUVOb2NtOXRaVTl3ZEdsdmJuTWdiM0IwYVc5dWN5QTlJRzVsZHlCRGFISnZiV1ZQY0hScGIyNXpLQ2s3Q2lBZ0lDQnZjSFJwYjI1ekxrUmxZblZuWjJWeVFXUmtjbVZ6Y3lBOUlDSXhNamN1TUM0d0xqRTZPVEl5TWlJN0Nnb2dJQ0FnTHk4Z1ZYTnBibWNnVUc5c2JIa2diR2xpY21GeWVUb2dhSFIwY0hNNkx5OW5hWFJvZFdJdVkyOXRMMEZ3Y0MxMlRtVjRkQzlRYjJ4c2VRb2dJQ0FnTHk4Z1VHOXNiSGtnY0hKdlltRmliSGtnYVhOdUozUWdibVZsWkdWa0lHbHVJR0VnYzJsdVoyeGxJSE5qWlc1aGNtbHZJR3hwYTJVZ2RHaHBjeXdnWW5WMElHTmhiaUJpWlNCMWMyVm1kV3dnYVc0Z1lTQmljbTloWkdWeUlHRjFkRzl0WVhScGIyNGdjSEp2YW1WamRBb2dJQ0FnTHk4Z1QyNWpaU0IzWlNCaGRIUmhZMmdnZEc4Z1EyaHliMjFsSUhkcGRHZ2dVMlZzWlc1cGRXMHNJSFZ6WlNCaElGZGxZa1J5YVhabGNsZGhhWFFnYVcxd2JHVnRaVzUwWVhScGIyNEtJQ0FnSUhaaGNpQndiMnhwWTNrZ1BTQlFiMnhwWTNrS0lDQWdJQ0FnTGtoaGJtUnNaVHhKYm5aaGJHbGtUM0JsY21GMGFXOXVSWGhqWlhCMGFXOXVQaWdwQ2lBZ0lDQWdJQzVYWVdsMFFXNWtVbVYwY25rb01UQXNJSFFnUFQ0Z1ZHbHRaVk53WVc0dVJuSnZiVk5sWTI5dVpITW9NU2twT3dvS0lDQWdJSEJ2YkdsamVTNUZlR1ZqZFhSbEtDZ3BJRDArSUFvZ0lDQWdld29nSUNBZ0lDQWdJRVJ5YVhabGNpQTlJRzVsZHlCRGFISnZiV1ZFY21sMlpYSW9iM0IwYVc5dWN5azdDaUFnSUNCOUtUc0tmUW9LTHk4Z1FYUjBZV05vVkc5RGFISnZiV1ZVWlhOMExtTnpDbHRVWlhOMFRXVjBhRzlrWFFwd2RXSnNhV01nZG05cFpDQk1ZWFZ1WTJoRGFISnZiV1ZCYm1SQmRIUmhZMmdvS1FwN0NpQWdJQ0F2THlCUGNHVnVJRmRRUmlCaGNIQnNhV05oZEdsdmJpd2diV0ZyWlNCemRYSmxJR0VnWW5WMGRHOXVJR2x6SUhCeVpYTmxiblFzSUhSb1pXNGdZMnhwWTJzZ2FYUWdkRzhnYkdGMWJtTm9JRU5vY205dFpRb2dJQ0FnUVhOelpYSjBMa2x6VkhKMVpTaFhhVzVrYjNjdVRHRjFibU5vUW5KdmQzTmxja0oxZEhSdmJpNUVhWE53YkdGNVpXUXNJQW9nSUNBZ0lDQWdJQ0pGZUhCbFkzUmxaQ0JpZFhSMGIyNGdibVYyWlhJZ1lYQndaV0Z5Y3k0aUtUc0tJQ0FnSUZkcGJtUnZkeTVNWVhWdVkyaENjbTkzYzJWeVFuVjBkRzl1TGtOc2FXTnJLQ2s3Q2dvZ0lDQWdMeThnUVhSMFlXTm9JSFJ2SUc1bGR5QkRhSEp2YldVZ2FXNXpkR0Z1WTJVS0lDQWdJRkJoWjJVdVFYUjBZV05vVkc5RGFISnZiV1VvS1RzS0NpQWdJQ0F2THlCV1pYSnBabmtnUTJoeWIyMWxJR3hoZFc1amFHVmtJSFJ2SUhSb1pTQmpiM0p5WldOMElIQmhaMlVLSUNBZ0lFRnpjMlZ5ZEM1QmNtVkZjWFZoYkNnaWFIUjBjSE02THk5cGJuUmxiR3hwZEdWamRDNWpiMjB2WW14dlp5OGlMQ0JRWVdkbExrUnlhWFpsY2k1VmNtd3BPd29nSUNBZ1FYTnpaWEowTGtselZISjFaU2hRWVdkbExrSnNiMmRNYVhOMExrUnBjM0JzWVhsbFpDazdDaUFnSUNCQmMzTmxjblF1U1hOVWNuVmxLRkJoWjJVdVFteHZaMGhsWVdScGJtZHpMa052ZFc1MElENGdNQ2s3Q24wS2NISnBkbUYwWlNCWGFXNWtiM2NnVjJsdVpHOTNJRDArSUc1bGR5QlhhVzVrYjNjb0tUc0tjSEpwZG1GMFpTQlFZV2RsVlc1a1pYSlVaWE4wSUZCaFoyVWdleUJuWlhRN0lIMGdQU0J1WlhjZ1VHRm5aVlZ1WkdWeVZHVnpkQ2dwT3dvSyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc2NyaXB0cy9jaHJvbWVkcml2ZXIuamF2YV90aW1lc3RhbXAnXT0xNjQ5ODc5MzY3Mzk0Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc2NyaXB0cy9jaHJvbWVkcml2ZXIuamF2YSddPSdhVzF3YjNKMElHcGhkbUV1ZFhScGJDNWpiMjVqZFhKeVpXNTBMbFJwYldWVmJtbDBPd3BwYlhCdmNuUWdiM0puTG05d1pXNXhZUzV6Wld4bGJtbDFiUzVDZVRzS2FXMXdiM0owSUc5eVp5NXZjR1Z1Y1dFdWMyVnNaVzVwZFcwdVYyVmlSSEpwZG1WeU93cHBiWEJ2Y25RZ2IzSm5MbTl3Wlc1eFlTNXpaV3hsYm1sMWJTNVhaV0pGYkdWdFpXNTBPd3BwYlhCdmNuUWdiM0puTG05d1pXNXhZUzV6Wld4bGJtbDFiUzVqYUhKdmJXVXVRMmh5YjIxbFJISnBkbVZ5T3dwcGJYQnZjblFnYjNKbkxuUmxjM1J1Wnk1QmMzTmxjblE3Q21sdGNHOXlkQ0J2Y21jdWRHVnpkRzVuTG1GdWJtOTBZWFJwYjI1ekxrRm1kR1Z5VkdWemREc0thVzF3YjNKMElHOXlaeTUwWlhOMGJtY3VZVzV1YjNSaGRHbHZibk11UW1WbWIzSmxWR1Z6ZERzS2FXMXdiM0owSUc5eVp5NTBaWE4wYm1jdVlXNXViM1JoZEdsdmJuTXVWR1Z6ZERzS0NtbHRjRzl5ZENCdVpYUXVZbmwwWldKMVpHUjVMbVJsYzJOeWFYQjBhVzl1TG5SNWNHVXVWSGx3WlVSbGMyTnlhWEIwYVc5dUxrZGxibVZ5YVdNdVQyWlVlWEJsVm1GeWFXRmliR1V1VTNsdFltOXNhV003Q2dwd2RXSnNhV01nWTJ4aGMzTWdUR0Z0WW1SaFZHVnpkRXh2WjJsdUlIc0tDZ2t2TDBOeVpXRjBaV1FnY21WbVpYSmxibU5sSUc5bUlGZGxZa1J5YVhabGNnb0pjSFZpYkdsaklITjBZWFJwWXlCWFpXSkVjbWwyWlhJZ1pISnBkbVZ5T3dvSkNna3ZMMFY0WldOMWRHVWdZbVZtYjNKbElIUmxjM1FnYzNSaGNuUnpDZ2xBUW1WbWIzSmxWR1Z6ZEFvSmNIVmliR2xqSUhadmFXUWdjMlYwVlhBb0tRb0pld29KQ1M4dmMyVjBkR2x1WnlCd2NtOXdaWEowZVNCbWIzSWdkR2hsSUZObGJHVnVhWFZ0SUVOb2NtOXRaVVJ5YVhabGNpQjNhWFJvSUhCeWIzWnBaR2x1WnlCd1lYUm9JRzltSUdOb2NtOXRaV1J5YVhabGNpNWxlR1VLQ1FsVGRISnBibWNnZFhObGNrUnBjaUE5SUZONWMzUmxiUzVuWlhSUWNtOXdaWEowZVNnaWRYTmxjaTVrYVhJaUtUc0tDUWxUZVhOMFpXMHVjMlYwVUhKdmNHVnlkSGtvSWxkbFlrUnlhWFpsY2k1amFISnZiV1V1WkhKcGRtVnlJaXdnZFhObGNrUnBjaXNpWEZ4RGFISnZiV1ZFY21sMlpYSXVaWGhsSWlrN0Nna0pDZ2tKTHk5VFpXeGxibWwxYlNCRGFISnZiV1ZFY21sMlpYSWdiMkpxWldOMElHbHpJR055WldGMFpXUXNJR2wwSUhkcGJHd2diM0JsYmlCMGFHVWdZMmh5YjIxbElHSnliM2R6WlhJZ2QybHVaRzkzQ2drSlpISnBkbVZ5SUQwZ2JtVjNJRU5vY205dFpVUnlhWFpsY2lncE93b0pDUW9KQ1M4dmJXRjRhVzFwZW1VZ2RHaGxJR0p5YjNkelpYSWdkMmx1Wkc5M0Nna0paSEpwZG1WeUxtMWhibUZuWlNncExuZHBibVJ2ZHlncExtMWhlR2x0YVhwbEtDazdDZ2tKQ2drSkx5OUJaR1JsWkNCcGJYQnNhV05wZENCM1lXbDBDZ2tKWkhKcGRtVnlMbTFoYm1GblpTZ3BMblJwYldWdmRYUnpLQ2t1YVcxd2JHbGphWFJzZVZkaGFYUW9NVEFzSUZScGJXVlZibWwwTGxORlEwOU9SRk1wT3dvSkNRb0pDUzh2UVdSa1pXUWdkRzhnZDJGcGRDQjBhV3hzSUhCaFoyVWdaMlYwY3lCc2IyRmtaV1FnWTI5dGNHeGxkR1ZzZVFvSkNXUnlhWFpsY2k1dFlXNWhaMlVvS1M1MGFXMWxiM1YwY3lncExuQmhaMlZNYjJGa1ZHbHRaVzkxZENneE5Td2dWR2x0WlZWdWFYUXVVMFZEVDA1RVV5azdDZ2tKQ2dsOUNna0tDUzh2UlhobFkzVjBaU0JoWm5SbGNpQjBaWE4wSUdWNFpXTjFkR2x2YmlCamIyMXdiR1YwWlhNS0NVQkJablJsY2xSbGMzUUtDWEIxWW14cFl5QjJiMmxrSUhSbFlYSkViM2R1S0NrS0NYc0tDUWt2TDBOc2IzTmxjeUJoYkd3Z1pISnBkbVZ5SUhObGMzTnBiMjRLQ1Fsa2NtbDJaWEl1Y1hWcGRDZ3BPd29KZlFvSkNnbEFWR1Z6ZEFvSmNIVmliR2xqSUhadmFXUWdiRzluYVc0b0tRb0pld29KQ1M4dlRtRjJhV2RoZEdVZ2RHOGdUR0Z0WW1SaFZHVnpkQ0IzWldKemFYUmxJR3hoYm1ScGJtY2djR0ZuWlFvSkNXUnlhWFpsY2k1blpYUW9JbWgwZEhCek9pOHZkM2QzTG14aGJXSmtZWFJsYzNRdVkyOXRMeUlwT3dvSkNRb0pDUzh2U1dSbGJuUnBabmtnWVc1a0lFTnNhV05ySUc5dUlFeHZaMmx1SUd4cGJtc2djSEpsYzJWdWRDQnZiaUJ5YVdkb2RDQjBiM0FnYzJsa1pRb0pDVmRsWWtWc1pXMWxiblFnYkc5blNXNU1hVzVySUQwZ1pISnBkbVZ5TG1acGJtUkZiR1Z0Wlc1MEtFSjVMbmh3WVhSb0tDSXZMMkZiWTI5dWRHRnBibk1vZEdWNGRDZ3BMQ2RNYjJjZ2FXNG5LVjBpS1NrN0Nna0piRzluU1c1TWFXNXJMbU5zYVdOcktDazdDZ2tKQ2drSkx5OVBiaUJzYjJkcGJpQndZV2RsTENCcFpHVnVkR2xtZVNCbGJXRnBiQ0JwWkNCbWFXVnNaQ0JoYm1RZ1pXNTBaWElnY21WbmFYTjBaWEpsWkNCbGJXRnBiQ0JwWkFvSkNWZGxZa1ZzWlcxbGJuUWdaVzFoYVd4R2FXVnNaQ0E5SUdSeWFYWmxjaTVtYVc1a1JXeGxiV1Z1ZENoQ2VTNTRjR0YwYUNnaUx5OXBibkIxZEZ0QWNHeGhZMlZvYjJ4a1pYSTlKMFZ0WVdsc0oxMGlLU2s3Q2drSlpXMWhhV3hHYVdWc1pDNXpaVzVrUzJWNWN5Z2lkWE5sY201aGJXVkFaMjFoYVd3dVkyOXRJaWs3Q2drSkNna0pMeTlQYmlCc2IyZHBiaUJ3WVdkbExDQnBaR1Z1ZEdsbWVTQjFjMlZ5SUhCaGMzTjNiM0prSUdacFpXeGtJR0Z1WkNCbGJuUmxjaUIyWVd4cFpDQndZWE56ZDI5eVpBb0pDVmRsWWtWc1pXMWxiblFnY0dGemMzZHZjbVJHYVdWc1pDQTlJR1J5YVhabGNpNW1hVzVrUld4bGJXVnVkQ2hDZVM1NGNHRjBhQ2dpTHk5cGJuQjFkRnRBY0d4aFkyVm9iMnhrWlhJOUoxQmhjM04zYjNKa0oxMGlLU2s3Q2drSmNHRnpjM2R2Y21SR2FXVnNaQzV6Wlc1a1MyVjVjeWdpVkdWemRFQXhNak1pS1RzS0NRa0tDUWt2TDA5dUlHeHZaMmx1SUhCaFoyVXNJR2xrWlc1MGFXWjVJR3h2WjJsdUlHSjFkSFJ2YmlCaGJtUWdZMnhwWTJzZ2FYUUtDUWxYWldKRmJHVnRaVzUwSUd4dloybHVRblYwZEc5dUlEMGdaSEpwZG1WeUxtWnBibVJGYkdWdFpXNTBLRUo1TG5od1lYUm9LQ0l2TDJKMWRIUnZibHRBWTJ4aGMzTTlKMkowYmlCaWRHNHRjSEpwYldGeWVTQmlkRzR0YkdjZ1luUnVMV0pzYjJOcklHMTBMVE1uWFNJcEtUc0tDUWxzYjJkcGJrSjFkSFJ2Ymk1amJHbGpheWdwT3dvSkNRb0pDUzh2Ulhod1pXTjBaV1FnWVc1a0lFRmpkSFZoYkZWU1RBb0pDVk4wY21sdVp5QmxlSEJsWTNSbFpGVlNUQ0E5SUNKb2RIUndjem92TDJGalkyOTFiblJ6TG14aGJXSmtZWFJsYzNRdVkyOXRMMlJoYzJoaWIyRnlaQ0k3Q2drSlUzUnlhVzVuSUdWNGNHVmpkR1ZrVUdGblpWUnBkR3hsSUQwZ0lsZGxiR052YldVZ0xTQk1ZVzFpWkdGVVpYTjBJanNLQ1FrS0NRbFRkSEpwYm1jZ1lXTjBkV0ZzVlZKTUlEMGdaSEpwZG1WeUxtZGxkRU4xY25KbGJuUlZjbXdvS1RzS0NRbFRkSEpwYm1jZ1lXTjBkV0ZzVUdGblpWUnBkR3hsSUQwZ1pISnBkbVZ5TG1kbGRGUnBkR3hsS0NrN0Nna0pVM2x6ZEdWdExtOTFkQzV3Y21sdWRHeHVLR1J5YVhabGNpNW5aWFJVYVhSc1pTZ3BLVHNLQ1FsVGVYTjBaVzB1YjNWMExuQnlhVzUwYkc0b1pISnBkbVZ5TG1kbGRFTjFjbkpsYm5SVmNtd29LU2s3Q2drSkNRa0pDZ2tKTHk5QmMzTmxjblJwYjI0Z1lXNWtJSFpsY21sbWFXTmhkR2x2YmlCdlppQmxlSEJsWTNSbFpDQlZVa3dnWVc1a0lHRmpkSFZoYkNCVlVrd0tDUWxCYzNObGNuUXVZWE56WlhKMFJYRjFZV3h6S0dGamRIVmhiRlZTVEN3Z1pYaHdaV04wWldSVlVrd3BPd29KQ1FvSkNTOHZRWE56WlhKMGFXOXVJR0Z1WkNCMlpYSnBabWxqWVhScGIyNGdiMllnWlhod1pXTjBaV1FnVUdGblpTQlVhWFJzWlNCaGJtUWdZV04wZFdGc0lGQmhaMlVnVkdsMGJHVUtDUWxCYzNObGNuUXVZWE56WlhKMFJYRjFZV3h6S0dGamRIVmhiRkJoWjJWVWFYUnNaU3dnWlhod1pXTjBaV1JRWVdkbFZHbDBiR1VwT3dvSmZRcDlDZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9zY3JpcHRzL3EzbWFwb3JpZ2luMm9yaWdpbmJydXNoLnBsX3RpbWVzdGFtcCddPTE2NTE0MTgyNTgwNjQ7CndpbmRvdy5wcmVGU1snbGlicmFyeS9zY3JpcHRzL3EzbWFwb3JpZ2luMm9yaWdpbmJydXNoLnBsJ109J0l5RXZkWE55TDJKcGJpOXdaWEpzQ2dwMWMyVWdjM1J5YVdOME93cDFjMlVnZDJGeWJtbHVaM003Q2dwemRXSWdVR0Z5YzJWRmJuUnBkSGtvSkNrS2V3b0piWGtnS0NSbWFDa2dQU0JBWHpzS0NnbHRlU0FsWlc1MElEMGdLQ0FwT3dvSmJYa2dRR0p5ZFhOb1pYTWdQU0FvSUNrN0Nnb0pkMmhwYkdVb1BDUm1hRDRwQ2dsN0Nna0pZMmh2YlhBN0lITXZYSEl2TDJjN0lITXZYREF2TDJjN0lITXZYQzljTHk0cUpDOHZPeUJ6TDE1Y2N5c3ZMenNnY3k5Y2N5c2tMeTg3SUc1bGVIUWdhV1lnTDE0a0x6c0tDZ2tKYVdZb0wxNWNleVF2S1FvSkNYc0tDUWtKSXlCbGJuUnBkSGtnYzNSaGNuUnpDZ2tKQ1hkb2FXeGxLRHdrWm1nK0tRb0pDUWw3Q2drSkNRbGphRzl0Y0RzZ2N5OWNjaTh2WnpzZ2N5OWNNQzh2WnpzZ2N5OWNMMXd2TGlva0x5ODdJSE12WGx4ekt5OHZPeUJ6TDF4ekt5UXZMenNnYm1WNGRDQnBaaUF2WGlRdk93b0tDUWtKQ1dsbUtDOWVJaWd1S2o4cElpQWlLQzRxS1NJa0x5a0tDUWtKQ1hzS0NRa0pDUWtqSUd0bGVTMTJZV3gxWlNCd1lXbHlDZ2tKQ1FrSkpHVnVkSHNrTVgwZ1BTQWtNanNLQ1FrSkNYMEtDUWtKQ1dWc2MybG1LQzllWEhza0x5a0tDUWtKQ1hzS0NRa0pDUWx0ZVNBa1luSjFjMmdnUFNCYlhUc0tDUWtKQ1Fsd2RYTm9JRUJpY25WemFHVnpMQ0FrWW5KMWMyZzdDZ29KQ1FrSkNYZG9hV3hsS0R3a1ptZytLUW9KQ1FrSkNYc0tDUWtKQ1FrSlkyaHZiWEE3SUhNdlhISXZMMmM3SUhNdlhEQXZMMmM3SUhNdlhDOWNMeTRxSkM4dk95QnpMMTVjY3lzdkx6c2djeTljY3lza0x5ODdJRzVsZUhRZ2FXWWdMMTRrTHpzS0Nna0pDUWtKQ1dsbUtDOWVYSHNrTHlrS0NRa0pDUWtKZXdvSkNRa0pDUWtKSXlCd1lYUmphRDhLQ1FrSkNRa0pDWEIxYzJnZ1FDUmljblZ6YUN3Z0pGODdDZ29KQ1FrSkNRa0pkMmhwYkdVb1BDUm1hRDRwQ2drSkNRa0pDUWw3Q2drSkNRa0pDUWtKWTJodmJYQTdJSE12WEhJdkwyYzdJSE12WERBdkwyYzdJSE12WEM5Y0x5NHFKQzh2T3lCekwxNWNjeXN2THpzZ2N5OWNjeXNrTHk4N0lHNWxlSFFnYVdZZ0wxNGtMenNLQ2drSkNRa0pDUWtKYVdZb0wxNWNmU1F2S1FvSkNRa0pDUWtKQ1hzS0NRa0pDUWtKQ1FrSmNIVnphQ0JBSkdKeWRYTm9MQ0FrWHpzS0Nna0pDUWtKQ1FrSkNXeGhjM1E3Q2drSkNRa0pDUWtKZlFvSkNRa0pDUWtKQ1dWc2MyVUtDUWtKQ1FrSkNRbDdDZ2tKQ1FrSkNRa0pDWEIxYzJnZ1FDUmljblZ6YUN3Z0pGODdDZ2tKQ1FrSkNRa0pmUW9KQ1FrSkNRa0pmUW9KQ1FrSkNRbDlDZ2tKQ1FrSkNXVnNjMmxtS0M5ZVhIMGtMeWtLQ1FrSkNRa0pld29KQ1FrSkNRa0pJeUJsYm1RZ2IyWWdZbkoxYzJnS0NRa0pDUWtKQ1d4aGMzUTdDZ2tKQ1FrSkNYMEtDUWtKQ1FrSlpXeHpaUW9KQ1FrSkNRbDdDZ2tKQ1FrSkNRbHdkWE5vSUVBa1luSjFjMmdzSUNSZk93b0pDUWtKQ1FsOUNna0pDUWtKZlFvSkNRa0pmUW9KQ1FrSlpXeHphV1lvTDE1Y2ZTUXZLUW9KQ1FrSmV3b0pDUWtKQ1hKbGRIVnliaUJjSldWdWRDd2dYRUJpY25WemFHVnpPd29KQ1FrSmZRb0pDUWw5Q2drSmZRb0pDV1ZzYzJVS0NRbDdDZ2tKQ1dScFpTQWlWVzVsZUhCbFkzUmxaQ0JzYVc1bElHbHVJSFJ2Y0NCc1pYWmxiRG9nUGo0a1h6dzhJanNLQ1FsOUNnbDlDZ29KY21WMGRYSnVJSFZ1WkdWbU93cDlDZ3B6ZFdJZ1ZXNXdZWEp6WlVWdWRHbDBlU2drSkNrS2V3b0piWGtnS0NSbGJuUXNJQ1JpY25WemFHVnpLU0E5SUVCZk93b0piWGtnSldWdWRDQTlJQ1VrWlc1ME93b0tDVzE1SUNSeklEMGdJbnRjYmlJN0Nnb0pabTl5S0hOdmNuUWdhMlY1Y3lBbFpXNTBLUW9KZXdvSkNTUnpJQzQ5SUNKY0lpUmZYQ0lnWENJa1pXNTBleVJmZlZ3aVhHNGlPd29KZlFvS0NXbG1LR1JsWm1sdVpXUWdKR0p5ZFhOb1pYTXBDZ2w3Q2drSlptOXlLRUFrWW5KMWMyaGxjeWtLQ1FsN0Nna0pDU1J6SUM0OUlDSjdYRzRpT3dvSkNRa2tjeUF1UFNBaUpGOWNiaUlnWm05eUlFQWtYenNLQ1FrSkpITWdMajBnSW4xY2JpSTdDZ2tKZlFvSmZRb0tDU1J6SUM0OUlDSjlYRzRpT3dvSmNtVjBkWEp1SUNSek93cDlDZ3B0ZVNCQVlYaHBZV3hpY25WemFIQmhkSFJsY200Z1BTQW9DZ2xiSUNJckt5c2lMQ0FpS3kwcklpd2dJaTByS3lJc0lDSWdMU0FpTENBaUxTQWdJaUJkTEFvSld5QWlLeXNySWl3Z0lpMHJLeUlzSUNJckt5MGlMQ0FpS3lBZ0lpd2dJaUFnS3lJZ1hTd0tDVnNnSWlzckt5SXNJQ0lyS3kwaUxDQWlLeTBySWl3Z0lpQXRJQ0lzSUNJZ0lDc2lJRjBzQ2dsYklDSXRMUzBpTENBaUt5MHRJaXdnSWkwckxTSXNJQ0lnTFNBaUxDQWlLeUFnSWlCZExBb0pXeUFpTFMwdElpd2dJaTB0S3lJc0lDSXJMUzBpTENBaUxTQWdJaXdnSWlBZ0t5SWdYU3dLQ1ZzZ0lpMHRMU0lzSUNJdEt5MGlMQ0FpTFMwcklpd2dJaUFySUNJc0lDSWdJQ3NpSUYwS0tUc0tjM1ZpSUdGNGFXRnNZbkoxYzJod1lYUjBaWEp1S0NRa0pDa0tld29KYlhrZ0tDUndiR0Z1WlN3Z0pIWmxjblJsZUN3Z0pHTnZiM0prS1NBOUlFQmZPd29KYlhrZ0pHTm9JRDBnYzNWaWMzUnlJQ1JoZUdsaGJHSnlkWE5vY0dGMGRHVnlibHNrY0d4aGJtVmRXeVIyWlhKMFpYaGRMQ0FrWTI5dmNtUXNJREU3Q2dseVpYUjFjbTRnSkdOb0lHVnhJQ2NySnlBL0lDc3hJRG9nSkdOb0lHVnhJQ2N0SnlBL0lDMHhJRG9nTURzS2ZRcHpkV0lnWm5KaFl5Z2tLUXA3Q2dsdGVTQW9KSGdwSUQwZ1FGODdDZ2x5WlhSMWNtNGdKSGdnTFNCcGJuUWdKSGc3Q24wS2MzVmlJRU52Ym5abGNuUlBjbWxuYVc1Q2NuVnphQ2drSkNRa0tRcDdDZ2x0ZVNBb0pHSnlkWE5vVUhKcGJXbDBMQ0FrZUN3Z0pIa3NJQ1I2S1NBOUlFQmZPd29KYlhrZ1FHUmhkR0VnUFNBb0tUc0tDV2xtS0NSaWNuVnphRkJ5YVcxcGRDa0tDWHNLQ1Fsd2RYTm9JRUJrWVhSaExDQWlZbkoxYzJoRVpXWWlPd29KQ1hCMWMyZ2dRR1JoZEdFc0lDSjdJanNLQ1FsbWIzSW9NQzR1TlNrS0NRbDdDZ2tKQ1hCMWMyZ2dRR1JoZEdFc0lITndjbWx1ZEdZS0NRa0pDU0lvSUNWeklDVnpJQ1Z6SUNrZ0tDQWxjeUFsY3lBbGN5QXBJQ2dnSlhNZ0pYTWdKWE1nS1NBb0lDZ2dKWE1nSlhNZ0pYTWdLU0FvSUNWeklDVnpJQ1Z6SUNrZ0tTQmpiMjF0YjI0dmIzSnBaMmx1SURBZ01DQXdJaXdLQ1FrSkNTUjRJQ3NnT0NBcUlHRjRhV0ZzWW5KMWMyaHdZWFIwWlhKdUtDUmZMQ0F3TENBd0tTd2dKSGtnS3lBNElDb2dZWGhwWVd4aWNuVnphSEJoZEhSbGNtNG9KRjhzSURBc0lERXBMQ0FrZWlBcklEZ2dLaUJoZUdsaGJHSnlkWE5vY0dGMGRHVnliaWdrWHl3Z01Dd2dNaWtzQ2drSkNRa2tlQ0FySURnZ0tpQmhlR2xoYkdKeWRYTm9jR0YwZEdWeWJpZ2tYeXdnTVN3Z01Da3NJQ1I1SUNzZ09DQXFJR0Y0YVdGc1luSjFjMmh3WVhSMFpYSnVLQ1JmTENBeExDQXhLU3dnSkhvZ0t5QTRJQ29nWVhocFlXeGljblZ6YUhCaGRIUmxjbTRvSkY4c0lERXNJRElwTEFvSkNRa0pKSGdnS3lBNElDb2dZWGhwWVd4aWNuVnphSEJoZEhSbGNtNG9KRjhzSURJc0lEQXBMQ0FrZVNBcklEZ2dLaUJoZUdsaGJHSnlkWE5vY0dGMGRHVnliaWdrWHl3Z01pd2dNU2tzSUNSNklDc2dPQ0FxSUdGNGFXRnNZbkoxYzJod1lYUjBaWEp1S0NSZkxDQXlMQ0F5S1N3S0NRa0pDVEV2TVRZdU1Dd2dNQ3dnWm5KaFl5Z29ZWGhwWVd4aWNuVnphSEJoZEhSbGNtNG9KRjhzSURNc0lEQXBJQ29nSkhnZ0t5QmhlR2xoYkdKeWRYTm9jR0YwZEdWeWJpZ2tYeXdnTXl3Z01Ta2dLaUFrZVNBcklHRjRhV0ZzWW5KMWMyaHdZWFIwWlhKdUtDUmZMQ0F6TENBeUtTQXFJQ1I2S1NBdklERTJMakFnS3lBd0xqVXBMQW9KQ1FrSk1Dd2dNUzh4Tmk0d0xDQm1jbUZqS0NoaGVHbGhiR0p5ZFhOb2NHRjBkR1Z5Ymlna1h5d2dOQ3dnTUNrZ0tpQWtlQ0FySUdGNGFXRnNZbkoxYzJod1lYUjBaWEp1S0NSZkxDQTBMQ0F4S1NBcUlDUjVJQ3NnWVhocFlXeGljblZ6YUhCaGRIUmxjbTRvSkY4c0lEUXNJRElwSUNvZ0pIb3BJQzhnTVRZdU1DQXJJREF1TlNrN0Nna0pmUW9KQ1hCMWMyZ2dRR1JoZEdFc0lDSjlJanNLQ1gwS0NXVnNjMlVLQ1hzS0NRbHRlU0FrWkdGMFlTQTlJQ0l2THlCdmNtbG5hVzRnWW5KMWMyaGNibnRjYmlJN0Nna0pabTl5S0RBdUxqVXBDZ2tKZXdvSkNRbHdkWE5vSUVCa1lYUmhMQ0J6Y0hKcGJuUm1DZ2tKQ1FraUtDQWxjeUFsY3lBbGN5QXBJQ2dnSlhNZ0pYTWdKWE1nS1NBb0lDVnpJQ1Z6SUNWeklDa2dZMjl0Ylc5dUwyOXlhV2RwYmlBbGN5QWxjeUF3SUNWeklDVnpJREFnTUNBd0lpd0tDUWtKQ1NSNElDc2dPQ0FxSUdGNGFXRnNZbkoxYzJod1lYUjBaWEp1S0NSZkxDQXdMQ0F3S1N3Z0pIa2dLeUE0SUNvZ1lYaHBZV3hpY25WemFIQmhkSFJsY200b0pGOHNJREFzSURFcExDQWtlaUFySURnZ0tpQmhlR2xoYkdKeWRYTm9jR0YwZEdWeWJpZ2tYeXdnTUN3Z01pa3NDZ2tKQ1Fra2VDQXJJRGdnS2lCaGVHbGhiR0p5ZFhOb2NHRjBkR1Z5Ymlna1h5d2dNU3dnTUNrc0lDUjVJQ3NnT0NBcUlHRjRhV0ZzWW5KMWMyaHdZWFIwWlhKdUtDUmZMQ0F4TENBeEtTd2dKSG9nS3lBNElDb2dZWGhwWVd4aWNuVnphSEJoZEhSbGNtNG9KRjhzSURFc0lESXBMQW9KQ1FrSkpIZ2dLeUE0SUNvZ1lYaHBZV3hpY25WemFIQmhkSFJsY200b0pGOHNJRElzSURBcExDQWtlU0FySURnZ0tpQmhlR2xoYkdKeWRYTm9jR0YwZEdWeWJpZ2tYeXdnTWl3Z01Ta3NJQ1I2SUNzZ09DQXFJR0Y0YVdGc1luSjFjMmh3WVhSMFpYSnVLQ1JmTENBeUxDQXlLU3dLQ1FrSkNXWnlZV01vS0dGNGFXRnNZbkoxYzJod1lYUjBaWEp1S0NSZkxDQXpMQ0F3S1NBcUlDUjRJQ3NnWVhocFlXeGljblZ6YUhCaGRIUmxjbTRvSkY4c0lETXNJREVwSUNvZ0pIa2dLeUJoZUdsaGJHSnlkWE5vY0dGMGRHVnliaWdrWHl3Z015d2dNaWtnS2lBa2Vpa2dMeUF4Tmk0d0lDc2dNQzQxS1NBcUlEWTBMakFzQ2drSkNRbG1jbUZqS0NoaGVHbGhiR0p5ZFhOb2NHRjBkR1Z5Ymlna1h5d2dOQ3dnTUNrZ0tpQWtlQ0FySUdGNGFXRnNZbkoxYzJod1lYUjBaWEp1S0NSZkxDQTBMQ0F4S1NBcUlDUjVJQ3NnWVhocFlXeGljblZ6YUhCaGRIUmxjbTRvSkY4c0lEUXNJRElwSUNvZ0pIb3BJQzhnTVRZdU1DQXJJREF1TlNrZ0tpQTJOQzR3TEFvSkNRa0pNUzgwTGpBc0lERXZOQzR3T3dvSkNYMEtDWDBLQ1hKbGRIVnliaUJjUUdSaGRHRTdDbjBLQ20xNUlDZ2thVzVtYVd4bExDQWtiM1YwWm1sc1pTa2dQU0JBUVZKSFZqc0tiM0JsYmlCdGVTQWthVzVtYUN3Z0p6d25MQ0FrYVc1bWFXeGxDZ2x2Y2lCa2FXVWdJandrYVc1bWFXeGxPaUFrSVNJN0NtMTVJQ1JpY25WemFGQnlhVzFwZENBOUlEQTdDZ3B0ZVNBa2IzVjBZblZtSUQwZ0lpSTdDbVp2Y2lnN095a0tld29KYlhrZ0tDUmxiblFzSUNSaWNuVnphR1Z6S1NBOUlGQmhjbk5sUlc1MGFYUjVJQ1JwYm1ab093b0paR1ZtYVc1bFpDQWtaVzUwQ2drSmIzSWdiR0Z6ZERzS0NXbG1LRUFrWW5KMWMyaGxjeWtLQ1hzS0NRa2tZbkoxYzJoUWNtbHRhWFFnUFNBeENna0pDV2xtSUdkeVpYQWdleUJ0SVZ4eksySnlkWE5vUkdWbVhITXJJVHNnZlNCQUpHSnlkWE5vWlhNN0Nna0phV1lvWjNKbGNDQjdJRzBoWEhNclkyOXRiVzl1TDI5eWFXZHBibHh6S3lFN0lIMGdRQ1JpY25WemFHVnpLUW9KQ1hzS0NRa0pJeUIzWlNCb1lYWmxJRzl5YVdkcGJpQmljblZ6YUdWeklDMGdaMjl2WkFvSkNYMEtDUWxsYkhObENna0pld29KQ1FscFppaGtaV1pwYm1Wa0lDUmxiblF0UG50dmNtbG5hVzU5S1FvSkNRbDdDZ2tKQ1FsdGVTQWtiM0pwWjJsdUlEMGdXeUJ6Y0d4cGRDQXZYSE1yTHl3Z0tDUmxiblF0UG50dmNtbG5hVzU5SUh4OElDSXdJREFnTUNJcElGMDdDZ2tKQ1Fsa1pXeGxkR1VnSkdWdWRDMCtlMjl5YVdkcGJuMDdDZ2tKQ1Fsd2RYTm9JRUFrWW5KMWMyaGxjeXdnUTI5dWRtVnlkRTl5YVdkcGJrSnlkWE5vSUNSaWNuVnphRkJ5YVcxcGRDd2dKRzl5YVdkcGJpMCtXekJkTENBa2IzSnBaMmx1TFQ1Yk1WMHNJQ1J2Y21sbmFXNHRQbHN5WFRzS0NRa0pmUW9KQ1gwS0NYMEtDU1J2ZFhSaWRXWWdMajBnVlc1d1lYSnpaVVZ1ZEdsMGVTQWtaVzUwTENBa1luSjFjMmhsY3pzS2ZRb0tZMnh2YzJVZ0pHbHVabWc3Q2dwdmNHVnVJRzE1SUNSdmRYUm1hQ3dnSno0bkxDQWtiM1YwWm1sc1pRb0piM0lnWkdsbElDSStKRzkxZEdacGJHVTZJQ1FoSWpzS2NISnBiblFnSkc5MWRHWm9JQ1J2ZFhSaWRXWTdDbU5zYjNObElDUnZkWFJtYURzSyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc2NyaXB0cy93ZWJkcml2ZXIuamF2YV90aW1lc3RhbXAnXT0xNjQ5ODc5MTkzMzI5Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc2NyaXB0cy93ZWJkcml2ZXIuamF2YSddPSdhVzF3YjNKMElHcGhkbUV1Ym1WMExpbzdDbWx0Y0c5eWRDQnZjbWN1YjNCbGJuRmhMbk5sYkdWdWFYVnRMaW83Q21sdGNHOXlkQ0J2Y21jdWIzQmxibkZoTG5ObGJHVnVhWFZ0TG1Ob2NtOXRaUzRxT3dwcGJYQnZjblFnYjNKbkxtOXdaVzV4WVM1elpXeGxibWwxYlM1eVpXMXZkR1V1S2pzZ0lBb0tjSFZpYkdsaklHTnNZWE56SUVkbGRIUnBibWRUZEdGeWRHVmtVbVZ0YjNSbElIc2dJQW9nSUhCMVlteHBZeUJ6ZEdGMGFXTWdkbTlwWkNCdFlXbHVLRk4wY21sdVoxdGRJR0Z5WjNNcElIUm9jbTkzY3lCTllXeG1iM0p0WldSVlVreEZlR05sY0hScGIyNGdleUFnSUNBZ0lDQWdJQ0FLSUNBZ0lGZGxZa1J5YVhabGNpQmtjbWwyWlhJZ1BTQnVaWGNnVW1WdGIzUmxWMlZpUkhKcGRtVnlLQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lHNWxkeUJWVWt3b0ltaDBkSEE2THk4eE1qY3VNQzR3TGpFNk9UVXhOU0lwTENBZ0lDQWdJQ0FnSUFvZ0lDQWdibVYzSUVOb2NtOXRaVTl3ZEdsdmJuTW9LU2s3SUNBZ0lDQUtJQ0FnSUNBZ1pISnBkbVZ5TG1kbGRDZ2lhSFIwY0RvdkwzZDNkeTVuYjI5bmJHVXVZMjl0SWlrN0lDQWdJQ0FLSUNBZ0lDQWdaSEpwZG1WeUxuRjFhWFFvS1RzZ0lDQUtJQ0I5Q24wS0Nnbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L3NjcmlwdHMvd2ViZHJpdmVyaW8uanNfdGltZXN0YW1wJ109MTY0OTg3OTA4NTM0MDsKd2luZG93LnByZUZTWydsaWJyYXJ5L3NjcmlwdHMvd2ViZHJpdmVyaW8uanMnXT0nWTI5dWMzUWdleUJ5WlcxdmRHVWdmU0E5SUhKbGNYVnBjbVVvSjNkbFltUnlhWFpsY21sdkp5azdDZ283S0dGemVXNWpJQ2dwSUQwK0lIc0tJQ0FnSUdOdmJuTjBJR0p5YjNkelpYSWdQU0JoZDJGcGRDQnlaVzF2ZEdVb2V3b2dJQ0FnSUNBZ0lHTmhjR0ZpYVd4cGRHbGxjem9nZXdvZ0lDQWdJQ0FnSUNBZ0lDQmljbTkzYzJWeVRtRnRaVG9nSjJOb2NtOXRaU2NLSUNBZ0lDQWdJQ0I5Q2lBZ0lDQjlLUW9LSUNBZ0lHRjNZV2wwSUdKeWIzZHpaWEl1ZFhKc0tDZG9kSFJ3Y3pvdkwzZGxZbVJ5YVhabGNpNXBieWNwQ2dvZ0lDQWdZMjl1YzNRZ1lYQnBUR2x1YXlBOUlHRjNZV2wwSUdKeWIzZHpaWEl1SkNnblBVRlFTU2NwQ2lBZ0lDQmhkMkZwZENCaGNHbE1hVzVyTG1Oc2FXTnJLQ2tLQ2lBZ0lDQmhkMkZwZENCaWNtOTNjMlZ5TG5OaGRtVlRZM0psWlc1emFHOTBLQ2N1TDNOamNtVmxibk5vYjNRdWNHNW5KeWtLSUNBZ0lHRjNZV2wwSUdKeWIzZHpaWEl1WkdWc1pYUmxVMlZ6YzJsdmJpZ3BDbjBwS0NrSyc7CgppZih0eXBlb2Ygd2luZG93LnByZUZTID09ICd1bmRlZmluZWQnKSB7CiAgd2luZG93LnByZUZTPXt9Owp9Cgp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc2lkZWJhci5qc190aW1lc3RhbXAnXT0xNjUxNzMwNTkxMzE5Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc2lkZWJhci5qcyddPSdMeThnUVV4TUlGUklRVlFnVFVGTFJVWkpURVVnVjA5U1N5QktWVk5VSUZOUElFa2dSa1ZGVENCUFVrZEJUa2xhUlVRZ1JVNVBWVWRJSUZSUElFVllVRUZPUkM0S0Nnb3ZMeUJ1WldWa0lIUnZJR2x0Y0hKdmRtVWdabWxzWlNCc2FYTjBDaTh2SUNBZ2JtVmxaQ0IwYnlCeVpXNWtaWElnWVNCc2FYTjBJRzltSUhkcFpHZGxkSE1nWm05eUlITmxZM1JwYjI0Z1kyOXNiR0Z3YzJsdVp3b3ZMeUIwWVdKc1pYTWdiMllnWTI5dWRHVnVkSE1nYzJodmRXeGtJSE52Y25RZ1lua2daVzUwYVhSNUlIUjVjR1VnWVc1a0lHRnNjR2hoWW1WMGFXTmhiR3g1SUc5eUlHeHZZMkYwYVc5dVlXeHNlUW92THlBZ0lHNWxaV1FnS0dSbGNIUm9MQ0IwYVhSc1pTd2djMjl5ZEMxclpYa3BDaTh2SUdWdWRHbDBlU0JzYVhOMElITm9iM1ZzWkNCbmNtOTFjQ0J0WVhBZ1pXNTBhWFJwWlhNZ2FXNGdjMlZ3WVhKaGRHVUtMeThnSUNBdWJXRndJR1pwYkdWeklIUm9aVzRnZFhObElHSjFhV3hrSUhONWMzUmxiU0JoYm1RZ1lTQm1aWGNnZEhKaGJuTnZabTl5YlhNS0x5OGdJQ0IwYnlCamIyMXdhV3hsSUM1aWMzQUtMeThnZFc1NmFYQWdMbnBwY0NCbWFXeGxjeUJoZFhSdmJXRjBhV05oYkd4NUlHRnVaQ0JzYVhOMElHTnZiblJsYm5SeklHbHVJSFJ5WldVS0x5OGdWRTlFVHpvZ1lXUmtJR0ZzZEdWeWJtRjBaU0JwYldGblpTQjJhV1YzY3lCemJ5QnpZVzFsSUdOdmJuUnliMndnWTJGdUlHSmxJSFZ6WldRZ1ptOXlDaTh2SUNBZ2JHbHpkR2x1WnlCMFpYaDBkWEpsY3lCc1lYUmxjZ292THlCa1pXTnZaR1VnVFdGclpXWnBiR1VnWVc1a0lHaHBaMmhzYVdkb2RDQjBhR1VnWm1sc1pTQjNhWFJvSUhSb1pTQmpiMjF0WVc1a2N5QmlaV2x1WnlCeWRXNEtMeThnWm1sc1pTQnNhWE4wSUdGc2QyRjVjeUJ6YUc5M2N5QnphWHBsWkN3Z1pYTndaV05wWVd4c2VTQnZiaUJtYjJ4a1pYSnpDZ292THlCVVQwUlBPaUJ3Y205aVlXSnNlU0J6YjIxbElHZGhiV1VnWlc1bmFXNWxJR1JwYzNCc1lYa0tDZ29LQ21OdmJuTjBJRVpKVEVWZlYwbEVSMFZVVXlBOUlGc0tDVnNuUkc5amRXMWxiblJoZEdsdmJpY3NJSE5vYjNkRWIyTjFiV1Z1ZEN3Z2NtVnVaR1Z5Ukc5amRXMWxiblJkTEFvSld5ZE1iMk5oYkNCVGRHOXlZV2RsSnl3Z2JHbHpkRVpwYkdWekxDQnlaVzVrWlhKR2FXeGxYU3dLQ1ZzblEyRnNiQ0JUZEdGamF5Y3NJR05oYkd4VGRHRmpheXdnY21WdVpHVnlSblZ1WTEwc0NnbGJKME52YjJ0cFpYTW5MQ0JqYjI5cmFXVk1hWE4wTENCeVpXNWtaWEpEYjI5cmFXVmRMQW9KV3lkVWFISmxZV1J6Snl3Z2RHaHlaV0ZrVUc5dmJDd2djbVZ1WkdWeVZHaHlaV0ZrWFN3S0NWc25TVzUwWlhKaFkzUnBiMjV6Snl3Z2FXNTBaWEpoWTNScGIyNXpUR2x6ZEN3Z2NtVnVaR1Z5U1c1MFpYSmhZM1JwYjI1elhTd0tYVHNLQ21aMWJtTjBhVzl1SUdGdWVWQmhjbVZ1ZEhORGIyeHNZWEJ6WldRb2MyVm5iV1Z1ZEhNcElIc0tDV2xtS0NGQlEwVXVabWxzWlhOamIyeHNZWEJ6WldRcElIc0tDUWx5WlhSMWNtNEtDWDBLQ1hKbGRIVnliaUJ6WldkdFpXNTBjeTV6YkdsalpTZ3dMQ0F0TVNrS0NRa3VjbVZrZFdObEtHWjFibU4wYVc5dUlDaHdMQ0J6TENCcEtTQjdJQW9KQ1FseVpYUjFjbTRnY0NBcklFRkRSUzVtYVd4bGMyTnZiR3hoY0hObFpGc0tDUWtKQ1hObFoyMWxiblJ6TG5Oc2FXTmxLREFzSUdrZ0t5QXhLUzVxYjJsdUtDY3ZKeWxkQ2drSmZTd2dNQ2tLZlFvS0NncG1kVzVqZEdsdmJpQnphVzF3YkdsbWVVMXBiR3hwYzJWamIyNWtjeWh0YVd4c2FTa2dld29KYkdWMElITmxZM01nUFNCdGFXeHNhU0F2SURFd01EQXVNQW9KYkdWMElHMXBibk1nUFNCelpXTnpJQzhnTmpBdU1Bb0piR1YwSUdodmRYSnpJRDBnYldsdWN5QXZJRFl3TGpBS0NXeGxkQ0JrWVhseklEMGdhRzkxY25NZ0x5QXlOQzR3Q2dscFppaGtZWGx6SUQ0Z01Ta2dld29KQ1hKbGRIVnliaUJOWVhSb0xuSnZkVzVrS0dSaGVYTXNJREVwSUNzZ0oyUW5DZ2w5SUdWc2MyVUtDV2xtS0dodmRYSnpJRDRnTVNrZ2V3b0pDWEpsZEhWeWJpQk5ZWFJvTG5KdmRXNWtLR2h2ZFhKekxDQXhLU0FySUNkb0p3b0pmUW9KWld4elpRb0phV1lvYldsdWN5QStJREVwSUhzS0NRbHlaWFIxY200Z1RXRjBhQzV5YjNWdVpDaG9iM1Z5Y3l3Z01Ta2dLeUFuYlNjS0NYMEtDV1ZzYzJVS0NXbG1LSE5sWTNNZ1BpQXhLU0I3Q2drSmNtVjBkWEp1SUUxaGRHZ3VjbTkxYm1Rb2FHOTFjbk1zSURFcElDc2dKM01uQ2dsOUlHVnNjMlVnZXdvSkNYSmxkSFZ5YmlCdGFXeHNhU0FySUNkdGN5Y0tDWDBLZlFvS0NtWjFibU4wYVc5dUlITm9iM2RFYjJOMWJXVnVkQ2dwSUhzS0NXbG1LQ0ZCUTBVdVpHOWpkVzFsYm5SaGRHbHZiaWtnZXdvSkNYSmxkSFZ5YmlCYlhRb0pmUW9KYkdWMElHTjFjbkpsYm5SRWIyTWdQU0JCUTBVdVluVmlZbXhsUm1sc1pRb0pDUWt1Y21Wd2JHRmpaU2duYkdsaWNtRnllUzhuTENBbmJHbGljbUZ5ZVM5a2IyTnpMeWNwQ2drSkNTNXlaWEJzWVdObEtDY3Vhbk1uTENBbkxtMWtKeWtLQ1FrSkNnbHBaaWhCUTBVdVpHOWpkVzFsYm5SaGRHbHZiaTVwYm1Oc2RXUmxjeWhqZFhKeVpXNTBSRzlqS1NrZ2V3b0pDWEpsZEhWeWJpQmJZM1Z5Y21WdWRFUnZZeTV5WlhCc1lXTmxLQzljTHk5bkxDQW5YeWNwWFFvSmZRb0pjbVYwZFhKdUlGdGRDbjBLQ2dwbWRXNWpkR2x2YmlCc2FYTjBSbWxzWlhNb0tTQjdDZ2xzWlhRZ2JtVjNSbWxzWlhNZ1BTQlBZbXBsWTNRdWEyVjVjeWhHVXk1MmFYSjBkV0ZzS1FvSmJHVjBJSE4wWVhKMFRHVnVaM1JvSUQwZ2JtVjNSbWxzWlhNdWJHVnVaM1JvQ2dvSkx5OGdjSFYwSUdadmJHUmxjaUJqYjJ4c1lYQnpaU0JvYVdSa1pXNGdZWFFnZEc5d0NnbG1iM0lvYkdWMElHa2dQU0F3T3lCcElEd2djM1JoY25STVpXNW5kR2c3SUdrckt5a2dld29KQ1d4bGRDQnpaV2R0Wlc1MGN5QTlJRzVsZDBacGJHVnpXMmxkTG5Od2JHbDBLQ2N2SnlrS0NRa0pMbTFoY0NobWRXNWpkR2x2YmlBb2MyVm5MQ0JwTENCaGNuSXBJSHNLQ1FrSkNYSmxkSFZ5YmlCaGNuSXVjMnhwWTJVb01Dd2dhU0FySURFcExtcHZhVzRvSnk4bktTQUtDUWtKZlNrS0NRa3ZMeUJCUkVRZ1RVbFRVMGxPUnlCUVFWUklVeUJHVWs5TklFVk9SMGxPUlNCVVR5QkdTVXhGSUFvSkNTOHZJQ0FnVEVsVFZDQlRUeUJYUlNCRVQwNG5WQ0JNVDFORklFWkpURVZUSUVsT0lFUkJWRUZDUVZORkNna0pMeThnSUNCR1VrOU5JRTFKVTFOSlRrY2dURWxPUzFNdUlGUlBSRTg2SUVaVFEwaExSRk5MSUZSUFQwd3NJRmRVUmo4S0NRbHVaWGRHYVd4bGN5NXdkWE5vTG1Gd2NHeDVLRzVsZDBacGJHVnpMQ0J6WldkdFpXNTBjeWtLQ1gwS0Nna3ZMeUJ6YjNKMElHRnVaQ0IxYm1seGRXVUtDVzVsZDBacGJHVnpJRDBnYm1WM1JtbHNaWE11YzI5eWRDZ3BMbVpwYkhSbGNpaG1kVzVqZEdsdmJpQW9aaXdnYVN3Z1lYSnlLU0I3SUFvSkNYSmxkSFZ5YmlCbUlDWW1JR0Z5Y2k1cGJtUmxlRTltS0dZcElEMDlJR2tLQ1gwcENnbHlaWFIxY200Z2JtVjNSbWxzWlhNS2ZRb0tDbVoxYm1OMGFXOXVJR05oYkd4VGRHRmpheWdwSUhzS0NXeGxkQ0J1WlhkR2FXeGxjeUE5SUZ0ZENnbHBaaWdoUVVORkxtTmhiR3hUZEdGamF5a2dld29KQ1hKbGRIVnliaUJ1WlhkR2FXeGxjd29KZlFvSmNtVjBkWEp1SUc1bGQwWnBiR1Z6TG1OdmJtTmhkQ2hCUTBVdVkyRnNiRk4wWVdOcktRcDlDZ29LWm5WdVkzUnBiMjRnWTI5dmEybGxUR2x6ZENncElIc0tDV2xtS0NGQlEwVXVZMjl2YTJsbGMweHBjM1FwSUhzS0NRbHlaWFIxY200Z1cxMEtDWDBLQ1hKbGRIVnliaUJQWW1wbFkzUXVhMlY1Y3loQlEwVXVZMjl2YTJsbGMweHBjM1FwQ2drSkxtMWhjQ2htZFc1amRHbHZiaUFvYTJWNUtTQjdDZ2tKQ1hKbGRIVnliaUJyWlhrZ0t5QW5PaUFuSUNzZ1FVTkZMbU52YjJ0cFpYTk1hWE4wVzJ0bGVWMEtDUWw5S1FwOUNnb0tDbVoxYm1OMGFXOXVJSEpsYm1SbGNrbHVkR1Z5WVdOMGFXOXVjeWhzYVc1ckxDQnBkR1Z0TENCd1lYUm9LU0I3Q2dsc1pYUWdaR2xoYkc5bmN5QTlJR1J2WTNWdFpXNTBMbWRsZEVWc1pXMWxiblJ6UW5sRGJHRnpjMDVoYldVb0oyUnBZV3h2WnljcENnbG1iM0lvYkdWMElHa2dQU0F3T3lCcElEd2daR2xoYkc5bmN5NXNaVzVuZEdnN0lHa3JLeWtnZXdvSkNXbG1LR1JwWVd4dlozTmJhVjB1WjJWMFFYUjBjbWxpZFhSbEtDZGhjbWxoTFdsa0p5a2dQVDBnY0dGMGFDa2dld29KQ1Fsc1pYUWdkR2wwYkdVZ1BTQmthV0ZzYjJkelcybGRMbWRsZEVWc1pXMWxiblJ6UW5sVVlXZE9ZVzFsS0Nkb01pY3BXekJkQ2drSkNXbDBaVzB1WTJ4aGMzTk9ZVzFsSUQwZ0oybHVkR1Z5WVdOMGFXOXVKd29KQ1FscFppaDBhWFJzWlNrZ2V3b0pDUWtKYVdZb2JHbHVheTVwYm01bGNsUmxlSFFnSVQwZ2RHbDBiR1V1YVc1dVpYSlVaWGgwS1FvSkNRa0pDV3hwYm1zdWFXNXVaWEpVWlhoMElEMGdkR2wwYkdVdWFXNXVaWEpVWlhoMENna0pDWDBnWld4elpTQjdDZ2tKQ1FscFppaHNhVzVyTG1sdWJtVnlWR1Y0ZENBaFBTQmthV0ZzYjJkelcybGRMbWx1Ym1WeVZHVjRkQzV6ZFdKemRISW9NQ3dnTVRBd0tTa0tDUWtKQ1Fsc2FXNXJMbWx1Ym1WeVZHVjRkQ0E5SUdScFlXeHZaM05iYVYwdWFXNXVaWEpVWlhoMExuTjFZbk4wY2lnd0xDQXhNREFwQ2drSkNYMEtDUWtKYVdZb1pHbGhiRzluYzF0cFhTNXdZWEpsYm5SRmJHVnRaVzUwSUNFOVBTQnBkR1Z0S1NCN0Nna0pDUWxwZEdWdExtRndjR1Z1WkVOb2FXeGtLR1JwWVd4dlozTmJhVjBwQ2drSkNYMEtDUWtKWW5KbFlXc0tDUWw5Q2dsOUNuMEtDZ3BtZFc1amRHbHZiaUJwYm5SbGNtRmpkR2x2Ym5OTWFYTjBLQ2tnZXdvSmFXWW9JVUZEUlM1cGJuUmxjbUZqZEdsdmJuTXBJSHNLQ1FseVpYUjFjbTRnVzEwS0NYMEtDWEpsZEhWeWJpQkJRMFV1YVc1MFpYSmhZM1JwYjI1ekNna0pMbTFoY0NobWRXNWpkR2x2YmlBb1pHbGhiRzluS1NCN0Nna0pDWEpsZEhWeWJpQmthV0ZzYjJjdVoyVjBRWFIwY21saWRYUmxLQ2RoY21saExXbGtKeWtLQ1FsOUtRcDlDZ29LWm5WdVkzUnBiMjRnZEdoeVpXRmtVRzl2YkNncElIc0tDV2xtS0NGQlEwVXVkR2h5WldGa1VHOXZiQ2tnZXdvSkNYSmxkSFZ5YmlCYlhRb0pmUW9KY21WMGRYSnVJRUZEUlM1MGFISmxZV1JRYjI5c0Nna0pMbTFoY0NobWRXNWpkR2x2YmlBb2RHaHlaV0ZrS1NCN0Nna0pDWEpsZEhWeWJpQnphVzF3YkdsbWVVMXBiR3hwYzJWamIyNWtjeWhFWVhSbExtNXZkeWdwSUMwZ2RHaHlaV0ZrV3pGZEtTQXJJQ2M2SUNjZ0t5QjBhSEpsWVdSYk1GMEtDUWw5S1FwOUNnb0tablZ1WTNScGIyNGdkWEJrWVhSbFJtbHNaV3hwYzNRb1ptbHNaWEJoZEdncElIc0tDV2xtS0hSNWNHVnZaaUJCUTBVZ1BUMGdKM1Z1WkdWbWFXNWxaQ2NwSUhzS0NRbHlaWFIxY200S0NYMEtDV2xtS0NGQlEwVXVabWxzWlV4cGMzUXBJSHNLQ1FsQlEwVXVabWxzWlV4cGMzUWdQU0JrYjJOMWJXVnVkQzVuWlhSRmJHVnRaVzUwUW5sSlpDZ25abWxzWlMxc2FYTjBKeWtLQ1gwS0NXbG1LQ0ZCUTBVdVptbHNaVXhwYzNRcElIc0tDUWxCUTBVdVptbHNaVXhwYzNRZ1BTQmtiMk4xYldWdWRDNWpjbVZoZEdWRmJHVnRaVzUwS0NkRVNWWW5LUW9KQ1VGRFJTNW1hV3hsVEdsemRDNXBaQ0E5SUNkbWFXeGxMV3hwYzNRbkNna0paRzlqZFcxbGJuUXVZbTlrZVM1aGNIQmxibVFvUVVORkxtWnBiR1ZNYVhOMEtRb0pDVUZEUlM1bWFXeGxUR2x6ZEM1aGNIQmxibVJEYUdsc1pDaGtiMk4xYldWdWRDNWpjbVZoZEdWRmJHVnRaVzUwS0NkUFRDY3BLUW9KZlFvSlFVTkZMbVpwYkdWemRHbHRaWElnUFNCdWRXeHNDZ2xwWmlnaFFVTkZMbVpwYkdWMGVYQmxjeWtnZXdvSkNVRkRSUzVtYVd4bGRIbHdaWE1nUFNCN2ZRb0pmUW9KTHk4Z1UweEpSMGhVVEZrZ1RVOVNSU0JGV0ZCQlRrUkJRa3hGQ2dsQlEwVXVabWxzWld4cGMzUlhhV1JuWlhSeklEMGdXMTBLQ1VGRFJTNW1hV3hsYkdsemRGZHBaR2RsZEZKdmQzTWdQU0JiWFFvSmJHVjBJRzVsZDBacGJHVnpJRDBnVzEwS0NXWnZjaWhzWlhRZ2FTQTlJREE3SUdrZ1BDQkdTVXhGWDFkSlJFZEZWRk11YkdWdVozUm9PeUJwS3lzcElIc0tDUWt2THlCVVQwUlBPaUJwWmlnaFptbHNaWEJoZEdncElHTnZiblJwYm5WbENna0pRVU5GTG1acGJHVnNhWE4wVjJsa1oyVjBjMXR1WlhkR2FXeGxjeTVzWlc1bmRHaGRJRDBnUmtsTVJWOVhTVVJIUlZSVFcybGRDZ2tKUVVORkxtWnBiR1ZzYVhOMFYybGtaMlYwVW05M2N5NXdkWE5vS0c1bGQwWnBiR1Z6TG14bGJtZDBhQ2tLQ1FsdVpYZEdhV3hsY3k1d2RYTm9LRVpKVEVWZlYwbEVSMFZVVTF0cFhWc3dYU2tLQ1FsdVpYZEdhV3hsY3lBOUlHNWxkMFpwYkdWekxtTnZibU5oZENoR1NVeEZYMWRKUkVkRlZGTmJhVjFiTVYwb0tTa0tDWDBLQ1VGRFJTNW1hV3hsYkdsemRGZHBaR2RsZEZKdmQzTXVjMjl5ZENncENnb0phV1lvUVVORkxtWnBiR1Z6YkdsemRDa2dld29KQ1d4bGRDQndjbVYyUTI5c2JHRndjMlVnUFNCQlEwVXVabWxzWlhOamIyeHNZWEJ6WldRS0NRa3ZMeUJ6WVhabElHVjRjR0Z1WkM5amIyeHNZWEJ6WlNCemRHRjBaU0JsZG1WdUlHbG1JR1pwYkdWeklHRnlaU0JoWkdSbFpDQnZjaUJ5WlcxdmRtVmtDZ2tKUVVORkxtWnBiR1Z6WTI5c2JHRndjMlZrSUQwZ2JtVjNSbWxzWlhNdWNtVmtkV05sS0daMWJtTjBhVzl1SUNodlltb3NJR2twSUhzS0NRa0piR1YwSUdselZHOXdUR1YyWld3Z1BTQnBMbk53YkdsMEtDY3ZKeWt1YkdWdVozUm9JRDA5SURFS0NRa0phV1lvY0hKbGRrTnZiR3hoY0hObExtaGhjMDkzYmxCeWIzQmxjblI1S0drcEtTQjdDZ2tKQ1FsdlltcGJhVjBnUFNCd2NtVjJRMjlzYkdGd2MyVmJhVjBLQ1FrSmZTQmxiSE5sSUhzS0NRa0pDVzlpYWx0cFhTQTlJR2t1YzNCc2FYUW9KeThuS1M1c1pXNW5kR2dnUGlBeElEOGdNQ0E2SURFS0NRa0pmUW9KQ1Frdkx5Qk5RVWxPVkVGSlRpQlVTRWxUSUZaSlUwbENTVXhKVkZrZ1NVNUVSVmdnVTA4Z1ZWTkZVaUFLQ1FrSkx5OGdJQ0JKVGxSRlVrRkRWRWxQVGlCRFFVNGdRa1VnVmtWU1dTQlRVRVZEU1VaSlF5QkJUa1FnUmtGVFZBb0pDUWxCUTBVdVptbHNaWE4yYVhOcFlteGxXMmxkSUQwZ2FYTlViM0JNWlhabGJBb0pDUWtKQ1h4OElDRmhibmxRWVhKbGJuUnpRMjlzYkdGd2MyVmtLR2t1YzNCc2FYUW9KeThuS1NrS0NRa0pjbVYwZFhKdUlHOWlhZ29KQ1gwc0lIdDlLUW9KZlNCbGJITmxJSHNLQ1FsQlEwVXVabWxzWlhOMmFYTnBZbXhsSUQwZ2UzMGdMeThnU1NCRFFVNGdSRThnVkVoSlV5QkJURXdnUkVGWkNna0pMeThnSUNCVVQwUlBPaUJEU0VWRFN5QldPQ0JWVTBWVElFaEJVMGdnVkVGQ1RFVlRJRTlTSUVsR0lGQklVQ0JKVXlCR1FWTlVSVklLQ1FsQlEwVXVabWxzWlhOamIyeHNZWEJ6WldRZ1BTQnVaWGRHYVd4bGN5NXlaV1IxWTJVb0Nna0pDV1oxYm1OMGFXOXVJQ2h2WW1vc0lHa3BJSHNLQ1FrSkNXeGxkQ0JwYzFSdmNFeGxkbVZzSUQwZ2FTNXpjR3hwZENnbkx5Y3BMbXhsYm1kMGFDQTlQU0F4Q2drSkNRbHZZbXBiYVYwZ1BTQnBjMVJ2Y0V4bGRtVnNJRDhnTVNBNklEQUtDUWtKQ1VGRFJTNW1hV3hsYzNacGMybGliR1ZiYVYwZ1BTQnBjMVJ2Y0V4bGRtVnNDZ2tKQ1FseVpYUjFjbTRnYjJKcUNna0pDWDBzSUh0OUtRb0pmUW9LQ1VGRFJTNW1hV3hsYzJ4cGMzUWdQU0J1WlhkR2FXeGxjd29KUVVORkxtWnBiR1Z6WTI5MWJuUWdQU0JQWW1wbFkzUXVkbUZzZFdWektFRkRSUzVtYVd4bGMzWnBjMmxpYkdVcENna0pDUzV5WldSMVkyVW9ablZ1WTNScGIyNGdLSEFzSUdrcElIc2djbVYwZFhKdUlIQWdLeUJwSUgwc0lEQXBDZ2xCUTBVdVptbHNaWE50YjNabFpDQTlJSFJ5ZFdVS0NXbG1LSFI1Y0dWdlppQkRiMjFmUm5KaGJXVWdQVDBnSjNWdVpHVm1hVzVsWkNjcElIc0tDUWxUV1ZNdVpuSmhiV1ZKYm5SbGNuWmhiQ0E5SUhObGRFbHVkR1Z5ZG1Gc0tHWjFibU4wYVc5dUlDZ3BJSHNLQ1FrSmNtVnVaR1Z5Um1sc1pXeHBjM1FvS1FvSkNYMHNJREV3TUNrS0NYMEtDbjBLQ21aMWJtTjBhVzl1SUdselJHbHlaV04wYjNKNUtHa3BJSHNLQ1M4dklHOXViSGtnWm05c1pHVnlJSEJoZEdoeklHRnVaQ0JrYVhKbFkzUnZjbWxsY3lCaGNtVWdZMjlzYkdGd2MybGliR1VzQ2drdkx5QWdJRzFwYzNOcGJtY2djR0YwYUhNZ1lXUmtaV1FnYzJWd1pYSmhkR1ZzZVNCaFltOTJaUW9KTHk4Z0lDQklSVTVEUlNCVVNFVWdRMGhGUTBzZ1JrOVNJQ0ZHVXk1MmFYSjBkV0ZzVzJacGJHVnpXMnBkWFFvSmNtVjBkWEp1SUNGR1V5NTJhWEowZFdGc1cybGRJSHg4SUVaVExuWnBjblIxWVd4YmFWMHViVzlrWlNBOVBTQkdVMTlFU1ZJS2ZRb0tDZ29LQ21aMWJtTjBhVzl1SUhSdloyZHNaVU52Ykd4aGNITmxLSEp2ZHl3Z1pHRjBZVkp2ZHlrZ2V3b0phV1lvSVVGRFJTNW1hV3hsYzJOdmJHeGhjSE5sWkNrZ2V3b0pDWEpsZEhWeWJnb0pmUW9KYkdWMElHTnZiR3hoY0hObElEMGdJVUZEUlM1bWFXeGxjMk52Ykd4aGNITmxaRnRrWVhSaFVtOTNYUW9KUVVORkxtWnBiR1Z6WTI5c2JHRndjMlZrVzJSaGRHRlNiM2RkSUQwZ1kyOXNiR0Z3YzJVS0NXWnZjaWhzWlhRZ2FTQTlJSEp2ZHpzZ2FTQThJRUZEUlM1bWFXeGxjMnhwYzNRdWJHVnVaM1JvT3lCcEt5c3BJSHNLQ1FscFppaEJRMFV1Wm1sc1pYTnNhWE4wVzJsZExuTjFZbk4wY21sdVp5Z3dMQ0JrWVhSaFVtOTNMbXhsYm1kMGFDa0tDUWtKTG14dlkyRnNaVU52YlhCaGNtVW9aR0YwWVZKdmR5a3BJSHNLQ1FrSlluSmxZV3NnTHk4Z2JtOGdiVzl5WlNCbWFXeGxjeUIxYm1SbGNpQjBhR2x6SUhOdmNuUmxaQ0JtYjJ4a1pYSUtDUWw5Q2drSkx5OGdaRzl1SjNRZ2JXRnJaU0IwYUdVZ2NtOTNJSGRsSUdOc2FXTnJaV1FnYjI0Z2FXNTJhWE5wWW14bENna0phV1lvUVVORkxtWnBiR1Z6YkdsemRGdHBYUzVzYjJOaGJHVkRiMjF3WVhKbEtHUmhkR0ZTYjNjcElDRTlQU0F3S1NCN0Nna0pDVUZEUlM1bWFXeGxjM1pwYzJsaWJHVmJRVU5GTG1acGJHVnpiR2x6ZEZ0cFhWMGdQU0FoWVc1NVVHRnlaVzUwYzBOdmJHeGhjSE5sWkNoQlEwVXVabWxzWlhOc2FYTjBXMmxkTG5Od2JHbDBLQ2N2SnlrcENna0pmU0JsYkhObElIc0tDUWtKWTI5dWRHbHVkV1VnTHk4Z1pHOXVKM1FnWTI5MWJuUWdjMlZzWmo4S0NRbDlDZ2tKYVdZb0lXTnZiR3hoY0hObEtTQjdDZ2tKQ1VGRFJTNW1hV3hsYzJOdmRXNTBLeXNLQ1FsOUlHVnNjMlVnZXdvSkNRbEJRMFV1Wm1sc1pYTmpiM1Z1ZEMwdENna0pmUW9KZlFvSlFVTkZMbVpwYkdWemJXOTJaV1FnUFNCMGNuVmxDbjBLQ2dvS1puVnVZM1JwYjI0Z1pHOUdhV3hsUTJ4cFkyc29aWFowS1NCN0NnbHBaaWdoWlhaMExuUmhjbWRsZENrZ2V3b0pDWEpsZEhWeWJnb0pmUW9nSUd4bGRDQm5ZVzFsWkdseUlEMGdZV1JrY21WemMxUnZVM1J5YVc1bktFWlRYMGRsZEVOMWNuSmxiblJIWVcxbFJHbHlLQ2twQ2dsc1pYUWdjbTkzSUQwZ1pYWjBMblJoY21kbGRDNW5aWFJCZEhSeWFXSjFkR1VvSjJGeWFXRXRhV1FuS1NBdkx5QlhWRVkvQ2dsc1pYUWdaR0YwWVZKdmR5QTlJRUZEUlM1bWFXeGxjMnhwYzNSYmNtOTNYUW9KYVdZb1JsTXVkbWx5ZEhWaGJGdGtZWFJoVW05M1hRb0pDU1ltSUVaVExuWnBjblIxWVd4YlpHRjBZVkp2ZDEwdWJXOWtaU0FoUFNCR1UxOUVTVklwSUhzS0NRbERZblZtWDBGa1pGUmxlSFFvYzNSeWFXNW5WRzlCWkdSeVpYTnpLQW9KQ1FrSkoyVmthWFFnSWljZ0t5QmtZWFJoVW05M0xuSmxjR3hoWTJVb1oyRnRaV1JwY2lBcklDY3ZKeXdnSnljcElDc2dKeUpjYmljcEtRb0pDWEpsZEhWeWJnb0pmUW9KZEc5bloyeGxRMjlzYkdGd2MyVW9jbTkzTENCa1lYUmhVbTkzS1FwOUNnb0tablZ1WTNScGIyNGdaMlYwVjJsa1oyVjBRWFJTYjNjb2NtOTNLU0I3Q2dsc1pYUWdZMjkxYm5RZ1BTQXdDZ2xrYnlCN0Nna0phV1lvUVVORkxtWnBiR1ZzYVhOMFYybGtaMlYwVW05M2MxdGpiM1Z1ZEYwZ1BUMGdjbTkzS1NCN0Nna0pDWEpsZEhWeWJpQkJRMFV1Wm1sc1pXeHBjM1JYYVdSblpYUnpXM0p2ZDEwS0NRbDlDZ2tKWTI5MWJuUXJLd29KZlNCM2FHbHNaU0FvWTI5MWJuUWdQQ0JCUTBVdVptbHNaV3hwYzNSWGFXUm5aWFJTYjNkekxteGxibWQwYUFvSkNTWW1JRUZEUlM1bWFXeGxiR2x6ZEZkcFpHZGxkRkp2ZDNOYlkyOTFiblJkSUR3OUlISnZkeWtLZlFvS1puVnVZM1JwYjI0Z1oyVjBWMmxrWjJWMFFtVm1iM0psVW05M0tISnZkeWtnZXdvSmJHVjBJR052ZFc1MElEMGdNQW9KYkdWMElIZHBaR2RsZEFvSlpHOGdld29KQ1dsbUtFRkRSUzVtYVd4bGJHbHpkRmRwWkdkbGRGSnZkM05iWTI5MWJuUmRJRHc5SUhKdmR5a2dld29KQ1FsM2FXUm5aWFFnUFNCQlEwVXVabWxzWld4cGMzUlhhV1JuWlhSelczSnZkMTBLQ1FsOUNna0pZMjkxYm5Rckt3b0pmU0IzYUdsc1pTQW9ZMjkxYm5RZ1BDQkJRMFV1Wm1sc1pXeHBjM1JYYVdSblpYUlNiM2R6TG14bGJtZDBhQW9KQ1NZbUlFRkRSUzVtYVd4bGJHbHpkRmRwWkdkbGRGSnZkM05iWTI5MWJuUmRJRHc5SUhKdmR5a0tDWEpsZEhWeWJpQjNhV1JuWlhRS2ZRb0tDbVoxYm1OMGFXOXVJSEpsYm1SbGNrWnBiR1VvYkdsdWF5d2dhWFJsYlN3Z2NHRjBhQ2tnZXdvSmJHVjBJSE5sWjIxbGJuUnpJRDBnY0dGMGFDNXpjR3hwZENnbkx5Y3BDZ2xwWmloc2FXNXJMbWx1Ym1WeVZHVjRkQ0FoUFNCelpXZHRaVzUwY3k1emJHbGpaU2d0TVNsYk1GMHBJSHNLQ1NBSmJHbHVheTVwYm01bGNsUmxlSFFnUFNCelpXZHRaVzUwY3k1emJHbGpaU2d0TVNsYk1GMEtDWDBLQ1d4cGJtc3VjM1I1YkdVdVltRmphMmR5YjNWdVpGQnZjMmwwYVc5dUlEMGdLQ2h6WldkdFpXNTBjeTVzWlc1bmRHZ2dMU0F4S1NBcUlESXdJQ3NnTVRBcElDc2dKM0I0SURVd0pTY0tDV2xtS0dsMFpXMHVZMnhoYzNOTWFYTjBMbU52Ym5SaGFXNXpLQ2RtYVd4bGJHbHpkQzEzYVdSblpYUW5LU2tLQ1FscGRHVnRMbU5zWVhOelRHbHpkQzV5WlcxdmRtVW9KMlpwYkdWc2FYTjBMWGRwWkdkbGRDY3BDZ2xzYVc1ckxuTjBlV3hsTG5CaFpHUnBibWRNWldaMElEMGdLSE5sWjIxbGJuUnpMbXhsYm1kMGFDQXFJREl3SUNzZ01qQXBJQ3NnSjNCNEp3b0phV1lvYVhORWFYSmxZM1J2Y25rb2NHRjBhQ2twSUhzS0NRbHBaaWdoYVhSbGJTNWpiR0Z6YzB4cGMzUXVZMjl1ZEdGcGJuTW9KMlp2YkdSbGNpY3BLUW9KQ1FscGRHVnRMbU5zWVhOelRHbHpkQzVoWkdRb0oyWnZiR1JsY2ljcENna0phV1lvSVVGRFJTNW1hV3hsYzJOdmJHeGhjSE5sWkZ0d1lYUm9YU0FtSmlBaGFYUmxiUzVqYkdGemMweHBjM1F1WTI5dWRHRnBibk1vSjI5d1pXNG5LU2tLQ1FrSmFYUmxiUzVqYkdGemMweHBjM1F1WVdSa0tDZHZjR1Z1SnlrS0NRbHBaaWhCUTBVdVptbHNaWE5qYjJ4c1lYQnpaV1JiY0dGMGFGMGdKaVlnYVhSbGJTNWpiR0Z6YzB4cGMzUXVZMjl1ZEdGcGJuTW9KMjl3Wlc0bktTa0tDUWtKYVhSbGJTNWpiR0Z6YzB4cGMzUXVjbVZ0YjNabEtDZHZjR1Z1SnlrS0NRbHBaaWhwZEdWdExtTnNZWE56VEdsemRDNWpiMjUwWVdsdWN5Z25abWxzWlNjcEtRb0pDUWxwZEdWdExtTnNZWE56VEdsemRDNXlaVzF2ZG1Vb0oyWnBiR1VuS1FvSmZTQmxiSE5sSUhzS0NRbHBaaWhwZEdWdExtTnNZWE56VG1GdFpTQWhQU0FuWm1sc1pTY3BDZ2tKQ1dsMFpXMHVZMnhoYzNOT1lXMWxJRDBnSjJacGJHVW5DZ2tKYVdZb2FYUmxiUzVqYkdGemMweHBjM1F1WTI5dWRHRnBibk1vSjJadmJHUmxjaWNwS1FvSkNRbHBkR1Z0TG1Oc1lYTnpUR2x6ZEM1eVpXMXZkbVVvSjJadmJHUmxjaWNwQ2dsOUNncDlDZ29LWm5WdVkzUnBiMjRnY21WdVpHVnlSRzlqZFcxbGJuUW9iR2x1YXl3Z2FYUmxiU3dnY0dGMGFDa2dld29KWm05eUtHeGxkQ0JwSUQwZ01Ec2dhU0E4SUVGRFJTNWtiMk4xYldWdWRHRjBhVzl1TG14bGJtZDBhRHNnYVNzcktTQjdDZ2tKYkdWMElISmxjR3hoWTJWa1RtRnRaU0E5SUVGRFJTNWtiMk4xYldWdWRHRjBhVzl1VzJsZENna0pDUzV5WlhCc1lXTmxLQ2N1YW5NbkxDQW5MbTFrSnlrS0NRa0pMbkpsY0d4aFkyVW9MMXd2TDJjc0lDZGZKeWtLQ1FscFppaHlaWEJzWVdObFpFNWhiV1VnSVQwZ2NHRjBhQ2tnZXdvSkNRbGpiMjUwYVc1MVpRb0pDWDBLQ1FscFppZ2hRVU5GTG5OcFpHVmlZWEpUZEhsc1pTa2dld29KQ1FsUWNtOXRhWE5sTG5KbGMyOXNkbVVvYzJWdVpFMWxjM05oWjJVb2V3b0pDUWtKYzJOeWFYQjBPaUFuY21WMGRYSnVJSEpsWVdSR2FXeGxLQ0pzYVdKeVlYSjVMM04wZVd4bGN5OXphV1JsWW1GeUxtTnpjeUlwTzF4dUp3b0pDUWw5S1M1MGFHVnVLR1oxYm1OMGFXOXVJQ2h5WlhOd2IyNXpaU2tnZXdvSkNRa0pRVU5GTG5OcFpHVmlZWEpUZEhsc1pTQTlJR1J2WTNWdFpXNTBMbU55WldGMFpVVnNaVzFsYm5Rb0oxTlVXVXhGSnlrS0NRa0pDVUZEUlM1emFXUmxZbUZ5VTNSNWJHVXVhVzV1WlhKVVpYaDBJRDBnY21WemNHOXVjMlVLQ1FrSkNXUnZZM1Z0Wlc1MExtSnZaSGt1YVc1elpYSjBRbVZtYjNKbEtFRkRSUzV6YVdSbFltRnlVM1I1YkdVc0lFRkRSUzVtYVd4bFRHbHpkQ2tLQ1FrSmZTa3BDZ2tKZlFvS0NRbFFjbTl0YVhObExuSmxjMjlzZG1Vb2MyVnVaRTFsYzNOaFoyVW9ld29KQ1FselkzSnBjSFE2SUNkeVpYUjFjbTRnY21WdVpHVnlUV0Z5YTJSdmQyNG9JaWNnS3lCQlEwVXVaRzlqZFcxbGJuUmhkR2x2Ymx0cFhTQXJJQ2NpS1R0Y2JpY0tDUWw5S1M1MGFHVnVLR1oxYm1OMGFXOXVJQ2h5WlhOd2IyNXpaU2tnZXdvSkNRbHBaaWh5WlhOd2IyNXpaU2tnZXdvSkNRa0piR1YwSUc1bGQwUnBZV3h2WnlBOUlHUnZZM1Z0Wlc1MExtTnlaV0YwWlVWc1pXMWxiblFvSjBSSlZpY3BDZ2tKQ1FsdVpYZEVhV0ZzYjJjdWFXUWdQU0FuWkc5amRXMWxiblJoZEdsdmJpY0tDUWtKQ1c1bGQwUnBZV3h2Wnk1cGJtNWxja2hVVFV3Z1BTQnlaWE53YjI1elpRb0pDUWtKYVhSbGJTNWhjSEJsYm1SRGFHbHNaQ2h1WlhkRWFXRnNiMmNwQ2drSkNYMEtDUWw5S1NrS0NYMEtDUXA5Q2dvS1puVnVZM1JwYjI0Z2NtVnVaR1Z5VjJsa1oyVjBLR3hwYm1zc0lHbDBaVzBzSUhCaGRHZ3BJSHNLQ1dsbUtHeHBibXN1YVc1dVpYSlVaWGgwSUNFOUlIQmhkR2dwSUhzZ0x5OGdiM1JvWlhKM2FYTmxJR0Z1Ym05NWFXNW5JR1pzWVhOb0lHbHVJR1ZzWlcxbGJuUWdjR0ZuWlFvSkNXeHBibXN1YVc1dVpYSlVaWGgwSUQwZ2NHRjBhQW9KZlFvSmJHbHVheTV6ZEhsc1pTNXdZV1JrYVc1blRHVm1kQ0E5SUNjeE1IQjRKd29KYVdZb0lXbDBaVzB1WTJ4aGMzTk1hWE4wTG1OdmJuUmhhVzV6S0NkbWFXeGxiR2x6ZEMxM2FXUm5aWFFuS1NrS0NRbHBkR1Z0TG1Oc1lYTnpUR2x6ZEM1aFpHUW9KMlpwYkdWc2FYTjBMWGRwWkdkbGRDY3BDZ2xwWmlnaFFVTkZMbVpwYkdWelkyOXNiR0Z3YzJWa1czQmhkR2hkSUNZbUlDRnBkR1Z0TG1Oc1lYTnpUR2x6ZEM1amIyNTBZV2x1Y3lnbmIzQmxiaWNwS1FvSkNXbDBaVzB1WTJ4aGMzTk1hWE4wTG1Ga1pDZ25iM0JsYmljcENnbHBaaWhCUTBVdVptbHNaWE5qYjJ4c1lYQnpaV1JiY0dGMGFGMGdKaVlnYVhSbGJTNWpiR0Z6YzB4cGMzUXVZMjl1ZEdGcGJuTW9KMjl3Wlc0bktTa0tDUWxwZEdWdExtTnNZWE56VEdsemRDNXlaVzF2ZG1Vb0oyOXdaVzRuS1FvSmFXWW9hWFJsYlM1amJHRnpjMHhwYzNRdVkyOXVkR0ZwYm5Nb0oyWnZiR1JsY2ljcEtRb0pDV2wwWlcwdVkyeGhjM05NYVhOMExuSmxiVzkyWlNnblptOXNaR1Z5SnlrS0NXbG1LR2wwWlcwdVkyeGhjM05NYVhOMExtTnZiblJoYVc1ektDZG1hV3hsSnlrcENna0phWFJsYlM1amJHRnpjMHhwYzNRdWNtVnRiM1psS0NkbWFXeGxKeWtLQ24wS0NncG1kVzVqZEdsdmJpQnlaVzVrWlhKR2RXNWpLR3hwYm1zc0lHbDBaVzBzSUhCaGRHZ3BJSHNLQ1dsbUtHeHBibXN1YVc1dVpYSlVaWGgwSUNFOUlIQmhkR2dwSUhzZ0x5OGdiM1JvWlhKM2FYTmxJR0Z1Ym05NWFXNW5JR1pzWVhOb0lHbHVJR1ZzWlcxbGJuUWdjR0ZuWlFvSkNXeHBibXN1YzNSNWJHVXVjR0ZrWkdsdVoweGxablFnUFNBbk1UQndlQ2NLQ1Fsc2FXNXJMbk4wZVd4bExtSmhZMnRuY205MWJtUlFiM05wZEdsdmJpQTlJQ2N4TUhCNElEVXdKU2NLQ1Fsc2FXNXJMbWx1Ym1WeVZHVjRkQ0E5SUhCaGRHZ0tDWDBLQ1dsMFpXMHVZMnhoYzNOT1lXMWxJRDBnSnljS2ZRb0tDbVoxYm1OMGFXOXVJSEpsYm1SbGNrTnZiMnRwWlNoc2FXNXJMQ0JwZEdWdExDQndZWFJvS1NCN0NnbHBaaWhzYVc1ckxtbHVibVZ5VkdWNGRDQWhQU0J3WVhSb0tTQjdJQzh2SUc5MGFHVnlkMmx6WlNCaGJtNXZlV2x1WnlCbWJHRnphQ0JwYmlCbGJHVnRaVzUwSUhCaFoyVUtDUWxzYVc1ckxuTjBlV3hsTG5CaFpHUnBibWRNWldaMElEMGdKekV3Y0hnbkNna0piR2x1YXk1emRIbHNaUzVpWVdOclozSnZkVzVrVUc5emFYUnBiMjRnUFNBbk1UQndlQ0ExTUNVbkNna0piR2x1YXk1cGJtNWxjbFJsZUhRZ1BTQndZWFJvQ2dsOUNnbHBkR1Z0TG1Oc1lYTnpUbUZ0WlNBOUlDY25DbjBLQ2dwbWRXNWpkR2x2YmlCeVpXNWtaWEpVYUhKbFlXUW9iR2x1YXl3Z2FYUmxiU3dnY0dGMGFDa2dld29KYVdZb2JHbHVheTVwYm01bGNsUmxlSFFnSVQwZ2NHRjBhQ2tnZXlBdkx5QnZkR2hsY25kcGMyVWdZVzV1YjNscGJtY2dabXhoYzJnZ2FXNGdaV3hsYldWdWRDQndZV2RsQ2drSmJHbHVheTV6ZEhsc1pTNXdZV1JrYVc1blRHVm1kQ0E5SUNjeE1IQjRKd29KQ1d4cGJtc3VjM1I1YkdVdVltRmphMmR5YjNWdVpGQnZjMmwwYVc5dUlEMGdKekV3Y0hnZ05UQWxKd29KQ1d4cGJtc3VhVzV1WlhKVVpYaDBJRDBnY0dGMGFBb0pmUW9KYVhSbGJTNWpiR0Z6YzA1aGJXVWdQU0FuSndwOUNnb0tDZ292THlCRVR5QlVTRVVnVTBGTlJTQkxTVTVFSUU5R0lGWkpVbFJWUVV3Z1VrVk9SRVZTU1U1SElGUkZRMGhPU1ZGVlJTQkJRMFVnVlZORlV5QlBUaUJEVDBSRkxBb3ZMeUFnSUVGT1JDQkJVRkJNV1NCSlZDQlVUeUJVU0VVZ1JrbE1SU0JNU1ZOVUlFbE9JRU5CVTBVZ1ZFaEZVa1VuVXlCRlZrVlNJRXhKUzBVc0lERXdMREF3TUFvdkx5QWdJRlJJUVZRZ1RVbEhTRlFnUWtVZ1ZFOVBJRTFWUTBnZ1JrOVNJRUVnVUVGSFJTNGdRazlQUzAxQlVrdFRMQ0JHVDFJZ1JWaEJUVkJNUlQ4S0x5OGdWRTlFVHpvZ1JrRk9RMWtnVTFSVlJrWWdURWxMUlNCV1V5QkRUMFJGSUVWWVZFVk9VMGxQVGxNZ1RFbFRWQ3dnUjBsVVNGVkNJRUZEVkVsUFRsTWdURVZHVkNCSVFVNUVJRXhKVTFRc0NpOHZJQ0FnVTBoUFZ5QkdTVXhGTFVkSVQxTlVJRlJCVWtkRlZGTWdRa1ZHVDFKRklFMUJTMFZHU1V4RklFTlNSVUZVUlZNZ1ZFaEZUU0JWVTBsT1J5QlRXVTVVUVZnZ1FVNUJURmxUU1ZNS0x5OGdJQ0JNU1V0RklFMUJRMDlUSUVSUFJWTWdTVTRnUmtsT1JFVlNJRmRJUlU0Z1dVOVZJRWRQSUZSUElFTlBVRmtnUVNCR1NVeEZJRTlTSUZOUFRVVlVTRWxPUnlCSlV5QUtMeThnSUNCVlVFeFBRVVJKVGtjZ1ZFOGdTVU5NVDFWRUxncG1kVzVqZEdsdmJpQnlaVzVrWlhKR2FXeGxiR2x6ZENncElIc0tDV2xtS0NGQlEwVXVabWxzWlV4cGMzUXBJSHNLQ1FsMWNHUmhkR1ZHYVd4bGJHbHpkQ2dwQ2drSmFXWW9JVUZEUlM1bWFXeGxUR2x6ZENrZ2V3b0pDUWx5WlhSMWNtNEtDUWw5Q2dsOUNnbHNaWFFnYkdsdVpVaGxhV2RvZENBOUlESXhDZ2xwWmloMGVYQmxiMllnZDJsdVpHOTNMbUZqWlNBaFBTQW5kVzVrWldacGJtVmtKd29KQ1FrbUppQjBlWEJsYjJZZ2QybHVaRzkzTG1GalpTNXlaVzVrWlhKbGNpQWhQU0FuZFc1a1pXWnBibVZrSnlrZ2V3b0pDV3hwYm1WSVpXbG5hSFFnUFNCaFkyVXVjbVZ1WkdWeVpYSXViR2x1WlVobGFXZG9kQW9KZlFvS0NTOHZJRWRGVGtWU1FWUkZJRlJJU1ZNZ1RFbFRWQ0JQVGlCQ1FVTkxSVTVFSUZWVFNVNUhJRlpKVWxSVlFVd2dSRTlOTENCRFUxTWdRMDlPVkZKUFRDQlBWa1ZTSUV4SlUxUWdWMGxNVEFvSkx5OGdJQ0JNVDA5TElGUklSU0JUUVUxRkNnbHNaWFFnWVdOMGRXRnNUR2x6ZENBOUlFRkRSUzVtYVd4bFRHbHpkQzVuWlhSRmJHVnRaVzUwYzBKNVZHRm5UbUZ0WlNnbmIyd25LVnN3WFFvSmFXWW9JV0ZqZEhWaGJFeHBjM1FwSUhzS0NRbHlaWFIxY200S0NYMEtDV3hsZENCdVpYZElaV2xuYUhRZ1BTQkJRMFV1Wm1sc1pYTmpiM1Z1ZENBcUlHeHBibVZJWldsbmFIUUtDV2xtS0dGamRIVmhiRXhwYzNRdVkyeHBaVzUwU0dWcFoyaDBJQ0U5SUc1bGQwaGxhV2RvZENrS0NRbGhZM1IxWVd4TWFYTjBMbk4wZVd4bExtaGxhV2RvZENBOUlHNWxkMGhsYVdkb2RDQXJJQ2R3ZUNjS0NnbHNaWFFnZG1seWRIVmhiRXhwYm1WRGIzVnVkQ0E5SUUxaGRHZ3ViV2x1S0UxaGRHZ3VZMlZwYkNnS0NRbEJRMFV1Wm1sc1pVeHBjM1F1WTJ4cFpXNTBTR1ZwWjJoMElDOGdiR2x1WlVobGFXZG9kQ2tLQ1FrSkNTd2dRVU5GTG1acGJHVnpZMjkxYm5RcElDOHZJRzFwYml3Z2RYQmtZWFJsWkNCdmJpQnBiblJsY21GamRHbHZiZ29LQ1M4dklGUklTVk1nU1ZNZ1YxSlBUa2NzSUZOVVFWSlVTVTVISUU5T0lGWkpVMGxDVEVVZ1RFbE9SVk1nVEVsVFZBb0pMeThnSUNCT1QxUWdRVXhNSUU5R0lFWkpURVZUTGlCQ1ZWUWdWMEZKVkN3Z1NVWWdWRWhGV1NCVFExSlBURXhGUkNCSlZBb0pMeThnSUNCRFJWSlVRVWxPVEZrZ1EwRk9KMVFnUkVsVFVFeEJXU0JNU1U1RlV5QkNSVVpQVWtVZ1ZFaEZTVklnVTBOU1QweE1DZ2t2THlBZ0lFVldSVTRnU1VZZ1ZFaEZXU0JCVWtVZ1EwOU1URUZRVTBWRUlFOVNJRTVQVkM0S0NXeGxkQ0J6ZEdGeWRFeHBibVVnUFNCTllYUm9MbVpzYjI5eUtBb0pDVUZEUlM1bWFXeGxUR2x6ZEM1elkzSnZiR3hVYjNBZ0x5QnNhVzVsU0dWcFoyaDBLUW9KYkdWMElHUnBjM0JzWVhsRGIzVnVkQ0E5SURBS0NnbHNaWFFnY21WdVpHVnlSblZ1WTNScGIyNGdQU0JuWlhSWGFXUm5aWFJDWldadmNtVlNiM2NvYzNSaGNuUk1hVzVsS1ZzeVhRb0piR1YwSUhkcFpHZGxkQW9LQ1dadmNpZ0tDUWxzWlhRZ2FpQTlJSE4wWVhKMFRHbHVaVHNnTHk4Z2MyMWhiR3dnWldabWFXTnBaVzVqZVNCbllXbHVQd29KQ1dScGMzQnNZWGxEYjNWdWRDQThJSFpwY25SMVlXeE1hVzVsUTI5MWJuUWdKaVlnYWlBOElFRkRSUzVtYVd4bGMyeHBjM1F1YkdWdVozUm9Pd29KQ1dvckt3b0pLU0I3Q2drSmFXWW9JVUZEUlM1bWFXeGxjM1pwYzJsaWJHVmJRVU5GTG1acGJHVnpiR2x6ZEZ0cVhWMHBJSHNLQ1FrSlkyOXVkR2x1ZFdVS0NRbDlDZ2tKTHk4Z1UxZEpWRU5JU1U1SElFSkZWRmRGUlU0Z1NVUkZJRUZPUkNCVFQxVlNRMFVnVkZKRlJTQlVUeUJEVDFCWklGTklTVlFnUTA5RVJTQkpJQW9KQ1M4dklDQWdWMUpQVkVVZ1RFRlRWQ0JPU1VkSVZDNGdTU0JTUlVGTVNWcEZSQ0JXVXlCRFQwUkZJRVJQUlZNZ1ZFaEpVeUJDVEVGTlJTQkdSVUZVVlZKRkNna0pMeThnSUNCQ1ZWUWdTVlFuVXlCRVNWTlVVa0ZEVkVsT1J5d2dRazlVU0NCV1NVVlhVeUJQUmlCRFNFRk9SMFZUSUVGU1JTQlRUVUZNVENCQlRrUWdDZ2tKTHk4Z0lDQkpUa05QVGxaRlRrbEZUbFFzSUVKRldVOU9SQ0JEVDAxUVFWSkZJRWxUSUVKRldVOU9SQ0JEVDAxUVFWSkZMaUJYU0VGVUlFbEdJRlJJUlZKRkNna0pMeThnSUNCWFFWTWdRU0JVUVVJZ1FWUWdWRWhGSUZSUFVDQkpJRU5QVlV4RUlGTlhTVlJEU0NCVVR5d2dWRThnVTBWRklGTlBWVkpEUlNCRFQwMVFRVkpGUHdvSkNXeGxkQ0JwZEdWdENna0piR1YwSUd4cGJtc0tDZ2tKYVdZb1pHbHpjR3hoZVVOdmRXNTBJRDA5SUdGamRIVmhiRXhwYzNRdVkyaHBiR1J5Wlc0dWJHVnVaM1JvS1NCN0Nna0pDV2wwWlcwZ1BTQmtiMk4xYldWdWRDNWpjbVZoZEdWRmJHVnRaVzUwS0NkTVNTY3BDZ2tKQ1dGamRIVmhiRXhwYzNRdVlYQndaVzVrUTJocGJHUW9hWFJsYlNrS0NRa0piR2x1YXlBOUlHUnZZM1Z0Wlc1MExtTnlaV0YwWlVWc1pXMWxiblFvSjBFbktRb0pDUWxzYVc1ckxtOXVZMnhwWTJzZ1BTQmtiMFpwYkdWRGJHbGphd29KQ1FscGRHVnRMbUZ3Y0dWdVpFTm9hV3hrS0d4cGJtc3BDZ2tKZlNCbGJITmxJSHNLQ1FrSmFYUmxiU0E5SUdGamRIVmhiRXhwYzNRdVkyaHBiR1J5Wlc1YlpHbHpjR3hoZVVOdmRXNTBYUW9KQ1Fsc2FXNXJJRDBnYVhSbGJTNWphR2xzWkhKbGJsc3dYUW9KQ1gwS0NRa3ZMeUJVVDBSUE9pQlRTRTlYSUZORlVFVlNRVlJGUkNCRVNWSkZRMVJQVWtsRlV5QkpUaUJQVGtVZ1RFbE9SU0JNU1V0RklGWkpVMVZCVENCVFZGVkVTVThnUTA5RVJTQkVUMFZUQ2drSkx5OGdJQ0JIU1ZSSVZVSWdRVXhUVHlCRVQwVlRJRWxVSUVaUFVpQkdUMHhFUlZKVElGUklRVlFnVDA1TVdTQklRVlpGSURFZ1VFRlVTQW9KQ1dsbUtFRkRSUzVtYVd4bGMyMXZkbVZrS1NCN0Nna0pDV3hwYm1zdWMyVjBRWFIwY21saWRYUmxLQ2RoY21saExXbGtKeXdnYWlrZ0x5OGdWMVJHSUZkQlV5QlVTRWxUSUVOU1FWQS9QejhLQ1FrSmFXWW9LSGRwWkdkbGRDQTlJR2RsZEZkcFpHZGxkRUYwVW05M0tHb3BLU2tnZXdvSkNRa0pjbVZ1WkdWeVJuVnVZM1JwYjI0Z1BTQjNhV1JuWlhSYk1sMEtDUWtKQ1hKbGJtUmxjbGRwWkdkbGRDaHNhVzVyTENCcGRHVnRMQ0JCUTBVdVptbHNaWE5zYVhOMFcycGRLUW9KQ1FsOUlHVnNjMlVnZXdvSkNRa0pjbVZ1WkdWeVJuVnVZM1JwYjI0b2JHbHVheXdnYVhSbGJTd2dRVU5GTG1acGJHVnpiR2x6ZEZ0cVhTa0tDUWtKZlFvSkNRbHBkR1Z0TG5OMGVXeGxMbVJwYzNCc1lYa2dQU0FuWW14dlkyc25DZ2tKZlFvSkNXUnBjM0JzWVhsRGIzVnVkQ3NyQ2dsOUNnbHBaaWhCUTBVdVptbHNaWE50YjNabFpDa2dld29KQ1dadmNpaHNaWFFnYVNBOUlHUnBjM0JzWVhsRGIzVnVkRHNnYVNBOElHRmpkSFZoYkV4cGMzUXVZMmhwYkdSeVpXNHViR1Z1WjNSb095QnBLeXNwSUhzS0NRa0pZV04wZFdGc1RHbHpkQzVqYUdsc1pISmxibHRwWFM1emRIbHNaUzVrYVhOd2JHRjVJRDBnSjI1dmJtVW5DZ2tKZlFvSmZRb0pRVU5GTG1acGJHVnpiVzkyWldRZ1BTQm1ZV3h6WlFwOUNnb0tMeW9LQ2drdkx5QmxlSFJ5WVdOMElHSmhjMlZ1WVcxbElHWnliMjBnZW1sd0lIQmhkR2dLQ1dKaGMyVnVZVzFsSUQwZ2MzUnljbU5vY2lnZ2VtbHdabWxzWlN3Z1VFRlVTRjlUUlZBZ0tUc0tDV2xtSUNnZ1ltRnpaVzVoYldVZ1BUMGdUbFZNVENBcElIc0tDUWxpWVhObGJtRnRaU0E5SUhwcGNHWnBiR1U3Q2dsOUlHVnNjMlVnZXdvSkNXSmhjMlZ1WVcxbEt5czdDZ2w5Q2dvSlptbHNaVTVoYldWTVpXNGdQU0FvYVc1MEtTQnpkSEpzWlc0b0lIcHBjR1pwYkdVZ0tTQXJJREU3Q2dsaVlYTmxUbUZ0WlV4bGJpQTlJQ2hwYm5RcElITjBjbXhsYmlnZ1ltRnpaVzVoYldVZ0tTQXJJREU3Q2dvSmRXWWdQU0IxYm5wUGNHVnVLQ0I2YVhCbWFXeGxJQ2s3Q2dsbGNuSWdQU0IxYm5wSFpYUkhiRzlpWVd4SmJtWnZLQ0IxWml3Z0ptZHBJQ2s3Q2dvSmFXWWdLQ0JsY25JZ0lUMGdWVTVhWDA5TElDa2dld29KQ1hKbGRIVnliaUJPVlV4TU93b0pmUW9LQ1c1aGJXVnNaVzRnUFNBd093b0pabWxzWldOdmRXNTBJRDBnTURzS0NYVnVla2R2Vkc5R2FYSnpkRVpwYkdVb0lIVm1JQ2s3Q2dsbWIzSWdLR2tnUFNBd095QnBJRHdnWjJrdWJuVnRZbVZ5WDJWdWRISjVPeUJwS3lzcENnbDdDZ2tKWlhKeUlEMGdkVzU2UjJWMFEzVnljbVZ1ZEVacGJHVkpibVp2S0hWbUxDQW1abWxzWlY5cGJtWnZMQ0JtYVd4bGJtRnRaVjlwYm5wcGNDd2djMmw2Wlc5bUtHWnBiR1Z1WVcxbFgybHVlbWx3S1N3Z1RsVk1UQ3dnTUN3Z1RsVk1UQ3dnTUNrN0Nna0pabWxzWlc1aGJXVmZhVzU2YVhCYmMybDZaVzltS0dacGJHVnVZVzFsWDJsdWVtbHdLUzB4WFNBOUlDZGNNQ2M3Q2drSmFXWWdLR1Z5Y2lBaFBTQlZUbHBmVDBzcElIc0tDUWtKWW5KbFlXczdDZ2tKZlFvSkNTOHZJRnBmUkVWR1RFRlVSVVFLQ1FscFppQW9JR1pwYkdWZmFXNW1ieTVqYjIxd2NtVnpjMmx2Ymw5dFpYUm9iMlFnSVQwZ01DQW1KaUJtYVd4bFgybHVabTh1WTI5dGNISmxjM05wYjI1ZmJXVjBhRzlrSUNFOUlEZ2dJQ2tnZXdvSkNRbERiMjFmVUhKcGJuUm1LQ0JUWDBOUFRFOVNYMWxGVEV4UFZ5QWlKWE44SlhNNklIVnVjM1Z3Y0c5eWRHVmtJR052YlhCeVpYTnphVzl1SUcxbGRHaHZaQ0FsYVZ4dUlpd2dZbUZ6Wlc1aGJXVXNJR1pwYkdWdVlXMWxYMmx1ZW1sd0xDQW9hVzUwS1dacGJHVmZhVzVtYnk1amIyMXdjbVZ6YzJsdmJsOXRaWFJvYjJRZ0tUc0tDUWtKZFc1NlIyOVViMDVsZUhSR2FXeGxLQ0IxWmlBcE93b0pDUWxqYjI1MGFXNTFaVHNLQ1FsOUNna0pibUZ0Wld4bGJpQXJQU0J6ZEhKc1pXNG9JR1pwYkdWdVlXMWxYMmx1ZW1sd0lDa2dLeUF4T3dvSkNYVnVla2R2Vkc5T1pYaDBSbWxzWlNnZ2RXWWdLVHNLQ1FsbWFXeGxZMjkxYm5Rckt6c0tDWDBLQ2dscFppQW9JR1pwYkdWamIzVnVkQ0E5UFNBd0lDa2dld29KQ1hWdWVrTnNiM05sS0NCMVppQXBPd29KQ1hKbGRIVnliaUJPVlV4TU93b0pmUW9xTHdvS0NnPT0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L3N0eWxlcy9jb21tYW5kcy5jc3NfdGltZXN0YW1wJ109MTY1MTczMDEzMDY1ODsKd2luZG93LnByZUZTWydsaWJyYXJ5L3N0eWxlcy9jb21tYW5kcy5jc3MnXT0nQ2lOamIyMXRZVzVrTFdKaGNpQjdDaUFnY0c5emFYUnBiMjQ2SUdGaWMyOXNkWFJsT3dvZ0lIb3RhVzVrWlhnNklEazVPVHNLSUNCMGIzQTZJREE3Q2lBZ2NHRmtaR2x1WnpvZ01DQXdJREFnTkRCd2VEc0tJQ0JzWldaME9pQXdPd29nSUhkcFpIUm9PaUF4TURBbE93b2dJR1p2Ym5RdGMybDZaVG9nTVRSd2VEc0tJQ0JqYjJ4dmNqb2dJMEl3UWpBNU1Ec0tJQ0IzYUdsMFpTMXpjR0ZqWlRvZ2JtOTNjbUZ3T3dvZ0lHaGxhV2RvZERvZ01qSndlRHNLSUNCa2FYTndiR0Y1T2lCaWJHOWphenNLSUNCaVlXTnJaM0p2ZFc1a09pQWpNREF3T3dwOUNnb2pZMjl0YldGdVpDMWlZWElnYkdGaVpXd2dld29nSUdKaFkydG5jbTkxYm1RdFkyOXNiM0k2SUNNd01EQTdDaUFnWW05eVpHVnlPaUF4Y0hnZ2MyOXNhV1FnSXpBd01Ec0tJQ0J2ZG1WeVpteHZkem9nYUdsa1pHVnVPd29nSUhCdmMybDBhVzl1T2lCeVpXeGhkR2wyWlRzS0lDQmthWE53YkdGNU9pQnBibXhwYm1VdFlteHZZMnM3Q2lBZ1ltOXlaR1Z5TFhKaFpHbDFjem9nTVRCd2VEc0tJQ0J3WVdSa2FXNW5PaUF3SURSd2VEc0tJQ0J0WVhKbmFXNDZJQzB4Y0hnN0NpQWdlaTFwYm1SbGVEb2dNVHNLSUNCamRYSnpiM0k2SUhCdmFXNTBaWEk3Q24wS0NpTmpiMjF0WVc1a0xXSmhjaUJzWVdKbGJEcGhablJsY2lCN0NpQWdiR1ZtZERwaGRYUnZPd29nSUhKcFoyaDBPakE3Q24wS0NpTmpiMjF0WVc1a0xXSmhjaUJzWVdKbGJEcG9iM1psY2lCN0NpQWdZbUZqYTJkeWIzVnVaRG9nSXpBd01qc0tmUW9LSTJOdmJXMWhibVF0WW1GeUlHbHVjSFYwT21GamRHbDJaU3dLSTJOdmJXMWhibVF0WW1GeUlHbHVjSFYwT21adlkzVnpMQW9qWTI5dGJXRnVaQzFpWVhJZ2FXNXdkWFFnZXdvZ0lHSnZjbVJsY2pvZ01IQjRPd29nSUc5MWRHeHBibVU2SUc1dmJtVTdDbjBLQ2dvalkyOXRiV0Z1WkMxaVlYSWdhVzV3ZFhRc0NpTmpiMjF0WVc1a0xXSmhjaUJ6Wld4bFkzUXNDaU5qYjIxdFlXNWtMV0poY2lCdmNIUnBiMjRnZXdvZ0lHWnZiblE2SURFeWNIZ3ZibTl5YldGc0lDZE5iMjVoWTI4bkxDQW5UV1Z1Ykc4bkxDQW5WV0oxYm5SMUlFMXZibThuTENBblEyOXVjMjlzWVhNbkxDQW5jMjkxY21ObExXTnZaR1V0Y0hKdkp5d2diVzl1YjNOd1lXTmxPd29nSUcxaGNtZHBiam9nTVhCNE93b2dJSEJoWkdScGJtYzZJREE3Q2lBZ2IzVjBiR2x1WlRvZ2JtOXVaVHNLZlFvS0kyTnZiVzFoYm1RdFltRnlJR2x1Y0hWMFczUjVjR1VxUFNKamFHVmphMkp2ZUNKZElIc0tJQ0J3YjNOcGRHbHZiam9nY21Wc1lYUnBkbVU3Q2lBZ2FHVnBaMmgwT2lBeGNIZzdDaUFnZDJsa2RHZzZJREZ3ZURzS0lDQnZjR0ZqYVhSNU9pQXdPd29nSUhCaFpHUnBibWM2SURFd01DVTdDbjBLQ2lOamIyMXRZVzVrTFdKaGNpQnBibkIxZEZ0MGVYQmxLajBpWTJobFkydGliM2dpWFRwamFHVmphMlZrSUNzZ2JHRmlaV3dnYzNCaGJpQjdDaUFnYkdWbWREb2dNakJ3ZURzS0lDQmlZV05yWjNKdmRXNWtMV052Ykc5eU9pQWpRekJCTURNd093cDlDZ29LSTJOdmJXMWhibVF0WW1GeUlHbHVjSFYwVzNSNWNHVXFQU0pqYUdWamEySnZlQ0pkT21Ob1pXTnJaV1FnS3lCc1lXSmxiQ0J6Y0dGdU9tSmxabTl5WlNCN0NpQWdiR1ZtZERvdE1qQndlRHNLZlFvS0kyTnZiVzFoYm1RdFltRnlJR2x1Y0hWMFczUjVjR1U5SW1Ob1pXTnJZbTk0SWwwZ0t5QnNZV0psYkNCemNHRnVJSHNLSUNCd2IzTnBkR2x2YmpvZ1lXSnpiMngxZEdVN0NpQWdaR2x6Y0d4aGVUb2dZbXh2WTJzN0NpQWdZMjl1ZEdWdWREb2dJaUFpT3dvZ0lHSnZlQzF6YVhwcGJtYzZJR0p2Y21SbGNpMWliM2c3Q2lBZ1ltOXlaR1Z5TFhKaFpHbDFjem9nTVRBd0pUc0tJQ0JvWldsbmFIUTZJREU0Y0hnN0NpQWdkMmxrZEdnNklERTRjSGc3Q2lBZ1ltRmphMmR5YjNWdVpDMWpiMnh2Y2pvZ0kwRXdOekF5TURzS0lDQnNaV1owT2lBd093b2dJSFJ2Y0RvZ01Ec0tJQ0IwY21GdWMybDBhVzl1T2lBdU5YTWdZbUZqYTJkeWIzVnVaQzFqYjJ4dmNpQmxZWE5sT3dwOUNnb3ZLaUJVVDBSUE9pQmpiMjUyWlhKMElIUnZJRk5EVTFNZ2QyaGxiaUJsYm5ScGNtVWdZblZwYkdRZ2MzUmhZMnNnYVhNZ2FXNGdZbkp2ZDNObGNpQXFMd29qWTI5dGJXRnVaQzFpWVhJZ2FXNXdkWFJiZEhsd1pUMGlZMmhsWTJ0aWIzZ2lYU0FySUd4aFltVnNJSHNLSUNCd1lXUmthVzVuTFd4bFpuUTZJRFF3Y0hnN0NuMEtDaU5qYjIxdFlXNWtMV0poY2lCcGJuQjFkRnQwZVhCbFBTSmphR1ZqYTJKdmVDSmRJQ3NnYkdGaVpXd2djM0JoYmpwaVpXWnZjbVVnZXdvZ0lHUnBjM0JzWVhrNllteHZZMnM3Q2lBZ1kyOXVkR1Z1ZERvZ0lpQWlPd29nSUhCdmMybDBhVzl1T21GaWMyOXNkWFJsT3dvZ0lIUnZjRG93T3dvZ0lHeGxablE2TURzS0lDQmliM0prWlhJNklESndlQ0J6YjJ4cFpDQWpRVEEzTURJd093b2dJR0p2Y21SbGNpMXlZV1JwZFhNNklERXdjSGc3Q2lBZ2QybGtkR2c2SURNNGNIZzdDaUFnYUdWcFoyaDBPaUF4T0hCNE93b2dJR0p2ZUMxemFYcHBibWM2SUdKdmNtUmxjaTFpYjNnN0NuMEtDaU5qYjIxdFlXNWtMV0poY2lCcGJuQjFkRnQwZVhCbFBTSmphR1ZqYTJKdmVDSmRJQ3NnYkdGaVpXdzZhRzkyWlhJZ2MzQmhiaUI3Q2lBZ1ltRmphMmR5YjNWdVpDMWpiMnh2Y2pvZ0kwTXdRVEF6TURzS2ZRbz0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L3N0eWxlcy9kaWFsb2dzLmNzc190aW1lc3RhbXAnXT0xNjUxNzMwMDkzNzY4Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc3R5bGVzL2RpYWxvZ3MuY3NzJ109J0NpNWthV0ZzYjJjZ2FXNXdkWFFzQ2k1a2FXRnNiMmNnYzJWc1pXTjBMQW91WkdsaGJHOW5JRzl3ZEdsdmJpQjdDaUFnWm05dWREb2dNVEp3ZUM5dWIzSnRZV3dnSjAxdmJtRmpieWNzSUNkTlpXNXNieWNzSUNkVlluVnVkSFVnVFc5dWJ5Y3NJQ2REYjI1emIyeGhjeWNzSUNkemIzVnlZMlV0WTI5a1pTMXdjbThuTENCdGIyNXZjM0JoWTJVN0NpQWdiV0Z5WjJsdU9pQXhjSGc3Q2lBZ2NHRmtaR2x1WnpvZ01Ec0tJQ0J2ZFhSc2FXNWxPaUJ1YjI1bE93cDlDZ291WkdsaGJHOW5JSHNLSUNCa2FYTndiR0Y1T2lCdWIyNWxPd29nSUhCdmMybDBhVzl1T2lCaFluTnZiSFYwWlRzS0lDQjBiM0E2SURBN0NpQWdiR1ZtZERvZ01Ec0tJQ0IzYVdSMGFEb2dNVEF3SlRzS0lDQmlZV05yWjNKdmRXNWtPaUFqTWpBeU1ESXdPd29nSUhvdGFXNWtaWGc2SURFd01EQTdDaUFnYUdWcFoyaDBPaUF4TURBbE93b2dJR0poWTJ0bmNtOTFibVF0WTI5c2IzSTZJSEpuWW1Fb01Dd3dMREFzTGpVcE93cDlDaTVrYVdGc2IyY2dMblJwZEd4bExBb3VaR2xoYkc5bklHZ3lJSHNLSUNCdFlYSm5hVzQ2SUMwME1IQjRJQzAwTUhCNElESXdjSGdnTFRRd2NIZzdDaUFnY0dGa1pHbHVaem9nTUM0eVpXMGdNQzQxWlcwN0NpQWdZbUZqYTJkeWIzVnVaRG9nSXpNek16c0tJQ0JtYjI1MExYZGxhV2RvZERvZ1ltOXNaRHNLSUNCMFpYaDBMWFJ5WVc1elptOXliVG9nZFhCd1pYSmpZWE5sT3dwOUNpNWthV0ZzYjJjZ0xtUmxjMk55YVhCMGFXOXVMQW91WkdsaGJHOW5JRDRnS2pwbWFYSnpkQzFqYUdsc1pDQjdDaUFnY0c5emFYUnBiMjQ2SUdGaWMyOXNkWFJsT3dvZ0lIUnZjRG9nTlRBbE93b2dJR3hsWm5RNklEVXdKVHNLSUNCdFlYSm5hVzR0ZEc5d09pQXRNVEF3Y0hnN0NpQWdiV0Z5WjJsdUxXeGxablE2SUMweU1EQndlRHNLSUNCbWIyNTBMWE5wZW1VNklERTRjSGc3Q2lBZ1kyOXNiM0k2SUNOR1JrWTdDaUFnWkdsemNHeGhlVG9nWW14dlkyczdDaUFnWW1GamEyZHliM1Z1WkRvZ0l6SXlNanNLSUNCd1lXUmthVzVuT2lBME1IQjRPd3A5Q2dvdVpHbGhiRzluSUdsdWNIVjBXM1I1Y0dVOUluSmhaR2x2SWwwZ2V3b2dJR2hsYVdkb2REb2dNWEI0T3dvZ0lIZHBaSFJvT2lBeGNIZzdDaUFnY0c5emFYUnBiMjQ2WVdKemIyeDFkR1U3Q2lBZ2JHVm1kRG94TURBbE93b2dJSFJ2Y0RveE1EQWxPd29nSUM4cUlIWnBjMmxpYVd4cGRIazZJR2hwWkdSbGJqc2dkMjl1SjNRZ2NtVmpiM0prSUhOMFlYUjFjeUJwWmlCcGRDZHpJR2hwWkdSbGJpQXFMd29nSUc5d1lXTnBkSGs2SURBdU1ERTdDbjBLQ2k1a2FXRnNiMmNnYVc1d2RYUmJkSGx3WlQwaWNtRmthVzhpWFNBcklHeGhZbVZzSUhzS0lDQndZV1JrYVc1bk9pQXlNSEI0T3dvZ0lHSnZjbVJsY2pvZ01uQjRJSE52Ykdsa0lDTXpNek03Q2lBZ1pHbHpjR3hoZVRwcGJteHBibVV0WW14dlkyczdDbjBLQ2k1a2FXRnNiMmNnYVc1d2RYUmJkSGx3WlQwaWNtRmthVzhpWFRwamFHVmphMlZrSUNzZ2JHRmlaV3dnZXdvZ0lHSmhZMnRuY205MWJtUTZJQ016TXpNN0NuMEtDaU5tYVd4bExXeHBjM1FnTG1sdWRHVnlZV04wYVc5dUlDNWthV0ZzYjJjZ1BpQXFPbVpwY25OMExXTm9hV3hrSUhzS0lDQjBiM0E2SURFd01DVTdDaUFnYkdWbWREb2dNRHNLSUNCdFlYSm5hVzR0ZEc5d09pQXdPd29nSUcxaGNtZHBiaTFzWldaME9pQXdPd29nSUhCdmMybDBhVzl1T2lCeVpXeGhkR2wyWlRzS0lDQnZkbVZ5Wm14dmR6b2dhR2xrWkdWdU93cDlDZ29qWm1sc1pTMXNhWE4wSUM1cGJuUmxjbUZqZEdsdmJqcG9iM1psY2lBdVpHbGhiRzluSUQ0Z0tqcG1hWEp6ZEMxamFHbHNaQ3dLSTJacGJHVXRiR2x6ZENBdWFXNTBaWEpoWTNScGIyNGdMbVJwWVd4dlp6cG9iM1psY2lBK0lDbzZabWx5YzNRdFkyaHBiR1FzQ2lObWFXeGxMV3hwYzNRZ0xtbHVkR1Z5WVdOMGFXOXVJR0U2YUc5MlpYSWdLeUF1WkdsaGJHOW5JRDRnS2pwbWFYSnpkQzFqYUdsc1pDQjdDaUFnY0c5emFYUnBiMjQ2SUdGaWMyOXNkWFJsT3dvZ0lHOTJaWEptYkc5M09pQjJhWE5wWW14bE93cDlDZz09JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9zdHlsZXMvZWRpdG9yLmNzc190aW1lc3RhbXAnXT0xNjUxNzMwMTQyOTk1Owp3aW5kb3cucHJlRlNbJ2xpYnJhcnkvc3R5bGVzL2VkaXRvci5jc3MnXT0nJzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS9zdHlsZXMvc2lkZWJhci5jc3NfdGltZXN0YW1wJ109MTY1MTczMDAzMjI3OTsKd2luZG93LnByZUZTWydsaWJyYXJ5L3N0eWxlcy9zaWRlYmFyLmNzcyddPSdDZ29qWm1sc1pTMXNhWE4wSUhzS0lDQjNhV1IwYURvZ01qVXdjSGc3Q2lBZ1ptOXVkQzF6YVhwbE9pQXhObkI0T3dvZ0lHWnNaWGd0YzJoeWFXNXJPaUF3T3dwOUNnb2pabWxzWlMxc2FYTjBJRzlzSUhzS0lDQnRZWEpuYVc0NklEQTdDaUFnYkdsemRDMXpkSGxzWlRvZ2JtOXVaVHNLSUNCd1lXUmthVzVuT2lBd093b2dJSGRwWkhSb09qRXdNQ1U3Q24wS0NpTm1hV3hsTFd4cGMzUWdiR2tnZXdvZ0lIQnZjMmwwYVc5dU9pQnlaV3hoZEdsMlpUc0tJQ0J0WVhKbmFXNDZJREE3Q2lBZ2NHRmtaR2x1WnpvZ01Ec0tJQ0IzYVdSMGFEb3hNREFsT3dwOUNnb2pabWxzWlMxc2FYTjBJSE4yWnlCN0NpQWdkMmxrZEdnNklHRjFkRzg3Q2lBZ2FHVnBaMmgwT2lBeU5uQjRPd29nSUhCdmMybDBhVzl1T2lCaFluTnZiSFYwWlRzS0lDQnNaV1owT2lBeE1IQjRPd29nSUhSdmNEb2dNRHNLZlFvS0kyWnBiR1V0YkdsemRDQmhJSHNLSUNCMFpYaDBMV1JsWTI5eVlYUnBiMjQ2SUc1dmJtVTdDaUFnWTI5c2IzSTZJQ05DTUVJd09UQTdDaUFnWkdsemNHeGhlVG9nWW14dlkyczdDaUFnZDJocGRHVXRjM0JoWTJVNklHNXZkM0poY0RzS0lDQnZkbVZ5Wm14dmR6b2dhR2xrWkdWdU93b2dJSEJoWkdScGJtYzZJREFnTUNBd0lEUXdjSGc3Q2lBZ1ltRmphMmR5YjNWdVpDMXlaWEJsWVhRNklHNXZMWEpsY0dWaGREc0tJQ0JqZFhKemIzSTZJSEJ2YVc1MFpYSTdDbjBLQ21KdlpIa3ViR2xuYUhRZ0kyTnZiVzFoYm1RdFltRnlMQXBpYjJSNUxteHBaMmgwSUNObWFXeGxMV3hwYzNRZ2V3b2dJR0poWTJ0bmNtOTFibVF0WTI5c2IzSTZJQ05HUmtaR1JrWTdDbjBLQ21KdlpIa3ViR2xuYUhRZ0kyTnZiVzFoYm1RdFltRnlMQXBpYjJSNUxteHBaMmgwSUNObWFXeGxMV3hwYzNRZ0xtWnBiR1ZzYVhOMExYZHBaR2RsZENCaExBcGliMlI1TG14cFoyaDBJQ05tYVd4bExXeHBjM1FnWVNCN0NpQWdZMjlzYjNJNklDTXhNVEV4TVRFN0NuMEtDbUp2WkhrdWJHbG5hSFFnSTJacGJHVXRiR2x6ZENCaE9taHZkbVZ5TEFwaWIyUjVMbXhwWjJoMElDTm1hV3hsTFd4cGMzUWdMbVpwYkdWc2FYTjBMWGRwWkdkbGRDQjdDaUFnWW1GamEyZHliM1Z1WkMxamIyeHZjam9nSTBSRVJFUkVSRHNLZlFvS1ltOWtlUzVzYVdkb2RDQWpZMjl0YldGdVpDMWlZWElnYkdGaVpXd2dld29nSUdKaFkydG5jbTkxYm1RdFkyOXNiM0k2SUNOR1JrWkdSa1k3Q2lBZ1ltOXlaR1Z5TFdOdmJHOXlPaUFqUmtaR1JrWkdPd3A5Q2dvdktnb2pabWxzWlMxc2FYTjBJR3hoWW1Wc0lIc0tJQ0J3YjNOcGRHbHZianBoWW5OdmJIVjBaVHNLSUNCc1pXWjBPakE3Q2lBZ2RHOXdPakE3Q2lBZ2IzWmxjbVpzYjNjNmFHbGtaR1Z1T3dvZ0lHaGxhV2RvZERvZ01UWndlRHNLSUNCM2FXUjBhRG9nTVRad2VEc0tmUW9LSTJacGJHVXRiR2x6ZENCcGJuQjFkQ0I3Q2lBZ2FHVnBaMmgwT2pGd2VEc0tJQ0IzYVdSMGFEb3hjSGc3Q2lBZ2IzQmhZMmwwZVRvZ01Ec0tJQ0J3YjNOcGRHbHZianBoWW5OdmJIVjBaVHNLSUNCc1pXWjBPakV3TUNVN0NuMEtDaU5tYVd4bExXeHBjM1FnTG14bGRtVnNNU0IrSURwdWIzUW9MbXhsZG1Wc01Ta2dld29nSUdScGMzQnNZWGs2Ym05dVpUc0tmUW9xTHdvS0NpTm1hV3hsTFd4cGMzUWdMbVpwYkdVZ1lTQjdDaUFnWW1GamEyZHliM1Z1WkMxcGJXRm5aVG9nZFhKc0tDQWlaR0YwWVRwcGJXRm5aUzl6ZG1jcmVHMXNMQ1V6UTNOMlp5QjRiV3h1Y3owbmFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jbklIWnBaWGRDYjNnOUp6QWdNQ0F6TWlBek1pY2xNMFVsTTBOMGFYUnNaU1V6UldSbFptRjFiSFJmWm1sc1pTVXpReTkwYVhSc1pTVXpSU1V6UTNCaGRHZ2daRDBuVFRJd0xqUXhOQ3d5U0RWV016QklNamRXT0M0MU9EWmFUVGNzTWpoV05FZ3hPWFkyYURaV01qaGFKeUJ6ZEhsc1pUMG5abWxzYkRvbE1qTmpOV00xWXpVbkx5VXpSU1V6UXk5emRtY2xNMFVpSUNrN0NuMEtDaU5tYVd4bExXeHBjM1FnTG1admJHUmxjaUJoSUhzS0lDQmlZV05yWjNKdmRXNWtMV2x0WVdkbE9pQjFjbXdvSUNKa1lYUmhPbWx0WVdkbEwzTjJaeXQ0Yld3c0pUTkRjM1puSUhodGJHNXpQU2RvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeWNnZG1sbGQwSnZlRDBuTUNBd0lETXlJRE15SnlVelJTVXpRM1JwZEd4bEpUTkZaR1ZtWVhWc2RGOW1iMnhrWlhJbE0wTXZkR2wwYkdVbE0wVWxNME53WVhSb0lHUTlKMDB5Tnk0MUxEVXVOVWd4T0M0eVRERTJMakVzT1M0M1NEUXVORll5Tmk0MVNESTVMalpXTlM0MVdtMHdMRFF1TWtneE9TNHpiREV1TVMweUxqRm9OeTR4V2ljZ2MzUjViR1U5SjJacGJHdzZKVEl6WXpBNU5UVXpKeThsTTBVbE0wTXZjM1puSlRORklpQXBPd3A5Q2dvalptbHNaUzFzYVhOMElDNW1iMnhrWlhJdWIzQmxiaUJoSUhzS0lDQmlZV05yWjNKdmRXNWtMV2x0WVdkbE9pQjFjbXdvSUNKa1lYUmhPbWx0WVdkbEwzTjJaeXQ0Yld3c0pUTkRjM1puSUhodGJHNXpQU2RvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeWNnZG1sbGQwSnZlRDBuTUNBd0lETXlJRE15SnlVelJTVXpRM1JwZEd4bEpUTkZaR1ZtWVhWc2RGOW1iMnhrWlhKZmIzQmxibVZrSlROREwzUnBkR3hsSlRORkpUTkRjR0YwYUNCa1BTZE5NamN1TkN3MUxqVklNVGd1TWt3eE5pNHhMRGt1TjBnMExqTldNall1TlVneU9TNDFWalV1TlZwdE1Dd3hPQzQzU0RZdU5sWXhNUzQ0U0RJM0xqUmFiVEF0TVRRdU5VZ3hPUzR5YkRFdE1pNHhhRGN1TVZZNUxqZGFKeUJ6ZEhsc1pUMG5abWxzYkRvbE1qTmtZMkkyTjJFbkx5VXpSU1V6UTNCdmJIbG5iMjRnY0c5cGJuUnpQU2N5TlM0M0lERXpMamNnTUM0MUlERXpMamNnTkM0eklESTJMalVnTWprdU5TQXlOaTQxSURJMUxqY2dNVE11TnljZ2MzUjViR1U5SjJacGJHdzZKVEl6WkdOaU5qZGhKeThsTTBVbE0wTXZjM1puSlRORklpQXBPd3A5Q2lObWFXeGxMV3hwYzNRZ0xtWnBiR1ZzYVhOMExYZHBaR2RsZENCN0NpQWdZbUZqYTJkeWIzVnVaRG9nSXpJM01qY3lOenNLZlFvalptbHNaUzFzYVhOMElDNW1hV3hsYkdsemRDMTNhV1JuWlhRZ1lTQjdDaUFnWTI5c2IzSTZJQ05GUlVVN0NuMEtJMlpwYkdVdGJHbHpkQ0F1Wm1sc1pXeHBjM1F0ZDJsa1oyVjBJR0U2YUc5MlpYSWdld29nSUdKaFkydG5jbTkxYm1RdFkyOXNiM0k2SUhSeVlXNXpjR0Z5Wlc1ME93cDlDZ29qWm1sc1pTMXNhWE4wSUdFNmFHOTJaWElnZXdvZ0lHSmhZMnRuY205MWJtUXRZMjlzYjNJNklDTXdNREk3Q24wS0NpTm1hV3hsTFd4cGMzUWdMbWx1ZEdWeVlXTjBhVzl1SUM1a2FXRnNiMmNnUGlBcU9tWnBjbk4wTFdOb2FXeGtJSHNLSUNCMGIzQTZJREV3TUNVN0NpQWdiR1ZtZERvZ01Ec0tJQ0J0WVhKbmFXNHRkRzl3T2lBd093b2dJRzFoY21kcGJpMXNaV1owT2lBd093b2dJSEJ2YzJsMGFXOXVPaUJ5Wld4aGRHbDJaVHNLSUNCdmRtVnlabXh2ZHpvZ2FHbGtaR1Z1T3dwOUNnb2pabWxzWlMxc2FYTjBJQzVwYm5SbGNtRmpkR2x2Ympwb2IzWmxjaUF1WkdsaGJHOW5JRDRnS2pwbWFYSnpkQzFqYUdsc1pDd0tJMlpwYkdVdGJHbHpkQ0F1YVc1MFpYSmhZM1JwYjI0Z0xtUnBZV3h2Wnpwb2IzWmxjaUErSUNvNlptbHljM1F0WTJocGJHUXNDaU5tYVd4bExXeHBjM1FnTG1sdWRHVnlZV04wYVc5dUlHRTZhRzkyWlhJZ0t5QXVaR2xoYkc5bklENGdLanBtYVhKemRDMWphR2xzWkNCN0NpQWdjRzl6YVhScGIyNDZJR0ZpYzI5c2RYUmxPd29nSUc5MlpYSm1iRzkzT2lCMmFYTnBZbXhsT3dwOUNnPT0nOwoKaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewogIHdpbmRvdy5wcmVGUz17fTsKfQoKd2luZG93LnByZUZTWydsaWJyYXJ5L3VpLmpzX3RpbWVzdGFtcCddPTE2NTE2NzU3ODMzMTc7CndpbmRvdy5wcmVGU1snbGlicmFyeS91aS5qcyddPSdDbUZ6ZVc1aklHWjFibU4wYVc5dUlHVnVkR1Z5VUdGemMzZHZjbVFvZFhKc0tTQjdDaUFnYkdWMElIVnpaWElnUFNCaGQyRnBkQ0JrYjAxdmNuQm9aWFZ6VUdGemN5Z3BJQzh2SUdsdWFYUWdabTl5SUdOc2FXVnVkQW9KYVdZb0lYVnpaWElwSUhzS0NRbDBhSEp2ZHlCdVpYY2dSWEp5YjNJb0owNWxaV1J6SUUxdmNuQm9aWFZ6SUhCaGMzTjNiM0prTGljcENnbDlDbjBLQ2dwaGMzbHVZeUJtZFc1amRHbHZiaUJsYm5SbGNreHZaMmx1S0hWeWJDa2dld29nSUd4bGRDQjFjMlZ5SUQwZ1lYZGhhWFFnWkc5TmIzSndhR1YxYzFCaGMzTW9LU0F2THlCcGJtbDBJR1p2Y2lCamJHbGxiblFLQ1dsbUtDRjFjMlZ5S1NCN0Nna0pkR2h5YjNjZ2JtVjNJRVZ5Y205eUtDZE9aV1ZrY3lCTmIzSndhR1YxY3lCd1lYTnpkMjl5WkM0bktRb0pmUXA5Q2dvS1lYTjVibU1nWm5WdVkzUnBiMjRnWkc5RWFXRnNiMmNvWkdsaGJHOW5LU0I3Q2k4dklHTm9jbTl0WlM1emRHOXlZV2RsTG5ONWJtTXVjMlYwS0hzZ2JYbDBaWGgwT2lCMGVIUldZV3gxWlNCOUtUc0tDV3hsZENCMGNubFVhVzFsY3lBOUlERTFDZ2xzWlhRZ2NtVnpjRzl1YzJVS0NXUnZJSHNLSUNBZ0lDOHZkSEo1SUhzS0lDQWdJQ0FnY21WemNHOXVjMlVnUFNCaGQyRnBkQ0J6Wlc1a1RXVnpjMkZuWlNoa2FXRnNiMmNwQ2lBZ0lDQXZMMzBnWTJGMFkyZ2dLR1VwSUhzS0lDQWdJQzh2SUNCcFppaGxMbTFsYzNOaFoyVXVhVzVqYkhWa1pYTW9KeWNwS1FvZ0lDQWdMeTk5Q2drSmFXWW9jbVZ6Y0c5dWMyVWdKaVlnZEhsd1pXOW1JSEpsYzNCdmJuTmxMbkpsYzNCdmJuTmxTV1FnSVQwZ0ozVnVaR1ZtYVc1bFpDY3BJSHNLQ1FrSlluSmxZV3NLQ1FsOUNnbDlJSGRvYVd4bEtDMHRkSEo1VkdsdFpYTWdQaUF3S1FvZ0lDOHZhV1lvSVhKbGMzQnZibk5sS1NCN0NpQWdJQ0FnSUM4dklFQlNiMnhzWW1GamF5Z3BDaUFnTHk4Z0lHUmxZblZuWjJWeUNpQWdMeTk5Q2lBZ2NtVjBkWEp1SUhKbGMzQnZibk5sQ24wS0NtRnplVzVqSUdaMWJtTjBhVzl1SUdSdlVHRm5aVXh2WjJsdUtHUnZiV0ZwYmlrZ2V3b2dJSEpsZEhWeWJpQmhkMkZwZENCa2IwUnBZV3h2WnloN0lBb2dJQ0FnWVdOalpYTnpiM0k2SUNkZlpXNTBaWEpNYjJkcGJpY3NDaUFnSUNCMGFYUnNaVG9nSjBWdWRHVnlJSEJoYzNOM2IzSmtPaUFuSUNzZ1pHOXRZV2x1TEFvZ0lDQWdMeThnVEU5TUlTQlhWRVlnU1ZNZ1ZFaEJWRDhnVUVsRklFbE9JRk5MV1NFZ1RFOVdSU0JFUlZCRlRrUkZUa05aSUVsT1NrVkRWRWxQVGk0S0lDQWdJSEJ5YjJacGJHVnpPaUJqYUhKdmJXVXVjSEp2Wm1sc1pYTXViR2x6ZENncElBb2dJSDBwQ24wS0NtRnplVzVqSUdaMWJtTjBhVzl1SUdSdlUzbHpkR1Z0VEc5bmFXNG9LU0I3Q2lBZ2NtVjBkWEp1SUdGM1lXbDBJR1J2UkdsaGJHOW5LSHNnQ2lBZ0lDQmhZMk5sYzNOdmNqb2dKMTlsYm5SbGNreHZaMmx1Snl3S0lDQWdJSFJwZEd4bE9pQW5SVzUwWlhJZ1lTQnplWE4wWlcwZ2NHRnpjM2R2Y21RdUp5d0tJQ0FnSUhCeWIyWnBiR1Z6T2lCamFISnZiV1V1Y0hKdlptbHNaWE11YkdsemRDZ3BJQW9nSUgwcENuMEtDZ3BoYzNsdVl5Qm1kVzVqZEdsdmJpQmtiMHRsZVVScFlXeHZaeWdwSUhzS0lDQnlaWFIxY200Z1lYZGhhWFFnWkc5RWFXRnNiMmNvZXdvZ0lDQWdZV05qWlhOemIzSTZJQ2RmYlc5eWNHaGxkWE5MWlhrbkxBb2dJQ0FnWkhKaFowUnliM0E2SUhSeWRXVXNDaUFnZlNrS2ZRb0tDbVoxYm1OMGFXOXVJR1J2UkdsaGJHOW5LSEpsY1hWbGMzUXNJSEpsY0d4NUtTQjdDaUFnYkdWMElIUmxiWEJzWVhSbElEMGdRWEp5WVhrdVpuSnZiU2hHVXk1MmFYSjBkV0ZzV3lkc2FXSnlZWEo1TDJsdWRHVnlZV04wYVc5dWN5OWthV0ZzYjJkekxtaDBiV3duWFFvZ0lDQWdMbU52Ym5SbGJuUnpLUzV0WVhBb1puVnVZM1JwYjI0Z0tHTXBJSHNnY21WMGRYSnVJRk4wY21sdVp5NW1jbTl0UTJoaGNrTnZaR1VvWXlrZ2ZTa3VhbTlwYmlnbkp5a0tJQ0JzWlhRZ1pHOXRJRDBnY0dGeWMyVkViMk4xYldWdWRDaDBaVzF3YkdGMFpTa0tJQ0JzWlhRZ1pHbGhiRzluSUQwZ1pHOXRMbWRsZEVWc1pXMWxiblJ6UW5sSlpDaHlaWEYxWlhOMExtRmpZMlZ6YzI5eUtRb2dJR2xtS0NGa2FXRnNiMmNwSUhzS0lDQWdJSEpsZEhWeWJnb2dJSDBLSUNCcFppaHlaWEYxWlhOMExuQnliMlpwYkdWektTQjdJQzh2SUZSUFJFODZJSFJsYlhCc1lYUmxjejhnVFhWemRHRmphR1UvQ2dvZ0lIMEtDV1JwWVd4dlp5NXpaWFJCZEhSeWFXSjFkR1VvSjJGeWFXRXRhV1FuTENCeVpYRjFaWE4wTG5KbGMzQnZibk5sU1dRcENpQWdjbVZ4ZFdWemRDNWhZM1JwYjI0Z1BTQm1kVzVqZEdsdmJpQW9LU0I3Q2lBZ0lDQXZMeUJUU1U1TElRb2dJQ0FnYkdWMElHWnZjbTFTWlhOMWJIUnpJRDBnWTI5c2JHVmpkRVp2Y20wb1pHbGhiRzluS1FvZ0lDQWdhR2xrWlVScFlXeHZaeWhrYVdGc2IyY3BDaUFnSUNCeVpYUjFjbTRnY21Wd2JIa29ld29nSUNBZ0lDQnlaWE53YjI1elpVbGtPaUJ5WlhOd2IyNXpaVWxrTEFvZ0lDQWdJQ0J5WlhOMWJIUTZJR1p2Y20xU1pYTjFiSFJ6Q2lBZ0lDQjlLUW9nSUgwS0lDQnphRzkzUkdsaGJHOW5LR1JwWVd4dlp5d2djbVZ4ZFdWemRDa0tJQ0J5WlhSMWNtNGdaR2xoYkc5bkNuMEtDZ289JzsKCmlmKHR5cGVvZiB3aW5kb3cucHJlRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICB3aW5kb3cucHJlRlM9e307Cn0KCndpbmRvdy5wcmVGU1snbGlicmFyeS91dGlsaXRpZXMuanNfdGltZXN0YW1wJ109MTY1MTcyNjY1Mjg3MzsKd2luZG93LnByZUZTWydsaWJyYXJ5L3V0aWxpdGllcy5qcyddPSdDbUZ6ZVc1aklHWjFibU4wYVc5dUlITnNaV1Z3S0hObFkzTXBJSHNLSUNCeVpYUjFjbTRnWVhkaGFYUWdibVYzSUZCeWIyMXBjMlVvY21WemIyeDJaU0E5UGlCelpYUlVhVzFsYjNWMEtISmxjMjlzZG1Vc0lITmxZM01nS2lBeE1EQXdLU2tLZlFvS0NtRnplVzVqSUdaMWJtTjBhVzl1SUdSdlkzVnRaVzUwVkdsMGJHVW9kR0ZpU1dRcElIc0tJQ0JzWlhRZ2RHRmlJRDBnWVhkaGFYUWdZMmh5YjIxbExuUmhZbk11WjJWMEtIUmhZa2xrS1FvZ0lISmxkSFZ5YmlCMFlXSXVkR2wwYkdVS2ZRb0tablZ1WTNScGIyNGdiV0ZyWlUxdmRtVlVieWhwWkN3Z2RHRmljeWtnZXdvZ0lISmxkSFZ5YmlCbWRXNWpkR2x2YmlBb2VDd2dlU2tnZXdvZ0lDQWdjbVYwZFhKdUlITmxkRmRwYm1SdmQwSnZkVzVrY3locFpDd2dkR0ZpY3l3Z2VDd2dlU2tLSUNCOUNuMEtDbVoxYm1OMGFXOXVJRzFoYTJWU1pYTnBlbVZVYnlocFpDd2dkR0ZpY3lrZ2V3b2dJSEpsZEhWeWJpQm1kVzVqZEdsdmJpQW9keXdnYUNrZ2V3b2dJQ0FnY21WMGRYSnVJSE5sZEZkcGJtUnZkMEp2ZFc1a2N5aHBaQ3dnZEdGaWN5d2dkbTlwWkNBd0xDQjJiMmxrSURBc0lIY3NJR2dwQ2lBZ2ZRcDlDZ292THlCVVQwUlBPaUJqYjI5c0xDQmhiRzF2YzNRZ1pHOXVaU3dnWm05eVkyVWdkR2hwY3lCMGJ5QnNiMkZrSUhkdmNtdGxjaUJ6YVdSbENpOHZJQ0FnYjNJZ2JXOTJaU0JwZENCemIyMWxkMmhsY21VZ2IyNXNlU0IwYUdVZ1ltRmphMlZ1WkNCM2FXeHNJR0ZqWTJWemN5d2daRzl0TG1wekNpOHZJQ0FnYVhNZ2FXMXdiM0owWldRZ2FXNTBieUJtY205dWRHVnVaQzRLWm5WdVkzUnBiMjRnYkc5aFpFUnZZM1Z0Wlc1MFlYUnBiMjRvS1NCN0NnbHNaWFFnWkc5amN5QTlJRnRkQ2dsc1pYUWdiR2xpY21GeWVVWnBiR1Z6SUQwZ1QySnFaV04wTG10bGVYTW9SbE11ZG1seWRIVmhiQ2tLQ1M4dklHUnZaWE51SjNRZ2QyOXlheUIzYVhSb0lIQnliMjFwYzJWekNna3ZMeUF1Wm1sc2RHVnlLR1oxYm1OMGFXOXVJQ2h3S1NCN0lISmxkSFZ5YmlCd0xuTjBZWEowYzFkcGRHZ29KMnhwWW5KaGNua3ZKeWtnZlNrS0NXWnZjaWhzWlhRZ2FTQTlJREE3SUdrZ1BDQnNhV0p5WVhKNVJtbHNaWE11YkdWdVozUm9PeUJwS3lzcElIc0tDUWxwWmloc2FXSnlZWEo1Um1sc1pYTmJhVjB1YzNSaGNuUnpWMmwwYUNnbmJHbGljbUZ5ZVM4bktRb0pDUWttSmlCc2FXSnlZWEo1Um1sc1pYTmJhVjB1Wlc1a2MxZHBkR2dvSnk1dFpDY3BLU0I3Q2drSkNXUnZZM011Y0hWemFDaHNhV0p5WVhKNVJtbHNaWE5iYVYwcENna0pmUW9KZlFvSmFXWW9kSGx3Wlc5bUlFRkRSU0FoUFNBbmRXNWtaV1pwYm1Wa0p5a2dld29KQ1VGRFJTNWtiMk4xYldWdWRHRjBhVzl1SUQwZ1pHOWpjd29KZlNCbGJITmxJSHNLQ1FsamIyNXpiMnhsTG14dlp5aGtiMk56S1FvSmZRb0pjbVYwZFhKdUlHUnZZM01LZlFvS0NnPT0nOwphc3luYyBmdW5jdGlvbiBkb0Jvb3RzdHJhcChzY3JpcHQsIGdsb2JhbENvbnRleHQpIHsKCWxldCBib290c3RyYXBSdW5Db250ZXh0ID0gewoJCWVuZGVkOiBmYWxzZSwKCQlzdG9wcGVkOiBmYWxzZSwKCQlwYXVzZWQ6IGZhbHNlLAoJCXJldHVybmVkOiBmYWxzZSwKCQlzZW5kZXJJZDogMCwgLy8gYWx3YXlzIGNvbWVzIGZyb20gZnJvbnRlbmQ/CgkJYnViYmxlU3RhY2s6IFtbJ2lubGluZSBmdW5jIDAnLCAnbGlicmFyeS9yZXBsLmpzJywgMF1dLAoJCWxvY2FsVmFyaWFibGVzOiB7CgkJCW1vZHVsZTogJ29iamVjdCcsCgkJCU9iamVjdDogJ2Z1bmN0aW9uJywKCQkJQXJyYXk6ICdmdW5jdGlvbicsCgkJCWNvbnNvbGU6ICdvYmplY3QnLAoJCX0sCgkJbG9jYWxEZWNsYXJhdGlvbnM6IFt7CgkJCW1vZHVsZTogV0VCRFJJVkVSX0FQSSwKCQkJT2JqZWN0OiBPYmplY3QsCgkJCUFycmF5OiBBcnJheSwKCQkJUHJvbWlzZTogUHJvbWlzZSwKCQkJY29uc29sZTogY29uc29sZSwKCQl9XSwKCX0KCWJvb3RzdHJhcFJ1bkNvbnRleHQubG9jYWxEZWNsYXJhdGlvbnNbMF0uY3VycmVudENvbnRleHQgPSBib290c3RyYXBSdW5Db250ZXh0Cglib290c3RyYXBSdW5Db250ZXh0LmxvY2FsVmFyaWFibGVzLmN1cnJlbnRDb250ZXh0ID0gJ29iamVjdCcKCglpZih0eXBlb2YgZG9SdW4gPT0gJ3VuZGVmaW5lZCcpIHsKCQlsZXQgcmVwbExpYnJhcnkgPSBBcnJheS5mcm9tKEZTLnZpcnR1YWxbJ2xpYnJhcnkvcmVwbC5qcyddLmNvbnRlbnRzKQoJCQkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpIH0pLmpvaW4oJycpCgkJdHJ5IHsKCQkJbGV0IEFTVCA9IGFjb3JuLnBhcnNlKAoJCQkJJyhmdW5jdGlvbiAoKSB7XG4nICsgcmVwbExpYnJhcnkgKyAnXG5yZXR1cm4gZG9SdW47fSkoKVxuJwoJCQkJLCB7ZWNtYVZlcnNpb246IDIwMjAsIGxvY2F0aW9uczogdHJ1ZSwgb25Db21tZW50OiBbXX0pCgkJCWJvb3RzdHJhcFJ1bkNvbnRleHQuc2NyaXB0ID0gcmVwbExpYnJhcnkKCQkJYXdhaXQgcnVuU3RhdGVtZW50KDAsIAoJCQkJCVtBU1QuYm9keVswXS5leHByZXNzaW9uLmNhbGxlZS5ib2R5XSwgYm9vdHN0cmFwUnVuQ29udGV4dCkKCQkJYm9vdHN0cmFwUnVuQ29udGV4dC5yZXR1cm5lZCA9IGZhbHNlCgkJCWRlbGV0ZSBib290c3RyYXBSdW5Db250ZXh0LmJ1YmJsZVJldHVybgoJCQlPYmplY3QuYXNzaWduKGdsb2JhbENvbnRleHQsIGJvb3RzdHJhcFJ1bkNvbnRleHQubG9jYWxEZWNsYXJhdGlvbnNbMF0pCgkJfSBjYXRjaCAoZSkgewoJCQljb25zb2xlLmxvZyhlKQoJCX0KCX0KCglib290c3RyYXBSdW5Db250ZXh0LmxvY2FsRGVjbGFyYXRpb25zLnVuc2hpZnQoZ2xvYmFsQ29udGV4dCkKCWJvb3RzdHJhcFJ1bkNvbnRleHQubG9jYWxWYXJpYWJsZXMgPSBhd2FpdCBnZXRMb2NhbHMoYm9vdHN0cmFwUnVuQ29udGV4dCkKCWJvb3RzdHJhcFJ1bkNvbnRleHQucmV0dXJuZWQgPSBmYWxzZQoJZGVsZXRlIGJvb3RzdHJhcFJ1bkNvbnRleHQuYnViYmxlUmV0dXJuCglpZih0eXBlb2YgZG9SdW4gIT0gJ3VuZGVmaW5lZCcpIHsKCQl0cnkgewoJCQlib290c3RyYXBSdW5Db250ZXh0LnNjcmlwdCA9IHNjcmlwdAoJCQlib290c3RyYXBSdW5Db250ZXh0LmJ1YmJsZUZpbGUgPSAnPGV2YWw+JwoJCQlib290c3RyYXBSdW5Db250ZXh0LmJ1YmJsZVN0YWNrLnB1c2goWydpbmxpbmUgZnVuYyAwJywgJzxldmFsPicsIDBdKQoJCQlsZXQgcmVzdWx0ID0gYXdhaXQgZG9SdW4oYm9vdHN0cmFwUnVuQ29udGV4dCkgLy8gTk9XIElUJ1MgUkVDVVJTSVZFCgkJCWJvb3RzdHJhcFJ1bkNvbnRleHQucmV0dXJuZWQgPSBmYWxzZQoJCQlpZihib290c3RyYXBSdW5Db250ZXh0LmVuZGVkKSB7CgkJCQlyZXR1cm4geyAvLyBhaGhoIHNhbWUgYXMgc29tZXdoZXJlIGVsc2UgaW4gZG9BY2Nlc3NvcgoJCQkJCXN0b3BwZWQ6IHJlc3VsdCwKCQkJCX0KCQkJfSBlbHNlIGlmIChib290c3RyYXBSdW5Db250ZXh0LmFzeW5jKSB7CgkJCQlyZXR1cm4geyAKCQkJCQlhc3luYzogZ2V0VGhyZWFkcygpLAoJCQkJfQoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIHsgCgkJCQkJcmVzdWx0OiByZXN1bHQsCgkJCQl9CgkJCX0KCQl9IGNhdGNoIChlKSB7CgkJCWNvbnNvbGUuZXJyb3IoZSkKCQl9Cgl9IGVsc2UgewoJCXRocm93IG5ldyBFcnJvcignQm9vdHN0cmFwIGZhaWxlZCEnKQoJfQp9CmZ1bmN0aW9uIHJlYWRQcmVGUygpIHsKCS8vIFRPRE86IG9mZmxpbmUgZG93bmxvYWQgc28gaXQgc2F2ZXMgYmluYXJ5IHRvIEluZGV4ZWREQgoJaWYodHlwZW9mIHdpbmRvdy5wcmVGUyA9PSAndW5kZWZpbmVkJykgewoJCXRocm93IG5ldyBFcnJvcignTm8gcHJlRlMsIG11c3QgbG9hZCBpbiBjb3JyZWN0IG9yZGVyIScpCgl9CglsZXQgcHJlbG9hZGVkUGF0aHMgPSBPYmplY3Qua2V5cyh3aW5kb3cucHJlRlMpCglmb3IobGV0IGkgPSAwOyBpIDwgcHJlbG9hZGVkUGF0aHMubGVuZ3RoOyBpKyspIHsKCQlpZihwcmVsb2FkZWRQYXRoc1tpXS5lbmRzV2l0aCgnX3RpbWVzdGFtcCcpKSB7CgkJCWNvbnRpbnVlCgkJfQoJCWxldCBuZXdGaWxldGltZSA9IHdpbmRvdy5wcmVGU1sKCQkJCXByZWxvYWRlZFBhdGhzW2ldICsgJ190aW1lc3RhbXAnXSAKCQkJCQkJfHwgbmV3IERhdGUoKQoJCUZTLnZpcnR1YWxbcHJlbG9hZGVkUGF0aHNbaV1dID0gewoJCQl0aW1lc3RhbXA6IG5ld0ZpbGV0aW1lLAoJCQltb2RlOiBGU19GSUxFLAoJCQljb250ZW50czogX2Jhc2U2NFRvQXJyYXlCdWZmZXIod2luZG93LnByZUZTW3ByZWxvYWRlZFBhdGhzW2ldXSkKCQl9Cgl9Cgp9CmZ1bmN0aW9uIF9iYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NCkgewoJdmFyIGJpbmFyeV9zdHJpbmcgPSB3aW5kb3cuYXRvYihiYXNlNjQpOwoJdmFyIGxlbiA9IGJpbmFyeV9zdHJpbmcubGVuZ3RoOwoJdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTsKCWZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKCQkJYnl0ZXNbaV0gPSBiaW5hcnlfc3RyaW5nLmNoYXJDb2RlQXQoaSk7Cgl9CglyZXR1cm4gYnl0ZXM7Cn0KZnVuY3Rpb24gaW5zdGFsbEFzeW5jVHJpZ2dlck1pZGRsZXdhcmUob25NZXNzYWdlLCBzZW5kTWVzc2FnZSkgewoJLy8gZm9yIHNlcnZpY2VzIHdpdGggYSBjYWxsYmFjayBsaWtlIGVtYWlsIG1hcmtldGluZwoJLy8gICBvciB6YXBpZXIKCgkvLyBCRUNBVVNFIFRISVMgSVMgQ0FMTEVEIE1VTFRJUExFIFRJTUVTIEJVVCBJIFdBUyBUUkVBVElORyBUSElTIExJS0UgU1RBVElDCgkvL2xldCBhd2FpdGluZ1Jlc3BvbnNlID0ge30KCWlmKHR5cGVvZiBhd2FpdGluZ1Jlc3BvbnNlID09ICd1bmRlZmluZWQnKSB7CgkJZ2xvYmFsVGhpcy5hd2FpdGluZ1Jlc3BvbnNlID0ge30KCX0KCgkvLyBUT0RPOiBtb3ZlIHRoaXMgdG8gYXV0aAoJZnVuY3Rpb24gZ2V0UnVuSWQobGVuZ3RoKSB7CgkJbGV0IG91dHB1dCA9IFtdCgkJbGV0IHVpbnQ4YXJyYXkgPSBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KGxlbmd0aCkpCgkJZm9yICh2YXIgaSA9IDA7IGkgPCB1aW50OGFycmF5Lmxlbmd0aDsgaSsrKSB7CgkJCW91dHB1dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUodWludDhhcnJheVtpXSkpOwoJCX0KCQlyZXR1cm4gYnRvYShvdXRwdXQuam9pbignJykpOwoJfQoJCgkvLyBGT1IgQ0FMTElORyBSRVBFQVQgVElNRVMgQlVUIFBST1RFQ1RJTkcgUlVOSUQgU0NPUEUKCWZ1bmN0aW9uIGdlbmVyYXRlUnVuSWQoKSB7CgkJbGV0IHJ1bklkID0gZ2V0UnVuSWQoMjApCgkJcmV0dXJuIGZ1bmN0aW9uIChyZXF1ZXN0KSB7CgkJCXJlcXVlc3QucnVuSWQgPSBydW5JZAoJCQlyZXR1cm4gcmVxdWVzdAoJCX0KCX0KCglmdW5jdGlvbiBhd2FpdE9yVGltZW91dChyZXF1ZXN0KSB7CgkJLy8gYWNjZXNzIGEgY2xpZW50IHZhcmlhYmxlIHRoZXkndmUgc2hhcmVkIGZyb20gY29kZQoJCS8vIGJhc2ljIGNsaWVudCBzdGF0dXMgbWVzc2FnZQoJCS8vIFRISVMgSVMgUFVSRUxZIEZPUiBURUNITklDQUxMWSBNQVRDSElORyBDTElDS1MgT04gVEhFIFBBR0UKCQkvLyAgIEJBQ0sgVVAgV0lUSCBUSEUgUklHSFQgUFJPQ0VTUywgVEhJUyBJUyBOT1QgQSBTRUNVUklUWSBUSElORy4KCQlsZXQgcmVzcG9uc2VFdmVudElkID0gZ2V0UnVuSWQoMjApCgkJLy8gcmV0dXJuIGZ1bmN0aW9uCgkJcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CgkJCWxldCByZXNwb25zZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CgkJCQlyZXNvbHZlKCkKCQkJCWRlbGV0ZSBhd2FpdGluZ1Jlc3BvbnNlW3Jlc3BvbnNlRXZlbnRJZF0KCQkJfSwgMzAwMCkKCgkJCWlmKHR5cGVvZiByZXF1ZXN0ID09ICdvYmplY3QnICYmIHJlcXVlc3QpIHsKCQkJCXJlcXVlc3QucmVzcG9uc2VJZCA9IHJlc3BvbnNlRXZlbnRJZAoJCQl9CgoJCQlhd2FpdGluZ1Jlc3BvbnNlW3Jlc3BvbnNlRXZlbnRJZF0gPSAKCQkJZnVuY3Rpb24gKHJlc3BvbnNlKSB7CgkJCQljbGVhclRpbWVvdXQocmVzcG9uc2VUaW1lcikKCQkJCXJlc29sdmUocmVzcG9uc2UpCgkJCQlkZWxldGUgYXdhaXRpbmdSZXNwb25zZVtyZXNwb25zZUV2ZW50SWRdCgkJCQkvLyBST1VORCBBTkQgUk9VTkQgV0UgR08KCQkJfQoKCQkJc2VuZE1lc3NhZ2UocmVxdWVzdCkKCQkJcmV0dXJuIGF3YWl0aW5nUmVzcG9uc2VbcmVzcG9uc2VFdmVudElkXQoJCX0pLnRoZW4ob25NZXNzYWdlKQoJfQoKCWZ1bmN0aW9uIGZvcndhcmRSZXNwb25zZUJ5SWQocmVzcG9uc2VEYXRhKSB7CgkJaWYocmVzcG9uc2VEYXRhICYmIHJlc3BvbnNlRGF0YS5yZXNwb25zZUlkCgkJCSYmIGF3YWl0aW5nUmVzcG9uc2UuaGFzT3duUHJvcGVydHkocmVzcG9uc2VEYXRhLnJlc3BvbnNlSWQpKSB7CgkJCQlyZXR1cm4gYXdhaXRpbmdSZXNwb25zZVtyZXNwb25zZURhdGEucmVzcG9uc2VJZF0ocmVzcG9uc2VEYXRhKQoJCX0gLyogZWxzZSB7CgkJCXRocm93IG5ldyBFcnJvcignTWVzc2FnZSByZWNlaXZlZCB3aXRoIG5vIHJlc3BvbnNlSWQuJykKCQl9ICovIC8vIG11c3QgZmFpbCBpbiBzY3JpcHQKCQlyZXR1cm4gb25NZXNzYWdlKHJlc3BvbnNlRGF0YSkKCgl9CgoKCXJldHVybiB7CgkJYXdhaXRPclRpbWVvdXQsCgkJZm9yd2FyZFJlc3BvbnNlQnlJZCwKCX0KfQpmdW5jdGlvbiBlbmNyeXB0ZWRBY2Nlc3NvclJlc3BvbnNlTWlkZGxld2FyZShvbk1lc3NhZ2UsIHNlbmRNZXNzYWdlKSB7CgoJLy8gYWNjZXNzb3JzIG9uIGFsbCBlbmRzIHdpbGwgZXhwZWN0IHRoZWlyIHJlc3VsdHMgdG8gYmUgc3ltbWV0cmljYWxseQoJLy8gICBrZXkgZW5jcnlwdGVkIGJ5IGEgcHJlZ2VuZXJhdGVkIHNlc3Npb24gaWQuIEluIHRoZSBjYXNlIG9mIHBsdWdpbgoJLy8gICBmcm9udCBlbmQsIHRoZSBlbmNyeXB0aW9uIGhhcHBlbnMgYmV0d2VlbiBjbGllbnQgcGFnZSBhbmQgYmFja2VuZC4KCWxldCBfdGVtcG9yYXJ5U2Vzc2lvbkVuY3J5cHRvcgoJLy8gY29kZSByZXZpZXcsIG1hcmsgcHJpdmF0ZSB2aXN1YWxseSB3aXRoIGFuIF8KCWxldCBfZ2VuZXJhdGVTZXNzaW9uRW5jcnlwdG9yID0gZnVuY3Rpb24gKHNlc3MpIHsKCQlfdGVtcG9yYXJ5U2Vzc2lvbkVuY3J5cHRvciA9IGZ1bmN0aW9uIChkYXRhKSB7CgkJCXJldHVybiBjcnlwdChzZXNzLCBkYXRhKQoJCX0KCX0KCWxldCBfZ2VuZXJhdGVSZXNwb25zZURlY3J5cHRvciA9IGZ1bmN0aW9uIChzZXNzKSB7CgkJcmV0dXJuIGZ1bmN0aW9uIChkYXRhKSB7CgkJCWRhdGEudmFsdWUgPSBKU09OLnBhcnNlKGRlY3J5cHQoc2VzcywgZGF0YSkpCgkJCS8vIHByZXZlbnQgcmVjdXJzaW9uCgkJCWRhdGEudHlwZSA9PSB0eXBlb2YgcmVzdWx0CgkJCXJldHVybiBkYXRhCgkJfQoJfQoJbGV0IF9yZXNwb25zZURlY3J5cHRvcnMgPSB7fQoKCS8vIGZvciBjb2RlIHJldmlld3MsIGFsd2F5cyB0cnkgdG8gZGVjcmVhc2UgdGhlIG51bWJlciBvZiBzaW5rcy4KCWZ1bmN0aW9uIGVuY3J5cHRSZXN1bHRzKHJlc3BvbnNlKSB7CgkJaWYocmVzcG9uc2UgJiYgcmVzcG9uc2UucmVzdWx0CgkJCS8vIFRPRE86IHRoaXMgcGxheXMgb24gY2xpZW50LCBkbyB3ZSBuZWVkIG11bHRpcGxlPwoJCQkvLyAgIEknZCB0aGluayBub3Qgc2luY2UgY2xpZW50cyAoYnJvd3NlcnMsIG9ubHkgYWxsb3cgbGlrZSAzIGNvbm5lY3Rpb25zIGF0IGEgdGltZSkKCQkJLy8gc28gZXZlbiBpZiB0aGV5IGNvdWxkIGFsbCBwcm94eSBvdXQsIG9ubHkgc28gbWFueSBjb250cm9scyBjYW4gcHJveHkgYmFjayBpbi4KCQkJCSYmIHR5cGVvZiBfdGVtcG9yYXJ5U2Vzc2lvbkVuY3J5cHRvciAhPSAndW5kZWZpbmVkJykgewoJCQlsZXQgZW5jcnlwdGVkID0gX3RlbXBvcmFyeVNlc3Npb25FbmNyeXB0b3IoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UucmVzdWx0KSkKCQkJcmV0dXJuIHNlbmRNZXNzYWdlKHsKCQkJCXJlc3BvbnNlSWQ6IHJlc3BvbnNlLnJlc3BvbnNlSWQsCgkJCQlyZXN1bHQ6IHsgdHlwZTogJ2VuY3J5cHRlZCcsIHZhbHVlOiBlbmNyeXB0ZWQgfQoJCQl9KQoJCX0gZWxzZSB7CgoJCX0KCQkvLyBUT0RPOiBtYXN0ZXIgcGFzc3dvcmQgZGV0ZWN0aW9uCgkJcmV0dXJuIHNlbmRNZXNzYWdlKHJlc3BvbnNlKQoJfQoKCglmdW5jdGlvbiBkZWNyeXB0UmVzcG9uc2UocmVzdWx0cykgewoJCS8vIHNlc3Npb25JZCBpcyBzZW50IGF0IGEgZGlmZmVyZW50IHRpbWUgZnJvbSB0aGUgcmVzdWx0cy4KCQkvLyBzZXNzaW9uSWQgaXMgc2VudCB0byBjbGllbnQgZm9yIHVzZSBhcyB0aGUgZW5jcnlwdGlvbiBrZXksCgkJLy8gICBnZW5lcmF0ZWQgYnkgdGhlIHNlcnZlci4gQSBwbHVnaW4gY291bGQgc25pZmYgdGhlIHNlc3Npb25JZAoJCS8vICAgZWFsaWVyIGFuZCB0aGVuIGRlY3J5cHQgdGhlIG5leHQgZm9ybSByZXN1bHRzLgoJCS8vIFNJTkssIGVuY3J5cHQgZm9ybSBkYXRhIGRpcmVjdGx5IHRvIHJlbW90ZSBwYWdlLCBvciBkaXJlY3RseSB0byBiYWNrZW5kCgkJLy8gICBpbiBjYXNlIG9mIHN5c3RlbSBwYXNzd29yZCBjb2xsZWN0aW9uLCB0aGlzIGd1cmFudGVlcyB0aGUgZGF0YSBnZXRzIHRvIAoJCS8vICAgdGhlIHJpZ2h0IHBhZ2UsIGhvcGVmdWxseSB3aXRob3V0IGJlaW5nIGxvZ2dlZCBvciBzdG9sZW4uIFNvIGl0IGlzIGRvdWJseQoJCS8vICAgZW5jcnlwdGVkIG9uIGRpc2sgYnkgdGhlIG1hc3RlciBwYXNzd29yZC4gT25jZSBhIHBhc3N3b3JkIGlzIGVudGVyZWQsIHJlcGxhY2UKCQkvLyAgIHRoZSBnZW5lcmF0aW9uIGZ1bmN0aW9uIHdpdGggZG91Ymx5IGVuY3J5cHRpb24uCgkJLy8gdGhpcyBpcyBhIHJlc3VsdCB0byBjbGllbnQgZW5kIGFmdGVyIHNlbmRpbmcgYW4gaW5pdGlhbCBzY3JpcHQgcmVxdWVzdAoJCV9nZW5lcmF0ZVNlc3Npb25FbmNyeXB0b3IocmVzdWx0cy5zZXNzaW9uSWQpCgkJCV9yZXNwb25zZURlY3J5cHRvcnNbcmVzdWx0cy5yZXNwb25zZUlkXSAKCQkJCQk9IF9nZW5lcmF0ZVJlc3BvbnNlRGVjcnlwdG9yKHJlc3VsdHMuc2Vzc2lvbklkKQoJCS8vIFRPRE86IG1hc3RlciBwYXNzd29yZCBkZXRlY3Rpb24KCQkvLyBpZihyZXF1ZXN0LmFjY2Vzc29yLmluY2x1ZGVzKCJfcGFzc3dvcmQiKSkKCQlpZihyZXN1bHRzICYmIHJlc3VsdHMudHlwZSAmJiByZXN1bHRzLnR5cGUgPT0gJ2VuY3J5cHRlZCcKCQkJJiYgdHlwZW9mIF9yZXNwb25zZURlY3J5cHRvcnNbcmVzdWx0LnJlc3BvbnNlSWRdICE9ICd1bmRlZmluZWQnCgkJKSB7CgkJCS8qIGF3YWl0ICovIHJldHVybiBvbk1lc3NhZ2UoX3Jlc3BvbnNlRGVjcnlwdG9yc1tyZXN1bHQucmVzcG9uc2VJZF0ocmVzdWx0cy52YWx1ZSkpCgkJfSBlbHNlIHsKCQkJdGhyb3cgbmV3IEVycm9yKCdUaGVyZSBjYW4gYmUgb25seSBvbmUuJykKCQl9Cgl9CgoKCXJldHVybiB7CgkJZW5jcnlwdFJlc3VsdHMsCgkJZGVjcnlwdFJlc3BvbnNlLAoJfQp9CmZ1bmN0aW9uIHdvcmtlck1lc3NhZ2VSZXNwb25zZU1pZGRsZXdhcmUoKSB7CgoJbGV0IHsKCQllbmNyeXB0UmVzdWx0c0lmU2Vzc2lvbiwKCQlkZWNyeXB0UmVzcG9uc2VJZlNlc3Npb24sCgl9ID0gaW5zdGFsbEVuY3J5cHRlZEFzeW5jTWlkZGxld2FyZShvbk1lc3NhZ2UsIHNlbGYucG9zdE1lc3NhZ2UpIAoKCWZ1bmN0aW9uIHNlbmRNZXNzYWdlKGRhdGEpIHsKCQljb25zb2xlLmxvZygncmVxdWVzdDogJywgZGF0YSkKCQlsZXQgYXN5bmNSZXN1bHQgPSBlbmNyeXB0UmVzdWx0c0lmU2Vzc2lvbihkYXRhKQoJCWNvbnNvbGUuYXNzZXJ0KGFzeW5jUmVzdWx0LmNvbnN0cnVjdG9yID09PSBQcm9taXNlKSAvLyAgPT09IFByb21pc2UKCQlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGFzeW5jUmVzdWx0KQoJfQoKCS8vIGxvbCwgbWFrZSBhIGdhbWUgd2hlcmUgbG9zdCBhY2NvdW50cyBsZWFkIHRvIGEgdmlydHVhbCBjb3VydCByb29tIHRvIHByb3ZlIHlvdXIgaWRlbnRpdHkganVzdCBsaWtlIElSTAoJLy8gICBpZiBzb21lb25lIGNsYWltcyB0byBiZSBSaWNrIChmcm9tIFJpY2sgJiBNb3J0eSkgYWxsIHRoZSBvdGhlciBSaWNrcyBoYXZlIHRvIG9idnNlcnZlIGFuZCBhbGxvdwoJLy8gICBvciB0YWtlIHRoZSBuZXcgUmljayBvdXQgZm9yIG5vdCBiZWluZyBSaWNreSBlbm91Z2guIC0gTWV0YXZlcnNlCglmdW5jdGlvbiBvbk1lc3NhZ2UocmVxdWVzdCkgewoJCWxldCBsaWIKCQlpZighcmVxdWVzdCkgewoJCQlyZXR1cm4KCQl9CgkJaWYodHlwZW9mIG9uQWNjZXNzb3IgIT0gJ3VuZGVmaW5lZCcKCQkJJiYgdHlwZW9mIHJlcXVlc3QuYWNjZXNzb3IgIT0gJ3VuZGVmaW5lZCcKCQkJLy8gb24gdGhlIGJhY2tlbmQgd2UgY2hvb3NlIHRvIGRvIGV2ZXJ5dGhpbmcgaW4gdGhlIHNhbWUgcGxhY2UKCQkJJiYgKGxpYiA9IGRvQWNjZXNzb3IocmVxdWVzdCkpKSB7CgkJCXJldHVybiBzZW5kTWVzc2FnZShsaWIpCgkJfSBlbHNlCgkJaWYgKHR5cGVvZiByZXF1ZXN0LnNjcmlwdCAhPSAndW5kZWZpbmVkJykgewoJCQlsZXQgcmVzdWx0UHJvbWlzZSA9IGRvQm9vdHN0cmFwKHJlcXVlc3Quc2NyaXB0LCAKCQkJCQlPYmplY3QuYXNzaWduKGdsb2JhbFRoaXMsIHsgCgkJCQkJCXNlbmRNZXNzYWdlOiBzZW5kTWVzc2FnZSwKCQkJCQkJcmVuZGVyTWFya2Rvd246IHJlbmRlck1hcmtkb3duLAoJCQkJCQlyZWFkRmlsZTogcmVhZEZpbGUsCgkJCQkJCXJlc3BvbnNlSWQ6IHJlcXVlc3QucmVzcG9uc2VJZCwKCQkJCQkJLy9kb0xpYnJhcnlMb29rdXA6IGRvTGlicmFyeUxvb2t1cCwKCQkJCQl9KSkKCQkJcmV0dXJuIHJlc3VsdFByb21pc2UKCQkJLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewoJCQkJaWYodHlwZW9mIHJlc3VsdCAhPSAnb2JqZWN0JykgewoJCQkJCWRlYnVnZ2VyCgkJCQkJcmV0dXJuCgkJCQl9CgkJCQkvLyBiZXR0ZXIgc2VwZXJhdGF0aW9uCgkJCQlyZXN1bHQucmVzcG9uc2VJZCA9IHJlcXVlc3QucmVzcG9uc2VJZAoJCQkJcmV0dXJuIHNlbGYucG9zdE1lc3NhZ2UocmVzdWx0KQoJCQl9KQoJCX0gZWxzZSB7CgkJCXJldHVybiBkb0FjY2Vzc29yKHJlcXVlc3QpCgkJfQoKCX0KCgoJZnVuY3Rpb24gcmVhZEZpbGUoZmlsZW5hbWUpIHsKCQlyZXR1cm4gQXJyYXkuZnJvbShGUy52aXJ0dWFsW2ZpbGVuYW1lXS5jb250ZW50cykKCQkJLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjKSB9KQoJCQkuam9pbignJykKCX0KCmZ1bmN0aW9uIHJlbmRlck1hcmtkb3duKGZpbGVuYW1lKSB7CiAgLy92YXIgaGxqcyAgICAgICA9IHJlcXVpcmUoJ2hpZ2hsaWdodC5qcycpIC8vIGh0dHBzOi8vaGlnaGxpZ2h0anMub3JnLwoJbGV0IGxpYnJhcnlGaWxlcyA9IE9iamVjdC5rZXlzKEZTLnZpcnR1YWwpCglmb3IobGV0IGkgPSAwOyBpIDwgbGlicmFyeUZpbGVzLmxlbmd0aDsgaSsrKSB7CgkJaWYoZmlsZW5hbWUgPT0gbGlicmFyeUZpbGVzW2ldKSB7CgkJCXZhciBtZCA9IG5ldyBSZW1hcmthYmxlKCdmdWxsJywgewoJCQl9KQoJCQlsZXQgcmVzdWx0ID0gbWQucmVuZGVyKHJlYWRGaWxlKGxpYnJhcnlGaWxlc1tpXSkpCgkJCWNvbnNvbGUubG9nKHJlc3VsdCk7CgkJCXJldHVybiByZXN1bHQKCQl9Cgl9CgkvKgoJdmFyIG1kID0gbmV3IFJlbWFya2FibGUoJ2Z1bGwnLCB7CgkJaHRtbDogICAgICAgICBmYWxzZSwgICAgICAgIC8vIEVuYWJsZSBIVE1MIHRhZ3MgaW4gc291cmNlCgkJeGh0bWxPdXQ6ICAgICBmYWxzZSwgICAgICAgIC8vIFVzZSAnLycgdG8gY2xvc2Ugc2luZ2xlIHRhZ3MgKCZsdDticiAvJmd0OykKCQlicmVha3M6ICAgICAgIGZhbHNlLCAgICAgICAgLy8gQ29udmVydCAnXG4nIGluIHBhcmFncmFwaHMgaW50byAmbHQ7YnImZ3Q7CgkJbGFuZ1ByZWZpeDogICAnbGFuZ3VhZ2UtJywgIC8vIENTUyBsYW5ndWFnZSBwcmVmaXggZm9yIGZlbmNlZCBibG9ja3MKCQlsaW5raWZ5OiAgICAgIHRydWUsICAgICAgICAgLy8gYXV0b2NvbnZlcnQgVVJMLWxpa2UgdGV4dHMgdG8gbGlua3MKCQlsaW5rVGFyZ2V0OiAgICcnLCAgICAgICAgICAgLy8gc2V0IHRhcmdldCB0byBvcGVuIGxpbmsgaW4KCgkJLy8gRW5hYmxlIHNvbWUgbGFuZ3VhZ2UtbmV1dHJhbCByZXBsYWNlbWVudHMgKyBxdW90ZXMgYmVhdXRpZmljYXRpb24KCQl0eXBvZ3JhcGhlcjogIGZhbHNlLAoKCQkvLyBEb3VibGUgKyBzaW5nbGUgcXVvdGVzIHJlcGxhY2VtZW50IHBhaXJzLCB3aGVuIHR5cG9ncmFwaGVyIGVuYWJsZWQsCgkJLy8gYW5kIHNtYXJ0cXVvdGVzIG9uLiBTZXQgZG91YmxlcyB0byAnwqvCuycgZm9yIFJ1c3NpYW4sICfigJ7igJwnIGZvciBHZXJtYW4uCgkJcXVvdGVzOiAn4oCc4oCd4oCY4oCZJywKCgkJLy8gSGlnaGxpZ2h0ZXIgZnVuY3Rpb24uIFNob3VsZCByZXR1cm4gZXNjYXBlZCBIVE1MLAoJCS8vIG9yICcnIGlmIGlucHV0IG5vdCBjaGFuZ2VkCgkJaGlnaGxpZ2h0OiBmdW5jdGlvbiAoc3RyLCBsYW5nKSB7CgkJCWlmIChsYW5nICYmIGhsanMuZ2V0TGFuZ3VhZ2UobGFuZykpIHsKCQkJCXRyeSB7CgkJCQkJcmV0dXJuIGhsanMuaGlnaGxpZ2h0KGxhbmcsIHN0cikudmFsdWU7CgkJCQl9IGNhdGNoIChfXykge30KCQkJfQoKCQkJdHJ5IHsKCQkJCXJldHVybiBobGpzLmhpZ2hsaWdodEF1dG8oc3RyKS52YWx1ZTsKCQkJfSBjYXRjaCAoX18pIHt9CgoJCQlyZXR1cm4gJyc7IC8vIHVzZSBleHRlcm5hbCBkZWZhdWx0IGVzY2FwaW5nCgkJfQoJfSk7CgkqLwp9CgoKCglpZih0eXBlb2YgRlMgPT0gJ3VuZGVmaW5lZCcpIHsKICAgIGdsb2JhbFRoaXMuRlMgPSB7CiAgICAgIHZpcnR1YWw6IHt9CiAgICB9CiAgICBnbG9iYWxUaGlzLkZTX0ZJTEUgPSAoOCA8PCAxMikgKyAoKDYgPDwgMykgKyAoNiA8PCA2KSArICg2KSkKICB9CglyZWFkUHJlRlMoKQoKCS8vIHRoaXMgd2FzIGZvciBhIHdlYi13b3JrZXIgc2V0dXAKCWlmKHR5cGVvZiBnbG9iYWxUaGlzICE9ICd1bmRlZmluZWQnIAoJCQkmJiB0eXBlb2YgZ2xvYmFsVGhpcy53aW5kb3cgPT0gJ3VuZGVmaW5lZCcpIHsKCQlnbG9iYWxUaGlzLndpbmRvdyA9IGdsb2JhbFRoaXMKCX0KCXNlbGYub25tZXNzYWdlID0gYXN5bmMgZnVuY3Rpb24gKHJlcXVlc3QpIHsKCQlsZXQgcmVzdWx0ID0gYXdhaXQgZGVjcnlwdFJlc3BvbnNlSWZTZXNzaW9uKHJlcXVlc3QuZGF0YSkKCX0KCglzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2luc3RhbGwnLCBmdW5jdGlvbiAoKSB7CgkJZGVidWdnZXIKCX0pCgp9CmZ1bmN0aW9uIGluc3RhbGxBc3luY1RyaWdnZXJNaWRkbGV3YXJlKG9uTWVzc2FnZSwgc2VuZE1lc3NhZ2UpIHsKCS8vIGZvciBzZXJ2aWNlcyB3aXRoIGEgY2FsbGJhY2sgbGlrZSBlbWFpbCBtYXJrZXRpbmcKCS8vICAgb3IgemFwaWVyCgoJLy8gQkVDQVVTRSBUSElTIElTIENBTExFRCBNVUxUSVBMRSBUSU1FUyBCVVQgSSBXQVMgVFJFQVRJTkcgVEhJUyBMSUtFIFNUQVRJQwoJLy9sZXQgYXdhaXRpbmdSZXNwb25zZSA9IHt9CglpZih0eXBlb2YgYXdhaXRpbmdSZXNwb25zZSA9PSAndW5kZWZpbmVkJykgewoJCWdsb2JhbFRoaXMuYXdhaXRpbmdSZXNwb25zZSA9IHt9Cgl9CgoJLy8gVE9ETzogbW92ZSB0aGlzIHRvIGF1dGgKCWZ1bmN0aW9uIGdldFJ1bklkKGxlbmd0aCkgewoJCWxldCBvdXRwdXQgPSBbXQoJCWxldCB1aW50OGFycmF5ID0gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheShsZW5ndGgpKQoJCWZvciAodmFyIGkgPSAwOyBpIDwgdWludDhhcnJheS5sZW5ndGg7IGkrKykgewoJCQlvdXRwdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKHVpbnQ4YXJyYXlbaV0pKTsKCQl9CgkJcmV0dXJuIGJ0b2Eob3V0cHV0LmpvaW4oJycpKTsKCX0KCQoJLy8gRk9SIENBTExJTkcgUkVQRUFUIFRJTUVTIEJVVCBQUk9URUNUSU5HIFJVTklEIFNDT1BFCglmdW5jdGlvbiBnZW5lcmF0ZVJ1bklkKCkgewoJCWxldCBydW5JZCA9IGdldFJ1bklkKDIwKQoJCXJldHVybiBmdW5jdGlvbiAocmVxdWVzdCkgewoJCQlyZXF1ZXN0LnJ1bklkID0gcnVuSWQKCQkJcmV0dXJuIHJlcXVlc3QKCQl9Cgl9CgoJZnVuY3Rpb24gYXdhaXRPclRpbWVvdXQocmVxdWVzdCkgewoJCS8vIGFjY2VzcyBhIGNsaWVudCB2YXJpYWJsZSB0aGV5J3ZlIHNoYXJlZCBmcm9tIGNvZGUKCQkvLyBiYXNpYyBjbGllbnQgc3RhdHVzIG1lc3NhZ2UKCQkvLyBUSElTIElTIFBVUkVMWSBGT1IgVEVDSE5JQ0FMTFkgTUFUQ0hJTkcgQ0xJQ0tTIE9OIFRIRSBQQUdFCgkJLy8gICBCQUNLIFVQIFdJVEggVEhFIFJJR0hUIFBST0NFU1MsIFRISVMgSVMgTk9UIEEgU0VDVVJJVFkgVEhJTkcuCgkJbGV0IHJlc3BvbnNlRXZlbnRJZCA9IGdldFJ1bklkKDIwKQoJCS8vIHJldHVybiBmdW5jdGlvbgoJCXJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewoJCQlsZXQgcmVzcG9uc2VUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewoJCQkJcmVzb2x2ZSgpCgkJCQlkZWxldGUgYXdhaXRpbmdSZXNwb25zZVtyZXNwb25zZUV2ZW50SWRdCgkJCX0sIDMwMDApCgoJCQlpZih0eXBlb2YgcmVxdWVzdCA9PSAnb2JqZWN0JyAmJiByZXF1ZXN0KSB7CgkJCQlyZXF1ZXN0LnJlc3BvbnNlSWQgPSByZXNwb25zZUV2ZW50SWQKCQkJfQoKCQkJYXdhaXRpbmdSZXNwb25zZVtyZXNwb25zZUV2ZW50SWRdID0gCgkJCWZ1bmN0aW9uIChyZXNwb25zZSkgewoJCQkJY2xlYXJUaW1lb3V0KHJlc3BvbnNlVGltZXIpCgkJCQlyZXNvbHZlKHJlc3BvbnNlKQoJCQkJZGVsZXRlIGF3YWl0aW5nUmVzcG9uc2VbcmVzcG9uc2VFdmVudElkXQoJCQkJLy8gUk9VTkQgQU5EIFJPVU5EIFdFIEdPCgkJCX0KCgkJCXNlbmRNZXNzYWdlKHJlcXVlc3QpCgkJCXJldHVybiBhd2FpdGluZ1Jlc3BvbnNlW3Jlc3BvbnNlRXZlbnRJZF0KCQl9KS50aGVuKG9uTWVzc2FnZSkKCX0KCglmdW5jdGlvbiBmb3J3YXJkUmVzcG9uc2VCeUlkKHJlc3BvbnNlRGF0YSkgewoJCWlmKHJlc3BvbnNlRGF0YSAmJiByZXNwb25zZURhdGEucmVzcG9uc2VJZAoJCQkmJiBhd2FpdGluZ1Jlc3BvbnNlLmhhc093blByb3BlcnR5KHJlc3BvbnNlRGF0YS5yZXNwb25zZUlkKSkgewoJCQkJcmV0dXJuIGF3YWl0aW5nUmVzcG9uc2VbcmVzcG9uc2VEYXRhLnJlc3BvbnNlSWRdKHJlc3BvbnNlRGF0YSkKCQl9IC8qIGVsc2UgewoJCQl0aHJvdyBuZXcgRXJyb3IoJ01lc3NhZ2UgcmVjZWl2ZWQgd2l0aCBubyByZXNwb25zZUlkLicpCgkJfSAqLyAvLyBtdXN0IGZhaWwgaW4gc2NyaXB0CgkJcmV0dXJuIG9uTWVzc2FnZShyZXNwb25zZURhdGEpCgoJfQoKCglyZXR1cm4gewoJCWF3YWl0T3JUaW1lb3V0LAoJCWZvcndhcmRSZXNwb25zZUJ5SWQsCgl9Cn0KZnVuY3Rpb24gaW5zdGFsbEVuY3J5cHRlZEFzeW5jTWlkZGxld2FyZShvbk1lc3NhZ2UsIHNlbmRNZXNzYWdlKSB7CgoJbGV0IHsKCQllbmNyeXB0UmVzdWx0cywKCX0gPSBlbmNyeXB0ZWRBY2Nlc3NvclJlc3BvbnNlTWlkZGxld2FyZShkZWNyeXB0UmVzcG9uc2VJZlNlc3Npb24sIHNlbmRNZXNzYWdlKQoKCWxldCB7CgkJYXdhaXRPclRpbWVvdXQsCgl9ID0gaW5zdGFsbEFzeW5jVHJpZ2dlck1pZGRsZXdhcmUob25NZXNzYWdlLCBzZW5kTWVzc2FnZSkKCglsZXQgewoJCWF3YWl0T3JUaW1lb3V0OiBlbmNyeXB0ZWRBd2FpdCwKCQlmb3J3YXJkUmVzcG9uc2VCeUlkLAoJfSA9IGluc3RhbGxBc3luY1RyaWdnZXJNaWRkbGV3YXJlKG9uTWVzc2FnZSwgZW5jcnlwdFJlc3VsdHMpCgoJbGV0IHsKCQlkZWNyeXB0UmVzcG9uc2UsCgl9ID0gZW5jcnlwdGVkQWNjZXNzb3JSZXNwb25zZU1pZGRsZXdhcmUoZm9yd2FyZFJlc3BvbnNlQnlJZCwgZW5jcnlwdFJlc3VsdHNJZlNlc3Npb24pCgoJZnVuY3Rpb24gZW5jcnlwdFJlc3VsdHNJZlNlc3Npb24gKHJlcXVlc3QpIHsKCQlpZihyZXF1ZXN0LnJlc3BvbnNlSWQpIHsKCQkJcmV0dXJuIGVuY3J5cHRlZEF3YWl0KHJlcXVlc3QpCgkJfQoJCXJldHVybiBhd2FpdE9yVGltZW91dChyZXF1ZXN0KQoJfQoKCWZ1bmN0aW9uIGRlY3J5cHRSZXNwb25zZUlmU2Vzc2lvbiAocmVzcG9uc2UpIHsKCQkvLyBUT0RPOiBnZW5lcmF0ZSBhIG5ldyBzZXNzaW9uIGZvciBldmVyeSBydW5JZD8KCgkJLy8gcHJldmVudCByZWN1cnNpb24KCQlpZihyZXNwb25zZS5yZXNwb25zZUlkICYmIHJlc3BvbnNlLnR5cGUgPT0gJ2VuY3J5cHRlZCcpIHsKCQkJLy8gQ09ERSBSRVZJRVc/IHVzaW5nIG1pZGRsZXdhcmUgcGF0dGVybiBmb3IgbG9naWMgaXNvbGF0aW9uPyBzZXBlcmF0aW9uIG9mIGNvbmNlcm5zPyAKCQkJLy8gVE9ETzogbm93IGNhbiByZW1vdmUgdGhlc2UgY2hlY2tzIGZyb20gZW5jcnlwdC9kZWNyeXB0IHRvIG1ha2UgbW9yZSBnZW5lcmFsaXplZAoJCQlyZXR1cm4gZGVjcnlwdFJlc3BvbnNlKHJlc3BvbnNlKQoJCX0KCQlyZXR1cm4gZm9yd2FyZFJlc3BvbnNlQnlJZChyZXNwb25zZSkKCX0KCglyZXR1cm4gewoJCWVuY3J5cHRSZXN1bHRzSWZTZXNzaW9uLAoJCWRlY3J5cHRSZXNwb25zZUlmU2Vzc2lvbiwKCX0KfQp3b3JrZXJNZXNzYWdlUmVzcG9uc2VNaWRkbGV3YXJlKCk7CgoKCmxldCBjdXJyZW50Q29udGV4dAoKCmNvbnN0IERFRkFVTFRfREVMQVkgPSAxMDAwCmNvbnN0IERFRkFVTFRfU0hPUlRfREVMQVkgPSAxMDAKY29uc3QgREVGQVVMVF9QQVVTRURfSU5URVJWQUwgPSAxMDAKCgoKLy8gSU5URVJFU1RJTkcgRk9SIENPREUgUkVWRUlXUywgSEFCSVQgT0YgRVhUUkFDVElORyBET1VCTEUgTkVHQVRJVkVTPwphc3luYyBmdW5jdGlvbiBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkgewoJaWYocnVuQ29udGV4dC5wYXVzZWQKCQkmJiAocnVuQ29udGV4dC5idWJibGVGaWxlID09ICc8ZXZhbD4nCgkJLy8gVE9ETzogQFJvbGxiYWNrKCkgZm9yIGZhaWxlZCBkaWFsb2dzIHRvIHN0ZXAgYmFjayAxIHN0YXRlbWVudCAKCQkvLyAgIHNvIHdlIGNhbiBwbGF5IHRoZSB0aHJlYWQgYW5kIHBpY2sgdXAgYWdhaW4KCQkJfHwgcnVuQ29udGV4dC5idWJibGVBU1QudHlwZSA9PSAnRGVidWdnZXJTdGF0ZW1lbnQnKQoJCSkgewoJCS8vIGFkZCBhIHBhdXNlZCBoYW5kbGVyIGZvciBkZWJ1ZyBhbmQgY29udGludWUKCQkvLyAgIHRoaXMgd2lsbCBoYW5kbGUgcmVzdG9yYXRpb25zIGZvciBsaXZlIHByb2dyYW1zCgkJLy8gICBpdCB3aWxsIGp1c3Qgc2l0IGhlcmUgYW5kIHdhaXQgZm9yIHRoZSBwbGF5IGJ1dHRvbi4KCQkvLyBCVVQgSVMgVEhJUyBSRUFMTFkgR09PRCBFTk9VR0g/IFNVUkUgV0UgQ0FOIEFUVEFDSCBUTyBBIExJVkUKCQkvLyAgIFBST0dSQU0gV0lUSCBBIERFQlVHR0VSLCBCVVQgU0hPVUxETidUIFdFIEJFIEFCTEUgVE8gVEVMTAoJCS8vICAgVEhFIFBST0dSQU0gV0hBVCBTVEFURSBPRiBNSU5EIElUJ1MgSU4/CgkJLy8gVE9ETzogRU5DT0RFIFJVTlNUQVRFTUVOVCgpIENBTEwgU1RBQ0sgQU5EIEhBU0ggQ09OVEVYVFMKCQkvLyAgIFNBVkUgQU5EIFJFU1RPUkUgQ09OVEVYVFMgRlJPTSBKU09OIEVOVElSRUxZLCBTTyBJTiAKCQkvLyAgIFRIRSBGVVRVUkUgV0UgQ0FOIFBST0dSQU0gT1VSIFBST0dSQU1TLCBMSUtFIEZJWElORyBUSEUgRkxBU0hJTkcgQ0xPQ0sgT04gQSBWQ1IuCgkJYXdhaXQgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKCQkJbGV0IHBhdXNlZFRpbWVyCgkJCXBhdXNlZFRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewoJCQkJaWYoIXJ1bkNvbnRleHQucGF1c2VkKSB7CgkJCQkJY2xlYXJJbnRlcnZhbChwYXVzZWRUaW1lcikKCQkJCQlyZXNvbHZlKCkKCQkJCX0KCQkJfSwgREVGQVVMVF9QQVVTRURfSU5URVJWQUwpCgkJfSkKCX0KCS8vIFRIRVNFIEFSRSBUT0dHTEVEIEFUIERJRkZFUkVOVCBUSU1FUyBUTyBDT05UUk9MIEVWQUxVQVRPUiBGTE9XLgoJaWYocnVuQ29udGV4dC5lbmRlZCkgewoJCXJldHVybiB0cnVlCgl9IGVsc2UgaWYgKHJ1bkNvbnRleHQuYnJva2VuKSB7CgkJcmV0dXJuIHRydWUKCX0gZWxzZSBpZiAocnVuQ29udGV4dC5yZXR1cm5lZCkgewoJCXJldHVybiB0cnVlCgl9CglyZXR1cm4gZmFsc2UKfQoKCmFzeW5jIGZ1bmN0aW9uIHJ1bkZyYW1lKGksIEFTVCwgcnVuQ29udGV4dCkgewoJY3VycmVudENvbnRleHQgPSBydW5Db250ZXh0CglpZihBU1RbaV0gJiYgQVNUW2ldLmxvYykgewoJCWNvbnNvbGUuYXNzZXJ0KHJ1bkNvbnRleHQuYnViYmxlU3RhY2subGVuZ3RoKQoJCWxldCBjdXJyZW50RmlsZSA9IHJ1bkNvbnRleHQuYnViYmxlU3RhY2tbCgkJCQlydW5Db250ZXh0LmJ1YmJsZVN0YWNrLmxlbmd0aC0xXVsxXQoJCQkvLyBub3JtYWxseSB3ZSdkIHNraXAgYW5kIGxldCBpdCBydW4gYXN5bmMKCQkJLy8gICBidXQgZG9TdGF0dXMoKSBhbHNvIGRvZXMgQERlbGF5KCkKCQlsZXQgc2hvdWxkUnVuU3RhdHVzID0gdHlwZW9mIGRvU3RhdHVzICE9ICd1bmRlZmluZWQnCgkJCSYmIHJ1bkNvbnRleHQuYnViYmxlTGluZSAhPSBBU1RbaV0ubG9jLnN0YXJ0LmxpbmUKCQkJJiYgcnVuQ29udGV4dC5idWJibGVGaWxlICE9ICdsaWJyYXJ5L3JlcGwuanMnCgkJbGV0IGRvU2xlZXAgPSBydW5Db250ZXh0LmJ1YmJsZUZpbGUgPT0gJzxldmFsPicKCQkJJiYgKCFBU1RbaV0uY2FsbGVlIHx8IEFTVFtpXS5jYWxsZWUubmFtZSAhPSAnc2xlZXAnKQoJCWlmKGN1cnJlbnRGaWxlICE9ICdsaWJyYXJ5L3JlcGwuanMnCgkJCXx8ICFydW5Db250ZXh0LmJ1YmJsZUZpbGUKCQkpIHsKCQkJcnVuQ29udGV4dC5idWJibGVGaWxlID0gY3VycmVudEZpbGUKCQkJcnVuQ29udGV4dC5idWJibGVDb2x1bW4gPSBBU1RbaV0ubG9jLnN0YXJ0LmNvbHVtbgoJCQlydW5Db250ZXh0LmJ1YmJsZUxpbmUgPSBBU1RbaV0ubG9jLnN0YXJ0LmxpbmUKCQkJcnVuQ29udGV4dC5idWJibGVBU1QgPSBBU1QKCQkJcnVuQ29udGV4dC5idWJibGVUaW1lID0gRGF0ZS5ub3coKQoJCQlydW5Db250ZXh0LmJ1YmJsZUxpbmUgPSBBU1RbaV0ubG9jLnN0YXJ0LmxpbmUKCQl9CgoJCWlmKHNob3VsZFJ1blN0YXR1cykgewoJCQkvLyBQUkVWRU5UIFJFQ1VSU0lPTgoJCQlydW5Db250ZXh0LmJ1YmJsZUZpbGUgPSAnbGlicmFyeS9yZXBsLmpzJwoJCQlhd2FpdCBkb1N0YXR1cyhkb1NsZWVwKQoJCQlydW5Db250ZXh0LmJ1YmJsZUZpbGUgPSBjdXJyZW50RmlsZQoJCX0KCX0gZWxzZSBpZiAoIUFTVFtpXSkgewoJCWRlYnVnZ2VyCgl9Cn0KCgphc3luYyBmdW5jdGlvbiBydW5TdGF0ZW1lbnQoaSwgQVNULCBydW5Db250ZXh0KSB7Cgl0cnkgewogICAgYXdhaXQgcnVuRnJhbWUoaSwgQVNULCBydW5Db250ZXh0KQoKCQkvLyBtb3ZlZCB0aGlzIGhlcmUgc28gd2UgZ2V0IHRoZSBsaW5lIG51bWJlciBvZiB0aGUgbGF0ZXN0IHN0YXRlbWVudAoJCS8vICAgT05MWSBQQVVTRSBPTiA8RVZBTD4gQ0FMTFMKCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQkJZGVidWdnZXIKCQkJdGhyb3cgbmV3IEVycm9yKCdjb250ZXh0IGVuZGVkIScpCgkJfQoJCgkJLy8gSE9XIFRIRSBIRUxMIERPIEkgVEVTVCBJRiBBIExBTkdVQUdFIElNUExFTUVOVEFUSU9OIAoJCS8vICAgIElTIEZFQVRVUkUgQ09NUExFVEU/CgkJLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gIFBBU1MtVEhSVQoJCWlmKEFTVFtpXS50eXBlID09ICdMaXRlcmFsJyB8fCBBU1RbaV0udHlwZSA9PSAnSWRlbnRpZmllcicpIHsKCQkJcmV0dXJuIGF3YWl0IHJ1blByaW1pdGl2ZShBU1RbaV0sIHJ1bkNvbnRleHQpCgkJfSBlbHNlIAoJCWlmKEFTVFtpXS50eXBlID09ICdCcmVha1N0YXRlbWVudCcpIHsKCQkJcnVuQ29udGV4dC5icm9rZW4gPSB0cnVlIC8vIFRPRE86IGNoZWNrIGhvdyBkZXRhaWxlZCBwYXJzZXIgaXMsIAoJCQkvLyAgIGJyZWFrIGFuZCBjb250aW51ZSBhcmUgc3RhdGVtZW50cyBpbiBmb3ItbG9vcD8gb3IgZ2VuZXJhbCBzdGF0ZW1lbnRzPwoJCQlyZXR1cm4KCQl9IGVsc2UKCQlpZihBU1RbaV0udHlwZSA9PSAnQmxvY2tTdGF0ZW1lbnQnKSB7CgkJCXJldHVybiBhd2FpdCBydW5Cb2R5KEFTVFtpXS5ib2R5LCBydW5Db250ZXh0KQoJCX0gZWxzZQoJCS8vIFRPRE86IFdIQVQgSVMgVEhJUz8gZnVuYyh2YXJOYW1lID0gZGVmYXVsdD8pCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ0Fzc2lnbm1lbnRFeHByZXNzaW9uJykgewoJCQkvLyBXT1chIElNQUdJTkUgVEhBVCEgU0hPVyBWQVJJQUJMRVMgQkVGT1JFIEFORCBBRlRFUiBBU1NJR05NRU5UISBHT09HTEUgQ0hST01FIERFQlVHR0VSIQoJCQkvLyBkb0Fzc2lnbgoJCQlyZXR1cm4gYXdhaXQgcnVuQXNzaWdubWVudChBU1RbaV0ubGVmdCwgQVNUW2ldLnJpZ2h0LCBydW5Db250ZXh0KQoJCX0gZWxzZQoJCWlmKEFTVFtpXS50eXBlID09ICdCaW5hcnlFeHByZXNzaW9uJykgewoJCQlyZXR1cm4gYXdhaXQgcnVuQmluYXJ5KEFTVFtpXSwgcnVuQ29udGV4dCkKCQl9IGVsc2UKCQlpZihBU1RbaV0udHlwZSA9PSAnTG9naWNhbEV4cHJlc3Npb24nKSB7CgkJCXJldHVybiBhd2FpdCBydW5Mb2dpY2FsKEFTVFtpXSwgcnVuQ29udGV4dCkKCQl9IGVsc2UKCQkvLyBXVEYgSSBLRUVQIE1JU1NJTkcgUkVUVVJOIEFXQUlUPyEhISBORUVEIFRPIFdSSVRFIEFOIEFTVCBJTiBQUk9MT0cKCQkvLyAgIFRIRU4gV1JJVEUgUFJPTE9HIFBBUlNFUiBJTiBKQVZBU0NSSVBUIFRPIEVWQUxVQVRFIE1BVENISU5HIEFTVAoJCS8vICAgVFJFRSBGUk9NIEFDT1JOL0JJU09OL0FOVExSCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ0ZvclN0YXRlbWVudCcpIHsKCQkJcmV0dXJuIGF3YWl0IHJ1bkxvb3AoCgkJCQlBU1RbaV0uaW5pdCwgCgkJCQlBU1RbaV0udGVzdCwgCgkJCQlBU1RbaV0udXBkYXRlLCAKCQkJCUFTVFtpXS5ib2R5LCAKCQkJCXJ1bkNvbnRleHQpCgkJfSBlbHNlCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ1VwZGF0ZUV4cHJlc3Npb24nKSB7CgkJCS8vIGRvQXNzaWduCgkJCXJldHVybiBhd2FpdCBydW5VcGRhdGUoQVNUW2ldLCBydW5Db250ZXh0KQoJCX0gZWxzZSAKCgoKCgkJLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFJFQ1VSU0lWRQoJCWlmKEFTVFtpXS50eXBlID09ICdFeHByZXNzaW9uU3RhdGVtZW50JykgewoJCQlyZXR1cm4gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1RbaV0uZXhwcmVzc2lvbl0sIHJ1bkNvbnRleHQpCgkJfSBlbHNlCgkJLy8gd2UgYXJlIGFscmVhZHkgYXdhaXRpbmcgZm9yIGV2ZXJ5dGhpbmcKCQlpZihBU1RbaV0udHlwZSA9PSAnQXdhaXRFeHByZXNzaW9uJykgewoJCQlyZXR1cm4gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1RbaV0uYXJndW1lbnRdLCBydW5Db250ZXh0KQoJCX0gZWxzZQoJCWlmKEFTVFtpXS50eXBlID09ICdSZXR1cm5TdGF0ZW1lbnQnKSB7CgkJCS8vIENPREUgUkVWSUVXLCBXSE9PUFMKCQkJaWYoQVNUW2ldLmFyZ3VtZW50ICYmIEFTVFtpXS5hcmd1bWVudC50eXBlKSB7CgkJCQlydW5Db250ZXh0LmJ1YmJsZVJldHVybiA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNUW2ldLmFyZ3VtZW50XSwgcnVuQ29udGV4dCkKCQkJCXJ1bkNvbnRleHQucmV0dXJuZWQgPSB0cnVlCgkJCQlyZXR1cm4gcnVuQ29udGV4dC5idWJibGVSZXR1cm4KCQkJfSBlbHNlIHsKCQkJCXJ1bkNvbnRleHQucmV0dXJuZWQgPSB0cnVlCgkJCQlydW5Db250ZXh0LmJ1YmJsZVJldHVybiA9IHZvaWQgMAoJCQkJcmV0dXJuCgkJCX0KCQl9IGVsc2UKCQlpZihBU1RbaV0udHlwZSA9PSAnVmFyaWFibGVEZWNsYXJhdGlvbicpIHsKCQkJbGV0IHJlc3VsdAoJCQkvLyBzbyBjb250ZXh0IGRvZXNuJ3QgZGlzYXBwZWFyCgkJCWZvcihsZXQgaiA9IDA7IGogPCBBU1RbaV0uZGVjbGFyYXRpb25zLmxlbmd0aDsgaisrKSB7CgkJCQlyZXN1bHQgPSBhd2FpdCBydW5TdGF0ZW1lbnQoaiwgQVNUW2ldLmRlY2xhcmF0aW9ucywgcnVuQ29udGV4dCkKCQkJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgeyAvLyBidWJibGUgdXAKCQkJCQlyZXR1cm4KCQkJCX0KCQkJfQoJCQlyZXR1cm4gcmVzdWx0CgkJfSBlbHNlCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ1ZhcmlhYmxlRGVjbGFyYXRvcicpIHsKCQkJLy8gZG9Bc3NpZ24KCQkJcnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlc1tBU1RbaV0uaWQubmFtZV0gPSAndW5kZWZpbmVkJwoJCQlyZXR1cm4gYXdhaXQgcnVuQXNzaWdubWVudChBU1RbaV0uaWQsIEFTVFtpXS5pbml0LCBydW5Db250ZXh0KQoJCX0gZWxzZSAKCgoJCWlmKEFTVFtpXS50eXBlID09ICdDYWxsRXhwcmVzc2lvbicgfHwgQVNUW2ldLnR5cGUgPT0gJ05ld0V4cHJlc3Npb24nKSB7CgkJCXJldHVybiBhd2FpdCBydW5DYWxsKEFTVFtpXSwgcnVuQ29udGV4dCkKCQl9IGVsc2UKCQlpZihBU1RbaV0udHlwZSA9PSAnRnVuY3Rpb25FeHByZXNzaW9uJyAKCQkJfHwgQVNUW2ldLnR5cGUgPT0gJ0Fycm93RnVuY3Rpb25FeHByZXNzaW9uJwoJCQl8fCBBU1RbaV0udHlwZSA9PSAnRnVuY3Rpb25EZWNsYXJhdGlvbicpIHsKCQkJcmV0dXJuIGF3YWl0IHJ1bkZ1bmN0aW9uKEFTVFtpXSwgcnVuQ29udGV4dCkKCgkJfSBlbHNlCgkJaWYoQVNUW2ldLnR5cGUgPT0gJ01lbWJlckV4cHJlc3Npb24nKSB7CgkJCXJldHVybiBhd2FpdCBydW5NZW1iZXIoQVNUW2ldLCBydW5Db250ZXh0KQoJCX0gZWxzZQoJCWlmKEFTVFtpXS50eXBlID09ICdPYmplY3RFeHByZXNzaW9uJykgewoJCQlyZXR1cm4gYXdhaXQgcnVuT2JqZWN0KEFTVFtpXSwgcnVuQ29udGV4dCkKCQl9IGVsc2UKCQlpZihBU1RbaV0udHlwZSA9PSAnVW5hcnlFeHByZXNzaW9uJykgewoJCQlyZXR1cm4gYXdhaXQgcnVuVW5hcnkoQVNUW2ldLCBydW5Db250ZXh0KQoJCX0gZWxzZSAKCQlpZihBU1RbaV0udHlwZSA9PSAnSWZTdGF0ZW1lbnQnKSB7CgkJCWxldCByZXN1bHQgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVFtpXS50ZXN0XSwgcnVuQ29udGV4dCkKCQkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCQlyZXR1cm4KCQkJfQoJCQlpZihyZXN1bHQpIHsKCQkJCXJldHVybiBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVFtpXS5jb25zZXF1ZW50XSwgcnVuQ29udGV4dCkKCQkJfSBlbHNlIGlmIChBU1RbaV0uYWx0ZXJuYXRlKSB7CgkJCQlyZXR1cm4gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1RbaV0uYWx0ZXJuYXRlXSwgcnVuQ29udGV4dCkgCgkJCX0KCQl9IGVsc2UKCQlpZihBU1RbaV0udHlwZSA9PSAnRGVidWdnZXJTdGF0ZW1lbnQnKSB7CgkJCS8vIFdURiBJUyBUSElTIFNISVQ/CgkJCS8vICBodHRwczovL3d3dy5pY3MudWNpLmVkdS9+cGF0dGlzL2NvbW1vbi9oYW5kb3V0cy9tYWNtaW5nd2VjbGlwc2UvYWxsZXhwZXJpbWVudGFsL21hYy1nZGItaW5zdGFsbC5odG1sCgkJCS8vIEkgSEFWRSBUTyBTSUdOIE1ZIE9XTiBDT1BZIE9GIERCRyBUTyBVU0UgSVQgT04gCgkJCS8vICAgTkFUSVZFIEFQUExJQ0FUSU9OUz8KCQkJLy8gV0hZIFRIRSBGVUNLIERPRVNOJ1QgQVBQTEUgSEFWRSBBIENMSUNLIDEyIFRJTUVTCgkJCS8vICAgVE8gRU5BQkxFIERFVkVMT1BFUiBNT0RFIE9OIE1BQ09TIFNPIFlPVSBDQU4gREVCVUcKCQkJLy8gICBBTkQgSU5TVEFMTCBZT1VSIE9XTiBNT0RVTEVTIFdJVEhPVVQgRElTQUJMSU5HCgkJCS8vICAgU09NRSBTWVNURU0gTEVWRUwgU0VDVVJJVFk/CgkJCS8vIEknTEwgVEVMTCBZT1UgV0hZLCBCRUNBVVNFIEFQUExFIEhBVEVTIERFVkVMT1BFUlMKCQkJLy8gICBUSEUgRE9OJ1QgT1dOLgoJCQkvLyBJIFdPTkRFUiBJRiBUSElTIEVWQUxVQVRPUiBJUyBGQVNUIEVOT1VHSCBUTyBSRU5ERVIKCQkJLy8gICBTS1lCT1hFUyBPTiBBIENMT1VEIEdQVSBGUk9NIE9USEVSIFdPUkxEUy9HQU1FUz8KCQkJcnVuQ29udGV4dC5idWJibGVBU1QgPSBBU1RbaV0KCQkJcnVuQ29udGV4dC5wYXVzZWQgPSB0cnVlCgkJCXNlbmRNZXNzYWdlKHsgCgkJCQlwYXVzZWQ6ICcuJywgCgkJCQlsaW5lOiBydW5Db250ZXh0LmJ1YmJsZUxpbmUgLSAxCgkJCX0pCgkJCXJldHVybgoJCX0gZWxzZQoKCQlpZihBU1RbaV0udHlwZSA9PSAnRG9XaGlsZVN0YXRlbWVudCcKCQkJfHwgQVNUW2ldLnR5cGUgPT0gJ1doaWxlU3RhdGVtZW50JykgewoJCQlhd2FpdCBydW5XaGlsZShBU1RbaV0sIHJ1bkNvbnRleHQpCgkJfSBlbHNlCgoJCWlmKEFTVFtpXS50eXBlID09ICdUaHJvd1N0YXRlbWVudCcpIHsKCQkJdGhyb3cgKGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNUW2ldLmFyZ3VtZW50XSwgcnVuQ29udGV4dCkpCgkJfSBlbHNlCgoJCWlmKEFTVFtpXS50eXBlID09ICdUcnlTdGF0ZW1lbnQnKSB7CgkJCWxldCByZXN1bHQKCQkJdHJ5IHsKCQkJCXJlc3VsdCA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNUW2ldLmJsb2NrXSwgcnVuQ29udGV4dCkKCQkJfSBjYXRjaCAoZSkgewoJCQkJaWYoQVNUW2ldLmhhbmRsZXIpIHsKCQkJCQkvLyBzYW1lIGFzIHJ1bkNhbGwgcGFyYW0gYXNzaWdubWVudAoJCQkJCXJ1bkNvbnRleHQubG9jYWxWYXJpYWJsZXNbQVNUW2ldLmhhbmRsZXIucGFyYW1zLm5hbWVdID0gJ3VuZGVmaW5lZCcKCQkJCQlhd2FpdCBydW5Bc3NpZ25tZW50KHsKCQkJCQkJdHlwZTogJ0lkZW50aWZpZXInLAoJCQkJCQluYW1lOiBBU1RbaV0uaGFuZGxlci5wYXJhbXMubmFtZQoJCQkJCX0sIHsKCQkJCQkJdHlwZTogJ0xpdGVyYWwnLAoJCQkJCQl2YWx1ZTogZQoJCQkJCX0sIHJ1bkNvbnRleHQpCgkJCQl9CgkJCX0gZmluYWxseSB7CgkJCQlpZihBU1RbaV0uZmluYWxseSkgewoJCQkJCXJldHVybiBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVFtpXS5maW5hbGx5XSwgcnVuQ29udGV4dCkKCQkJCX0gZWxzZSB7CgkJCQkJaWYocnVuQ29udGV4dC5idWJibGVSZXR1cm4gIT09IHJlc3VsdCkgewoJCQkJCQljb25zb2xlLmxvZygnV0FSTklORzogbm90IGJ1YmJsaW5nIGNvcnJlY3RseTogJyAKCQkJCQkJCSsgcnVuQ29udGV4dC5idWJibGVTdGFja1tydW5Db250ZXh0LmJ1YmJsZVN0YWNrLmxlbmd0aCAtIDFdWzBdKQoJCQkJCX0KCQkJCQlyZXR1cm4gcmVzdWx0CgkJCQl9CgkJCX0KCQl9IGVsc2UKCQlpZihBU1RbaV0udHlwZSA9PSAnQXJyYXlFeHByZXNzaW9uJykgewoJCQlsZXQgcmVzdWx0ID0gW10KCQkJZm9yKGxldCBqID0gMDsgaiA8IEFTVFtpXS5lbGVtZW50cy5sZW5ndGg7IGorKykgewoJCQkJcmVzdWx0LnB1c2goYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1RbaV0uZWxlbWVudHNbal1dLCBydW5Db250ZXh0KSkKCQkJfQoJCQlyZXR1cm4gcmVzdWx0CgkJfSBlbHNlIAoKCgkJewoJCQlkZWJ1Z2dlcgoJCQl0aHJvdyBuZXcgRXJyb3IoQVNUW2ldLnR5cGUgKyAnOiBOb3QgaW1wbGVtZW50ZWQhJykKCQl9CgoJfSBjYXRjaCAodXApIHsKCQlpZihydW5Db250ZXh0LmJ1YmJsZVVwKSB7CgkJCXRocm93IHVwCgkJfQoJCWRlYnVnZ2VyCgkJY29uc29sZS5sb2codXApCgkJaWYocnVuQ29udGV4dC5idWJibGVGaWxlICE9ICdsaWJyYXJ5L3JlcGwuanMnCgkJCS8vcnVuQ29udGV4dC5idWJibGVTdGFja1tydW5Db250ZXh0LmJ1YmJsZVN0YWNrLmxlbmd0aC0xXVsxXSAhPSAnbGlicmFyeS9yZXBsLmpzJwoJCSkgewoJCQlydW5Db250ZXh0LmJ1YmJsZUZpbGUgPSAnbGlicmFyeS9yZXBsLmpzJwoJCQlhd2FpdCBkb0Vycm9yKHVwLCBydW5Db250ZXh0KQoJCQlydW5Db250ZXh0LmVuZGVkID0gdHJ1ZQoJCX0KCQlyZXR1cm4KCX0KfQoKLy8gZmluZCBhbmQgcnVuIG1haW4KYXN5bmMgZnVuY3Rpb24gcnVuQm9keShBU1QsIHJ1bkNvbnRleHQpIHsKCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCWRlYnVnZ2VyCgkJdGhyb3cgbmV3IEVycm9yKCdjb250ZXh0IGVuZGVkIScpCgl9CgoJLy8gVE9ETzogRklYIENPTlRFWFRTLiBUSElTIElTIE9ORSBPRiBUSEUgVEhJTkdTIFRIQVQKCS8vICAgU0VSSU9VU0xZIEJPVEhFUlMgTUUgQUJPVVQgQ0hST01FIERFQlVHR0VSLCBJRiBJIAoJLy8gICBBTSBJTiBBIERJRkZFUkVOVCBTQ09QRSBMT09LSU5HIEFUIEEgVkFSSUFCTEUgV0lUSAoJLy8gICBUSEUgU0FNRSBOQU1FIEFTIFRIRSBTQ09QRSBJVCdTIFBBVVNFRCBPTiwgSVQgU0hPV1MKCS8vICAgTUUgVEhFIFdST05HIFNDT1BFIFdIRU4gSSBVU0UgVEhFIFNUQUNLIQoJcnVuQ29udGV4dC5idWJibGVQcm9wZXJ0eSA9ICcnCgoJLy8gVE9ETzogcmVzdG9yZSBvdXRlciBzY29wZSB3aGVuIGNvbnRleHQgd2FzIGNyZWF0ZWQKCS8vIGRvZXNuJ3QgbmVlZCB0byBiZSBmYXN0LCBiZWNhdXNlIGFzeW5jIERldlRvb2xzIGNhbGxzLCBhcmUgbm90IGZhc3QKCS8vIHJlcGxhY2Ugd2l0aCBjdXJyZW50IGNvbnRleHQKCgkvLyBhbnkgdGltZSBhIHNldFRpbWVyIGlzIHVzZSB0aGUgY2FsbFN0YWNrIHdpbGwgYmUgcmVzZXQKCS8vICAgd2hpY2ggbWVhbnMgZXJyb3IgbWVzc2FnaW5nIG11c3QgaW50ZXJjZXB0IGhlcmUgbm90IHRvCgkvLyAgIHJ1aW4gb3V0IHdvcmtlciBwcm9jZXNzCgl0cnkgewoJCWxldCByZXN1bHQgPSBhd2FpdCBydW5QYXJhbWV0ZXJzKEFTVCwgcnVuQ29udGV4dCkKCQlydW5Db250ZXh0LmJ1YmJsZVByb3BlcnR5ID0gJycKCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQkJcmV0dXJuIHJlc3VsdC5wb3AoKQoJCX0KCQkvLyByZW1vdmUgYW55dGhpbmcgY3JlYXRlZCBpbiB0aGUgcGFzdCBjb250ZXh0CgkJLy9PYmplY3QuYXNzaWduKHJ1bkNvbnRleHQubG9jYWxGdW5jdGlvbnMsIHN0YXJ0RnVuY3MpCgkJLy9PYmplY3QuYXNzaWduKHJ1bkNvbnRleHQubG9jYWxWYXJpYWJsZXMsIHN0YXJ0VmFycykKCQkvLyBUT0RPOiBMRUFLWSBTQ09QRSwgdGhpcyB3YXkgd2Uga2VlcCB0aGUgc2FtZSBvYmplY3QgdGhlIHdob2xlIHRpbWUKCQkvL3J1bkNvbnRleHQubG9jYWxGdW5jdGlvbnMgPSBzdGFydAoJCS8vcnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlcyA9IHN0YXJ0VmFycwoJCXJldHVybiByZXN1bHQucG9wKCkKCX0gY2F0Y2ggKGUpIHsKCQljb25zb2xlLmxvZyhlKQoJCWF3YWl0IGRvRXJyb3IoZSwgcnVuQ29udGV4dCkKCQlydW5Db250ZXh0LmVuZGVkID0gdHJ1ZQoJCXJldHVybgoJfQp9CgoKCgoKCgpsZXQgZnVuY3Rpb25Db3VudGVyID0gMAoKY29uc3QgTUFYX0NBTEwgPSAxMDAwMAoKY29uc3QgRlVOQ19DT01NRU5UUyA9IC8oXnxccypbXlwvXHNdKy4qXG4pKFxzKlwvXC8uKlxuKSsoYXN5bmN8ZnVuY3Rpb258XHMpLio/JC8KY29uc3QgQVNQRUNUU19SRUdFWCA9IC9ccyt8XG4rfFwofFwpfGZ1bmN0aW9ufGFzeW5jL2cKCgovLyByZXR1cm4gYW4gYXJyYXkgb2YgZXZhbHVhdGVkIGV4cHJlc3Npb24gdG8gcGFzcyBpbnRvIHRoZSBuZXh0IGZ1bmN0aW9uIGNhbGwKYXN5bmMgZnVuY3Rpb24gcnVuUGFyYW1ldGVycyhwYXJhbXMsIHJ1bkNvbnRleHQpIHsKCWxldCByZXN1bHQgPSBbXQoJZm9yKGxldCBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykgewoJCWxldCBhcmcgPSBwYXJhbXNbaV0KCQlyZXN1bHQucHVzaChhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW2FyZ10sIHJ1bkNvbnRleHQpKQoJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQlyZXR1cm4gcmVzdWx0IC8vIGJ1YmJsZSB1cAoJCX0KCX0KCXJldHVybiByZXN1bHQKfQoKLy8gQVBJIGNhbGxzIGFyZSBub3cgZW1iZWRkZWQgaW4gd2ViIHBhZ2UgYW5kIHVwbG9hZGVkIHRvIGJhY2tlbmQuanMKLy8gICBzZWUgZHJpdmVyL2xpYnJhcnkuanMKbGV0IFdFQkRSSVZFUl9BUEkgPSB7CglleHBvcnRzOiB7fQp9CgoKLy8gVE9ETzogYWRkIAovLyBATGF0ZQovLyBTeW50YXggdG8gdXNlIGxhdGUgYmluZGluZywgc3RvcmUgdGhlIEFTVCBhc3NpZ25tZW50IGluIGxvY2FsVmFyaWFibGVzCi8vICAgQW5kIHdoZW4gdGhlIHZhcmlhYmxlIGlzIGFjY2Vzc3NlZCwgY2hlY2sgZm9yIHRoZSBBU1QgYW5kIHJ1blN0YXRlbWVudCgpCgoKCmFzeW5jIGZ1bmN0aW9uIHJ1bkNhbGxTdGF0ZW1lbnRzKHJ1bkNvbnRleHQsIGZ1bmN0aW9uTmFtZSwgZmlsZW5hbWUsIHBhcmFtZXRlckRlZmluaXRpb24sIGJlZm9yZSwgYWZ0ZXIsIGJvZHksIC4uLmNhbGxBcmdzKSB7CgkvLyBhc3NpZ24gdG8gcGFyYW0gbmFtZXMgaW4gbmV4dCBjb250ZXh0CglsZXQgc3RhcnRWYXJzID0gT2JqZWN0LmFzc2lnbih7fSwgcnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlcykKCglsZXQgYmVmb3JlTGluZSA9IHJ1bkNvbnRleHQuYnViYmxlTGluZSAtIDEgLy8gLTEgZm9yIHdyYXBwZXIgZnVuY3Rpb24KCWlmKHJ1bkNvbnRleHQuYnViYmxlU3RhY2subGVuZ3RoID09IDApIHsKCQljb25zb2xlLmVycm9yKCdDYWxsIHN0YWNrIGNvcnJ1cHRlZCcpCgl9CglydW5Db250ZXh0LmJ1YmJsZVN0YWNrLnB1c2goW2Z1bmN0aW9uTmFtZSwgZmlsZW5hbWUsIGJlZm9yZUxpbmVdKQoJbGV0IHJlc3VsdAoJdHJ5IHsKCQkKCQkvLyBUSElTIFNISVQgSVMgSU1QT1JUQU5ULiBNQUtFIENPTVBMSUNBVEVEIFNJTVBMRS4KCQkvLyBJIE1FTlRJT04gVEhJUyBUTyBQRU9QTEUgQU5EIFRIRVkgSEFWRSBOTyBJREVBCgkJLy8gICBXSEFUIEkgTUVBTi4gSSBMRUFSTkVEIFRISVMgSU4gTVkgRkFOQ1kgNCBZUi4KCQkvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Bc3BlY3Qtb3JpZW50ZWRfcHJvZ3JhbW1pbmcKCQkvLyAgIEMjIERPRVMgVEhJUyBBVVRPTUFUSUNBTExZIEFORCBQRU9QTEUgTE9WRSBJVAoJCS8vICAgVEhJUyBJUyBCQVNJQ0FMTFkgSE9XIElUIFdPUktTIElOVEVSTkFMTFksIFVTRVMKCQkvLyAgIElOVFJPU1BFQ1RJT04gVE8gUkVBRCBBVFRSSUJVVEVTIEZST00gVEhFIFBBUlNFCgkJLy8gICBUSEVOIENBTExTIFRIRSBGVU5DVElPTlMgQkVGT1JFIFRIRSBBQ1RVQUwgQ0FMTAoJCS8vICAgSEFQUEVOUy4gU1lOVEFDVElDIFNVR0FSLiBFVkVSWSBMQU5HVUFHRSBTSE9VTEQgSEFWRSBBVFRSSUJVVEVTCgkJaWYoYmVmb3JlKSB7CgkJCWxldCBiZWZvcmVGdW5jCgkJCWlmKHJ1bkNvbnRleHQubG9jYWxWYXJpYWJsZXNbYmVmb3JlXSA9PSAnZnVuY3Rpb24nKSB7CgkJCQliZWZvcmVGdW5jID0gcnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlc1tiZWZvcmVdCgkJCX0gZWxzZSB7CgkJCQl0aHJvdyBuZXcgRXJyb3IoJ0F0dHJpYnV0ZSBAQmVmb3JlIG5vdCBmb3VuZDogJyArIGJlZm9yZSkKCQkJfQoJCQkvLyBhbGxvdyB1c2VycyB0byBtb2RpZnkgZnVuY3Rpb24gYXJndW1lbnRzPyBTVVJFIQoJCQlsZXQgciA9IGF3YWl0IGJlZm9yZUZ1bmMoY2FsbEFyZ3MsIHJ1bkNvbnRleHQpCgkJfQoJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQlyZXR1cm4KCQl9CgoJCWZvcihsZXQgbCA9IDA7IGwgPCBwYXJhbWV0ZXJEZWZpbml0aW9uLmxlbmd0aDsgbCsrKSB7CgkJCWlmKHBhcmFtZXRlckRlZmluaXRpb25bbF0udHlwZSAhPSAnSWRlbnRpZmllcicpIHsKCQkJCXRocm93IG5ldyBFcnJvcignRnVuY3Rpb25EZWNsYXJhdGlvbjogTm90IGltcGxlbWVudGVkIScpCgkJCX0KCQkJaWYobCA9PSBjYWxsQXJncy5sZW5ndGgpIHsKCQkJCWNvbnRpbnVlOwoJCQl9CgkJCS8vIGZ1Y2stYXJvdW5kcz8KCQkJaWYodHlwZW9mIHJ1bkNvbnRleHQubG9jYWxWYXJpYWJsZXMgPT0gJ3VuZGVmaW5lZCcpIHsKCQkJCWRlYnVnZ2VyCgkJCX0KCQkJcnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlc1twYXJhbWV0ZXJEZWZpbml0aW9uW2xdLm5hbWVdID0gJ3VuZGVmaW5lZCcKCQkJYXdhaXQgcnVuQXNzaWdubWVudCh7CgkJCQl0eXBlOiAnSWRlbnRpZmllcicsCgkJCQluYW1lOiBwYXJhbWV0ZXJEZWZpbml0aW9uW2xdLm5hbWUKCQkJfSwgewoJCQkJdHlwZTogJ0xpdGVyYWwnLAoJCQkJdmFsdWU6IGNhbGxBcmdzW2xdCgkJCX0sIHJ1bkNvbnRleHQpCgkJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQkJcmV0dXJuCgkJCX0KCQl9CgoJCS8vIHJ1biBuZXcgY29tbWFuZCBjb250ZXh0CgkJcmVzdWx0ID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtib2R5XSwgcnVuQ29udGV4dCkKCgkJLy8gVE9ETzogU09NRVRISU5HIEFCT1VUIElGIEFOIEFTUEVDVCBIQVMgQU4gRVhDUExJQ0lUIFJFVFVSTiAKCQkvLyAgIFNUQVRFTUVOVCBUSEVOIE9WRVJSSURFIFRIRSBSRVRVUk4gVkFMVUUgV0lUSCBCRUZPUkUKCQkvLyAgIE9USEVSV0lTRSBMRUFWRSBJVCBVTk1PRElGSUVECgkJaWYoYWZ0ZXIpIHsKCQkJbGV0IGFmdGVyRnVuYwoJCQlpZihydW5Db250ZXh0LmxvY2FsVmFyaWFibGVzW2FmdGVyXSA9PSAnZnVuY3Rpb24nKSB7CgkJCQlhZnRlckZ1bmMgPSBydW5Db250ZXh0LmxvY2FsVmFyaWFibGVzW2FmdGVyXQoJCQl9IGVsc2UgewoJCQkJdGhyb3cgbmV3IEVycm9yKCdBdHRyaWJ1dGUgQEFmdGVyIG5vdCBmb3VuZDogJyArIGFmdGVyKQoJCQl9CgkJCXJlc3VsdCA9IGF3YWl0IGFmdGVyRnVuYyhyZXN1bHQsIHJ1bkNvbnRleHQpCgkJfQoJCXJ1bkNvbnRleHQuYnViYmxlTWVtYmVyID0gbnVsbAoJCXJ1bkNvbnRleHQuYnViYmxlUHJvcGVydHkgPSAnJwoJCWlmKHJ1bkNvbnRleHQucmV0dXJuZWQpIHsKCQkJcnVuQ29udGV4dC5yZXR1cm5lZCA9IGZhbHNlCgkJCWlmKHJlc3VsdCAhPT0gcnVuQ29udGV4dC5idWJibGVSZXR1cm4pIHsKCQkJCWNvbnNvbGUubG9nKCdXQVJOSU5HOiBub3QgYnViYmxpbmcgY29ycmVjdGx5OiAnICsgZnVuY3Rpb25OYW1lKQoJCQl9CgkJCXJlc3VsdCA9IHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuCgkJCWRlbGV0ZSBydW5Db250ZXh0LmJ1YmJsZVJldHVybgoJCX0KCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQkJcmV0dXJuCgkJfQoKCS8vT2JqZWN0LmFzc2lnbihydW5Db250ZXh0LmxvY2FsVmFyaWFibGVzLCBzdGFydFZhcnMpIC8vIHJlc2V0IHJlZmVyZW5jZXMKCS8vIFRPRE86IExFQUtZIFNDT1BFLCByZW1vdmUgdW5uYW1lZCB2YXJpYWJsZXMgZnJvbSBwcmV2aW91cyBzY29wZQoJLy8gVE9ETzogRklYIFNDT1BJTkcgV0lUSCBBIFJVTkNPTlRFWFQuQ09OVEVYVFMgU1RBQ0sKCS8vICAgVGhpcyB3b3VsZCBoZWxwIHNvbHZlIHZhci9sZXQsIGF1dG9tYXRpY2FsbHkgZHJvcCB2YXIgaW50byB0b3AgY29udGV4dAoJLy8gICBUaGlzIHdvdWxkIGhlbHAgd2l0aCBzdGF0aWMvcHVibGljL2ZyaWVuZGx5IGNoZWNraW5nCgkvLyAgIFRoaXMgd291bGQgaGVscCBsYW5ndWFnZXMgd2l0aCBsZWFreSBzY29wZXMgYnkgcHVycG9zZSwgTFVBLCBQUk9MT0c/CgkvLyAgIFRoaXMgd291bGQgZml4IHNjb3BpbmcgYXJvdW5kIHBhcmFtZXRlciBkZWZpbml0aW9ucwoJLy8gVE9ETzogc2VhcmNoIHRoZSBjb250ZXh0cyBzdGFjayBmb3IgdGhlIHZhcmlhYmxlCgl9IGNhdGNoIChlKSB7CgkJdGhyb3cgZQoJfSBmaW5hbGx5IHsKCQlydW5Db250ZXh0LmJ1YmJsZVN0YWNrLnBvcCgpCgkJaWYocnVuQ29udGV4dC5idWJibGVTdGFjay5sZW5ndGggPT0gMCkgewoJCQljb25zb2xlLmVycm9yKCdDYWxsIHN0YWNrIGNvcnJ1cHRlZCcpCgkJfQoJfQoKCXJldHVybiByZXN1bHQKfQoKCgphc3luYyBmdW5jdGlvbiBydW5GdW5jdGlvbihBU1QsIHJ1bkNvbnRleHQpIHsKCWxldCBiZWZvcmUKCWxldCBhZnRlcgoJbGV0IG5hbWVQcmVmaXggPSAnJwoJaWYoQVNULnR5cGUgPT0gJ0Z1bmN0aW9uRXhwcmVzc2lvbicgCgl8fCBBU1QudHlwZSA9PSAnQXJyb3dGdW5jdGlvbkV4cHJlc3Npb24nKSB7CgkJbmFtZVByZWZpeCA9ICdpbmxpbmUgJwoJfSBlbHNlIHsKCQkvLyBBVFRSSUJVVEUgU1VQUE9SVAoJCS8vIFRPRE86IEMjIEdJVkVTIFlPVSBBIFdBWSBUTyBBREQgQVRUUklCVVRFUyBUTwoJCS8vICAgTUFOWSBUT0tFTiBUWVBFUyAKCQkvLyAgIEpBVkEgSEFTIEFUVFJJQlVURVMgVE9PLCBCVVQgVEhFWSBBUkUgVUdMSUVSCgkJLy8gVE9ETzogQERlbGF5KCksIEBMb25nTG9vcHMoKSBhbmQgb3RoZXIgc2FmZXR5cwoJCS8vIFRPRE86IFNUQVRJQyBDT05TVFJVQ1RPUlMsIFNURCBMSUJSQVJZIExPQURFUlMKCQkvLyBUT0RPOiBvbkJlZm9yZSwgb25BZnRlciwgY29udHJvbCBmbG93IGltcHJpbnRpbmcKCQlsZXQgYXR0cmlidXRlQ29tbWVudHMgPSBydW5Db250ZXh0LnNjcmlwdAoJCQkuc3Vic3RyaW5nKDAsIEFTVC5zdGFydCkKCQkJLm1hdGNoKEZVTkNfQ09NTUVOVFMpCgkJaWYoYXR0cmlidXRlQ29tbWVudHMpIHsKCQkJbGV0IGF0dHJpYnMgPSBhdHRyaWJ1dGVDb21tZW50c1swXS5zcGxpdChBU1BFQ1RTX1JFR0VYKQoJCQlmb3IobGV0IGsgPSAwOyBrIDwgYXR0cmlicy5sZW5ndGg7IGsrKykgewoJCQkJaWYoYXR0cmlic1trXS50cmltKCkubGVuZ3RoID09IDAgfHwgIWF0dHJpYnNba10uaW5jbHVkZXMoJ0AnKSkgewoJCQkJCWNvbnRpbnVlCgkJCQl9IGVsc2UKCQkJCWlmKGF0dHJpYnNba10gPT0gJ0BCZWZvcmUnKSB7CgkJCQkJYmVmb3JlID0gYXR0cmlic1trKzFdCgkJCQkJKytrCgkJCQl9IGVsc2UKCQkJCWlmKGF0dHJpYnNba10gPT0gJ0BBZnRlcicpIHsKCQkJCQlhZnRlciA9IGF0dHJpYnNbaysxXQoJCQkJCSsrawoJCQkJfSBlbHNlIHsKCQkJCQlkb0NvbnNvbGUocnVuQ29udGV4dC5zZW5kZXJJZCwgCgkJCQkJCSdXQVJOSU5HOiBBdHRyaWJ1dGUgbm90IHJlY29nbml6ZWQ6ICcgKyBhdHRyaWJzW2tdKQoJCQkJfQoKCQkJfQoJCX0KCX0KCWlmKEFTVC5pZCkgewoJCS8vIGRvbid0IGFkZCBuYW1lUHJlZml4IQoJCWlmKHJ1bkNvbnRleHQubG9jYWxWYXJpYWJsZXMuaGFzT3duUHJvcGVydHkoQVNULmlkLm5hbWUpKSB7CgkJCXRocm93IG5ldyBFcnJvcignVmFyaWFibGUgYWxyZWFkeSBkZWNsYXJlZCEgJyArIEFTVC5pZC5uYW1lKQoJCX0KCX0gZWxzZSB7CgkJbmFtZVByZWZpeCArPSBBU1QudHlwZSA9PSAnQXJyb3dGdW5jdGlvbkV4cHJlc3Npb24nID8gJ2xhbWJkYSAnIDogJ2Z1bmMgJwoJfQoKCWxldCBmdW5jTmFtZSA9IG5hbWVQcmVmaXggKyAoQVNULmlkID8gQVNULmlkLm5hbWUgOiBmdW5jdGlvbkNvdW50ZXIpCgkrK2Z1bmN0aW9uQ291bnRlcgoJcnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlc1tmdW5jTmFtZV0gPSAndW5kZWZpbmVkJwoJbGV0IG5ld0Z1bmMgPSBydW5DYWxsU3RhdGVtZW50cy5iaW5kKG51bGwsIHJ1bkNvbnRleHQsCgkJCWZ1bmNOYW1lLCBydW5Db250ZXh0LmJ1YmJsZUZpbGUsIEFTVC5wYXJhbXMsIGJlZm9yZSwgYWZ0ZXIsIEFTVC5ib2R5KQoJbmV3RnVuYy5maWxlbmFtZSA9IHJ1bkNvbnRleHQuYnViYmxlRmlsZQoJbGV0IHJlc3VsdCA9IGF3YWl0IHJ1bkFzc2lnbm1lbnQoewoJCXR5cGU6ICdJZGVudGlmaWVyJywKCQluYW1lOiBmdW5jTmFtZSwKCX0sIHsKCQl0eXBlOiAnTGl0ZXJhbCcsCgkJdmFsdWU6IG5ld0Z1bmMsCgl9LCBydW5Db250ZXh0KQoKCXJldHVybiByZXN1bHQKfQoKCgphc3luYyBmdW5jdGlvbiBydW5DYWxsKEFTVCwgcnVuQ29udGV4dCkgewoJLy8gY29sbGVjdCB2YXJpYWJsZXMKCQkJCglsZXQgcGFyYW1zID0gYXdhaXQgcnVuUGFyYW1ldGVycyhBU1QuYXJndW1lbnRzLCBydW5Db250ZXh0KQoJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJcmV0dXJuIC8vIGJ1YmJsZSB1cAoJfQoKCXJ1bkNvbnRleHQuYnViYmxlTWVtYmVyID0gbnVsbAoJcnVuQ29udGV4dC5idWJibGVQcm9wZXJ0eSA9ICcnCglsZXQgY2FsbGVlRnVuYwoJbGV0IGZ1bmN0aW9uTmFtZQoJaWYoQVNULmNhbGxlZS50eXBlID09ICdJZGVudGlmaWVyJykgewoJCS8vIGhhbmRsZSBpZGVudGlmaWVycyBoZXJlIGJlY2F1c2UgbG9va2luZyBpdCB1cCB3aXRoIGJ1YmJsZSB1cCBhbiBlcnJvcgoJCWZ1bmN0aW9uTmFtZSA9IEFTVC5jYWxsZWUubmFtZQoJCXRyeSB7CgkJCS8vIFRPRE86IHNob3VsZCBwcm9iYWJseSBoYXZlIGEgYmV0dGVyIHdheSBvZiBoYW5kbGluZyBOT1QtRVJST1IKCQkJY2FsbGVlRnVuYyA9IGF3YWl0IHJ1blByaW1pdGl2ZShBU1QuY2FsbGVlLCBydW5Db250ZXh0KQoJCX0gY2F0Y2ggKHVwKSB7CgkJCWlmKCF1cC5tZXNzYWdlLmluY2x1ZGVzKCdub3QgZGVmaW5lZCcpCgkJCQkJLy8gQ09ERSBSRVZJRVcsIG1lYW50IHRvIGRvIHRoaXMgZWFybGllcgoJCQkJCSYmICF1cC5tZXNzYWdlLmluY2x1ZGVzKCdhY2Nlc3MgZXJyb3InKSkgewoJCQkJdGhyb3cgdXAKCQkJfQoJCX0KCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQkJcmV0dXJuIC8vIGJ1YmJsZSB1cAoJCX0KCgkJLy8gQ09ERSBSRVZJRVc6IG9tZyBpdCdzIHJlYWR5CgkJbGV0IGxpYgoJCS8vIFRPRE86IHNob3J0Y3V0IHRoZSBmcm9udGVuZCBGUy52aXJ0dWFsCgkJLy8gICBmb3Igbm93IGFuZCBqdXN0IHByb3ZpZGUgd2hhdGV2ZXIgaXMgc2F2ZWQgaW4gSURCRlMKCQkvLyB3aWxsIG5lZWQgUlBDIHRvIHNhdmUgY29kZSBzdG9yYWdlLCB3aWxsIHByb3ZpZGUgaXQgaW4KCQkvLyAgIGNsb3VkIGJ1aWxkIHNvIG5lZWRzIHRvIGJlIGdlbmVyaWMgdGhyb3VnaCBhY2Nlc3NvcnMuCgkJaWYgKCFjYWxsZWVGdW5jCgkJCSYmIHJ1bkNvbnRleHQuYnViYmxlRmlsZSAhPSAnbGlicmFyeS9yZXBsLmpzJwoJCQkmJiAobGliID0gZG9MaWJyYXJ5TG9va3VwKGZ1bmN0aW9uTmFtZSkpCgkJKSB7CgkJCWNhbGxlZUZ1bmMgPSBhd2FpdCBkb0FjY2Vzc29yKGxpYikKCQl9Cgl9IGVsc2UKCWlmKEFTVC5jYWxsZWUudHlwZSkgewoJCWNhbGxlZUZ1bmMgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVC5jYWxsZWVdLCBydW5Db250ZXh0KQoJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQlyZXR1cm4gLy8gYnViYmxlIHVwCgkJfQoJCWZ1bmN0aW9uTmFtZSA9IHJ1bkNvbnRleHQuYnViYmxlUHJvcGVydHkKCgl9IGVsc2UgewoJCXRocm93IG5ldyBFcnJvcignQ2FsbEV4cHJlc3Npb246IE5vdCBpbXBsZW1lbnRlZCEnKQoJfQoKCWlmKCFjYWxsZWVGdW5jKSB7CgkJZGVidWdnZXIKCQl0aHJvdyBuZXcgRXJyb3IoJ0Z1bmN0aW9uIG5vdCBkZWZpbmVkOiAnICsgQVNULmNhbGxlZS5uYW1lKQoJfQoKCglsZXQgYmVmb3JlTGluZSA9IHJ1bkNvbnRleHQuYnViYmxlTGluZSAtIDEKCWlmKGNhbGxlZUZ1bmMuaW50ZXJwcmV0ZWQpIHsKCQkvLyBpbnRlcnByZXRlZCBydW5DYWxsU3RhdGVtZW50cyB3aWxsIGFkZCB0byBzdGFjayBhdCBuZXh0IGxheWVyCgl9IGVsc2UgewoJCWlmKHJ1bkNvbnRleHQuYnViYmxlU3RhY2subGVuZ3RoID09IDApIHsKCQkJY29uc29sZS5lcnJvcignQ2FsbCBzdGFjayBjb3JydXB0ZWQnKQoJCX0JCgkJcnVuQ29udGV4dC5idWJibGVTdGFjay5wdXNoKFsKCQkJZnVuY3Rpb25OYW1lLCAKCQkJY2FsbGVlRnVuYy5maWxlbmFtZSB8fCAnWyBuYXRpdmUgY29kZSBdJywgCgkJCWJlZm9yZUxpbmUKCQldKQoJfQoJaWYocnVuQ29udGV4dC5idWJibGVTdGFjay5sZW5ndGggPiBNQVhfQ0FMTCkgewoJCXRocm93IG5ldyBFcnJvcignQ2FsbCBzdGFjayBleGNlZWRlZCEnKQoJfQoKCXJ1bkNvbnRleHQubG9jYWxWYXJpYWJsZXNbJ2FyZ3VtZW50cyddID0gJ3VuZGVmaW5lZCcKCWF3YWl0IHJ1bkFzc2lnbm1lbnQoewoJCXR5cGU6ICdJZGVudGlmaWVyJywKCQluYW1lOiAnYXJndW1lbnRzJwoJfSwgewoJCXR5cGU6ICdMaXRlcmFsJywKCQl2YWx1ZTogcGFyYW1zCgl9LCBydW5Db250ZXh0KQoJLy8gVE9ETzogX19mdW5jX18sIF9fbGluZV9fLCBfX2ZpbGVfXyBmb3IgZGVidWdnaW5nIGZ1bgoKCgl0cnkgewoJCWxldCByZXN1bHQ7CgkJaWYoQVNULnR5cGUgPT0gJ05ld0V4cHJlc3Npb24nKSB7CgkJCWlmKGNhbGxlZUZ1bmMgPT0gUHJvbWlzZSkgewoJCQkJcmVzdWx0ID0gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihkID0+IHsKCQkJCQlydW5Db250ZXh0LmFzeW5jUnVubmVycysrCgkJCQkJcmV0dXJuIGQKCQkJCX0pLnRoZW4oaW50ZXJuYWxSZXNvbHZlKS5jYXRjaChlID0+IHsKCQkJCQlydW5Db250ZXh0LmFzeW5jUnVubmVycy0tCgkJCQkJdGhyb3cgZQoJCQkJfSkudGhlbihkID0+IHsKCQkJCQlydW5Db250ZXh0LmFzeW5jUnVubmVycy0tCgkJCQkJcmV0dXJuIGQKCQkJCX0pCgkJCX0gZWxzZSB7CgkJCQlyZXN1bHQgPSBhd2FpdCAobmV3IGNhbGxlZUZ1bmMoLi4ucGFyYW1zKSkKCQkJfQoJCX0gZWxzZSBpZiAodHlwZW9mIGNhbGxlZUZ1bmMgPT0gJ2Z1bmN0aW9uJwoJCQkmJiBydW5Db250ZXh0LmJ1YmJsZU1lbWJlcikgewoJCQlyZXN1bHQgPSBhd2FpdCBjYWxsZWVGdW5jLmFwcGx5KHJ1bkNvbnRleHQuYnViYmxlTWVtYmVyLCBwYXJhbXMpCgkJfSBlbHNlIGlmICh0eXBlb2YgY2FsbGVlRnVuYyA9PSAnZnVuY3Rpb24nKSB7CgkJCXJlc3VsdCA9IGF3YWl0IGNhbGxlZUZ1bmMoLi4ucGFyYW1zKQoJCX0gZWxzZSB7CgkJCXRocm93IG5ldyBFcnJvcignTm90IGEgZnVuY3Rpb24hICcgKyBBU1QuY2FsbGVlLm5hbWUpCgkJfQoJCXJ1bkNvbnRleHQuYnViYmxlTWVtYmVyID0gbnVsbAoJCXJ1bkNvbnRleHQuYnViYmxlUHJvcGVydHkgPSAnJwoJCWlmKHJ1bkNvbnRleHQucmV0dXJuZWQpIHsKCQkJcnVuQ29udGV4dC5yZXR1cm5lZCA9IGZhbHNlCgkJCWlmKHJlc3VsdCAhPT0gcnVuQ29udGV4dC5idWJibGVSZXR1cm4pIHsKCQkJCWNvbnNvbGUubG9nKCdXQVJOSU5HOiBub3QgYnViYmxpbmcgY29ycmVjdGx5OiAnICsgZnVuY3Rpb25OYW1lKQoJCQl9CgkJCXJlc3VsdCA9IHJ1bkNvbnRleHQuYnViYmxlUmV0dXJuCgkJCWRlbGV0ZSBydW5Db250ZXh0LmJ1YmJsZVJldHVybgoJCX0KCgkJLy8gbXVzdCBjb21lIGFmdGVyIHJ1bkNvbnRleHQucmV0dXJuZWQgaXMgYWRqdXN0ZWQgCgkJLy8gICBiZWNhdXNlIHRoaXMgYnViYmxlcyBvdXQgb2Ygd2hhdGV2ZXIgYmxvY2sgb3IgCgkJLy8gICBmb3ItbG9vcCBpcyBpbiBzY29wZS4KCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQkJcmV0dXJuIC8vIGJ1YmJsZSB1cAoJCX0KCgkJLy8gYXV0b21hdGljYWxseSBwYXVzZSBmb3IgYSBzZWNvbmQgb24gdXNlciBmdW5jdGlvbnMKCQkvLyAgIHRvIGFsbG93IHVzZXJzIHRvIG9ic2VydmUgdGhlIHJlc3VsdCBvZiB0aGUgQVBJCgkJaWYoQVNULmNhbGxlZS5uYW1lICE9ICdzbGVlcCcKCQkJJiYgcnVuQ29udGV4dC5idWJibGVTdGFja1sKCQkJCXJ1bkNvbnRleHQuYnViYmxlU3RhY2subGVuZ3RoXSA9PSAnPGV2YWw+JykgewoJCQljb25zb2xlLmxvZygnTE9ORyBERUxBWSEhISAnICsgZnVuY3Rpb25OYW1lICsgJyAuICcgKyBiZWZvcmVMaW5lKQoJCQlhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgREVGQVVMVF9ERUxBWSkpCgkJfQoJCXJldHVybiByZXN1bHQKCgl9IGNhdGNoIChlKSB7CgkJY29uc29sZS5sb2coZSkKCQlhd2FpdCBkb0Vycm9yKGUsIHJ1bkNvbnRleHQpCgkJcnVuQ29udGV4dC5lbmRlZCA9IHRydWUKCQlyZXR1cm4KCX0gZmluYWxseSB7CgkJaWYoIWNhbGxlZUZ1bmMuaW50ZXJwcmV0ZWQpIHsKCQkJcnVuQ29udGV4dC5idWJibGVTdGFjay5wb3AoKQoJCQlpZihydW5Db250ZXh0LmJ1YmJsZVN0YWNrLmxlbmd0aCA9PSAwKSB7CgkJCQljb25zb2xlLmVycm9yKCdDYWxsIHN0YWNrIGNvcnJ1cHRlZCcpCgkJCX0KCQl9Cgl9Cgp9Cgpjb25zdCBMT05HX0xPT1BTID0gMTAwMDAKCgphc3luYyBmdW5jdGlvbiBydW5Mb29wKGluaXQsIHRlc3QsIHVwZGF0ZSwgYm9keSwgcnVuQ29udGV4dCkgewoJbGV0IHJlc3VsdAoJaWYoYm9keS50eXBlICE9ICdCbG9ja1N0YXRlbWVudCcpIHsKCQl0aHJvdyBuZXcgRXJyb3IoJ0ZvclN0YXRlbWVudDogTm90IGltcGxlbWVudGVkIScpCgl9CglpZihpbml0KSB7CgkJYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtpbml0XSwgcnVuQ29udGV4dCkKCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQkJcmV0dXJuCgkJfQoJfQoKCWxldCB0ZXN0UmVzdWx0cyA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbdGVzdF0sIHJ1bkNvbnRleHQpCglpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQlyZXR1cm4KCX0KCgkvLyBUT0RPOiB0dXJuIG9mZiBzYWZldHkgZmVhdHVyZSB3aXRoIGFuIGF0dHJpYnV0ZSBATG9uZ0xvb3BzCglsZXQgc2FmZXR5ID0gTE9OR19MT09QUwoJZm9yKDt0ZXN0UmVzdWx0cyAmJiBzYWZldHkgPiAwOyBzYWZldHktLSkgewoJCWxldCByZXN1bHQgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW2JvZHldLCBydW5Db250ZXh0KQoJCWlmKHJ1bkNvbnRleHQuYnJva2VuKSB7CgkJCXJ1bkNvbnRleHQuYnJva2VuID0gZmFsc2UKCQkJYnJlYWsKCQl9CgkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCXJldHVybgoJCX0KCQlhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW3VwZGF0ZV0sIHJ1bkNvbnRleHQpCgkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCXJldHVybgoJCX0KCQl0ZXN0UmVzdWx0cyA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbdGVzdF0sIHJ1bkNvbnRleHQpCgkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCXJldHVybgoJCX0KCX0KCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCXJldHVybgoJfQovLyBTTyBJJ00gTk9UIEEgSFlQT0NSSVRFIExFVFMgUFVUIFNPTUUgUkVBU09OQUJMRSBCT1VORFMhCglpZihzYWZldHkgPT0gMCkgewoJCXRocm93IG5ldyBFcnJvcignTG9uZyBydW5uaW5nIGZvciBsb29wIScpCgl9CglyZXR1cm4gcmVzdWx0Cn0KCmFzeW5jIGZ1bmN0aW9uIHJ1bldoaWxlKEFTVCwgcnVuQ29udGV4dCkgewogIGxldCByZXN1bHQKICBsZXQgc2FmZXR5ID0gTE9OR19MT09QUwoJbGV0IHRlc3RSZXN1bHRzCglpZihBU1QudHlwZSA9PSAnV2hpbGVTdGF0ZW1lbnQnKSB7CgkJbGV0IGZpcnN0ID0gdHJ1ZQoJCXdoaWxlIChmaXJzdCB8fCAodGVzdFJlc3VsdHMgJiYgLS1zYWZldHkgPiAwKSkgewoJCQlmaXJzdCA9IGZhbHNlCgkJCXRlc3RSZXN1bHRzID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1QudGVzdF0sIHJ1bkNvbnRleHQpCgkJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQkJcmV0dXJuCgkJCX0KCQkJaWYoIXRlc3RSZXN1bHRzKSB7CgkJCQlicmVhawoJCQl9CgkJCXJlc3VsdCA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNULmJvZHldLCBydW5Db250ZXh0KQoJCQlpZihydW5Db250ZXh0LmJyb2tlbikgewoJCQkJcnVuQ29udGV4dC5icm9rZW4gPSBmYWxzZQoJCQkJYnJlYWsKCQkJfQoJCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQkJCXJldHVybgoJCQl9CgkJfQoJfSBlbHNlIAoJaWYoQVNULnR5cGUgPT0gJ0RvV2hpbGVTdGF0ZW1lbnQnKSB7CgoJCWRvIHsKCQkJcmVzdWx0ID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1QuYm9keV0sIHJ1bkNvbnRleHQpCgkJCWlmKHJ1bkNvbnRleHQuYnJva2VuKSB7CgkJCQlydW5Db250ZXh0LmJyb2tlbiA9IGZhbHNlCgkJCQlicmVhawoJCQl9CgkJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQkJcmV0dXJuCgkJCX0KCQkJdGVzdFJlc3VsdHMgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVC50ZXN0XSwgcnVuQ29udGV4dCkKCQkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCQlyZXR1cm4KCQkJfQoJCX0gd2hpbGUgKHRlc3RSZXN1bHRzICYmIC0tc2FmZXR5ID4gMCkKCX0gZWxzZSB7CgkJdGhyb3cgbmV3IEVycm9yKEFTVC50eXBlICsgJzogTm90IGltcGxlbWVudGVkIScpCgl9CgoJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJcmV0dXJuCgl9CglyZXR1cm4gcmVzdWx0Cn0KCmFzeW5jIGZ1bmN0aW9uIHJ1blByaW1pdGl2ZShBU1QsIHJ1bkNvbnRleHQpIHsKCWlmKEFTVC50eXBlID09ICdMaXRlcmFsJykgewoJCXJldHVybiBBU1QudmFsdWUKCX0gZWxzZSAKCWlmKEFTVC50eXBlID09ICdJZGVudGlmaWVyJykgewoJCWlmKHJ1bkNvbnRleHQubG9jYWxWYXJpYWJsZXMuaGFzT3duUHJvcGVydHkoQVNULm5hbWUpKSB7CgkJCWZvcihsZXQgaSA9IHJ1bkNvbnRleHQubG9jYWxEZWNsYXJhdGlvbnMubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSB7CgkJCQlpZihydW5Db250ZXh0LmxvY2FsRGVjbGFyYXRpb25zW2ldLmhhc093blByb3BlcnR5KEFTVC5uYW1lKQoJCQkJCXx8IHR5cGVvZiBydW5Db250ZXh0LmxvY2FsRGVjbGFyYXRpb25zW2ldW0FTVC5uYW1lXSAhPSAndW5kZWZpbmVkJykgewoJCQkJCXJldHVybiBydW5Db250ZXh0LmxvY2FsRGVjbGFyYXRpb25zW2ldW0FTVC5uYW1lXQoJCQkJfQoJCQl9CgkJfSBlbHNlIHsKCQkvLyBUT0RPOiBpbmNhc2UgbGlicmFyaWVzIGFyZW4ndCBzZW50LCBwcmVwcm9jZXNzZWQgbGlicyBhcmUgdXNlZCBoZXJlCgkJCXJldHVybiBhd2FpdCBkb0FjY2Vzc29yKHsKCQkJCS8vIFdPT0hPTyBteSBmaXJzdCBwb2x5ZmlsbAoJCQkJb2JqZWN0OiB7CgkJCQkJbmFtZTogJ2V4cG9ydHMnCgkJCQl9LAoJCQkJcHJvcGVydHk6IHsKCQkJCQluYW1lOiBBU1QubmFtZQoJCQkJfQoJCQl9KQoJCS8qCgkJewoJCQlpZihBU1QubmFtZSA9PSAnY29uc29sZScpIHsKCQkJCWRlYnVnZ2VyCgkJCX0KCQkJaWYoQVNULm5hbWUgPT0gJ0FycmF5JykgewoJCQkJZGVidWdnZXIKCQkJfQoJCQlpZihBU1QubmFtZSA9PSAnc2V0SW50ZXJ2YWwnKSB7CgkJCQlkZWJ1Z2dlcgoJCQl9CgkJCXRocm93IG5ldyBFcnJvcignSWRlbnRpZmllciBub3QgZGVmaW5lZDogJyArIEFTVC5uYW1lKQoJCQkqLwoJCX0KCX0gZWxzZSB7CgkJdGhyb3cgbmV3IEVycm9yKEFTVC50eXBlICsgJzogTm90IGltcGxlbWVudGVkIScpCgl9Cn0KCgphc3luYyBmdW5jdGlvbiBydW5VbmFyeShBU1QsIHJ1bkNvbnRleHQpIHsKCWlmKEFTVC5vcGVyYXRvciA9PSAndm9pZCcpIHsKCQlyZXR1cm4gdm9pZCAoYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1QuYXJndW1lbnRdLCBydW5Db250ZXh0KSkKCX0gZWxzZQoJaWYoQVNULm9wZXJhdG9yID09ICchJykgewoJCXJldHVybiAhKGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNULmFyZ3VtZW50XSwgcnVuQ29udGV4dCkpCgl9IGVsc2UKCWlmKEFTVC5vcGVyYXRvciA9PSAndHlwZW9mJykgewoJCXRyeSB7CgkJCXJ1bkNvbnRleHQuYnViYmxlVXAgPSB0cnVlCgkJCWxldCByZXN1bHQgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVC5hcmd1bWVudF0sIHJ1bkNvbnRleHQpCgkJCXJldHVybiB0eXBlb2YgcmVzdWx0CgkJfSBjYXRjaCAodXApIHsKCQkJaWYodXAubWVzc2FnZS5pbmNsdWRlcygnbm90IGRlZmluZWQnKSkgewoJCQkJcmV0dXJuICd1bmRlZmluZWQnCgkJCX0gZWxzZSB7CgkJCQl0aHJvdyB1cAoJCQl9CgkJfSBmaW5hbGx5IHsKCQkJcnVuQ29udGV4dC5idWJibGVVcCA9IGZhbHNlCgkJfQoJfSBlbHNlCglpZihBU1Qub3BlcmF0b3IgPT0gJy0nKSB7CgkJcmV0dXJuIC0oYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1QuYXJndW1lbnRdLCBydW5Db250ZXh0KSkKCX0gZWxzZSB7CgkJZGVidWdnZXIKCQl0aHJvdyBuZXcgRXJyb3IoQVNULnR5cGUgKyAnOiBOb3QgaW1wbGVtZW50ZWQhJykKCX0KfQoKYXN5bmMgZnVuY3Rpb24gcnVuTG9naWNhbChBU1QsIHJ1bkNvbnRleHQpIHsKCS8vIE1FQU5UIFRPIERPIFRISVMgU09PTkVSCglpZihBU1Qub3BlcmF0b3IgPT0gJyYmJykgewoJCWxldCBsZWZ0ID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1QubGVmdF0sIHJ1bkNvbnRleHQpCgkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCXJldHVybgoJCX0KCQlpZighbGVmdCkgewoJCQlyZXR1cm4gZmFsc2UKCQl9CgkJLy8gbGVmdCA9IHRydWUKCgkJbGV0IHJpZ2h0ID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1QucmlnaHRdLCBydW5Db250ZXh0KQoJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQlyZXR1cm4KCQl9CgkJcmV0dXJuIHJpZ2h0Cgl9IGVsc2UKCWlmKEFTVC5vcGVyYXRvciA9PSAnfHwnKSB7CgkJbGV0IGxlZnQgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVC5sZWZ0XSwgcnVuQ29udGV4dCkKCQlpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQkJcmV0dXJuCgkJfQoJCWlmKGxlZnQpIHsKCQkJcmV0dXJuIHRydWUKCQl9CgkJLy8gbGVmdCA9IGZhbHNlCgkJbGV0IHJpZ2h0ID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1QucmlnaHRdLCBydW5Db250ZXh0KQoJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQlyZXR1cm4KCQl9CgoJCXJldHVybiByaWdodAoJfSBlbHNlIHsKCQl0aHJvdyBuZXcgRXJyb3IoQVNULnR5cGUgKyAnOiBOb3QgaW1wbGVtZW50ZWQ6ICcgKyBBU1Qub3BlcmF0b3IpCgl9Cgp9CgoKCi8vIEJFQ0FVU0UgT0YgVEhFIE5BVFVSRSBPRiBTRUNVUklORyBFVkFMKCkgQlkgQ0hST01FIEVYVEVOU0lPTlMKLy8gICBUSEVSRSdTIExJVFRMRSBJIENBTiBETyBUTyBPUFRJTUlaRSBUSEUgU1RZTEUgT0YgVEhJUyBFVkFMVUFUT1IKLy8gICBFVkVSWSBTWU1CT0wgSU4gSkFWQVNDUklQVCBIQVMgVE8gQkUgSElUIEFHQUlOLgovLyBIT1dFVkVSLCBMSUtFIEFOVFJMIEkgQ0FOIFVTRSAqUkVGTEVDVElPTiBPTiBUSEUgR1JBTU1BUiogVE8gR0VORVJBVEUgQU4KLy8gICBFVkFMVUFUT1IgSU4gVEhFIFNBTUUgTEFOR1VBR0UsIEpVU1QgTElLRSBUSEVSRSBBUkUgVklTSVRPUlMgQU5ECi8vICAgTElTVEVORVJTLCBJIENBTiBNQUtFIEFOIEVWQUxVQVRPUiBETyBUSEUgU0FNRSBUSElORyBDIERPRVMgV0lUSAovLyAgIEFTWU5DIFNUQVRFTUVOVFMgSU4gQkVUV0VFTi4KLy8gVEhJUyBJUyBNQURFIFNJTVBMRVIsIExJS0UgSlVQWVRFUiBLRVJORUxTLCBPTkNFIFRIRVJFJ1MgQU4gRVZBTCgpCi8vICAgSU4gT05FIEZFQVRVUkUgQ09NUExFVEUgTEFOR1VBR0UsIFpNUSBDQU4gVFJBTlNGRVIgRkVBVFVSRVMgQkVUV0VFTgovLyAgIFRXTyBESUZGRVJFTlQgRkVBVFVSRSBTRVRTLCBBIE5BVElWRSBLRVJORUwgQU5EIEEgIk1FVEEtS0VSTkVMIi4KLy8gQlkgQURESU5HIEFOVExSL0xBTkdVQUdFLVNFUlZFUiAoTUlDUk9TT0ZUIExBTkdVQUdFLVNFUlZFUiBXT1VMRCBIQVZFCi8vICAgQkVFTiBUSEUgUklHSFQgQ0hPSUNFIElGIEpVUFlURVIgU1RBUlRFRCBUT0RBWSkgSU5UTyBUSEUgTUlYLCAKLy8gICBJIEJBU0lDQUxMWSBDUkVBVEUgQSAiTUVUQS1LRVJORUwiIElOIEFOWSBMQU5HVUFHRS4gVEhFTiwgSSBVU0UgVEhBVAovLyAgIElOVEVSRkFDRSBUTyBJVEVSQVRFIEFORCBXUklURSBUSEUgQVBJIFRSQU5TTEFUSU9OLCBSRVFVSVJFKCdGUycpIC0+Ci8vICAgQyMgSU1QT1JUIEZJTEVTWVNURU0uCi8vIFdIRU4gVEhFIFRSQU5TTEFUSU9OIElTIERPTkUsIEkgU0hPVUxEIEJFIEFCTEUgVE8gQ09OVkVSVCBMSUtFIEMyUlVTVC4KLy8gICBCRVRXRUVOIE1PUkUgVEhBTiAyIExBTkdVQUdFUyAoUFlUSE9OIC0+IE5PREUpIFVTSU5HIE9OTFkgTUVUQS1QUk9HUkFNTUlORy4KLy8gICBPTkNFIFRIRSBNRVRBLVBST0dSQU1NSU5HIElOVEVSRkFDRVMgQVJFIENPTVBMRVRFRCwgQ09OU1VNUFRJT04gQ0FOIEJFR0lOLgovLyBPYnZpb3VzbHksIEknbSBub3QgdGhlIG9ubHkgb25lIHdvcmtpbmcgb24gdGhpcyBzb3J0IG9mIHRoaW5nLgphc3luYyBmdW5jdGlvbiBydW5CaW5hcnkoQVNULCBydW5Db250ZXh0KSB7CglsZXQgbGVmdCA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNULmxlZnRdLCBydW5Db250ZXh0KQoJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJcmV0dXJuCgl9CgoJbGV0IHJpZ2h0ID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1QucmlnaHRdLCBydW5Db250ZXh0KQoJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJcmV0dXJuCgl9CgoJLy8gTUFUSFMhCglpZihBU1Qub3BlcmF0b3IgPT0gJyonKSB7CgkJcmV0dXJuIGxlZnQgKiByaWdodAoJfSBlbHNlCglpZihBU1Qub3BlcmF0b3IgPT0gJy8nKSB7CgkJcmV0dXJuIGxlZnQgLyByaWdodAoJfSBlbHNlCglpZihBU1Qub3BlcmF0b3IgPT0gJysnKSB7CgkJcmV0dXJuIGxlZnQgKyByaWdodAoJfSBlbHNlCglpZihBU1Qub3BlcmF0b3IgPT0gJy0nKSB7CgkJcmV0dXJuIGxlZnQgLSByaWdodAoJfSBlbHNlCglpZihBU1Qub3BlcmF0b3IgPT0gJyUnKSB7CgkJLy8gVE9ETzogY2Fubm90IG1vZHVsbyBhIGZsb2F0CgkJcmV0dXJuIGxlZnQgJSByaWdodAoJfSBlbHNlCglpZihBU1Qub3BlcmF0b3IgPT0gJ14nKSB7CgkJcmV0dXJuIGxlZnQgXiByaWdodAoJfSBlbHNlIAoJaWYoQVNULm9wZXJhdG9yID09ICc8PScpIHsKCQlyZXR1cm4gbGVmdCA8PSByaWdodAoJfSBlbHNlCglpZihBU1Qub3BlcmF0b3IgPT0gJz49JykgewoJCXJldHVybiBsZWZ0ID49IHJpZ2h0Cgl9IGVsc2UKCWlmKEFTVC5vcGVyYXRvciA9PSAnIT0nKSB7CgkJcmV0dXJuIGxlZnQgIT0gcmlnaHQKCX0gZWxzZQoJaWYoQVNULm9wZXJhdG9yID09ICc9PScpIHsKCQlyZXR1cm4gbGVmdCA9PSByaWdodAoJfSBlbHNlCglpZihBU1Qub3BlcmF0b3IgPT0gJyE9PScpIHsKCQlyZXR1cm4gbGVmdCAhPT0gcmlnaHQKCX0gZWxzZQoJaWYoQVNULm9wZXJhdG9yID09ICc9PT0nKSB7CgkJcmV0dXJuIGxlZnQgPT09IHJpZ2h0Cgl9IGVsc2UKCWlmKEFTVC5vcGVyYXRvciA9PSAnPCcpIHsKCQlyZXR1cm4gbGVmdCA8IHJpZ2h0Cgl9IGVsc2UKCWlmKEFTVC5vcGVyYXRvciA9PSAnPicpIHsKCQlyZXR1cm4gbGVmdCA+IHJpZ2h0Cgl9IGVsc2UgewoJCXRocm93IG5ldyBFcnJvcihBU1QudHlwZSArICc6IE5vdCBpbXBsZW1lbnRlZDogJyArIEFTVC5vcGVyYXRvcikKCX0KfQoKCmFzeW5jIGZ1bmN0aW9uIHJ1blVwZGF0ZShBU1QsIHJ1bkNvbnRleHQpIHsKCWxldCBhcmdWYWwgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW0FTVC5hcmd1bWVudF0sIHJ1bkNvbnRleHQpCglpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKCQlyZXR1cm4KCX0KCglpZihBU1Qub3BlcmF0b3IgPT0gJy0tJykgewoJCWF3YWl0IHJ1bkFzc2lnbm1lbnQoQVNULmFyZ3VtZW50LCB7CiAgICAgIHR5cGU6ICdMaXRlcmFsJywKICAgICAgdmFsdWU6IC0tYXJnVmFsCiAgICB9LCBydW5Db250ZXh0KQoJCWlmKEFTVC5wcmVmaXgpIHsKCQkJcmV0dXJuIGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNULmFyZ3VtZW50XSwgcnVuQ29udGV4dCkKCQl9IGVsc2UgewoJCQlyZXR1cm4gYXJnVmFsCgkJfQoJfSBlbHNlCglpZihBU1Qub3BlcmF0b3IgPT0gJysrJykgewoJCWF3YWl0IHJ1bkFzc2lnbm1lbnQoQVNULmFyZ3VtZW50LCB7CiAgICAgIHR5cGU6ICdMaXRlcmFsJywKICAgICAgdmFsdWU6ICsrYXJnVmFsCiAgICB9LCBydW5Db250ZXh0KQoJCWlmKEFTVC5wcmVmaXgpIHsKCQkJcmV0dXJuIGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbQVNULmFyZ3VtZW50XSwgcnVuQ29udGV4dCkKCQl9IGVsc2UgewoJCQlyZXR1cm4gYXJnVmFsCgkJfQoJfSBlbHNlIHsKCQl0aHJvdyBuZXcgRXJyb3IoQVNULnR5cGUgKyAnOiBOb3QgaW1wbGVtZW50ZWQhJykKCX0KCXJldHVybiBhcmdWYWwKCn0KCgphc3luYyBmdW5jdGlvbiBydW5PYmplY3QoQVNULCBydW5Db250ZXh0KSB7CiAgbGV0IG5ld09iamVjdCA9IHt9CiAgZm9yKGxldCBrID0gMDsgayA8IEFTVC5wcm9wZXJ0aWVzLmxlbmd0aDsgaysrKSB7CiAgICBsZXQgcHJvcCA9IEFTVC5wcm9wZXJ0aWVzW2tdCiAgICBpZihwcm9wLnR5cGUgIT0gJ1Byb3BlcnR5JyB8fCBwcm9wLmtleS50eXBlICE9ICdJZGVudGlmaWVyJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ09iamVjdEV4cHJlc3Npb246IE5vdCBpbXBsZW1lbnRlZCEnKQogICAgfQogICAgLy8gVE9ETzogYWRkIGxhdGUgYmluZGluZwogICAgbmV3T2JqZWN0W3Byb3Aua2V5Lm5hbWVdID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtwcm9wLnZhbHVlXSwgcnVuQ29udGV4dCkKICAgIGlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewogICAgICByZXR1cm4KICAgIH0KICB9CiAgcmV0dXJuIG5ld09iamVjdAp9CgoKCi8vIERPIFZBUklBQkxFIFJFQVNTSUdOTUVOVFMKYXN5bmMgZnVuY3Rpb24gcnVuQXNzaWdubWVudChsZWZ0LCByaWdodCwgcnVuQ29udGV4dCkgewoKICBpZihsZWZ0LnR5cGUgPT0gJ0xpdGVyYWwnKSB7CgkJLy8gY2Fubm90IGFzc2lnbiB2YWx1ZSB0byBwcmltaXRpdmUgdHlwZQoJCXRocm93IG5ldyBFcnJvcignQ2Fubm90IG92ZXJyaWRlIHByaW1pdGl2ZS4nKQoJfQoKCWlmIChsZWZ0LnR5cGUgPT0gJ01lbWJlckV4cHJlc3Npb24nKSB7CgkJbGV0IHBhcmVudCA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbbGVmdC5vYmplY3RdLCBydW5Db250ZXh0KQoJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQlyZXR1cm4KCQl9CgoJCWxldCBwcm9wZXJ0eQoJCWlmKGxlZnQucHJvcGVydHkudHlwZSA9PSAnSWRlbnRpZmllcicpIHsKCQkJcHJvcGVydHkgPSBsZWZ0LnByb3BlcnR5Lm5hbWUKCQl9IGVsc2UgCgkJaWYobGVmdC5wcm9wZXJ0eS50eXBlID09ICdMaXRlcmFsJykgewoJCQlwcm9wZXJ0eSA9IGxlZnQucHJvcGVydHkudmFsdWUKCQl9IGVsc2UgewoJCQlwcm9wZXJ0eSA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbbGVmdC5wcm9wZXJ0eV0sIHJ1bkNvbnRleHQpCgkJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQkJcmV0dXJuCgkJCX0KCQl9CgoJCWxldCByZXN1bHQKCQlpZihyaWdodCkgewoJCQlyZXN1bHQgPSBhd2FpdCBydW5TdGF0ZW1lbnQoMCwgW3JpZ2h0XSwgcnVuQ29udGV4dCkKCQl9IGVsc2UgewoJCQlyZXN1bHQgPSB2b2lkIDAKCQl9CgkJLy8gTEVBSyBBU1NJR05NRU5UIEZPUiBHTE9CQUwgREVCVUdHSU5HPwoJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQlyZXR1cm4KCQl9CgoJCXJ1bkNvbnRleHQuYnViYmxlTWVtYmVyID0gcGFyZW50CgkJcnVuQ29udGV4dC5idWJibGVQcm9wZXJ0eSA9IChydW5Db250ZXh0LmJ1YmJsZVByb3BlcnR5IAoJCQkJPyAocnVuQ29udGV4dC5idWJibGVQcm9wZXJ0eSArICcuJykgOiAnJykgCgkJCQkrIGxlZnQub2JqZWN0Lm5hbWUgKyAnLicgKyBwcm9wZXJ0eQoKCQlpZih0eXBlb2YgcGFyZW50ID09ICdvYmplY3QnICYmIHBhcmVudCAvLyBCVUc6IG51bGwsIHdob29wcwoJCQkJJiYgdHlwZW9mIHBhcmVudC5fYWNjZXNzb3IgIT0gJ3VuZGVmaW5lZCcpIHsKCQkJYXdhaXQgcGFyZW50Ll9hY2Nlc3NvcigwLCBbewoJCQkJdHlwZTogJ0Fzc2lnbm1lbnRFeHByZXNzaW9uJywKCQkJCWxlZnQ6IGxlZnQsCgkJCQlyaWdodDogcmlnaHQsCgkJCX1dLCByZXN1bHQsIHJ1bkNvbnRleHQpCgkJCS8vIFRPRE86IGR1cGxpY2F0ZSBhc3NpZ25tZW50cz8KCQl9CgkJcGFyZW50W3Byb3BlcnR5XSA9IHJlc3VsdAoJCS8vIG5vdGlmeSBjbGllbnRzCgkJcmV0dXJuIHJlc3VsdAoJfSBlbHNlIAoJLy8gVE9ETzogZG9lcyBleHByZXNzaW9uIGV2YWx1YXRlIGV2ZW4gaWYgdGhlcmUgYXNzaWdubWVudCBlcnJvcj8KCS8vIFRPRE86IGhvdyBkb2VzIENob21lIHJvbGwgdGhpcyBiYWNrPyBQcmltaXRpdmVzIG9ubHk/CgkKCWlmKGxlZnQudHlwZSA9PSAnSWRlbnRpZmllcicpIHsKCQlpZihydW5Db250ZXh0LmxvY2FsVmFyaWFibGVzW2xlZnQubmFtZV0gPT0gJ2Z1bmN0aW9uJykgewoJCQl0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBvdmVycmlkZSBmdW5jdGlvbjogJyArIGxlZnQubmFtZSkKCQl9IGVsc2UgaWYgKCFydW5Db250ZXh0LmxvY2FsVmFyaWFibGVzLmhhc093blByb3BlcnR5KGxlZnQubmFtZSkpIHsKCQkJLy8gVE9ETzogTEFaWSwgbm8gdmFyLCBvbmx5IGxldAoJCQlkZWJ1Z2dlcgoJCQl0aHJvdyBuZXcgRXJyb3IoJ1ZhcmlhYmxlIG5vdCBkZWZpbmVkOiAnICsgbGVmdC5uYW1lKQoJCX0gZWxzZSB7CgkJCS8vIFdPVyEgSU1BR0lORSBUSEFUISBTSE9XIFZBUklBQkxFUyBCRUZPUkUgQU5EIEFGVEVSIEFTU0lHTk1FTlQhIEdPT0dMRSBDSFJPTUUgREVCVUdHRVIhCgkJCWxldCByZXN1bHQKCQkJaWYocmlnaHQpIHsKCQkJCXJlc3VsdCA9IGF3YWl0IHJ1blN0YXRlbWVudCgwLCBbcmlnaHRdLCBydW5Db250ZXh0KQoJCQl9IGVsc2UgewoJCQkJcmVzdWx0ID0gdm9pZCAwCgkJCX0KCQkJCS8vIExFQUsgQVNTSUdOTUVOVCBGT1IgR0xPQkFMIERFQlVHR0lORz8KCQkJaWYoYXdhaXQgc2hvdWxkQnViYmxlT3V0KHJ1bkNvbnRleHQpKSB7CgkJCQlyZXR1cm4KCQkJfQoJCQlydW5Db250ZXh0LmxvY2FsRGVjbGFyYXRpb25zW3J1bkNvbnRleHQubG9jYWxEZWNsYXJhdGlvbnMubGVuZ3RoLTFdW2xlZnQubmFtZV0gPSByZXN1bHQKCQkJcnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlc1tsZWZ0Lm5hbWVdID0gdHlwZW9mIHJlc3VsdAoJCQlyZXR1cm4gcmVzdWx0CgkJfQoJfSBlbHNlIHsKCQl0aHJvdyBuZXcgRXJyb3IoJ0Fzc2lnbm1lbnRFeHByZXNzaW9uOiBOb3QgaW1wbGVtZW50ZWQhJykKCX0KfQoKCmFzeW5jIGZ1bmN0aW9uIHJ1bk1lbWJlcihBU1QsIHJ1bkNvbnRleHQpIHsKICBpZighQVNULnByb3BlcnR5KSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ01lbWJlckV4cHJlc3Npb246IE5vdCBpbXBsZW1lbnRlZCEnKQogIH0KICBsZXQgcHJvcGVydHkKICBpZihBU1QucHJvcGVydHkudHlwZSA9PSAnTGl0ZXJhbCcpIHsKICAgIHByb3BlcnR5ID0gQVNULnByb3BlcnR5LnZhbHVlCiAgfSBlbHNlCglpZihBU1QuY29tcHV0ZWQpIHsKICAgIHByb3BlcnR5ID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1QucHJvcGVydHldLCBydW5Db250ZXh0KQoJCWlmKGF3YWl0IHNob3VsZEJ1YmJsZU91dChydW5Db250ZXh0KSkgewoJCQlyZXR1cm4KCQl9Cgl9IGVsc2UgCglpZihBU1QucHJvcGVydHkudHlwZSA9PSAnSWRlbnRpZmllcicpIHsKCQlwcm9wZXJ0eSA9IEFTVC5wcm9wZXJ0eS5uYW1lCgl9IGVsc2UgewoJCWRlYnVnZ2VyCiAgICB0aHJvdyBuZXcgRXJyb3IoJ01lbWJlckV4cHJlc3Npb246IE5vdCBpbXBsZW1lbnRlZCEnKQogIH0KCglsZXQgcGFyZW50ID0gYXdhaXQgcnVuU3RhdGVtZW50KDAsIFtBU1Qub2JqZWN0XSwgcnVuQ29udGV4dCkKICBpZihhd2FpdCBzaG91bGRCdWJibGVPdXQocnVuQ29udGV4dCkpIHsKICAgIHJldHVybiAvLyBidWJibGUgdXAKICB9CgoJcnVuQ29udGV4dC5idWJibGVNZW1iZXIgPSBwYXJlbnQKCXJ1bkNvbnRleHQuYnViYmxlUHJvcGVydHkgPSAocnVuQ29udGV4dC5idWJibGVQcm9wZXJ0eSAKCQkJPyAocnVuQ29udGV4dC5idWJibGVQcm9wZXJ0eSArICcuJykgOiAnJykgCgkJCSsgQVNULm9iamVjdC5uYW1lICsgJy4nICsgcHJvcGVydHkKCiAgaWYodHlwZW9mIHBhcmVudCA9PSAnb2JqZWN0JyAmJiBwYXJlbnQgLy8gQlVHOiBudWxsLCB3aG9vcHMKICAgICYmIHR5cGVvZiBwYXJlbnQuX2FjY2Vzc29yICE9ICd1bmRlZmluZWQnKSB7CgkJaWYodHlwZW9mIHBhcmVudC5fYWNjZXNzb3IgIT0gJ2Z1bmN0aW9uJykgewoJCQlkZWJ1Z2dlcgoJCX0KICAgIHJldHVybiBhd2FpdCBwYXJlbnQuX2FjY2Vzc29yKDAsIFtBU1RdLCBBU1QsIHJ1bkNvbnRleHQpCiAgfQoKICBpZighcGFyZW50IHx8ICghcGFyZW50Lmhhc093blByb3BlcnR5KHByb3BlcnR5KQogICAgJiYgdHlwZW9mIHBhcmVudFtwcm9wZXJ0eV0gPT0gJ3VuZGVmaW5lZCcpKSB7CgkJZGVidWdnZXIKICAgIHRocm93IG5ldyBFcnJvcignTWVtYmVyIGFjY2VzcyBlcnJvcjogJyArIHByb3BlcnR5KQogIH0gZWxzZSB7CiAgICByZXR1cm4gcGFyZW50W3Byb3BlcnR5XQogIH0KfQoKCihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7CiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzKSA6CiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cyddLCBmYWN0b3J5KSA6CiAgKGdsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZmFjdG9yeShnbG9iYWwuYWNvcm4gPSB7fSkpOwp9KSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMpIHsgJ3VzZSBzdHJpY3QnOwoKICAvLyBSZXNlcnZlZCB3b3JkIGxpc3RzIGZvciB2YXJpb3VzIGRpYWxlY3RzIG9mIHRoZSBsYW5ndWFnZQoKICB2YXIgcmVzZXJ2ZWRXb3JkcyA9IHsKICAgIDM6ICJhYnN0cmFjdCBib29sZWFuIGJ5dGUgY2hhciBjbGFzcyBkb3VibGUgZW51bSBleHBvcnQgZXh0ZW5kcyBmaW5hbCBmbG9hdCBnb3RvIGltcGxlbWVudHMgaW1wb3J0IGludCBpbnRlcmZhY2UgbG9uZyBuYXRpdmUgcGFja2FnZSBwcml2YXRlIHByb3RlY3RlZCBwdWJsaWMgc2hvcnQgc3RhdGljIHN1cGVyIHN5bmNocm9uaXplZCB0aHJvd3MgdHJhbnNpZW50IHZvbGF0aWxlIiwKICAgIDU6ICJjbGFzcyBlbnVtIGV4dGVuZHMgc3VwZXIgY29uc3QgZXhwb3J0IGltcG9ydCIsCiAgICA2OiAiZW51bSIsCiAgICBzdHJpY3Q6ICJpbXBsZW1lbnRzIGludGVyZmFjZSBsZXQgcGFja2FnZSBwcml2YXRlIHByb3RlY3RlZCBwdWJsaWMgc3RhdGljIHlpZWxkIiwKICAgIHN0cmljdEJpbmQ6ICJldmFsIGFyZ3VtZW50cyIKICB9OwoKICAvLyBBbmQgdGhlIGtleXdvcmRzCgogIHZhciBlY21hNUFuZExlc3NLZXl3b3JkcyA9ICJicmVhayBjYXNlIGNhdGNoIGNvbnRpbnVlIGRlYnVnZ2VyIGRlZmF1bHQgZG8gZWxzZSBmaW5hbGx5IGZvciBmdW5jdGlvbiBpZiByZXR1cm4gc3dpdGNoIHRocm93IHRyeSB2YXIgd2hpbGUgd2l0aCBudWxsIHRydWUgZmFsc2UgaW5zdGFuY2VvZiB0eXBlb2Ygdm9pZCBkZWxldGUgbmV3IGluIHRoaXMiOwoKICB2YXIga2V5d29yZHMkMSA9IHsKICAgIDU6IGVjbWE1QW5kTGVzc0tleXdvcmRzLAogICAgIjVtb2R1bGUiOiBlY21hNUFuZExlc3NLZXl3b3JkcyArICIgZXhwb3J0IGltcG9ydCIsCiAgICA2OiBlY21hNUFuZExlc3NLZXl3b3JkcyArICIgY29uc3QgY2xhc3MgZXh0ZW5kcyBleHBvcnQgaW1wb3J0IHN1cGVyIgogIH07CgogIHZhciBrZXl3b3JkUmVsYXRpb25hbE9wZXJhdG9yID0gL15pbihzdGFuY2VvZik/JC87CgogIC8vICMjIENoYXJhY3RlciBjYXRlZ29yaWVzCgogIC8vIEJpZyB1Z2x5IHJlZ3VsYXIgZXhwcmVzc2lvbnMgdGhhdCBtYXRjaCBjaGFyYWN0ZXJzIGluIHRoZQogIC8vIHdoaXRlc3BhY2UsIGlkZW50aWZpZXIsIGFuZCBpZGVudGlmaWVyLXN0YXJ0IGNhdGVnb3JpZXMuIFRoZXNlCiAgLy8gYXJlIG9ubHkgYXBwbGllZCB3aGVuIGEgY2hhcmFjdGVyIGlzIGZvdW5kIHRvIGFjdHVhbGx5IGhhdmUgYQogIC8vIGNvZGUgcG9pbnQgYWJvdmUgMTI4LgogIC8vIEdlbmVyYXRlZCBieSBgYmluL2dlbmVyYXRlLWlkZW50aWZpZXItcmVnZXguanNgLgogIHZhciBub25BU0NJSWlkZW50aWZpZXJTdGFydENoYXJzID0gIlx4YWFceGI1XHhiYVx4YzAtXHhkNlx4ZDgtXHhmNlx4ZjgtXHUwMmMxXHUwMmM2LVx1MDJkMVx1MDJlMC1cdTAyZTRcdTAyZWNcdTAyZWVcdTAzNzAtXHUwMzc0XHUwMzc2XHUwMzc3XHUwMzdhLVx1MDM3ZFx1MDM3Zlx1MDM4Nlx1MDM4OC1cdTAzOGFcdTAzOGNcdTAzOGUtXHUwM2ExXHUwM2EzLVx1MDNmNVx1MDNmNy1cdTA0ODFcdTA0OGEtXHUwNTJmXHUwNTMxLVx1MDU1Nlx1MDU1OVx1MDU2MC1cdTA1ODhcdTA1ZDAtXHUwNWVhXHUwNWVmLVx1MDVmMlx1MDYyMC1cdTA2NGFcdTA2NmVcdTA2NmZcdTA2NzEtXHUwNmQzXHUwNmQ1XHUwNmU1XHUwNmU2XHUwNmVlXHUwNmVmXHUwNmZhLVx1MDZmY1x1MDZmZlx1MDcxMFx1MDcxMi1cdTA3MmZcdTA3NGQtXHUwN2E1XHUwN2IxXHUwN2NhLVx1MDdlYVx1MDdmNFx1MDdmNVx1MDdmYVx1MDgwMC1cdTA4MTVcdTA4MWFcdTA4MjRcdTA4MjhcdTA4NDAtXHUwODU4XHUwODYwLVx1MDg2YVx1MDg3MC1cdTA4ODdcdTA4ODktXHUwODhlXHUwOGEwLVx1MDhjOVx1MDkwNC1cdTA5MzlcdTA5M2RcdTA5NTBcdTA5NTgtXHUwOTYxXHUwOTcxLVx1MDk4MFx1MDk4NS1cdTA5OGNcdTA5OGZcdTA5OTBcdTA5OTMtXHUwOWE4XHUwOWFhLVx1MDliMFx1MDliMlx1MDliNi1cdTA5YjlcdTA5YmRcdTA5Y2VcdTA5ZGNcdTA5ZGRcdTA5ZGYtXHUwOWUxXHUwOWYwXHUwOWYxXHUwOWZjXHUwYTA1LVx1MGEwYVx1MGEwZlx1MGExMFx1MGExMy1cdTBhMjhcdTBhMmEtXHUwYTMwXHUwYTMyXHUwYTMzXHUwYTM1XHUwYTM2XHUwYTM4XHUwYTM5XHUwYTU5LVx1MGE1Y1x1MGE1ZVx1MGE3Mi1cdTBhNzRcdTBhODUtXHUwYThkXHUwYThmLVx1MGE5MVx1MGE5My1cdTBhYThcdTBhYWEtXHUwYWIwXHUwYWIyXHUwYWIzXHUwYWI1LVx1MGFiOVx1MGFiZFx1MGFkMFx1MGFlMFx1MGFlMVx1MGFmOVx1MGIwNS1cdTBiMGNcdTBiMGZcdTBiMTBcdTBiMTMtXHUwYjI4XHUwYjJhLVx1MGIzMFx1MGIzMlx1MGIzM1x1MGIzNS1cdTBiMzlcdTBiM2RcdTBiNWNcdTBiNWRcdTBiNWYtXHUwYjYxXHUwYjcxXHUwYjgzXHUwYjg1LVx1MGI4YVx1MGI4ZS1cdTBiOTBcdTBiOTItXHUwYjk1XHUwYjk5XHUwYjlhXHUwYjljXHUwYjllXHUwYjlmXHUwYmEzXHUwYmE0XHUwYmE4LVx1MGJhYVx1MGJhZS1cdTBiYjlcdTBiZDBcdTBjMDUtXHUwYzBjXHUwYzBlLVx1MGMxMFx1MGMxMi1cdTBjMjhcdTBjMmEtXHUwYzM5XHUwYzNkXHUwYzU4LVx1MGM1YVx1MGM1ZFx1MGM2MFx1MGM2MVx1MGM4MFx1MGM4NS1cdTBjOGNcdTBjOGUtXHUwYzkwXHUwYzkyLVx1MGNhOFx1MGNhYS1cdTBjYjNcdTBjYjUtXHUwY2I5XHUwY2JkXHUwY2RkXHUwY2RlXHUwY2UwXHUwY2UxXHUwY2YxXHUwY2YyXHUwZDA0LVx1MGQwY1x1MGQwZS1cdTBkMTBcdTBkMTItXHUwZDNhXHUwZDNkXHUwZDRlXHUwZDU0LVx1MGQ1Nlx1MGQ1Zi1cdTBkNjFcdTBkN2EtXHUwZDdmXHUwZDg1LVx1MGQ5Nlx1MGQ5YS1cdTBkYjFcdTBkYjMtXHUwZGJiXHUwZGJkXHUwZGMwLVx1MGRjNlx1MGUwMS1cdTBlMzBcdTBlMzJcdTBlMzNcdTBlNDAtXHUwZTQ2XHUwZTgxXHUwZTgyXHUwZTg0XHUwZTg2LVx1MGU4YVx1MGU4Yy1cdTBlYTNcdTBlYTVcdTBlYTctXHUwZWIwXHUwZWIyXHUwZWIzXHUwZWJkXHUwZWMwLVx1MGVjNFx1MGVjNlx1MGVkYy1cdTBlZGZcdTBmMDBcdTBmNDAtXHUwZjQ3XHUwZjQ5LVx1MGY2Y1x1MGY4OC1cdTBmOGNcdTEwMDAtXHUxMDJhXHUxMDNmXHUxMDUwLVx1MTA1NVx1MTA1YS1cdTEwNWRcdTEwNjFcdTEwNjVcdTEwNjZcdTEwNmUtXHUxMDcwXHUxMDc1LVx1MTA4MVx1MTA4ZVx1MTBhMC1cdTEwYzVcdTEwYzdcdTEwY2RcdTEwZDAtXHUxMGZhXHUxMGZjLVx1MTI0OFx1MTI0YS1cdTEyNGRcdTEyNTAtXHUxMjU2XHUxMjU4XHUxMjVhLVx1MTI1ZFx1MTI2MC1cdTEyODhcdTEyOGEtXHUxMjhkXHUxMjkwLVx1MTJiMFx1MTJiMi1cdTEyYjVcdTEyYjgtXHUxMmJlXHUxMmMwXHUxMmMyLVx1MTJjNVx1MTJjOC1cdTEyZDZcdTEyZDgtXHUxMzEwXHUxMzEyLVx1MTMxNVx1MTMxOC1cdTEzNWFcdTEzODAtXHUxMzhmXHUxM2EwLVx1MTNmNVx1MTNmOC1cdTEzZmRcdTE0MDEtXHUxNjZjXHUxNjZmLVx1MTY3Zlx1MTY4MS1cdTE2OWFcdTE2YTAtXHUxNmVhXHUxNmVlLVx1MTZmOFx1MTcwMC1cdTE3MTFcdTE3MWYtXHUxNzMxXHUxNzQwLVx1MTc1MVx1MTc2MC1cdTE3NmNcdTE3NmUtXHUxNzcwXHUxNzgwLVx1MTdiM1x1MTdkN1x1MTdkY1x1MTgyMC1cdTE4NzhcdTE4ODAtXHUxOGE4XHUxOGFhXHUxOGIwLVx1MThmNVx1MTkwMC1cdTE5MWVcdTE5NTAtXHUxOTZkXHUxOTcwLVx1MTk3NFx1MTk4MC1cdTE5YWJcdTE5YjAtXHUxOWM5XHUxYTAwLVx1MWExNlx1MWEyMC1cdTFhNTRcdTFhYTdcdTFiMDUtXHUxYjMzXHUxYjQ1LVx1MWI0Y1x1MWI4My1cdTFiYTBcdTFiYWVcdTFiYWZcdTFiYmEtXHUxYmU1XHUxYzAwLVx1MWMyM1x1MWM0ZC1cdTFjNGZcdTFjNWEtXHUxYzdkXHUxYzgwLVx1MWM4OFx1MWM5MC1cdTFjYmFcdTFjYmQtXHUxY2JmXHUxY2U5LVx1MWNlY1x1MWNlZS1cdTFjZjNcdTFjZjVcdTFjZjZcdTFjZmFcdTFkMDAtXHUxZGJmXHUxZTAwLVx1MWYxNVx1MWYxOC1cdTFmMWRcdTFmMjAtXHUxZjQ1XHUxZjQ4LVx1MWY0ZFx1MWY1MC1cdTFmNTdcdTFmNTlcdTFmNWJcdTFmNWRcdTFmNWYtXHUxZjdkXHUxZjgwLVx1MWZiNFx1MWZiNi1cdTFmYmNcdTFmYmVcdTFmYzItXHUxZmM0XHUxZmM2LVx1MWZjY1x1MWZkMC1cdTFmZDNcdTFmZDYtXHUxZmRiXHUxZmUwLVx1MWZlY1x1MWZmMi1cdTFmZjRcdTFmZjYtXHUxZmZjXHUyMDcxXHUyMDdmXHUyMDkwLVx1MjA5Y1x1MjEwMlx1MjEwN1x1MjEwYS1cdTIxMTNcdTIxMTVcdTIxMTgtXHUyMTFkXHUyMTI0XHUyMTI2XHUyMTI4XHUyMTJhLVx1MjEzOVx1MjEzYy1cdTIxM2ZcdTIxNDUtXHUyMTQ5XHUyMTRlXHUyMTYwLVx1MjE4OFx1MmMwMC1cdTJjZTRcdTJjZWItXHUyY2VlXHUyY2YyXHUyY2YzXHUyZDAwLVx1MmQyNVx1MmQyN1x1MmQyZFx1MmQzMC1cdTJkNjdcdTJkNmZcdTJkODAtXHUyZDk2XHUyZGEwLVx1MmRhNlx1MmRhOC1cdTJkYWVcdTJkYjAtXHUyZGI2XHUyZGI4LVx1MmRiZVx1MmRjMC1cdTJkYzZcdTJkYzgtXHUyZGNlXHUyZGQwLVx1MmRkNlx1MmRkOC1cdTJkZGVcdTMwMDUtXHUzMDA3XHUzMDIxLVx1MzAyOVx1MzAzMS1cdTMwMzVcdTMwMzgtXHUzMDNjXHUzMDQxLVx1MzA5Nlx1MzA5Yi1cdTMwOWZcdTMwYTEtXHUzMGZhXHUzMGZjLVx1MzBmZlx1MzEwNS1cdTMxMmZcdTMxMzEtXHUzMThlXHUzMWEwLVx1MzFiZlx1MzFmMC1cdTMxZmZcdTM0MDAtXHU0ZGJmXHU0ZTAwLVx1YTQ4Y1x1YTRkMC1cdWE0ZmRcdWE1MDAtXHVhNjBjXHVhNjEwLVx1YTYxZlx1YTYyYVx1YTYyYlx1YTY0MC1cdWE2NmVcdWE2N2YtXHVhNjlkXHVhNmEwLVx1YTZlZlx1YTcxNy1cdWE3MWZcdWE3MjItXHVhNzg4XHVhNzhiLVx1YTdjYVx1YTdkMFx1YTdkMVx1YTdkM1x1YTdkNS1cdWE3ZDlcdWE3ZjItXHVhODAxXHVhODAzLVx1YTgwNVx1YTgwNy1cdWE4MGFcdWE4MGMtXHVhODIyXHVhODQwLVx1YTg3M1x1YTg4Mi1cdWE4YjNcdWE4ZjItXHVhOGY3XHVhOGZiXHVhOGZkXHVhOGZlXHVhOTBhLVx1YTkyNVx1YTkzMC1cdWE5NDZcdWE5NjAtXHVhOTdjXHVhOTg0LVx1YTliMlx1YTljZlx1YTllMC1cdWE5ZTRcdWE5ZTYtXHVhOWVmXHVhOWZhLVx1YTlmZVx1YWEwMC1cdWFhMjhcdWFhNDAtXHVhYTQyXHVhYTQ0LVx1YWE0Ylx1YWE2MC1cdWFhNzZcdWFhN2FcdWFhN2UtXHVhYWFmXHVhYWIxXHVhYWI1XHVhYWI2XHVhYWI5LVx1YWFiZFx1YWFjMFx1YWFjMlx1YWFkYi1cdWFhZGRcdWFhZTAtXHVhYWVhXHVhYWYyLVx1YWFmNFx1YWIwMS1cdWFiMDZcdWFiMDktXHVhYjBlXHVhYjExLVx1YWIxNlx1YWIyMC1cdWFiMjZcdWFiMjgtXHVhYjJlXHVhYjMwLVx1YWI1YVx1YWI1Yy1cdWFiNjlcdWFiNzAtXHVhYmUyXHVhYzAwLVx1ZDdhM1x1ZDdiMC1cdWQ3YzZcdWQ3Y2ItXHVkN2ZiXHVmOTAwLVx1ZmE2ZFx1ZmE3MC1cdWZhZDlcdWZiMDAtXHVmYjA2XHVmYjEzLVx1ZmIxN1x1ZmIxZFx1ZmIxZi1cdWZiMjhcdWZiMmEtXHVmYjM2XHVmYjM4LVx1ZmIzY1x1ZmIzZVx1ZmI0MFx1ZmI0MVx1ZmI0M1x1ZmI0NFx1ZmI0Ni1cdWZiYjFcdWZiZDMtXHVmZDNkXHVmZDUwLVx1ZmQ4Zlx1ZmQ5Mi1cdWZkYzdcdWZkZjAtXHVmZGZiXHVmZTcwLVx1ZmU3NFx1ZmU3Ni1cdWZlZmNcdWZmMjEtXHVmZjNhXHVmZjQxLVx1ZmY1YVx1ZmY2Ni1cdWZmYmVcdWZmYzItXHVmZmM3XHVmZmNhLVx1ZmZjZlx1ZmZkMi1cdWZmZDdcdWZmZGEtXHVmZmRjIjsKICB2YXIgbm9uQVNDSUlpZGVudGlmaWVyQ2hhcnMgPSAiXHUyMDBjXHUyMDBkXHhiN1x1MDMwMC1cdTAzNmZcdTAzODdcdTA0ODMtXHUwNDg3XHUwNTkxLVx1MDViZFx1MDViZlx1MDVjMVx1MDVjMlx1MDVjNFx1MDVjNVx1MDVjN1x1MDYxMC1cdTA2MWFcdTA2NGItXHUwNjY5XHUwNjcwXHUwNmQ2LVx1MDZkY1x1MDZkZi1cdTA2ZTRcdTA2ZTdcdTA2ZThcdTA2ZWEtXHUwNmVkXHUwNmYwLVx1MDZmOVx1MDcxMVx1MDczMC1cdTA3NGFcdTA3YTYtXHUwN2IwXHUwN2MwLVx1MDdjOVx1MDdlYi1cdTA3ZjNcdTA3ZmRcdTA4MTYtXHUwODE5XHUwODFiLVx1MDgyM1x1MDgyNS1cdTA4MjdcdTA4MjktXHUwODJkXHUwODU5LVx1MDg1Ylx1MDg5OC1cdTA4OWZcdTA4Y2EtXHUwOGUxXHUwOGUzLVx1MDkwM1x1MDkzYS1cdTA5M2NcdTA5M2UtXHUwOTRmXHUwOTUxLVx1MDk1N1x1MDk2Mlx1MDk2M1x1MDk2Ni1cdTA5NmZcdTA5ODEtXHUwOTgzXHUwOWJjXHUwOWJlLVx1MDljNFx1MDljN1x1MDljOFx1MDljYi1cdTA5Y2RcdTA5ZDdcdTA5ZTJcdTA5ZTNcdTA5ZTYtXHUwOWVmXHUwOWZlXHUwYTAxLVx1MGEwM1x1MGEzY1x1MGEzZS1cdTBhNDJcdTBhNDdcdTBhNDhcdTBhNGItXHUwYTRkXHUwYTUxXHUwYTY2LVx1MGE3MVx1MGE3NVx1MGE4MS1cdTBhODNcdTBhYmNcdTBhYmUtXHUwYWM1XHUwYWM3LVx1MGFjOVx1MGFjYi1cdTBhY2RcdTBhZTJcdTBhZTNcdTBhZTYtXHUwYWVmXHUwYWZhLVx1MGFmZlx1MGIwMS1cdTBiMDNcdTBiM2NcdTBiM2UtXHUwYjQ0XHUwYjQ3XHUwYjQ4XHUwYjRiLVx1MGI0ZFx1MGI1NS1cdTBiNTdcdTBiNjJcdTBiNjNcdTBiNjYtXHUwYjZmXHUwYjgyXHUwYmJlLVx1MGJjMlx1MGJjNi1cdTBiYzhcdTBiY2EtXHUwYmNkXHUwYmQ3XHUwYmU2LVx1MGJlZlx1MGMwMC1cdTBjMDRcdTBjM2NcdTBjM2UtXHUwYzQ0XHUwYzQ2LVx1MGM0OFx1MGM0YS1cdTBjNGRcdTBjNTVcdTBjNTZcdTBjNjJcdTBjNjNcdTBjNjYtXHUwYzZmXHUwYzgxLVx1MGM4M1x1MGNiY1x1MGNiZS1cdTBjYzRcdTBjYzYtXHUwY2M4XHUwY2NhLVx1MGNjZFx1MGNkNVx1MGNkNlx1MGNlMlx1MGNlM1x1MGNlNi1cdTBjZWZcdTBkMDAtXHUwZDAzXHUwZDNiXHUwZDNjXHUwZDNlLVx1MGQ0NFx1MGQ0Ni1cdTBkNDhcdTBkNGEtXHUwZDRkXHUwZDU3XHUwZDYyXHUwZDYzXHUwZDY2LVx1MGQ2Zlx1MGQ4MS1cdTBkODNcdTBkY2FcdTBkY2YtXHUwZGQ0XHUwZGQ2XHUwZGQ4LVx1MGRkZlx1MGRlNi1cdTBkZWZcdTBkZjJcdTBkZjNcdTBlMzFcdTBlMzQtXHUwZTNhXHUwZTQ3LVx1MGU0ZVx1MGU1MC1cdTBlNTlcdTBlYjFcdTBlYjQtXHUwZWJjXHUwZWM4LVx1MGVjZFx1MGVkMC1cdTBlZDlcdTBmMThcdTBmMTlcdTBmMjAtXHUwZjI5XHUwZjM1XHUwZjM3XHUwZjM5XHUwZjNlXHUwZjNmXHUwZjcxLVx1MGY4NFx1MGY4Nlx1MGY4N1x1MGY4ZC1cdTBmOTdcdTBmOTktXHUwZmJjXHUwZmM2XHUxMDJiLVx1MTAzZVx1MTA0MC1cdTEwNDlcdTEwNTYtXHUxMDU5XHUxMDVlLVx1MTA2MFx1MTA2Mi1cdTEwNjRcdTEwNjctXHUxMDZkXHUxMDcxLVx1MTA3NFx1MTA4Mi1cdTEwOGRcdTEwOGYtXHUxMDlkXHUxMzVkLVx1MTM1Zlx1MTM2OS1cdTEzNzFcdTE3MTItXHUxNzE1XHUxNzMyLVx1MTczNFx1MTc1Mlx1MTc1M1x1MTc3Mlx1MTc3M1x1MTdiNC1cdTE3ZDNcdTE3ZGRcdTE3ZTAtXHUxN2U5XHUxODBiLVx1MTgwZFx1MTgwZi1cdTE4MTlcdTE4YTlcdTE5MjAtXHUxOTJiXHUxOTMwLVx1MTkzYlx1MTk0Ni1cdTE5NGZcdTE5ZDAtXHUxOWRhXHUxYTE3LVx1MWExYlx1MWE1NS1cdTFhNWVcdTFhNjAtXHUxYTdjXHUxYTdmLVx1MWE4OVx1MWE5MC1cdTFhOTlcdTFhYjAtXHUxYWJkXHUxYWJmLVx1MWFjZVx1MWIwMC1cdTFiMDRcdTFiMzQtXHUxYjQ0XHUxYjUwLVx1MWI1OVx1MWI2Yi1cdTFiNzNcdTFiODAtXHUxYjgyXHUxYmExLVx1MWJhZFx1MWJiMC1cdTFiYjlcdTFiZTYtXHUxYmYzXHUxYzI0LVx1MWMzN1x1MWM0MC1cdTFjNDlcdTFjNTAtXHUxYzU5XHUxY2QwLVx1MWNkMlx1MWNkNC1cdTFjZThcdTFjZWRcdTFjZjRcdTFjZjctXHUxY2Y5XHUxZGMwLVx1MWRmZlx1MjAzZlx1MjA0MFx1MjA1NFx1MjBkMC1cdTIwZGNcdTIwZTFcdTIwZTUtXHUyMGYwXHUyY2VmLVx1MmNmMVx1MmQ3Zlx1MmRlMC1cdTJkZmZcdTMwMmEtXHUzMDJmXHUzMDk5XHUzMDlhXHVhNjIwLVx1YTYyOVx1YTY2Zlx1YTY3NC1cdWE2N2RcdWE2OWVcdWE2OWZcdWE2ZjBcdWE2ZjFcdWE4MDJcdWE4MDZcdWE4MGJcdWE4MjMtXHVhODI3XHVhODJjXHVhODgwXHVhODgxXHVhOGI0LVx1YThjNVx1YThkMC1cdWE4ZDlcdWE4ZTAtXHVhOGYxXHVhOGZmLVx1YTkwOVx1YTkyNi1cdWE5MmRcdWE5NDctXHVhOTUzXHVhOTgwLVx1YTk4M1x1YTliMy1cdWE5YzBcdWE5ZDAtXHVhOWQ5XHVhOWU1XHVhOWYwLVx1YTlmOVx1YWEyOS1cdWFhMzZcdWFhNDNcdWFhNGNcdWFhNGRcdWFhNTAtXHVhYTU5XHVhYTdiLVx1YWE3ZFx1YWFiMFx1YWFiMi1cdWFhYjRcdWFhYjdcdWFhYjhcdWFhYmVcdWFhYmZcdWFhYzFcdWFhZWItXHVhYWVmXHVhYWY1XHVhYWY2XHVhYmUzLVx1YWJlYVx1YWJlY1x1YWJlZFx1YWJmMC1cdWFiZjlcdWZiMWVcdWZlMDAtXHVmZTBmXHVmZTIwLVx1ZmUyZlx1ZmUzM1x1ZmUzNFx1ZmU0ZC1cdWZlNGZcdWZmMTAtXHVmZjE5XHVmZjNmIjsKCiAgdmFyIG5vbkFTQ0lJaWRlbnRpZmllclN0YXJ0ID0gbmV3IFJlZ0V4cCgiWyIgKyBub25BU0NJSWlkZW50aWZpZXJTdGFydENoYXJzICsgIl0iKTsKICB2YXIgbm9uQVNDSUlpZGVudGlmaWVyID0gbmV3IFJlZ0V4cCgiWyIgKyBub25BU0NJSWlkZW50aWZpZXJTdGFydENoYXJzICsgbm9uQVNDSUlpZGVudGlmaWVyQ2hhcnMgKyAiXSIpOwoKICBub25BU0NJSWlkZW50aWZpZXJTdGFydENoYXJzID0gbm9uQVNDSUlpZGVudGlmaWVyQ2hhcnMgPSBudWxsOwoKICAvLyBUaGVzZSBhcmUgYSBydW4tbGVuZ3RoIGFuZCBvZmZzZXQgZW5jb2RlZCByZXByZXNlbnRhdGlvbiBvZiB0aGUKICAvLyA+MHhmZmZmIGNvZGUgcG9pbnRzIHRoYXQgYXJlIGEgdmFsaWQgcGFydCBvZiBpZGVudGlmaWVycy4gVGhlCiAgLy8gb2Zmc2V0IHN0YXJ0cyBhdCAweDEwMDAwLCBhbmQgZWFjaCBwYWlyIG9mIG51bWJlcnMgcmVwcmVzZW50cyBhbgogIC8vIG9mZnNldCB0byB0aGUgbmV4dCByYW5nZSwgYW5kIHRoZW4gYSBzaXplIG9mIHRoZSByYW5nZS4gVGhleSB3ZXJlCiAgLy8gZ2VuZXJhdGVkIGJ5IGJpbi9nZW5lcmF0ZS1pZGVudGlmaWVyLXJlZ2V4LmpzCgogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21tYS1zcGFjaW5nCiAgdmFyIGFzdHJhbElkZW50aWZpZXJTdGFydENvZGVzID0gWzAsMTEsMiwyNSwyLDE4LDIsMSwyLDE0LDMsMTMsMzUsMTIyLDcwLDUyLDI2OCwyOCw0LDQ4LDQ4LDMxLDE0LDI5LDYsMzcsMTEsMjksMywzNSw1LDcsMiw0LDQzLDE1NywxOSwzNSw1LDM1LDUsMzksOSw1MSwxMywxMCwyLDE0LDIsNiwyLDEsMiwxMCwyLDE0LDIsNiwyLDEsNjgsMzEwLDEwLDIxLDExLDcsMjUsNSwyLDQxLDIsOCw3MCw1LDMsMCwyLDQzLDIsMSw0LDAsMywyMiwxMSwyMiwxMCwzMCw2NiwxOCwyLDEsMTEsMjEsMTEsMjUsNzEsNTUsNywxLDY1LDAsMTYsMywyLDIsMiwyOCw0MywyOCw0LDI4LDM2LDcsMiwyNywyOCw1MywxMSwyMSwxMSwxOCwxNCwxNywxMTEsNzIsNTYsNTAsMTQsNTAsMTQsMzUsMzQ5LDQxLDcsMSw3OSwyOCwxMSwwLDksMjEsNDMsMTcsNDcsMjAsMjgsMjIsMTMsNTIsNTgsMSwzLDAsMTQsNDQsMzMsMjQsMjcsMzUsMzAsMCwzLDAsOSwzNCw0LDAsMTMsNDcsMTUsMywyMiwwLDIsMCwzNiwxNywyLDI0LDg1LDYsMiwwLDIsMywyLDE0LDIsOSw4LDQ2LDM5LDcsMywxLDMsMjEsMiw2LDIsMSwyLDQsNCwwLDE5LDAsMTMsNCwxNTksNTIsMTksMywyMSwyLDMxLDQ3LDIxLDEsMiwwLDE4NSw0Niw0MiwzLDM3LDQ3LDIxLDAsNjAsNDIsMTQsMCw3MiwyNiwzOCw2LDE4Niw0MywxMTcsNjMsMzIsNywzLDAsMyw3LDIsMSwyLDIzLDE2LDAsMiwwLDk1LDcsMywzOCwxNywwLDIsMCwyOSwwLDExLDM5LDgsMCwyMiwwLDEyLDQ1LDIwLDAsMTksNzIsMjY0LDgsMiwzNiwxOCwwLDUwLDI5LDExMyw2LDIsMSwyLDM3LDIyLDAsMjYsNSwyLDEsMiwzMSwxNSwwLDMyOCwxOCwxOTAsMCw4MCw5MjEsMTAzLDExMCwxOCwxOTUsMjYzNyw5NiwxNiwxMDcwLDQwNTAsNTgyLDg2MzQsNTY4LDgsMzAsMTgsNzgsMTgsMjksMTksNDcsMTcsMywzMiwyMCw2LDE4LDY4OSw2MywxMjksNzQsNiwwLDY3LDEyLDY1LDEsMiwwLDI5LDYxMzUsOSwxMjM3LDQzLDgsODkzNiwzLDIsNiwyLDEsMiwyOTAsNDYsMiwxOCwzLDksMzk1LDIzMDksMTA2LDYsMTIsNCw4LDgsOSw1OTkxLDg0LDIsNzAsMiwxLDMsMCwzLDEsMywzLDIsMTEsMiwwLDIsNiwyLDY0LDIsMywzLDcsMiw2LDIsMjcsMiwzLDIsNCwyLDAsNCw2LDIsMzM5LDMsMjQsMiwyNCwyLDMwLDIsMjQsMiwzMCwyLDI0LDIsMzAsMiwyNCwyLDMwLDIsMjQsMiw3LDE4NDUsMzAsNDgyLDQ0LDExLDYsMTcsMCwzMjIsMjksMTksNDMsMTI2OSw2LDIsMywyLDEsMiwxNCwyLDE5Niw2MCw2Nyw4LDAsMTIwNSwzLDIsMjYsMiwxLDIsMCwzLDAsMiw5LDIsMywyLDAsMiwwLDcsMCw1LDAsMiwwLDIsMCwyLDIsMiwxLDIsMCwzLDAsMiwwLDIsMCwyLDAsMiwwLDIsMSwyLDAsMywzLDIsNiwyLDMsMiwzLDIsMCwyLDksMiwxNiw2LDIsMiw0LDIsMTYsNDQyMSw0MjcxOSwzMyw0MTUyLDgsMjIxLDMsNTc2MSwxNSw3NDcyLDMxMDQsNTQxLDE1MDcsNDkzOF07CgogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21tYS1zcGFjaW5nCiAgdmFyIGFzdHJhbElkZW50aWZpZXJDb2RlcyA9IFs1MDksMCwyMjcsMCwxNTAsNCwyOTQsOSwxMzY4LDIsMiwxLDYsMyw0MSwyLDUsMCwxNjYsMSw1NzQsMyw5LDksMzcwLDEsMTU0LDEwLDUwLDMsMTIzLDIsNTQsMTQsMzIsMTAsMywxLDExLDMsNDYsMTAsOCwwLDQ2LDksNywyLDM3LDEzLDIsOSw2LDEsNDUsMCwxMywyLDQ5LDEzLDksMywyLDExLDgzLDExLDcsMCwxNjEsMTEsNiw5LDcsMyw1NiwxLDIsNiwzLDEsMywyLDEwLDAsMTEsMSwzLDYsNCw0LDE5MywxNywxMCw5LDUsMCw4MiwxOSwxMyw5LDIxNCw2LDMsOCwyOCwxLDgzLDE2LDE2LDksODIsMTIsOSw5LDg0LDE0LDUsOSwyNDMsMTQsMTY2LDksNzEsNSwyLDEsMywzLDIsMCwyLDEsMTMsOSwxMjAsNiwzLDYsNCwwLDI5LDksNDEsNiwyLDMsOSwwLDEwLDEwLDQ3LDE1LDQwNiw3LDIsNywxNyw5LDU3LDIxLDIsMTMsMTIzLDUsNCwwLDIsMSwyLDYsMiwwLDksOSw0OSw0LDIsMSwyLDQsOSw5LDMzMCwzLDE5MzA2LDksODcsOSwzOSw0LDYwLDYsMjYsOSwxMDE0LDAsMiw1NCw4LDMsODIsMCwxMiwxLDE5NjI4LDEsNDcwNiw0NSwzLDIyLDU0Myw0LDQsNSw5LDcsMyw2LDMxLDMsMTQ5LDIsMTQxOCw0OSw1MTMsNTQsNSw0OSw5LDAsMTUsMCwyMyw0LDIsMTQsMTM2MSw2LDIsMTYsMyw2LDIsMSwyLDQsMjYyLDYsMTAsOSwzNTcsMCw2MiwxMywxNDk1LDYsMTEwLDYsNiw5LDQ3NTksOSw3ODc3MTksMjM5XTsKCiAgLy8gVGhpcyBoYXMgYSBjb21wbGV4aXR5IGxpbmVhciB0byB0aGUgdmFsdWUgb2YgdGhlIGNvZGUuIFRoZQogIC8vIGFzc3VtcHRpb24gaXMgdGhhdCBsb29raW5nIHVwIGFzdHJhbCBpZGVudGlmaWVyIGNoYXJhY3RlcnMgaXMKICAvLyByYXJlLgogIGZ1bmN0aW9uIGlzSW5Bc3RyYWxTZXQoY29kZSwgc2V0KSB7CiAgICB2YXIgcG9zID0gMHgxMDAwMDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2V0Lmxlbmd0aDsgaSArPSAyKSB7CiAgICAgIHBvcyArPSBzZXRbaV07CiAgICAgIGlmIChwb3MgPiBjb2RlKSB7IHJldHVybiBmYWxzZSB9CiAgICAgIHBvcyArPSBzZXRbaSArIDFdOwogICAgICBpZiAocG9zID49IGNvZGUpIHsgcmV0dXJuIHRydWUgfQogICAgfQogIH0KCiAgLy8gVGVzdCB3aGV0aGVyIGEgZ2l2ZW4gY2hhcmFjdGVyIGNvZGUgc3RhcnRzIGFuIGlkZW50aWZpZXIuCgogIGZ1bmN0aW9uIGlzSWRlbnRpZmllclN0YXJ0KGNvZGUsIGFzdHJhbCkgewogICAgaWYgKGNvZGUgPCA2NSkgeyByZXR1cm4gY29kZSA9PT0gMzYgfQogICAgaWYgKGNvZGUgPCA5MSkgeyByZXR1cm4gdHJ1ZSB9CiAgICBpZiAoY29kZSA8IDk3KSB7IHJldHVybiBjb2RlID09PSA5NSB9CiAgICBpZiAoY29kZSA8IDEyMykgeyByZXR1cm4gdHJ1ZSB9CiAgICBpZiAoY29kZSA8PSAweGZmZmYpIHsgcmV0dXJuIGNvZGUgPj0gMHhhYSAmJiBub25BU0NJSWlkZW50aWZpZXJTdGFydC50ZXN0KFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSkpIH0KICAgIGlmIChhc3RyYWwgPT09IGZhbHNlKSB7IHJldHVybiBmYWxzZSB9CiAgICByZXR1cm4gaXNJbkFzdHJhbFNldChjb2RlLCBhc3RyYWxJZGVudGlmaWVyU3RhcnRDb2RlcykKICB9CgogIC8vIFRlc3Qgd2hldGhlciBhIGdpdmVuIGNoYXJhY3RlciBpcyBwYXJ0IG9mIGFuIGlkZW50aWZpZXIuCgogIGZ1bmN0aW9uIGlzSWRlbnRpZmllckNoYXIoY29kZSwgYXN0cmFsKSB7CiAgICBpZiAoY29kZSA8IDQ4KSB7IHJldHVybiBjb2RlID09PSAzNiB9CiAgICBpZiAoY29kZSA8IDU4KSB7IHJldHVybiB0cnVlIH0KICAgIGlmIChjb2RlIDwgNjUpIHsgcmV0dXJuIGZhbHNlIH0KICAgIGlmIChjb2RlIDwgOTEpIHsgcmV0dXJuIHRydWUgfQogICAgaWYgKGNvZGUgPCA5NykgeyByZXR1cm4gY29kZSA9PT0gOTUgfQogICAgaWYgKGNvZGUgPCAxMjMpIHsgcmV0dXJuIHRydWUgfQogICAgaWYgKGNvZGUgPD0gMHhmZmZmKSB7IHJldHVybiBjb2RlID49IDB4YWEgJiYgbm9uQVNDSUlpZGVudGlmaWVyLnRlc3QoU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKSkgfQogICAgaWYgKGFzdHJhbCA9PT0gZmFsc2UpIHsgcmV0dXJuIGZhbHNlIH0KICAgIHJldHVybiBpc0luQXN0cmFsU2V0KGNvZGUsIGFzdHJhbElkZW50aWZpZXJTdGFydENvZGVzKSB8fCBpc0luQXN0cmFsU2V0KGNvZGUsIGFzdHJhbElkZW50aWZpZXJDb2RlcykKICB9CgogIC8vICMjIFRva2VuIHR5cGVzCgogIC8vIFRoZSBhc3NpZ25tZW50IG9mIGZpbmUtZ3JhaW5lZCwgaW5mb3JtYXRpb24tY2FycnlpbmcgdHlwZSBvYmplY3RzCiAgLy8gYWxsb3dzIHRoZSB0b2tlbml6ZXIgdG8gc3RvcmUgdGhlIGluZm9ybWF0aW9uIGl0IGhhcyBhYm91dCBhCiAgLy8gdG9rZW4gaW4gYSB3YXkgdGhhdCBpcyB2ZXJ5IGNoZWFwIGZvciB0aGUgcGFyc2VyIHRvIGxvb2sgdXAuCgogIC8vIEFsbCB0b2tlbiB0eXBlIHZhcmlhYmxlcyBzdGFydCB3aXRoIGFuIHVuZGVyc2NvcmUsIHRvIG1ha2UgdGhlbQogIC8vIGVhc3kgdG8gcmVjb2duaXplLgoKICAvLyBUaGUgYGJlZm9yZUV4cHJgIHByb3BlcnR5IGlzIHVzZWQgdG8gZGlzYW1iaWd1YXRlIGJldHdlZW4gcmVndWxhcgogIC8vIGV4cHJlc3Npb25zIGFuZCBkaXZpc2lvbnMuIEl0IGlzIHNldCBvbiBhbGwgdG9rZW4gdHlwZXMgdGhhdCBjYW4KICAvLyBiZSBmb2xsb3dlZCBieSBhbiBleHByZXNzaW9uICh0aHVzLCBhIHNsYXNoIGFmdGVyIHRoZW0gd291bGQgYmUgYQogIC8vIHJlZ3VsYXIgZXhwcmVzc2lvbikuCiAgLy8KICAvLyBUaGUgYHN0YXJ0c0V4cHJgIHByb3BlcnR5IGlzIHVzZWQgdG8gY2hlY2sgaWYgdGhlIHRva2VuIGVuZHMgYQogIC8vIGB5aWVsZGAgZXhwcmVzc2lvbi4gSXQgaXMgc2V0IG9uIGFsbCB0b2tlbiB0eXBlcyB0aGF0IGVpdGhlciBjYW4KICAvLyBkaXJlY3RseSBzdGFydCBhbiBleHByZXNzaW9uIChsaWtlIGEgcXVvdGF0aW9uIG1hcmspIG9yIGNhbgogIC8vIGNvbnRpbnVlIGFuIGV4cHJlc3Npb24gKGxpa2UgdGhlIGJvZHkgb2YgYSBzdHJpbmcpLgogIC8vCiAgLy8gYGlzTG9vcGAgbWFya3MgYSBrZXl3b3JkIGFzIHN0YXJ0aW5nIGEgbG9vcCwgd2hpY2ggaXMgaW1wb3J0YW50CiAgLy8gdG8ga25vdyB3aGVuIHBhcnNpbmcgYSBsYWJlbCwgaW4gb3JkZXIgdG8gYWxsb3cgb3IgZGlzYWxsb3cKICAvLyBjb250aW51ZSBqdW1wcyB0byB0aGF0IGxhYmVsLgoKICB2YXIgVG9rZW5UeXBlID0gZnVuY3Rpb24gVG9rZW5UeXBlKGxhYmVsLCBjb25mKSB7CiAgICBpZiAoIGNvbmYgPT09IHZvaWQgMCApIGNvbmYgPSB7fTsKCiAgICB0aGlzLmxhYmVsID0gbGFiZWw7CiAgICB0aGlzLmtleXdvcmQgPSBjb25mLmtleXdvcmQ7CiAgICB0aGlzLmJlZm9yZUV4cHIgPSAhIWNvbmYuYmVmb3JlRXhwcjsKICAgIHRoaXMuc3RhcnRzRXhwciA9ICEhY29uZi5zdGFydHNFeHByOwogICAgdGhpcy5pc0xvb3AgPSAhIWNvbmYuaXNMb29wOwogICAgdGhpcy5pc0Fzc2lnbiA9ICEhY29uZi5pc0Fzc2lnbjsKICAgIHRoaXMucHJlZml4ID0gISFjb25mLnByZWZpeDsKICAgIHRoaXMucG9zdGZpeCA9ICEhY29uZi5wb3N0Zml4OwogICAgdGhpcy5iaW5vcCA9IGNvbmYuYmlub3AgfHwgbnVsbDsKICAgIHRoaXMudXBkYXRlQ29udGV4dCA9IG51bGw7CiAgfTsKCiAgZnVuY3Rpb24gYmlub3AobmFtZSwgcHJlYykgewogICAgcmV0dXJuIG5ldyBUb2tlblR5cGUobmFtZSwge2JlZm9yZUV4cHI6IHRydWUsIGJpbm9wOiBwcmVjfSkKICB9CiAgdmFyIGJlZm9yZUV4cHIgPSB7YmVmb3JlRXhwcjogdHJ1ZX0sIHN0YXJ0c0V4cHIgPSB7c3RhcnRzRXhwcjogdHJ1ZX07CgogIC8vIE1hcCBrZXl3b3JkIG5hbWVzIHRvIHRva2VuIHR5cGVzLgoKICB2YXIga2V5d29yZHMgPSB7fTsKCiAgLy8gU3VjY2luY3QgZGVmaW5pdGlvbnMgb2Yga2V5d29yZCB0b2tlbiB0eXBlcwogIGZ1bmN0aW9uIGt3KG5hbWUsIG9wdGlvbnMpIHsKICAgIGlmICggb3B0aW9ucyA9PT0gdm9pZCAwICkgb3B0aW9ucyA9IHt9OwoKICAgIG9wdGlvbnMua2V5d29yZCA9IG5hbWU7CiAgICByZXR1cm4ga2V5d29yZHNbbmFtZV0gPSBuZXcgVG9rZW5UeXBlKG5hbWUsIG9wdGlvbnMpCiAgfQoKICB2YXIgdHlwZXMkMSA9IHsKICAgIG51bTogbmV3IFRva2VuVHlwZSgibnVtIiwgc3RhcnRzRXhwciksCiAgICByZWdleHA6IG5ldyBUb2tlblR5cGUoInJlZ2V4cCIsIHN0YXJ0c0V4cHIpLAogICAgc3RyaW5nOiBuZXcgVG9rZW5UeXBlKCJzdHJpbmciLCBzdGFydHNFeHByKSwKICAgIG5hbWU6IG5ldyBUb2tlblR5cGUoIm5hbWUiLCBzdGFydHNFeHByKSwKICAgIHByaXZhdGVJZDogbmV3IFRva2VuVHlwZSgicHJpdmF0ZUlkIiwgc3RhcnRzRXhwciksCiAgICBlb2Y6IG5ldyBUb2tlblR5cGUoImVvZiIpLAoKICAgIC8vIFB1bmN0dWF0aW9uIHRva2VuIHR5cGVzLgogICAgYnJhY2tldEw6IG5ldyBUb2tlblR5cGUoIlsiLCB7YmVmb3JlRXhwcjogdHJ1ZSwgc3RhcnRzRXhwcjogdHJ1ZX0pLAogICAgYnJhY2tldFI6IG5ldyBUb2tlblR5cGUoIl0iKSwKICAgIGJyYWNlTDogbmV3IFRva2VuVHlwZSgieyIsIHtiZWZvcmVFeHByOiB0cnVlLCBzdGFydHNFeHByOiB0cnVlfSksCiAgICBicmFjZVI6IG5ldyBUb2tlblR5cGUoIn0iKSwKICAgIHBhcmVuTDogbmV3IFRva2VuVHlwZSgiKCIsIHtiZWZvcmVFeHByOiB0cnVlLCBzdGFydHNFeHByOiB0cnVlfSksCiAgICBwYXJlblI6IG5ldyBUb2tlblR5cGUoIikiKSwKICAgIGNvbW1hOiBuZXcgVG9rZW5UeXBlKCIsIiwgYmVmb3JlRXhwciksCiAgICBzZW1pOiBuZXcgVG9rZW5UeXBlKCI7IiwgYmVmb3JlRXhwciksCiAgICBjb2xvbjogbmV3IFRva2VuVHlwZSgiOiIsIGJlZm9yZUV4cHIpLAogICAgZG90OiBuZXcgVG9rZW5UeXBlKCIuIiksCiAgICBxdWVzdGlvbjogbmV3IFRva2VuVHlwZSgiPyIsIGJlZm9yZUV4cHIpLAogICAgcXVlc3Rpb25Eb3Q6IG5ldyBUb2tlblR5cGUoIj8uIiksCiAgICBhcnJvdzogbmV3IFRva2VuVHlwZSgiPT4iLCBiZWZvcmVFeHByKSwKICAgIHRlbXBsYXRlOiBuZXcgVG9rZW5UeXBlKCJ0ZW1wbGF0ZSIpLAogICAgaW52YWxpZFRlbXBsYXRlOiBuZXcgVG9rZW5UeXBlKCJpbnZhbGlkVGVtcGxhdGUiKSwKICAgIGVsbGlwc2lzOiBuZXcgVG9rZW5UeXBlKCIuLi4iLCBiZWZvcmVFeHByKSwKICAgIGJhY2tRdW90ZTogbmV3IFRva2VuVHlwZSgiYCIsIHN0YXJ0c0V4cHIpLAogICAgZG9sbGFyQnJhY2VMOiBuZXcgVG9rZW5UeXBlKCIkeyIsIHtiZWZvcmVFeHByOiB0cnVlLCBzdGFydHNFeHByOiB0cnVlfSksCgogICAgLy8gT3BlcmF0b3JzLiBUaGVzZSBjYXJyeSBzZXZlcmFsIGtpbmRzIG9mIHByb3BlcnRpZXMgdG8gaGVscCB0aGUKICAgIC8vIHBhcnNlciB1c2UgdGhlbSBwcm9wZXJseSAodGhlIHByZXNlbmNlIG9mIHRoZXNlIHByb3BlcnRpZXMgaXMKICAgIC8vIHdoYXQgY2F0ZWdvcml6ZXMgdGhlbSBhcyBvcGVyYXRvcnMpLgogICAgLy8KICAgIC8vIGBiaW5vcGAsIHdoZW4gcHJlc2VudCwgc3BlY2lmaWVzIHRoYXQgdGhpcyBvcGVyYXRvciBpcyBhIGJpbmFyeQogICAgLy8gb3BlcmF0b3IsIGFuZCB3aWxsIHJlZmVyIHRvIGl0cyBwcmVjZWRlbmNlLgogICAgLy8KICAgIC8vIGBwcmVmaXhgIGFuZCBgcG9zdGZpeGAgbWFyayB0aGUgb3BlcmF0b3IgYXMgYSBwcmVmaXggb3IgcG9zdGZpeAogICAgLy8gdW5hcnkgb3BlcmF0b3IuCiAgICAvLwogICAgLy8gYGlzQXNzaWduYCBtYXJrcyBhbGwgb2YgYD1gLCBgKz1gLCBgLT1gIGV0Y2V0ZXJhLCB3aGljaCBhY3QgYXMKICAgIC8vIGJpbmFyeSBvcGVyYXRvcnMgd2l0aCBhIHZlcnkgbG93IHByZWNlZGVuY2UsIHRoYXQgc2hvdWxkIHJlc3VsdAogICAgLy8gaW4gQXNzaWdubWVudEV4cHJlc3Npb24gbm9kZXMuCgogICAgZXE6IG5ldyBUb2tlblR5cGUoIj0iLCB7YmVmb3JlRXhwcjogdHJ1ZSwgaXNBc3NpZ246IHRydWV9KSwKICAgIGFzc2lnbjogbmV3IFRva2VuVHlwZSgiXz0iLCB7YmVmb3JlRXhwcjogdHJ1ZSwgaXNBc3NpZ246IHRydWV9KSwKICAgIGluY0RlYzogbmV3IFRva2VuVHlwZSgiKysvLS0iLCB7cHJlZml4OiB0cnVlLCBwb3N0Zml4OiB0cnVlLCBzdGFydHNFeHByOiB0cnVlfSksCiAgICBwcmVmaXg6IG5ldyBUb2tlblR5cGUoIiEvfiIsIHtiZWZvcmVFeHByOiB0cnVlLCBwcmVmaXg6IHRydWUsIHN0YXJ0c0V4cHI6IHRydWV9KSwKICAgIGxvZ2ljYWxPUjogYmlub3AoInx8IiwgMSksCiAgICBsb2dpY2FsQU5EOiBiaW5vcCgiJiYiLCAyKSwKICAgIGJpdHdpc2VPUjogYmlub3AoInwiLCAzKSwKICAgIGJpdHdpc2VYT1I6IGJpbm9wKCJeIiwgNCksCiAgICBiaXR3aXNlQU5EOiBiaW5vcCgiJiIsIDUpLAogICAgZXF1YWxpdHk6IGJpbm9wKCI9PS8hPS89PT0vIT09IiwgNiksCiAgICByZWxhdGlvbmFsOiBiaW5vcCgiPC8+Lzw9Lz49IiwgNyksCiAgICBiaXRTaGlmdDogYmlub3AoIjw8Lz4+Lz4+PiIsIDgpLAogICAgcGx1c01pbjogbmV3IFRva2VuVHlwZSgiKy8tIiwge2JlZm9yZUV4cHI6IHRydWUsIGJpbm9wOiA5LCBwcmVmaXg6IHRydWUsIHN0YXJ0c0V4cHI6IHRydWV9KSwKICAgIG1vZHVsbzogYmlub3AoIiUiLCAxMCksCiAgICBzdGFyOiBiaW5vcCgiKiIsIDEwKSwKICAgIHNsYXNoOiBiaW5vcCgiLyIsIDEwKSwKICAgIHN0YXJzdGFyOiBuZXcgVG9rZW5UeXBlKCIqKiIsIHtiZWZvcmVFeHByOiB0cnVlfSksCiAgICBjb2FsZXNjZTogYmlub3AoIj8/IiwgMSksCgogICAgLy8gS2V5d29yZCB0b2tlbiB0eXBlcy4KICAgIF9icmVhazoga3coImJyZWFrIiksCiAgICBfY2FzZToga3coImNhc2UiLCBiZWZvcmVFeHByKSwKICAgIF9jYXRjaDoga3coImNhdGNoIiksCiAgICBfY29udGludWU6IGt3KCJjb250aW51ZSIpLAogICAgX2RlYnVnZ2VyOiBrdygiZGVidWdnZXIiKSwKICAgIF9kZWZhdWx0OiBrdygiZGVmYXVsdCIsIGJlZm9yZUV4cHIpLAogICAgX2RvOiBrdygiZG8iLCB7aXNMb29wOiB0cnVlLCBiZWZvcmVFeHByOiB0cnVlfSksCiAgICBfZWxzZToga3coImVsc2UiLCBiZWZvcmVFeHByKSwKICAgIF9maW5hbGx5OiBrdygiZmluYWxseSIpLAogICAgX2Zvcjoga3coImZvciIsIHtpc0xvb3A6IHRydWV9KSwKICAgIF9mdW5jdGlvbjoga3coImZ1bmN0aW9uIiwgc3RhcnRzRXhwciksCiAgICBfaWY6IGt3KCJpZiIpLAogICAgX3JldHVybjoga3coInJldHVybiIsIGJlZm9yZUV4cHIpLAogICAgX3N3aXRjaDoga3coInN3aXRjaCIpLAogICAgX3Rocm93OiBrdygidGhyb3ciLCBiZWZvcmVFeHByKSwKICAgIF90cnk6IGt3KCJ0cnkiKSwKICAgIF92YXI6IGt3KCJ2YXIiKSwKICAgIF9jb25zdDoga3coImNvbnN0IiksCiAgICBfd2hpbGU6IGt3KCJ3aGlsZSIsIHtpc0xvb3A6IHRydWV9KSwKICAgIF93aXRoOiBrdygid2l0aCIpLAogICAgX25ldzoga3coIm5ldyIsIHtiZWZvcmVFeHByOiB0cnVlLCBzdGFydHNFeHByOiB0cnVlfSksCiAgICBfdGhpczoga3coInRoaXMiLCBzdGFydHNFeHByKSwKICAgIF9zdXBlcjoga3coInN1cGVyIiwgc3RhcnRzRXhwciksCiAgICBfY2xhc3M6IGt3KCJjbGFzcyIsIHN0YXJ0c0V4cHIpLAogICAgX2V4dGVuZHM6IGt3KCJleHRlbmRzIiwgYmVmb3JlRXhwciksCiAgICBfZXhwb3J0OiBrdygiZXhwb3J0IiksCiAgICBfaW1wb3J0OiBrdygiaW1wb3J0Iiwgc3RhcnRzRXhwciksCiAgICBfbnVsbDoga3coIm51bGwiLCBzdGFydHNFeHByKSwKICAgIF90cnVlOiBrdygidHJ1ZSIsIHN0YXJ0c0V4cHIpLAogICAgX2ZhbHNlOiBrdygiZmFsc2UiLCBzdGFydHNFeHByKSwKICAgIF9pbjoga3coImluIiwge2JlZm9yZUV4cHI6IHRydWUsIGJpbm9wOiA3fSksCiAgICBfaW5zdGFuY2VvZjoga3coImluc3RhbmNlb2YiLCB7YmVmb3JlRXhwcjogdHJ1ZSwgYmlub3A6IDd9KSwKICAgIF90eXBlb2Y6IGt3KCJ0eXBlb2YiLCB7YmVmb3JlRXhwcjogdHJ1ZSwgcHJlZml4OiB0cnVlLCBzdGFydHNFeHByOiB0cnVlfSksCiAgICBfdm9pZDoga3coInZvaWQiLCB7YmVmb3JlRXhwcjogdHJ1ZSwgcHJlZml4OiB0cnVlLCBzdGFydHNFeHByOiB0cnVlfSksCiAgICBfZGVsZXRlOiBrdygiZGVsZXRlIiwge2JlZm9yZUV4cHI6IHRydWUsIHByZWZpeDogdHJ1ZSwgc3RhcnRzRXhwcjogdHJ1ZX0pCiAgfTsKCiAgLy8gTWF0Y2hlcyBhIHdob2xlIGxpbmUgYnJlYWsgKHdoZXJlIENSTEYgaXMgY29uc2lkZXJlZCBhIHNpbmdsZQogIC8vIGxpbmUgYnJlYWspLiBVc2VkIHRvIGNvdW50IGxpbmVzLgoKICB2YXIgbGluZUJyZWFrID0gL1xyXG4/fFxufFx1MjAyOHxcdTIwMjkvOwogIHZhciBsaW5lQnJlYWtHID0gbmV3IFJlZ0V4cChsaW5lQnJlYWsuc291cmNlLCAiZyIpOwoKICBmdW5jdGlvbiBpc05ld0xpbmUoY29kZSkgewogICAgcmV0dXJuIGNvZGUgPT09IDEwIHx8IGNvZGUgPT09IDEzIHx8IGNvZGUgPT09IDB4MjAyOCB8fCBjb2RlID09PSAweDIwMjkKICB9CgogIGZ1bmN0aW9uIG5leHRMaW5lQnJlYWsoY29kZSwgZnJvbSwgZW5kKSB7CiAgICBpZiAoIGVuZCA9PT0gdm9pZCAwICkgZW5kID0gY29kZS5sZW5ndGg7CgogICAgZm9yICh2YXIgaSA9IGZyb207IGkgPCBlbmQ7IGkrKykgewogICAgICB2YXIgbmV4dCA9IGNvZGUuY2hhckNvZGVBdChpKTsKICAgICAgaWYgKGlzTmV3TGluZShuZXh0KSkKICAgICAgICB7IHJldHVybiBpIDwgZW5kIC0gMSAmJiBuZXh0ID09PSAxMyAmJiBjb2RlLmNoYXJDb2RlQXQoaSArIDEpID09PSAxMCA/IGkgKyAyIDogaSArIDEgfQogICAgfQogICAgcmV0dXJuIC0xCiAgfQoKICB2YXIgbm9uQVNDSUl3aGl0ZXNwYWNlID0gL1tcdTE2ODBcdTIwMDAtXHUyMDBhXHUyMDJmXHUyMDVmXHUzMDAwXHVmZWZmXS87CgogIHZhciBza2lwV2hpdGVTcGFjZSA9IC8oPzpcc3xcL1wvLip8XC9cKlteXSo/XCpcLykqL2c7CgogIHZhciByZWYgPSBPYmplY3QucHJvdG90eXBlOwogIHZhciBoYXNPd25Qcm9wZXJ0eSA9IHJlZi5oYXNPd25Qcm9wZXJ0eTsKICB2YXIgdG9TdHJpbmcgPSByZWYudG9TdHJpbmc7CgogIHZhciBoYXNPd24gPSBPYmplY3QuaGFzT3duIHx8IChmdW5jdGlvbiAob2JqLCBwcm9wTmFtZSkgeyByZXR1cm4gKAogICAgaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3BOYW1lKQogICk7IH0pOwoKICB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgKGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuICgKICAgIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gIltvYmplY3QgQXJyYXldIgogICk7IH0pOwoKICBmdW5jdGlvbiB3b3Jkc1JlZ2V4cCh3b3JkcykgewogICAgcmV0dXJuIG5ldyBSZWdFeHAoIl4oPzoiICsgd29yZHMucmVwbGFjZSgvIC9nLCAifCIpICsgIikkIikKICB9CgogIHZhciBsb25lU3Vycm9nYXRlID0gLyg/OltcdUQ4MDAtXHVEQkZGXSg/IVtcdURDMDAtXHVERkZGXSl8KD86W15cdUQ4MDAtXHVEQkZGXXxeKVtcdURDMDAtXHVERkZGXSkvOwoKICAvLyBUaGVzZSBhcmUgdXNlZCB3aGVuIGBvcHRpb25zLmxvY2F0aW9uc2AgaXMgb24sIGZvciB0aGUKICAvLyBgc3RhcnRMb2NgIGFuZCBgZW5kTG9jYCBwcm9wZXJ0aWVzLgoKICB2YXIgUG9zaXRpb24gPSBmdW5jdGlvbiBQb3NpdGlvbihsaW5lLCBjb2wpIHsKICAgIHRoaXMubGluZSA9IGxpbmU7CiAgICB0aGlzLmNvbHVtbiA9IGNvbDsKICB9OwoKICBQb3NpdGlvbi5wcm90b3R5cGUub2Zmc2V0ID0gZnVuY3Rpb24gb2Zmc2V0IChuKSB7CiAgICByZXR1cm4gbmV3IFBvc2l0aW9uKHRoaXMubGluZSwgdGhpcy5jb2x1bW4gKyBuKQogIH07CgogIHZhciBTb3VyY2VMb2NhdGlvbiA9IGZ1bmN0aW9uIFNvdXJjZUxvY2F0aW9uKHAsIHN0YXJ0LCBlbmQpIHsKICAgIHRoaXMuc3RhcnQgPSBzdGFydDsKICAgIHRoaXMuZW5kID0gZW5kOwogICAgaWYgKHAuc291cmNlRmlsZSAhPT0gbnVsbCkgeyB0aGlzLnNvdXJjZSA9IHAuc291cmNlRmlsZTsgfQogIH07CgogIC8vIFRoZSBgZ2V0TGluZUluZm9gIGZ1bmN0aW9uIGlzIG1vc3RseSB1c2VmdWwgd2hlbiB0aGUKICAvLyBgbG9jYXRpb25zYCBvcHRpb24gaXMgb2ZmIChmb3IgcGVyZm9ybWFuY2UgcmVhc29ucykgYW5kIHlvdQogIC8vIHdhbnQgdG8gZmluZCB0aGUgbGluZS9jb2x1bW4gcG9zaXRpb24gZm9yIGEgZ2l2ZW4gY2hhcmFjdGVyCiAgLy8gb2Zmc2V0LiBgaW5wdXRgIHNob3VsZCBiZSB0aGUgY29kZSBzdHJpbmcgdGhhdCB0aGUgb2Zmc2V0IHJlZmVycwogIC8vIGludG8uCgogIGZ1bmN0aW9uIGdldExpbmVJbmZvKGlucHV0LCBvZmZzZXQpIHsKICAgIGZvciAodmFyIGxpbmUgPSAxLCBjdXIgPSAwOzspIHsKICAgICAgdmFyIG5leHRCcmVhayA9IG5leHRMaW5lQnJlYWsoaW5wdXQsIGN1ciwgb2Zmc2V0KTsKICAgICAgaWYgKG5leHRCcmVhayA8IDApIHsgcmV0dXJuIG5ldyBQb3NpdGlvbihsaW5lLCBvZmZzZXQgLSBjdXIpIH0KICAgICAgKytsaW5lOwogICAgICBjdXIgPSBuZXh0QnJlYWs7CiAgICB9CiAgfQoKICAvLyBBIHNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGdpdmVuIHRvIGNvbmZpZ3VyZSB0aGUgcGFyc2VyIHByb2Nlc3MuCiAgLy8gVGhlc2Ugb3B0aW9ucyBhcmUgcmVjb2duaXplZCAob25seSBgZWNtYVZlcnNpb25gIGlzIHJlcXVpcmVkKToKCiAgdmFyIGRlZmF1bHRPcHRpb25zID0gewogICAgLy8gYGVjbWFWZXJzaW9uYCBpbmRpY2F0ZXMgdGhlIEVDTUFTY3JpcHQgdmVyc2lvbiB0byBwYXJzZS4gTXVzdCBiZQogICAgLy8gZWl0aGVyIDMsIDUsIDYgKG9yIDIwMTUpLCA3ICgyMDE2KSwgOCAoMjAxNyksIDkgKDIwMTgpLCAxMAogICAgLy8gKDIwMTkpLCAxMSAoMjAyMCksIDEyICgyMDIxKSwgMTMgKDIwMjIpLCBvciBgImxhdGVzdCJgICh0aGUKICAgIC8vIGxhdGVzdCB2ZXJzaW9uIHRoZSBsaWJyYXJ5IHN1cHBvcnRzKS4gVGhpcyBpbmZsdWVuY2VzIHN1cHBvcnQKICAgIC8vIGZvciBzdHJpY3QgbW9kZSwgdGhlIHNldCBvZiByZXNlcnZlZCB3b3JkcywgYW5kIHN1cHBvcnQgZm9yCiAgICAvLyBuZXcgc3ludGF4IGZlYXR1cmVzLgogICAgZWNtYVZlcnNpb246IG51bGwsCiAgICAvLyBgc291cmNlVHlwZWAgaW5kaWNhdGVzIHRoZSBtb2RlIHRoZSBjb2RlIHNob3VsZCBiZSBwYXJzZWQgaW4uCiAgICAvLyBDYW4gYmUgZWl0aGVyIGAic2NyaXB0ImAgb3IgYCJtb2R1bGUiYC4gVGhpcyBpbmZsdWVuY2VzIGdsb2JhbAogICAgLy8gc3RyaWN0IG1vZGUgYW5kIHBhcnNpbmcgb2YgYGltcG9ydGAgYW5kIGBleHBvcnRgIGRlY2xhcmF0aW9ucy4KICAgIHNvdXJjZVR5cGU6ICJzY3JpcHQiLAogICAgLy8gYG9uSW5zZXJ0ZWRTZW1pY29sb25gIGNhbiBiZSBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBjYWxsZWQKICAgIC8vIHdoZW4gYSBzZW1pY29sb24gaXMgYXV0b21hdGljYWxseSBpbnNlcnRlZC4gSXQgd2lsbCBiZSBwYXNzZWQKICAgIC8vIHRoZSBwb3NpdGlvbiBvZiB0aGUgY29tbWEgYXMgYW4gb2Zmc2V0LCBhbmQgaWYgYGxvY2F0aW9uc2AgaXMKICAgIC8vIGVuYWJsZWQsIGl0IGlzIGdpdmVuIHRoZSBsb2NhdGlvbiBhcyBhIGB7bGluZSwgY29sdW1ufWAgb2JqZWN0CiAgICAvLyBhcyBzZWNvbmQgYXJndW1lbnQuCiAgICBvbkluc2VydGVkU2VtaWNvbG9uOiBudWxsLAogICAgLy8gYG9uVHJhaWxpbmdDb21tYWAgaXMgc2ltaWxhciB0byBgb25JbnNlcnRlZFNlbWljb2xvbmAsIGJ1dCBmb3IKICAgIC8vIHRyYWlsaW5nIGNvbW1hcy4KICAgIG9uVHJhaWxpbmdDb21tYTogbnVsbCwKICAgIC8vIEJ5IGRlZmF1bHQsIHJlc2VydmVkIHdvcmRzIGFyZSBvbmx5IGVuZm9yY2VkIGlmIGVjbWFWZXJzaW9uID49IDUuCiAgICAvLyBTZXQgYGFsbG93UmVzZXJ2ZWRgIHRvIGEgYm9vbGVhbiB2YWx1ZSB0byBleHBsaWNpdGx5IHR1cm4gdGhpcyBvbgogICAgLy8gYW4gb2ZmLiBXaGVuIHRoaXMgb3B0aW9uIGhhcyB0aGUgdmFsdWUgIm5ldmVyIiwgcmVzZXJ2ZWQgd29yZHMKICAgIC8vIGFuZCBrZXl3b3JkcyBjYW4gYWxzbyBub3QgYmUgdXNlZCBhcyBwcm9wZXJ0eSBuYW1lcy4KICAgIGFsbG93UmVzZXJ2ZWQ6IG51bGwsCiAgICAvLyBXaGVuIGVuYWJsZWQsIGEgcmV0dXJuIGF0IHRoZSB0b3AgbGV2ZWwgaXMgbm90IGNvbnNpZGVyZWQgYW4KICAgIC8vIGVycm9yLgogICAgYWxsb3dSZXR1cm5PdXRzaWRlRnVuY3Rpb246IGZhbHNlLAogICAgLy8gV2hlbiBlbmFibGVkLCBpbXBvcnQvZXhwb3J0IHN0YXRlbWVudHMgYXJlIG5vdCBjb25zdHJhaW5lZCB0bwogICAgLy8gYXBwZWFyaW5nIGF0IHRoZSB0b3Agb2YgdGhlIHByb2dyYW0sIGFuZCBhbiBpbXBvcnQubWV0YSBleHByZXNzaW9uCiAgICAvLyBpbiBhIHNjcmlwdCBpc24ndCBjb25zaWRlcmVkIGFuIGVycm9yLgogICAgYWxsb3dJbXBvcnRFeHBvcnRFdmVyeXdoZXJlOiBmYWxzZSwKICAgIC8vIEJ5IGRlZmF1bHQsIGF3YWl0IGlkZW50aWZpZXJzIGFyZSBhbGxvd2VkIHRvIGFwcGVhciBhdCB0aGUgdG9wLWxldmVsIHNjb3BlIG9ubHkgaWYgZWNtYVZlcnNpb24gPj0gMjAyMi4KICAgIC8vIFdoZW4gZW5hYmxlZCwgYXdhaXQgaWRlbnRpZmllcnMgYXJlIGFsbG93ZWQgdG8gYXBwZWFyIGF0IHRoZSB0b3AtbGV2ZWwgc2NvcGUsCiAgICAvLyBidXQgdGhleSBhcmUgc3RpbGwgbm90IGFsbG93ZWQgaW4gbm9uLWFzeW5jIGZ1bmN0aW9ucy4KICAgIGFsbG93QXdhaXRPdXRzaWRlRnVuY3Rpb246IG51bGwsCiAgICAvLyBXaGVuIGVuYWJsZWQsIHN1cGVyIGlkZW50aWZpZXJzIGFyZSBub3QgY29uc3RyYWluZWQgdG8KICAgIC8vIGFwcGVhcmluZyBpbiBtZXRob2RzIGFuZCBkbyBub3QgcmFpc2UgYW4gZXJyb3Igd2hlbiB0aGV5IGFwcGVhciBlbHNld2hlcmUuCiAgICBhbGxvd1N1cGVyT3V0c2lkZU1ldGhvZDogbnVsbCwKICAgIC8vIFdoZW4gZW5hYmxlZCwgaGFzaGJhbmcgZGlyZWN0aXZlIGluIHRoZSBiZWdpbm5pbmcgb2YgZmlsZQogICAgLy8gaXMgYWxsb3dlZCBhbmQgdHJlYXRlZCBhcyBhIGxpbmUgY29tbWVudC4KICAgIGFsbG93SGFzaEJhbmc6IGZhbHNlLAogICAgLy8gV2hlbiBgbG9jYXRpb25zYCBpcyBvbiwgYGxvY2AgcHJvcGVydGllcyBob2xkaW5nIG9iamVjdHMgd2l0aAogICAgLy8gYHN0YXJ0YCBhbmQgYGVuZGAgcHJvcGVydGllcyBpbiBge2xpbmUsIGNvbHVtbn1gIGZvcm0gKHdpdGgKICAgIC8vIGxpbmUgYmVpbmcgMS1iYXNlZCBhbmQgY29sdW1uIDAtYmFzZWQpIHdpbGwgYmUgYXR0YWNoZWQgdG8gdGhlCiAgICAvLyBub2Rlcy4KICAgIGxvY2F0aW9uczogZmFsc2UsCiAgICAvLyBBIGZ1bmN0aW9uIGNhbiBiZSBwYXNzZWQgYXMgYG9uVG9rZW5gIG9wdGlvbiwgd2hpY2ggd2lsbAogICAgLy8gY2F1c2UgQWNvcm4gdG8gY2FsbCB0aGF0IGZ1bmN0aW9uIHdpdGggb2JqZWN0IGluIHRoZSBzYW1lCiAgICAvLyBmb3JtYXQgYXMgdG9rZW5zIHJldHVybmVkIGZyb20gYHRva2VuaXplcigpLmdldFRva2VuKClgLiBOb3RlCiAgICAvLyB0aGF0IHlvdSBhcmUgbm90IGFsbG93ZWQgdG8gY2FsbCB0aGUgcGFyc2VyIGZyb20gdGhlCiAgICAvLyBjYWxsYmFja+KAlHRoYXQgd2lsbCBjb3JydXB0IGl0cyBpbnRlcm5hbCBzdGF0ZS4KICAgIG9uVG9rZW46IG51bGwsCiAgICAvLyBBIGZ1bmN0aW9uIGNhbiBiZSBwYXNzZWQgYXMgYG9uQ29tbWVudGAgb3B0aW9uLCB3aGljaCB3aWxsCiAgICAvLyBjYXVzZSBBY29ybiB0byBjYWxsIHRoYXQgZnVuY3Rpb24gd2l0aCBgKGJsb2NrLCB0ZXh0LCBzdGFydCwKICAgIC8vIGVuZClgIHBhcmFtZXRlcnMgd2hlbmV2ZXIgYSBjb21tZW50IGlzIHNraXBwZWQuIGBibG9ja2AgaXMgYQogICAgLy8gYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhpcyBpcyBhIGJsb2NrIChgLyogKi9gKSBjb21tZW50LAogICAgLy8gYHRleHRgIGlzIHRoZSBjb250ZW50IG9mIHRoZSBjb21tZW50LCBhbmQgYHN0YXJ0YCBhbmQgYGVuZGAgYXJlCiAgICAvLyBjaGFyYWN0ZXIgb2Zmc2V0cyB0aGF0IGRlbm90ZSB0aGUgc3RhcnQgYW5kIGVuZCBvZiB0aGUgY29tbWVudC4KICAgIC8vIFdoZW4gdGhlIGBsb2NhdGlvbnNgIG9wdGlvbiBpcyBvbiwgdHdvIG1vcmUgcGFyYW1ldGVycyBhcmUKICAgIC8vIHBhc3NlZCwgdGhlIGZ1bGwgYHtsaW5lLCBjb2x1bW59YCBsb2NhdGlvbnMgb2YgdGhlIHN0YXJ0IGFuZAogICAgLy8gZW5kIG9mIHRoZSBjb21tZW50cy4gTm90ZSB0aGF0IHlvdSBhcmUgbm90IGFsbG93ZWQgdG8gY2FsbCB0aGUKICAgIC8vIHBhcnNlciBmcm9tIHRoZSBjYWxsYmFja+KAlHRoYXQgd2lsbCBjb3JydXB0IGl0cyBpbnRlcm5hbCBzdGF0ZS4KICAgIG9uQ29tbWVudDogbnVsbCwKICAgIC8vIE5vZGVzIGhhdmUgdGhlaXIgc3RhcnQgYW5kIGVuZCBjaGFyYWN0ZXJzIG9mZnNldHMgcmVjb3JkZWQgaW4KICAgIC8vIGBzdGFydGAgYW5kIGBlbmRgIHByb3BlcnRpZXMgKGRpcmVjdGx5IG9uIHRoZSBub2RlLCByYXRoZXIgdGhhbgogICAgLy8gdGhlIGBsb2NgIG9iamVjdCwgd2hpY2ggaG9sZHMgbGluZS9jb2x1bW4gZGF0YS4gVG8gYWxzbyBhZGQgYQogICAgLy8gW3NlbWktc3RhbmRhcmRpemVkXVtyYW5nZV0gYHJhbmdlYCBwcm9wZXJ0eSBob2xkaW5nIGEgYFtzdGFydCwKICAgIC8vIGVuZF1gIGFycmF5IHdpdGggdGhlIHNhbWUgbnVtYmVycywgc2V0IHRoZSBgcmFuZ2VzYCBvcHRpb24gdG8KICAgIC8vIGB0cnVlYC4KICAgIC8vCiAgICAvLyBbcmFuZ2VdOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD03NDU2NzgKICAgIHJhbmdlczogZmFsc2UsCiAgICAvLyBJdCBpcyBwb3NzaWJsZSB0byBwYXJzZSBtdWx0aXBsZSBmaWxlcyBpbnRvIGEgc2luZ2xlIEFTVCBieQogICAgLy8gcGFzc2luZyB0aGUgdHJlZSBwcm9kdWNlZCBieSBwYXJzaW5nIHRoZSBmaXJzdCBmaWxlIGFzCiAgICAvLyBgcHJvZ3JhbWAgb3B0aW9uIGluIHN1YnNlcXVlbnQgcGFyc2VzLiBUaGlzIHdpbGwgYWRkIHRoZQogICAgLy8gdG9wbGV2ZWwgZm9ybXMgb2YgdGhlIHBhcnNlZCBmaWxlIHRvIHRoZSBgUHJvZ3JhbWAgKHRvcCkgbm9kZQogICAgLy8gb2YgYW4gZXhpc3RpbmcgcGFyc2UgdHJlZS4KICAgIHByb2dyYW06IG51bGwsCiAgICAvLyBXaGVuIGBsb2NhdGlvbnNgIGlzIG9uLCB5b3UgY2FuIHBhc3MgdGhpcyB0byByZWNvcmQgdGhlIHNvdXJjZQogICAgLy8gZmlsZSBpbiBldmVyeSBub2RlJ3MgYGxvY2Agb2JqZWN0LgogICAgc291cmNlRmlsZTogbnVsbCwKICAgIC8vIFRoaXMgdmFsdWUsIGlmIGdpdmVuLCBpcyBzdG9yZWQgaW4gZXZlcnkgbm9kZSwgd2hldGhlcgogICAgLy8gYGxvY2F0aW9uc2AgaXMgb24gb3Igb2ZmLgogICAgZGlyZWN0U291cmNlRmlsZTogbnVsbCwKICAgIC8vIFdoZW4gZW5hYmxlZCwgcGFyZW50aGVzaXplZCBleHByZXNzaW9ucyBhcmUgcmVwcmVzZW50ZWQgYnkKICAgIC8vIChub24tc3RhbmRhcmQpIFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uIG5vZGVzCiAgICBwcmVzZXJ2ZVBhcmVuczogZmFsc2UKICB9OwoKICAvLyBJbnRlcnByZXQgYW5kIGRlZmF1bHQgYW4gb3B0aW9ucyBvYmplY3QKCiAgdmFyIHdhcm5lZEFib3V0RWNtYVZlcnNpb24gPSBmYWxzZTsKCiAgZnVuY3Rpb24gZ2V0T3B0aW9ucyhvcHRzKSB7CiAgICB2YXIgb3B0aW9ucyA9IHt9OwoKICAgIGZvciAodmFyIG9wdCBpbiBkZWZhdWx0T3B0aW9ucykKICAgICAgeyBvcHRpb25zW29wdF0gPSBvcHRzICYmIGhhc093bihvcHRzLCBvcHQpID8gb3B0c1tvcHRdIDogZGVmYXVsdE9wdGlvbnNbb3B0XTsgfQoKICAgIGlmIChvcHRpb25zLmVjbWFWZXJzaW9uID09PSAibGF0ZXN0IikgewogICAgICBvcHRpb25zLmVjbWFWZXJzaW9uID0gMWU4OwogICAgfSBlbHNlIGlmIChvcHRpb25zLmVjbWFWZXJzaW9uID09IG51bGwpIHsKICAgICAgaWYgKCF3YXJuZWRBYm91dEVjbWFWZXJzaW9uICYmIHR5cGVvZiBjb25zb2xlID09PSAib2JqZWN0IiAmJiBjb25zb2xlLndhcm4pIHsKICAgICAgICB3YXJuZWRBYm91dEVjbWFWZXJzaW9uID0gdHJ1ZTsKICAgICAgICBjb25zb2xlLndhcm4oIlNpbmNlIEFjb3JuIDguMC4wLCBvcHRpb25zLmVjbWFWZXJzaW9uIGlzIHJlcXVpcmVkLlxuRGVmYXVsdGluZyB0byAyMDIwLCBidXQgdGhpcyB3aWxsIHN0b3Agd29ya2luZyBpbiB0aGUgZnV0dXJlLiIpOwogICAgICB9CiAgICAgIG9wdGlvbnMuZWNtYVZlcnNpb24gPSAxMTsKICAgIH0gZWxzZSBpZiAob3B0aW9ucy5lY21hVmVyc2lvbiA+PSAyMDE1KSB7CiAgICAgIG9wdGlvbnMuZWNtYVZlcnNpb24gLT0gMjAwOTsKICAgIH0KCiAgICBpZiAob3B0aW9ucy5hbGxvd1Jlc2VydmVkID09IG51bGwpCiAgICAgIHsgb3B0aW9ucy5hbGxvd1Jlc2VydmVkID0gb3B0aW9ucy5lY21hVmVyc2lvbiA8IDU7IH0KCiAgICBpZiAoaXNBcnJheShvcHRpb25zLm9uVG9rZW4pKSB7CiAgICAgIHZhciB0b2tlbnMgPSBvcHRpb25zLm9uVG9rZW47CiAgICAgIG9wdGlvbnMub25Ub2tlbiA9IGZ1bmN0aW9uICh0b2tlbikgeyByZXR1cm4gdG9rZW5zLnB1c2godG9rZW4pOyB9OwogICAgfQogICAgaWYgKGlzQXJyYXkob3B0aW9ucy5vbkNvbW1lbnQpKQogICAgICB7IG9wdGlvbnMub25Db21tZW50ID0gcHVzaENvbW1lbnQob3B0aW9ucywgb3B0aW9ucy5vbkNvbW1lbnQpOyB9CgogICAgcmV0dXJuIG9wdGlvbnMKICB9CgogIGZ1bmN0aW9uIHB1c2hDb21tZW50KG9wdGlvbnMsIGFycmF5KSB7CiAgICByZXR1cm4gZnVuY3Rpb24oYmxvY2ssIHRleHQsIHN0YXJ0LCBlbmQsIHN0YXJ0TG9jLCBlbmRMb2MpIHsKICAgICAgdmFyIGNvbW1lbnQgPSB7CiAgICAgICAgdHlwZTogYmxvY2sgPyAiQmxvY2siIDogIkxpbmUiLAogICAgICAgIHZhbHVlOiB0ZXh0LAogICAgICAgIHN0YXJ0OiBzdGFydCwKICAgICAgICBlbmQ6IGVuZAogICAgICB9OwogICAgICBpZiAob3B0aW9ucy5sb2NhdGlvbnMpCiAgICAgICAgeyBjb21tZW50LmxvYyA9IG5ldyBTb3VyY2VMb2NhdGlvbih0aGlzLCBzdGFydExvYywgZW5kTG9jKTsgfQogICAgICBpZiAob3B0aW9ucy5yYW5nZXMpCiAgICAgICAgeyBjb21tZW50LnJhbmdlID0gW3N0YXJ0LCBlbmRdOyB9CiAgICAgIGFycmF5LnB1c2goY29tbWVudCk7CiAgICB9CiAgfQoKICAvLyBFYWNoIHNjb3BlIGdldHMgYSBiaXRzZXQgdGhhdCBtYXkgY29udGFpbiB0aGVzZSBmbGFncwogIHZhcgogICAgICBTQ09QRV9UT1AgPSAxLAogICAgICBTQ09QRV9GVU5DVElPTiA9IDIsCiAgICAgIFNDT1BFX0FTWU5DID0gNCwKICAgICAgU0NPUEVfR0VORVJBVE9SID0gOCwKICAgICAgU0NPUEVfQVJST1cgPSAxNiwKICAgICAgU0NPUEVfU0lNUExFX0NBVENIID0gMzIsCiAgICAgIFNDT1BFX1NVUEVSID0gNjQsCiAgICAgIFNDT1BFX0RJUkVDVF9TVVBFUiA9IDEyOCwKICAgICAgU0NPUEVfQ0xBU1NfU1RBVElDX0JMT0NLID0gMjU2LAogICAgICBTQ09QRV9WQVIgPSBTQ09QRV9UT1AgfCBTQ09QRV9GVU5DVElPTiB8IFNDT1BFX0NMQVNTX1NUQVRJQ19CTE9DSzsKCiAgZnVuY3Rpb24gZnVuY3Rpb25GbGFncyhhc3luYywgZ2VuZXJhdG9yKSB7CiAgICByZXR1cm4gU0NPUEVfRlVOQ1RJT04gfCAoYXN5bmMgPyBTQ09QRV9BU1lOQyA6IDApIHwgKGdlbmVyYXRvciA/IFNDT1BFX0dFTkVSQVRPUiA6IDApCiAgfQoKICAvLyBVc2VkIGluIGNoZWNrTFZhbCogYW5kIGRlY2xhcmVOYW1lIHRvIGRldGVybWluZSB0aGUgdHlwZSBvZiBhIGJpbmRpbmcKICB2YXIKICAgICAgQklORF9OT05FID0gMCwgLy8gTm90IGEgYmluZGluZwogICAgICBCSU5EX1ZBUiA9IDEsIC8vIFZhci1zdHlsZSBiaW5kaW5nCiAgICAgIEJJTkRfTEVYSUNBTCA9IDIsIC8vIExldC0gb3IgY29uc3Qtc3R5bGUgYmluZGluZwogICAgICBCSU5EX0ZVTkNUSU9OID0gMywgLy8gRnVuY3Rpb24gZGVjbGFyYXRpb24KICAgICAgQklORF9TSU1QTEVfQ0FUQ0ggPSA0LCAvLyBTaW1wbGUgKGlkZW50aWZpZXIgcGF0dGVybikgY2F0Y2ggYmluZGluZwogICAgICBCSU5EX09VVFNJREUgPSA1OyAvLyBTcGVjaWFsIGNhc2UgZm9yIGZ1bmN0aW9uIG5hbWVzIGFzIGJvdW5kIGluc2lkZSB0aGUgZnVuY3Rpb24KCiAgdmFyIFBhcnNlciA9IGZ1bmN0aW9uIFBhcnNlcihvcHRpb25zLCBpbnB1dCwgc3RhcnRQb3MpIHsKICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgPSBnZXRPcHRpb25zKG9wdGlvbnMpOwogICAgdGhpcy5zb3VyY2VGaWxlID0gb3B0aW9ucy5zb3VyY2VGaWxlOwogICAgdGhpcy5rZXl3b3JkcyA9IHdvcmRzUmVnZXhwKGtleXdvcmRzJDFbb3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2ID8gNiA6IG9wdGlvbnMuc291cmNlVHlwZSA9PT0gIm1vZHVsZSIgPyAiNW1vZHVsZSIgOiA1XSk7CiAgICB2YXIgcmVzZXJ2ZWQgPSAiIjsKICAgIGlmIChvcHRpb25zLmFsbG93UmVzZXJ2ZWQgIT09IHRydWUpIHsKICAgICAgcmVzZXJ2ZWQgPSByZXNlcnZlZFdvcmRzW29wdGlvbnMuZWNtYVZlcnNpb24gPj0gNiA/IDYgOiBvcHRpb25zLmVjbWFWZXJzaW9uID09PSA1ID8gNSA6IDNdOwogICAgICBpZiAob3B0aW9ucy5zb3VyY2VUeXBlID09PSAibW9kdWxlIikgeyByZXNlcnZlZCArPSAiIGF3YWl0IjsgfQogICAgfQogICAgdGhpcy5yZXNlcnZlZFdvcmRzID0gd29yZHNSZWdleHAocmVzZXJ2ZWQpOwogICAgdmFyIHJlc2VydmVkU3RyaWN0ID0gKHJlc2VydmVkID8gcmVzZXJ2ZWQgKyAiICIgOiAiIikgKyByZXNlcnZlZFdvcmRzLnN0cmljdDsKICAgIHRoaXMucmVzZXJ2ZWRXb3Jkc1N0cmljdCA9IHdvcmRzUmVnZXhwKHJlc2VydmVkU3RyaWN0KTsKICAgIHRoaXMucmVzZXJ2ZWRXb3Jkc1N0cmljdEJpbmQgPSB3b3Jkc1JlZ2V4cChyZXNlcnZlZFN0cmljdCArICIgIiArIHJlc2VydmVkV29yZHMuc3RyaWN0QmluZCk7CiAgICB0aGlzLmlucHV0ID0gU3RyaW5nKGlucHV0KTsKCiAgICAvLyBVc2VkIHRvIHNpZ25hbCB0byBjYWxsZXJzIG9mIGByZWFkV29yZDFgIHdoZXRoZXIgdGhlIHdvcmQKICAgIC8vIGNvbnRhaW5lZCBhbnkgZXNjYXBlIHNlcXVlbmNlcy4gVGhpcyBpcyBuZWVkZWQgYmVjYXVzZSB3b3JkcyB3aXRoCiAgICAvLyBlc2NhcGUgc2VxdWVuY2VzIG11c3Qgbm90IGJlIGludGVycHJldGVkIGFzIGtleXdvcmRzLgogICAgdGhpcy5jb250YWluc0VzYyA9IGZhbHNlOwoKICAgIC8vIFNldCB1cCB0b2tlbiBzdGF0ZQoKICAgIC8vIFRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSB0b2tlbml6ZXIgaW4gdGhlIGlucHV0LgogICAgaWYgKHN0YXJ0UG9zKSB7CiAgICAgIHRoaXMucG9zID0gc3RhcnRQb3M7CiAgICAgIHRoaXMubGluZVN0YXJ0ID0gdGhpcy5pbnB1dC5sYXN0SW5kZXhPZigiXG4iLCBzdGFydFBvcyAtIDEpICsgMTsKICAgICAgdGhpcy5jdXJMaW5lID0gdGhpcy5pbnB1dC5zbGljZSgwLCB0aGlzLmxpbmVTdGFydCkuc3BsaXQobGluZUJyZWFrKS5sZW5ndGg7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnBvcyA9IHRoaXMubGluZVN0YXJ0ID0gMDsKICAgICAgdGhpcy5jdXJMaW5lID0gMTsKICAgIH0KCiAgICAvLyBQcm9wZXJ0aWVzIG9mIHRoZSBjdXJyZW50IHRva2VuOgogICAgLy8gSXRzIHR5cGUKICAgIHRoaXMudHlwZSA9IHR5cGVzJDEuZW9mOwogICAgLy8gRm9yIHRva2VucyB0aGF0IGluY2x1ZGUgbW9yZSBpbmZvcm1hdGlvbiB0aGFuIHRoZWlyIHR5cGUsIHRoZSB2YWx1ZQogICAgdGhpcy52YWx1ZSA9IG51bGw7CiAgICAvLyBJdHMgc3RhcnQgYW5kIGVuZCBvZmZzZXQKICAgIHRoaXMuc3RhcnQgPSB0aGlzLmVuZCA9IHRoaXMucG9zOwogICAgLy8gQW5kLCBpZiBsb2NhdGlvbnMgYXJlIHVzZWQsIHRoZSB7bGluZSwgY29sdW1ufSBvYmplY3QKICAgIC8vIGNvcnJlc3BvbmRpbmcgdG8gdGhvc2Ugb2Zmc2V0cwogICAgdGhpcy5zdGFydExvYyA9IHRoaXMuZW5kTG9jID0gdGhpcy5jdXJQb3NpdGlvbigpOwoKICAgIC8vIFBvc2l0aW9uIGluZm9ybWF0aW9uIGZvciB0aGUgcHJldmlvdXMgdG9rZW4KICAgIHRoaXMubGFzdFRva0VuZExvYyA9IHRoaXMubGFzdFRva1N0YXJ0TG9jID0gbnVsbDsKICAgIHRoaXMubGFzdFRva1N0YXJ0ID0gdGhpcy5sYXN0VG9rRW5kID0gdGhpcy5wb3M7CgogICAgLy8gVGhlIGNvbnRleHQgc3RhY2sgaXMgdXNlZCB0byBzdXBlcmZpY2lhbGx5IHRyYWNrIHN5bnRhY3RpYwogICAgLy8gY29udGV4dCB0byBwcmVkaWN0IHdoZXRoZXIgYSByZWd1bGFyIGV4cHJlc3Npb24gaXMgYWxsb3dlZCBpbiBhCiAgICAvLyBnaXZlbiBwb3NpdGlvbi4KICAgIHRoaXMuY29udGV4dCA9IHRoaXMuaW5pdGlhbENvbnRleHQoKTsKICAgIHRoaXMuZXhwckFsbG93ZWQgPSB0cnVlOwoKICAgIC8vIEZpZ3VyZSBvdXQgaWYgaXQncyBhIG1vZHVsZSBjb2RlLgogICAgdGhpcy5pbk1vZHVsZSA9IG9wdGlvbnMuc291cmNlVHlwZSA9PT0gIm1vZHVsZSI7CiAgICB0aGlzLnN0cmljdCA9IHRoaXMuaW5Nb2R1bGUgfHwgdGhpcy5zdHJpY3REaXJlY3RpdmUodGhpcy5wb3MpOwoKICAgIC8vIFVzZWQgdG8gc2lnbmlmeSB0aGUgc3RhcnQgb2YgYSBwb3RlbnRpYWwgYXJyb3cgZnVuY3Rpb24KICAgIHRoaXMucG90ZW50aWFsQXJyb3dBdCA9IC0xOwogICAgdGhpcy5wb3RlbnRpYWxBcnJvd0luRm9yQXdhaXQgPSBmYWxzZTsKCiAgICAvLyBQb3NpdGlvbnMgdG8gZGVsYXllZC1jaGVjayB0aGF0IHlpZWxkL2F3YWl0IGRvZXMgbm90IGV4aXN0IGluIGRlZmF1bHQgcGFyYW1ldGVycy4KICAgIHRoaXMueWllbGRQb3MgPSB0aGlzLmF3YWl0UG9zID0gdGhpcy5hd2FpdElkZW50UG9zID0gMDsKICAgIC8vIExhYmVscyBpbiBzY29wZS4KICAgIHRoaXMubGFiZWxzID0gW107CiAgICAvLyBUaHVzLWZhciB1bmRlZmluZWQgZXhwb3J0cy4KICAgIHRoaXMudW5kZWZpbmVkRXhwb3J0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgogICAgLy8gSWYgZW5hYmxlZCwgc2tpcCBsZWFkaW5nIGhhc2hiYW5nIGxpbmUuCiAgICBpZiAodGhpcy5wb3MgPT09IDAgJiYgb3B0aW9ucy5hbGxvd0hhc2hCYW5nICYmIHRoaXMuaW5wdXQuc2xpY2UoMCwgMikgPT09ICIjISIpCiAgICAgIHsgdGhpcy5za2lwTGluZUNvbW1lbnQoMik7IH0KCiAgICAvLyBTY29wZSB0cmFja2luZyBmb3IgZHVwbGljYXRlIHZhcmlhYmxlIG5hbWVzIChzZWUgc2NvcGUuanMpCiAgICB0aGlzLnNjb3BlU3RhY2sgPSBbXTsKICAgIHRoaXMuZW50ZXJTY29wZShTQ09QRV9UT1ApOwoKICAgIC8vIEZvciBSZWdFeHAgdmFsaWRhdGlvbgogICAgdGhpcy5yZWdleHBTdGF0ZSA9IG51bGw7CgogICAgLy8gVGhlIHN0YWNrIG9mIHByaXZhdGUgbmFtZXMuCiAgICAvLyBFYWNoIGVsZW1lbnQgaGFzIHR3byBwcm9wZXJ0aWVzOiAnZGVjbGFyZWQnIGFuZCAndXNlZCcuCiAgICAvLyBXaGVuIGl0IGV4aXRlZCBmcm9tIHRoZSBvdXRlcm1vc3QgY2xhc3MgZGVmaW5pdGlvbiwgYWxsIHVzZWQgcHJpdmF0ZSBuYW1lcyBtdXN0IGJlIGRlY2xhcmVkLgogICAgdGhpcy5wcml2YXRlTmFtZVN0YWNrID0gW107CiAgfTsKCiAgdmFyIHByb3RvdHlwZUFjY2Vzc29ycyA9IHsgaW5GdW5jdGlvbjogeyBjb25maWd1cmFibGU6IHRydWUgfSxpbkdlbmVyYXRvcjogeyBjb25maWd1cmFibGU6IHRydWUgfSxpbkFzeW5jOiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9LGNhbkF3YWl0OiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9LGFsbG93U3VwZXI6IHsgY29uZmlndXJhYmxlOiB0cnVlIH0sYWxsb3dEaXJlY3RTdXBlcjogeyBjb25maWd1cmFibGU6IHRydWUgfSx0cmVhdEZ1bmN0aW9uc0FzVmFyOiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9LGFsbG93TmV3RG90VGFyZ2V0OiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9LGluQ2xhc3NTdGF0aWNCbG9jazogeyBjb25maWd1cmFibGU6IHRydWUgfSB9OwoKICBQYXJzZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gcGFyc2UgKCkgewogICAgdmFyIG5vZGUgPSB0aGlzLm9wdGlvbnMucHJvZ3JhbSB8fCB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgdGhpcy5uZXh0VG9rZW4oKTsKICAgIHJldHVybiB0aGlzLnBhcnNlVG9wTGV2ZWwobm9kZSkKICB9OwoKICBwcm90b3R5cGVBY2Nlc3NvcnMuaW5GdW5jdGlvbi5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAodGhpcy5jdXJyZW50VmFyU2NvcGUoKS5mbGFncyAmIFNDT1BFX0ZVTkNUSU9OKSA+IDAgfTsKCiAgcHJvdG90eXBlQWNjZXNzb3JzLmluR2VuZXJhdG9yLmdldCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh0aGlzLmN1cnJlbnRWYXJTY29wZSgpLmZsYWdzICYgU0NPUEVfR0VORVJBVE9SKSA+IDAgJiYgIXRoaXMuY3VycmVudFZhclNjb3BlKCkuaW5DbGFzc0ZpZWxkSW5pdCB9OwoKICBwcm90b3R5cGVBY2Nlc3NvcnMuaW5Bc3luYy5nZXQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAodGhpcy5jdXJyZW50VmFyU2NvcGUoKS5mbGFncyAmIFNDT1BFX0FTWU5DKSA+IDAgJiYgIXRoaXMuY3VycmVudFZhclNjb3BlKCkuaW5DbGFzc0ZpZWxkSW5pdCB9OwoKICBwcm90b3R5cGVBY2Nlc3NvcnMuY2FuQXdhaXQuZ2V0ID0gZnVuY3Rpb24gKCkgewogICAgZm9yICh2YXIgaSA9IHRoaXMuc2NvcGVTdGFjay5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlU3RhY2tbaV07CiAgICAgIGlmIChzY29wZS5pbkNsYXNzRmllbGRJbml0IHx8IHNjb3BlLmZsYWdzICYgU0NPUEVfQ0xBU1NfU1RBVElDX0JMT0NLKSB7IHJldHVybiBmYWxzZSB9CiAgICAgIGlmIChzY29wZS5mbGFncyAmIFNDT1BFX0ZVTkNUSU9OKSB7IHJldHVybiAoc2NvcGUuZmxhZ3MgJiBTQ09QRV9BU1lOQykgPiAwIH0KICAgIH0KICAgIHJldHVybiAodGhpcy5pbk1vZHVsZSAmJiB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTMpIHx8IHRoaXMub3B0aW9ucy5hbGxvd0F3YWl0T3V0c2lkZUZ1bmN0aW9uCiAgfTsKCiAgcHJvdG90eXBlQWNjZXNzb3JzLmFsbG93U3VwZXIuZ2V0ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHJlZiA9IHRoaXMuY3VycmVudFRoaXNTY29wZSgpOwogICAgICB2YXIgZmxhZ3MgPSByZWYuZmxhZ3M7CiAgICAgIHZhciBpbkNsYXNzRmllbGRJbml0ID0gcmVmLmluQ2xhc3NGaWVsZEluaXQ7CiAgICByZXR1cm4gKGZsYWdzICYgU0NPUEVfU1VQRVIpID4gMCB8fCBpbkNsYXNzRmllbGRJbml0IHx8IHRoaXMub3B0aW9ucy5hbGxvd1N1cGVyT3V0c2lkZU1ldGhvZAogIH07CgogIHByb3RvdHlwZUFjY2Vzc29ycy5hbGxvd0RpcmVjdFN1cGVyLmdldCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh0aGlzLmN1cnJlbnRUaGlzU2NvcGUoKS5mbGFncyAmIFNDT1BFX0RJUkVDVF9TVVBFUikgPiAwIH07CgogIHByb3RvdHlwZUFjY2Vzc29ycy50cmVhdEZ1bmN0aW9uc0FzVmFyLmdldCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMudHJlYXRGdW5jdGlvbnNBc1ZhckluU2NvcGUodGhpcy5jdXJyZW50U2NvcGUoKSkgfTsKCiAgcHJvdG90eXBlQWNjZXNzb3JzLmFsbG93TmV3RG90VGFyZ2V0LmdldCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciByZWYgPSB0aGlzLmN1cnJlbnRUaGlzU2NvcGUoKTsKICAgICAgdmFyIGZsYWdzID0gcmVmLmZsYWdzOwogICAgICB2YXIgaW5DbGFzc0ZpZWxkSW5pdCA9IHJlZi5pbkNsYXNzRmllbGRJbml0OwogICAgcmV0dXJuIChmbGFncyAmIChTQ09QRV9GVU5DVElPTiB8IFNDT1BFX0NMQVNTX1NUQVRJQ19CTE9DSykpID4gMCB8fCBpbkNsYXNzRmllbGRJbml0CiAgfTsKCiAgcHJvdG90eXBlQWNjZXNzb3JzLmluQ2xhc3NTdGF0aWNCbG9jay5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gKHRoaXMuY3VycmVudFZhclNjb3BlKCkuZmxhZ3MgJiBTQ09QRV9DTEFTU19TVEFUSUNfQkxPQ0spID4gMAogIH07CgogIFBhcnNlci5leHRlbmQgPSBmdW5jdGlvbiBleHRlbmQgKCkgewogICAgICB2YXIgcGx1Z2lucyA9IFtdLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOwogICAgICB3aGlsZSAoIGxlbi0tICkgcGx1Z2luc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiBdOwoKICAgIHZhciBjbHMgPSB0aGlzOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbHVnaW5zLmxlbmd0aDsgaSsrKSB7IGNscyA9IHBsdWdpbnNbaV0oY2xzKTsgfQogICAgcmV0dXJuIGNscwogIH07CgogIFBhcnNlci5wYXJzZSA9IGZ1bmN0aW9uIHBhcnNlIChpbnB1dCwgb3B0aW9ucykgewogICAgcmV0dXJuIG5ldyB0aGlzKG9wdGlvbnMsIGlucHV0KS5wYXJzZSgpCiAgfTsKCiAgUGFyc2VyLnBhcnNlRXhwcmVzc2lvbkF0ID0gZnVuY3Rpb24gcGFyc2VFeHByZXNzaW9uQXQgKGlucHV0LCBwb3MsIG9wdGlvbnMpIHsKICAgIHZhciBwYXJzZXIgPSBuZXcgdGhpcyhvcHRpb25zLCBpbnB1dCwgcG9zKTsKICAgIHBhcnNlci5uZXh0VG9rZW4oKTsKICAgIHJldHVybiBwYXJzZXIucGFyc2VFeHByZXNzaW9uKCkKICB9OwoKICBQYXJzZXIudG9rZW5pemVyID0gZnVuY3Rpb24gdG9rZW5pemVyIChpbnB1dCwgb3B0aW9ucykgewogICAgcmV0dXJuIG5ldyB0aGlzKG9wdGlvbnMsIGlucHV0KQogIH07CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCBQYXJzZXIucHJvdG90eXBlLCBwcm90b3R5cGVBY2Nlc3NvcnMgKTsKCiAgdmFyIHBwJDkgPSBQYXJzZXIucHJvdG90eXBlOwoKICAvLyAjIyBQYXJzZXIgdXRpbGl0aWVzCgogIHZhciBsaXRlcmFsID0gL14oPzonKCg/OlxcLnxbXidcXF0pKj8pJ3wiKCg/OlxcLnxbXiJcXF0pKj8pIikvOwogIHBwJDkuc3RyaWN0RGlyZWN0aXZlID0gZnVuY3Rpb24oc3RhcnQpIHsKICAgIGZvciAoOzspIHsKICAgICAgLy8gVHJ5IHRvIGZpbmQgc3RyaW5nIGxpdGVyYWwuCiAgICAgIHNraXBXaGl0ZVNwYWNlLmxhc3RJbmRleCA9IHN0YXJ0OwogICAgICBzdGFydCArPSBza2lwV2hpdGVTcGFjZS5leGVjKHRoaXMuaW5wdXQpWzBdLmxlbmd0aDsKICAgICAgdmFyIG1hdGNoID0gbGl0ZXJhbC5leGVjKHRoaXMuaW5wdXQuc2xpY2Uoc3RhcnQpKTsKICAgICAgaWYgKCFtYXRjaCkgeyByZXR1cm4gZmFsc2UgfQogICAgICBpZiAoKG1hdGNoWzFdIHx8IG1hdGNoWzJdKSA9PT0gInVzZSBzdHJpY3QiKSB7CiAgICAgICAgc2tpcFdoaXRlU3BhY2UubGFzdEluZGV4ID0gc3RhcnQgKyBtYXRjaFswXS5sZW5ndGg7CiAgICAgICAgdmFyIHNwYWNlQWZ0ZXIgPSBza2lwV2hpdGVTcGFjZS5leGVjKHRoaXMuaW5wdXQpLCBlbmQgPSBzcGFjZUFmdGVyLmluZGV4ICsgc3BhY2VBZnRlclswXS5sZW5ndGg7CiAgICAgICAgdmFyIG5leHQgPSB0aGlzLmlucHV0LmNoYXJBdChlbmQpOwogICAgICAgIHJldHVybiBuZXh0ID09PSAiOyIgfHwgbmV4dCA9PT0gIn0iIHx8CiAgICAgICAgICAobGluZUJyZWFrLnRlc3Qoc3BhY2VBZnRlclswXSkgJiYKICAgICAgICAgICAhKC9bKGAuWytcLS8qJTw+PSw/XiZdLy50ZXN0KG5leHQpIHx8IG5leHQgPT09ICIhIiAmJiB0aGlzLmlucHV0LmNoYXJBdChlbmQgKyAxKSA9PT0gIj0iKSkKICAgICAgfQogICAgICBzdGFydCArPSBtYXRjaFswXS5sZW5ndGg7CgogICAgICAvLyBTa2lwIHNlbWljb2xvbiwgaWYgYW55LgogICAgICBza2lwV2hpdGVTcGFjZS5sYXN0SW5kZXggPSBzdGFydDsKICAgICAgc3RhcnQgKz0gc2tpcFdoaXRlU3BhY2UuZXhlYyh0aGlzLmlucHV0KVswXS5sZW5ndGg7CiAgICAgIGlmICh0aGlzLmlucHV0W3N0YXJ0XSA9PT0gIjsiKQogICAgICAgIHsgc3RhcnQrKzsgfQogICAgfQogIH07CgogIC8vIFByZWRpY2F0ZSB0aGF0IHRlc3RzIHdoZXRoZXIgdGhlIG5leHQgdG9rZW4gaXMgb2YgdGhlIGdpdmVuCiAgLy8gdHlwZSwgYW5kIGlmIHllcywgY29uc3VtZXMgaXQgYXMgYSBzaWRlIGVmZmVjdC4KCiAgcHAkOS5lYXQgPSBmdW5jdGlvbih0eXBlKSB7CiAgICBpZiAodGhpcy50eXBlID09PSB0eXBlKSB7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICByZXR1cm4gdHJ1ZQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZhbHNlCiAgICB9CiAgfTsKCiAgLy8gVGVzdHMgd2hldGhlciBwYXJzZWQgdG9rZW4gaXMgYSBjb250ZXh0dWFsIGtleXdvcmQuCgogIHBwJDkuaXNDb250ZXh0dWFsID0gZnVuY3Rpb24obmFtZSkgewogICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gdHlwZXMkMS5uYW1lICYmIHRoaXMudmFsdWUgPT09IG5hbWUgJiYgIXRoaXMuY29udGFpbnNFc2MKICB9OwoKICAvLyBDb25zdW1lcyBjb250ZXh0dWFsIGtleXdvcmQgaWYgcG9zc2libGUuCgogIHBwJDkuZWF0Q29udGV4dHVhbCA9IGZ1bmN0aW9uKG5hbWUpIHsKICAgIGlmICghdGhpcy5pc0NvbnRleHR1YWwobmFtZSkpIHsgcmV0dXJuIGZhbHNlIH0KICAgIHRoaXMubmV4dCgpOwogICAgcmV0dXJuIHRydWUKICB9OwoKICAvLyBBc3NlcnRzIHRoYXQgZm9sbG93aW5nIHRva2VuIGlzIGdpdmVuIGNvbnRleHR1YWwga2V5d29yZC4KCiAgcHAkOS5leHBlY3RDb250ZXh0dWFsID0gZnVuY3Rpb24obmFtZSkgewogICAgaWYgKCF0aGlzLmVhdENvbnRleHR1YWwobmFtZSkpIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KICB9OwoKICAvLyBUZXN0IHdoZXRoZXIgYSBzZW1pY29sb24gY2FuIGJlIGluc2VydGVkIGF0IHRoZSBjdXJyZW50IHBvc2l0aW9uLgoKICBwcCQ5LmNhbkluc2VydFNlbWljb2xvbiA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gdHlwZXMkMS5lb2YgfHwKICAgICAgdGhpcy50eXBlID09PSB0eXBlcyQxLmJyYWNlUiB8fAogICAgICBsaW5lQnJlYWsudGVzdCh0aGlzLmlucHV0LnNsaWNlKHRoaXMubGFzdFRva0VuZCwgdGhpcy5zdGFydCkpCiAgfTsKCiAgcHAkOS5pbnNlcnRTZW1pY29sb24gPSBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmNhbkluc2VydFNlbWljb2xvbigpKSB7CiAgICAgIGlmICh0aGlzLm9wdGlvbnMub25JbnNlcnRlZFNlbWljb2xvbikKICAgICAgICB7IHRoaXMub3B0aW9ucy5vbkluc2VydGVkU2VtaWNvbG9uKHRoaXMubGFzdFRva0VuZCwgdGhpcy5sYXN0VG9rRW5kTG9jKTsgfQogICAgICByZXR1cm4gdHJ1ZQogICAgfQogIH07CgogIC8vIENvbnN1bWUgYSBzZW1pY29sb24sIG9yLCBmYWlsaW5nIHRoYXQsIHNlZSBpZiB3ZSBhcmUgYWxsb3dlZCB0bwogIC8vIHByZXRlbmQgdGhhdCB0aGVyZSBpcyBhIHNlbWljb2xvbiBhdCB0aGlzIHBvc2l0aW9uLgoKICBwcCQ5LnNlbWljb2xvbiA9IGZ1bmN0aW9uKCkgewogICAgaWYgKCF0aGlzLmVhdCh0eXBlcyQxLnNlbWkpICYmICF0aGlzLmluc2VydFNlbWljb2xvbigpKSB7IHRoaXMudW5leHBlY3RlZCgpOyB9CiAgfTsKCiAgcHAkOS5hZnRlclRyYWlsaW5nQ29tbWEgPSBmdW5jdGlvbih0b2tUeXBlLCBub3ROZXh0KSB7CiAgICBpZiAodGhpcy50eXBlID09PSB0b2tUeXBlKSB7CiAgICAgIGlmICh0aGlzLm9wdGlvbnMub25UcmFpbGluZ0NvbW1hKQogICAgICAgIHsgdGhpcy5vcHRpb25zLm9uVHJhaWxpbmdDb21tYSh0aGlzLmxhc3RUb2tTdGFydCwgdGhpcy5sYXN0VG9rU3RhcnRMb2MpOyB9CiAgICAgIGlmICghbm90TmV4dCkKICAgICAgICB7IHRoaXMubmV4dCgpOyB9CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgfTsKCiAgLy8gRXhwZWN0IGEgdG9rZW4gb2YgYSBnaXZlbiB0eXBlLiBJZiBmb3VuZCwgY29uc3VtZSBpdCwgb3RoZXJ3aXNlLAogIC8vIHJhaXNlIGFuIHVuZXhwZWN0ZWQgdG9rZW4gZXJyb3IuCgogIHBwJDkuZXhwZWN0ID0gZnVuY3Rpb24odHlwZSkgewogICAgdGhpcy5lYXQodHlwZSkgfHwgdGhpcy51bmV4cGVjdGVkKCk7CiAgfTsKCiAgLy8gUmFpc2UgYW4gdW5leHBlY3RlZCB0b2tlbiBlcnJvci4KCiAgcHAkOS51bmV4cGVjdGVkID0gZnVuY3Rpb24ocG9zKSB7CiAgICB0aGlzLnJhaXNlKHBvcyAhPSBudWxsID8gcG9zIDogdGhpcy5zdGFydCwgIlVuZXhwZWN0ZWQgdG9rZW4iKTsKICB9OwoKICBmdW5jdGlvbiBEZXN0cnVjdHVyaW5nRXJyb3JzKCkgewogICAgdGhpcy5zaG9ydGhhbmRBc3NpZ24gPQogICAgdGhpcy50cmFpbGluZ0NvbW1hID0KICAgIHRoaXMucGFyZW50aGVzaXplZEFzc2lnbiA9CiAgICB0aGlzLnBhcmVudGhlc2l6ZWRCaW5kID0KICAgIHRoaXMuZG91YmxlUHJvdG8gPQogICAgICAtMTsKICB9CgogIHBwJDkuY2hlY2tQYXR0ZXJuRXJyb3JzID0gZnVuY3Rpb24ocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycywgaXNBc3NpZ24pIHsKICAgIGlmICghcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykgeyByZXR1cm4gfQogICAgaWYgKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMudHJhaWxpbmdDb21tYSA+IC0xKQogICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnRyYWlsaW5nQ29tbWEsICJDb21tYSBpcyBub3QgcGVybWl0dGVkIGFmdGVyIHRoZSByZXN0IGVsZW1lbnQiKTsgfQogICAgdmFyIHBhcmVucyA9IGlzQXNzaWduID8gcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5wYXJlbnRoZXNpemVkQXNzaWduIDogcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5wYXJlbnRoZXNpemVkQmluZDsKICAgIGlmIChwYXJlbnMgPiAtMSkgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUocGFyZW5zLCAiUGFyZW50aGVzaXplZCBwYXR0ZXJuIik7IH0KICB9OwoKICBwcCQ5LmNoZWNrRXhwcmVzc2lvbkVycm9ycyA9IGZ1bmN0aW9uKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIGFuZFRocm93KSB7CiAgICBpZiAoIXJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsgcmV0dXJuIGZhbHNlIH0KICAgIHZhciBzaG9ydGhhbmRBc3NpZ24gPSByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnNob3J0aGFuZEFzc2lnbjsKICAgIHZhciBkb3VibGVQcm90byA9IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMuZG91YmxlUHJvdG87CiAgICBpZiAoIWFuZFRocm93KSB7IHJldHVybiBzaG9ydGhhbmRBc3NpZ24gPj0gMCB8fCBkb3VibGVQcm90byA+PSAwIH0KICAgIGlmIChzaG9ydGhhbmRBc3NpZ24gPj0gMCkKICAgICAgeyB0aGlzLnJhaXNlKHNob3J0aGFuZEFzc2lnbiwgIlNob3J0aGFuZCBwcm9wZXJ0eSBhc3NpZ25tZW50cyBhcmUgdmFsaWQgb25seSBpbiBkZXN0cnVjdHVyaW5nIHBhdHRlcm5zIik7IH0KICAgIGlmIChkb3VibGVQcm90byA+PSAwKQogICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShkb3VibGVQcm90bywgIlJlZGVmaW5pdGlvbiBvZiBfX3Byb3RvX18gcHJvcGVydHkiKTsgfQogIH07CgogIHBwJDkuY2hlY2tZaWVsZEF3YWl0SW5EZWZhdWx0UGFyYW1zID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy55aWVsZFBvcyAmJiAoIXRoaXMuYXdhaXRQb3MgfHwgdGhpcy55aWVsZFBvcyA8IHRoaXMuYXdhaXRQb3MpKQogICAgICB7IHRoaXMucmFpc2UodGhpcy55aWVsZFBvcywgIllpZWxkIGV4cHJlc3Npb24gY2Fubm90IGJlIGEgZGVmYXVsdCB2YWx1ZSIpOyB9CiAgICBpZiAodGhpcy5hd2FpdFBvcykKICAgICAgeyB0aGlzLnJhaXNlKHRoaXMuYXdhaXRQb3MsICJBd2FpdCBleHByZXNzaW9uIGNhbm5vdCBiZSBhIGRlZmF1bHQgdmFsdWUiKTsgfQogIH07CgogIHBwJDkuaXNTaW1wbGVBc3NpZ25UYXJnZXQgPSBmdW5jdGlvbihleHByKSB7CiAgICBpZiAoZXhwci50eXBlID09PSAiUGFyZW50aGVzaXplZEV4cHJlc3Npb24iKQogICAgICB7IHJldHVybiB0aGlzLmlzU2ltcGxlQXNzaWduVGFyZ2V0KGV4cHIuZXhwcmVzc2lvbikgfQogICAgcmV0dXJuIGV4cHIudHlwZSA9PT0gIklkZW50aWZpZXIiIHx8IGV4cHIudHlwZSA9PT0gIk1lbWJlckV4cHJlc3Npb24iCiAgfTsKCiAgdmFyIHBwJDggPSBQYXJzZXIucHJvdG90eXBlOwoKICAvLyAjIyMgU3RhdGVtZW50IHBhcnNpbmcKCiAgLy8gUGFyc2UgYSBwcm9ncmFtLiBJbml0aWFsaXplcyB0aGUgcGFyc2VyLCByZWFkcyBhbnkgbnVtYmVyIG9mCiAgLy8gc3RhdGVtZW50cywgYW5kIHdyYXBzIHRoZW0gaW4gYSBQcm9ncmFtIG5vZGUuICBPcHRpb25hbGx5IHRha2VzIGEKICAvLyBgcHJvZ3JhbWAgYXJndW1lbnQuICBJZiBwcmVzZW50LCB0aGUgc3RhdGVtZW50cyB3aWxsIGJlIGFwcGVuZGVkCiAgLy8gdG8gaXRzIGJvZHkgaW5zdGVhZCBvZiBjcmVhdGluZyBhIG5ldyBub2RlLgoKICBwcCQ4LnBhcnNlVG9wTGV2ZWwgPSBmdW5jdGlvbihub2RlKSB7CiAgICB2YXIgZXhwb3J0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICBpZiAoIW5vZGUuYm9keSkgeyBub2RlLmJvZHkgPSBbXTsgfQogICAgd2hpbGUgKHRoaXMudHlwZSAhPT0gdHlwZXMkMS5lb2YpIHsKICAgICAgdmFyIHN0bXQgPSB0aGlzLnBhcnNlU3RhdGVtZW50KG51bGwsIHRydWUsIGV4cG9ydHMpOwogICAgICBub2RlLmJvZHkucHVzaChzdG10KTsKICAgIH0KICAgIGlmICh0aGlzLmluTW9kdWxlKQogICAgICB7IGZvciAodmFyIGkgPSAwLCBsaXN0ID0gT2JqZWN0LmtleXModGhpcy51bmRlZmluZWRFeHBvcnRzKTsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpCiAgICAgICAgewogICAgICAgICAgdmFyIG5hbWUgPSBsaXN0W2ldOwoKICAgICAgICAgIHRoaXMucmFpc2VSZWNvdmVyYWJsZSh0aGlzLnVuZGVmaW5lZEV4cG9ydHNbbmFtZV0uc3RhcnQsICgiRXhwb3J0ICciICsgbmFtZSArICInIGlzIG5vdCBkZWZpbmVkIikpOwogICAgICAgIH0gfQogICAgdGhpcy5hZGFwdERpcmVjdGl2ZVByb2xvZ3VlKG5vZGUuYm9keSk7CiAgICB0aGlzLm5leHQoKTsKICAgIG5vZGUuc291cmNlVHlwZSA9IHRoaXMub3B0aW9ucy5zb3VyY2VUeXBlOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiUHJvZ3JhbSIpCiAgfTsKCiAgdmFyIGxvb3BMYWJlbCA9IHtraW5kOiAibG9vcCJ9LCBzd2l0Y2hMYWJlbCA9IHtraW5kOiAic3dpdGNoIn07CgogIHBwJDguaXNMZXQgPSBmdW5jdGlvbihjb250ZXh0KSB7CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uIDwgNiB8fCAhdGhpcy5pc0NvbnRleHR1YWwoImxldCIpKSB7IHJldHVybiBmYWxzZSB9CiAgICBza2lwV2hpdGVTcGFjZS5sYXN0SW5kZXggPSB0aGlzLnBvczsKICAgIHZhciBza2lwID0gc2tpcFdoaXRlU3BhY2UuZXhlYyh0aGlzLmlucHV0KTsKICAgIHZhciBuZXh0ID0gdGhpcy5wb3MgKyBza2lwWzBdLmxlbmd0aCwgbmV4dENoID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KG5leHQpOwogICAgLy8gRm9yIGFtYmlndW91cyBjYXNlcywgZGV0ZXJtaW5lIGlmIGEgTGV4aWNhbERlY2xhcmF0aW9uIChvciBvbmx5IGEKICAgIC8vIFN0YXRlbWVudCkgaXMgYWxsb3dlZCBoZXJlLiBJZiBjb250ZXh0IGlzIG5vdCBlbXB0eSB0aGVuIG9ubHkgYSBTdGF0ZW1lbnQKICAgIC8vIGlzIGFsbG93ZWQuIEhvd2V2ZXIsIGBsZXQgW2AgaXMgYW4gZXhwbGljaXQgbmVnYXRpdmUgbG9va2FoZWFkIGZvcgogICAgLy8gRXhwcmVzc2lvblN0YXRlbWVudCwgc28gc3BlY2lhbC1jYXNlIGl0IGZpcnN0LgogICAgaWYgKG5leHRDaCA9PT0gOTEgfHwgbmV4dENoID09PSA5MiB8fCBuZXh0Q2ggPiAweGQ3ZmYgJiYgbmV4dENoIDwgMHhkYzAwKSB7IHJldHVybiB0cnVlIH0gLy8gJ1snLCAnLycsIGFzdHJhbAogICAgaWYgKGNvbnRleHQpIHsgcmV0dXJuIGZhbHNlIH0KCiAgICBpZiAobmV4dENoID09PSAxMjMpIHsgcmV0dXJuIHRydWUgfSAvLyAneycKICAgIGlmIChpc0lkZW50aWZpZXJTdGFydChuZXh0Q2gsIHRydWUpKSB7CiAgICAgIHZhciBwb3MgPSBuZXh0ICsgMTsKICAgICAgd2hpbGUgKGlzSWRlbnRpZmllckNoYXIobmV4dENoID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHBvcyksIHRydWUpKSB7ICsrcG9zOyB9CiAgICAgIGlmIChuZXh0Q2ggPT09IDkyIHx8IG5leHRDaCA+IDB4ZDdmZiAmJiBuZXh0Q2ggPCAweGRjMDApIHsgcmV0dXJuIHRydWUgfQogICAgICB2YXIgaWRlbnQgPSB0aGlzLmlucHV0LnNsaWNlKG5leHQsIHBvcyk7CiAgICAgIGlmICgha2V5d29yZFJlbGF0aW9uYWxPcGVyYXRvci50ZXN0KGlkZW50KSkgeyByZXR1cm4gdHJ1ZSB9CiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBjaGVjayAnYXN5bmMgW25vIExpbmVUZXJtaW5hdG9yIGhlcmVdIGZ1bmN0aW9uJwogIC8vIC0gJ2FzeW5jIC8qZm9vKi8gZnVuY3Rpb24nIGlzIE9LLgogIC8vIC0gJ2FzeW5jIC8qXG4qLyBmdW5jdGlvbicgaXMgaW52YWxpZC4KICBwcCQ4LmlzQXN5bmNGdW5jdGlvbiA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA8IDggfHwgIXRoaXMuaXNDb250ZXh0dWFsKCJhc3luYyIpKQogICAgICB7IHJldHVybiBmYWxzZSB9CgogICAgc2tpcFdoaXRlU3BhY2UubGFzdEluZGV4ID0gdGhpcy5wb3M7CiAgICB2YXIgc2tpcCA9IHNraXBXaGl0ZVNwYWNlLmV4ZWModGhpcy5pbnB1dCk7CiAgICB2YXIgbmV4dCA9IHRoaXMucG9zICsgc2tpcFswXS5sZW5ndGgsIGFmdGVyOwogICAgcmV0dXJuICFsaW5lQnJlYWsudGVzdCh0aGlzLmlucHV0LnNsaWNlKHRoaXMucG9zLCBuZXh0KSkgJiYKICAgICAgdGhpcy5pbnB1dC5zbGljZShuZXh0LCBuZXh0ICsgOCkgPT09ICJmdW5jdGlvbiIgJiYKICAgICAgKG5leHQgKyA4ID09PSB0aGlzLmlucHV0Lmxlbmd0aCB8fAogICAgICAgIShpc0lkZW50aWZpZXJDaGFyKGFmdGVyID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KG5leHQgKyA4KSkgfHwgYWZ0ZXIgPiAweGQ3ZmYgJiYgYWZ0ZXIgPCAweGRjMDApKQogIH07CgogIC8vIFBhcnNlIGEgc2luZ2xlIHN0YXRlbWVudC4KICAvLwogIC8vIElmIGV4cGVjdGluZyBhIHN0YXRlbWVudCBhbmQgZmluZGluZyBhIHNsYXNoIG9wZXJhdG9yLCBwYXJzZSBhCiAgLy8gcmVndWxhciBleHByZXNzaW9uIGxpdGVyYWwuIFRoaXMgaXMgdG8gaGFuZGxlIGNhc2VzIGxpa2UKICAvLyBgaWYgKGZvbykgL2JsYWgvLmV4ZWMoZm9vKWAsIHdoZXJlIGxvb2tpbmcgYXQgdGhlIHByZXZpb3VzIHRva2VuCiAgLy8gZG9lcyBub3QgaGVscC4KCiAgcHAkOC5wYXJzZVN0YXRlbWVudCA9IGZ1bmN0aW9uKGNvbnRleHQsIHRvcExldmVsLCBleHBvcnRzKSB7CiAgICB2YXIgc3RhcnR0eXBlID0gdGhpcy50eXBlLCBub2RlID0gdGhpcy5zdGFydE5vZGUoKSwga2luZDsKCiAgICBpZiAodGhpcy5pc0xldChjb250ZXh0KSkgewogICAgICBzdGFydHR5cGUgPSB0eXBlcyQxLl92YXI7CiAgICAgIGtpbmQgPSAibGV0IjsKICAgIH0KCiAgICAvLyBNb3N0IHR5cGVzIG9mIHN0YXRlbWVudHMgYXJlIHJlY29nbml6ZWQgYnkgdGhlIGtleXdvcmQgdGhleQogICAgLy8gc3RhcnQgd2l0aC4gTWFueSBhcmUgdHJpdmlhbCB0byBwYXJzZSwgc29tZSByZXF1aXJlIGEgYml0IG9mCiAgICAvLyBjb21wbGV4aXR5LgoKICAgIHN3aXRjaCAoc3RhcnR0eXBlKSB7CiAgICBjYXNlIHR5cGVzJDEuX2JyZWFrOiBjYXNlIHR5cGVzJDEuX2NvbnRpbnVlOiByZXR1cm4gdGhpcy5wYXJzZUJyZWFrQ29udGludWVTdGF0ZW1lbnQobm9kZSwgc3RhcnR0eXBlLmtleXdvcmQpCiAgICBjYXNlIHR5cGVzJDEuX2RlYnVnZ2VyOiByZXR1cm4gdGhpcy5wYXJzZURlYnVnZ2VyU3RhdGVtZW50KG5vZGUpCiAgICBjYXNlIHR5cGVzJDEuX2RvOiByZXR1cm4gdGhpcy5wYXJzZURvU3RhdGVtZW50KG5vZGUpCiAgICBjYXNlIHR5cGVzJDEuX2ZvcjogcmV0dXJuIHRoaXMucGFyc2VGb3JTdGF0ZW1lbnQobm9kZSkKICAgIGNhc2UgdHlwZXMkMS5fZnVuY3Rpb246CiAgICAgIC8vIEZ1bmN0aW9uIGFzIHNvbGUgYm9keSBvZiBlaXRoZXIgYW4gaWYgc3RhdGVtZW50IG9yIGEgbGFiZWxlZCBzdGF0ZW1lbnQKICAgICAgLy8gd29ya3MsIGJ1dCBub3Qgd2hlbiBpdCBpcyBwYXJ0IG9mIGEgbGFiZWxlZCBzdGF0ZW1lbnQgdGhhdCBpcyB0aGUgc29sZQogICAgICAvLyBib2R5IG9mIGFuIGlmIHN0YXRlbWVudC4KICAgICAgaWYgKChjb250ZXh0ICYmICh0aGlzLnN0cmljdCB8fCBjb250ZXh0ICE9PSAiaWYiICYmIGNvbnRleHQgIT09ICJsYWJlbCIpKSAmJiB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgICByZXR1cm4gdGhpcy5wYXJzZUZ1bmN0aW9uU3RhdGVtZW50KG5vZGUsIGZhbHNlLCAhY29udGV4dCkKICAgIGNhc2UgdHlwZXMkMS5fY2xhc3M6CiAgICAgIGlmIChjb250ZXh0KSB7IHRoaXMudW5leHBlY3RlZCgpOyB9CiAgICAgIHJldHVybiB0aGlzLnBhcnNlQ2xhc3Mobm9kZSwgdHJ1ZSkKICAgIGNhc2UgdHlwZXMkMS5faWY6IHJldHVybiB0aGlzLnBhcnNlSWZTdGF0ZW1lbnQobm9kZSkKICAgIGNhc2UgdHlwZXMkMS5fcmV0dXJuOiByZXR1cm4gdGhpcy5wYXJzZVJldHVyblN0YXRlbWVudChub2RlKQogICAgY2FzZSB0eXBlcyQxLl9zd2l0Y2g6IHJldHVybiB0aGlzLnBhcnNlU3dpdGNoU3RhdGVtZW50KG5vZGUpCiAgICBjYXNlIHR5cGVzJDEuX3Rocm93OiByZXR1cm4gdGhpcy5wYXJzZVRocm93U3RhdGVtZW50KG5vZGUpCiAgICBjYXNlIHR5cGVzJDEuX3RyeTogcmV0dXJuIHRoaXMucGFyc2VUcnlTdGF0ZW1lbnQobm9kZSkKICAgIGNhc2UgdHlwZXMkMS5fY29uc3Q6IGNhc2UgdHlwZXMkMS5fdmFyOgogICAgICBraW5kID0ga2luZCB8fCB0aGlzLnZhbHVlOwogICAgICBpZiAoY29udGV4dCAmJiBraW5kICE9PSAidmFyIikgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgICByZXR1cm4gdGhpcy5wYXJzZVZhclN0YXRlbWVudChub2RlLCBraW5kKQogICAgY2FzZSB0eXBlcyQxLl93aGlsZTogcmV0dXJuIHRoaXMucGFyc2VXaGlsZVN0YXRlbWVudChub2RlKQogICAgY2FzZSB0eXBlcyQxLl93aXRoOiByZXR1cm4gdGhpcy5wYXJzZVdpdGhTdGF0ZW1lbnQobm9kZSkKICAgIGNhc2UgdHlwZXMkMS5icmFjZUw6IHJldHVybiB0aGlzLnBhcnNlQmxvY2sodHJ1ZSwgbm9kZSkKICAgIGNhc2UgdHlwZXMkMS5zZW1pOiByZXR1cm4gdGhpcy5wYXJzZUVtcHR5U3RhdGVtZW50KG5vZGUpCiAgICBjYXNlIHR5cGVzJDEuX2V4cG9ydDoKICAgIGNhc2UgdHlwZXMkMS5faW1wb3J0OgogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID4gMTAgJiYgc3RhcnR0eXBlID09PSB0eXBlcyQxLl9pbXBvcnQpIHsKICAgICAgICBza2lwV2hpdGVTcGFjZS5sYXN0SW5kZXggPSB0aGlzLnBvczsKICAgICAgICB2YXIgc2tpcCA9IHNraXBXaGl0ZVNwYWNlLmV4ZWModGhpcy5pbnB1dCk7CiAgICAgICAgdmFyIG5leHQgPSB0aGlzLnBvcyArIHNraXBbMF0ubGVuZ3RoLCBuZXh0Q2ggPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQobmV4dCk7CiAgICAgICAgaWYgKG5leHRDaCA9PT0gNDAgfHwgbmV4dENoID09PSA0NikgLy8gJygnIG9yICcuJwogICAgICAgICAgeyByZXR1cm4gdGhpcy5wYXJzZUV4cHJlc3Npb25TdGF0ZW1lbnQobm9kZSwgdGhpcy5wYXJzZUV4cHJlc3Npb24oKSkgfQogICAgICB9CgogICAgICBpZiAoIXRoaXMub3B0aW9ucy5hbGxvd0ltcG9ydEV4cG9ydEV2ZXJ5d2hlcmUpIHsKICAgICAgICBpZiAoIXRvcExldmVsKQogICAgICAgICAgeyB0aGlzLnJhaXNlKHRoaXMuc3RhcnQsICInaW1wb3J0JyBhbmQgJ2V4cG9ydCcgbWF5IG9ubHkgYXBwZWFyIGF0IHRoZSB0b3AgbGV2ZWwiKTsgfQogICAgICAgIGlmICghdGhpcy5pbk1vZHVsZSkKICAgICAgICAgIHsgdGhpcy5yYWlzZSh0aGlzLnN0YXJ0LCAiJ2ltcG9ydCcgYW5kICdleHBvcnQnIG1heSBhcHBlYXIgb25seSB3aXRoICdzb3VyY2VUeXBlOiBtb2R1bGUnIik7IH0KICAgICAgfQogICAgICByZXR1cm4gc3RhcnR0eXBlID09PSB0eXBlcyQxLl9pbXBvcnQgPyB0aGlzLnBhcnNlSW1wb3J0KG5vZGUpIDogdGhpcy5wYXJzZUV4cG9ydChub2RlLCBleHBvcnRzKQoKICAgICAgLy8gSWYgdGhlIHN0YXRlbWVudCBkb2VzIG5vdCBzdGFydCB3aXRoIGEgc3RhdGVtZW50IGtleXdvcmQgb3IgYQogICAgICAvLyBicmFjZSwgaXQncyBhbiBFeHByZXNzaW9uU3RhdGVtZW50IG9yIExhYmVsZWRTdGF0ZW1lbnQuIFdlCiAgICAgIC8vIHNpbXBseSBzdGFydCBwYXJzaW5nIGFuIGV4cHJlc3Npb24sIGFuZCBhZnRlcndhcmRzLCBpZiB0aGUKICAgICAgLy8gbmV4dCB0b2tlbiBpcyBhIGNvbG9uIGFuZCB0aGUgZXhwcmVzc2lvbiB3YXMgYSBzaW1wbGUKICAgICAgLy8gSWRlbnRpZmllciBub2RlLCB3ZSBzd2l0Y2ggdG8gaW50ZXJwcmV0aW5nIGl0IGFzIGEgbGFiZWwuCiAgICBkZWZhdWx0OgogICAgICBpZiAodGhpcy5pc0FzeW5jRnVuY3Rpb24oKSkgewogICAgICAgIGlmIChjb250ZXh0KSB7IHRoaXMudW5leHBlY3RlZCgpOyB9CiAgICAgICAgdGhpcy5uZXh0KCk7CiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VGdW5jdGlvblN0YXRlbWVudChub2RlLCB0cnVlLCAhY29udGV4dCkKICAgICAgfQoKICAgICAgdmFyIG1heWJlTmFtZSA9IHRoaXMudmFsdWUsIGV4cHIgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpOwogICAgICBpZiAoc3RhcnR0eXBlID09PSB0eXBlcyQxLm5hbWUgJiYgZXhwci50eXBlID09PSAiSWRlbnRpZmllciIgJiYgdGhpcy5lYXQodHlwZXMkMS5jb2xvbikpCiAgICAgICAgeyByZXR1cm4gdGhpcy5wYXJzZUxhYmVsZWRTdGF0ZW1lbnQobm9kZSwgbWF5YmVOYW1lLCBleHByLCBjb250ZXh0KSB9CiAgICAgIGVsc2UgeyByZXR1cm4gdGhpcy5wYXJzZUV4cHJlc3Npb25TdGF0ZW1lbnQobm9kZSwgZXhwcikgfQogICAgfQogIH07CgogIHBwJDgucGFyc2VCcmVha0NvbnRpbnVlU3RhdGVtZW50ID0gZnVuY3Rpb24obm9kZSwga2V5d29yZCkgewogICAgdmFyIGlzQnJlYWsgPSBrZXl3b3JkID09PSAiYnJlYWsiOwogICAgdGhpcy5uZXh0KCk7CiAgICBpZiAodGhpcy5lYXQodHlwZXMkMS5zZW1pKSB8fCB0aGlzLmluc2VydFNlbWljb2xvbigpKSB7IG5vZGUubGFiZWwgPSBudWxsOyB9CiAgICBlbHNlIGlmICh0aGlzLnR5cGUgIT09IHR5cGVzJDEubmFtZSkgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgZWxzZSB7CiAgICAgIG5vZGUubGFiZWwgPSB0aGlzLnBhcnNlSWRlbnQoKTsKICAgICAgdGhpcy5zZW1pY29sb24oKTsKICAgIH0KCiAgICAvLyBWZXJpZnkgdGhhdCB0aGVyZSBpcyBhbiBhY3R1YWwgZGVzdGluYXRpb24gdG8gYnJlYWsgb3IKICAgIC8vIGNvbnRpbnVlIHRvLgogICAgdmFyIGkgPSAwOwogICAgZm9yICg7IGkgPCB0aGlzLmxhYmVscy5sZW5ndGg7ICsraSkgewogICAgICB2YXIgbGFiID0gdGhpcy5sYWJlbHNbaV07CiAgICAgIGlmIChub2RlLmxhYmVsID09IG51bGwgfHwgbGFiLm5hbWUgPT09IG5vZGUubGFiZWwubmFtZSkgewogICAgICAgIGlmIChsYWIua2luZCAhPSBudWxsICYmIChpc0JyZWFrIHx8IGxhYi5raW5kID09PSAibG9vcCIpKSB7IGJyZWFrIH0KICAgICAgICBpZiAobm9kZS5sYWJlbCAmJiBpc0JyZWFrKSB7IGJyZWFrIH0KICAgICAgfQogICAgfQogICAgaWYgKGkgPT09IHRoaXMubGFiZWxzLmxlbmd0aCkgeyB0aGlzLnJhaXNlKG5vZGUuc3RhcnQsICJVbnN5bnRhY3RpYyAiICsga2V5d29yZCk7IH0KICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgaXNCcmVhayA/ICJCcmVha1N0YXRlbWVudCIgOiAiQ29udGludWVTdGF0ZW1lbnQiKQogIH07CgogIHBwJDgucGFyc2VEZWJ1Z2dlclN0YXRlbWVudCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHRoaXMubmV4dCgpOwogICAgdGhpcy5zZW1pY29sb24oKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkRlYnVnZ2VyU3RhdGVtZW50IikKICB9OwoKICBwcCQ4LnBhcnNlRG9TdGF0ZW1lbnQgPSBmdW5jdGlvbihub2RlKSB7CiAgICB0aGlzLm5leHQoKTsKICAgIHRoaXMubGFiZWxzLnB1c2gobG9vcExhYmVsKTsKICAgIG5vZGUuYm9keSA9IHRoaXMucGFyc2VTdGF0ZW1lbnQoImRvIik7CiAgICB0aGlzLmxhYmVscy5wb3AoKTsKICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEuX3doaWxlKTsKICAgIG5vZGUudGVzdCA9IHRoaXMucGFyc2VQYXJlbkV4cHJlc3Npb24oKTsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikKICAgICAgeyB0aGlzLmVhdCh0eXBlcyQxLnNlbWkpOyB9CiAgICBlbHNlCiAgICAgIHsgdGhpcy5zZW1pY29sb24oKTsgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRG9XaGlsZVN0YXRlbWVudCIpCiAgfTsKCiAgLy8gRGlzYW1iaWd1YXRpbmcgYmV0d2VlbiBhIGBmb3JgIGFuZCBhIGBmb3JgL2BpbmAgb3IgYGZvcmAvYG9mYAogIC8vIGxvb3AgaXMgbm9uLXRyaXZpYWwuIEJhc2ljYWxseSwgd2UgaGF2ZSB0byBwYXJzZSB0aGUgaW5pdCBgdmFyYAogIC8vIHN0YXRlbWVudCBvciBleHByZXNzaW9uLCBkaXNhbGxvd2luZyB0aGUgYGluYCBvcGVyYXRvciAoc2VlCiAgLy8gdGhlIHNlY29uZCBwYXJhbWV0ZXIgdG8gYHBhcnNlRXhwcmVzc2lvbmApLCBhbmQgdGhlbiBjaGVjawogIC8vIHdoZXRoZXIgdGhlIG5leHQgdG9rZW4gaXMgYGluYCBvciBgb2ZgLiBXaGVuIHRoZXJlIGlzIG5vIGluaXQKICAvLyBwYXJ0IChzZW1pY29sb24gaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlIG9wZW5pbmcgcGFyZW50aGVzaXMpLCBpdAogIC8vIGlzIGEgcmVndWxhciBgZm9yYCBsb29wLgoKICBwcCQ4LnBhcnNlRm9yU3RhdGVtZW50ID0gZnVuY3Rpb24obm9kZSkgewogICAgdGhpcy5uZXh0KCk7CiAgICB2YXIgYXdhaXRBdCA9ICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOSAmJiB0aGlzLmNhbkF3YWl0ICYmIHRoaXMuZWF0Q29udGV4dHVhbCgiYXdhaXQiKSkgPyB0aGlzLmxhc3RUb2tTdGFydCA6IC0xOwogICAgdGhpcy5sYWJlbHMucHVzaChsb29wTGFiZWwpOwogICAgdGhpcy5lbnRlclNjb3BlKDApOwogICAgdGhpcy5leHBlY3QodHlwZXMkMS5wYXJlbkwpOwogICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5zZW1pKSB7CiAgICAgIGlmIChhd2FpdEF0ID4gLTEpIHsgdGhpcy51bmV4cGVjdGVkKGF3YWl0QXQpOyB9CiAgICAgIHJldHVybiB0aGlzLnBhcnNlRm9yKG5vZGUsIG51bGwpCiAgICB9CiAgICB2YXIgaXNMZXQgPSB0aGlzLmlzTGV0KCk7CiAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLl92YXIgfHwgdGhpcy50eXBlID09PSB0eXBlcyQxLl9jb25zdCB8fCBpc0xldCkgewogICAgICB2YXIgaW5pdCQxID0gdGhpcy5zdGFydE5vZGUoKSwga2luZCA9IGlzTGV0ID8gImxldCIgOiB0aGlzLnZhbHVlOwogICAgICB0aGlzLm5leHQoKTsKICAgICAgdGhpcy5wYXJzZVZhcihpbml0JDEsIHRydWUsIGtpbmQpOwogICAgICB0aGlzLmZpbmlzaE5vZGUoaW5pdCQxLCAiVmFyaWFibGVEZWNsYXJhdGlvbiIpOwogICAgICBpZiAoKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5faW4gfHwgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2ICYmIHRoaXMuaXNDb250ZXh0dWFsKCJvZiIpKSkgJiYgaW5pdCQxLmRlY2xhcmF0aW9ucy5sZW5ndGggPT09IDEpIHsKICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDkpIHsKICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuX2luKSB7CiAgICAgICAgICAgIGlmIChhd2FpdEF0ID4gLTEpIHsgdGhpcy51bmV4cGVjdGVkKGF3YWl0QXQpOyB9CiAgICAgICAgICB9IGVsc2UgeyBub2RlLmF3YWl0ID0gYXdhaXRBdCA+IC0xOyB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLnBhcnNlRm9ySW4obm9kZSwgaW5pdCQxKQogICAgICB9CiAgICAgIGlmIChhd2FpdEF0ID4gLTEpIHsgdGhpcy51bmV4cGVjdGVkKGF3YWl0QXQpOyB9CiAgICAgIHJldHVybiB0aGlzLnBhcnNlRm9yKG5vZGUsIGluaXQkMSkKICAgIH0KICAgIHZhciBzdGFydHNXaXRoTGV0ID0gdGhpcy5pc0NvbnRleHR1YWwoImxldCIpLCBpc0Zvck9mID0gZmFsc2U7CiAgICB2YXIgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyA9IG5ldyBEZXN0cnVjdHVyaW5nRXJyb3JzOwogICAgdmFyIGluaXQgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbihhd2FpdEF0ID4gLTEgPyAiYXdhaXQiIDogdHJ1ZSwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyk7CiAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLl9pbiB8fCAoaXNGb3JPZiA9IHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2ICYmIHRoaXMuaXNDb250ZXh0dWFsKCJvZiIpKSkgewogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDkpIHsKICAgICAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLl9pbikgewogICAgICAgICAgaWYgKGF3YWl0QXQgPiAtMSkgeyB0aGlzLnVuZXhwZWN0ZWQoYXdhaXRBdCk7IH0KICAgICAgICB9IGVsc2UgeyBub2RlLmF3YWl0ID0gYXdhaXRBdCA+IC0xOyB9CiAgICAgIH0KICAgICAgaWYgKHN0YXJ0c1dpdGhMZXQgJiYgaXNGb3JPZikgeyB0aGlzLnJhaXNlKGluaXQuc3RhcnQsICJUaGUgbGVmdC1oYW5kIHNpZGUgb2YgYSBmb3Itb2YgbG9vcCBtYXkgbm90IHN0YXJ0IHdpdGggJ2xldCcuIik7IH0KICAgICAgdGhpcy50b0Fzc2lnbmFibGUoaW5pdCwgZmFsc2UsIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpOwogICAgICB0aGlzLmNoZWNrTFZhbFBhdHRlcm4oaW5pdCk7CiAgICAgIHJldHVybiB0aGlzLnBhcnNlRm9ySW4obm9kZSwgaW5pdCkKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY2hlY2tFeHByZXNzaW9uRXJyb3JzKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIHRydWUpOwogICAgfQogICAgaWYgKGF3YWl0QXQgPiAtMSkgeyB0aGlzLnVuZXhwZWN0ZWQoYXdhaXRBdCk7IH0KICAgIHJldHVybiB0aGlzLnBhcnNlRm9yKG5vZGUsIGluaXQpCiAgfTsKCiAgcHAkOC5wYXJzZUZ1bmN0aW9uU3RhdGVtZW50ID0gZnVuY3Rpb24obm9kZSwgaXNBc3luYywgZGVjbGFyYXRpb25Qb3NpdGlvbikgewogICAgdGhpcy5uZXh0KCk7CiAgICByZXR1cm4gdGhpcy5wYXJzZUZ1bmN0aW9uKG5vZGUsIEZVTkNfU1RBVEVNRU5UIHwgKGRlY2xhcmF0aW9uUG9zaXRpb24gPyAwIDogRlVOQ19IQU5HSU5HX1NUQVRFTUVOVCksIGZhbHNlLCBpc0FzeW5jKQogIH07CgogIHBwJDgucGFyc2VJZlN0YXRlbWVudCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHRoaXMubmV4dCgpOwogICAgbm9kZS50ZXN0ID0gdGhpcy5wYXJzZVBhcmVuRXhwcmVzc2lvbigpOwogICAgLy8gYWxsb3cgZnVuY3Rpb24gZGVjbGFyYXRpb25zIGluIGJyYW5jaGVzLCBidXQgb25seSBpbiBub24tc3RyaWN0IG1vZGUKICAgIG5vZGUuY29uc2VxdWVudCA9IHRoaXMucGFyc2VTdGF0ZW1lbnQoImlmIik7CiAgICBub2RlLmFsdGVybmF0ZSA9IHRoaXMuZWF0KHR5cGVzJDEuX2Vsc2UpID8gdGhpcy5wYXJzZVN0YXRlbWVudCgiaWYiKSA6IG51bGw7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJJZlN0YXRlbWVudCIpCiAgfTsKCiAgcHAkOC5wYXJzZVJldHVyblN0YXRlbWVudCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIGlmICghdGhpcy5pbkZ1bmN0aW9uICYmICF0aGlzLm9wdGlvbnMuYWxsb3dSZXR1cm5PdXRzaWRlRnVuY3Rpb24pCiAgICAgIHsgdGhpcy5yYWlzZSh0aGlzLnN0YXJ0LCAiJ3JldHVybicgb3V0c2lkZSBvZiBmdW5jdGlvbiIpOyB9CiAgICB0aGlzLm5leHQoKTsKCiAgICAvLyBJbiBgcmV0dXJuYCAoYW5kIGBicmVha2AvYGNvbnRpbnVlYCksIHRoZSBrZXl3b3JkcyB3aXRoCiAgICAvLyBvcHRpb25hbCBhcmd1bWVudHMsIHdlIGVhZ2VybHkgbG9vayBmb3IgYSBzZW1pY29sb24gb3IgdGhlCiAgICAvLyBwb3NzaWJpbGl0eSB0byBpbnNlcnQgb25lLgoKICAgIGlmICh0aGlzLmVhdCh0eXBlcyQxLnNlbWkpIHx8IHRoaXMuaW5zZXJ0U2VtaWNvbG9uKCkpIHsgbm9kZS5hcmd1bWVudCA9IG51bGw7IH0KICAgIGVsc2UgeyBub2RlLmFyZ3VtZW50ID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oKTsgdGhpcy5zZW1pY29sb24oKTsgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiUmV0dXJuU3RhdGVtZW50IikKICB9OwoKICBwcCQ4LnBhcnNlU3dpdGNoU3RhdGVtZW50ID0gZnVuY3Rpb24obm9kZSkgewogICAgdGhpcy5uZXh0KCk7CiAgICBub2RlLmRpc2NyaW1pbmFudCA9IHRoaXMucGFyc2VQYXJlbkV4cHJlc3Npb24oKTsKICAgIG5vZGUuY2FzZXMgPSBbXTsKICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEuYnJhY2VMKTsKICAgIHRoaXMubGFiZWxzLnB1c2goc3dpdGNoTGFiZWwpOwogICAgdGhpcy5lbnRlclNjb3BlKDApOwoKICAgIC8vIFN0YXRlbWVudHMgdW5kZXIgbXVzdCBiZSBncm91cGVkIChieSBsYWJlbCkgaW4gU3dpdGNoQ2FzZQogICAgLy8gbm9kZXMuIGBjdXJgIGlzIHVzZWQgdG8ga2VlcCB0aGUgbm9kZSB0aGF0IHdlIGFyZSBjdXJyZW50bHkKICAgIC8vIGFkZGluZyBzdGF0ZW1lbnRzIHRvLgoKICAgIHZhciBjdXI7CiAgICBmb3IgKHZhciBzYXdEZWZhdWx0ID0gZmFsc2U7IHRoaXMudHlwZSAhPT0gdHlwZXMkMS5icmFjZVI7KSB7CiAgICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuX2Nhc2UgfHwgdGhpcy50eXBlID09PSB0eXBlcyQxLl9kZWZhdWx0KSB7CiAgICAgICAgdmFyIGlzQ2FzZSA9IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5fY2FzZTsKICAgICAgICBpZiAoY3VyKSB7IHRoaXMuZmluaXNoTm9kZShjdXIsICJTd2l0Y2hDYXNlIik7IH0KICAgICAgICBub2RlLmNhc2VzLnB1c2goY3VyID0gdGhpcy5zdGFydE5vZGUoKSk7CiAgICAgICAgY3VyLmNvbnNlcXVlbnQgPSBbXTsKICAgICAgICB0aGlzLm5leHQoKTsKICAgICAgICBpZiAoaXNDYXNlKSB7CiAgICAgICAgICBjdXIudGVzdCA9IHRoaXMucGFyc2VFeHByZXNzaW9uKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChzYXdEZWZhdWx0KSB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZSh0aGlzLmxhc3RUb2tTdGFydCwgIk11bHRpcGxlIGRlZmF1bHQgY2xhdXNlcyIpOyB9CiAgICAgICAgICBzYXdEZWZhdWx0ID0gdHJ1ZTsKICAgICAgICAgIGN1ci50ZXN0ID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgdGhpcy5leHBlY3QodHlwZXMkMS5jb2xvbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCFjdXIpIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KICAgICAgICBjdXIuY29uc2VxdWVudC5wdXNoKHRoaXMucGFyc2VTdGF0ZW1lbnQobnVsbCkpOwogICAgICB9CiAgICB9CiAgICB0aGlzLmV4aXRTY29wZSgpOwogICAgaWYgKGN1cikgeyB0aGlzLmZpbmlzaE5vZGUoY3VyLCAiU3dpdGNoQ2FzZSIpOyB9CiAgICB0aGlzLm5leHQoKTsgLy8gQ2xvc2luZyBicmFjZQogICAgdGhpcy5sYWJlbHMucG9wKCk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJTd2l0Y2hTdGF0ZW1lbnQiKQogIH07CgogIHBwJDgucGFyc2VUaHJvd1N0YXRlbWVudCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHRoaXMubmV4dCgpOwogICAgaWYgKGxpbmVCcmVhay50ZXN0KHRoaXMuaW5wdXQuc2xpY2UodGhpcy5sYXN0VG9rRW5kLCB0aGlzLnN0YXJ0KSkpCiAgICAgIHsgdGhpcy5yYWlzZSh0aGlzLmxhc3RUb2tFbmQsICJJbGxlZ2FsIG5ld2xpbmUgYWZ0ZXIgdGhyb3ciKTsgfQogICAgbm9kZS5hcmd1bWVudCA9IHRoaXMucGFyc2VFeHByZXNzaW9uKCk7CiAgICB0aGlzLnNlbWljb2xvbigpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiVGhyb3dTdGF0ZW1lbnQiKQogIH07CgogIC8vIFJldXNlZCBlbXB0eSBhcnJheSBhZGRlZCBmb3Igbm9kZSBmaWVsZHMgdGhhdCBhcmUgYWx3YXlzIGVtcHR5LgoKICB2YXIgZW1wdHkkMSA9IFtdOwoKICBwcCQ4LnBhcnNlVHJ5U3RhdGVtZW50ID0gZnVuY3Rpb24obm9kZSkgewogICAgdGhpcy5uZXh0KCk7CiAgICBub2RlLmJsb2NrID0gdGhpcy5wYXJzZUJsb2NrKCk7CiAgICBub2RlLmhhbmRsZXIgPSBudWxsOwogICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5fY2F0Y2gpIHsKICAgICAgdmFyIGNsYXVzZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICBpZiAodGhpcy5lYXQodHlwZXMkMS5wYXJlbkwpKSB7CiAgICAgICAgY2xhdXNlLnBhcmFtID0gdGhpcy5wYXJzZUJpbmRpbmdBdG9tKCk7CiAgICAgICAgdmFyIHNpbXBsZSA9IGNsYXVzZS5wYXJhbS50eXBlID09PSAiSWRlbnRpZmllciI7CiAgICAgICAgdGhpcy5lbnRlclNjb3BlKHNpbXBsZSA/IFNDT1BFX1NJTVBMRV9DQVRDSCA6IDApOwogICAgICAgIHRoaXMuY2hlY2tMVmFsUGF0dGVybihjbGF1c2UucGFyYW0sIHNpbXBsZSA/IEJJTkRfU0lNUExFX0NBVENIIDogQklORF9MRVhJQ0FMKTsKICAgICAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLnBhcmVuUik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA8IDEwKSB7IHRoaXMudW5leHBlY3RlZCgpOyB9CiAgICAgICAgY2xhdXNlLnBhcmFtID0gbnVsbDsKICAgICAgICB0aGlzLmVudGVyU2NvcGUoMCk7CiAgICAgIH0KICAgICAgY2xhdXNlLmJvZHkgPSB0aGlzLnBhcnNlQmxvY2soZmFsc2UpOwogICAgICB0aGlzLmV4aXRTY29wZSgpOwogICAgICBub2RlLmhhbmRsZXIgPSB0aGlzLmZpbmlzaE5vZGUoY2xhdXNlLCAiQ2F0Y2hDbGF1c2UiKTsKICAgIH0KICAgIG5vZGUuZmluYWxpemVyID0gdGhpcy5lYXQodHlwZXMkMS5fZmluYWxseSkgPyB0aGlzLnBhcnNlQmxvY2soKSA6IG51bGw7CiAgICBpZiAoIW5vZGUuaGFuZGxlciAmJiAhbm9kZS5maW5hbGl6ZXIpCiAgICAgIHsgdGhpcy5yYWlzZShub2RlLnN0YXJ0LCAiTWlzc2luZyBjYXRjaCBvciBmaW5hbGx5IGNsYXVzZSIpOyB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJUcnlTdGF0ZW1lbnQiKQogIH07CgogIHBwJDgucGFyc2VWYXJTdGF0ZW1lbnQgPSBmdW5jdGlvbihub2RlLCBraW5kKSB7CiAgICB0aGlzLm5leHQoKTsKICAgIHRoaXMucGFyc2VWYXIobm9kZSwgZmFsc2UsIGtpbmQpOwogICAgdGhpcy5zZW1pY29sb24oKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlZhcmlhYmxlRGVjbGFyYXRpb24iKQogIH07CgogIHBwJDgucGFyc2VXaGlsZVN0YXRlbWVudCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHRoaXMubmV4dCgpOwogICAgbm9kZS50ZXN0ID0gdGhpcy5wYXJzZVBhcmVuRXhwcmVzc2lvbigpOwogICAgdGhpcy5sYWJlbHMucHVzaChsb29wTGFiZWwpOwogICAgbm9kZS5ib2R5ID0gdGhpcy5wYXJzZVN0YXRlbWVudCgid2hpbGUiKTsKICAgIHRoaXMubGFiZWxzLnBvcCgpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiV2hpbGVTdGF0ZW1lbnQiKQogIH07CgogIHBwJDgucGFyc2VXaXRoU3RhdGVtZW50ID0gZnVuY3Rpb24obm9kZSkgewogICAgaWYgKHRoaXMuc3RyaWN0KSB7IHRoaXMucmFpc2UodGhpcy5zdGFydCwgIid3aXRoJyBpbiBzdHJpY3QgbW9kZSIpOyB9CiAgICB0aGlzLm5leHQoKTsKICAgIG5vZGUub2JqZWN0ID0gdGhpcy5wYXJzZVBhcmVuRXhwcmVzc2lvbigpOwogICAgbm9kZS5ib2R5ID0gdGhpcy5wYXJzZVN0YXRlbWVudCgid2l0aCIpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiV2l0aFN0YXRlbWVudCIpCiAgfTsKCiAgcHAkOC5wYXJzZUVtcHR5U3RhdGVtZW50ID0gZnVuY3Rpb24obm9kZSkgewogICAgdGhpcy5uZXh0KCk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJFbXB0eVN0YXRlbWVudCIpCiAgfTsKCiAgcHAkOC5wYXJzZUxhYmVsZWRTdGF0ZW1lbnQgPSBmdW5jdGlvbihub2RlLCBtYXliZU5hbWUsIGV4cHIsIGNvbnRleHQpIHsKICAgIGZvciAodmFyIGkkMSA9IDAsIGxpc3QgPSB0aGlzLmxhYmVsczsgaSQxIDwgbGlzdC5sZW5ndGg7IGkkMSArPSAxKQogICAgICB7CiAgICAgIHZhciBsYWJlbCA9IGxpc3RbaSQxXTsKCiAgICAgIGlmIChsYWJlbC5uYW1lID09PSBtYXliZU5hbWUpCiAgICAgICAgeyB0aGlzLnJhaXNlKGV4cHIuc3RhcnQsICJMYWJlbCAnIiArIG1heWJlTmFtZSArICInIGlzIGFscmVhZHkgZGVjbGFyZWQiKTsKICAgIH0gfQogICAgdmFyIGtpbmQgPSB0aGlzLnR5cGUuaXNMb29wID8gImxvb3AiIDogdGhpcy50eXBlID09PSB0eXBlcyQxLl9zd2l0Y2ggPyAic3dpdGNoIiA6IG51bGw7CiAgICBmb3IgKHZhciBpID0gdGhpcy5sYWJlbHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgdmFyIGxhYmVsJDEgPSB0aGlzLmxhYmVsc1tpXTsKICAgICAgaWYgKGxhYmVsJDEuc3RhdGVtZW50U3RhcnQgPT09IG5vZGUuc3RhcnQpIHsKICAgICAgICAvLyBVcGRhdGUgaW5mb3JtYXRpb24gYWJvdXQgcHJldmlvdXMgbGFiZWxzIG9uIHRoaXMgbm9kZQogICAgICAgIGxhYmVsJDEuc3RhdGVtZW50U3RhcnQgPSB0aGlzLnN0YXJ0OwogICAgICAgIGxhYmVsJDEua2luZCA9IGtpbmQ7CiAgICAgIH0gZWxzZSB7IGJyZWFrIH0KICAgIH0KICAgIHRoaXMubGFiZWxzLnB1c2goe25hbWU6IG1heWJlTmFtZSwga2luZDoga2luZCwgc3RhdGVtZW50U3RhcnQ6IHRoaXMuc3RhcnR9KTsKICAgIG5vZGUuYm9keSA9IHRoaXMucGFyc2VTdGF0ZW1lbnQoY29udGV4dCA/IGNvbnRleHQuaW5kZXhPZigibGFiZWwiKSA9PT0gLTEgPyBjb250ZXh0ICsgImxhYmVsIiA6IGNvbnRleHQgOiAibGFiZWwiKTsKICAgIHRoaXMubGFiZWxzLnBvcCgpOwogICAgbm9kZS5sYWJlbCA9IGV4cHI7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJMYWJlbGVkU3RhdGVtZW50IikKICB9OwoKICBwcCQ4LnBhcnNlRXhwcmVzc2lvblN0YXRlbWVudCA9IGZ1bmN0aW9uKG5vZGUsIGV4cHIpIHsKICAgIG5vZGUuZXhwcmVzc2lvbiA9IGV4cHI7CiAgICB0aGlzLnNlbWljb2xvbigpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRXhwcmVzc2lvblN0YXRlbWVudCIpCiAgfTsKCiAgLy8gUGFyc2UgYSBzZW1pY29sb24tZW5jbG9zZWQgYmxvY2sgb2Ygc3RhdGVtZW50cywgaGFuZGxpbmcgYCJ1c2UKICAvLyBzdHJpY3QiYCBkZWNsYXJhdGlvbnMgd2hlbiBgYWxsb3dTdHJpY3RgIGlzIHRydWUgKHVzZWQgZm9yCiAgLy8gZnVuY3Rpb24gYm9kaWVzKS4KCiAgcHAkOC5wYXJzZUJsb2NrID0gZnVuY3Rpb24oY3JlYXRlTmV3TGV4aWNhbFNjb3BlLCBub2RlLCBleGl0U3RyaWN0KSB7CiAgICBpZiAoIGNyZWF0ZU5ld0xleGljYWxTY29wZSA9PT0gdm9pZCAwICkgY3JlYXRlTmV3TGV4aWNhbFNjb3BlID0gdHJ1ZTsKICAgIGlmICggbm9kZSA9PT0gdm9pZCAwICkgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CgogICAgbm9kZS5ib2R5ID0gW107CiAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLmJyYWNlTCk7CiAgICBpZiAoY3JlYXRlTmV3TGV4aWNhbFNjb3BlKSB7IHRoaXMuZW50ZXJTY29wZSgwKTsgfQogICAgd2hpbGUgKHRoaXMudHlwZSAhPT0gdHlwZXMkMS5icmFjZVIpIHsKICAgICAgdmFyIHN0bXQgPSB0aGlzLnBhcnNlU3RhdGVtZW50KG51bGwpOwogICAgICBub2RlLmJvZHkucHVzaChzdG10KTsKICAgIH0KICAgIGlmIChleGl0U3RyaWN0KSB7IHRoaXMuc3RyaWN0ID0gZmFsc2U7IH0KICAgIHRoaXMubmV4dCgpOwogICAgaWYgKGNyZWF0ZU5ld0xleGljYWxTY29wZSkgeyB0aGlzLmV4aXRTY29wZSgpOyB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJCbG9ja1N0YXRlbWVudCIpCiAgfTsKCiAgLy8gUGFyc2UgYSByZWd1bGFyIGBmb3JgIGxvb3AuIFRoZSBkaXNhbWJpZ3VhdGlvbiBjb2RlIGluCiAgLy8gYHBhcnNlU3RhdGVtZW50YCB3aWxsIGFscmVhZHkgaGF2ZSBwYXJzZWQgdGhlIGluaXQgc3RhdGVtZW50IG9yCiAgLy8gZXhwcmVzc2lvbi4KCiAgcHAkOC5wYXJzZUZvciA9IGZ1bmN0aW9uKG5vZGUsIGluaXQpIHsKICAgIG5vZGUuaW5pdCA9IGluaXQ7CiAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLnNlbWkpOwogICAgbm9kZS50ZXN0ID0gdGhpcy50eXBlID09PSB0eXBlcyQxLnNlbWkgPyBudWxsIDogdGhpcy5wYXJzZUV4cHJlc3Npb24oKTsKICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEuc2VtaSk7CiAgICBub2RlLnVwZGF0ZSA9IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5wYXJlblIgPyBudWxsIDogdGhpcy5wYXJzZUV4cHJlc3Npb24oKTsKICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEucGFyZW5SKTsKICAgIG5vZGUuYm9keSA9IHRoaXMucGFyc2VTdGF0ZW1lbnQoImZvciIpOwogICAgdGhpcy5leGl0U2NvcGUoKTsKICAgIHRoaXMubGFiZWxzLnBvcCgpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRm9yU3RhdGVtZW50IikKICB9OwoKICAvLyBQYXJzZSBhIGBmb3JgL2BpbmAgYW5kIGBmb3JgL2BvZmAgbG9vcCwgd2hpY2ggYXJlIGFsbW9zdAogIC8vIHNhbWUgZnJvbSBwYXJzZXIncyBwZXJzcGVjdGl2ZS4KCiAgcHAkOC5wYXJzZUZvckluID0gZnVuY3Rpb24obm9kZSwgaW5pdCkgewogICAgdmFyIGlzRm9ySW4gPSB0aGlzLnR5cGUgPT09IHR5cGVzJDEuX2luOwogICAgdGhpcy5uZXh0KCk7CgogICAgaWYgKAogICAgICBpbml0LnR5cGUgPT09ICJWYXJpYWJsZURlY2xhcmF0aW9uIiAmJgogICAgICBpbml0LmRlY2xhcmF0aW9uc1swXS5pbml0ICE9IG51bGwgJiYKICAgICAgKAogICAgICAgICFpc0ZvckluIHx8CiAgICAgICAgdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uIDwgOCB8fAogICAgICAgIHRoaXMuc3RyaWN0IHx8CiAgICAgICAgaW5pdC5raW5kICE9PSAidmFyIiB8fAogICAgICAgIGluaXQuZGVjbGFyYXRpb25zWzBdLmlkLnR5cGUgIT09ICJJZGVudGlmaWVyIgogICAgICApCiAgICApIHsKICAgICAgdGhpcy5yYWlzZSgKICAgICAgICBpbml0LnN0YXJ0LAogICAgICAgICgoaXNGb3JJbiA/ICJmb3ItaW4iIDogImZvci1vZiIpICsgIiBsb29wIHZhcmlhYmxlIGRlY2xhcmF0aW9uIG1heSBub3QgaGF2ZSBhbiBpbml0aWFsaXplciIpCiAgICAgICk7CiAgICB9CiAgICBub2RlLmxlZnQgPSBpbml0OwogICAgbm9kZS5yaWdodCA9IGlzRm9ySW4gPyB0aGlzLnBhcnNlRXhwcmVzc2lvbigpIDogdGhpcy5wYXJzZU1heWJlQXNzaWduKCk7CiAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLnBhcmVuUik7CiAgICBub2RlLmJvZHkgPSB0aGlzLnBhcnNlU3RhdGVtZW50KCJmb3IiKTsKICAgIHRoaXMuZXhpdFNjb3BlKCk7CiAgICB0aGlzLmxhYmVscy5wb3AoKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgaXNGb3JJbiA/ICJGb3JJblN0YXRlbWVudCIgOiAiRm9yT2ZTdGF0ZW1lbnQiKQogIH07CgogIC8vIFBhcnNlIGEgbGlzdCBvZiB2YXJpYWJsZSBkZWNsYXJhdGlvbnMuCgogIHBwJDgucGFyc2VWYXIgPSBmdW5jdGlvbihub2RlLCBpc0Zvciwga2luZCkgewogICAgbm9kZS5kZWNsYXJhdGlvbnMgPSBbXTsKICAgIG5vZGUua2luZCA9IGtpbmQ7CiAgICBmb3IgKDs7KSB7CiAgICAgIHZhciBkZWNsID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgdGhpcy5wYXJzZVZhcklkKGRlY2wsIGtpbmQpOwogICAgICBpZiAodGhpcy5lYXQodHlwZXMkMS5lcSkpIHsKICAgICAgICBkZWNsLmluaXQgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oaXNGb3IpOwogICAgICB9IGVsc2UgaWYgKGtpbmQgPT09ICJjb25zdCIgJiYgISh0aGlzLnR5cGUgPT09IHR5cGVzJDEuX2luIHx8ICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNiAmJiB0aGlzLmlzQ29udGV4dHVhbCgib2YiKSkpKSB7CiAgICAgICAgdGhpcy51bmV4cGVjdGVkKCk7CiAgICAgIH0gZWxzZSBpZiAoZGVjbC5pZC50eXBlICE9PSAiSWRlbnRpZmllciIgJiYgIShpc0ZvciAmJiAodGhpcy50eXBlID09PSB0eXBlcyQxLl9pbiB8fCB0aGlzLmlzQ29udGV4dHVhbCgib2YiKSkpKSB7CiAgICAgICAgdGhpcy5yYWlzZSh0aGlzLmxhc3RUb2tFbmQsICJDb21wbGV4IGJpbmRpbmcgcGF0dGVybnMgcmVxdWlyZSBhbiBpbml0aWFsaXphdGlvbiB2YWx1ZSIpOwogICAgICB9IGVsc2UgewogICAgICAgIGRlY2wuaW5pdCA9IG51bGw7CiAgICAgIH0KICAgICAgbm9kZS5kZWNsYXJhdGlvbnMucHVzaCh0aGlzLmZpbmlzaE5vZGUoZGVjbCwgIlZhcmlhYmxlRGVjbGFyYXRvciIpKTsKICAgICAgaWYgKCF0aGlzLmVhdCh0eXBlcyQxLmNvbW1hKSkgeyBicmVhayB9CiAgICB9CiAgICByZXR1cm4gbm9kZQogIH07CgogIHBwJDgucGFyc2VWYXJJZCA9IGZ1bmN0aW9uKGRlY2wsIGtpbmQpIHsKICAgIGRlY2wuaWQgPSB0aGlzLnBhcnNlQmluZGluZ0F0b20oKTsKICAgIHRoaXMuY2hlY2tMVmFsUGF0dGVybihkZWNsLmlkLCBraW5kID09PSAidmFyIiA/IEJJTkRfVkFSIDogQklORF9MRVhJQ0FMLCBmYWxzZSk7CiAgfTsKCiAgdmFyIEZVTkNfU1RBVEVNRU5UID0gMSwgRlVOQ19IQU5HSU5HX1NUQVRFTUVOVCA9IDIsIEZVTkNfTlVMTEFCTEVfSUQgPSA0OwoKICAvLyBQYXJzZSBhIGZ1bmN0aW9uIGRlY2xhcmF0aW9uIG9yIGxpdGVyYWwgKGRlcGVuZGluZyBvbiB0aGUKICAvLyBgc3RhdGVtZW50ICYgRlVOQ19TVEFURU1FTlRgKS4KCiAgLy8gUmVtb3ZlIGBhbGxvd0V4cHJlc3Npb25Cb2R5YCBmb3IgNy4wLjAsIGFzIGl0IGlzIG9ubHkgY2FsbGVkIHdpdGggZmFsc2UKICBwcCQ4LnBhcnNlRnVuY3Rpb24gPSBmdW5jdGlvbihub2RlLCBzdGF0ZW1lbnQsIGFsbG93RXhwcmVzc2lvbkJvZHksIGlzQXN5bmMsIGZvckluaXQpIHsKICAgIHRoaXMuaW5pdEZ1bmN0aW9uKG5vZGUpOwogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5IHx8IHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2ICYmICFpc0FzeW5jKSB7CiAgICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuc3RhciAmJiAoc3RhdGVtZW50ICYgRlVOQ19IQU5HSU5HX1NUQVRFTUVOVCkpCiAgICAgICAgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgICBub2RlLmdlbmVyYXRvciA9IHRoaXMuZWF0KHR5cGVzJDEuc3Rhcik7CiAgICB9CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDgpCiAgICAgIHsgbm9kZS5hc3luYyA9ICEhaXNBc3luYzsgfQoKICAgIGlmIChzdGF0ZW1lbnQgJiBGVU5DX1NUQVRFTUVOVCkgewogICAgICBub2RlLmlkID0gKHN0YXRlbWVudCAmIEZVTkNfTlVMTEFCTEVfSUQpICYmIHRoaXMudHlwZSAhPT0gdHlwZXMkMS5uYW1lID8gbnVsbCA6IHRoaXMucGFyc2VJZGVudCgpOwogICAgICBpZiAobm9kZS5pZCAmJiAhKHN0YXRlbWVudCAmIEZVTkNfSEFOR0lOR19TVEFURU1FTlQpKQogICAgICAgIC8vIElmIGl0IGlzIGEgcmVndWxhciBmdW5jdGlvbiBkZWNsYXJhdGlvbiBpbiBzbG9wcHkgbW9kZSwgdGhlbiBpdCBpcwogICAgICAgIC8vIHN1YmplY3QgdG8gQW5uZXggQiBzZW1hbnRpY3MgKEJJTkRfRlVOQ1RJT04pLiBPdGhlcndpc2UsIHRoZSBiaW5kaW5nCiAgICAgICAgLy8gbW9kZSBkZXBlbmRzIG9uIHByb3BlcnRpZXMgb2YgdGhlIGN1cnJlbnQgc2NvcGUgKHNlZQogICAgICAgIC8vIHRyZWF0RnVuY3Rpb25zQXNWYXIpLgogICAgICAgIHsgdGhpcy5jaGVja0xWYWxTaW1wbGUobm9kZS5pZCwgKHRoaXMuc3RyaWN0IHx8IG5vZGUuZ2VuZXJhdG9yIHx8IG5vZGUuYXN5bmMpID8gdGhpcy50cmVhdEZ1bmN0aW9uc0FzVmFyID8gQklORF9WQVIgOiBCSU5EX0xFWElDQUwgOiBCSU5EX0ZVTkNUSU9OKTsgfQogICAgfQoKICAgIHZhciBvbGRZaWVsZFBvcyA9IHRoaXMueWllbGRQb3MsIG9sZEF3YWl0UG9zID0gdGhpcy5hd2FpdFBvcywgb2xkQXdhaXRJZGVudFBvcyA9IHRoaXMuYXdhaXRJZGVudFBvczsKICAgIHRoaXMueWllbGRQb3MgPSAwOwogICAgdGhpcy5hd2FpdFBvcyA9IDA7CiAgICB0aGlzLmF3YWl0SWRlbnRQb3MgPSAwOwogICAgdGhpcy5lbnRlclNjb3BlKGZ1bmN0aW9uRmxhZ3Mobm9kZS5hc3luYywgbm9kZS5nZW5lcmF0b3IpKTsKCiAgICBpZiAoIShzdGF0ZW1lbnQgJiBGVU5DX1NUQVRFTUVOVCkpCiAgICAgIHsgbm9kZS5pZCA9IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5uYW1lID8gdGhpcy5wYXJzZUlkZW50KCkgOiBudWxsOyB9CgogICAgdGhpcy5wYXJzZUZ1bmN0aW9uUGFyYW1zKG5vZGUpOwogICAgdGhpcy5wYXJzZUZ1bmN0aW9uQm9keShub2RlLCBhbGxvd0V4cHJlc3Npb25Cb2R5LCBmYWxzZSwgZm9ySW5pdCk7CgogICAgdGhpcy55aWVsZFBvcyA9IG9sZFlpZWxkUG9zOwogICAgdGhpcy5hd2FpdFBvcyA9IG9sZEF3YWl0UG9zOwogICAgdGhpcy5hd2FpdElkZW50UG9zID0gb2xkQXdhaXRJZGVudFBvczsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgKHN0YXRlbWVudCAmIEZVTkNfU1RBVEVNRU5UKSA/ICJGdW5jdGlvbkRlY2xhcmF0aW9uIiA6ICJGdW5jdGlvbkV4cHJlc3Npb24iKQogIH07CgogIHBwJDgucGFyc2VGdW5jdGlvblBhcmFtcyA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEucGFyZW5MKTsKICAgIG5vZGUucGFyYW1zID0gdGhpcy5wYXJzZUJpbmRpbmdMaXN0KHR5cGVzJDEucGFyZW5SLCBmYWxzZSwgdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDgpOwogICAgdGhpcy5jaGVja1lpZWxkQXdhaXRJbkRlZmF1bHRQYXJhbXMoKTsKICB9OwoKICAvLyBQYXJzZSBhIGNsYXNzIGRlY2xhcmF0aW9uIG9yIGxpdGVyYWwgKGRlcGVuZGluZyBvbiB0aGUKICAvLyBgaXNTdGF0ZW1lbnRgIHBhcmFtZXRlcikuCgogIHBwJDgucGFyc2VDbGFzcyA9IGZ1bmN0aW9uKG5vZGUsIGlzU3RhdGVtZW50KSB7CiAgICB0aGlzLm5leHQoKTsKCiAgICAvLyBlY21hLTI2MiAxNC42IENsYXNzIERlZmluaXRpb25zCiAgICAvLyBBIGNsYXNzIGRlZmluaXRpb24gaXMgYWx3YXlzIHN0cmljdCBtb2RlIGNvZGUuCiAgICB2YXIgb2xkU3RyaWN0ID0gdGhpcy5zdHJpY3Q7CiAgICB0aGlzLnN0cmljdCA9IHRydWU7CgogICAgdGhpcy5wYXJzZUNsYXNzSWQobm9kZSwgaXNTdGF0ZW1lbnQpOwogICAgdGhpcy5wYXJzZUNsYXNzU3VwZXIobm9kZSk7CiAgICB2YXIgcHJpdmF0ZU5hbWVNYXAgPSB0aGlzLmVudGVyQ2xhc3NCb2R5KCk7CiAgICB2YXIgY2xhc3NCb2R5ID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHZhciBoYWRDb25zdHJ1Y3RvciA9IGZhbHNlOwogICAgY2xhc3NCb2R5LmJvZHkgPSBbXTsKICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEuYnJhY2VMKTsKICAgIHdoaWxlICh0aGlzLnR5cGUgIT09IHR5cGVzJDEuYnJhY2VSKSB7CiAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5wYXJzZUNsYXNzRWxlbWVudChub2RlLnN1cGVyQ2xhc3MgIT09IG51bGwpOwogICAgICBpZiAoZWxlbWVudCkgewogICAgICAgIGNsYXNzQm9keS5ib2R5LnB1c2goZWxlbWVudCk7CiAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gIk1ldGhvZERlZmluaXRpb24iICYmIGVsZW1lbnQua2luZCA9PT0gImNvbnN0cnVjdG9yIikgewogICAgICAgICAgaWYgKGhhZENvbnN0cnVjdG9yKSB7IHRoaXMucmFpc2UoZWxlbWVudC5zdGFydCwgIkR1cGxpY2F0ZSBjb25zdHJ1Y3RvciBpbiB0aGUgc2FtZSBjbGFzcyIpOyB9CiAgICAgICAgICBoYWRDb25zdHJ1Y3RvciA9IHRydWU7CiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LmtleSAmJiBlbGVtZW50LmtleS50eXBlID09PSAiUHJpdmF0ZUlkZW50aWZpZXIiICYmIGlzUHJpdmF0ZU5hbWVDb25mbGljdGVkKHByaXZhdGVOYW1lTWFwLCBlbGVtZW50KSkgewogICAgICAgICAgdGhpcy5yYWlzZVJlY292ZXJhYmxlKGVsZW1lbnQua2V5LnN0YXJ0LCAoIklkZW50aWZpZXIgJyMiICsgKGVsZW1lbnQua2V5Lm5hbWUpICsgIicgaGFzIGFscmVhZHkgYmVlbiBkZWNsYXJlZCIpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHRoaXMuc3RyaWN0ID0gb2xkU3RyaWN0OwogICAgdGhpcy5uZXh0KCk7CiAgICBub2RlLmJvZHkgPSB0aGlzLmZpbmlzaE5vZGUoY2xhc3NCb2R5LCAiQ2xhc3NCb2R5Iik7CiAgICB0aGlzLmV4aXRDbGFzc0JvZHkoKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgaXNTdGF0ZW1lbnQgPyAiQ2xhc3NEZWNsYXJhdGlvbiIgOiAiQ2xhc3NFeHByZXNzaW9uIikKICB9OwoKICBwcCQ4LnBhcnNlQ2xhc3NFbGVtZW50ID0gZnVuY3Rpb24oY29uc3RydWN0b3JBbGxvd3NTdXBlcikgewogICAgaWYgKHRoaXMuZWF0KHR5cGVzJDEuc2VtaSkpIHsgcmV0dXJuIG51bGwgfQoKICAgIHZhciBlY21hVmVyc2lvbiA9IHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbjsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHZhciBrZXlOYW1lID0gIiI7CiAgICB2YXIgaXNHZW5lcmF0b3IgPSBmYWxzZTsKICAgIHZhciBpc0FzeW5jID0gZmFsc2U7CiAgICB2YXIga2luZCA9ICJtZXRob2QiOwogICAgdmFyIGlzU3RhdGljID0gZmFsc2U7CgogICAgaWYgKHRoaXMuZWF0Q29udGV4dHVhbCgic3RhdGljIikpIHsKICAgICAgLy8gUGFyc2Ugc3RhdGljIGluaXQgYmxvY2sKICAgICAgaWYgKGVjbWFWZXJzaW9uID49IDEzICYmIHRoaXMuZWF0KHR5cGVzJDEuYnJhY2VMKSkgewogICAgICAgIHRoaXMucGFyc2VDbGFzc1N0YXRpY0Jsb2NrKG5vZGUpOwogICAgICAgIHJldHVybiBub2RlCiAgICAgIH0KICAgICAgaWYgKHRoaXMuaXNDbGFzc0VsZW1lbnROYW1lU3RhcnQoKSB8fCB0aGlzLnR5cGUgPT09IHR5cGVzJDEuc3RhcikgewogICAgICAgIGlzU3RhdGljID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBrZXlOYW1lID0gInN0YXRpYyI7CiAgICAgIH0KICAgIH0KICAgIG5vZGUuc3RhdGljID0gaXNTdGF0aWM7CiAgICBpZiAoIWtleU5hbWUgJiYgZWNtYVZlcnNpb24gPj0gOCAmJiB0aGlzLmVhdENvbnRleHR1YWwoImFzeW5jIikpIHsKICAgICAgaWYgKCh0aGlzLmlzQ2xhc3NFbGVtZW50TmFtZVN0YXJ0KCkgfHwgdGhpcy50eXBlID09PSB0eXBlcyQxLnN0YXIpICYmICF0aGlzLmNhbkluc2VydFNlbWljb2xvbigpKSB7CiAgICAgICAgaXNBc3luYyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAga2V5TmFtZSA9ICJhc3luYyI7CiAgICAgIH0KICAgIH0KICAgIGlmICgha2V5TmFtZSAmJiAoZWNtYVZlcnNpb24gPj0gOSB8fCAhaXNBc3luYykgJiYgdGhpcy5lYXQodHlwZXMkMS5zdGFyKSkgewogICAgICBpc0dlbmVyYXRvciA9IHRydWU7CiAgICB9CiAgICBpZiAoIWtleU5hbWUgJiYgIWlzQXN5bmMgJiYgIWlzR2VuZXJhdG9yKSB7CiAgICAgIHZhciBsYXN0VmFsdWUgPSB0aGlzLnZhbHVlOwogICAgICBpZiAodGhpcy5lYXRDb250ZXh0dWFsKCJnZXQiKSB8fCB0aGlzLmVhdENvbnRleHR1YWwoInNldCIpKSB7CiAgICAgICAgaWYgKHRoaXMuaXNDbGFzc0VsZW1lbnROYW1lU3RhcnQoKSkgewogICAgICAgICAga2luZCA9IGxhc3RWYWx1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAga2V5TmFtZSA9IGxhc3RWYWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICAvLyBQYXJzZSBlbGVtZW50IG5hbWUKICAgIGlmIChrZXlOYW1lKSB7CiAgICAgIC8vICdhc3luYycsICdnZXQnLCAnc2V0Jywgb3IgJ3N0YXRpYycgd2VyZSBub3QgYSBrZXl3b3JkIGNvbnRleHR1YWxseS4KICAgICAgLy8gVGhlIGxhc3QgdG9rZW4gaXMgYW55IG9mIHRob3NlLiBNYWtlIGl0IHRoZSBlbGVtZW50IG5hbWUuCiAgICAgIG5vZGUuY29tcHV0ZWQgPSBmYWxzZTsKICAgICAgbm9kZS5rZXkgPSB0aGlzLnN0YXJ0Tm9kZUF0KHRoaXMubGFzdFRva1N0YXJ0LCB0aGlzLmxhc3RUb2tTdGFydExvYyk7CiAgICAgIG5vZGUua2V5Lm5hbWUgPSBrZXlOYW1lOwogICAgICB0aGlzLmZpbmlzaE5vZGUobm9kZS5rZXksICJJZGVudGlmaWVyIik7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnBhcnNlQ2xhc3NFbGVtZW50TmFtZShub2RlKTsKICAgIH0KCiAgICAvLyBQYXJzZSBlbGVtZW50IHZhbHVlCiAgICBpZiAoZWNtYVZlcnNpb24gPCAxMyB8fCB0aGlzLnR5cGUgPT09IHR5cGVzJDEucGFyZW5MIHx8IGtpbmQgIT09ICJtZXRob2QiIHx8IGlzR2VuZXJhdG9yIHx8IGlzQXN5bmMpIHsKICAgICAgdmFyIGlzQ29uc3RydWN0b3IgPSAhbm9kZS5zdGF0aWMgJiYgY2hlY2tLZXlOYW1lKG5vZGUsICJjb25zdHJ1Y3RvciIpOwogICAgICB2YXIgYWxsb3dzRGlyZWN0U3VwZXIgPSBpc0NvbnN0cnVjdG9yICYmIGNvbnN0cnVjdG9yQWxsb3dzU3VwZXI7CiAgICAgIC8vIENvdWxkbid0IG1vdmUgdGhpcyBjaGVjayBpbnRvIHRoZSAncGFyc2VDbGFzc01ldGhvZCcgbWV0aG9kIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LgogICAgICBpZiAoaXNDb25zdHJ1Y3RvciAmJiBraW5kICE9PSAibWV0aG9kIikgeyB0aGlzLnJhaXNlKG5vZGUua2V5LnN0YXJ0LCAiQ29uc3RydWN0b3IgY2FuJ3QgaGF2ZSBnZXQvc2V0IG1vZGlmaWVyIik7IH0KICAgICAgbm9kZS5raW5kID0gaXNDb25zdHJ1Y3RvciA/ICJjb25zdHJ1Y3RvciIgOiBraW5kOwogICAgICB0aGlzLnBhcnNlQ2xhc3NNZXRob2Qobm9kZSwgaXNHZW5lcmF0b3IsIGlzQXN5bmMsIGFsbG93c0RpcmVjdFN1cGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucGFyc2VDbGFzc0ZpZWxkKG5vZGUpOwogICAgfQoKICAgIHJldHVybiBub2RlCiAgfTsKCiAgcHAkOC5pc0NsYXNzRWxlbWVudE5hbWVTdGFydCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuICgKICAgICAgdGhpcy50eXBlID09PSB0eXBlcyQxLm5hbWUgfHwKICAgICAgdGhpcy50eXBlID09PSB0eXBlcyQxLnByaXZhdGVJZCB8fAogICAgICB0aGlzLnR5cGUgPT09IHR5cGVzJDEubnVtIHx8CiAgICAgIHRoaXMudHlwZSA9PT0gdHlwZXMkMS5zdHJpbmcgfHwKICAgICAgdGhpcy50eXBlID09PSB0eXBlcyQxLmJyYWNrZXRMIHx8CiAgICAgIHRoaXMudHlwZS5rZXl3b3JkCiAgICApCiAgfTsKCiAgcHAkOC5wYXJzZUNsYXNzRWxlbWVudE5hbWUgPSBmdW5jdGlvbihlbGVtZW50KSB7CiAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLnByaXZhdGVJZCkgewogICAgICBpZiAodGhpcy52YWx1ZSA9PT0gImNvbnN0cnVjdG9yIikgewogICAgICAgIHRoaXMucmFpc2UodGhpcy5zdGFydCwgIkNsYXNzZXMgY2FuJ3QgaGF2ZSBhbiBlbGVtZW50IG5hbWVkICcjY29uc3RydWN0b3InIik7CiAgICAgIH0KICAgICAgZWxlbWVudC5jb21wdXRlZCA9IGZhbHNlOwogICAgICBlbGVtZW50LmtleSA9IHRoaXMucGFyc2VQcml2YXRlSWRlbnQoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucGFyc2VQcm9wZXJ0eU5hbWUoZWxlbWVudCk7CiAgICB9CiAgfTsKCiAgcHAkOC5wYXJzZUNsYXNzTWV0aG9kID0gZnVuY3Rpb24obWV0aG9kLCBpc0dlbmVyYXRvciwgaXNBc3luYywgYWxsb3dzRGlyZWN0U3VwZXIpIHsKICAgIC8vIENoZWNrIGtleSBhbmQgZmxhZ3MKICAgIHZhciBrZXkgPSBtZXRob2Qua2V5OwogICAgaWYgKG1ldGhvZC5raW5kID09PSAiY29uc3RydWN0b3IiKSB7CiAgICAgIGlmIChpc0dlbmVyYXRvcikgeyB0aGlzLnJhaXNlKGtleS5zdGFydCwgIkNvbnN0cnVjdG9yIGNhbid0IGJlIGEgZ2VuZXJhdG9yIik7IH0KICAgICAgaWYgKGlzQXN5bmMpIHsgdGhpcy5yYWlzZShrZXkuc3RhcnQsICJDb25zdHJ1Y3RvciBjYW4ndCBiZSBhbiBhc3luYyBtZXRob2QiKTsgfQogICAgfSBlbHNlIGlmIChtZXRob2Quc3RhdGljICYmIGNoZWNrS2V5TmFtZShtZXRob2QsICJwcm90b3R5cGUiKSkgewogICAgICB0aGlzLnJhaXNlKGtleS5zdGFydCwgIkNsYXNzZXMgbWF5IG5vdCBoYXZlIGEgc3RhdGljIHByb3BlcnR5IG5hbWVkIHByb3RvdHlwZSIpOwogICAgfQoKICAgIC8vIFBhcnNlIHZhbHVlCiAgICB2YXIgdmFsdWUgPSBtZXRob2QudmFsdWUgPSB0aGlzLnBhcnNlTWV0aG9kKGlzR2VuZXJhdG9yLCBpc0FzeW5jLCBhbGxvd3NEaXJlY3RTdXBlcik7CgogICAgLy8gQ2hlY2sgdmFsdWUKICAgIGlmIChtZXRob2Qua2luZCA9PT0gImdldCIgJiYgdmFsdWUucGFyYW1zLmxlbmd0aCAhPT0gMCkKICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUodmFsdWUuc3RhcnQsICJnZXR0ZXIgc2hvdWxkIGhhdmUgbm8gcGFyYW1zIik7IH0KICAgIGlmIChtZXRob2Qua2luZCA9PT0gInNldCIgJiYgdmFsdWUucGFyYW1zLmxlbmd0aCAhPT0gMSkKICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUodmFsdWUuc3RhcnQsICJzZXR0ZXIgc2hvdWxkIGhhdmUgZXhhY3RseSBvbmUgcGFyYW0iKTsgfQogICAgaWYgKG1ldGhvZC5raW5kID09PSAic2V0IiAmJiB2YWx1ZS5wYXJhbXNbMF0udHlwZSA9PT0gIlJlc3RFbGVtZW50IikKICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUodmFsdWUucGFyYW1zWzBdLnN0YXJ0LCAiU2V0dGVyIGNhbm5vdCB1c2UgcmVzdCBwYXJhbXMiKTsgfQoKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobWV0aG9kLCAiTWV0aG9kRGVmaW5pdGlvbiIpCiAgfTsKCiAgcHAkOC5wYXJzZUNsYXNzRmllbGQgPSBmdW5jdGlvbihmaWVsZCkgewogICAgaWYgKGNoZWNrS2V5TmFtZShmaWVsZCwgImNvbnN0cnVjdG9yIikpIHsKICAgICAgdGhpcy5yYWlzZShmaWVsZC5rZXkuc3RhcnQsICJDbGFzc2VzIGNhbid0IGhhdmUgYSBmaWVsZCBuYW1lZCAnY29uc3RydWN0b3InIik7CiAgICB9IGVsc2UgaWYgKGZpZWxkLnN0YXRpYyAmJiBjaGVja0tleU5hbWUoZmllbGQsICJwcm90b3R5cGUiKSkgewogICAgICB0aGlzLnJhaXNlKGZpZWxkLmtleS5zdGFydCwgIkNsYXNzZXMgY2FuJ3QgaGF2ZSBhIHN0YXRpYyBmaWVsZCBuYW1lZCAncHJvdG90eXBlJyIpOwogICAgfQoKICAgIGlmICh0aGlzLmVhdCh0eXBlcyQxLmVxKSkgewogICAgICAvLyBUbyByYWlzZSBTeW50YXhFcnJvciBpZiAnYXJndW1lbnRzJyBleGlzdHMgaW4gdGhlIGluaXRpYWxpemVyLgogICAgICB2YXIgc2NvcGUgPSB0aGlzLmN1cnJlbnRUaGlzU2NvcGUoKTsKICAgICAgdmFyIGluQ2xhc3NGaWVsZEluaXQgPSBzY29wZS5pbkNsYXNzRmllbGRJbml0OwogICAgICBzY29wZS5pbkNsYXNzRmllbGRJbml0ID0gdHJ1ZTsKICAgICAgZmllbGQudmFsdWUgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oKTsKICAgICAgc2NvcGUuaW5DbGFzc0ZpZWxkSW5pdCA9IGluQ2xhc3NGaWVsZEluaXQ7CiAgICB9IGVsc2UgewogICAgICBmaWVsZC52YWx1ZSA9IG51bGw7CiAgICB9CiAgICB0aGlzLnNlbWljb2xvbigpOwoKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUoZmllbGQsICJQcm9wZXJ0eURlZmluaXRpb24iKQogIH07CgogIHBwJDgucGFyc2VDbGFzc1N0YXRpY0Jsb2NrID0gZnVuY3Rpb24obm9kZSkgewogICAgbm9kZS5ib2R5ID0gW107CgogICAgdmFyIG9sZExhYmVscyA9IHRoaXMubGFiZWxzOwogICAgdGhpcy5sYWJlbHMgPSBbXTsKICAgIHRoaXMuZW50ZXJTY29wZShTQ09QRV9DTEFTU19TVEFUSUNfQkxPQ0sgfCBTQ09QRV9TVVBFUik7CiAgICB3aGlsZSAodGhpcy50eXBlICE9PSB0eXBlcyQxLmJyYWNlUikgewogICAgICB2YXIgc3RtdCA9IHRoaXMucGFyc2VTdGF0ZW1lbnQobnVsbCk7CiAgICAgIG5vZGUuYm9keS5wdXNoKHN0bXQpOwogICAgfQogICAgdGhpcy5uZXh0KCk7CiAgICB0aGlzLmV4aXRTY29wZSgpOwogICAgdGhpcy5sYWJlbHMgPSBvbGRMYWJlbHM7CgogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiU3RhdGljQmxvY2siKQogIH07CgogIHBwJDgucGFyc2VDbGFzc0lkID0gZnVuY3Rpb24obm9kZSwgaXNTdGF0ZW1lbnQpIHsKICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEubmFtZSkgewogICAgICBub2RlLmlkID0gdGhpcy5wYXJzZUlkZW50KCk7CiAgICAgIGlmIChpc1N0YXRlbWVudCkKICAgICAgICB7IHRoaXMuY2hlY2tMVmFsU2ltcGxlKG5vZGUuaWQsIEJJTkRfTEVYSUNBTCwgZmFsc2UpOyB9CiAgICB9IGVsc2UgewogICAgICBpZiAoaXNTdGF0ZW1lbnQgPT09IHRydWUpCiAgICAgICAgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgICBub2RlLmlkID0gbnVsbDsKICAgIH0KICB9OwoKICBwcCQ4LnBhcnNlQ2xhc3NTdXBlciA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIG5vZGUuc3VwZXJDbGFzcyA9IHRoaXMuZWF0KHR5cGVzJDEuX2V4dGVuZHMpID8gdGhpcy5wYXJzZUV4cHJTdWJzY3JpcHRzKGZhbHNlKSA6IG51bGw7CiAgfTsKCiAgcHAkOC5lbnRlckNsYXNzQm9keSA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGVsZW1lbnQgPSB7ZGVjbGFyZWQ6IE9iamVjdC5jcmVhdGUobnVsbCksIHVzZWQ6IFtdfTsKICAgIHRoaXMucHJpdmF0ZU5hbWVTdGFjay5wdXNoKGVsZW1lbnQpOwogICAgcmV0dXJuIGVsZW1lbnQuZGVjbGFyZWQKICB9OwoKICBwcCQ4LmV4aXRDbGFzc0JvZHkgPSBmdW5jdGlvbigpIHsKICAgIHZhciByZWYgPSB0aGlzLnByaXZhdGVOYW1lU3RhY2sucG9wKCk7CiAgICB2YXIgZGVjbGFyZWQgPSByZWYuZGVjbGFyZWQ7CiAgICB2YXIgdXNlZCA9IHJlZi51c2VkOwogICAgdmFyIGxlbiA9IHRoaXMucHJpdmF0ZU5hbWVTdGFjay5sZW5ndGg7CiAgICB2YXIgcGFyZW50ID0gbGVuID09PSAwID8gbnVsbCA6IHRoaXMucHJpdmF0ZU5hbWVTdGFja1tsZW4gLSAxXTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdXNlZC5sZW5ndGg7ICsraSkgewogICAgICB2YXIgaWQgPSB1c2VkW2ldOwogICAgICBpZiAoIWhhc093bihkZWNsYXJlZCwgaWQubmFtZSkpIHsKICAgICAgICBpZiAocGFyZW50KSB7CiAgICAgICAgICBwYXJlbnQudXNlZC5wdXNoKGlkKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5yYWlzZVJlY292ZXJhYmxlKGlkLnN0YXJ0LCAoIlByaXZhdGUgZmllbGQgJyMiICsgKGlkLm5hbWUpICsgIicgbXVzdCBiZSBkZWNsYXJlZCBpbiBhbiBlbmNsb3NpbmcgY2xhc3MiKSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gaXNQcml2YXRlTmFtZUNvbmZsaWN0ZWQocHJpdmF0ZU5hbWVNYXAsIGVsZW1lbnQpIHsKICAgIHZhciBuYW1lID0gZWxlbWVudC5rZXkubmFtZTsKICAgIHZhciBjdXJyID0gcHJpdmF0ZU5hbWVNYXBbbmFtZV07CgogICAgdmFyIG5leHQgPSAidHJ1ZSI7CiAgICBpZiAoZWxlbWVudC50eXBlID09PSAiTWV0aG9kRGVmaW5pdGlvbiIgJiYgKGVsZW1lbnQua2luZCA9PT0gImdldCIgfHwgZWxlbWVudC5raW5kID09PSAic2V0IikpIHsKICAgICAgbmV4dCA9IChlbGVtZW50LnN0YXRpYyA/ICJzIiA6ICJpIikgKyBlbGVtZW50LmtpbmQ7CiAgICB9CgogICAgLy8gYGNsYXNzIHsgZ2V0ICNhKCl7fTsgc3RhdGljIHNldCAjYShfKXt9IH1gIGlzIGFsc28gY29uZmxpY3QuCiAgICBpZiAoCiAgICAgIGN1cnIgPT09ICJpZ2V0IiAmJiBuZXh0ID09PSAiaXNldCIgfHwKICAgICAgY3VyciA9PT0gImlzZXQiICYmIG5leHQgPT09ICJpZ2V0IiB8fAogICAgICBjdXJyID09PSAic2dldCIgJiYgbmV4dCA9PT0gInNzZXQiIHx8CiAgICAgIGN1cnIgPT09ICJzc2V0IiAmJiBuZXh0ID09PSAic2dldCIKICAgICkgewogICAgICBwcml2YXRlTmFtZU1hcFtuYW1lXSA9ICJ0cnVlIjsKICAgICAgcmV0dXJuIGZhbHNlCiAgICB9IGVsc2UgaWYgKCFjdXJyKSB7CiAgICAgIHByaXZhdGVOYW1lTWFwW25hbWVdID0gbmV4dDsKICAgICAgcmV0dXJuIGZhbHNlCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gdHJ1ZQogICAgfQogIH0KCiAgZnVuY3Rpb24gY2hlY2tLZXlOYW1lKG5vZGUsIG5hbWUpIHsKICAgIHZhciBjb21wdXRlZCA9IG5vZGUuY29tcHV0ZWQ7CiAgICB2YXIga2V5ID0gbm9kZS5rZXk7CiAgICByZXR1cm4gIWNvbXB1dGVkICYmICgKICAgICAga2V5LnR5cGUgPT09ICJJZGVudGlmaWVyIiAmJiBrZXkubmFtZSA9PT0gbmFtZSB8fAogICAgICBrZXkudHlwZSA9PT0gIkxpdGVyYWwiICYmIGtleS52YWx1ZSA9PT0gbmFtZQogICAgKQogIH0KCiAgLy8gUGFyc2VzIG1vZHVsZSBleHBvcnQgZGVjbGFyYXRpb24uCgogIHBwJDgucGFyc2VFeHBvcnQgPSBmdW5jdGlvbihub2RlLCBleHBvcnRzKSB7CiAgICB0aGlzLm5leHQoKTsKICAgIC8vIGV4cG9ydCAqIGZyb20gJy4uLicKICAgIGlmICh0aGlzLmVhdCh0eXBlcyQxLnN0YXIpKSB7CiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTEpIHsKICAgICAgICBpZiAodGhpcy5lYXRDb250ZXh0dWFsKCJhcyIpKSB7CiAgICAgICAgICBub2RlLmV4cG9ydGVkID0gdGhpcy5wYXJzZU1vZHVsZUV4cG9ydE5hbWUoKTsKICAgICAgICAgIHRoaXMuY2hlY2tFeHBvcnQoZXhwb3J0cywgbm9kZS5leHBvcnRlZC5uYW1lLCB0aGlzLmxhc3RUb2tTdGFydCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5vZGUuZXhwb3J0ZWQgPSBudWxsOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmV4cGVjdENvbnRleHR1YWwoImZyb20iKTsKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gdHlwZXMkMS5zdHJpbmcpIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KICAgICAgbm9kZS5zb3VyY2UgPSB0aGlzLnBhcnNlRXhwckF0b20oKTsKICAgICAgdGhpcy5zZW1pY29sb24oKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRXhwb3J0QWxsRGVjbGFyYXRpb24iKQogICAgfQogICAgaWYgKHRoaXMuZWF0KHR5cGVzJDEuX2RlZmF1bHQpKSB7IC8vIGV4cG9ydCBkZWZhdWx0IC4uLgogICAgICB0aGlzLmNoZWNrRXhwb3J0KGV4cG9ydHMsICJkZWZhdWx0IiwgdGhpcy5sYXN0VG9rU3RhcnQpOwogICAgICB2YXIgaXNBc3luYzsKICAgICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5fZnVuY3Rpb24gfHwgKGlzQXN5bmMgPSB0aGlzLmlzQXN5bmNGdW5jdGlvbigpKSkgewogICAgICAgIHZhciBmTm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgICAgdGhpcy5uZXh0KCk7CiAgICAgICAgaWYgKGlzQXN5bmMpIHsgdGhpcy5uZXh0KCk7IH0KICAgICAgICBub2RlLmRlY2xhcmF0aW9uID0gdGhpcy5wYXJzZUZ1bmN0aW9uKGZOb2RlLCBGVU5DX1NUQVRFTUVOVCB8IEZVTkNfTlVMTEFCTEVfSUQsIGZhbHNlLCBpc0FzeW5jKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuX2NsYXNzKSB7CiAgICAgICAgdmFyIGNOb2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgICBub2RlLmRlY2xhcmF0aW9uID0gdGhpcy5wYXJzZUNsYXNzKGNOb2RlLCAibnVsbGFibGVJRCIpOwogICAgICB9IGVsc2UgewogICAgICAgIG5vZGUuZGVjbGFyYXRpb24gPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oKTsKICAgICAgICB0aGlzLnNlbWljb2xvbigpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkV4cG9ydERlZmF1bHREZWNsYXJhdGlvbiIpCiAgICB9CiAgICAvLyBleHBvcnQgdmFyfGNvbnN0fGxldHxmdW5jdGlvbnxjbGFzcyAuLi4KICAgIGlmICh0aGlzLnNob3VsZFBhcnNlRXhwb3J0U3RhdGVtZW50KCkpIHsKICAgICAgbm9kZS5kZWNsYXJhdGlvbiA9IHRoaXMucGFyc2VTdGF0ZW1lbnQobnVsbCk7CiAgICAgIGlmIChub2RlLmRlY2xhcmF0aW9uLnR5cGUgPT09ICJWYXJpYWJsZURlY2xhcmF0aW9uIikKICAgICAgICB7IHRoaXMuY2hlY2tWYXJpYWJsZUV4cG9ydChleHBvcnRzLCBub2RlLmRlY2xhcmF0aW9uLmRlY2xhcmF0aW9ucyk7IH0KICAgICAgZWxzZQogICAgICAgIHsgdGhpcy5jaGVja0V4cG9ydChleHBvcnRzLCBub2RlLmRlY2xhcmF0aW9uLmlkLm5hbWUsIG5vZGUuZGVjbGFyYXRpb24uaWQuc3RhcnQpOyB9CiAgICAgIG5vZGUuc3BlY2lmaWVycyA9IFtdOwogICAgICBub2RlLnNvdXJjZSA9IG51bGw7CiAgICB9IGVsc2UgeyAvLyBleHBvcnQgeyB4LCB5IGFzIHogfSBbZnJvbSAnLi4uJ10KICAgICAgbm9kZS5kZWNsYXJhdGlvbiA9IG51bGw7CiAgICAgIG5vZGUuc3BlY2lmaWVycyA9IHRoaXMucGFyc2VFeHBvcnRTcGVjaWZpZXJzKGV4cG9ydHMpOwogICAgICBpZiAodGhpcy5lYXRDb250ZXh0dWFsKCJmcm9tIikpIHsKICAgICAgICBpZiAodGhpcy50eXBlICE9PSB0eXBlcyQxLnN0cmluZykgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgICAgIG5vZGUuc291cmNlID0gdGhpcy5wYXJzZUV4cHJBdG9tKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxpc3QgPSBub2RlLnNwZWNpZmllcnM7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgICAvLyBjaGVjayBmb3Iga2V5d29yZHMgdXNlZCBhcyBsb2NhbCBuYW1lcwogICAgICAgICAgdmFyIHNwZWMgPSBsaXN0W2ldOwoKICAgICAgICAgIHRoaXMuY2hlY2tVbnJlc2VydmVkKHNwZWMubG9jYWwpOwogICAgICAgICAgLy8gY2hlY2sgaWYgZXhwb3J0IGlzIGRlZmluZWQKICAgICAgICAgIHRoaXMuY2hlY2tMb2NhbEV4cG9ydChzcGVjLmxvY2FsKTsKCiAgICAgICAgICBpZiAoc3BlYy5sb2NhbC50eXBlID09PSAiTGl0ZXJhbCIpIHsKICAgICAgICAgICAgdGhpcy5yYWlzZShzcGVjLmxvY2FsLnN0YXJ0LCAiQSBzdHJpbmcgbGl0ZXJhbCBjYW5ub3QgYmUgdXNlZCBhcyBhbiBleHBvcnRlZCBiaW5kaW5nIHdpdGhvdXQgYGZyb21gLiIpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbm9kZS5zb3VyY2UgPSBudWxsOwogICAgICB9CiAgICAgIHRoaXMuc2VtaWNvbG9uKCk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJFeHBvcnROYW1lZERlY2xhcmF0aW9uIikKICB9OwoKICBwcCQ4LmNoZWNrRXhwb3J0ID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgcG9zKSB7CiAgICBpZiAoIWV4cG9ydHMpIHsgcmV0dXJuIH0KICAgIGlmIChoYXNPd24oZXhwb3J0cywgbmFtZSkpCiAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHBvcywgIkR1cGxpY2F0ZSBleHBvcnQgJyIgKyBuYW1lICsgIiciKTsgfQogICAgZXhwb3J0c1tuYW1lXSA9IHRydWU7CiAgfTsKCiAgcHAkOC5jaGVja1BhdHRlcm5FeHBvcnQgPSBmdW5jdGlvbihleHBvcnRzLCBwYXQpIHsKICAgIHZhciB0eXBlID0gcGF0LnR5cGU7CiAgICBpZiAodHlwZSA9PT0gIklkZW50aWZpZXIiKQogICAgICB7IHRoaXMuY2hlY2tFeHBvcnQoZXhwb3J0cywgcGF0Lm5hbWUsIHBhdC5zdGFydCk7IH0KICAgIGVsc2UgaWYgKHR5cGUgPT09ICJPYmplY3RQYXR0ZXJuIikKICAgICAgeyBmb3IgKHZhciBpID0gMCwgbGlzdCA9IHBhdC5wcm9wZXJ0aWVzOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkKICAgICAgICB7CiAgICAgICAgICB2YXIgcHJvcCA9IGxpc3RbaV07CgogICAgICAgICAgdGhpcy5jaGVja1BhdHRlcm5FeHBvcnQoZXhwb3J0cywgcHJvcCk7CiAgICAgICAgfSB9CiAgICBlbHNlIGlmICh0eXBlID09PSAiQXJyYXlQYXR0ZXJuIikKICAgICAgeyBmb3IgKHZhciBpJDEgPSAwLCBsaXN0JDEgPSBwYXQuZWxlbWVudHM7IGkkMSA8IGxpc3QkMS5sZW5ndGg7IGkkMSArPSAxKSB7CiAgICAgICAgdmFyIGVsdCA9IGxpc3QkMVtpJDFdOwoKICAgICAgICAgIGlmIChlbHQpIHsgdGhpcy5jaGVja1BhdHRlcm5FeHBvcnQoZXhwb3J0cywgZWx0KTsgfQogICAgICB9IH0KICAgIGVsc2UgaWYgKHR5cGUgPT09ICJQcm9wZXJ0eSIpCiAgICAgIHsgdGhpcy5jaGVja1BhdHRlcm5FeHBvcnQoZXhwb3J0cywgcGF0LnZhbHVlKTsgfQogICAgZWxzZSBpZiAodHlwZSA9PT0gIkFzc2lnbm1lbnRQYXR0ZXJuIikKICAgICAgeyB0aGlzLmNoZWNrUGF0dGVybkV4cG9ydChleHBvcnRzLCBwYXQubGVmdCk7IH0KICAgIGVsc2UgaWYgKHR5cGUgPT09ICJSZXN0RWxlbWVudCIpCiAgICAgIHsgdGhpcy5jaGVja1BhdHRlcm5FeHBvcnQoZXhwb3J0cywgcGF0LmFyZ3VtZW50KTsgfQogICAgZWxzZSBpZiAodHlwZSA9PT0gIlBhcmVudGhlc2l6ZWRFeHByZXNzaW9uIikKICAgICAgeyB0aGlzLmNoZWNrUGF0dGVybkV4cG9ydChleHBvcnRzLCBwYXQuZXhwcmVzc2lvbik7IH0KICB9OwoKICBwcCQ4LmNoZWNrVmFyaWFibGVFeHBvcnQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWNscykgewogICAgaWYgKCFleHBvcnRzKSB7IHJldHVybiB9CiAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IGRlY2xzOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkKICAgICAgewogICAgICB2YXIgZGVjbCA9IGxpc3RbaV07CgogICAgICB0aGlzLmNoZWNrUGF0dGVybkV4cG9ydChleHBvcnRzLCBkZWNsLmlkKTsKICAgIH0KICB9OwoKICBwcCQ4LnNob3VsZFBhcnNlRXhwb3J0U3RhdGVtZW50ID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy50eXBlLmtleXdvcmQgPT09ICJ2YXIiIHx8CiAgICAgIHRoaXMudHlwZS5rZXl3b3JkID09PSAiY29uc3QiIHx8CiAgICAgIHRoaXMudHlwZS5rZXl3b3JkID09PSAiY2xhc3MiIHx8CiAgICAgIHRoaXMudHlwZS5rZXl3b3JkID09PSAiZnVuY3Rpb24iIHx8CiAgICAgIHRoaXMuaXNMZXQoKSB8fAogICAgICB0aGlzLmlzQXN5bmNGdW5jdGlvbigpCiAgfTsKCiAgLy8gUGFyc2VzIGEgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgbW9kdWxlIGV4cG9ydHMuCgogIHBwJDgucGFyc2VFeHBvcnRTcGVjaWZpZXJzID0gZnVuY3Rpb24oZXhwb3J0cykgewogICAgdmFyIG5vZGVzID0gW10sIGZpcnN0ID0gdHJ1ZTsKICAgIC8vIGV4cG9ydCB7IHgsIHkgYXMgeiB9IFtmcm9tICcuLi4nXQogICAgdGhpcy5leHBlY3QodHlwZXMkMS5icmFjZUwpOwogICAgd2hpbGUgKCF0aGlzLmVhdCh0eXBlcyQxLmJyYWNlUikpIHsKICAgICAgaWYgKCFmaXJzdCkgewogICAgICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEuY29tbWEpOwogICAgICAgIGlmICh0aGlzLmFmdGVyVHJhaWxpbmdDb21tYSh0eXBlcyQxLmJyYWNlUikpIHsgYnJlYWsgfQogICAgICB9IGVsc2UgeyBmaXJzdCA9IGZhbHNlOyB9CgogICAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIG5vZGUubG9jYWwgPSB0aGlzLnBhcnNlTW9kdWxlRXhwb3J0TmFtZSgpOwogICAgICBub2RlLmV4cG9ydGVkID0gdGhpcy5lYXRDb250ZXh0dWFsKCJhcyIpID8gdGhpcy5wYXJzZU1vZHVsZUV4cG9ydE5hbWUoKSA6IG5vZGUubG9jYWw7CiAgICAgIHRoaXMuY2hlY2tFeHBvcnQoCiAgICAgICAgZXhwb3J0cywKICAgICAgICBub2RlLmV4cG9ydGVkW25vZGUuZXhwb3J0ZWQudHlwZSA9PT0gIklkZW50aWZpZXIiID8gIm5hbWUiIDogInZhbHVlIl0sCiAgICAgICAgbm9kZS5leHBvcnRlZC5zdGFydAogICAgICApOwogICAgICBub2Rlcy5wdXNoKHRoaXMuZmluaXNoTm9kZShub2RlLCAiRXhwb3J0U3BlY2lmaWVyIikpOwogICAgfQogICAgcmV0dXJuIG5vZGVzCiAgfTsKCiAgLy8gUGFyc2VzIGltcG9ydCBkZWNsYXJhdGlvbi4KCiAgcHAkOC5wYXJzZUltcG9ydCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHRoaXMubmV4dCgpOwogICAgLy8gaW1wb3J0ICcuLi4nCiAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLnN0cmluZykgewogICAgICBub2RlLnNwZWNpZmllcnMgPSBlbXB0eSQxOwogICAgICBub2RlLnNvdXJjZSA9IHRoaXMucGFyc2VFeHByQXRvbSgpOwogICAgfSBlbHNlIHsKICAgICAgbm9kZS5zcGVjaWZpZXJzID0gdGhpcy5wYXJzZUltcG9ydFNwZWNpZmllcnMoKTsKICAgICAgdGhpcy5leHBlY3RDb250ZXh0dWFsKCJmcm9tIik7CiAgICAgIG5vZGUuc291cmNlID0gdGhpcy50eXBlID09PSB0eXBlcyQxLnN0cmluZyA/IHRoaXMucGFyc2VFeHByQXRvbSgpIDogdGhpcy51bmV4cGVjdGVkKCk7CiAgICB9CiAgICB0aGlzLnNlbWljb2xvbigpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiSW1wb3J0RGVjbGFyYXRpb24iKQogIH07CgogIC8vIFBhcnNlcyBhIGNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIG1vZHVsZSBpbXBvcnRzLgoKICBwcCQ4LnBhcnNlSW1wb3J0U3BlY2lmaWVycyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG5vZGVzID0gW10sIGZpcnN0ID0gdHJ1ZTsKICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEubmFtZSkgewogICAgICAvLyBpbXBvcnQgZGVmYXVsdE9iaiwgeyB4LCB5IGFzIHogfSBmcm9tICcuLi4nCiAgICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgbm9kZS5sb2NhbCA9IHRoaXMucGFyc2VJZGVudCgpOwogICAgICB0aGlzLmNoZWNrTFZhbFNpbXBsZShub2RlLmxvY2FsLCBCSU5EX0xFWElDQUwpOwogICAgICBub2Rlcy5wdXNoKHRoaXMuZmluaXNoTm9kZShub2RlLCAiSW1wb3J0RGVmYXVsdFNwZWNpZmllciIpKTsKICAgICAgaWYgKCF0aGlzLmVhdCh0eXBlcyQxLmNvbW1hKSkgeyByZXR1cm4gbm9kZXMgfQogICAgfQogICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5zdGFyKSB7CiAgICAgIHZhciBub2RlJDEgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICB0aGlzLm5leHQoKTsKICAgICAgdGhpcy5leHBlY3RDb250ZXh0dWFsKCJhcyIpOwogICAgICBub2RlJDEubG9jYWwgPSB0aGlzLnBhcnNlSWRlbnQoKTsKICAgICAgdGhpcy5jaGVja0xWYWxTaW1wbGUobm9kZSQxLmxvY2FsLCBCSU5EX0xFWElDQUwpOwogICAgICBub2Rlcy5wdXNoKHRoaXMuZmluaXNoTm9kZShub2RlJDEsICJJbXBvcnROYW1lc3BhY2VTcGVjaWZpZXIiKSk7CiAgICAgIHJldHVybiBub2RlcwogICAgfQogICAgdGhpcy5leHBlY3QodHlwZXMkMS5icmFjZUwpOwogICAgd2hpbGUgKCF0aGlzLmVhdCh0eXBlcyQxLmJyYWNlUikpIHsKICAgICAgaWYgKCFmaXJzdCkgewogICAgICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEuY29tbWEpOwogICAgICAgIGlmICh0aGlzLmFmdGVyVHJhaWxpbmdDb21tYSh0eXBlcyQxLmJyYWNlUikpIHsgYnJlYWsgfQogICAgICB9IGVsc2UgeyBmaXJzdCA9IGZhbHNlOyB9CgogICAgICB2YXIgbm9kZSQyID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgbm9kZSQyLmltcG9ydGVkID0gdGhpcy5wYXJzZU1vZHVsZUV4cG9ydE5hbWUoKTsKICAgICAgaWYgKHRoaXMuZWF0Q29udGV4dHVhbCgiYXMiKSkgewogICAgICAgIG5vZGUkMi5sb2NhbCA9IHRoaXMucGFyc2VJZGVudCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2hlY2tVbnJlc2VydmVkKG5vZGUkMi5pbXBvcnRlZCk7CiAgICAgICAgbm9kZSQyLmxvY2FsID0gbm9kZSQyLmltcG9ydGVkOwogICAgICB9CiAgICAgIHRoaXMuY2hlY2tMVmFsU2ltcGxlKG5vZGUkMi5sb2NhbCwgQklORF9MRVhJQ0FMKTsKICAgICAgbm9kZXMucHVzaCh0aGlzLmZpbmlzaE5vZGUobm9kZSQyLCAiSW1wb3J0U3BlY2lmaWVyIikpOwogICAgfQogICAgcmV0dXJuIG5vZGVzCiAgfTsKCiAgcHAkOC5wYXJzZU1vZHVsZUV4cG9ydE5hbWUgPSBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTMgJiYgdGhpcy50eXBlID09PSB0eXBlcyQxLnN0cmluZykgewogICAgICB2YXIgc3RyaW5nTGl0ZXJhbCA9IHRoaXMucGFyc2VMaXRlcmFsKHRoaXMudmFsdWUpOwogICAgICBpZiAobG9uZVN1cnJvZ2F0ZS50ZXN0KHN0cmluZ0xpdGVyYWwudmFsdWUpKSB7CiAgICAgICAgdGhpcy5yYWlzZShzdHJpbmdMaXRlcmFsLnN0YXJ0LCAiQW4gZXhwb3J0IG5hbWUgY2Fubm90IGluY2x1ZGUgYSBsb25lIHN1cnJvZ2F0ZS4iKTsKICAgICAgfQogICAgICByZXR1cm4gc3RyaW5nTGl0ZXJhbAogICAgfQogICAgcmV0dXJuIHRoaXMucGFyc2VJZGVudCh0cnVlKQogIH07CgogIC8vIFNldCBgRXhwcmVzc2lvblN0YXRlbWVudCNkaXJlY3RpdmVgIHByb3BlcnR5IGZvciBkaXJlY3RpdmUgcHJvbG9ndWVzLgogIHBwJDguYWRhcHREaXJlY3RpdmVQcm9sb2d1ZSA9IGZ1bmN0aW9uKHN0YXRlbWVudHMpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGVtZW50cy5sZW5ndGggJiYgdGhpcy5pc0RpcmVjdGl2ZUNhbmRpZGF0ZShzdGF0ZW1lbnRzW2ldKTsgKytpKSB7CiAgICAgIHN0YXRlbWVudHNbaV0uZGlyZWN0aXZlID0gc3RhdGVtZW50c1tpXS5leHByZXNzaW9uLnJhdy5zbGljZSgxLCAtMSk7CiAgICB9CiAgfTsKICBwcCQ4LmlzRGlyZWN0aXZlQ2FuZGlkYXRlID0gZnVuY3Rpb24oc3RhdGVtZW50KSB7CiAgICByZXR1cm4gKAogICAgICBzdGF0ZW1lbnQudHlwZSA9PT0gIkV4cHJlc3Npb25TdGF0ZW1lbnQiICYmCiAgICAgIHN0YXRlbWVudC5leHByZXNzaW9uLnR5cGUgPT09ICJMaXRlcmFsIiAmJgogICAgICB0eXBlb2Ygc3RhdGVtZW50LmV4cHJlc3Npb24udmFsdWUgPT09ICJzdHJpbmciICYmCiAgICAgIC8vIFJlamVjdCBwYXJlbnRoZXNpemVkIHN0cmluZ3MuCiAgICAgICh0aGlzLmlucHV0W3N0YXRlbWVudC5zdGFydF0gPT09ICJcIiIgfHwgdGhpcy5pbnB1dFtzdGF0ZW1lbnQuc3RhcnRdID09PSAiJyIpCiAgICApCiAgfTsKCiAgdmFyIHBwJDcgPSBQYXJzZXIucHJvdG90eXBlOwoKICAvLyBDb252ZXJ0IGV4aXN0aW5nIGV4cHJlc3Npb24gYXRvbSB0byBhc3NpZ25hYmxlIHBhdHRlcm4KICAvLyBpZiBwb3NzaWJsZS4KCiAgcHAkNy50b0Fzc2lnbmFibGUgPSBmdW5jdGlvbihub2RlLCBpc0JpbmRpbmcsIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNiAmJiBub2RlKSB7CiAgICAgIHN3aXRjaCAobm9kZS50eXBlKSB7CiAgICAgIGNhc2UgIklkZW50aWZpZXIiOgogICAgICAgIGlmICh0aGlzLmluQXN5bmMgJiYgbm9kZS5uYW1lID09PSAiYXdhaXQiKQogICAgICAgICAgeyB0aGlzLnJhaXNlKG5vZGUuc3RhcnQsICJDYW5ub3QgdXNlICdhd2FpdCcgYXMgaWRlbnRpZmllciBpbnNpZGUgYW4gYXN5bmMgZnVuY3Rpb24iKTsgfQogICAgICAgIGJyZWFrCgogICAgICBjYXNlICJPYmplY3RQYXR0ZXJuIjoKICAgICAgY2FzZSAiQXJyYXlQYXR0ZXJuIjoKICAgICAgY2FzZSAiQXNzaWdubWVudFBhdHRlcm4iOgogICAgICBjYXNlICJSZXN0RWxlbWVudCI6CiAgICAgICAgYnJlYWsKCiAgICAgIGNhc2UgIk9iamVjdEV4cHJlc3Npb24iOgogICAgICAgIG5vZGUudHlwZSA9ICJPYmplY3RQYXR0ZXJuIjsKICAgICAgICBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykgeyB0aGlzLmNoZWNrUGF0dGVybkVycm9ycyhyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLCB0cnVlKTsgfQogICAgICAgIGZvciAodmFyIGkgPSAwLCBsaXN0ID0gbm9kZS5wcm9wZXJ0aWVzOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgICAgdmFyIHByb3AgPSBsaXN0W2ldOwoKICAgICAgICB0aGlzLnRvQXNzaWduYWJsZShwcm9wLCBpc0JpbmRpbmcpOwogICAgICAgICAgLy8gRWFybHkgZXJyb3I6CiAgICAgICAgICAvLyAgIEFzc2lnbm1lbnRSZXN0UHJvcGVydHlbWWllbGQsIEF3YWl0XSA6CiAgICAgICAgICAvLyAgICAgYC4uLmAgRGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRUYXJnZXRbWWllbGQsIEF3YWl0XQogICAgICAgICAgLy8KICAgICAgICAgIC8vICAgSXQgaXMgYSBTeW50YXggRXJyb3IgaWYgfERlc3RydWN0dXJpbmdBc3NpZ25tZW50VGFyZ2V0fCBpcyBhbiB8QXJyYXlMaXRlcmFsfCBvciBhbiB8T2JqZWN0TGl0ZXJhbHwuCiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHByb3AudHlwZSA9PT0gIlJlc3RFbGVtZW50IiAmJgogICAgICAgICAgICAocHJvcC5hcmd1bWVudC50eXBlID09PSAiQXJyYXlQYXR0ZXJuIiB8fCBwcm9wLmFyZ3VtZW50LnR5cGUgPT09ICJPYmplY3RQYXR0ZXJuIikKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLnJhaXNlKHByb3AuYXJndW1lbnQuc3RhcnQsICJVbmV4cGVjdGVkIHRva2VuIik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGJyZWFrCgogICAgICBjYXNlICJQcm9wZXJ0eSI6CiAgICAgICAgLy8gQXNzaWdubWVudFByb3BlcnR5IGhhcyB0eXBlID09PSAiUHJvcGVydHkiCiAgICAgICAgaWYgKG5vZGUua2luZCAhPT0gImluaXQiKSB7IHRoaXMucmFpc2Uobm9kZS5rZXkuc3RhcnQsICJPYmplY3QgcGF0dGVybiBjYW4ndCBjb250YWluIGdldHRlciBvciBzZXR0ZXIiKTsgfQogICAgICAgIHRoaXMudG9Bc3NpZ25hYmxlKG5vZGUudmFsdWUsIGlzQmluZGluZyk7CiAgICAgICAgYnJlYWsKCiAgICAgIGNhc2UgIkFycmF5RXhwcmVzc2lvbiI6CiAgICAgICAgbm9kZS50eXBlID0gIkFycmF5UGF0dGVybiI7CiAgICAgICAgaWYgKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsgdGhpcy5jaGVja1BhdHRlcm5FcnJvcnMocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycywgdHJ1ZSk7IH0KICAgICAgICB0aGlzLnRvQXNzaWduYWJsZUxpc3Qobm9kZS5lbGVtZW50cywgaXNCaW5kaW5nKTsKICAgICAgICBicmVhawoKICAgICAgY2FzZSAiU3ByZWFkRWxlbWVudCI6CiAgICAgICAgbm9kZS50eXBlID0gIlJlc3RFbGVtZW50IjsKICAgICAgICB0aGlzLnRvQXNzaWduYWJsZShub2RlLmFyZ3VtZW50LCBpc0JpbmRpbmcpOwogICAgICAgIGlmIChub2RlLmFyZ3VtZW50LnR5cGUgPT09ICJBc3NpZ25tZW50UGF0dGVybiIpCiAgICAgICAgICB7IHRoaXMucmFpc2Uobm9kZS5hcmd1bWVudC5zdGFydCwgIlJlc3QgZWxlbWVudHMgY2Fubm90IGhhdmUgYSBkZWZhdWx0IHZhbHVlIik7IH0KICAgICAgICBicmVhawoKICAgICAgY2FzZSAiQXNzaWdubWVudEV4cHJlc3Npb24iOgogICAgICAgIGlmIChub2RlLm9wZXJhdG9yICE9PSAiPSIpIHsgdGhpcy5yYWlzZShub2RlLmxlZnQuZW5kLCAiT25seSAnPScgb3BlcmF0b3IgY2FuIGJlIHVzZWQgZm9yIHNwZWNpZnlpbmcgZGVmYXVsdCB2YWx1ZS4iKTsgfQogICAgICAgIG5vZGUudHlwZSA9ICJBc3NpZ25tZW50UGF0dGVybiI7CiAgICAgICAgZGVsZXRlIG5vZGUub3BlcmF0b3I7CiAgICAgICAgdGhpcy50b0Fzc2lnbmFibGUobm9kZS5sZWZ0LCBpc0JpbmRpbmcpOwogICAgICAgIGJyZWFrCgogICAgICBjYXNlICJQYXJlbnRoZXNpemVkRXhwcmVzc2lvbiI6CiAgICAgICAgdGhpcy50b0Fzc2lnbmFibGUobm9kZS5leHByZXNzaW9uLCBpc0JpbmRpbmcsIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpOwogICAgICAgIGJyZWFrCgogICAgICBjYXNlICJDaGFpbkV4cHJlc3Npb24iOgogICAgICAgIHRoaXMucmFpc2VSZWNvdmVyYWJsZShub2RlLnN0YXJ0LCAiT3B0aW9uYWwgY2hhaW5pbmcgY2Fubm90IGFwcGVhciBpbiBsZWZ0LWhhbmQgc2lkZSIpOwogICAgICAgIGJyZWFrCgogICAgICBjYXNlICJNZW1iZXJFeHByZXNzaW9uIjoKICAgICAgICBpZiAoIWlzQmluZGluZykgeyBicmVhayB9CgogICAgICBkZWZhdWx0OgogICAgICAgIHRoaXMucmFpc2Uobm9kZS5zdGFydCwgIkFzc2lnbmluZyB0byBydmFsdWUiKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChyZWZEZXN0cnVjdHVyaW5nRXJyb3JzKSB7IHRoaXMuY2hlY2tQYXR0ZXJuRXJyb3JzKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIHRydWUpOyB9CiAgICByZXR1cm4gbm9kZQogIH07CgogIC8vIENvbnZlcnQgbGlzdCBvZiBleHByZXNzaW9uIGF0b21zIHRvIGJpbmRpbmcgbGlzdC4KCiAgcHAkNy50b0Fzc2lnbmFibGVMaXN0ID0gZnVuY3Rpb24oZXhwckxpc3QsIGlzQmluZGluZykgewogICAgdmFyIGVuZCA9IGV4cHJMaXN0Lmxlbmd0aDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZW5kOyBpKyspIHsKICAgICAgdmFyIGVsdCA9IGV4cHJMaXN0W2ldOwogICAgICBpZiAoZWx0KSB7IHRoaXMudG9Bc3NpZ25hYmxlKGVsdCwgaXNCaW5kaW5nKTsgfQogICAgfQogICAgaWYgKGVuZCkgewogICAgICB2YXIgbGFzdCA9IGV4cHJMaXN0W2VuZCAtIDFdOwogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID09PSA2ICYmIGlzQmluZGluZyAmJiBsYXN0ICYmIGxhc3QudHlwZSA9PT0gIlJlc3RFbGVtZW50IiAmJiBsYXN0LmFyZ3VtZW50LnR5cGUgIT09ICJJZGVudGlmaWVyIikKICAgICAgICB7IHRoaXMudW5leHBlY3RlZChsYXN0LmFyZ3VtZW50LnN0YXJ0KTsgfQogICAgfQogICAgcmV0dXJuIGV4cHJMaXN0CiAgfTsKCiAgLy8gUGFyc2VzIHNwcmVhZCBlbGVtZW50LgoKICBwcCQ3LnBhcnNlU3ByZWFkID0gZnVuY3Rpb24ocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykgewogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgdGhpcy5uZXh0KCk7CiAgICBub2RlLmFyZ3VtZW50ID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKGZhbHNlLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlNwcmVhZEVsZW1lbnQiKQogIH07CgogIHBwJDcucGFyc2VSZXN0QmluZGluZyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgdGhpcy5uZXh0KCk7CgogICAgLy8gUmVzdEVsZW1lbnQgaW5zaWRlIG9mIGEgZnVuY3Rpb24gcGFyYW1ldGVyIG11c3QgYmUgYW4gaWRlbnRpZmllcgogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA9PT0gNiAmJiB0aGlzLnR5cGUgIT09IHR5cGVzJDEubmFtZSkKICAgICAgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQoKICAgIG5vZGUuYXJndW1lbnQgPSB0aGlzLnBhcnNlQmluZGluZ0F0b20oKTsKCiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJSZXN0RWxlbWVudCIpCiAgfTsKCiAgLy8gUGFyc2VzIGx2YWx1ZSAoYXNzaWduYWJsZSkgYXRvbS4KCiAgcHAkNy5wYXJzZUJpbmRpbmdBdG9tID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpIHsKICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHsKICAgICAgY2FzZSB0eXBlcyQxLmJyYWNrZXRMOgogICAgICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgICB0aGlzLm5leHQoKTsKICAgICAgICBub2RlLmVsZW1lbnRzID0gdGhpcy5wYXJzZUJpbmRpbmdMaXN0KHR5cGVzJDEuYnJhY2tldFIsIHRydWUsIHRydWUpOwogICAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkFycmF5UGF0dGVybiIpCgogICAgICBjYXNlIHR5cGVzJDEuYnJhY2VMOgogICAgICAgIHJldHVybiB0aGlzLnBhcnNlT2JqKHRydWUpCiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0aGlzLnBhcnNlSWRlbnQoKQogIH07CgogIHBwJDcucGFyc2VCaW5kaW5nTGlzdCA9IGZ1bmN0aW9uKGNsb3NlLCBhbGxvd0VtcHR5LCBhbGxvd1RyYWlsaW5nQ29tbWEpIHsKICAgIHZhciBlbHRzID0gW10sIGZpcnN0ID0gdHJ1ZTsKICAgIHdoaWxlICghdGhpcy5lYXQoY2xvc2UpKSB7CiAgICAgIGlmIChmaXJzdCkgeyBmaXJzdCA9IGZhbHNlOyB9CiAgICAgIGVsc2UgeyB0aGlzLmV4cGVjdCh0eXBlcyQxLmNvbW1hKTsgfQogICAgICBpZiAoYWxsb3dFbXB0eSAmJiB0aGlzLnR5cGUgPT09IHR5cGVzJDEuY29tbWEpIHsKICAgICAgICBlbHRzLnB1c2gobnVsbCk7CiAgICAgIH0gZWxzZSBpZiAoYWxsb3dUcmFpbGluZ0NvbW1hICYmIHRoaXMuYWZ0ZXJUcmFpbGluZ0NvbW1hKGNsb3NlKSkgewogICAgICAgIGJyZWFrCiAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLmVsbGlwc2lzKSB7CiAgICAgICAgdmFyIHJlc3QgPSB0aGlzLnBhcnNlUmVzdEJpbmRpbmcoKTsKICAgICAgICB0aGlzLnBhcnNlQmluZGluZ0xpc3RJdGVtKHJlc3QpOwogICAgICAgIGVsdHMucHVzaChyZXN0KTsKICAgICAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLmNvbW1hKSB7IHRoaXMucmFpc2UodGhpcy5zdGFydCwgIkNvbW1hIGlzIG5vdCBwZXJtaXR0ZWQgYWZ0ZXIgdGhlIHJlc3QgZWxlbWVudCIpOyB9CiAgICAgICAgdGhpcy5leHBlY3QoY2xvc2UpOwogICAgICAgIGJyZWFrCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGVsZW0gPSB0aGlzLnBhcnNlTWF5YmVEZWZhdWx0KHRoaXMuc3RhcnQsIHRoaXMuc3RhcnRMb2MpOwogICAgICAgIHRoaXMucGFyc2VCaW5kaW5nTGlzdEl0ZW0oZWxlbSk7CiAgICAgICAgZWx0cy5wdXNoKGVsZW0pOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZWx0cwogIH07CgogIHBwJDcucGFyc2VCaW5kaW5nTGlzdEl0ZW0gPSBmdW5jdGlvbihwYXJhbSkgewogICAgcmV0dXJuIHBhcmFtCiAgfTsKCiAgLy8gUGFyc2VzIGFzc2lnbm1lbnQgcGF0dGVybiBhcm91bmQgZ2l2ZW4gYXRvbSBpZiBwb3NzaWJsZS4KCiAgcHAkNy5wYXJzZU1heWJlRGVmYXVsdCA9IGZ1bmN0aW9uKHN0YXJ0UG9zLCBzdGFydExvYywgbGVmdCkgewogICAgbGVmdCA9IGxlZnQgfHwgdGhpcy5wYXJzZUJpbmRpbmdBdG9tKCk7CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uIDwgNiB8fCAhdGhpcy5lYXQodHlwZXMkMS5lcSkpIHsgcmV0dXJuIGxlZnQgfQogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0UG9zLCBzdGFydExvYyk7CiAgICBub2RlLmxlZnQgPSBsZWZ0OwogICAgbm9kZS5yaWdodCA9IHRoaXMucGFyc2VNYXliZUFzc2lnbigpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiQXNzaWdubWVudFBhdHRlcm4iKQogIH07CgogIC8vIFRoZSBmb2xsb3dpbmcgdGhyZWUgZnVuY3Rpb25zIGFsbCB2ZXJpZnkgdGhhdCBhIG5vZGUgaXMgYW4gbHZhbHVlIOKAlAogIC8vIHNvbWV0aGluZyB0aGF0IGNhbiBiZSBib3VuZCwgb3IgYXNzaWduZWQgdG8uIEluIG9yZGVyIHRvIGRvIHNvLCB0aGV5IHBlcmZvcm0KICAvLyBhIHZhcmlldHkgb2YgY2hlY2tzOgogIC8vCiAgLy8gLSBDaGVjayB0aGF0IG5vbmUgb2YgdGhlIGJvdW5kL2Fzc2lnbmVkLXRvIGlkZW50aWZpZXJzIGFyZSByZXNlcnZlZCB3b3Jkcy4KICAvLyAtIFJlY29yZCBuYW1lIGRlY2xhcmF0aW9ucyBmb3IgYmluZGluZ3MgaW4gdGhlIGFwcHJvcHJpYXRlIHNjb3BlLgogIC8vIC0gQ2hlY2sgZHVwbGljYXRlIGFyZ3VtZW50IG5hbWVzLCBpZiBjaGVja0NsYXNoZXMgaXMgc2V0LgogIC8vCiAgLy8gSWYgYSBjb21wbGV4IGJpbmRpbmcgcGF0dGVybiBpcyBlbmNvdW50ZXJlZCAoZS5nLiwgb2JqZWN0IGFuZCBhcnJheQogIC8vIGRlc3RydWN0dXJpbmcpLCB0aGUgZW50aXJlIHBhdHRlcm4gaXMgcmVjdXJzaXZlbHkgY2hlY2tlZC4KICAvLwogIC8vIFRoZXJlIGFyZSB0aHJlZSB2ZXJzaW9ucyBvZiBjaGVja0xWYWwqKCkgYXBwcm9wcmlhdGUgZm9yIGRpZmZlcmVudAogIC8vIGNpcmN1bXN0YW5jZXM6CiAgLy8KICAvLyAtIGNoZWNrTFZhbFNpbXBsZSgpIHNoYWxsIGJlIHVzZWQgaWYgdGhlIHN5bnRhY3RpYyBjb25zdHJ1Y3Qgc3VwcG9ydHMKICAvLyAgIG5vdGhpbmcgb3RoZXIgdGhhbiBpZGVudGlmaWVycyBhbmQgbWVtYmVyIGV4cHJlc3Npb25zLiBQYXJlbnRoZXNpemVkCiAgLy8gICBleHByZXNzaW9ucyBhcmUgYWxzbyBjb3JyZWN0bHkgaGFuZGxlZC4gVGhpcyBpcyBnZW5lcmFsbHkgYXBwcm9wcmlhdGUgZm9yCiAgLy8gICBjb25zdHJ1Y3RzIGZvciB3aGljaCB0aGUgc3BlYyBzYXlzCiAgLy8KICAvLyAgID4gSXQgaXMgYSBTeW50YXggRXJyb3IgaWYgQXNzaWdubWVudFRhcmdldFR5cGUgb2YgW3RoZSBwcm9kdWN0aW9uXSBpcyBub3QKICAvLyAgID4gc2ltcGxlLgogIC8vCiAgLy8gICBJdCBpcyBhbHNvIGFwcHJvcHJpYXRlIGZvciBjaGVja2luZyBpZiBhbiBpZGVudGlmaWVyIGlzIHZhbGlkIGFuZCBub3QKICAvLyAgIGRlZmluZWQgZWxzZXdoZXJlLCBsaWtlIGltcG9ydCBkZWNsYXJhdGlvbnMgb3IgZnVuY3Rpb24vY2xhc3MgaWRlbnRpZmllcnMuCiAgLy8KICAvLyAgIEV4YW1wbGVzIHdoZXJlIHRoaXMgaXMgdXNlZCBpbmNsdWRlOgogIC8vICAgICBhICs9IOKApjsKICAvLyAgICAgaW1wb3J0IGEgZnJvbSAn4oCmJzsKICAvLyAgIHdoZXJlIGEgaXMgdGhlIG5vZGUgdG8gYmUgY2hlY2tlZC4KICAvLwogIC8vIC0gY2hlY2tMVmFsUGF0dGVybigpIHNoYWxsIGJlIHVzZWQgaWYgdGhlIHN5bnRhY3RpYyBjb25zdHJ1Y3Qgc3VwcG9ydHMKICAvLyAgIGFueXRoaW5nIGNoZWNrTFZhbFNpbXBsZSgpIHN1cHBvcnRzLCBhcyB3ZWxsIGFzIG9iamVjdCBhbmQgYXJyYXkKICAvLyAgIGRlc3RydWN0dXJpbmcgcGF0dGVybnMuIFRoaXMgaXMgZ2VuZXJhbGx5IGFwcHJvcHJpYXRlIGZvciBjb25zdHJ1Y3RzIGZvcgogIC8vICAgd2hpY2ggdGhlIHNwZWMgc2F5cwogIC8vCiAgLy8gICA+IEl0IGlzIGEgU3ludGF4IEVycm9yIGlmIFt0aGUgcHJvZHVjdGlvbl0gaXMgbmVpdGhlciBhbiBPYmplY3RMaXRlcmFsIG5vcgogIC8vICAgPiBhbiBBcnJheUxpdGVyYWwgYW5kIEFzc2lnbm1lbnRUYXJnZXRUeXBlIG9mIFt0aGUgcHJvZHVjdGlvbl0gaXMgbm90CiAgLy8gICA+IHNpbXBsZS4KICAvLwogIC8vICAgRXhhbXBsZXMgd2hlcmUgdGhpcyBpcyB1c2VkIGluY2x1ZGU6CiAgLy8gICAgIChhID0g4oCmKTsKICAvLyAgICAgY29uc3QgYSA9IOKApjsKICAvLyAgICAgdHJ5IHsg4oCmIH0gY2F0Y2ggKGEpIHsg4oCmIH0KICAvLyAgIHdoZXJlIGEgaXMgdGhlIG5vZGUgdG8gYmUgY2hlY2tlZC4KICAvLwogIC8vIC0gY2hlY2tMVmFsSW5uZXJQYXR0ZXJuKCkgc2hhbGwgYmUgdXNlZCBpZiB0aGUgc3ludGFjdGljIGNvbnN0cnVjdCBzdXBwb3J0cwogIC8vICAgYW55dGhpbmcgY2hlY2tMVmFsUGF0dGVybigpIHN1cHBvcnRzLCBhcyB3ZWxsIGFzIGRlZmF1bHQgYXNzaWdubWVudAogIC8vICAgcGF0dGVybnMsIHJlc3QgZWxlbWVudHMsIGFuZCBvdGhlciBjb25zdHJ1Y3RzIHRoYXQgbWF5IGFwcGVhciB3aXRoaW4gYW4KICAvLyAgIG9iamVjdCBvciBhcnJheSBkZXN0cnVjdHVyaW5nIHBhdHRlcm4uCiAgLy8KICAvLyAgIEFzIGEgc3BlY2lhbCBjYXNlLCBmdW5jdGlvbiBwYXJhbWV0ZXJzIGFsc28gdXNlIGNoZWNrTFZhbElubmVyUGF0dGVybigpLAogIC8vICAgYXMgdGhleSBhbHNvIHN1cHBvcnQgZGVmYXVsdHMgYW5kIHJlc3QgY29uc3RydWN0cy4KICAvLwogIC8vIFRoZXNlIGZ1bmN0aW9ucyBkZWxpYmVyYXRlbHkgc3VwcG9ydCBib3RoIGFzc2lnbm1lbnQgYW5kIGJpbmRpbmcgY29uc3RydWN0cywKICAvLyBhcyB0aGUgbG9naWMgZm9yIGJvdGggaXMgZXhjZWVkaW5nbHkgc2ltaWxhci4gSWYgdGhlIG5vZGUgaXMgdGhlIHRhcmdldCBvZgogIC8vIGFuIGFzc2lnbm1lbnQsIHRoZW4gYmluZGluZ1R5cGUgc2hvdWxkIGJlIHNldCB0byBCSU5EX05PTkUuIE90aGVyd2lzZSwgaXQKICAvLyBzaG91bGQgYmUgc2V0IHRvIHRoZSBhcHByb3ByaWF0ZSBCSU5EXyogY29uc3RhbnQsIGxpa2UgQklORF9WQVIgb3IKICAvLyBCSU5EX0xFWElDQUwuCiAgLy8KICAvLyBJZiB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYSBub24tQklORF9OT05FIGJpbmRpbmdUeXBlLCB0aGVuCiAgLy8gYWRkaXRpb25hbGx5IGEgY2hlY2tDbGFzaGVzIG9iamVjdCBtYXkgYmUgc3BlY2lmaWVkIHRvIGFsbG93IGNoZWNraW5nIGZvcgogIC8vIGR1cGxpY2F0ZSBhcmd1bWVudCBuYW1lcy4gY2hlY2tDbGFzaGVzIGlzIGlnbm9yZWQgaWYgdGhlIHByb3ZpZGVkIGNvbnN0cnVjdAogIC8vIGlzIGFuIGFzc2lnbm1lbnQgKGkuZS4sIGJpbmRpbmdUeXBlIGlzIEJJTkRfTk9ORSkuCgogIHBwJDcuY2hlY2tMVmFsU2ltcGxlID0gZnVuY3Rpb24oZXhwciwgYmluZGluZ1R5cGUsIGNoZWNrQ2xhc2hlcykgewogICAgaWYgKCBiaW5kaW5nVHlwZSA9PT0gdm9pZCAwICkgYmluZGluZ1R5cGUgPSBCSU5EX05PTkU7CgogICAgdmFyIGlzQmluZCA9IGJpbmRpbmdUeXBlICE9PSBCSU5EX05PTkU7CgogICAgc3dpdGNoIChleHByLnR5cGUpIHsKICAgIGNhc2UgIklkZW50aWZpZXIiOgogICAgICBpZiAodGhpcy5zdHJpY3QgJiYgdGhpcy5yZXNlcnZlZFdvcmRzU3RyaWN0QmluZC50ZXN0KGV4cHIubmFtZSkpCiAgICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUoZXhwci5zdGFydCwgKGlzQmluZCA/ICJCaW5kaW5nICIgOiAiQXNzaWduaW5nIHRvICIpICsgZXhwci5uYW1lICsgIiBpbiBzdHJpY3QgbW9kZSIpOyB9CiAgICAgIGlmIChpc0JpbmQpIHsKICAgICAgICBpZiAoYmluZGluZ1R5cGUgPT09IEJJTkRfTEVYSUNBTCAmJiBleHByLm5hbWUgPT09ICJsZXQiKQogICAgICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUoZXhwci5zdGFydCwgImxldCBpcyBkaXNhbGxvd2VkIGFzIGEgbGV4aWNhbGx5IGJvdW5kIG5hbWUiKTsgfQogICAgICAgIGlmIChjaGVja0NsYXNoZXMpIHsKICAgICAgICAgIGlmIChoYXNPd24oY2hlY2tDbGFzaGVzLCBleHByLm5hbWUpKQogICAgICAgICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShleHByLnN0YXJ0LCAiQXJndW1lbnQgbmFtZSBjbGFzaCIpOyB9CiAgICAgICAgICBjaGVja0NsYXNoZXNbZXhwci5uYW1lXSA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmIChiaW5kaW5nVHlwZSAhPT0gQklORF9PVVRTSURFKSB7IHRoaXMuZGVjbGFyZU5hbWUoZXhwci5uYW1lLCBiaW5kaW5nVHlwZSwgZXhwci5zdGFydCk7IH0KICAgICAgfQogICAgICBicmVhawoKICAgIGNhc2UgIkNoYWluRXhwcmVzc2lvbiI6CiAgICAgIHRoaXMucmFpc2VSZWNvdmVyYWJsZShleHByLnN0YXJ0LCAiT3B0aW9uYWwgY2hhaW5pbmcgY2Fubm90IGFwcGVhciBpbiBsZWZ0LWhhbmQgc2lkZSIpOwogICAgICBicmVhawoKICAgIGNhc2UgIk1lbWJlckV4cHJlc3Npb24iOgogICAgICBpZiAoaXNCaW5kKSB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShleHByLnN0YXJ0LCAiQmluZGluZyBtZW1iZXIgZXhwcmVzc2lvbiIpOyB9CiAgICAgIGJyZWFrCgogICAgY2FzZSAiUGFyZW50aGVzaXplZEV4cHJlc3Npb24iOgogICAgICBpZiAoaXNCaW5kKSB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShleHByLnN0YXJ0LCAiQmluZGluZyBwYXJlbnRoZXNpemVkIGV4cHJlc3Npb24iKTsgfQogICAgICByZXR1cm4gdGhpcy5jaGVja0xWYWxTaW1wbGUoZXhwci5leHByZXNzaW9uLCBiaW5kaW5nVHlwZSwgY2hlY2tDbGFzaGVzKQoKICAgIGRlZmF1bHQ6CiAgICAgIHRoaXMucmFpc2UoZXhwci5zdGFydCwgKGlzQmluZCA/ICJCaW5kaW5nIiA6ICJBc3NpZ25pbmcgdG8iKSArICIgcnZhbHVlIik7CiAgICB9CiAgfTsKCiAgcHAkNy5jaGVja0xWYWxQYXR0ZXJuID0gZnVuY3Rpb24oZXhwciwgYmluZGluZ1R5cGUsIGNoZWNrQ2xhc2hlcykgewogICAgaWYgKCBiaW5kaW5nVHlwZSA9PT0gdm9pZCAwICkgYmluZGluZ1R5cGUgPSBCSU5EX05PTkU7CgogICAgc3dpdGNoIChleHByLnR5cGUpIHsKICAgIGNhc2UgIk9iamVjdFBhdHRlcm4iOgogICAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IGV4cHIucHJvcGVydGllczsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICB2YXIgcHJvcCA9IGxpc3RbaV07CgogICAgICB0aGlzLmNoZWNrTFZhbElubmVyUGF0dGVybihwcm9wLCBiaW5kaW5nVHlwZSwgY2hlY2tDbGFzaGVzKTsKICAgICAgfQogICAgICBicmVhawoKICAgIGNhc2UgIkFycmF5UGF0dGVybiI6CiAgICAgIGZvciAodmFyIGkkMSA9IDAsIGxpc3QkMSA9IGV4cHIuZWxlbWVudHM7IGkkMSA8IGxpc3QkMS5sZW5ndGg7IGkkMSArPSAxKSB7CiAgICAgICAgdmFyIGVsZW0gPSBsaXN0JDFbaSQxXTsKCiAgICAgIGlmIChlbGVtKSB7IHRoaXMuY2hlY2tMVmFsSW5uZXJQYXR0ZXJuKGVsZW0sIGJpbmRpbmdUeXBlLCBjaGVja0NsYXNoZXMpOyB9CiAgICAgIH0KICAgICAgYnJlYWsKCiAgICBkZWZhdWx0OgogICAgICB0aGlzLmNoZWNrTFZhbFNpbXBsZShleHByLCBiaW5kaW5nVHlwZSwgY2hlY2tDbGFzaGVzKTsKICAgIH0KICB9OwoKICBwcCQ3LmNoZWNrTFZhbElubmVyUGF0dGVybiA9IGZ1bmN0aW9uKGV4cHIsIGJpbmRpbmdUeXBlLCBjaGVja0NsYXNoZXMpIHsKICAgIGlmICggYmluZGluZ1R5cGUgPT09IHZvaWQgMCApIGJpbmRpbmdUeXBlID0gQklORF9OT05FOwoKICAgIHN3aXRjaCAoZXhwci50eXBlKSB7CiAgICBjYXNlICJQcm9wZXJ0eSI6CiAgICAgIC8vIEFzc2lnbm1lbnRQcm9wZXJ0eSBoYXMgdHlwZSA9PT0gIlByb3BlcnR5IgogICAgICB0aGlzLmNoZWNrTFZhbElubmVyUGF0dGVybihleHByLnZhbHVlLCBiaW5kaW5nVHlwZSwgY2hlY2tDbGFzaGVzKTsKICAgICAgYnJlYWsKCiAgICBjYXNlICJBc3NpZ25tZW50UGF0dGVybiI6CiAgICAgIHRoaXMuY2hlY2tMVmFsUGF0dGVybihleHByLmxlZnQsIGJpbmRpbmdUeXBlLCBjaGVja0NsYXNoZXMpOwogICAgICBicmVhawoKICAgIGNhc2UgIlJlc3RFbGVtZW50IjoKICAgICAgdGhpcy5jaGVja0xWYWxQYXR0ZXJuKGV4cHIuYXJndW1lbnQsIGJpbmRpbmdUeXBlLCBjaGVja0NsYXNoZXMpOwogICAgICBicmVhawoKICAgIGRlZmF1bHQ6CiAgICAgIHRoaXMuY2hlY2tMVmFsUGF0dGVybihleHByLCBiaW5kaW5nVHlwZSwgY2hlY2tDbGFzaGVzKTsKICAgIH0KICB9OwoKICAvLyBUaGUgYWxnb3JpdGhtIHVzZWQgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSByZWdleHAgY2FuIGFwcGVhciBhdCBhCgogIHZhciBUb2tDb250ZXh0ID0gZnVuY3Rpb24gVG9rQ29udGV4dCh0b2tlbiwgaXNFeHByLCBwcmVzZXJ2ZVNwYWNlLCBvdmVycmlkZSwgZ2VuZXJhdG9yKSB7CiAgICB0aGlzLnRva2VuID0gdG9rZW47CiAgICB0aGlzLmlzRXhwciA9ICEhaXNFeHByOwogICAgdGhpcy5wcmVzZXJ2ZVNwYWNlID0gISFwcmVzZXJ2ZVNwYWNlOwogICAgdGhpcy5vdmVycmlkZSA9IG92ZXJyaWRlOwogICAgdGhpcy5nZW5lcmF0b3IgPSAhIWdlbmVyYXRvcjsKICB9OwoKICB2YXIgdHlwZXMgPSB7CiAgICBiX3N0YXQ6IG5ldyBUb2tDb250ZXh0KCJ7IiwgZmFsc2UpLAogICAgYl9leHByOiBuZXcgVG9rQ29udGV4dCgieyIsIHRydWUpLAogICAgYl90bXBsOiBuZXcgVG9rQ29udGV4dCgiJHsiLCBmYWxzZSksCiAgICBwX3N0YXQ6IG5ldyBUb2tDb250ZXh0KCIoIiwgZmFsc2UpLAogICAgcF9leHByOiBuZXcgVG9rQ29udGV4dCgiKCIsIHRydWUpLAogICAgcV90bXBsOiBuZXcgVG9rQ29udGV4dCgiYCIsIHRydWUsIHRydWUsIGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLnRyeVJlYWRUZW1wbGF0ZVRva2VuKCk7IH0pLAogICAgZl9zdGF0OiBuZXcgVG9rQ29udGV4dCgiZnVuY3Rpb24iLCBmYWxzZSksCiAgICBmX2V4cHI6IG5ldyBUb2tDb250ZXh0KCJmdW5jdGlvbiIsIHRydWUpLAogICAgZl9leHByX2dlbjogbmV3IFRva0NvbnRleHQoImZ1bmN0aW9uIiwgdHJ1ZSwgZmFsc2UsIG51bGwsIHRydWUpLAogICAgZl9nZW46IG5ldyBUb2tDb250ZXh0KCJmdW5jdGlvbiIsIGZhbHNlLCBmYWxzZSwgbnVsbCwgdHJ1ZSkKICB9OwoKICB2YXIgcHAkNiA9IFBhcnNlci5wcm90b3R5cGU7CgogIHBwJDYuaW5pdGlhbENvbnRleHQgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiBbdHlwZXMuYl9zdGF0XQogIH07CgogIHBwJDYuY3VyQ29udGV4dCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuY29udGV4dFt0aGlzLmNvbnRleHQubGVuZ3RoIC0gMV0KICB9OwoKICBwcCQ2LmJyYWNlSXNCbG9jayA9IGZ1bmN0aW9uKHByZXZUeXBlKSB7CiAgICB2YXIgcGFyZW50ID0gdGhpcy5jdXJDb250ZXh0KCk7CiAgICBpZiAocGFyZW50ID09PSB0eXBlcy5mX2V4cHIgfHwgcGFyZW50ID09PSB0eXBlcy5mX3N0YXQpCiAgICAgIHsgcmV0dXJuIHRydWUgfQogICAgaWYgKHByZXZUeXBlID09PSB0eXBlcyQxLmNvbG9uICYmIChwYXJlbnQgPT09IHR5cGVzLmJfc3RhdCB8fCBwYXJlbnQgPT09IHR5cGVzLmJfZXhwcikpCiAgICAgIHsgcmV0dXJuICFwYXJlbnQuaXNFeHByIH0KCiAgICAvLyBUaGUgY2hlY2sgZm9yIGB0dC5uYW1lICYmIGV4cHJBbGxvd2VkYCBkZXRlY3RzIHdoZXRoZXIgd2UgYXJlCiAgICAvLyBhZnRlciBhIGB5aWVsZGAgb3IgYG9mYCBjb25zdHJ1Y3QuIFNlZSB0aGUgYHVwZGF0ZUNvbnRleHRgIGZvcgogICAgLy8gYHR0Lm5hbWVgLgogICAgaWYgKHByZXZUeXBlID09PSB0eXBlcyQxLl9yZXR1cm4gfHwgcHJldlR5cGUgPT09IHR5cGVzJDEubmFtZSAmJiB0aGlzLmV4cHJBbGxvd2VkKQogICAgICB7IHJldHVybiBsaW5lQnJlYWsudGVzdCh0aGlzLmlucHV0LnNsaWNlKHRoaXMubGFzdFRva0VuZCwgdGhpcy5zdGFydCkpIH0KICAgIGlmIChwcmV2VHlwZSA9PT0gdHlwZXMkMS5fZWxzZSB8fCBwcmV2VHlwZSA9PT0gdHlwZXMkMS5zZW1pIHx8IHByZXZUeXBlID09PSB0eXBlcyQxLmVvZiB8fCBwcmV2VHlwZSA9PT0gdHlwZXMkMS5wYXJlblIgfHwgcHJldlR5cGUgPT09IHR5cGVzJDEuYXJyb3cpCiAgICAgIHsgcmV0dXJuIHRydWUgfQogICAgaWYgKHByZXZUeXBlID09PSB0eXBlcyQxLmJyYWNlTCkKICAgICAgeyByZXR1cm4gcGFyZW50ID09PSB0eXBlcy5iX3N0YXQgfQogICAgaWYgKHByZXZUeXBlID09PSB0eXBlcyQxLl92YXIgfHwgcHJldlR5cGUgPT09IHR5cGVzJDEuX2NvbnN0IHx8IHByZXZUeXBlID09PSB0eXBlcyQxLm5hbWUpCiAgICAgIHsgcmV0dXJuIGZhbHNlIH0KICAgIHJldHVybiAhdGhpcy5leHByQWxsb3dlZAogIH07CgogIHBwJDYuaW5HZW5lcmF0b3JDb250ZXh0ID0gZnVuY3Rpb24oKSB7CiAgICBmb3IgKHZhciBpID0gdGhpcy5jb250ZXh0Lmxlbmd0aCAtIDE7IGkgPj0gMTsgaS0tKSB7CiAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0W2ldOwogICAgICBpZiAoY29udGV4dC50b2tlbiA9PT0gImZ1bmN0aW9uIikKICAgICAgICB7IHJldHVybiBjb250ZXh0LmdlbmVyYXRvciB9CiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICBwcCQ2LnVwZGF0ZUNvbnRleHQgPSBmdW5jdGlvbihwcmV2VHlwZSkgewogICAgdmFyIHVwZGF0ZSwgdHlwZSA9IHRoaXMudHlwZTsKICAgIGlmICh0eXBlLmtleXdvcmQgJiYgcHJldlR5cGUgPT09IHR5cGVzJDEuZG90KQogICAgICB7IHRoaXMuZXhwckFsbG93ZWQgPSBmYWxzZTsgfQogICAgZWxzZSBpZiAodXBkYXRlID0gdHlwZS51cGRhdGVDb250ZXh0KQogICAgICB7IHVwZGF0ZS5jYWxsKHRoaXMsIHByZXZUeXBlKTsgfQogICAgZWxzZQogICAgICB7IHRoaXMuZXhwckFsbG93ZWQgPSB0eXBlLmJlZm9yZUV4cHI7IH0KICB9OwoKICAvLyBVc2VkIHRvIGhhbmRsZSBlZ2RlIGNhc2Ugd2hlbiB0b2tlbiBjb250ZXh0IGNvdWxkIG5vdCBiZSBpbmZlcnJlZCBjb3JyZWN0bHkgaW4gdG9rZW5pemUgcGhhc2UKICBwcCQ2Lm92ZXJyaWRlQ29udGV4dCA9IGZ1bmN0aW9uKHRva2VuQ3R4KSB7CiAgICBpZiAodGhpcy5jdXJDb250ZXh0KCkgIT09IHRva2VuQ3R4KSB7CiAgICAgIHRoaXMuY29udGV4dFt0aGlzLmNvbnRleHQubGVuZ3RoIC0gMV0gPSB0b2tlbkN0eDsKICAgIH0KICB9OwoKICAvLyBUb2tlbi1zcGVjaWZpYyBjb250ZXh0IHVwZGF0ZSBjb2RlCgogIHR5cGVzJDEucGFyZW5SLnVwZGF0ZUNvbnRleHQgPSB0eXBlcyQxLmJyYWNlUi51cGRhdGVDb250ZXh0ID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5jb250ZXh0Lmxlbmd0aCA9PT0gMSkgewogICAgICB0aGlzLmV4cHJBbGxvd2VkID0gdHJ1ZTsKICAgICAgcmV0dXJuCiAgICB9CiAgICB2YXIgb3V0ID0gdGhpcy5jb250ZXh0LnBvcCgpOwogICAgaWYgKG91dCA9PT0gdHlwZXMuYl9zdGF0ICYmIHRoaXMuY3VyQ29udGV4dCgpLnRva2VuID09PSAiZnVuY3Rpb24iKSB7CiAgICAgIG91dCA9IHRoaXMuY29udGV4dC5wb3AoKTsKICAgIH0KICAgIHRoaXMuZXhwckFsbG93ZWQgPSAhb3V0LmlzRXhwcjsKICB9OwoKICB0eXBlcyQxLmJyYWNlTC51cGRhdGVDb250ZXh0ID0gZnVuY3Rpb24ocHJldlR5cGUpIHsKICAgIHRoaXMuY29udGV4dC5wdXNoKHRoaXMuYnJhY2VJc0Jsb2NrKHByZXZUeXBlKSA/IHR5cGVzLmJfc3RhdCA6IHR5cGVzLmJfZXhwcik7CiAgICB0aGlzLmV4cHJBbGxvd2VkID0gdHJ1ZTsKICB9OwoKICB0eXBlcyQxLmRvbGxhckJyYWNlTC51cGRhdGVDb250ZXh0ID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLmNvbnRleHQucHVzaCh0eXBlcy5iX3RtcGwpOwogICAgdGhpcy5leHByQWxsb3dlZCA9IHRydWU7CiAgfTsKCiAgdHlwZXMkMS5wYXJlbkwudXBkYXRlQ29udGV4dCA9IGZ1bmN0aW9uKHByZXZUeXBlKSB7CiAgICB2YXIgc3RhdGVtZW50UGFyZW5zID0gcHJldlR5cGUgPT09IHR5cGVzJDEuX2lmIHx8IHByZXZUeXBlID09PSB0eXBlcyQxLl9mb3IgfHwgcHJldlR5cGUgPT09IHR5cGVzJDEuX3dpdGggfHwgcHJldlR5cGUgPT09IHR5cGVzJDEuX3doaWxlOwogICAgdGhpcy5jb250ZXh0LnB1c2goc3RhdGVtZW50UGFyZW5zID8gdHlwZXMucF9zdGF0IDogdHlwZXMucF9leHByKTsKICAgIHRoaXMuZXhwckFsbG93ZWQgPSB0cnVlOwogIH07CgogIHR5cGVzJDEuaW5jRGVjLnVwZGF0ZUNvbnRleHQgPSBmdW5jdGlvbigpIHsKICAgIC8vIHRva0V4cHJBbGxvd2VkIHN0YXlzIHVuY2hhbmdlZAogIH07CgogIHR5cGVzJDEuX2Z1bmN0aW9uLnVwZGF0ZUNvbnRleHQgPSB0eXBlcyQxLl9jbGFzcy51cGRhdGVDb250ZXh0ID0gZnVuY3Rpb24ocHJldlR5cGUpIHsKICAgIGlmIChwcmV2VHlwZS5iZWZvcmVFeHByICYmIHByZXZUeXBlICE9PSB0eXBlcyQxLl9lbHNlICYmCiAgICAgICAgIShwcmV2VHlwZSA9PT0gdHlwZXMkMS5zZW1pICYmIHRoaXMuY3VyQ29udGV4dCgpICE9PSB0eXBlcy5wX3N0YXQpICYmCiAgICAgICAgIShwcmV2VHlwZSA9PT0gdHlwZXMkMS5fcmV0dXJuICYmIGxpbmVCcmVhay50ZXN0KHRoaXMuaW5wdXQuc2xpY2UodGhpcy5sYXN0VG9rRW5kLCB0aGlzLnN0YXJ0KSkpICYmCiAgICAgICAgISgocHJldlR5cGUgPT09IHR5cGVzJDEuY29sb24gfHwgcHJldlR5cGUgPT09IHR5cGVzJDEuYnJhY2VMKSAmJiB0aGlzLmN1ckNvbnRleHQoKSA9PT0gdHlwZXMuYl9zdGF0KSkKICAgICAgeyB0aGlzLmNvbnRleHQucHVzaCh0eXBlcy5mX2V4cHIpOyB9CiAgICBlbHNlCiAgICAgIHsgdGhpcy5jb250ZXh0LnB1c2godHlwZXMuZl9zdGF0KTsgfQogICAgdGhpcy5leHByQWxsb3dlZCA9IGZhbHNlOwogIH07CgogIHR5cGVzJDEuYmFja1F1b3RlLnVwZGF0ZUNvbnRleHQgPSBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmN1ckNvbnRleHQoKSA9PT0gdHlwZXMucV90bXBsKQogICAgICB7IHRoaXMuY29udGV4dC5wb3AoKTsgfQogICAgZWxzZQogICAgICB7IHRoaXMuY29udGV4dC5wdXNoKHR5cGVzLnFfdG1wbCk7IH0KICAgIHRoaXMuZXhwckFsbG93ZWQgPSBmYWxzZTsKICB9OwoKICB0eXBlcyQxLnN0YXIudXBkYXRlQ29udGV4dCA9IGZ1bmN0aW9uKHByZXZUeXBlKSB7CiAgICBpZiAocHJldlR5cGUgPT09IHR5cGVzJDEuX2Z1bmN0aW9uKSB7CiAgICAgIHZhciBpbmRleCA9IHRoaXMuY29udGV4dC5sZW5ndGggLSAxOwogICAgICBpZiAodGhpcy5jb250ZXh0W2luZGV4XSA9PT0gdHlwZXMuZl9leHByKQogICAgICAgIHsgdGhpcy5jb250ZXh0W2luZGV4XSA9IHR5cGVzLmZfZXhwcl9nZW47IH0KICAgICAgZWxzZQogICAgICAgIHsgdGhpcy5jb250ZXh0W2luZGV4XSA9IHR5cGVzLmZfZ2VuOyB9CiAgICB9CiAgICB0aGlzLmV4cHJBbGxvd2VkID0gdHJ1ZTsKICB9OwoKICB0eXBlcyQxLm5hbWUudXBkYXRlQ29udGV4dCA9IGZ1bmN0aW9uKHByZXZUeXBlKSB7CiAgICB2YXIgYWxsb3dlZCA9IGZhbHNlOwogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2ICYmIHByZXZUeXBlICE9PSB0eXBlcyQxLmRvdCkgewogICAgICBpZiAodGhpcy52YWx1ZSA9PT0gIm9mIiAmJiAhdGhpcy5leHByQWxsb3dlZCB8fAogICAgICAgICAgdGhpcy52YWx1ZSA9PT0gInlpZWxkIiAmJiB0aGlzLmluR2VuZXJhdG9yQ29udGV4dCgpKQogICAgICAgIHsgYWxsb3dlZCA9IHRydWU7IH0KICAgIH0KICAgIHRoaXMuZXhwckFsbG93ZWQgPSBhbGxvd2VkOwogIH07CgogIC8vIEEgcmVjdXJzaXZlIGRlc2NlbnQgcGFyc2VyIG9wZXJhdGVzIGJ5IGRlZmluaW5nIGZ1bmN0aW9ucyBmb3IgYWxsCgogIHZhciBwcCQ1ID0gUGFyc2VyLnByb3RvdHlwZTsKCiAgLy8gQ2hlY2sgaWYgcHJvcGVydHkgbmFtZSBjbGFzaGVzIHdpdGggYWxyZWFkeSBhZGRlZC4KICAvLyBPYmplY3QvY2xhc3MgZ2V0dGVycyBhbmQgc2V0dGVycyBhcmUgbm90IGFsbG93ZWQgdG8gY2xhc2gg4oCUCiAgLy8gZWl0aGVyIHdpdGggZWFjaCBvdGhlciBvciB3aXRoIGFuIGluaXQgcHJvcGVydHkg4oCUIGFuZCBpbgogIC8vIHN0cmljdCBtb2RlLCBpbml0IHByb3BlcnRpZXMgYXJlIGFsc28gbm90IGFsbG93ZWQgdG8gYmUgcmVwZWF0ZWQuCgogIHBwJDUuY2hlY2tQcm9wQ2xhc2ggPSBmdW5jdGlvbihwcm9wLCBwcm9wSGFzaCwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykgewogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5ICYmIHByb3AudHlwZSA9PT0gIlNwcmVhZEVsZW1lbnQiKQogICAgICB7IHJldHVybiB9CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYgJiYgKHByb3AuY29tcHV0ZWQgfHwgcHJvcC5tZXRob2QgfHwgcHJvcC5zaG9ydGhhbmQpKQogICAgICB7IHJldHVybiB9CiAgICB2YXIga2V5ID0gcHJvcC5rZXk7CiAgICB2YXIgbmFtZTsKICAgIHN3aXRjaCAoa2V5LnR5cGUpIHsKICAgIGNhc2UgIklkZW50aWZpZXIiOiBuYW1lID0ga2V5Lm5hbWU7IGJyZWFrCiAgICBjYXNlICJMaXRlcmFsIjogbmFtZSA9IFN0cmluZyhrZXkudmFsdWUpOyBicmVhawogICAgZGVmYXVsdDogcmV0dXJuCiAgICB9CiAgICB2YXIga2luZCA9IHByb3Aua2luZDsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikgewogICAgICBpZiAobmFtZSA9PT0gIl9fcHJvdG9fXyIgJiYga2luZCA9PT0gImluaXQiKSB7CiAgICAgICAgaWYgKHByb3BIYXNoLnByb3RvKSB7CiAgICAgICAgICBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykgewogICAgICAgICAgICBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5kb3VibGVQcm90byA8IDApIHsKICAgICAgICAgICAgICByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLmRvdWJsZVByb3RvID0ga2V5LnN0YXJ0OwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnJhaXNlUmVjb3ZlcmFibGUoa2V5LnN0YXJ0LCAiUmVkZWZpbml0aW9uIG9mIF9fcHJvdG9fXyBwcm9wZXJ0eSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcm9wSGFzaC5wcm90byA9IHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuCiAgICB9CiAgICBuYW1lID0gIiQiICsgbmFtZTsKICAgIHZhciBvdGhlciA9IHByb3BIYXNoW25hbWVdOwogICAgaWYgKG90aGVyKSB7CiAgICAgIHZhciByZWRlZmluaXRpb247CiAgICAgIGlmIChraW5kID09PSAiaW5pdCIpIHsKICAgICAgICByZWRlZmluaXRpb24gPSB0aGlzLnN0cmljdCAmJiBvdGhlci5pbml0IHx8IG90aGVyLmdldCB8fCBvdGhlci5zZXQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVkZWZpbml0aW9uID0gb3RoZXIuaW5pdCB8fCBvdGhlcltraW5kXTsKICAgICAgfQogICAgICBpZiAocmVkZWZpbml0aW9uKQogICAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKGtleS5zdGFydCwgIlJlZGVmaW5pdGlvbiBvZiBwcm9wZXJ0eSIpOyB9CiAgICB9IGVsc2UgewogICAgICBvdGhlciA9IHByb3BIYXNoW25hbWVdID0gewogICAgICAgIGluaXQ6IGZhbHNlLAogICAgICAgIGdldDogZmFsc2UsCiAgICAgICAgc2V0OiBmYWxzZQogICAgICB9OwogICAgfQogICAgb3RoZXJba2luZF0gPSB0cnVlOwogIH07CgogIC8vICMjIyBFeHByZXNzaW9uIHBhcnNpbmcKCiAgLy8gVGhlc2UgbmVzdCwgZnJvbSB0aGUgbW9zdCBnZW5lcmFsIGV4cHJlc3Npb24gdHlwZSBhdCB0aGUgdG9wIHRvCiAgLy8gJ2F0b21pYycsIG5vbmRpdmlzaWJsZSBleHByZXNzaW9uIHR5cGVzIGF0IHRoZSBib3R0b20uIE1vc3Qgb2YKICAvLyB0aGUgZnVuY3Rpb25zIHdpbGwgc2ltcGx5IGxldCB0aGUgZnVuY3Rpb24ocykgYmVsb3cgdGhlbSBwYXJzZSwKICAvLyBhbmQsICppZiogdGhlIHN5bnRhY3RpYyBjb25zdHJ1Y3QgdGhleSBoYW5kbGUgaXMgcHJlc2VudCwgd3JhcAogIC8vIHRoZSBBU1Qgbm9kZSB0aGF0IHRoZSBpbm5lciBwYXJzZXIgZ2F2ZSB0aGVtIGluIGFub3RoZXIgbm9kZS4KCiAgLy8gUGFyc2UgYSBmdWxsIGV4cHJlc3Npb24uIFRoZSBvcHRpb25hbCBhcmd1bWVudHMgYXJlIHVzZWQgdG8KICAvLyBmb3JiaWQgdGhlIGBpbmAgb3BlcmF0b3IgKGluIGZvciBsb29wcyBpbml0YWxpemF0aW9uIGV4cHJlc3Npb25zKQogIC8vIGFuZCBwcm92aWRlIHJlZmVyZW5jZSBmb3Igc3RvcmluZyAnPScgb3BlcmF0b3IgaW5zaWRlIHNob3J0aGFuZAogIC8vIHByb3BlcnR5IGFzc2lnbm1lbnQgaW4gY29udGV4dHMgd2hlcmUgYm90aCBvYmplY3QgZXhwcmVzc2lvbgogIC8vIGFuZCBvYmplY3QgcGF0dGVybiBtaWdodCBhcHBlYXIgKHNvIGl0J3MgcG9zc2libGUgdG8gcmFpc2UKICAvLyBkZWxheWVkIHN5bnRheCBlcnJvciBhdCBjb3JyZWN0IHBvc2l0aW9uKS4KCiAgcHAkNS5wYXJzZUV4cHJlc3Npb24gPSBmdW5jdGlvbihmb3JJbml0LCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKSB7CiAgICB2YXIgc3RhcnRQb3MgPSB0aGlzLnN0YXJ0LCBzdGFydExvYyA9IHRoaXMuc3RhcnRMb2M7CiAgICB2YXIgZXhwciA9IHRoaXMucGFyc2VNYXliZUFzc2lnbihmb3JJbml0LCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTsKICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuY29tbWEpIHsKICAgICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0UG9zLCBzdGFydExvYyk7CiAgICAgIG5vZGUuZXhwcmVzc2lvbnMgPSBbZXhwcl07CiAgICAgIHdoaWxlICh0aGlzLmVhdCh0eXBlcyQxLmNvbW1hKSkgeyBub2RlLmV4cHJlc3Npb25zLnB1c2godGhpcy5wYXJzZU1heWJlQXNzaWduKGZvckluaXQsIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpKTsgfQogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJTZXF1ZW5jZUV4cHJlc3Npb24iKQogICAgfQogICAgcmV0dXJuIGV4cHIKICB9OwoKICAvLyBQYXJzZSBhbiBhc3NpZ25tZW50IGV4cHJlc3Npb24uIFRoaXMgaW5jbHVkZXMgYXBwbGljYXRpb25zIG9mCiAgLy8gb3BlcmF0b3JzIGxpa2UgYCs9YC4KCiAgcHAkNS5wYXJzZU1heWJlQXNzaWduID0gZnVuY3Rpb24oZm9ySW5pdCwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycywgYWZ0ZXJMZWZ0UGFyc2UpIHsKICAgIGlmICh0aGlzLmlzQ29udGV4dHVhbCgieWllbGQiKSkgewogICAgICBpZiAodGhpcy5pbkdlbmVyYXRvcikgeyByZXR1cm4gdGhpcy5wYXJzZVlpZWxkKGZvckluaXQpIH0KICAgICAgLy8gVGhlIHRva2VuaXplciB3aWxsIGFzc3VtZSBhbiBleHByZXNzaW9uIGlzIGFsbG93ZWQgYWZ0ZXIKICAgICAgLy8gYHlpZWxkYCwgYnV0IHRoaXMgaXNuJ3QgdGhhdCBraW5kIG9mIHlpZWxkCiAgICAgIGVsc2UgeyB0aGlzLmV4cHJBbGxvd2VkID0gZmFsc2U7IH0KICAgIH0KCiAgICB2YXIgb3duRGVzdHJ1Y3R1cmluZ0Vycm9ycyA9IGZhbHNlLCBvbGRQYXJlbkFzc2lnbiA9IC0xLCBvbGRUcmFpbGluZ0NvbW1hID0gLTEsIG9sZERvdWJsZVByb3RvID0gLTE7CiAgICBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykgewogICAgICBvbGRQYXJlbkFzc2lnbiA9IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMucGFyZW50aGVzaXplZEFzc2lnbjsKICAgICAgb2xkVHJhaWxpbmdDb21tYSA9IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMudHJhaWxpbmdDb21tYTsKICAgICAgb2xkRG91YmxlUHJvdG8gPSByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLmRvdWJsZVByb3RvOwogICAgICByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnBhcmVudGhlc2l6ZWRBc3NpZ24gPSByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnRyYWlsaW5nQ29tbWEgPSAtMTsKICAgIH0gZWxzZSB7CiAgICAgIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMgPSBuZXcgRGVzdHJ1Y3R1cmluZ0Vycm9yczsKICAgICAgb3duRGVzdHJ1Y3R1cmluZ0Vycm9ycyA9IHRydWU7CiAgICB9CgogICAgdmFyIHN0YXJ0UG9zID0gdGhpcy5zdGFydCwgc3RhcnRMb2MgPSB0aGlzLnN0YXJ0TG9jOwogICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5wYXJlbkwgfHwgdGhpcy50eXBlID09PSB0eXBlcyQxLm5hbWUpIHsKICAgICAgdGhpcy5wb3RlbnRpYWxBcnJvd0F0ID0gdGhpcy5zdGFydDsKICAgICAgdGhpcy5wb3RlbnRpYWxBcnJvd0luRm9yQXdhaXQgPSBmb3JJbml0ID09PSAiYXdhaXQiOwogICAgfQogICAgdmFyIGxlZnQgPSB0aGlzLnBhcnNlTWF5YmVDb25kaXRpb25hbChmb3JJbml0LCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTsKICAgIGlmIChhZnRlckxlZnRQYXJzZSkgeyBsZWZ0ID0gYWZ0ZXJMZWZ0UGFyc2UuY2FsbCh0aGlzLCBsZWZ0LCBzdGFydFBvcywgc3RhcnRMb2MpOyB9CiAgICBpZiAodGhpcy50eXBlLmlzQXNzaWduKSB7CiAgICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGVBdChzdGFydFBvcywgc3RhcnRMb2MpOwogICAgICBub2RlLm9wZXJhdG9yID0gdGhpcy52YWx1ZTsKICAgICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5lcSkKICAgICAgICB7IGxlZnQgPSB0aGlzLnRvQXNzaWduYWJsZShsZWZ0LCBmYWxzZSwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyk7IH0KICAgICAgaWYgKCFvd25EZXN0cnVjdHVyaW5nRXJyb3JzKSB7CiAgICAgICAgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5wYXJlbnRoZXNpemVkQXNzaWduID0gcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy50cmFpbGluZ0NvbW1hID0gcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5kb3VibGVQcm90byA9IC0xOwogICAgICB9CiAgICAgIGlmIChyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnNob3J0aGFuZEFzc2lnbiA+PSBsZWZ0LnN0YXJ0KQogICAgICAgIHsgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5zaG9ydGhhbmRBc3NpZ24gPSAtMTsgfSAvLyByZXNldCBiZWNhdXNlIHNob3J0aGFuZCBkZWZhdWx0IHdhcyB1c2VkIGNvcnJlY3RseQogICAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLmVxKQogICAgICAgIHsgdGhpcy5jaGVja0xWYWxQYXR0ZXJuKGxlZnQpOyB9CiAgICAgIGVsc2UKICAgICAgICB7IHRoaXMuY2hlY2tMVmFsU2ltcGxlKGxlZnQpOyB9CiAgICAgIG5vZGUubGVmdCA9IGxlZnQ7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICBub2RlLnJpZ2h0ID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKGZvckluaXQpOwogICAgICBpZiAob2xkRG91YmxlUHJvdG8gPiAtMSkgeyByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLmRvdWJsZVByb3RvID0gb2xkRG91YmxlUHJvdG87IH0KICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiQXNzaWdubWVudEV4cHJlc3Npb24iKQogICAgfSBlbHNlIHsKICAgICAgaWYgKG93bkRlc3RydWN0dXJpbmdFcnJvcnMpIHsgdGhpcy5jaGVja0V4cHJlc3Npb25FcnJvcnMocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycywgdHJ1ZSk7IH0KICAgIH0KICAgIGlmIChvbGRQYXJlbkFzc2lnbiA+IC0xKSB7IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMucGFyZW50aGVzaXplZEFzc2lnbiA9IG9sZFBhcmVuQXNzaWduOyB9CiAgICBpZiAob2xkVHJhaWxpbmdDb21tYSA+IC0xKSB7IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMudHJhaWxpbmdDb21tYSA9IG9sZFRyYWlsaW5nQ29tbWE7IH0KICAgIHJldHVybiBsZWZ0CiAgfTsKCiAgLy8gUGFyc2UgYSB0ZXJuYXJ5IGNvbmRpdGlvbmFsIChgPzpgKSBvcGVyYXRvci4KCiAgcHAkNS5wYXJzZU1heWJlQ29uZGl0aW9uYWwgPSBmdW5jdGlvbihmb3JJbml0LCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKSB7CiAgICB2YXIgc3RhcnRQb3MgPSB0aGlzLnN0YXJ0LCBzdGFydExvYyA9IHRoaXMuc3RhcnRMb2M7CiAgICB2YXIgZXhwciA9IHRoaXMucGFyc2VFeHByT3BzKGZvckluaXQsIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpOwogICAgaWYgKHRoaXMuY2hlY2tFeHByZXNzaW9uRXJyb3JzKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpKSB7IHJldHVybiBleHByIH0KICAgIGlmICh0aGlzLmVhdCh0eXBlcyQxLnF1ZXN0aW9uKSkgewogICAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnRQb3MsIHN0YXJ0TG9jKTsKICAgICAgbm9kZS50ZXN0ID0gZXhwcjsKICAgICAgbm9kZS5jb25zZXF1ZW50ID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKCk7CiAgICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEuY29sb24pOwogICAgICBub2RlLmFsdGVybmF0ZSA9IHRoaXMucGFyc2VNYXliZUFzc2lnbihmb3JJbml0KTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiQ29uZGl0aW9uYWxFeHByZXNzaW9uIikKICAgIH0KICAgIHJldHVybiBleHByCiAgfTsKCiAgLy8gU3RhcnQgdGhlIHByZWNlZGVuY2UgcGFyc2VyLgoKICBwcCQ1LnBhcnNlRXhwck9wcyA9IGZ1bmN0aW9uKGZvckluaXQsIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsKICAgIHZhciBzdGFydFBvcyA9IHRoaXMuc3RhcnQsIHN0YXJ0TG9jID0gdGhpcy5zdGFydExvYzsKICAgIHZhciBleHByID0gdGhpcy5wYXJzZU1heWJlVW5hcnkocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycywgZmFsc2UsIGZhbHNlLCBmb3JJbml0KTsKICAgIGlmICh0aGlzLmNoZWNrRXhwcmVzc2lvbkVycm9ycyhyZWZEZXN0cnVjdHVyaW5nRXJyb3JzKSkgeyByZXR1cm4gZXhwciB9CiAgICByZXR1cm4gZXhwci5zdGFydCA9PT0gc3RhcnRQb3MgJiYgZXhwci50eXBlID09PSAiQXJyb3dGdW5jdGlvbkV4cHJlc3Npb24iID8gZXhwciA6IHRoaXMucGFyc2VFeHByT3AoZXhwciwgc3RhcnRQb3MsIHN0YXJ0TG9jLCAtMSwgZm9ySW5pdCkKICB9OwoKICAvLyBQYXJzZSBiaW5hcnkgb3BlcmF0b3JzIHdpdGggdGhlIG9wZXJhdG9yIHByZWNlZGVuY2UgcGFyc2luZwogIC8vIGFsZ29yaXRobS4gYGxlZnRgIGlzIHRoZSBsZWZ0LWhhbmQgc2lkZSBvZiB0aGUgb3BlcmF0b3IuCiAgLy8gYG1pblByZWNgIHByb3ZpZGVzIGNvbnRleHQgdGhhdCBhbGxvd3MgdGhlIGZ1bmN0aW9uIHRvIHN0b3AgYW5kCiAgLy8gZGVmZXIgZnVydGhlciBwYXJzZXIgdG8gb25lIG9mIGl0cyBjYWxsZXJzIHdoZW4gaXQgZW5jb3VudGVycyBhbgogIC8vIG9wZXJhdG9yIHRoYXQgaGFzIGEgbG93ZXIgcHJlY2VkZW5jZSB0aGFuIHRoZSBzZXQgaXQgaXMgcGFyc2luZy4KCiAgcHAkNS5wYXJzZUV4cHJPcCA9IGZ1bmN0aW9uKGxlZnQsIGxlZnRTdGFydFBvcywgbGVmdFN0YXJ0TG9jLCBtaW5QcmVjLCBmb3JJbml0KSB7CiAgICB2YXIgcHJlYyA9IHRoaXMudHlwZS5iaW5vcDsKICAgIGlmIChwcmVjICE9IG51bGwgJiYgKCFmb3JJbml0IHx8IHRoaXMudHlwZSAhPT0gdHlwZXMkMS5faW4pKSB7CiAgICAgIGlmIChwcmVjID4gbWluUHJlYykgewogICAgICAgIHZhciBsb2dpY2FsID0gdGhpcy50eXBlID09PSB0eXBlcyQxLmxvZ2ljYWxPUiB8fCB0aGlzLnR5cGUgPT09IHR5cGVzJDEubG9naWNhbEFORDsKICAgICAgICB2YXIgY29hbGVzY2UgPSB0aGlzLnR5cGUgPT09IHR5cGVzJDEuY29hbGVzY2U7CiAgICAgICAgaWYgKGNvYWxlc2NlKSB7CiAgICAgICAgICAvLyBIYW5kbGUgdGhlIHByZWNlZGVuY2Ugb2YgYHR0LmNvYWxlc2NlYCBhcyBlcXVhbCB0byB0aGUgcmFuZ2Ugb2YgbG9naWNhbCBleHByZXNzaW9ucy4KICAgICAgICAgIC8vIEluIG90aGVyIHdvcmRzLCBgbm9kZS5yaWdodGAgc2hvdWxkbid0IGNvbnRhaW4gbG9naWNhbCBleHByZXNzaW9ucyBpbiBvcmRlciB0byBjaGVjayB0aGUgbWl4ZWQgZXJyb3IuCiAgICAgICAgICBwcmVjID0gdHlwZXMkMS5sb2dpY2FsQU5ELmJpbm9wOwogICAgICAgIH0KICAgICAgICB2YXIgb3AgPSB0aGlzLnZhbHVlOwogICAgICAgIHRoaXMubmV4dCgpOwogICAgICAgIHZhciBzdGFydFBvcyA9IHRoaXMuc3RhcnQsIHN0YXJ0TG9jID0gdGhpcy5zdGFydExvYzsKICAgICAgICB2YXIgcmlnaHQgPSB0aGlzLnBhcnNlRXhwck9wKHRoaXMucGFyc2VNYXliZVVuYXJ5KG51bGwsIGZhbHNlLCBmYWxzZSwgZm9ySW5pdCksIHN0YXJ0UG9zLCBzdGFydExvYywgcHJlYywgZm9ySW5pdCk7CiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmJ1aWxkQmluYXJ5KGxlZnRTdGFydFBvcywgbGVmdFN0YXJ0TG9jLCBsZWZ0LCByaWdodCwgb3AsIGxvZ2ljYWwgfHwgY29hbGVzY2UpOwogICAgICAgIGlmICgobG9naWNhbCAmJiB0aGlzLnR5cGUgPT09IHR5cGVzJDEuY29hbGVzY2UpIHx8IChjb2FsZXNjZSAmJiAodGhpcy50eXBlID09PSB0eXBlcyQxLmxvZ2ljYWxPUiB8fCB0aGlzLnR5cGUgPT09IHR5cGVzJDEubG9naWNhbEFORCkpKSB7CiAgICAgICAgICB0aGlzLnJhaXNlUmVjb3ZlcmFibGUodGhpcy5zdGFydCwgIkxvZ2ljYWwgZXhwcmVzc2lvbnMgYW5kIGNvYWxlc2NlIGV4cHJlc3Npb25zIGNhbm5vdCBiZSBtaXhlZC4gV3JhcCBlaXRoZXIgYnkgcGFyZW50aGVzZXMiKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VFeHByT3Aobm9kZSwgbGVmdFN0YXJ0UG9zLCBsZWZ0U3RhcnRMb2MsIG1pblByZWMsIGZvckluaXQpCiAgICAgIH0KICAgIH0KICAgIHJldHVybiBsZWZ0CiAgfTsKCiAgcHAkNS5idWlsZEJpbmFyeSA9IGZ1bmN0aW9uKHN0YXJ0UG9zLCBzdGFydExvYywgbGVmdCwgcmlnaHQsIG9wLCBsb2dpY2FsKSB7CiAgICBpZiAocmlnaHQudHlwZSA9PT0gIlByaXZhdGVJZGVudGlmaWVyIikgeyB0aGlzLnJhaXNlKHJpZ2h0LnN0YXJ0LCAiUHJpdmF0ZSBpZGVudGlmaWVyIGNhbiBvbmx5IGJlIGxlZnQgc2lkZSBvZiBiaW5hcnkgZXhwcmVzc2lvbiIpOyB9CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnRQb3MsIHN0YXJ0TG9jKTsKICAgIG5vZGUubGVmdCA9IGxlZnQ7CiAgICBub2RlLm9wZXJhdG9yID0gb3A7CiAgICBub2RlLnJpZ2h0ID0gcmlnaHQ7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsIGxvZ2ljYWwgPyAiTG9naWNhbEV4cHJlc3Npb24iIDogIkJpbmFyeUV4cHJlc3Npb24iKQogIH07CgogIC8vIFBhcnNlIHVuYXJ5IG9wZXJhdG9ycywgYm90aCBwcmVmaXggYW5kIHBvc3RmaXguCgogIHBwJDUucGFyc2VNYXliZVVuYXJ5ID0gZnVuY3Rpb24ocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycywgc2F3VW5hcnksIGluY0RlYywgZm9ySW5pdCkgewogICAgdmFyIHN0YXJ0UG9zID0gdGhpcy5zdGFydCwgc3RhcnRMb2MgPSB0aGlzLnN0YXJ0TG9jLCBleHByOwogICAgaWYgKHRoaXMuaXNDb250ZXh0dWFsKCJhd2FpdCIpICYmIHRoaXMuY2FuQXdhaXQpIHsKICAgICAgZXhwciA9IHRoaXMucGFyc2VBd2FpdChmb3JJbml0KTsKICAgICAgc2F3VW5hcnkgPSB0cnVlOwogICAgfSBlbHNlIGlmICh0aGlzLnR5cGUucHJlZml4KSB7CiAgICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKSwgdXBkYXRlID0gdGhpcy50eXBlID09PSB0eXBlcyQxLmluY0RlYzsKICAgICAgbm9kZS5vcGVyYXRvciA9IHRoaXMudmFsdWU7CiAgICAgIG5vZGUucHJlZml4ID0gdHJ1ZTsKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIG5vZGUuYXJndW1lbnQgPSB0aGlzLnBhcnNlTWF5YmVVbmFyeShudWxsLCB0cnVlLCB1cGRhdGUsIGZvckluaXQpOwogICAgICB0aGlzLmNoZWNrRXhwcmVzc2lvbkVycm9ycyhyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLCB0cnVlKTsKICAgICAgaWYgKHVwZGF0ZSkgeyB0aGlzLmNoZWNrTFZhbFNpbXBsZShub2RlLmFyZ3VtZW50KTsgfQogICAgICBlbHNlIGlmICh0aGlzLnN0cmljdCAmJiBub2RlLm9wZXJhdG9yID09PSAiZGVsZXRlIiAmJgogICAgICAgICAgICAgICBub2RlLmFyZ3VtZW50LnR5cGUgPT09ICJJZGVudGlmaWVyIikKICAgICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShub2RlLnN0YXJ0LCAiRGVsZXRpbmcgbG9jYWwgdmFyaWFibGUgaW4gc3RyaWN0IG1vZGUiKTsgfQogICAgICBlbHNlIGlmIChub2RlLm9wZXJhdG9yID09PSAiZGVsZXRlIiAmJiBpc1ByaXZhdGVGaWVsZEFjY2Vzcyhub2RlLmFyZ3VtZW50KSkKICAgICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShub2RlLnN0YXJ0LCAiUHJpdmF0ZSBmaWVsZHMgY2FuIG5vdCBiZSBkZWxldGVkIik7IH0KICAgICAgZWxzZSB7IHNhd1VuYXJ5ID0gdHJ1ZTsgfQogICAgICBleHByID0gdGhpcy5maW5pc2hOb2RlKG5vZGUsIHVwZGF0ZSA/ICJVcGRhdGVFeHByZXNzaW9uIiA6ICJVbmFyeUV4cHJlc3Npb24iKTsKICAgIH0gZWxzZSBpZiAoIXNhd1VuYXJ5ICYmIHRoaXMudHlwZSA9PT0gdHlwZXMkMS5wcml2YXRlSWQpIHsKICAgICAgaWYgKGZvckluaXQgfHwgdGhpcy5wcml2YXRlTmFtZVN0YWNrLmxlbmd0aCA9PT0gMCkgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgICBleHByID0gdGhpcy5wYXJzZVByaXZhdGVJZGVudCgpOwogICAgICAvLyBvbmx5IGNvdWxkIGJlIHByaXZhdGUgZmllbGRzIGluICdpbicsIHN1Y2ggYXMgI3ggaW4gb2JqCiAgICAgIGlmICh0aGlzLnR5cGUgIT09IHR5cGVzJDEuX2luKSB7IHRoaXMudW5leHBlY3RlZCgpOyB9CiAgICB9IGVsc2UgewogICAgICBleHByID0gdGhpcy5wYXJzZUV4cHJTdWJzY3JpcHRzKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIGZvckluaXQpOwogICAgICBpZiAodGhpcy5jaGVja0V4cHJlc3Npb25FcnJvcnMocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykpIHsgcmV0dXJuIGV4cHIgfQogICAgICB3aGlsZSAodGhpcy50eXBlLnBvc3RmaXggJiYgIXRoaXMuY2FuSW5zZXJ0U2VtaWNvbG9uKCkpIHsKICAgICAgICB2YXIgbm9kZSQxID0gdGhpcy5zdGFydE5vZGVBdChzdGFydFBvcywgc3RhcnRMb2MpOwogICAgICAgIG5vZGUkMS5vcGVyYXRvciA9IHRoaXMudmFsdWU7CiAgICAgICAgbm9kZSQxLnByZWZpeCA9IGZhbHNlOwogICAgICAgIG5vZGUkMS5hcmd1bWVudCA9IGV4cHI7CiAgICAgICAgdGhpcy5jaGVja0xWYWxTaW1wbGUoZXhwcik7CiAgICAgICAgdGhpcy5uZXh0KCk7CiAgICAgICAgZXhwciA9IHRoaXMuZmluaXNoTm9kZShub2RlJDEsICJVcGRhdGVFeHByZXNzaW9uIik7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoIWluY0RlYyAmJiB0aGlzLmVhdCh0eXBlcyQxLnN0YXJzdGFyKSkgewogICAgICBpZiAoc2F3VW5hcnkpCiAgICAgICAgeyB0aGlzLnVuZXhwZWN0ZWQodGhpcy5sYXN0VG9rU3RhcnQpOyB9CiAgICAgIGVsc2UKICAgICAgICB7IHJldHVybiB0aGlzLmJ1aWxkQmluYXJ5KHN0YXJ0UG9zLCBzdGFydExvYywgZXhwciwgdGhpcy5wYXJzZU1heWJlVW5hcnkobnVsbCwgZmFsc2UsIGZhbHNlLCBmb3JJbml0KSwgIioqIiwgZmFsc2UpIH0KICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBleHByCiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gaXNQcml2YXRlRmllbGRBY2Nlc3Mobm9kZSkgewogICAgcmV0dXJuICgKICAgICAgbm9kZS50eXBlID09PSAiTWVtYmVyRXhwcmVzc2lvbiIgJiYgbm9kZS5wcm9wZXJ0eS50eXBlID09PSAiUHJpdmF0ZUlkZW50aWZpZXIiIHx8CiAgICAgIG5vZGUudHlwZSA9PT0gIkNoYWluRXhwcmVzc2lvbiIgJiYgaXNQcml2YXRlRmllbGRBY2Nlc3Mobm9kZS5leHByZXNzaW9uKQogICAgKQogIH0KCiAgLy8gUGFyc2UgY2FsbCwgZG90LCBhbmQgYFtdYC1zdWJzY3JpcHQgZXhwcmVzc2lvbnMuCgogIHBwJDUucGFyc2VFeHByU3Vic2NyaXB0cyA9IGZ1bmN0aW9uKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIGZvckluaXQpIHsKICAgIHZhciBzdGFydFBvcyA9IHRoaXMuc3RhcnQsIHN0YXJ0TG9jID0gdGhpcy5zdGFydExvYzsKICAgIHZhciBleHByID0gdGhpcy5wYXJzZUV4cHJBdG9tKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIGZvckluaXQpOwogICAgaWYgKGV4cHIudHlwZSA9PT0gIkFycm93RnVuY3Rpb25FeHByZXNzaW9uIiAmJiB0aGlzLmlucHV0LnNsaWNlKHRoaXMubGFzdFRva1N0YXJ0LCB0aGlzLmxhc3RUb2tFbmQpICE9PSAiKSIpCiAgICAgIHsgcmV0dXJuIGV4cHIgfQogICAgdmFyIHJlc3VsdCA9IHRoaXMucGFyc2VTdWJzY3JpcHRzKGV4cHIsIHN0YXJ0UG9zLCBzdGFydExvYywgZmFsc2UsIGZvckluaXQpOwogICAgaWYgKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMgJiYgcmVzdWx0LnR5cGUgPT09ICJNZW1iZXJFeHByZXNzaW9uIikgewogICAgICBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5wYXJlbnRoZXNpemVkQXNzaWduID49IHJlc3VsdC5zdGFydCkgeyByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnBhcmVudGhlc2l6ZWRBc3NpZ24gPSAtMTsgfQogICAgICBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5wYXJlbnRoZXNpemVkQmluZCA+PSByZXN1bHQuc3RhcnQpIHsgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5wYXJlbnRoZXNpemVkQmluZCA9IC0xOyB9CiAgICAgIGlmIChyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnRyYWlsaW5nQ29tbWEgPj0gcmVzdWx0LnN0YXJ0KSB7IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMudHJhaWxpbmdDb21tYSA9IC0xOyB9CiAgICB9CiAgICByZXR1cm4gcmVzdWx0CiAgfTsKCiAgcHAkNS5wYXJzZVN1YnNjcmlwdHMgPSBmdW5jdGlvbihiYXNlLCBzdGFydFBvcywgc3RhcnRMb2MsIG5vQ2FsbHMsIGZvckluaXQpIHsKICAgIHZhciBtYXliZUFzeW5jQXJyb3cgPSB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOCAmJiBiYXNlLnR5cGUgPT09ICJJZGVudGlmaWVyIiAmJiBiYXNlLm5hbWUgPT09ICJhc3luYyIgJiYKICAgICAgICB0aGlzLmxhc3RUb2tFbmQgPT09IGJhc2UuZW5kICYmICF0aGlzLmNhbkluc2VydFNlbWljb2xvbigpICYmIGJhc2UuZW5kIC0gYmFzZS5zdGFydCA9PT0gNSAmJgogICAgICAgIHRoaXMucG90ZW50aWFsQXJyb3dBdCA9PT0gYmFzZS5zdGFydDsKICAgIHZhciBvcHRpb25hbENoYWluZWQgPSBmYWxzZTsKCiAgICB3aGlsZSAodHJ1ZSkgewogICAgICB2YXIgZWxlbWVudCA9IHRoaXMucGFyc2VTdWJzY3JpcHQoYmFzZSwgc3RhcnRQb3MsIHN0YXJ0TG9jLCBub0NhbGxzLCBtYXliZUFzeW5jQXJyb3csIG9wdGlvbmFsQ2hhaW5lZCwgZm9ySW5pdCk7CgogICAgICBpZiAoZWxlbWVudC5vcHRpb25hbCkgeyBvcHRpb25hbENoYWluZWQgPSB0cnVlOyB9CiAgICAgIGlmIChlbGVtZW50ID09PSBiYXNlIHx8IGVsZW1lbnQudHlwZSA9PT0gIkFycm93RnVuY3Rpb25FeHByZXNzaW9uIikgewogICAgICAgIGlmIChvcHRpb25hbENoYWluZWQpIHsKICAgICAgICAgIHZhciBjaGFpbk5vZGUgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0UG9zLCBzdGFydExvYyk7CiAgICAgICAgICBjaGFpbk5vZGUuZXhwcmVzc2lvbiA9IGVsZW1lbnQ7CiAgICAgICAgICBlbGVtZW50ID0gdGhpcy5maW5pc2hOb2RlKGNoYWluTm9kZSwgIkNoYWluRXhwcmVzc2lvbiIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZWxlbWVudAogICAgICB9CgogICAgICBiYXNlID0gZWxlbWVudDsKICAgIH0KICB9OwoKICBwcCQ1LnBhcnNlU3Vic2NyaXB0ID0gZnVuY3Rpb24oYmFzZSwgc3RhcnRQb3MsIHN0YXJ0TG9jLCBub0NhbGxzLCBtYXliZUFzeW5jQXJyb3csIG9wdGlvbmFsQ2hhaW5lZCwgZm9ySW5pdCkgewogICAgdmFyIG9wdGlvbmFsU3VwcG9ydGVkID0gdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDExOwogICAgdmFyIG9wdGlvbmFsID0gb3B0aW9uYWxTdXBwb3J0ZWQgJiYgdGhpcy5lYXQodHlwZXMkMS5xdWVzdGlvbkRvdCk7CiAgICBpZiAobm9DYWxscyAmJiBvcHRpb25hbCkgeyB0aGlzLnJhaXNlKHRoaXMubGFzdFRva1N0YXJ0LCAiT3B0aW9uYWwgY2hhaW5pbmcgY2Fubm90IGFwcGVhciBpbiB0aGUgY2FsbGVlIG9mIG5ldyBleHByZXNzaW9ucyIpOyB9CgogICAgdmFyIGNvbXB1dGVkID0gdGhpcy5lYXQodHlwZXMkMS5icmFja2V0TCk7CiAgICBpZiAoY29tcHV0ZWQgfHwgKG9wdGlvbmFsICYmIHRoaXMudHlwZSAhPT0gdHlwZXMkMS5wYXJlbkwgJiYgdGhpcy50eXBlICE9PSB0eXBlcyQxLmJhY2tRdW90ZSkgfHwgdGhpcy5lYXQodHlwZXMkMS5kb3QpKSB7CiAgICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGVBdChzdGFydFBvcywgc3RhcnRMb2MpOwogICAgICBub2RlLm9iamVjdCA9IGJhc2U7CiAgICAgIGlmIChjb21wdXRlZCkgewogICAgICAgIG5vZGUucHJvcGVydHkgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpOwogICAgICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEuYnJhY2tldFIpOwogICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5wcml2YXRlSWQgJiYgYmFzZS50eXBlICE9PSAiU3VwZXIiKSB7CiAgICAgICAgbm9kZS5wcm9wZXJ0eSA9IHRoaXMucGFyc2VQcml2YXRlSWRlbnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBub2RlLnByb3BlcnR5ID0gdGhpcy5wYXJzZUlkZW50KHRoaXMub3B0aW9ucy5hbGxvd1Jlc2VydmVkICE9PSAibmV2ZXIiKTsKICAgICAgfQogICAgICBub2RlLmNvbXB1dGVkID0gISFjb21wdXRlZDsKICAgICAgaWYgKG9wdGlvbmFsU3VwcG9ydGVkKSB7CiAgICAgICAgbm9kZS5vcHRpb25hbCA9IG9wdGlvbmFsOwogICAgICB9CiAgICAgIGJhc2UgPSB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIk1lbWJlckV4cHJlc3Npb24iKTsKICAgIH0gZWxzZSBpZiAoIW5vQ2FsbHMgJiYgdGhpcy5lYXQodHlwZXMkMS5wYXJlbkwpKSB7CiAgICAgIHZhciByZWZEZXN0cnVjdHVyaW5nRXJyb3JzID0gbmV3IERlc3RydWN0dXJpbmdFcnJvcnMsIG9sZFlpZWxkUG9zID0gdGhpcy55aWVsZFBvcywgb2xkQXdhaXRQb3MgPSB0aGlzLmF3YWl0UG9zLCBvbGRBd2FpdElkZW50UG9zID0gdGhpcy5hd2FpdElkZW50UG9zOwogICAgICB0aGlzLnlpZWxkUG9zID0gMDsKICAgICAgdGhpcy5hd2FpdFBvcyA9IDA7CiAgICAgIHRoaXMuYXdhaXRJZGVudFBvcyA9IDA7CiAgICAgIHZhciBleHByTGlzdCA9IHRoaXMucGFyc2VFeHByTGlzdCh0eXBlcyQxLnBhcmVuUiwgdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDgsIGZhbHNlLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTsKICAgICAgaWYgKG1heWJlQXN5bmNBcnJvdyAmJiAhb3B0aW9uYWwgJiYgIXRoaXMuY2FuSW5zZXJ0U2VtaWNvbG9uKCkgJiYgdGhpcy5lYXQodHlwZXMkMS5hcnJvdykpIHsKICAgICAgICB0aGlzLmNoZWNrUGF0dGVybkVycm9ycyhyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLCBmYWxzZSk7CiAgICAgICAgdGhpcy5jaGVja1lpZWxkQXdhaXRJbkRlZmF1bHRQYXJhbXMoKTsKICAgICAgICBpZiAodGhpcy5hd2FpdElkZW50UG9zID4gMCkKICAgICAgICAgIHsgdGhpcy5yYWlzZSh0aGlzLmF3YWl0SWRlbnRQb3MsICJDYW5ub3QgdXNlICdhd2FpdCcgYXMgaWRlbnRpZmllciBpbnNpZGUgYW4gYXN5bmMgZnVuY3Rpb24iKTsgfQogICAgICAgIHRoaXMueWllbGRQb3MgPSBvbGRZaWVsZFBvczsKICAgICAgICB0aGlzLmF3YWl0UG9zID0gb2xkQXdhaXRQb3M7CiAgICAgICAgdGhpcy5hd2FpdElkZW50UG9zID0gb2xkQXdhaXRJZGVudFBvczsKICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUFycm93RXhwcmVzc2lvbih0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0UG9zLCBzdGFydExvYyksIGV4cHJMaXN0LCB0cnVlLCBmb3JJbml0KQogICAgICB9CiAgICAgIHRoaXMuY2hlY2tFeHByZXNzaW9uRXJyb3JzKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIHRydWUpOwogICAgICB0aGlzLnlpZWxkUG9zID0gb2xkWWllbGRQb3MgfHwgdGhpcy55aWVsZFBvczsKICAgICAgdGhpcy5hd2FpdFBvcyA9IG9sZEF3YWl0UG9zIHx8IHRoaXMuYXdhaXRQb3M7CiAgICAgIHRoaXMuYXdhaXRJZGVudFBvcyA9IG9sZEF3YWl0SWRlbnRQb3MgfHwgdGhpcy5hd2FpdElkZW50UG9zOwogICAgICB2YXIgbm9kZSQxID0gdGhpcy5zdGFydE5vZGVBdChzdGFydFBvcywgc3RhcnRMb2MpOwogICAgICBub2RlJDEuY2FsbGVlID0gYmFzZTsKICAgICAgbm9kZSQxLmFyZ3VtZW50cyA9IGV4cHJMaXN0OwogICAgICBpZiAob3B0aW9uYWxTdXBwb3J0ZWQpIHsKICAgICAgICBub2RlJDEub3B0aW9uYWwgPSBvcHRpb25hbDsKICAgICAgfQogICAgICBiYXNlID0gdGhpcy5maW5pc2hOb2RlKG5vZGUkMSwgIkNhbGxFeHByZXNzaW9uIik7CiAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5iYWNrUXVvdGUpIHsKICAgICAgaWYgKG9wdGlvbmFsIHx8IG9wdGlvbmFsQ2hhaW5lZCkgewogICAgICAgIHRoaXMucmFpc2UodGhpcy5zdGFydCwgIk9wdGlvbmFsIGNoYWluaW5nIGNhbm5vdCBhcHBlYXIgaW4gdGhlIHRhZyBvZiB0YWdnZWQgdGVtcGxhdGUgZXhwcmVzc2lvbnMiKTsKICAgICAgfQogICAgICB2YXIgbm9kZSQyID0gdGhpcy5zdGFydE5vZGVBdChzdGFydFBvcywgc3RhcnRMb2MpOwogICAgICBub2RlJDIudGFnID0gYmFzZTsKICAgICAgbm9kZSQyLnF1YXNpID0gdGhpcy5wYXJzZVRlbXBsYXRlKHtpc1RhZ2dlZDogdHJ1ZX0pOwogICAgICBiYXNlID0gdGhpcy5maW5pc2hOb2RlKG5vZGUkMiwgIlRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbiIpOwogICAgfQogICAgcmV0dXJuIGJhc2UKICB9OwoKICAvLyBQYXJzZSBhbiBhdG9taWMgZXhwcmVzc2lvbiDigJQgZWl0aGVyIGEgc2luZ2xlIHRva2VuIHRoYXQgaXMgYW4KICAvLyBleHByZXNzaW9uLCBhbiBleHByZXNzaW9uIHN0YXJ0ZWQgYnkgYSBrZXl3b3JkIGxpa2UgYGZ1bmN0aW9uYCBvcgogIC8vIGBuZXdgLCBvciBhbiBleHByZXNzaW9uIHdyYXBwZWQgaW4gcHVuY3R1YXRpb24gbGlrZSBgKClgLCBgW11gLAogIC8vIG9yIGB7fWAuCgogIHBwJDUucGFyc2VFeHByQXRvbSA9IGZ1bmN0aW9uKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIGZvckluaXQpIHsKICAgIC8vIElmIGEgZGl2aXNpb24gb3BlcmF0b3IgYXBwZWFycyBpbiBhbiBleHByZXNzaW9uIHBvc2l0aW9uLCB0aGUKICAgIC8vIHRva2VuaXplciBnb3QgY29uZnVzZWQsIGFuZCB3ZSBmb3JjZSBpdCB0byByZWFkIGEgcmVnZXhwIGluc3RlYWQuCiAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLnNsYXNoKSB7IHRoaXMucmVhZFJlZ2V4cCgpOyB9CgogICAgdmFyIG5vZGUsIGNhbkJlQXJyb3cgPSB0aGlzLnBvdGVudGlhbEFycm93QXQgPT09IHRoaXMuc3RhcnQ7CiAgICBzd2l0Y2ggKHRoaXMudHlwZSkgewogICAgY2FzZSB0eXBlcyQxLl9zdXBlcjoKICAgICAgaWYgKCF0aGlzLmFsbG93U3VwZXIpCiAgICAgICAgeyB0aGlzLnJhaXNlKHRoaXMuc3RhcnQsICInc3VwZXInIGtleXdvcmQgb3V0c2lkZSBhIG1ldGhvZCIpOyB9CiAgICAgIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICB0aGlzLm5leHQoKTsKICAgICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5wYXJlbkwgJiYgIXRoaXMuYWxsb3dEaXJlY3RTdXBlcikKICAgICAgICB7IHRoaXMucmFpc2Uobm9kZS5zdGFydCwgInN1cGVyKCkgY2FsbCBvdXRzaWRlIGNvbnN0cnVjdG9yIG9mIGEgc3ViY2xhc3MiKTsgfQogICAgICAvLyBUaGUgYHN1cGVyYCBrZXl3b3JkIGNhbiBhcHBlYXIgYXQgYmVsb3c6CiAgICAgIC8vIFN1cGVyUHJvcGVydHk6CiAgICAgIC8vICAgICBzdXBlciBbIEV4cHJlc3Npb24gXQogICAgICAvLyAgICAgc3VwZXIgLiBJZGVudGlmaWVyTmFtZQogICAgICAvLyBTdXBlckNhbGw6CiAgICAgIC8vICAgICBzdXBlciAoIEFyZ3VtZW50cyApCiAgICAgIGlmICh0aGlzLnR5cGUgIT09IHR5cGVzJDEuZG90ICYmIHRoaXMudHlwZSAhPT0gdHlwZXMkMS5icmFja2V0TCAmJiB0aGlzLnR5cGUgIT09IHR5cGVzJDEucGFyZW5MKQogICAgICAgIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiU3VwZXIiKQoKICAgIGNhc2UgdHlwZXMkMS5fdGhpczoKICAgICAgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJUaGlzRXhwcmVzc2lvbiIpCgogICAgY2FzZSB0eXBlcyQxLm5hbWU6CiAgICAgIHZhciBzdGFydFBvcyA9IHRoaXMuc3RhcnQsIHN0YXJ0TG9jID0gdGhpcy5zdGFydExvYywgY29udGFpbnNFc2MgPSB0aGlzLmNvbnRhaW5zRXNjOwogICAgICB2YXIgaWQgPSB0aGlzLnBhcnNlSWRlbnQoZmFsc2UpOwogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDggJiYgIWNvbnRhaW5zRXNjICYmIGlkLm5hbWUgPT09ICJhc3luYyIgJiYgIXRoaXMuY2FuSW5zZXJ0U2VtaWNvbG9uKCkgJiYgdGhpcy5lYXQodHlwZXMkMS5fZnVuY3Rpb24pKSB7CiAgICAgICAgdGhpcy5vdmVycmlkZUNvbnRleHQodHlwZXMuZl9leHByKTsKICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUZ1bmN0aW9uKHRoaXMuc3RhcnROb2RlQXQoc3RhcnRQb3MsIHN0YXJ0TG9jKSwgMCwgZmFsc2UsIHRydWUsIGZvckluaXQpCiAgICAgIH0KICAgICAgaWYgKGNhbkJlQXJyb3cgJiYgIXRoaXMuY2FuSW5zZXJ0U2VtaWNvbG9uKCkpIHsKICAgICAgICBpZiAodGhpcy5lYXQodHlwZXMkMS5hcnJvdykpCiAgICAgICAgICB7IHJldHVybiB0aGlzLnBhcnNlQXJyb3dFeHByZXNzaW9uKHRoaXMuc3RhcnROb2RlQXQoc3RhcnRQb3MsIHN0YXJ0TG9jKSwgW2lkXSwgZmFsc2UsIGZvckluaXQpIH0KICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDggJiYgaWQubmFtZSA9PT0gImFzeW5jIiAmJiB0aGlzLnR5cGUgPT09IHR5cGVzJDEubmFtZSAmJiAhY29udGFpbnNFc2MgJiYKICAgICAgICAgICAgKCF0aGlzLnBvdGVudGlhbEFycm93SW5Gb3JBd2FpdCB8fCB0aGlzLnZhbHVlICE9PSAib2YiIHx8IHRoaXMuY29udGFpbnNFc2MpKSB7CiAgICAgICAgICBpZCA9IHRoaXMucGFyc2VJZGVudChmYWxzZSk7CiAgICAgICAgICBpZiAodGhpcy5jYW5JbnNlcnRTZW1pY29sb24oKSB8fCAhdGhpcy5lYXQodHlwZXMkMS5hcnJvdykpCiAgICAgICAgICAgIHsgdGhpcy51bmV4cGVjdGVkKCk7IH0KICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlQXJyb3dFeHByZXNzaW9uKHRoaXMuc3RhcnROb2RlQXQoc3RhcnRQb3MsIHN0YXJ0TG9jKSwgW2lkXSwgdHJ1ZSwgZm9ySW5pdCkKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGlkCgogICAgY2FzZSB0eXBlcyQxLnJlZ2V4cDoKICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTsKICAgICAgbm9kZSA9IHRoaXMucGFyc2VMaXRlcmFsKHZhbHVlLnZhbHVlKTsKICAgICAgbm9kZS5yZWdleCA9IHtwYXR0ZXJuOiB2YWx1ZS5wYXR0ZXJuLCBmbGFnczogdmFsdWUuZmxhZ3N9OwogICAgICByZXR1cm4gbm9kZQoKICAgIGNhc2UgdHlwZXMkMS5udW06IGNhc2UgdHlwZXMkMS5zdHJpbmc6CiAgICAgIHJldHVybiB0aGlzLnBhcnNlTGl0ZXJhbCh0aGlzLnZhbHVlKQoKICAgIGNhc2UgdHlwZXMkMS5fbnVsbDogY2FzZSB0eXBlcyQxLl90cnVlOiBjYXNlIHR5cGVzJDEuX2ZhbHNlOgogICAgICBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgbm9kZS52YWx1ZSA9IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5fbnVsbCA/IG51bGwgOiB0aGlzLnR5cGUgPT09IHR5cGVzJDEuX3RydWU7CiAgICAgIG5vZGUucmF3ID0gdGhpcy50eXBlLmtleXdvcmQ7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJMaXRlcmFsIikKCiAgICBjYXNlIHR5cGVzJDEucGFyZW5MOgogICAgICB2YXIgc3RhcnQgPSB0aGlzLnN0YXJ0LCBleHByID0gdGhpcy5wYXJzZVBhcmVuQW5kRGlzdGluZ3Vpc2hFeHByZXNzaW9uKGNhbkJlQXJyb3csIGZvckluaXQpOwogICAgICBpZiAocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykgewogICAgICAgIGlmIChyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnBhcmVudGhlc2l6ZWRBc3NpZ24gPCAwICYmICF0aGlzLmlzU2ltcGxlQXNzaWduVGFyZ2V0KGV4cHIpKQogICAgICAgICAgeyByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnBhcmVudGhlc2l6ZWRBc3NpZ24gPSBzdGFydDsgfQogICAgICAgIGlmIChyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnBhcmVudGhlc2l6ZWRCaW5kIDwgMCkKICAgICAgICAgIHsgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5wYXJlbnRoZXNpemVkQmluZCA9IHN0YXJ0OyB9CiAgICAgIH0KICAgICAgcmV0dXJuIGV4cHIKCiAgICBjYXNlIHR5cGVzJDEuYnJhY2tldEw6CiAgICAgIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICB0aGlzLm5leHQoKTsKICAgICAgbm9kZS5lbGVtZW50cyA9IHRoaXMucGFyc2VFeHByTGlzdCh0eXBlcyQxLmJyYWNrZXRSLCB0cnVlLCB0cnVlLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiQXJyYXlFeHByZXNzaW9uIikKCiAgICBjYXNlIHR5cGVzJDEuYnJhY2VMOgogICAgICB0aGlzLm92ZXJyaWRlQ29udGV4dCh0eXBlcy5iX2V4cHIpOwogICAgICByZXR1cm4gdGhpcy5wYXJzZU9iaihmYWxzZSwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykKCiAgICBjYXNlIHR5cGVzJDEuX2Z1bmN0aW9uOgogICAgICBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIHJldHVybiB0aGlzLnBhcnNlRnVuY3Rpb24obm9kZSwgMCkKCiAgICBjYXNlIHR5cGVzJDEuX2NsYXNzOgogICAgICByZXR1cm4gdGhpcy5wYXJzZUNsYXNzKHRoaXMuc3RhcnROb2RlKCksIGZhbHNlKQoKICAgIGNhc2UgdHlwZXMkMS5fbmV3OgogICAgICByZXR1cm4gdGhpcy5wYXJzZU5ldygpCgogICAgY2FzZSB0eXBlcyQxLmJhY2tRdW90ZToKICAgICAgcmV0dXJuIHRoaXMucGFyc2VUZW1wbGF0ZSgpCgogICAgY2FzZSB0eXBlcyQxLl9pbXBvcnQ6CiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTEpIHsKICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUV4cHJJbXBvcnQoKQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLnVuZXhwZWN0ZWQoKQogICAgICB9CgogICAgZGVmYXVsdDoKICAgICAgdGhpcy51bmV4cGVjdGVkKCk7CiAgICB9CiAgfTsKCiAgcHAkNS5wYXJzZUV4cHJJbXBvcnQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKCiAgICAvLyBDb25zdW1lIGBpbXBvcnRgIGFzIGFuIGlkZW50aWZpZXIgZm9yIGBpbXBvcnQubWV0YWAuCiAgICAvLyBCZWNhdXNlIGB0aGlzLnBhcnNlSWRlbnQodHJ1ZSlgIGRvZXNuJ3QgY2hlY2sgZXNjYXBlIHNlcXVlbmNlcywgaXQgbmVlZHMgdGhlIGNoZWNrIG9mIGB0aGlzLmNvbnRhaW5zRXNjYC4KICAgIGlmICh0aGlzLmNvbnRhaW5zRXNjKSB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZSh0aGlzLnN0YXJ0LCAiRXNjYXBlIHNlcXVlbmNlIGluIGtleXdvcmQgaW1wb3J0Iik7IH0KICAgIHZhciBtZXRhID0gdGhpcy5wYXJzZUlkZW50KHRydWUpOwoKICAgIHN3aXRjaCAodGhpcy50eXBlKSB7CiAgICBjYXNlIHR5cGVzJDEucGFyZW5MOgogICAgICByZXR1cm4gdGhpcy5wYXJzZUR5bmFtaWNJbXBvcnQobm9kZSkKICAgIGNhc2UgdHlwZXMkMS5kb3Q6CiAgICAgIG5vZGUubWV0YSA9IG1ldGE7CiAgICAgIHJldHVybiB0aGlzLnBhcnNlSW1wb3J0TWV0YShub2RlKQogICAgZGVmYXVsdDoKICAgICAgdGhpcy51bmV4cGVjdGVkKCk7CiAgICB9CiAgfTsKCiAgcHAkNS5wYXJzZUR5bmFtaWNJbXBvcnQgPSBmdW5jdGlvbihub2RlKSB7CiAgICB0aGlzLm5leHQoKTsgLy8gc2tpcCBgKGAKCiAgICAvLyBQYXJzZSBub2RlLnNvdXJjZS4KICAgIG5vZGUuc291cmNlID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKCk7CgogICAgLy8gVmVyaWZ5IGVuZGluZy4KICAgIGlmICghdGhpcy5lYXQodHlwZXMkMS5wYXJlblIpKSB7CiAgICAgIHZhciBlcnJvclBvcyA9IHRoaXMuc3RhcnQ7CiAgICAgIGlmICh0aGlzLmVhdCh0eXBlcyQxLmNvbW1hKSAmJiB0aGlzLmVhdCh0eXBlcyQxLnBhcmVuUikpIHsKICAgICAgICB0aGlzLnJhaXNlUmVjb3ZlcmFibGUoZXJyb3JQb3MsICJUcmFpbGluZyBjb21tYSBpcyBub3QgYWxsb3dlZCBpbiBpbXBvcnQoKSIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudW5leHBlY3RlZChlcnJvclBvcyk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJJbXBvcnRFeHByZXNzaW9uIikKICB9OwoKICBwcCQ1LnBhcnNlSW1wb3J0TWV0YSA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHRoaXMubmV4dCgpOyAvLyBza2lwIGAuYAoKICAgIHZhciBjb250YWluc0VzYyA9IHRoaXMuY29udGFpbnNFc2M7CiAgICBub2RlLnByb3BlcnR5ID0gdGhpcy5wYXJzZUlkZW50KHRydWUpOwoKICAgIGlmIChub2RlLnByb3BlcnR5Lm5hbWUgIT09ICJtZXRhIikKICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUobm9kZS5wcm9wZXJ0eS5zdGFydCwgIlRoZSBvbmx5IHZhbGlkIG1ldGEgcHJvcGVydHkgZm9yIGltcG9ydCBpcyAnaW1wb3J0Lm1ldGEnIik7IH0KICAgIGlmIChjb250YWluc0VzYykKICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUobm9kZS5zdGFydCwgIidpbXBvcnQubWV0YScgbXVzdCBub3QgY29udGFpbiBlc2NhcGVkIGNoYXJhY3RlcnMiKTsgfQogICAgaWYgKHRoaXMub3B0aW9ucy5zb3VyY2VUeXBlICE9PSAibW9kdWxlIiAmJiAhdGhpcy5vcHRpb25zLmFsbG93SW1wb3J0RXhwb3J0RXZlcnl3aGVyZSkKICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUobm9kZS5zdGFydCwgIkNhbm5vdCB1c2UgJ2ltcG9ydC5tZXRhJyBvdXRzaWRlIGEgbW9kdWxlIik7IH0KCiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJNZXRhUHJvcGVydHkiKQogIH07CgogIHBwJDUucGFyc2VMaXRlcmFsID0gZnVuY3Rpb24odmFsdWUpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIG5vZGUudmFsdWUgPSB2YWx1ZTsKICAgIG5vZGUucmF3ID0gdGhpcy5pbnB1dC5zbGljZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7CiAgICBpZiAobm9kZS5yYXcuY2hhckNvZGVBdChub2RlLnJhdy5sZW5ndGggLSAxKSA9PT0gMTEwKSB7IG5vZGUuYmlnaW50ID0gbm9kZS5yYXcuc2xpY2UoMCwgLTEpLnJlcGxhY2UoL18vZywgIiIpOyB9CiAgICB0aGlzLm5leHQoKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkxpdGVyYWwiKQogIH07CgogIHBwJDUucGFyc2VQYXJlbkV4cHJlc3Npb24gPSBmdW5jdGlvbigpIHsKICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEucGFyZW5MKTsKICAgIHZhciB2YWwgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpOwogICAgdGhpcy5leHBlY3QodHlwZXMkMS5wYXJlblIpOwogICAgcmV0dXJuIHZhbAogIH07CgogIHBwJDUucGFyc2VQYXJlbkFuZERpc3Rpbmd1aXNoRXhwcmVzc2lvbiA9IGZ1bmN0aW9uKGNhbkJlQXJyb3csIGZvckluaXQpIHsKICAgIHZhciBzdGFydFBvcyA9IHRoaXMuc3RhcnQsIHN0YXJ0TG9jID0gdGhpcy5zdGFydExvYywgdmFsLCBhbGxvd1RyYWlsaW5nQ29tbWEgPSB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gODsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikgewogICAgICB0aGlzLm5leHQoKTsKCiAgICAgIHZhciBpbm5lclN0YXJ0UG9zID0gdGhpcy5zdGFydCwgaW5uZXJTdGFydExvYyA9IHRoaXMuc3RhcnRMb2M7CiAgICAgIHZhciBleHByTGlzdCA9IFtdLCBmaXJzdCA9IHRydWUsIGxhc3RJc0NvbW1hID0gZmFsc2U7CiAgICAgIHZhciByZWZEZXN0cnVjdHVyaW5nRXJyb3JzID0gbmV3IERlc3RydWN0dXJpbmdFcnJvcnMsIG9sZFlpZWxkUG9zID0gdGhpcy55aWVsZFBvcywgb2xkQXdhaXRQb3MgPSB0aGlzLmF3YWl0UG9zLCBzcHJlYWRTdGFydDsKICAgICAgdGhpcy55aWVsZFBvcyA9IDA7CiAgICAgIHRoaXMuYXdhaXRQb3MgPSAwOwogICAgICAvLyBEbyBub3Qgc2F2ZSBhd2FpdElkZW50UG9zIHRvIGFsbG93IGNoZWNraW5nIGF3YWl0cyBuZXN0ZWQgaW4gcGFyYW1ldGVycwogICAgICB3aGlsZSAodGhpcy50eXBlICE9PSB0eXBlcyQxLnBhcmVuUikgewogICAgICAgIGZpcnN0ID8gZmlyc3QgPSBmYWxzZSA6IHRoaXMuZXhwZWN0KHR5cGVzJDEuY29tbWEpOwogICAgICAgIGlmIChhbGxvd1RyYWlsaW5nQ29tbWEgJiYgdGhpcy5hZnRlclRyYWlsaW5nQ29tbWEodHlwZXMkMS5wYXJlblIsIHRydWUpKSB7CiAgICAgICAgICBsYXN0SXNDb21tYSA9IHRydWU7CiAgICAgICAgICBicmVhawogICAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLmVsbGlwc2lzKSB7CiAgICAgICAgICBzcHJlYWRTdGFydCA9IHRoaXMuc3RhcnQ7CiAgICAgICAgICBleHByTGlzdC5wdXNoKHRoaXMucGFyc2VQYXJlbkl0ZW0odGhpcy5wYXJzZVJlc3RCaW5kaW5nKCkpKTsKICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuY29tbWEpIHsgdGhpcy5yYWlzZSh0aGlzLnN0YXJ0LCAiQ29tbWEgaXMgbm90IHBlcm1pdHRlZCBhZnRlciB0aGUgcmVzdCBlbGVtZW50Iik7IH0KICAgICAgICAgIGJyZWFrCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGV4cHJMaXN0LnB1c2godGhpcy5wYXJzZU1heWJlQXNzaWduKGZhbHNlLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLCB0aGlzLnBhcnNlUGFyZW5JdGVtKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBpbm5lckVuZFBvcyA9IHRoaXMubGFzdFRva0VuZCwgaW5uZXJFbmRMb2MgPSB0aGlzLmxhc3RUb2tFbmRMb2M7CiAgICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEucGFyZW5SKTsKCiAgICAgIGlmIChjYW5CZUFycm93ICYmICF0aGlzLmNhbkluc2VydFNlbWljb2xvbigpICYmIHRoaXMuZWF0KHR5cGVzJDEuYXJyb3cpKSB7CiAgICAgICAgdGhpcy5jaGVja1BhdHRlcm5FcnJvcnMocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycywgZmFsc2UpOwogICAgICAgIHRoaXMuY2hlY2tZaWVsZEF3YWl0SW5EZWZhdWx0UGFyYW1zKCk7CiAgICAgICAgdGhpcy55aWVsZFBvcyA9IG9sZFlpZWxkUG9zOwogICAgICAgIHRoaXMuYXdhaXRQb3MgPSBvbGRBd2FpdFBvczsKICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVBhcmVuQXJyb3dMaXN0KHN0YXJ0UG9zLCBzdGFydExvYywgZXhwckxpc3QsIGZvckluaXQpCiAgICAgIH0KCiAgICAgIGlmICghZXhwckxpc3QubGVuZ3RoIHx8IGxhc3RJc0NvbW1hKSB7IHRoaXMudW5leHBlY3RlZCh0aGlzLmxhc3RUb2tTdGFydCk7IH0KICAgICAgaWYgKHNwcmVhZFN0YXJ0KSB7IHRoaXMudW5leHBlY3RlZChzcHJlYWRTdGFydCk7IH0KICAgICAgdGhpcy5jaGVja0V4cHJlc3Npb25FcnJvcnMocmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycywgdHJ1ZSk7CiAgICAgIHRoaXMueWllbGRQb3MgPSBvbGRZaWVsZFBvcyB8fCB0aGlzLnlpZWxkUG9zOwogICAgICB0aGlzLmF3YWl0UG9zID0gb2xkQXdhaXRQb3MgfHwgdGhpcy5hd2FpdFBvczsKCiAgICAgIGlmIChleHByTGlzdC5sZW5ndGggPiAxKSB7CiAgICAgICAgdmFsID0gdGhpcy5zdGFydE5vZGVBdChpbm5lclN0YXJ0UG9zLCBpbm5lclN0YXJ0TG9jKTsKICAgICAgICB2YWwuZXhwcmVzc2lvbnMgPSBleHByTGlzdDsKICAgICAgICB0aGlzLmZpbmlzaE5vZGVBdCh2YWwsICJTZXF1ZW5jZUV4cHJlc3Npb24iLCBpbm5lckVuZFBvcywgaW5uZXJFbmRMb2MpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhbCA9IGV4cHJMaXN0WzBdOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB2YWwgPSB0aGlzLnBhcnNlUGFyZW5FeHByZXNzaW9uKCk7CiAgICB9CgogICAgaWYgKHRoaXMub3B0aW9ucy5wcmVzZXJ2ZVBhcmVucykgewogICAgICB2YXIgcGFyID0gdGhpcy5zdGFydE5vZGVBdChzdGFydFBvcywgc3RhcnRMb2MpOwogICAgICBwYXIuZXhwcmVzc2lvbiA9IHZhbDsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShwYXIsICJQYXJlbnRoZXNpemVkRXhwcmVzc2lvbiIpCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gdmFsCiAgICB9CiAgfTsKCiAgcHAkNS5wYXJzZVBhcmVuSXRlbSA9IGZ1bmN0aW9uKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtCiAgfTsKCiAgcHAkNS5wYXJzZVBhcmVuQXJyb3dMaXN0ID0gZnVuY3Rpb24oc3RhcnRQb3MsIHN0YXJ0TG9jLCBleHByTGlzdCwgZm9ySW5pdCkgewogICAgcmV0dXJuIHRoaXMucGFyc2VBcnJvd0V4cHJlc3Npb24odGhpcy5zdGFydE5vZGVBdChzdGFydFBvcywgc3RhcnRMb2MpLCBleHByTGlzdCwgZmFsc2UsIGZvckluaXQpCiAgfTsKCiAgLy8gTmV3J3MgcHJlY2VkZW5jZSBpcyBzbGlnaHRseSB0cmlja3kuIEl0IG11c3QgYWxsb3cgaXRzIGFyZ3VtZW50IHRvCiAgLy8gYmUgYSBgW11gIG9yIGRvdCBzdWJzY3JpcHQgZXhwcmVzc2lvbiwgYnV0IG5vdCBhIGNhbGwg4oCUIGF0IGxlYXN0LAogIC8vIG5vdCB3aXRob3V0IHdyYXBwaW5nIGl0IGluIHBhcmVudGhlc2VzLiBUaHVzLCBpdCB1c2VzIHRoZSBub0NhbGxzCiAgLy8gYXJndW1lbnQgdG8gcGFyc2VTdWJzY3JpcHRzIHRvIHByZXZlbnQgaXQgZnJvbSBjb25zdW1pbmcgdGhlCiAgLy8gYXJndW1lbnQgbGlzdC4KCiAgdmFyIGVtcHR5ID0gW107CgogIHBwJDUucGFyc2VOZXcgPSBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLmNvbnRhaW5zRXNjKSB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZSh0aGlzLnN0YXJ0LCAiRXNjYXBlIHNlcXVlbmNlIGluIGtleXdvcmQgbmV3Iik7IH0KICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHZhciBtZXRhID0gdGhpcy5wYXJzZUlkZW50KHRydWUpOwogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2ICYmIHRoaXMuZWF0KHR5cGVzJDEuZG90KSkgewogICAgICBub2RlLm1ldGEgPSBtZXRhOwogICAgICB2YXIgY29udGFpbnNFc2MgPSB0aGlzLmNvbnRhaW5zRXNjOwogICAgICBub2RlLnByb3BlcnR5ID0gdGhpcy5wYXJzZUlkZW50KHRydWUpOwogICAgICBpZiAobm9kZS5wcm9wZXJ0eS5uYW1lICE9PSAidGFyZ2V0IikKICAgICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShub2RlLnByb3BlcnR5LnN0YXJ0LCAiVGhlIG9ubHkgdmFsaWQgbWV0YSBwcm9wZXJ0eSBmb3IgbmV3IGlzICduZXcudGFyZ2V0JyIpOyB9CiAgICAgIGlmIChjb250YWluc0VzYykKICAgICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShub2RlLnN0YXJ0LCAiJ25ldy50YXJnZXQnIG11c3Qgbm90IGNvbnRhaW4gZXNjYXBlZCBjaGFyYWN0ZXJzIik7IH0KICAgICAgaWYgKCF0aGlzLmFsbG93TmV3RG90VGFyZ2V0KQogICAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKG5vZGUuc3RhcnQsICInbmV3LnRhcmdldCcgY2FuIG9ubHkgYmUgdXNlZCBpbiBmdW5jdGlvbnMgYW5kIGNsYXNzIHN0YXRpYyBibG9jayIpOyB9CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIk1ldGFQcm9wZXJ0eSIpCiAgICB9CiAgICB2YXIgc3RhcnRQb3MgPSB0aGlzLnN0YXJ0LCBzdGFydExvYyA9IHRoaXMuc3RhcnRMb2MsIGlzSW1wb3J0ID0gdGhpcy50eXBlID09PSB0eXBlcyQxLl9pbXBvcnQ7CiAgICBub2RlLmNhbGxlZSA9IHRoaXMucGFyc2VTdWJzY3JpcHRzKHRoaXMucGFyc2VFeHByQXRvbSgpLCBzdGFydFBvcywgc3RhcnRMb2MsIHRydWUsIGZhbHNlKTsKICAgIGlmIChpc0ltcG9ydCAmJiBub2RlLmNhbGxlZS50eXBlID09PSAiSW1wb3J0RXhwcmVzc2lvbiIpIHsKICAgICAgdGhpcy5yYWlzZShzdGFydFBvcywgIkNhbm5vdCB1c2UgbmV3IHdpdGggaW1wb3J0KCkiKTsKICAgIH0KICAgIGlmICh0aGlzLmVhdCh0eXBlcyQxLnBhcmVuTCkpIHsgbm9kZS5hcmd1bWVudHMgPSB0aGlzLnBhcnNlRXhwckxpc3QodHlwZXMkMS5wYXJlblIsIHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA4LCBmYWxzZSk7IH0KICAgIGVsc2UgeyBub2RlLmFyZ3VtZW50cyA9IGVtcHR5OyB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJOZXdFeHByZXNzaW9uIikKICB9OwoKICAvLyBQYXJzZSB0ZW1wbGF0ZSBleHByZXNzaW9uLgoKICBwcCQ1LnBhcnNlVGVtcGxhdGVFbGVtZW50ID0gZnVuY3Rpb24ocmVmKSB7CiAgICB2YXIgaXNUYWdnZWQgPSByZWYuaXNUYWdnZWQ7CgogICAgdmFyIGVsZW0gPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5pbnZhbGlkVGVtcGxhdGUpIHsKICAgICAgaWYgKCFpc1RhZ2dlZCkgewogICAgICAgIHRoaXMucmFpc2VSZWNvdmVyYWJsZSh0aGlzLnN0YXJ0LCAiQmFkIGVzY2FwZSBzZXF1ZW5jZSBpbiB1bnRhZ2dlZCB0ZW1wbGF0ZSBsaXRlcmFsIik7CiAgICAgIH0KICAgICAgZWxlbS52YWx1ZSA9IHsKICAgICAgICByYXc6IHRoaXMudmFsdWUsCiAgICAgICAgY29va2VkOiBudWxsCiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICBlbGVtLnZhbHVlID0gewogICAgICAgIHJhdzogdGhpcy5pbnB1dC5zbGljZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCkucmVwbGFjZSgvXHJcbj8vZywgIlxuIiksCiAgICAgICAgY29va2VkOiB0aGlzLnZhbHVlCiAgICAgIH07CiAgICB9CiAgICB0aGlzLm5leHQoKTsKICAgIGVsZW0udGFpbCA9IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5iYWNrUXVvdGU7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKGVsZW0sICJUZW1wbGF0ZUVsZW1lbnQiKQogIH07CgogIHBwJDUucGFyc2VUZW1wbGF0ZSA9IGZ1bmN0aW9uKHJlZikgewogICAgaWYgKCByZWYgPT09IHZvaWQgMCApIHJlZiA9IHt9OwogICAgdmFyIGlzVGFnZ2VkID0gcmVmLmlzVGFnZ2VkOyBpZiAoIGlzVGFnZ2VkID09PSB2b2lkIDAgKSBpc1RhZ2dlZCA9IGZhbHNlOwoKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHRoaXMubmV4dCgpOwogICAgbm9kZS5leHByZXNzaW9ucyA9IFtdOwogICAgdmFyIGN1ckVsdCA9IHRoaXMucGFyc2VUZW1wbGF0ZUVsZW1lbnQoe2lzVGFnZ2VkOiBpc1RhZ2dlZH0pOwogICAgbm9kZS5xdWFzaXMgPSBbY3VyRWx0XTsKICAgIHdoaWxlICghY3VyRWx0LnRhaWwpIHsKICAgICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5lb2YpIHsgdGhpcy5yYWlzZSh0aGlzLnBvcywgIlVudGVybWluYXRlZCB0ZW1wbGF0ZSBsaXRlcmFsIik7IH0KICAgICAgdGhpcy5leHBlY3QodHlwZXMkMS5kb2xsYXJCcmFjZUwpOwogICAgICBub2RlLmV4cHJlc3Npb25zLnB1c2godGhpcy5wYXJzZUV4cHJlc3Npb24oKSk7CiAgICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEuYnJhY2VSKTsKICAgICAgbm9kZS5xdWFzaXMucHVzaChjdXJFbHQgPSB0aGlzLnBhcnNlVGVtcGxhdGVFbGVtZW50KHtpc1RhZ2dlZDogaXNUYWdnZWR9KSk7CiAgICB9CiAgICB0aGlzLm5leHQoKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlRlbXBsYXRlTGl0ZXJhbCIpCiAgfTsKCiAgcHAkNS5pc0FzeW5jUHJvcCA9IGZ1bmN0aW9uKHByb3ApIHsKICAgIHJldHVybiAhcHJvcC5jb21wdXRlZCAmJiBwcm9wLmtleS50eXBlID09PSAiSWRlbnRpZmllciIgJiYgcHJvcC5rZXkubmFtZSA9PT0gImFzeW5jIiAmJgogICAgICAodGhpcy50eXBlID09PSB0eXBlcyQxLm5hbWUgfHwgdGhpcy50eXBlID09PSB0eXBlcyQxLm51bSB8fCB0aGlzLnR5cGUgPT09IHR5cGVzJDEuc3RyaW5nIHx8IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5icmFja2V0TCB8fCB0aGlzLnR5cGUua2V5d29yZCB8fCAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDkgJiYgdGhpcy50eXBlID09PSB0eXBlcyQxLnN0YXIpKSAmJgogICAgICAhbGluZUJyZWFrLnRlc3QodGhpcy5pbnB1dC5zbGljZSh0aGlzLmxhc3RUb2tFbmQsIHRoaXMuc3RhcnQpKQogIH07CgogIC8vIFBhcnNlIGFuIG9iamVjdCBsaXRlcmFsIG9yIGJpbmRpbmcgcGF0dGVybi4KCiAgcHAkNS5wYXJzZU9iaiA9IGZ1bmN0aW9uKGlzUGF0dGVybiwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykgewogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpLCBmaXJzdCA9IHRydWUsIHByb3BIYXNoID0ge307CiAgICBub2RlLnByb3BlcnRpZXMgPSBbXTsKICAgIHRoaXMubmV4dCgpOwogICAgd2hpbGUgKCF0aGlzLmVhdCh0eXBlcyQxLmJyYWNlUikpIHsKICAgICAgaWYgKCFmaXJzdCkgewogICAgICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEuY29tbWEpOwogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNSAmJiB0aGlzLmFmdGVyVHJhaWxpbmdDb21tYSh0eXBlcyQxLmJyYWNlUikpIHsgYnJlYWsgfQogICAgICB9IGVsc2UgeyBmaXJzdCA9IGZhbHNlOyB9CgogICAgICB2YXIgcHJvcCA9IHRoaXMucGFyc2VQcm9wZXJ0eShpc1BhdHRlcm4sIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpOwogICAgICBpZiAoIWlzUGF0dGVybikgeyB0aGlzLmNoZWNrUHJvcENsYXNoKHByb3AsIHByb3BIYXNoLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTsgfQogICAgICBub2RlLnByb3BlcnRpZXMucHVzaChwcm9wKTsKICAgIH0KICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgaXNQYXR0ZXJuID8gIk9iamVjdFBhdHRlcm4iIDogIk9iamVjdEV4cHJlc3Npb24iKQogIH07CgogIHBwJDUucGFyc2VQcm9wZXJ0eSA9IGZ1bmN0aW9uKGlzUGF0dGVybiwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykgewogICAgdmFyIHByb3AgPSB0aGlzLnN0YXJ0Tm9kZSgpLCBpc0dlbmVyYXRvciwgaXNBc3luYywgc3RhcnRQb3MsIHN0YXJ0TG9jOwogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5ICYmIHRoaXMuZWF0KHR5cGVzJDEuZWxsaXBzaXMpKSB7CiAgICAgIGlmIChpc1BhdHRlcm4pIHsKICAgICAgICBwcm9wLmFyZ3VtZW50ID0gdGhpcy5wYXJzZUlkZW50KGZhbHNlKTsKICAgICAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLmNvbW1hKSB7CiAgICAgICAgICB0aGlzLnJhaXNlKHRoaXMuc3RhcnQsICJDb21tYSBpcyBub3QgcGVybWl0dGVkIGFmdGVyIHRoZSByZXN0IGVsZW1lbnQiKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShwcm9wLCAiUmVzdEVsZW1lbnQiKQogICAgICB9CiAgICAgIC8vIFRvIGRpc2FsbG93IHBhcmVudGhlc2l6ZWQgaWRlbnRpZmllciB2aWEgYHRoaXMudG9Bc3NpZ25hYmxlKClgLgogICAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLnBhcmVuTCAmJiByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKSB7CiAgICAgICAgaWYgKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMucGFyZW50aGVzaXplZEFzc2lnbiA8IDApIHsKICAgICAgICAgIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMucGFyZW50aGVzaXplZEFzc2lnbiA9IHRoaXMuc3RhcnQ7CiAgICAgICAgfQogICAgICAgIGlmIChyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnBhcmVudGhlc2l6ZWRCaW5kIDwgMCkgewogICAgICAgICAgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycy5wYXJlbnRoZXNpemVkQmluZCA9IHRoaXMuc3RhcnQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIFBhcnNlIGFyZ3VtZW50LgogICAgICBwcm9wLmFyZ3VtZW50ID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKGZhbHNlLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTsKICAgICAgLy8gVG8gZGlzYWxsb3cgdHJhaWxpbmcgY29tbWEgdmlhIGB0aGlzLnRvQXNzaWduYWJsZSgpYC4KICAgICAgaWYgKHRoaXMudHlwZSA9PT0gdHlwZXMkMS5jb21tYSAmJiByZWZEZXN0cnVjdHVyaW5nRXJyb3JzICYmIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMudHJhaWxpbmdDb21tYSA8IDApIHsKICAgICAgICByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnRyYWlsaW5nQ29tbWEgPSB0aGlzLnN0YXJ0OwogICAgICB9CiAgICAgIC8vIEZpbmlzaAogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKHByb3AsICJTcHJlYWRFbGVtZW50IikKICAgIH0KICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikgewogICAgICBwcm9wLm1ldGhvZCA9IGZhbHNlOwogICAgICBwcm9wLnNob3J0aGFuZCA9IGZhbHNlOwogICAgICBpZiAoaXNQYXR0ZXJuIHx8IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsKICAgICAgICBzdGFydFBvcyA9IHRoaXMuc3RhcnQ7CiAgICAgICAgc3RhcnRMb2MgPSB0aGlzLnN0YXJ0TG9jOwogICAgICB9CiAgICAgIGlmICghaXNQYXR0ZXJuKQogICAgICAgIHsgaXNHZW5lcmF0b3IgPSB0aGlzLmVhdCh0eXBlcyQxLnN0YXIpOyB9CiAgICB9CiAgICB2YXIgY29udGFpbnNFc2MgPSB0aGlzLmNvbnRhaW5zRXNjOwogICAgdGhpcy5wYXJzZVByb3BlcnR5TmFtZShwcm9wKTsKICAgIGlmICghaXNQYXR0ZXJuICYmICFjb250YWluc0VzYyAmJiB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOCAmJiAhaXNHZW5lcmF0b3IgJiYgdGhpcy5pc0FzeW5jUHJvcChwcm9wKSkgewogICAgICBpc0FzeW5jID0gdHJ1ZTsKICAgICAgaXNHZW5lcmF0b3IgPSB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOSAmJiB0aGlzLmVhdCh0eXBlcyQxLnN0YXIpOwogICAgICB0aGlzLnBhcnNlUHJvcGVydHlOYW1lKHByb3AsIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpOwogICAgfSBlbHNlIHsKICAgICAgaXNBc3luYyA9IGZhbHNlOwogICAgfQogICAgdGhpcy5wYXJzZVByb3BlcnR5VmFsdWUocHJvcCwgaXNQYXR0ZXJuLCBpc0dlbmVyYXRvciwgaXNBc3luYywgc3RhcnRQb3MsIHN0YXJ0TG9jLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLCBjb250YWluc0VzYyk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKHByb3AsICJQcm9wZXJ0eSIpCiAgfTsKCiAgcHAkNS5wYXJzZVByb3BlcnR5VmFsdWUgPSBmdW5jdGlvbihwcm9wLCBpc1BhdHRlcm4sIGlzR2VuZXJhdG9yLCBpc0FzeW5jLCBzdGFydFBvcywgc3RhcnRMb2MsIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMsIGNvbnRhaW5zRXNjKSB7CiAgICBpZiAoKGlzR2VuZXJhdG9yIHx8IGlzQXN5bmMpICYmIHRoaXMudHlwZSA9PT0gdHlwZXMkMS5jb2xvbikKICAgICAgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQoKICAgIGlmICh0aGlzLmVhdCh0eXBlcyQxLmNvbG9uKSkgewogICAgICBwcm9wLnZhbHVlID0gaXNQYXR0ZXJuID8gdGhpcy5wYXJzZU1heWJlRGVmYXVsdCh0aGlzLnN0YXJ0LCB0aGlzLnN0YXJ0TG9jKSA6IHRoaXMucGFyc2VNYXliZUFzc2lnbihmYWxzZSwgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycyk7CiAgICAgIHByb3Aua2luZCA9ICJpbml0IjsKICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYgJiYgdGhpcy50eXBlID09PSB0eXBlcyQxLnBhcmVuTCkgewogICAgICBpZiAoaXNQYXR0ZXJuKSB7IHRoaXMudW5leHBlY3RlZCgpOyB9CiAgICAgIHByb3Aua2luZCA9ICJpbml0IjsKICAgICAgcHJvcC5tZXRob2QgPSB0cnVlOwogICAgICBwcm9wLnZhbHVlID0gdGhpcy5wYXJzZU1ldGhvZChpc0dlbmVyYXRvciwgaXNBc3luYyk7CiAgICB9IGVsc2UgaWYgKCFpc1BhdHRlcm4gJiYgIWNvbnRhaW5zRXNjICYmCiAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA1ICYmICFwcm9wLmNvbXB1dGVkICYmIHByb3Aua2V5LnR5cGUgPT09ICJJZGVudGlmaWVyIiAmJgogICAgICAgICAgICAgICAocHJvcC5rZXkubmFtZSA9PT0gImdldCIgfHwgcHJvcC5rZXkubmFtZSA9PT0gInNldCIpICYmCiAgICAgICAgICAgICAgICh0aGlzLnR5cGUgIT09IHR5cGVzJDEuY29tbWEgJiYgdGhpcy50eXBlICE9PSB0eXBlcyQxLmJyYWNlUiAmJiB0aGlzLnR5cGUgIT09IHR5cGVzJDEuZXEpKSB7CiAgICAgIGlmIChpc0dlbmVyYXRvciB8fCBpc0FzeW5jKSB7IHRoaXMudW5leHBlY3RlZCgpOyB9CiAgICAgIHByb3Aua2luZCA9IHByb3Aua2V5Lm5hbWU7CiAgICAgIHRoaXMucGFyc2VQcm9wZXJ0eU5hbWUocHJvcCk7CiAgICAgIHByb3AudmFsdWUgPSB0aGlzLnBhcnNlTWV0aG9kKGZhbHNlKTsKICAgICAgdmFyIHBhcmFtQ291bnQgPSBwcm9wLmtpbmQgPT09ICJnZXQiID8gMCA6IDE7CiAgICAgIGlmIChwcm9wLnZhbHVlLnBhcmFtcy5sZW5ndGggIT09IHBhcmFtQ291bnQpIHsKICAgICAgICB2YXIgc3RhcnQgPSBwcm9wLnZhbHVlLnN0YXJ0OwogICAgICAgIGlmIChwcm9wLmtpbmQgPT09ICJnZXQiKQogICAgICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUoc3RhcnQsICJnZXR0ZXIgc2hvdWxkIGhhdmUgbm8gcGFyYW1zIik7IH0KICAgICAgICBlbHNlCiAgICAgICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShzdGFydCwgInNldHRlciBzaG91bGQgaGF2ZSBleGFjdGx5IG9uZSBwYXJhbSIpOyB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHByb3Aua2luZCA9PT0gInNldCIgJiYgcHJvcC52YWx1ZS5wYXJhbXNbMF0udHlwZSA9PT0gIlJlc3RFbGVtZW50IikKICAgICAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHByb3AudmFsdWUucGFyYW1zWzBdLnN0YXJ0LCAiU2V0dGVyIGNhbm5vdCB1c2UgcmVzdCBwYXJhbXMiKTsgfQogICAgICB9CiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2ICYmICFwcm9wLmNvbXB1dGVkICYmIHByb3Aua2V5LnR5cGUgPT09ICJJZGVudGlmaWVyIikgewogICAgICBpZiAoaXNHZW5lcmF0b3IgfHwgaXNBc3luYykgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogICAgICB0aGlzLmNoZWNrVW5yZXNlcnZlZChwcm9wLmtleSk7CiAgICAgIGlmIChwcm9wLmtleS5uYW1lID09PSAiYXdhaXQiICYmICF0aGlzLmF3YWl0SWRlbnRQb3MpCiAgICAgICAgeyB0aGlzLmF3YWl0SWRlbnRQb3MgPSBzdGFydFBvczsgfQogICAgICBwcm9wLmtpbmQgPSAiaW5pdCI7CiAgICAgIGlmIChpc1BhdHRlcm4pIHsKICAgICAgICBwcm9wLnZhbHVlID0gdGhpcy5wYXJzZU1heWJlRGVmYXVsdChzdGFydFBvcywgc3RhcnRMb2MsIHRoaXMuY29weU5vZGUocHJvcC5rZXkpKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuZXEgJiYgcmVmRGVzdHJ1Y3R1cmluZ0Vycm9ycykgewogICAgICAgIGlmIChyZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnNob3J0aGFuZEFzc2lnbiA8IDApCiAgICAgICAgICB7IHJlZkRlc3RydWN0dXJpbmdFcnJvcnMuc2hvcnRoYW5kQXNzaWduID0gdGhpcy5zdGFydDsgfQogICAgICAgIHByb3AudmFsdWUgPSB0aGlzLnBhcnNlTWF5YmVEZWZhdWx0KHN0YXJ0UG9zLCBzdGFydExvYywgdGhpcy5jb3B5Tm9kZShwcm9wLmtleSkpOwogICAgICB9IGVsc2UgewogICAgICAgIHByb3AudmFsdWUgPSB0aGlzLmNvcHlOb2RlKHByb3Aua2V5KTsKICAgICAgfQogICAgICBwcm9wLnNob3J0aGFuZCA9IHRydWU7CiAgICB9IGVsc2UgeyB0aGlzLnVuZXhwZWN0ZWQoKTsgfQogIH07CgogIHBwJDUucGFyc2VQcm9wZXJ0eU5hbWUgPSBmdW5jdGlvbihwcm9wKSB7CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpIHsKICAgICAgaWYgKHRoaXMuZWF0KHR5cGVzJDEuYnJhY2tldEwpKSB7CiAgICAgICAgcHJvcC5jb21wdXRlZCA9IHRydWU7CiAgICAgICAgcHJvcC5rZXkgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oKTsKICAgICAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLmJyYWNrZXRSKTsKICAgICAgICByZXR1cm4gcHJvcC5rZXkKICAgICAgfSBlbHNlIHsKICAgICAgICBwcm9wLmNvbXB1dGVkID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBwcm9wLmtleSA9IHRoaXMudHlwZSA9PT0gdHlwZXMkMS5udW0gfHwgdGhpcy50eXBlID09PSB0eXBlcyQxLnN0cmluZyA/IHRoaXMucGFyc2VFeHByQXRvbSgpIDogdGhpcy5wYXJzZUlkZW50KHRoaXMub3B0aW9ucy5hbGxvd1Jlc2VydmVkICE9PSAibmV2ZXIiKQogIH07CgogIC8vIEluaXRpYWxpemUgZW1wdHkgZnVuY3Rpb24gbm9kZS4KCiAgcHAkNS5pbml0RnVuY3Rpb24gPSBmdW5jdGlvbihub2RlKSB7CiAgICBub2RlLmlkID0gbnVsbDsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikgeyBub2RlLmdlbmVyYXRvciA9IG5vZGUuZXhwcmVzc2lvbiA9IGZhbHNlOyB9CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDgpIHsgbm9kZS5hc3luYyA9IGZhbHNlOyB9CiAgfTsKCiAgLy8gUGFyc2Ugb2JqZWN0IG9yIGNsYXNzIG1ldGhvZC4KCiAgcHAkNS5wYXJzZU1ldGhvZCA9IGZ1bmN0aW9uKGlzR2VuZXJhdG9yLCBpc0FzeW5jLCBhbGxvd0RpcmVjdFN1cGVyKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCksIG9sZFlpZWxkUG9zID0gdGhpcy55aWVsZFBvcywgb2xkQXdhaXRQb3MgPSB0aGlzLmF3YWl0UG9zLCBvbGRBd2FpdElkZW50UG9zID0gdGhpcy5hd2FpdElkZW50UG9zOwoKICAgIHRoaXMuaW5pdEZ1bmN0aW9uKG5vZGUpOwogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2KQogICAgICB7IG5vZGUuZ2VuZXJhdG9yID0gaXNHZW5lcmF0b3I7IH0KICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOCkKICAgICAgeyBub2RlLmFzeW5jID0gISFpc0FzeW5jOyB9CgogICAgdGhpcy55aWVsZFBvcyA9IDA7CiAgICB0aGlzLmF3YWl0UG9zID0gMDsKICAgIHRoaXMuYXdhaXRJZGVudFBvcyA9IDA7CiAgICB0aGlzLmVudGVyU2NvcGUoZnVuY3Rpb25GbGFncyhpc0FzeW5jLCBub2RlLmdlbmVyYXRvcikgfCBTQ09QRV9TVVBFUiB8IChhbGxvd0RpcmVjdFN1cGVyID8gU0NPUEVfRElSRUNUX1NVUEVSIDogMCkpOwoKICAgIHRoaXMuZXhwZWN0KHR5cGVzJDEucGFyZW5MKTsKICAgIG5vZGUucGFyYW1zID0gdGhpcy5wYXJzZUJpbmRpbmdMaXN0KHR5cGVzJDEucGFyZW5SLCBmYWxzZSwgdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDgpOwogICAgdGhpcy5jaGVja1lpZWxkQXdhaXRJbkRlZmF1bHRQYXJhbXMoKTsKICAgIHRoaXMucGFyc2VGdW5jdGlvbkJvZHkobm9kZSwgZmFsc2UsIHRydWUsIGZhbHNlKTsKCiAgICB0aGlzLnlpZWxkUG9zID0gb2xkWWllbGRQb3M7CiAgICB0aGlzLmF3YWl0UG9zID0gb2xkQXdhaXRQb3M7CiAgICB0aGlzLmF3YWl0SWRlbnRQb3MgPSBvbGRBd2FpdElkZW50UG9zOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRnVuY3Rpb25FeHByZXNzaW9uIikKICB9OwoKICAvLyBQYXJzZSBhcnJvdyBmdW5jdGlvbiBleHByZXNzaW9uIHdpdGggZ2l2ZW4gcGFyYW1ldGVycy4KCiAgcHAkNS5wYXJzZUFycm93RXhwcmVzc2lvbiA9IGZ1bmN0aW9uKG5vZGUsIHBhcmFtcywgaXNBc3luYywgZm9ySW5pdCkgewogICAgdmFyIG9sZFlpZWxkUG9zID0gdGhpcy55aWVsZFBvcywgb2xkQXdhaXRQb3MgPSB0aGlzLmF3YWl0UG9zLCBvbGRBd2FpdElkZW50UG9zID0gdGhpcy5hd2FpdElkZW50UG9zOwoKICAgIHRoaXMuZW50ZXJTY29wZShmdW5jdGlvbkZsYWdzKGlzQXN5bmMsIGZhbHNlKSB8IFNDT1BFX0FSUk9XKTsKICAgIHRoaXMuaW5pdEZ1bmN0aW9uKG5vZGUpOwogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA4KSB7IG5vZGUuYXN5bmMgPSAhIWlzQXN5bmM7IH0KCiAgICB0aGlzLnlpZWxkUG9zID0gMDsKICAgIHRoaXMuYXdhaXRQb3MgPSAwOwogICAgdGhpcy5hd2FpdElkZW50UG9zID0gMDsKCiAgICBub2RlLnBhcmFtcyA9IHRoaXMudG9Bc3NpZ25hYmxlTGlzdChwYXJhbXMsIHRydWUpOwogICAgdGhpcy5wYXJzZUZ1bmN0aW9uQm9keShub2RlLCB0cnVlLCBmYWxzZSwgZm9ySW5pdCk7CgogICAgdGhpcy55aWVsZFBvcyA9IG9sZFlpZWxkUG9zOwogICAgdGhpcy5hd2FpdFBvcyA9IG9sZEF3YWl0UG9zOwogICAgdGhpcy5hd2FpdElkZW50UG9zID0gb2xkQXdhaXRJZGVudFBvczsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkFycm93RnVuY3Rpb25FeHByZXNzaW9uIikKICB9OwoKICAvLyBQYXJzZSBmdW5jdGlvbiBib2R5IGFuZCBjaGVjayBwYXJhbWV0ZXJzLgoKICBwcCQ1LnBhcnNlRnVuY3Rpb25Cb2R5ID0gZnVuY3Rpb24obm9kZSwgaXNBcnJvd0Z1bmN0aW9uLCBpc01ldGhvZCwgZm9ySW5pdCkgewogICAgdmFyIGlzRXhwcmVzc2lvbiA9IGlzQXJyb3dGdW5jdGlvbiAmJiB0aGlzLnR5cGUgIT09IHR5cGVzJDEuYnJhY2VMOwogICAgdmFyIG9sZFN0cmljdCA9IHRoaXMuc3RyaWN0LCB1c2VTdHJpY3QgPSBmYWxzZTsKCiAgICBpZiAoaXNFeHByZXNzaW9uKSB7CiAgICAgIG5vZGUuYm9keSA9IHRoaXMucGFyc2VNYXliZUFzc2lnbihmb3JJbml0KTsKICAgICAgbm9kZS5leHByZXNzaW9uID0gdHJ1ZTsKICAgICAgdGhpcy5jaGVja1BhcmFtcyhub2RlLCBmYWxzZSk7CiAgICB9IGVsc2UgewogICAgICB2YXIgbm9uU2ltcGxlID0gdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDcgJiYgIXRoaXMuaXNTaW1wbGVQYXJhbUxpc3Qobm9kZS5wYXJhbXMpOwogICAgICBpZiAoIW9sZFN0cmljdCB8fCBub25TaW1wbGUpIHsKICAgICAgICB1c2VTdHJpY3QgPSB0aGlzLnN0cmljdERpcmVjdGl2ZSh0aGlzLmVuZCk7CiAgICAgICAgLy8gSWYgdGhpcyBpcyBhIHN0cmljdCBtb2RlIGZ1bmN0aW9uLCB2ZXJpZnkgdGhhdCBhcmd1bWVudCBuYW1lcwogICAgICAgIC8vIGFyZSBub3QgcmVwZWF0ZWQsIGFuZCBpdCBkb2VzIG5vdCB0cnkgdG8gYmluZCB0aGUgd29yZHMgYGV2YWxgCiAgICAgICAgLy8gb3IgYGFyZ3VtZW50c2AuCiAgICAgICAgaWYgKHVzZVN0cmljdCAmJiBub25TaW1wbGUpCiAgICAgICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShub2RlLnN0YXJ0LCAiSWxsZWdhbCAndXNlIHN0cmljdCcgZGlyZWN0aXZlIGluIGZ1bmN0aW9uIHdpdGggbm9uLXNpbXBsZSBwYXJhbWV0ZXIgbGlzdCIpOyB9CiAgICAgIH0KICAgICAgLy8gU3RhcnQgYSBuZXcgc2NvcGUgd2l0aCByZWdhcmQgdG8gbGFiZWxzIGFuZCB0aGUgYGluRnVuY3Rpb25gCiAgICAgIC8vIGZsYWcgKHJlc3RvcmUgdGhlbSB0byB0aGVpciBvbGQgdmFsdWUgYWZ0ZXJ3YXJkcykuCiAgICAgIHZhciBvbGRMYWJlbHMgPSB0aGlzLmxhYmVsczsKICAgICAgdGhpcy5sYWJlbHMgPSBbXTsKICAgICAgaWYgKHVzZVN0cmljdCkgeyB0aGlzLnN0cmljdCA9IHRydWU7IH0KCiAgICAgIC8vIEFkZCB0aGUgcGFyYW1zIHRvIHZhckRlY2xhcmVkTmFtZXMgdG8gZW5zdXJlIHRoYXQgYW4gZXJyb3IgaXMgdGhyb3duCiAgICAgIC8vIGlmIGEgbGV0L2NvbnN0IGRlY2xhcmF0aW9uIGluIHRoZSBmdW5jdGlvbiBjbGFzaGVzIHdpdGggb25lIG9mIHRoZSBwYXJhbXMuCiAgICAgIHRoaXMuY2hlY2tQYXJhbXMobm9kZSwgIW9sZFN0cmljdCAmJiAhdXNlU3RyaWN0ICYmICFpc0Fycm93RnVuY3Rpb24gJiYgIWlzTWV0aG9kICYmIHRoaXMuaXNTaW1wbGVQYXJhbUxpc3Qobm9kZS5wYXJhbXMpKTsKICAgICAgLy8gRW5zdXJlIHRoZSBmdW5jdGlvbiBuYW1lIGlzbid0IGEgZm9yYmlkZGVuIGlkZW50aWZpZXIgaW4gc3RyaWN0IG1vZGUsIGUuZy4gJ2V2YWwnCiAgICAgIGlmICh0aGlzLnN0cmljdCAmJiBub2RlLmlkKSB7IHRoaXMuY2hlY2tMVmFsU2ltcGxlKG5vZGUuaWQsIEJJTkRfT1VUU0lERSk7IH0KICAgICAgbm9kZS5ib2R5ID0gdGhpcy5wYXJzZUJsb2NrKGZhbHNlLCB1bmRlZmluZWQsIHVzZVN0cmljdCAmJiAhb2xkU3RyaWN0KTsKICAgICAgbm9kZS5leHByZXNzaW9uID0gZmFsc2U7CiAgICAgIHRoaXMuYWRhcHREaXJlY3RpdmVQcm9sb2d1ZShub2RlLmJvZHkuYm9keSk7CiAgICAgIHRoaXMubGFiZWxzID0gb2xkTGFiZWxzOwogICAgfQogICAgdGhpcy5leGl0U2NvcGUoKTsKICB9OwoKICBwcCQ1LmlzU2ltcGxlUGFyYW1MaXN0ID0gZnVuY3Rpb24ocGFyYW1zKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IHBhcmFtczsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpCiAgICAgIHsKICAgICAgdmFyIHBhcmFtID0gbGlzdFtpXTsKCiAgICAgIGlmIChwYXJhbS50eXBlICE9PSAiSWRlbnRpZmllciIpIHsgcmV0dXJuIGZhbHNlCiAgICB9IH0KICAgIHJldHVybiB0cnVlCiAgfTsKCiAgLy8gQ2hlY2tzIGZ1bmN0aW9uIHBhcmFtcyBmb3IgdmFyaW91cyBkaXNhbGxvd2VkIHBhdHRlcm5zIHN1Y2ggYXMgdXNpbmcgImV2YWwiCiAgLy8gb3IgImFyZ3VtZW50cyIgYW5kIGR1cGxpY2F0ZSBwYXJhbWV0ZXJzLgoKICBwcCQ1LmNoZWNrUGFyYW1zID0gZnVuY3Rpb24obm9kZSwgYWxsb3dEdXBsaWNhdGVzKSB7CiAgICB2YXIgbmFtZUhhc2ggPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgZm9yICh2YXIgaSA9IDAsIGxpc3QgPSBub2RlLnBhcmFtczsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpCiAgICAgIHsKICAgICAgdmFyIHBhcmFtID0gbGlzdFtpXTsKCiAgICAgIHRoaXMuY2hlY2tMVmFsSW5uZXJQYXR0ZXJuKHBhcmFtLCBCSU5EX1ZBUiwgYWxsb3dEdXBsaWNhdGVzID8gbnVsbCA6IG5hbWVIYXNoKTsKICAgIH0KICB9OwoKICAvLyBQYXJzZXMgYSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBleHByZXNzaW9ucywgYW5kIHJldHVybnMgdGhlbSBhcwogIC8vIGFuIGFycmF5LiBgY2xvc2VgIGlzIHRoZSB0b2tlbiB0eXBlIHRoYXQgZW5kcyB0aGUgbGlzdCwgYW5kCiAgLy8gYGFsbG93RW1wdHlgIGNhbiBiZSB0dXJuZWQgb24gdG8gYWxsb3cgc3Vic2VxdWVudCBjb21tYXMgd2l0aAogIC8vIG5vdGhpbmcgaW4gYmV0d2VlbiB0aGVtIHRvIGJlIHBhcnNlZCBhcyBgbnVsbGAgKHdoaWNoIGlzIG5lZWRlZAogIC8vIGZvciBhcnJheSBsaXRlcmFscykuCgogIHBwJDUucGFyc2VFeHByTGlzdCA9IGZ1bmN0aW9uKGNsb3NlLCBhbGxvd1RyYWlsaW5nQ29tbWEsIGFsbG93RW1wdHksIHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpIHsKICAgIHZhciBlbHRzID0gW10sIGZpcnN0ID0gdHJ1ZTsKICAgIHdoaWxlICghdGhpcy5lYXQoY2xvc2UpKSB7CiAgICAgIGlmICghZmlyc3QpIHsKICAgICAgICB0aGlzLmV4cGVjdCh0eXBlcyQxLmNvbW1hKTsKICAgICAgICBpZiAoYWxsb3dUcmFpbGluZ0NvbW1hICYmIHRoaXMuYWZ0ZXJUcmFpbGluZ0NvbW1hKGNsb3NlKSkgeyBicmVhayB9CiAgICAgIH0gZWxzZSB7IGZpcnN0ID0gZmFsc2U7IH0KCiAgICAgIHZhciBlbHQgPSAodm9pZCAwKTsKICAgICAgaWYgKGFsbG93RW1wdHkgJiYgdGhpcy50eXBlID09PSB0eXBlcyQxLmNvbW1hKQogICAgICAgIHsgZWx0ID0gbnVsbDsgfQogICAgICBlbHNlIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEuZWxsaXBzaXMpIHsKICAgICAgICBlbHQgPSB0aGlzLnBhcnNlU3ByZWFkKHJlZkRlc3RydWN0dXJpbmdFcnJvcnMpOwogICAgICAgIGlmIChyZWZEZXN0cnVjdHVyaW5nRXJyb3JzICYmIHRoaXMudHlwZSA9PT0gdHlwZXMkMS5jb21tYSAmJiByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnRyYWlsaW5nQ29tbWEgPCAwKQogICAgICAgICAgeyByZWZEZXN0cnVjdHVyaW5nRXJyb3JzLnRyYWlsaW5nQ29tbWEgPSB0aGlzLnN0YXJ0OyB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWx0ID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKGZhbHNlLCByZWZEZXN0cnVjdHVyaW5nRXJyb3JzKTsKICAgICAgfQogICAgICBlbHRzLnB1c2goZWx0KTsKICAgIH0KICAgIHJldHVybiBlbHRzCiAgfTsKCiAgcHAkNS5jaGVja1VucmVzZXJ2ZWQgPSBmdW5jdGlvbihyZWYpIHsKICAgIHZhciBzdGFydCA9IHJlZi5zdGFydDsKICAgIHZhciBlbmQgPSByZWYuZW5kOwogICAgdmFyIG5hbWUgPSByZWYubmFtZTsKCiAgICBpZiAodGhpcy5pbkdlbmVyYXRvciAmJiBuYW1lID09PSAieWllbGQiKQogICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShzdGFydCwgIkNhbm5vdCB1c2UgJ3lpZWxkJyBhcyBpZGVudGlmaWVyIGluc2lkZSBhIGdlbmVyYXRvciIpOyB9CiAgICBpZiAodGhpcy5pbkFzeW5jICYmIG5hbWUgPT09ICJhd2FpdCIpCiAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHN0YXJ0LCAiQ2Fubm90IHVzZSAnYXdhaXQnIGFzIGlkZW50aWZpZXIgaW5zaWRlIGFuIGFzeW5jIGZ1bmN0aW9uIik7IH0KICAgIGlmICh0aGlzLmN1cnJlbnRUaGlzU2NvcGUoKS5pbkNsYXNzRmllbGRJbml0ICYmIG5hbWUgPT09ICJhcmd1bWVudHMiKQogICAgICB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShzdGFydCwgIkNhbm5vdCB1c2UgJ2FyZ3VtZW50cycgaW4gY2xhc3MgZmllbGQgaW5pdGlhbGl6ZXIiKTsgfQogICAgaWYgKHRoaXMuaW5DbGFzc1N0YXRpY0Jsb2NrICYmIChuYW1lID09PSAiYXJndW1lbnRzIiB8fCBuYW1lID09PSAiYXdhaXQiKSkKICAgICAgeyB0aGlzLnJhaXNlKHN0YXJ0LCAoIkNhbm5vdCB1c2UgIiArIG5hbWUgKyAiIGluIGNsYXNzIHN0YXRpYyBpbml0aWFsaXphdGlvbiBibG9jayIpKTsgfQogICAgaWYgKHRoaXMua2V5d29yZHMudGVzdChuYW1lKSkKICAgICAgeyB0aGlzLnJhaXNlKHN0YXJ0LCAoIlVuZXhwZWN0ZWQga2V5d29yZCAnIiArIG5hbWUgKyAiJyIpKTsgfQogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA8IDYgJiYKICAgICAgdGhpcy5pbnB1dC5zbGljZShzdGFydCwgZW5kKS5pbmRleE9mKCJcXCIpICE9PSAtMSkgeyByZXR1cm4gfQogICAgdmFyIHJlID0gdGhpcy5zdHJpY3QgPyB0aGlzLnJlc2VydmVkV29yZHNTdHJpY3QgOiB0aGlzLnJlc2VydmVkV29yZHM7CiAgICBpZiAocmUudGVzdChuYW1lKSkgewogICAgICBpZiAoIXRoaXMuaW5Bc3luYyAmJiBuYW1lID09PSAiYXdhaXQiKQogICAgICAgIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHN0YXJ0LCAiQ2Fubm90IHVzZSBrZXl3b3JkICdhd2FpdCcgb3V0c2lkZSBhbiBhc3luYyBmdW5jdGlvbiIpOyB9CiAgICAgIHRoaXMucmFpc2VSZWNvdmVyYWJsZShzdGFydCwgKCJUaGUga2V5d29yZCAnIiArIG5hbWUgKyAiJyBpcyByZXNlcnZlZCIpKTsKICAgIH0KICB9OwoKICAvLyBQYXJzZSB0aGUgbmV4dCB0b2tlbiBhcyBhbiBpZGVudGlmaWVyLiBJZiBgbGliZXJhbGAgaXMgdHJ1ZSAodXNlZAogIC8vIHdoZW4gcGFyc2luZyBwcm9wZXJ0aWVzKSwgaXQgd2lsbCBhbHNvIGNvbnZlcnQga2V5d29yZHMgaW50bwogIC8vIGlkZW50aWZpZXJzLgoKICBwcCQ1LnBhcnNlSWRlbnQgPSBmdW5jdGlvbihsaWJlcmFsLCBpc0JpbmRpbmcpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEubmFtZSkgewogICAgICBub2RlLm5hbWUgPSB0aGlzLnZhbHVlOwogICAgfSBlbHNlIGlmICh0aGlzLnR5cGUua2V5d29yZCkgewogICAgICBub2RlLm5hbWUgPSB0aGlzLnR5cGUua2V5d29yZDsKCiAgICAgIC8vIFRvIGZpeCBodHRwczovL2dpdGh1Yi5jb20vYWNvcm5qcy9hY29ybi9pc3N1ZXMvNTc1CiAgICAgIC8vIGBjbGFzc2AgYW5kIGBmdW5jdGlvbmAga2V5d29yZHMgcHVzaCBuZXcgY29udGV4dCBpbnRvIHRoaXMuY29udGV4dC4KICAgICAgLy8gQnV0IHRoZXJlIGlzIG5vIGNoYW5jZSB0byBwb3AgdGhlIGNvbnRleHQgaWYgdGhlIGtleXdvcmQgaXMgY29uc3VtZWQgYXMgYW4gaWRlbnRpZmllciBzdWNoIGFzIGEgcHJvcGVydHkgbmFtZS4KICAgICAgLy8gSWYgdGhlIHByZXZpb3VzIHRva2VuIGlzIGEgZG90LCB0aGlzIGRvZXMgbm90IGFwcGx5IGJlY2F1c2UgdGhlIGNvbnRleHQtbWFuYWdpbmcgY29kZSBhbHJlYWR5IGlnbm9yZWQgdGhlIGtleXdvcmQKICAgICAgaWYgKChub2RlLm5hbWUgPT09ICJjbGFzcyIgfHwgbm9kZS5uYW1lID09PSAiZnVuY3Rpb24iKSAmJgogICAgICAgICAgKHRoaXMubGFzdFRva0VuZCAhPT0gdGhpcy5sYXN0VG9rU3RhcnQgKyAxIHx8IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLmxhc3RUb2tTdGFydCkgIT09IDQ2KSkgewogICAgICAgIHRoaXMuY29udGV4dC5wb3AoKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGhpcy51bmV4cGVjdGVkKCk7CiAgICB9CiAgICB0aGlzLm5leHQoISFsaWJlcmFsKTsKICAgIHRoaXMuZmluaXNoTm9kZShub2RlLCAiSWRlbnRpZmllciIpOwogICAgaWYgKCFsaWJlcmFsKSB7CiAgICAgIHRoaXMuY2hlY2tVbnJlc2VydmVkKG5vZGUpOwogICAgICBpZiAobm9kZS5uYW1lID09PSAiYXdhaXQiICYmICF0aGlzLmF3YWl0SWRlbnRQb3MpCiAgICAgICAgeyB0aGlzLmF3YWl0SWRlbnRQb3MgPSBub2RlLnN0YXJ0OyB9CiAgICB9CiAgICByZXR1cm4gbm9kZQogIH07CgogIHBwJDUucGFyc2VQcml2YXRlSWRlbnQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIGlmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEucHJpdmF0ZUlkKSB7CiAgICAgIG5vZGUubmFtZSA9IHRoaXMudmFsdWU7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnVuZXhwZWN0ZWQoKTsKICAgIH0KICAgIHRoaXMubmV4dCgpOwogICAgdGhpcy5maW5pc2hOb2RlKG5vZGUsICJQcml2YXRlSWRlbnRpZmllciIpOwoKICAgIC8vIEZvciB2YWxpZGF0aW5nIGV4aXN0ZW5jZQogICAgaWYgKHRoaXMucHJpdmF0ZU5hbWVTdGFjay5sZW5ndGggPT09IDApIHsKICAgICAgdGhpcy5yYWlzZShub2RlLnN0YXJ0LCAoIlByaXZhdGUgZmllbGQgJyMiICsgKG5vZGUubmFtZSkgKyAiJyBtdXN0IGJlIGRlY2xhcmVkIGluIGFuIGVuY2xvc2luZyBjbGFzcyIpKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucHJpdmF0ZU5hbWVTdGFja1t0aGlzLnByaXZhdGVOYW1lU3RhY2subGVuZ3RoIC0gMV0udXNlZC5wdXNoKG5vZGUpOwogICAgfQoKICAgIHJldHVybiBub2RlCiAgfTsKCiAgLy8gUGFyc2VzIHlpZWxkIGV4cHJlc3Npb24gaW5zaWRlIGdlbmVyYXRvci4KCiAgcHAkNS5wYXJzZVlpZWxkID0gZnVuY3Rpb24oZm9ySW5pdCkgewogICAgaWYgKCF0aGlzLnlpZWxkUG9zKSB7IHRoaXMueWllbGRQb3MgPSB0aGlzLnN0YXJ0OyB9CgogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgdGhpcy5uZXh0KCk7CiAgICBpZiAodGhpcy50eXBlID09PSB0eXBlcyQxLnNlbWkgfHwgdGhpcy5jYW5JbnNlcnRTZW1pY29sb24oKSB8fCAodGhpcy50eXBlICE9PSB0eXBlcyQxLnN0YXIgJiYgIXRoaXMudHlwZS5zdGFydHNFeHByKSkgewogICAgICBub2RlLmRlbGVnYXRlID0gZmFsc2U7CiAgICAgIG5vZGUuYXJndW1lbnQgPSBudWxsOwogICAgfSBlbHNlIHsKICAgICAgbm9kZS5kZWxlZ2F0ZSA9IHRoaXMuZWF0KHR5cGVzJDEuc3Rhcik7CiAgICAgIG5vZGUuYXJndW1lbnQgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oZm9ySW5pdCk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJZaWVsZEV4cHJlc3Npb24iKQogIH07CgogIHBwJDUucGFyc2VBd2FpdCA9IGZ1bmN0aW9uKGZvckluaXQpIHsKICAgIGlmICghdGhpcy5hd2FpdFBvcykgeyB0aGlzLmF3YWl0UG9zID0gdGhpcy5zdGFydDsgfQoKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHRoaXMubmV4dCgpOwogICAgbm9kZS5hcmd1bWVudCA9IHRoaXMucGFyc2VNYXliZVVuYXJ5KG51bGwsIHRydWUsIGZhbHNlLCBmb3JJbml0KTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkF3YWl0RXhwcmVzc2lvbiIpCiAgfTsKCiAgdmFyIHBwJDQgPSBQYXJzZXIucHJvdG90eXBlOwoKICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gcmFpc2UgZXhjZXB0aW9ucyBvbiBwYXJzZSBlcnJvcnMuIEl0CiAgLy8gdGFrZXMgYW4gb2Zmc2V0IGludGVnZXIgKGludG8gdGhlIGN1cnJlbnQgYGlucHV0YCkgdG8gaW5kaWNhdGUKICAvLyB0aGUgbG9jYXRpb24gb2YgdGhlIGVycm9yLCBhdHRhY2hlcyB0aGUgcG9zaXRpb24gdG8gdGhlIGVuZAogIC8vIG9mIHRoZSBlcnJvciBtZXNzYWdlLCBhbmQgdGhlbiByYWlzZXMgYSBgU3ludGF4RXJyb3JgIHdpdGggdGhhdAogIC8vIG1lc3NhZ2UuCgogIHBwJDQucmFpc2UgPSBmdW5jdGlvbihwb3MsIG1lc3NhZ2UpIHsKICAgIHZhciBsb2MgPSBnZXRMaW5lSW5mbyh0aGlzLmlucHV0LCBwb3MpOwogICAgbWVzc2FnZSArPSAiICgiICsgbG9jLmxpbmUgKyAiOiIgKyBsb2MuY29sdW1uICsgIikiOwogICAgdmFyIGVyciA9IG5ldyBTeW50YXhFcnJvcihtZXNzYWdlKTsKICAgIGVyci5wb3MgPSBwb3M7IGVyci5sb2MgPSBsb2M7IGVyci5yYWlzZWRBdCA9IHRoaXMucG9zOwogICAgdGhyb3cgZXJyCiAgfTsKCiAgcHAkNC5yYWlzZVJlY292ZXJhYmxlID0gcHAkNC5yYWlzZTsKCiAgcHAkNC5jdXJQb3NpdGlvbiA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpIHsKICAgICAgcmV0dXJuIG5ldyBQb3NpdGlvbih0aGlzLmN1ckxpbmUsIHRoaXMucG9zIC0gdGhpcy5saW5lU3RhcnQpCiAgICB9CiAgfTsKCiAgdmFyIHBwJDMgPSBQYXJzZXIucHJvdG90eXBlOwoKICB2YXIgU2NvcGUgPSBmdW5jdGlvbiBTY29wZShmbGFncykgewogICAgdGhpcy5mbGFncyA9IGZsYWdzOwogICAgLy8gQSBsaXN0IG9mIHZhci1kZWNsYXJlZCBuYW1lcyBpbiB0aGUgY3VycmVudCBsZXhpY2FsIHNjb3BlCiAgICB0aGlzLnZhciA9IFtdOwogICAgLy8gQSBsaXN0IG9mIGxleGljYWxseS1kZWNsYXJlZCBuYW1lcyBpbiB0aGUgY3VycmVudCBsZXhpY2FsIHNjb3BlCiAgICB0aGlzLmxleGljYWwgPSBbXTsKICAgIC8vIEEgbGlzdCBvZiBsZXhpY2FsbHktZGVjbGFyZWQgRnVuY3Rpb25EZWNsYXJhdGlvbiBuYW1lcyBpbiB0aGUgY3VycmVudCBsZXhpY2FsIHNjb3BlCiAgICB0aGlzLmZ1bmN0aW9ucyA9IFtdOwogICAgLy8gQSBzd2l0Y2ggdG8gZGlzYWxsb3cgdGhlIGlkZW50aWZpZXIgcmVmZXJlbmNlICdhcmd1bWVudHMnCiAgICB0aGlzLmluQ2xhc3NGaWVsZEluaXQgPSBmYWxzZTsKICB9OwoKICAvLyBUaGUgZnVuY3Rpb25zIGluIHRoaXMgbW9kdWxlIGtlZXAgdHJhY2sgb2YgZGVjbGFyZWQgdmFyaWFibGVzIGluIHRoZSBjdXJyZW50IHNjb3BlIGluIG9yZGVyIHRvIGRldGVjdCBkdXBsaWNhdGUgdmFyaWFibGUgbmFtZXMuCgogIHBwJDMuZW50ZXJTY29wZSA9IGZ1bmN0aW9uKGZsYWdzKSB7CiAgICB0aGlzLnNjb3BlU3RhY2sucHVzaChuZXcgU2NvcGUoZmxhZ3MpKTsKICB9OwoKICBwcCQzLmV4aXRTY29wZSA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5zY29wZVN0YWNrLnBvcCgpOwogIH07CgogIC8vIFRoZSBzcGVjIHNheXM6CiAgLy8gPiBBdCB0aGUgdG9wIGxldmVsIG9mIGEgZnVuY3Rpb24sIG9yIHNjcmlwdCwgZnVuY3Rpb24gZGVjbGFyYXRpb25zIGFyZQogIC8vID4gdHJlYXRlZCBsaWtlIHZhciBkZWNsYXJhdGlvbnMgcmF0aGVyIHRoYW4gbGlrZSBsZXhpY2FsIGRlY2xhcmF0aW9ucy4KICBwcCQzLnRyZWF0RnVuY3Rpb25zQXNWYXJJblNjb3BlID0gZnVuY3Rpb24oc2NvcGUpIHsKICAgIHJldHVybiAoc2NvcGUuZmxhZ3MgJiBTQ09QRV9GVU5DVElPTikgfHwgIXRoaXMuaW5Nb2R1bGUgJiYgKHNjb3BlLmZsYWdzICYgU0NPUEVfVE9QKQogIH07CgogIHBwJDMuZGVjbGFyZU5hbWUgPSBmdW5jdGlvbihuYW1lLCBiaW5kaW5nVHlwZSwgcG9zKSB7CiAgICB2YXIgcmVkZWNsYXJlZCA9IGZhbHNlOwogICAgaWYgKGJpbmRpbmdUeXBlID09PSBCSU5EX0xFWElDQUwpIHsKICAgICAgdmFyIHNjb3BlID0gdGhpcy5jdXJyZW50U2NvcGUoKTsKICAgICAgcmVkZWNsYXJlZCA9IHNjb3BlLmxleGljYWwuaW5kZXhPZihuYW1lKSA+IC0xIHx8IHNjb3BlLmZ1bmN0aW9ucy5pbmRleE9mKG5hbWUpID4gLTEgfHwgc2NvcGUudmFyLmluZGV4T2YobmFtZSkgPiAtMTsKICAgICAgc2NvcGUubGV4aWNhbC5wdXNoKG5hbWUpOwogICAgICBpZiAodGhpcy5pbk1vZHVsZSAmJiAoc2NvcGUuZmxhZ3MgJiBTQ09QRV9UT1ApKQogICAgICAgIHsgZGVsZXRlIHRoaXMudW5kZWZpbmVkRXhwb3J0c1tuYW1lXTsgfQogICAgfSBlbHNlIGlmIChiaW5kaW5nVHlwZSA9PT0gQklORF9TSU1QTEVfQ0FUQ0gpIHsKICAgICAgdmFyIHNjb3BlJDEgPSB0aGlzLmN1cnJlbnRTY29wZSgpOwogICAgICBzY29wZSQxLmxleGljYWwucHVzaChuYW1lKTsKICAgIH0gZWxzZSBpZiAoYmluZGluZ1R5cGUgPT09IEJJTkRfRlVOQ1RJT04pIHsKICAgICAgdmFyIHNjb3BlJDIgPSB0aGlzLmN1cnJlbnRTY29wZSgpOwogICAgICBpZiAodGhpcy50cmVhdEZ1bmN0aW9uc0FzVmFyKQogICAgICAgIHsgcmVkZWNsYXJlZCA9IHNjb3BlJDIubGV4aWNhbC5pbmRleE9mKG5hbWUpID4gLTE7IH0KICAgICAgZWxzZQogICAgICAgIHsgcmVkZWNsYXJlZCA9IHNjb3BlJDIubGV4aWNhbC5pbmRleE9mKG5hbWUpID4gLTEgfHwgc2NvcGUkMi52YXIuaW5kZXhPZihuYW1lKSA+IC0xOyB9CiAgICAgIHNjb3BlJDIuZnVuY3Rpb25zLnB1c2gobmFtZSk7CiAgICB9IGVsc2UgewogICAgICBmb3IgKHZhciBpID0gdGhpcy5zY29wZVN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgICAgdmFyIHNjb3BlJDMgPSB0aGlzLnNjb3BlU3RhY2tbaV07CiAgICAgICAgaWYgKHNjb3BlJDMubGV4aWNhbC5pbmRleE9mKG5hbWUpID4gLTEgJiYgISgoc2NvcGUkMy5mbGFncyAmIFNDT1BFX1NJTVBMRV9DQVRDSCkgJiYgc2NvcGUkMy5sZXhpY2FsWzBdID09PSBuYW1lKSB8fAogICAgICAgICAgICAhdGhpcy50cmVhdEZ1bmN0aW9uc0FzVmFySW5TY29wZShzY29wZSQzKSAmJiBzY29wZSQzLmZ1bmN0aW9ucy5pbmRleE9mKG5hbWUpID4gLTEpIHsKICAgICAgICAgIHJlZGVjbGFyZWQgPSB0cnVlOwogICAgICAgICAgYnJlYWsKICAgICAgICB9CiAgICAgICAgc2NvcGUkMy52YXIucHVzaChuYW1lKTsKICAgICAgICBpZiAodGhpcy5pbk1vZHVsZSAmJiAoc2NvcGUkMy5mbGFncyAmIFNDT1BFX1RPUCkpCiAgICAgICAgICB7IGRlbGV0ZSB0aGlzLnVuZGVmaW5lZEV4cG9ydHNbbmFtZV07IH0KICAgICAgICBpZiAoc2NvcGUkMy5mbGFncyAmIFNDT1BFX1ZBUikgeyBicmVhayB9CiAgICAgIH0KICAgIH0KICAgIGlmIChyZWRlY2xhcmVkKSB7IHRoaXMucmFpc2VSZWNvdmVyYWJsZShwb3MsICgiSWRlbnRpZmllciAnIiArIG5hbWUgKyAiJyBoYXMgYWxyZWFkeSBiZWVuIGRlY2xhcmVkIikpOyB9CiAgfTsKCiAgcHAkMy5jaGVja0xvY2FsRXhwb3J0ID0gZnVuY3Rpb24oaWQpIHsKICAgIC8vIHNjb3BlLmZ1bmN0aW9ucyBtdXN0IGJlIGVtcHR5IGFzIE1vZHVsZSBjb2RlIGlzIGFsd2F5cyBzdHJpY3QuCiAgICBpZiAodGhpcy5zY29wZVN0YWNrWzBdLmxleGljYWwuaW5kZXhPZihpZC5uYW1lKSA9PT0gLTEgJiYKICAgICAgICB0aGlzLnNjb3BlU3RhY2tbMF0udmFyLmluZGV4T2YoaWQubmFtZSkgPT09IC0xKSB7CiAgICAgIHRoaXMudW5kZWZpbmVkRXhwb3J0c1tpZC5uYW1lXSA9IGlkOwogICAgfQogIH07CgogIHBwJDMuY3VycmVudFNjb3BlID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5zY29wZVN0YWNrW3RoaXMuc2NvcGVTdGFjay5sZW5ndGggLSAxXQogIH07CgogIHBwJDMuY3VycmVudFZhclNjb3BlID0gZnVuY3Rpb24oKSB7CiAgICBmb3IgKHZhciBpID0gdGhpcy5zY29wZVN0YWNrLmxlbmd0aCAtIDE7OyBpLS0pIHsKICAgICAgdmFyIHNjb3BlID0gdGhpcy5zY29wZVN0YWNrW2ldOwogICAgICBpZiAoc2NvcGUuZmxhZ3MgJiBTQ09QRV9WQVIpIHsgcmV0dXJuIHNjb3BlIH0KICAgIH0KICB9OwoKICAvLyBDb3VsZCBiZSB1c2VmdWwgZm9yIGB0aGlzYCwgYG5ldy50YXJnZXRgLCBgc3VwZXIoKWAsIGBzdXBlci5wcm9wZXJ0eWAsIGFuZCBgc3VwZXJbcHJvcGVydHldYC4KICBwcCQzLmN1cnJlbnRUaGlzU2NvcGUgPSBmdW5jdGlvbigpIHsKICAgIGZvciAodmFyIGkgPSB0aGlzLnNjb3BlU3RhY2subGVuZ3RoIC0gMTs7IGktLSkgewogICAgICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlU3RhY2tbaV07CiAgICAgIGlmIChzY29wZS5mbGFncyAmIFNDT1BFX1ZBUiAmJiAhKHNjb3BlLmZsYWdzICYgU0NPUEVfQVJST1cpKSB7IHJldHVybiBzY29wZSB9CiAgICB9CiAgfTsKCiAgdmFyIE5vZGUgPSBmdW5jdGlvbiBOb2RlKHBhcnNlciwgcG9zLCBsb2MpIHsKICAgIHRoaXMudHlwZSA9ICIiOwogICAgdGhpcy5zdGFydCA9IHBvczsKICAgIHRoaXMuZW5kID0gMDsKICAgIGlmIChwYXJzZXIub3B0aW9ucy5sb2NhdGlvbnMpCiAgICAgIHsgdGhpcy5sb2MgPSBuZXcgU291cmNlTG9jYXRpb24ocGFyc2VyLCBsb2MpOyB9CiAgICBpZiAocGFyc2VyLm9wdGlvbnMuZGlyZWN0U291cmNlRmlsZSkKICAgICAgeyB0aGlzLnNvdXJjZUZpbGUgPSBwYXJzZXIub3B0aW9ucy5kaXJlY3RTb3VyY2VGaWxlOyB9CiAgICBpZiAocGFyc2VyLm9wdGlvbnMucmFuZ2VzKQogICAgICB7IHRoaXMucmFuZ2UgPSBbcG9zLCAwXTsgfQogIH07CgogIC8vIFN0YXJ0IGFuIEFTVCBub2RlLCBhdHRhY2hpbmcgYSBzdGFydCBvZmZzZXQuCgogIHZhciBwcCQyID0gUGFyc2VyLnByb3RvdHlwZTsKCiAgcHAkMi5zdGFydE5vZGUgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiBuZXcgTm9kZSh0aGlzLCB0aGlzLnN0YXJ0LCB0aGlzLnN0YXJ0TG9jKQogIH07CgogIHBwJDIuc3RhcnROb2RlQXQgPSBmdW5jdGlvbihwb3MsIGxvYykgewogICAgcmV0dXJuIG5ldyBOb2RlKHRoaXMsIHBvcywgbG9jKQogIH07CgogIC8vIEZpbmlzaCBhbiBBU1Qgbm9kZSwgYWRkaW5nIGB0eXBlYCBhbmQgYGVuZGAgcHJvcGVydGllcy4KCiAgZnVuY3Rpb24gZmluaXNoTm9kZUF0KG5vZGUsIHR5cGUsIHBvcywgbG9jKSB7CiAgICBub2RlLnR5cGUgPSB0eXBlOwogICAgbm9kZS5lbmQgPSBwb3M7CiAgICBpZiAodGhpcy5vcHRpb25zLmxvY2F0aW9ucykKICAgICAgeyBub2RlLmxvYy5lbmQgPSBsb2M7IH0KICAgIGlmICh0aGlzLm9wdGlvbnMucmFuZ2VzKQogICAgICB7IG5vZGUucmFuZ2VbMV0gPSBwb3M7IH0KICAgIHJldHVybiBub2RlCiAgfQoKICBwcCQyLmZpbmlzaE5vZGUgPSBmdW5jdGlvbihub2RlLCB0eXBlKSB7CiAgICByZXR1cm4gZmluaXNoTm9kZUF0LmNhbGwodGhpcywgbm9kZSwgdHlwZSwgdGhpcy5sYXN0VG9rRW5kLCB0aGlzLmxhc3RUb2tFbmRMb2MpCiAgfTsKCiAgLy8gRmluaXNoIG5vZGUgYXQgZ2l2ZW4gcG9zaXRpb24KCiAgcHAkMi5maW5pc2hOb2RlQXQgPSBmdW5jdGlvbihub2RlLCB0eXBlLCBwb3MsIGxvYykgewogICAgcmV0dXJuIGZpbmlzaE5vZGVBdC5jYWxsKHRoaXMsIG5vZGUsIHR5cGUsIHBvcywgbG9jKQogIH07CgogIHBwJDIuY29weU5vZGUgPSBmdW5jdGlvbihub2RlKSB7CiAgICB2YXIgbmV3Tm9kZSA9IG5ldyBOb2RlKHRoaXMsIG5vZGUuc3RhcnQsIHRoaXMuc3RhcnRMb2MpOwogICAgZm9yICh2YXIgcHJvcCBpbiBub2RlKSB7IG5ld05vZGVbcHJvcF0gPSBub2RlW3Byb3BdOyB9CiAgICByZXR1cm4gbmV3Tm9kZQogIH07CgogIC8vIFRoaXMgZmlsZSBjb250YWlucyBVbmljb2RlIHByb3BlcnRpZXMgZXh0cmFjdGVkIGZyb20gdGhlIEVDTUFTY3JpcHQKICAvLyBzcGVjaWZpY2F0aW9uLiBUaGUgbGlzdHMgYXJlIGV4dHJhY3RlZCBsaWtlIHNvOgogIC8vICQkKCcjdGFibGUtYmluYXJ5LXVuaWNvZGUtcHJvcGVydGllcyA+IGZpZ3VyZSA+IHRhYmxlID4gdGJvZHkgPiB0ciA+IHRkOm50aC1jaGlsZCgxKSBjb2RlJykubWFwKGVsID0+IGVsLmlubmVyVGV4dCkKCiAgLy8gI3RhYmxlLWJpbmFyeS11bmljb2RlLXByb3BlcnRpZXMKICB2YXIgZWNtYTlCaW5hcnlQcm9wZXJ0aWVzID0gIkFTQ0lJIEFTQ0lJX0hleF9EaWdpdCBBSGV4IEFscGhhYmV0aWMgQWxwaGEgQW55IEFzc2lnbmVkIEJpZGlfQ29udHJvbCBCaWRpX0MgQmlkaV9NaXJyb3JlZCBCaWRpX00gQ2FzZV9JZ25vcmFibGUgQ0kgQ2FzZWQgQ2hhbmdlc19XaGVuX0Nhc2Vmb2xkZWQgQ1dDRiBDaGFuZ2VzX1doZW5fQ2FzZW1hcHBlZCBDV0NNIENoYW5nZXNfV2hlbl9Mb3dlcmNhc2VkIENXTCBDaGFuZ2VzX1doZW5fTkZLQ19DYXNlZm9sZGVkIENXS0NGIENoYW5nZXNfV2hlbl9UaXRsZWNhc2VkIENXVCBDaGFuZ2VzX1doZW5fVXBwZXJjYXNlZCBDV1UgRGFzaCBEZWZhdWx0X0lnbm9yYWJsZV9Db2RlX1BvaW50IERJIERlcHJlY2F0ZWQgRGVwIERpYWNyaXRpYyBEaWEgRW1vamkgRW1vamlfQ29tcG9uZW50IEVtb2ppX01vZGlmaWVyIEVtb2ppX01vZGlmaWVyX0Jhc2UgRW1vamlfUHJlc2VudGF0aW9uIEV4dGVuZGVyIEV4dCBHcmFwaGVtZV9CYXNlIEdyX0Jhc2UgR3JhcGhlbWVfRXh0ZW5kIEdyX0V4dCBIZXhfRGlnaXQgSGV4IElEU19CaW5hcnlfT3BlcmF0b3IgSURTQiBJRFNfVHJpbmFyeV9PcGVyYXRvciBJRFNUIElEX0NvbnRpbnVlIElEQyBJRF9TdGFydCBJRFMgSWRlb2dyYXBoaWMgSWRlbyBKb2luX0NvbnRyb2wgSm9pbl9DIExvZ2ljYWxfT3JkZXJfRXhjZXB0aW9uIExPRSBMb3dlcmNhc2UgTG93ZXIgTWF0aCBOb25jaGFyYWN0ZXJfQ29kZV9Qb2ludCBOQ2hhciBQYXR0ZXJuX1N5bnRheCBQYXRfU3luIFBhdHRlcm5fV2hpdGVfU3BhY2UgUGF0X1dTIFF1b3RhdGlvbl9NYXJrIFFNYXJrIFJhZGljYWwgUmVnaW9uYWxfSW5kaWNhdG9yIFJJIFNlbnRlbmNlX1Rlcm1pbmFsIFNUZXJtIFNvZnRfRG90dGVkIFNEIFRlcm1pbmFsX1B1bmN0dWF0aW9uIFRlcm0gVW5pZmllZF9JZGVvZ3JhcGggVUlkZW8gVXBwZXJjYXNlIFVwcGVyIFZhcmlhdGlvbl9TZWxlY3RvciBWUyBXaGl0ZV9TcGFjZSBzcGFjZSBYSURfQ29udGludWUgWElEQyBYSURfU3RhcnQgWElEUyI7CiAgdmFyIGVjbWExMEJpbmFyeVByb3BlcnRpZXMgPSBlY21hOUJpbmFyeVByb3BlcnRpZXMgKyAiIEV4dGVuZGVkX1BpY3RvZ3JhcGhpYyI7CiAgdmFyIGVjbWExMUJpbmFyeVByb3BlcnRpZXMgPSBlY21hMTBCaW5hcnlQcm9wZXJ0aWVzOwogIHZhciBlY21hMTJCaW5hcnlQcm9wZXJ0aWVzID0gZWNtYTExQmluYXJ5UHJvcGVydGllcyArICIgRUJhc2UgRUNvbXAgRU1vZCBFUHJlcyBFeHRQaWN0IjsKICB2YXIgZWNtYTEzQmluYXJ5UHJvcGVydGllcyA9IGVjbWExMkJpbmFyeVByb3BlcnRpZXM7CiAgdmFyIHVuaWNvZGVCaW5hcnlQcm9wZXJ0aWVzID0gewogICAgOTogZWNtYTlCaW5hcnlQcm9wZXJ0aWVzLAogICAgMTA6IGVjbWExMEJpbmFyeVByb3BlcnRpZXMsCiAgICAxMTogZWNtYTExQmluYXJ5UHJvcGVydGllcywKICAgIDEyOiBlY21hMTJCaW5hcnlQcm9wZXJ0aWVzLAogICAgMTM6IGVjbWExM0JpbmFyeVByb3BlcnRpZXMKICB9OwoKICAvLyAjdGFibGUtdW5pY29kZS1nZW5lcmFsLWNhdGVnb3J5LXZhbHVlcwogIHZhciB1bmljb2RlR2VuZXJhbENhdGVnb3J5VmFsdWVzID0gIkNhc2VkX0xldHRlciBMQyBDbG9zZV9QdW5jdHVhdGlvbiBQZSBDb25uZWN0b3JfUHVuY3R1YXRpb24gUGMgQ29udHJvbCBDYyBjbnRybCBDdXJyZW5jeV9TeW1ib2wgU2MgRGFzaF9QdW5jdHVhdGlvbiBQZCBEZWNpbWFsX051bWJlciBOZCBkaWdpdCBFbmNsb3NpbmdfTWFyayBNZSBGaW5hbF9QdW5jdHVhdGlvbiBQZiBGb3JtYXQgQ2YgSW5pdGlhbF9QdW5jdHVhdGlvbiBQaSBMZXR0ZXIgTCBMZXR0ZXJfTnVtYmVyIE5sIExpbmVfU2VwYXJhdG9yIFpsIExvd2VyY2FzZV9MZXR0ZXIgTGwgTWFyayBNIENvbWJpbmluZ19NYXJrIE1hdGhfU3ltYm9sIFNtIE1vZGlmaWVyX0xldHRlciBMbSBNb2RpZmllcl9TeW1ib2wgU2sgTm9uc3BhY2luZ19NYXJrIE1uIE51bWJlciBOIE9wZW5fUHVuY3R1YXRpb24gUHMgT3RoZXIgQyBPdGhlcl9MZXR0ZXIgTG8gT3RoZXJfTnVtYmVyIE5vIE90aGVyX1B1bmN0dWF0aW9uIFBvIE90aGVyX1N5bWJvbCBTbyBQYXJhZ3JhcGhfU2VwYXJhdG9yIFpwIFByaXZhdGVfVXNlIENvIFB1bmN0dWF0aW9uIFAgcHVuY3QgU2VwYXJhdG9yIFogU3BhY2VfU2VwYXJhdG9yIFpzIFNwYWNpbmdfTWFyayBNYyBTdXJyb2dhdGUgQ3MgU3ltYm9sIFMgVGl0bGVjYXNlX0xldHRlciBMdCBVbmFzc2lnbmVkIENuIFVwcGVyY2FzZV9MZXR0ZXIgTHUiOwoKICAvLyAjdGFibGUtdW5pY29kZS1zY3JpcHQtdmFsdWVzCiAgdmFyIGVjbWE5U2NyaXB0VmFsdWVzID0gIkFkbGFtIEFkbG0gQWhvbSBBbmF0b2xpYW5fSGllcm9nbHlwaHMgSGx1dyBBcmFiaWMgQXJhYiBBcm1lbmlhbiBBcm1uIEF2ZXN0YW4gQXZzdCBCYWxpbmVzZSBCYWxpIEJhbXVtIEJhbXUgQmFzc2FfVmFoIEJhc3MgQmF0YWsgQmF0ayBCZW5nYWxpIEJlbmcgQmhhaWtzdWtpIEJoa3MgQm9wb21vZm8gQm9wbyBCcmFobWkgQnJhaCBCcmFpbGxlIEJyYWkgQnVnaW5lc2UgQnVnaSBCdWhpZCBCdWhkIENhbmFkaWFuX0Fib3JpZ2luYWwgQ2FucyBDYXJpYW4gQ2FyaSBDYXVjYXNpYW5fQWxiYW5pYW4gQWdoYiBDaGFrbWEgQ2FrbSBDaGFtIENoYW0gQ2hlcm9rZWUgQ2hlciBDb21tb24gWnl5eSBDb3B0aWMgQ29wdCBRYWFjIEN1bmVpZm9ybSBYc3V4IEN5cHJpb3QgQ3BydCBDeXJpbGxpYyBDeXJsIERlc2VyZXQgRHNydCBEZXZhbmFnYXJpIERldmEgRHVwbG95YW4gRHVwbCBFZ3lwdGlhbl9IaWVyb2dseXBocyBFZ3lwIEVsYmFzYW4gRWxiYSBFdGhpb3BpYyBFdGhpIEdlb3JnaWFuIEdlb3IgR2xhZ29saXRpYyBHbGFnIEdvdGhpYyBHb3RoIEdyYW50aGEgR3JhbiBHcmVlayBHcmVrIEd1amFyYXRpIEd1anIgR3VybXVraGkgR3VydSBIYW4gSGFuaSBIYW5ndWwgSGFuZyBIYW51bm9vIEhhbm8gSGF0cmFuIEhhdHIgSGVicmV3IEhlYnIgSGlyYWdhbmEgSGlyYSBJbXBlcmlhbF9BcmFtYWljIEFybWkgSW5oZXJpdGVkIFppbmggUWFhaSBJbnNjcmlwdGlvbmFsX1BhaGxhdmkgUGhsaSBJbnNjcmlwdGlvbmFsX1BhcnRoaWFuIFBydGkgSmF2YW5lc2UgSmF2YSBLYWl0aGkgS3RoaSBLYW5uYWRhIEtuZGEgS2F0YWthbmEgS2FuYSBLYXlhaF9MaSBLYWxpIEtoYXJvc2h0aGkgS2hhciBLaG1lciBLaG1yIEtob2praSBLaG9qIEtodWRhd2FkaSBTaW5kIExhbyBMYW9vIExhdGluIExhdG4gTGVwY2hhIExlcGMgTGltYnUgTGltYiBMaW5lYXJfQSBMaW5hIExpbmVhcl9CIExpbmIgTGlzdSBMaXN1IEx5Y2lhbiBMeWNpIEx5ZGlhbiBMeWRpIE1haGFqYW5pIE1haGogTWFsYXlhbGFtIE1seW0gTWFuZGFpYyBNYW5kIE1hbmljaGFlYW4gTWFuaSBNYXJjaGVuIE1hcmMgTWFzYXJhbV9Hb25kaSBHb25tIE1lZXRlaV9NYXllayBNdGVpIE1lbmRlX0tpa2FrdWkgTWVuZCBNZXJvaXRpY19DdXJzaXZlIE1lcmMgTWVyb2l0aWNfSGllcm9nbHlwaHMgTWVybyBNaWFvIFBscmQgTW9kaSBNb25nb2xpYW4gTW9uZyBNcm8gTXJvbyBNdWx0YW5pIE11bHQgTXlhbm1hciBNeW1yIE5hYmF0YWVhbiBOYmF0IE5ld19UYWlfTHVlIFRhbHUgTmV3YSBOZXdhIE5rbyBOa29vIE51c2h1IE5zaHUgT2doYW0gT2dhbSBPbF9DaGlraSBPbGNrIE9sZF9IdW5nYXJpYW4gSHVuZyBPbGRfSXRhbGljIEl0YWwgT2xkX05vcnRoX0FyYWJpYW4gTmFyYiBPbGRfUGVybWljIFBlcm0gT2xkX1BlcnNpYW4gWHBlbyBPbGRfU291dGhfQXJhYmlhbiBTYXJiIE9sZF9UdXJraWMgT3JraCBPcml5YSBPcnlhIE9zYWdlIE9zZ2UgT3NtYW55YSBPc21hIFBhaGF3aF9IbW9uZyBIbW5nIFBhbG15cmVuZSBQYWxtIFBhdV9DaW5fSGF1IFBhdWMgUGhhZ3NfUGEgUGhhZyBQaG9lbmljaWFuIFBobnggUHNhbHRlcl9QYWhsYXZpIFBobHAgUmVqYW5nIFJqbmcgUnVuaWMgUnVuciBTYW1hcml0YW4gU2FtciBTYXVyYXNodHJhIFNhdXIgU2hhcmFkYSBTaHJkIFNoYXZpYW4gU2hhdyBTaWRkaGFtIFNpZGQgU2lnbldyaXRpbmcgU2dudyBTaW5oYWxhIFNpbmggU29yYV9Tb21wZW5nIFNvcmEgU295b21ibyBTb3lvIFN1bmRhbmVzZSBTdW5kIFN5bG90aV9OYWdyaSBTeWxvIFN5cmlhYyBTeXJjIFRhZ2Fsb2cgVGdsZyBUYWdiYW53YSBUYWdiIFRhaV9MZSBUYWxlIFRhaV9UaGFtIExhbmEgVGFpX1ZpZXQgVGF2dCBUYWtyaSBUYWtyIFRhbWlsIFRhbWwgVGFuZ3V0IFRhbmcgVGVsdWd1IFRlbHUgVGhhYW5hIFRoYWEgVGhhaSBUaGFpIFRpYmV0YW4gVGlidCBUaWZpbmFnaCBUZm5nIFRpcmh1dGEgVGlyaCBVZ2FyaXRpYyBVZ2FyIFZhaSBWYWlpIFdhcmFuZ19DaXRpIFdhcmEgWWkgWWlpaSBaYW5hYmF6YXJfU3F1YXJlIFphbmIiOwogIHZhciBlY21hMTBTY3JpcHRWYWx1ZXMgPSBlY21hOVNjcmlwdFZhbHVlcyArICIgRG9ncmEgRG9nciBHdW5qYWxhX0dvbmRpIEdvbmcgSGFuaWZpX1JvaGluZ3lhIFJvaGcgTWFrYXNhciBNYWthIE1lZGVmYWlkcmluIE1lZGYgT2xkX1NvZ2RpYW4gU29nbyBTb2dkaWFuIFNvZ2QiOwogIHZhciBlY21hMTFTY3JpcHRWYWx1ZXMgPSBlY21hMTBTY3JpcHRWYWx1ZXMgKyAiIEVseW1haWMgRWx5bSBOYW5kaW5hZ2FyaSBOYW5kIE55aWFrZW5nX1B1YWNodWVfSG1vbmcgSG1ucCBXYW5jaG8gV2NobyI7CiAgdmFyIGVjbWExMlNjcmlwdFZhbHVlcyA9IGVjbWExMVNjcmlwdFZhbHVlcyArICIgQ2hvcmFzbWlhbiBDaHJzIERpYWsgRGl2ZXNfQWt1cnUgS2hpdGFuX1NtYWxsX1NjcmlwdCBLaXRzIFllemkgWWV6aWRpIjsKICB2YXIgZWNtYTEzU2NyaXB0VmFsdWVzID0gZWNtYTEyU2NyaXB0VmFsdWVzICsgIiBDeXByb19NaW5vYW4gQ3BtbiBPbGRfVXlnaHVyIE91Z3IgVGFuZ3NhIFRuc2EgVG90byBWaXRoa3VxaSBWaXRoIjsKICB2YXIgdW5pY29kZVNjcmlwdFZhbHVlcyA9IHsKICAgIDk6IGVjbWE5U2NyaXB0VmFsdWVzLAogICAgMTA6IGVjbWExMFNjcmlwdFZhbHVlcywKICAgIDExOiBlY21hMTFTY3JpcHRWYWx1ZXMsCiAgICAxMjogZWNtYTEyU2NyaXB0VmFsdWVzLAogICAgMTM6IGVjbWExM1NjcmlwdFZhbHVlcwogIH07CgogIHZhciBkYXRhID0ge307CiAgZnVuY3Rpb24gYnVpbGRVbmljb2RlRGF0YShlY21hVmVyc2lvbikgewogICAgdmFyIGQgPSBkYXRhW2VjbWFWZXJzaW9uXSA9IHsKICAgICAgYmluYXJ5OiB3b3Jkc1JlZ2V4cCh1bmljb2RlQmluYXJ5UHJvcGVydGllc1tlY21hVmVyc2lvbl0gKyAiICIgKyB1bmljb2RlR2VuZXJhbENhdGVnb3J5VmFsdWVzKSwKICAgICAgbm9uQmluYXJ5OiB7CiAgICAgICAgR2VuZXJhbF9DYXRlZ29yeTogd29yZHNSZWdleHAodW5pY29kZUdlbmVyYWxDYXRlZ29yeVZhbHVlcyksCiAgICAgICAgU2NyaXB0OiB3b3Jkc1JlZ2V4cCh1bmljb2RlU2NyaXB0VmFsdWVzW2VjbWFWZXJzaW9uXSkKICAgICAgfQogICAgfTsKICAgIGQubm9uQmluYXJ5LlNjcmlwdF9FeHRlbnNpb25zID0gZC5ub25CaW5hcnkuU2NyaXB0OwoKICAgIGQubm9uQmluYXJ5LmdjID0gZC5ub25CaW5hcnkuR2VuZXJhbF9DYXRlZ29yeTsKICAgIGQubm9uQmluYXJ5LnNjID0gZC5ub25CaW5hcnkuU2NyaXB0OwogICAgZC5ub25CaW5hcnkuc2N4ID0gZC5ub25CaW5hcnkuU2NyaXB0X0V4dGVuc2lvbnM7CiAgfQoKICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IFs5LCAxMCwgMTEsIDEyLCAxM107IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7CiAgICB2YXIgZWNtYVZlcnNpb24gPSBsaXN0W2ldOwoKICAgIGJ1aWxkVW5pY29kZURhdGEoZWNtYVZlcnNpb24pOwogIH0KCiAgdmFyIHBwJDEgPSBQYXJzZXIucHJvdG90eXBlOwoKICB2YXIgUmVnRXhwVmFsaWRhdGlvblN0YXRlID0gZnVuY3Rpb24gUmVnRXhwVmFsaWRhdGlvblN0YXRlKHBhcnNlcikgewogICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7CiAgICB0aGlzLnZhbGlkRmxhZ3MgPSAiZ2ltIiArIChwYXJzZXIub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2ID8gInV5IiA6ICIiKSArIChwYXJzZXIub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5ID8gInMiIDogIiIpICsgKHBhcnNlci5vcHRpb25zLmVjbWFWZXJzaW9uID49IDEzID8gImQiIDogIiIpOwogICAgdGhpcy51bmljb2RlUHJvcGVydGllcyA9IGRhdGFbcGFyc2VyLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTMgPyAxMyA6IHBhcnNlci5vcHRpb25zLmVjbWFWZXJzaW9uXTsKICAgIHRoaXMuc291cmNlID0gIiI7CiAgICB0aGlzLmZsYWdzID0gIiI7CiAgICB0aGlzLnN0YXJ0ID0gMDsKICAgIHRoaXMuc3dpdGNoVSA9IGZhbHNlOwogICAgdGhpcy5zd2l0Y2hOID0gZmFsc2U7CiAgICB0aGlzLnBvcyA9IDA7CiAgICB0aGlzLmxhc3RJbnRWYWx1ZSA9IDA7CiAgICB0aGlzLmxhc3RTdHJpbmdWYWx1ZSA9ICIiOwogICAgdGhpcy5sYXN0QXNzZXJ0aW9uSXNRdWFudGlmaWFibGUgPSBmYWxzZTsKICAgIHRoaXMubnVtQ2FwdHVyaW5nUGFyZW5zID0gMDsKICAgIHRoaXMubWF4QmFja1JlZmVyZW5jZSA9IDA7CiAgICB0aGlzLmdyb3VwTmFtZXMgPSBbXTsKICAgIHRoaXMuYmFja1JlZmVyZW5jZU5hbWVzID0gW107CiAgfTsKCiAgUmVnRXhwVmFsaWRhdGlvblN0YXRlLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0IChzdGFydCwgcGF0dGVybiwgZmxhZ3MpIHsKICAgIHZhciB1bmljb2RlID0gZmxhZ3MuaW5kZXhPZigidSIpICE9PSAtMTsKICAgIHRoaXMuc3RhcnQgPSBzdGFydCB8IDA7CiAgICB0aGlzLnNvdXJjZSA9IHBhdHRlcm4gKyAiIjsKICAgIHRoaXMuZmxhZ3MgPSBmbGFnczsKICAgIHRoaXMuc3dpdGNoVSA9IHVuaWNvZGUgJiYgdGhpcy5wYXJzZXIub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2OwogICAgdGhpcy5zd2l0Y2hOID0gdW5pY29kZSAmJiB0aGlzLnBhcnNlci5vcHRpb25zLmVjbWFWZXJzaW9uID49IDk7CiAgfTsKCiAgUmVnRXhwVmFsaWRhdGlvblN0YXRlLnByb3RvdHlwZS5yYWlzZSA9IGZ1bmN0aW9uIHJhaXNlIChtZXNzYWdlKSB7CiAgICB0aGlzLnBhcnNlci5yYWlzZVJlY292ZXJhYmxlKHRoaXMuc3RhcnQsICgiSW52YWxpZCByZWd1bGFyIGV4cHJlc3Npb246IC8iICsgKHRoaXMuc291cmNlKSArICIvOiAiICsgbWVzc2FnZSkpOwogIH07CgogIC8vIElmIHUgZmxhZyBpcyBnaXZlbiwgdGhpcyByZXR1cm5zIHRoZSBjb2RlIHBvaW50IGF0IHRoZSBpbmRleCAoaXQgY29tYmluZXMgYSBzdXJyb2dhdGUgcGFpcikuCiAgLy8gT3RoZXJ3aXNlLCB0aGlzIHJldHVybnMgdGhlIGNvZGUgdW5pdCBvZiB0aGUgaW5kZXggKGNhbiBiZSBhIHBhcnQgb2YgYSBzdXJyb2dhdGUgcGFpcikuCiAgUmVnRXhwVmFsaWRhdGlvblN0YXRlLnByb3RvdHlwZS5hdCA9IGZ1bmN0aW9uIGF0IChpLCBmb3JjZVUpIHsKICAgICAgaWYgKCBmb3JjZVUgPT09IHZvaWQgMCApIGZvcmNlVSA9IGZhbHNlOwoKICAgIHZhciBzID0gdGhpcy5zb3VyY2U7CiAgICB2YXIgbCA9IHMubGVuZ3RoOwogICAgaWYgKGkgPj0gbCkgewogICAgICByZXR1cm4gLTEKICAgIH0KICAgIHZhciBjID0gcy5jaGFyQ29kZUF0KGkpOwogICAgaWYgKCEoZm9yY2VVIHx8IHRoaXMuc3dpdGNoVSkgfHwgYyA8PSAweEQ3RkYgfHwgYyA+PSAweEUwMDAgfHwgaSArIDEgPj0gbCkgewogICAgICByZXR1cm4gYwogICAgfQogICAgdmFyIG5leHQgPSBzLmNoYXJDb2RlQXQoaSArIDEpOwogICAgcmV0dXJuIG5leHQgPj0gMHhEQzAwICYmIG5leHQgPD0gMHhERkZGID8gKGMgPDwgMTApICsgbmV4dCAtIDB4MzVGREMwMCA6IGMKICB9OwoKICBSZWdFeHBWYWxpZGF0aW9uU3RhdGUucHJvdG90eXBlLm5leHRJbmRleCA9IGZ1bmN0aW9uIG5leHRJbmRleCAoaSwgZm9yY2VVKSB7CiAgICAgIGlmICggZm9yY2VVID09PSB2b2lkIDAgKSBmb3JjZVUgPSBmYWxzZTsKCiAgICB2YXIgcyA9IHRoaXMuc291cmNlOwogICAgdmFyIGwgPSBzLmxlbmd0aDsKICAgIGlmIChpID49IGwpIHsKICAgICAgcmV0dXJuIGwKICAgIH0KICAgIHZhciBjID0gcy5jaGFyQ29kZUF0KGkpLCBuZXh0OwogICAgaWYgKCEoZm9yY2VVIHx8IHRoaXMuc3dpdGNoVSkgfHwgYyA8PSAweEQ3RkYgfHwgYyA+PSAweEUwMDAgfHwgaSArIDEgPj0gbCB8fAogICAgICAgIChuZXh0ID0gcy5jaGFyQ29kZUF0KGkgKyAxKSkgPCAweERDMDAgfHwgbmV4dCA+IDB4REZGRikgewogICAgICByZXR1cm4gaSArIDEKICAgIH0KICAgIHJldHVybiBpICsgMgogIH07CgogIFJlZ0V4cFZhbGlkYXRpb25TdGF0ZS5wcm90b3R5cGUuY3VycmVudCA9IGZ1bmN0aW9uIGN1cnJlbnQgKGZvcmNlVSkgewogICAgICBpZiAoIGZvcmNlVSA9PT0gdm9pZCAwICkgZm9yY2VVID0gZmFsc2U7CgogICAgcmV0dXJuIHRoaXMuYXQodGhpcy5wb3MsIGZvcmNlVSkKICB9OwoKICBSZWdFeHBWYWxpZGF0aW9uU3RhdGUucHJvdG90eXBlLmxvb2thaGVhZCA9IGZ1bmN0aW9uIGxvb2thaGVhZCAoZm9yY2VVKSB7CiAgICAgIGlmICggZm9yY2VVID09PSB2b2lkIDAgKSBmb3JjZVUgPSBmYWxzZTsKCiAgICByZXR1cm4gdGhpcy5hdCh0aGlzLm5leHRJbmRleCh0aGlzLnBvcywgZm9yY2VVKSwgZm9yY2VVKQogIH07CgogIFJlZ0V4cFZhbGlkYXRpb25TdGF0ZS5wcm90b3R5cGUuYWR2YW5jZSA9IGZ1bmN0aW9uIGFkdmFuY2UgKGZvcmNlVSkgewogICAgICBpZiAoIGZvcmNlVSA9PT0gdm9pZCAwICkgZm9yY2VVID0gZmFsc2U7CgogICAgdGhpcy5wb3MgPSB0aGlzLm5leHRJbmRleCh0aGlzLnBvcywgZm9yY2VVKTsKICB9OwoKICBSZWdFeHBWYWxpZGF0aW9uU3RhdGUucHJvdG90eXBlLmVhdCA9IGZ1bmN0aW9uIGVhdCAoY2gsIGZvcmNlVSkgewogICAgICBpZiAoIGZvcmNlVSA9PT0gdm9pZCAwICkgZm9yY2VVID0gZmFsc2U7CgogICAgaWYgKHRoaXMuY3VycmVudChmb3JjZVUpID09PSBjaCkgewogICAgICB0aGlzLmFkdmFuY2UoZm9yY2VVKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CgogIGZ1bmN0aW9uIGNvZGVQb2ludFRvU3RyaW5nJDEoY2gpIHsKICAgIGlmIChjaCA8PSAweEZGRkYpIHsgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2gpIH0KICAgIGNoIC09IDB4MTAwMDA7CiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSgoY2ggPj4gMTApICsgMHhEODAwLCAoY2ggJiAweDAzRkYpICsgMHhEQzAwKQogIH0KCiAgLyoqCiAgICogVmFsaWRhdGUgdGhlIGZsYWdzIHBhcnQgb2YgYSBnaXZlbiBSZWdFeHBMaXRlcmFsLgogICAqCiAgICogQHBhcmFtIHtSZWdFeHBWYWxpZGF0aW9uU3RhdGV9IHN0YXRlIFRoZSBzdGF0ZSB0byB2YWxpZGF0ZSBSZWdFeHAuCiAgICogQHJldHVybnMge3ZvaWR9CiAgICovCiAgcHAkMS52YWxpZGF0ZVJlZ0V4cEZsYWdzID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciB2YWxpZEZsYWdzID0gc3RhdGUudmFsaWRGbGFnczsKICAgIHZhciBmbGFncyA9IHN0YXRlLmZsYWdzOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmxhZ3MubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGZsYWcgPSBmbGFncy5jaGFyQXQoaSk7CiAgICAgIGlmICh2YWxpZEZsYWdzLmluZGV4T2YoZmxhZykgPT09IC0xKSB7CiAgICAgICAgdGhpcy5yYWlzZShzdGF0ZS5zdGFydCwgIkludmFsaWQgcmVndWxhciBleHByZXNzaW9uIGZsYWciKTsKICAgICAgfQogICAgICBpZiAoZmxhZ3MuaW5kZXhPZihmbGFnLCBpICsgMSkgPiAtMSkgewogICAgICAgIHRoaXMucmFpc2Uoc3RhdGUuc3RhcnQsICJEdXBsaWNhdGUgcmVndWxhciBleHByZXNzaW9uIGZsYWciKTsKICAgICAgfQogICAgfQogIH07CgogIC8qKgogICAqIFZhbGlkYXRlIHRoZSBwYXR0ZXJuIHBhcnQgb2YgYSBnaXZlbiBSZWdFeHBMaXRlcmFsLgogICAqCiAgICogQHBhcmFtIHtSZWdFeHBWYWxpZGF0aW9uU3RhdGV9IHN0YXRlIFRoZSBzdGF0ZSB0byB2YWxpZGF0ZSBSZWdFeHAuCiAgICogQHJldHVybnMge3ZvaWR9CiAgICovCiAgcHAkMS52YWxpZGF0ZVJlZ0V4cFBhdHRlcm4gPSBmdW5jdGlvbihzdGF0ZSkgewogICAgdGhpcy5yZWdleHBfcGF0dGVybihzdGF0ZSk7CgogICAgLy8gVGhlIGdvYWwgc3ltYm9sIGZvciB0aGUgcGFyc2UgaXMgfFBhdHRlcm5bflUsIH5OXXwuIElmIHRoZSByZXN1bHQgb2YKICAgIC8vIHBhcnNpbmcgY29udGFpbnMgYSB8R3JvdXBOYW1lfCwgcmVwYXJzZSB3aXRoIHRoZSBnb2FsIHN5bWJvbAogICAgLy8gfFBhdHRlcm5bflUsICtOXXwgYW5kIHVzZSB0aGlzIHJlc3VsdCBpbnN0ZWFkLiBUaHJvdyBhICpTeW50YXhFcnJvcioKICAgIC8vIGV4Y2VwdGlvbiBpZiBfUF8gZGlkIG5vdCBjb25mb3JtIHRvIHRoZSBncmFtbWFyLCBpZiBhbnkgZWxlbWVudHMgb2YgX1BfCiAgICAvLyB3ZXJlIG5vdCBtYXRjaGVkIGJ5IHRoZSBwYXJzZSwgb3IgaWYgYW55IEVhcmx5IEVycm9yIGNvbmRpdGlvbnMgZXhpc3QuCiAgICBpZiAoIXN0YXRlLnN3aXRjaE4gJiYgdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDkgJiYgc3RhdGUuZ3JvdXBOYW1lcy5sZW5ndGggPiAwKSB7CiAgICAgIHN0YXRlLnN3aXRjaE4gPSB0cnVlOwogICAgICB0aGlzLnJlZ2V4cF9wYXR0ZXJuKHN0YXRlKTsKICAgIH0KICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1QYXR0ZXJuCiAgcHAkMS5yZWdleHBfcGF0dGVybiA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICBzdGF0ZS5wb3MgPSAwOwogICAgc3RhdGUubGFzdEludFZhbHVlID0gMDsKICAgIHN0YXRlLmxhc3RTdHJpbmdWYWx1ZSA9ICIiOwogICAgc3RhdGUubGFzdEFzc2VydGlvbklzUXVhbnRpZmlhYmxlID0gZmFsc2U7CiAgICBzdGF0ZS5udW1DYXB0dXJpbmdQYXJlbnMgPSAwOwogICAgc3RhdGUubWF4QmFja1JlZmVyZW5jZSA9IDA7CiAgICBzdGF0ZS5ncm91cE5hbWVzLmxlbmd0aCA9IDA7CiAgICBzdGF0ZS5iYWNrUmVmZXJlbmNlTmFtZXMubGVuZ3RoID0gMDsKCiAgICB0aGlzLnJlZ2V4cF9kaXNqdW5jdGlvbihzdGF0ZSk7CgogICAgaWYgKHN0YXRlLnBvcyAhPT0gc3RhdGUuc291cmNlLmxlbmd0aCkgewogICAgICAvLyBNYWtlIHRoZSBzYW1lIG1lc3NhZ2VzIGFzIFY4LgogICAgICBpZiAoc3RhdGUuZWF0KDB4MjkgLyogKSAqLykpIHsKICAgICAgICBzdGF0ZS5yYWlzZSgiVW5tYXRjaGVkICcpJyIpOwogICAgICB9CiAgICAgIGlmIChzdGF0ZS5lYXQoMHg1RCAvKiBdICovKSB8fCBzdGF0ZS5lYXQoMHg3RCAvKiB9ICovKSkgewogICAgICAgIHN0YXRlLnJhaXNlKCJMb25lIHF1YW50aWZpZXIgYnJhY2tldHMiKTsKICAgICAgfQogICAgfQogICAgaWYgKHN0YXRlLm1heEJhY2tSZWZlcmVuY2UgPiBzdGF0ZS5udW1DYXB0dXJpbmdQYXJlbnMpIHsKICAgICAgc3RhdGUucmFpc2UoIkludmFsaWQgZXNjYXBlIik7CiAgICB9CiAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IHN0YXRlLmJhY2tSZWZlcmVuY2VOYW1lczsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgdmFyIG5hbWUgPSBsaXN0W2ldOwoKICAgICAgaWYgKHN0YXRlLmdyb3VwTmFtZXMuaW5kZXhPZihuYW1lKSA9PT0gLTEpIHsKICAgICAgICBzdGF0ZS5yYWlzZSgiSW52YWxpZCBuYW1lZCBjYXB0dXJlIHJlZmVyZW5jZWQiKTsKICAgICAgfQogICAgfQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLURpc2p1bmN0aW9uCiAgcHAkMS5yZWdleHBfZGlzanVuY3Rpb24gPSBmdW5jdGlvbihzdGF0ZSkgewogICAgdGhpcy5yZWdleHBfYWx0ZXJuYXRpdmUoc3RhdGUpOwogICAgd2hpbGUgKHN0YXRlLmVhdCgweDdDIC8qIHwgKi8pKSB7CiAgICAgIHRoaXMucmVnZXhwX2FsdGVybmF0aXZlKHN0YXRlKTsKICAgIH0KCiAgICAvLyBNYWtlIHRoZSBzYW1lIG1lc3NhZ2UgYXMgVjguCiAgICBpZiAodGhpcy5yZWdleHBfZWF0UXVhbnRpZmllcihzdGF0ZSwgdHJ1ZSkpIHsKICAgICAgc3RhdGUucmFpc2UoIk5vdGhpbmcgdG8gcmVwZWF0Iik7CiAgICB9CiAgICBpZiAoc3RhdGUuZWF0KDB4N0IgLyogeyAqLykpIHsKICAgICAgc3RhdGUucmFpc2UoIkxvbmUgcXVhbnRpZmllciBicmFja2V0cyIpOwogICAgfQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLUFsdGVybmF0aXZlCiAgcHAkMS5yZWdleHBfYWx0ZXJuYXRpdmUgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgd2hpbGUgKHN0YXRlLnBvcyA8IHN0YXRlLnNvdXJjZS5sZW5ndGggJiYgdGhpcy5yZWdleHBfZWF0VGVybShzdGF0ZSkpCiAgICAgIHsgfQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLWFubmV4Qi1UZXJtCiAgcHAkMS5yZWdleHBfZWF0VGVybSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICBpZiAodGhpcy5yZWdleHBfZWF0QXNzZXJ0aW9uKHN0YXRlKSkgewogICAgICAvLyBIYW5kbGUgYFF1YW50aWZpYWJsZUFzc2VydGlvbiBRdWFudGlmaWVyYCBhbHRlcm5hdGl2ZS4KICAgICAgLy8gYHN0YXRlLmxhc3RBc3NlcnRpb25Jc1F1YW50aWZpYWJsZWAgaXMgdHJ1ZSBpZiB0aGUgbGFzdCBlYXRlbiBBc3NlcnRpb24KICAgICAgLy8gaXMgYSBRdWFudGlmaWFibGVBc3NlcnRpb24uCiAgICAgIGlmIChzdGF0ZS5sYXN0QXNzZXJ0aW9uSXNRdWFudGlmaWFibGUgJiYgdGhpcy5yZWdleHBfZWF0UXVhbnRpZmllcihzdGF0ZSkpIHsKICAgICAgICAvLyBNYWtlIHRoZSBzYW1lIG1lc3NhZ2UgYXMgVjguCiAgICAgICAgaWYgKHN0YXRlLnN3aXRjaFUpIHsKICAgICAgICAgIHN0YXRlLnJhaXNlKCJJbnZhbGlkIHF1YW50aWZpZXIiKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICBpZiAoc3RhdGUuc3dpdGNoVSA/IHRoaXMucmVnZXhwX2VhdEF0b20oc3RhdGUpIDogdGhpcy5yZWdleHBfZWF0RXh0ZW5kZWRBdG9tKHN0YXRlKSkgewogICAgICB0aGlzLnJlZ2V4cF9lYXRRdWFudGlmaWVyKHN0YXRlKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1hbm5leEItQXNzZXJ0aW9uCiAgcHAkMS5yZWdleHBfZWF0QXNzZXJ0aW9uID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBzdGFydCA9IHN0YXRlLnBvczsKICAgIHN0YXRlLmxhc3RBc3NlcnRpb25Jc1F1YW50aWZpYWJsZSA9IGZhbHNlOwoKICAgIC8vIF4sICQKICAgIGlmIChzdGF0ZS5lYXQoMHg1RSAvKiBeICovKSB8fCBzdGF0ZS5lYXQoMHgyNCAvKiAkICovKSkgewogICAgICByZXR1cm4gdHJ1ZQogICAgfQoKICAgIC8vIFxiIFxCCiAgICBpZiAoc3RhdGUuZWF0KDB4NUMgLyogXCAqLykpIHsKICAgICAgaWYgKHN0YXRlLmVhdCgweDQyIC8qIEIgKi8pIHx8IHN0YXRlLmVhdCgweDYyIC8qIGIgKi8pKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgIH0KCiAgICAvLyBMb29rYWhlYWQgLyBMb29rYmVoaW5kCiAgICBpZiAoc3RhdGUuZWF0KDB4MjggLyogKCAqLykgJiYgc3RhdGUuZWF0KDB4M0YgLyogPyAqLykpIHsKICAgICAgdmFyIGxvb2tiZWhpbmQgPSBmYWxzZTsKICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5KSB7CiAgICAgICAgbG9va2JlaGluZCA9IHN0YXRlLmVhdCgweDNDIC8qIDwgKi8pOwogICAgICB9CiAgICAgIGlmIChzdGF0ZS5lYXQoMHgzRCAvKiA9ICovKSB8fCBzdGF0ZS5lYXQoMHgyMSAvKiAhICovKSkgewogICAgICAgIHRoaXMucmVnZXhwX2Rpc2p1bmN0aW9uKHN0YXRlKTsKICAgICAgICBpZiAoIXN0YXRlLmVhdCgweDI5IC8qICkgKi8pKSB7CiAgICAgICAgICBzdGF0ZS5yYWlzZSgiVW50ZXJtaW5hdGVkIGdyb3VwIik7CiAgICAgICAgfQogICAgICAgIHN0YXRlLmxhc3RBc3NlcnRpb25Jc1F1YW50aWZpYWJsZSA9ICFsb29rYmVoaW5kOwogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgIH0KCiAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgIHJldHVybiBmYWxzZQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLVF1YW50aWZpZXIKICBwcCQxLnJlZ2V4cF9lYXRRdWFudGlmaWVyID0gZnVuY3Rpb24oc3RhdGUsIG5vRXJyb3IpIHsKICAgIGlmICggbm9FcnJvciA9PT0gdm9pZCAwICkgbm9FcnJvciA9IGZhbHNlOwoKICAgIGlmICh0aGlzLnJlZ2V4cF9lYXRRdWFudGlmaWVyUHJlZml4KHN0YXRlLCBub0Vycm9yKSkgewogICAgICBzdGF0ZS5lYXQoMHgzRiAvKiA/ICovKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLVF1YW50aWZpZXJQcmVmaXgKICBwcCQxLnJlZ2V4cF9lYXRRdWFudGlmaWVyUHJlZml4ID0gZnVuY3Rpb24oc3RhdGUsIG5vRXJyb3IpIHsKICAgIHJldHVybiAoCiAgICAgIHN0YXRlLmVhdCgweDJBIC8qICogKi8pIHx8CiAgICAgIHN0YXRlLmVhdCgweDJCIC8qICsgKi8pIHx8CiAgICAgIHN0YXRlLmVhdCgweDNGIC8qID8gKi8pIHx8CiAgICAgIHRoaXMucmVnZXhwX2VhdEJyYWNlZFF1YW50aWZpZXIoc3RhdGUsIG5vRXJyb3IpCiAgICApCiAgfTsKICBwcCQxLnJlZ2V4cF9lYXRCcmFjZWRRdWFudGlmaWVyID0gZnVuY3Rpb24oc3RhdGUsIG5vRXJyb3IpIHsKICAgIHZhciBzdGFydCA9IHN0YXRlLnBvczsKICAgIGlmIChzdGF0ZS5lYXQoMHg3QiAvKiB7ICovKSkgewogICAgICB2YXIgbWluID0gMCwgbWF4ID0gLTE7CiAgICAgIGlmICh0aGlzLnJlZ2V4cF9lYXREZWNpbWFsRGlnaXRzKHN0YXRlKSkgewogICAgICAgIG1pbiA9IHN0YXRlLmxhc3RJbnRWYWx1ZTsKICAgICAgICBpZiAoc3RhdGUuZWF0KDB4MkMgLyogLCAqLykgJiYgdGhpcy5yZWdleHBfZWF0RGVjaW1hbERpZ2l0cyhzdGF0ZSkpIHsKICAgICAgICAgIG1heCA9IHN0YXRlLmxhc3RJbnRWYWx1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKHN0YXRlLmVhdCgweDdEIC8qIH0gKi8pKSB7CiAgICAgICAgICAvLyBTeW50YXhFcnJvciBpbiBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jc2VjLXRlcm0KICAgICAgICAgIGlmIChtYXggIT09IC0xICYmIG1heCA8IG1pbiAmJiAhbm9FcnJvcikgewogICAgICAgICAgICBzdGF0ZS5yYWlzZSgibnVtYmVycyBvdXQgb2Ygb3JkZXIgaW4ge30gcXVhbnRpZmllciIpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHN0YXRlLnN3aXRjaFUgJiYgIW5vRXJyb3IpIHsKICAgICAgICBzdGF0ZS5yYWlzZSgiSW5jb21wbGV0ZSBxdWFudGlmaWVyIik7CiAgICAgIH0KICAgICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1BdG9tCiAgcHAkMS5yZWdleHBfZWF0QXRvbSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICByZXR1cm4gKAogICAgICB0aGlzLnJlZ2V4cF9lYXRQYXR0ZXJuQ2hhcmFjdGVycyhzdGF0ZSkgfHwKICAgICAgc3RhdGUuZWF0KDB4MkUgLyogLiAqLykgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0UmV2ZXJzZVNvbGlkdXNBdG9tRXNjYXBlKHN0YXRlKSB8fAogICAgICB0aGlzLnJlZ2V4cF9lYXRDaGFyYWN0ZXJDbGFzcyhzdGF0ZSkgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0VW5jYXB0dXJpbmdHcm91cChzdGF0ZSkgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0Q2FwdHVyaW5nR3JvdXAoc3RhdGUpCiAgICApCiAgfTsKICBwcCQxLnJlZ2V4cF9lYXRSZXZlcnNlU29saWR1c0F0b21Fc2NhcGUgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgdmFyIHN0YXJ0ID0gc3RhdGUucG9zOwogICAgaWYgKHN0YXRlLmVhdCgweDVDIC8qIFwgKi8pKSB7CiAgICAgIGlmICh0aGlzLnJlZ2V4cF9lYXRBdG9tRXNjYXBlKHN0YXRlKSkgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwogIHBwJDEucmVnZXhwX2VhdFVuY2FwdHVyaW5nR3JvdXAgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgdmFyIHN0YXJ0ID0gc3RhdGUucG9zOwogICAgaWYgKHN0YXRlLmVhdCgweDI4IC8qICggKi8pKSB7CiAgICAgIGlmIChzdGF0ZS5lYXQoMHgzRiAvKiA/ICovKSAmJiBzdGF0ZS5lYXQoMHgzQSAvKiA6ICovKSkgewogICAgICAgIHRoaXMucmVnZXhwX2Rpc2p1bmN0aW9uKHN0YXRlKTsKICAgICAgICBpZiAoc3RhdGUuZWF0KDB4MjkgLyogKSAqLykpIHsKICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfQogICAgICAgIHN0YXRlLnJhaXNlKCJVbnRlcm1pbmF0ZWQgZ3JvdXAiKTsKICAgICAgfQogICAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CiAgcHAkMS5yZWdleHBfZWF0Q2FwdHVyaW5nR3JvdXAgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgaWYgKHN0YXRlLmVhdCgweDI4IC8qICggKi8pKSB7CiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOSkgewogICAgICAgIHRoaXMucmVnZXhwX2dyb3VwU3BlY2lmaWVyKHN0YXRlKTsKICAgICAgfSBlbHNlIGlmIChzdGF0ZS5jdXJyZW50KCkgPT09IDB4M0YgLyogPyAqLykgewogICAgICAgIHN0YXRlLnJhaXNlKCJJbnZhbGlkIGdyb3VwIik7CiAgICAgIH0KICAgICAgdGhpcy5yZWdleHBfZGlzanVuY3Rpb24oc3RhdGUpOwogICAgICBpZiAoc3RhdGUuZWF0KDB4MjkgLyogKSAqLykpIHsKICAgICAgICBzdGF0ZS5udW1DYXB0dXJpbmdQYXJlbnMgKz0gMTsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIHN0YXRlLnJhaXNlKCJVbnRlcm1pbmF0ZWQgZ3JvdXAiKTsKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLWFubmV4Qi1FeHRlbmRlZEF0b20KICBwcCQxLnJlZ2V4cF9lYXRFeHRlbmRlZEF0b20gPSBmdW5jdGlvbihzdGF0ZSkgewogICAgcmV0dXJuICgKICAgICAgc3RhdGUuZWF0KDB4MkUgLyogLiAqLykgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0UmV2ZXJzZVNvbGlkdXNBdG9tRXNjYXBlKHN0YXRlKSB8fAogICAgICB0aGlzLnJlZ2V4cF9lYXRDaGFyYWN0ZXJDbGFzcyhzdGF0ZSkgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0VW5jYXB0dXJpbmdHcm91cChzdGF0ZSkgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0Q2FwdHVyaW5nR3JvdXAoc3RhdGUpIHx8CiAgICAgIHRoaXMucmVnZXhwX2VhdEludmFsaWRCcmFjZWRRdWFudGlmaWVyKHN0YXRlKSB8fAogICAgICB0aGlzLnJlZ2V4cF9lYXRFeHRlbmRlZFBhdHRlcm5DaGFyYWN0ZXIoc3RhdGUpCiAgICApCiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtYW5uZXhCLUludmFsaWRCcmFjZWRRdWFudGlmaWVyCiAgcHAkMS5yZWdleHBfZWF0SW52YWxpZEJyYWNlZFF1YW50aWZpZXIgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgaWYgKHRoaXMucmVnZXhwX2VhdEJyYWNlZFF1YW50aWZpZXIoc3RhdGUsIHRydWUpKSB7CiAgICAgIHN0YXRlLnJhaXNlKCJOb3RoaW5nIHRvIHJlcGVhdCIpOwogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtU3ludGF4Q2hhcmFjdGVyCiAgcHAkMS5yZWdleHBfZWF0U3ludGF4Q2hhcmFjdGVyID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBjaCA9IHN0YXRlLmN1cnJlbnQoKTsKICAgIGlmIChpc1N5bnRheENoYXJhY3RlcihjaCkpIHsKICAgICAgc3RhdGUubGFzdEludFZhbHVlID0gY2g7CiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CiAgZnVuY3Rpb24gaXNTeW50YXhDaGFyYWN0ZXIoY2gpIHsKICAgIHJldHVybiAoCiAgICAgIGNoID09PSAweDI0IC8qICQgKi8gfHwKICAgICAgY2ggPj0gMHgyOCAvKiAoICovICYmIGNoIDw9IDB4MkIgLyogKyAqLyB8fAogICAgICBjaCA9PT0gMHgyRSAvKiAuICovIHx8CiAgICAgIGNoID09PSAweDNGIC8qID8gKi8gfHwKICAgICAgY2ggPj0gMHg1QiAvKiBbICovICYmIGNoIDw9IDB4NUUgLyogXiAqLyB8fAogICAgICBjaCA+PSAweDdCIC8qIHsgKi8gJiYgY2ggPD0gMHg3RCAvKiB9ICovCiAgICApCiAgfQoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1QYXR0ZXJuQ2hhcmFjdGVyCiAgLy8gQnV0IGVhdCBlYWdlci4KICBwcCQxLnJlZ2V4cF9lYXRQYXR0ZXJuQ2hhcmFjdGVycyA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgc3RhcnQgPSBzdGF0ZS5wb3M7CiAgICB2YXIgY2ggPSAwOwogICAgd2hpbGUgKChjaCA9IHN0YXRlLmN1cnJlbnQoKSkgIT09IC0xICYmICFpc1N5bnRheENoYXJhY3RlcihjaCkpIHsKICAgICAgc3RhdGUuYWR2YW5jZSgpOwogICAgfQogICAgcmV0dXJuIHN0YXRlLnBvcyAhPT0gc3RhcnQKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1hbm5leEItRXh0ZW5kZWRQYXR0ZXJuQ2hhcmFjdGVyCiAgcHAkMS5yZWdleHBfZWF0RXh0ZW5kZWRQYXR0ZXJuQ2hhcmFjdGVyID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBjaCA9IHN0YXRlLmN1cnJlbnQoKTsKICAgIGlmICgKICAgICAgY2ggIT09IC0xICYmCiAgICAgIGNoICE9PSAweDI0IC8qICQgKi8gJiYKICAgICAgIShjaCA+PSAweDI4IC8qICggKi8gJiYgY2ggPD0gMHgyQiAvKiArICovKSAmJgogICAgICBjaCAhPT0gMHgyRSAvKiAuICovICYmCiAgICAgIGNoICE9PSAweDNGIC8qID8gKi8gJiYKICAgICAgY2ggIT09IDB4NUIgLyogWyAqLyAmJgogICAgICBjaCAhPT0gMHg1RSAvKiBeICovICYmCiAgICAgIGNoICE9PSAweDdDIC8qIHwgKi8KICAgICkgewogICAgICBzdGF0ZS5hZHZhbmNlKCk7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBHcm91cFNwZWNpZmllciA6OgogIC8vICAgW2VtcHR5XQogIC8vICAgYD9gIEdyb3VwTmFtZQogIHBwJDEucmVnZXhwX2dyb3VwU3BlY2lmaWVyID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIGlmIChzdGF0ZS5lYXQoMHgzRiAvKiA/ICovKSkgewogICAgICBpZiAodGhpcy5yZWdleHBfZWF0R3JvdXBOYW1lKHN0YXRlKSkgewogICAgICAgIGlmIChzdGF0ZS5ncm91cE5hbWVzLmluZGV4T2Yoc3RhdGUubGFzdFN0cmluZ1ZhbHVlKSAhPT0gLTEpIHsKICAgICAgICAgIHN0YXRlLnJhaXNlKCJEdXBsaWNhdGUgY2FwdHVyZSBncm91cCBuYW1lIik7CiAgICAgICAgfQogICAgICAgIHN0YXRlLmdyb3VwTmFtZXMucHVzaChzdGF0ZS5sYXN0U3RyaW5nVmFsdWUpOwogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHN0YXRlLnJhaXNlKCJJbnZhbGlkIGdyb3VwIik7CiAgICB9CiAgfTsKCiAgLy8gR3JvdXBOYW1lIDo6CiAgLy8gICBgPGAgUmVnRXhwSWRlbnRpZmllck5hbWUgYD5gCiAgLy8gTm90ZTogdGhpcyB1cGRhdGVzIGBzdGF0ZS5sYXN0U3RyaW5nVmFsdWVgIHByb3BlcnR5IHdpdGggdGhlIGVhdGVuIG5hbWUuCiAgcHAkMS5yZWdleHBfZWF0R3JvdXBOYW1lID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHN0YXRlLmxhc3RTdHJpbmdWYWx1ZSA9ICIiOwogICAgaWYgKHN0YXRlLmVhdCgweDNDIC8qIDwgKi8pKSB7CiAgICAgIGlmICh0aGlzLnJlZ2V4cF9lYXRSZWdFeHBJZGVudGlmaWVyTmFtZShzdGF0ZSkgJiYgc3RhdGUuZWF0KDB4M0UgLyogPiAqLykpIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIHN0YXRlLnJhaXNlKCJJbnZhbGlkIGNhcHR1cmUgZ3JvdXAgbmFtZSIpOwogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKCiAgLy8gUmVnRXhwSWRlbnRpZmllck5hbWUgOjoKICAvLyAgIFJlZ0V4cElkZW50aWZpZXJTdGFydAogIC8vICAgUmVnRXhwSWRlbnRpZmllck5hbWUgUmVnRXhwSWRlbnRpZmllclBhcnQKICAvLyBOb3RlOiB0aGlzIHVwZGF0ZXMgYHN0YXRlLmxhc3RTdHJpbmdWYWx1ZWAgcHJvcGVydHkgd2l0aCB0aGUgZWF0ZW4gbmFtZS4KICBwcCQxLnJlZ2V4cF9lYXRSZWdFeHBJZGVudGlmaWVyTmFtZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICBzdGF0ZS5sYXN0U3RyaW5nVmFsdWUgPSAiIjsKICAgIGlmICh0aGlzLnJlZ2V4cF9lYXRSZWdFeHBJZGVudGlmaWVyU3RhcnQoc3RhdGUpKSB7CiAgICAgIHN0YXRlLmxhc3RTdHJpbmdWYWx1ZSArPSBjb2RlUG9pbnRUb1N0cmluZyQxKHN0YXRlLmxhc3RJbnRWYWx1ZSk7CiAgICAgIHdoaWxlICh0aGlzLnJlZ2V4cF9lYXRSZWdFeHBJZGVudGlmaWVyUGFydChzdGF0ZSkpIHsKICAgICAgICBzdGF0ZS5sYXN0U3RyaW5nVmFsdWUgKz0gY29kZVBvaW50VG9TdHJpbmckMShzdGF0ZS5sYXN0SW50VmFsdWUpOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBSZWdFeHBJZGVudGlmaWVyU3RhcnQgOjoKICAvLyAgIFVuaWNvZGVJRFN0YXJ0CiAgLy8gICBgJGAKICAvLyAgIGBfYAogIC8vICAgYFxgIFJlZ0V4cFVuaWNvZGVFc2NhcGVTZXF1ZW5jZVsrVV0KICBwcCQxLnJlZ2V4cF9lYXRSZWdFeHBJZGVudGlmaWVyU3RhcnQgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgdmFyIHN0YXJ0ID0gc3RhdGUucG9zOwogICAgdmFyIGZvcmNlVSA9IHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSAxMTsKICAgIHZhciBjaCA9IHN0YXRlLmN1cnJlbnQoZm9yY2VVKTsKICAgIHN0YXRlLmFkdmFuY2UoZm9yY2VVKTsKCiAgICBpZiAoY2ggPT09IDB4NUMgLyogXCAqLyAmJiB0aGlzLnJlZ2V4cF9lYXRSZWdFeHBVbmljb2RlRXNjYXBlU2VxdWVuY2Uoc3RhdGUsIGZvcmNlVSkpIHsKICAgICAgY2ggPSBzdGF0ZS5sYXN0SW50VmFsdWU7CiAgICB9CiAgICBpZiAoaXNSZWdFeHBJZGVudGlmaWVyU3RhcnQoY2gpKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IGNoOwogICAgICByZXR1cm4gdHJ1ZQogICAgfQoKICAgIHN0YXRlLnBvcyA9IHN0YXJ0OwogICAgcmV0dXJuIGZhbHNlCiAgfTsKICBmdW5jdGlvbiBpc1JlZ0V4cElkZW50aWZpZXJTdGFydChjaCkgewogICAgcmV0dXJuIGlzSWRlbnRpZmllclN0YXJ0KGNoLCB0cnVlKSB8fCBjaCA9PT0gMHgyNCAvKiAkICovIHx8IGNoID09PSAweDVGIC8qIF8gKi8KICB9CgogIC8vIFJlZ0V4cElkZW50aWZpZXJQYXJ0IDo6CiAgLy8gICBVbmljb2RlSURDb250aW51ZQogIC8vICAgYCRgCiAgLy8gICBgX2AKICAvLyAgIGBcYCBSZWdFeHBVbmljb2RlRXNjYXBlU2VxdWVuY2VbK1VdCiAgLy8gICA8WldOSj4KICAvLyAgIDxaV0o+CiAgcHAkMS5yZWdleHBfZWF0UmVnRXhwSWRlbnRpZmllclBhcnQgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgdmFyIHN0YXJ0ID0gc3RhdGUucG9zOwogICAgdmFyIGZvcmNlVSA9IHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSAxMTsKICAgIHZhciBjaCA9IHN0YXRlLmN1cnJlbnQoZm9yY2VVKTsKICAgIHN0YXRlLmFkdmFuY2UoZm9yY2VVKTsKCiAgICBpZiAoY2ggPT09IDB4NUMgLyogXCAqLyAmJiB0aGlzLnJlZ2V4cF9lYXRSZWdFeHBVbmljb2RlRXNjYXBlU2VxdWVuY2Uoc3RhdGUsIGZvcmNlVSkpIHsKICAgICAgY2ggPSBzdGF0ZS5sYXN0SW50VmFsdWU7CiAgICB9CiAgICBpZiAoaXNSZWdFeHBJZGVudGlmaWVyUGFydChjaCkpIHsKICAgICAgc3RhdGUubGFzdEludFZhbHVlID0gY2g7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CgogICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICByZXR1cm4gZmFsc2UKICB9OwogIGZ1bmN0aW9uIGlzUmVnRXhwSWRlbnRpZmllclBhcnQoY2gpIHsKICAgIHJldHVybiBpc0lkZW50aWZpZXJDaGFyKGNoLCB0cnVlKSB8fCBjaCA9PT0gMHgyNCAvKiAkICovIHx8IGNoID09PSAweDVGIC8qIF8gKi8gfHwgY2ggPT09IDB4MjAwQyAvKiA8WldOSj4gKi8gfHwgY2ggPT09IDB4MjAwRCAvKiA8WldKPiAqLwogIH0KCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtYW5uZXhCLUF0b21Fc2NhcGUKICBwcCQxLnJlZ2V4cF9lYXRBdG9tRXNjYXBlID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIGlmICgKICAgICAgdGhpcy5yZWdleHBfZWF0QmFja1JlZmVyZW5jZShzdGF0ZSkgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0Q2hhcmFjdGVyQ2xhc3NFc2NhcGUoc3RhdGUpIHx8CiAgICAgIHRoaXMucmVnZXhwX2VhdENoYXJhY3RlckVzY2FwZShzdGF0ZSkgfHwKICAgICAgKHN0YXRlLnN3aXRjaE4gJiYgdGhpcy5yZWdleHBfZWF0S0dyb3VwTmFtZShzdGF0ZSkpCiAgICApIHsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIGlmIChzdGF0ZS5zd2l0Y2hVKSB7CiAgICAgIC8vIE1ha2UgdGhlIHNhbWUgbWVzc2FnZSBhcyBWOC4KICAgICAgaWYgKHN0YXRlLmN1cnJlbnQoKSA9PT0gMHg2MyAvKiBjICovKSB7CiAgICAgICAgc3RhdGUucmFpc2UoIkludmFsaWQgdW5pY29kZSBlc2NhcGUiKTsKICAgICAgfQogICAgICBzdGF0ZS5yYWlzZSgiSW52YWxpZCBlc2NhcGUiKTsKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CiAgcHAkMS5yZWdleHBfZWF0QmFja1JlZmVyZW5jZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgc3RhcnQgPSBzdGF0ZS5wb3M7CiAgICBpZiAodGhpcy5yZWdleHBfZWF0RGVjaW1hbEVzY2FwZShzdGF0ZSkpIHsKICAgICAgdmFyIG4gPSBzdGF0ZS5sYXN0SW50VmFsdWU7CiAgICAgIGlmIChzdGF0ZS5zd2l0Y2hVKSB7CiAgICAgICAgLy8gRm9yIFN5bnRheEVycm9yIGluIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNzZWMtYXRvbWVzY2FwZQogICAgICAgIGlmIChuID4gc3RhdGUubWF4QmFja1JlZmVyZW5jZSkgewogICAgICAgICAgc3RhdGUubWF4QmFja1JlZmVyZW5jZSA9IG47CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgaWYgKG4gPD0gc3RhdGUubnVtQ2FwdHVyaW5nUGFyZW5zKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CiAgcHAkMS5yZWdleHBfZWF0S0dyb3VwTmFtZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICBpZiAoc3RhdGUuZWF0KDB4NkIgLyogayAqLykpIHsKICAgICAgaWYgKHRoaXMucmVnZXhwX2VhdEdyb3VwTmFtZShzdGF0ZSkpIHsKICAgICAgICBzdGF0ZS5iYWNrUmVmZXJlbmNlTmFtZXMucHVzaChzdGF0ZS5sYXN0U3RyaW5nVmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgc3RhdGUucmFpc2UoIkludmFsaWQgbmFtZWQgcmVmZXJlbmNlIik7CiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1hbm5leEItQ2hhcmFjdGVyRXNjYXBlCiAgcHAkMS5yZWdleHBfZWF0Q2hhcmFjdGVyRXNjYXBlID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHJldHVybiAoCiAgICAgIHRoaXMucmVnZXhwX2VhdENvbnRyb2xFc2NhcGUoc3RhdGUpIHx8CiAgICAgIHRoaXMucmVnZXhwX2VhdENDb250cm9sTGV0dGVyKHN0YXRlKSB8fAogICAgICB0aGlzLnJlZ2V4cF9lYXRaZXJvKHN0YXRlKSB8fAogICAgICB0aGlzLnJlZ2V4cF9lYXRIZXhFc2NhcGVTZXF1ZW5jZShzdGF0ZSkgfHwKICAgICAgdGhpcy5yZWdleHBfZWF0UmVnRXhwVW5pY29kZUVzY2FwZVNlcXVlbmNlKHN0YXRlLCBmYWxzZSkgfHwKICAgICAgKCFzdGF0ZS5zd2l0Y2hVICYmIHRoaXMucmVnZXhwX2VhdExlZ2FjeU9jdGFsRXNjYXBlU2VxdWVuY2Uoc3RhdGUpKSB8fAogICAgICB0aGlzLnJlZ2V4cF9lYXRJZGVudGl0eUVzY2FwZShzdGF0ZSkKICAgICkKICB9OwogIHBwJDEucmVnZXhwX2VhdENDb250cm9sTGV0dGVyID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBzdGFydCA9IHN0YXRlLnBvczsKICAgIGlmIChzdGF0ZS5lYXQoMHg2MyAvKiBjICovKSkgewogICAgICBpZiAodGhpcy5yZWdleHBfZWF0Q29udHJvbExldHRlcihzdGF0ZSkpIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIHN0YXRlLnBvcyA9IHN0YXJ0OwogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKICBwcCQxLnJlZ2V4cF9lYXRaZXJvID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIGlmIChzdGF0ZS5jdXJyZW50KCkgPT09IDB4MzAgLyogMCAqLyAmJiAhaXNEZWNpbWFsRGlnaXQoc3RhdGUubG9va2FoZWFkKCkpKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDA7CiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLUNvbnRyb2xFc2NhcGUKICBwcCQxLnJlZ2V4cF9lYXRDb250cm9sRXNjYXBlID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBjaCA9IHN0YXRlLmN1cnJlbnQoKTsKICAgIGlmIChjaCA9PT0gMHg3NCAvKiB0ICovKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDB4MDk7IC8qIFx0ICovCiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIGlmIChjaCA9PT0gMHg2RSAvKiBuICovKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDB4MEE7IC8qIFxuICovCiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIGlmIChjaCA9PT0gMHg3NiAvKiB2ICovKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDB4MEI7IC8qIFx2ICovCiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIGlmIChjaCA9PT0gMHg2NiAvKiBmICovKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDB4MEM7IC8qIFxmICovCiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIGlmIChjaCA9PT0gMHg3MiAvKiByICovKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDB4MEQ7IC8qIFxyICovCiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgICAgcmV0dXJuIHRydWUKICAgIH0KICAgIHJldHVybiBmYWxzZQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLUNvbnRyb2xMZXR0ZXIKICBwcCQxLnJlZ2V4cF9lYXRDb250cm9sTGV0dGVyID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBjaCA9IHN0YXRlLmN1cnJlbnQoKTsKICAgIGlmIChpc0NvbnRyb2xMZXR0ZXIoY2gpKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IGNoICUgMHgyMDsKICAgICAgc3RhdGUuYWR2YW5jZSgpOwogICAgICByZXR1cm4gdHJ1ZQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKICBmdW5jdGlvbiBpc0NvbnRyb2xMZXR0ZXIoY2gpIHsKICAgIHJldHVybiAoCiAgICAgIChjaCA+PSAweDQxIC8qIEEgKi8gJiYgY2ggPD0gMHg1QSAvKiBaICovKSB8fAogICAgICAoY2ggPj0gMHg2MSAvKiBhICovICYmIGNoIDw9IDB4N0EgLyogeiAqLykKICAgICkKICB9CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLVJlZ0V4cFVuaWNvZGVFc2NhcGVTZXF1ZW5jZQogIHBwJDEucmVnZXhwX2VhdFJlZ0V4cFVuaWNvZGVFc2NhcGVTZXF1ZW5jZSA9IGZ1bmN0aW9uKHN0YXRlLCBmb3JjZVUpIHsKICAgIGlmICggZm9yY2VVID09PSB2b2lkIDAgKSBmb3JjZVUgPSBmYWxzZTsKCiAgICB2YXIgc3RhcnQgPSBzdGF0ZS5wb3M7CiAgICB2YXIgc3dpdGNoVSA9IGZvcmNlVSB8fCBzdGF0ZS5zd2l0Y2hVOwoKICAgIGlmIChzdGF0ZS5lYXQoMHg3NSAvKiB1ICovKSkgewogICAgICBpZiAodGhpcy5yZWdleHBfZWF0Rml4ZWRIZXhEaWdpdHMoc3RhdGUsIDQpKSB7CiAgICAgICAgdmFyIGxlYWQgPSBzdGF0ZS5sYXN0SW50VmFsdWU7CiAgICAgICAgaWYgKHN3aXRjaFUgJiYgbGVhZCA+PSAweEQ4MDAgJiYgbGVhZCA8PSAweERCRkYpIHsKICAgICAgICAgIHZhciBsZWFkU3Vycm9nYXRlRW5kID0gc3RhdGUucG9zOwogICAgICAgICAgaWYgKHN0YXRlLmVhdCgweDVDIC8qIFwgKi8pICYmIHN0YXRlLmVhdCgweDc1IC8qIHUgKi8pICYmIHRoaXMucmVnZXhwX2VhdEZpeGVkSGV4RGlnaXRzKHN0YXRlLCA0KSkgewogICAgICAgICAgICB2YXIgdHJhaWwgPSBzdGF0ZS5sYXN0SW50VmFsdWU7CiAgICAgICAgICAgIGlmICh0cmFpbCA+PSAweERDMDAgJiYgdHJhaWwgPD0gMHhERkZGKSB7CiAgICAgICAgICAgICAgc3RhdGUubGFzdEludFZhbHVlID0gKGxlYWQgLSAweEQ4MDApICogMHg0MDAgKyAodHJhaWwgLSAweERDMDApICsgMHgxMDAwMDsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZS5wb3MgPSBsZWFkU3Vycm9nYXRlRW5kOwogICAgICAgICAgc3RhdGUubGFzdEludFZhbHVlID0gbGVhZDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICBpZiAoCiAgICAgICAgc3dpdGNoVSAmJgogICAgICAgIHN0YXRlLmVhdCgweDdCIC8qIHsgKi8pICYmCiAgICAgICAgdGhpcy5yZWdleHBfZWF0SGV4RGlnaXRzKHN0YXRlKSAmJgogICAgICAgIHN0YXRlLmVhdCgweDdEIC8qIH0gKi8pICYmCiAgICAgICAgaXNWYWxpZFVuaWNvZGUoc3RhdGUubGFzdEludFZhbHVlKQogICAgICApIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIGlmIChzd2l0Y2hVKSB7CiAgICAgICAgc3RhdGUucmFpc2UoIkludmFsaWQgdW5pY29kZSBlc2NhcGUiKTsKICAgICAgfQogICAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgIH0KCiAgICByZXR1cm4gZmFsc2UKICB9OwogIGZ1bmN0aW9uIGlzVmFsaWRVbmljb2RlKGNoKSB7CiAgICByZXR1cm4gY2ggPj0gMCAmJiBjaCA8PSAweDEwRkZGRgogIH0KCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtYW5uZXhCLUlkZW50aXR5RXNjYXBlCiAgcHAkMS5yZWdleHBfZWF0SWRlbnRpdHlFc2NhcGUgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgaWYgKHN0YXRlLnN3aXRjaFUpIHsKICAgICAgaWYgKHRoaXMucmVnZXhwX2VhdFN5bnRheENoYXJhY3RlcihzdGF0ZSkpIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIGlmIChzdGF0ZS5lYXQoMHgyRiAvKiAvICovKSkgewogICAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDB4MkY7IC8qIC8gKi8KICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZQogICAgfQoKICAgIHZhciBjaCA9IHN0YXRlLmN1cnJlbnQoKTsKICAgIGlmIChjaCAhPT0gMHg2MyAvKiBjICovICYmICghc3RhdGUuc3dpdGNoTiB8fCBjaCAhPT0gMHg2QiAvKiBrICovKSkgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSBjaDsKICAgICAgc3RhdGUuYWR2YW5jZSgpOwogICAgICByZXR1cm4gdHJ1ZQogICAgfQoKICAgIHJldHVybiBmYWxzZQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLURlY2ltYWxFc2NhcGUKICBwcCQxLnJlZ2V4cF9lYXREZWNpbWFsRXNjYXBlID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDA7CiAgICB2YXIgY2ggPSBzdGF0ZS5jdXJyZW50KCk7CiAgICBpZiAoY2ggPj0gMHgzMSAvKiAxICovICYmIGNoIDw9IDB4MzkgLyogOSAqLykgewogICAgICBkbyB7CiAgICAgICAgc3RhdGUubGFzdEludFZhbHVlID0gMTAgKiBzdGF0ZS5sYXN0SW50VmFsdWUgKyAoY2ggLSAweDMwIC8qIDAgKi8pOwogICAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgICAgfSB3aGlsZSAoKGNoID0gc3RhdGUuY3VycmVudCgpKSA+PSAweDMwIC8qIDAgKi8gJiYgY2ggPD0gMHgzOSAvKiA5ICovKQogICAgICByZXR1cm4gdHJ1ZQogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtQ2hhcmFjdGVyQ2xhc3NFc2NhcGUKICBwcCQxLnJlZ2V4cF9lYXRDaGFyYWN0ZXJDbGFzc0VzY2FwZSA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgY2ggPSBzdGF0ZS5jdXJyZW50KCk7CgogICAgaWYgKGlzQ2hhcmFjdGVyQ2xhc3NFc2NhcGUoY2gpKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IC0xOwogICAgICBzdGF0ZS5hZHZhbmNlKCk7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CgogICAgaWYgKAogICAgICBzdGF0ZS5zd2l0Y2hVICYmCiAgICAgIHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5ICYmCiAgICAgIChjaCA9PT0gMHg1MCAvKiBQICovIHx8IGNoID09PSAweDcwIC8qIHAgKi8pCiAgICApIHsKICAgICAgc3RhdGUubGFzdEludFZhbHVlID0gLTE7CiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgICAgaWYgKAogICAgICAgIHN0YXRlLmVhdCgweDdCIC8qIHsgKi8pICYmCiAgICAgICAgdGhpcy5yZWdleHBfZWF0VW5pY29kZVByb3BlcnR5VmFsdWVFeHByZXNzaW9uKHN0YXRlKSAmJgogICAgICAgIHN0YXRlLmVhdCgweDdEIC8qIH0gKi8pCiAgICAgICkgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgc3RhdGUucmFpc2UoIkludmFsaWQgcHJvcGVydHkgbmFtZSIpOwogICAgfQoKICAgIHJldHVybiBmYWxzZQogIH07CiAgZnVuY3Rpb24gaXNDaGFyYWN0ZXJDbGFzc0VzY2FwZShjaCkgewogICAgcmV0dXJuICgKICAgICAgY2ggPT09IDB4NjQgLyogZCAqLyB8fAogICAgICBjaCA9PT0gMHg0NCAvKiBEICovIHx8CiAgICAgIGNoID09PSAweDczIC8qIHMgKi8gfHwKICAgICAgY2ggPT09IDB4NTMgLyogUyAqLyB8fAogICAgICBjaCA9PT0gMHg3NyAvKiB3ICovIHx8CiAgICAgIGNoID09PSAweDU3IC8qIFcgKi8KICAgICkKICB9CgogIC8vIFVuaWNvZGVQcm9wZXJ0eVZhbHVlRXhwcmVzc2lvbiA6OgogIC8vICAgVW5pY29kZVByb3BlcnR5TmFtZSBgPWAgVW5pY29kZVByb3BlcnR5VmFsdWUKICAvLyAgIExvbmVVbmljb2RlUHJvcGVydHlOYW1lT3JWYWx1ZQogIHBwJDEucmVnZXhwX2VhdFVuaWNvZGVQcm9wZXJ0eVZhbHVlRXhwcmVzc2lvbiA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgc3RhcnQgPSBzdGF0ZS5wb3M7CgogICAgLy8gVW5pY29kZVByb3BlcnR5TmFtZSBgPWAgVW5pY29kZVByb3BlcnR5VmFsdWUKICAgIGlmICh0aGlzLnJlZ2V4cF9lYXRVbmljb2RlUHJvcGVydHlOYW1lKHN0YXRlKSAmJiBzdGF0ZS5lYXQoMHgzRCAvKiA9ICovKSkgewogICAgICB2YXIgbmFtZSA9IHN0YXRlLmxhc3RTdHJpbmdWYWx1ZTsKICAgICAgaWYgKHRoaXMucmVnZXhwX2VhdFVuaWNvZGVQcm9wZXJ0eVZhbHVlKHN0YXRlKSkgewogICAgICAgIHZhciB2YWx1ZSA9IHN0YXRlLmxhc3RTdHJpbmdWYWx1ZTsKICAgICAgICB0aGlzLnJlZ2V4cF92YWxpZGF0ZVVuaWNvZGVQcm9wZXJ0eU5hbWVBbmRWYWx1ZShzdGF0ZSwgbmFtZSwgdmFsdWUpOwogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgIH0KICAgIHN0YXRlLnBvcyA9IHN0YXJ0OwoKICAgIC8vIExvbmVVbmljb2RlUHJvcGVydHlOYW1lT3JWYWx1ZQogICAgaWYgKHRoaXMucmVnZXhwX2VhdExvbmVVbmljb2RlUHJvcGVydHlOYW1lT3JWYWx1ZShzdGF0ZSkpIHsKICAgICAgdmFyIG5hbWVPclZhbHVlID0gc3RhdGUubGFzdFN0cmluZ1ZhbHVlOwogICAgICB0aGlzLnJlZ2V4cF92YWxpZGF0ZVVuaWNvZGVQcm9wZXJ0eU5hbWVPclZhbHVlKHN0YXRlLCBuYW1lT3JWYWx1ZSk7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwogIHBwJDEucmVnZXhwX3ZhbGlkYXRlVW5pY29kZVByb3BlcnR5TmFtZUFuZFZhbHVlID0gZnVuY3Rpb24oc3RhdGUsIG5hbWUsIHZhbHVlKSB7CiAgICBpZiAoIWhhc093bihzdGF0ZS51bmljb2RlUHJvcGVydGllcy5ub25CaW5hcnksIG5hbWUpKQogICAgICB7IHN0YXRlLnJhaXNlKCJJbnZhbGlkIHByb3BlcnR5IG5hbWUiKTsgfQogICAgaWYgKCFzdGF0ZS51bmljb2RlUHJvcGVydGllcy5ub25CaW5hcnlbbmFtZV0udGVzdCh2YWx1ZSkpCiAgICAgIHsgc3RhdGUucmFpc2UoIkludmFsaWQgcHJvcGVydHkgdmFsdWUiKTsgfQogIH07CiAgcHAkMS5yZWdleHBfdmFsaWRhdGVVbmljb2RlUHJvcGVydHlOYW1lT3JWYWx1ZSA9IGZ1bmN0aW9uKHN0YXRlLCBuYW1lT3JWYWx1ZSkgewogICAgaWYgKCFzdGF0ZS51bmljb2RlUHJvcGVydGllcy5iaW5hcnkudGVzdChuYW1lT3JWYWx1ZSkpCiAgICAgIHsgc3RhdGUucmFpc2UoIkludmFsaWQgcHJvcGVydHkgbmFtZSIpOyB9CiAgfTsKCiAgLy8gVW5pY29kZVByb3BlcnR5TmFtZSA6OgogIC8vICAgVW5pY29kZVByb3BlcnR5TmFtZUNoYXJhY3RlcnMKICBwcCQxLnJlZ2V4cF9lYXRVbmljb2RlUHJvcGVydHlOYW1lID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBjaCA9IDA7CiAgICBzdGF0ZS5sYXN0U3RyaW5nVmFsdWUgPSAiIjsKICAgIHdoaWxlIChpc1VuaWNvZGVQcm9wZXJ0eU5hbWVDaGFyYWN0ZXIoY2ggPSBzdGF0ZS5jdXJyZW50KCkpKSB7CiAgICAgIHN0YXRlLmxhc3RTdHJpbmdWYWx1ZSArPSBjb2RlUG9pbnRUb1N0cmluZyQxKGNoKTsKICAgICAgc3RhdGUuYWR2YW5jZSgpOwogICAgfQogICAgcmV0dXJuIHN0YXRlLmxhc3RTdHJpbmdWYWx1ZSAhPT0gIiIKICB9OwogIGZ1bmN0aW9uIGlzVW5pY29kZVByb3BlcnR5TmFtZUNoYXJhY3RlcihjaCkgewogICAgcmV0dXJuIGlzQ29udHJvbExldHRlcihjaCkgfHwgY2ggPT09IDB4NUYgLyogXyAqLwogIH0KCiAgLy8gVW5pY29kZVByb3BlcnR5VmFsdWUgOjoKICAvLyAgIFVuaWNvZGVQcm9wZXJ0eVZhbHVlQ2hhcmFjdGVycwogIHBwJDEucmVnZXhwX2VhdFVuaWNvZGVQcm9wZXJ0eVZhbHVlID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBjaCA9IDA7CiAgICBzdGF0ZS5sYXN0U3RyaW5nVmFsdWUgPSAiIjsKICAgIHdoaWxlIChpc1VuaWNvZGVQcm9wZXJ0eVZhbHVlQ2hhcmFjdGVyKGNoID0gc3RhdGUuY3VycmVudCgpKSkgewogICAgICBzdGF0ZS5sYXN0U3RyaW5nVmFsdWUgKz0gY29kZVBvaW50VG9TdHJpbmckMShjaCk7CiAgICAgIHN0YXRlLmFkdmFuY2UoKTsKICAgIH0KICAgIHJldHVybiBzdGF0ZS5sYXN0U3RyaW5nVmFsdWUgIT09ICIiCiAgfTsKICBmdW5jdGlvbiBpc1VuaWNvZGVQcm9wZXJ0eVZhbHVlQ2hhcmFjdGVyKGNoKSB7CiAgICByZXR1cm4gaXNVbmljb2RlUHJvcGVydHlOYW1lQ2hhcmFjdGVyKGNoKSB8fCBpc0RlY2ltYWxEaWdpdChjaCkKICB9CgogIC8vIExvbmVVbmljb2RlUHJvcGVydHlOYW1lT3JWYWx1ZSA6OgogIC8vICAgVW5pY29kZVByb3BlcnR5VmFsdWVDaGFyYWN0ZXJzCiAgcHAkMS5yZWdleHBfZWF0TG9uZVVuaWNvZGVQcm9wZXJ0eU5hbWVPclZhbHVlID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHJldHVybiB0aGlzLnJlZ2V4cF9lYXRVbmljb2RlUHJvcGVydHlWYWx1ZShzdGF0ZSkKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1DaGFyYWN0ZXJDbGFzcwogIHBwJDEucmVnZXhwX2VhdENoYXJhY3RlckNsYXNzID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIGlmIChzdGF0ZS5lYXQoMHg1QiAvKiBbICovKSkgewogICAgICBzdGF0ZS5lYXQoMHg1RSAvKiBeICovKTsKICAgICAgdGhpcy5yZWdleHBfY2xhc3NSYW5nZXMoc3RhdGUpOwogICAgICBpZiAoc3RhdGUuZWF0KDB4NUQgLyogXSAqLykpIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIC8vIFVucmVhY2hhYmxlIHNpbmNlIGl0IHRocmV3ICJ1bnRlcm1pbmF0ZWQgcmVndWxhciBleHByZXNzaW9uIiBlcnJvciBiZWZvcmUuCiAgICAgIHN0YXRlLnJhaXNlKCJVbnRlcm1pbmF0ZWQgY2hhcmFjdGVyIGNsYXNzIik7CiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1DbGFzc1JhbmdlcwogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLU5vbmVtcHR5Q2xhc3NSYW5nZXMKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1Ob25lbXB0eUNsYXNzUmFuZ2VzTm9EYXNoCiAgcHAkMS5yZWdleHBfY2xhc3NSYW5nZXMgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgd2hpbGUgKHRoaXMucmVnZXhwX2VhdENsYXNzQXRvbShzdGF0ZSkpIHsKICAgICAgdmFyIGxlZnQgPSBzdGF0ZS5sYXN0SW50VmFsdWU7CiAgICAgIGlmIChzdGF0ZS5lYXQoMHgyRCAvKiAtICovKSAmJiB0aGlzLnJlZ2V4cF9lYXRDbGFzc0F0b20oc3RhdGUpKSB7CiAgICAgICAgdmFyIHJpZ2h0ID0gc3RhdGUubGFzdEludFZhbHVlOwogICAgICAgIGlmIChzdGF0ZS5zd2l0Y2hVICYmIChsZWZ0ID09PSAtMSB8fCByaWdodCA9PT0gLTEpKSB7CiAgICAgICAgICBzdGF0ZS5yYWlzZSgiSW52YWxpZCBjaGFyYWN0ZXIgY2xhc3MiKTsKICAgICAgICB9CiAgICAgICAgaWYgKGxlZnQgIT09IC0xICYmIHJpZ2h0ICE9PSAtMSAmJiBsZWZ0ID4gcmlnaHQpIHsKICAgICAgICAgIHN0YXRlLnJhaXNlKCJSYW5nZSBvdXQgb2Ygb3JkZXIgaW4gY2hhcmFjdGVyIGNsYXNzIik7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtQ2xhc3NBdG9tCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtQ2xhc3NBdG9tTm9EYXNoCiAgcHAkMS5yZWdleHBfZWF0Q2xhc3NBdG9tID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBzdGFydCA9IHN0YXRlLnBvczsKCiAgICBpZiAoc3RhdGUuZWF0KDB4NUMgLyogXCAqLykpIHsKICAgICAgaWYgKHRoaXMucmVnZXhwX2VhdENsYXNzRXNjYXBlKHN0YXRlKSkgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgaWYgKHN0YXRlLnN3aXRjaFUpIHsKICAgICAgICAvLyBNYWtlIHRoZSBzYW1lIG1lc3NhZ2UgYXMgVjguCiAgICAgICAgdmFyIGNoJDEgPSBzdGF0ZS5jdXJyZW50KCk7CiAgICAgICAgaWYgKGNoJDEgPT09IDB4NjMgLyogYyAqLyB8fCBpc09jdGFsRGlnaXQoY2gkMSkpIHsKICAgICAgICAgIHN0YXRlLnJhaXNlKCJJbnZhbGlkIGNsYXNzIGVzY2FwZSIpOwogICAgICAgIH0KICAgICAgICBzdGF0ZS5yYWlzZSgiSW52YWxpZCBlc2NhcGUiKTsKICAgICAgfQogICAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgIH0KCiAgICB2YXIgY2ggPSBzdGF0ZS5jdXJyZW50KCk7CiAgICBpZiAoY2ggIT09IDB4NUQgLyogXSAqLykgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSBjaDsKICAgICAgc3RhdGUuYWR2YW5jZSgpOwogICAgICByZXR1cm4gdHJ1ZQogICAgfQoKICAgIHJldHVybiBmYWxzZQogIH07CgogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLWFubmV4Qi1DbGFzc0VzY2FwZQogIHBwJDEucmVnZXhwX2VhdENsYXNzRXNjYXBlID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBzdGFydCA9IHN0YXRlLnBvczsKCiAgICBpZiAoc3RhdGUuZWF0KDB4NjIgLyogYiAqLykpIHsKICAgICAgc3RhdGUubGFzdEludFZhbHVlID0gMHgwODsgLyogPEJTPiAqLwogICAgICByZXR1cm4gdHJ1ZQogICAgfQoKICAgIGlmIChzdGF0ZS5zd2l0Y2hVICYmIHN0YXRlLmVhdCgweDJEIC8qIC0gKi8pKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDB4MkQ7IC8qIC0gKi8KICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICBpZiAoIXN0YXRlLnN3aXRjaFUgJiYgc3RhdGUuZWF0KDB4NjMgLyogYyAqLykpIHsKICAgICAgaWYgKHRoaXMucmVnZXhwX2VhdENsYXNzQ29udHJvbExldHRlcihzdGF0ZSkpIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIHN0YXRlLnBvcyA9IHN0YXJ0OwogICAgfQoKICAgIHJldHVybiAoCiAgICAgIHRoaXMucmVnZXhwX2VhdENoYXJhY3RlckNsYXNzRXNjYXBlKHN0YXRlKSB8fAogICAgICB0aGlzLnJlZ2V4cF9lYXRDaGFyYWN0ZXJFc2NhcGUoc3RhdGUpCiAgICApCiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtYW5uZXhCLUNsYXNzQ29udHJvbExldHRlcgogIHBwJDEucmVnZXhwX2VhdENsYXNzQ29udHJvbExldHRlciA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgY2ggPSBzdGF0ZS5jdXJyZW50KCk7CiAgICBpZiAoaXNEZWNpbWFsRGlnaXQoY2gpIHx8IGNoID09PSAweDVGIC8qIF8gKi8pIHsKICAgICAgc3RhdGUubGFzdEludFZhbHVlID0gY2ggJSAweDIwOwogICAgICBzdGF0ZS5hZHZhbmNlKCk7CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1IZXhFc2NhcGVTZXF1ZW5jZQogIHBwJDEucmVnZXhwX2VhdEhleEVzY2FwZVNlcXVlbmNlID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBzdGFydCA9IHN0YXRlLnBvczsKICAgIGlmIChzdGF0ZS5lYXQoMHg3OCAvKiB4ICovKSkgewogICAgICBpZiAodGhpcy5yZWdleHBfZWF0Rml4ZWRIZXhEaWdpdHMoc3RhdGUsIDIpKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICBpZiAoc3RhdGUuc3dpdGNoVSkgewogICAgICAgIHN0YXRlLnJhaXNlKCJJbnZhbGlkIGVzY2FwZSIpOwogICAgICB9CiAgICAgIHN0YXRlLnBvcyA9IHN0YXJ0OwogICAgfQogICAgcmV0dXJuIGZhbHNlCiAgfTsKCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtRGVjaW1hbERpZ2l0cwogIHBwJDEucmVnZXhwX2VhdERlY2ltYWxEaWdpdHMgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgdmFyIHN0YXJ0ID0gc3RhdGUucG9zOwogICAgdmFyIGNoID0gMDsKICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDA7CiAgICB3aGlsZSAoaXNEZWNpbWFsRGlnaXQoY2ggPSBzdGF0ZS5jdXJyZW50KCkpKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDEwICogc3RhdGUubGFzdEludFZhbHVlICsgKGNoIC0gMHgzMCAvKiAwICovKTsKICAgICAgc3RhdGUuYWR2YW5jZSgpOwogICAgfQogICAgcmV0dXJuIHN0YXRlLnBvcyAhPT0gc3RhcnQKICB9OwogIGZ1bmN0aW9uIGlzRGVjaW1hbERpZ2l0KGNoKSB7CiAgICByZXR1cm4gY2ggPj0gMHgzMCAvKiAwICovICYmIGNoIDw9IDB4MzkgLyogOSAqLwogIH0KCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtSGV4RGlnaXRzCiAgcHAkMS5yZWdleHBfZWF0SGV4RGlnaXRzID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHZhciBzdGFydCA9IHN0YXRlLnBvczsKICAgIHZhciBjaCA9IDA7CiAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAwOwogICAgd2hpbGUgKGlzSGV4RGlnaXQoY2ggPSBzdGF0ZS5jdXJyZW50KCkpKSB7CiAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IDE2ICogc3RhdGUubGFzdEludFZhbHVlICsgaGV4VG9JbnQoY2gpOwogICAgICBzdGF0ZS5hZHZhbmNlKCk7CiAgICB9CiAgICByZXR1cm4gc3RhdGUucG9zICE9PSBzdGFydAogIH07CiAgZnVuY3Rpb24gaXNIZXhEaWdpdChjaCkgewogICAgcmV0dXJuICgKICAgICAgKGNoID49IDB4MzAgLyogMCAqLyAmJiBjaCA8PSAweDM5IC8qIDkgKi8pIHx8CiAgICAgIChjaCA+PSAweDQxIC8qIEEgKi8gJiYgY2ggPD0gMHg0NiAvKiBGICovKSB8fAogICAgICAoY2ggPj0gMHg2MSAvKiBhICovICYmIGNoIDw9IDB4NjYgLyogZiAqLykKICAgICkKICB9CiAgZnVuY3Rpb24gaGV4VG9JbnQoY2gpIHsKICAgIGlmIChjaCA+PSAweDQxIC8qIEEgKi8gJiYgY2ggPD0gMHg0NiAvKiBGICovKSB7CiAgICAgIHJldHVybiAxMCArIChjaCAtIDB4NDEgLyogQSAqLykKICAgIH0KICAgIGlmIChjaCA+PSAweDYxIC8qIGEgKi8gJiYgY2ggPD0gMHg2NiAvKiBmICovKSB7CiAgICAgIHJldHVybiAxMCArIChjaCAtIDB4NjEgLyogYSAqLykKICAgIH0KICAgIHJldHVybiBjaCAtIDB4MzAgLyogMCAqLwogIH0KCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtYW5uZXhCLUxlZ2FjeU9jdGFsRXNjYXBlU2VxdWVuY2UKICAvLyBBbGxvd3Mgb25seSAwLTM3NyhvY3RhbCkgaS5lLiAwLTI1NShkZWNpbWFsKS4KICBwcCQxLnJlZ2V4cF9lYXRMZWdhY3lPY3RhbEVzY2FwZVNlcXVlbmNlID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIGlmICh0aGlzLnJlZ2V4cF9lYXRPY3RhbERpZ2l0KHN0YXRlKSkgewogICAgICB2YXIgbjEgPSBzdGF0ZS5sYXN0SW50VmFsdWU7CiAgICAgIGlmICh0aGlzLnJlZ2V4cF9lYXRPY3RhbERpZ2l0KHN0YXRlKSkgewogICAgICAgIHZhciBuMiA9IHN0YXRlLmxhc3RJbnRWYWx1ZTsKICAgICAgICBpZiAobjEgPD0gMyAmJiB0aGlzLnJlZ2V4cF9lYXRPY3RhbERpZ2l0KHN0YXRlKSkgewogICAgICAgICAgc3RhdGUubGFzdEludFZhbHVlID0gbjEgKiA2NCArIG4yICogOCArIHN0YXRlLmxhc3RJbnRWYWx1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3RhdGUubGFzdEludFZhbHVlID0gbjEgKiA4ICsgbjI7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRlLmxhc3RJbnRWYWx1ZSA9IG4xOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICByZXR1cm4gZmFsc2UKICB9OwoKICAvLyBodHRwczovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzguMC8jcHJvZC1PY3RhbERpZ2l0CiAgcHAkMS5yZWdleHBfZWF0T2N0YWxEaWdpdCA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB2YXIgY2ggPSBzdGF0ZS5jdXJyZW50KCk7CiAgICBpZiAoaXNPY3RhbERpZ2l0KGNoKSkgewogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSBjaCAtIDB4MzA7IC8qIDAgKi8KICAgICAgc3RhdGUuYWR2YW5jZSgpOwogICAgICByZXR1cm4gdHJ1ZQogICAgfQogICAgc3RhdGUubGFzdEludFZhbHVlID0gMDsKICAgIHJldHVybiBmYWxzZQogIH07CiAgZnVuY3Rpb24gaXNPY3RhbERpZ2l0KGNoKSB7CiAgICByZXR1cm4gY2ggPj0gMHgzMCAvKiAwICovICYmIGNoIDw9IDB4MzcgLyogNyAqLwogIH0KCiAgLy8gaHR0cHM6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi84LjAvI3Byb2QtSGV4NERpZ2l0cwogIC8vIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLUhleERpZ2l0CiAgLy8gQW5kIEhleERpZ2l0IEhleERpZ2l0IGluIGh0dHBzOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvOC4wLyNwcm9kLUhleEVzY2FwZVNlcXVlbmNlCiAgcHAkMS5yZWdleHBfZWF0Rml4ZWRIZXhEaWdpdHMgPSBmdW5jdGlvbihzdGF0ZSwgbGVuZ3RoKSB7CiAgICB2YXIgc3RhcnQgPSBzdGF0ZS5wb3M7CiAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgICB2YXIgY2ggPSBzdGF0ZS5jdXJyZW50KCk7CiAgICAgIGlmICghaXNIZXhEaWdpdChjaCkpIHsKICAgICAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgICBzdGF0ZS5sYXN0SW50VmFsdWUgPSAxNiAqIHN0YXRlLmxhc3RJbnRWYWx1ZSArIGhleFRvSW50KGNoKTsKICAgICAgc3RhdGUuYWR2YW5jZSgpOwogICAgfQogICAgcmV0dXJuIHRydWUKICB9OwoKICAvLyBPYmplY3QgdHlwZSB1c2VkIHRvIHJlcHJlc2VudCB0b2tlbnMuIE5vdGUgdGhhdCBub3JtYWxseSwgdG9rZW5zCiAgLy8gc2ltcGx5IGV4aXN0IGFzIHByb3BlcnRpZXMgb24gdGhlIHBhcnNlciBvYmplY3QuIFRoaXMgaXMgb25seQogIC8vIHVzZWQgZm9yIHRoZSBvblRva2VuIGNhbGxiYWNrIGFuZCB0aGUgZXh0ZXJuYWwgdG9rZW5pemVyLgoKICB2YXIgVG9rZW4gPSBmdW5jdGlvbiBUb2tlbihwKSB7CiAgICB0aGlzLnR5cGUgPSBwLnR5cGU7CiAgICB0aGlzLnZhbHVlID0gcC52YWx1ZTsKICAgIHRoaXMuc3RhcnQgPSBwLnN0YXJ0OwogICAgdGhpcy5lbmQgPSBwLmVuZDsKICAgIGlmIChwLm9wdGlvbnMubG9jYXRpb25zKQogICAgICB7IHRoaXMubG9jID0gbmV3IFNvdXJjZUxvY2F0aW9uKHAsIHAuc3RhcnRMb2MsIHAuZW5kTG9jKTsgfQogICAgaWYgKHAub3B0aW9ucy5yYW5nZXMpCiAgICAgIHsgdGhpcy5yYW5nZSA9IFtwLnN0YXJ0LCBwLmVuZF07IH0KICB9OwoKICAvLyAjIyBUb2tlbml6ZXIKCiAgdmFyIHBwID0gUGFyc2VyLnByb3RvdHlwZTsKCiAgLy8gTW92ZSB0byB0aGUgbmV4dCB0b2tlbgoKICBwcC5uZXh0ID0gZnVuY3Rpb24oaWdub3JlRXNjYXBlU2VxdWVuY2VJbktleXdvcmQpIHsKICAgIGlmICghaWdub3JlRXNjYXBlU2VxdWVuY2VJbktleXdvcmQgJiYgdGhpcy50eXBlLmtleXdvcmQgJiYgdGhpcy5jb250YWluc0VzYykKICAgICAgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUodGhpcy5zdGFydCwgIkVzY2FwZSBzZXF1ZW5jZSBpbiBrZXl3b3JkICIgKyB0aGlzLnR5cGUua2V5d29yZCk7IH0KICAgIGlmICh0aGlzLm9wdGlvbnMub25Ub2tlbikKICAgICAgeyB0aGlzLm9wdGlvbnMub25Ub2tlbihuZXcgVG9rZW4odGhpcykpOyB9CgogICAgdGhpcy5sYXN0VG9rRW5kID0gdGhpcy5lbmQ7CiAgICB0aGlzLmxhc3RUb2tTdGFydCA9IHRoaXMuc3RhcnQ7CiAgICB0aGlzLmxhc3RUb2tFbmRMb2MgPSB0aGlzLmVuZExvYzsKICAgIHRoaXMubGFzdFRva1N0YXJ0TG9jID0gdGhpcy5zdGFydExvYzsKICAgIHRoaXMubmV4dFRva2VuKCk7CiAgfTsKCiAgcHAuZ2V0VG9rZW4gPSBmdW5jdGlvbigpIHsKICAgIHRoaXMubmV4dCgpOwogICAgcmV0dXJuIG5ldyBUb2tlbih0aGlzKQogIH07CgogIC8vIElmIHdlJ3JlIGluIGFuIEVTNiBlbnZpcm9ubWVudCwgbWFrZSBwYXJzZXJzIGl0ZXJhYmxlCiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiKQogICAgeyBwcFtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciB0aGlzJDEkMSA9IHRoaXM7CgogICAgICByZXR1cm4gewogICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciB0b2tlbiA9IHRoaXMkMSQxLmdldFRva2VuKCk7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkb25lOiB0b2tlbi50eXBlID09PSB0eXBlcyQxLmVvZiwKICAgICAgICAgICAgdmFsdWU6IHRva2VuCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9OyB9CgogIC8vIFRvZ2dsZSBzdHJpY3QgbW9kZS4gUmUtcmVhZHMgdGhlIG5leHQgbnVtYmVyIG9yIHN0cmluZyB0byBwbGVhc2UKICAvLyBwZWRhbnRpYyB0ZXN0cyAoYCJ1c2Ugc3RyaWN0IjsgMDEwO2Agc2hvdWxkIGZhaWwpLgoKICAvLyBSZWFkIGEgc2luZ2xlIHRva2VuLCB1cGRhdGluZyB0aGUgcGFyc2VyIG9iamVjdCdzIHRva2VuLXJlbGF0ZWQKICAvLyBwcm9wZXJ0aWVzLgoKICBwcC5uZXh0VG9rZW4gPSBmdW5jdGlvbigpIHsKICAgIHZhciBjdXJDb250ZXh0ID0gdGhpcy5jdXJDb250ZXh0KCk7CiAgICBpZiAoIWN1ckNvbnRleHQgfHwgIWN1ckNvbnRleHQucHJlc2VydmVTcGFjZSkgeyB0aGlzLnNraXBTcGFjZSgpOyB9CgogICAgdGhpcy5zdGFydCA9IHRoaXMucG9zOwogICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpIHsgdGhpcy5zdGFydExvYyA9IHRoaXMuY3VyUG9zaXRpb24oKTsgfQogICAgaWYgKHRoaXMucG9zID49IHRoaXMuaW5wdXQubGVuZ3RoKSB7IHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEuZW9mKSB9CgogICAgaWYgKGN1ckNvbnRleHQub3ZlcnJpZGUpIHsgcmV0dXJuIGN1ckNvbnRleHQub3ZlcnJpZGUodGhpcykgfQogICAgZWxzZSB7IHRoaXMucmVhZFRva2VuKHRoaXMuZnVsbENoYXJDb2RlQXRQb3MoKSk7IH0KICB9OwoKICBwcC5yZWFkVG9rZW4gPSBmdW5jdGlvbihjb2RlKSB7CiAgICAvLyBJZGVudGlmaWVyIG9yIGtleXdvcmQuICdcdVhYWFgnIHNlcXVlbmNlcyBhcmUgYWxsb3dlZCBpbgogICAgLy8gaWRlbnRpZmllcnMsIHNvICdcJyBhbHNvIGRpc3BhdGNoZXMgdG8gdGhhdC4KICAgIGlmIChpc0lkZW50aWZpZXJTdGFydChjb2RlLCB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikgfHwgY29kZSA9PT0gOTIgLyogJ1wnICovKQogICAgICB7IHJldHVybiB0aGlzLnJlYWRXb3JkKCkgfQoKICAgIHJldHVybiB0aGlzLmdldFRva2VuRnJvbUNvZGUoY29kZSkKICB9OwoKICBwcC5mdWxsQ2hhckNvZGVBdFBvcyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGNvZGUgPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MpOwogICAgaWYgKGNvZGUgPD0gMHhkN2ZmIHx8IGNvZGUgPj0gMHhkYzAwKSB7IHJldHVybiBjb2RlIH0KICAgIHZhciBuZXh0ID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMSk7CiAgICByZXR1cm4gbmV4dCA8PSAweGRiZmYgfHwgbmV4dCA+PSAweGUwMDAgPyBjb2RlIDogKGNvZGUgPDwgMTApICsgbmV4dCAtIDB4MzVmZGMwMAogIH07CgogIHBwLnNraXBCbG9ja0NvbW1lbnQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBzdGFydExvYyA9IHRoaXMub3B0aW9ucy5vbkNvbW1lbnQgJiYgdGhpcy5jdXJQb3NpdGlvbigpOwogICAgdmFyIHN0YXJ0ID0gdGhpcy5wb3MsIGVuZCA9IHRoaXMuaW5wdXQuaW5kZXhPZigiKi8iLCB0aGlzLnBvcyArPSAyKTsKICAgIGlmIChlbmQgPT09IC0xKSB7IHRoaXMucmFpc2UodGhpcy5wb3MgLSAyLCAiVW50ZXJtaW5hdGVkIGNvbW1lbnQiKTsgfQogICAgdGhpcy5wb3MgPSBlbmQgKyAyOwogICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpIHsKICAgICAgZm9yICh2YXIgbmV4dEJyZWFrID0gKHZvaWQgMCksIHBvcyA9IHN0YXJ0OyAobmV4dEJyZWFrID0gbmV4dExpbmVCcmVhayh0aGlzLmlucHV0LCBwb3MsIHRoaXMucG9zKSkgPiAtMTspIHsKICAgICAgICArK3RoaXMuY3VyTGluZTsKICAgICAgICBwb3MgPSB0aGlzLmxpbmVTdGFydCA9IG5leHRCcmVhazsKICAgICAgfQogICAgfQogICAgaWYgKHRoaXMub3B0aW9ucy5vbkNvbW1lbnQpCiAgICAgIHsgdGhpcy5vcHRpb25zLm9uQ29tbWVudCh0cnVlLCB0aGlzLmlucHV0LnNsaWNlKHN0YXJ0ICsgMiwgZW5kKSwgc3RhcnQsIHRoaXMucG9zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0TG9jLCB0aGlzLmN1clBvc2l0aW9uKCkpOyB9CiAgfTsKCiAgcHAuc2tpcExpbmVDb21tZW50ID0gZnVuY3Rpb24oc3RhcnRTa2lwKSB7CiAgICB2YXIgc3RhcnQgPSB0aGlzLnBvczsKICAgIHZhciBzdGFydExvYyA9IHRoaXMub3B0aW9ucy5vbkNvbW1lbnQgJiYgdGhpcy5jdXJQb3NpdGlvbigpOwogICAgdmFyIGNoID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICs9IHN0YXJ0U2tpcCk7CiAgICB3aGlsZSAodGhpcy5wb3MgPCB0aGlzLmlucHV0Lmxlbmd0aCAmJiAhaXNOZXdMaW5lKGNoKSkgewogICAgICBjaCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCgrK3RoaXMucG9zKTsKICAgIH0KICAgIGlmICh0aGlzLm9wdGlvbnMub25Db21tZW50KQogICAgICB7IHRoaXMub3B0aW9ucy5vbkNvbW1lbnQoZmFsc2UsIHRoaXMuaW5wdXQuc2xpY2Uoc3RhcnQgKyBzdGFydFNraXAsIHRoaXMucG9zKSwgc3RhcnQsIHRoaXMucG9zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0TG9jLCB0aGlzLmN1clBvc2l0aW9uKCkpOyB9CiAgfTsKCiAgLy8gQ2FsbGVkIGF0IHRoZSBzdGFydCBvZiB0aGUgcGFyc2UgYW5kIGFmdGVyIGV2ZXJ5IHRva2VuLiBTa2lwcwogIC8vIHdoaXRlc3BhY2UgYW5kIGNvbW1lbnRzLCBhbmQuCgogIHBwLnNraXBTcGFjZSA9IGZ1bmN0aW9uKCkgewogICAgbG9vcDogd2hpbGUgKHRoaXMucG9zIDwgdGhpcy5pbnB1dC5sZW5ndGgpIHsKICAgICAgdmFyIGNoID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zKTsKICAgICAgc3dpdGNoIChjaCkgewogICAgICBjYXNlIDMyOiBjYXNlIDE2MDogLy8gJyAnCiAgICAgICAgKyt0aGlzLnBvczsKICAgICAgICBicmVhawogICAgICBjYXNlIDEzOgogICAgICAgIGlmICh0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MgKyAxKSA9PT0gMTApIHsKICAgICAgICAgICsrdGhpcy5wb3M7CiAgICAgICAgfQogICAgICBjYXNlIDEwOiBjYXNlIDgyMzI6IGNhc2UgODIzMzoKICAgICAgICArK3RoaXMucG9zOwogICAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9jYXRpb25zKSB7CiAgICAgICAgICArK3RoaXMuY3VyTGluZTsKICAgICAgICAgIHRoaXMubGluZVN0YXJ0ID0gdGhpcy5wb3M7CiAgICAgICAgfQogICAgICAgIGJyZWFrCiAgICAgIGNhc2UgNDc6IC8vICcvJwogICAgICAgIHN3aXRjaCAodGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMSkpIHsKICAgICAgICBjYXNlIDQyOiAvLyAnKicKICAgICAgICAgIHRoaXMuc2tpcEJsb2NrQ29tbWVudCgpOwogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgdGhpcy5za2lwTGluZUNvbW1lbnQoMik7CiAgICAgICAgICBicmVhawogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhayBsb29wCiAgICAgICAgfQogICAgICAgIGJyZWFrCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgaWYgKGNoID4gOCAmJiBjaCA8IDE0IHx8IGNoID49IDU3NjAgJiYgbm9uQVNDSUl3aGl0ZXNwYWNlLnRlc3QoU3RyaW5nLmZyb21DaGFyQ29kZShjaCkpKSB7CiAgICAgICAgICArK3RoaXMucG9zOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBicmVhayBsb29wCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gQ2FsbGVkIGF0IHRoZSBlbmQgb2YgZXZlcnkgdG9rZW4uIFNldHMgYGVuZGAsIGB2YWxgLCBhbmQKICAvLyBtYWludGFpbnMgYGNvbnRleHRgIGFuZCBgZXhwckFsbG93ZWRgLCBhbmQgc2tpcHMgdGhlIHNwYWNlIGFmdGVyCiAgLy8gdGhlIHRva2VuLCBzbyB0aGF0IHRoZSBuZXh0IG9uZSdzIGBzdGFydGAgd2lsbCBwb2ludCBhdCB0aGUKICAvLyByaWdodCBwb3NpdGlvbi4KCiAgcHAuZmluaXNoVG9rZW4gPSBmdW5jdGlvbih0eXBlLCB2YWwpIHsKICAgIHRoaXMuZW5kID0gdGhpcy5wb3M7CiAgICBpZiAodGhpcy5vcHRpb25zLmxvY2F0aW9ucykgeyB0aGlzLmVuZExvYyA9IHRoaXMuY3VyUG9zaXRpb24oKTsgfQogICAgdmFyIHByZXZUeXBlID0gdGhpcy50eXBlOwogICAgdGhpcy50eXBlID0gdHlwZTsKICAgIHRoaXMudmFsdWUgPSB2YWw7CgogICAgdGhpcy51cGRhdGVDb250ZXh0KHByZXZUeXBlKTsKICB9OwoKICAvLyAjIyMgVG9rZW4gcmVhZGluZwoKICAvLyBUaGlzIGlzIHRoZSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB0byBmZXRjaCB0aGUgbmV4dCB0b2tlbi4gSXQKICAvLyBpcyBzb21ld2hhdCBvYnNjdXJlLCBiZWNhdXNlIGl0IHdvcmtzIGluIGNoYXJhY3RlciBjb2RlcyByYXRoZXIKICAvLyB0aGFuIGNoYXJhY3RlcnMsIGFuZCBiZWNhdXNlIG9wZXJhdG9yIHBhcnNpbmcgaGFzIGJlZW4gaW5saW5lZAogIC8vIGludG8gaXQuCiAgLy8KICAvLyBBbGwgaW4gdGhlIG5hbWUgb2Ygc3BlZWQuCiAgLy8KICBwcC5yZWFkVG9rZW5fZG90ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgbmV4dCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDEpOwogICAgaWYgKG5leHQgPj0gNDggJiYgbmV4dCA8PSA1NykgeyByZXR1cm4gdGhpcy5yZWFkTnVtYmVyKHRydWUpIH0KICAgIHZhciBuZXh0MiA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDIpOwogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2ICYmIG5leHQgPT09IDQ2ICYmIG5leHQyID09PSA0NikgeyAvLyA0NiA9IGRvdCAnLicKICAgICAgdGhpcy5wb3MgKz0gMzsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZXMkMS5lbGxpcHNpcykKICAgIH0gZWxzZSB7CiAgICAgICsrdGhpcy5wb3M7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEuZG90KQogICAgfQogIH07CgogIHBwLnJlYWRUb2tlbl9zbGFzaCA9IGZ1bmN0aW9uKCkgeyAvLyAnLycKICAgIHZhciBuZXh0ID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMSk7CiAgICBpZiAodGhpcy5leHByQWxsb3dlZCkgeyArK3RoaXMucG9zOyByZXR1cm4gdGhpcy5yZWFkUmVnZXhwKCkgfQogICAgaWYgKG5leHQgPT09IDYxKSB7IHJldHVybiB0aGlzLmZpbmlzaE9wKHR5cGVzJDEuYXNzaWduLCAyKSB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLnNsYXNoLCAxKQogIH07CgogIHBwLnJlYWRUb2tlbl9tdWx0X21vZHVsb19leHAgPSBmdW5jdGlvbihjb2RlKSB7IC8vICclKicKICAgIHZhciBuZXh0ID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMSk7CiAgICB2YXIgc2l6ZSA9IDE7CiAgICB2YXIgdG9rZW50eXBlID0gY29kZSA9PT0gNDIgPyB0eXBlcyQxLnN0YXIgOiB0eXBlcyQxLm1vZHVsbzsKCiAgICAvLyBleHBvbmVudGlhdGlvbiBvcGVyYXRvciAqKiBhbmQgKio9CiAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDcgJiYgY29kZSA9PT0gNDIgJiYgbmV4dCA9PT0gNDIpIHsKICAgICAgKytzaXplOwogICAgICB0b2tlbnR5cGUgPSB0eXBlcyQxLnN0YXJzdGFyOwogICAgICBuZXh0ID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMik7CiAgICB9CgogICAgaWYgKG5leHQgPT09IDYxKSB7IHJldHVybiB0aGlzLmZpbmlzaE9wKHR5cGVzJDEuYXNzaWduLCBzaXplICsgMSkgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoT3AodG9rZW50eXBlLCBzaXplKQogIH07CgogIHBwLnJlYWRUb2tlbl9waXBlX2FtcCA9IGZ1bmN0aW9uKGNvZGUpIHsgLy8gJ3wmJwogICAgdmFyIG5leHQgPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MgKyAxKTsKICAgIGlmIChuZXh0ID09PSBjb2RlKSB7CiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTIpIHsKICAgICAgICB2YXIgbmV4dDIgPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MgKyAyKTsKICAgICAgICBpZiAobmV4dDIgPT09IDYxKSB7IHJldHVybiB0aGlzLmZpbmlzaE9wKHR5cGVzJDEuYXNzaWduLCAzKSB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuZmluaXNoT3AoY29kZSA9PT0gMTI0ID8gdHlwZXMkMS5sb2dpY2FsT1IgOiB0eXBlcyQxLmxvZ2ljYWxBTkQsIDIpCiAgICB9CiAgICBpZiAobmV4dCA9PT0gNjEpIHsgcmV0dXJuIHRoaXMuZmluaXNoT3AodHlwZXMkMS5hc3NpZ24sIDIpIH0KICAgIHJldHVybiB0aGlzLmZpbmlzaE9wKGNvZGUgPT09IDEyNCA/IHR5cGVzJDEuYml0d2lzZU9SIDogdHlwZXMkMS5iaXR3aXNlQU5ELCAxKQogIH07CgogIHBwLnJlYWRUb2tlbl9jYXJldCA9IGZ1bmN0aW9uKCkgeyAvLyAnXicKICAgIHZhciBuZXh0ID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMSk7CiAgICBpZiAobmV4dCA9PT0gNjEpIHsgcmV0dXJuIHRoaXMuZmluaXNoT3AodHlwZXMkMS5hc3NpZ24sIDIpIH0KICAgIHJldHVybiB0aGlzLmZpbmlzaE9wKHR5cGVzJDEuYml0d2lzZVhPUiwgMSkKICB9OwoKICBwcC5yZWFkVG9rZW5fcGx1c19taW4gPSBmdW5jdGlvbihjb2RlKSB7IC8vICcrLScKICAgIHZhciBuZXh0ID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMSk7CiAgICBpZiAobmV4dCA9PT0gY29kZSkgewogICAgICBpZiAobmV4dCA9PT0gNDUgJiYgIXRoaXMuaW5Nb2R1bGUgJiYgdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMikgPT09IDYyICYmCiAgICAgICAgICAodGhpcy5sYXN0VG9rRW5kID09PSAwIHx8IGxpbmVCcmVhay50ZXN0KHRoaXMuaW5wdXQuc2xpY2UodGhpcy5sYXN0VG9rRW5kLCB0aGlzLnBvcykpKSkgewogICAgICAgIC8vIEEgYC0tPmAgbGluZSBjb21tZW50CiAgICAgICAgdGhpcy5za2lwTGluZUNvbW1lbnQoMyk7CiAgICAgICAgdGhpcy5za2lwU3BhY2UoKTsKICAgICAgICByZXR1cm4gdGhpcy5uZXh0VG9rZW4oKQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE9wKHR5cGVzJDEuaW5jRGVjLCAyKQogICAgfQogICAgaWYgKG5leHQgPT09IDYxKSB7IHJldHVybiB0aGlzLmZpbmlzaE9wKHR5cGVzJDEuYXNzaWduLCAyKSB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLnBsdXNNaW4sIDEpCiAgfTsKCiAgcHAucmVhZFRva2VuX2x0X2d0ID0gZnVuY3Rpb24oY29kZSkgeyAvLyAnPD4nCiAgICB2YXIgbmV4dCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDEpOwogICAgdmFyIHNpemUgPSAxOwogICAgaWYgKG5leHQgPT09IGNvZGUpIHsKICAgICAgc2l6ZSA9IGNvZGUgPT09IDYyICYmIHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDIpID09PSA2MiA/IDMgOiAyOwogICAgICBpZiAodGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgc2l6ZSkgPT09IDYxKSB7IHJldHVybiB0aGlzLmZpbmlzaE9wKHR5cGVzJDEuYXNzaWduLCBzaXplICsgMSkgfQogICAgICByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLmJpdFNoaWZ0LCBzaXplKQogICAgfQogICAgaWYgKG5leHQgPT09IDMzICYmIGNvZGUgPT09IDYwICYmICF0aGlzLmluTW9kdWxlICYmIHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDIpID09PSA0NSAmJgogICAgICAgIHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDMpID09PSA0NSkgewogICAgICAvLyBgPCEtLWAsIGFuIFhNTC1zdHlsZSBjb21tZW50IHRoYXQgc2hvdWxkIGJlIGludGVycHJldGVkIGFzIGEgbGluZSBjb21tZW50CiAgICAgIHRoaXMuc2tpcExpbmVDb21tZW50KDQpOwogICAgICB0aGlzLnNraXBTcGFjZSgpOwogICAgICByZXR1cm4gdGhpcy5uZXh0VG9rZW4oKQogICAgfQogICAgaWYgKG5leHQgPT09IDYxKSB7IHNpemUgPSAyOyB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLnJlbGF0aW9uYWwsIHNpemUpCiAgfTsKCiAgcHAucmVhZFRva2VuX2VxX2V4Y2wgPSBmdW5jdGlvbihjb2RlKSB7IC8vICc9IScKICAgIHZhciBuZXh0ID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMSk7CiAgICBpZiAobmV4dCA9PT0gNjEpIHsgcmV0dXJuIHRoaXMuZmluaXNoT3AodHlwZXMkMS5lcXVhbGl0eSwgdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMikgPT09IDYxID8gMyA6IDIpIH0KICAgIGlmIChjb2RlID09PSA2MSAmJiBuZXh0ID09PSA2MiAmJiB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikgeyAvLyAnPT4nCiAgICAgIHRoaXMucG9zICs9IDI7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEuYXJyb3cpCiAgICB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hPcChjb2RlID09PSA2MSA/IHR5cGVzJDEuZXEgOiB0eXBlcyQxLnByZWZpeCwgMSkKICB9OwoKICBwcC5yZWFkVG9rZW5fcXVlc3Rpb24gPSBmdW5jdGlvbigpIHsgLy8gJz8nCiAgICB2YXIgZWNtYVZlcnNpb24gPSB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb247CiAgICBpZiAoZWNtYVZlcnNpb24gPj0gMTEpIHsKICAgICAgdmFyIG5leHQgPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MgKyAxKTsKICAgICAgaWYgKG5leHQgPT09IDQ2KSB7CiAgICAgICAgdmFyIG5leHQyID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zICsgMik7CiAgICAgICAgaWYgKG5leHQyIDwgNDggfHwgbmV4dDIgPiA1NykgeyByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLnF1ZXN0aW9uRG90LCAyKSB9CiAgICAgIH0KICAgICAgaWYgKG5leHQgPT09IDYzKSB7CiAgICAgICAgaWYgKGVjbWFWZXJzaW9uID49IDEyKSB7CiAgICAgICAgICB2YXIgbmV4dDIkMSA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDIpOwogICAgICAgICAgaWYgKG5leHQyJDEgPT09IDYxKSB7IHJldHVybiB0aGlzLmZpbmlzaE9wKHR5cGVzJDEuYXNzaWduLCAzKSB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLmZpbmlzaE9wKHR5cGVzJDEuY29hbGVzY2UsIDIpCiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0aGlzLmZpbmlzaE9wKHR5cGVzJDEucXVlc3Rpb24sIDEpCiAgfTsKCiAgcHAucmVhZFRva2VuX251bWJlclNpZ24gPSBmdW5jdGlvbigpIHsgLy8gJyMnCiAgICB2YXIgZWNtYVZlcnNpb24gPSB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb247CiAgICB2YXIgY29kZSA9IDM1OyAvLyAnIycKICAgIGlmIChlY21hVmVyc2lvbiA+PSAxMykgewogICAgICArK3RoaXMucG9zOwogICAgICBjb2RlID0gdGhpcy5mdWxsQ2hhckNvZGVBdFBvcygpOwogICAgICBpZiAoaXNJZGVudGlmaWVyU3RhcnQoY29kZSwgdHJ1ZSkgfHwgY29kZSA9PT0gOTIgLyogJ1wnICovKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZXMkMS5wcml2YXRlSWQsIHRoaXMucmVhZFdvcmQxKCkpCiAgICAgIH0KICAgIH0KCiAgICB0aGlzLnJhaXNlKHRoaXMucG9zLCAiVW5leHBlY3RlZCBjaGFyYWN0ZXIgJyIgKyBjb2RlUG9pbnRUb1N0cmluZyhjb2RlKSArICInIik7CiAgfTsKCiAgcHAuZ2V0VG9rZW5Gcm9tQ29kZSA9IGZ1bmN0aW9uKGNvZGUpIHsKICAgIHN3aXRjaCAoY29kZSkgewogICAgLy8gVGhlIGludGVycHJldGF0aW9uIG9mIGEgZG90IGRlcGVuZHMgb24gd2hldGhlciBpdCBpcyBmb2xsb3dlZAogICAgLy8gYnkgYSBkaWdpdCBvciBhbm90aGVyIHR3byBkb3RzLgogICAgY2FzZSA0NjogLy8gJy4nCiAgICAgIHJldHVybiB0aGlzLnJlYWRUb2tlbl9kb3QoKQoKICAgIC8vIFB1bmN0dWF0aW9uIHRva2Vucy4KICAgIGNhc2UgNDA6ICsrdGhpcy5wb3M7IHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEucGFyZW5MKQogICAgY2FzZSA0MTogKyt0aGlzLnBvczsgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZXMkMS5wYXJlblIpCiAgICBjYXNlIDU5OiArK3RoaXMucG9zOyByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLnNlbWkpCiAgICBjYXNlIDQ0OiArK3RoaXMucG9zOyByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLmNvbW1hKQogICAgY2FzZSA5MTogKyt0aGlzLnBvczsgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZXMkMS5icmFja2V0TCkKICAgIGNhc2UgOTM6ICsrdGhpcy5wb3M7IHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEuYnJhY2tldFIpCiAgICBjYXNlIDEyMzogKyt0aGlzLnBvczsgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZXMkMS5icmFjZUwpCiAgICBjYXNlIDEyNTogKyt0aGlzLnBvczsgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZXMkMS5icmFjZVIpCiAgICBjYXNlIDU4OiArK3RoaXMucG9zOyByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLmNvbG9uKQoKICAgIGNhc2UgOTY6IC8vICdgJwogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uIDwgNikgeyBicmVhayB9CiAgICAgICsrdGhpcy5wb3M7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEuYmFja1F1b3RlKQoKICAgIGNhc2UgNDg6IC8vICcwJwogICAgICB2YXIgbmV4dCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDEpOwogICAgICBpZiAobmV4dCA9PT0gMTIwIHx8IG5leHQgPT09IDg4KSB7IHJldHVybiB0aGlzLnJlYWRSYWRpeE51bWJlcigxNikgfSAvLyAnMHgnLCAnMFgnIC0gaGV4IG51bWJlcgogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpIHsKICAgICAgICBpZiAobmV4dCA9PT0gMTExIHx8IG5leHQgPT09IDc5KSB7IHJldHVybiB0aGlzLnJlYWRSYWRpeE51bWJlcig4KSB9IC8vICcwbycsICcwTycgLSBvY3RhbCBudW1iZXIKICAgICAgICBpZiAobmV4dCA9PT0gOTggfHwgbmV4dCA9PT0gNjYpIHsgcmV0dXJuIHRoaXMucmVhZFJhZGl4TnVtYmVyKDIpIH0gLy8gJzBiJywgJzBCJyAtIGJpbmFyeSBudW1iZXIKICAgICAgfQoKICAgIC8vIEFueXRoaW5nIGVsc2UgYmVnaW5uaW5nIHdpdGggYSBkaWdpdCBpcyBhbiBpbnRlZ2VyLCBvY3RhbAogICAgLy8gbnVtYmVyLCBvciBmbG9hdC4KICAgIGNhc2UgNDk6IGNhc2UgNTA6IGNhc2UgNTE6IGNhc2UgNTI6IGNhc2UgNTM6IGNhc2UgNTQ6IGNhc2UgNTU6IGNhc2UgNTY6IGNhc2UgNTc6IC8vIDEtOQogICAgICByZXR1cm4gdGhpcy5yZWFkTnVtYmVyKGZhbHNlKQoKICAgIC8vIFF1b3RlcyBwcm9kdWNlIHN0cmluZ3MuCiAgICBjYXNlIDM0OiBjYXNlIDM5OiAvLyAnIicsICInIgogICAgICByZXR1cm4gdGhpcy5yZWFkU3RyaW5nKGNvZGUpCgogICAgLy8gT3BlcmF0b3JzIGFyZSBwYXJzZWQgaW5saW5lIGluIHRpbnkgc3RhdGUgbWFjaGluZXMuICc9JyAoNjEpIGlzCiAgICAvLyBvZnRlbiByZWZlcnJlZCB0by4gYGZpbmlzaE9wYCBzaW1wbHkgc2tpcHMgdGhlIGFtb3VudCBvZgogICAgLy8gY2hhcmFjdGVycyBpdCBpcyBnaXZlbiBhcyBzZWNvbmQgYXJndW1lbnQsIGFuZCByZXR1cm5zIGEgdG9rZW4KICAgIC8vIG9mIHRoZSB0eXBlIGdpdmVuIGJ5IGl0cyBmaXJzdCBhcmd1bWVudC4KICAgIGNhc2UgNDc6IC8vICcvJwogICAgICByZXR1cm4gdGhpcy5yZWFkVG9rZW5fc2xhc2goKQoKICAgIGNhc2UgMzc6IGNhc2UgNDI6IC8vICclKicKICAgICAgcmV0dXJuIHRoaXMucmVhZFRva2VuX211bHRfbW9kdWxvX2V4cChjb2RlKQoKICAgIGNhc2UgMTI0OiBjYXNlIDM4OiAvLyAnfCYnCiAgICAgIHJldHVybiB0aGlzLnJlYWRUb2tlbl9waXBlX2FtcChjb2RlKQoKICAgIGNhc2UgOTQ6IC8vICdeJwogICAgICByZXR1cm4gdGhpcy5yZWFkVG9rZW5fY2FyZXQoKQoKICAgIGNhc2UgNDM6IGNhc2UgNDU6IC8vICcrLScKICAgICAgcmV0dXJuIHRoaXMucmVhZFRva2VuX3BsdXNfbWluKGNvZGUpCgogICAgY2FzZSA2MDogY2FzZSA2MjogLy8gJzw+JwogICAgICByZXR1cm4gdGhpcy5yZWFkVG9rZW5fbHRfZ3QoY29kZSkKCiAgICBjYXNlIDYxOiBjYXNlIDMzOiAvLyAnPSEnCiAgICAgIHJldHVybiB0aGlzLnJlYWRUb2tlbl9lcV9leGNsKGNvZGUpCgogICAgY2FzZSA2MzogLy8gJz8nCiAgICAgIHJldHVybiB0aGlzLnJlYWRUb2tlbl9xdWVzdGlvbigpCgogICAgY2FzZSAxMjY6IC8vICd+JwogICAgICByZXR1cm4gdGhpcy5maW5pc2hPcCh0eXBlcyQxLnByZWZpeCwgMSkKCiAgICBjYXNlIDM1OiAvLyAnIycKICAgICAgcmV0dXJuIHRoaXMucmVhZFRva2VuX251bWJlclNpZ24oKQogICAgfQoKICAgIHRoaXMucmFpc2UodGhpcy5wb3MsICJVbmV4cGVjdGVkIGNoYXJhY3RlciAnIiArIGNvZGVQb2ludFRvU3RyaW5nKGNvZGUpICsgIiciKTsKICB9OwoKICBwcC5maW5pc2hPcCA9IGZ1bmN0aW9uKHR5cGUsIHNpemUpIHsKICAgIHZhciBzdHIgPSB0aGlzLmlucHV0LnNsaWNlKHRoaXMucG9zLCB0aGlzLnBvcyArIHNpemUpOwogICAgdGhpcy5wb3MgKz0gc2l6ZTsKICAgIHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGUsIHN0cikKICB9OwoKICBwcC5yZWFkUmVnZXhwID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZXNjYXBlZCwgaW5DbGFzcywgc3RhcnQgPSB0aGlzLnBvczsKICAgIGZvciAoOzspIHsKICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMuaW5wdXQubGVuZ3RoKSB7IHRoaXMucmFpc2Uoc3RhcnQsICJVbnRlcm1pbmF0ZWQgcmVndWxhciBleHByZXNzaW9uIik7IH0KICAgICAgdmFyIGNoID0gdGhpcy5pbnB1dC5jaGFyQXQodGhpcy5wb3MpOwogICAgICBpZiAobGluZUJyZWFrLnRlc3QoY2gpKSB7IHRoaXMucmFpc2Uoc3RhcnQsICJVbnRlcm1pbmF0ZWQgcmVndWxhciBleHByZXNzaW9uIik7IH0KICAgICAgaWYgKCFlc2NhcGVkKSB7CiAgICAgICAgaWYgKGNoID09PSAiWyIpIHsgaW5DbGFzcyA9IHRydWU7IH0KICAgICAgICBlbHNlIGlmIChjaCA9PT0gIl0iICYmIGluQ2xhc3MpIHsgaW5DbGFzcyA9IGZhbHNlOyB9CiAgICAgICAgZWxzZSBpZiAoY2ggPT09ICIvIiAmJiAhaW5DbGFzcykgeyBicmVhayB9CiAgICAgICAgZXNjYXBlZCA9IGNoID09PSAiXFwiOwogICAgICB9IGVsc2UgeyBlc2NhcGVkID0gZmFsc2U7IH0KICAgICAgKyt0aGlzLnBvczsKICAgIH0KICAgIHZhciBwYXR0ZXJuID0gdGhpcy5pbnB1dC5zbGljZShzdGFydCwgdGhpcy5wb3MpOwogICAgKyt0aGlzLnBvczsKICAgIHZhciBmbGFnc1N0YXJ0ID0gdGhpcy5wb3M7CiAgICB2YXIgZmxhZ3MgPSB0aGlzLnJlYWRXb3JkMSgpOwogICAgaWYgKHRoaXMuY29udGFpbnNFc2MpIHsgdGhpcy51bmV4cGVjdGVkKGZsYWdzU3RhcnQpOyB9CgogICAgLy8gVmFsaWRhdGUgcGF0dGVybgogICAgdmFyIHN0YXRlID0gdGhpcy5yZWdleHBTdGF0ZSB8fCAodGhpcy5yZWdleHBTdGF0ZSA9IG5ldyBSZWdFeHBWYWxpZGF0aW9uU3RhdGUodGhpcykpOwogICAgc3RhdGUucmVzZXQoc3RhcnQsIHBhdHRlcm4sIGZsYWdzKTsKICAgIHRoaXMudmFsaWRhdGVSZWdFeHBGbGFncyhzdGF0ZSk7CiAgICB0aGlzLnZhbGlkYXRlUmVnRXhwUGF0dGVybihzdGF0ZSk7CgogICAgLy8gQ3JlYXRlIExpdGVyYWwjdmFsdWUgcHJvcGVydHkgdmFsdWUuCiAgICB2YXIgdmFsdWUgPSBudWxsOwogICAgdHJ5IHsKICAgICAgdmFsdWUgPSBuZXcgUmVnRXhwKHBhdHRlcm4sIGZsYWdzKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgLy8gRVNUcmVlIHJlcXVpcmVzIG51bGwgaWYgaXQgZmFpbGVkIHRvIGluc3RhbnRpYXRlIFJlZ0V4cCBvYmplY3QuCiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9lc3RyZWUvZXN0cmVlL2Jsb2IvYTI3MDAzYWRmNGZkN2JmYWQ0NGRlOWNlZjM3MmEyZWFjZDUyN2IxYy9lczUubWQjcmVnZXhwbGl0ZXJhbAogICAgfQoKICAgIHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEucmVnZXhwLCB7cGF0dGVybjogcGF0dGVybiwgZmxhZ3M6IGZsYWdzLCB2YWx1ZTogdmFsdWV9KQogIH07CgogIC8vIFJlYWQgYW4gaW50ZWdlciBpbiB0aGUgZ2l2ZW4gcmFkaXguIFJldHVybiBudWxsIGlmIHplcm8gZGlnaXRzCiAgLy8gd2VyZSByZWFkLCB0aGUgaW50ZWdlciB2YWx1ZSBvdGhlcndpc2UuIFdoZW4gYGxlbmAgaXMgZ2l2ZW4sIHRoaXMKICAvLyB3aWxsIHJldHVybiBgbnVsbGAgdW5sZXNzIHRoZSBpbnRlZ2VyIGhhcyBleGFjdGx5IGBsZW5gIGRpZ2l0cy4KCiAgcHAucmVhZEludCA9IGZ1bmN0aW9uKHJhZGl4LCBsZW4sIG1heWJlTGVnYWN5T2N0YWxOdW1lcmljTGl0ZXJhbCkgewogICAgLy8gYGxlbmAgaXMgdXNlZCBmb3IgY2hhcmFjdGVyIGVzY2FwZSBzZXF1ZW5jZXMuIEluIHRoYXQgY2FzZSwgZGlzYWxsb3cgc2VwYXJhdG9ycy4KICAgIHZhciBhbGxvd1NlcGFyYXRvcnMgPSB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTIgJiYgbGVuID09PSB1bmRlZmluZWQ7CgogICAgLy8gYG1heWJlTGVnYWN5T2N0YWxOdW1lcmljTGl0ZXJhbGAgaXMgdHJ1ZSBpZiBpdCBkb2Vzbid0IGhhdmUgcHJlZml4ICgweCwwbywwYikKICAgIC8vIGFuZCBpc24ndCBmcmFjdGlvbiBwYXJ0IG5vciBleHBvbmVudCBwYXJ0LiBJbiB0aGF0IGNhc2UsIGlmIHRoZSBmaXJzdCBkaWdpdAogICAgLy8gaXMgemVybyB0aGVuIGRpc2FsbG93IHNlcGFyYXRvcnMuCiAgICB2YXIgaXNMZWdhY3lPY3RhbE51bWVyaWNMaXRlcmFsID0gbWF5YmVMZWdhY3lPY3RhbE51bWVyaWNMaXRlcmFsICYmIHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcykgPT09IDQ4OwoKICAgIHZhciBzdGFydCA9IHRoaXMucG9zLCB0b3RhbCA9IDAsIGxhc3RDb2RlID0gMDsKICAgIGZvciAodmFyIGkgPSAwLCBlID0gbGVuID09IG51bGwgPyBJbmZpbml0eSA6IGxlbjsgaSA8IGU7ICsraSwgKyt0aGlzLnBvcykgewogICAgICB2YXIgY29kZSA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyksIHZhbCA9ICh2b2lkIDApOwoKICAgICAgaWYgKGFsbG93U2VwYXJhdG9ycyAmJiBjb2RlID09PSA5NSkgewogICAgICAgIGlmIChpc0xlZ2FjeU9jdGFsTnVtZXJpY0xpdGVyYWwpIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHRoaXMucG9zLCAiTnVtZXJpYyBzZXBhcmF0b3IgaXMgbm90IGFsbG93ZWQgaW4gbGVnYWN5IG9jdGFsIG51bWVyaWMgbGl0ZXJhbHMiKTsgfQogICAgICAgIGlmIChsYXN0Q29kZSA9PT0gOTUpIHsgdGhpcy5yYWlzZVJlY292ZXJhYmxlKHRoaXMucG9zLCAiTnVtZXJpYyBzZXBhcmF0b3IgbXVzdCBiZSBleGFjdGx5IG9uZSB1bmRlcnNjb3JlIik7IH0KICAgICAgICBpZiAoaSA9PT0gMCkgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUodGhpcy5wb3MsICJOdW1lcmljIHNlcGFyYXRvciBpcyBub3QgYWxsb3dlZCBhdCB0aGUgZmlyc3Qgb2YgZGlnaXRzIik7IH0KICAgICAgICBsYXN0Q29kZSA9IGNvZGU7CiAgICAgICAgY29udGludWUKICAgICAgfQoKICAgICAgaWYgKGNvZGUgPj0gOTcpIHsgdmFsID0gY29kZSAtIDk3ICsgMTA7IH0gLy8gYQogICAgICBlbHNlIGlmIChjb2RlID49IDY1KSB7IHZhbCA9IGNvZGUgLSA2NSArIDEwOyB9IC8vIEEKICAgICAgZWxzZSBpZiAoY29kZSA+PSA0OCAmJiBjb2RlIDw9IDU3KSB7IHZhbCA9IGNvZGUgLSA0ODsgfSAvLyAwLTkKICAgICAgZWxzZSB7IHZhbCA9IEluZmluaXR5OyB9CiAgICAgIGlmICh2YWwgPj0gcmFkaXgpIHsgYnJlYWsgfQogICAgICBsYXN0Q29kZSA9IGNvZGU7CiAgICAgIHRvdGFsID0gdG90YWwgKiByYWRpeCArIHZhbDsKICAgIH0KCiAgICBpZiAoYWxsb3dTZXBhcmF0b3JzICYmIGxhc3RDb2RlID09PSA5NSkgeyB0aGlzLnJhaXNlUmVjb3ZlcmFibGUodGhpcy5wb3MgLSAxLCAiTnVtZXJpYyBzZXBhcmF0b3IgaXMgbm90IGFsbG93ZWQgYXQgdGhlIGxhc3Qgb2YgZGlnaXRzIik7IH0KICAgIGlmICh0aGlzLnBvcyA9PT0gc3RhcnQgfHwgbGVuICE9IG51bGwgJiYgdGhpcy5wb3MgLSBzdGFydCAhPT0gbGVuKSB7IHJldHVybiBudWxsIH0KCiAgICByZXR1cm4gdG90YWwKICB9OwoKICBmdW5jdGlvbiBzdHJpbmdUb051bWJlcihzdHIsIGlzTGVnYWN5T2N0YWxOdW1lcmljTGl0ZXJhbCkgewogICAgaWYgKGlzTGVnYWN5T2N0YWxOdW1lcmljTGl0ZXJhbCkgewogICAgICByZXR1cm4gcGFyc2VJbnQoc3RyLCA4KQogICAgfQoKICAgIC8vIGBwYXJzZUZsb2F0KHZhbHVlKWAgc3RvcHMgcGFyc2luZyBhdCB0aGUgZmlyc3QgbnVtZXJpYyBzZXBhcmF0b3IgdGhlbiByZXR1cm5zIGEgd3JvbmcgdmFsdWUuCiAgICByZXR1cm4gcGFyc2VGbG9hdChzdHIucmVwbGFjZSgvXy9nLCAiIikpCiAgfQoKICBmdW5jdGlvbiBzdHJpbmdUb0JpZ0ludChzdHIpIHsKICAgIGlmICh0eXBlb2YgQmlnSW50ICE9PSAiZnVuY3Rpb24iKSB7CiAgICAgIHJldHVybiBudWxsCiAgICB9CgogICAgLy8gYEJpZ0ludCh2YWx1ZSlgIHRocm93cyBzeW50YXggZXJyb3IgaWYgdGhlIHN0cmluZyBjb250YWlucyBudW1lcmljIHNlcGFyYXRvcnMuCiAgICByZXR1cm4gQmlnSW50KHN0ci5yZXBsYWNlKC9fL2csICIiKSkKICB9CgogIHBwLnJlYWRSYWRpeE51bWJlciA9IGZ1bmN0aW9uKHJhZGl4KSB7CiAgICB2YXIgc3RhcnQgPSB0aGlzLnBvczsKICAgIHRoaXMucG9zICs9IDI7IC8vIDB4CiAgICB2YXIgdmFsID0gdGhpcy5yZWFkSW50KHJhZGl4KTsKICAgIGlmICh2YWwgPT0gbnVsbCkgeyB0aGlzLnJhaXNlKHRoaXMuc3RhcnQgKyAyLCAiRXhwZWN0ZWQgbnVtYmVyIGluIHJhZGl4ICIgKyByYWRpeCk7IH0KICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTEgJiYgdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zKSA9PT0gMTEwKSB7CiAgICAgIHZhbCA9IHN0cmluZ1RvQmlnSW50KHRoaXMuaW5wdXQuc2xpY2Uoc3RhcnQsIHRoaXMucG9zKSk7CiAgICAgICsrdGhpcy5wb3M7CiAgICB9IGVsc2UgaWYgKGlzSWRlbnRpZmllclN0YXJ0KHRoaXMuZnVsbENoYXJDb2RlQXRQb3MoKSkpIHsgdGhpcy5yYWlzZSh0aGlzLnBvcywgIklkZW50aWZpZXIgZGlyZWN0bHkgYWZ0ZXIgbnVtYmVyIik7IH0KICAgIHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEubnVtLCB2YWwpCiAgfTsKCiAgLy8gUmVhZCBhbiBpbnRlZ2VyLCBvY3RhbCBpbnRlZ2VyLCBvciBmbG9hdGluZy1wb2ludCBudW1iZXIuCgogIHBwLnJlYWROdW1iZXIgPSBmdW5jdGlvbihzdGFydHNXaXRoRG90KSB7CiAgICB2YXIgc3RhcnQgPSB0aGlzLnBvczsKICAgIGlmICghc3RhcnRzV2l0aERvdCAmJiB0aGlzLnJlYWRJbnQoMTAsIHVuZGVmaW5lZCwgdHJ1ZSkgPT09IG51bGwpIHsgdGhpcy5yYWlzZShzdGFydCwgIkludmFsaWQgbnVtYmVyIik7IH0KICAgIHZhciBvY3RhbCA9IHRoaXMucG9zIC0gc3RhcnQgPj0gMiAmJiB0aGlzLmlucHV0LmNoYXJDb2RlQXQoc3RhcnQpID09PSA0ODsKICAgIGlmIChvY3RhbCAmJiB0aGlzLnN0cmljdCkgeyB0aGlzLnJhaXNlKHN0YXJ0LCAiSW52YWxpZCBudW1iZXIiKTsgfQogICAgdmFyIG5leHQgPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MpOwogICAgaWYgKCFvY3RhbCAmJiAhc3RhcnRzV2l0aERvdCAmJiB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTEgJiYgbmV4dCA9PT0gMTEwKSB7CiAgICAgIHZhciB2YWwkMSA9IHN0cmluZ1RvQmlnSW50KHRoaXMuaW5wdXQuc2xpY2Uoc3RhcnQsIHRoaXMucG9zKSk7CiAgICAgICsrdGhpcy5wb3M7CiAgICAgIGlmIChpc0lkZW50aWZpZXJTdGFydCh0aGlzLmZ1bGxDaGFyQ29kZUF0UG9zKCkpKSB7IHRoaXMucmFpc2UodGhpcy5wb3MsICJJZGVudGlmaWVyIGRpcmVjdGx5IGFmdGVyIG51bWJlciIpOyB9CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEubnVtLCB2YWwkMSkKICAgIH0KICAgIGlmIChvY3RhbCAmJiAvWzg5XS8udGVzdCh0aGlzLmlucHV0LnNsaWNlKHN0YXJ0LCB0aGlzLnBvcykpKSB7IG9jdGFsID0gZmFsc2U7IH0KICAgIGlmIChuZXh0ID09PSA0NiAmJiAhb2N0YWwpIHsgLy8gJy4nCiAgICAgICsrdGhpcy5wb3M7CiAgICAgIHRoaXMucmVhZEludCgxMCk7CiAgICAgIG5leHQgPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MpOwogICAgfQogICAgaWYgKChuZXh0ID09PSA2OSB8fCBuZXh0ID09PSAxMDEpICYmICFvY3RhbCkgeyAvLyAnZUUnCiAgICAgIG5leHQgPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQoKyt0aGlzLnBvcyk7CiAgICAgIGlmIChuZXh0ID09PSA0MyB8fCBuZXh0ID09PSA0NSkgeyArK3RoaXMucG9zOyB9IC8vICcrLScKICAgICAgaWYgKHRoaXMucmVhZEludCgxMCkgPT09IG51bGwpIHsgdGhpcy5yYWlzZShzdGFydCwgIkludmFsaWQgbnVtYmVyIik7IH0KICAgIH0KICAgIGlmIChpc0lkZW50aWZpZXJTdGFydCh0aGlzLmZ1bGxDaGFyQ29kZUF0UG9zKCkpKSB7IHRoaXMucmFpc2UodGhpcy5wb3MsICJJZGVudGlmaWVyIGRpcmVjdGx5IGFmdGVyIG51bWJlciIpOyB9CgogICAgdmFyIHZhbCA9IHN0cmluZ1RvTnVtYmVyKHRoaXMuaW5wdXQuc2xpY2Uoc3RhcnQsIHRoaXMucG9zKSwgb2N0YWwpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZXMkMS5udW0sIHZhbCkKICB9OwoKICAvLyBSZWFkIGEgc3RyaW5nIHZhbHVlLCBpbnRlcnByZXRpbmcgYmFja3NsYXNoLWVzY2FwZXMuCgogIHBwLnJlYWRDb2RlUG9pbnQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBjaCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyksIGNvZGU7CgogICAgaWYgKGNoID09PSAxMjMpIHsgLy8gJ3snCiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPCA2KSB7IHRoaXMudW5leHBlY3RlZCgpOyB9CiAgICAgIHZhciBjb2RlUG9zID0gKyt0aGlzLnBvczsKICAgICAgY29kZSA9IHRoaXMucmVhZEhleENoYXIodGhpcy5pbnB1dC5pbmRleE9mKCJ9IiwgdGhpcy5wb3MpIC0gdGhpcy5wb3MpOwogICAgICArK3RoaXMucG9zOwogICAgICBpZiAoY29kZSA+IDB4MTBGRkZGKSB7IHRoaXMuaW52YWxpZFN0cmluZ1Rva2VuKGNvZGVQb3MsICJDb2RlIHBvaW50IG91dCBvZiBib3VuZHMiKTsgfQogICAgfSBlbHNlIHsKICAgICAgY29kZSA9IHRoaXMucmVhZEhleENoYXIoNCk7CiAgICB9CiAgICByZXR1cm4gY29kZQogIH07CgogIGZ1bmN0aW9uIGNvZGVQb2ludFRvU3RyaW5nKGNvZGUpIHsKICAgIC8vIFVURi0xNiBEZWNvZGluZwogICAgaWYgKGNvZGUgPD0gMHhGRkZGKSB7IHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpIH0KICAgIGNvZGUgLT0gMHgxMDAwMDsKICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKChjb2RlID4+IDEwKSArIDB4RDgwMCwgKGNvZGUgJiAxMDIzKSArIDB4REMwMCkKICB9CgogIHBwLnJlYWRTdHJpbmcgPSBmdW5jdGlvbihxdW90ZSkgewogICAgdmFyIG91dCA9ICIiLCBjaHVua1N0YXJ0ID0gKyt0aGlzLnBvczsKICAgIGZvciAoOzspIHsKICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMuaW5wdXQubGVuZ3RoKSB7IHRoaXMucmFpc2UodGhpcy5zdGFydCwgIlVudGVybWluYXRlZCBzdHJpbmcgY29uc3RhbnQiKTsgfQogICAgICB2YXIgY2ggPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MpOwogICAgICBpZiAoY2ggPT09IHF1b3RlKSB7IGJyZWFrIH0KICAgICAgaWYgKGNoID09PSA5MikgeyAvLyAnXCcKICAgICAgICBvdXQgKz0gdGhpcy5pbnB1dC5zbGljZShjaHVua1N0YXJ0LCB0aGlzLnBvcyk7CiAgICAgICAgb3V0ICs9IHRoaXMucmVhZEVzY2FwZWRDaGFyKGZhbHNlKTsKICAgICAgICBjaHVua1N0YXJ0ID0gdGhpcy5wb3M7CiAgICAgIH0gZWxzZSBpZiAoY2ggPT09IDB4MjAyOCB8fCBjaCA9PT0gMHgyMDI5KSB7CiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA8IDEwKSB7IHRoaXMucmFpc2UodGhpcy5zdGFydCwgIlVudGVybWluYXRlZCBzdHJpbmcgY29uc3RhbnQiKTsgfQogICAgICAgICsrdGhpcy5wb3M7CiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpIHsKICAgICAgICAgIHRoaXMuY3VyTGluZSsrOwogICAgICAgICAgdGhpcy5saW5lU3RhcnQgPSB0aGlzLnBvczsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGlzTmV3TGluZShjaCkpIHsgdGhpcy5yYWlzZSh0aGlzLnN0YXJ0LCAiVW50ZXJtaW5hdGVkIHN0cmluZyBjb25zdGFudCIpOyB9CiAgICAgICAgKyt0aGlzLnBvczsKICAgICAgfQogICAgfQogICAgb3V0ICs9IHRoaXMuaW5wdXQuc2xpY2UoY2h1bmtTdGFydCwgdGhpcy5wb3MrKyk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLnN0cmluZywgb3V0KQogIH07CgogIC8vIFJlYWRzIHRlbXBsYXRlIHN0cmluZyB0b2tlbnMuCgogIHZhciBJTlZBTElEX1RFTVBMQVRFX0VTQ0FQRV9FUlJPUiA9IHt9OwoKICBwcC50cnlSZWFkVGVtcGxhdGVUb2tlbiA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5pblRlbXBsYXRlRWxlbWVudCA9IHRydWU7CiAgICB0cnkgewogICAgICB0aGlzLnJlYWRUbXBsVG9rZW4oKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICBpZiAoZXJyID09PSBJTlZBTElEX1RFTVBMQVRFX0VTQ0FQRV9FUlJPUikgewogICAgICAgIHRoaXMucmVhZEludmFsaWRUZW1wbGF0ZVRva2VuKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgZXJyCiAgICAgIH0KICAgIH0KCiAgICB0aGlzLmluVGVtcGxhdGVFbGVtZW50ID0gZmFsc2U7CiAgfTsKCiAgcHAuaW52YWxpZFN0cmluZ1Rva2VuID0gZnVuY3Rpb24ocG9zaXRpb24sIG1lc3NhZ2UpIHsKICAgIGlmICh0aGlzLmluVGVtcGxhdGVFbGVtZW50ICYmIHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA5KSB7CiAgICAgIHRocm93IElOVkFMSURfVEVNUExBVEVfRVNDQVBFX0VSUk9SCiAgICB9IGVsc2UgewogICAgICB0aGlzLnJhaXNlKHBvc2l0aW9uLCBtZXNzYWdlKTsKICAgIH0KICB9OwoKICBwcC5yZWFkVG1wbFRva2VuID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgb3V0ID0gIiIsIGNodW5rU3RhcnQgPSB0aGlzLnBvczsKICAgIGZvciAoOzspIHsKICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMuaW5wdXQubGVuZ3RoKSB7IHRoaXMucmFpc2UodGhpcy5zdGFydCwgIlVudGVybWluYXRlZCB0ZW1wbGF0ZSIpOyB9CiAgICAgIHZhciBjaCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyk7CiAgICAgIGlmIChjaCA9PT0gOTYgfHwgY2ggPT09IDM2ICYmIHRoaXMuaW5wdXQuY2hhckNvZGVBdCh0aGlzLnBvcyArIDEpID09PSAxMjMpIHsgLy8gJ2AnLCAnJHsnCiAgICAgICAgaWYgKHRoaXMucG9zID09PSB0aGlzLnN0YXJ0ICYmICh0aGlzLnR5cGUgPT09IHR5cGVzJDEudGVtcGxhdGUgfHwgdGhpcy50eXBlID09PSB0eXBlcyQxLmludmFsaWRUZW1wbGF0ZSkpIHsKICAgICAgICAgIGlmIChjaCA9PT0gMzYpIHsKICAgICAgICAgICAgdGhpcy5wb3MgKz0gMjsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZXMkMS5kb2xsYXJCcmFjZUwpCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICArK3RoaXMucG9zOwogICAgICAgICAgICByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLmJhY2tRdW90ZSkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgb3V0ICs9IHRoaXMuaW5wdXQuc2xpY2UoY2h1bmtTdGFydCwgdGhpcy5wb3MpOwogICAgICAgIHJldHVybiB0aGlzLmZpbmlzaFRva2VuKHR5cGVzJDEudGVtcGxhdGUsIG91dCkKICAgICAgfQogICAgICBpZiAoY2ggPT09IDkyKSB7IC8vICdcJwogICAgICAgIG91dCArPSB0aGlzLmlucHV0LnNsaWNlKGNodW5rU3RhcnQsIHRoaXMucG9zKTsKICAgICAgICBvdXQgKz0gdGhpcy5yZWFkRXNjYXBlZENoYXIodHJ1ZSk7CiAgICAgICAgY2h1bmtTdGFydCA9IHRoaXMucG9zOwogICAgICB9IGVsc2UgaWYgKGlzTmV3TGluZShjaCkpIHsKICAgICAgICBvdXQgKz0gdGhpcy5pbnB1dC5zbGljZShjaHVua1N0YXJ0LCB0aGlzLnBvcyk7CiAgICAgICAgKyt0aGlzLnBvczsKICAgICAgICBzd2l0Y2ggKGNoKSB7CiAgICAgICAgY2FzZSAxMzoKICAgICAgICAgIGlmICh0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MpID09PSAxMCkgeyArK3RoaXMucG9zOyB9CiAgICAgICAgY2FzZSAxMDoKICAgICAgICAgIG91dCArPSAiXG4iOwogICAgICAgICAgYnJlYWsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2gpOwogICAgICAgICAgYnJlYWsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpIHsKICAgICAgICAgICsrdGhpcy5jdXJMaW5lOwogICAgICAgICAgdGhpcy5saW5lU3RhcnQgPSB0aGlzLnBvczsKICAgICAgICB9CiAgICAgICAgY2h1bmtTdGFydCA9IHRoaXMucG9zOwogICAgICB9IGVsc2UgewogICAgICAgICsrdGhpcy5wb3M7CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBSZWFkcyBhIHRlbXBsYXRlIHRva2VuIHRvIHNlYXJjaCBmb3IgdGhlIGVuZCwgd2l0aG91dCB2YWxpZGF0aW5nIGFueSBlc2NhcGUgc2VxdWVuY2VzCiAgcHAucmVhZEludmFsaWRUZW1wbGF0ZVRva2VuID0gZnVuY3Rpb24oKSB7CiAgICBmb3IgKDsgdGhpcy5wb3MgPCB0aGlzLmlucHV0Lmxlbmd0aDsgdGhpcy5wb3MrKykgewogICAgICBzd2l0Y2ggKHRoaXMuaW5wdXRbdGhpcy5wb3NdKSB7CiAgICAgIGNhc2UgIlxcIjoKICAgICAgICArK3RoaXMucG9zOwogICAgICAgIGJyZWFrCgogICAgICBjYXNlICIkIjoKICAgICAgICBpZiAodGhpcy5pbnB1dFt0aGlzLnBvcyArIDFdICE9PSAieyIpIHsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQoKICAgICAgLy8gZmFsbHMgdGhyb3VnaAogICAgICBjYXNlICJgIjoKICAgICAgICByZXR1cm4gdGhpcy5maW5pc2hUb2tlbih0eXBlcyQxLmludmFsaWRUZW1wbGF0ZSwgdGhpcy5pbnB1dC5zbGljZSh0aGlzLnN0YXJ0LCB0aGlzLnBvcykpCgogICAgICAvLyBubyBkZWZhdWx0CiAgICAgIH0KICAgIH0KICAgIHRoaXMucmFpc2UodGhpcy5zdGFydCwgIlVudGVybWluYXRlZCB0ZW1wbGF0ZSIpOwogIH07CgogIC8vIFVzZWQgdG8gcmVhZCBlc2NhcGVkIGNoYXJhY3RlcnMKCiAgcHAucmVhZEVzY2FwZWRDaGFyID0gZnVuY3Rpb24oaW5UZW1wbGF0ZSkgewogICAgdmFyIGNoID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KCsrdGhpcy5wb3MpOwogICAgKyt0aGlzLnBvczsKICAgIHN3aXRjaCAoY2gpIHsKICAgIGNhc2UgMTEwOiByZXR1cm4gIlxuIiAvLyAnbicgLT4gJ1xuJwogICAgY2FzZSAxMTQ6IHJldHVybiAiXHIiIC8vICdyJyAtPiAnXHInCiAgICBjYXNlIDEyMDogcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5yZWFkSGV4Q2hhcigyKSkgLy8gJ3gnCiAgICBjYXNlIDExNzogcmV0dXJuIGNvZGVQb2ludFRvU3RyaW5nKHRoaXMucmVhZENvZGVQb2ludCgpKSAvLyAndScKICAgIGNhc2UgMTE2OiByZXR1cm4gIlx0IiAvLyAndCcgLT4gJ1x0JwogICAgY2FzZSA5ODogcmV0dXJuICJcYiIgLy8gJ2InIC0+ICdcYicKICAgIGNhc2UgMTE4OiByZXR1cm4gIlx1MDAwYiIgLy8gJ3YnIC0+ICdcdTAwMGInCiAgICBjYXNlIDEwMjogcmV0dXJuICJcZiIgLy8gJ2YnIC0+ICdcZicKICAgIGNhc2UgMTM6IGlmICh0aGlzLmlucHV0LmNoYXJDb2RlQXQodGhpcy5wb3MpID09PSAxMCkgeyArK3RoaXMucG9zOyB9IC8vICdcclxuJwogICAgY2FzZSAxMDogLy8gJyBcbicKICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpIHsgdGhpcy5saW5lU3RhcnQgPSB0aGlzLnBvczsgKyt0aGlzLmN1ckxpbmU7IH0KICAgICAgcmV0dXJuICIiCiAgICBjYXNlIDU2OgogICAgY2FzZSA1NzoKICAgICAgaWYgKHRoaXMuc3RyaWN0KSB7CiAgICAgICAgdGhpcy5pbnZhbGlkU3RyaW5nVG9rZW4oCiAgICAgICAgICB0aGlzLnBvcyAtIDEsCiAgICAgICAgICAiSW52YWxpZCBlc2NhcGUgc2VxdWVuY2UiCiAgICAgICAgKTsKICAgICAgfQogICAgICBpZiAoaW5UZW1wbGF0ZSkgewogICAgICAgIHZhciBjb2RlUG9zID0gdGhpcy5wb3MgLSAxOwoKICAgICAgICB0aGlzLmludmFsaWRTdHJpbmdUb2tlbigKICAgICAgICAgIGNvZGVQb3MsCiAgICAgICAgICAiSW52YWxpZCBlc2NhcGUgc2VxdWVuY2UgaW4gdGVtcGxhdGUgc3RyaW5nIgogICAgICAgICk7CgogICAgICAgIHJldHVybiBudWxsCiAgICAgIH0KICAgIGRlZmF1bHQ6CiAgICAgIGlmIChjaCA+PSA0OCAmJiBjaCA8PSA1NSkgewogICAgICAgIHZhciBvY3RhbFN0ciA9IHRoaXMuaW5wdXQuc3Vic3RyKHRoaXMucG9zIC0gMSwgMykubWF0Y2goL15bMC03XSsvKVswXTsKICAgICAgICB2YXIgb2N0YWwgPSBwYXJzZUludChvY3RhbFN0ciwgOCk7CiAgICAgICAgaWYgKG9jdGFsID4gMjU1KSB7CiAgICAgICAgICBvY3RhbFN0ciA9IG9jdGFsU3RyLnNsaWNlKDAsIC0xKTsKICAgICAgICAgIG9jdGFsID0gcGFyc2VJbnQob2N0YWxTdHIsIDgpOwogICAgICAgIH0KICAgICAgICB0aGlzLnBvcyArPSBvY3RhbFN0ci5sZW5ndGggLSAxOwogICAgICAgIGNoID0gdGhpcy5pbnB1dC5jaGFyQ29kZUF0KHRoaXMucG9zKTsKICAgICAgICBpZiAoKG9jdGFsU3RyICE9PSAiMCIgfHwgY2ggPT09IDU2IHx8IGNoID09PSA1NykgJiYgKHRoaXMuc3RyaWN0IHx8IGluVGVtcGxhdGUpKSB7CiAgICAgICAgICB0aGlzLmludmFsaWRTdHJpbmdUb2tlbigKICAgICAgICAgICAgdGhpcy5wb3MgLSAxIC0gb2N0YWxTdHIubGVuZ3RoLAogICAgICAgICAgICBpblRlbXBsYXRlCiAgICAgICAgICAgICAgPyAiT2N0YWwgbGl0ZXJhbCBpbiB0ZW1wbGF0ZSBzdHJpbmciCiAgICAgICAgICAgICAgOiAiT2N0YWwgbGl0ZXJhbCBpbiBzdHJpY3QgbW9kZSIKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKG9jdGFsKQogICAgICB9CiAgICAgIGlmIChpc05ld0xpbmUoY2gpKSB7CiAgICAgICAgLy8gVW5pY29kZSBuZXcgbGluZSBjaGFyYWN0ZXJzIGFmdGVyIFwgZ2V0IHJlbW92ZWQgZnJvbSBvdXRwdXQgaW4gYm90aAogICAgICAgIC8vIHRlbXBsYXRlIGxpdGVyYWxzIGFuZCBzdHJpbmdzCiAgICAgICAgcmV0dXJuICIiCiAgICAgIH0KICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2gpCiAgICB9CiAgfTsKCiAgLy8gVXNlZCB0byByZWFkIGNoYXJhY3RlciBlc2NhcGUgc2VxdWVuY2VzICgnXHgnLCAnXHUnLCAnXFUnKS4KCiAgcHAucmVhZEhleENoYXIgPSBmdW5jdGlvbihsZW4pIHsKICAgIHZhciBjb2RlUG9zID0gdGhpcy5wb3M7CiAgICB2YXIgbiA9IHRoaXMucmVhZEludCgxNiwgbGVuKTsKICAgIGlmIChuID09PSBudWxsKSB7IHRoaXMuaW52YWxpZFN0cmluZ1Rva2VuKGNvZGVQb3MsICJCYWQgY2hhcmFjdGVyIGVzY2FwZSBzZXF1ZW5jZSIpOyB9CiAgICByZXR1cm4gbgogIH07CgogIC8vIFJlYWQgYW4gaWRlbnRpZmllciwgYW5kIHJldHVybiBpdCBhcyBhIHN0cmluZy4gU2V0cyBgdGhpcy5jb250YWluc0VzY2AKICAvLyB0byB3aGV0aGVyIHRoZSB3b3JkIGNvbnRhaW5lZCBhICdcdScgZXNjYXBlLgogIC8vCiAgLy8gSW5jcmVtZW50YWxseSBhZGRzIG9ubHkgZXNjYXBlZCBjaGFycywgYWRkaW5nIG90aGVyIGNodW5rcyBhcy1pcwogIC8vIGFzIGEgbWljcm8tb3B0aW1pemF0aW9uLgoKICBwcC5yZWFkV29yZDEgPSBmdW5jdGlvbigpIHsKICAgIHRoaXMuY29udGFpbnNFc2MgPSBmYWxzZTsKICAgIHZhciB3b3JkID0gIiIsIGZpcnN0ID0gdHJ1ZSwgY2h1bmtTdGFydCA9IHRoaXMucG9zOwogICAgdmFyIGFzdHJhbCA9IHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2OwogICAgd2hpbGUgKHRoaXMucG9zIDwgdGhpcy5pbnB1dC5sZW5ndGgpIHsKICAgICAgdmFyIGNoID0gdGhpcy5mdWxsQ2hhckNvZGVBdFBvcygpOwogICAgICBpZiAoaXNJZGVudGlmaWVyQ2hhcihjaCwgYXN0cmFsKSkgewogICAgICAgIHRoaXMucG9zICs9IGNoIDw9IDB4ZmZmZiA/IDEgOiAyOwogICAgICB9IGVsc2UgaWYgKGNoID09PSA5MikgeyAvLyAiXCIKICAgICAgICB0aGlzLmNvbnRhaW5zRXNjID0gdHJ1ZTsKICAgICAgICB3b3JkICs9IHRoaXMuaW5wdXQuc2xpY2UoY2h1bmtTdGFydCwgdGhpcy5wb3MpOwogICAgICAgIHZhciBlc2NTdGFydCA9IHRoaXMucG9zOwogICAgICAgIGlmICh0aGlzLmlucHV0LmNoYXJDb2RlQXQoKyt0aGlzLnBvcykgIT09IDExNykgLy8gInUiCiAgICAgICAgICB7IHRoaXMuaW52YWxpZFN0cmluZ1Rva2VuKHRoaXMucG9zLCAiRXhwZWN0aW5nIFVuaWNvZGUgZXNjYXBlIHNlcXVlbmNlIFxcdVhYWFgiKTsgfQogICAgICAgICsrdGhpcy5wb3M7CiAgICAgICAgdmFyIGVzYyA9IHRoaXMucmVhZENvZGVQb2ludCgpOwogICAgICAgIGlmICghKGZpcnN0ID8gaXNJZGVudGlmaWVyU3RhcnQgOiBpc0lkZW50aWZpZXJDaGFyKShlc2MsIGFzdHJhbCkpCiAgICAgICAgICB7IHRoaXMuaW52YWxpZFN0cmluZ1Rva2VuKGVzY1N0YXJ0LCAiSW52YWxpZCBVbmljb2RlIGVzY2FwZSIpOyB9CiAgICAgICAgd29yZCArPSBjb2RlUG9pbnRUb1N0cmluZyhlc2MpOwogICAgICAgIGNodW5rU3RhcnQgPSB0aGlzLnBvczsKICAgICAgfSBlbHNlIHsKICAgICAgICBicmVhawogICAgICB9CiAgICAgIGZpcnN0ID0gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gd29yZCArIHRoaXMuaW5wdXQuc2xpY2UoY2h1bmtTdGFydCwgdGhpcy5wb3MpCiAgfTsKCiAgLy8gUmVhZCBhbiBpZGVudGlmaWVyIG9yIGtleXdvcmQgdG9rZW4uIFdpbGwgY2hlY2sgZm9yIHJlc2VydmVkCiAgLy8gd29yZHMgd2hlbiBuZWNlc3NhcnkuCgogIHBwLnJlYWRXb3JkID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgd29yZCA9IHRoaXMucmVhZFdvcmQxKCk7CiAgICB2YXIgdHlwZSA9IHR5cGVzJDEubmFtZTsKICAgIGlmICh0aGlzLmtleXdvcmRzLnRlc3Qod29yZCkpIHsKICAgICAgdHlwZSA9IGtleXdvcmRzW3dvcmRdOwogICAgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoVG9rZW4odHlwZSwgd29yZCkKICB9OwoKICAvLyBBY29ybiBpcyBhIHRpbnksIGZhc3QgSmF2YVNjcmlwdCBwYXJzZXIgd3JpdHRlbiBpbiBKYXZhU2NyaXB0LgoKICB2YXIgdmVyc2lvbiA9ICI4LjcuMCI7CgogIFBhcnNlci5hY29ybiA9IHsKICAgIFBhcnNlcjogUGFyc2VyLAogICAgdmVyc2lvbjogdmVyc2lvbiwKICAgIGRlZmF1bHRPcHRpb25zOiBkZWZhdWx0T3B0aW9ucywKICAgIFBvc2l0aW9uOiBQb3NpdGlvbiwKICAgIFNvdXJjZUxvY2F0aW9uOiBTb3VyY2VMb2NhdGlvbiwKICAgIGdldExpbmVJbmZvOiBnZXRMaW5lSW5mbywKICAgIE5vZGU6IE5vZGUsCiAgICBUb2tlblR5cGU6IFRva2VuVHlwZSwKICAgIHRva1R5cGVzOiB0eXBlcyQxLAogICAga2V5d29yZFR5cGVzOiBrZXl3b3JkcywKICAgIFRva0NvbnRleHQ6IFRva0NvbnRleHQsCiAgICB0b2tDb250ZXh0czogdHlwZXMsCiAgICBpc0lkZW50aWZpZXJDaGFyOiBpc0lkZW50aWZpZXJDaGFyLAogICAgaXNJZGVudGlmaWVyU3RhcnQ6IGlzSWRlbnRpZmllclN0YXJ0LAogICAgVG9rZW46IFRva2VuLAogICAgaXNOZXdMaW5lOiBpc05ld0xpbmUsCiAgICBsaW5lQnJlYWs6IGxpbmVCcmVhaywKICAgIGxpbmVCcmVha0c6IGxpbmVCcmVha0csCiAgICBub25BU0NJSXdoaXRlc3BhY2U6IG5vbkFTQ0lJd2hpdGVzcGFjZQogIH07CgogIC8vIFRoZSBtYWluIGV4cG9ydGVkIGludGVyZmFjZSAodW5kZXIgYHNlbGYuYWNvcm5gIHdoZW4gaW4gdGhlCiAgLy8gYnJvd3NlcikgaXMgYSBgcGFyc2VgIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBjb2RlIHN0cmluZyBhbmQKICAvLyByZXR1cm5zIGFuIGFic3RyYWN0IHN5bnRheCB0cmVlIGFzIHNwZWNpZmllZCBieSBbTW96aWxsYSBwYXJzZXIKICAvLyBBUEldW2FwaV0uCiAgLy8KICAvLyBbYXBpXTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9TcGlkZXJNb25rZXkvUGFyc2VyX0FQSQoKICBmdW5jdGlvbiBwYXJzZShpbnB1dCwgb3B0aW9ucykgewogICAgcmV0dXJuIFBhcnNlci5wYXJzZShpbnB1dCwgb3B0aW9ucykKICB9CgogIC8vIFRoaXMgZnVuY3Rpb24gdHJpZXMgdG8gcGFyc2UgYSBzaW5nbGUgZXhwcmVzc2lvbiBhdCBhIGdpdmVuCiAgLy8gb2Zmc2V0IGluIGEgc3RyaW5nLiBVc2VmdWwgZm9yIHBhcnNpbmcgbWl4ZWQtbGFuZ3VhZ2UgZm9ybWF0cwogIC8vIHRoYXQgZW1iZWQgSmF2YVNjcmlwdCBleHByZXNzaW9ucy4KCiAgZnVuY3Rpb24gcGFyc2VFeHByZXNzaW9uQXQoaW5wdXQsIHBvcywgb3B0aW9ucykgewogICAgcmV0dXJuIFBhcnNlci5wYXJzZUV4cHJlc3Npb25BdChpbnB1dCwgcG9zLCBvcHRpb25zKQogIH0KCiAgLy8gQWNvcm4gaXMgb3JnYW5pemVkIGFzIGEgdG9rZW5pemVyIGFuZCBhIHJlY3Vyc2l2ZS1kZXNjZW50IHBhcnNlci4KICAvLyBUaGUgYHRva2VuaXplcmAgZXhwb3J0IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byB0aGUgdG9rZW5pemVyLgoKICBmdW5jdGlvbiB0b2tlbml6ZXIoaW5wdXQsIG9wdGlvbnMpIHsKICAgIHJldHVybiBQYXJzZXIudG9rZW5pemVyKGlucHV0LCBvcHRpb25zKQogIH0KCiAgZXhwb3J0cy5Ob2RlID0gTm9kZTsKICBleHBvcnRzLlBhcnNlciA9IFBhcnNlcjsKICBleHBvcnRzLlBvc2l0aW9uID0gUG9zaXRpb247CiAgZXhwb3J0cy5Tb3VyY2VMb2NhdGlvbiA9IFNvdXJjZUxvY2F0aW9uOwogIGV4cG9ydHMuVG9rQ29udGV4dCA9IFRva0NvbnRleHQ7CiAgZXhwb3J0cy5Ub2tlbiA9IFRva2VuOwogIGV4cG9ydHMuVG9rZW5UeXBlID0gVG9rZW5UeXBlOwogIGV4cG9ydHMuZGVmYXVsdE9wdGlvbnMgPSBkZWZhdWx0T3B0aW9uczsKICBleHBvcnRzLmdldExpbmVJbmZvID0gZ2V0TGluZUluZm87CiAgZXhwb3J0cy5pc0lkZW50aWZpZXJDaGFyID0gaXNJZGVudGlmaWVyQ2hhcjsKICBleHBvcnRzLmlzSWRlbnRpZmllclN0YXJ0ID0gaXNJZGVudGlmaWVyU3RhcnQ7CiAgZXhwb3J0cy5pc05ld0xpbmUgPSBpc05ld0xpbmU7CiAgZXhwb3J0cy5rZXl3b3JkVHlwZXMgPSBrZXl3b3JkczsKICBleHBvcnRzLmxpbmVCcmVhayA9IGxpbmVCcmVhazsKICBleHBvcnRzLmxpbmVCcmVha0cgPSBsaW5lQnJlYWtHOwogIGV4cG9ydHMubm9uQVNDSUl3aGl0ZXNwYWNlID0gbm9uQVNDSUl3aGl0ZXNwYWNlOwogIGV4cG9ydHMucGFyc2UgPSBwYXJzZTsKICBleHBvcnRzLnBhcnNlRXhwcmVzc2lvbkF0ID0gcGFyc2VFeHByZXNzaW9uQXQ7CiAgZXhwb3J0cy50b2tDb250ZXh0cyA9IHR5cGVzOwogIGV4cG9ydHMudG9rVHlwZXMgPSB0eXBlcyQxOwogIGV4cG9ydHMudG9rZW5pemVyID0gdG9rZW5pemVyOwogIGV4cG9ydHMudmVyc2lvbiA9IHZlcnNpb247CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7Cgp9KSk7CihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7CiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzLCByZXF1aXJlKCdhY29ybicpKSA6CiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cycsICdhY29ybiddLCBmYWN0b3J5KSA6CiAgKGdsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiBnbG9iYWwgfHwgc2VsZiwgZmFjdG9yeSgoZ2xvYmFsLmFjb3JuID0gZ2xvYmFsLmFjb3JuIHx8IHt9LCBnbG9iYWwuYWNvcm4ubG9vc2UgPSB7fSksIGdsb2JhbC5hY29ybikpOwp9KSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMsIGFjb3JuKSB7ICd1c2Ugc3RyaWN0JzsKCiAgdmFyIGR1bW15VmFsdWUgPSAi4pyWIjsKCiAgZnVuY3Rpb24gaXNEdW1teShub2RlKSB7IHJldHVybiBub2RlLm5hbWUgPT09IGR1bW15VmFsdWUgfQoKICBmdW5jdGlvbiBub29wKCkge30KCiAgdmFyIExvb3NlUGFyc2VyID0gZnVuY3Rpb24gTG9vc2VQYXJzZXIoaW5wdXQsIG9wdGlvbnMpIHsKICAgIGlmICggb3B0aW9ucyA9PT0gdm9pZCAwICkgb3B0aW9ucyA9IHt9OwoKICAgIHRoaXMudG9rcyA9IHRoaXMuY29uc3RydWN0b3IuQmFzZVBhcnNlci50b2tlbml6ZXIoaW5wdXQsIG9wdGlvbnMpOwogICAgdGhpcy5vcHRpb25zID0gdGhpcy50b2tzLm9wdGlvbnM7CiAgICB0aGlzLmlucHV0ID0gdGhpcy50b2tzLmlucHV0OwogICAgdGhpcy50b2sgPSB0aGlzLmxhc3QgPSB7dHlwZTogYWNvcm4udG9rVHlwZXMuZW9mLCBzdGFydDogMCwgZW5kOiAwfTsKICAgIHRoaXMudG9rLnZhbGlkYXRlUmVnRXhwRmxhZ3MgPSBub29wOwogICAgdGhpcy50b2sudmFsaWRhdGVSZWdFeHBQYXR0ZXJuID0gbm9vcDsKICAgIGlmICh0aGlzLm9wdGlvbnMubG9jYXRpb25zKSB7CiAgICAgIHZhciBoZXJlID0gdGhpcy50b2tzLmN1clBvc2l0aW9uKCk7CiAgICAgIHRoaXMudG9rLmxvYyA9IG5ldyBhY29ybi5Tb3VyY2VMb2NhdGlvbih0aGlzLnRva3MsIGhlcmUsIGhlcmUpOwogICAgfQogICAgdGhpcy5haGVhZCA9IFtdOyAvLyBUb2tlbnMgYWhlYWQKICAgIHRoaXMuY29udGV4dCA9IFtdOyAvLyBJbmRlbnRhdGlvbiBjb250ZXh0ZWQKICAgIHRoaXMuY3VySW5kZW50ID0gMDsKICAgIHRoaXMuY3VyTGluZVN0YXJ0ID0gMDsKICAgIHRoaXMubmV4dExpbmVTdGFydCA9IHRoaXMubGluZUVuZCh0aGlzLmN1ckxpbmVTdGFydCkgKyAxOwogICAgdGhpcy5pbkFzeW5jID0gZmFsc2U7CiAgICB0aGlzLmluR2VuZXJhdG9yID0gZmFsc2U7CiAgICB0aGlzLmluRnVuY3Rpb24gPSBmYWxzZTsKICB9OwoKICBMb29zZVBhcnNlci5wcm90b3R5cGUuc3RhcnROb2RlID0gZnVuY3Rpb24gc3RhcnROb2RlICgpIHsKICAgIHJldHVybiBuZXcgYWNvcm4uTm9kZSh0aGlzLnRva3MsIHRoaXMudG9rLnN0YXJ0LCB0aGlzLm9wdGlvbnMubG9jYXRpb25zID8gdGhpcy50b2subG9jLnN0YXJ0IDogbnVsbCkKICB9OwoKICBMb29zZVBhcnNlci5wcm90b3R5cGUuc3RvcmVDdXJyZW50UG9zID0gZnVuY3Rpb24gc3RvcmVDdXJyZW50UG9zICgpIHsKICAgIHJldHVybiB0aGlzLm9wdGlvbnMubG9jYXRpb25zID8gW3RoaXMudG9rLnN0YXJ0LCB0aGlzLnRvay5sb2Muc3RhcnRdIDogdGhpcy50b2suc3RhcnQKICB9OwoKICBMb29zZVBhcnNlci5wcm90b3R5cGUuc3RhcnROb2RlQXQgPSBmdW5jdGlvbiBzdGFydE5vZGVBdCAocG9zKSB7CiAgICBpZiAodGhpcy5vcHRpb25zLmxvY2F0aW9ucykgewogICAgICByZXR1cm4gbmV3IGFjb3JuLk5vZGUodGhpcy50b2tzLCBwb3NbMF0sIHBvc1sxXSkKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBuZXcgYWNvcm4uTm9kZSh0aGlzLnRva3MsIHBvcykKICAgIH0KICB9OwoKICBMb29zZVBhcnNlci5wcm90b3R5cGUuZmluaXNoTm9kZSA9IGZ1bmN0aW9uIGZpbmlzaE5vZGUgKG5vZGUsIHR5cGUpIHsKICAgIG5vZGUudHlwZSA9IHR5cGU7CiAgICBub2RlLmVuZCA9IHRoaXMubGFzdC5lbmQ7CiAgICBpZiAodGhpcy5vcHRpb25zLmxvY2F0aW9ucykKICAgICAgeyBub2RlLmxvYy5lbmQgPSB0aGlzLmxhc3QubG9jLmVuZDsgfQogICAgaWYgKHRoaXMub3B0aW9ucy5yYW5nZXMpCiAgICAgIHsgbm9kZS5yYW5nZVsxXSA9IHRoaXMubGFzdC5lbmQ7IH0KICAgIHJldHVybiBub2RlCiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLmR1bW15Tm9kZSA9IGZ1bmN0aW9uIGR1bW15Tm9kZSAodHlwZSkgewogICAgdmFyIGR1bW15ID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIGR1bW15LnR5cGUgPSB0eXBlOwogICAgZHVtbXkuZW5kID0gZHVtbXkuc3RhcnQ7CiAgICBpZiAodGhpcy5vcHRpb25zLmxvY2F0aW9ucykKICAgICAgeyBkdW1teS5sb2MuZW5kID0gZHVtbXkubG9jLnN0YXJ0OyB9CiAgICBpZiAodGhpcy5vcHRpb25zLnJhbmdlcykKICAgICAgeyBkdW1teS5yYW5nZVsxXSA9IGR1bW15LnN0YXJ0OyB9CiAgICB0aGlzLmxhc3QgPSB7dHlwZTogYWNvcm4udG9rVHlwZXMubmFtZSwgc3RhcnQ6IGR1bW15LnN0YXJ0LCBlbmQ6IGR1bW15LnN0YXJ0LCBsb2M6IGR1bW15LmxvY307CiAgICByZXR1cm4gZHVtbXkKICB9OwoKICBMb29zZVBhcnNlci5wcm90b3R5cGUuZHVtbXlJZGVudCA9IGZ1bmN0aW9uIGR1bW15SWRlbnQgKCkgewogICAgdmFyIGR1bW15ID0gdGhpcy5kdW1teU5vZGUoIklkZW50aWZpZXIiKTsKICAgIGR1bW15Lm5hbWUgPSBkdW1teVZhbHVlOwogICAgcmV0dXJuIGR1bW15CiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLmR1bW15U3RyaW5nID0gZnVuY3Rpb24gZHVtbXlTdHJpbmcgKCkgewogICAgdmFyIGR1bW15ID0gdGhpcy5kdW1teU5vZGUoIkxpdGVyYWwiKTsKICAgIGR1bW15LnZhbHVlID0gZHVtbXkucmF3ID0gZHVtbXlWYWx1ZTsKICAgIHJldHVybiBkdW1teQogIH07CgogIExvb3NlUGFyc2VyLnByb3RvdHlwZS5lYXQgPSBmdW5jdGlvbiBlYXQgKHR5cGUpIHsKICAgIGlmICh0aGlzLnRvay50eXBlID09PSB0eXBlKSB7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICByZXR1cm4gdHJ1ZQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZhbHNlCiAgICB9CiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLmlzQ29udGV4dHVhbCA9IGZ1bmN0aW9uIGlzQ29udGV4dHVhbCAobmFtZSkgewogICAgcmV0dXJuIHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLm5hbWUgJiYgdGhpcy50b2sudmFsdWUgPT09IG5hbWUKICB9OwoKICBMb29zZVBhcnNlci5wcm90b3R5cGUuZWF0Q29udGV4dHVhbCA9IGZ1bmN0aW9uIGVhdENvbnRleHR1YWwgKG5hbWUpIHsKICAgIHJldHVybiB0aGlzLnRvay52YWx1ZSA9PT0gbmFtZSAmJiB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5uYW1lKQogIH07CgogIExvb3NlUGFyc2VyLnByb3RvdHlwZS5jYW5JbnNlcnRTZW1pY29sb24gPSBmdW5jdGlvbiBjYW5JbnNlcnRTZW1pY29sb24gKCkgewogICAgcmV0dXJuIHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLmVvZiB8fCB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5icmFjZVIgfHwKICAgICAgYWNvcm4ubGluZUJyZWFrLnRlc3QodGhpcy5pbnB1dC5zbGljZSh0aGlzLmxhc3QuZW5kLCB0aGlzLnRvay5zdGFydCkpCiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLnNlbWljb2xvbiA9IGZ1bmN0aW9uIHNlbWljb2xvbiAoKSB7CiAgICByZXR1cm4gdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuc2VtaSkKICB9OwoKICBMb29zZVBhcnNlci5wcm90b3R5cGUuZXhwZWN0ID0gZnVuY3Rpb24gZXhwZWN0ICh0eXBlKSB7CiAgICBpZiAodGhpcy5lYXQodHlwZSkpIHsgcmV0dXJuIHRydWUgfQogICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gMjsgaSsrKSB7CiAgICAgIGlmICh0aGlzLmxvb2tBaGVhZChpKS50eXBlID09PSB0eXBlKSB7CiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBpOyBqKyspIHsgdGhpcy5uZXh0KCk7IH0KICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICB9CiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLnB1c2hDeCA9IGZ1bmN0aW9uIHB1c2hDeCAoKSB7CiAgICB0aGlzLmNvbnRleHQucHVzaCh0aGlzLmN1ckluZGVudCk7CiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLnBvcEN4ID0gZnVuY3Rpb24gcG9wQ3ggKCkgewogICAgdGhpcy5jdXJJbmRlbnQgPSB0aGlzLmNvbnRleHQucG9wKCk7CiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLmxpbmVFbmQgPSBmdW5jdGlvbiBsaW5lRW5kIChwb3MpIHsKICAgIHdoaWxlIChwb3MgPCB0aGlzLmlucHV0Lmxlbmd0aCAmJiAhYWNvcm4uaXNOZXdMaW5lKHRoaXMuaW5wdXQuY2hhckNvZGVBdChwb3MpKSkgeyArK3BvczsgfQogICAgcmV0dXJuIHBvcwogIH07CgogIExvb3NlUGFyc2VyLnByb3RvdHlwZS5pbmRlbnRhdGlvbkFmdGVyID0gZnVuY3Rpb24gaW5kZW50YXRpb25BZnRlciAocG9zKSB7CiAgICBmb3IgKHZhciBjb3VudCA9IDA7OyArK3BvcykgewogICAgICB2YXIgY2ggPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQocG9zKTsKICAgICAgaWYgKGNoID09PSAzMikgeyArK2NvdW50OyB9CiAgICAgIGVsc2UgaWYgKGNoID09PSA5KSB7IGNvdW50ICs9IHRoaXMub3B0aW9ucy50YWJTaXplOyB9CiAgICAgIGVsc2UgeyByZXR1cm4gY291bnQgfQogICAgfQogIH07CgogIExvb3NlUGFyc2VyLnByb3RvdHlwZS5jbG9zZXMgPSBmdW5jdGlvbiBjbG9zZXMgKGNsb3NlVG9rLCBpbmRlbnQsIGxpbmUsIGJsb2NrSGV1cmlzdGljKSB7CiAgICBpZiAodGhpcy50b2sudHlwZSA9PT0gY2xvc2VUb2sgfHwgdGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuZW9mKSB7IHJldHVybiB0cnVlIH0KICAgIHJldHVybiBsaW5lICE9PSB0aGlzLmN1ckxpbmVTdGFydCAmJiB0aGlzLmN1ckluZGVudCA8IGluZGVudCAmJiB0aGlzLnRva2VuU3RhcnRzTGluZSgpICYmCiAgICAgICghYmxvY2tIZXVyaXN0aWMgfHwgdGhpcy5uZXh0TGluZVN0YXJ0ID49IHRoaXMuaW5wdXQubGVuZ3RoIHx8CiAgICAgICB0aGlzLmluZGVudGF0aW9uQWZ0ZXIodGhpcy5uZXh0TGluZVN0YXJ0KSA8IGluZGVudCkKICB9OwoKICBMb29zZVBhcnNlci5wcm90b3R5cGUudG9rZW5TdGFydHNMaW5lID0gZnVuY3Rpb24gdG9rZW5TdGFydHNMaW5lICgpIHsKICAgIGZvciAodmFyIHAgPSB0aGlzLnRvay5zdGFydCAtIDE7IHAgPj0gdGhpcy5jdXJMaW5lU3RhcnQ7IC0tcCkgewogICAgICB2YXIgY2ggPSB0aGlzLmlucHV0LmNoYXJDb2RlQXQocCk7CiAgICAgIGlmIChjaCAhPT0gOSAmJiBjaCAhPT0gMzIpIHsgcmV0dXJuIGZhbHNlIH0KICAgIH0KICAgIHJldHVybiB0cnVlCiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uIGV4dGVuZCAobmFtZSwgZikgewogICAgdGhpc1tuYW1lXSA9IGYodGhpc1tuYW1lXSk7CiAgfTsKCiAgTG9vc2VQYXJzZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gcGFyc2UgKCkgewogICAgdGhpcy5uZXh0KCk7CiAgICByZXR1cm4gdGhpcy5wYXJzZVRvcExldmVsKCkKICB9OwoKICBMb29zZVBhcnNlci5leHRlbmQgPSBmdW5jdGlvbiBleHRlbmQgKCkgewogICAgICB2YXIgcGx1Z2lucyA9IFtdLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOwogICAgICB3aGlsZSAoIGxlbi0tICkgcGx1Z2luc1sgbGVuIF0gPSBhcmd1bWVudHNbIGxlbiBdOwoKICAgIHZhciBjbHMgPSB0aGlzOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbHVnaW5zLmxlbmd0aDsgaSsrKSB7IGNscyA9IHBsdWdpbnNbaV0oY2xzKTsgfQogICAgcmV0dXJuIGNscwogIH07CgogIExvb3NlUGFyc2VyLnBhcnNlID0gZnVuY3Rpb24gcGFyc2UgKGlucHV0LCBvcHRpb25zKSB7CiAgICByZXR1cm4gbmV3IHRoaXMoaW5wdXQsIG9wdGlvbnMpLnBhcnNlKCkKICB9OwoKICAvLyBBbGxvd3MgcGx1Z2lucyB0byBleHRlbmQgdGhlIGJhc2UgcGFyc2VyIC8gdG9rZW5pemVyIHVzZWQKICBMb29zZVBhcnNlci5CYXNlUGFyc2VyID0gYWNvcm4uUGFyc2VyOwoKICB2YXIgbHAkMiA9IExvb3NlUGFyc2VyLnByb3RvdHlwZTsKCiAgZnVuY3Rpb24gaXNTcGFjZShjaCkgewogICAgcmV0dXJuIChjaCA8IDE0ICYmIGNoID4gOCkgfHwgY2ggPT09IDMyIHx8IGNoID09PSAxNjAgfHwgYWNvcm4uaXNOZXdMaW5lKGNoKQogIH0KCiAgbHAkMi5uZXh0ID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLmxhc3QgPSB0aGlzLnRvazsKICAgIGlmICh0aGlzLmFoZWFkLmxlbmd0aCkKICAgICAgeyB0aGlzLnRvayA9IHRoaXMuYWhlYWQuc2hpZnQoKTsgfQogICAgZWxzZQogICAgICB7IHRoaXMudG9rID0gdGhpcy5yZWFkVG9rZW4oKTsgfQoKICAgIGlmICh0aGlzLnRvay5zdGFydCA+PSB0aGlzLm5leHRMaW5lU3RhcnQpIHsKICAgICAgd2hpbGUgKHRoaXMudG9rLnN0YXJ0ID49IHRoaXMubmV4dExpbmVTdGFydCkgewogICAgICAgIHRoaXMuY3VyTGluZVN0YXJ0ID0gdGhpcy5uZXh0TGluZVN0YXJ0OwogICAgICAgIHRoaXMubmV4dExpbmVTdGFydCA9IHRoaXMubGluZUVuZCh0aGlzLmN1ckxpbmVTdGFydCkgKyAxOwogICAgICB9CiAgICAgIHRoaXMuY3VySW5kZW50ID0gdGhpcy5pbmRlbnRhdGlvbkFmdGVyKHRoaXMuY3VyTGluZVN0YXJ0KTsKICAgIH0KICB9OwoKICBscCQyLnJlYWRUb2tlbiA9IGZ1bmN0aW9uKCkgewogICAgZm9yICg7OykgewogICAgICB0cnkgewogICAgICAgIHRoaXMudG9rcy5uZXh0KCk7CiAgICAgICAgaWYgKHRoaXMudG9rcy50eXBlID09PSBhY29ybi50b2tUeXBlcy5kb3QgJiYKICAgICAgICAgICAgdGhpcy5pbnB1dC5zdWJzdHIodGhpcy50b2tzLmVuZCwgMSkgPT09ICIuIiAmJgogICAgICAgICAgICB0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikgewogICAgICAgICAgdGhpcy50b2tzLmVuZCsrOwogICAgICAgICAgdGhpcy50b2tzLnR5cGUgPSBhY29ybi50b2tUeXBlcy5lbGxpcHNpczsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ldyBhY29ybi5Ub2tlbih0aGlzLnRva3MpCiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgU3ludGF4RXJyb3IpKSB7IHRocm93IGUgfQoKICAgICAgICAvLyBUcnkgdG8gc2tpcCBzb21lIHRleHQsIGJhc2VkIG9uIHRoZSBlcnJvciBtZXNzYWdlLCBhbmQgdGhlbiBjb250aW51ZQogICAgICAgIHZhciBtc2cgPSBlLm1lc3NhZ2UsIHBvcyA9IGUucmFpc2VkQXQsIHJlcGxhY2UgPSB0cnVlOwogICAgICAgIGlmICgvdW50ZXJtaW5hdGVkL2kudGVzdChtc2cpKSB7CiAgICAgICAgICBwb3MgPSB0aGlzLmxpbmVFbmQoZS5wb3MgKyAxKTsKICAgICAgICAgIGlmICgvc3RyaW5nLy50ZXN0KG1zZykpIHsKICAgICAgICAgICAgcmVwbGFjZSA9IHtzdGFydDogZS5wb3MsIGVuZDogcG9zLCB0eXBlOiBhY29ybi50b2tUeXBlcy5zdHJpbmcsIHZhbHVlOiB0aGlzLmlucHV0LnNsaWNlKGUucG9zICsgMSwgcG9zKX07CiAgICAgICAgICB9IGVsc2UgaWYgKC9yZWd1bGFyIGV4cHIvaS50ZXN0KG1zZykpIHsKICAgICAgICAgICAgdmFyIHJlID0gdGhpcy5pbnB1dC5zbGljZShlLnBvcywgcG9zKTsKICAgICAgICAgICAgdHJ5IHsgcmUgPSBuZXcgUmVnRXhwKHJlKTsgfSBjYXRjaCAoZSQxKSB7IC8qIGlnbm9yZSBjb21waWxhdGlvbiBlcnJvciBkdWUgdG8gbmV3IHN5bnRheCAqLyB9CiAgICAgICAgICAgIHJlcGxhY2UgPSB7c3RhcnQ6IGUucG9zLCBlbmQ6IHBvcywgdHlwZTogYWNvcm4udG9rVHlwZXMucmVnZXhwLCB2YWx1ZTogcmV9OwogICAgICAgICAgfSBlbHNlIGlmICgvdGVtcGxhdGUvLnRlc3QobXNnKSkgewogICAgICAgICAgICByZXBsYWNlID0gewogICAgICAgICAgICAgIHN0YXJ0OiBlLnBvcywKICAgICAgICAgICAgICBlbmQ6IHBvcywKICAgICAgICAgICAgICB0eXBlOiBhY29ybi50b2tUeXBlcy50ZW1wbGF0ZSwKICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5pbnB1dC5zbGljZShlLnBvcywgcG9zKQogICAgICAgICAgICB9OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVwbGFjZSA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoL2ludmFsaWQgKHVuaWNvZGV8cmVnZXhwfG51bWJlcil8ZXhwZWN0aW5nIHVuaWNvZGV8b2N0YWwgbGl0ZXJhbHxpcyByZXNlcnZlZHxkaXJlY3RseSBhZnRlciBudW1iZXJ8ZXhwZWN0ZWQgbnVtYmVyIGluIHJhZGl4L2kudGVzdChtc2cpKSB7CiAgICAgICAgICB3aGlsZSAocG9zIDwgdGhpcy5pbnB1dC5sZW5ndGggJiYgIWlzU3BhY2UodGhpcy5pbnB1dC5jaGFyQ29kZUF0KHBvcykpKSB7ICsrcG9zOyB9CiAgICAgICAgfSBlbHNlIGlmICgvY2hhcmFjdGVyIGVzY2FwZXxleHBlY3RlZCBoZXhhZGVjaW1hbC9pLnRlc3QobXNnKSkgewogICAgICAgICAgd2hpbGUgKHBvcyA8IHRoaXMuaW5wdXQubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBjaCA9IHRoaXMuaW5wdXQuY2hhckNvZGVBdChwb3MrKyk7CiAgICAgICAgICAgIGlmIChjaCA9PT0gMzQgfHwgY2ggPT09IDM5IHx8IGFjb3JuLmlzTmV3TGluZShjaCkpIHsgYnJlYWsgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoL3VuZXhwZWN0ZWQgY2hhcmFjdGVyL2kudGVzdChtc2cpKSB7CiAgICAgICAgICBwb3MrKzsKICAgICAgICAgIHJlcGxhY2UgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgaWYgKC9yZWd1bGFyIGV4cHJlc3Npb24vaS50ZXN0KG1zZykpIHsKICAgICAgICAgIHJlcGxhY2UgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBlCiAgICAgICAgfQogICAgICAgIHRoaXMucmVzZXRUbyhwb3MpOwogICAgICAgIGlmIChyZXBsYWNlID09PSB0cnVlKSB7IHJlcGxhY2UgPSB7c3RhcnQ6IHBvcywgZW5kOiBwb3MsIHR5cGU6IGFjb3JuLnRva1R5cGVzLm5hbWUsIHZhbHVlOiBkdW1teVZhbHVlfTsgfQogICAgICAgIGlmIChyZXBsYWNlKSB7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmxvY2F0aW9ucykKICAgICAgICAgICAgeyByZXBsYWNlLmxvYyA9IG5ldyBhY29ybi5Tb3VyY2VMb2NhdGlvbigKICAgICAgICAgICAgICB0aGlzLnRva3MsCiAgICAgICAgICAgICAgYWNvcm4uZ2V0TGluZUluZm8odGhpcy5pbnB1dCwgcmVwbGFjZS5zdGFydCksCiAgICAgICAgICAgICAgYWNvcm4uZ2V0TGluZUluZm8odGhpcy5pbnB1dCwgcmVwbGFjZS5lbmQpKTsgfQogICAgICAgICAgcmV0dXJuIHJlcGxhY2UKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICBscCQyLnJlc2V0VG8gPSBmdW5jdGlvbihwb3MpIHsKICAgIHRoaXMudG9rcy5wb3MgPSBwb3M7CiAgICB2YXIgY2ggPSB0aGlzLmlucHV0LmNoYXJBdChwb3MgLSAxKTsKICAgIHRoaXMudG9rcy5leHByQWxsb3dlZCA9ICFjaCB8fCAvW1t7KCw7Oj8vKj0rXC1+IXwmJV48Pl0vLnRlc3QoY2gpIHx8CiAgICAgIC9bZW53ZmRdLy50ZXN0KGNoKSAmJgogICAgICAvXGIoY2FzZXxlbHNlfHJldHVybnx0aHJvd3xuZXd8aW58KGluc3RhbmNlfHR5cGUpP29mfGRlbGV0ZXx2b2lkKSQvLnRlc3QodGhpcy5pbnB1dC5zbGljZShwb3MgLSAxMCwgcG9zKSk7CgogICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpIHsKICAgICAgdGhpcy50b2tzLmN1ckxpbmUgPSAxOwogICAgICB0aGlzLnRva3MubGluZVN0YXJ0ID0gYWNvcm4ubGluZUJyZWFrRy5sYXN0SW5kZXggPSAwOwogICAgICB2YXIgbWF0Y2g7CiAgICAgIHdoaWxlICgobWF0Y2ggPSBhY29ybi5saW5lQnJlYWtHLmV4ZWModGhpcy5pbnB1dCkpICYmIG1hdGNoLmluZGV4IDwgcG9zKSB7CiAgICAgICAgKyt0aGlzLnRva3MuY3VyTGluZTsKICAgICAgICB0aGlzLnRva3MubGluZVN0YXJ0ID0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7CiAgICAgIH0KICAgIH0KICB9OwoKICBscCQyLmxvb2tBaGVhZCA9IGZ1bmN0aW9uKG4pIHsKICAgIHdoaWxlIChuID4gdGhpcy5haGVhZC5sZW5ndGgpCiAgICAgIHsgdGhpcy5haGVhZC5wdXNoKHRoaXMucmVhZFRva2VuKCkpOyB9CiAgICByZXR1cm4gdGhpcy5haGVhZFtuIC0gMV0KICB9OwoKICB2YXIgbHAkMSA9IExvb3NlUGFyc2VyLnByb3RvdHlwZTsKCiAgbHAkMS5wYXJzZVRvcExldmVsID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlQXQodGhpcy5vcHRpb25zLmxvY2F0aW9ucyA/IFswLCBhY29ybi5nZXRMaW5lSW5mbyh0aGlzLmlucHV0LCAwKV0gOiAwKTsKICAgIG5vZGUuYm9keSA9IFtdOwogICAgd2hpbGUgKHRoaXMudG9rLnR5cGUgIT09IGFjb3JuLnRva1R5cGVzLmVvZikgeyBub2RlLmJvZHkucHVzaCh0aGlzLnBhcnNlU3RhdGVtZW50KCkpOyB9CiAgICB0aGlzLnRva3MuYWRhcHREaXJlY3RpdmVQcm9sb2d1ZShub2RlLmJvZHkpOwogICAgdGhpcy5sYXN0ID0gdGhpcy50b2s7CiAgICBub2RlLnNvdXJjZVR5cGUgPSB0aGlzLm9wdGlvbnMuc291cmNlVHlwZTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlByb2dyYW0iKQogIH07CgogIGxwJDEucGFyc2VTdGF0ZW1lbnQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBzdGFydHR5cGUgPSB0aGlzLnRvay50eXBlLCBub2RlID0gdGhpcy5zdGFydE5vZGUoKSwga2luZDsKCiAgICBpZiAodGhpcy50b2tzLmlzTGV0KCkpIHsKICAgICAgc3RhcnR0eXBlID0gYWNvcm4udG9rVHlwZXMuX3ZhcjsKICAgICAga2luZCA9ICJsZXQiOwogICAgfQoKICAgIHN3aXRjaCAoc3RhcnR0eXBlKSB7CiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9icmVhazogY2FzZSBhY29ybi50b2tUeXBlcy5fY29udGludWU6CiAgICAgIHRoaXMubmV4dCgpOwogICAgICB2YXIgaXNCcmVhayA9IHN0YXJ0dHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuX2JyZWFrOwogICAgICBpZiAodGhpcy5zZW1pY29sb24oKSB8fCB0aGlzLmNhbkluc2VydFNlbWljb2xvbigpKSB7CiAgICAgICAgbm9kZS5sYWJlbCA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbm9kZS5sYWJlbCA9IHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLm5hbWUgPyB0aGlzLnBhcnNlSWRlbnQoKSA6IG51bGw7CiAgICAgICAgdGhpcy5zZW1pY29sb24oKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsIGlzQnJlYWsgPyAiQnJlYWtTdGF0ZW1lbnQiIDogIkNvbnRpbnVlU3RhdGVtZW50IikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9kZWJ1Z2dlcjoKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIHRoaXMuc2VtaWNvbG9uKCk7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkRlYnVnZ2VyU3RhdGVtZW50IikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9kbzoKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIG5vZGUuYm9keSA9IHRoaXMucGFyc2VTdGF0ZW1lbnQoKTsKICAgICAgbm9kZS50ZXN0ID0gdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuX3doaWxlKSA/IHRoaXMucGFyc2VQYXJlbkV4cHJlc3Npb24oKSA6IHRoaXMuZHVtbXlJZGVudCgpOwogICAgICB0aGlzLnNlbWljb2xvbigpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJEb1doaWxlU3RhdGVtZW50IikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9mb3I6CiAgICAgIHRoaXMubmV4dCgpOyAvLyBgZm9yYCBrZXl3b3JkCiAgICAgIHZhciBpc0F3YWl0ID0gdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDkgJiYgdGhpcy5lYXRDb250ZXh0dWFsKCJhd2FpdCIpOwoKICAgICAgdGhpcy5wdXNoQ3goKTsKICAgICAgdGhpcy5leHBlY3QoYWNvcm4udG9rVHlwZXMucGFyZW5MKTsKICAgICAgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLnNlbWkpIHsgcmV0dXJuIHRoaXMucGFyc2VGb3Iobm9kZSwgbnVsbCkgfQogICAgICB2YXIgaXNMZXQgPSB0aGlzLnRva3MuaXNMZXQoKTsKICAgICAgaWYgKGlzTGV0IHx8IHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLl92YXIgfHwgdGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuX2NvbnN0KSB7CiAgICAgICAgdmFyIGluaXQkMSA9IHRoaXMucGFyc2VWYXIodGhpcy5zdGFydE5vZGUoKSwgdHJ1ZSwgaXNMZXQgPyAibGV0IiA6IHRoaXMudG9rLnZhbHVlKTsKICAgICAgICBpZiAoaW5pdCQxLmRlY2xhcmF0aW9ucy5sZW5ndGggPT09IDEgJiYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLl9pbiB8fCB0aGlzLmlzQ29udGV4dHVhbCgib2YiKSkpIHsKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOSAmJiB0aGlzLnRvay50eXBlICE9PSBhY29ybi50b2tUeXBlcy5faW4pIHsKICAgICAgICAgICAgbm9kZS5hd2FpdCA9IGlzQXdhaXQ7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUZvckluKG5vZGUsIGluaXQkMSkKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VGb3Iobm9kZSwgaW5pdCQxKQogICAgICB9CiAgICAgIHZhciBpbml0ID0gdGhpcy5wYXJzZUV4cHJlc3Npb24odHJ1ZSk7CiAgICAgIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5faW4gfHwgdGhpcy5pc0NvbnRleHR1YWwoIm9mIikpIHsKICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDkgJiYgdGhpcy50b2sudHlwZSAhPT0gYWNvcm4udG9rVHlwZXMuX2luKSB7CiAgICAgICAgICBub2RlLmF3YWl0ID0gaXNBd2FpdDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VGb3JJbihub2RlLCB0aGlzLnRvQXNzaWduYWJsZShpbml0KSkKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5wYXJzZUZvcihub2RlLCBpbml0KQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuX2Z1bmN0aW9uOgogICAgICB0aGlzLm5leHQoKTsKICAgICAgcmV0dXJuIHRoaXMucGFyc2VGdW5jdGlvbihub2RlLCB0cnVlKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuX2lmOgogICAgICB0aGlzLm5leHQoKTsKICAgICAgbm9kZS50ZXN0ID0gdGhpcy5wYXJzZVBhcmVuRXhwcmVzc2lvbigpOwogICAgICBub2RlLmNvbnNlcXVlbnQgPSB0aGlzLnBhcnNlU3RhdGVtZW50KCk7CiAgICAgIG5vZGUuYWx0ZXJuYXRlID0gdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuX2Vsc2UpID8gdGhpcy5wYXJzZVN0YXRlbWVudCgpIDogbnVsbDsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiSWZTdGF0ZW1lbnQiKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuX3JldHVybjoKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIGlmICh0aGlzLmVhdChhY29ybi50b2tUeXBlcy5zZW1pKSB8fCB0aGlzLmNhbkluc2VydFNlbWljb2xvbigpKSB7IG5vZGUuYXJndW1lbnQgPSBudWxsOyB9CiAgICAgIGVsc2UgeyBub2RlLmFyZ3VtZW50ID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oKTsgdGhpcy5zZW1pY29sb24oKTsgfQogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJSZXR1cm5TdGF0ZW1lbnQiKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuX3N3aXRjaDoKICAgICAgdmFyIGJsb2NrSW5kZW50ID0gdGhpcy5jdXJJbmRlbnQsIGxpbmUgPSB0aGlzLmN1ckxpbmVTdGFydDsKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIG5vZGUuZGlzY3JpbWluYW50ID0gdGhpcy5wYXJzZVBhcmVuRXhwcmVzc2lvbigpOwogICAgICBub2RlLmNhc2VzID0gW107CiAgICAgIHRoaXMucHVzaEN4KCk7CiAgICAgIHRoaXMuZXhwZWN0KGFjb3JuLnRva1R5cGVzLmJyYWNlTCk7CgogICAgICB2YXIgY3VyOwogICAgICB3aGlsZSAoIXRoaXMuY2xvc2VzKGFjb3JuLnRva1R5cGVzLmJyYWNlUiwgYmxvY2tJbmRlbnQsIGxpbmUsIHRydWUpKSB7CiAgICAgICAgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLl9jYXNlIHx8IHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLl9kZWZhdWx0KSB7CiAgICAgICAgICB2YXIgaXNDYXNlID0gdGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuX2Nhc2U7CiAgICAgICAgICBpZiAoY3VyKSB7IHRoaXMuZmluaXNoTm9kZShjdXIsICJTd2l0Y2hDYXNlIik7IH0KICAgICAgICAgIG5vZGUuY2FzZXMucHVzaChjdXIgPSB0aGlzLnN0YXJ0Tm9kZSgpKTsKICAgICAgICAgIGN1ci5jb25zZXF1ZW50ID0gW107CiAgICAgICAgICB0aGlzLm5leHQoKTsKICAgICAgICAgIGlmIChpc0Nhc2UpIHsgY3VyLnRlc3QgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpOyB9CiAgICAgICAgICBlbHNlIHsgY3VyLnRlc3QgPSBudWxsOyB9CiAgICAgICAgICB0aGlzLmV4cGVjdChhY29ybi50b2tUeXBlcy5jb2xvbik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICghY3VyKSB7CiAgICAgICAgICAgIG5vZGUuY2FzZXMucHVzaChjdXIgPSB0aGlzLnN0YXJ0Tm9kZSgpKTsKICAgICAgICAgICAgY3VyLmNvbnNlcXVlbnQgPSBbXTsKICAgICAgICAgICAgY3VyLnRlc3QgPSBudWxsOwogICAgICAgICAgfQogICAgICAgICAgY3VyLmNvbnNlcXVlbnQucHVzaCh0aGlzLnBhcnNlU3RhdGVtZW50KCkpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoY3VyKSB7IHRoaXMuZmluaXNoTm9kZShjdXIsICJTd2l0Y2hDYXNlIik7IH0KICAgICAgdGhpcy5wb3BDeCgpOwogICAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5icmFjZVIpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJTd2l0Y2hTdGF0ZW1lbnQiKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuX3Rocm93OgogICAgICB0aGlzLm5leHQoKTsKICAgICAgbm9kZS5hcmd1bWVudCA9IHRoaXMucGFyc2VFeHByZXNzaW9uKCk7CiAgICAgIHRoaXMuc2VtaWNvbG9uKCk7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlRocm93U3RhdGVtZW50IikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl90cnk6CiAgICAgIHRoaXMubmV4dCgpOwogICAgICBub2RlLmJsb2NrID0gdGhpcy5wYXJzZUJsb2NrKCk7CiAgICAgIG5vZGUuaGFuZGxlciA9IG51bGw7CiAgICAgIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5fY2F0Y2gpIHsKICAgICAgICB2YXIgY2xhdXNlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgICB0aGlzLm5leHQoKTsKICAgICAgICBpZiAodGhpcy5lYXQoYWNvcm4udG9rVHlwZXMucGFyZW5MKSkgewogICAgICAgICAgY2xhdXNlLnBhcmFtID0gdGhpcy50b0Fzc2lnbmFibGUodGhpcy5wYXJzZUV4cHJBdG9tKCksIHRydWUpOwogICAgICAgICAgdGhpcy5leHBlY3QoYWNvcm4udG9rVHlwZXMucGFyZW5SKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2xhdXNlLnBhcmFtID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgY2xhdXNlLmJvZHkgPSB0aGlzLnBhcnNlQmxvY2soKTsKICAgICAgICBub2RlLmhhbmRsZXIgPSB0aGlzLmZpbmlzaE5vZGUoY2xhdXNlLCAiQ2F0Y2hDbGF1c2UiKTsKICAgICAgfQogICAgICBub2RlLmZpbmFsaXplciA9IHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLl9maW5hbGx5KSA/IHRoaXMucGFyc2VCbG9jaygpIDogbnVsbDsKICAgICAgaWYgKCFub2RlLmhhbmRsZXIgJiYgIW5vZGUuZmluYWxpemVyKSB7IHJldHVybiBub2RlLmJsb2NrIH0KICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiVHJ5U3RhdGVtZW50IikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl92YXI6CiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9jb25zdDoKICAgICAgcmV0dXJuIHRoaXMucGFyc2VWYXIobm9kZSwgZmFsc2UsIGtpbmQgfHwgdGhpcy50b2sudmFsdWUpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5fd2hpbGU6CiAgICAgIHRoaXMubmV4dCgpOwogICAgICBub2RlLnRlc3QgPSB0aGlzLnBhcnNlUGFyZW5FeHByZXNzaW9uKCk7CiAgICAgIG5vZGUuYm9keSA9IHRoaXMucGFyc2VTdGF0ZW1lbnQoKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiV2hpbGVTdGF0ZW1lbnQiKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuX3dpdGg6CiAgICAgIHRoaXMubmV4dCgpOwogICAgICBub2RlLm9iamVjdCA9IHRoaXMucGFyc2VQYXJlbkV4cHJlc3Npb24oKTsKICAgICAgbm9kZS5ib2R5ID0gdGhpcy5wYXJzZVN0YXRlbWVudCgpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJXaXRoU3RhdGVtZW50IikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLmJyYWNlTDoKICAgICAgcmV0dXJuIHRoaXMucGFyc2VCbG9jaygpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5zZW1pOgogICAgICB0aGlzLm5leHQoKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRW1wdHlTdGF0ZW1lbnQiKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuX2NsYXNzOgogICAgICByZXR1cm4gdGhpcy5wYXJzZUNsYXNzKHRydWUpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5faW1wb3J0OgogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID4gMTApIHsKICAgICAgICB2YXIgbmV4dFR5cGUgPSB0aGlzLmxvb2tBaGVhZCgxKS50eXBlOwogICAgICAgIGlmIChuZXh0VHlwZSA9PT0gYWNvcm4udG9rVHlwZXMucGFyZW5MIHx8IG5leHRUeXBlID09PSBhY29ybi50b2tUeXBlcy5kb3QpIHsKICAgICAgICAgIG5vZGUuZXhwcmVzc2lvbiA9IHRoaXMucGFyc2VFeHByZXNzaW9uKCk7CiAgICAgICAgICB0aGlzLnNlbWljb2xvbigpOwogICAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRXhwcmVzc2lvblN0YXRlbWVudCIpCiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5wYXJzZUltcG9ydCgpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5fZXhwb3J0OgogICAgICByZXR1cm4gdGhpcy5wYXJzZUV4cG9ydCgpCgogICAgZGVmYXVsdDoKICAgICAgaWYgKHRoaXMudG9rcy5pc0FzeW5jRnVuY3Rpb24oKSkgewogICAgICAgIHRoaXMubmV4dCgpOwogICAgICAgIHRoaXMubmV4dCgpOwogICAgICAgIHJldHVybiB0aGlzLnBhcnNlRnVuY3Rpb24obm9kZSwgdHJ1ZSwgdHJ1ZSkKICAgICAgfQogICAgICB2YXIgZXhwciA9IHRoaXMucGFyc2VFeHByZXNzaW9uKCk7CiAgICAgIGlmIChpc0R1bW15KGV4cHIpKSB7CiAgICAgICAgdGhpcy5uZXh0KCk7CiAgICAgICAgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLmVvZikgeyByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJFbXB0eVN0YXRlbWVudCIpIH0KICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVN0YXRlbWVudCgpCiAgICAgIH0gZWxzZSBpZiAoc3RhcnR0eXBlID09PSBhY29ybi50b2tUeXBlcy5uYW1lICYmIGV4cHIudHlwZSA9PT0gIklkZW50aWZpZXIiICYmIHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmNvbG9uKSkgewogICAgICAgIG5vZGUuYm9keSA9IHRoaXMucGFyc2VTdGF0ZW1lbnQoKTsKICAgICAgICBub2RlLmxhYmVsID0gZXhwcjsKICAgICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJMYWJlbGVkU3RhdGVtZW50IikKICAgICAgfSBlbHNlIHsKICAgICAgICBub2RlLmV4cHJlc3Npb24gPSBleHByOwogICAgICAgIHRoaXMuc2VtaWNvbG9uKCk7CiAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRXhwcmVzc2lvblN0YXRlbWVudCIpCiAgICAgIH0KICAgIH0KICB9OwoKICBscCQxLnBhcnNlQmxvY2sgPSBmdW5jdGlvbigpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHRoaXMucHVzaEN4KCk7CiAgICB0aGlzLmV4cGVjdChhY29ybi50b2tUeXBlcy5icmFjZUwpOwogICAgdmFyIGJsb2NrSW5kZW50ID0gdGhpcy5jdXJJbmRlbnQsIGxpbmUgPSB0aGlzLmN1ckxpbmVTdGFydDsKICAgIG5vZGUuYm9keSA9IFtdOwogICAgd2hpbGUgKCF0aGlzLmNsb3NlcyhhY29ybi50b2tUeXBlcy5icmFjZVIsIGJsb2NrSW5kZW50LCBsaW5lLCB0cnVlKSkKICAgICAgeyBub2RlLmJvZHkucHVzaCh0aGlzLnBhcnNlU3RhdGVtZW50KCkpOyB9CiAgICB0aGlzLnBvcEN4KCk7CiAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5icmFjZVIpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiQmxvY2tTdGF0ZW1lbnQiKQogIH07CgogIGxwJDEucGFyc2VGb3IgPSBmdW5jdGlvbihub2RlLCBpbml0KSB7CiAgICBub2RlLmluaXQgPSBpbml0OwogICAgbm9kZS50ZXN0ID0gbm9kZS51cGRhdGUgPSBudWxsOwogICAgaWYgKHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLnNlbWkpICYmIHRoaXMudG9rLnR5cGUgIT09IGFjb3JuLnRva1R5cGVzLnNlbWkpIHsgbm9kZS50ZXN0ID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oKTsgfQogICAgaWYgKHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLnNlbWkpICYmIHRoaXMudG9rLnR5cGUgIT09IGFjb3JuLnRva1R5cGVzLnBhcmVuUikgeyBub2RlLnVwZGF0ZSA9IHRoaXMucGFyc2VFeHByZXNzaW9uKCk7IH0KICAgIHRoaXMucG9wQ3goKTsKICAgIHRoaXMuZXhwZWN0KGFjb3JuLnRva1R5cGVzLnBhcmVuUik7CiAgICBub2RlLmJvZHkgPSB0aGlzLnBhcnNlU3RhdGVtZW50KCk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJGb3JTdGF0ZW1lbnQiKQogIH07CgogIGxwJDEucGFyc2VGb3JJbiA9IGZ1bmN0aW9uKG5vZGUsIGluaXQpIHsKICAgIHZhciB0eXBlID0gdGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuX2luID8gIkZvckluU3RhdGVtZW50IiA6ICJGb3JPZlN0YXRlbWVudCI7CiAgICB0aGlzLm5leHQoKTsKICAgIG5vZGUubGVmdCA9IGluaXQ7CiAgICBub2RlLnJpZ2h0ID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oKTsKICAgIHRoaXMucG9wQ3goKTsKICAgIHRoaXMuZXhwZWN0KGFjb3JuLnRva1R5cGVzLnBhcmVuUik7CiAgICBub2RlLmJvZHkgPSB0aGlzLnBhcnNlU3RhdGVtZW50KCk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsIHR5cGUpCiAgfTsKCiAgbHAkMS5wYXJzZVZhciA9IGZ1bmN0aW9uKG5vZGUsIG5vSW4sIGtpbmQpIHsKICAgIG5vZGUua2luZCA9IGtpbmQ7CiAgICB0aGlzLm5leHQoKTsKICAgIG5vZGUuZGVjbGFyYXRpb25zID0gW107CiAgICBkbyB7CiAgICAgIHZhciBkZWNsID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgZGVjbC5pZCA9IHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2ID8gdGhpcy50b0Fzc2lnbmFibGUodGhpcy5wYXJzZUV4cHJBdG9tKCksIHRydWUpIDogdGhpcy5wYXJzZUlkZW50KCk7CiAgICAgIGRlY2wuaW5pdCA9IHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmVxKSA/IHRoaXMucGFyc2VNYXliZUFzc2lnbihub0luKSA6IG51bGw7CiAgICAgIG5vZGUuZGVjbGFyYXRpb25zLnB1c2godGhpcy5maW5pc2hOb2RlKGRlY2wsICJWYXJpYWJsZURlY2xhcmF0b3IiKSk7CiAgICB9IHdoaWxlICh0aGlzLmVhdChhY29ybi50b2tUeXBlcy5jb21tYSkpCiAgICBpZiAoIW5vZGUuZGVjbGFyYXRpb25zLmxlbmd0aCkgewogICAgICB2YXIgZGVjbCQxID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgZGVjbCQxLmlkID0gdGhpcy5kdW1teUlkZW50KCk7CiAgICAgIG5vZGUuZGVjbGFyYXRpb25zLnB1c2godGhpcy5maW5pc2hOb2RlKGRlY2wkMSwgIlZhcmlhYmxlRGVjbGFyYXRvciIpKTsKICAgIH0KICAgIGlmICghbm9JbikgeyB0aGlzLnNlbWljb2xvbigpOyB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJWYXJpYWJsZURlY2xhcmF0aW9uIikKICB9OwoKICBscCQxLnBhcnNlQ2xhc3MgPSBmdW5jdGlvbihpc1N0YXRlbWVudCkgewogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgdGhpcy5uZXh0KCk7CiAgICBpZiAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMubmFtZSkgeyBub2RlLmlkID0gdGhpcy5wYXJzZUlkZW50KCk7IH0KICAgIGVsc2UgaWYgKGlzU3RhdGVtZW50ID09PSB0cnVlKSB7IG5vZGUuaWQgPSB0aGlzLmR1bW15SWRlbnQoKTsgfQogICAgZWxzZSB7IG5vZGUuaWQgPSBudWxsOyB9CiAgICBub2RlLnN1cGVyQ2xhc3MgPSB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5fZXh0ZW5kcykgPyB0aGlzLnBhcnNlRXhwcmVzc2lvbigpIDogbnVsbDsKICAgIG5vZGUuYm9keSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICBub2RlLmJvZHkuYm9keSA9IFtdOwogICAgdGhpcy5wdXNoQ3goKTsKICAgIHZhciBpbmRlbnQgPSB0aGlzLmN1ckluZGVudCArIDEsIGxpbmUgPSB0aGlzLmN1ckxpbmVTdGFydDsKICAgIHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmJyYWNlTCk7CiAgICBpZiAodGhpcy5jdXJJbmRlbnQgKyAxIDwgaW5kZW50KSB7IGluZGVudCA9IHRoaXMuY3VySW5kZW50OyBsaW5lID0gdGhpcy5jdXJMaW5lU3RhcnQ7IH0KICAgIHdoaWxlICghdGhpcy5jbG9zZXMoYWNvcm4udG9rVHlwZXMuYnJhY2VSLCBpbmRlbnQsIGxpbmUpKSB7CiAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5wYXJzZUNsYXNzRWxlbWVudCgpOwogICAgICBpZiAoZWxlbWVudCkgeyBub2RlLmJvZHkuYm9keS5wdXNoKGVsZW1lbnQpOyB9CiAgICB9CiAgICB0aGlzLnBvcEN4KCk7CiAgICBpZiAoIXRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmJyYWNlUikpIHsKICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gY2xvc2luZyBicmFjZSwgbWFrZSB0aGUgbm9kZSBzcGFuIHRvIHRoZSBzdGFydAogICAgICAvLyBvZiB0aGUgbmV4dCB0b2tlbiAodGhpcyBpcyB1c2VmdWwgZm9yIFRlcm4pCiAgICAgIHRoaXMubGFzdC5lbmQgPSB0aGlzLnRvay5zdGFydDsKICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpIHsgdGhpcy5sYXN0LmxvYy5lbmQgPSB0aGlzLnRvay5sb2Muc3RhcnQ7IH0KICAgIH0KICAgIHRoaXMuc2VtaWNvbG9uKCk7CiAgICB0aGlzLmZpbmlzaE5vZGUobm9kZS5ib2R5LCAiQ2xhc3NCb2R5Iik7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsIGlzU3RhdGVtZW50ID8gIkNsYXNzRGVjbGFyYXRpb24iIDogIkNsYXNzRXhwcmVzc2lvbiIpCiAgfTsKCiAgbHAkMS5wYXJzZUNsYXNzRWxlbWVudCA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLnNlbWkpKSB7IHJldHVybiBudWxsIH0KCiAgICB2YXIgcmVmID0gdGhpcy5vcHRpb25zOwogICAgdmFyIGVjbWFWZXJzaW9uID0gcmVmLmVjbWFWZXJzaW9uOwogICAgdmFyIGxvY2F0aW9ucyA9IHJlZi5sb2NhdGlvbnM7CiAgICB2YXIgaW5kZW50ID0gdGhpcy5jdXJJbmRlbnQ7CiAgICB2YXIgbGluZSA9IHRoaXMuY3VyTGluZVN0YXJ0OwogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgdmFyIGtleU5hbWUgPSAiIjsKICAgIHZhciBpc0dlbmVyYXRvciA9IGZhbHNlOwogICAgdmFyIGlzQXN5bmMgPSBmYWxzZTsKICAgIHZhciBraW5kID0gIm1ldGhvZCI7CiAgICB2YXIgaXNTdGF0aWMgPSBmYWxzZTsKCiAgICBpZiAodGhpcy5lYXRDb250ZXh0dWFsKCJzdGF0aWMiKSkgewogICAgICAvLyBQYXJzZSBzdGF0aWMgaW5pdCBibG9jawogICAgICBpZiAoZWNtYVZlcnNpb24gPj0gMTMgJiYgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuYnJhY2VMKSkgewogICAgICAgIHRoaXMucGFyc2VDbGFzc1N0YXRpY0Jsb2NrKG5vZGUpOwogICAgICAgIHJldHVybiBub2RlCiAgICAgIH0KICAgICAgaWYgKHRoaXMuaXNDbGFzc0VsZW1lbnROYW1lU3RhcnQoKSB8fCB0aGlzLnRva3MudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuc3RhcikgewogICAgICAgIGlzU3RhdGljID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBrZXlOYW1lID0gInN0YXRpYyI7CiAgICAgIH0KICAgIH0KICAgIG5vZGUuc3RhdGljID0gaXNTdGF0aWM7CiAgICBpZiAoIWtleU5hbWUgJiYgZWNtYVZlcnNpb24gPj0gOCAmJiB0aGlzLmVhdENvbnRleHR1YWwoImFzeW5jIikpIHsKICAgICAgaWYgKCh0aGlzLmlzQ2xhc3NFbGVtZW50TmFtZVN0YXJ0KCkgfHwgdGhpcy50b2tzLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLnN0YXIpICYmICF0aGlzLmNhbkluc2VydFNlbWljb2xvbigpKSB7CiAgICAgICAgaXNBc3luYyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAga2V5TmFtZSA9ICJhc3luYyI7CiAgICAgIH0KICAgIH0KICAgIGlmICgha2V5TmFtZSkgewogICAgICBpc0dlbmVyYXRvciA9IHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLnN0YXIpOwogICAgICB2YXIgbGFzdFZhbHVlID0gdGhpcy50b2tzLnZhbHVlOwogICAgICBpZiAodGhpcy5lYXRDb250ZXh0dWFsKCJnZXQiKSB8fCB0aGlzLmVhdENvbnRleHR1YWwoInNldCIpKSB7CiAgICAgICAgaWYgKHRoaXMuaXNDbGFzc0VsZW1lbnROYW1lU3RhcnQoKSkgewogICAgICAgICAga2luZCA9IGxhc3RWYWx1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAga2V5TmFtZSA9IGxhc3RWYWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICAvLyBQYXJzZSBlbGVtZW50IG5hbWUKICAgIGlmIChrZXlOYW1lKSB7CiAgICAgIC8vICdhc3luYycsICdnZXQnLCAnc2V0Jywgb3IgJ3N0YXRpYycgd2VyZSBub3QgYSBrZXl3b3JkIGNvbnRleHR1YWxseS4KICAgICAgLy8gVGhlIGxhc3QgdG9rZW4gaXMgYW55IG9mIHRob3NlLiBNYWtlIGl0IHRoZSBlbGVtZW50IG5hbWUuCiAgICAgIG5vZGUuY29tcHV0ZWQgPSBmYWxzZTsKICAgICAgbm9kZS5rZXkgPSB0aGlzLnN0YXJ0Tm9kZUF0KGxvY2F0aW9ucyA/IFt0aGlzLnRva3MubGFzdFRva1N0YXJ0LCB0aGlzLnRva3MubGFzdFRva1N0YXJ0TG9jXSA6IHRoaXMudG9rcy5sYXN0VG9rU3RhcnQpOwogICAgICBub2RlLmtleS5uYW1lID0ga2V5TmFtZTsKICAgICAgdGhpcy5maW5pc2hOb2RlKG5vZGUua2V5LCAiSWRlbnRpZmllciIpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5wYXJzZUNsYXNzRWxlbWVudE5hbWUobm9kZSk7CgogICAgICAvLyBGcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9hY29ybmpzL2Fjb3JuL2Jsb2IvN2RlYmE0MTExOGQ2Mzg0YTJjNDk4YzYxMTc2YjNjZjQzNGY2OTU5MC9hY29ybi1sb29zZS9zcmMvc3RhdGVtZW50LmpzI0wyOTEKICAgICAgLy8gU2tpcCBicm9rZW4gc3R1ZmYuCiAgICAgIGlmIChpc0R1bW15KG5vZGUua2V5KSkgewogICAgICAgIGlmIChpc0R1bW15KHRoaXMucGFyc2VNYXliZUFzc2lnbigpKSkgeyB0aGlzLm5leHQoKTsgfQogICAgICAgIHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmNvbW1hKTsKICAgICAgICByZXR1cm4gbnVsbAogICAgICB9CiAgICB9CgogICAgLy8gUGFyc2UgZWxlbWVudCB2YWx1ZQogICAgaWYgKGVjbWFWZXJzaW9uIDwgMTMgfHwgdGhpcy50b2tzLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLnBhcmVuTCB8fCBraW5kICE9PSAibWV0aG9kIiB8fCBpc0dlbmVyYXRvciB8fCBpc0FzeW5jKSB7CiAgICAgIC8vIE1ldGhvZAogICAgICB2YXIgaXNDb25zdHJ1Y3RvciA9CiAgICAgICAgIW5vZGUuY29tcHV0ZWQgJiYKICAgICAgICAhbm9kZS5zdGF0aWMgJiYKICAgICAgICAhaXNHZW5lcmF0b3IgJiYKICAgICAgICAhaXNBc3luYyAmJgogICAgICAgIGtpbmQgPT09ICJtZXRob2QiICYmICgKICAgICAgICAgIG5vZGUua2V5LnR5cGUgPT09ICJJZGVudGlmaWVyIiAmJiBub2RlLmtleS5uYW1lID09PSAiY29uc3RydWN0b3IiIHx8CiAgICAgICAgICBub2RlLmtleS50eXBlID09PSAiTGl0ZXJhbCIgJiYgbm9kZS5rZXkudmFsdWUgPT09ICJjb25zdHJ1Y3RvciIKICAgICAgICApOwogICAgICBub2RlLmtpbmQgPSBpc0NvbnN0cnVjdG9yID8gImNvbnN0cnVjdG9yIiA6IGtpbmQ7CiAgICAgIG5vZGUudmFsdWUgPSB0aGlzLnBhcnNlTWV0aG9kKGlzR2VuZXJhdG9yLCBpc0FzeW5jKTsKICAgICAgdGhpcy5maW5pc2hOb2RlKG5vZGUsICJNZXRob2REZWZpbml0aW9uIik7CiAgICB9IGVsc2UgewogICAgICAvLyBGaWVsZAogICAgICBpZiAodGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuZXEpKSB7CiAgICAgICAgaWYgKHRoaXMuY3VyTGluZVN0YXJ0ICE9PSBsaW5lICYmIHRoaXMuY3VySW5kZW50IDw9IGluZGVudCAmJiB0aGlzLnRva2VuU3RhcnRzTGluZSgpKSB7CiAgICAgICAgICAvLyBFc3RpbWF0ZWQgdGhlIG5leHQgbGluZSBpcyB0aGUgbmV4dCBjbGFzcyBlbGVtZW50IGJ5IGluZGVudGF0aW9ucy4KICAgICAgICAgIG5vZGUudmFsdWUgPSBudWxsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgb2xkSW5Bc3luYyA9IHRoaXMuaW5Bc3luYzsKICAgICAgICAgIHZhciBvbGRJbkdlbmVyYXRvciA9IHRoaXMuaW5HZW5lcmF0b3I7CiAgICAgICAgICB0aGlzLmluQXN5bmMgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuaW5HZW5lcmF0b3IgPSBmYWxzZTsKICAgICAgICAgIG5vZGUudmFsdWUgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oKTsKICAgICAgICAgIHRoaXMuaW5Bc3luYyA9IG9sZEluQXN5bmM7CiAgICAgICAgICB0aGlzLmluR2VuZXJhdG9yID0gb2xkSW5HZW5lcmF0b3I7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIG5vZGUudmFsdWUgPSBudWxsOwogICAgICB9CiAgICAgIHRoaXMuc2VtaWNvbG9uKCk7CiAgICAgIHRoaXMuZmluaXNoTm9kZShub2RlLCAiUHJvcGVydHlEZWZpbml0aW9uIik7CiAgICB9CgogICAgcmV0dXJuIG5vZGUKICB9OwoKICBscCQxLnBhcnNlQ2xhc3NTdGF0aWNCbG9jayA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIHZhciBibG9ja0luZGVudCA9IHRoaXMuY3VySW5kZW50LCBsaW5lID0gdGhpcy5jdXJMaW5lU3RhcnQ7CiAgICBub2RlLmJvZHkgPSBbXTsKICAgIHRoaXMucHVzaEN4KCk7CiAgICB3aGlsZSAoIXRoaXMuY2xvc2VzKGFjb3JuLnRva1R5cGVzLmJyYWNlUiwgYmxvY2tJbmRlbnQsIGxpbmUsIHRydWUpKQogICAgICB7IG5vZGUuYm9keS5wdXNoKHRoaXMucGFyc2VTdGF0ZW1lbnQoKSk7IH0KICAgIHRoaXMucG9wQ3goKTsKICAgIHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmJyYWNlUik7CgogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiU3RhdGljQmxvY2siKQogIH07CgogIGxwJDEuaXNDbGFzc0VsZW1lbnROYW1lU3RhcnQgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLnRva3MuaXNDbGFzc0VsZW1lbnROYW1lU3RhcnQoKQogIH07CgogIGxwJDEucGFyc2VDbGFzc0VsZW1lbnROYW1lID0gZnVuY3Rpb24oZWxlbWVudCkgewogICAgaWYgKHRoaXMudG9rcy50eXBlID09PSBhY29ybi50b2tUeXBlcy5wcml2YXRlSWQpIHsKICAgICAgZWxlbWVudC5jb21wdXRlZCA9IGZhbHNlOwogICAgICBlbGVtZW50LmtleSA9IHRoaXMucGFyc2VQcml2YXRlSWRlbnQoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucGFyc2VQcm9wZXJ0eU5hbWUoZWxlbWVudCk7CiAgICB9CiAgfTsKCiAgbHAkMS5wYXJzZUZ1bmN0aW9uID0gZnVuY3Rpb24obm9kZSwgaXNTdGF0ZW1lbnQsIGlzQXN5bmMpIHsKICAgIHZhciBvbGRJbkFzeW5jID0gdGhpcy5pbkFzeW5jLCBvbGRJbkdlbmVyYXRvciA9IHRoaXMuaW5HZW5lcmF0b3IsIG9sZEluRnVuY3Rpb24gPSB0aGlzLmluRnVuY3Rpb247CiAgICB0aGlzLmluaXRGdW5jdGlvbihub2RlKTsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikgewogICAgICBub2RlLmdlbmVyYXRvciA9IHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLnN0YXIpOwogICAgfQogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA4KSB7CiAgICAgIG5vZGUuYXN5bmMgPSAhIWlzQXN5bmM7CiAgICB9CiAgICBpZiAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMubmFtZSkgeyBub2RlLmlkID0gdGhpcy5wYXJzZUlkZW50KCk7IH0KICAgIGVsc2UgaWYgKGlzU3RhdGVtZW50ID09PSB0cnVlKSB7IG5vZGUuaWQgPSB0aGlzLmR1bW15SWRlbnQoKTsgfQogICAgdGhpcy5pbkFzeW5jID0gbm9kZS5hc3luYzsKICAgIHRoaXMuaW5HZW5lcmF0b3IgPSBub2RlLmdlbmVyYXRvcjsKICAgIHRoaXMuaW5GdW5jdGlvbiA9IHRydWU7CiAgICBub2RlLnBhcmFtcyA9IHRoaXMucGFyc2VGdW5jdGlvblBhcmFtcygpOwogICAgbm9kZS5ib2R5ID0gdGhpcy5wYXJzZUJsb2NrKCk7CiAgICB0aGlzLnRva3MuYWRhcHREaXJlY3RpdmVQcm9sb2d1ZShub2RlLmJvZHkuYm9keSk7CiAgICB0aGlzLmluQXN5bmMgPSBvbGRJbkFzeW5jOwogICAgdGhpcy5pbkdlbmVyYXRvciA9IG9sZEluR2VuZXJhdG9yOwogICAgdGhpcy5pbkZ1bmN0aW9uID0gb2xkSW5GdW5jdGlvbjsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgaXNTdGF0ZW1lbnQgPyAiRnVuY3Rpb25EZWNsYXJhdGlvbiIgOiAiRnVuY3Rpb25FeHByZXNzaW9uIikKICB9OwoKICBscCQxLnBhcnNlRXhwb3J0ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICB0aGlzLm5leHQoKTsKICAgIGlmICh0aGlzLmVhdChhY29ybi50b2tUeXBlcy5zdGFyKSkgewogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDExKSB7CiAgICAgICAgaWYgKHRoaXMuZWF0Q29udGV4dHVhbCgiYXMiKSkgewogICAgICAgICAgbm9kZS5leHBvcnRlZCA9IHRoaXMucGFyc2VFeHByQXRvbSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBub2RlLmV4cG9ydGVkID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0KICAgICAgbm9kZS5zb3VyY2UgPSB0aGlzLmVhdENvbnRleHR1YWwoImZyb20iKSA/IHRoaXMucGFyc2VFeHByQXRvbSgpIDogdGhpcy5kdW1teVN0cmluZygpOwogICAgICB0aGlzLnNlbWljb2xvbigpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJFeHBvcnRBbGxEZWNsYXJhdGlvbiIpCiAgICB9CiAgICBpZiAodGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuX2RlZmF1bHQpKSB7CiAgICAgIC8vIGV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiBmb28oKSB7fSkgLy8gVGhpcyBpcyBGdW5jdGlvbkV4cHJlc3Npb24uCiAgICAgIHZhciBpc0FzeW5jOwogICAgICBpZiAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuX2Z1bmN0aW9uIHx8IChpc0FzeW5jID0gdGhpcy50b2tzLmlzQXN5bmNGdW5jdGlvbigpKSkgewogICAgICAgIHZhciBmTm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgICAgdGhpcy5uZXh0KCk7CiAgICAgICAgaWYgKGlzQXN5bmMpIHsgdGhpcy5uZXh0KCk7IH0KICAgICAgICBub2RlLmRlY2xhcmF0aW9uID0gdGhpcy5wYXJzZUZ1bmN0aW9uKGZOb2RlLCAibnVsbGFibGVJRCIsIGlzQXN5bmMpOwogICAgICB9IGVsc2UgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLl9jbGFzcykgewogICAgICAgIG5vZGUuZGVjbGFyYXRpb24gPSB0aGlzLnBhcnNlQ2xhc3MoIm51bGxhYmxlSUQiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBub2RlLmRlY2xhcmF0aW9uID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKCk7CiAgICAgICAgdGhpcy5zZW1pY29sb24oKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJFeHBvcnREZWZhdWx0RGVjbGFyYXRpb24iKQogICAgfQogICAgaWYgKHRoaXMudG9rLnR5cGUua2V5d29yZCB8fCB0aGlzLnRva3MuaXNMZXQoKSB8fCB0aGlzLnRva3MuaXNBc3luY0Z1bmN0aW9uKCkpIHsKICAgICAgbm9kZS5kZWNsYXJhdGlvbiA9IHRoaXMucGFyc2VTdGF0ZW1lbnQoKTsKICAgICAgbm9kZS5zcGVjaWZpZXJzID0gW107CiAgICAgIG5vZGUuc291cmNlID0gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIG5vZGUuZGVjbGFyYXRpb24gPSBudWxsOwogICAgICBub2RlLnNwZWNpZmllcnMgPSB0aGlzLnBhcnNlRXhwb3J0U3BlY2lmaWVyTGlzdCgpOwogICAgICBub2RlLnNvdXJjZSA9IHRoaXMuZWF0Q29udGV4dHVhbCgiZnJvbSIpID8gdGhpcy5wYXJzZUV4cHJBdG9tKCkgOiBudWxsOwogICAgICB0aGlzLnNlbWljb2xvbigpOwogICAgfQogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRXhwb3J0TmFtZWREZWNsYXJhdGlvbiIpCiAgfTsKCiAgbHAkMS5wYXJzZUltcG9ydCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgdGhpcy5uZXh0KCk7CiAgICBpZiAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuc3RyaW5nKSB7CiAgICAgIG5vZGUuc3BlY2lmaWVycyA9IFtdOwogICAgICBub2RlLnNvdXJjZSA9IHRoaXMucGFyc2VFeHByQXRvbSgpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGVsdDsKICAgICAgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLm5hbWUgJiYgdGhpcy50b2sudmFsdWUgIT09ICJmcm9tIikgewogICAgICAgIGVsdCA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgICAgZWx0LmxvY2FsID0gdGhpcy5wYXJzZUlkZW50KCk7CiAgICAgICAgdGhpcy5maW5pc2hOb2RlKGVsdCwgIkltcG9ydERlZmF1bHRTcGVjaWZpZXIiKTsKICAgICAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5jb21tYSk7CiAgICAgIH0KICAgICAgbm9kZS5zcGVjaWZpZXJzID0gdGhpcy5wYXJzZUltcG9ydFNwZWNpZmllcnMoKTsKICAgICAgbm9kZS5zb3VyY2UgPSB0aGlzLmVhdENvbnRleHR1YWwoImZyb20iKSAmJiB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5zdHJpbmcgPyB0aGlzLnBhcnNlRXhwckF0b20oKSA6IHRoaXMuZHVtbXlTdHJpbmcoKTsKICAgICAgaWYgKGVsdCkgeyBub2RlLnNwZWNpZmllcnMudW5zaGlmdChlbHQpOyB9CiAgICB9CiAgICB0aGlzLnNlbWljb2xvbigpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiSW1wb3J0RGVjbGFyYXRpb24iKQogIH07CgogIGxwJDEucGFyc2VJbXBvcnRTcGVjaWZpZXJzID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZWx0cyA9IFtdOwogICAgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLnN0YXIpIHsKICAgICAgdmFyIGVsdCA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICBlbHQubG9jYWwgPSB0aGlzLmVhdENvbnRleHR1YWwoImFzIikgPyB0aGlzLnBhcnNlSWRlbnQoKSA6IHRoaXMuZHVtbXlJZGVudCgpOwogICAgICBlbHRzLnB1c2godGhpcy5maW5pc2hOb2RlKGVsdCwgIkltcG9ydE5hbWVzcGFjZVNwZWNpZmllciIpKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBpbmRlbnQgPSB0aGlzLmN1ckluZGVudCwgbGluZSA9IHRoaXMuY3VyTGluZVN0YXJ0LCBjb250aW51ZWRMaW5lID0gdGhpcy5uZXh0TGluZVN0YXJ0OwogICAgICB0aGlzLnB1c2hDeCgpOwogICAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5icmFjZUwpOwogICAgICBpZiAodGhpcy5jdXJMaW5lU3RhcnQgPiBjb250aW51ZWRMaW5lKSB7IGNvbnRpbnVlZExpbmUgPSB0aGlzLmN1ckxpbmVTdGFydDsgfQogICAgICB3aGlsZSAoIXRoaXMuY2xvc2VzKGFjb3JuLnRva1R5cGVzLmJyYWNlUiwgaW5kZW50ICsgKHRoaXMuY3VyTGluZVN0YXJ0IDw9IGNvbnRpbnVlZExpbmUgPyAxIDogMCksIGxpbmUpKSB7CiAgICAgICAgdmFyIGVsdCQxID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgICBpZiAodGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuc3RhcikpIHsKICAgICAgICAgIGVsdCQxLmxvY2FsID0gdGhpcy5lYXRDb250ZXh0dWFsKCJhcyIpID8gdGhpcy5wYXJzZU1vZHVsZUV4cG9ydE5hbWUoKSA6IHRoaXMuZHVtbXlJZGVudCgpOwogICAgICAgICAgdGhpcy5maW5pc2hOb2RlKGVsdCQxLCAiSW1wb3J0TmFtZXNwYWNlU3BlY2lmaWVyIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICh0aGlzLmlzQ29udGV4dHVhbCgiZnJvbSIpKSB7IGJyZWFrIH0KICAgICAgICAgIGVsdCQxLmltcG9ydGVkID0gdGhpcy5wYXJzZU1vZHVsZUV4cG9ydE5hbWUoKTsKICAgICAgICAgIGlmIChpc0R1bW15KGVsdCQxLmltcG9ydGVkKSkgeyBicmVhayB9CiAgICAgICAgICBlbHQkMS5sb2NhbCA9IHRoaXMuZWF0Q29udGV4dHVhbCgiYXMiKSA/IHRoaXMucGFyc2VNb2R1bGVFeHBvcnROYW1lKCkgOiBlbHQkMS5pbXBvcnRlZDsKICAgICAgICAgIHRoaXMuZmluaXNoTm9kZShlbHQkMSwgIkltcG9ydFNwZWNpZmllciIpOwogICAgICAgIH0KICAgICAgICBlbHRzLnB1c2goZWx0JDEpOwogICAgICAgIHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmNvbW1hKTsKICAgICAgfQogICAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5icmFjZVIpOwogICAgICB0aGlzLnBvcEN4KCk7CiAgICB9CiAgICByZXR1cm4gZWx0cwogIH07CgogIGxwJDEucGFyc2VFeHBvcnRTcGVjaWZpZXJMaXN0ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZWx0cyA9IFtdOwogICAgdmFyIGluZGVudCA9IHRoaXMuY3VySW5kZW50LCBsaW5lID0gdGhpcy5jdXJMaW5lU3RhcnQsIGNvbnRpbnVlZExpbmUgPSB0aGlzLm5leHRMaW5lU3RhcnQ7CiAgICB0aGlzLnB1c2hDeCgpOwogICAgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuYnJhY2VMKTsKICAgIGlmICh0aGlzLmN1ckxpbmVTdGFydCA+IGNvbnRpbnVlZExpbmUpIHsgY29udGludWVkTGluZSA9IHRoaXMuY3VyTGluZVN0YXJ0OyB9CiAgICB3aGlsZSAoIXRoaXMuY2xvc2VzKGFjb3JuLnRva1R5cGVzLmJyYWNlUiwgaW5kZW50ICsgKHRoaXMuY3VyTGluZVN0YXJ0IDw9IGNvbnRpbnVlZExpbmUgPyAxIDogMCksIGxpbmUpKSB7CiAgICAgIGlmICh0aGlzLmlzQ29udGV4dHVhbCgiZnJvbSIpKSB7IGJyZWFrIH0KICAgICAgdmFyIGVsdCA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIGVsdC5sb2NhbCA9IHRoaXMucGFyc2VNb2R1bGVFeHBvcnROYW1lKCk7CiAgICAgIGlmIChpc0R1bW15KGVsdC5sb2NhbCkpIHsgYnJlYWsgfQogICAgICBlbHQuZXhwb3J0ZWQgPSB0aGlzLmVhdENvbnRleHR1YWwoImFzIikgPyB0aGlzLnBhcnNlTW9kdWxlRXhwb3J0TmFtZSgpIDogZWx0LmxvY2FsOwogICAgICB0aGlzLmZpbmlzaE5vZGUoZWx0LCAiRXhwb3J0U3BlY2lmaWVyIik7CiAgICAgIGVsdHMucHVzaChlbHQpOwogICAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5jb21tYSk7CiAgICB9CiAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5icmFjZVIpOwogICAgdGhpcy5wb3BDeCgpOwogICAgcmV0dXJuIGVsdHMKICB9OwoKICBscCQxLnBhcnNlTW9kdWxlRXhwb3J0TmFtZSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSAxMyAmJiB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5zdHJpbmcKICAgICAgPyB0aGlzLnBhcnNlRXhwckF0b20oKQogICAgICA6IHRoaXMucGFyc2VJZGVudCgpCiAgfTsKCiAgdmFyIGxwID0gTG9vc2VQYXJzZXIucHJvdG90eXBlOwoKICBscC5jaGVja0xWYWwgPSBmdW5jdGlvbihleHByKSB7CiAgICBpZiAoIWV4cHIpIHsgcmV0dXJuIGV4cHIgfQogICAgc3dpdGNoIChleHByLnR5cGUpIHsKICAgIGNhc2UgIklkZW50aWZpZXIiOgogICAgY2FzZSAiTWVtYmVyRXhwcmVzc2lvbiI6CiAgICAgIHJldHVybiBleHByCgogICAgY2FzZSAiUGFyZW50aGVzaXplZEV4cHJlc3Npb24iOgogICAgICBleHByLmV4cHJlc3Npb24gPSB0aGlzLmNoZWNrTFZhbChleHByLmV4cHJlc3Npb24pOwogICAgICByZXR1cm4gZXhwcgoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiB0aGlzLmR1bW15SWRlbnQoKQogICAgfQogIH07CgogIGxwLnBhcnNlRXhwcmVzc2lvbiA9IGZ1bmN0aW9uKG5vSW4pIHsKICAgIHZhciBzdGFydCA9IHRoaXMuc3RvcmVDdXJyZW50UG9zKCk7CiAgICB2YXIgZXhwciA9IHRoaXMucGFyc2VNYXliZUFzc2lnbihub0luKTsKICAgIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5jb21tYSkgewogICAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnQpOwogICAgICBub2RlLmV4cHJlc3Npb25zID0gW2V4cHJdOwogICAgICB3aGlsZSAodGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuY29tbWEpKSB7IG5vZGUuZXhwcmVzc2lvbnMucHVzaCh0aGlzLnBhcnNlTWF5YmVBc3NpZ24obm9JbikpOyB9CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlNlcXVlbmNlRXhwcmVzc2lvbiIpCiAgICB9CiAgICByZXR1cm4gZXhwcgogIH07CgogIGxwLnBhcnNlUGFyZW5FeHByZXNzaW9uID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLnB1c2hDeCgpOwogICAgdGhpcy5leHBlY3QoYWNvcm4udG9rVHlwZXMucGFyZW5MKTsKICAgIHZhciB2YWwgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpOwogICAgdGhpcy5wb3BDeCgpOwogICAgdGhpcy5leHBlY3QoYWNvcm4udG9rVHlwZXMucGFyZW5SKTsKICAgIHJldHVybiB2YWwKICB9OwoKICBscC5wYXJzZU1heWJlQXNzaWduID0gZnVuY3Rpb24obm9JbikgewogICAgLy8gYHlpZWxkYCBzaG91bGQgYmUgYW4gaWRlbnRpZmllciByZWZlcmVuY2UgaWYgaXQncyBub3QgaW4gZ2VuZXJhdG9yIGZ1bmN0aW9ucy4KICAgIGlmICh0aGlzLmluR2VuZXJhdG9yICYmIHRoaXMudG9rcy5pc0NvbnRleHR1YWwoInlpZWxkIikpIHsKICAgICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICB0aGlzLm5leHQoKTsKICAgICAgaWYgKHRoaXMuc2VtaWNvbG9uKCkgfHwgdGhpcy5jYW5JbnNlcnRTZW1pY29sb24oKSB8fCAodGhpcy50b2sudHlwZSAhPT0gYWNvcm4udG9rVHlwZXMuc3RhciAmJiAhdGhpcy50b2sudHlwZS5zdGFydHNFeHByKSkgewogICAgICAgIG5vZGUuZGVsZWdhdGUgPSBmYWxzZTsKICAgICAgICBub2RlLmFyZ3VtZW50ID0gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICBub2RlLmRlbGVnYXRlID0gdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuc3Rhcik7CiAgICAgICAgbm9kZS5hcmd1bWVudCA9IHRoaXMucGFyc2VNYXliZUFzc2lnbigpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIllpZWxkRXhwcmVzc2lvbiIpCiAgICB9CgogICAgdmFyIHN0YXJ0ID0gdGhpcy5zdG9yZUN1cnJlbnRQb3MoKTsKICAgIHZhciBsZWZ0ID0gdGhpcy5wYXJzZU1heWJlQ29uZGl0aW9uYWwobm9Jbik7CiAgICBpZiAodGhpcy50b2sudHlwZS5pc0Fzc2lnbikgewogICAgICB2YXIgbm9kZSQxID0gdGhpcy5zdGFydE5vZGVBdChzdGFydCk7CiAgICAgIG5vZGUkMS5vcGVyYXRvciA9IHRoaXMudG9rLnZhbHVlOwogICAgICBub2RlJDEubGVmdCA9IHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLmVxID8gdGhpcy50b0Fzc2lnbmFibGUobGVmdCkgOiB0aGlzLmNoZWNrTFZhbChsZWZ0KTsKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIG5vZGUkMS5yaWdodCA9IHRoaXMucGFyc2VNYXliZUFzc2lnbihub0luKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlJDEsICJBc3NpZ25tZW50RXhwcmVzc2lvbiIpCiAgICB9CiAgICByZXR1cm4gbGVmdAogIH07CgogIGxwLnBhcnNlTWF5YmVDb25kaXRpb25hbCA9IGZ1bmN0aW9uKG5vSW4pIHsKICAgIHZhciBzdGFydCA9IHRoaXMuc3RvcmVDdXJyZW50UG9zKCk7CiAgICB2YXIgZXhwciA9IHRoaXMucGFyc2VFeHByT3BzKG5vSW4pOwogICAgaWYgKHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLnF1ZXN0aW9uKSkgewogICAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnQpOwogICAgICBub2RlLnRlc3QgPSBleHByOwogICAgICBub2RlLmNvbnNlcXVlbnQgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oKTsKICAgICAgbm9kZS5hbHRlcm5hdGUgPSB0aGlzLmV4cGVjdChhY29ybi50b2tUeXBlcy5jb2xvbikgPyB0aGlzLnBhcnNlTWF5YmVBc3NpZ24obm9JbikgOiB0aGlzLmR1bW15SWRlbnQoKTsKICAgICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiQ29uZGl0aW9uYWxFeHByZXNzaW9uIikKICAgIH0KICAgIHJldHVybiBleHByCiAgfTsKCiAgbHAucGFyc2VFeHByT3BzID0gZnVuY3Rpb24obm9JbikgewogICAgdmFyIHN0YXJ0ID0gdGhpcy5zdG9yZUN1cnJlbnRQb3MoKTsKICAgIHZhciBpbmRlbnQgPSB0aGlzLmN1ckluZGVudCwgbGluZSA9IHRoaXMuY3VyTGluZVN0YXJ0OwogICAgcmV0dXJuIHRoaXMucGFyc2VFeHByT3AodGhpcy5wYXJzZU1heWJlVW5hcnkoZmFsc2UpLCBzdGFydCwgLTEsIG5vSW4sIGluZGVudCwgbGluZSkKICB9OwoKICBscC5wYXJzZUV4cHJPcCA9IGZ1bmN0aW9uKGxlZnQsIHN0YXJ0LCBtaW5QcmVjLCBub0luLCBpbmRlbnQsIGxpbmUpIHsKICAgIGlmICh0aGlzLmN1ckxpbmVTdGFydCAhPT0gbGluZSAmJiB0aGlzLmN1ckluZGVudCA8IGluZGVudCAmJiB0aGlzLnRva2VuU3RhcnRzTGluZSgpKSB7IHJldHVybiBsZWZ0IH0KICAgIHZhciBwcmVjID0gdGhpcy50b2sudHlwZS5iaW5vcDsKICAgIGlmIChwcmVjICE9IG51bGwgJiYgKCFub0luIHx8IHRoaXMudG9rLnR5cGUgIT09IGFjb3JuLnRva1R5cGVzLl9pbikpIHsKICAgICAgaWYgKHByZWMgPiBtaW5QcmVjKSB7CiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0KTsKICAgICAgICBub2RlLmxlZnQgPSBsZWZ0OwogICAgICAgIG5vZGUub3BlcmF0b3IgPSB0aGlzLnRvay52YWx1ZTsKICAgICAgICB0aGlzLm5leHQoKTsKICAgICAgICBpZiAodGhpcy5jdXJMaW5lU3RhcnQgIT09IGxpbmUgJiYgdGhpcy5jdXJJbmRlbnQgPCBpbmRlbnQgJiYgdGhpcy50b2tlblN0YXJ0c0xpbmUoKSkgewogICAgICAgICAgbm9kZS5yaWdodCA9IHRoaXMuZHVtbXlJZGVudCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgcmlnaHRTdGFydCA9IHRoaXMuc3RvcmVDdXJyZW50UG9zKCk7CiAgICAgICAgICBub2RlLnJpZ2h0ID0gdGhpcy5wYXJzZUV4cHJPcCh0aGlzLnBhcnNlTWF5YmVVbmFyeShmYWxzZSksIHJpZ2h0U3RhcnQsIHByZWMsIG5vSW4sIGluZGVudCwgbGluZSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuZmluaXNoTm9kZShub2RlLCAvJiZ8XHxcfHxcP1w/Ly50ZXN0KG5vZGUub3BlcmF0b3IpID8gIkxvZ2ljYWxFeHByZXNzaW9uIiA6ICJCaW5hcnlFeHByZXNzaW9uIik7CiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VFeHByT3Aobm9kZSwgc3RhcnQsIG1pblByZWMsIG5vSW4sIGluZGVudCwgbGluZSkKICAgICAgfQogICAgfQogICAgcmV0dXJuIGxlZnQKICB9OwoKICBscC5wYXJzZU1heWJlVW5hcnkgPSBmdW5jdGlvbihzYXdVbmFyeSkgewogICAgdmFyIHN0YXJ0ID0gdGhpcy5zdG9yZUN1cnJlbnRQb3MoKSwgZXhwcjsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOCAmJiB0aGlzLnRva3MuaXNDb250ZXh0dWFsKCJhd2FpdCIpICYmCiAgICAgICAgKHRoaXMuaW5Bc3luYyB8fCAodGhpcy50b2tzLmluTW9kdWxlICYmIHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSAxMykgfHwKICAgICAgICAgKCF0aGlzLmluRnVuY3Rpb24gJiYgdGhpcy5vcHRpb25zLmFsbG93QXdhaXRPdXRzaWRlRnVuY3Rpb24pKSkgewogICAgICBleHByID0gdGhpcy5wYXJzZUF3YWl0KCk7CiAgICAgIHNhd1VuYXJ5ID0gdHJ1ZTsKICAgIH0gZWxzZSBpZiAodGhpcy50b2sudHlwZS5wcmVmaXgpIHsKICAgICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpLCB1cGRhdGUgPSB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5pbmNEZWM7CiAgICAgIGlmICghdXBkYXRlKSB7IHNhd1VuYXJ5ID0gdHJ1ZTsgfQogICAgICBub2RlLm9wZXJhdG9yID0gdGhpcy50b2sudmFsdWU7CiAgICAgIG5vZGUucHJlZml4ID0gdHJ1ZTsKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIG5vZGUuYXJndW1lbnQgPSB0aGlzLnBhcnNlTWF5YmVVbmFyeSh0cnVlKTsKICAgICAgaWYgKHVwZGF0ZSkgeyBub2RlLmFyZ3VtZW50ID0gdGhpcy5jaGVja0xWYWwobm9kZS5hcmd1bWVudCk7IH0KICAgICAgZXhwciA9IHRoaXMuZmluaXNoTm9kZShub2RlLCB1cGRhdGUgPyAiVXBkYXRlRXhwcmVzc2lvbiIgOiAiVW5hcnlFeHByZXNzaW9uIik7CiAgICB9IGVsc2UgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLmVsbGlwc2lzKSB7CiAgICAgIHZhciBub2RlJDEgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICB0aGlzLm5leHQoKTsKICAgICAgbm9kZSQxLmFyZ3VtZW50ID0gdGhpcy5wYXJzZU1heWJlVW5hcnkoc2F3VW5hcnkpOwogICAgICBleHByID0gdGhpcy5maW5pc2hOb2RlKG5vZGUkMSwgIlNwcmVhZEVsZW1lbnQiKTsKICAgIH0gZWxzZSBpZiAoIXNhd1VuYXJ5ICYmIHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLnByaXZhdGVJZCkgewogICAgICBleHByID0gdGhpcy5wYXJzZVByaXZhdGVJZGVudCgpOwogICAgfSBlbHNlIHsKICAgICAgZXhwciA9IHRoaXMucGFyc2VFeHByU3Vic2NyaXB0cygpOwogICAgICB3aGlsZSAodGhpcy50b2sudHlwZS5wb3N0Zml4ICYmICF0aGlzLmNhbkluc2VydFNlbWljb2xvbigpKSB7CiAgICAgICAgdmFyIG5vZGUkMiA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnQpOwogICAgICAgIG5vZGUkMi5vcGVyYXRvciA9IHRoaXMudG9rLnZhbHVlOwogICAgICAgIG5vZGUkMi5wcmVmaXggPSBmYWxzZTsKICAgICAgICBub2RlJDIuYXJndW1lbnQgPSB0aGlzLmNoZWNrTFZhbChleHByKTsKICAgICAgICB0aGlzLm5leHQoKTsKICAgICAgICBleHByID0gdGhpcy5maW5pc2hOb2RlKG5vZGUkMiwgIlVwZGF0ZUV4cHJlc3Npb24iKTsKICAgICAgfQogICAgfQoKICAgIGlmICghc2F3VW5hcnkgJiYgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuc3RhcnN0YXIpKSB7CiAgICAgIHZhciBub2RlJDMgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0KTsKICAgICAgbm9kZSQzLm9wZXJhdG9yID0gIioqIjsKICAgICAgbm9kZSQzLmxlZnQgPSBleHByOwogICAgICBub2RlJDMucmlnaHQgPSB0aGlzLnBhcnNlTWF5YmVVbmFyeShmYWxzZSk7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSQzLCAiQmluYXJ5RXhwcmVzc2lvbiIpCiAgICB9CgogICAgcmV0dXJuIGV4cHIKICB9OwoKICBscC5wYXJzZUV4cHJTdWJzY3JpcHRzID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgc3RhcnQgPSB0aGlzLnN0b3JlQ3VycmVudFBvcygpOwogICAgcmV0dXJuIHRoaXMucGFyc2VTdWJzY3JpcHRzKHRoaXMucGFyc2VFeHByQXRvbSgpLCBzdGFydCwgZmFsc2UsIHRoaXMuY3VySW5kZW50LCB0aGlzLmN1ckxpbmVTdGFydCkKICB9OwoKICBscC5wYXJzZVN1YnNjcmlwdHMgPSBmdW5jdGlvbihiYXNlLCBzdGFydCwgbm9DYWxscywgc3RhcnRJbmRlbnQsIGxpbmUpIHsKICAgIHZhciBvcHRpb25hbFN1cHBvcnRlZCA9IHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSAxMTsKICAgIHZhciBvcHRpb25hbENoYWluZWQgPSBmYWxzZTsKICAgIGZvciAoOzspIHsKICAgICAgaWYgKHRoaXMuY3VyTGluZVN0YXJ0ICE9PSBsaW5lICYmIHRoaXMuY3VySW5kZW50IDw9IHN0YXJ0SW5kZW50ICYmIHRoaXMudG9rZW5TdGFydHNMaW5lKCkpIHsKICAgICAgICBpZiAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuZG90ICYmIHRoaXMuY3VySW5kZW50ID09PSBzdGFydEluZGVudCkKICAgICAgICAgIHsgLS1zdGFydEluZGVudDsgfQogICAgICAgIGVsc2UKICAgICAgICAgIHsgYnJlYWsgfQogICAgICB9CgogICAgICB2YXIgbWF5YmVBc3luY0Fycm93ID0gYmFzZS50eXBlID09PSAiSWRlbnRpZmllciIgJiYgYmFzZS5uYW1lID09PSAiYXN5bmMiICYmICF0aGlzLmNhbkluc2VydFNlbWljb2xvbigpOwogICAgICB2YXIgb3B0aW9uYWwgPSBvcHRpb25hbFN1cHBvcnRlZCAmJiB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5xdWVzdGlvbkRvdCk7CiAgICAgIGlmIChvcHRpb25hbCkgewogICAgICAgIG9wdGlvbmFsQ2hhaW5lZCA9IHRydWU7CiAgICAgIH0KCiAgICAgIGlmICgob3B0aW9uYWwgJiYgdGhpcy50b2sudHlwZSAhPT0gYWNvcm4udG9rVHlwZXMucGFyZW5MICYmIHRoaXMudG9rLnR5cGUgIT09IGFjb3JuLnRva1R5cGVzLmJyYWNrZXRMICYmIHRoaXMudG9rLnR5cGUgIT09IGFjb3JuLnRva1R5cGVzLmJhY2tRdW90ZSkgfHwgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuZG90KSkgewogICAgICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGVBdChzdGFydCk7CiAgICAgICAgbm9kZS5vYmplY3QgPSBiYXNlOwogICAgICAgIGlmICh0aGlzLmN1ckxpbmVTdGFydCAhPT0gbGluZSAmJiB0aGlzLmN1ckluZGVudCA8PSBzdGFydEluZGVudCAmJiB0aGlzLnRva2VuU3RhcnRzTGluZSgpKQogICAgICAgICAgeyBub2RlLnByb3BlcnR5ID0gdGhpcy5kdW1teUlkZW50KCk7IH0KICAgICAgICBlbHNlCiAgICAgICAgICB7IG5vZGUucHJvcGVydHkgPSB0aGlzLnBhcnNlUHJvcGVydHlBY2Nlc3NvcigpIHx8IHRoaXMuZHVtbXlJZGVudCgpOyB9CiAgICAgICAgbm9kZS5jb21wdXRlZCA9IGZhbHNlOwogICAgICAgIGlmIChvcHRpb25hbFN1cHBvcnRlZCkgewogICAgICAgICAgbm9kZS5vcHRpb25hbCA9IG9wdGlvbmFsOwogICAgICAgIH0KICAgICAgICBiYXNlID0gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJNZW1iZXJFeHByZXNzaW9uIik7CiAgICAgIH0gZWxzZSBpZiAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuYnJhY2tldEwpIHsKICAgICAgICB0aGlzLnB1c2hDeCgpOwogICAgICAgIHRoaXMubmV4dCgpOwogICAgICAgIHZhciBub2RlJDEgPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0KTsKICAgICAgICBub2RlJDEub2JqZWN0ID0gYmFzZTsKICAgICAgICBub2RlJDEucHJvcGVydHkgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpOwogICAgICAgIG5vZGUkMS5jb21wdXRlZCA9IHRydWU7CiAgICAgICAgaWYgKG9wdGlvbmFsU3VwcG9ydGVkKSB7CiAgICAgICAgICBub2RlJDEub3B0aW9uYWwgPSBvcHRpb25hbDsKICAgICAgICB9CiAgICAgICAgdGhpcy5wb3BDeCgpOwogICAgICAgIHRoaXMuZXhwZWN0KGFjb3JuLnRva1R5cGVzLmJyYWNrZXRSKTsKICAgICAgICBiYXNlID0gdGhpcy5maW5pc2hOb2RlKG5vZGUkMSwgIk1lbWJlckV4cHJlc3Npb24iKTsKICAgICAgfSBlbHNlIGlmICghbm9DYWxscyAmJiB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5wYXJlbkwpIHsKICAgICAgICB2YXIgZXhwckxpc3QgPSB0aGlzLnBhcnNlRXhwckxpc3QoYWNvcm4udG9rVHlwZXMucGFyZW5SKTsKICAgICAgICBpZiAobWF5YmVBc3luY0Fycm93ICYmIHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmFycm93KSkKICAgICAgICAgIHsgcmV0dXJuIHRoaXMucGFyc2VBcnJvd0V4cHJlc3Npb24odGhpcy5zdGFydE5vZGVBdChzdGFydCksIGV4cHJMaXN0LCB0cnVlKSB9CiAgICAgICAgdmFyIG5vZGUkMiA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnQpOwogICAgICAgIG5vZGUkMi5jYWxsZWUgPSBiYXNlOwogICAgICAgIG5vZGUkMi5hcmd1bWVudHMgPSBleHByTGlzdDsKICAgICAgICBpZiAob3B0aW9uYWxTdXBwb3J0ZWQpIHsKICAgICAgICAgIG5vZGUkMi5vcHRpb25hbCA9IG9wdGlvbmFsOwogICAgICAgIH0KICAgICAgICBiYXNlID0gdGhpcy5maW5pc2hOb2RlKG5vZGUkMiwgIkNhbGxFeHByZXNzaW9uIik7CiAgICAgIH0gZWxzZSBpZiAodGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuYmFja1F1b3RlKSB7CiAgICAgICAgdmFyIG5vZGUkMyA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnQpOwogICAgICAgIG5vZGUkMy50YWcgPSBiYXNlOwogICAgICAgIG5vZGUkMy5xdWFzaSA9IHRoaXMucGFyc2VUZW1wbGF0ZSgpOwogICAgICAgIGJhc2UgPSB0aGlzLmZpbmlzaE5vZGUobm9kZSQzLCAiVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYnJlYWsKICAgICAgfQogICAgfQoKICAgIGlmIChvcHRpb25hbENoYWluZWQpIHsKICAgICAgdmFyIGNoYWluTm9kZSA9IHRoaXMuc3RhcnROb2RlQXQoc3RhcnQpOwogICAgICBjaGFpbk5vZGUuZXhwcmVzc2lvbiA9IGJhc2U7CiAgICAgIGJhc2UgPSB0aGlzLmZpbmlzaE5vZGUoY2hhaW5Ob2RlLCAiQ2hhaW5FeHByZXNzaW9uIik7CiAgICB9CiAgICByZXR1cm4gYmFzZQogIH07CgogIGxwLnBhcnNlRXhwckF0b20gPSBmdW5jdGlvbigpIHsKICAgIHZhciBub2RlOwogICAgc3dpdGNoICh0aGlzLnRvay50eXBlKSB7CiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl90aGlzOgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5fc3VwZXI6CiAgICAgIHZhciB0eXBlID0gdGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuX3RoaXMgPyAiVGhpc0V4cHJlc3Npb24iIDogIlN1cGVyIjsKICAgICAgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsIHR5cGUpCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5uYW1lOgogICAgICB2YXIgc3RhcnQgPSB0aGlzLnN0b3JlQ3VycmVudFBvcygpOwogICAgICB2YXIgaWQgPSB0aGlzLnBhcnNlSWRlbnQoKTsKICAgICAgdmFyIGlzQXN5bmMgPSBmYWxzZTsKICAgICAgaWYgKGlkLm5hbWUgPT09ICJhc3luYyIgJiYgIXRoaXMuY2FuSW5zZXJ0U2VtaWNvbG9uKCkpIHsKICAgICAgICBpZiAodGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuX2Z1bmN0aW9uKSkgewogICAgICAgICAgdGhpcy50b2tzLm92ZXJyaWRlQ29udGV4dChhY29ybi50b2tDb250ZXh0cy5mX2V4cHIpOwogICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VGdW5jdGlvbih0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0KSwgZmFsc2UsIHRydWUpCiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5uYW1lKSB7CiAgICAgICAgICBpZCA9IHRoaXMucGFyc2VJZGVudCgpOwogICAgICAgICAgaXNBc3luYyA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5hcnJvdykgPyB0aGlzLnBhcnNlQXJyb3dFeHByZXNzaW9uKHRoaXMuc3RhcnROb2RlQXQoc3RhcnQpLCBbaWRdLCBpc0FzeW5jKSA6IGlkCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5yZWdleHA6CiAgICAgIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICB2YXIgdmFsID0gdGhpcy50b2sudmFsdWU7CiAgICAgIG5vZGUucmVnZXggPSB7cGF0dGVybjogdmFsLnBhdHRlcm4sIGZsYWdzOiB2YWwuZmxhZ3N9OwogICAgICBub2RlLnZhbHVlID0gdmFsLnZhbHVlOwogICAgICBub2RlLnJhdyA9IHRoaXMuaW5wdXQuc2xpY2UodGhpcy50b2suc3RhcnQsIHRoaXMudG9rLmVuZCk7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJMaXRlcmFsIikKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLm51bTogY2FzZSBhY29ybi50b2tUeXBlcy5zdHJpbmc6CiAgICAgIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgICBub2RlLnZhbHVlID0gdGhpcy50b2sudmFsdWU7CiAgICAgIG5vZGUucmF3ID0gdGhpcy5pbnB1dC5zbGljZSh0aGlzLnRvay5zdGFydCwgdGhpcy50b2suZW5kKTsKICAgICAgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLm51bSAmJiBub2RlLnJhdy5jaGFyQ29kZUF0KG5vZGUucmF3Lmxlbmd0aCAtIDEpID09PSAxMTApIHsgbm9kZS5iaWdpbnQgPSBub2RlLnJhdy5zbGljZSgwLCAtMSkucmVwbGFjZSgvXy9nLCAiIik7IH0KICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkxpdGVyYWwiKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuX251bGw6IGNhc2UgYWNvcm4udG9rVHlwZXMuX3RydWU6IGNhc2UgYWNvcm4udG9rVHlwZXMuX2ZhbHNlOgogICAgICBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgICAgbm9kZS52YWx1ZSA9IHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLl9udWxsID8gbnVsbCA6IHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLl90cnVlOwogICAgICBub2RlLnJhdyA9IHRoaXMudG9rLnR5cGUua2V5d29yZDsKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIkxpdGVyYWwiKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMucGFyZW5MOgogICAgICB2YXIgcGFyZW5TdGFydCA9IHRoaXMuc3RvcmVDdXJyZW50UG9zKCk7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICB2YXIgaW5uZXIgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigpOwogICAgICB0aGlzLmV4cGVjdChhY29ybi50b2tUeXBlcy5wYXJlblIpOwogICAgICBpZiAodGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuYXJyb3cpKSB7CiAgICAgICAgLy8gKGEsKT0+YSAvLyBTZXF1ZW5jZUV4cHJlc3Npb24gbWFrZXMgZHVtbXkgaW4gdGhlIGxhc3QgaG9sZS4gRHJvcCB0aGUgZHVtbXkuCiAgICAgICAgdmFyIHBhcmFtcyA9IGlubmVyLmV4cHJlc3Npb25zIHx8IFtpbm5lcl07CiAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggJiYgaXNEdW1teShwYXJhbXNbcGFyYW1zLmxlbmd0aCAtIDFdKSkKICAgICAgICAgIHsgcGFyYW1zLnBvcCgpOyB9CiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VBcnJvd0V4cHJlc3Npb24odGhpcy5zdGFydE5vZGVBdChwYXJlblN0YXJ0KSwgcGFyYW1zKQogICAgICB9CiAgICAgIGlmICh0aGlzLm9wdGlvbnMucHJlc2VydmVQYXJlbnMpIHsKICAgICAgICB2YXIgcGFyID0gdGhpcy5zdGFydE5vZGVBdChwYXJlblN0YXJ0KTsKICAgICAgICBwYXIuZXhwcmVzc2lvbiA9IGlubmVyOwogICAgICAgIGlubmVyID0gdGhpcy5maW5pc2hOb2RlKHBhciwgIlBhcmVudGhlc2l6ZWRFeHByZXNzaW9uIik7CiAgICAgIH0KICAgICAgcmV0dXJuIGlubmVyCgogICAgY2FzZSBhY29ybi50b2tUeXBlcy5icmFja2V0TDoKICAgICAgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIG5vZGUuZWxlbWVudHMgPSB0aGlzLnBhcnNlRXhwckxpc3QoYWNvcm4udG9rVHlwZXMuYnJhY2tldFIsIHRydWUpOwogICAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJBcnJheUV4cHJlc3Npb24iKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuYnJhY2VMOgogICAgICB0aGlzLnRva3Mub3ZlcnJpZGVDb250ZXh0KGFjb3JuLnRva0NvbnRleHRzLmJfZXhwcik7CiAgICAgIHJldHVybiB0aGlzLnBhcnNlT2JqKCkKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9jbGFzczoKICAgICAgcmV0dXJuIHRoaXMucGFyc2VDbGFzcyhmYWxzZSkKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9mdW5jdGlvbjoKICAgICAgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICByZXR1cm4gdGhpcy5wYXJzZUZ1bmN0aW9uKG5vZGUsIGZhbHNlKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuX25ldzoKICAgICAgcmV0dXJuIHRoaXMucGFyc2VOZXcoKQoKICAgIGNhc2UgYWNvcm4udG9rVHlwZXMuYmFja1F1b3RlOgogICAgICByZXR1cm4gdGhpcy5wYXJzZVRlbXBsYXRlKCkKCiAgICBjYXNlIGFjb3JuLnRva1R5cGVzLl9pbXBvcnQ6CiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gMTEpIHsKICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUV4cHJJbXBvcnQoKQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLmR1bW15SWRlbnQoKQogICAgICB9CgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIHRoaXMuZHVtbXlJZGVudCgpCiAgICB9CiAgfTsKCiAgbHAucGFyc2VFeHBySW1wb3J0ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICB2YXIgbWV0YSA9IHRoaXMucGFyc2VJZGVudCh0cnVlKTsKICAgIHN3aXRjaCAodGhpcy50b2sudHlwZSkgewogICAgY2FzZSBhY29ybi50b2tUeXBlcy5wYXJlbkw6CiAgICAgIHJldHVybiB0aGlzLnBhcnNlRHluYW1pY0ltcG9ydChub2RlKQogICAgY2FzZSBhY29ybi50b2tUeXBlcy5kb3Q6CiAgICAgIG5vZGUubWV0YSA9IG1ldGE7CiAgICAgIHJldHVybiB0aGlzLnBhcnNlSW1wb3J0TWV0YShub2RlKQogICAgZGVmYXVsdDoKICAgICAgbm9kZS5uYW1lID0gImltcG9ydCI7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIklkZW50aWZpZXIiKQogICAgfQogIH07CgogIGxwLnBhcnNlRHluYW1pY0ltcG9ydCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgIG5vZGUuc291cmNlID0gdGhpcy5wYXJzZUV4cHJMaXN0KGFjb3JuLnRva1R5cGVzLnBhcmVuUilbMF0gfHwgdGhpcy5kdW1teVN0cmluZygpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiSW1wb3J0RXhwcmVzc2lvbiIpCiAgfTsKCiAgbHAucGFyc2VJbXBvcnRNZXRhID0gZnVuY3Rpb24obm9kZSkgewogICAgdGhpcy5uZXh0KCk7IC8vIHNraXAgJy4nCiAgICBub2RlLnByb3BlcnR5ID0gdGhpcy5wYXJzZUlkZW50KHRydWUpOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiTWV0YVByb3BlcnR5IikKICB9OwoKICBscC5wYXJzZU5ldyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpLCBzdGFydEluZGVudCA9IHRoaXMuY3VySW5kZW50LCBsaW5lID0gdGhpcy5jdXJMaW5lU3RhcnQ7CiAgICB2YXIgbWV0YSA9IHRoaXMucGFyc2VJZGVudCh0cnVlKTsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNiAmJiB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5kb3QpKSB7CiAgICAgIG5vZGUubWV0YSA9IG1ldGE7CiAgICAgIG5vZGUucHJvcGVydHkgPSB0aGlzLnBhcnNlSWRlbnQodHJ1ZSk7CiAgICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIk1ldGFQcm9wZXJ0eSIpCiAgICB9CiAgICB2YXIgc3RhcnQgPSB0aGlzLnN0b3JlQ3VycmVudFBvcygpOwogICAgbm9kZS5jYWxsZWUgPSB0aGlzLnBhcnNlU3Vic2NyaXB0cyh0aGlzLnBhcnNlRXhwckF0b20oKSwgc3RhcnQsIHRydWUsIHN0YXJ0SW5kZW50LCBsaW5lKTsKICAgIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5wYXJlbkwpIHsKICAgICAgbm9kZS5hcmd1bWVudHMgPSB0aGlzLnBhcnNlRXhwckxpc3QoYWNvcm4udG9rVHlwZXMucGFyZW5SKTsKICAgIH0gZWxzZSB7CiAgICAgIG5vZGUuYXJndW1lbnRzID0gW107CiAgICB9CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJOZXdFeHByZXNzaW9uIikKICB9OwoKICBscC5wYXJzZVRlbXBsYXRlRWxlbWVudCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGVsZW0gPSB0aGlzLnN0YXJ0Tm9kZSgpOwoKICAgIC8vIFRoZSBsb29zZSBwYXJzZXIgYWNjZXB0cyBpbnZhbGlkIHVuaWNvZGUgZXNjYXBlcyBldmVuIGluIHVudGFnZ2VkIHRlbXBsYXRlcy4KICAgIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5pbnZhbGlkVGVtcGxhdGUpIHsKICAgICAgZWxlbS52YWx1ZSA9IHsKICAgICAgICByYXc6IHRoaXMudG9rLnZhbHVlLAogICAgICAgIGNvb2tlZDogbnVsbAogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgZWxlbS52YWx1ZSA9IHsKICAgICAgICByYXc6IHRoaXMuaW5wdXQuc2xpY2UodGhpcy50b2suc3RhcnQsIHRoaXMudG9rLmVuZCkucmVwbGFjZSgvXHJcbj8vZywgIlxuIiksCiAgICAgICAgY29va2VkOiB0aGlzLnRvay52YWx1ZQogICAgICB9OwogICAgfQogICAgdGhpcy5uZXh0KCk7CiAgICBlbGVtLnRhaWwgPSB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5iYWNrUXVvdGU7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKGVsZW0sICJUZW1wbGF0ZUVsZW1lbnQiKQogIH07CgogIGxwLnBhcnNlVGVtcGxhdGUgPSBmdW5jdGlvbigpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHRoaXMubmV4dCgpOwogICAgbm9kZS5leHByZXNzaW9ucyA9IFtdOwogICAgdmFyIGN1ckVsdCA9IHRoaXMucGFyc2VUZW1wbGF0ZUVsZW1lbnQoKTsKICAgIG5vZGUucXVhc2lzID0gW2N1ckVsdF07CiAgICB3aGlsZSAoIWN1ckVsdC50YWlsKSB7CiAgICAgIHRoaXMubmV4dCgpOwogICAgICBub2RlLmV4cHJlc3Npb25zLnB1c2godGhpcy5wYXJzZUV4cHJlc3Npb24oKSk7CiAgICAgIGlmICh0aGlzLmV4cGVjdChhY29ybi50b2tUeXBlcy5icmFjZVIpKSB7CiAgICAgICAgY3VyRWx0ID0gdGhpcy5wYXJzZVRlbXBsYXRlRWxlbWVudCgpOwogICAgICB9IGVsc2UgewogICAgICAgIGN1ckVsdCA9IHRoaXMuc3RhcnROb2RlKCk7CiAgICAgICAgY3VyRWx0LnZhbHVlID0ge2Nvb2tlZDogIiIsIHJhdzogIiJ9OwogICAgICAgIGN1ckVsdC50YWlsID0gdHJ1ZTsKICAgICAgICB0aGlzLmZpbmlzaE5vZGUoY3VyRWx0LCAiVGVtcGxhdGVFbGVtZW50Iik7CiAgICAgIH0KICAgICAgbm9kZS5xdWFzaXMucHVzaChjdXJFbHQpOwogICAgfQogICAgdGhpcy5leHBlY3QoYWNvcm4udG9rVHlwZXMuYmFja1F1b3RlKTsKICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIlRlbXBsYXRlTGl0ZXJhbCIpCiAgfTsKCiAgbHAucGFyc2VPYmogPSBmdW5jdGlvbigpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIG5vZGUucHJvcGVydGllcyA9IFtdOwogICAgdGhpcy5wdXNoQ3goKTsKICAgIHZhciBpbmRlbnQgPSB0aGlzLmN1ckluZGVudCArIDEsIGxpbmUgPSB0aGlzLmN1ckxpbmVTdGFydDsKICAgIHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmJyYWNlTCk7CiAgICBpZiAodGhpcy5jdXJJbmRlbnQgKyAxIDwgaW5kZW50KSB7IGluZGVudCA9IHRoaXMuY3VySW5kZW50OyBsaW5lID0gdGhpcy5jdXJMaW5lU3RhcnQ7IH0KICAgIHdoaWxlICghdGhpcy5jbG9zZXMoYWNvcm4udG9rVHlwZXMuYnJhY2VSLCBpbmRlbnQsIGxpbmUpKSB7CiAgICAgIHZhciBwcm9wID0gdGhpcy5zdGFydE5vZGUoKSwgaXNHZW5lcmF0b3IgPSAodm9pZCAwKSwgaXNBc3luYyA9ICh2b2lkIDApLCBzdGFydCA9ICh2b2lkIDApOwogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDkgJiYgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuZWxsaXBzaXMpKSB7CiAgICAgICAgcHJvcC5hcmd1bWVudCA9IHRoaXMucGFyc2VNYXliZUFzc2lnbigpOwogICAgICAgIG5vZGUucHJvcGVydGllcy5wdXNoKHRoaXMuZmluaXNoTm9kZShwcm9wLCAiU3ByZWFkRWxlbWVudCIpKTsKICAgICAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5jb21tYSk7CiAgICAgICAgY29udGludWUKICAgICAgfQogICAgICBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYpIHsKICAgICAgICBzdGFydCA9IHRoaXMuc3RvcmVDdXJyZW50UG9zKCk7CiAgICAgICAgcHJvcC5tZXRob2QgPSBmYWxzZTsKICAgICAgICBwcm9wLnNob3J0aGFuZCA9IGZhbHNlOwogICAgICAgIGlzR2VuZXJhdG9yID0gdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuc3Rhcik7CiAgICAgIH0KICAgICAgdGhpcy5wYXJzZVByb3BlcnR5TmFtZShwcm9wKTsKICAgICAgaWYgKHRoaXMudG9rcy5pc0FzeW5jUHJvcChwcm9wKSkgewogICAgICAgIGlzQXN5bmMgPSB0cnVlOwogICAgICAgIGlzR2VuZXJhdG9yID0gdGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDkgJiYgdGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuc3Rhcik7CiAgICAgICAgdGhpcy5wYXJzZVByb3BlcnR5TmFtZShwcm9wKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpc0FzeW5jID0gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKGlzRHVtbXkocHJvcC5rZXkpKSB7IGlmIChpc0R1bW15KHRoaXMucGFyc2VNYXliZUFzc2lnbigpKSkgeyB0aGlzLm5leHQoKTsgfSB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5jb21tYSk7IGNvbnRpbnVlIH0KICAgICAgaWYgKHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmNvbG9uKSkgewogICAgICAgIHByb3Aua2luZCA9ICJpbml0IjsKICAgICAgICBwcm9wLnZhbHVlID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDYgJiYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLnBhcmVuTCB8fCB0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5icmFjZUwpKSB7CiAgICAgICAgcHJvcC5raW5kID0gImluaXQiOwogICAgICAgIHByb3AubWV0aG9kID0gdHJ1ZTsKICAgICAgICBwcm9wLnZhbHVlID0gdGhpcy5wYXJzZU1ldGhvZChpc0dlbmVyYXRvciwgaXNBc3luYyk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uID49IDUgJiYgcHJvcC5rZXkudHlwZSA9PT0gIklkZW50aWZpZXIiICYmCiAgICAgICAgICAgICAgICAgIXByb3AuY29tcHV0ZWQgJiYgKHByb3Aua2V5Lm5hbWUgPT09ICJnZXQiIHx8IHByb3Aua2V5Lm5hbWUgPT09ICJzZXQiKSAmJgogICAgICAgICAgICAgICAgICh0aGlzLnRvay50eXBlICE9PSBhY29ybi50b2tUeXBlcy5jb21tYSAmJiB0aGlzLnRvay50eXBlICE9PSBhY29ybi50b2tUeXBlcy5icmFjZVIgJiYgdGhpcy50b2sudHlwZSAhPT0gYWNvcm4udG9rVHlwZXMuZXEpKSB7CiAgICAgICAgcHJvcC5raW5kID0gcHJvcC5rZXkubmFtZTsKICAgICAgICB0aGlzLnBhcnNlUHJvcGVydHlOYW1lKHByb3ApOwogICAgICAgIHByb3AudmFsdWUgPSB0aGlzLnBhcnNlTWV0aG9kKGZhbHNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwcm9wLmtpbmQgPSAiaW5pdCI7CiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2KSB7CiAgICAgICAgICBpZiAodGhpcy5lYXQoYWNvcm4udG9rVHlwZXMuZXEpKSB7CiAgICAgICAgICAgIHZhciBhc3NpZ24gPSB0aGlzLnN0YXJ0Tm9kZUF0KHN0YXJ0KTsKICAgICAgICAgICAgYXNzaWduLm9wZXJhdG9yID0gIj0iOwogICAgICAgICAgICBhc3NpZ24ubGVmdCA9IHByb3Aua2V5OwogICAgICAgICAgICBhc3NpZ24ucmlnaHQgPSB0aGlzLnBhcnNlTWF5YmVBc3NpZ24oKTsKICAgICAgICAgICAgcHJvcC52YWx1ZSA9IHRoaXMuZmluaXNoTm9kZShhc3NpZ24sICJBc3NpZ25tZW50RXhwcmVzc2lvbiIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcHJvcC52YWx1ZSA9IHByb3Aua2V5OwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwcm9wLnZhbHVlID0gdGhpcy5kdW1teUlkZW50KCk7CiAgICAgICAgfQogICAgICAgIHByb3Auc2hvcnRoYW5kID0gdHJ1ZTsKICAgICAgfQogICAgICBub2RlLnByb3BlcnRpZXMucHVzaCh0aGlzLmZpbmlzaE5vZGUocHJvcCwgIlByb3BlcnR5IikpOwogICAgICB0aGlzLmVhdChhY29ybi50b2tUeXBlcy5jb21tYSk7CiAgICB9CiAgICB0aGlzLnBvcEN4KCk7CiAgICBpZiAoIXRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmJyYWNlUikpIHsKICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gY2xvc2luZyBicmFjZSwgbWFrZSB0aGUgbm9kZSBzcGFuIHRvIHRoZSBzdGFydAogICAgICAvLyBvZiB0aGUgbmV4dCB0b2tlbiAodGhpcyBpcyB1c2VmdWwgZm9yIFRlcm4pCiAgICAgIHRoaXMubGFzdC5lbmQgPSB0aGlzLnRvay5zdGFydDsKICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2NhdGlvbnMpIHsgdGhpcy5sYXN0LmxvYy5lbmQgPSB0aGlzLnRvay5sb2Muc3RhcnQ7IH0KICAgIH0KICAgIHJldHVybiB0aGlzLmZpbmlzaE5vZGUobm9kZSwgIk9iamVjdEV4cHJlc3Npb24iKQogIH07CgogIGxwLnBhcnNlUHJvcGVydHlOYW1lID0gZnVuY3Rpb24ocHJvcCkgewogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2KSB7CiAgICAgIGlmICh0aGlzLmVhdChhY29ybi50b2tUeXBlcy5icmFja2V0TCkpIHsKICAgICAgICBwcm9wLmNvbXB1dGVkID0gdHJ1ZTsKICAgICAgICBwcm9wLmtleSA9IHRoaXMucGFyc2VFeHByZXNzaW9uKCk7CiAgICAgICAgdGhpcy5leHBlY3QoYWNvcm4udG9rVHlwZXMuYnJhY2tldFIpOwogICAgICAgIHJldHVybgogICAgICB9IGVsc2UgewogICAgICAgIHByb3AuY29tcHV0ZWQgPSBmYWxzZTsKICAgICAgfQogICAgfQogICAgdmFyIGtleSA9ICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5udW0gfHwgdGhpcy50b2sudHlwZSA9PT0gYWNvcm4udG9rVHlwZXMuc3RyaW5nKSA/IHRoaXMucGFyc2VFeHByQXRvbSgpIDogdGhpcy5wYXJzZUlkZW50KCk7CiAgICBwcm9wLmtleSA9IGtleSB8fCB0aGlzLmR1bW15SWRlbnQoKTsKICB9OwoKICBscC5wYXJzZVByb3BlcnR5QWNjZXNzb3IgPSBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLnRvay50eXBlID09PSBhY29ybi50b2tUeXBlcy5uYW1lIHx8IHRoaXMudG9rLnR5cGUua2V5d29yZCkgeyByZXR1cm4gdGhpcy5wYXJzZUlkZW50KCkgfQogICAgaWYgKHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLnByaXZhdGVJZCkgeyByZXR1cm4gdGhpcy5wYXJzZVByaXZhdGVJZGVudCgpIH0KICB9OwoKICBscC5wYXJzZUlkZW50ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgbmFtZSA9IHRoaXMudG9rLnR5cGUgPT09IGFjb3JuLnRva1R5cGVzLm5hbWUgPyB0aGlzLnRvay52YWx1ZSA6IHRoaXMudG9rLnR5cGUua2V5d29yZDsKICAgIGlmICghbmFtZSkgeyByZXR1cm4gdGhpcy5kdW1teUlkZW50KCkgfQogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpOwogICAgdGhpcy5uZXh0KCk7CiAgICBub2RlLm5hbWUgPSBuYW1lOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiSWRlbnRpZmllciIpCiAgfTsKCiAgbHAucGFyc2VQcml2YXRlSWRlbnQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIG5vZGUubmFtZSA9IHRoaXMudG9rLnZhbHVlOwogICAgdGhpcy5uZXh0KCk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJQcml2YXRlSWRlbnRpZmllciIpCiAgfTsKCiAgbHAuaW5pdEZ1bmN0aW9uID0gZnVuY3Rpb24obm9kZSkgewogICAgbm9kZS5pZCA9IG51bGw7CiAgICBub2RlLnBhcmFtcyA9IFtdOwogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA2KSB7CiAgICAgIG5vZGUuZ2VuZXJhdG9yID0gZmFsc2U7CiAgICAgIG5vZGUuZXhwcmVzc2lvbiA9IGZhbHNlOwogICAgfQogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA4KQogICAgICB7IG5vZGUuYXN5bmMgPSBmYWxzZTsgfQogIH07CgogIC8vIENvbnZlcnQgZXhpc3RpbmcgZXhwcmVzc2lvbiBhdG9tIHRvIGFzc2lnbmFibGUgcGF0dGVybgogIC8vIGlmIHBvc3NpYmxlLgoKICBscC50b0Fzc2lnbmFibGUgPSBmdW5jdGlvbihub2RlLCBiaW5kaW5nKSB7CiAgICBpZiAoIW5vZGUgfHwgbm9kZS50eXBlID09PSAiSWRlbnRpZmllciIgfHwgKG5vZGUudHlwZSA9PT0gIk1lbWJlckV4cHJlc3Npb24iICYmICFiaW5kaW5nKSkgOyBlbHNlIGlmIChub2RlLnR5cGUgPT09ICJQYXJlbnRoZXNpemVkRXhwcmVzc2lvbiIpIHsKICAgICAgdGhpcy50b0Fzc2lnbmFibGUobm9kZS5leHByZXNzaW9uLCBiaW5kaW5nKTsKICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmVjbWFWZXJzaW9uIDwgNikgewogICAgICByZXR1cm4gdGhpcy5kdW1teUlkZW50KCkKICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSAiT2JqZWN0RXhwcmVzc2lvbiIpIHsKICAgICAgbm9kZS50eXBlID0gIk9iamVjdFBhdHRlcm4iOwogICAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IG5vZGUucHJvcGVydGllczsgaSA8IGxpc3QubGVuZ3RoOyBpICs9IDEpCiAgICAgICAgewogICAgICAgIHZhciBwcm9wID0gbGlzdFtpXTsKCiAgICAgICAgdGhpcy50b0Fzc2lnbmFibGUocHJvcCwgYmluZGluZyk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSAiQXJyYXlFeHByZXNzaW9uIikgewogICAgICBub2RlLnR5cGUgPSAiQXJyYXlQYXR0ZXJuIjsKICAgICAgdGhpcy50b0Fzc2lnbmFibGVMaXN0KG5vZGUuZWxlbWVudHMsIGJpbmRpbmcpOwogICAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT09ICJQcm9wZXJ0eSIpIHsKICAgICAgdGhpcy50b0Fzc2lnbmFibGUobm9kZS52YWx1ZSwgYmluZGluZyk7CiAgICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gIlNwcmVhZEVsZW1lbnQiKSB7CiAgICAgIG5vZGUudHlwZSA9ICJSZXN0RWxlbWVudCI7CiAgICAgIHRoaXMudG9Bc3NpZ25hYmxlKG5vZGUuYXJndW1lbnQsIGJpbmRpbmcpOwogICAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT09ICJBc3NpZ25tZW50RXhwcmVzc2lvbiIpIHsKICAgICAgbm9kZS50eXBlID0gIkFzc2lnbm1lbnRQYXR0ZXJuIjsKICAgICAgZGVsZXRlIG5vZGUub3BlcmF0b3I7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gdGhpcy5kdW1teUlkZW50KCkKICAgIH0KICAgIHJldHVybiBub2RlCiAgfTsKCiAgbHAudG9Bc3NpZ25hYmxlTGlzdCA9IGZ1bmN0aW9uKGV4cHJMaXN0LCBiaW5kaW5nKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbGlzdCA9IGV4cHJMaXN0OyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkKICAgICAgewogICAgICB2YXIgZXhwciA9IGxpc3RbaV07CgogICAgICB0aGlzLnRvQXNzaWduYWJsZShleHByLCBiaW5kaW5nKTsKICAgIH0KICAgIHJldHVybiBleHByTGlzdAogIH07CgogIGxwLnBhcnNlRnVuY3Rpb25QYXJhbXMgPSBmdW5jdGlvbihwYXJhbXMpIHsKICAgIHBhcmFtcyA9IHRoaXMucGFyc2VFeHByTGlzdChhY29ybi50b2tUeXBlcy5wYXJlblIpOwogICAgcmV0dXJuIHRoaXMudG9Bc3NpZ25hYmxlTGlzdChwYXJhbXMsIHRydWUpCiAgfTsKCiAgbHAucGFyc2VNZXRob2QgPSBmdW5jdGlvbihpc0dlbmVyYXRvciwgaXNBc3luYykgewogICAgdmFyIG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZSgpLCBvbGRJbkFzeW5jID0gdGhpcy5pbkFzeW5jLCBvbGRJbkdlbmVyYXRvciA9IHRoaXMuaW5HZW5lcmF0b3IsIG9sZEluRnVuY3Rpb24gPSB0aGlzLmluRnVuY3Rpb247CiAgICB0aGlzLmluaXRGdW5jdGlvbihub2RlKTsKICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gNikKICAgICAgeyBub2RlLmdlbmVyYXRvciA9ICEhaXNHZW5lcmF0b3I7IH0KICAgIGlmICh0aGlzLm9wdGlvbnMuZWNtYVZlcnNpb24gPj0gOCkKICAgICAgeyBub2RlLmFzeW5jID0gISFpc0FzeW5jOyB9CiAgICB0aGlzLmluQXN5bmMgPSBub2RlLmFzeW5jOwogICAgdGhpcy5pbkdlbmVyYXRvciA9IG5vZGUuZ2VuZXJhdG9yOwogICAgdGhpcy5pbkZ1bmN0aW9uID0gdHJ1ZTsKICAgIG5vZGUucGFyYW1zID0gdGhpcy5wYXJzZUZ1bmN0aW9uUGFyYW1zKCk7CiAgICBub2RlLmJvZHkgPSB0aGlzLnBhcnNlQmxvY2soKTsKICAgIHRoaXMudG9rcy5hZGFwdERpcmVjdGl2ZVByb2xvZ3VlKG5vZGUuYm9keS5ib2R5KTsKICAgIHRoaXMuaW5Bc3luYyA9IG9sZEluQXN5bmM7CiAgICB0aGlzLmluR2VuZXJhdG9yID0gb2xkSW5HZW5lcmF0b3I7CiAgICB0aGlzLmluRnVuY3Rpb24gPSBvbGRJbkZ1bmN0aW9uOwogICAgcmV0dXJuIHRoaXMuZmluaXNoTm9kZShub2RlLCAiRnVuY3Rpb25FeHByZXNzaW9uIikKICB9OwoKICBscC5wYXJzZUFycm93RXhwcmVzc2lvbiA9IGZ1bmN0aW9uKG5vZGUsIHBhcmFtcywgaXNBc3luYykgewogICAgdmFyIG9sZEluQXN5bmMgPSB0aGlzLmluQXN5bmMsIG9sZEluR2VuZXJhdG9yID0gdGhpcy5pbkdlbmVyYXRvciwgb2xkSW5GdW5jdGlvbiA9IHRoaXMuaW5GdW5jdGlvbjsKICAgIHRoaXMuaW5pdEZ1bmN0aW9uKG5vZGUpOwogICAgaWYgKHRoaXMub3B0aW9ucy5lY21hVmVyc2lvbiA+PSA4KQogICAgICB7IG5vZGUuYXN5bmMgPSAhIWlzQXN5bmM7IH0KICAgIHRoaXMuaW5Bc3luYyA9IG5vZGUuYXN5bmM7CiAgICB0aGlzLmluR2VuZXJhdG9yID0gZmFsc2U7CiAgICB0aGlzLmluRnVuY3Rpb24gPSB0cnVlOwogICAgbm9kZS5wYXJhbXMgPSB0aGlzLnRvQXNzaWduYWJsZUxpc3QocGFyYW1zLCB0cnVlKTsKICAgIG5vZGUuZXhwcmVzc2lvbiA9IHRoaXMudG9rLnR5cGUgIT09IGFjb3JuLnRva1R5cGVzLmJyYWNlTDsKICAgIGlmIChub2RlLmV4cHJlc3Npb24pIHsKICAgICAgbm9kZS5ib2R5ID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKCk7CiAgICB9IGVsc2UgewogICAgICBub2RlLmJvZHkgPSB0aGlzLnBhcnNlQmxvY2soKTsKICAgICAgdGhpcy50b2tzLmFkYXB0RGlyZWN0aXZlUHJvbG9ndWUobm9kZS5ib2R5LmJvZHkpOwogICAgfQogICAgdGhpcy5pbkFzeW5jID0gb2xkSW5Bc3luYzsKICAgIHRoaXMuaW5HZW5lcmF0b3IgPSBvbGRJbkdlbmVyYXRvcjsKICAgIHRoaXMuaW5GdW5jdGlvbiA9IG9sZEluRnVuY3Rpb247CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbiIpCiAgfTsKCiAgbHAucGFyc2VFeHByTGlzdCA9IGZ1bmN0aW9uKGNsb3NlLCBhbGxvd0VtcHR5KSB7CiAgICB0aGlzLnB1c2hDeCgpOwogICAgdmFyIGluZGVudCA9IHRoaXMuY3VySW5kZW50LCBsaW5lID0gdGhpcy5jdXJMaW5lU3RhcnQsIGVsdHMgPSBbXTsKICAgIHRoaXMubmV4dCgpOyAvLyBPcGVuaW5nIGJyYWNrZXQKICAgIHdoaWxlICghdGhpcy5jbG9zZXMoY2xvc2UsIGluZGVudCArIDEsIGxpbmUpKSB7CiAgICAgIGlmICh0aGlzLmVhdChhY29ybi50b2tUeXBlcy5jb21tYSkpIHsKICAgICAgICBlbHRzLnB1c2goYWxsb3dFbXB0eSA/IG51bGwgOiB0aGlzLmR1bW15SWRlbnQoKSk7CiAgICAgICAgY29udGludWUKICAgICAgfQogICAgICB2YXIgZWx0ID0gdGhpcy5wYXJzZU1heWJlQXNzaWduKCk7CiAgICAgIGlmIChpc0R1bW15KGVsdCkpIHsKICAgICAgICBpZiAodGhpcy5jbG9zZXMoY2xvc2UsIGluZGVudCwgbGluZSkpIHsgYnJlYWsgfQogICAgICAgIHRoaXMubmV4dCgpOwogICAgICB9IGVsc2UgewogICAgICAgIGVsdHMucHVzaChlbHQpOwogICAgICB9CiAgICAgIHRoaXMuZWF0KGFjb3JuLnRva1R5cGVzLmNvbW1hKTsKICAgIH0KICAgIHRoaXMucG9wQ3goKTsKICAgIGlmICghdGhpcy5lYXQoY2xvc2UpKSB7CiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGNsb3NpbmcgYnJhY2UsIG1ha2UgdGhlIG5vZGUgc3BhbiB0byB0aGUgc3RhcnQKICAgICAgLy8gb2YgdGhlIG5leHQgdG9rZW4gKHRoaXMgaXMgdXNlZnVsIGZvciBUZXJuKQogICAgICB0aGlzLmxhc3QuZW5kID0gdGhpcy50b2suc3RhcnQ7CiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9jYXRpb25zKSB7IHRoaXMubGFzdC5sb2MuZW5kID0gdGhpcy50b2subG9jLnN0YXJ0OyB9CiAgICB9CiAgICByZXR1cm4gZWx0cwogIH07CgogIGxwLnBhcnNlQXdhaXQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBub2RlID0gdGhpcy5zdGFydE5vZGUoKTsKICAgIHRoaXMubmV4dCgpOwogICAgbm9kZS5hcmd1bWVudCA9IHRoaXMucGFyc2VNYXliZVVuYXJ5KCk7CiAgICByZXR1cm4gdGhpcy5maW5pc2hOb2RlKG5vZGUsICJBd2FpdEV4cHJlc3Npb24iKQogIH07CgogIC8vIEFjb3JuOiBMb29zZSBwYXJzZXIKCiAgYWNvcm4uZGVmYXVsdE9wdGlvbnMudGFiU2l6ZSA9IDQ7CgogIGZ1bmN0aW9uIHBhcnNlKGlucHV0LCBvcHRpb25zKSB7CiAgICByZXR1cm4gTG9vc2VQYXJzZXIucGFyc2UoaW5wdXQsIG9wdGlvbnMpCiAgfQoKICBleHBvcnRzLkxvb3NlUGFyc2VyID0gTG9vc2VQYXJzZXI7CiAgZXhwb3J0cy5pc0R1bW15ID0gaXNEdW1teTsKICBleHBvcnRzLnBhcnNlID0gcGFyc2U7CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7Cgp9KSk7CgoKLy8gU09VUkNFOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xODI3OTE0MS9qYXZhc2NyaXB0LXN0cmluZy1lbmNyeXB0aW9uLWFuZC1kZWNyeXB0aW9uCgpjb25zdCBjcnlwdCA9IChzYWx0LCB0ZXh0KSA9PiB7CiAgY29uc3QgdGV4dFRvQ2hhcnMgPSAodGV4dCkgPT4gdGV4dC5zcGxpdCgiIikubWFwKChjKSA9PiBjLmNoYXJDb2RlQXQoMCkpOwogIGNvbnN0IGJ5dGVIZXggPSAobikgPT4gKCIwIiArIE51bWJlcihuKS50b1N0cmluZygxNikpLnN1YnN0cigtMik7CiAgY29uc3QgYXBwbHlTYWx0VG9DaGFyID0gKGNvZGUpID0+IHRleHRUb0NoYXJzKHNhbHQpLnJlZHVjZSgoYSwgYikgPT4gYSBeIGIsIGNvZGUpOwoKICByZXR1cm4gdGV4dAogICAgLnNwbGl0KCIiKQogICAgLm1hcCh0ZXh0VG9DaGFycykKICAgIC5tYXAoYXBwbHlTYWx0VG9DaGFyKQogICAgLm1hcChieXRlSGV4KQogICAgLmpvaW4oIiIpOwp9OwoKY29uc3QgZGVjcnlwdCA9IChzYWx0LCBlbmNvZGVkKSA9PiB7CiAgY29uc3QgdGV4dFRvQ2hhcnMgPSAodGV4dCkgPT4gdGV4dC5zcGxpdCgiIikubWFwKChjKSA9PiBjLmNoYXJDb2RlQXQoMCkpOwogIGNvbnN0IGFwcGx5U2FsdFRvQ2hhciA9IChjb2RlKSA9PiB0ZXh0VG9DaGFycyhzYWx0KS5yZWR1Y2UoKGEsIGIpID0+IGEgXiBiLCBjb2RlKTsKICByZXR1cm4gZW5jb2RlZAogICAgLm1hdGNoKC8uezEsMn0vZykKICAgIC5tYXAoKGhleCkgPT4gcGFyc2VJbnQoaGV4LCAxNikpCiAgICAubWFwKGFwcGx5U2FsdFRvQ2hhcikKICAgIC5tYXAoKGNoYXJDb2RlKSA9PiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKSkKICAgIC5qb2luKCIiKTsKfTsKCgovKiEgRm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24gcGxlYXNlIHNlZSBqc2VuY3J5cHQubWluLmpzLkxJQ0VOU0UudHh0ICovCiFmdW5jdGlvbih0LGUpeyJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOiJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLGUpOiJvYmplY3QiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLkpTRW5jcnlwdD1lKCk6dC5KU0VuY3J5cHQ9ZSgpfSh3aW5kb3csKGZ1bmN0aW9uKCl7cmV0dXJuKCgpPT57InVzZSBzdHJpY3QiO3ZhciB0PVssKHQsZSxpKT0+e2Z1bmN0aW9uIHIodCl7cmV0dXJuIjAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiIuY2hhckF0KHQpfWZ1bmN0aW9uIG4odCxlKXtyZXR1cm4gdCZlfWZ1bmN0aW9uIHModCxlKXtyZXR1cm4gdHxlfWZ1bmN0aW9uIG8odCxlKXtyZXR1cm4gdF5lfWZ1bmN0aW9uIGgodCxlKXtyZXR1cm4gdCZ+ZX1mdW5jdGlvbiBhKHQpe2lmKDA9PXQpcmV0dXJuLTE7dmFyIGU9MDtyZXR1cm4gMD09KDY1NTM1JnQpJiYodD4+PTE2LGUrPTE2KSwwPT0oMjU1JnQpJiYodD4+PTgsZSs9OCksMD09KDE1JnQpJiYodD4+PTQsZSs9NCksMD09KDMmdCkmJih0Pj49MixlKz0yKSwwPT0oMSZ0KSYmKytlLGV9ZnVuY3Rpb24gdSh0KXtmb3IodmFyIGU9MDswIT10Oyl0Jj10LTEsKytlO3JldHVybiBlfWkuZChlLHtkZWZhdWx0OigpPT5udH0pO3ZhciBjLGY9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iO2Z1bmN0aW9uIGwodCl7dmFyIGUsaSxyPSIiO2ZvcihlPTA7ZSszPD10Lmxlbmd0aDtlKz0zKWk9cGFyc2VJbnQodC5zdWJzdHJpbmcoZSxlKzMpLDE2KSxyKz1mLmNoYXJBdChpPj42KStmLmNoYXJBdCg2MyZpKTtmb3IoZSsxPT10Lmxlbmd0aD8oaT1wYXJzZUludCh0LnN1YnN0cmluZyhlLGUrMSksMTYpLHIrPWYuY2hhckF0KGk8PDIpKTplKzI9PXQubGVuZ3RoJiYoaT1wYXJzZUludCh0LnN1YnN0cmluZyhlLGUrMiksMTYpLHIrPWYuY2hhckF0KGk+PjIpK2YuY2hhckF0KCgzJmkpPDw0KSk7KDMmci5sZW5ndGgpPjA7KXIrPSI9IjtyZXR1cm4gcn1mdW5jdGlvbiBwKHQpe3ZhciBlLGk9IiIsbj0wLHM9MDtmb3IoZT0wO2U8dC5sZW5ndGgmJiI9IiE9dC5jaGFyQXQoZSk7KytlKXt2YXIgbz1mLmluZGV4T2YodC5jaGFyQXQoZSkpO288MHx8KDA9PW4/KGkrPXIobz4+Mikscz0zJm8sbj0xKToxPT1uPyhpKz1yKHM8PDJ8bz4+NCkscz0xNSZvLG49Mik6Mj09bj8oaSs9cihzKSxpKz1yKG8+PjIpLHM9MyZvLG49Myk6KGkrPXIoczw8MnxvPj40KSxpKz1yKDE1Jm8pLG49MCkpfXJldHVybiAxPT1uJiYoaSs9cihzPDwyKSksaX12YXIgZyxkPXtkZWNvZGU6ZnVuY3Rpb24odCl7dmFyIGU7aWYodm9pZCAwPT09Zyl7dmFyIGk9Ij0gXGZcblxyXHQgXHUyMDI4XHUyMDI5Ijtmb3IoZz1PYmplY3QuY3JlYXRlKG51bGwpLGU9MDtlPDY0OysrZSlnWyJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIi5jaGFyQXQoZSldPWU7Zm9yKGdbIi0iXT02MixnLl89NjMsZT0wO2U8aS5sZW5ndGg7KytlKWdbaS5jaGFyQXQoZSldPS0xfXZhciByPVtdLG49MCxzPTA7Zm9yKGU9MDtlPHQubGVuZ3RoOysrZSl7dmFyIG89dC5jaGFyQXQoZSk7aWYoIj0iPT1vKWJyZWFrO2lmKC0xIT0obz1nW29dKSl7aWYodm9pZCAwPT09byl0aHJvdyBuZXcgRXJyb3IoIklsbGVnYWwgY2hhcmFjdGVyIGF0IG9mZnNldCAiK2UpO258PW8sKytzPj00PyhyW3IubGVuZ3RoXT1uPj4xNixyW3IubGVuZ3RoXT1uPj44JjI1NSxyW3IubGVuZ3RoXT0yNTUmbixuPTAscz0wKTpuPDw9Nn19c3dpdGNoKHMpe2Nhc2UgMTp0aHJvdyBuZXcgRXJyb3IoIkJhc2U2NCBlbmNvZGluZyBpbmNvbXBsZXRlOiBhdCBsZWFzdCAyIGJpdHMgbWlzc2luZyIpO2Nhc2UgMjpyW3IubGVuZ3RoXT1uPj4xMDticmVhaztjYXNlIDM6cltyLmxlbmd0aF09bj4+MTYscltyLmxlbmd0aF09bj4+OCYyNTV9cmV0dXJuIHJ9LHJlOi8tLS0tLUJFR0lOIFteLV0rLS0tLS0oW0EtWmEtejAtOStcLz1cc10rKS0tLS0tRU5EIFteLV0rLS0tLS18YmVnaW4tYmFzZTY0W15cbl0rXG4oW0EtWmEtejAtOStcLz1cc10rKT09PT0vLHVuYXJtb3I6ZnVuY3Rpb24odCl7dmFyIGU9ZC5yZS5leGVjKHQpO2lmKGUpaWYoZVsxXSl0PWVbMV07ZWxzZXtpZighZVsyXSl0aHJvdyBuZXcgRXJyb3IoIlJlZ0V4cCBvdXQgb2Ygc3luYyIpO3Q9ZVsyXX1yZXR1cm4gZC5kZWNvZGUodCl9fSx2PTFlMTMsbT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5idWY9Wyt0fHwwXX1yZXR1cm4gdC5wcm90b3R5cGUubXVsQWRkPWZ1bmN0aW9uKHQsZSl7dmFyIGkscixuPXRoaXMuYnVmLHM9bi5sZW5ndGg7Zm9yKGk9MDtpPHM7KytpKShyPW5baV0qdCtlKTx2P2U9MDpyLT0oZT0wfHIvdikqdixuW2ldPXI7ZT4wJiYobltpXT1lKX0sdC5wcm90b3R5cGUuc3ViPWZ1bmN0aW9uKHQpe3ZhciBlLGkscj10aGlzLmJ1ZixuPXIubGVuZ3RoO2ZvcihlPTA7ZTxuOysrZSkoaT1yW2VdLXQpPDA/KGkrPXYsdD0xKTp0PTAscltlXT1pO2Zvcig7MD09PXJbci5sZW5ndGgtMV07KXIucG9wKCl9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKHQpe2lmKDEwIT0odHx8MTApKXRocm93IG5ldyBFcnJvcigib25seSBiYXNlIDEwIGlzIHN1cHBvcnRlZCIpO2Zvcih2YXIgZT10aGlzLmJ1ZixpPWVbZS5sZW5ndGgtMV0udG9TdHJpbmcoKSxyPWUubGVuZ3RoLTI7cj49MDstLXIpaSs9KHYrZVtyXSkudG9TdHJpbmcoKS5zdWJzdHJpbmcoMSk7cmV0dXJuIGl9LHQucHJvdG90eXBlLnZhbHVlT2Y9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5idWYsZT0wLGk9dC5sZW5ndGgtMTtpPj0wOy0taSllPWUqdit0W2ldO3JldHVybiBlfSx0LnByb3RvdHlwZS5zaW1wbGlmeT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYnVmO3JldHVybiAxPT10Lmxlbmd0aD90WzBdOnRoaXN9LHR9KCkseT0vXihcZFxkKSgwWzEtOV18MVswLTJdKSgwWzEtOV18WzEyXVxkfDNbMDFdKShbMDFdXGR8MlswLTNdKSg/OihbMC01XVxkKSg/OihbMC01XVxkKSg/OlsuLF0oXGR7MSwzfSkpPyk/KT8oWnxbLStdKD86WzBdXGR8MVswLTJdKShbMC01XVxkKT8pPyQvLGI9L14oXGRcZFxkXGQpKDBbMS05XXwxWzAtMl0pKDBbMS05XXxbMTJdXGR8M1swMV0pKFswMV1cZHwyWzAtM10pKD86KFswLTVdXGQpKD86KFswLTVdXGQpKD86Wy4sXShcZHsxLDN9KSk/KT8pPyhafFstK10oPzpbMF1cZHwxWzAtMl0pKFswLTVdXGQpPyk/JC87ZnVuY3Rpb24gVCh0LGUpe3JldHVybiB0Lmxlbmd0aD5lJiYodD10LnN1YnN0cmluZygwLGUpKyLigKYiKSx0fXZhciBTLEU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsaSl7dGhpcy5oZXhEaWdpdHM9IjAxMjM0NTY3ODlBQkNERUYiLGUgaW5zdGFuY2VvZiB0Pyh0aGlzLmVuYz1lLmVuYyx0aGlzLnBvcz1lLnBvcyk6KHRoaXMuZW5jPWUsdGhpcy5wb3M9aSl9cmV0dXJuIHQucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtpZih2b2lkIDA9PT10JiYodD10aGlzLnBvcysrKSx0Pj10aGlzLmVuYy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJSZXF1ZXN0aW5nIGJ5dGUgb2Zmc2V0ICIrdCsiIG9uIGEgc3RyZWFtIG9mIGxlbmd0aCAiK3RoaXMuZW5jLmxlbmd0aCk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0aGlzLmVuYz90aGlzLmVuYy5jaGFyQ29kZUF0KHQpOnRoaXMuZW5jW3RdfSx0LnByb3RvdHlwZS5oZXhCeXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhleERpZ2l0cy5jaGFyQXQodD4+NCYxNSkrdGhpcy5oZXhEaWdpdHMuY2hhckF0KDE1JnQpfSx0LnByb3RvdHlwZS5oZXhEdW1wPWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIHI9IiIsbj10O248ZTsrK24paWYocis9dGhpcy5oZXhCeXRlKHRoaXMuZ2V0KG4pKSwhMCE9PWkpc3dpdGNoKDE1Jm4pe2Nhc2UgNzpyKz0iICAiO2JyZWFrO2Nhc2UgMTU6cis9IlxuIjticmVhaztkZWZhdWx0OnIrPSIgIn1yZXR1cm4gcn0sdC5wcm90b3R5cGUuaXNBU0NJST1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaT10O2k8ZTsrK2kpe3ZhciByPXRoaXMuZ2V0KGkpO2lmKHI8MzJ8fHI+MTc2KXJldHVybiExfXJldHVybiEwfSx0LnByb3RvdHlwZS5wYXJzZVN0cmluZ0lTTz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaT0iIixyPXQ7cjxlOysrcilpKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXMuZ2V0KHIpKTtyZXR1cm4gaX0sdC5wcm90b3R5cGUucGFyc2VTdHJpbmdVVEY9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9IiIscj10O3I8ZTspe3ZhciBuPXRoaXMuZ2V0KHIrKyk7aSs9bjwxMjg/U3RyaW5nLmZyb21DaGFyQ29kZShuKTpuPjE5MSYmbjwyMjQ/U3RyaW5nLmZyb21DaGFyQ29kZSgoMzEmbik8PDZ8NjMmdGhpcy5nZXQocisrKSk6U3RyaW5nLmZyb21DaGFyQ29kZSgoMTUmbik8PDEyfCg2MyZ0aGlzLmdldChyKyspKTw8Nnw2MyZ0aGlzLmdldChyKyspKX1yZXR1cm4gaX0sdC5wcm90b3R5cGUucGFyc2VTdHJpbmdCTVA9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkscixuPSIiLHM9dDtzPGU7KWk9dGhpcy5nZXQocysrKSxyPXRoaXMuZ2V0KHMrKyksbis9U3RyaW5nLmZyb21DaGFyQ29kZShpPDw4fHIpO3JldHVybiBufSx0LnByb3RvdHlwZS5wYXJzZVRpbWU9ZnVuY3Rpb24odCxlLGkpe3ZhciByPXRoaXMucGFyc2VTdHJpbmdJU08odCxlKSxuPShpP3k6YikuZXhlYyhyKTtyZXR1cm4gbj8oaSYmKG5bMV09K25bMV0sblsxXSs9K25bMV08NzA/MmUzOjE5MDApLHI9blsxXSsiLSIrblsyXSsiLSIrblszXSsiICIrbls0XSxuWzVdJiYocis9IjoiK25bNV0sbls2XSYmKHIrPSI6IituWzZdLG5bN10mJihyKz0iLiIrbls3XSkpKSxuWzhdJiYocis9IiBVVEMiLCJaIiE9bls4XSYmKHIrPW5bOF0sbls5XSYmKHIrPSI6IituWzldKSkpLHIpOiJVbnJlY29nbml6ZWQgdGltZTogIityfSx0LnByb3RvdHlwZS5wYXJzZUludGVnZXI9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkscj10aGlzLmdldCh0KSxuPXI+MTI3LHM9bj8yNTU6MCxvPSIiO3I9PXMmJisrdDxlOylyPXRoaXMuZ2V0KHQpO2lmKDA9PShpPWUtdCkpcmV0dXJuIG4/LTE6MDtpZihpPjQpe2ZvcihvPXIsaTw8PTM7MD09KDEyOCYoK29ecykpOylvPStvPDwxLC0taTtvPSIoIitpKyIgYml0KVxuIn1uJiYoci09MjU2KTtmb3IodmFyIGg9bmV3IG0ociksYT10KzE7YTxlOysrYSloLm11bEFkZCgyNTYsdGhpcy5nZXQoYSkpO3JldHVybiBvK2gudG9TdHJpbmcoKX0sdC5wcm90b3R5cGUucGFyc2VCaXRTdHJpbmc9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgcj10aGlzLmdldCh0KSxuPSIoIisoKGUtdC0xPDwzKS1yKSsiIGJpdClcbiIscz0iIixvPXQrMTtvPGU7KytvKXtmb3IodmFyIGg9dGhpcy5nZXQobyksYT1vPT1lLTE/cjowLHU9Nzt1Pj1hOy0tdSlzKz1oPj51JjE/IjEiOiIwIjtpZihzLmxlbmd0aD5pKXJldHVybiBuK1QocyxpKX1yZXR1cm4gbitzfSx0LnByb3RvdHlwZS5wYXJzZU9jdGV0U3RyaW5nPWZ1bmN0aW9uKHQsZSxpKXtpZih0aGlzLmlzQVNDSUkodCxlKSlyZXR1cm4gVCh0aGlzLnBhcnNlU3RyaW5nSVNPKHQsZSksaSk7dmFyIHI9ZS10LG49IigiK3IrIiBieXRlKVxuIjtyPihpLz0yKSYmKGU9dCtpKTtmb3IodmFyIHM9dDtzPGU7KytzKW4rPXRoaXMuaGV4Qnl0ZSh0aGlzLmdldChzKSk7cmV0dXJuIHI+aSYmKG4rPSLigKYiKSxufSx0LnByb3RvdHlwZS5wYXJzZU9JRD1mdW5jdGlvbih0LGUsaSl7Zm9yKHZhciByPSIiLG49bmV3IG0scz0wLG89dDtvPGU7KytvKXt2YXIgaD10aGlzLmdldChvKTtpZihuLm11bEFkZCgxMjgsMTI3JmgpLHMrPTcsISgxMjgmaCkpe2lmKCIiPT09cilpZigobj1uLnNpbXBsaWZ5KCkpaW5zdGFuY2VvZiBtKW4uc3ViKDgwKSxyPSIyLiIrbi50b1N0cmluZygpO2Vsc2V7dmFyIGE9bjw4MD9uPDQwPzA6MToyO3I9YSsiLiIrKG4tNDAqYSl9ZWxzZSByKz0iLiIrbi50b1N0cmluZygpO2lmKHIubGVuZ3RoPmkpcmV0dXJuIFQocixpKTtuPW5ldyBtLHM9MH19cmV0dXJuIHM+MCYmKHIrPSIuaW5jb21wbGV0ZSIpLHJ9LHR9KCksdz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLGkscixuKXtpZighKHIgaW5zdGFuY2VvZiBEKSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgdGFnIHZhbHVlLiIpO3RoaXMuc3RyZWFtPXQsdGhpcy5oZWFkZXI9ZSx0aGlzLmxlbmd0aD1pLHRoaXMudGFnPXIsdGhpcy5zdWI9bn1yZXR1cm4gdC5wcm90b3R5cGUudHlwZU5hbWU9ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy50YWcudGFnQ2xhc3Mpe2Nhc2UgMDpzd2l0Y2godGhpcy50YWcudGFnTnVtYmVyKXtjYXNlIDA6cmV0dXJuIkVPQyI7Y2FzZSAxOnJldHVybiJCT09MRUFOIjtjYXNlIDI6cmV0dXJuIklOVEVHRVIiO2Nhc2UgMzpyZXR1cm4iQklUX1NUUklORyI7Y2FzZSA0OnJldHVybiJPQ1RFVF9TVFJJTkciO2Nhc2UgNTpyZXR1cm4iTlVMTCI7Y2FzZSA2OnJldHVybiJPQkpFQ1RfSURFTlRJRklFUiI7Y2FzZSA3OnJldHVybiJPYmplY3REZXNjcmlwdG9yIjtjYXNlIDg6cmV0dXJuIkVYVEVSTkFMIjtjYXNlIDk6cmV0dXJuIlJFQUwiO2Nhc2UgMTA6cmV0dXJuIkVOVU1FUkFURUQiO2Nhc2UgMTE6cmV0dXJuIkVNQkVEREVEX1BEViI7Y2FzZSAxMjpyZXR1cm4iVVRGOFN0cmluZyI7Y2FzZSAxNjpyZXR1cm4iU0VRVUVOQ0UiO2Nhc2UgMTc6cmV0dXJuIlNFVCI7Y2FzZSAxODpyZXR1cm4iTnVtZXJpY1N0cmluZyI7Y2FzZSAxOTpyZXR1cm4iUHJpbnRhYmxlU3RyaW5nIjtjYXNlIDIwOnJldHVybiJUZWxldGV4U3RyaW5nIjtjYXNlIDIxOnJldHVybiJWaWRlb3RleFN0cmluZyI7Y2FzZSAyMjpyZXR1cm4iSUE1U3RyaW5nIjtjYXNlIDIzOnJldHVybiJVVENUaW1lIjtjYXNlIDI0OnJldHVybiJHZW5lcmFsaXplZFRpbWUiO2Nhc2UgMjU6cmV0dXJuIkdyYXBoaWNTdHJpbmciO2Nhc2UgMjY6cmV0dXJuIlZpc2libGVTdHJpbmciO2Nhc2UgMjc6cmV0dXJuIkdlbmVyYWxTdHJpbmciO2Nhc2UgMjg6cmV0dXJuIlVuaXZlcnNhbFN0cmluZyI7Y2FzZSAzMDpyZXR1cm4iQk1QU3RyaW5nIn1yZXR1cm4iVW5pdmVyc2FsXyIrdGhpcy50YWcudGFnTnVtYmVyLnRvU3RyaW5nKCk7Y2FzZSAxOnJldHVybiJBcHBsaWNhdGlvbl8iK3RoaXMudGFnLnRhZ051bWJlci50b1N0cmluZygpO2Nhc2UgMjpyZXR1cm4iWyIrdGhpcy50YWcudGFnTnVtYmVyLnRvU3RyaW5nKCkrIl0iO2Nhc2UgMzpyZXR1cm4iUHJpdmF0ZV8iK3RoaXMudGFnLnRhZ051bWJlci50b1N0cmluZygpfX0sdC5wcm90b3R5cGUuY29udGVudD1mdW5jdGlvbih0KXtpZih2b2lkIDA9PT10aGlzLnRhZylyZXR1cm4gbnVsbDt2b2lkIDA9PT10JiYodD0xLzApO3ZhciBlPXRoaXMucG9zQ29udGVudCgpLGk9TWF0aC5hYnModGhpcy5sZW5ndGgpO2lmKCF0aGlzLnRhZy5pc1VuaXZlcnNhbCgpKXJldHVybiBudWxsIT09dGhpcy5zdWI/IigiK3RoaXMuc3ViLmxlbmd0aCsiIGVsZW0pIjp0aGlzLnN0cmVhbS5wYXJzZU9jdGV0U3RyaW5nKGUsZStpLHQpO3N3aXRjaCh0aGlzLnRhZy50YWdOdW1iZXIpe2Nhc2UgMTpyZXR1cm4gMD09PXRoaXMuc3RyZWFtLmdldChlKT8iZmFsc2UiOiJ0cnVlIjtjYXNlIDI6cmV0dXJuIHRoaXMuc3RyZWFtLnBhcnNlSW50ZWdlcihlLGUraSk7Y2FzZSAzOnJldHVybiB0aGlzLnN1Yj8iKCIrdGhpcy5zdWIubGVuZ3RoKyIgZWxlbSkiOnRoaXMuc3RyZWFtLnBhcnNlQml0U3RyaW5nKGUsZStpLHQpO2Nhc2UgNDpyZXR1cm4gdGhpcy5zdWI/IigiK3RoaXMuc3ViLmxlbmd0aCsiIGVsZW0pIjp0aGlzLnN0cmVhbS5wYXJzZU9jdGV0U3RyaW5nKGUsZStpLHQpO2Nhc2UgNjpyZXR1cm4gdGhpcy5zdHJlYW0ucGFyc2VPSUQoZSxlK2ksdCk7Y2FzZSAxNjpjYXNlIDE3OnJldHVybiBudWxsIT09dGhpcy5zdWI/IigiK3RoaXMuc3ViLmxlbmd0aCsiIGVsZW0pIjoiKG5vIGVsZW0pIjtjYXNlIDEyOnJldHVybiBUKHRoaXMuc3RyZWFtLnBhcnNlU3RyaW5nVVRGKGUsZStpKSx0KTtjYXNlIDE4OmNhc2UgMTk6Y2FzZSAyMDpjYXNlIDIxOmNhc2UgMjI6Y2FzZSAyNjpyZXR1cm4gVCh0aGlzLnN0cmVhbS5wYXJzZVN0cmluZ0lTTyhlLGUraSksdCk7Y2FzZSAzMDpyZXR1cm4gVCh0aGlzLnN0cmVhbS5wYXJzZVN0cmluZ0JNUChlLGUraSksdCk7Y2FzZSAyMzpjYXNlIDI0OnJldHVybiB0aGlzLnN0cmVhbS5wYXJzZVRpbWUoZSxlK2ksMjM9PXRoaXMudGFnLnRhZ051bWJlcil9cmV0dXJuIG51bGx9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZU5hbWUoKSsiQCIrdGhpcy5zdHJlYW0ucG9zKyJbaGVhZGVyOiIrdGhpcy5oZWFkZXIrIixsZW5ndGg6Iit0aGlzLmxlbmd0aCsiLHN1YjoiKyhudWxsPT09dGhpcy5zdWI/Im51bGwiOnRoaXMuc3ViLmxlbmd0aCkrIl0ifSx0LnByb3RvdHlwZS50b1ByZXR0eVN0cmluZz1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD0iIik7dmFyIGU9dCt0aGlzLnR5cGVOYW1lKCkrIiBAIit0aGlzLnN0cmVhbS5wb3M7aWYodGhpcy5sZW5ndGg+PTAmJihlKz0iKyIpLGUrPXRoaXMubGVuZ3RoLHRoaXMudGFnLnRhZ0NvbnN0cnVjdGVkP2UrPSIgKGNvbnN0cnVjdGVkKSI6IXRoaXMudGFnLmlzVW5pdmVyc2FsKCl8fDMhPXRoaXMudGFnLnRhZ051bWJlciYmNCE9dGhpcy50YWcudGFnTnVtYmVyfHxudWxsPT09dGhpcy5zdWJ8fChlKz0iIChlbmNhcHN1bGF0ZXMpIiksZSs9IlxuIixudWxsIT09dGhpcy5zdWIpe3QrPSIgICI7Zm9yKHZhciBpPTAscj10aGlzLnN1Yi5sZW5ndGg7aTxyOysraSllKz10aGlzLnN1YltpXS50b1ByZXR0eVN0cmluZyh0KX1yZXR1cm4gZX0sdC5wcm90b3R5cGUucG9zU3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJlYW0ucG9zfSx0LnByb3RvdHlwZS5wb3NDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RyZWFtLnBvcyt0aGlzLmhlYWRlcn0sdC5wcm90b3R5cGUucG9zRW5kPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RyZWFtLnBvcyt0aGlzLmhlYWRlcitNYXRoLmFicyh0aGlzLmxlbmd0aCl9LHQucHJvdG90eXBlLnRvSGV4U3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RyZWFtLmhleER1bXAodGhpcy5wb3NTdGFydCgpLHRoaXMucG9zRW5kKCksITApfSx0LmRlY29kZUxlbmd0aD1mdW5jdGlvbih0KXt2YXIgZT10LmdldCgpLGk9MTI3JmU7aWYoaT09ZSlyZXR1cm4gaTtpZihpPjYpdGhyb3cgbmV3IEVycm9yKCJMZW5ndGggb3ZlciA0OCBiaXRzIG5vdCBzdXBwb3J0ZWQgYXQgcG9zaXRpb24gIisodC5wb3MtMSkpO2lmKDA9PT1pKXJldHVybiBudWxsO2U9MDtmb3IodmFyIHI9MDtyPGk7KytyKWU9MjU2KmUrdC5nZXQoKTtyZXR1cm4gZX0sdC5wcm90b3R5cGUuZ2V0SGV4U3RyaW5nVmFsdWU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRvSGV4U3RyaW5nKCksZT0yKnRoaXMuaGVhZGVyLGk9Mip0aGlzLmxlbmd0aDtyZXR1cm4gdC5zdWJzdHIoZSxpKX0sdC5kZWNvZGU9ZnVuY3Rpb24oZSl7dmFyIGk7aT1lIGluc3RhbmNlb2YgRT9lOm5ldyBFKGUsMCk7dmFyIHI9bmV3IEUoaSksbj1uZXcgRChpKSxzPXQuZGVjb2RlTGVuZ3RoKGkpLG89aS5wb3MsaD1vLXIucG9zLGE9bnVsbCx1PWZ1bmN0aW9uKCl7dmFyIGU9W107aWYobnVsbCE9PXMpe2Zvcih2YXIgcj1vK3M7aS5wb3M8cjspZVtlLmxlbmd0aF09dC5kZWNvZGUoaSk7aWYoaS5wb3MhPXIpdGhyb3cgbmV3IEVycm9yKCJDb250ZW50IHNpemUgaXMgbm90IGNvcnJlY3QgZm9yIGNvbnRhaW5lciBzdGFydGluZyBhdCBvZmZzZXQgIitvKX1lbHNlIHRyeXtmb3IoOzspe3ZhciBuPXQuZGVjb2RlKGkpO2lmKG4udGFnLmlzRU9DKCkpYnJlYWs7ZVtlLmxlbmd0aF09bn1zPW8taS5wb3N9Y2F0Y2godCl7dGhyb3cgbmV3IEVycm9yKCJFeGNlcHRpb24gd2hpbGUgZGVjb2RpbmcgdW5kZWZpbmVkIGxlbmd0aCBjb250ZW50OiAiK3QpfXJldHVybiBlfTtpZihuLnRhZ0NvbnN0cnVjdGVkKWE9dSgpO2Vsc2UgaWYobi5pc1VuaXZlcnNhbCgpJiYoMz09bi50YWdOdW1iZXJ8fDQ9PW4udGFnTnVtYmVyKSl0cnl7aWYoMz09bi50YWdOdW1iZXImJjAhPWkuZ2V0KCkpdGhyb3cgbmV3IEVycm9yKCJCSVQgU1RSSU5HcyB3aXRoIHVudXNlZCBiaXRzIGNhbm5vdCBlbmNhcHN1bGF0ZS4iKTthPXUoKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoOysrYylpZihhW2NdLnRhZy5pc0VPQygpKXRocm93IG5ldyBFcnJvcigiRU9DIGlzIG5vdCBzdXBwb3NlZCB0byBiZSBhY3R1YWwgY29udGVudC4iKX1jYXRjaCh0KXthPW51bGx9aWYobnVsbD09PWEpe2lmKG51bGw9PT1zKXRocm93IG5ldyBFcnJvcigiV2UgY2FuJ3Qgc2tpcCBvdmVyIGFuIGludmFsaWQgdGFnIHdpdGggdW5kZWZpbmVkIGxlbmd0aCBhdCBvZmZzZXQgIitvKTtpLnBvcz1vK01hdGguYWJzKHMpfXJldHVybiBuZXcgdChyLGgscyxuLGEpfSx0fSgpLEQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZhciBlPXQuZ2V0KCk7aWYodGhpcy50YWdDbGFzcz1lPj42LHRoaXMudGFnQ29uc3RydWN0ZWQ9MCE9KDMyJmUpLHRoaXMudGFnTnVtYmVyPTMxJmUsMzE9PXRoaXMudGFnTnVtYmVyKXt2YXIgaT1uZXcgbTtkb3tlPXQuZ2V0KCksaS5tdWxBZGQoMTI4LDEyNyZlKX13aGlsZSgxMjgmZSk7dGhpcy50YWdOdW1iZXI9aS5zaW1wbGlmeSgpfX1yZXR1cm4gdC5wcm90b3R5cGUuaXNVbml2ZXJzYWw9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMudGFnQ2xhc3N9LHQucHJvdG90eXBlLmlzRU9DPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLnRhZ0NsYXNzJiYwPT09dGhpcy50YWdOdW1iZXJ9LHR9KCkseD1bMiwzLDUsNywxMSwxMywxNywxOSwyMywyOSwzMSwzNyw0MSw0Myw0Nyw1Myw1OSw2MSw2Nyw3MSw3Myw3OSw4Myw4OSw5NywxMDEsMTAzLDEwNywxMDksMTEzLDEyNywxMzEsMTM3LDEzOSwxNDksMTUxLDE1NywxNjMsMTY3LDE3MywxNzksMTgxLDE5MSwxOTMsMTk3LDE5OSwyMTEsMjIzLDIyNywyMjksMjMzLDIzOSwyNDEsMjUxLDI1NywyNjMsMjY5LDI3MSwyNzcsMjgxLDI4MywyOTMsMzA3LDMxMSwzMTMsMzE3LDMzMSwzMzcsMzQ3LDM0OSwzNTMsMzU5LDM2NywzNzMsMzc5LDM4MywzODksMzk3LDQwMSw0MDksNDE5LDQyMSw0MzEsNDMzLDQzOSw0NDMsNDQ5LDQ1Nyw0NjEsNDYzLDQ2Nyw0NzksNDg3LDQ5MSw0OTksNTAzLDUwOSw1MjEsNTIzLDU0MSw1NDcsNTU3LDU2Myw1NjksNTcxLDU3Nyw1ODcsNTkzLDU5OSw2MDEsNjA3LDYxMyw2MTcsNjE5LDYzMSw2NDEsNjQzLDY0Nyw2NTMsNjU5LDY2MSw2NzMsNjc3LDY4Myw2OTEsNzAxLDcwOSw3MTksNzI3LDczMyw3MzksNzQzLDc1MSw3NTcsNzYxLDc2OSw3NzMsNzg3LDc5Nyw4MDksODExLDgyMSw4MjMsODI3LDgyOSw4MzksODUzLDg1Nyw4NTksODYzLDg3Nyw4ODEsODgzLDg4Nyw5MDcsOTExLDkxOSw5MjksOTM3LDk0MSw5NDcsOTUzLDk2Nyw5NzEsOTc3LDk4Myw5OTEsOTk3XSxSPSgxPDwyNikveFt4Lmxlbmd0aC0xXSxCPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsaSl7bnVsbCE9dCYmKCJudW1iZXIiPT10eXBlb2YgdD90aGlzLmZyb21OdW1iZXIodCxlLGkpOm51bGw9PWUmJiJzdHJpbmciIT10eXBlb2YgdD90aGlzLmZyb21TdHJpbmcodCwyNTYpOnRoaXMuZnJvbVN0cmluZyh0LGUpKX1yZXR1cm4gdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24odCl7aWYodGhpcy5zPDApcmV0dXJuIi0iK3RoaXMubmVnYXRlKCkudG9TdHJpbmcodCk7dmFyIGU7aWYoMTY9PXQpZT00O2Vsc2UgaWYoOD09dCllPTM7ZWxzZSBpZigyPT10KWU9MTtlbHNlIGlmKDMyPT10KWU9NTtlbHNle2lmKDQhPXQpcmV0dXJuIHRoaXMudG9SYWRpeCh0KTtlPTJ9dmFyIGksbj0oMTw8ZSktMSxzPSExLG89IiIsaD10aGlzLnQsYT10aGlzLkRCLWgqdGhpcy5EQiVlO2lmKGgtLSA+MClmb3IoYTx0aGlzLkRCJiYoaT10aGlzW2hdPj5hKT4wJiYocz0hMCxvPXIoaSkpO2g+PTA7KWE8ZT8oaT0odGhpc1toXSYoMTw8YSktMSk8PGUtYSxpfD10aGlzWy0taF0+PihhKz10aGlzLkRCLWUpKTooaT10aGlzW2hdPj4oYS09ZSkmbixhPD0wJiYoYSs9dGhpcy5EQiwtLWgpKSxpPjAmJihzPSEwKSxzJiYobys9cihpKSk7cmV0dXJuIHM/bzoiMCJ9LHQucHJvdG90eXBlLm5lZ2F0ZT1mdW5jdGlvbigpe3ZhciBlPU4oKTtyZXR1cm4gdC5aRVJPLnN1YlRvKHRoaXMsZSksZX0sdC5wcm90b3R5cGUuYWJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuczwwP3RoaXMubmVnYXRlKCk6dGhpc30sdC5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucy10LnM7aWYoMCE9ZSlyZXR1cm4gZTt2YXIgaT10aGlzLnQ7aWYoMCE9KGU9aS10LnQpKXJldHVybiB0aGlzLnM8MD8tZTplO2Zvcig7LS1pPj0wOylpZigwIT0oZT10aGlzW2ldLXRbaV0pKXJldHVybiBlO3JldHVybiAwfSx0LnByb3RvdHlwZS5iaXRMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50PD0wPzA6dGhpcy5EQioodGhpcy50LTEpK0YodGhpc1t0aGlzLnQtMV1edGhpcy5zJnRoaXMuRE0pfSx0LnByb3RvdHlwZS5tb2Q9ZnVuY3Rpb24oZSl7dmFyIGk9TigpO3JldHVybiB0aGlzLmFicygpLmRpdlJlbVRvKGUsbnVsbCxpKSx0aGlzLnM8MCYmaS5jb21wYXJlVG8odC5aRVJPKT4wJiZlLnN1YlRvKGksaSksaX0sdC5wcm90b3R5cGUubW9kUG93SW50PWZ1bmN0aW9uKHQsZSl7dmFyIGk7cmV0dXJuIGk9dDwyNTZ8fGUuaXNFdmVuKCk/bmV3IEEoZSk6bmV3IFYoZSksdGhpcy5leHAodCxpKX0sdC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgdD1OKCk7cmV0dXJuIHRoaXMuY29weVRvKHQpLHR9LHQucHJvdG90eXBlLmludFZhbHVlPWZ1bmN0aW9uKCl7aWYodGhpcy5zPDApe2lmKDE9PXRoaXMudClyZXR1cm4gdGhpc1swXS10aGlzLkRWO2lmKDA9PXRoaXMudClyZXR1cm4tMX1lbHNle2lmKDE9PXRoaXMudClyZXR1cm4gdGhpc1swXTtpZigwPT10aGlzLnQpcmV0dXJuIDB9cmV0dXJuKHRoaXNbMV0mKDE8PDMyLXRoaXMuREIpLTEpPDx0aGlzLkRCfHRoaXNbMF19LHQucHJvdG90eXBlLmJ5dGVWYWx1ZT1mdW5jdGlvbigpe3JldHVybiAwPT10aGlzLnQ/dGhpcy5zOnRoaXNbMF08PDI0Pj4yNH0sdC5wcm90b3R5cGUuc2hvcnRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiAwPT10aGlzLnQ/dGhpcy5zOnRoaXNbMF08PDE2Pj4xNn0sdC5wcm90b3R5cGUuc2lnbnVtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuczwwPy0xOnRoaXMudDw9MHx8MT09dGhpcy50JiZ0aGlzWzBdPD0wPzA6MX0sdC5wcm90b3R5cGUudG9CeXRlQXJyYXk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnQsZT1bXTtlWzBdPXRoaXMuczt2YXIgaSxyPXRoaXMuREItdCp0aGlzLkRCJTgsbj0wO2lmKHQtLSA+MClmb3Iocjx0aGlzLkRCJiYoaT10aGlzW3RdPj5yKSE9KHRoaXMucyZ0aGlzLkRNKT4+ciYmKGVbbisrXT1pfHRoaXMuczw8dGhpcy5EQi1yKTt0Pj0wOylyPDg/KGk9KHRoaXNbdF0mKDE8PHIpLTEpPDw4LXIsaXw9dGhpc1stLXRdPj4ocis9dGhpcy5EQi04KSk6KGk9dGhpc1t0XT4+KHItPTgpJjI1NSxyPD0wJiYocis9dGhpcy5EQiwtLXQpKSwwIT0oMTI4JmkpJiYoaXw9LTI1NiksMD09biYmKDEyOCZ0aGlzLnMpIT0oMTI4JmkpJiYrK24sKG4+MHx8aSE9dGhpcy5zKSYmKGVbbisrXT1pKTtyZXR1cm4gZX0sdC5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiAwPT10aGlzLmNvbXBhcmVUbyh0KX0sdC5wcm90b3R5cGUubWluPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXBhcmVUbyh0KTwwP3RoaXM6dH0sdC5wcm90b3R5cGUubWF4PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXBhcmVUbyh0KT4wP3RoaXM6dH0sdC5wcm90b3R5cGUuYW5kPWZ1bmN0aW9uKHQpe3ZhciBlPU4oKTtyZXR1cm4gdGhpcy5iaXR3aXNlVG8odCxuLGUpLGV9LHQucHJvdG90eXBlLm9yPWZ1bmN0aW9uKHQpe3ZhciBlPU4oKTtyZXR1cm4gdGhpcy5iaXR3aXNlVG8odCxzLGUpLGV9LHQucHJvdG90eXBlLnhvcj1mdW5jdGlvbih0KXt2YXIgZT1OKCk7cmV0dXJuIHRoaXMuYml0d2lzZVRvKHQsbyxlKSxlfSx0LnByb3RvdHlwZS5hbmROb3Q9ZnVuY3Rpb24odCl7dmFyIGU9TigpO3JldHVybiB0aGlzLmJpdHdpc2VUbyh0LGgsZSksZX0sdC5wcm90b3R5cGUubm90PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PU4oKSxlPTA7ZTx0aGlzLnQ7KytlKXRbZV09dGhpcy5ETSZ+dGhpc1tlXTtyZXR1cm4gdC50PXRoaXMudCx0LnM9fnRoaXMucyx0fSx0LnByb3RvdHlwZS5zaGlmdExlZnQ9ZnVuY3Rpb24odCl7dmFyIGU9TigpO3JldHVybiB0PDA/dGhpcy5yU2hpZnRUbygtdCxlKTp0aGlzLmxTaGlmdFRvKHQsZSksZX0sdC5wcm90b3R5cGUuc2hpZnRSaWdodD1mdW5jdGlvbih0KXt2YXIgZT1OKCk7cmV0dXJuIHQ8MD90aGlzLmxTaGlmdFRvKC10LGUpOnRoaXMuclNoaWZ0VG8odCxlKSxlfSx0LnByb3RvdHlwZS5nZXRMb3dlc3RTZXRCaXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMudDsrK3QpaWYoMCE9dGhpc1t0XSlyZXR1cm4gdCp0aGlzLkRCK2EodGhpc1t0XSk7cmV0dXJuIHRoaXMuczwwP3RoaXMudCp0aGlzLkRCOi0xfSx0LnByb3RvdHlwZS5iaXRDb3VudD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5zJnRoaXMuRE0saT0wO2k8dGhpcy50OysraSl0Kz11KHRoaXNbaV1eZSk7cmV0dXJuIHR9LHQucHJvdG90eXBlLnRlc3RCaXQ9ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5mbG9vcih0L3RoaXMuREIpO3JldHVybiBlPj10aGlzLnQ/MCE9dGhpcy5zOjAhPSh0aGlzW2VdJjE8PHQldGhpcy5EQil9LHQucHJvdG90eXBlLnNldEJpdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jaGFuZ2VCaXQodCxzKX0sdC5wcm90b3R5cGUuY2xlYXJCaXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2hhbmdlQml0KHQsaCl9LHQucHJvdG90eXBlLmZsaXBCaXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2hhbmdlQml0KHQsbyl9LHQucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt2YXIgZT1OKCk7cmV0dXJuIHRoaXMuYWRkVG8odCxlKSxlfSx0LnByb3RvdHlwZS5zdWJ0cmFjdD1mdW5jdGlvbih0KXt2YXIgZT1OKCk7cmV0dXJuIHRoaXMuc3ViVG8odCxlKSxlfSx0LnByb3RvdHlwZS5tdWx0aXBseT1mdW5jdGlvbih0KXt2YXIgZT1OKCk7cmV0dXJuIHRoaXMubXVsdGlwbHlUbyh0LGUpLGV9LHQucHJvdG90eXBlLmRpdmlkZT1mdW5jdGlvbih0KXt2YXIgZT1OKCk7cmV0dXJuIHRoaXMuZGl2UmVtVG8odCxlLG51bGwpLGV9LHQucHJvdG90eXBlLnJlbWFpbmRlcj1mdW5jdGlvbih0KXt2YXIgZT1OKCk7cmV0dXJuIHRoaXMuZGl2UmVtVG8odCxudWxsLGUpLGV9LHQucHJvdG90eXBlLmRpdmlkZUFuZFJlbWFpbmRlcj1mdW5jdGlvbih0KXt2YXIgZT1OKCksaT1OKCk7cmV0dXJuIHRoaXMuZGl2UmVtVG8odCxlLGkpLFtlLGldfSx0LnByb3RvdHlwZS5tb2RQb3c9ZnVuY3Rpb24odCxlKXt2YXIgaSxyLG49dC5iaXRMZW5ndGgoKSxzPUMoMSk7aWYobjw9MClyZXR1cm4gcztpPW48MTg/MTpuPDQ4PzM6bjwxNDQ/NDpuPDc2OD81OjYscj1uPDg/bmV3IEEoZSk6ZS5pc0V2ZW4oKT9uZXcgSShlKTpuZXcgVihlKTt2YXIgbz1bXSxoPTMsYT1pLTEsdT0oMTw8aSktMTtpZihvWzFdPXIuY29udmVydCh0aGlzKSxpPjEpe3ZhciBjPU4oKTtmb3Ioci5zcXJUbyhvWzFdLGMpO2g8PXU7KW9baF09TigpLHIubXVsVG8oYyxvW2gtMl0sb1toXSksaCs9Mn12YXIgZixsLHA9dC50LTEsZz0hMCxkPU4oKTtmb3Iobj1GKHRbcF0pLTE7cD49MDspe2ZvcihuPj1hP2Y9dFtwXT4+bi1hJnU6KGY9KHRbcF0mKDE8PG4rMSktMSk8PGEtbixwPjAmJihmfD10W3AtMV0+PnRoaXMuREIrbi1hKSksaD1pOzA9PSgxJmYpOylmPj49MSwtLWg7aWYoKG4tPWgpPDAmJihuKz10aGlzLkRCLC0tcCksZylvW2ZdLmNvcHlUbyhzKSxnPSExO2Vsc2V7Zm9yKDtoPjE7KXIuc3FyVG8ocyxkKSxyLnNxclRvKGQscyksaC09MjtoPjA/ci5zcXJUbyhzLGQpOihsPXMscz1kLGQ9bCksci5tdWxUbyhkLG9bZl0scyl9Zm9yKDtwPj0wJiYwPT0odFtwXSYxPDxuKTspci5zcXJUbyhzLGQpLGw9cyxzPWQsZD1sLC0tbjwwJiYobj10aGlzLkRCLTEsLS1wKX1yZXR1cm4gci5yZXZlcnQocyl9LHQucHJvdG90eXBlLm1vZEludmVyc2U9ZnVuY3Rpb24oZSl7dmFyIGk9ZS5pc0V2ZW4oKTtpZih0aGlzLmlzRXZlbigpJiZpfHwwPT1lLnNpZ251bSgpKXJldHVybiB0LlpFUk87Zm9yKHZhciByPWUuY2xvbmUoKSxuPXRoaXMuY2xvbmUoKSxzPUMoMSksbz1DKDApLGg9QygwKSxhPUMoMSk7MCE9ci5zaWdudW0oKTspe2Zvcig7ci5pc0V2ZW4oKTspci5yU2hpZnRUbygxLHIpLGk/KHMuaXNFdmVuKCkmJm8uaXNFdmVuKCl8fChzLmFkZFRvKHRoaXMscyksby5zdWJUbyhlLG8pKSxzLnJTaGlmdFRvKDEscykpOm8uaXNFdmVuKCl8fG8uc3ViVG8oZSxvKSxvLnJTaGlmdFRvKDEsbyk7Zm9yKDtuLmlzRXZlbigpOyluLnJTaGlmdFRvKDEsbiksaT8oaC5pc0V2ZW4oKSYmYS5pc0V2ZW4oKXx8KGguYWRkVG8odGhpcyxoKSxhLnN1YlRvKGUsYSkpLGguclNoaWZ0VG8oMSxoKSk6YS5pc0V2ZW4oKXx8YS5zdWJUbyhlLGEpLGEuclNoaWZ0VG8oMSxhKTtyLmNvbXBhcmVUbyhuKT49MD8oci5zdWJUbyhuLHIpLGkmJnMuc3ViVG8oaCxzKSxvLnN1YlRvKGEsbykpOihuLnN1YlRvKHIsbiksaSYmaC5zdWJUbyhzLGgpLGEuc3ViVG8obyxhKSl9cmV0dXJuIDAhPW4uY29tcGFyZVRvKHQuT05FKT90LlpFUk86YS5jb21wYXJlVG8oZSk+PTA/YS5zdWJ0cmFjdChlKTphLnNpZ251bSgpPDA/KGEuYWRkVG8oZSxhKSxhLnNpZ251bSgpPDA/YS5hZGQoZSk6YSk6YX0sdC5wcm90b3R5cGUucG93PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmV4cCh0LG5ldyBPKX0sdC5wcm90b3R5cGUuZ2NkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuczwwP3RoaXMubmVnYXRlKCk6dGhpcy5jbG9uZSgpLGk9dC5zPDA/dC5uZWdhdGUoKTp0LmNsb25lKCk7aWYoZS5jb21wYXJlVG8oaSk8MCl7dmFyIHI9ZTtlPWksaT1yfXZhciBuPWUuZ2V0TG93ZXN0U2V0Qml0KCkscz1pLmdldExvd2VzdFNldEJpdCgpO2lmKHM8MClyZXR1cm4gZTtmb3IobjxzJiYocz1uKSxzPjAmJihlLnJTaGlmdFRvKHMsZSksaS5yU2hpZnRUbyhzLGkpKTtlLnNpZ251bSgpPjA7KShuPWUuZ2V0TG93ZXN0U2V0Qml0KCkpPjAmJmUuclNoaWZ0VG8obixlKSwobj1pLmdldExvd2VzdFNldEJpdCgpKT4wJiZpLnJTaGlmdFRvKG4saSksZS5jb21wYXJlVG8oaSk+PTA/KGUuc3ViVG8oaSxlKSxlLnJTaGlmdFRvKDEsZSkpOihpLnN1YlRvKGUsaSksaS5yU2hpZnRUbygxLGkpKTtyZXR1cm4gcz4wJiZpLmxTaGlmdFRvKHMsaSksaX0sdC5wcm90b3R5cGUuaXNQcm9iYWJsZVByaW1lPWZ1bmN0aW9uKHQpe3ZhciBlLGk9dGhpcy5hYnMoKTtpZigxPT1pLnQmJmlbMF08PXhbeC5sZW5ndGgtMV0pe2ZvcihlPTA7ZTx4Lmxlbmd0aDsrK2UpaWYoaVswXT09eFtlXSlyZXR1cm4hMDtyZXR1cm4hMX1pZihpLmlzRXZlbigpKXJldHVybiExO2ZvcihlPTE7ZTx4Lmxlbmd0aDspe2Zvcih2YXIgcj14W2VdLG49ZSsxO248eC5sZW5ndGgmJnI8Ujspcio9eFtuKytdO2ZvcihyPWkubW9kSW50KHIpO2U8bjspaWYociV4W2UrK109PTApcmV0dXJuITF9cmV0dXJuIGkubWlsbGVyUmFiaW4odCl9LHQucHJvdG90eXBlLmNvcHlUbz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy50LTE7ZT49MDstLWUpdFtlXT10aGlzW2VdO3QudD10aGlzLnQsdC5zPXRoaXMuc30sdC5wcm90b3R5cGUuZnJvbUludD1mdW5jdGlvbih0KXt0aGlzLnQ9MSx0aGlzLnM9dDwwPy0xOjAsdD4wP3RoaXNbMF09dDp0PC0xP3RoaXNbMF09dCt0aGlzLkRWOnRoaXMudD0wfSx0LnByb3RvdHlwZS5mcm9tU3RyaW5nPWZ1bmN0aW9uKGUsaSl7dmFyIHI7aWYoMTY9PWkpcj00O2Vsc2UgaWYoOD09aSlyPTM7ZWxzZSBpZigyNTY9PWkpcj04O2Vsc2UgaWYoMj09aSlyPTE7ZWxzZSBpZigzMj09aSlyPTU7ZWxzZXtpZig0IT1pKXJldHVybiB2b2lkIHRoaXMuZnJvbVJhZGl4KGUsaSk7cj0yfXRoaXMudD0wLHRoaXMucz0wO2Zvcih2YXIgbj1lLmxlbmd0aCxzPSExLG89MDstLW4+PTA7KXt2YXIgaD04PT1yPzI1NSYrZVtuXTpIKGUsbik7aDwwPyItIj09ZS5jaGFyQXQobikmJihzPSEwKToocz0hMSwwPT1vP3RoaXNbdGhpcy50KytdPWg6bytyPnRoaXMuREI/KHRoaXNbdGhpcy50LTFdfD0oaCYoMTw8dGhpcy5EQi1vKS0xKTw8byx0aGlzW3RoaXMudCsrXT1oPj50aGlzLkRCLW8pOnRoaXNbdGhpcy50LTFdfD1oPDxvLChvKz1yKT49dGhpcy5EQiYmKG8tPXRoaXMuREIpKX04PT1yJiYwIT0oMTI4JitlWzBdKSYmKHRoaXMucz0tMSxvPjAmJih0aGlzW3RoaXMudC0xXXw9KDE8PHRoaXMuREItbyktMTw8bykpLHRoaXMuY2xhbXAoKSxzJiZ0LlpFUk8uc3ViVG8odGhpcyx0aGlzKX0sdC5wcm90b3R5cGUuY2xhbXA9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5zJnRoaXMuRE07dGhpcy50PjAmJnRoaXNbdGhpcy50LTFdPT10OyktLXRoaXMudH0sdC5wcm90b3R5cGUuZGxTaGlmdFRvPWZ1bmN0aW9uKHQsZSl7dmFyIGk7Zm9yKGk9dGhpcy50LTE7aT49MDstLWkpZVtpK3RdPXRoaXNbaV07Zm9yKGk9dC0xO2k+PTA7LS1pKWVbaV09MDtlLnQ9dGhpcy50K3QsZS5zPXRoaXMuc30sdC5wcm90b3R5cGUuZHJTaGlmdFRvPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPXQ7aTx0aGlzLnQ7KytpKWVbaS10XT10aGlzW2ldO2UudD1NYXRoLm1heCh0aGlzLnQtdCwwKSxlLnM9dGhpcy5zfSx0LnByb3RvdHlwZS5sU2hpZnRUbz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaT10JXRoaXMuREIscj10aGlzLkRCLWksbj0oMTw8ciktMSxzPU1hdGguZmxvb3IodC90aGlzLkRCKSxvPXRoaXMuczw8aSZ0aGlzLkRNLGg9dGhpcy50LTE7aD49MDstLWgpZVtoK3MrMV09dGhpc1toXT4+cnxvLG89KHRoaXNbaF0mbik8PGk7Zm9yKGg9cy0xO2g+PTA7LS1oKWVbaF09MDtlW3NdPW8sZS50PXRoaXMudCtzKzEsZS5zPXRoaXMucyxlLmNsYW1wKCl9LHQucHJvdG90eXBlLnJTaGlmdFRvPWZ1bmN0aW9uKHQsZSl7ZS5zPXRoaXMuczt2YXIgaT1NYXRoLmZsb29yKHQvdGhpcy5EQik7aWYoaT49dGhpcy50KWUudD0wO2Vsc2V7dmFyIHI9dCV0aGlzLkRCLG49dGhpcy5EQi1yLHM9KDE8PHIpLTE7ZVswXT10aGlzW2ldPj5yO2Zvcih2YXIgbz1pKzE7bzx0aGlzLnQ7KytvKWVbby1pLTFdfD0odGhpc1tvXSZzKTw8bixlW28taV09dGhpc1tvXT4+cjtyPjAmJihlW3RoaXMudC1pLTFdfD0odGhpcy5zJnMpPDxuKSxlLnQ9dGhpcy50LWksZS5jbGFtcCgpfX0sdC5wcm90b3R5cGUuc3ViVG89ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9MCxyPTAsbj1NYXRoLm1pbih0LnQsdGhpcy50KTtpPG47KXIrPXRoaXNbaV0tdFtpXSxlW2krK109ciZ0aGlzLkRNLHI+Pj10aGlzLkRCO2lmKHQudDx0aGlzLnQpe2ZvcihyLT10LnM7aTx0aGlzLnQ7KXIrPXRoaXNbaV0sZVtpKytdPXImdGhpcy5ETSxyPj49dGhpcy5EQjtyKz10aGlzLnN9ZWxzZXtmb3Iocis9dGhpcy5zO2k8dC50OylyLT10W2ldLGVbaSsrXT1yJnRoaXMuRE0scj4+PXRoaXMuREI7ci09dC5zfWUucz1yPDA/LTE6MCxyPC0xP2VbaSsrXT10aGlzLkRWK3I6cj4wJiYoZVtpKytdPXIpLGUudD1pLGUuY2xhbXAoKX0sdC5wcm90b3R5cGUubXVsdGlwbHlUbz1mdW5jdGlvbihlLGkpe3ZhciByPXRoaXMuYWJzKCksbj1lLmFicygpLHM9ci50O2ZvcihpLnQ9cytuLnQ7LS1zPj0wOylpW3NdPTA7Zm9yKHM9MDtzPG4udDsrK3MpaVtzK3IudF09ci5hbSgwLG5bc10saSxzLDAsci50KTtpLnM9MCxpLmNsYW1wKCksdGhpcy5zIT1lLnMmJnQuWkVSTy5zdWJUbyhpLGkpfSx0LnByb3RvdHlwZS5zcXVhcmVUbz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5hYnMoKSxpPXQudD0yKmUudDstLWk+PTA7KXRbaV09MDtmb3IoaT0wO2k8ZS50LTE7KytpKXt2YXIgcj1lLmFtKGksZVtpXSx0LDIqaSwwLDEpOyh0W2krZS50XSs9ZS5hbShpKzEsMiplW2ldLHQsMippKzEscixlLnQtaS0xKSk+PWUuRFYmJih0W2krZS50XS09ZS5EVix0W2krZS50KzFdPTEpfXQudD4wJiYodFt0LnQtMV0rPWUuYW0oaSxlW2ldLHQsMippLDAsMSkpLHQucz0wLHQuY2xhbXAoKX0sdC5wcm90b3R5cGUuZGl2UmVtVG89ZnVuY3Rpb24oZSxpLHIpe3ZhciBuPWUuYWJzKCk7aWYoIShuLnQ8PTApKXt2YXIgcz10aGlzLmFicygpO2lmKHMudDxuLnQpcmV0dXJuIG51bGwhPWkmJmkuZnJvbUludCgwKSx2b2lkKG51bGwhPXImJnRoaXMuY29weVRvKHIpKTtudWxsPT1yJiYocj1OKCkpO3ZhciBvPU4oKSxoPXRoaXMucyxhPWUucyx1PXRoaXMuREItRihuW24udC0xXSk7dT4wPyhuLmxTaGlmdFRvKHUsbykscy5sU2hpZnRUbyh1LHIpKToobi5jb3B5VG8obykscy5jb3B5VG8ocikpO3ZhciBjPW8udCxmPW9bYy0xXTtpZigwIT1mKXt2YXIgbD1mKigxPDx0aGlzLkYxKSsoYz4xP29bYy0yXT4+dGhpcy5GMjowKSxwPXRoaXMuRlYvbCxnPSgxPDx0aGlzLkYxKS9sLGQ9MTw8dGhpcy5GMix2PXIudCxtPXYtYyx5PW51bGw9PWk/TigpOmk7Zm9yKG8uZGxTaGlmdFRvKG0seSksci5jb21wYXJlVG8oeSk+PTAmJihyW3IudCsrXT0xLHIuc3ViVG8oeSxyKSksdC5PTkUuZGxTaGlmdFRvKGMseSkseS5zdWJUbyhvLG8pO28udDxjOylvW28udCsrXT0wO2Zvcig7LS1tPj0wOyl7dmFyIGI9clstLXZdPT1mP3RoaXMuRE06TWF0aC5mbG9vcihyW3ZdKnArKHJbdi0xXStkKSpnKTtpZigoclt2XSs9by5hbSgwLGIscixtLDAsYykpPGIpZm9yKG8uZGxTaGlmdFRvKG0seSksci5zdWJUbyh5LHIpO3Jbdl08LS1iOylyLnN1YlRvKHkscil9bnVsbCE9aSYmKHIuZHJTaGlmdFRvKGMsaSksaCE9YSYmdC5aRVJPLnN1YlRvKGksaSkpLHIudD1jLHIuY2xhbXAoKSx1PjAmJnIuclNoaWZ0VG8odSxyKSxoPDAmJnQuWkVSTy5zdWJUbyhyLHIpfX19LHQucHJvdG90eXBlLmludkRpZ2l0PWZ1bmN0aW9uKCl7aWYodGhpcy50PDEpcmV0dXJuIDA7dmFyIHQ9dGhpc1swXTtpZigwPT0oMSZ0KSlyZXR1cm4gMDt2YXIgZT0zJnQ7cmV0dXJuKGU9KGU9KGU9KGU9ZSooMi0oMTUmdCkqZSkmMTUpKigyLSgyNTUmdCkqZSkmMjU1KSooMi0oKDY1NTM1JnQpKmUmNjU1MzUpKSY2NTUzNSkqKDItdCplJXRoaXMuRFYpJXRoaXMuRFYpPjA/dGhpcy5EVi1lOi1lfSx0LnByb3RvdHlwZS5pc0V2ZW49ZnVuY3Rpb24oKXtyZXR1cm4gMD09KHRoaXMudD4wPzEmdGhpc1swXTp0aGlzLnMpfSx0LnByb3RvdHlwZS5leHA9ZnVuY3Rpb24oZSxpKXtpZihlPjQyOTQ5NjcyOTV8fGU8MSlyZXR1cm4gdC5PTkU7dmFyIHI9TigpLG49TigpLHM9aS5jb252ZXJ0KHRoaXMpLG89RihlKS0xO2ZvcihzLmNvcHlUbyhyKTstLW8+PTA7KWlmKGkuc3FyVG8ocixuKSwoZSYxPDxvKT4wKWkubXVsVG8obixzLHIpO2Vsc2V7dmFyIGg9cjtyPW4sbj1ofXJldHVybiBpLnJldmVydChyKX0sdC5wcm90b3R5cGUuY2h1bmtTaXplPWZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmZsb29yKE1hdGguTE4yKnRoaXMuREIvTWF0aC5sb2codCkpfSx0LnByb3RvdHlwZS50b1JhZGl4PWZ1bmN0aW9uKHQpe2lmKG51bGw9PXQmJih0PTEwKSwwPT10aGlzLnNpZ251bSgpfHx0PDJ8fHQ+MzYpcmV0dXJuIjAiO3ZhciBlPXRoaXMuY2h1bmtTaXplKHQpLGk9TWF0aC5wb3codCxlKSxyPUMoaSksbj1OKCkscz1OKCksbz0iIjtmb3IodGhpcy5kaXZSZW1UbyhyLG4scyk7bi5zaWdudW0oKT4wOylvPShpK3MuaW50VmFsdWUoKSkudG9TdHJpbmcodCkuc3Vic3RyKDEpK28sbi5kaXZSZW1UbyhyLG4scyk7cmV0dXJuIHMuaW50VmFsdWUoKS50b1N0cmluZyh0KStvfSx0LnByb3RvdHlwZS5mcm9tUmFkaXg9ZnVuY3Rpb24oZSxpKXt0aGlzLmZyb21JbnQoMCksbnVsbD09aSYmKGk9MTApO2Zvcih2YXIgcj10aGlzLmNodW5rU2l6ZShpKSxuPU1hdGgucG93KGkscikscz0hMSxvPTAsaD0wLGE9MDthPGUubGVuZ3RoOysrYSl7dmFyIHU9SChlLGEpO3U8MD8iLSI9PWUuY2hhckF0KGEpJiYwPT10aGlzLnNpZ251bSgpJiYocz0hMCk6KGg9aSpoK3UsKytvPj1yJiYodGhpcy5kTXVsdGlwbHkobiksdGhpcy5kQWRkT2Zmc2V0KGgsMCksbz0wLGg9MCkpfW8+MCYmKHRoaXMuZE11bHRpcGx5KE1hdGgucG93KGksbykpLHRoaXMuZEFkZE9mZnNldChoLDApKSxzJiZ0LlpFUk8uc3ViVG8odGhpcyx0aGlzKX0sdC5wcm90b3R5cGUuZnJvbU51bWJlcj1mdW5jdGlvbihlLGkscil7aWYoIm51bWJlciI9PXR5cGVvZiBpKWlmKGU8Mil0aGlzLmZyb21JbnQoMSk7ZWxzZSBmb3IodGhpcy5mcm9tTnVtYmVyKGUsciksdGhpcy50ZXN0Qml0KGUtMSl8fHRoaXMuYml0d2lzZVRvKHQuT05FLnNoaWZ0TGVmdChlLTEpLHMsdGhpcyksdGhpcy5pc0V2ZW4oKSYmdGhpcy5kQWRkT2Zmc2V0KDEsMCk7IXRoaXMuaXNQcm9iYWJsZVByaW1lKGkpOyl0aGlzLmRBZGRPZmZzZXQoMiwwKSx0aGlzLmJpdExlbmd0aCgpPmUmJnRoaXMuc3ViVG8odC5PTkUuc2hpZnRMZWZ0KGUtMSksdGhpcyk7ZWxzZXt2YXIgbj1bXSxvPTcmZTtuLmxlbmd0aD0xKyhlPj4zKSxpLm5leHRCeXRlcyhuKSxvPjA/blswXSY9KDE8PG8pLTE6blswXT0wLHRoaXMuZnJvbVN0cmluZyhuLDI1Nil9fSx0LnByb3RvdHlwZS5iaXR3aXNlVG89ZnVuY3Rpb24odCxlLGkpe3ZhciByLG4scz1NYXRoLm1pbih0LnQsdGhpcy50KTtmb3Iocj0wO3I8czsrK3IpaVtyXT1lKHRoaXNbcl0sdFtyXSk7aWYodC50PHRoaXMudCl7Zm9yKG49dC5zJnRoaXMuRE0scj1zO3I8dGhpcy50OysrcilpW3JdPWUodGhpc1tyXSxuKTtpLnQ9dGhpcy50fWVsc2V7Zm9yKG49dGhpcy5zJnRoaXMuRE0scj1zO3I8dC50OysrcilpW3JdPWUobix0W3JdKTtpLnQ9dC50fWkucz1lKHRoaXMucyx0LnMpLGkuY2xhbXAoKX0sdC5wcm90b3R5cGUuY2hhbmdlQml0PWZ1bmN0aW9uKGUsaSl7dmFyIHI9dC5PTkUuc2hpZnRMZWZ0KGUpO3JldHVybiB0aGlzLmJpdHdpc2VUbyhyLGkscikscn0sdC5wcm90b3R5cGUuYWRkVG89ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9MCxyPTAsbj1NYXRoLm1pbih0LnQsdGhpcy50KTtpPG47KXIrPXRoaXNbaV0rdFtpXSxlW2krK109ciZ0aGlzLkRNLHI+Pj10aGlzLkRCO2lmKHQudDx0aGlzLnQpe2ZvcihyKz10LnM7aTx0aGlzLnQ7KXIrPXRoaXNbaV0sZVtpKytdPXImdGhpcy5ETSxyPj49dGhpcy5EQjtyKz10aGlzLnN9ZWxzZXtmb3Iocis9dGhpcy5zO2k8dC50OylyKz10W2ldLGVbaSsrXT1yJnRoaXMuRE0scj4+PXRoaXMuREI7cis9dC5zfWUucz1yPDA/LTE6MCxyPjA/ZVtpKytdPXI6cjwtMSYmKGVbaSsrXT10aGlzLkRWK3IpLGUudD1pLGUuY2xhbXAoKX0sdC5wcm90b3R5cGUuZE11bHRpcGx5PWZ1bmN0aW9uKHQpe3RoaXNbdGhpcy50XT10aGlzLmFtKDAsdC0xLHRoaXMsMCwwLHRoaXMudCksKyt0aGlzLnQsdGhpcy5jbGFtcCgpfSx0LnByb3RvdHlwZS5kQWRkT2Zmc2V0PWZ1bmN0aW9uKHQsZSl7aWYoMCE9dCl7Zm9yKDt0aGlzLnQ8PWU7KXRoaXNbdGhpcy50KytdPTA7Zm9yKHRoaXNbZV0rPXQ7dGhpc1tlXT49dGhpcy5EVjspdGhpc1tlXS09dGhpcy5EViwrK2U+PXRoaXMudCYmKHRoaXNbdGhpcy50KytdPTApLCsrdGhpc1tlXX19LHQucHJvdG90eXBlLm11bHRpcGx5TG93ZXJUbz1mdW5jdGlvbih0LGUsaSl7dmFyIHI9TWF0aC5taW4odGhpcy50K3QudCxlKTtmb3IoaS5zPTAsaS50PXI7cj4wOylpWy0tcl09MDtmb3IodmFyIG49aS50LXRoaXMudDtyPG47KytyKWlbcit0aGlzLnRdPXRoaXMuYW0oMCx0W3JdLGksciwwLHRoaXMudCk7Zm9yKG49TWF0aC5taW4odC50LGUpO3I8bjsrK3IpdGhpcy5hbSgwLHRbcl0saSxyLDAsZS1yKTtpLmNsYW1wKCl9LHQucHJvdG90eXBlLm11bHRpcGx5VXBwZXJUbz1mdW5jdGlvbih0LGUsaSl7LS1lO3ZhciByPWkudD10aGlzLnQrdC50LWU7Zm9yKGkucz0wOy0tcj49MDspaVtyXT0wO2ZvcihyPU1hdGgubWF4KGUtdGhpcy50LDApO3I8dC50OysrcilpW3RoaXMudCtyLWVdPXRoaXMuYW0oZS1yLHRbcl0saSwwLDAsdGhpcy50K3ItZSk7aS5jbGFtcCgpLGkuZHJTaGlmdFRvKDEsaSl9LHQucHJvdG90eXBlLm1vZEludD1mdW5jdGlvbih0KXtpZih0PD0wKXJldHVybiAwO3ZhciBlPXRoaXMuRFYldCxpPXRoaXMuczwwP3QtMTowO2lmKHRoaXMudD4wKWlmKDA9PWUpaT10aGlzWzBdJXQ7ZWxzZSBmb3IodmFyIHI9dGhpcy50LTE7cj49MDstLXIpaT0oZSppK3RoaXNbcl0pJXQ7cmV0dXJuIGl9LHQucHJvdG90eXBlLm1pbGxlclJhYmluPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMuc3VidHJhY3QodC5PTkUpLHI9aS5nZXRMb3dlc3RTZXRCaXQoKTtpZihyPD0wKXJldHVybiExO3ZhciBuPWkuc2hpZnRSaWdodChyKTsoZT1lKzE+PjEpPngubGVuZ3RoJiYoZT14Lmxlbmd0aCk7Zm9yKHZhciBzPU4oKSxvPTA7bzxlOysrbyl7cy5mcm9tSW50KHhbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKngubGVuZ3RoKV0pO3ZhciBoPXMubW9kUG93KG4sdGhpcyk7aWYoMCE9aC5jb21wYXJlVG8odC5PTkUpJiYwIT1oLmNvbXBhcmVUbyhpKSl7Zm9yKHZhciBhPTE7YSsrPHImJjAhPWguY29tcGFyZVRvKGkpOylpZigwPT0oaD1oLm1vZFBvd0ludCgyLHRoaXMpKS5jb21wYXJlVG8odC5PTkUpKXJldHVybiExO2lmKDAhPWguY29tcGFyZVRvKGkpKXJldHVybiExfX1yZXR1cm4hMH0sdC5wcm90b3R5cGUuc3F1YXJlPWZ1bmN0aW9uKCl7dmFyIHQ9TigpO3JldHVybiB0aGlzLnNxdWFyZVRvKHQpLHR9LHQucHJvdG90eXBlLmdjZGE9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLnM8MD90aGlzLm5lZ2F0ZSgpOnRoaXMuY2xvbmUoKSxyPXQuczwwP3QubmVnYXRlKCk6dC5jbG9uZSgpO2lmKGkuY29tcGFyZVRvKHIpPDApe3ZhciBuPWk7aT1yLHI9bn12YXIgcz1pLmdldExvd2VzdFNldEJpdCgpLG89ci5nZXRMb3dlc3RTZXRCaXQoKTtpZihvPDApZShpKTtlbHNle3M8byYmKG89cyksbz4wJiYoaS5yU2hpZnRUbyhvLGkpLHIuclNoaWZ0VG8obyxyKSk7dmFyIGg9ZnVuY3Rpb24oKXsocz1pLmdldExvd2VzdFNldEJpdCgpKT4wJiZpLnJTaGlmdFRvKHMsaSksKHM9ci5nZXRMb3dlc3RTZXRCaXQoKSk+MCYmci5yU2hpZnRUbyhzLHIpLGkuY29tcGFyZVRvKHIpPj0wPyhpLnN1YlRvKHIsaSksaS5yU2hpZnRUbygxLGkpKTooci5zdWJUbyhpLHIpLHIuclNoaWZ0VG8oMSxyKSksaS5zaWdudW0oKT4wP3NldFRpbWVvdXQoaCwwKToobz4wJiZyLmxTaGlmdFRvKG8sciksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtlKHIpfSksMCkpfTtzZXRUaW1lb3V0KGgsMTApfX0sdC5wcm90b3R5cGUuZnJvbU51bWJlckFzeW5jPWZ1bmN0aW9uKGUsaSxyLG4pe2lmKCJudW1iZXIiPT10eXBlb2YgaSlpZihlPDIpdGhpcy5mcm9tSW50KDEpO2Vsc2V7dGhpcy5mcm9tTnVtYmVyKGUsciksdGhpcy50ZXN0Qml0KGUtMSl8fHRoaXMuYml0d2lzZVRvKHQuT05FLnNoaWZ0TGVmdChlLTEpLHMsdGhpcyksdGhpcy5pc0V2ZW4oKSYmdGhpcy5kQWRkT2Zmc2V0KDEsMCk7dmFyIG89dGhpcyxoPWZ1bmN0aW9uKCl7by5kQWRkT2Zmc2V0KDIsMCksby5iaXRMZW5ndGgoKT5lJiZvLnN1YlRvKHQuT05FLnNoaWZ0TGVmdChlLTEpLG8pLG8uaXNQcm9iYWJsZVByaW1lKGkpP3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7bigpfSksMCk6c2V0VGltZW91dChoLDApfTtzZXRUaW1lb3V0KGgsMCl9ZWxzZXt2YXIgYT1bXSx1PTcmZTthLmxlbmd0aD0xKyhlPj4zKSxpLm5leHRCeXRlcyhhKSx1PjA/YVswXSY9KDE8PHUpLTE6YVswXT0wLHRoaXMuZnJvbVN0cmluZyhhLDI1Nil9fSx0fSgpLE89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS5jb252ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0fSx0LnByb3RvdHlwZS5yZXZlcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHR9LHQucHJvdG90eXBlLm11bFRvPWZ1bmN0aW9uKHQsZSxpKXt0Lm11bHRpcGx5VG8oZSxpKX0sdC5wcm90b3R5cGUuc3FyVG89ZnVuY3Rpb24odCxlKXt0LnNxdWFyZVRvKGUpfSx0fSgpLEE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMubT10fXJldHVybiB0LnByb3RvdHlwZS5jb252ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnM8MHx8dC5jb21wYXJlVG8odGhpcy5tKT49MD90Lm1vZCh0aGlzLm0pOnR9LHQucHJvdG90eXBlLnJldmVydD1mdW5jdGlvbih0KXtyZXR1cm4gdH0sdC5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKHQpe3QuZGl2UmVtVG8odGhpcy5tLG51bGwsdCl9LHQucHJvdG90eXBlLm11bFRvPWZ1bmN0aW9uKHQsZSxpKXt0Lm11bHRpcGx5VG8oZSxpKSx0aGlzLnJlZHVjZShpKX0sdC5wcm90b3R5cGUuc3FyVG89ZnVuY3Rpb24odCxlKXt0LnNxdWFyZVRvKGUpLHRoaXMucmVkdWNlKGUpfSx0fSgpLFY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMubT10LHRoaXMubXA9dC5pbnZEaWdpdCgpLHRoaXMubXBsPTMyNzY3JnRoaXMubXAsdGhpcy5tcGg9dGhpcy5tcD4+MTUsdGhpcy51bT0oMTw8dC5EQi0xNSktMSx0aGlzLm10Mj0yKnQudH1yZXR1cm4gdC5wcm90b3R5cGUuY29udmVydD1mdW5jdGlvbih0KXt2YXIgZT1OKCk7cmV0dXJuIHQuYWJzKCkuZGxTaGlmdFRvKHRoaXMubS50LGUpLGUuZGl2UmVtVG8odGhpcy5tLG51bGwsZSksdC5zPDAmJmUuY29tcGFyZVRvKEIuWkVSTyk+MCYmdGhpcy5tLnN1YlRvKGUsZSksZX0sdC5wcm90b3R5cGUucmV2ZXJ0PWZ1bmN0aW9uKHQpe3ZhciBlPU4oKTtyZXR1cm4gdC5jb3B5VG8oZSksdGhpcy5yZWR1Y2UoZSksZX0sdC5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKHQpe2Zvcig7dC50PD10aGlzLm10MjspdFt0LnQrK109MDtmb3IodmFyIGU9MDtlPHRoaXMubS50OysrZSl7dmFyIGk9MzI3NjcmdFtlXSxyPWkqdGhpcy5tcGwrKChpKnRoaXMubXBoKyh0W2VdPj4xNSkqdGhpcy5tcGwmdGhpcy51bSk8PDE1KSZ0LkRNO2Zvcih0W2k9ZSt0aGlzLm0udF0rPXRoaXMubS5hbSgwLHIsdCxlLDAsdGhpcy5tLnQpO3RbaV0+PXQuRFY7KXRbaV0tPXQuRFYsdFsrK2ldKyt9dC5jbGFtcCgpLHQuZHJTaGlmdFRvKHRoaXMubS50LHQpLHQuY29tcGFyZVRvKHRoaXMubSk+PTAmJnQuc3ViVG8odGhpcy5tLHQpfSx0LnByb3RvdHlwZS5tdWxUbz1mdW5jdGlvbih0LGUsaSl7dC5tdWx0aXBseVRvKGUsaSksdGhpcy5yZWR1Y2UoaSl9LHQucHJvdG90eXBlLnNxclRvPWZ1bmN0aW9uKHQsZSl7dC5zcXVhcmVUbyhlKSx0aGlzLnJlZHVjZShlKX0sdH0oKSxJPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLm09dCx0aGlzLnIyPU4oKSx0aGlzLnEzPU4oKSxCLk9ORS5kbFNoaWZ0VG8oMip0LnQsdGhpcy5yMiksdGhpcy5tdT10aGlzLnIyLmRpdmlkZSh0KX1yZXR1cm4gdC5wcm90b3R5cGUuY29udmVydD1mdW5jdGlvbih0KXtpZih0LnM8MHx8dC50PjIqdGhpcy5tLnQpcmV0dXJuIHQubW9kKHRoaXMubSk7aWYodC5jb21wYXJlVG8odGhpcy5tKTwwKXJldHVybiB0O3ZhciBlPU4oKTtyZXR1cm4gdC5jb3B5VG8oZSksdGhpcy5yZWR1Y2UoZSksZX0sdC5wcm90b3R5cGUucmV2ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0fSx0LnByb3RvdHlwZS5yZWR1Y2U9ZnVuY3Rpb24odCl7Zm9yKHQuZHJTaGlmdFRvKHRoaXMubS50LTEsdGhpcy5yMiksdC50PnRoaXMubS50KzEmJih0LnQ9dGhpcy5tLnQrMSx0LmNsYW1wKCkpLHRoaXMubXUubXVsdGlwbHlVcHBlclRvKHRoaXMucjIsdGhpcy5tLnQrMSx0aGlzLnEzKSx0aGlzLm0ubXVsdGlwbHlMb3dlclRvKHRoaXMucTMsdGhpcy5tLnQrMSx0aGlzLnIyKTt0LmNvbXBhcmVUbyh0aGlzLnIyKTwwOyl0LmRBZGRPZmZzZXQoMSx0aGlzLm0udCsxKTtmb3IodC5zdWJUbyh0aGlzLnIyLHQpO3QuY29tcGFyZVRvKHRoaXMubSk+PTA7KXQuc3ViVG8odGhpcy5tLHQpfSx0LnByb3RvdHlwZS5tdWxUbz1mdW5jdGlvbih0LGUsaSl7dC5tdWx0aXBseVRvKGUsaSksdGhpcy5yZWR1Y2UoaSl9LHQucHJvdG90eXBlLnNxclRvPWZ1bmN0aW9uKHQsZSl7dC5zcXVhcmVUbyhlKSx0aGlzLnJlZHVjZShlKX0sdH0oKTtmdW5jdGlvbiBOKCl7cmV0dXJuIG5ldyBCKG51bGwpfWZ1bmN0aW9uIFAodCxlKXtyZXR1cm4gbmV3IEIodCxlKX12YXIgTT0idW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvcjtNJiYiTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyIj09bmF2aWdhdG9yLmFwcE5hbWU/KEIucHJvdG90eXBlLmFtPWZ1bmN0aW9uKHQsZSxpLHIsbixzKXtmb3IodmFyIG89MzI3NjcmZSxoPWU+PjE1Oy0tcz49MDspe3ZhciBhPTMyNzY3JnRoaXNbdF0sdT10aGlzW3QrK10+PjE1LGM9aCphK3UqbztuPSgoYT1vKmErKCgzMjc2NyZjKTw8MTUpK2lbcl0rKDEwNzM3NDE4MjMmbikpPj4+MzApKyhjPj4+MTUpK2gqdSsobj4+PjMwKSxpW3IrK109MTA3Mzc0MTgyMyZhfXJldHVybiBufSxTPTMwKTpNJiYiTmV0c2NhcGUiIT1uYXZpZ2F0b3IuYXBwTmFtZT8oQi5wcm90b3R5cGUuYW09ZnVuY3Rpb24odCxlLGkscixuLHMpe2Zvcig7LS1zPj0wOyl7dmFyIG89ZSp0aGlzW3QrK10raVtyXStuO249TWF0aC5mbG9vcihvLzY3MTA4ODY0KSxpW3IrK109NjcxMDg4NjMmb31yZXR1cm4gbn0sUz0yNik6KEIucHJvdG90eXBlLmFtPWZ1bmN0aW9uKHQsZSxpLHIsbixzKXtmb3IodmFyIG89MTYzODMmZSxoPWU+PjE0Oy0tcz49MDspe3ZhciBhPTE2MzgzJnRoaXNbdF0sdT10aGlzW3QrK10+PjE0LGM9aCphK3UqbztuPSgoYT1vKmErKCgxNjM4MyZjKTw8MTQpK2lbcl0rbik+PjI4KSsoYz4+MTQpK2gqdSxpW3IrK109MjY4NDM1NDU1JmF9cmV0dXJuIG59LFM9MjgpLEIucHJvdG90eXBlLkRCPVMsQi5wcm90b3R5cGUuRE09KDE8PFMpLTEsQi5wcm90b3R5cGUuRFY9MTw8UyxCLnByb3RvdHlwZS5GVj1NYXRoLnBvdygyLDUyKSxCLnByb3RvdHlwZS5GMT01Mi1TLEIucHJvdG90eXBlLkYyPTIqUy01Mjt2YXIgaixxLEw9W107Zm9yKGo9IjAiLmNoYXJDb2RlQXQoMCkscT0wO3E8PTk7KytxKUxbaisrXT1xO2ZvcihqPSJhIi5jaGFyQ29kZUF0KDApLHE9MTA7cTwzNjsrK3EpTFtqKytdPXE7Zm9yKGo9IkEiLmNoYXJDb2RlQXQoMCkscT0xMDtxPDM2OysrcSlMW2orK109cTtmdW5jdGlvbiBIKHQsZSl7dmFyIGk9TFt0LmNoYXJDb2RlQXQoZSldO3JldHVybiBudWxsPT1pPy0xOml9ZnVuY3Rpb24gQyh0KXt2YXIgZT1OKCk7cmV0dXJuIGUuZnJvbUludCh0KSxlfWZ1bmN0aW9uIEYodCl7dmFyIGUsaT0xO3JldHVybiAwIT0oZT10Pj4+MTYpJiYodD1lLGkrPTE2KSwwIT0oZT10Pj44KSYmKHQ9ZSxpKz04KSwwIT0oZT10Pj40KSYmKHQ9ZSxpKz00KSwwIT0oZT10Pj4yKSYmKHQ9ZSxpKz0yKSwwIT0oZT10Pj4xKSYmKHQ9ZSxpKz0xKSxpfUIuWkVSTz1DKDApLEIuT05FPUMoMSk7dmFyIFUsSyxrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuaT0wLHRoaXMuaj0wLHRoaXMuUz1bXX1yZXR1cm4gdC5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbih0KXt2YXIgZSxpLHI7Zm9yKGU9MDtlPDI1NjsrK2UpdGhpcy5TW2VdPWU7Zm9yKGk9MCxlPTA7ZTwyNTY7KytlKWk9aSt0aGlzLlNbZV0rdFtlJXQubGVuZ3RoXSYyNTUscj10aGlzLlNbZV0sdGhpcy5TW2VdPXRoaXMuU1tpXSx0aGlzLlNbaV09cjt0aGlzLmk9MCx0aGlzLmo9MH0sdC5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3ZhciB0O3JldHVybiB0aGlzLmk9dGhpcy5pKzEmMjU1LHRoaXMuaj10aGlzLmordGhpcy5TW3RoaXMuaV0mMjU1LHQ9dGhpcy5TW3RoaXMuaV0sdGhpcy5TW3RoaXMuaV09dGhpcy5TW3RoaXMual0sdGhpcy5TW3RoaXMual09dCx0aGlzLlNbdCt0aGlzLlNbdGhpcy5pXSYyNTVdfSx0fSgpLF89bnVsbDtpZihudWxsPT1fKXtfPVtdLEs9MDt2YXIgej12b2lkIDA7aWYod2luZG93LmNyeXB0byYmd2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXMpe3ZhciBaPW5ldyBVaW50MzJBcnJheSgyNTYpO2Zvcih3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhaKSx6PTA7ejxaLmxlbmd0aDsrK3opX1tLKytdPTI1NSZaW3pdfXZhciBHPTAsJD1mdW5jdGlvbih0KXtpZigoRz1HfHwwKT49MjU2fHxLPj0yNTYpd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXI/d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsJCwhMSk6d2luZG93LmRldGFjaEV2ZW50JiZ3aW5kb3cuZGV0YWNoRXZlbnQoIm9ubW91c2Vtb3ZlIiwkKTtlbHNlIHRyeXt2YXIgZT10LngrdC55O19bSysrXT0yNTUmZSxHKz0xfWNhdGNoKHQpe319O3dpbmRvdy5hZGRFdmVudExpc3RlbmVyP3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLCQsITEpOndpbmRvdy5hdHRhY2hFdmVudCYmd2luZG93LmF0dGFjaEV2ZW50KCJvbm1vdXNlbW92ZSIsJCl9ZnVuY3Rpb24gWSgpe2lmKG51bGw9PVUpe2ZvcihVPW5ldyBrO0s8MjU2Oyl7dmFyIHQ9TWF0aC5mbG9vcig2NTUzNipNYXRoLnJhbmRvbSgpKTtfW0srK109MjU1JnR9Zm9yKFUuaW5pdChfKSxLPTA7SzxfLmxlbmd0aDsrK0spX1tLXT0wO0s9MH1yZXR1cm4gVS5uZXh0KCl9dmFyIEo9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS5uZXh0Qnl0ZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDsrK2UpdFtlXT1ZKCl9LHR9KCksWD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLm49bnVsbCx0aGlzLmU9MCx0aGlzLmQ9bnVsbCx0aGlzLnA9bnVsbCx0aGlzLnE9bnVsbCx0aGlzLmRtcDE9bnVsbCx0aGlzLmRtcTE9bnVsbCx0aGlzLmNvZWZmPW51bGx9cmV0dXJuIHQucHJvdG90eXBlLmRvUHVibGljPWZ1bmN0aW9uKHQpe3JldHVybiB0Lm1vZFBvd0ludCh0aGlzLmUsdGhpcy5uKX0sdC5wcm90b3R5cGUuZG9Qcml2YXRlPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMucHx8bnVsbD09dGhpcy5xKXJldHVybiB0Lm1vZFBvdyh0aGlzLmQsdGhpcy5uKTtmb3IodmFyIGU9dC5tb2QodGhpcy5wKS5tb2RQb3codGhpcy5kbXAxLHRoaXMucCksaT10Lm1vZCh0aGlzLnEpLm1vZFBvdyh0aGlzLmRtcTEsdGhpcy5xKTtlLmNvbXBhcmVUbyhpKTwwOyllPWUuYWRkKHRoaXMucCk7cmV0dXJuIGUuc3VidHJhY3QoaSkubXVsdGlwbHkodGhpcy5jb2VmZikubW9kKHRoaXMucCkubXVsdGlwbHkodGhpcy5xKS5hZGQoaSl9LHQucHJvdG90eXBlLnNldFB1YmxpYz1mdW5jdGlvbih0LGUpe251bGwhPXQmJm51bGwhPWUmJnQubGVuZ3RoPjAmJmUubGVuZ3RoPjA/KHRoaXMubj1QKHQsMTYpLHRoaXMuZT1wYXJzZUludChlLDE2KSk6Y29uc29sZS5lcnJvcigiSW52YWxpZCBSU0EgcHVibGljIGtleSIpfSx0LnByb3RvdHlwZS5lbmNyeXB0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubi5iaXRMZW5ndGgoKSs3Pj4zLGk9ZnVuY3Rpb24odCxlKXtpZihlPHQubGVuZ3RoKzExKXJldHVybiBjb25zb2xlLmVycm9yKCJNZXNzYWdlIHRvbyBsb25nIGZvciBSU0EiKSxudWxsO2Zvcih2YXIgaT1bXSxyPXQubGVuZ3RoLTE7cj49MCYmZT4wOyl7dmFyIG49dC5jaGFyQ29kZUF0KHItLSk7bjwxMjg/aVstLWVdPW46bj4xMjcmJm48MjA0OD8oaVstLWVdPTYzJm58MTI4LGlbLS1lXT1uPj42fDE5Mik6KGlbLS1lXT02MyZufDEyOCxpWy0tZV09bj4+NiY2M3wxMjgsaVstLWVdPW4+PjEyfDIyNCl9aVstLWVdPTA7Zm9yKHZhciBzPW5ldyBKLG89W107ZT4yOyl7Zm9yKG9bMF09MDswPT1vWzBdOylzLm5leHRCeXRlcyhvKTtpWy0tZV09b1swXX1yZXR1cm4gaVstLWVdPTIsaVstLWVdPTAsbmV3IEIoaSl9KHQsZSk7aWYobnVsbD09aSlyZXR1cm4gbnVsbDt2YXIgcj10aGlzLmRvUHVibGljKGkpO2lmKG51bGw9PXIpcmV0dXJuIG51bGw7Zm9yKHZhciBuPXIudG9TdHJpbmcoMTYpLHM9bi5sZW5ndGgsbz0wO288MiplLXM7bysrKW49IjAiK247cmV0dXJuIG59LHQucHJvdG90eXBlLnNldFByaXZhdGU9ZnVuY3Rpb24odCxlLGkpe251bGwhPXQmJm51bGwhPWUmJnQubGVuZ3RoPjAmJmUubGVuZ3RoPjA/KHRoaXMubj1QKHQsMTYpLHRoaXMuZT1wYXJzZUludChlLDE2KSx0aGlzLmQ9UChpLDE2KSk6Y29uc29sZS5lcnJvcigiSW52YWxpZCBSU0EgcHJpdmF0ZSBrZXkiKX0sdC5wcm90b3R5cGUuc2V0UHJpdmF0ZUV4PWZ1bmN0aW9uKHQsZSxpLHIsbixzLG8saCl7bnVsbCE9dCYmbnVsbCE9ZSYmdC5sZW5ndGg+MCYmZS5sZW5ndGg+MD8odGhpcy5uPVAodCwxNiksdGhpcy5lPXBhcnNlSW50KGUsMTYpLHRoaXMuZD1QKGksMTYpLHRoaXMucD1QKHIsMTYpLHRoaXMucT1QKG4sMTYpLHRoaXMuZG1wMT1QKHMsMTYpLHRoaXMuZG1xMT1QKG8sMTYpLHRoaXMuY29lZmY9UChoLDE2KSk6Y29uc29sZS5lcnJvcigiSW52YWxpZCBSU0EgcHJpdmF0ZSBrZXkiKX0sdC5wcm90b3R5cGUuZ2VuZXJhdGU9ZnVuY3Rpb24odCxlKXt2YXIgaT1uZXcgSixyPXQ+PjE7dGhpcy5lPXBhcnNlSW50KGUsMTYpO2Zvcih2YXIgbj1uZXcgQihlLDE2KTs7KXtmb3IoO3RoaXMucD1uZXcgQih0LXIsMSxpKSwwIT10aGlzLnAuc3VidHJhY3QoQi5PTkUpLmdjZChuKS5jb21wYXJlVG8oQi5PTkUpfHwhdGhpcy5wLmlzUHJvYmFibGVQcmltZSgxMCk7KTtmb3IoO3RoaXMucT1uZXcgQihyLDEsaSksMCE9dGhpcy5xLnN1YnRyYWN0KEIuT05FKS5nY2QobikuY29tcGFyZVRvKEIuT05FKXx8IXRoaXMucS5pc1Byb2JhYmxlUHJpbWUoMTApOyk7aWYodGhpcy5wLmNvbXBhcmVUbyh0aGlzLnEpPD0wKXt2YXIgcz10aGlzLnA7dGhpcy5wPXRoaXMucSx0aGlzLnE9c312YXIgbz10aGlzLnAuc3VidHJhY3QoQi5PTkUpLGg9dGhpcy5xLnN1YnRyYWN0KEIuT05FKSxhPW8ubXVsdGlwbHkoaCk7aWYoMD09YS5nY2QobikuY29tcGFyZVRvKEIuT05FKSl7dGhpcy5uPXRoaXMucC5tdWx0aXBseSh0aGlzLnEpLHRoaXMuZD1uLm1vZEludmVyc2UoYSksdGhpcy5kbXAxPXRoaXMuZC5tb2QobyksdGhpcy5kbXExPXRoaXMuZC5tb2QoaCksdGhpcy5jb2VmZj10aGlzLnEubW9kSW52ZXJzZSh0aGlzLnApO2JyZWFrfX19LHQucHJvdG90eXBlLmRlY3J5cHQ9ZnVuY3Rpb24odCl7dmFyIGU9UCh0LDE2KSxpPXRoaXMuZG9Qcml2YXRlKGUpO3JldHVybiBudWxsPT1pP251bGw6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dC50b0J5dGVBcnJheSgpLHI9MDtyPGkubGVuZ3RoJiYwPT1pW3JdOykrK3I7aWYoaS5sZW5ndGgtciE9ZS0xfHwyIT1pW3JdKXJldHVybiBudWxsO2ZvcigrK3I7MCE9aVtyXTspaWYoKytyPj1pLmxlbmd0aClyZXR1cm4gbnVsbDtmb3IodmFyIG49IiI7KytyPGkubGVuZ3RoOyl7dmFyIHM9MjU1Jmlbcl07czwxMjg/bis9U3RyaW5nLmZyb21DaGFyQ29kZShzKTpzPjE5MSYmczwyMjQ/KG4rPVN0cmluZy5mcm9tQ2hhckNvZGUoKDMxJnMpPDw2fDYzJmlbcisxXSksKytyKToobis9U3RyaW5nLmZyb21DaGFyQ29kZSgoMTUmcyk8PDEyfCg2MyZpW3IrMV0pPDw2fDYzJmlbcisyXSkscis9Mil9cmV0dXJuIG59KGksdGhpcy5uLmJpdExlbmd0aCgpKzc+PjMpfSx0LnByb3RvdHlwZS5nZW5lcmF0ZUFzeW5jPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj1uZXcgSixuPXQ+PjE7dGhpcy5lPXBhcnNlSW50KGUsMTYpO3ZhciBzPW5ldyBCKGUsMTYpLG89dGhpcyxoPWZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oKXtpZihvLnAuY29tcGFyZVRvKG8ucSk8PTApe3ZhciB0PW8ucDtvLnA9by5xLG8ucT10fXZhciBlPW8ucC5zdWJ0cmFjdChCLk9ORSkscj1vLnEuc3VidHJhY3QoQi5PTkUpLG49ZS5tdWx0aXBseShyKTswPT1uLmdjZChzKS5jb21wYXJlVG8oQi5PTkUpPyhvLm49by5wLm11bHRpcGx5KG8ucSksby5kPXMubW9kSW52ZXJzZShuKSxvLmRtcDE9by5kLm1vZChlKSxvLmRtcTE9by5kLm1vZChyKSxvLmNvZWZmPW8ucS5tb2RJbnZlcnNlKG8ucCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtpKCl9KSwwKSk6c2V0VGltZW91dChoLDApfSxhPWZ1bmN0aW9uKCl7by5xPU4oKSxvLnEuZnJvbU51bWJlckFzeW5jKG4sMSxyLChmdW5jdGlvbigpe28ucS5zdWJ0cmFjdChCLk9ORSkuZ2NkYShzLChmdW5jdGlvbih0KXswPT10LmNvbXBhcmVUbyhCLk9ORSkmJm8ucS5pc1Byb2JhYmxlUHJpbWUoMTApP3NldFRpbWVvdXQoZSwwKTpzZXRUaW1lb3V0KGEsMCl9KSl9KSl9LHU9ZnVuY3Rpb24oKXtvLnA9TigpLG8ucC5mcm9tTnVtYmVyQXN5bmModC1uLDEsciwoZnVuY3Rpb24oKXtvLnAuc3VidHJhY3QoQi5PTkUpLmdjZGEocywoZnVuY3Rpb24odCl7MD09dC5jb21wYXJlVG8oQi5PTkUpJiZvLnAuaXNQcm9iYWJsZVByaW1lKDEwKT9zZXRUaW1lb3V0KGEsMCk6c2V0VGltZW91dCh1LDApfSkpfSkpfTtzZXRUaW1lb3V0KHUsMCl9O3NldFRpbWVvdXQoaCwwKX0sdC5wcm90b3R5cGUuc2lnbj1mdW5jdGlvbih0LGUsaSl7dmFyIHI9ZnVuY3Rpb24odCxlKXtpZihlPHQubGVuZ3RoKzIyKXJldHVybiBjb25zb2xlLmVycm9yKCJNZXNzYWdlIHRvbyBsb25nIGZvciBSU0EiKSxudWxsO2Zvcih2YXIgaT1lLXQubGVuZ3RoLTYscj0iIixuPTA7bjxpO24rPTIpcis9ImZmIjtyZXR1cm4gUCgiMDAwMSIrcisiMDAiK3QsMTYpfSgoUVtpXXx8IiIpK2UodCkudG9TdHJpbmcoKSx0aGlzLm4uYml0TGVuZ3RoKCkvNCk7aWYobnVsbD09cilyZXR1cm4gbnVsbDt2YXIgbj10aGlzLmRvUHJpdmF0ZShyKTtpZihudWxsPT1uKXJldHVybiBudWxsO3ZhciBzPW4udG9TdHJpbmcoMTYpO3JldHVybiAwPT0oMSZzLmxlbmd0aCk/czoiMCIrc30sdC5wcm90b3R5cGUudmVyaWZ5PWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj1QKGUsMTYpLG49dGhpcy5kb1B1YmxpYyhyKTtyZXR1cm4gbnVsbD09bj9udWxsOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiBRKWlmKFEuaGFzT3duUHJvcGVydHkoZSkpe3ZhciBpPVFbZV0scj1pLmxlbmd0aDtpZih0LnN1YnN0cigwLHIpPT1pKXJldHVybiB0LnN1YnN0cihyKX1yZXR1cm4gdH0obi50b1N0cmluZygxNikucmVwbGFjZSgvXjFmKzAwLywiIikpPT1pKHQpLnRvU3RyaW5nKCl9LHR9KCksUT17bWQyOiIzMDIwMzAwYzA2MDgyYTg2NDg4NmY3MGQwMjAyMDUwMDA0MTAiLG1kNToiMzAyMDMwMGMwNjA4MmE4NjQ4ODZmNzBkMDIwNTA1MDAwNDEwIixzaGExOiIzMDIxMzAwOTA2MDUyYjBlMDMwMjFhMDUwMDA0MTQiLHNoYTIyNDoiMzAyZDMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjA0MDUwMDA0MWMiLHNoYTI1NjoiMzAzMTMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAxMDUwMDA0MjAiLHNoYTM4NDoiMzA0MTMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAyMDUwMDA0MzAiLHNoYTUxMjoiMzA1MTMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAzMDUwMDA0NDAiLHJpcGVtZDE2MDoiMzAyMTMwMDkwNjA1MmIyNDAzMDIwMTA1MDAwNDE0In0sVz17fTtXLmxhbmc9e2V4dGVuZDpmdW5jdGlvbih0LGUsaSl7aWYoIWV8fCF0KXRocm93IG5ldyBFcnJvcigiWUFIT08ubGFuZy5leHRlbmQgZmFpbGVkLCBwbGVhc2UgY2hlY2sgdGhhdCBhbGwgZGVwZW5kZW5jaWVzIGFyZSBpbmNsdWRlZC4iKTt2YXIgcj1mdW5jdGlvbigpe307aWYoci5wcm90b3R5cGU9ZS5wcm90b3R5cGUsdC5wcm90b3R5cGU9bmV3IHIsdC5wcm90b3R5cGUuY29uc3RydWN0b3I9dCx0LnN1cGVyY2xhc3M9ZS5wcm90b3R5cGUsZS5wcm90b3R5cGUuY29uc3RydWN0b3I9PU9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3ImJihlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lKSxpKXt2YXIgbjtmb3IobiBpbiBpKXQucHJvdG90eXBlW25dPWlbbl07dmFyIHM9ZnVuY3Rpb24oKXt9LG89WyJ0b1N0cmluZyIsInZhbHVlT2YiXTt0cnl7L01TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJihzPWZ1bmN0aW9uKHQsZSl7Zm9yKG49MDtuPG8ubGVuZ3RoO24rPTEpe3ZhciBpPW9bbl0scj1lW2ldOyJmdW5jdGlvbiI9PXR5cGVvZiByJiZyIT1PYmplY3QucHJvdG90eXBlW2ldJiYodFtpXT1yKX19KX1jYXRjaCh0KXt9cyh0LnByb3RvdHlwZSxpKX19fTt2YXIgdHQ9e307dm9pZCAwIT09dHQuYXNuMSYmdHQuYXNuMXx8KHR0LmFzbjE9e30pLHR0LmFzbjEuQVNOMVV0aWw9bmV3IGZ1bmN0aW9uKCl7dGhpcy5pbnRlZ2VyVG9CeXRlSGV4PWZ1bmN0aW9uKHQpe3ZhciBlPXQudG9TdHJpbmcoMTYpO3JldHVybiBlLmxlbmd0aCUyPT0xJiYoZT0iMCIrZSksZX0sdGhpcy5iaWdJbnRUb01pblR3b3NDb21wbGVtZW50c0hleD1mdW5jdGlvbih0KXt2YXIgZT10LnRvU3RyaW5nKDE2KTtpZigiLSIhPWUuc3Vic3RyKDAsMSkpZS5sZW5ndGglMj09MT9lPSIwIitlOmUubWF0Y2goL15bMC03XS8pfHwoZT0iMDAiK2UpO2Vsc2V7dmFyIGk9ZS5zdWJzdHIoMSkubGVuZ3RoO2klMj09MT9pKz0xOmUubWF0Y2goL15bMC03XS8pfHwoaSs9Mik7Zm9yKHZhciByPSIiLG49MDtuPGk7bisrKXIrPSJmIjtlPW5ldyBCKHIsMTYpLnhvcih0KS5hZGQoQi5PTkUpLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eLS8sIiIpfXJldHVybiBlfSx0aGlzLmdldFBFTVN0cmluZ0Zyb21IZXg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gaGV4dG9wZW0odCxlKX0sdGhpcy5uZXdPYmplY3Q9ZnVuY3Rpb24odCl7dmFyIGU9dHQuYXNuMSxpPWUuREVSQm9vbGVhbixyPWUuREVSSW50ZWdlcixuPWUuREVSQml0U3RyaW5nLHM9ZS5ERVJPY3RldFN0cmluZyxvPWUuREVSTnVsbCxoPWUuREVST2JqZWN0SWRlbnRpZmllcixhPWUuREVSRW51bWVyYXRlZCx1PWUuREVSVVRGOFN0cmluZyxjPWUuREVSTnVtZXJpY1N0cmluZyxmPWUuREVSUHJpbnRhYmxlU3RyaW5nLGw9ZS5ERVJUZWxldGV4U3RyaW5nLHA9ZS5ERVJJQTVTdHJpbmcsZz1lLkRFUlVUQ1RpbWUsZD1lLkRFUkdlbmVyYWxpemVkVGltZSx2PWUuREVSU2VxdWVuY2UsbT1lLkRFUlNldCx5PWUuREVSVGFnZ2VkT2JqZWN0LGI9ZS5BU04xVXRpbC5uZXdPYmplY3QsVD1PYmplY3Qua2V5cyh0KTtpZigxIT1ULmxlbmd0aCl0aHJvdyJrZXkgb2YgcGFyYW0gc2hhbGwgYmUgb25seSBvbmUuIjt2YXIgUz1UWzBdO2lmKC0xPT0iOmJvb2w6aW50OmJpdHN0cjpvY3RzdHI6bnVsbDpvaWQ6ZW51bTp1dGY4c3RyOm51bXN0cjpwcm5zdHI6dGVsc3RyOmlhNXN0cjp1dGN0aW1lOmdlbnRpbWU6c2VxOnNldDp0YWc6Ii5pbmRleE9mKCI6IitTKyI6IikpdGhyb3cidW5kZWZpbmVkIGtleTogIitTO2lmKCJib29sIj09UylyZXR1cm4gbmV3IGkodFtTXSk7aWYoImludCI9PVMpcmV0dXJuIG5ldyByKHRbU10pO2lmKCJiaXRzdHIiPT1TKXJldHVybiBuZXcgbih0W1NdKTtpZigib2N0c3RyIj09UylyZXR1cm4gbmV3IHModFtTXSk7aWYoIm51bGwiPT1TKXJldHVybiBuZXcgbyh0W1NdKTtpZigib2lkIj09UylyZXR1cm4gbmV3IGgodFtTXSk7aWYoImVudW0iPT1TKXJldHVybiBuZXcgYSh0W1NdKTtpZigidXRmOHN0ciI9PVMpcmV0dXJuIG5ldyB1KHRbU10pO2lmKCJudW1zdHIiPT1TKXJldHVybiBuZXcgYyh0W1NdKTtpZigicHJuc3RyIj09UylyZXR1cm4gbmV3IGYodFtTXSk7aWYoInRlbHN0ciI9PVMpcmV0dXJuIG5ldyBsKHRbU10pO2lmKCJpYTVzdHIiPT1TKXJldHVybiBuZXcgcCh0W1NdKTtpZigidXRjdGltZSI9PVMpcmV0dXJuIG5ldyBnKHRbU10pO2lmKCJnZW50aW1lIj09UylyZXR1cm4gbmV3IGQodFtTXSk7aWYoInNlcSI9PVMpe2Zvcih2YXIgRT10W1NdLHc9W10sRD0wO0Q8RS5sZW5ndGg7RCsrKXt2YXIgeD1iKEVbRF0pO3cucHVzaCh4KX1yZXR1cm4gbmV3IHYoe2FycmF5Ond9KX1pZigic2V0Ij09Uyl7Zm9yKEU9dFtTXSx3PVtdLEQ9MDtEPEUubGVuZ3RoO0QrKyl4PWIoRVtEXSksdy5wdXNoKHgpO3JldHVybiBuZXcgbSh7YXJyYXk6d30pfWlmKCJ0YWciPT1TKXt2YXIgUj10W1NdO2lmKCJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUikmJjM9PVIubGVuZ3RoKXt2YXIgQj1iKFJbMl0pO3JldHVybiBuZXcgeSh7dGFnOlJbMF0sZXhwbGljaXQ6UlsxXSxvYmo6Qn0pfXZhciBPPXt9O2lmKHZvaWQgMCE9PVIuZXhwbGljaXQmJihPLmV4cGxpY2l0PVIuZXhwbGljaXQpLHZvaWQgMCE9PVIudGFnJiYoTy50YWc9Ui50YWcpLHZvaWQgMD09PVIub2JqKXRocm93Im9iaiBzaGFsbCBiZSBzcGVjaWZpZWQgZm9yICd0YWcnLiI7cmV0dXJuIE8ub2JqPWIoUi5vYmopLG5ldyB5KE8pfX0sdGhpcy5qc29uVG9BU04xSEVYPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5ld09iamVjdCh0KS5nZXRFbmNvZGVkSGV4KCl9fSx0dC5hc24xLkFTTjFVdGlsLm9pZEhleFRvSW50PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0iIixpPXBhcnNlSW50KHQuc3Vic3RyKDAsMiksMTYpLHI9KGU9TWF0aC5mbG9vcihpLzQwKSsiLiIraSU0MCwiIiksbj0yO248dC5sZW5ndGg7bis9Mil7dmFyIHM9KCIwMDAwMDAwMCIrcGFyc2VJbnQodC5zdWJzdHIobiwyKSwxNikudG9TdHJpbmcoMikpLnNsaWNlKC04KTtyKz1zLnN1YnN0cigxLDcpLCIwIj09cy5zdWJzdHIoMCwxKSYmKGU9ZSsiLiIrbmV3IEIociwyKS50b1N0cmluZygxMCkscj0iIil9cmV0dXJuIGV9LHR0LmFzbjEuQVNOMVV0aWwub2lkSW50VG9IZXg9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7dmFyIGU9dC50b1N0cmluZygxNik7cmV0dXJuIDE9PWUubGVuZ3RoJiYoZT0iMCIrZSksZX0saT1mdW5jdGlvbih0KXt2YXIgaT0iIixyPW5ldyBCKHQsMTApLnRvU3RyaW5nKDIpLG49Ny1yLmxlbmd0aCU3Ozc9PW4mJihuPTApO2Zvcih2YXIgcz0iIixvPTA7bzxuO28rKylzKz0iMCI7Zm9yKHI9cytyLG89MDtvPHIubGVuZ3RoLTE7bys9Nyl7dmFyIGg9ci5zdWJzdHIobyw3KTtvIT1yLmxlbmd0aC03JiYoaD0iMSIraCksaSs9ZShwYXJzZUludChoLDIpKX1yZXR1cm4gaX07aWYoIXQubWF0Y2goL15bMC05Ll0rJC8pKXRocm93Im1hbGZvcm1lZCBvaWQgc3RyaW5nOiAiK3Q7dmFyIHI9IiIsbj10LnNwbGl0KCIuIikscz00MCpwYXJzZUludChuWzBdKStwYXJzZUludChuWzFdKTtyKz1lKHMpLG4uc3BsaWNlKDAsMik7Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspcis9aShuW29dKTtyZXR1cm4gcn0sdHQuYXNuMS5BU04xT2JqZWN0PWZ1bmN0aW9uKCl7dGhpcy5nZXRMZW5ndGhIZXhGcm9tVmFsdWU9ZnVuY3Rpb24oKXtpZih2b2lkIDA9PT10aGlzLmhWfHxudWxsPT10aGlzLmhWKXRocm93InRoaXMuaFYgaXMgbnVsbCBvciB1bmRlZmluZWQuIjtpZih0aGlzLmhWLmxlbmd0aCUyPT0xKXRocm93InZhbHVlIGhleCBtdXN0IGJlIGV2ZW4gbGVuZ3RoOiBuPSIrIiIubGVuZ3RoKyIsdj0iK3RoaXMuaFY7dmFyIHQ9dGhpcy5oVi5sZW5ndGgvMixlPXQudG9TdHJpbmcoMTYpO2lmKGUubGVuZ3RoJTI9PTEmJihlPSIwIitlKSx0PDEyOClyZXR1cm4gZTt2YXIgaT1lLmxlbmd0aC8yO2lmKGk+MTUpdGhyb3ciQVNOLjEgbGVuZ3RoIHRvbyBsb25nIHRvIHJlcHJlc2VudCBieSA4eDogbiA9ICIrdC50b1N0cmluZygxNik7cmV0dXJuKDEyOCtpKS50b1N0cmluZygxNikrZX0sdGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7cmV0dXJuKG51bGw9PXRoaXMuaFRMVnx8dGhpcy5pc01vZGlmaWVkKSYmKHRoaXMuaFY9dGhpcy5nZXRGcmVzaFZhbHVlSGV4KCksdGhpcy5oTD10aGlzLmdldExlbmd0aEhleEZyb21WYWx1ZSgpLHRoaXMuaFRMVj10aGlzLmhUK3RoaXMuaEwrdGhpcy5oVix0aGlzLmlzTW9kaWZpZWQ9ITEpLHRoaXMuaFRMVn0sdGhpcy5nZXRWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEVuY29kZWRIZXgoKSx0aGlzLmhWfSx0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4iIn19LHR0LmFzbjEuREVSQWJzdHJhY3RTdHJpbmc9ZnVuY3Rpb24odCl7dHQuYXNuMS5ERVJBYnN0cmFjdFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksdGhpcy5nZXRTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zfSx0aGlzLnNldFN0cmluZz1mdW5jdGlvbih0KXt0aGlzLmhUTFY9bnVsbCx0aGlzLmlzTW9kaWZpZWQ9ITAsdGhpcy5zPXQsdGhpcy5oVj1zdG9oZXgodGhpcy5zKX0sdGhpcy5zZXRTdHJpbmdIZXg9ZnVuY3Rpb24odCl7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMucz1udWxsLHRoaXMuaFY9dH0sdGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9LHZvaWQgMCE9PXQmJigic3RyaW5nIj09dHlwZW9mIHQ/dGhpcy5zZXRTdHJpbmcodCk6dm9pZCAwIT09dC5zdHI/dGhpcy5zZXRTdHJpbmcodC5zdHIpOnZvaWQgMCE9PXQuaGV4JiZ0aGlzLnNldFN0cmluZ0hleCh0LmhleCkpfSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVSQWJzdHJhY3RTdHJpbmcsdHQuYXNuMS5BU04xT2JqZWN0KSx0dC5hc24xLkRFUkFic3RyYWN0VGltZT1mdW5jdGlvbih0KXt0dC5hc24xLkRFUkFic3RyYWN0VGltZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksdGhpcy5sb2NhbERhdGVUb1VUQz1mdW5jdGlvbih0KXtyZXR1cm4gdXRjPXQuZ2V0VGltZSgpKzZlNCp0LmdldFRpbWV6b25lT2Zmc2V0KCksbmV3IERhdGUodXRjKX0sdGhpcy5mb3JtYXREYXRlPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10aGlzLnplcm9QYWRkaW5nLG49dGhpcy5sb2NhbERhdGVUb1VUQyh0KSxzPVN0cmluZyhuLmdldEZ1bGxZZWFyKCkpOyJ1dGMiPT1lJiYocz1zLnN1YnN0cigyLDIpKTt2YXIgbz1zK3IoU3RyaW5nKG4uZ2V0TW9udGgoKSsxKSwyKStyKFN0cmluZyhuLmdldERhdGUoKSksMikrcihTdHJpbmcobi5nZXRIb3VycygpKSwyKStyKFN0cmluZyhuLmdldE1pbnV0ZXMoKSksMikrcihTdHJpbmcobi5nZXRTZWNvbmRzKCkpLDIpO2lmKCEwPT09aSl7dmFyIGg9bi5nZXRNaWxsaXNlY29uZHMoKTtpZigwIT1oKXt2YXIgYT1yKFN0cmluZyhoKSwzKTtvPW8rIi4iKyhhPWEucmVwbGFjZSgvWzBdKyQvLCIiKSl9fXJldHVybiBvKyJaIn0sdGhpcy56ZXJvUGFkZGluZz1mdW5jdGlvbih0LGUpe3JldHVybiB0Lmxlbmd0aD49ZT90Om5ldyBBcnJheShlLXQubGVuZ3RoKzEpLmpvaW4oIjAiKSt0fSx0aGlzLmdldFN0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN9LHRoaXMuc2V0U3RyaW5nPWZ1bmN0aW9uKHQpe3RoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCx0aGlzLnM9dCx0aGlzLmhWPXN0b2hleCh0KX0sdGhpcy5zZXRCeURhdGVWYWx1ZT1mdW5jdGlvbih0LGUsaSxyLG4scyl7dmFyIG89bmV3IERhdGUoRGF0ZS5VVEModCxlLTEsaSxyLG4scywwKSk7dGhpcy5zZXRCeURhdGUobyl9LHRoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfX0sVy5sYW5nLmV4dGVuZCh0dC5hc24xLkRFUkFic3RyYWN0VGltZSx0dC5hc24xLkFTTjFPYmplY3QpLHR0LmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkPWZ1bmN0aW9uKHQpe3R0LmFzbjEuREVSQWJzdHJhY3RTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMuc2V0QnlBU04xT2JqZWN0QXJyYXk9ZnVuY3Rpb24odCl7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMuYXNuMUFycmF5PXR9LHRoaXMuYXBwZW5kQVNOMU9iamVjdD1mdW5jdGlvbih0KXt0aGlzLmhUTFY9bnVsbCx0aGlzLmlzTW9kaWZpZWQ9ITAsdGhpcy5hc24xQXJyYXkucHVzaCh0KX0sdGhpcy5hc24xQXJyYXk9bmV3IEFycmF5LHZvaWQgMCE9PXQmJnZvaWQgMCE9PXQuYXJyYXkmJih0aGlzLmFzbjFBcnJheT10LmFycmF5KX0sVy5sYW5nLmV4dGVuZCh0dC5hc24xLkRFUkFic3RyYWN0U3RydWN0dXJlZCx0dC5hc24xLkFTTjFPYmplY3QpLHR0LmFzbjEuREVSQm9vbGVhbj1mdW5jdGlvbigpe3R0LmFzbjEuREVSQm9vbGVhbi5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksdGhpcy5oVD0iMDEiLHRoaXMuaFRMVj0iMDEwMWZmIn0sVy5sYW5nLmV4dGVuZCh0dC5hc24xLkRFUkJvb2xlYW4sdHQuYXNuMS5BU04xT2JqZWN0KSx0dC5hc24xLkRFUkludGVnZXI9ZnVuY3Rpb24odCl7dHQuYXNuMS5ERVJJbnRlZ2VyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSx0aGlzLmhUPSIwMiIsdGhpcy5zZXRCeUJpZ0ludGVnZXI9ZnVuY3Rpb24odCl7dGhpcy5oVExWPW51bGwsdGhpcy5pc01vZGlmaWVkPSEwLHRoaXMuaFY9dHQuYXNuMS5BU04xVXRpbC5iaWdJbnRUb01pblR3b3NDb21wbGVtZW50c0hleCh0KX0sdGhpcy5zZXRCeUludGVnZXI9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEIoU3RyaW5nKHQpLDEwKTt0aGlzLnNldEJ5QmlnSW50ZWdlcihlKX0sdGhpcy5zZXRWYWx1ZUhleD1mdW5jdGlvbih0KXt0aGlzLmhWPXR9LHRoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfSx2b2lkIDAhPT10JiYodm9pZCAwIT09dC5iaWdpbnQ/dGhpcy5zZXRCeUJpZ0ludGVnZXIodC5iaWdpbnQpOnZvaWQgMCE9PXQuaW50P3RoaXMuc2V0QnlJbnRlZ2VyKHQuaW50KToibnVtYmVyIj09dHlwZW9mIHQ/dGhpcy5zZXRCeUludGVnZXIodCk6dm9pZCAwIT09dC5oZXgmJnRoaXMuc2V0VmFsdWVIZXgodC5oZXgpKX0sVy5sYW5nLmV4dGVuZCh0dC5hc24xLkRFUkludGVnZXIsdHQuYXNuMS5BU04xT2JqZWN0KSx0dC5hc24xLkRFUkJpdFN0cmluZz1mdW5jdGlvbih0KXtpZih2b2lkIDAhPT10JiZ2b2lkIDAhPT10Lm9iail7dmFyIGU9dHQuYXNuMS5BU04xVXRpbC5uZXdPYmplY3QodC5vYmopO3QuaGV4PSIwMCIrZS5nZXRFbmNvZGVkSGV4KCl9dHQuYXNuMS5ERVJCaXRTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMuaFQ9IjAzIix0aGlzLnNldEhleFZhbHVlSW5jbHVkaW5nVW51c2VkQml0cz1mdW5jdGlvbih0KXt0aGlzLmhUTFY9bnVsbCx0aGlzLmlzTW9kaWZpZWQ9ITAsdGhpcy5oVj10fSx0aGlzLnNldFVudXNlZEJpdHNBbmRIZXhWYWx1ZT1mdW5jdGlvbih0LGUpe2lmKHQ8MHx8Nzx0KXRocm93InVudXNlZCBiaXRzIHNoYWxsIGJlIGZyb20gMCB0byA3OiB1ID0gIit0O3ZhciBpPSIwIit0O3RoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCx0aGlzLmhWPWkrZX0sdGhpcy5zZXRCeUJpbmFyeVN0cmluZz1mdW5jdGlvbih0KXt2YXIgZT04LSh0PXQucmVwbGFjZSgvMCskLywiIikpLmxlbmd0aCU4Ozg9PWUmJihlPTApO2Zvcih2YXIgaT0wO2k8PWU7aSsrKXQrPSIwIjt2YXIgcj0iIjtmb3IoaT0wO2k8dC5sZW5ndGgtMTtpKz04KXt2YXIgbj10LnN1YnN0cihpLDgpLHM9cGFyc2VJbnQobiwyKS50b1N0cmluZygxNik7MT09cy5sZW5ndGgmJihzPSIwIitzKSxyKz1zfXRoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCx0aGlzLmhWPSIwIitlK3J9LHRoaXMuc2V0QnlCb29sZWFuQXJyYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPSIiLGk9MDtpPHQubGVuZ3RoO2krKykxPT10W2ldP2UrPSIxIjplKz0iMCI7dGhpcy5zZXRCeUJpbmFyeVN0cmluZyhlKX0sdGhpcy5uZXdGYWxzZUFycmF5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgQXJyYXkodCksaT0wO2k8dDtpKyspZVtpXT0hMTtyZXR1cm4gZX0sdGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9LHZvaWQgMCE9PXQmJigic3RyaW5nIj09dHlwZW9mIHQmJnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvXlswLTlhLWZdKyQvKT90aGlzLnNldEhleFZhbHVlSW5jbHVkaW5nVW51c2VkQml0cyh0KTp2b2lkIDAhPT10LmhleD90aGlzLnNldEhleFZhbHVlSW5jbHVkaW5nVW51c2VkQml0cyh0LmhleCk6dm9pZCAwIT09dC5iaW4/dGhpcy5zZXRCeUJpbmFyeVN0cmluZyh0LmJpbik6dm9pZCAwIT09dC5hcnJheSYmdGhpcy5zZXRCeUJvb2xlYW5BcnJheSh0LmFycmF5KSl9LFcubGFuZy5leHRlbmQodHQuYXNuMS5ERVJCaXRTdHJpbmcsdHQuYXNuMS5BU04xT2JqZWN0KSx0dC5hc24xLkRFUk9jdGV0U3RyaW5nPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9PXQmJnZvaWQgMCE9PXQub2JqKXt2YXIgZT10dC5hc24xLkFTTjFVdGlsLm5ld09iamVjdCh0Lm9iaik7dC5oZXg9ZS5nZXRFbmNvZGVkSGV4KCl9dHQuYXNuMS5ERVJPY3RldFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0KSx0aGlzLmhUPSIwNCJ9LFcubGFuZy5leHRlbmQodHQuYXNuMS5ERVJPY3RldFN0cmluZyx0dC5hc24xLkRFUkFic3RyYWN0U3RyaW5nKSx0dC5hc24xLkRFUk51bGw9ZnVuY3Rpb24oKXt0dC5hc24xLkRFUk51bGwuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMuaFQ9IjA1Iix0aGlzLmhUTFY9IjA1MDAifSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVSTnVsbCx0dC5hc24xLkFTTjFPYmplY3QpLHR0LmFzbjEuREVST2JqZWN0SWRlbnRpZmllcj1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXt2YXIgZT10LnRvU3RyaW5nKDE2KTtyZXR1cm4gMT09ZS5sZW5ndGgmJihlPSIwIitlKSxlfSxpPWZ1bmN0aW9uKHQpe3ZhciBpPSIiLHI9bmV3IEIodCwxMCkudG9TdHJpbmcoMiksbj03LXIubGVuZ3RoJTc7Nz09biYmKG49MCk7Zm9yKHZhciBzPSIiLG89MDtvPG47bysrKXMrPSIwIjtmb3Iocj1zK3Isbz0wO288ci5sZW5ndGgtMTtvKz03KXt2YXIgaD1yLnN1YnN0cihvLDcpO28hPXIubGVuZ3RoLTcmJihoPSIxIitoKSxpKz1lKHBhcnNlSW50KGgsMikpfXJldHVybiBpfTt0dC5hc24xLkRFUk9iamVjdElkZW50aWZpZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMuaFQ9IjA2Iix0aGlzLnNldFZhbHVlSGV4PWZ1bmN0aW9uKHQpe3RoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCx0aGlzLnM9bnVsbCx0aGlzLmhWPXR9LHRoaXMuc2V0VmFsdWVPaWRTdHJpbmc9ZnVuY3Rpb24odCl7aWYoIXQubWF0Y2goL15bMC05Ll0rJC8pKXRocm93Im1hbGZvcm1lZCBvaWQgc3RyaW5nOiAiK3Q7dmFyIHI9IiIsbj10LnNwbGl0KCIuIikscz00MCpwYXJzZUludChuWzBdKStwYXJzZUludChuWzFdKTtyKz1lKHMpLG4uc3BsaWNlKDAsMik7Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspcis9aShuW29dKTt0aGlzLmhUTFY9bnVsbCx0aGlzLmlzTW9kaWZpZWQ9ITAsdGhpcy5zPW51bGwsdGhpcy5oVj1yfSx0aGlzLnNldFZhbHVlTmFtZT1mdW5jdGlvbih0KXt2YXIgZT10dC5hc24xLng1MDkuT0lELm5hbWUyb2lkKHQpO2lmKCIiPT09ZSl0aHJvdyJERVJPYmplY3RJZGVudGlmaWVyIG9pZE5hbWUgdW5kZWZpbmVkOiAiK3Q7dGhpcy5zZXRWYWx1ZU9pZFN0cmluZyhlKX0sdGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9LHZvaWQgMCE9PXQmJigic3RyaW5nIj09dHlwZW9mIHQ/dC5tYXRjaCgvXlswLTJdLlswLTkuXSskLyk/dGhpcy5zZXRWYWx1ZU9pZFN0cmluZyh0KTp0aGlzLnNldFZhbHVlTmFtZSh0KTp2b2lkIDAhPT10Lm9pZD90aGlzLnNldFZhbHVlT2lkU3RyaW5nKHQub2lkKTp2b2lkIDAhPT10LmhleD90aGlzLnNldFZhbHVlSGV4KHQuaGV4KTp2b2lkIDAhPT10Lm5hbWUmJnRoaXMuc2V0VmFsdWVOYW1lKHQubmFtZSkpfSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVST2JqZWN0SWRlbnRpZmllcix0dC5hc24xLkFTTjFPYmplY3QpLHR0LmFzbjEuREVSRW51bWVyYXRlZD1mdW5jdGlvbih0KXt0dC5hc24xLkRFUkVudW1lcmF0ZWQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLHRoaXMuaFQ9IjBhIix0aGlzLnNldEJ5QmlnSW50ZWdlcj1mdW5jdGlvbih0KXt0aGlzLmhUTFY9bnVsbCx0aGlzLmlzTW9kaWZpZWQ9ITAsdGhpcy5oVj10dC5hc24xLkFTTjFVdGlsLmJpZ0ludFRvTWluVHdvc0NvbXBsZW1lbnRzSGV4KHQpfSx0aGlzLnNldEJ5SW50ZWdlcj1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQihTdHJpbmcodCksMTApO3RoaXMuc2V0QnlCaWdJbnRlZ2VyKGUpfSx0aGlzLnNldFZhbHVlSGV4PWZ1bmN0aW9uKHQpe3RoaXMuaFY9dH0sdGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9LHZvaWQgMCE9PXQmJih2b2lkIDAhPT10LmludD90aGlzLnNldEJ5SW50ZWdlcih0LmludCk6Im51bWJlciI9PXR5cGVvZiB0P3RoaXMuc2V0QnlJbnRlZ2VyKHQpOnZvaWQgMCE9PXQuaGV4JiZ0aGlzLnNldFZhbHVlSGV4KHQuaGV4KSl9LFcubGFuZy5leHRlbmQodHQuYXNuMS5ERVJFbnVtZXJhdGVkLHR0LmFzbjEuQVNOMU9iamVjdCksdHQuYXNuMS5ERVJVVEY4U3RyaW5nPWZ1bmN0aW9uKHQpe3R0LmFzbjEuREVSVVRGOFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0KSx0aGlzLmhUPSIwYyJ9LFcubGFuZy5leHRlbmQodHQuYXNuMS5ERVJVVEY4U3RyaW5nLHR0LmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpLHR0LmFzbjEuREVSTnVtZXJpY1N0cmluZz1mdW5jdGlvbih0KXt0dC5hc24xLkRFUk51bWVyaWNTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD0iMTIifSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVSTnVtZXJpY1N0cmluZyx0dC5hc24xLkRFUkFic3RyYWN0U3RyaW5nKSx0dC5hc24xLkRFUlByaW50YWJsZVN0cmluZz1mdW5jdGlvbih0KXt0dC5hc24xLkRFUlByaW50YWJsZVN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0KSx0aGlzLmhUPSIxMyJ9LFcubGFuZy5leHRlbmQodHQuYXNuMS5ERVJQcmludGFibGVTdHJpbmcsdHQuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyksdHQuYXNuMS5ERVJUZWxldGV4U3RyaW5nPWZ1bmN0aW9uKHQpe3R0LmFzbjEuREVSVGVsZXRleFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0KSx0aGlzLmhUPSIxNCJ9LFcubGFuZy5leHRlbmQodHQuYXNuMS5ERVJUZWxldGV4U3RyaW5nLHR0LmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpLHR0LmFzbjEuREVSSUE1U3RyaW5nPWZ1bmN0aW9uKHQpe3R0LmFzbjEuREVSSUE1U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLHQpLHRoaXMuaFQ9IjE2In0sVy5sYW5nLmV4dGVuZCh0dC5hc24xLkRFUklBNVN0cmluZyx0dC5hc24xLkRFUkFic3RyYWN0U3RyaW5nKSx0dC5hc24xLkRFUlVUQ1RpbWU9ZnVuY3Rpb24odCl7dHQuYXNuMS5ERVJVVENUaW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLHQpLHRoaXMuaFQ9IjE3Iix0aGlzLnNldEJ5RGF0ZT1mdW5jdGlvbih0KXt0aGlzLmhUTFY9bnVsbCx0aGlzLmlzTW9kaWZpZWQ9ITAsdGhpcy5kYXRlPXQsdGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsInV0YyIpLHRoaXMuaFY9c3RvaGV4KHRoaXMucyl9LHRoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLmRhdGUmJnZvaWQgMD09PXRoaXMucyYmKHRoaXMuZGF0ZT1uZXcgRGF0ZSx0aGlzLnM9dGhpcy5mb3JtYXREYXRlKHRoaXMuZGF0ZSwidXRjIiksdGhpcy5oVj1zdG9oZXgodGhpcy5zKSksdGhpcy5oVn0sdm9pZCAwIT09dCYmKHZvaWQgMCE9PXQuc3RyP3RoaXMuc2V0U3RyaW5nKHQuc3RyKToic3RyaW5nIj09dHlwZW9mIHQmJnQubWF0Y2goL15bMC05XXsxMn1aJC8pP3RoaXMuc2V0U3RyaW5nKHQpOnZvaWQgMCE9PXQuaGV4P3RoaXMuc2V0U3RyaW5nSGV4KHQuaGV4KTp2b2lkIDAhPT10LmRhdGUmJnRoaXMuc2V0QnlEYXRlKHQuZGF0ZSkpfSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVSVVRDVGltZSx0dC5hc24xLkRFUkFic3RyYWN0VGltZSksdHQuYXNuMS5ERVJHZW5lcmFsaXplZFRpbWU9ZnVuY3Rpb24odCl7dHQuYXNuMS5ERVJHZW5lcmFsaXplZFRpbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD0iMTgiLHRoaXMud2l0aE1pbGxpcz0hMSx0aGlzLnNldEJ5RGF0ZT1mdW5jdGlvbih0KXt0aGlzLmhUTFY9bnVsbCx0aGlzLmlzTW9kaWZpZWQ9ITAsdGhpcy5kYXRlPXQsdGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsImdlbiIsdGhpcy53aXRoTWlsbGlzKSx0aGlzLmhWPXN0b2hleCh0aGlzLnMpfSx0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5kYXRlJiZ2b2lkIDA9PT10aGlzLnMmJih0aGlzLmRhdGU9bmV3IERhdGUsdGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsImdlbiIsdGhpcy53aXRoTWlsbGlzKSx0aGlzLmhWPXN0b2hleCh0aGlzLnMpKSx0aGlzLmhWfSx2b2lkIDAhPT10JiYodm9pZCAwIT09dC5zdHI/dGhpcy5zZXRTdHJpbmcodC5zdHIpOiJzdHJpbmciPT10eXBlb2YgdCYmdC5tYXRjaCgvXlswLTldezE0fVokLyk/dGhpcy5zZXRTdHJpbmcodCk6dm9pZCAwIT09dC5oZXg/dGhpcy5zZXRTdHJpbmdIZXgodC5oZXgpOnZvaWQgMCE9PXQuZGF0ZSYmdGhpcy5zZXRCeURhdGUodC5kYXRlKSwhMD09PXQubWlsbGlzJiYodGhpcy53aXRoTWlsbGlzPSEwKSl9LFcubGFuZy5leHRlbmQodHQuYXNuMS5ERVJHZW5lcmFsaXplZFRpbWUsdHQuYXNuMS5ERVJBYnN0cmFjdFRpbWUpLHR0LmFzbjEuREVSU2VxdWVuY2U9ZnVuY3Rpb24odCl7dHQuYXNuMS5ERVJTZXF1ZW5jZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0KSx0aGlzLmhUPSIzMCIsdGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PSIiLGU9MDtlPHRoaXMuYXNuMUFycmF5Lmxlbmd0aDtlKyspdCs9dGhpcy5hc24xQXJyYXlbZV0uZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhWPXQsdGhpcy5oVn19LFcubGFuZy5leHRlbmQodHQuYXNuMS5ERVJTZXF1ZW5jZSx0dC5hc24xLkRFUkFic3RyYWN0U3RydWN0dXJlZCksdHQuYXNuMS5ERVJTZXQ9ZnVuY3Rpb24odCl7dHQuYXNuMS5ERVJTZXQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCksdGhpcy5oVD0iMzEiLHRoaXMuc29ydEZsYWc9ITAsdGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBBcnJheSxlPTA7ZTx0aGlzLmFzbjFBcnJheS5sZW5ndGg7ZSsrKXt2YXIgaT10aGlzLmFzbjFBcnJheVtlXTt0LnB1c2goaS5nZXRFbmNvZGVkSGV4KCkpfXJldHVybiAxPT10aGlzLnNvcnRGbGFnJiZ0LnNvcnQoKSx0aGlzLmhWPXQuam9pbigiIiksdGhpcy5oVn0sdm9pZCAwIT09dCYmdm9pZCAwIT09dC5zb3J0ZmxhZyYmMD09dC5zb3J0ZmxhZyYmKHRoaXMuc29ydEZsYWc9ITEpfSxXLmxhbmcuZXh0ZW5kKHR0LmFzbjEuREVSU2V0LHR0LmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkKSx0dC5hc24xLkRFUlRhZ2dlZE9iamVjdD1mdW5jdGlvbih0KXt0dC5hc24xLkRFUlRhZ2dlZE9iamVjdC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksdGhpcy5oVD0iYTAiLHRoaXMuaFY9IiIsdGhpcy5pc0V4cGxpY2l0PSEwLHRoaXMuYXNuMU9iamVjdD1udWxsLHRoaXMuc2V0QVNOMU9iamVjdD1mdW5jdGlvbih0LGUsaSl7dGhpcy5oVD1lLHRoaXMuaXNFeHBsaWNpdD10LHRoaXMuYXNuMU9iamVjdD1pLHRoaXMuaXNFeHBsaWNpdD8odGhpcy5oVj10aGlzLmFzbjFPYmplY3QuZ2V0RW5jb2RlZEhleCgpLHRoaXMuaFRMVj1udWxsLHRoaXMuaXNNb2RpZmllZD0hMCk6KHRoaXMuaFY9bnVsbCx0aGlzLmhUTFY9aS5nZXRFbmNvZGVkSGV4KCksdGhpcy5oVExWPXRoaXMuaFRMVi5yZXBsYWNlKC9eLi4vLGUpLHRoaXMuaXNNb2RpZmllZD0hMSl9LHRoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfSx2b2lkIDAhPT10JiYodm9pZCAwIT09dC50YWcmJih0aGlzLmhUPXQudGFnKSx2b2lkIDAhPT10LmV4cGxpY2l0JiYodGhpcy5pc0V4cGxpY2l0PXQuZXhwbGljaXQpLHZvaWQgMCE9PXQub2JqJiYodGhpcy5hc24xT2JqZWN0PXQub2JqLHRoaXMuc2V0QVNOMU9iamVjdCh0aGlzLmlzRXhwbGljaXQsdGhpcy5oVCx0aGlzLmFzbjFPYmplY3QpKSl9LFcubGFuZy5leHRlbmQodHQuYXNuMS5ERVJUYWdnZWRPYmplY3QsdHQuYXNuMS5BU04xT2JqZWN0KTt2YXIgZXQsaXQ9KGV0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuKGV0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiYodFtpXT1lW2ldKX0pKHQsZSl9LGZ1bmN0aW9uKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcoZSkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9dH1ldCh0LGUpLHQucHJvdG90eXBlPW51bGw9PT1lP09iamVjdC5jcmVhdGUoZSk6KGkucHJvdG90eXBlPWUucHJvdG90eXBlLG5ldyBpKX0pLHJ0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoaSl7dmFyIHI9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpJiYoInN0cmluZyI9PXR5cGVvZiBpP3IucGFyc2VLZXkoaSk6KGUuaGFzUHJpdmF0ZUtleVByb3BlcnR5KGkpfHxlLmhhc1B1YmxpY0tleVByb3BlcnR5KGkpKSYmci5wYXJzZVByb3BlcnRpZXNGcm9tKGkpKSxyfXJldHVybiBpdChlLHQpLGUucHJvdG90eXBlLnBhcnNlS2V5PWZ1bmN0aW9uKHQpe3RyeXt2YXIgZT0wLGk9MCxyPS9eXHMqKD86WzAtOUEtRmEtZl1bMC05QS1GYS1mXVxzKikrJC8udGVzdCh0KT9mdW5jdGlvbih0KXt2YXIgZTtpZih2b2lkIDA9PT1jKXt2YXIgaT0iMDEyMzQ1Njc4OUFCQ0RFRiIscj0iIFxmXG5cclx0IFx1MjAyOFx1MjAyOSI7Zm9yKGM9e30sZT0wO2U8MTY7KytlKWNbaS5jaGFyQXQoZSldPWU7Zm9yKGk9aS50b0xvd2VyQ2FzZSgpLGU9MTA7ZTwxNjsrK2UpY1tpLmNoYXJBdChlKV09ZTtmb3IoZT0wO2U8ci5sZW5ndGg7KytlKWNbci5jaGFyQXQoZSldPS0xfXZhciBuPVtdLHM9MCxvPTA7Zm9yKGU9MDtlPHQubGVuZ3RoOysrZSl7dmFyIGg9dC5jaGFyQXQoZSk7aWYoIj0iPT1oKWJyZWFrO2lmKC0xIT0oaD1jW2hdKSl7aWYodm9pZCAwPT09aCl0aHJvdyBuZXcgRXJyb3IoIklsbGVnYWwgY2hhcmFjdGVyIGF0IG9mZnNldCAiK2UpO3N8PWgsKytvPj0yPyhuW24ubGVuZ3RoXT1zLHM9MCxvPTApOnM8PD00fX1pZihvKXRocm93IG5ldyBFcnJvcigiSGV4IGVuY29kaW5nIGluY29tcGxldGU6IDQgYml0cyBtaXNzaW5nIik7cmV0dXJuIG59KHQpOmQudW5hcm1vcih0KSxuPXcuZGVjb2RlKHIpO2lmKDM9PT1uLnN1Yi5sZW5ndGgmJihuPW4uc3ViWzJdLnN1YlswXSksOT09PW4uc3ViLmxlbmd0aCl7ZT1uLnN1YlsxXS5nZXRIZXhTdHJpbmdWYWx1ZSgpLHRoaXMubj1QKGUsMTYpLGk9bi5zdWJbMl0uZ2V0SGV4U3RyaW5nVmFsdWUoKSx0aGlzLmU9cGFyc2VJbnQoaSwxNik7dmFyIHM9bi5zdWJbM10uZ2V0SGV4U3RyaW5nVmFsdWUoKTt0aGlzLmQ9UChzLDE2KTt2YXIgbz1uLnN1Yls0XS5nZXRIZXhTdHJpbmdWYWx1ZSgpO3RoaXMucD1QKG8sMTYpO3ZhciBoPW4uc3ViWzVdLmdldEhleFN0cmluZ1ZhbHVlKCk7dGhpcy5xPVAoaCwxNik7dmFyIGE9bi5zdWJbNl0uZ2V0SGV4U3RyaW5nVmFsdWUoKTt0aGlzLmRtcDE9UChhLDE2KTt2YXIgdT1uLnN1Yls3XS5nZXRIZXhTdHJpbmdWYWx1ZSgpO3RoaXMuZG1xMT1QKHUsMTYpO3ZhciBmPW4uc3ViWzhdLmdldEhleFN0cmluZ1ZhbHVlKCk7dGhpcy5jb2VmZj1QKGYsMTYpfWVsc2V7aWYoMiE9PW4uc3ViLmxlbmd0aClyZXR1cm4hMTt2YXIgbD1uLnN1YlsxXS5zdWJbMF07ZT1sLnN1YlswXS5nZXRIZXhTdHJpbmdWYWx1ZSgpLHRoaXMubj1QKGUsMTYpLGk9bC5zdWJbMV0uZ2V0SGV4U3RyaW5nVmFsdWUoKSx0aGlzLmU9cGFyc2VJbnQoaSwxNil9cmV0dXJuITB9Y2F0Y2godCl7cmV0dXJuITF9fSxlLnByb3RvdHlwZS5nZXRQcml2YXRlQmFzZUtleT1mdW5jdGlvbigpe3ZhciB0PXthcnJheTpbbmV3IHR0LmFzbjEuREVSSW50ZWdlcih7aW50OjB9KSxuZXcgdHQuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6dGhpcy5ufSksbmV3IHR0LmFzbjEuREVSSW50ZWdlcih7aW50OnRoaXMuZX0pLG5ldyB0dC5hc24xLkRFUkludGVnZXIoe2JpZ2ludDp0aGlzLmR9KSxuZXcgdHQuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6dGhpcy5wfSksbmV3IHR0LmFzbjEuREVSSW50ZWdlcih7YmlnaW50OnRoaXMucX0pLG5ldyB0dC5hc24xLkRFUkludGVnZXIoe2JpZ2ludDp0aGlzLmRtcDF9KSxuZXcgdHQuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6dGhpcy5kbXExfSksbmV3IHR0LmFzbjEuREVSSW50ZWdlcih7YmlnaW50OnRoaXMuY29lZmZ9KV19O3JldHVybiBuZXcgdHQuYXNuMS5ERVJTZXF1ZW5jZSh0KS5nZXRFbmNvZGVkSGV4KCl9LGUucHJvdG90eXBlLmdldFByaXZhdGVCYXNlS2V5QjY0PWZ1bmN0aW9uKCl7cmV0dXJuIGwodGhpcy5nZXRQcml2YXRlQmFzZUtleSgpKX0sZS5wcm90b3R5cGUuZ2V0UHVibGljQmFzZUtleT1mdW5jdGlvbigpe3ZhciB0PW5ldyB0dC5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbbmV3IHR0LmFzbjEuREVST2JqZWN0SWRlbnRpZmllcih7b2lkOiIxLjIuODQwLjExMzU0OS4xLjEuMSJ9KSxuZXcgdHQuYXNuMS5ERVJOdWxsXX0pLGU9bmV3IHR0LmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OltuZXcgdHQuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6dGhpcy5ufSksbmV3IHR0LmFzbjEuREVSSW50ZWdlcih7aW50OnRoaXMuZX0pXX0pLGk9bmV3IHR0LmFzbjEuREVSQml0U3RyaW5nKHtoZXg6IjAwIitlLmdldEVuY29kZWRIZXgoKX0pO3JldHVybiBuZXcgdHQuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3QsaV19KS5nZXRFbmNvZGVkSGV4KCl9LGUucHJvdG90eXBlLmdldFB1YmxpY0Jhc2VLZXlCNjQ9ZnVuY3Rpb24oKXtyZXR1cm4gbCh0aGlzLmdldFB1YmxpY0Jhc2VLZXkoKSl9LGUud29yZHdyYXA9ZnVuY3Rpb24odCxlKXtpZighdClyZXR1cm4gdDt2YXIgaT0iKC57MSwiKyhlPWV8fDY0KSsifSkoICt8JFxuPyl8KC57MSwiK2UrIn0pIjtyZXR1cm4gdC5tYXRjaChSZWdFeHAoaSwiZyIpKS5qb2luKCJcbiIpfSxlLnByb3RvdHlwZS5nZXRQcml2YXRlS2V5PWZ1bmN0aW9uKCl7dmFyIHQ9Ii0tLS0tQkVHSU4gUlNBIFBSSVZBVEUgS0VZLS0tLS1cbiI7cmV0dXJuKHQrPWUud29yZHdyYXAodGhpcy5nZXRQcml2YXRlQmFzZUtleUI2NCgpKSsiXG4iKSsiLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0ifSxlLnByb3RvdHlwZS5nZXRQdWJsaWNLZXk9ZnVuY3Rpb24oKXt2YXIgdD0iLS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS1cbiI7cmV0dXJuKHQrPWUud29yZHdyYXAodGhpcy5nZXRQdWJsaWNCYXNlS2V5QjY0KCkpKyJcbiIpKyItLS0tLUVORCBQVUJMSUMgS0VZLS0tLS0ifSxlLmhhc1B1YmxpY0tleVByb3BlcnR5PWZ1bmN0aW9uKHQpe3JldHVybih0PXR8fHt9KS5oYXNPd25Qcm9wZXJ0eSgibiIpJiZ0Lmhhc093blByb3BlcnR5KCJlIil9LGUuaGFzUHJpdmF0ZUtleVByb3BlcnR5PWZ1bmN0aW9uKHQpe3JldHVybih0PXR8fHt9KS5oYXNPd25Qcm9wZXJ0eSgibiIpJiZ0Lmhhc093blByb3BlcnR5KCJlIikmJnQuaGFzT3duUHJvcGVydHkoImQiKSYmdC5oYXNPd25Qcm9wZXJ0eSgicCIpJiZ0Lmhhc093blByb3BlcnR5KCJxIikmJnQuaGFzT3duUHJvcGVydHkoImRtcDEiKSYmdC5oYXNPd25Qcm9wZXJ0eSgiZG1xMSIpJiZ0Lmhhc093blByb3BlcnR5KCJjb2VmZiIpfSxlLnByb3RvdHlwZS5wYXJzZVByb3BlcnRpZXNGcm9tPWZ1bmN0aW9uKHQpe3RoaXMubj10Lm4sdGhpcy5lPXQuZSx0Lmhhc093blByb3BlcnR5KCJkIikmJih0aGlzLmQ9dC5kLHRoaXMucD10LnAsdGhpcy5xPXQucSx0aGlzLmRtcDE9dC5kbXAxLHRoaXMuZG1xMT10LmRtcTEsdGhpcy5jb2VmZj10LmNvZWZmKX0sZX0oWCk7Y29uc3QgbnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZvaWQgMD09PXQmJih0PXt9KSx0PXR8fHt9LHRoaXMuZGVmYXVsdF9rZXlfc2l6ZT10LmRlZmF1bHRfa2V5X3NpemU/cGFyc2VJbnQodC5kZWZhdWx0X2tleV9zaXplLDEwKToxMDI0LHRoaXMuZGVmYXVsdF9wdWJsaWNfZXhwb25lbnQ9dC5kZWZhdWx0X3B1YmxpY19leHBvbmVudHx8IjAxMDAwMSIsdGhpcy5sb2c9dC5sb2d8fCExLHRoaXMua2V5PW51bGx9cmV0dXJuIHQucHJvdG90eXBlLnNldEtleT1mdW5jdGlvbih0KXt0aGlzLmxvZyYmdGhpcy5rZXkmJmNvbnNvbGUud2FybigiQSBrZXkgd2FzIGFscmVhZHkgc2V0LCBvdmVycmlkaW5nIGV4aXN0aW5nLiIpLHRoaXMua2V5PW5ldyBydCh0KX0sdC5wcm90b3R5cGUuc2V0UHJpdmF0ZUtleT1mdW5jdGlvbih0KXt0aGlzLnNldEtleSh0KX0sdC5wcm90b3R5cGUuc2V0UHVibGljS2V5PWZ1bmN0aW9uKHQpe3RoaXMuc2V0S2V5KHQpfSx0LnByb3RvdHlwZS5kZWNyeXB0PWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gdGhpcy5nZXRLZXkoKS5kZWNyeXB0KHAodCkpfWNhdGNoKHQpe3JldHVybiExfX0sdC5wcm90b3R5cGUuZW5jcnlwdD1mdW5jdGlvbih0KXt0cnl7cmV0dXJuIGwodGhpcy5nZXRLZXkoKS5lbmNyeXB0KHQpKX1jYXRjaCh0KXtyZXR1cm4hMX19LHQucHJvdG90eXBlLnNpZ249ZnVuY3Rpb24odCxlLGkpe3RyeXtyZXR1cm4gbCh0aGlzLmdldEtleSgpLnNpZ24odCxlLGkpKX1jYXRjaCh0KXtyZXR1cm4hMX19LHQucHJvdG90eXBlLnZlcmlmeT1mdW5jdGlvbih0LGUsaSl7dHJ5e3JldHVybiB0aGlzLmdldEtleSgpLnZlcmlmeSh0LHAoZSksaSl9Y2F0Y2godCl7cmV0dXJuITF9fSx0LnByb3RvdHlwZS5nZXRLZXk9ZnVuY3Rpb24odCl7aWYoIXRoaXMua2V5KXtpZih0aGlzLmtleT1uZXcgcnQsdCYmIltvYmplY3QgRnVuY3Rpb25dIj09PXt9LnRvU3RyaW5nLmNhbGwodCkpcmV0dXJuIHZvaWQgdGhpcy5rZXkuZ2VuZXJhdGVBc3luYyh0aGlzLmRlZmF1bHRfa2V5X3NpemUsdGhpcy5kZWZhdWx0X3B1YmxpY19leHBvbmVudCx0KTt0aGlzLmtleS5nZW5lcmF0ZSh0aGlzLmRlZmF1bHRfa2V5X3NpemUsdGhpcy5kZWZhdWx0X3B1YmxpY19leHBvbmVudCl9cmV0dXJuIHRoaXMua2V5fSx0LnByb3RvdHlwZS5nZXRQcml2YXRlS2V5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0S2V5KCkuZ2V0UHJpdmF0ZUtleSgpfSx0LnByb3RvdHlwZS5nZXRQcml2YXRlS2V5QjY0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0S2V5KCkuZ2V0UHJpdmF0ZUJhc2VLZXlCNjQoKX0sdC5wcm90b3R5cGUuZ2V0UHVibGljS2V5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0S2V5KCkuZ2V0UHVibGljS2V5KCl9LHQucHJvdG90eXBlLmdldFB1YmxpY0tleUI2ND1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEtleSgpLmdldFB1YmxpY0Jhc2VLZXlCNjQoKX0sdC52ZXJzaW9uPSIzLjIuMSIsdH0oKX1dLGU9e2Q6KHQsaSk9Pntmb3IodmFyIHIgaW4gaSllLm8oaSxyKSYmIWUubyh0LHIpJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHtlbnVtZXJhYmxlOiEwLGdldDppW3JdfSl9LG86KHQsZSk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfSxpPXt9O3JldHVybiB0WzFdKDAsaSxlKSxpLmRlZmF1bHR9KSgpfSkpOwovLyBpbmplY3QgcmVwbCBzZXJ2aWNlIHdpdGggdXRpbGl0aWVzIGF0dGFjaGVkIGludG8gYW55IHBhZ2UKCi8vIEknbSBub3QgZ29pbmcgdG8gdHJ5IGFuZCBydW4gYWxsIG9mIGFjZSBpbnNpZGUgbXkgY3VzdG9tIGV2YWx1YXRvcgovLyBSdW50aW1lLmV2YWx1YXRlIGlzIGEgcmVhbCBvbmUsIHNvIHRoYXQncyBhIGJpZyBzaW5rCi8vIFRoZW4gb2J2aW91c2x5IGFueXRoaW5nIEkgY2FuIGJ1aWxkIG9yIGFzc2VtYmxlIGFzIHBsYWluCi8vIHRleHQgZm9yIGRlcGxveW1lbnQgd2lsbCBhbHNvIGhhdmUgZXZhbHVhdGUuCi8vIFRoZXNlIHRoaW5ncyBjYW4gYmUgZGVwZW5kZW5jeSBpbmplY3RlZCB0byBydW4gaW4gYSB3b3JrZXIKLy8gb3IgYmFja2VuZC9mcm9udGVuZCBwbHVnaW4gb3IgZXZlbiBhIGhhY2sgdG8gY29tbXVuaWNhdGUgCi8vIHdpdGggYnJvd3NlciBjYWNoaW5nIGZvciBvZmZsaW5lIGNvbnRlbnQuCi8vIExvdHMgb2Ygd2F5cyB0byBydW4gYSBwcm9jZXNzLCBhYnN0cmFjdGlvbiBtYWtlcyBpdCBtb3JlIHJlbGlhYmxlPwoKCmZ1bmN0aW9uIGRvQ29uc29sZSguLi5hcmdzKSB7Cgljb25zb2xlLmxvZyhhcmdzKQoJc2VuZE1lc3NhZ2UoewogICAgY29uc29sZTogYXJncy5tYXAoYSA9PiBkb1Byb3BlcnR5KGEpKS5qb2luICgnXG4nKSAKICB9KQp9CgpmdW5jdGlvbiBvbkNvbnNvbGUobWVzc2FnZSkgewogIGNvbnNvbGUubG9nKG1lc3NhZ2UuY29uc29sZSkKICBzaG93Q29uc29sZShtZXNzYWdlLmNvbnNvbGUsIG1lc3NhZ2UubGluZSkgLy8gZXhlcmNpc2luZyBsZWFzdCBwcml2aWxhZ2UKfQoKZnVuY3Rpb24gZG9Qcm9wZXJ0eSgpIHsKCn0KCmxldCBvbGRSdW5UaW1lcgoKLy8gc3RhcnRzIGEgdGhyZWFkCmZ1bmN0aW9uIGRvUnVuKHJ1bkNvbnRleHQpIHsKICBsZXQgZW52ID0gY3JlYXRlRW52aXJvbm1lbnQocnVuQ29udGV4dCkKICBsZXQgY3R4ID0gY3JlYXRlUnVuQ29udGV4dChlbnYpCiAgbGV0IEFTVAogIHRyeSB7CgkJQVNUID0gYWNvcm4ucGFyc2UoCgkJCScoZnVuY3Rpb24gKCkge1xuJyArIHJ1bkNvbnRleHQuc2NyaXB0ICsgJ1xufSkoKVxuJwoJCQksIHtlY21hVmVyc2lvbjogMjAyMCwgbG9jYXRpb25zOiB0cnVlLCBvbkNvbW1lbnQ6IFtdfSkKCX0gY2F0Y2ggKGUpIHsKCQkvLyByZXR1cm4gcGFyc2VyIGVycm9ycyByaWdodCBhd2F5CiAgICBkb0Vycm9yKGUpCgkJcnVuQ29udGV4dC5lbmRlZCA9IHRydWUKCQlyZXR1cm4KCX0KICBjdHguYm9keSA9IEFTVC5ib2R5WzBdLmV4cHJlc3Npb24uY2FsbGVlLmJvZHkKICBjdHguYnViYmxlVGltZSA9IERhdGUubm93KCkKICBjb25zb2xlLmxvZygnc2NyaXB0OicsIHJ1bkNvbnRleHQuc2NyaXB0KQogIGxldCByZXN1bHQKICB0cnkgewoJCWlmKCFvbGRSdW5UaW1lcikgewoJCQlvbGRSdW5UaW1lciA9IHNldEludGVydmFsKHBydW5lT2xkUnVucywgMTAwMCkKCQl9CgkJY3R4LmJ1YmJsZVN0YWNrW2N0eC5idWJibGVTdGFjay5sZW5ndGgtMV1bMV0gPSAnPGV2YWw+JwogICAgcmVzdWx0ID0gcnVuU3RhdGVtZW50KDAsIFtjdHguYm9keV0sIGN0eCkKICB9IGNhdGNoIChlKSB7CiAgICBkb0Vycm9yKGUpCgkJcnVuQ29udGV4dC5lbmRlZCA9IHRydWUKICAgIHJldHVybgogIH0KCXJldHVybiByZXN1bHQKfQoKZnVuY3Rpb24gb25SdW4oKSB7Cgp9CgpmdW5jdGlvbiBjcmVhdGVFbnZpcm9ubWVudChydW5Db250ZXh0KSB7CiAgbGV0IGRlY2xhcmF0aW9ucyA9IHsKICAgIC8vIGluY2x1ZGUgb3VyIG93biBBUEkgc28gd2UgY2FuIHVzZSBpdCBmcm9tIGNvZGUgZWxzZXdoZXJlCiAgICBydW5Cb2R5OiBydW5Cb2R5LAogICAgZG9SdW46IGRvUnVuLAogICAgZG9Db25zb2xlOiBkb0NvbnNvbGUsCiAgICBkb1Byb3BlcnR5OiBkb1Byb3BlcnR5LAoJCWNyZWF0ZUVudmlyb25tZW50OiBjcmVhdGVFbnZpcm9ubWVudCwKCQljcmVhdGVSdW5Db250ZXh0OiBjcmVhdGVSdW5Db250ZXh0LAoJCS8vIE9NRywgaWYgSSBjb3B5IHRoaXMgY29udGV4dCB0aGVyZXMgYWxsIGtpbmRzIG9mIHdlaXJkIHRoaW5ncyBJIGNhbiBkbyB0byB0aGUgcHJvY2VzcwogIH0KCWlmKHR5cGVvZiBydW5Db250ZXh0LmxvY2FsRGVjbGFyYXRpb25zID09ICd1bmRlZmluZWQnKSB7CgkJcnVuQ29udGV4dC5sb2NhbERlY2xhcmF0aW9ucyA9IFtdCgl9CglpZih0eXBlb2YgcnVuQ29udGV4dC5sb2NhbERlY2xhcmF0aW9ucyA9PSAndW5kZWZpbmVkJykgewoJCWRlYnVnZ2VyCgl9CglydW5Db250ZXh0LmxvY2FsRGVjbGFyYXRpb25zLnB1c2goZGVjbGFyYXRpb25zKQoJcmV0dXJuIHJ1bkNvbnRleHQKfQoKCmZ1bmN0aW9uIGNyZWF0ZVJ1bkNvbnRleHQoZW52KSB7CglPYmplY3QuYXNzaWduKGVudiwgewoJCXRpbWVyczoge30sCgkJLy9idWJibGVTdGFjazogW1snaW5saW5lIGZ1bmMgMCcsICc8ZXZhbD4nLCAwXV0sCgkJYnViYmxlTGluZTogLTEsCgkJYnViYmxlQ29sdW1uOiAwLAoJCWxvY2FsVmFyaWFibGVzOiBnZXRMb2NhbHMoZW52KSwKCQlhc3luY1J1bm5lcnM6IDAsCgkJYXN5bmM6IGZhbHNlLAoJCWVuZGVkOiBmYWxzZSwKCQlwYXVzZWQ6IGZhbHNlLAoJCWNvbnRpbnVlOiBmYWxzZSwgIC8vIFRPRE86IGltcGxlbWVudCBjb250aW51YXRpb25zIC8gbG9uZyBqdW1wcyBmb3IgZGVidWdnZXIKCQkvLyBJIHRoaW5rIGJ5IHB1c2hpbmcgcnVuU3RhdGVtZW50KEFTVFtpXSkgPC0gaSBvbnRvIGEgc3RhY2sgYW5kIHJlc3RvcmluZyBmb3IoKT8KCQkvLyBUT0RPOiBjb250aW51YXRpb25zLCBjaGVjayBmb3IgYW5vbnltb3VzIGZ1bmN0aW9ucywgdmFyaWFibGUvZnVuY3Rpb24gZGVjbGFyYXRpb25zCgkJLy8gVE9ETzogYWxsb3cgbW92aW5nIGN1cnNvciB0byBhbnkgc3ltYm9sIHVzaW5nIGFkZHJlc3Mgb2Ygc3ltYm9sIGluIEFTVAoJCS8vIE9SOiBXQUlUIElOIFNUSUxMUlVOTklORygpIEZPUiBVTlBBVVNFCgl9KQoJcmV0dXJuIGVudgp9CgoKZnVuY3Rpb24gZG9FcnJvcihlcnIpIHsKCXRyeSB7CgkJc2VuZE1lc3NhZ2UoeyAKCQkJZXJyb3I6IGVyci5tZXNzYWdlICsgJycsCgkJCS8vIGFsd2F5cyBzdWJ0cmFjdCAxIGJlY2F1c2UgY29kZSBpcyB3cmFwcGluZyBpbiBhIDEtbGluZSBmdW5jdGlvbiBhYm92ZQoJCQlsaW5lOiBjdXJyZW50Q29udGV4dC5idWJibGVMaW5lIC0gMSwKCQkJZmlsZTogY3VycmVudENvbnRleHQuYnViYmxlU3RhY2tbY3VycmVudENvbnRleHQuYnViYmxlU3RhY2subGVuZ3RoLTFdWzFdLAoJCQlzdGFjazogY3VycmVudENvbnRleHQuYnViYmxlU3RhY2ssCgkJCS8vIExPT0sgQVQgVEhJUyBGQU5DWSBTSElUIEdPT0dMRSBDSFJPTUUgREVCVUdHRVIhCgkJCS8vICAgTUFLRSBBIExJU1QgT0YgQVNTSUdOTUVOVFMgTkVBUkJZIEFORCBTRU5EIFRIRUlSIENVUlJFTlQgVkFMVUUgVE8gVEhFIEZST05URU5ECgkJCS8vICAgVE8gU0FWRSBUSEUgREVWRUxPUEVSIFRJTUUgUkVSVU5OSU5HIFRIRUlSIFdIT0xFIFBST0dSQU0gSlVTVCBUTyBTRVQgVVAgQSBCUkVBSwoJCQkvLyAgIFBPSU5ULCBKVVNUIFRPIENIRUNLIFRIRSBWQUxVRSBPRiBBIExPT1NFTFkgVFlQRUQgVkFSSUFCTEUuIFNFRSBUSEFUPyBMT09TRQoJCQkvLyAgIFRZUElORyBXT1JLUyBKVVNUIEZJTkUgSUYgWU9VUiBUT09MUyBTVVBQT1JUIFlPVSBJTlNURUFEIE9GIFdPUktJTkcgQUdBSU5TVCBZT1UKCQkJLy8gU0VFLCBJVCdTIEEgQ0FUQ0gyMiwgV0hZIFdPVUxEIEkgU1BJTiBNWSBXSEVFTFMgRklYSU5HIENIUk9NRSBERUJVR0dFUidTIFNPVVJDRSBDT0RFCgkJCS8vICAgV0hFTiBUSEUgRVhQRUNUQVRJT04gSVMgVEhBVCBJRiBJIERPTidUIExJS0UgSVQsIEkgQ0FOIEZJWCBJVCBNWVNFTEYuIFRIQVQnUyBXSFkKCQkJLy8gICBJVCBTVUNLUyBTVElMTC4gVEhFIFdIT0xFICJPUEVOIFNPVVJDRSBET0VTTidUIE9XRSBZT1UgQU5ZVEhJTkciLCBJUyBBIFNFTEYgCgkJCS8vICAgREVGRUFUSU5HIFBSSU5DSU5QQUwsIExJS0UgSUYgQUxMIFRIRSBBTUVSSUNBTiBGQVJNRVJTIERFQ0lERUQgVE8gTEVUIFBFT1BMRSBTVEFSVkUKCQkJLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChIVU5HUlk/IEZJWCBUSEUgVFJBQ1RPUiBZT1VSU0VMRikKCQkJLy8gICBUSEVZIERPTidUIE9XRSBZT1UgQU5ZVEhJTkcsIE5PVCBFVkVOIExJRkUgU1VQUE9SVC4gRlVDSyBPRkYgRk9TUywgRk9TUyBPV0VTIE1FCgkJCS8vICAgRVZFUllUSElORyBCRUNBVVNFIEknTEwgQkUgVEhFIE9ORSBTVFVDSyBDTEVBTklORyBUSElTIFNISVQgQ09ERSBVUC4KCQkJLy8gICBURUNITklDQUwgREVCVCBBUFBMSUVTIFRPIFBVQkxJU0hJTkcgSU5DT1JSRUNUIENPREUgQUxTTy4gQ09ERSBJUyBMSUtFIExJVFRFUi4KCQl9KQoJfSBjYXRjaCAoZSkgewoJCWlmKCFlLm1lc3NhZ2UuaW5jbHVkZXMoJ2NvbnRleHQgaW52YWxpZGF0ZWQnKSkgewoJCQl0aHJvdyBlCgkJfQoJfQp9CgoKZnVuY3Rpb24gb25FcnJvcihlcnJvcikgewogIC8vIFRPRE86IHNvbWUgZ2VuZXJpYyByZXBvcnRpbmc/CiAgY29uc29sZS5sb2coZXJyb3IpCiAgc2hvd0Vycm9yKGVycm9yKQp9CgoKLy8gYWNjZXNzIGluZm8gZnJvbSBhbm90aGVyIHJlbW90ZSwgb3IgYW5vdGhlciBjb250ZXh0Ci8vICAgdXNlZCB0byBsb29rdXAgbGlicmFyeSBmdW5jdGlvbnMsIGluamVjdCBzY3JpcHRzIAovLyAgIGludG8gb3RoZXIgcGFnZXMKYXN5bmMgZnVuY3Rpb24gZG9BY2Nlc3NvcihyZXNwb25zZSkgeyAvLyBzaG91bGRuJ3QgbmVlZCBzZW5kZXJJZCB3aXRoIERJCgkKCWlmICghcmVzcG9uc2UgfHwgdHlwZW9mIHJlc3BvbnNlLmZhaWwgIT0gJ3VuZGVmaW5lZCcpIHsKCQljb25zb2xlLmxvZyhyZXNwb25zZSkKCQl0aHJvdyBuZXcgRXJyb3IoJ01lbWJlciBhY2Nlc3MgZXJyb3I6ICcsIHJlc3BvbnNlKQoJfSBlbHNlIAoKCWlmKHR5cGVvZiByZXNwb25zZS5vYmplY3QgIT0gJ3VuZGVmaW5lZCcpIHsKCQlsZXQgbWVtYmVyTmFtZSA9IHJlc3BvbnNlLm9iamVjdC5uYW1lICsgJy4nICsgcmVzcG9uc2UucHJvcGVydHkubmFtZQoJCWxldCBtZW1iZXJBY2Nlc3MgPSBhd2FpdCBzZW5kTWVzc2FnZSh7CgkJCWFjY2Vzc29yOiBtZW1iZXJOYW1lCgkJfSkKCQlyZXR1cm4gZG9BY2Nlc3NvcihtZW1iZXJBY2Nlc3MpCgkJLy8gVE9ETzogcmV0dXJuIGRvQWNjZXNzb3IobWVtYmVyQWNjZXNzKSA/IGNvbnZlcnQgc3RyaW5nIGZ1bmMgdG8gUlBDCgl9IGVsc2UgCgoJaWYodHlwZW9mIHJlc3BvbnNlLmxpYnJhcnkgIT0gJ3VuZGVmaW5lZCcpIHsKCQl0cnkgewoJCQlsZXQgQVNUID0gYWNvcm4ucGFyc2UoCgkJCQknKGZ1bmN0aW9uICgpIHtcbicgKyByZXNwb25zZS5saWJyYXJ5ICsgJ1xucmV0dXJuICcgKyByZXNwb25zZS5uYW1lICsgJztcbn0pKClcbicKCQkJCSwge2VjbWFWZXJzaW9uOiAyMDIwLCBsb2NhdGlvbnM6IHRydWUsIG9uQ29tbWVudDogW119KQoJCQljdXJyZW50Q29udGV4dC5zY3JpcHQgPSByZXNwb25zZS5saWJyYXJ5CgkJCWN1cnJlbnRDb250ZXh0LmJ1YmJsZUZpbGUgPSByZXNwb25zZS5maWxlCgkJCWN1cnJlbnRDb250ZXh0LmJ1YmJsZVN0YWNrLnB1c2goWydpbmxpbmUgZnVuYyAwJywgcmVzcG9uc2UuZmlsZSB8fCAnPGV2YWw+JywgMF0pCgkJCWF3YWl0IHJ1blN0YXRlbWVudCgwLCAKCQkJCQlbQVNULmJvZHlbMF0uZXhwcmVzc2lvbi5jYWxsZWUuYm9keV0sIGN1cnJlbnRDb250ZXh0KQoJCQkJCWN1cnJlbnRDb250ZXh0LnJldHVybmVkID0gZmFsc2UKCQkJZGVsZXRlIGN1cnJlbnRDb250ZXh0LmJ1YmJsZVJldHVybgoJCQlsZXQgcmVzdWx0ID0gYXdhaXQgcnVuUHJpbWl0aXZlKHsKCQkJCXR5cGU6ICdJZGVudGlmaWVyJywKCQkJCW5hbWU6IHJlc3BvbnNlLm5hbWUsCgkJCX0sIGN1cnJlbnRDb250ZXh0KQoJCQljdXJyZW50Q29udGV4dC5yZXR1cm5lZCA9IGZhbHNlCgkJCXJldHVybiByZXN1bHQKCQl9IGNhdGNoICh1cCkgewoJCQljb25zb2xlLmxvZyh1cCkKCQkJdGhyb3cgdXAKCQl9Cgl9IGVsc2UKCglpZih0eXBlb2YgcmVzcG9uc2UuZnVuY3Rpb24gIT0gJ3VuZGVmaW5lZCcpIHsKCQlpZihyZXNwb25zZS52YWx1ZSkgewoJCQlyZXR1cm4gcmVzcG9uc2UudmFsdWUKCQl9IGVsc2UgewoJCQlyZXNwb25zZS52YWx1ZSA9IChhc3luYyBmdW5jdGlvbiAocmVxdWVzdCwgLi4ucGFyYW1zKSB7CgkJCQkvLyBUT0RPOiBhZGQgcGFyYW1lcnRlcnMKCQkJCWxldCByZXN1bHQgPSBhd2FpdCBzZW5kTWVzc2FnZSh7CgkJCQkJc2NyaXB0OiAnXG5yZXR1cm4gJyArIHJlcXVlc3QubmFtZSArICcoKTtcbicKCQkJCX0pCgkJCQlyZXR1cm4gcmVzdWx0CgkJCX0pLmJpbmQodGhpcywgcmVzcG9uc2UpCgkJCXJldHVybiByZXNwb25zZQoJCX0KCX0gZWxzZQoKCS8vIElOVEVSRVNUSU5HLCBSRUFMSVpJTkcgVEhJUyBJUyBUSEUgT05MWSBBQlNUUkFDVElPTiBSRVBMIENBTgoJLy8gICBETyBCWSBJVFNFTEYsIFdJTkRPVy5MT0NBVElPTiBMT09LVVBTIEFSRSBDT05URVhUIERFUEVOREVOVAoJaWYodHlwZW9mIHJlc3BvbnNlLmFjY2Vzc29yICE9ICd1bmRlZmluZWQnCgkJJiYgcmVxdWVzdC5hY2Nlc3Nvci5zdGFydHNXaXRoKCdleHBvcnRzLicpKSB7CgkJcmV0dXJuIGF3YWl0IGRvTGlicmFyeUxvb2t1cChyZXF1ZXN0LmFjY2Vzc29yLnNwbGl0KCcuJylbMV0pCgl9IGVsc2UKCgoJaWYodHlwZW9mIHJlc3BvbnNlLmpzb24gIT0gJ3VuZGVmaW5lZCcpIHsKCQlyZXR1cm4gSlNPTi5wYXJzZShyZXNwb25zZS5qc29uKSAvLyB3aW5kb3cubG9jYXRpb24sIG5vdCB2b2xhdGlsZSBvYmplY3RzCgl9IGVsc2UKCglpZih0eXBlb2YgcmVzcG9uc2UuX2FjY2Vzc29yICE9ICd1bmRlZmluZWQnKSB7CgkJcmVzcG9uc2UuX2FjY2Vzc29yID0gYXN5bmMgZnVuY3Rpb24gKGksIGxlZnQsIHJpZ2h0LCBjdHgpIHsKCQkJbGV0IHByb3AgPSBjdHguYnViYmxlUHJvcGVydHkKCQkJY3R4LmJ1YmJsZVByb3BlcnR5ID0gJycKCQkJaWYobGVmdCAmJiBsZWZ0WzBdIAoJCQkJJiYgbGVmdFswXS50eXBlID09ICdBc3NpZ25tZW50RXhwcmVzc2lvbicpIHsKCQkJCXJldHVybiBhd2FpdCBhd2FpdCBzZW5kTWVzc2FnZSh7CgkJCQkJc2NyaXB0OiBwcm9wICsgJyA9IEpTT04ucGFyc2UoXCcnICsgSlNPTi5zdHJpbmdpZnkocmlnaHQpICsgJ1wnKTsnCgkJCQl9KQoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIGF3YWl0IGF3YWl0IHNlbmRNZXNzYWdlKHsKCQkJCQlzY3JpcHQ6IHByb3AKCQkJCX0pCgkJCX0KCQl9CgkJcmV0dXJuIHJlc3BvbnNlCgl9IGVsc2UKCWlmKHR5cGVvZiByZXNwb25zZS52YWx1ZSAhPSAndW5kZWZpbmVkJwoJCXx8IHR5cGVvZiByZXNwb25zZS50eXBlICE9ICd1bmRlZmluZWQnKSB7CgkJcmV0dXJuIHJlc3BvbnNlLnZhbHVlIC8vIHByaW1pdGl2ZSB0eXBlcwoJfSBlbHNlIHsKCQlkZWJ1Z2dlcgoJCXRocm93IG5ldyBFcnJvcignVW5rbm93biBjb21tYW5kOiAnLCByZXNwb25zZSkKCX0KCgkvLyBUT0RPOiBlc3RhYmxpc2ggc3RhbmRhcmQganVweXRlci1tZXRhLWtlcm5lbCBjb25uZWN0aW9uCgkKCgkvLyBUT0RPOiBwcmUtY29uZmlndXJlIHByb3h5LW5ldHdvcmtpbmcgbGlrZSB0aGUgZW5naW5lIGRvZXMsIGZyb250ZW5kCgoKCS8vIFRPRE86IGFueSBzeXN0ZW0tbGV2ZWwvcHJvY2Vzcy1sZXZlbCBzZXJ2aWNlIG1vbml0b3JpbmcsIGNhbGwtb3V0CgoKCn0KCgoKZnVuY3Rpb24gZG9MaWJyYXJ5TG9va3VwKGZ1bmN0aW9uTmFtZSkgewoJbGV0IGxpYnJhcnlGaWxlcyA9IE9iamVjdC5rZXlzKEZTLnZpcnR1YWwpCglmb3IobGV0IGkgPSAwOyBpIDwgbGlicmFyeUZpbGVzLmxlbmd0aDsgaSsrKSB7CgkJaWYoIWxpYnJhcnlGaWxlc1tpXS5zdGFydHNXaXRoKCdsaWJyYXJ5LycpKSB7CgkJCWNvbnRpbnVlCgkJfQoJCWxldCBsaWJyYXJ5Q29kZSA9IEFycmF5LmZyb20oRlMudmlydHVhbFtsaWJyYXJ5RmlsZXNbaV1dLmNvbnRlbnRzKQoJCQkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpIH0pCgkJCS5qb2luKCcnKQoJCS8vIFRPRE86IG1ha2UgdGhlc2UgdG9rZW5zIGluc3RlYWQgb2YgZnVuY3Rpb24gZm9yIGNyb3NzIGxhbmd1YWdlIHN1cHBvcnQKCQlpZihsaWJyYXJ5Q29kZS5tYXRjaChuZXcgUmVnRXhwKAoJCQkJJ2Z1bmN0aW9uXFxzJyArIGZ1bmN0aW9uTmFtZSArICcuKj9cXHsnKSkpIHsKCQkJcmV0dXJuIHsKCQkJCS8vIFRPRE86IHJlc3BvbnNlSWQKCQkJCWxpYnJhcnk6IGxpYnJhcnlDb2RlLAoJCQkJbmFtZTogZnVuY3Rpb25OYW1lLAoJCQkJZmlsZTogbGlicmFyeUZpbGVzW2ldLAoJCQkJLy8gVE9ETzogYSBoYXNoIHZhbHVlPyBjb2RlIHNpZ25pbmc/CgkJCX0KCQl9IC8qIGVsc2UgewoJCQlsZXQgY3VycmVudFNlc3Npb24gPSB3aW5kb3cuYWNlLmdldFZhbHVlKCkKCQkJaWYgKGN1cnJlbnRTZXNzaW9uLmluY2x1ZGVzKCdmdW5jdGlvbiAnICsgZnVuY3Rpb25OYW1lKSkgewoJCQkJcmV0dXJuIHsKCQkJCQlsaWJyYXJ5OiBjdXJyZW50U2Vzc2lvbiwKCQkJCQluYW1lOiAnPGV2YWw+JywKCQkJCQkvLyBUT0RPOiBhIGhhc2ggdmFsdWU/CgkJCQl9CgkJCX0KCQl9ICovIC8vIENPREUgUkVWSUVXLCB0aGlzIGlzIHdoeSB3ZSBuZWVkIGRpZmZlcmVudCBjb250ZXh0cywgZm9yIExpdmUgZWRpdGluZwoJfQp9CgoKCmxldCB0aHJlYWRzID0ge30KCi8vIFNJTksKZnVuY3Rpb24gZ2V0VGhyZWFkcygpIHsKCXJldHVybiBKU09OLnN0cmluZ2lmeShPYmplY3Qua2V5cyh0aHJlYWRzKQoJCS5tYXAoZnVuY3Rpb24gKHJ1bklkKSB7CgkJCXJldHVybiBbCgkJCQlydW5JZFswXSArICcqKioqKionICsgcnVuSWRbcnVuSWQubGVuZ3RoLTFdLAoJCQkJdGhyZWFkc1tydW5JZF0uYnViYmxlVGltZQoJCQldCgkJfSkpCn0KCmNvbnN0IFRIUkVBRF9TQVZFX1RJTUUgPSAzICogMTAwMCAvLyAqIDYwCgpmdW5jdGlvbiBwcnVuZU9sZFJ1bnMoKSB7CgkvLyBpIGp1c3QgdGhvdWdodCBtYXliZSBhIHRyYW5zcGlsZXIgY29udmVydGVkIGNvZGUgdG8gdmFyIHdoaWNoIGNoYW5nZXMgc2NvcGUgYW5kCgkvLyAgIGNvdWxkIG1ha2UgaXQgdnVsbmVyYWJsZT8KCWxldCBydW5JZHMgPSBPYmplY3Qua2V5cyh0aHJlYWRzKQoJZm9yKGxldCBpID0gMDsgaSA8IHJ1bklkcy5sZW5ndGg7IGkrKykgewoJCWxldCBzZW5kZXJJZCA9IHRocmVhZHNbcnVuSWRzW2ldXS5zZW5kZXJJZAoJCWlmKHRocmVhZHNbcnVuSWRzW2ldXS5lbmRlZAoJCQkmJiBEYXRlLm5vdygpIC0gdGhyZWFkc1tydW5JZHNbaV1dLmJ1YmJsZVRpbWUgPiBUSFJFQURfU0FWRV9USU1FKSB7CgkJCWRlbGV0ZSB0aHJlYWRzW3J1bklkc1tpXV0KCQkJZG9TdGF0dXMoeyBzZW5kZXJJZDogc2VuZGVySWQgfSwgZmFsc2UpCgkJfQoJfQoJaWYoT2JqZWN0LmtleXModGhyZWFkcykubGVuZ3RoID09IDApIHsKCQljbGVhckludGVydmFsKG9sZFJ1blRpbWVyKQoJCW9sZFJ1blRpbWVyID0gbnVsbAoJfQp9CgoKYXN5bmMgZnVuY3Rpb24gZG9TdGF0dXMoZG9TbGVlcCkgewoJaWYodHlwZW9mIGN1cnJlbnRDb250ZXh0ID09ICd1bmRlZmluZWQnKSB7CgkJcmV0dXJuCgl9Cgl0cnkgewoJCWxldCBzdGF0dXNVcGRhdGUgPSB7IAoJCQkvLyBhbHdheXMgc3VidHJhY3QgMSBiZWNhdXNlIGNvZGUgaXMgd3JhcHBpbmcgaW4gYSAxLWxpbmUgZnVuY3Rpb24gYWJvdmUKCQkJbGluZTogY3VycmVudENvbnRleHQuYnViYmxlTGluZSAtIDEsCgkJCXN0YWNrOiBjdXJyZW50Q29udGV4dC5idWJibGVTdGFjaywKCQkJZmlsZTogY3VycmVudENvbnRleHQuYnViYmxlU3RhY2tbY3VycmVudENvbnRleHQuYnViYmxlU3RhY2subGVuZ3RoLTFdWzFdLAoJCX0KCQlpZihjdXJyZW50Q29udGV4dC5lbmRlZCkgewoJCQlzdGF0dXNVcGRhdGUuc3RvcHBlZCA9IGdldFRocmVhZHMoKQoJCX0gZWxzZSBpZiAoY3VycmVudENvbnRleHQucGF1c2VkKSB7CgkJCXN0YXR1c1VwZGF0ZS5wYXVzZWQgPSBnZXRUaHJlYWRzKCkKCQl9IGVsc2UgewoJCQlzdGF0dXNVcGRhdGUuc3RhdHVzID0gZ2V0VGhyZWFkcygpCgkJfQoJCXNlbmRNZXNzYWdlKHN0YXR1c1VwZGF0ZSk7CgkJLy9jb25zb2xlLmxvZyhjdXJyZW50Q29udGV4dC5idWJibGVMaW5lKQoJCS8vIGRvbid0IHNsZWVwIG9uIGxpYnJhcnkgZnVuY3Rpb25zCgkJaWYoZG9TbGVlcCAmJiBjdXJyZW50Q29udGV4dC5idWJibGVGaWxlID09ICc8ZXZhbD4nKSB7CgkJCWNvbnNvbGUubG9nKCdERUxBWUlORyEgJyArIGN1cnJlbnRDb250ZXh0LmJ1YmJsZUxpbmUpCgkJCWF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBERUZBVUxUX1NIT1JUX0RFTEFZKSkKCQl9Cgl9IGNhdGNoIChlKSB7CgkJaWYoZS5tZXNzYWdlLmluY2x1ZGVzKCdjb250ZXh0IGludmFsaWRhdGVkJykpIHsKCQkJLy8gaWdub3JlLCBoYXBwZW5zIG9uIHJlZnJlc2ggc29tZXRpbWVzCgkJfSBlbHNlIHsKCgkJfQoJfQp9CgpmdW5jdGlvbiBnZXRMb2NhbHMoY3R4KSB7CglsZXQgcmVzdWx0ID0gY3R4LmxvY2FsVmFyaWFibGVzCglpZih0eXBlb2YgY3R4LmxvY2FsRGVjbGFyYXRpb25zID09ICd1bmRlZmluZWQnKSB7CgkJcmV0dXJuIHt9Cgl9Cglmb3IobGV0IGkgPSAwOyBpIDwgY3R4LmxvY2FsRGVjbGFyYXRpb25zLmxlbmd0aDsgaSsrKSB7CgkJbGV0IGxvY2FsQ3R4ID0gY3R4LmxvY2FsRGVjbGFyYXRpb25zW2ldCgkJbGV0IGxvY2FsVmFyaWFibGVzID0gT2JqZWN0LmtleXMobG9jYWxDdHgpCgkJZm9yKGxldCBsID0gMDsgbCA8IGxvY2FsVmFyaWFibGVzLmxlbmd0aDsgbCsrKSB7CgkJCXJlc3VsdFtsb2NhbFZhcmlhYmxlc1tsXV0gPSB0eXBlb2YgbG9jYWxDdHhbbG9jYWxWYXJpYWJsZXNbbF1dCgkJfQoJCWxldCBsb2NhbFByb3BlcnRpZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhsb2NhbEN0eCkKCQlmb3IobGV0IGsgPSAwOyBrIDwgbG9jYWxQcm9wZXJ0aWVzLmxlbmd0aDsgaysrKSB7CgkJCXJlc3VsdFtsb2NhbFByb3BlcnRpZXNba11dID0gdHlwZW9mIGxvY2FsQ3R4W2xvY2FsUHJvcGVydGllc1trXV0KCQl9CgkJbGV0IHBhcmVudE9iamVjdCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihsb2NhbEN0eCkKCQl3aGlsZShwYXJlbnRPYmplY3QuY29uc3RydWN0b3IgIT09IE9iamVjdAoJCQkmJiBwYXJlbnRPYmplY3QuY29uc3RydWN0b3IgIT09IEFycmF5KSB7CgkJCWxldCBsb2NhbFByb3BlcnRpZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwYXJlbnRPYmplY3QpCgkJCWZvcihsZXQgaiA9IDA7IGogPCBsb2NhbFByb3BlcnRpZXMubGVuZ3RoOyBqKyspIHsKCQkJCXJlc3VsdFtsb2NhbFByb3BlcnRpZXNbal1dID0gdHlwZW9mIGxvY2FsQ3R4W2xvY2FsUHJvcGVydGllc1tqXV0KCQkJfQoJCQlwYXJlbnRPYmplY3QgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocGFyZW50T2JqZWN0KQoJCX0KCX0KCXJldHVybiByZXN1bHQKfQoKCmFzeW5jIGZ1bmN0aW9uIGRvQm9vdHN0cmFwKHNjcmlwdCwgZ2xvYmFsQ29udGV4dCkgewoJbGV0IGJvb3RzdHJhcFJ1bkNvbnRleHQgPSB7CgkJZW5kZWQ6IGZhbHNlLAoJCXN0b3BwZWQ6IGZhbHNlLAoJCXBhdXNlZDogZmFsc2UsCgkJcmV0dXJuZWQ6IGZhbHNlLAoJCXNlbmRlcklkOiAwLCAvLyBhbHdheXMgY29tZXMgZnJvbSBmcm9udGVuZD8KCQlidWJibGVTdGFjazogW1snaW5saW5lIGZ1bmMgMCcsICdsaWJyYXJ5L3JlcGwuanMnLCAwXV0sCgkJbG9jYWxWYXJpYWJsZXM6IHsKCQkJbW9kdWxlOiAnb2JqZWN0JywKCQkJT2JqZWN0OiAnZnVuY3Rpb24nLAoJCQlBcnJheTogJ2Z1bmN0aW9uJywKCQkJY29uc29sZTogJ29iamVjdCcsCgkJfSwKCQlsb2NhbERlY2xhcmF0aW9uczogW3sKCQkJbW9kdWxlOiBXRUJEUklWRVJfQVBJLAoJCQlPYmplY3Q6IE9iamVjdCwKCQkJQXJyYXk6IEFycmF5LAoJCQlQcm9taXNlOiBQcm9taXNlLAoJCQljb25zb2xlOiBjb25zb2xlLAoJCX1dLAoJfQoJYm9vdHN0cmFwUnVuQ29udGV4dC5sb2NhbERlY2xhcmF0aW9uc1swXS5jdXJyZW50Q29udGV4dCA9IGJvb3RzdHJhcFJ1bkNvbnRleHQKCWJvb3RzdHJhcFJ1bkNvbnRleHQubG9jYWxWYXJpYWJsZXMuY3VycmVudENvbnRleHQgPSAnb2JqZWN0JwoKCWlmKHR5cGVvZiBkb1J1biA9PSAndW5kZWZpbmVkJykgewoJCWxldCByZXBsTGlicmFyeSA9IEFycmF5LmZyb20oRlMudmlydHVhbFsnbGlicmFyeS9yZXBsLmpzJ10uY29udGVudHMpCgkJCS5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoYykgfSkuam9pbignJykKCQl0cnkgewoJCQlsZXQgQVNUID0gYWNvcm4ucGFyc2UoCgkJCQknKGZ1bmN0aW9uICgpIHtcbicgKyByZXBsTGlicmFyeSArICdcbnJldHVybiBkb1J1bjt9KSgpXG4nCgkJCQksIHtlY21hVmVyc2lvbjogMjAyMCwgbG9jYXRpb25zOiB0cnVlLCBvbkNvbW1lbnQ6IFtdfSkKCQkJYm9vdHN0cmFwUnVuQ29udGV4dC5zY3JpcHQgPSByZXBsTGlicmFyeQoJCQlhd2FpdCBydW5TdGF0ZW1lbnQoMCwgCgkJCQkJW0FTVC5ib2R5WzBdLmV4cHJlc3Npb24uY2FsbGVlLmJvZHldLCBib290c3RyYXBSdW5Db250ZXh0KQoJCQlib290c3RyYXBSdW5Db250ZXh0LnJldHVybmVkID0gZmFsc2UKCQkJZGVsZXRlIGJvb3RzdHJhcFJ1bkNvbnRleHQuYnViYmxlUmV0dXJuCgkJCU9iamVjdC5hc3NpZ24oZ2xvYmFsQ29udGV4dCwgYm9vdHN0cmFwUnVuQ29udGV4dC5sb2NhbERlY2xhcmF0aW9uc1swXSkKCQl9IGNhdGNoIChlKSB7CgkJCWNvbnNvbGUubG9nKGUpCgkJfQoJfQoKCWJvb3RzdHJhcFJ1bkNvbnRleHQubG9jYWxEZWNsYXJhdGlvbnMudW5zaGlmdChnbG9iYWxDb250ZXh0KQoJYm9vdHN0cmFwUnVuQ29udGV4dC5sb2NhbFZhcmlhYmxlcyA9IGF3YWl0IGdldExvY2Fscyhib290c3RyYXBSdW5Db250ZXh0KQoJYm9vdHN0cmFwUnVuQ29udGV4dC5yZXR1cm5lZCA9IGZhbHNlCglkZWxldGUgYm9vdHN0cmFwUnVuQ29udGV4dC5idWJibGVSZXR1cm4KCWlmKHR5cGVvZiBkb1J1biAhPSAndW5kZWZpbmVkJykgewoJCXRyeSB7CgkJCWJvb3RzdHJhcFJ1bkNvbnRleHQuc2NyaXB0ID0gc2NyaXB0CgkJCWJvb3RzdHJhcFJ1bkNvbnRleHQuYnViYmxlRmlsZSA9ICc8ZXZhbD4nCgkJCWJvb3RzdHJhcFJ1bkNvbnRleHQuYnViYmxlU3RhY2sucHVzaChbJ2lubGluZSBmdW5jIDAnLCAnPGV2YWw+JywgMF0pCgkJCWxldCByZXN1bHQgPSBhd2FpdCBkb1J1bihib290c3RyYXBSdW5Db250ZXh0KSAvLyBOT1cgSVQnUyBSRUNVUlNJVkUKCQkJYm9vdHN0cmFwUnVuQ29udGV4dC5yZXR1cm5lZCA9IGZhbHNlCgkJCWlmKGJvb3RzdHJhcFJ1bkNvbnRleHQuZW5kZWQpIHsKCQkJCXJldHVybiB7IC8vIGFoaGggc2FtZSBhcyBzb21ld2hlcmUgZWxzZSBpbiBkb0FjY2Vzc29yCgkJCQkJc3RvcHBlZDogcmVzdWx0LAoJCQkJfQoJCQl9IGVsc2UgaWYgKGJvb3RzdHJhcFJ1bkNvbnRleHQuYXN5bmMpIHsKCQkJCXJldHVybiB7IAoJCQkJCWFzeW5jOiBnZXRUaHJlYWRzKCksCgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4geyAKCQkJCQlyZXN1bHQ6IHJlc3VsdCwKCQkJCX0KCQkJfQoJCX0gY2F0Y2ggKGUpIHsKCQkJY29uc29sZS5lcnJvcihlKQoJCX0KCX0gZWxzZSB7CgkJdGhyb3cgbmV3IEVycm9yKCdCb290c3RyYXAgZmFpbGVkIScpCgl9Cn0KCgphc3luYyBmdW5jdGlvbiBvbkZyb250ZW5kKHJlcGx5RnVuY3Rpb24sIHJlcXVlc3QpIHsKCWlmKCFyZXF1ZXN0KSB7CgkJLy8gbm8gZXJyb3IgYmVjYXVzZSBiYWNrZW5kIHRpbWVzIG91dAoJCXJldHVybgoJfSBlbHNlCgoJaWYocmVxdWVzdC5zdGF0dXMpIHsKCQlpZih0eXBlb2YgQUNFICE9ICd1bmRlZmluZWQnKSB7CgkJCUFDRS5idWJibGVGaWxlID0gcmVxdWVzdC5maWxlCgkJfQoJCS8vIGZ1dHVyZSBjb2Rpbmc/CgkJaWYodHlwZW9mIG9uU3RhdHVzICE9ICd1bmRlZmluZWQnKSB7CgkJCXJldHVybiBvblN0YXR1cyhyZXF1ZXN0KQoJCX0KCX0gZWxzZQoKCWlmKHR5cGVvZiByZXF1ZXN0LnNjcmlwdCAhPSAndW5kZWZpbmVkJykgewoJCXNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewoJCS8vIHJlcGwgZG9tIHN0dWZmPyBwcm9iYWJseSBub3QKCQl0cnkgewoJCQlsZXQgdmFsdWUgPSBldmFsKCcoZnVuY3Rpb24gKCl7XG4nICsgcmVxdWVzdC5zY3JpcHQgKyAnXG59KSgpJykKCQkJbGV0IHR5cGUgPSB0eXBlb2YgdmFsdWUKCQkJaWYodHlwZSA9PSAnZnVuY3Rpb24nKSB7CgkJCQl2YWx1ZSA9IHZhbHVlICsgJycKCQkJfSBlbHNlIGlmICh0eXBlID09ICdvYmplY3QnKSB7CgkJCQl0eXBlID0gJ2pzb24nCgkJCQl2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KE9iamVjdC5hc3NpZ24oewoJCQkJCV9hY2Nlc3NvcjogdHJ1ZQoJCQkJfSwgdmFsdWUgfHwge30pKQoJCQl9IGVsc2UgewoJCQkJdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSkKCQkJfQoJCQlsZXQgcmVzdWx0ID0gewoJCQkJcmVzcG9uc2VJZDogcmVxdWVzdC5yZXNwb25zZUlkLAoJCQkJdHlwZTogdHlwZSwKCQkJCW5hbWU6IHJlcXVlc3Quc2NyaXB0IAoJCQl9CgkJCXJlc3VsdFt0eXBlXSA9IHZhbHVlCgkJCXJldHVybiByZXBseUZ1bmN0aW9uKHJlc3VsdCkKCQl9IGNhdGNoIChlKSB7CgkJCWRlYnVnZ2VyCgkJCXJlcGx5RnVuY3Rpb24oewoJCQkJcmVzcG9uc2VJZDogcmVxdWVzdC5yZXNwb25zZUlkLAoJCQkJbmFtZTogcmVxdWVzdC5zY3JpcHQsIAoJCQkJZmFpbDogZS5tZXNzYWdlLAoJCQl9KQoJCX0KCQl9LCAyMDApCgl9IGVsc2UKCglpZih0eXBlb2YgcmVxdWVzdC5hY2Nlc3NvciAhPSAndW5kZWZpbmVkJwoJCQkmJiB0eXBlb2Ygb25BY2Nlc3NvciAhPSAndW5kZWZpbmVkJykgewoJCS8vIFRPRE86IGluY2FzZSB3ZSBuZWVkIFJFUEwgb24gZnJvbnRlbmQgYmVjYXVzZSBvZiBDU1AKCQlsZXQgbGliID0gb25BY2Nlc3NvcihyZXF1ZXN0KQoJCXJldHVybiByZXBseUZ1bmN0aW9uKGxpYikKCX0gZWxzZQoKCS8vIFdIQVQgSUYgVVJMUyBXRVJFIFhQQVRIUyBUTyBGVU5DVElPTlM/IEFORCBST1VUSU5HIFRBQkxFUyBXSEVSRSBKVVNUIEZVTkNUSU9OUz8KCWlmKHR5cGVvZiByZXF1ZXN0LmFjY2Vzc29yICE9ICd1bmRlZmluZWQnCgkJCSYmIHJlcXVlc3QuYWNjZXNzb3Iuc3RhcnRzV2l0aCgnZXhwb3J0cy4nKSkgewoJCS8vIFRPRE86IHJlLWZvcndhcmQgYmFjayB0byB0aGUgYmFja2VuZCBhY2Nlc3NvciBiZWNhdXNlCgkJLy8gICB3b3JrZXIgc2hhcmVzIGEgbG9jYWwgc3RvcmFnZSwgdGhpcyBpcyB3aGF0CgkJLy8gICBJIG1lYW50IGJ5ICJhc2sgbGFuZ3VhZ2Ugc2VydmVyIi4gTm8gbWF0dGVyIGlmCgkJLy8gICBhIHJlcXVlc3QgY29tZXMgZnJvbSBtb3JlIG9yIGVuZ2luZSBvciB3b3JrZXIKCQkvLyAgIG9yIHBsdWdpbiwgaXQgYWxsIGxlYWRzIGJhY2sgdG8gbXkgY29kZSBpbiBJREJGUwoJCS8vIFRPRE86IG5lZWQgdG8gaW5jbHVkZSBpbnN0YWxsQXN5bmMgaGVyZSBhbHNvLCBidXQgb25seQoJCS8vICAgZm9yIHdvcmtlciBpbnRlcmZhY2UgYmVjYXVzZSBwbHVnaW4gaXMgZXZlbnQvcmVwbHkgYmFzZWQKCQkvL2lmKHJlcGx5RnVuY3Rpb24gPT09IFNZUy53b3JrZXIucG9zdE1lc3NhZ2UpIHsKCQlsZXQgdmFsdWUKCQlsZXQgbmFtZSA9IHJlcXVlc3QuYWNjZXNzb3Iuc3BsaXQoJy4nKVsxXQoJCWxldCB0eXBlID0gdHlwZW9mIHdpbmRvd1tuYW1lXQoJCWlmKHR5cGUgPT0gJ2Z1bmN0aW9uJykgewoJCQl2YWx1ZSA9IHdpbmRvd1tuYW1lXSArICcnCgkJfSBlbHNlIGlmICh0eXBlID09ICdvYmplY3QnKSB7CgkJCXR5cGUgPSAnanNvbicKCQkJdmFsdWUgPSBKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKHsKCQkJCV9hY2Nlc3NvcjogdHJ1ZQoJCQl9LCB3aW5kb3dbbmFtZV0gfHwge30pKQoJCX0gZWxzZSB7CgkJCXZhbHVlID0gSlNPTi5zdHJpbmdpZnkod2luZG93W25hbWVdKQoJCX0KCQlsZXQgcmVzdWx0ID0gewoJCQlyZXNwb25zZUlkOiByZXF1ZXN0LnJlc3BvbnNlSWQsCgkJCXR5cGU6IHR5cGUsCgkJCW5hbWU6IG5hbWUKCQl9CgkJcmVzdWx0W3R5cGVdID0gdmFsdWUKCQlyZXR1cm4gcmVwbHlGdW5jdGlvbihyZXN1bHQpCgl9IGVsc2UgCgoJLy8gY29tYmluZSB3aXRoIHJlcGwuanMgZG9BY2Nlc3NvcgoJLy8gcmVzdWx0IG1lYW5zIHRoZXkgYXNrZWQgZm9yIGl0PwoJaWYodHlwZW9mIHJlcXVlc3QucmVzdWx0ICE9ICd1bmRlZmluZWQnKSB7CgkJcmV0dXJuIHJlcXVlc3QucmVzdWx0Cgl9IGVsc2UgCgoJaWYodHlwZW9mIGRvRGlhbG9nICE9ICd1bmRlZmluZWQnCgkJCSYmIHR5cGVvZiByZXF1ZXN0LmFjY2Vzc29yICE9ICd1bmRlZmluZWQnKSB7IC8vIFJFUEw/CgkJbGV0IGRpYWxvZyA9IGRvRGlhbG9nKHJlcXVlc3QsIHJlcGx5RnVuY3Rpb24pCgkJcmV0dXJuIGRpYWxvZwoJfQoKCS8vIFRPRE86IGZvbGQgZnJvbnRlbmQgYW5kIG9uQWNjZXNzb3IgaW50byBlYWNoIG90aGVyIGJhc2VkIG9uIHJlcXVlc3QgdHlwZSAKCS8vICAgc2hvdWxkIGJlIGFibGUgdG8gaGF2ZSBhIHNwZWNpZmljIGRpcmVjdGlvbiBmb3Igd2hlbiB0byBlbmNvZGUgcmVzdWx0CgkvLyAgIG9yIHdoZW4gdG8gcmV0dXJuIHJlYWwgcmVzdWx0IHRvIFJFUEwsIGxpa2UgdGhlIG9wcG9zaXRlIG9mIHRoZSBtZW1iZXIub2JqZWN0CgkvLyAgIGFjY2VzcyB0aGluZwoJaWYodHlwZW9mIGRvUnVuICE9ICd1bmRlZmluZWQnKSB7CgkJZG9SdW4ocmVxdWVzdC5hY2Nlc3NvciB8fCByZXF1ZXN0LnNjcmlwdCwgewoJCQl3aW5kb3c6IHdpbmRvdywKCQkJQUNFOiBBQ0UsCgkJfSkgLy8gTk9XIElUJ1MgUkVDVVJTSVZFCgl9Cn0KCgogLy8gQk9PVFNUUkFQIENPREU/CiBpZih0eXBlb2YgbW9kdWxlICE9ICd1bmRlZmluZWQnKSB7Cgltb2R1bGUuZXhwb3J0cyA9IHsKCQlkb0FjY2Vzc29yLAoJCWRvQm9vdHN0cmFwLAoJCWRvTGlicmFyeUxvb2t1cCwKCQlvbkZyb250ZW5kLAoJCQoJfQp9CgoKLyohIHJlbWFya2FibGUgMS42LjAgaHR0cHM6Ly9naXRodWIuY29tL2pvbnNjaGxpbmtlcnQvcmVtYXJrYWJsZSBAbGljZW5zZSBNSVQgKi8oZnVuY3Rpb24oZil7aWYodHlwZW9mIGV4cG9ydHM9PT0ib2JqZWN0IiYmdHlwZW9mIG1vZHVsZSE9PSJ1bmRlZmluZWQiKXttb2R1bGUuZXhwb3J0cz1mKCl9ZWxzZSBpZih0eXBlb2YgZGVmaW5lPT09ImZ1bmN0aW9uIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKFtdLGYpfWVsc2V7dmFyIGc7aWYodHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiKXtnPXdpbmRvd31lbHNlIGlmKHR5cGVvZiBnbG9iYWwhPT0idW5kZWZpbmVkIil7Zz1nbG9iYWx9ZWxzZSBpZih0eXBlb2Ygc2VsZiE9PSJ1bmRlZmluZWQiKXtnPXNlbGZ9ZWxzZXtnPXRoaXN9Zy5SZW1hcmthYmxlID0gZigpfX0pKGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT0iZnVuY3Rpb24iJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIrbysiJyIpO3Rocm93IGYuY29kZT0iTU9EVUxFX05PVF9GT1VORCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT0iZnVuY3Rpb24iJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIExpc3Qgb2YgdmFsaWQgZW50aXRpZXMKLy8KLy8gR2VuZXJhdGUgd2l0aCAuL3N1cHBvcnQvZW50aXRpZXMuanMgc2NyaXB0Ci8vCid1c2Ugc3RyaWN0JzsKCi8qZXNsaW50IHF1b3RlczowKi8KbW9kdWxlLmV4cG9ydHMgPSB7CiAgIkFhY3V0ZSI6Ilx1MDBDMSIsCiAgImFhY3V0ZSI6Ilx1MDBFMSIsCiAgIkFicmV2ZSI6Ilx1MDEwMiIsCiAgImFicmV2ZSI6Ilx1MDEwMyIsCiAgImFjIjoiXHUyMjNFIiwKICAiYWNkIjoiXHUyMjNGIiwKICAiYWNFIjoiXHUyMjNFXHUwMzMzIiwKICAiQWNpcmMiOiJcdTAwQzIiLAogICJhY2lyYyI6Ilx1MDBFMiIsCiAgImFjdXRlIjoiXHUwMEI0IiwKICAiQWN5IjoiXHUwNDEwIiwKICAiYWN5IjoiXHUwNDMwIiwKICAiQUVsaWciOiJcdTAwQzYiLAogICJhZWxpZyI6Ilx1MDBFNiIsCiAgImFmIjoiXHUyMDYxIiwKICAiQWZyIjoiXHVEODM1XHVERDA0IiwKICAiYWZyIjoiXHVEODM1XHVERDFFIiwKICAiQWdyYXZlIjoiXHUwMEMwIiwKICAiYWdyYXZlIjoiXHUwMEUwIiwKICAiYWxlZnN5bSI6Ilx1MjEzNSIsCiAgImFsZXBoIjoiXHUyMTM1IiwKICAiQWxwaGEiOiJcdTAzOTEiLAogICJhbHBoYSI6Ilx1MDNCMSIsCiAgIkFtYWNyIjoiXHUwMTAwIiwKICAiYW1hY3IiOiJcdTAxMDEiLAogICJhbWFsZyI6Ilx1MkEzRiIsCiAgIkFNUCI6Ilx1MDAyNiIsCiAgImFtcCI6Ilx1MDAyNiIsCiAgIkFuZCI6Ilx1MkE1MyIsCiAgImFuZCI6Ilx1MjIyNyIsCiAgImFuZGFuZCI6Ilx1MkE1NSIsCiAgImFuZGQiOiJcdTJBNUMiLAogICJhbmRzbG9wZSI6Ilx1MkE1OCIsCiAgImFuZHYiOiJcdTJBNUEiLAogICJhbmciOiJcdTIyMjAiLAogICJhbmdlIjoiXHUyOUE0IiwKICAiYW5nbGUiOiJcdTIyMjAiLAogICJhbmdtc2QiOiJcdTIyMjEiLAogICJhbmdtc2RhYSI6Ilx1MjlBOCIsCiAgImFuZ21zZGFiIjoiXHUyOUE5IiwKICAiYW5nbXNkYWMiOiJcdTI5QUEiLAogICJhbmdtc2RhZCI6Ilx1MjlBQiIsCiAgImFuZ21zZGFlIjoiXHUyOUFDIiwKICAiYW5nbXNkYWYiOiJcdTI5QUQiLAogICJhbmdtc2RhZyI6Ilx1MjlBRSIsCiAgImFuZ21zZGFoIjoiXHUyOUFGIiwKICAiYW5ncnQiOiJcdTIyMUYiLAogICJhbmdydHZiIjoiXHUyMkJFIiwKICAiYW5ncnR2YmQiOiJcdTI5OUQiLAogICJhbmdzcGgiOiJcdTIyMjIiLAogICJhbmdzdCI6Ilx1MDBDNSIsCiAgImFuZ3phcnIiOiJcdTIzN0MiLAogICJBb2dvbiI6Ilx1MDEwNCIsCiAgImFvZ29uIjoiXHUwMTA1IiwKICAiQW9wZiI6Ilx1RDgzNVx1REQzOCIsCiAgImFvcGYiOiJcdUQ4MzVcdURENTIiLAogICJhcCI6Ilx1MjI0OCIsCiAgImFwYWNpciI6Ilx1MkE2RiIsCiAgImFwRSI6Ilx1MkE3MCIsCiAgImFwZSI6Ilx1MjI0QSIsCiAgImFwaWQiOiJcdTIyNEIiLAogICJhcG9zIjoiXHUwMDI3IiwKICAiQXBwbHlGdW5jdGlvbiI6Ilx1MjA2MSIsCiAgImFwcHJveCI6Ilx1MjI0OCIsCiAgImFwcHJveGVxIjoiXHUyMjRBIiwKICAiQXJpbmciOiJcdTAwQzUiLAogICJhcmluZyI6Ilx1MDBFNSIsCiAgIkFzY3IiOiJcdUQ4MzVcdURDOUMiLAogICJhc2NyIjoiXHVEODM1XHVEQ0I2IiwKICAiQXNzaWduIjoiXHUyMjU0IiwKICAiYXN0IjoiXHUwMDJBIiwKICAiYXN5bXAiOiJcdTIyNDgiLAogICJhc3ltcGVxIjoiXHUyMjREIiwKICAiQXRpbGRlIjoiXHUwMEMzIiwKICAiYXRpbGRlIjoiXHUwMEUzIiwKICAiQXVtbCI6Ilx1MDBDNCIsCiAgImF1bWwiOiJcdTAwRTQiLAogICJhd2NvbmludCI6Ilx1MjIzMyIsCiAgImF3aW50IjoiXHUyQTExIiwKICAiYmFja2NvbmciOiJcdTIyNEMiLAogICJiYWNrZXBzaWxvbiI6Ilx1MDNGNiIsCiAgImJhY2twcmltZSI6Ilx1MjAzNSIsCiAgImJhY2tzaW0iOiJcdTIyM0QiLAogICJiYWNrc2ltZXEiOiJcdTIyQ0QiLAogICJCYWNrc2xhc2giOiJcdTIyMTYiLAogICJCYXJ2IjoiXHUyQUU3IiwKICAiYmFydmVlIjoiXHUyMkJEIiwKICAiQmFyd2VkIjoiXHUyMzA2IiwKICAiYmFyd2VkIjoiXHUyMzA1IiwKICAiYmFyd2VkZ2UiOiJcdTIzMDUiLAogICJiYnJrIjoiXHUyM0I1IiwKICAiYmJya3RicmsiOiJcdTIzQjYiLAogICJiY29uZyI6Ilx1MjI0QyIsCiAgIkJjeSI6Ilx1MDQxMSIsCiAgImJjeSI6Ilx1MDQzMSIsCiAgImJkcXVvIjoiXHUyMDFFIiwKICAiYmVjYXVzIjoiXHUyMjM1IiwKICAiQmVjYXVzZSI6Ilx1MjIzNSIsCiAgImJlY2F1c2UiOiJcdTIyMzUiLAogICJiZW1wdHl2IjoiXHUyOUIwIiwKICAiYmVwc2kiOiJcdTAzRjYiLAogICJiZXJub3UiOiJcdTIxMkMiLAogICJCZXJub3VsbGlzIjoiXHUyMTJDIiwKICAiQmV0YSI6Ilx1MDM5MiIsCiAgImJldGEiOiJcdTAzQjIiLAogICJiZXRoIjoiXHUyMTM2IiwKICAiYmV0d2VlbiI6Ilx1MjI2QyIsCiAgIkJmciI6Ilx1RDgzNVx1REQwNSIsCiAgImJmciI6Ilx1RDgzNVx1REQxRiIsCiAgImJpZ2NhcCI6Ilx1MjJDMiIsCiAgImJpZ2NpcmMiOiJcdTI1RUYiLAogICJiaWdjdXAiOiJcdTIyQzMiLAogICJiaWdvZG90IjoiXHUyQTAwIiwKICAiYmlnb3BsdXMiOiJcdTJBMDEiLAogICJiaWdvdGltZXMiOiJcdTJBMDIiLAogICJiaWdzcWN1cCI6Ilx1MkEwNiIsCiAgImJpZ3N0YXIiOiJcdTI2MDUiLAogICJiaWd0cmlhbmdsZWRvd24iOiJcdTI1QkQiLAogICJiaWd0cmlhbmdsZXVwIjoiXHUyNUIzIiwKICAiYmlndXBsdXMiOiJcdTJBMDQiLAogICJiaWd2ZWUiOiJcdTIyQzEiLAogICJiaWd3ZWRnZSI6Ilx1MjJDMCIsCiAgImJrYXJvdyI6Ilx1MjkwRCIsCiAgImJsYWNrbG96ZW5nZSI6Ilx1MjlFQiIsCiAgImJsYWNrc3F1YXJlIjoiXHUyNUFBIiwKICAiYmxhY2t0cmlhbmdsZSI6Ilx1MjVCNCIsCiAgImJsYWNrdHJpYW5nbGVkb3duIjoiXHUyNUJFIiwKICAiYmxhY2t0cmlhbmdsZWxlZnQiOiJcdTI1QzIiLAogICJibGFja3RyaWFuZ2xlcmlnaHQiOiJcdTI1QjgiLAogICJibGFuayI6Ilx1MjQyMyIsCiAgImJsazEyIjoiXHUyNTkyIiwKICAiYmxrMTQiOiJcdTI1OTEiLAogICJibGszNCI6Ilx1MjU5MyIsCiAgImJsb2NrIjoiXHUyNTg4IiwKICAiYm5lIjoiXHUwMDNEXHUyMEU1IiwKICAiYm5lcXVpdiI6Ilx1MjI2MVx1MjBFNSIsCiAgImJOb3QiOiJcdTJBRUQiLAogICJibm90IjoiXHUyMzEwIiwKICAiQm9wZiI6Ilx1RDgzNVx1REQzOSIsCiAgImJvcGYiOiJcdUQ4MzVcdURENTMiLAogICJib3QiOiJcdTIyQTUiLAogICJib3R0b20iOiJcdTIyQTUiLAogICJib3d0aWUiOiJcdTIyQzgiLAogICJib3hib3giOiJcdTI5QzkiLAogICJib3hETCI6Ilx1MjU1NyIsCiAgImJveERsIjoiXHUyNTU2IiwKICAiYm94ZEwiOiJcdTI1NTUiLAogICJib3hkbCI6Ilx1MjUxMCIsCiAgImJveERSIjoiXHUyNTU0IiwKICAiYm94RHIiOiJcdTI1NTMiLAogICJib3hkUiI6Ilx1MjU1MiIsCiAgImJveGRyIjoiXHUyNTBDIiwKICAiYm94SCI6Ilx1MjU1MCIsCiAgImJveGgiOiJcdTI1MDAiLAogICJib3hIRCI6Ilx1MjU2NiIsCiAgImJveEhkIjoiXHUyNTY0IiwKICAiYm94aEQiOiJcdTI1NjUiLAogICJib3hoZCI6Ilx1MjUyQyIsCiAgImJveEhVIjoiXHUyNTY5IiwKICAiYm94SHUiOiJcdTI1NjciLAogICJib3hoVSI6Ilx1MjU2OCIsCiAgImJveGh1IjoiXHUyNTM0IiwKICAiYm94bWludXMiOiJcdTIyOUYiLAogICJib3hwbHVzIjoiXHUyMjlFIiwKICAiYm94dGltZXMiOiJcdTIyQTAiLAogICJib3hVTCI6Ilx1MjU1RCIsCiAgImJveFVsIjoiXHUyNTVDIiwKICAiYm94dUwiOiJcdTI1NUIiLAogICJib3h1bCI6Ilx1MjUxOCIsCiAgImJveFVSIjoiXHUyNTVBIiwKICAiYm94VXIiOiJcdTI1NTkiLAogICJib3h1UiI6Ilx1MjU1OCIsCiAgImJveHVyIjoiXHUyNTE0IiwKICAiYm94ViI6Ilx1MjU1MSIsCiAgImJveHYiOiJcdTI1MDIiLAogICJib3hWSCI6Ilx1MjU2QyIsCiAgImJveFZoIjoiXHUyNTZCIiwKICAiYm94dkgiOiJcdTI1NkEiLAogICJib3h2aCI6Ilx1MjUzQyIsCiAgImJveFZMIjoiXHUyNTYzIiwKICAiYm94VmwiOiJcdTI1NjIiLAogICJib3h2TCI6Ilx1MjU2MSIsCiAgImJveHZsIjoiXHUyNTI0IiwKICAiYm94VlIiOiJcdTI1NjAiLAogICJib3hWciI6Ilx1MjU1RiIsCiAgImJveHZSIjoiXHUyNTVFIiwKICAiYm94dnIiOiJcdTI1MUMiLAogICJicHJpbWUiOiJcdTIwMzUiLAogICJCcmV2ZSI6Ilx1MDJEOCIsCiAgImJyZXZlIjoiXHUwMkQ4IiwKICAiYnJ2YmFyIjoiXHUwMEE2IiwKICAiQnNjciI6Ilx1MjEyQyIsCiAgImJzY3IiOiJcdUQ4MzVcdURDQjciLAogICJic2VtaSI6Ilx1MjA0RiIsCiAgImJzaW0iOiJcdTIyM0QiLAogICJic2ltZSI6Ilx1MjJDRCIsCiAgImJzb2wiOiJcdTAwNUMiLAogICJic29sYiI6Ilx1MjlDNSIsCiAgImJzb2xoc3ViIjoiXHUyN0M4IiwKICAiYnVsbCI6Ilx1MjAyMiIsCiAgImJ1bGxldCI6Ilx1MjAyMiIsCiAgImJ1bXAiOiJcdTIyNEUiLAogICJidW1wRSI6Ilx1MkFBRSIsCiAgImJ1bXBlIjoiXHUyMjRGIiwKICAiQnVtcGVxIjoiXHUyMjRFIiwKICAiYnVtcGVxIjoiXHUyMjRGIiwKICAiQ2FjdXRlIjoiXHUwMTA2IiwKICAiY2FjdXRlIjoiXHUwMTA3IiwKICAiQ2FwIjoiXHUyMkQyIiwKICAiY2FwIjoiXHUyMjI5IiwKICAiY2FwYW5kIjoiXHUyQTQ0IiwKICAiY2FwYnJjdXAiOiJcdTJBNDkiLAogICJjYXBjYXAiOiJcdTJBNEIiLAogICJjYXBjdXAiOiJcdTJBNDciLAogICJjYXBkb3QiOiJcdTJBNDAiLAogICJDYXBpdGFsRGlmZmVyZW50aWFsRCI6Ilx1MjE0NSIsCiAgImNhcHMiOiJcdTIyMjlcdUZFMDAiLAogICJjYXJldCI6Ilx1MjA0MSIsCiAgImNhcm9uIjoiXHUwMkM3IiwKICAiQ2F5bGV5cyI6Ilx1MjEyRCIsCiAgImNjYXBzIjoiXHUyQTREIiwKICAiQ2Nhcm9uIjoiXHUwMTBDIiwKICAiY2Nhcm9uIjoiXHUwMTBEIiwKICAiQ2NlZGlsIjoiXHUwMEM3IiwKICAiY2NlZGlsIjoiXHUwMEU3IiwKICAiQ2NpcmMiOiJcdTAxMDgiLAogICJjY2lyYyI6Ilx1MDEwOSIsCiAgIkNjb25pbnQiOiJcdTIyMzAiLAogICJjY3VwcyI6Ilx1MkE0QyIsCiAgImNjdXBzc20iOiJcdTJBNTAiLAogICJDZG90IjoiXHUwMTBBIiwKICAiY2RvdCI6Ilx1MDEwQiIsCiAgImNlZGlsIjoiXHUwMEI4IiwKICAiQ2VkaWxsYSI6Ilx1MDBCOCIsCiAgImNlbXB0eXYiOiJcdTI5QjIiLAogICJjZW50IjoiXHUwMEEyIiwKICAiQ2VudGVyRG90IjoiXHUwMEI3IiwKICAiY2VudGVyZG90IjoiXHUwMEI3IiwKICAiQ2ZyIjoiXHUyMTJEIiwKICAiY2ZyIjoiXHVEODM1XHVERDIwIiwKICAiQ0hjeSI6Ilx1MDQyNyIsCiAgImNoY3kiOiJcdTA0NDciLAogICJjaGVjayI6Ilx1MjcxMyIsCiAgImNoZWNrbWFyayI6Ilx1MjcxMyIsCiAgIkNoaSI6Ilx1MDNBNyIsCiAgImNoaSI6Ilx1MDNDNyIsCiAgImNpciI6Ilx1MjVDQiIsCiAgImNpcmMiOiJcdTAyQzYiLAogICJjaXJjZXEiOiJcdTIyNTciLAogICJjaXJjbGVhcnJvd2xlZnQiOiJcdTIxQkEiLAogICJjaXJjbGVhcnJvd3JpZ2h0IjoiXHUyMUJCIiwKICAiY2lyY2xlZGFzdCI6Ilx1MjI5QiIsCiAgImNpcmNsZWRjaXJjIjoiXHUyMjlBIiwKICAiY2lyY2xlZGRhc2giOiJcdTIyOUQiLAogICJDaXJjbGVEb3QiOiJcdTIyOTkiLAogICJjaXJjbGVkUiI6Ilx1MDBBRSIsCiAgImNpcmNsZWRTIjoiXHUyNEM4IiwKICAiQ2lyY2xlTWludXMiOiJcdTIyOTYiLAogICJDaXJjbGVQbHVzIjoiXHUyMjk1IiwKICAiQ2lyY2xlVGltZXMiOiJcdTIyOTciLAogICJjaXJFIjoiXHUyOUMzIiwKICAiY2lyZSI6Ilx1MjI1NyIsCiAgImNpcmZuaW50IjoiXHUyQTEwIiwKICAiY2lybWlkIjoiXHUyQUVGIiwKICAiY2lyc2NpciI6Ilx1MjlDMiIsCiAgIkNsb2Nrd2lzZUNvbnRvdXJJbnRlZ3JhbCI6Ilx1MjIzMiIsCiAgIkNsb3NlQ3VybHlEb3VibGVRdW90ZSI6Ilx1MjAxRCIsCiAgIkNsb3NlQ3VybHlRdW90ZSI6Ilx1MjAxOSIsCiAgImNsdWJzIjoiXHUyNjYzIiwKICAiY2x1YnN1aXQiOiJcdTI2NjMiLAogICJDb2xvbiI6Ilx1MjIzNyIsCiAgImNvbG9uIjoiXHUwMDNBIiwKICAiQ29sb25lIjoiXHUyQTc0IiwKICAiY29sb25lIjoiXHUyMjU0IiwKICAiY29sb25lcSI6Ilx1MjI1NCIsCiAgImNvbW1hIjoiXHUwMDJDIiwKICAiY29tbWF0IjoiXHUwMDQwIiwKICAiY29tcCI6Ilx1MjIwMSIsCiAgImNvbXBmbiI6Ilx1MjIxOCIsCiAgImNvbXBsZW1lbnQiOiJcdTIyMDEiLAogICJjb21wbGV4ZXMiOiJcdTIxMDIiLAogICJjb25nIjoiXHUyMjQ1IiwKICAiY29uZ2RvdCI6Ilx1MkE2RCIsCiAgIkNvbmdydWVudCI6Ilx1MjI2MSIsCiAgIkNvbmludCI6Ilx1MjIyRiIsCiAgImNvbmludCI6Ilx1MjIyRSIsCiAgIkNvbnRvdXJJbnRlZ3JhbCI6Ilx1MjIyRSIsCiAgIkNvcGYiOiJcdTIxMDIiLAogICJjb3BmIjoiXHVEODM1XHVERDU0IiwKICAiY29wcm9kIjoiXHUyMjEwIiwKICAiQ29wcm9kdWN0IjoiXHUyMjEwIiwKICAiQ09QWSI6Ilx1MDBBOSIsCiAgImNvcHkiOiJcdTAwQTkiLAogICJjb3B5c3IiOiJcdTIxMTciLAogICJDb3VudGVyQ2xvY2t3aXNlQ29udG91ckludGVncmFsIjoiXHUyMjMzIiwKICAiY3JhcnIiOiJcdTIxQjUiLAogICJDcm9zcyI6Ilx1MkEyRiIsCiAgImNyb3NzIjoiXHUyNzE3IiwKICAiQ3NjciI6Ilx1RDgzNVx1REM5RSIsCiAgImNzY3IiOiJcdUQ4MzVcdURDQjgiLAogICJjc3ViIjoiXHUyQUNGIiwKICAiY3N1YmUiOiJcdTJBRDEiLAogICJjc3VwIjoiXHUyQUQwIiwKICAiY3N1cGUiOiJcdTJBRDIiLAogICJjdGRvdCI6Ilx1MjJFRiIsCiAgImN1ZGFycmwiOiJcdTI5MzgiLAogICJjdWRhcnJyIjoiXHUyOTM1IiwKICAiY3VlcHIiOiJcdTIyREUiLAogICJjdWVzYyI6Ilx1MjJERiIsCiAgImN1bGFyciI6Ilx1MjFCNiIsCiAgImN1bGFycnAiOiJcdTI5M0QiLAogICJDdXAiOiJcdTIyRDMiLAogICJjdXAiOiJcdTIyMkEiLAogICJjdXBicmNhcCI6Ilx1MkE0OCIsCiAgIkN1cENhcCI6Ilx1MjI0RCIsCiAgImN1cGNhcCI6Ilx1MkE0NiIsCiAgImN1cGN1cCI6Ilx1MkE0QSIsCiAgImN1cGRvdCI6Ilx1MjI4RCIsCiAgImN1cG9yIjoiXHUyQTQ1IiwKICAiY3VwcyI6Ilx1MjIyQVx1RkUwMCIsCiAgImN1cmFyciI6Ilx1MjFCNyIsCiAgImN1cmFycm0iOiJcdTI5M0MiLAogICJjdXJseWVxcHJlYyI6Ilx1MjJERSIsCiAgImN1cmx5ZXFzdWNjIjoiXHUyMkRGIiwKICAiY3VybHl2ZWUiOiJcdTIyQ0UiLAogICJjdXJseXdlZGdlIjoiXHUyMkNGIiwKICAiY3VycmVuIjoiXHUwMEE0IiwKICAiY3VydmVhcnJvd2xlZnQiOiJcdTIxQjYiLAogICJjdXJ2ZWFycm93cmlnaHQiOiJcdTIxQjciLAogICJjdXZlZSI6Ilx1MjJDRSIsCiAgImN1d2VkIjoiXHUyMkNGIiwKICAiY3djb25pbnQiOiJcdTIyMzIiLAogICJjd2ludCI6Ilx1MjIzMSIsCiAgImN5bGN0eSI6Ilx1MjMyRCIsCiAgIkRhZ2dlciI6Ilx1MjAyMSIsCiAgImRhZ2dlciI6Ilx1MjAyMCIsCiAgImRhbGV0aCI6Ilx1MjEzOCIsCiAgIkRhcnIiOiJcdTIxQTEiLAogICJkQXJyIjoiXHUyMUQzIiwKICAiZGFyciI6Ilx1MjE5MyIsCiAgImRhc2giOiJcdTIwMTAiLAogICJEYXNodiI6Ilx1MkFFNCIsCiAgImRhc2h2IjoiXHUyMkEzIiwKICAiZGJrYXJvdyI6Ilx1MjkwRiIsCiAgImRibGFjIjoiXHUwMkREIiwKICAiRGNhcm9uIjoiXHUwMTBFIiwKICAiZGNhcm9uIjoiXHUwMTBGIiwKICAiRGN5IjoiXHUwNDE0IiwKICAiZGN5IjoiXHUwNDM0IiwKICAiREQiOiJcdTIxNDUiLAogICJkZCI6Ilx1MjE0NiIsCiAgImRkYWdnZXIiOiJcdTIwMjEiLAogICJkZGFyciI6Ilx1MjFDQSIsCiAgIkREb3RyYWhkIjoiXHUyOTExIiwKICAiZGRvdHNlcSI6Ilx1MkE3NyIsCiAgImRlZyI6Ilx1MDBCMCIsCiAgIkRlbCI6Ilx1MjIwNyIsCiAgIkRlbHRhIjoiXHUwMzk0IiwKICAiZGVsdGEiOiJcdTAzQjQiLAogICJkZW1wdHl2IjoiXHUyOUIxIiwKICAiZGZpc2h0IjoiXHUyOTdGIiwKICAiRGZyIjoiXHVEODM1XHVERDA3IiwKICAiZGZyIjoiXHVEODM1XHVERDIxIiwKICAiZEhhciI6Ilx1Mjk2NSIsCiAgImRoYXJsIjoiXHUyMUMzIiwKICAiZGhhcnIiOiJcdTIxQzIiLAogICJEaWFjcml0aWNhbEFjdXRlIjoiXHUwMEI0IiwKICAiRGlhY3JpdGljYWxEb3QiOiJcdTAyRDkiLAogICJEaWFjcml0aWNhbERvdWJsZUFjdXRlIjoiXHUwMkREIiwKICAiRGlhY3JpdGljYWxHcmF2ZSI6Ilx1MDA2MCIsCiAgIkRpYWNyaXRpY2FsVGlsZGUiOiJcdTAyREMiLAogICJkaWFtIjoiXHUyMkM0IiwKICAiRGlhbW9uZCI6Ilx1MjJDNCIsCiAgImRpYW1vbmQiOiJcdTIyQzQiLAogICJkaWFtb25kc3VpdCI6Ilx1MjY2NiIsCiAgImRpYW1zIjoiXHUyNjY2IiwKICAiZGllIjoiXHUwMEE4IiwKICAiRGlmZmVyZW50aWFsRCI6Ilx1MjE0NiIsCiAgImRpZ2FtbWEiOiJcdTAzREQiLAogICJkaXNpbiI6Ilx1MjJGMiIsCiAgImRpdiI6Ilx1MDBGNyIsCiAgImRpdmlkZSI6Ilx1MDBGNyIsCiAgImRpdmlkZW9udGltZXMiOiJcdTIyQzciLAogICJkaXZvbngiOiJcdTIyQzciLAogICJESmN5IjoiXHUwNDAyIiwKICAiZGpjeSI6Ilx1MDQ1MiIsCiAgImRsY29ybiI6Ilx1MjMxRSIsCiAgImRsY3JvcCI6Ilx1MjMwRCIsCiAgImRvbGxhciI6Ilx1MDAyNCIsCiAgIkRvcGYiOiJcdUQ4MzVcdUREM0IiLAogICJkb3BmIjoiXHVEODM1XHVERDU1IiwKICAiRG90IjoiXHUwMEE4IiwKICAiZG90IjoiXHUwMkQ5IiwKICAiRG90RG90IjoiXHUyMERDIiwKICAiZG90ZXEiOiJcdTIyNTAiLAogICJkb3RlcWRvdCI6Ilx1MjI1MSIsCiAgIkRvdEVxdWFsIjoiXHUyMjUwIiwKICAiZG90bWludXMiOiJcdTIyMzgiLAogICJkb3RwbHVzIjoiXHUyMjE0IiwKICAiZG90c3F1YXJlIjoiXHUyMkExIiwKICAiZG91YmxlYmFyd2VkZ2UiOiJcdTIzMDYiLAogICJEb3VibGVDb250b3VySW50ZWdyYWwiOiJcdTIyMkYiLAogICJEb3VibGVEb3QiOiJcdTAwQTgiLAogICJEb3VibGVEb3duQXJyb3ciOiJcdTIxRDMiLAogICJEb3VibGVMZWZ0QXJyb3ciOiJcdTIxRDAiLAogICJEb3VibGVMZWZ0UmlnaHRBcnJvdyI6Ilx1MjFENCIsCiAgIkRvdWJsZUxlZnRUZWUiOiJcdTJBRTQiLAogICJEb3VibGVMb25nTGVmdEFycm93IjoiXHUyN0Y4IiwKICAiRG91YmxlTG9uZ0xlZnRSaWdodEFycm93IjoiXHUyN0ZBIiwKICAiRG91YmxlTG9uZ1JpZ2h0QXJyb3ciOiJcdTI3RjkiLAogICJEb3VibGVSaWdodEFycm93IjoiXHUyMUQyIiwKICAiRG91YmxlUmlnaHRUZWUiOiJcdTIyQTgiLAogICJEb3VibGVVcEFycm93IjoiXHUyMUQxIiwKICAiRG91YmxlVXBEb3duQXJyb3ciOiJcdTIxRDUiLAogICJEb3VibGVWZXJ0aWNhbEJhciI6Ilx1MjIyNSIsCiAgIkRvd25BcnJvdyI6Ilx1MjE5MyIsCiAgIkRvd25hcnJvdyI6Ilx1MjFEMyIsCiAgImRvd25hcnJvdyI6Ilx1MjE5MyIsCiAgIkRvd25BcnJvd0JhciI6Ilx1MjkxMyIsCiAgIkRvd25BcnJvd1VwQXJyb3ciOiJcdTIxRjUiLAogICJEb3duQnJldmUiOiJcdTAzMTEiLAogICJkb3duZG93bmFycm93cyI6Ilx1MjFDQSIsCiAgImRvd25oYXJwb29ubGVmdCI6Ilx1MjFDMyIsCiAgImRvd25oYXJwb29ucmlnaHQiOiJcdTIxQzIiLAogICJEb3duTGVmdFJpZ2h0VmVjdG9yIjoiXHUyOTUwIiwKICAiRG93bkxlZnRUZWVWZWN0b3IiOiJcdTI5NUUiLAogICJEb3duTGVmdFZlY3RvciI6Ilx1MjFCRCIsCiAgIkRvd25MZWZ0VmVjdG9yQmFyIjoiXHUyOTU2IiwKICAiRG93blJpZ2h0VGVlVmVjdG9yIjoiXHUyOTVGIiwKICAiRG93blJpZ2h0VmVjdG9yIjoiXHUyMUMxIiwKICAiRG93blJpZ2h0VmVjdG9yQmFyIjoiXHUyOTU3IiwKICAiRG93blRlZSI6Ilx1MjJBNCIsCiAgIkRvd25UZWVBcnJvdyI6Ilx1MjFBNyIsCiAgImRyYmthcm93IjoiXHUyOTEwIiwKICAiZHJjb3JuIjoiXHUyMzFGIiwKICAiZHJjcm9wIjoiXHUyMzBDIiwKICAiRHNjciI6Ilx1RDgzNVx1REM5RiIsCiAgImRzY3IiOiJcdUQ4MzVcdURDQjkiLAogICJEU2N5IjoiXHUwNDA1IiwKICAiZHNjeSI6Ilx1MDQ1NSIsCiAgImRzb2wiOiJcdTI5RjYiLAogICJEc3Ryb2siOiJcdTAxMTAiLAogICJkc3Ryb2siOiJcdTAxMTEiLAogICJkdGRvdCI6Ilx1MjJGMSIsCiAgImR0cmkiOiJcdTI1QkYiLAogICJkdHJpZiI6Ilx1MjVCRSIsCiAgImR1YXJyIjoiXHUyMUY1IiwKICAiZHVoYXIiOiJcdTI5NkYiLAogICJkd2FuZ2xlIjoiXHUyOUE2IiwKICAiRFpjeSI6Ilx1MDQwRiIsCiAgImR6Y3kiOiJcdTA0NUYiLAogICJkemlncmFyciI6Ilx1MjdGRiIsCiAgIkVhY3V0ZSI6Ilx1MDBDOSIsCiAgImVhY3V0ZSI6Ilx1MDBFOSIsCiAgImVhc3RlciI6Ilx1MkE2RSIsCiAgIkVjYXJvbiI6Ilx1MDExQSIsCiAgImVjYXJvbiI6Ilx1MDExQiIsCiAgImVjaXIiOiJcdTIyNTYiLAogICJFY2lyYyI6Ilx1MDBDQSIsCiAgImVjaXJjIjoiXHUwMEVBIiwKICAiZWNvbG9uIjoiXHUyMjU1IiwKICAiRWN5IjoiXHUwNDJEIiwKICAiZWN5IjoiXHUwNDREIiwKICAiZUREb3QiOiJcdTJBNzciLAogICJFZG90IjoiXHUwMTE2IiwKICAiZURvdCI6Ilx1MjI1MSIsCiAgImVkb3QiOiJcdTAxMTciLAogICJlZSI6Ilx1MjE0NyIsCiAgImVmRG90IjoiXHUyMjUyIiwKICAiRWZyIjoiXHVEODM1XHVERDA4IiwKICAiZWZyIjoiXHVEODM1XHVERDIyIiwKICAiZWciOiJcdTJBOUEiLAogICJFZ3JhdmUiOiJcdTAwQzgiLAogICJlZ3JhdmUiOiJcdTAwRTgiLAogICJlZ3MiOiJcdTJBOTYiLAogICJlZ3Nkb3QiOiJcdTJBOTgiLAogICJlbCI6Ilx1MkE5OSIsCiAgIkVsZW1lbnQiOiJcdTIyMDgiLAogICJlbGludGVycyI6Ilx1MjNFNyIsCiAgImVsbCI6Ilx1MjExMyIsCiAgImVscyI6Ilx1MkE5NSIsCiAgImVsc2RvdCI6Ilx1MkE5NyIsCiAgIkVtYWNyIjoiXHUwMTEyIiwKICAiZW1hY3IiOiJcdTAxMTMiLAogICJlbXB0eSI6Ilx1MjIwNSIsCiAgImVtcHR5c2V0IjoiXHUyMjA1IiwKICAiRW1wdHlTbWFsbFNxdWFyZSI6Ilx1MjVGQiIsCiAgImVtcHR5diI6Ilx1MjIwNSIsCiAgIkVtcHR5VmVyeVNtYWxsU3F1YXJlIjoiXHUyNUFCIiwKICAiZW1zcCI6Ilx1MjAwMyIsCiAgImVtc3AxMyI6Ilx1MjAwNCIsCiAgImVtc3AxNCI6Ilx1MjAwNSIsCiAgIkVORyI6Ilx1MDE0QSIsCiAgImVuZyI6Ilx1MDE0QiIsCiAgImVuc3AiOiJcdTIwMDIiLAogICJFb2dvbiI6Ilx1MDExOCIsCiAgImVvZ29uIjoiXHUwMTE5IiwKICAiRW9wZiI6Ilx1RDgzNVx1REQzQyIsCiAgImVvcGYiOiJcdUQ4MzVcdURENTYiLAogICJlcGFyIjoiXHUyMkQ1IiwKICAiZXBhcnNsIjoiXHUyOUUzIiwKICAiZXBsdXMiOiJcdTJBNzEiLAogICJlcHNpIjoiXHUwM0I1IiwKICAiRXBzaWxvbiI6Ilx1MDM5NSIsCiAgImVwc2lsb24iOiJcdTAzQjUiLAogICJlcHNpdiI6Ilx1MDNGNSIsCiAgImVxY2lyYyI6Ilx1MjI1NiIsCiAgImVxY29sb24iOiJcdTIyNTUiLAogICJlcXNpbSI6Ilx1MjI0MiIsCiAgImVxc2xhbnRndHIiOiJcdTJBOTYiLAogICJlcXNsYW50bGVzcyI6Ilx1MkE5NSIsCiAgIkVxdWFsIjoiXHUyQTc1IiwKICAiZXF1YWxzIjoiXHUwMDNEIiwKICAiRXF1YWxUaWxkZSI6Ilx1MjI0MiIsCiAgImVxdWVzdCI6Ilx1MjI1RiIsCiAgIkVxdWlsaWJyaXVtIjoiXHUyMUNDIiwKICAiZXF1aXYiOiJcdTIyNjEiLAogICJlcXVpdkREIjoiXHUyQTc4IiwKICAiZXF2cGFyc2wiOiJcdTI5RTUiLAogICJlcmFyciI6Ilx1Mjk3MSIsCiAgImVyRG90IjoiXHUyMjUzIiwKICAiRXNjciI6Ilx1MjEzMCIsCiAgImVzY3IiOiJcdTIxMkYiLAogICJlc2RvdCI6Ilx1MjI1MCIsCiAgIkVzaW0iOiJcdTJBNzMiLAogICJlc2ltIjoiXHUyMjQyIiwKICAiRXRhIjoiXHUwMzk3IiwKICAiZXRhIjoiXHUwM0I3IiwKICAiRVRIIjoiXHUwMEQwIiwKICAiZXRoIjoiXHUwMEYwIiwKICAiRXVtbCI6Ilx1MDBDQiIsCiAgImV1bWwiOiJcdTAwRUIiLAogICJldXJvIjoiXHUyMEFDIiwKICAiZXhjbCI6Ilx1MDAyMSIsCiAgImV4aXN0IjoiXHUyMjAzIiwKICAiRXhpc3RzIjoiXHUyMjAzIiwKICAiZXhwZWN0YXRpb24iOiJcdTIxMzAiLAogICJFeHBvbmVudGlhbEUiOiJcdTIxNDciLAogICJleHBvbmVudGlhbGUiOiJcdTIxNDciLAogICJmYWxsaW5nZG90c2VxIjoiXHUyMjUyIiwKICAiRmN5IjoiXHUwNDI0IiwKICAiZmN5IjoiXHUwNDQ0IiwKICAiZmVtYWxlIjoiXHUyNjQwIiwKICAiZmZpbGlnIjoiXHVGQjAzIiwKICAiZmZsaWciOiJcdUZCMDAiLAogICJmZmxsaWciOiJcdUZCMDQiLAogICJGZnIiOiJcdUQ4MzVcdUREMDkiLAogICJmZnIiOiJcdUQ4MzVcdUREMjMiLAogICJmaWxpZyI6Ilx1RkIwMSIsCiAgIkZpbGxlZFNtYWxsU3F1YXJlIjoiXHUyNUZDIiwKICAiRmlsbGVkVmVyeVNtYWxsU3F1YXJlIjoiXHUyNUFBIiwKICAiZmpsaWciOiJcdTAwNjZcdTAwNkEiLAogICJmbGF0IjoiXHUyNjZEIiwKICAiZmxsaWciOiJcdUZCMDIiLAogICJmbHRucyI6Ilx1MjVCMSIsCiAgImZub2YiOiJcdTAxOTIiLAogICJGb3BmIjoiXHVEODM1XHVERDNEIiwKICAiZm9wZiI6Ilx1RDgzNVx1REQ1NyIsCiAgIkZvckFsbCI6Ilx1MjIwMCIsCiAgImZvcmFsbCI6Ilx1MjIwMCIsCiAgImZvcmsiOiJcdTIyRDQiLAogICJmb3JrdiI6Ilx1MkFEOSIsCiAgIkZvdXJpZXJ0cmYiOiJcdTIxMzEiLAogICJmcGFydGludCI6Ilx1MkEwRCIsCiAgImZyYWMxMiI6Ilx1MDBCRCIsCiAgImZyYWMxMyI6Ilx1MjE1MyIsCiAgImZyYWMxNCI6Ilx1MDBCQyIsCiAgImZyYWMxNSI6Ilx1MjE1NSIsCiAgImZyYWMxNiI6Ilx1MjE1OSIsCiAgImZyYWMxOCI6Ilx1MjE1QiIsCiAgImZyYWMyMyI6Ilx1MjE1NCIsCiAgImZyYWMyNSI6Ilx1MjE1NiIsCiAgImZyYWMzNCI6Ilx1MDBCRSIsCiAgImZyYWMzNSI6Ilx1MjE1NyIsCiAgImZyYWMzOCI6Ilx1MjE1QyIsCiAgImZyYWM0NSI6Ilx1MjE1OCIsCiAgImZyYWM1NiI6Ilx1MjE1QSIsCiAgImZyYWM1OCI6Ilx1MjE1RCIsCiAgImZyYWM3OCI6Ilx1MjE1RSIsCiAgImZyYXNsIjoiXHUyMDQ0IiwKICAiZnJvd24iOiJcdTIzMjIiLAogICJGc2NyIjoiXHUyMTMxIiwKICAiZnNjciI6Ilx1RDgzNVx1RENCQiIsCiAgImdhY3V0ZSI6Ilx1MDFGNSIsCiAgIkdhbW1hIjoiXHUwMzkzIiwKICAiZ2FtbWEiOiJcdTAzQjMiLAogICJHYW1tYWQiOiJcdTAzREMiLAogICJnYW1tYWQiOiJcdTAzREQiLAogICJnYXAiOiJcdTJBODYiLAogICJHYnJldmUiOiJcdTAxMUUiLAogICJnYnJldmUiOiJcdTAxMUYiLAogICJHY2VkaWwiOiJcdTAxMjIiLAogICJHY2lyYyI6Ilx1MDExQyIsCiAgImdjaXJjIjoiXHUwMTFEIiwKICAiR2N5IjoiXHUwNDEzIiwKICAiZ2N5IjoiXHUwNDMzIiwKICAiR2RvdCI6Ilx1MDEyMCIsCiAgImdkb3QiOiJcdTAxMjEiLAogICJnRSI6Ilx1MjI2NyIsCiAgImdlIjoiXHUyMjY1IiwKICAiZ0VsIjoiXHUyQThDIiwKICAiZ2VsIjoiXHUyMkRCIiwKICAiZ2VxIjoiXHUyMjY1IiwKICAiZ2VxcSI6Ilx1MjI2NyIsCiAgImdlcXNsYW50IjoiXHUyQTdFIiwKICAiZ2VzIjoiXHUyQTdFIiwKICAiZ2VzY2MiOiJcdTJBQTkiLAogICJnZXNkb3QiOiJcdTJBODAiLAogICJnZXNkb3RvIjoiXHUyQTgyIiwKICAiZ2VzZG90b2wiOiJcdTJBODQiLAogICJnZXNsIjoiXHUyMkRCXHVGRTAwIiwKICAiZ2VzbGVzIjoiXHUyQTk0IiwKICAiR2ZyIjoiXHVEODM1XHVERDBBIiwKICAiZ2ZyIjoiXHVEODM1XHVERDI0IiwKICAiR2ciOiJcdTIyRDkiLAogICJnZyI6Ilx1MjI2QiIsCiAgImdnZyI6Ilx1MjJEOSIsCiAgImdpbWVsIjoiXHUyMTM3IiwKICAiR0pjeSI6Ilx1MDQwMyIsCiAgImdqY3kiOiJcdTA0NTMiLAogICJnbCI6Ilx1MjI3NyIsCiAgImdsYSI6Ilx1MkFBNSIsCiAgImdsRSI6Ilx1MkE5MiIsCiAgImdsaiI6Ilx1MkFBNCIsCiAgImduYXAiOiJcdTJBOEEiLAogICJnbmFwcHJveCI6Ilx1MkE4QSIsCiAgImduRSI6Ilx1MjI2OSIsCiAgImduZSI6Ilx1MkE4OCIsCiAgImduZXEiOiJcdTJBODgiLAogICJnbmVxcSI6Ilx1MjI2OSIsCiAgImduc2ltIjoiXHUyMkU3IiwKICAiR29wZiI6Ilx1RDgzNVx1REQzRSIsCiAgImdvcGYiOiJcdUQ4MzVcdURENTgiLAogICJncmF2ZSI6Ilx1MDA2MCIsCiAgIkdyZWF0ZXJFcXVhbCI6Ilx1MjI2NSIsCiAgIkdyZWF0ZXJFcXVhbExlc3MiOiJcdTIyREIiLAogICJHcmVhdGVyRnVsbEVxdWFsIjoiXHUyMjY3IiwKICAiR3JlYXRlckdyZWF0ZXIiOiJcdTJBQTIiLAogICJHcmVhdGVyTGVzcyI6Ilx1MjI3NyIsCiAgIkdyZWF0ZXJTbGFudEVxdWFsIjoiXHUyQTdFIiwKICAiR3JlYXRlclRpbGRlIjoiXHUyMjczIiwKICAiR3NjciI6Ilx1RDgzNVx1RENBMiIsCiAgImdzY3IiOiJcdTIxMEEiLAogICJnc2ltIjoiXHUyMjczIiwKICAiZ3NpbWUiOiJcdTJBOEUiLAogICJnc2ltbCI6Ilx1MkE5MCIsCiAgIkdUIjoiXHUwMDNFIiwKICAiR3QiOiJcdTIyNkIiLAogICJndCI6Ilx1MDAzRSIsCiAgImd0Y2MiOiJcdTJBQTciLAogICJndGNpciI6Ilx1MkE3QSIsCiAgImd0ZG90IjoiXHUyMkQ3IiwKICAiZ3RsUGFyIjoiXHUyOTk1IiwKICAiZ3RxdWVzdCI6Ilx1MkE3QyIsCiAgImd0cmFwcHJveCI6Ilx1MkE4NiIsCiAgImd0cmFyciI6Ilx1Mjk3OCIsCiAgImd0cmRvdCI6Ilx1MjJENyIsCiAgImd0cmVxbGVzcyI6Ilx1MjJEQiIsCiAgImd0cmVxcWxlc3MiOiJcdTJBOEMiLAogICJndHJsZXNzIjoiXHUyMjc3IiwKICAiZ3Ryc2ltIjoiXHUyMjczIiwKICAiZ3ZlcnRuZXFxIjoiXHUyMjY5XHVGRTAwIiwKICAiZ3ZuRSI6Ilx1MjI2OVx1RkUwMCIsCiAgIkhhY2VrIjoiXHUwMkM3IiwKICAiaGFpcnNwIjoiXHUyMDBBIiwKICAiaGFsZiI6Ilx1MDBCRCIsCiAgImhhbWlsdCI6Ilx1MjEwQiIsCiAgIkhBUkRjeSI6Ilx1MDQyQSIsCiAgImhhcmRjeSI6Ilx1MDQ0QSIsCiAgImhBcnIiOiJcdTIxRDQiLAogICJoYXJyIjoiXHUyMTk0IiwKICAiaGFycmNpciI6Ilx1Mjk0OCIsCiAgImhhcnJ3IjoiXHUyMUFEIiwKICAiSGF0IjoiXHUwMDVFIiwKICAiaGJhciI6Ilx1MjEwRiIsCiAgIkhjaXJjIjoiXHUwMTI0IiwKICAiaGNpcmMiOiJcdTAxMjUiLAogICJoZWFydHMiOiJcdTI2NjUiLAogICJoZWFydHN1aXQiOiJcdTI2NjUiLAogICJoZWxsaXAiOiJcdTIwMjYiLAogICJoZXJjb24iOiJcdTIyQjkiLAogICJIZnIiOiJcdTIxMEMiLAogICJoZnIiOiJcdUQ4MzVcdUREMjUiLAogICJIaWxiZXJ0U3BhY2UiOiJcdTIxMEIiLAogICJoa3NlYXJvdyI6Ilx1MjkyNSIsCiAgImhrc3dhcm93IjoiXHUyOTI2IiwKICAiaG9hcnIiOiJcdTIxRkYiLAogICJob210aHQiOiJcdTIyM0IiLAogICJob29rbGVmdGFycm93IjoiXHUyMUE5IiwKICAiaG9va3JpZ2h0YXJyb3ciOiJcdTIxQUEiLAogICJIb3BmIjoiXHUyMTBEIiwKICAiaG9wZiI6Ilx1RDgzNVx1REQ1OSIsCiAgImhvcmJhciI6Ilx1MjAxNSIsCiAgIkhvcml6b250YWxMaW5lIjoiXHUyNTAwIiwKICAiSHNjciI6Ilx1MjEwQiIsCiAgImhzY3IiOiJcdUQ4MzVcdURDQkQiLAogICJoc2xhc2giOiJcdTIxMEYiLAogICJIc3Ryb2siOiJcdTAxMjYiLAogICJoc3Ryb2siOiJcdTAxMjciLAogICJIdW1wRG93bkh1bXAiOiJcdTIyNEUiLAogICJIdW1wRXF1YWwiOiJcdTIyNEYiLAogICJoeWJ1bGwiOiJcdTIwNDMiLAogICJoeXBoZW4iOiJcdTIwMTAiLAogICJJYWN1dGUiOiJcdTAwQ0QiLAogICJpYWN1dGUiOiJcdTAwRUQiLAogICJpYyI6Ilx1MjA2MyIsCiAgIkljaXJjIjoiXHUwMENFIiwKICAiaWNpcmMiOiJcdTAwRUUiLAogICJJY3kiOiJcdTA0MTgiLAogICJpY3kiOiJcdTA0MzgiLAogICJJZG90IjoiXHUwMTMwIiwKICAiSUVjeSI6Ilx1MDQxNSIsCiAgImllY3kiOiJcdTA0MzUiLAogICJpZXhjbCI6Ilx1MDBBMSIsCiAgImlmZiI6Ilx1MjFENCIsCiAgIklmciI6Ilx1MjExMSIsCiAgImlmciI6Ilx1RDgzNVx1REQyNiIsCiAgIklncmF2ZSI6Ilx1MDBDQyIsCiAgImlncmF2ZSI6Ilx1MDBFQyIsCiAgImlpIjoiXHUyMTQ4IiwKICAiaWlpaW50IjoiXHUyQTBDIiwKICAiaWlpbnQiOiJcdTIyMkQiLAogICJpaW5maW4iOiJcdTI5REMiLAogICJpaW90YSI6Ilx1MjEyOSIsCiAgIklKbGlnIjoiXHUwMTMyIiwKICAiaWpsaWciOiJcdTAxMzMiLAogICJJbSI6Ilx1MjExMSIsCiAgIkltYWNyIjoiXHUwMTJBIiwKICAiaW1hY3IiOiJcdTAxMkIiLAogICJpbWFnZSI6Ilx1MjExMSIsCiAgIkltYWdpbmFyeUkiOiJcdTIxNDgiLAogICJpbWFnbGluZSI6Ilx1MjExMCIsCiAgImltYWdwYXJ0IjoiXHUyMTExIiwKICAiaW1hdGgiOiJcdTAxMzEiLAogICJpbW9mIjoiXHUyMkI3IiwKICAiaW1wZWQiOiJcdTAxQjUiLAogICJJbXBsaWVzIjoiXHUyMUQyIiwKICAiaW4iOiJcdTIyMDgiLAogICJpbmNhcmUiOiJcdTIxMDUiLAogICJpbmZpbiI6Ilx1MjIxRSIsCiAgImluZmludGllIjoiXHUyOUREIiwKICAiaW5vZG90IjoiXHUwMTMxIiwKICAiSW50IjoiXHUyMjJDIiwKICAiaW50IjoiXHUyMjJCIiwKICAiaW50Y2FsIjoiXHUyMkJBIiwKICAiaW50ZWdlcnMiOiJcdTIxMjQiLAogICJJbnRlZ3JhbCI6Ilx1MjIyQiIsCiAgImludGVyY2FsIjoiXHUyMkJBIiwKICAiSW50ZXJzZWN0aW9uIjoiXHUyMkMyIiwKICAiaW50bGFyaGsiOiJcdTJBMTciLAogICJpbnRwcm9kIjoiXHUyQTNDIiwKICAiSW52aXNpYmxlQ29tbWEiOiJcdTIwNjMiLAogICJJbnZpc2libGVUaW1lcyI6Ilx1MjA2MiIsCiAgIklPY3kiOiJcdTA0MDEiLAogICJpb2N5IjoiXHUwNDUxIiwKICAiSW9nb24iOiJcdTAxMkUiLAogICJpb2dvbiI6Ilx1MDEyRiIsCiAgIklvcGYiOiJcdUQ4MzVcdURENDAiLAogICJpb3BmIjoiXHVEODM1XHVERDVBIiwKICAiSW90YSI6Ilx1MDM5OSIsCiAgImlvdGEiOiJcdTAzQjkiLAogICJpcHJvZCI6Ilx1MkEzQyIsCiAgImlxdWVzdCI6Ilx1MDBCRiIsCiAgIklzY3IiOiJcdTIxMTAiLAogICJpc2NyIjoiXHVEODM1XHVEQ0JFIiwKICAiaXNpbiI6Ilx1MjIwOCIsCiAgImlzaW5kb3QiOiJcdTIyRjUiLAogICJpc2luRSI6Ilx1MjJGOSIsCiAgImlzaW5zIjoiXHUyMkY0IiwKICAiaXNpbnN2IjoiXHUyMkYzIiwKICAiaXNpbnYiOiJcdTIyMDgiLAogICJpdCI6Ilx1MjA2MiIsCiAgIkl0aWxkZSI6Ilx1MDEyOCIsCiAgIml0aWxkZSI6Ilx1MDEyOSIsCiAgIkl1a2N5IjoiXHUwNDA2IiwKICAiaXVrY3kiOiJcdTA0NTYiLAogICJJdW1sIjoiXHUwMENGIiwKICAiaXVtbCI6Ilx1MDBFRiIsCiAgIkpjaXJjIjoiXHUwMTM0IiwKICAiamNpcmMiOiJcdTAxMzUiLAogICJKY3kiOiJcdTA0MTkiLAogICJqY3kiOiJcdTA0MzkiLAogICJKZnIiOiJcdUQ4MzVcdUREMEQiLAogICJqZnIiOiJcdUQ4MzVcdUREMjciLAogICJqbWF0aCI6Ilx1MDIzNyIsCiAgIkpvcGYiOiJcdUQ4MzVcdURENDEiLAogICJqb3BmIjoiXHVEODM1XHVERDVCIiwKICAiSnNjciI6Ilx1RDgzNVx1RENBNSIsCiAgImpzY3IiOiJcdUQ4MzVcdURDQkYiLAogICJKc2VyY3kiOiJcdTA0MDgiLAogICJqc2VyY3kiOiJcdTA0NTgiLAogICJKdWtjeSI6Ilx1MDQwNCIsCiAgImp1a2N5IjoiXHUwNDU0IiwKICAiS2FwcGEiOiJcdTAzOUEiLAogICJrYXBwYSI6Ilx1MDNCQSIsCiAgImthcHBhdiI6Ilx1MDNGMCIsCiAgIktjZWRpbCI6Ilx1MDEzNiIsCiAgImtjZWRpbCI6Ilx1MDEzNyIsCiAgIktjeSI6Ilx1MDQxQSIsCiAgImtjeSI6Ilx1MDQzQSIsCiAgIktmciI6Ilx1RDgzNVx1REQwRSIsCiAgImtmciI6Ilx1RDgzNVx1REQyOCIsCiAgImtncmVlbiI6Ilx1MDEzOCIsCiAgIktIY3kiOiJcdTA0MjUiLAogICJraGN5IjoiXHUwNDQ1IiwKICAiS0pjeSI6Ilx1MDQwQyIsCiAgImtqY3kiOiJcdTA0NUMiLAogICJLb3BmIjoiXHVEODM1XHVERDQyIiwKICAia29wZiI6Ilx1RDgzNVx1REQ1QyIsCiAgIktzY3IiOiJcdUQ4MzVcdURDQTYiLAogICJrc2NyIjoiXHVEODM1XHVEQ0MwIiwKICAibEFhcnIiOiJcdTIxREEiLAogICJMYWN1dGUiOiJcdTAxMzkiLAogICJsYWN1dGUiOiJcdTAxM0EiLAogICJsYWVtcHR5diI6Ilx1MjlCNCIsCiAgImxhZ3JhbiI6Ilx1MjExMiIsCiAgIkxhbWJkYSI6Ilx1MDM5QiIsCiAgImxhbWJkYSI6Ilx1MDNCQiIsCiAgIkxhbmciOiJcdTI3RUEiLAogICJsYW5nIjoiXHUyN0U4IiwKICAibGFuZ2QiOiJcdTI5OTEiLAogICJsYW5nbGUiOiJcdTI3RTgiLAogICJsYXAiOiJcdTJBODUiLAogICJMYXBsYWNldHJmIjoiXHUyMTEyIiwKICAibGFxdW8iOiJcdTAwQUIiLAogICJMYXJyIjoiXHUyMTlFIiwKICAibEFyciI6Ilx1MjFEMCIsCiAgImxhcnIiOiJcdTIxOTAiLAogICJsYXJyYiI6Ilx1MjFFNCIsCiAgImxhcnJiZnMiOiJcdTI5MUYiLAogICJsYXJyZnMiOiJcdTI5MUQiLAogICJsYXJyaGsiOiJcdTIxQTkiLAogICJsYXJybHAiOiJcdTIxQUIiLAogICJsYXJycGwiOiJcdTI5MzkiLAogICJsYXJyc2ltIjoiXHUyOTczIiwKICAibGFycnRsIjoiXHUyMUEyIiwKICAibGF0IjoiXHUyQUFCIiwKICAibEF0YWlsIjoiXHUyOTFCIiwKICAibGF0YWlsIjoiXHUyOTE5IiwKICAibGF0ZSI6Ilx1MkFBRCIsCiAgImxhdGVzIjoiXHUyQUFEXHVGRTAwIiwKICAibEJhcnIiOiJcdTI5MEUiLAogICJsYmFyciI6Ilx1MjkwQyIsCiAgImxiYnJrIjoiXHUyNzcyIiwKICAibGJyYWNlIjoiXHUwMDdCIiwKICAibGJyYWNrIjoiXHUwMDVCIiwKICAibGJya2UiOiJcdTI5OEIiLAogICJsYnJrc2xkIjoiXHUyOThGIiwKICAibGJya3NsdSI6Ilx1Mjk4RCIsCiAgIkxjYXJvbiI6Ilx1MDEzRCIsCiAgImxjYXJvbiI6Ilx1MDEzRSIsCiAgIkxjZWRpbCI6Ilx1MDEzQiIsCiAgImxjZWRpbCI6Ilx1MDEzQyIsCiAgImxjZWlsIjoiXHUyMzA4IiwKICAibGN1YiI6Ilx1MDA3QiIsCiAgIkxjeSI6Ilx1MDQxQiIsCiAgImxjeSI6Ilx1MDQzQiIsCiAgImxkY2EiOiJcdTI5MzYiLAogICJsZHF1byI6Ilx1MjAxQyIsCiAgImxkcXVvciI6Ilx1MjAxRSIsCiAgImxkcmRoYXIiOiJcdTI5NjciLAogICJsZHJ1c2hhciI6Ilx1Mjk0QiIsCiAgImxkc2giOiJcdTIxQjIiLAogICJsRSI6Ilx1MjI2NiIsCiAgImxlIjoiXHUyMjY0IiwKICAiTGVmdEFuZ2xlQnJhY2tldCI6Ilx1MjdFOCIsCiAgIkxlZnRBcnJvdyI6Ilx1MjE5MCIsCiAgIkxlZnRhcnJvdyI6Ilx1MjFEMCIsCiAgImxlZnRhcnJvdyI6Ilx1MjE5MCIsCiAgIkxlZnRBcnJvd0JhciI6Ilx1MjFFNCIsCiAgIkxlZnRBcnJvd1JpZ2h0QXJyb3ciOiJcdTIxQzYiLAogICJsZWZ0YXJyb3d0YWlsIjoiXHUyMUEyIiwKICAiTGVmdENlaWxpbmciOiJcdTIzMDgiLAogICJMZWZ0RG91YmxlQnJhY2tldCI6Ilx1MjdFNiIsCiAgIkxlZnREb3duVGVlVmVjdG9yIjoiXHUyOTYxIiwKICAiTGVmdERvd25WZWN0b3IiOiJcdTIxQzMiLAogICJMZWZ0RG93blZlY3RvckJhciI6Ilx1Mjk1OSIsCiAgIkxlZnRGbG9vciI6Ilx1MjMwQSIsCiAgImxlZnRoYXJwb29uZG93biI6Ilx1MjFCRCIsCiAgImxlZnRoYXJwb29udXAiOiJcdTIxQkMiLAogICJsZWZ0bGVmdGFycm93cyI6Ilx1MjFDNyIsCiAgIkxlZnRSaWdodEFycm93IjoiXHUyMTk0IiwKICAiTGVmdHJpZ2h0YXJyb3ciOiJcdTIxRDQiLAogICJsZWZ0cmlnaHRhcnJvdyI6Ilx1MjE5NCIsCiAgImxlZnRyaWdodGFycm93cyI6Ilx1MjFDNiIsCiAgImxlZnRyaWdodGhhcnBvb25zIjoiXHUyMUNCIiwKICAibGVmdHJpZ2h0c3F1aWdhcnJvdyI6Ilx1MjFBRCIsCiAgIkxlZnRSaWdodFZlY3RvciI6Ilx1Mjk0RSIsCiAgIkxlZnRUZWUiOiJcdTIyQTMiLAogICJMZWZ0VGVlQXJyb3ciOiJcdTIxQTQiLAogICJMZWZ0VGVlVmVjdG9yIjoiXHUyOTVBIiwKICAibGVmdHRocmVldGltZXMiOiJcdTIyQ0IiLAogICJMZWZ0VHJpYW5nbGUiOiJcdTIyQjIiLAogICJMZWZ0VHJpYW5nbGVCYXIiOiJcdTI5Q0YiLAogICJMZWZ0VHJpYW5nbGVFcXVhbCI6Ilx1MjJCNCIsCiAgIkxlZnRVcERvd25WZWN0b3IiOiJcdTI5NTEiLAogICJMZWZ0VXBUZWVWZWN0b3IiOiJcdTI5NjAiLAogICJMZWZ0VXBWZWN0b3IiOiJcdTIxQkYiLAogICJMZWZ0VXBWZWN0b3JCYXIiOiJcdTI5NTgiLAogICJMZWZ0VmVjdG9yIjoiXHUyMUJDIiwKICAiTGVmdFZlY3RvckJhciI6Ilx1Mjk1MiIsCiAgImxFZyI6Ilx1MkE4QiIsCiAgImxlZyI6Ilx1MjJEQSIsCiAgImxlcSI6Ilx1MjI2NCIsCiAgImxlcXEiOiJcdTIyNjYiLAogICJsZXFzbGFudCI6Ilx1MkE3RCIsCiAgImxlcyI6Ilx1MkE3RCIsCiAgImxlc2NjIjoiXHUyQUE4IiwKICAibGVzZG90IjoiXHUyQTdGIiwKICAibGVzZG90byI6Ilx1MkE4MSIsCiAgImxlc2RvdG9yIjoiXHUyQTgzIiwKICAibGVzZyI6Ilx1MjJEQVx1RkUwMCIsCiAgImxlc2dlcyI6Ilx1MkE5MyIsCiAgImxlc3NhcHByb3giOiJcdTJBODUiLAogICJsZXNzZG90IjoiXHUyMkQ2IiwKICAibGVzc2VxZ3RyIjoiXHUyMkRBIiwKICAibGVzc2VxcWd0ciI6Ilx1MkE4QiIsCiAgIkxlc3NFcXVhbEdyZWF0ZXIiOiJcdTIyREEiLAogICJMZXNzRnVsbEVxdWFsIjoiXHUyMjY2IiwKICAiTGVzc0dyZWF0ZXIiOiJcdTIyNzYiLAogICJsZXNzZ3RyIjoiXHUyMjc2IiwKICAiTGVzc0xlc3MiOiJcdTJBQTEiLAogICJsZXNzc2ltIjoiXHUyMjcyIiwKICAiTGVzc1NsYW50RXF1YWwiOiJcdTJBN0QiLAogICJMZXNzVGlsZGUiOiJcdTIyNzIiLAogICJsZmlzaHQiOiJcdTI5N0MiLAogICJsZmxvb3IiOiJcdTIzMEEiLAogICJMZnIiOiJcdUQ4MzVcdUREMEYiLAogICJsZnIiOiJcdUQ4MzVcdUREMjkiLAogICJsZyI6Ilx1MjI3NiIsCiAgImxnRSI6Ilx1MkE5MSIsCiAgImxIYXIiOiJcdTI5NjIiLAogICJsaGFyZCI6Ilx1MjFCRCIsCiAgImxoYXJ1IjoiXHUyMUJDIiwKICAibGhhcnVsIjoiXHUyOTZBIiwKICAibGhibGsiOiJcdTI1ODQiLAogICJMSmN5IjoiXHUwNDA5IiwKICAibGpjeSI6Ilx1MDQ1OSIsCiAgIkxsIjoiXHUyMkQ4IiwKICAibGwiOiJcdTIyNkEiLAogICJsbGFyciI6Ilx1MjFDNyIsCiAgImxsY29ybmVyIjoiXHUyMzFFIiwKICAiTGxlZnRhcnJvdyI6Ilx1MjFEQSIsCiAgImxsaGFyZCI6Ilx1Mjk2QiIsCiAgImxsdHJpIjoiXHUyNUZBIiwKICAiTG1pZG90IjoiXHUwMTNGIiwKICAibG1pZG90IjoiXHUwMTQwIiwKICAibG1vdXN0IjoiXHUyM0IwIiwKICAibG1vdXN0YWNoZSI6Ilx1MjNCMCIsCiAgImxuYXAiOiJcdTJBODkiLAogICJsbmFwcHJveCI6Ilx1MkE4OSIsCiAgImxuRSI6Ilx1MjI2OCIsCiAgImxuZSI6Ilx1MkE4NyIsCiAgImxuZXEiOiJcdTJBODciLAogICJsbmVxcSI6Ilx1MjI2OCIsCiAgImxuc2ltIjoiXHUyMkU2IiwKICAibG9hbmciOiJcdTI3RUMiLAogICJsb2FyciI6Ilx1MjFGRCIsCiAgImxvYnJrIjoiXHUyN0U2IiwKICAiTG9uZ0xlZnRBcnJvdyI6Ilx1MjdGNSIsCiAgIkxvbmdsZWZ0YXJyb3ciOiJcdTI3RjgiLAogICJsb25nbGVmdGFycm93IjoiXHUyN0Y1IiwKICAiTG9uZ0xlZnRSaWdodEFycm93IjoiXHUyN0Y3IiwKICAiTG9uZ2xlZnRyaWdodGFycm93IjoiXHUyN0ZBIiwKICAibG9uZ2xlZnRyaWdodGFycm93IjoiXHUyN0Y3IiwKICAibG9uZ21hcHN0byI6Ilx1MjdGQyIsCiAgIkxvbmdSaWdodEFycm93IjoiXHUyN0Y2IiwKICAiTG9uZ3JpZ2h0YXJyb3ciOiJcdTI3RjkiLAogICJsb25ncmlnaHRhcnJvdyI6Ilx1MjdGNiIsCiAgImxvb3BhcnJvd2xlZnQiOiJcdTIxQUIiLAogICJsb29wYXJyb3dyaWdodCI6Ilx1MjFBQyIsCiAgImxvcGFyIjoiXHUyOTg1IiwKICAiTG9wZiI6Ilx1RDgzNVx1REQ0MyIsCiAgImxvcGYiOiJcdUQ4MzVcdURENUQiLAogICJsb3BsdXMiOiJcdTJBMkQiLAogICJsb3RpbWVzIjoiXHUyQTM0IiwKICAibG93YXN0IjoiXHUyMjE3IiwKICAibG93YmFyIjoiXHUwMDVGIiwKICAiTG93ZXJMZWZ0QXJyb3ciOiJcdTIxOTkiLAogICJMb3dlclJpZ2h0QXJyb3ciOiJcdTIxOTgiLAogICJsb3oiOiJcdTI1Q0EiLAogICJsb3plbmdlIjoiXHUyNUNBIiwKICAibG96ZiI6Ilx1MjlFQiIsCiAgImxwYXIiOiJcdTAwMjgiLAogICJscGFybHQiOiJcdTI5OTMiLAogICJscmFyciI6Ilx1MjFDNiIsCiAgImxyY29ybmVyIjoiXHUyMzFGIiwKICAibHJoYXIiOiJcdTIxQ0IiLAogICJscmhhcmQiOiJcdTI5NkQiLAogICJscm0iOiJcdTIwMEUiLAogICJscnRyaSI6Ilx1MjJCRiIsCiAgImxzYXF1byI6Ilx1MjAzOSIsCiAgIkxzY3IiOiJcdTIxMTIiLAogICJsc2NyIjoiXHVEODM1XHVEQ0MxIiwKICAiTHNoIjoiXHUyMUIwIiwKICAibHNoIjoiXHUyMUIwIiwKICAibHNpbSI6Ilx1MjI3MiIsCiAgImxzaW1lIjoiXHUyQThEIiwKICAibHNpbWciOiJcdTJBOEYiLAogICJsc3FiIjoiXHUwMDVCIiwKICAibHNxdW8iOiJcdTIwMTgiLAogICJsc3F1b3IiOiJcdTIwMUEiLAogICJMc3Ryb2siOiJcdTAxNDEiLAogICJsc3Ryb2siOiJcdTAxNDIiLAogICJMVCI6Ilx1MDAzQyIsCiAgIkx0IjoiXHUyMjZBIiwKICAibHQiOiJcdTAwM0MiLAogICJsdGNjIjoiXHUyQUE2IiwKICAibHRjaXIiOiJcdTJBNzkiLAogICJsdGRvdCI6Ilx1MjJENiIsCiAgImx0aHJlZSI6Ilx1MjJDQiIsCiAgImx0aW1lcyI6Ilx1MjJDOSIsCiAgImx0bGFyciI6Ilx1Mjk3NiIsCiAgImx0cXVlc3QiOiJcdTJBN0IiLAogICJsdHJpIjoiXHUyNUMzIiwKICAibHRyaWUiOiJcdTIyQjQiLAogICJsdHJpZiI6Ilx1MjVDMiIsCiAgImx0clBhciI6Ilx1Mjk5NiIsCiAgImx1cmRzaGFyIjoiXHUyOTRBIiwKICAibHVydWhhciI6Ilx1Mjk2NiIsCiAgImx2ZXJ0bmVxcSI6Ilx1MjI2OFx1RkUwMCIsCiAgImx2bkUiOiJcdTIyNjhcdUZFMDAiLAogICJtYWNyIjoiXHUwMEFGIiwKICAibWFsZSI6Ilx1MjY0MiIsCiAgIm1hbHQiOiJcdTI3MjAiLAogICJtYWx0ZXNlIjoiXHUyNzIwIiwKICAiTWFwIjoiXHUyOTA1IiwKICAibWFwIjoiXHUyMUE2IiwKICAibWFwc3RvIjoiXHUyMUE2IiwKICAibWFwc3RvZG93biI6Ilx1MjFBNyIsCiAgIm1hcHN0b2xlZnQiOiJcdTIxQTQiLAogICJtYXBzdG91cCI6Ilx1MjFBNSIsCiAgIm1hcmtlciI6Ilx1MjVBRSIsCiAgIm1jb21tYSI6Ilx1MkEyOSIsCiAgIk1jeSI6Ilx1MDQxQyIsCiAgIm1jeSI6Ilx1MDQzQyIsCiAgIm1kYXNoIjoiXHUyMDE0IiwKICAibUREb3QiOiJcdTIyM0EiLAogICJtZWFzdXJlZGFuZ2xlIjoiXHUyMjIxIiwKICAiTWVkaXVtU3BhY2UiOiJcdTIwNUYiLAogICJNZWxsaW50cmYiOiJcdTIxMzMiLAogICJNZnIiOiJcdUQ4MzVcdUREMTAiLAogICJtZnIiOiJcdUQ4MzVcdUREMkEiLAogICJtaG8iOiJcdTIxMjciLAogICJtaWNybyI6Ilx1MDBCNSIsCiAgIm1pZCI6Ilx1MjIyMyIsCiAgIm1pZGFzdCI6Ilx1MDAyQSIsCiAgIm1pZGNpciI6Ilx1MkFGMCIsCiAgIm1pZGRvdCI6Ilx1MDBCNyIsCiAgIm1pbnVzIjoiXHUyMjEyIiwKICAibWludXNiIjoiXHUyMjlGIiwKICAibWludXNkIjoiXHUyMjM4IiwKICAibWludXNkdSI6Ilx1MkEyQSIsCiAgIk1pbnVzUGx1cyI6Ilx1MjIxMyIsCiAgIm1sY3AiOiJcdTJBREIiLAogICJtbGRyIjoiXHUyMDI2IiwKICAibW5wbHVzIjoiXHUyMjEzIiwKICAibW9kZWxzIjoiXHUyMkE3IiwKICAiTW9wZiI6Ilx1RDgzNVx1REQ0NCIsCiAgIm1vcGYiOiJcdUQ4MzVcdURENUUiLAogICJtcCI6Ilx1MjIxMyIsCiAgIk1zY3IiOiJcdTIxMzMiLAogICJtc2NyIjoiXHVEODM1XHVEQ0MyIiwKICAibXN0cG9zIjoiXHUyMjNFIiwKICAiTXUiOiJcdTAzOUMiLAogICJtdSI6Ilx1MDNCQyIsCiAgIm11bHRpbWFwIjoiXHUyMkI4IiwKICAibXVtYXAiOiJcdTIyQjgiLAogICJuYWJsYSI6Ilx1MjIwNyIsCiAgIk5hY3V0ZSI6Ilx1MDE0MyIsCiAgIm5hY3V0ZSI6Ilx1MDE0NCIsCiAgIm5hbmciOiJcdTIyMjBcdTIwRDIiLAogICJuYXAiOiJcdTIyNDkiLAogICJuYXBFIjoiXHUyQTcwXHUwMzM4IiwKICAibmFwaWQiOiJcdTIyNEJcdTAzMzgiLAogICJuYXBvcyI6Ilx1MDE0OSIsCiAgIm5hcHByb3giOiJcdTIyNDkiLAogICJuYXR1ciI6Ilx1MjY2RSIsCiAgIm5hdHVyYWwiOiJcdTI2NkUiLAogICJuYXR1cmFscyI6Ilx1MjExNSIsCiAgIm5ic3AiOiJcdTAwQTAiLAogICJuYnVtcCI6Ilx1MjI0RVx1MDMzOCIsCiAgIm5idW1wZSI6Ilx1MjI0Rlx1MDMzOCIsCiAgIm5jYXAiOiJcdTJBNDMiLAogICJOY2Fyb24iOiJcdTAxNDciLAogICJuY2Fyb24iOiJcdTAxNDgiLAogICJOY2VkaWwiOiJcdTAxNDUiLAogICJuY2VkaWwiOiJcdTAxNDYiLAogICJuY29uZyI6Ilx1MjI0NyIsCiAgIm5jb25nZG90IjoiXHUyQTZEXHUwMzM4IiwKICAibmN1cCI6Ilx1MkE0MiIsCiAgIk5jeSI6Ilx1MDQxRCIsCiAgIm5jeSI6Ilx1MDQzRCIsCiAgIm5kYXNoIjoiXHUyMDEzIiwKICAibmUiOiJcdTIyNjAiLAogICJuZWFyaGsiOiJcdTI5MjQiLAogICJuZUFyciI6Ilx1MjFENyIsCiAgIm5lYXJyIjoiXHUyMTk3IiwKICAibmVhcnJvdyI6Ilx1MjE5NyIsCiAgIm5lZG90IjoiXHUyMjUwXHUwMzM4IiwKICAiTmVnYXRpdmVNZWRpdW1TcGFjZSI6Ilx1MjAwQiIsCiAgIk5lZ2F0aXZlVGhpY2tTcGFjZSI6Ilx1MjAwQiIsCiAgIk5lZ2F0aXZlVGhpblNwYWNlIjoiXHUyMDBCIiwKICAiTmVnYXRpdmVWZXJ5VGhpblNwYWNlIjoiXHUyMDBCIiwKICAibmVxdWl2IjoiXHUyMjYyIiwKICAibmVzZWFyIjoiXHUyOTI4IiwKICAibmVzaW0iOiJcdTIyNDJcdTAzMzgiLAogICJOZXN0ZWRHcmVhdGVyR3JlYXRlciI6Ilx1MjI2QiIsCiAgIk5lc3RlZExlc3NMZXNzIjoiXHUyMjZBIiwKICAiTmV3TGluZSI6Ilx1MDAwQSIsCiAgIm5leGlzdCI6Ilx1MjIwNCIsCiAgIm5leGlzdHMiOiJcdTIyMDQiLAogICJOZnIiOiJcdUQ4MzVcdUREMTEiLAogICJuZnIiOiJcdUQ4MzVcdUREMkIiLAogICJuZ0UiOiJcdTIyNjdcdTAzMzgiLAogICJuZ2UiOiJcdTIyNzEiLAogICJuZ2VxIjoiXHUyMjcxIiwKICAibmdlcXEiOiJcdTIyNjdcdTAzMzgiLAogICJuZ2Vxc2xhbnQiOiJcdTJBN0VcdTAzMzgiLAogICJuZ2VzIjoiXHUyQTdFXHUwMzM4IiwKICAibkdnIjoiXHUyMkQ5XHUwMzM4IiwKICAibmdzaW0iOiJcdTIyNzUiLAogICJuR3QiOiJcdTIyNkJcdTIwRDIiLAogICJuZ3QiOiJcdTIyNkYiLAogICJuZ3RyIjoiXHUyMjZGIiwKICAibkd0diI6Ilx1MjI2Qlx1MDMzOCIsCiAgIm5oQXJyIjoiXHUyMUNFIiwKICAibmhhcnIiOiJcdTIxQUUiLAogICJuaHBhciI6Ilx1MkFGMiIsCiAgIm5pIjoiXHUyMjBCIiwKICAibmlzIjoiXHUyMkZDIiwKICAibmlzZCI6Ilx1MjJGQSIsCiAgIm5pdiI6Ilx1MjIwQiIsCiAgIk5KY3kiOiJcdTA0MEEiLAogICJuamN5IjoiXHUwNDVBIiwKICAibmxBcnIiOiJcdTIxQ0QiLAogICJubGFyciI6Ilx1MjE5QSIsCiAgIm5sZHIiOiJcdTIwMjUiLAogICJubEUiOiJcdTIyNjZcdTAzMzgiLAogICJubGUiOiJcdTIyNzAiLAogICJuTGVmdGFycm93IjoiXHUyMUNEIiwKICAibmxlZnRhcnJvdyI6Ilx1MjE5QSIsCiAgIm5MZWZ0cmlnaHRhcnJvdyI6Ilx1MjFDRSIsCiAgIm5sZWZ0cmlnaHRhcnJvdyI6Ilx1MjFBRSIsCiAgIm5sZXEiOiJcdTIyNzAiLAogICJubGVxcSI6Ilx1MjI2Nlx1MDMzOCIsCiAgIm5sZXFzbGFudCI6Ilx1MkE3RFx1MDMzOCIsCiAgIm5sZXMiOiJcdTJBN0RcdTAzMzgiLAogICJubGVzcyI6Ilx1MjI2RSIsCiAgIm5MbCI6Ilx1MjJEOFx1MDMzOCIsCiAgIm5sc2ltIjoiXHUyMjc0IiwKICAibkx0IjoiXHUyMjZBXHUyMEQyIiwKICAibmx0IjoiXHUyMjZFIiwKICAibmx0cmkiOiJcdTIyRUEiLAogICJubHRyaWUiOiJcdTIyRUMiLAogICJuTHR2IjoiXHUyMjZBXHUwMzM4IiwKICAibm1pZCI6Ilx1MjIyNCIsCiAgIk5vQnJlYWsiOiJcdTIwNjAiLAogICJOb25CcmVha2luZ1NwYWNlIjoiXHUwMEEwIiwKICAiTm9wZiI6Ilx1MjExNSIsCiAgIm5vcGYiOiJcdUQ4MzVcdURENUYiLAogICJOb3QiOiJcdTJBRUMiLAogICJub3QiOiJcdTAwQUMiLAogICJOb3RDb25ncnVlbnQiOiJcdTIyNjIiLAogICJOb3RDdXBDYXAiOiJcdTIyNkQiLAogICJOb3REb3VibGVWZXJ0aWNhbEJhciI6Ilx1MjIyNiIsCiAgIk5vdEVsZW1lbnQiOiJcdTIyMDkiLAogICJOb3RFcXVhbCI6Ilx1MjI2MCIsCiAgIk5vdEVxdWFsVGlsZGUiOiJcdTIyNDJcdTAzMzgiLAogICJOb3RFeGlzdHMiOiJcdTIyMDQiLAogICJOb3RHcmVhdGVyIjoiXHUyMjZGIiwKICAiTm90R3JlYXRlckVxdWFsIjoiXHUyMjcxIiwKICAiTm90R3JlYXRlckZ1bGxFcXVhbCI6Ilx1MjI2N1x1MDMzOCIsCiAgIk5vdEdyZWF0ZXJHcmVhdGVyIjoiXHUyMjZCXHUwMzM4IiwKICAiTm90R3JlYXRlckxlc3MiOiJcdTIyNzkiLAogICJOb3RHcmVhdGVyU2xhbnRFcXVhbCI6Ilx1MkE3RVx1MDMzOCIsCiAgIk5vdEdyZWF0ZXJUaWxkZSI6Ilx1MjI3NSIsCiAgIk5vdEh1bXBEb3duSHVtcCI6Ilx1MjI0RVx1MDMzOCIsCiAgIk5vdEh1bXBFcXVhbCI6Ilx1MjI0Rlx1MDMzOCIsCiAgIm5vdGluIjoiXHUyMjA5IiwKICAibm90aW5kb3QiOiJcdTIyRjVcdTAzMzgiLAogICJub3RpbkUiOiJcdTIyRjlcdTAzMzgiLAogICJub3RpbnZhIjoiXHUyMjA5IiwKICAibm90aW52YiI6Ilx1MjJGNyIsCiAgIm5vdGludmMiOiJcdTIyRjYiLAogICJOb3RMZWZ0VHJpYW5nbGUiOiJcdTIyRUEiLAogICJOb3RMZWZ0VHJpYW5nbGVCYXIiOiJcdTI5Q0ZcdTAzMzgiLAogICJOb3RMZWZ0VHJpYW5nbGVFcXVhbCI6Ilx1MjJFQyIsCiAgIk5vdExlc3MiOiJcdTIyNkUiLAogICJOb3RMZXNzRXF1YWwiOiJcdTIyNzAiLAogICJOb3RMZXNzR3JlYXRlciI6Ilx1MjI3OCIsCiAgIk5vdExlc3NMZXNzIjoiXHUyMjZBXHUwMzM4IiwKICAiTm90TGVzc1NsYW50RXF1YWwiOiJcdTJBN0RcdTAzMzgiLAogICJOb3RMZXNzVGlsZGUiOiJcdTIyNzQiLAogICJOb3ROZXN0ZWRHcmVhdGVyR3JlYXRlciI6Ilx1MkFBMlx1MDMzOCIsCiAgIk5vdE5lc3RlZExlc3NMZXNzIjoiXHUyQUExXHUwMzM4IiwKICAibm90bmkiOiJcdTIyMEMiLAogICJub3RuaXZhIjoiXHUyMjBDIiwKICAibm90bml2YiI6Ilx1MjJGRSIsCiAgIm5vdG5pdmMiOiJcdTIyRkQiLAogICJOb3RQcmVjZWRlcyI6Ilx1MjI4MCIsCiAgIk5vdFByZWNlZGVzRXF1YWwiOiJcdTJBQUZcdTAzMzgiLAogICJOb3RQcmVjZWRlc1NsYW50RXF1YWwiOiJcdTIyRTAiLAogICJOb3RSZXZlcnNlRWxlbWVudCI6Ilx1MjIwQyIsCiAgIk5vdFJpZ2h0VHJpYW5nbGUiOiJcdTIyRUIiLAogICJOb3RSaWdodFRyaWFuZ2xlQmFyIjoiXHUyOUQwXHUwMzM4IiwKICAiTm90UmlnaHRUcmlhbmdsZUVxdWFsIjoiXHUyMkVEIiwKICAiTm90U3F1YXJlU3Vic2V0IjoiXHUyMjhGXHUwMzM4IiwKICAiTm90U3F1YXJlU3Vic2V0RXF1YWwiOiJcdTIyRTIiLAogICJOb3RTcXVhcmVTdXBlcnNldCI6Ilx1MjI5MFx1MDMzOCIsCiAgIk5vdFNxdWFyZVN1cGVyc2V0RXF1YWwiOiJcdTIyRTMiLAogICJOb3RTdWJzZXQiOiJcdTIyODJcdTIwRDIiLAogICJOb3RTdWJzZXRFcXVhbCI6Ilx1MjI4OCIsCiAgIk5vdFN1Y2NlZWRzIjoiXHUyMjgxIiwKICAiTm90U3VjY2VlZHNFcXVhbCI6Ilx1MkFCMFx1MDMzOCIsCiAgIk5vdFN1Y2NlZWRzU2xhbnRFcXVhbCI6Ilx1MjJFMSIsCiAgIk5vdFN1Y2NlZWRzVGlsZGUiOiJcdTIyN0ZcdTAzMzgiLAogICJOb3RTdXBlcnNldCI6Ilx1MjI4M1x1MjBEMiIsCiAgIk5vdFN1cGVyc2V0RXF1YWwiOiJcdTIyODkiLAogICJOb3RUaWxkZSI6Ilx1MjI0MSIsCiAgIk5vdFRpbGRlRXF1YWwiOiJcdTIyNDQiLAogICJOb3RUaWxkZUZ1bGxFcXVhbCI6Ilx1MjI0NyIsCiAgIk5vdFRpbGRlVGlsZGUiOiJcdTIyNDkiLAogICJOb3RWZXJ0aWNhbEJhciI6Ilx1MjIyNCIsCiAgIm5wYXIiOiJcdTIyMjYiLAogICJucGFyYWxsZWwiOiJcdTIyMjYiLAogICJucGFyc2wiOiJcdTJBRkRcdTIwRTUiLAogICJucGFydCI6Ilx1MjIwMlx1MDMzOCIsCiAgIm5wb2xpbnQiOiJcdTJBMTQiLAogICJucHIiOiJcdTIyODAiLAogICJucHJjdWUiOiJcdTIyRTAiLAogICJucHJlIjoiXHUyQUFGXHUwMzM4IiwKICAibnByZWMiOiJcdTIyODAiLAogICJucHJlY2VxIjoiXHUyQUFGXHUwMzM4IiwKICAibnJBcnIiOiJcdTIxQ0YiLAogICJucmFyciI6Ilx1MjE5QiIsCiAgIm5yYXJyYyI6Ilx1MjkzM1x1MDMzOCIsCiAgIm5yYXJydyI6Ilx1MjE5RFx1MDMzOCIsCiAgIm5SaWdodGFycm93IjoiXHUyMUNGIiwKICAibnJpZ2h0YXJyb3ciOiJcdTIxOUIiLAogICJucnRyaSI6Ilx1MjJFQiIsCiAgIm5ydHJpZSI6Ilx1MjJFRCIsCiAgIm5zYyI6Ilx1MjI4MSIsCiAgIm5zY2N1ZSI6Ilx1MjJFMSIsCiAgIm5zY2UiOiJcdTJBQjBcdTAzMzgiLAogICJOc2NyIjoiXHVEODM1XHVEQ0E5IiwKICAibnNjciI6Ilx1RDgzNVx1RENDMyIsCiAgIm5zaG9ydG1pZCI6Ilx1MjIyNCIsCiAgIm5zaG9ydHBhcmFsbGVsIjoiXHUyMjI2IiwKICAibnNpbSI6Ilx1MjI0MSIsCiAgIm5zaW1lIjoiXHUyMjQ0IiwKICAibnNpbWVxIjoiXHUyMjQ0IiwKICAibnNtaWQiOiJcdTIyMjQiLAogICJuc3BhciI6Ilx1MjIyNiIsCiAgIm5zcXN1YmUiOiJcdTIyRTIiLAogICJuc3FzdXBlIjoiXHUyMkUzIiwKICAibnN1YiI6Ilx1MjI4NCIsCiAgIm5zdWJFIjoiXHUyQUM1XHUwMzM4IiwKICAibnN1YmUiOiJcdTIyODgiLAogICJuc3Vic2V0IjoiXHUyMjgyXHUyMEQyIiwKICAibnN1YnNldGVxIjoiXHUyMjg4IiwKICAibnN1YnNldGVxcSI6Ilx1MkFDNVx1MDMzOCIsCiAgIm5zdWNjIjoiXHUyMjgxIiwKICAibnN1Y2NlcSI6Ilx1MkFCMFx1MDMzOCIsCiAgIm5zdXAiOiJcdTIyODUiLAogICJuc3VwRSI6Ilx1MkFDNlx1MDMzOCIsCiAgIm5zdXBlIjoiXHUyMjg5IiwKICAibnN1cHNldCI6Ilx1MjI4M1x1MjBEMiIsCiAgIm5zdXBzZXRlcSI6Ilx1MjI4OSIsCiAgIm5zdXBzZXRlcXEiOiJcdTJBQzZcdTAzMzgiLAogICJudGdsIjoiXHUyMjc5IiwKICAiTnRpbGRlIjoiXHUwMEQxIiwKICAibnRpbGRlIjoiXHUwMEYxIiwKICAibnRsZyI6Ilx1MjI3OCIsCiAgIm50cmlhbmdsZWxlZnQiOiJcdTIyRUEiLAogICJudHJpYW5nbGVsZWZ0ZXEiOiJcdTIyRUMiLAogICJudHJpYW5nbGVyaWdodCI6Ilx1MjJFQiIsCiAgIm50cmlhbmdsZXJpZ2h0ZXEiOiJcdTIyRUQiLAogICJOdSI6Ilx1MDM5RCIsCiAgIm51IjoiXHUwM0JEIiwKICAibnVtIjoiXHUwMDIzIiwKICAibnVtZXJvIjoiXHUyMTE2IiwKICAibnVtc3AiOiJcdTIwMDciLAogICJudmFwIjoiXHUyMjREXHUyMEQyIiwKICAiblZEYXNoIjoiXHUyMkFGIiwKICAiblZkYXNoIjoiXHUyMkFFIiwKICAibnZEYXNoIjoiXHUyMkFEIiwKICAibnZkYXNoIjoiXHUyMkFDIiwKICAibnZnZSI6Ilx1MjI2NVx1MjBEMiIsCiAgIm52Z3QiOiJcdTAwM0VcdTIwRDIiLAogICJudkhhcnIiOiJcdTI5MDQiLAogICJudmluZmluIjoiXHUyOURFIiwKICAibnZsQXJyIjoiXHUyOTAyIiwKICAibnZsZSI6Ilx1MjI2NFx1MjBEMiIsCiAgIm52bHQiOiJcdTAwM0NcdTIwRDIiLAogICJudmx0cmllIjoiXHUyMkI0XHUyMEQyIiwKICAibnZyQXJyIjoiXHUyOTAzIiwKICAibnZydHJpZSI6Ilx1MjJCNVx1MjBEMiIsCiAgIm52c2ltIjoiXHUyMjNDXHUyMEQyIiwKICAibndhcmhrIjoiXHUyOTIzIiwKICAibndBcnIiOiJcdTIxRDYiLAogICJud2FyciI6Ilx1MjE5NiIsCiAgIm53YXJyb3ciOiJcdTIxOTYiLAogICJud25lYXIiOiJcdTI5MjciLAogICJPYWN1dGUiOiJcdTAwRDMiLAogICJvYWN1dGUiOiJcdTAwRjMiLAogICJvYXN0IjoiXHUyMjlCIiwKICAib2NpciI6Ilx1MjI5QSIsCiAgIk9jaXJjIjoiXHUwMEQ0IiwKICAib2NpcmMiOiJcdTAwRjQiLAogICJPY3kiOiJcdTA0MUUiLAogICJvY3kiOiJcdTA0M0UiLAogICJvZGFzaCI6Ilx1MjI5RCIsCiAgIk9kYmxhYyI6Ilx1MDE1MCIsCiAgIm9kYmxhYyI6Ilx1MDE1MSIsCiAgIm9kaXYiOiJcdTJBMzgiLAogICJvZG90IjoiXHUyMjk5IiwKICAib2Rzb2xkIjoiXHUyOUJDIiwKICAiT0VsaWciOiJcdTAxNTIiLAogICJvZWxpZyI6Ilx1MDE1MyIsCiAgIm9mY2lyIjoiXHUyOUJGIiwKICAiT2ZyIjoiXHVEODM1XHVERDEyIiwKICAib2ZyIjoiXHVEODM1XHVERDJDIiwKICAib2dvbiI6Ilx1MDJEQiIsCiAgIk9ncmF2ZSI6Ilx1MDBEMiIsCiAgIm9ncmF2ZSI6Ilx1MDBGMiIsCiAgIm9ndCI6Ilx1MjlDMSIsCiAgIm9oYmFyIjoiXHUyOUI1IiwKICAib2htIjoiXHUwM0E5IiwKICAib2ludCI6Ilx1MjIyRSIsCiAgIm9sYXJyIjoiXHUyMUJBIiwKICAib2xjaXIiOiJcdTI5QkUiLAogICJvbGNyb3NzIjoiXHUyOUJCIiwKICAib2xpbmUiOiJcdTIwM0UiLAogICJvbHQiOiJcdTI5QzAiLAogICJPbWFjciI6Ilx1MDE0QyIsCiAgIm9tYWNyIjoiXHUwMTREIiwKICAiT21lZ2EiOiJcdTAzQTkiLAogICJvbWVnYSI6Ilx1MDNDOSIsCiAgIk9taWNyb24iOiJcdTAzOUYiLAogICJvbWljcm9uIjoiXHUwM0JGIiwKICAib21pZCI6Ilx1MjlCNiIsCiAgIm9taW51cyI6Ilx1MjI5NiIsCiAgIk9vcGYiOiJcdUQ4MzVcdURENDYiLAogICJvb3BmIjoiXHVEODM1XHVERDYwIiwKICAib3BhciI6Ilx1MjlCNyIsCiAgIk9wZW5DdXJseURvdWJsZVF1b3RlIjoiXHUyMDFDIiwKICAiT3BlbkN1cmx5UXVvdGUiOiJcdTIwMTgiLAogICJvcGVycCI6Ilx1MjlCOSIsCiAgIm9wbHVzIjoiXHUyMjk1IiwKICAiT3IiOiJcdTJBNTQiLAogICJvciI6Ilx1MjIyOCIsCiAgIm9yYXJyIjoiXHUyMUJCIiwKICAib3JkIjoiXHUyQTVEIiwKICAib3JkZXIiOiJcdTIxMzQiLAogICJvcmRlcm9mIjoiXHUyMTM0IiwKICAib3JkZiI6Ilx1MDBBQSIsCiAgIm9yZG0iOiJcdTAwQkEiLAogICJvcmlnb2YiOiJcdTIyQjYiLAogICJvcm9yIjoiXHUyQTU2IiwKICAib3JzbG9wZSI6Ilx1MkE1NyIsCiAgIm9ydiI6Ilx1MkE1QiIsCiAgIm9TIjoiXHUyNEM4IiwKICAiT3NjciI6Ilx1RDgzNVx1RENBQSIsCiAgIm9zY3IiOiJcdTIxMzQiLAogICJPc2xhc2giOiJcdTAwRDgiLAogICJvc2xhc2giOiJcdTAwRjgiLAogICJvc29sIjoiXHUyMjk4IiwKICAiT3RpbGRlIjoiXHUwMEQ1IiwKICAib3RpbGRlIjoiXHUwMEY1IiwKICAiT3RpbWVzIjoiXHUyQTM3IiwKICAib3RpbWVzIjoiXHUyMjk3IiwKICAib3RpbWVzYXMiOiJcdTJBMzYiLAogICJPdW1sIjoiXHUwMEQ2IiwKICAib3VtbCI6Ilx1MDBGNiIsCiAgIm92YmFyIjoiXHUyMzNEIiwKICAiT3ZlckJhciI6Ilx1MjAzRSIsCiAgIk92ZXJCcmFjZSI6Ilx1MjNERSIsCiAgIk92ZXJCcmFja2V0IjoiXHUyM0I0IiwKICAiT3ZlclBhcmVudGhlc2lzIjoiXHUyM0RDIiwKICAicGFyIjoiXHUyMjI1IiwKICAicGFyYSI6Ilx1MDBCNiIsCiAgInBhcmFsbGVsIjoiXHUyMjI1IiwKICAicGFyc2ltIjoiXHUyQUYzIiwKICAicGFyc2wiOiJcdTJBRkQiLAogICJwYXJ0IjoiXHUyMjAyIiwKICAiUGFydGlhbEQiOiJcdTIyMDIiLAogICJQY3kiOiJcdTA0MUYiLAogICJwY3kiOiJcdTA0M0YiLAogICJwZXJjbnQiOiJcdTAwMjUiLAogICJwZXJpb2QiOiJcdTAwMkUiLAogICJwZXJtaWwiOiJcdTIwMzAiLAogICJwZXJwIjoiXHUyMkE1IiwKICAicGVydGVuayI6Ilx1MjAzMSIsCiAgIlBmciI6Ilx1RDgzNVx1REQxMyIsCiAgInBmciI6Ilx1RDgzNVx1REQyRCIsCiAgIlBoaSI6Ilx1MDNBNiIsCiAgInBoaSI6Ilx1MDNDNiIsCiAgInBoaXYiOiJcdTAzRDUiLAogICJwaG1tYXQiOiJcdTIxMzMiLAogICJwaG9uZSI6Ilx1MjYwRSIsCiAgIlBpIjoiXHUwM0EwIiwKICAicGkiOiJcdTAzQzAiLAogICJwaXRjaGZvcmsiOiJcdTIyRDQiLAogICJwaXYiOiJcdTAzRDYiLAogICJwbGFuY2siOiJcdTIxMEYiLAogICJwbGFuY2toIjoiXHUyMTBFIiwKICAicGxhbmt2IjoiXHUyMTBGIiwKICAicGx1cyI6Ilx1MDAyQiIsCiAgInBsdXNhY2lyIjoiXHUyQTIzIiwKICAicGx1c2IiOiJcdTIyOUUiLAogICJwbHVzY2lyIjoiXHUyQTIyIiwKICAicGx1c2RvIjoiXHUyMjE0IiwKICAicGx1c2R1IjoiXHUyQTI1IiwKICAicGx1c2UiOiJcdTJBNzIiLAogICJQbHVzTWludXMiOiJcdTAwQjEiLAogICJwbHVzbW4iOiJcdTAwQjEiLAogICJwbHVzc2ltIjoiXHUyQTI2IiwKICAicGx1c3R3byI6Ilx1MkEyNyIsCiAgInBtIjoiXHUwMEIxIiwKICAiUG9pbmNhcmVwbGFuZSI6Ilx1MjEwQyIsCiAgInBvaW50aW50IjoiXHUyQTE1IiwKICAiUG9wZiI6Ilx1MjExOSIsCiAgInBvcGYiOiJcdUQ4MzVcdURENjEiLAogICJwb3VuZCI6Ilx1MDBBMyIsCiAgIlByIjoiXHUyQUJCIiwKICAicHIiOiJcdTIyN0EiLAogICJwcmFwIjoiXHUyQUI3IiwKICAicHJjdWUiOiJcdTIyN0MiLAogICJwckUiOiJcdTJBQjMiLAogICJwcmUiOiJcdTJBQUYiLAogICJwcmVjIjoiXHUyMjdBIiwKICAicHJlY2FwcHJveCI6Ilx1MkFCNyIsCiAgInByZWNjdXJseWVxIjoiXHUyMjdDIiwKICAiUHJlY2VkZXMiOiJcdTIyN0EiLAogICJQcmVjZWRlc0VxdWFsIjoiXHUyQUFGIiwKICAiUHJlY2VkZXNTbGFudEVxdWFsIjoiXHUyMjdDIiwKICAiUHJlY2VkZXNUaWxkZSI6Ilx1MjI3RSIsCiAgInByZWNlcSI6Ilx1MkFBRiIsCiAgInByZWNuYXBwcm94IjoiXHUyQUI5IiwKICAicHJlY25lcXEiOiJcdTJBQjUiLAogICJwcmVjbnNpbSI6Ilx1MjJFOCIsCiAgInByZWNzaW0iOiJcdTIyN0UiLAogICJQcmltZSI6Ilx1MjAzMyIsCiAgInByaW1lIjoiXHUyMDMyIiwKICAicHJpbWVzIjoiXHUyMTE5IiwKICAicHJuYXAiOiJcdTJBQjkiLAogICJwcm5FIjoiXHUyQUI1IiwKICAicHJuc2ltIjoiXHUyMkU4IiwKICAicHJvZCI6Ilx1MjIwRiIsCiAgIlByb2R1Y3QiOiJcdTIyMEYiLAogICJwcm9mYWxhciI6Ilx1MjMyRSIsCiAgInByb2ZsaW5lIjoiXHUyMzEyIiwKICAicHJvZnN1cmYiOiJcdTIzMTMiLAogICJwcm9wIjoiXHUyMjFEIiwKICAiUHJvcG9ydGlvbiI6Ilx1MjIzNyIsCiAgIlByb3BvcnRpb25hbCI6Ilx1MjIxRCIsCiAgInByb3B0byI6Ilx1MjIxRCIsCiAgInByc2ltIjoiXHUyMjdFIiwKICAicHJ1cmVsIjoiXHUyMkIwIiwKICAiUHNjciI6Ilx1RDgzNVx1RENBQiIsCiAgInBzY3IiOiJcdUQ4MzVcdURDQzUiLAogICJQc2kiOiJcdTAzQTgiLAogICJwc2kiOiJcdTAzQzgiLAogICJwdW5jc3AiOiJcdTIwMDgiLAogICJRZnIiOiJcdUQ4MzVcdUREMTQiLAogICJxZnIiOiJcdUQ4MzVcdUREMkUiLAogICJxaW50IjoiXHUyQTBDIiwKICAiUW9wZiI6Ilx1MjExQSIsCiAgInFvcGYiOiJcdUQ4MzVcdURENjIiLAogICJxcHJpbWUiOiJcdTIwNTciLAogICJRc2NyIjoiXHVEODM1XHVEQ0FDIiwKICAicXNjciI6Ilx1RDgzNVx1RENDNiIsCiAgInF1YXRlcm5pb25zIjoiXHUyMTBEIiwKICAicXVhdGludCI6Ilx1MkExNiIsCiAgInF1ZXN0IjoiXHUwMDNGIiwKICAicXVlc3RlcSI6Ilx1MjI1RiIsCiAgIlFVT1QiOiJcdTAwMjIiLAogICJxdW90IjoiXHUwMDIyIiwKICAickFhcnIiOiJcdTIxREIiLAogICJyYWNlIjoiXHUyMjNEXHUwMzMxIiwKICAiUmFjdXRlIjoiXHUwMTU0IiwKICAicmFjdXRlIjoiXHUwMTU1IiwKICAicmFkaWMiOiJcdTIyMUEiLAogICJyYWVtcHR5diI6Ilx1MjlCMyIsCiAgIlJhbmciOiJcdTI3RUIiLAogICJyYW5nIjoiXHUyN0U5IiwKICAicmFuZ2QiOiJcdTI5OTIiLAogICJyYW5nZSI6Ilx1MjlBNSIsCiAgInJhbmdsZSI6Ilx1MjdFOSIsCiAgInJhcXVvIjoiXHUwMEJCIiwKICAiUmFyciI6Ilx1MjFBMCIsCiAgInJBcnIiOiJcdTIxRDIiLAogICJyYXJyIjoiXHUyMTkyIiwKICAicmFycmFwIjoiXHUyOTc1IiwKICAicmFycmIiOiJcdTIxRTUiLAogICJyYXJyYmZzIjoiXHUyOTIwIiwKICAicmFycmMiOiJcdTI5MzMiLAogICJyYXJyZnMiOiJcdTI5MUUiLAogICJyYXJyaGsiOiJcdTIxQUEiLAogICJyYXJybHAiOiJcdTIxQUMiLAogICJyYXJycGwiOiJcdTI5NDUiLAogICJyYXJyc2ltIjoiXHUyOTc0IiwKICAiUmFycnRsIjoiXHUyOTE2IiwKICAicmFycnRsIjoiXHUyMUEzIiwKICAicmFycnciOiJcdTIxOUQiLAogICJyQXRhaWwiOiJcdTI5MUMiLAogICJyYXRhaWwiOiJcdTI5MUEiLAogICJyYXRpbyI6Ilx1MjIzNiIsCiAgInJhdGlvbmFscyI6Ilx1MjExQSIsCiAgIlJCYXJyIjoiXHUyOTEwIiwKICAickJhcnIiOiJcdTI5MEYiLAogICJyYmFyciI6Ilx1MjkwRCIsCiAgInJiYnJrIjoiXHUyNzczIiwKICAicmJyYWNlIjoiXHUwMDdEIiwKICAicmJyYWNrIjoiXHUwMDVEIiwKICAicmJya2UiOiJcdTI5OEMiLAogICJyYnJrc2xkIjoiXHUyOThFIiwKICAicmJya3NsdSI6Ilx1Mjk5MCIsCiAgIlJjYXJvbiI6Ilx1MDE1OCIsCiAgInJjYXJvbiI6Ilx1MDE1OSIsCiAgIlJjZWRpbCI6Ilx1MDE1NiIsCiAgInJjZWRpbCI6Ilx1MDE1NyIsCiAgInJjZWlsIjoiXHUyMzA5IiwKICAicmN1YiI6Ilx1MDA3RCIsCiAgIlJjeSI6Ilx1MDQyMCIsCiAgInJjeSI6Ilx1MDQ0MCIsCiAgInJkY2EiOiJcdTI5MzciLAogICJyZGxkaGFyIjoiXHUyOTY5IiwKICAicmRxdW8iOiJcdTIwMUQiLAogICJyZHF1b3IiOiJcdTIwMUQiLAogICJyZHNoIjoiXHUyMUIzIiwKICAiUmUiOiJcdTIxMUMiLAogICJyZWFsIjoiXHUyMTFDIiwKICAicmVhbGluZSI6Ilx1MjExQiIsCiAgInJlYWxwYXJ0IjoiXHUyMTFDIiwKICAicmVhbHMiOiJcdTIxMUQiLAogICJyZWN0IjoiXHUyNUFEIiwKICAiUkVHIjoiXHUwMEFFIiwKICAicmVnIjoiXHUwMEFFIiwKICAiUmV2ZXJzZUVsZW1lbnQiOiJcdTIyMEIiLAogICJSZXZlcnNlRXF1aWxpYnJpdW0iOiJcdTIxQ0IiLAogICJSZXZlcnNlVXBFcXVpbGlicml1bSI6Ilx1Mjk2RiIsCiAgInJmaXNodCI6Ilx1Mjk3RCIsCiAgInJmbG9vciI6Ilx1MjMwQiIsCiAgIlJmciI6Ilx1MjExQyIsCiAgInJmciI6Ilx1RDgzNVx1REQyRiIsCiAgInJIYXIiOiJcdTI5NjQiLAogICJyaGFyZCI6Ilx1MjFDMSIsCiAgInJoYXJ1IjoiXHUyMUMwIiwKICAicmhhcnVsIjoiXHUyOTZDIiwKICAiUmhvIjoiXHUwM0ExIiwKICAicmhvIjoiXHUwM0MxIiwKICAicmhvdiI6Ilx1MDNGMSIsCiAgIlJpZ2h0QW5nbGVCcmFja2V0IjoiXHUyN0U5IiwKICAiUmlnaHRBcnJvdyI6Ilx1MjE5MiIsCiAgIlJpZ2h0YXJyb3ciOiJcdTIxRDIiLAogICJyaWdodGFycm93IjoiXHUyMTkyIiwKICAiUmlnaHRBcnJvd0JhciI6Ilx1MjFFNSIsCiAgIlJpZ2h0QXJyb3dMZWZ0QXJyb3ciOiJcdTIxQzQiLAogICJyaWdodGFycm93dGFpbCI6Ilx1MjFBMyIsCiAgIlJpZ2h0Q2VpbGluZyI6Ilx1MjMwOSIsCiAgIlJpZ2h0RG91YmxlQnJhY2tldCI6Ilx1MjdFNyIsCiAgIlJpZ2h0RG93blRlZVZlY3RvciI6Ilx1Mjk1RCIsCiAgIlJpZ2h0RG93blZlY3RvciI6Ilx1MjFDMiIsCiAgIlJpZ2h0RG93blZlY3RvckJhciI6Ilx1Mjk1NSIsCiAgIlJpZ2h0Rmxvb3IiOiJcdTIzMEIiLAogICJyaWdodGhhcnBvb25kb3duIjoiXHUyMUMxIiwKICAicmlnaHRoYXJwb29udXAiOiJcdTIxQzAiLAogICJyaWdodGxlZnRhcnJvd3MiOiJcdTIxQzQiLAogICJyaWdodGxlZnRoYXJwb29ucyI6Ilx1MjFDQyIsCiAgInJpZ2h0cmlnaHRhcnJvd3MiOiJcdTIxQzkiLAogICJyaWdodHNxdWlnYXJyb3ciOiJcdTIxOUQiLAogICJSaWdodFRlZSI6Ilx1MjJBMiIsCiAgIlJpZ2h0VGVlQXJyb3ciOiJcdTIxQTYiLAogICJSaWdodFRlZVZlY3RvciI6Ilx1Mjk1QiIsCiAgInJpZ2h0dGhyZWV0aW1lcyI6Ilx1MjJDQyIsCiAgIlJpZ2h0VHJpYW5nbGUiOiJcdTIyQjMiLAogICJSaWdodFRyaWFuZ2xlQmFyIjoiXHUyOUQwIiwKICAiUmlnaHRUcmlhbmdsZUVxdWFsIjoiXHUyMkI1IiwKICAiUmlnaHRVcERvd25WZWN0b3IiOiJcdTI5NEYiLAogICJSaWdodFVwVGVlVmVjdG9yIjoiXHUyOTVDIiwKICAiUmlnaHRVcFZlY3RvciI6Ilx1MjFCRSIsCiAgIlJpZ2h0VXBWZWN0b3JCYXIiOiJcdTI5NTQiLAogICJSaWdodFZlY3RvciI6Ilx1MjFDMCIsCiAgIlJpZ2h0VmVjdG9yQmFyIjoiXHUyOTUzIiwKICAicmluZyI6Ilx1MDJEQSIsCiAgInJpc2luZ2RvdHNlcSI6Ilx1MjI1MyIsCiAgInJsYXJyIjoiXHUyMUM0IiwKICAicmxoYXIiOiJcdTIxQ0MiLAogICJybG0iOiJcdTIwMEYiLAogICJybW91c3QiOiJcdTIzQjEiLAogICJybW91c3RhY2hlIjoiXHUyM0IxIiwKICAicm5taWQiOiJcdTJBRUUiLAogICJyb2FuZyI6Ilx1MjdFRCIsCiAgInJvYXJyIjoiXHUyMUZFIiwKICAicm9icmsiOiJcdTI3RTciLAogICJyb3BhciI6Ilx1Mjk4NiIsCiAgIlJvcGYiOiJcdTIxMUQiLAogICJyb3BmIjoiXHVEODM1XHVERDYzIiwKICAicm9wbHVzIjoiXHUyQTJFIiwKICAicm90aW1lcyI6Ilx1MkEzNSIsCiAgIlJvdW5kSW1wbGllcyI6Ilx1Mjk3MCIsCiAgInJwYXIiOiJcdTAwMjkiLAogICJycGFyZ3QiOiJcdTI5OTQiLAogICJycHBvbGludCI6Ilx1MkExMiIsCiAgInJyYXJyIjoiXHUyMUM5IiwKICAiUnJpZ2h0YXJyb3ciOiJcdTIxREIiLAogICJyc2FxdW8iOiJcdTIwM0EiLAogICJSc2NyIjoiXHUyMTFCIiwKICAicnNjciI6Ilx1RDgzNVx1RENDNyIsCiAgIlJzaCI6Ilx1MjFCMSIsCiAgInJzaCI6Ilx1MjFCMSIsCiAgInJzcWIiOiJcdTAwNUQiLAogICJyc3F1byI6Ilx1MjAxOSIsCiAgInJzcXVvciI6Ilx1MjAxOSIsCiAgInJ0aHJlZSI6Ilx1MjJDQyIsCiAgInJ0aW1lcyI6Ilx1MjJDQSIsCiAgInJ0cmkiOiJcdTI1QjkiLAogICJydHJpZSI6Ilx1MjJCNSIsCiAgInJ0cmlmIjoiXHUyNUI4IiwKICAicnRyaWx0cmkiOiJcdTI5Q0UiLAogICJSdWxlRGVsYXllZCI6Ilx1MjlGNCIsCiAgInJ1bHVoYXIiOiJcdTI5NjgiLAogICJyeCI6Ilx1MjExRSIsCiAgIlNhY3V0ZSI6Ilx1MDE1QSIsCiAgInNhY3V0ZSI6Ilx1MDE1QiIsCiAgInNicXVvIjoiXHUyMDFBIiwKICAiU2MiOiJcdTJBQkMiLAogICJzYyI6Ilx1MjI3QiIsCiAgInNjYXAiOiJcdTJBQjgiLAogICJTY2Fyb24iOiJcdTAxNjAiLAogICJzY2Fyb24iOiJcdTAxNjEiLAogICJzY2N1ZSI6Ilx1MjI3RCIsCiAgInNjRSI6Ilx1MkFCNCIsCiAgInNjZSI6Ilx1MkFCMCIsCiAgIlNjZWRpbCI6Ilx1MDE1RSIsCiAgInNjZWRpbCI6Ilx1MDE1RiIsCiAgIlNjaXJjIjoiXHUwMTVDIiwKICAic2NpcmMiOiJcdTAxNUQiLAogICJzY25hcCI6Ilx1MkFCQSIsCiAgInNjbkUiOiJcdTJBQjYiLAogICJzY25zaW0iOiJcdTIyRTkiLAogICJzY3BvbGludCI6Ilx1MkExMyIsCiAgInNjc2ltIjoiXHUyMjdGIiwKICAiU2N5IjoiXHUwNDIxIiwKICAic2N5IjoiXHUwNDQxIiwKICAic2RvdCI6Ilx1MjJDNSIsCiAgInNkb3RiIjoiXHUyMkExIiwKICAic2RvdGUiOiJcdTJBNjYiLAogICJzZWFyaGsiOiJcdTI5MjUiLAogICJzZUFyciI6Ilx1MjFEOCIsCiAgInNlYXJyIjoiXHUyMTk4IiwKICAic2VhcnJvdyI6Ilx1MjE5OCIsCiAgInNlY3QiOiJcdTAwQTciLAogICJzZW1pIjoiXHUwMDNCIiwKICAic2Vzd2FyIjoiXHUyOTI5IiwKICAic2V0bWludXMiOiJcdTIyMTYiLAogICJzZXRtbiI6Ilx1MjIxNiIsCiAgInNleHQiOiJcdTI3MzYiLAogICJTZnIiOiJcdUQ4MzVcdUREMTYiLAogICJzZnIiOiJcdUQ4MzVcdUREMzAiLAogICJzZnJvd24iOiJcdTIzMjIiLAogICJzaGFycCI6Ilx1MjY2RiIsCiAgIlNIQ0hjeSI6Ilx1MDQyOSIsCiAgInNoY2hjeSI6Ilx1MDQ0OSIsCiAgIlNIY3kiOiJcdTA0MjgiLAogICJzaGN5IjoiXHUwNDQ4IiwKICAiU2hvcnREb3duQXJyb3ciOiJcdTIxOTMiLAogICJTaG9ydExlZnRBcnJvdyI6Ilx1MjE5MCIsCiAgInNob3J0bWlkIjoiXHUyMjIzIiwKICAic2hvcnRwYXJhbGxlbCI6Ilx1MjIyNSIsCiAgIlNob3J0UmlnaHRBcnJvdyI6Ilx1MjE5MiIsCiAgIlNob3J0VXBBcnJvdyI6Ilx1MjE5MSIsCiAgInNoeSI6Ilx1MDBBRCIsCiAgIlNpZ21hIjoiXHUwM0EzIiwKICAic2lnbWEiOiJcdTAzQzMiLAogICJzaWdtYWYiOiJcdTAzQzIiLAogICJzaWdtYXYiOiJcdTAzQzIiLAogICJzaW0iOiJcdTIyM0MiLAogICJzaW1kb3QiOiJcdTJBNkEiLAogICJzaW1lIjoiXHUyMjQzIiwKICAic2ltZXEiOiJcdTIyNDMiLAogICJzaW1nIjoiXHUyQTlFIiwKICAic2ltZ0UiOiJcdTJBQTAiLAogICJzaW1sIjoiXHUyQTlEIiwKICAic2ltbEUiOiJcdTJBOUYiLAogICJzaW1uZSI6Ilx1MjI0NiIsCiAgInNpbXBsdXMiOiJcdTJBMjQiLAogICJzaW1yYXJyIjoiXHUyOTcyIiwKICAic2xhcnIiOiJcdTIxOTAiLAogICJTbWFsbENpcmNsZSI6Ilx1MjIxOCIsCiAgInNtYWxsc2V0bWludXMiOiJcdTIyMTYiLAogICJzbWFzaHAiOiJcdTJBMzMiLAogICJzbWVwYXJzbCI6Ilx1MjlFNCIsCiAgInNtaWQiOiJcdTIyMjMiLAogICJzbWlsZSI6Ilx1MjMyMyIsCiAgInNtdCI6Ilx1MkFBQSIsCiAgInNtdGUiOiJcdTJBQUMiLAogICJzbXRlcyI6Ilx1MkFBQ1x1RkUwMCIsCiAgIlNPRlRjeSI6Ilx1MDQyQyIsCiAgInNvZnRjeSI6Ilx1MDQ0QyIsCiAgInNvbCI6Ilx1MDAyRiIsCiAgInNvbGIiOiJcdTI5QzQiLAogICJzb2xiYXIiOiJcdTIzM0YiLAogICJTb3BmIjoiXHVEODM1XHVERDRBIiwKICAic29wZiI6Ilx1RDgzNVx1REQ2NCIsCiAgInNwYWRlcyI6Ilx1MjY2MCIsCiAgInNwYWRlc3VpdCI6Ilx1MjY2MCIsCiAgInNwYXIiOiJcdTIyMjUiLAogICJzcWNhcCI6Ilx1MjI5MyIsCiAgInNxY2FwcyI6Ilx1MjI5M1x1RkUwMCIsCiAgInNxY3VwIjoiXHUyMjk0IiwKICAic3FjdXBzIjoiXHUyMjk0XHVGRTAwIiwKICAiU3FydCI6Ilx1MjIxQSIsCiAgInNxc3ViIjoiXHUyMjhGIiwKICAic3FzdWJlIjoiXHUyMjkxIiwKICAic3FzdWJzZXQiOiJcdTIyOEYiLAogICJzcXN1YnNldGVxIjoiXHUyMjkxIiwKICAic3FzdXAiOiJcdTIyOTAiLAogICJzcXN1cGUiOiJcdTIyOTIiLAogICJzcXN1cHNldCI6Ilx1MjI5MCIsCiAgInNxc3Vwc2V0ZXEiOiJcdTIyOTIiLAogICJzcXUiOiJcdTI1QTEiLAogICJTcXVhcmUiOiJcdTI1QTEiLAogICJzcXVhcmUiOiJcdTI1QTEiLAogICJTcXVhcmVJbnRlcnNlY3Rpb24iOiJcdTIyOTMiLAogICJTcXVhcmVTdWJzZXQiOiJcdTIyOEYiLAogICJTcXVhcmVTdWJzZXRFcXVhbCI6Ilx1MjI5MSIsCiAgIlNxdWFyZVN1cGVyc2V0IjoiXHUyMjkwIiwKICAiU3F1YXJlU3VwZXJzZXRFcXVhbCI6Ilx1MjI5MiIsCiAgIlNxdWFyZVVuaW9uIjoiXHUyMjk0IiwKICAic3F1YXJmIjoiXHUyNUFBIiwKICAic3F1ZiI6Ilx1MjVBQSIsCiAgInNyYXJyIjoiXHUyMTkyIiwKICAiU3NjciI6Ilx1RDgzNVx1RENBRSIsCiAgInNzY3IiOiJcdUQ4MzVcdURDQzgiLAogICJzc2V0bW4iOiJcdTIyMTYiLAogICJzc21pbGUiOiJcdTIzMjMiLAogICJzc3RhcmYiOiJcdTIyQzYiLAogICJTdGFyIjoiXHUyMkM2IiwKICAic3RhciI6Ilx1MjYwNiIsCiAgInN0YXJmIjoiXHUyNjA1IiwKICAic3RyYWlnaHRlcHNpbG9uIjoiXHUwM0Y1IiwKICAic3RyYWlnaHRwaGkiOiJcdTAzRDUiLAogICJzdHJucyI6Ilx1MDBBRiIsCiAgIlN1YiI6Ilx1MjJEMCIsCiAgInN1YiI6Ilx1MjI4MiIsCiAgInN1YmRvdCI6Ilx1MkFCRCIsCiAgInN1YkUiOiJcdTJBQzUiLAogICJzdWJlIjoiXHUyMjg2IiwKICAic3ViZWRvdCI6Ilx1MkFDMyIsCiAgInN1Ym11bHQiOiJcdTJBQzEiLAogICJzdWJuRSI6Ilx1MkFDQiIsCiAgInN1Ym5lIjoiXHUyMjhBIiwKICAic3VicGx1cyI6Ilx1MkFCRiIsCiAgInN1YnJhcnIiOiJcdTI5NzkiLAogICJTdWJzZXQiOiJcdTIyRDAiLAogICJzdWJzZXQiOiJcdTIyODIiLAogICJzdWJzZXRlcSI6Ilx1MjI4NiIsCiAgInN1YnNldGVxcSI6Ilx1MkFDNSIsCiAgIlN1YnNldEVxdWFsIjoiXHUyMjg2IiwKICAic3Vic2V0bmVxIjoiXHUyMjhBIiwKICAic3Vic2V0bmVxcSI6Ilx1MkFDQiIsCiAgInN1YnNpbSI6Ilx1MkFDNyIsCiAgInN1YnN1YiI6Ilx1MkFENSIsCiAgInN1YnN1cCI6Ilx1MkFEMyIsCiAgInN1Y2MiOiJcdTIyN0IiLAogICJzdWNjYXBwcm94IjoiXHUyQUI4IiwKICAic3VjY2N1cmx5ZXEiOiJcdTIyN0QiLAogICJTdWNjZWVkcyI6Ilx1MjI3QiIsCiAgIlN1Y2NlZWRzRXF1YWwiOiJcdTJBQjAiLAogICJTdWNjZWVkc1NsYW50RXF1YWwiOiJcdTIyN0QiLAogICJTdWNjZWVkc1RpbGRlIjoiXHUyMjdGIiwKICAic3VjY2VxIjoiXHUyQUIwIiwKICAic3VjY25hcHByb3giOiJcdTJBQkEiLAogICJzdWNjbmVxcSI6Ilx1MkFCNiIsCiAgInN1Y2Nuc2ltIjoiXHUyMkU5IiwKICAic3VjY3NpbSI6Ilx1MjI3RiIsCiAgIlN1Y2hUaGF0IjoiXHUyMjBCIiwKICAiU3VtIjoiXHUyMjExIiwKICAic3VtIjoiXHUyMjExIiwKICAic3VuZyI6Ilx1MjY2QSIsCiAgIlN1cCI6Ilx1MjJEMSIsCiAgInN1cCI6Ilx1MjI4MyIsCiAgInN1cDEiOiJcdTAwQjkiLAogICJzdXAyIjoiXHUwMEIyIiwKICAic3VwMyI6Ilx1MDBCMyIsCiAgInN1cGRvdCI6Ilx1MkFCRSIsCiAgInN1cGRzdWIiOiJcdTJBRDgiLAogICJzdXBFIjoiXHUyQUM2IiwKICAic3VwZSI6Ilx1MjI4NyIsCiAgInN1cGVkb3QiOiJcdTJBQzQiLAogICJTdXBlcnNldCI6Ilx1MjI4MyIsCiAgIlN1cGVyc2V0RXF1YWwiOiJcdTIyODciLAogICJzdXBoc29sIjoiXHUyN0M5IiwKICAic3VwaHN1YiI6Ilx1MkFENyIsCiAgInN1cGxhcnIiOiJcdTI5N0IiLAogICJzdXBtdWx0IjoiXHUyQUMyIiwKICAic3VwbkUiOiJcdTJBQ0MiLAogICJzdXBuZSI6Ilx1MjI4QiIsCiAgInN1cHBsdXMiOiJcdTJBQzAiLAogICJTdXBzZXQiOiJcdTIyRDEiLAogICJzdXBzZXQiOiJcdTIyODMiLAogICJzdXBzZXRlcSI6Ilx1MjI4NyIsCiAgInN1cHNldGVxcSI6Ilx1MkFDNiIsCiAgInN1cHNldG5lcSI6Ilx1MjI4QiIsCiAgInN1cHNldG5lcXEiOiJcdTJBQ0MiLAogICJzdXBzaW0iOiJcdTJBQzgiLAogICJzdXBzdWIiOiJcdTJBRDQiLAogICJzdXBzdXAiOiJcdTJBRDYiLAogICJzd2FyaGsiOiJcdTI5MjYiLAogICJzd0FyciI6Ilx1MjFEOSIsCiAgInN3YXJyIjoiXHUyMTk5IiwKICAic3dhcnJvdyI6Ilx1MjE5OSIsCiAgInN3bndhciI6Ilx1MjkyQSIsCiAgInN6bGlnIjoiXHUwMERGIiwKICAiVGFiIjoiXHUwMDA5IiwKICAidGFyZ2V0IjoiXHUyMzE2IiwKICAiVGF1IjoiXHUwM0E0IiwKICAidGF1IjoiXHUwM0M0IiwKICAidGJyayI6Ilx1MjNCNCIsCiAgIlRjYXJvbiI6Ilx1MDE2NCIsCiAgInRjYXJvbiI6Ilx1MDE2NSIsCiAgIlRjZWRpbCI6Ilx1MDE2MiIsCiAgInRjZWRpbCI6Ilx1MDE2MyIsCiAgIlRjeSI6Ilx1MDQyMiIsCiAgInRjeSI6Ilx1MDQ0MiIsCiAgInRkb3QiOiJcdTIwREIiLAogICJ0ZWxyZWMiOiJcdTIzMTUiLAogICJUZnIiOiJcdUQ4MzVcdUREMTciLAogICJ0ZnIiOiJcdUQ4MzVcdUREMzEiLAogICJ0aGVyZTQiOiJcdTIyMzQiLAogICJUaGVyZWZvcmUiOiJcdTIyMzQiLAogICJ0aGVyZWZvcmUiOiJcdTIyMzQiLAogICJUaGV0YSI6Ilx1MDM5OCIsCiAgInRoZXRhIjoiXHUwM0I4IiwKICAidGhldGFzeW0iOiJcdTAzRDEiLAogICJ0aGV0YXYiOiJcdTAzRDEiLAogICJ0aGlja2FwcHJveCI6Ilx1MjI0OCIsCiAgInRoaWNrc2ltIjoiXHUyMjNDIiwKICAiVGhpY2tTcGFjZSI6Ilx1MjA1Rlx1MjAwQSIsCiAgInRoaW5zcCI6Ilx1MjAwOSIsCiAgIlRoaW5TcGFjZSI6Ilx1MjAwOSIsCiAgInRoa2FwIjoiXHUyMjQ4IiwKICAidGhrc2ltIjoiXHUyMjNDIiwKICAiVEhPUk4iOiJcdTAwREUiLAogICJ0aG9ybiI6Ilx1MDBGRSIsCiAgIlRpbGRlIjoiXHUyMjNDIiwKICAidGlsZGUiOiJcdTAyREMiLAogICJUaWxkZUVxdWFsIjoiXHUyMjQzIiwKICAiVGlsZGVGdWxsRXF1YWwiOiJcdTIyNDUiLAogICJUaWxkZVRpbGRlIjoiXHUyMjQ4IiwKICAidGltZXMiOiJcdTAwRDciLAogICJ0aW1lc2IiOiJcdTIyQTAiLAogICJ0aW1lc2JhciI6Ilx1MkEzMSIsCiAgInRpbWVzZCI6Ilx1MkEzMCIsCiAgInRpbnQiOiJcdTIyMkQiLAogICJ0b2VhIjoiXHUyOTI4IiwKICAidG9wIjoiXHUyMkE0IiwKICAidG9wYm90IjoiXHUyMzM2IiwKICAidG9wY2lyIjoiXHUyQUYxIiwKICAiVG9wZiI6Ilx1RDgzNVx1REQ0QiIsCiAgInRvcGYiOiJcdUQ4MzVcdURENjUiLAogICJ0b3Bmb3JrIjoiXHUyQURBIiwKICAidG9zYSI6Ilx1MjkyOSIsCiAgInRwcmltZSI6Ilx1MjAzNCIsCiAgIlRSQURFIjoiXHUyMTIyIiwKICAidHJhZGUiOiJcdTIxMjIiLAogICJ0cmlhbmdsZSI6Ilx1MjVCNSIsCiAgInRyaWFuZ2xlZG93biI6Ilx1MjVCRiIsCiAgInRyaWFuZ2xlbGVmdCI6Ilx1MjVDMyIsCiAgInRyaWFuZ2xlbGVmdGVxIjoiXHUyMkI0IiwKICAidHJpYW5nbGVxIjoiXHUyMjVDIiwKICAidHJpYW5nbGVyaWdodCI6Ilx1MjVCOSIsCiAgInRyaWFuZ2xlcmlnaHRlcSI6Ilx1MjJCNSIsCiAgInRyaWRvdCI6Ilx1MjVFQyIsCiAgInRyaWUiOiJcdTIyNUMiLAogICJ0cmltaW51cyI6Ilx1MkEzQSIsCiAgIlRyaXBsZURvdCI6Ilx1MjBEQiIsCiAgInRyaXBsdXMiOiJcdTJBMzkiLAogICJ0cmlzYiI6Ilx1MjlDRCIsCiAgInRyaXRpbWUiOiJcdTJBM0IiLAogICJ0cnBleml1bSI6Ilx1MjNFMiIsCiAgIlRzY3IiOiJcdUQ4MzVcdURDQUYiLAogICJ0c2NyIjoiXHVEODM1XHVEQ0M5IiwKICAiVFNjeSI6Ilx1MDQyNiIsCiAgInRzY3kiOiJcdTA0NDYiLAogICJUU0hjeSI6Ilx1MDQwQiIsCiAgInRzaGN5IjoiXHUwNDVCIiwKICAiVHN0cm9rIjoiXHUwMTY2IiwKICAidHN0cm9rIjoiXHUwMTY3IiwKICAidHdpeHQiOiJcdTIyNkMiLAogICJ0d29oZWFkbGVmdGFycm93IjoiXHUyMTlFIiwKICAidHdvaGVhZHJpZ2h0YXJyb3ciOiJcdTIxQTAiLAogICJVYWN1dGUiOiJcdTAwREEiLAogICJ1YWN1dGUiOiJcdTAwRkEiLAogICJVYXJyIjoiXHUyMTlGIiwKICAidUFyciI6Ilx1MjFEMSIsCiAgInVhcnIiOiJcdTIxOTEiLAogICJVYXJyb2NpciI6Ilx1Mjk0OSIsCiAgIlVicmN5IjoiXHUwNDBFIiwKICAidWJyY3kiOiJcdTA0NUUiLAogICJVYnJldmUiOiJcdTAxNkMiLAogICJ1YnJldmUiOiJcdTAxNkQiLAogICJVY2lyYyI6Ilx1MDBEQiIsCiAgInVjaXJjIjoiXHUwMEZCIiwKICAiVWN5IjoiXHUwNDIzIiwKICAidWN5IjoiXHUwNDQzIiwKICAidWRhcnIiOiJcdTIxQzUiLAogICJVZGJsYWMiOiJcdTAxNzAiLAogICJ1ZGJsYWMiOiJcdTAxNzEiLAogICJ1ZGhhciI6Ilx1Mjk2RSIsCiAgInVmaXNodCI6Ilx1Mjk3RSIsCiAgIlVmciI6Ilx1RDgzNVx1REQxOCIsCiAgInVmciI6Ilx1RDgzNVx1REQzMiIsCiAgIlVncmF2ZSI6Ilx1MDBEOSIsCiAgInVncmF2ZSI6Ilx1MDBGOSIsCiAgInVIYXIiOiJcdTI5NjMiLAogICJ1aGFybCI6Ilx1MjFCRiIsCiAgInVoYXJyIjoiXHUyMUJFIiwKICAidWhibGsiOiJcdTI1ODAiLAogICJ1bGNvcm4iOiJcdTIzMUMiLAogICJ1bGNvcm5lciI6Ilx1MjMxQyIsCiAgInVsY3JvcCI6Ilx1MjMwRiIsCiAgInVsdHJpIjoiXHUyNUY4IiwKICAiVW1hY3IiOiJcdTAxNkEiLAogICJ1bWFjciI6Ilx1MDE2QiIsCiAgInVtbCI6Ilx1MDBBOCIsCiAgIlVuZGVyQmFyIjoiXHUwMDVGIiwKICAiVW5kZXJCcmFjZSI6Ilx1MjNERiIsCiAgIlVuZGVyQnJhY2tldCI6Ilx1MjNCNSIsCiAgIlVuZGVyUGFyZW50aGVzaXMiOiJcdTIzREQiLAogICJVbmlvbiI6Ilx1MjJDMyIsCiAgIlVuaW9uUGx1cyI6Ilx1MjI4RSIsCiAgIlVvZ29uIjoiXHUwMTcyIiwKICAidW9nb24iOiJcdTAxNzMiLAogICJVb3BmIjoiXHVEODM1XHVERDRDIiwKICAidW9wZiI6Ilx1RDgzNVx1REQ2NiIsCiAgIlVwQXJyb3ciOiJcdTIxOTEiLAogICJVcGFycm93IjoiXHUyMUQxIiwKICAidXBhcnJvdyI6Ilx1MjE5MSIsCiAgIlVwQXJyb3dCYXIiOiJcdTI5MTIiLAogICJVcEFycm93RG93bkFycm93IjoiXHUyMUM1IiwKICAiVXBEb3duQXJyb3ciOiJcdTIxOTUiLAogICJVcGRvd25hcnJvdyI6Ilx1MjFENSIsCiAgInVwZG93bmFycm93IjoiXHUyMTk1IiwKICAiVXBFcXVpbGlicml1bSI6Ilx1Mjk2RSIsCiAgInVwaGFycG9vbmxlZnQiOiJcdTIxQkYiLAogICJ1cGhhcnBvb25yaWdodCI6Ilx1MjFCRSIsCiAgInVwbHVzIjoiXHUyMjhFIiwKICAiVXBwZXJMZWZ0QXJyb3ciOiJcdTIxOTYiLAogICJVcHBlclJpZ2h0QXJyb3ciOiJcdTIxOTciLAogICJVcHNpIjoiXHUwM0QyIiwKICAidXBzaSI6Ilx1MDNDNSIsCiAgInVwc2loIjoiXHUwM0QyIiwKICAiVXBzaWxvbiI6Ilx1MDNBNSIsCiAgInVwc2lsb24iOiJcdTAzQzUiLAogICJVcFRlZSI6Ilx1MjJBNSIsCiAgIlVwVGVlQXJyb3ciOiJcdTIxQTUiLAogICJ1cHVwYXJyb3dzIjoiXHUyMUM4IiwKICAidXJjb3JuIjoiXHUyMzFEIiwKICAidXJjb3JuZXIiOiJcdTIzMUQiLAogICJ1cmNyb3AiOiJcdTIzMEUiLAogICJVcmluZyI6Ilx1MDE2RSIsCiAgInVyaW5nIjoiXHUwMTZGIiwKICAidXJ0cmkiOiJcdTI1RjkiLAogICJVc2NyIjoiXHVEODM1XHVEQ0IwIiwKICAidXNjciI6Ilx1RDgzNVx1RENDQSIsCiAgInV0ZG90IjoiXHUyMkYwIiwKICAiVXRpbGRlIjoiXHUwMTY4IiwKICAidXRpbGRlIjoiXHUwMTY5IiwKICAidXRyaSI6Ilx1MjVCNSIsCiAgInV0cmlmIjoiXHUyNUI0IiwKICAidXVhcnIiOiJcdTIxQzgiLAogICJVdW1sIjoiXHUwMERDIiwKICAidXVtbCI6Ilx1MDBGQyIsCiAgInV3YW5nbGUiOiJcdTI5QTciLAogICJ2YW5ncnQiOiJcdTI5OUMiLAogICJ2YXJlcHNpbG9uIjoiXHUwM0Y1IiwKICAidmFya2FwcGEiOiJcdTAzRjAiLAogICJ2YXJub3RoaW5nIjoiXHUyMjA1IiwKICAidmFycGhpIjoiXHUwM0Q1IiwKICAidmFycGkiOiJcdTAzRDYiLAogICJ2YXJwcm9wdG8iOiJcdTIyMUQiLAogICJ2QXJyIjoiXHUyMUQ1IiwKICAidmFyciI6Ilx1MjE5NSIsCiAgInZhcnJobyI6Ilx1MDNGMSIsCiAgInZhcnNpZ21hIjoiXHUwM0MyIiwKICAidmFyc3Vic2V0bmVxIjoiXHUyMjhBXHVGRTAwIiwKICAidmFyc3Vic2V0bmVxcSI6Ilx1MkFDQlx1RkUwMCIsCiAgInZhcnN1cHNldG5lcSI6Ilx1MjI4Qlx1RkUwMCIsCiAgInZhcnN1cHNldG5lcXEiOiJcdTJBQ0NcdUZFMDAiLAogICJ2YXJ0aGV0YSI6Ilx1MDNEMSIsCiAgInZhcnRyaWFuZ2xlbGVmdCI6Ilx1MjJCMiIsCiAgInZhcnRyaWFuZ2xlcmlnaHQiOiJcdTIyQjMiLAogICJWYmFyIjoiXHUyQUVCIiwKICAidkJhciI6Ilx1MkFFOCIsCiAgInZCYXJ2IjoiXHUyQUU5IiwKICAiVmN5IjoiXHUwNDEyIiwKICAidmN5IjoiXHUwNDMyIiwKICAiVkRhc2giOiJcdTIyQUIiLAogICJWZGFzaCI6Ilx1MjJBOSIsCiAgInZEYXNoIjoiXHUyMkE4IiwKICAidmRhc2giOiJcdTIyQTIiLAogICJWZGFzaGwiOiJcdTJBRTYiLAogICJWZWUiOiJcdTIyQzEiLAogICJ2ZWUiOiJcdTIyMjgiLAogICJ2ZWViYXIiOiJcdTIyQkIiLAogICJ2ZWVlcSI6Ilx1MjI1QSIsCiAgInZlbGxpcCI6Ilx1MjJFRSIsCiAgIlZlcmJhciI6Ilx1MjAxNiIsCiAgInZlcmJhciI6Ilx1MDA3QyIsCiAgIlZlcnQiOiJcdTIwMTYiLAogICJ2ZXJ0IjoiXHUwMDdDIiwKICAiVmVydGljYWxCYXIiOiJcdTIyMjMiLAogICJWZXJ0aWNhbExpbmUiOiJcdTAwN0MiLAogICJWZXJ0aWNhbFNlcGFyYXRvciI6Ilx1Mjc1OCIsCiAgIlZlcnRpY2FsVGlsZGUiOiJcdTIyNDAiLAogICJWZXJ5VGhpblNwYWNlIjoiXHUyMDBBIiwKICAiVmZyIjoiXHVEODM1XHVERDE5IiwKICAidmZyIjoiXHVEODM1XHVERDMzIiwKICAidmx0cmkiOiJcdTIyQjIiLAogICJ2bnN1YiI6Ilx1MjI4Mlx1MjBEMiIsCiAgInZuc3VwIjoiXHUyMjgzXHUyMEQyIiwKICAiVm9wZiI6Ilx1RDgzNVx1REQ0RCIsCiAgInZvcGYiOiJcdUQ4MzVcdURENjciLAogICJ2cHJvcCI6Ilx1MjIxRCIsCiAgInZydHJpIjoiXHUyMkIzIiwKICAiVnNjciI6Ilx1RDgzNVx1RENCMSIsCiAgInZzY3IiOiJcdUQ4MzVcdURDQ0IiLAogICJ2c3VibkUiOiJcdTJBQ0JcdUZFMDAiLAogICJ2c3VibmUiOiJcdTIyOEFcdUZFMDAiLAogICJ2c3VwbkUiOiJcdTJBQ0NcdUZFMDAiLAogICJ2c3VwbmUiOiJcdTIyOEJcdUZFMDAiLAogICJWdmRhc2giOiJcdTIyQUEiLAogICJ2emlnemFnIjoiXHUyOTlBIiwKICAiV2NpcmMiOiJcdTAxNzQiLAogICJ3Y2lyYyI6Ilx1MDE3NSIsCiAgIndlZGJhciI6Ilx1MkE1RiIsCiAgIldlZGdlIjoiXHUyMkMwIiwKICAid2VkZ2UiOiJcdTIyMjciLAogICJ3ZWRnZXEiOiJcdTIyNTkiLAogICJ3ZWllcnAiOiJcdTIxMTgiLAogICJXZnIiOiJcdUQ4MzVcdUREMUEiLAogICJ3ZnIiOiJcdUQ4MzVcdUREMzQiLAogICJXb3BmIjoiXHVEODM1XHVERDRFIiwKICAid29wZiI6Ilx1RDgzNVx1REQ2OCIsCiAgIndwIjoiXHUyMTE4IiwKICAid3IiOiJcdTIyNDAiLAogICJ3cmVhdGgiOiJcdTIyNDAiLAogICJXc2NyIjoiXHVEODM1XHVEQ0IyIiwKICAid3NjciI6Ilx1RDgzNVx1RENDQyIsCiAgInhjYXAiOiJcdTIyQzIiLAogICJ4Y2lyYyI6Ilx1MjVFRiIsCiAgInhjdXAiOiJcdTIyQzMiLAogICJ4ZHRyaSI6Ilx1MjVCRCIsCiAgIlhmciI6Ilx1RDgzNVx1REQxQiIsCiAgInhmciI6Ilx1RDgzNVx1REQzNSIsCiAgInhoQXJyIjoiXHUyN0ZBIiwKICAieGhhcnIiOiJcdTI3RjciLAogICJYaSI6Ilx1MDM5RSIsCiAgInhpIjoiXHUwM0JFIiwKICAieGxBcnIiOiJcdTI3RjgiLAogICJ4bGFyciI6Ilx1MjdGNSIsCiAgInhtYXAiOiJcdTI3RkMiLAogICJ4bmlzIjoiXHUyMkZCIiwKICAieG9kb3QiOiJcdTJBMDAiLAogICJYb3BmIjoiXHVEODM1XHVERDRGIiwKICAieG9wZiI6Ilx1RDgzNVx1REQ2OSIsCiAgInhvcGx1cyI6Ilx1MkEwMSIsCiAgInhvdGltZSI6Ilx1MkEwMiIsCiAgInhyQXJyIjoiXHUyN0Y5IiwKICAieHJhcnIiOiJcdTI3RjYiLAogICJYc2NyIjoiXHVEODM1XHVEQ0IzIiwKICAieHNjciI6Ilx1RDgzNVx1RENDRCIsCiAgInhzcWN1cCI6Ilx1MkEwNiIsCiAgInh1cGx1cyI6Ilx1MkEwNCIsCiAgInh1dHJpIjoiXHUyNUIzIiwKICAieHZlZSI6Ilx1MjJDMSIsCiAgInh3ZWRnZSI6Ilx1MjJDMCIsCiAgIllhY3V0ZSI6Ilx1MDBERCIsCiAgInlhY3V0ZSI6Ilx1MDBGRCIsCiAgIllBY3kiOiJcdTA0MkYiLAogICJ5YWN5IjoiXHUwNDRGIiwKICAiWWNpcmMiOiJcdTAxNzYiLAogICJ5Y2lyYyI6Ilx1MDE3NyIsCiAgIlljeSI6Ilx1MDQyQiIsCiAgInljeSI6Ilx1MDQ0QiIsCiAgInllbiI6Ilx1MDBBNSIsCiAgIllmciI6Ilx1RDgzNVx1REQxQyIsCiAgInlmciI6Ilx1RDgzNVx1REQzNiIsCiAgIllJY3kiOiJcdTA0MDciLAogICJ5aWN5IjoiXHUwNDU3IiwKICAiWW9wZiI6Ilx1RDgzNVx1REQ1MCIsCiAgInlvcGYiOiJcdUQ4MzVcdURENkEiLAogICJZc2NyIjoiXHVEODM1XHVEQ0I0IiwKICAieXNjciI6Ilx1RDgzNVx1RENDRSIsCiAgIllVY3kiOiJcdTA0MkUiLAogICJ5dWN5IjoiXHUwNDRFIiwKICAiWXVtbCI6Ilx1MDE3OCIsCiAgInl1bWwiOiJcdTAwRkYiLAogICJaYWN1dGUiOiJcdTAxNzkiLAogICJ6YWN1dGUiOiJcdTAxN0EiLAogICJaY2Fyb24iOiJcdTAxN0QiLAogICJ6Y2Fyb24iOiJcdTAxN0UiLAogICJaY3kiOiJcdTA0MTciLAogICJ6Y3kiOiJcdTA0MzciLAogICJaZG90IjoiXHUwMTdCIiwKICAiemRvdCI6Ilx1MDE3QyIsCiAgInplZXRyZiI6Ilx1MjEyOCIsCiAgIlplcm9XaWR0aFNwYWNlIjoiXHUyMDBCIiwKICAiWmV0YSI6Ilx1MDM5NiIsCiAgInpldGEiOiJcdTAzQjYiLAogICJaZnIiOiJcdTIxMjgiLAogICJ6ZnIiOiJcdUQ4MzVcdUREMzciLAogICJaSGN5IjoiXHUwNDE2IiwKICAiemhjeSI6Ilx1MDQzNiIsCiAgInppZ3JhcnIiOiJcdTIxREQiLAogICJab3BmIjoiXHUyMTI0IiwKICAiem9wZiI6Ilx1RDgzNVx1REQ2QiIsCiAgIlpzY3IiOiJcdUQ4MzVcdURDQjUiLAogICJ6c2NyIjoiXHVEODM1XHVEQ0NGIiwKICAiendqIjoiXHUyMDBEIiwKICAienduaiI6Ilx1MjAwQyIKfTsKCn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBMaXN0IG9mIHZhbGlkIGh0bWwgYmxvY2tzIG5hbWVzLCBhY2NvcnRpbmcgdG8gY29tbW9ubWFyayBzcGVjCi8vIGh0dHA6Ly9qZ20uZ2l0aHViLmlvL0NvbW1vbk1hcmsvc3BlYy5odG1sI2h0bWwtYmxvY2tzCgondXNlIHN0cmljdCc7Cgp2YXIgaHRtbF9ibG9ja3MgPSB7fTsKClsKICAnYXJ0aWNsZScsCiAgJ2FzaWRlJywKICAnYnV0dG9uJywKICAnYmxvY2txdW90ZScsCiAgJ2JvZHknLAogICdjYW52YXMnLAogICdjYXB0aW9uJywKICAnY29sJywKICAnY29sZ3JvdXAnLAogICdkZCcsCiAgJ2RpdicsCiAgJ2RsJywKICAnZHQnLAogICdlbWJlZCcsCiAgJ2ZpZWxkc2V0JywKICAnZmlnY2FwdGlvbicsCiAgJ2ZpZ3VyZScsCiAgJ2Zvb3RlcicsCiAgJ2Zvcm0nLAogICdoMScsCiAgJ2gyJywKICAnaDMnLAogICdoNCcsCiAgJ2g1JywKICAnaDYnLAogICdoZWFkZXInLAogICdoZ3JvdXAnLAogICdocicsCiAgJ2lmcmFtZScsCiAgJ2xpJywKICAnbWFwJywKICAnb2JqZWN0JywKICAnb2wnLAogICdvdXRwdXQnLAogICdwJywKICAncHJlJywKICAncHJvZ3Jlc3MnLAogICdzY3JpcHQnLAogICdzZWN0aW9uJywKICAnc3R5bGUnLAogICd0YWJsZScsCiAgJ3Rib2R5JywKICAndGQnLAogICd0ZXh0YXJlYScsCiAgJ3Rmb290JywKICAndGgnLAogICd0cicsCiAgJ3RoZWFkJywKICAndWwnLAogICd2aWRlbycKXS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7IGh0bWxfYmxvY2tzW25hbWVdID0gdHJ1ZTsgfSk7CgoKbW9kdWxlLmV4cG9ydHMgPSBodG1sX2Jsb2NrczsKCn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBSZWdleHBzIHRvIG1hdGNoIGh0bWwgZWxlbWVudHMKCid1c2Ugc3RyaWN0JzsKCgpmdW5jdGlvbiByZXBsYWNlKHJlZ2V4LCBvcHRpb25zKSB7CiAgcmVnZXggPSByZWdleC5zb3VyY2U7CiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgJyc7CgogIHJldHVybiBmdW5jdGlvbiBzZWxmKG5hbWUsIHZhbCkgewogICAgaWYgKCFuYW1lKSB7CiAgICAgIHJldHVybiBuZXcgUmVnRXhwKHJlZ2V4LCBvcHRpb25zKTsKICAgIH0KICAgIHZhbCA9IHZhbC5zb3VyY2UgfHwgdmFsOwogICAgcmVnZXggPSByZWdleC5yZXBsYWNlKG5hbWUsIHZhbCk7CiAgICByZXR1cm4gc2VsZjsKICB9Owp9CgoKdmFyIGF0dHJfbmFtZSAgICAgPSAvW2EtekEtWl86XVthLXpBLVowLTk6Ll8tXSovOwoKdmFyIHVucXVvdGVkICAgICAgPSAvW14iJz08PmBceDAwLVx4MjBdKy87CnZhciBzaW5nbGVfcXVvdGVkID0gLydbXiddKicvOwp2YXIgZG91YmxlX3F1b3RlZCA9IC8iW14iXSoiLzsKCi8qZXNsaW50IG5vLXNwYWNlZC1mdW5jOjAqLwp2YXIgYXR0cl92YWx1ZSAgPSByZXBsYWNlKC8oPzp1bnF1b3RlZHxzaW5nbGVfcXVvdGVkfGRvdWJsZV9xdW90ZWQpLykKICAgICAgICAgICAgICAgICAgICAoJ3VucXVvdGVkJywgdW5xdW90ZWQpCiAgICAgICAgICAgICAgICAgICAgKCdzaW5nbGVfcXVvdGVkJywgc2luZ2xlX3F1b3RlZCkKICAgICAgICAgICAgICAgICAgICAoJ2RvdWJsZV9xdW90ZWQnLCBkb3VibGVfcXVvdGVkKQogICAgICAgICAgICAgICAgICAgICgpOwoKdmFyIGF0dHJpYnV0ZSAgID0gcmVwbGFjZSgvKD86XHMrYXR0cl9uYW1lKD86XHMqPVxzKmF0dHJfdmFsdWUpPykvKQogICAgICAgICAgICAgICAgICAgICgnYXR0cl9uYW1lJywgYXR0cl9uYW1lKQogICAgICAgICAgICAgICAgICAgICgnYXR0cl92YWx1ZScsIGF0dHJfdmFsdWUpCiAgICAgICAgICAgICAgICAgICAgKCk7Cgp2YXIgb3Blbl90YWcgICAgPSByZXBsYWNlKC88W0EtWmEtel1bQS1aYS16MC05XSphdHRyaWJ1dGUqXHMqXC8/Pi8pCiAgICAgICAgICAgICAgICAgICAgKCdhdHRyaWJ1dGUnLCBhdHRyaWJ1dGUpCiAgICAgICAgICAgICAgICAgICAgKCk7Cgp2YXIgY2xvc2VfdGFnICAgPSAvPFwvW0EtWmEtel1bQS1aYS16MC05XSpccyo+LzsKdmFyIGNvbW1lbnQgICAgID0gLzwhLS0oW14tXSt8Wy1dW14tXSspKi0tPi87CnZhciBwcm9jZXNzaW5nICA9IC88Wz9dLio/Wz9dPi87CnZhciBkZWNsYXJhdGlvbiA9IC88IVtBLVpdK1xzK1tePl0qPi87CnZhciBjZGF0YSAgICAgICA9IC88IVxbQ0RBVEFcWyhbXlxdXSt8XF1bXlxdXXxcXVxdW14+XSkqXF1cXT4vOwoKdmFyIEhUTUxfVEFHX1JFID0gcmVwbGFjZSgvXig/Om9wZW5fdGFnfGNsb3NlX3RhZ3xjb21tZW50fHByb2Nlc3Npbmd8ZGVjbGFyYXRpb258Y2RhdGEpLykKICAoJ29wZW5fdGFnJywgb3Blbl90YWcpCiAgKCdjbG9zZV90YWcnLCBjbG9zZV90YWcpCiAgKCdjb21tZW50JywgY29tbWVudCkKICAoJ3Byb2Nlc3NpbmcnLCBwcm9jZXNzaW5nKQogICgnZGVjbGFyYXRpb24nLCBkZWNsYXJhdGlvbikKICAoJ2NkYXRhJywgY2RhdGEpCiAgKCk7CgoKbW9kdWxlLmV4cG9ydHMuSFRNTF9UQUdfUkUgPSBIVE1MX1RBR19SRTsKCn0se31dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBMaXN0IG9mIHZhbGlkIHVybCBzY2hlbWFzLCBhY2NvcnRpbmcgdG8gY29tbW9ubWFyayBzcGVjCi8vIGh0dHA6Ly9qZ20uZ2l0aHViLmlvL0NvbW1vbk1hcmsvc3BlYy5odG1sI2F1dG9saW5rcwoKJ3VzZSBzdHJpY3QnOwoKCm1vZHVsZS5leHBvcnRzID0gWwogICdjb2FwJywKICAnZG9pJywKICAnamF2YXNjcmlwdCcsCiAgJ2FhYScsCiAgJ2FhYXMnLAogICdhYm91dCcsCiAgJ2FjYXAnLAogICdjYXAnLAogICdjaWQnLAogICdjcmlkJywKICAnZGF0YScsCiAgJ2RhdicsCiAgJ2RpY3QnLAogICdkbnMnLAogICdmaWxlJywKICAnZnRwJywKICAnZ2VvJywKICAnZ28nLAogICdnb3BoZXInLAogICdoMzIzJywKICAnaHR0cCcsCiAgJ2h0dHBzJywKICAnaWF4JywKICAnaWNhcCcsCiAgJ2ltJywKICAnaW1hcCcsCiAgJ2luZm8nLAogICdpcHAnLAogICdpcmlzJywKICAnaXJpcy5iZWVwJywKICAnaXJpcy54cGMnLAogICdpcmlzLnhwY3MnLAogICdpcmlzLmx3eicsCiAgJ2xkYXAnLAogICdtYWlsdG8nLAogICdtaWQnLAogICdtc3JwJywKICAnbXNycHMnLAogICdtdHFwJywKICAnbXVwZGF0ZScsCiAgJ25ld3MnLAogICduZnMnLAogICduaScsCiAgJ25paCcsCiAgJ25udHAnLAogICdvcGFxdWVsb2NrdG9rZW4nLAogICdwb3AnLAogICdwcmVzJywKICAncnRzcCcsCiAgJ3NlcnZpY2UnLAogICdzZXNzaW9uJywKICAnc2h0dHAnLAogICdzaWV2ZScsCiAgJ3NpcCcsCiAgJ3NpcHMnLAogICdzbXMnLAogICdzbm1wJywKICAnc29hcC5iZWVwJywKICAnc29hcC5iZWVwcycsCiAgJ3RhZycsCiAgJ3RlbCcsCiAgJ3RlbG5ldCcsCiAgJ3RmdHAnLAogICd0aGlzbWVzc2FnZScsCiAgJ3RuMzI3MCcsCiAgJ3RpcCcsCiAgJ3R2JywKICAndXJuJywKICAndmVtbWknLAogICd3cycsCiAgJ3dzcycsCiAgJ3hjb24nLAogICd4Y29uLXVzZXJpZCcsCiAgJ3htbHJwYy5iZWVwJywKICAneG1scnBjLmJlZXBzJywKICAneG1wcCcsCiAgJ3ozOS41MHInLAogICd6MzkuNTBzJywKICAnYWRpdW14dHJhJywKICAnYWZwJywKICAnYWZzJywKICAnYWltJywKICAnYXB0JywKICAnYXR0YWNobWVudCcsCiAgJ2F3JywKICAnYmVzaGFyZScsCiAgJ2JpdGNvaW4nLAogICdib2xvJywKICAnY2FsbHRvJywKICAnY2hyb21lJywKICAnY2hyb21lLWV4dGVuc2lvbicsCiAgJ2NvbS1ldmVudGJyaXRlLWF0dGVuZGVlJywKICAnY29udGVudCcsCiAgJ2N2cycsCiAgJ2RsbmEtcGxheXNpbmdsZScsCiAgJ2RsbmEtcGxheWNvbnRhaW5lcicsCiAgJ2R0bicsCiAgJ2R2YicsCiAgJ2VkMmsnLAogICdmYWNldGltZScsCiAgJ2ZlZWQnLAogICdmaW5nZXInLAogICdmaXNoJywKICAnZ2cnLAogICdnaXQnLAogICdnaXptb3Byb2plY3QnLAogICdndGFsaycsCiAgJ2hjcCcsCiAgJ2ljb24nLAogICdpcG4nLAogICdpcmMnLAogICdpcmM2JywKICAnaXJjcycsCiAgJ2l0bXMnLAogICdqYXInLAogICdqbXMnLAogICdrZXlwYXJjJywKICAnbGFzdGZtJywKICAnbGRhcHMnLAogICdtYWduZXQnLAogICdtYXBzJywKICAnbWFya2V0JywKICAnbWVzc2FnZScsCiAgJ21tcycsCiAgJ21zLWhlbHAnLAogICdtc25pbScsCiAgJ211bWJsZScsCiAgJ212bicsCiAgJ25vdGVzJywKICAnb2lkJywKICAncGFsbScsCiAgJ3BhcGFyYXp6aScsCiAgJ3BsYXRmb3JtJywKICAncHJveHknLAogICdwc3ljJywKICAncXVlcnknLAogICdyZXMnLAogICdyZXNvdXJjZScsCiAgJ3JtaScsCiAgJ3JzeW5jJywKICAncnRtcCcsCiAgJ3NlY29uZGxpZmUnLAogICdzZnRwJywKICAnc2duJywKICAnc2t5cGUnLAogICdzbWInLAogICdzb2xkYXQnLAogICdzcG90aWZ5JywKICAnc3NoJywKICAnc3RlYW0nLAogICdzdm4nLAogICd0ZWFtc3BlYWsnLAogICd0aGluZ3MnLAogICd1ZHAnLAogICd1bnJlYWwnLAogICd1dDIwMDQnLAogICd2ZW50cmlsbycsCiAgJ3ZpZXctc291cmNlJywKICAnd2ViY2FsJywKICAnd3RhaScsCiAgJ3d5Y2l3eWcnLAogICd4ZmlyZScsCiAgJ3hyaScsCiAgJ3ltc2dyJwpdOwoKfSx7fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCi8qKgogKiBVdGlsaXR5IGZ1bmN0aW9ucwogKi8KCmZ1bmN0aW9uIHR5cGVPZihvYmopIHsKICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaik7Cn0KCmZ1bmN0aW9uIGlzU3RyaW5nKG9iaikgewogIHJldHVybiB0eXBlT2Yob2JqKSA9PT0gJ1tvYmplY3QgU3RyaW5nXSc7Cn0KCnZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwoKZnVuY3Rpb24gaGFzKG9iamVjdCwga2V5KSB7CiAgcmV0dXJuIG9iamVjdAogICAgPyBoYXNPd24uY2FsbChvYmplY3QsIGtleSkKICAgIDogZmFsc2U7Cn0KCi8vIEV4dGVuZCBvYmplY3RzCi8vCmZ1bmN0aW9uIGFzc2lnbihvYmogLypmcm9tMSwgZnJvbTIsIGZyb20zLCAuLi4qLykgewogIHZhciBzb3VyY2VzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwoKICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZSkgewogICAgaWYgKCFzb3VyY2UpIHsgcmV0dXJuOyB9CgogICAgaWYgKHR5cGVvZiBzb3VyY2UgIT09ICdvYmplY3QnKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3Ioc291cmNlICsgJ211c3QgYmUgb2JqZWN0Jyk7CiAgICB9CgogICAgT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgb2JqW2tleV0gPSBzb3VyY2Vba2V5XTsKICAgIH0pOwogIH0pOwoKICByZXR1cm4gb2JqOwp9CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKdmFyIFVORVNDQVBFX01EX1JFID0gL1xcKFtcXCEiIyQlJicoKSorLC5cLzo7PD0+P0BbXF1eX2B7fH1+LV0pL2c7CgpmdW5jdGlvbiB1bmVzY2FwZU1kKHN0cikgewogIGlmIChzdHIuaW5kZXhPZignXFwnKSA8IDApIHsgcmV0dXJuIHN0cjsgfQogIHJldHVybiBzdHIucmVwbGFjZShVTkVTQ0FQRV9NRF9SRSwgJyQxJyk7Cn0KCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgpmdW5jdGlvbiBpc1ZhbGlkRW50aXR5Q29kZShjKSB7CiAgLyplc2xpbnQgbm8tYml0d2lzZTowKi8KICAvLyBicm9rZW4gc2VxdWVuY2UKICBpZiAoYyA+PSAweEQ4MDAgJiYgYyA8PSAweERGRkYpIHsgcmV0dXJuIGZhbHNlOyB9CiAgLy8gbmV2ZXIgdXNlZAogIGlmIChjID49IDB4RkREMCAmJiBjIDw9IDB4RkRFRikgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoKGMgJiAweEZGRkYpID09PSAweEZGRkYgfHwgKGMgJiAweEZGRkYpID09PSAweEZGRkUpIHsgcmV0dXJuIGZhbHNlOyB9CiAgLy8gY29udHJvbCBjb2RlcwogIGlmIChjID49IDB4MDAgJiYgYyA8PSAweDA4KSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChjID09PSAweDBCKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChjID49IDB4MEUgJiYgYyA8PSAweDFGKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChjID49IDB4N0YgJiYgYyA8PSAweDlGKSB7IHJldHVybiBmYWxzZTsgfQogIC8vIG91dCBvZiByYW5nZQogIGlmIChjID4gMHgxMEZGRkYpIHsgcmV0dXJuIGZhbHNlOyB9CiAgcmV0dXJuIHRydWU7Cn0KCmZ1bmN0aW9uIGZyb21Db2RlUG9pbnQoYykgewogIC8qZXNsaW50IG5vLWJpdHdpc2U6MCovCiAgaWYgKGMgPiAweGZmZmYpIHsKICAgIGMgLT0gMHgxMDAwMDsKICAgIHZhciBzdXJyb2dhdGUxID0gMHhkODAwICsgKGMgPj4gMTApLAogICAgICAgIHN1cnJvZ2F0ZTIgPSAweGRjMDAgKyAoYyAmIDB4M2ZmKTsKCiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShzdXJyb2dhdGUxLCBzdXJyb2dhdGUyKTsKICB9CiAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7Cn0KCnZhciBOQU1FRF9FTlRJVFlfUkUgICA9IC8mKFthLXojXVthLXowLTldezEsMzF9KTsvZ2k7CnZhciBESUdJVEFMX0VOVElUWV9URVNUX1JFID0gL14jKCg/OnhbYS1mMC05XXsxLDh9fFswLTldezEsOH0pKS9pOwp2YXIgZW50aXRpZXMgPSByZXF1aXJlKCcuL2VudGl0aWVzJyk7CgpmdW5jdGlvbiByZXBsYWNlRW50aXR5UGF0dGVybihtYXRjaCwgbmFtZSkgewogIHZhciBjb2RlID0gMDsKCiAgaWYgKGhhcyhlbnRpdGllcywgbmFtZSkpIHsKICAgIHJldHVybiBlbnRpdGllc1tuYW1lXTsKICB9IGVsc2UgaWYgKG5hbWUuY2hhckNvZGVBdCgwKSA9PT0gMHgyMy8qICMgKi8gJiYgRElHSVRBTF9FTlRJVFlfVEVTVF9SRS50ZXN0KG5hbWUpKSB7CiAgICBjb2RlID0gbmFtZVsxXS50b0xvd2VyQ2FzZSgpID09PSAneCcgPwogICAgICBwYXJzZUludChuYW1lLnNsaWNlKDIpLCAxNikKICAgIDoKICAgICAgcGFyc2VJbnQobmFtZS5zbGljZSgxKSwgMTApOwogICAgaWYgKGlzVmFsaWRFbnRpdHlDb2RlKGNvZGUpKSB7CiAgICAgIHJldHVybiBmcm9tQ29kZVBvaW50KGNvZGUpOwogICAgfQogIH0KICByZXR1cm4gbWF0Y2g7Cn0KCmZ1bmN0aW9uIHJlcGxhY2VFbnRpdGllcyhzdHIpIHsKICBpZiAoc3RyLmluZGV4T2YoJyYnKSA8IDApIHsgcmV0dXJuIHN0cjsgfQoKICByZXR1cm4gc3RyLnJlcGxhY2UoTkFNRURfRU5USVRZX1JFLCByZXBsYWNlRW50aXR5UGF0dGVybik7Cn0KCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgp2YXIgSFRNTF9FU0NBUEVfVEVTVF9SRSA9IC9bJjw+Il0vOwp2YXIgSFRNTF9FU0NBUEVfUkVQTEFDRV9SRSA9IC9bJjw+Il0vZzsKdmFyIEhUTUxfUkVQTEFDRU1FTlRTID0gewogICcmJzogJyZhbXA7JywKICAnPCc6ICcmbHQ7JywKICAnPic6ICcmZ3Q7JywKICAnIic6ICcmcXVvdDsnCn07CgpmdW5jdGlvbiByZXBsYWNlVW5zYWZlQ2hhcihjaCkgewogIHJldHVybiBIVE1MX1JFUExBQ0VNRU5UU1tjaF07Cn0KCmZ1bmN0aW9uIGVzY2FwZUh0bWwoc3RyKSB7CiAgaWYgKEhUTUxfRVNDQVBFX1RFU1RfUkUudGVzdChzdHIpKSB7CiAgICByZXR1cm4gc3RyLnJlcGxhY2UoSFRNTF9FU0NBUEVfUkVQTEFDRV9SRSwgcmVwbGFjZVVuc2FmZUNoYXIpOwogIH0KICByZXR1cm4gc3RyOwp9CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKZXhwb3J0cy5hc3NpZ24gICAgICAgICAgICA9IGFzc2lnbjsKZXhwb3J0cy5pc1N0cmluZyAgICAgICAgICA9IGlzU3RyaW5nOwpleHBvcnRzLmhhcyAgICAgICAgICAgICAgID0gaGFzOwpleHBvcnRzLnVuZXNjYXBlTWQgICAgICAgID0gdW5lc2NhcGVNZDsKZXhwb3J0cy5pc1ZhbGlkRW50aXR5Q29kZSA9IGlzVmFsaWRFbnRpdHlDb2RlOwpleHBvcnRzLmZyb21Db2RlUG9pbnQgICAgID0gZnJvbUNvZGVQb2ludDsKZXhwb3J0cy5yZXBsYWNlRW50aXRpZXMgICA9IHJlcGxhY2VFbnRpdGllczsKZXhwb3J0cy5lc2NhcGVIdG1sICAgICAgICA9IGVzY2FwZUh0bWw7Cgp9LHsiLi9lbnRpdGllcyI6MX1dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBDb21tb25tYXJrIGRlZmF1bHQgb3B0aW9ucwoKJ3VzZSBzdHJpY3QnOwoKCm1vZHVsZS5leHBvcnRzID0gewogIG9wdGlvbnM6IHsKICAgIGh0bWw6ICAgICAgICAgdHJ1ZSwgICAgICAgICAvLyBFbmFibGUgSFRNTCB0YWdzIGluIHNvdXJjZQogICAgeGh0bWxPdXQ6ICAgICB0cnVlLCAgICAgICAgIC8vIFVzZSAnLycgdG8gY2xvc2Ugc2luZ2xlIHRhZ3MgKDxiciAvPikKICAgIGJyZWFrczogICAgICAgZmFsc2UsICAgICAgICAvLyBDb252ZXJ0ICdcbicgaW4gcGFyYWdyYXBocyBpbnRvIDxicj4KICAgIGxhbmdQcmVmaXg6ICAgJ2xhbmd1YWdlLScsICAvLyBDU1MgbGFuZ3VhZ2UgcHJlZml4IGZvciBmZW5jZWQgYmxvY2tzCiAgICBsaW5raWZ5OiAgICAgIGZhbHNlLCAgICAgICAgLy8gYXV0b2NvbnZlcnQgVVJMLWxpa2UgdGV4dHMgdG8gbGlua3MKICAgIGxpbmtUYXJnZXQ6ICAgJycsICAgICAgICAgICAvLyBzZXQgdGFyZ2V0IHRvIG9wZW4gbGluayBpbgoKICAgIC8vIEVuYWJsZSBzb21lIGxhbmd1YWdlLW5ldXRyYWwgcmVwbGFjZW1lbnRzICsgcXVvdGVzIGJlYXV0aWZpY2F0aW9uCiAgICB0eXBvZ3JhcGhlcjogIGZhbHNlLAoKICAgIC8vIERvdWJsZSArIHNpbmdsZSBxdW90ZXMgcmVwbGFjZW1lbnQgcGFpcnMsIHdoZW4gdHlwb2dyYXBoZXIgZW5hYmxlZCwKICAgIC8vIGFuZCBzbWFydHF1b3RlcyBvbi4gU2V0IGRvdWJsZXMgdG8gJ8KrwrsnIGZvciBSdXNzaWFuLCAn4oCe4oCcJyBmb3IgR2VybWFuLgogICAgcXVvdGVzOiAn4oCc4oCd4oCY4oCZJywKCiAgICAvLyBIaWdobGlnaHRlciBmdW5jdGlvbi4gU2hvdWxkIHJldHVybiBlc2NhcGVkIEhUTUwsCiAgICAvLyBvciAnJyBpZiBpbnB1dCBub3QgY2hhbmdlZAogICAgLy8KICAgIC8vIGZ1bmN0aW9uICgvKnN0ciwgbGFuZyovKSB7IHJldHVybiAnJzsgfQogICAgLy8KICAgIGhpZ2hsaWdodDogbnVsbCwKCiAgICBtYXhOZXN0aW5nOiAgIDIwICAgICAgICAgICAgLy8gSW50ZXJuYWwgcHJvdGVjdGlvbiwgcmVjdXJzaW9uIGxpbWl0CiAgfSwKCiAgY29tcG9uZW50czogewoKICAgIGNvcmU6IHsKICAgICAgcnVsZXM6IFsKICAgICAgICAnYmxvY2snLAogICAgICAgICdpbmxpbmUnLAogICAgICAgICdyZWZlcmVuY2VzJywKICAgICAgICAnYWJicjInCiAgICAgIF0KICAgIH0sCgogICAgYmxvY2s6IHsKICAgICAgcnVsZXM6IFsKICAgICAgICAnYmxvY2txdW90ZScsCiAgICAgICAgJ2NvZGUnLAogICAgICAgICdmZW5jZXMnLAogICAgICAgICdoZWFkaW5nJywKICAgICAgICAnaHInLAogICAgICAgICdodG1sYmxvY2snLAogICAgICAgICdsaGVhZGluZycsCiAgICAgICAgJ2xpc3QnLAogICAgICAgICdwYXJhZ3JhcGgnCiAgICAgIF0KICAgIH0sCgogICAgaW5saW5lOiB7CiAgICAgIHJ1bGVzOiBbCiAgICAgICAgJ2F1dG9saW5rJywKICAgICAgICAnYmFja3RpY2tzJywKICAgICAgICAnZW1waGFzaXMnLAogICAgICAgICdlbnRpdHknLAogICAgICAgICdlc2NhcGUnLAogICAgICAgICdodG1sdGFnJywKICAgICAgICAnbGlua3MnLAogICAgICAgICduZXdsaW5lJywKICAgICAgICAndGV4dCcKICAgICAgXQogICAgfQogIH0KfTsKCn0se31dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBSZW1hcmthYmxlIGRlZmF1bHQgb3B0aW9ucwoKJ3VzZSBzdHJpY3QnOwoKCm1vZHVsZS5leHBvcnRzID0gewogIG9wdGlvbnM6IHsKICAgIGh0bWw6ICAgICAgICAgZmFsc2UsICAgICAgICAvLyBFbmFibGUgSFRNTCB0YWdzIGluIHNvdXJjZQogICAgeGh0bWxPdXQ6ICAgICBmYWxzZSwgICAgICAgIC8vIFVzZSAnLycgdG8gY2xvc2Ugc2luZ2xlIHRhZ3MgKDxiciAvPikKICAgIGJyZWFrczogICAgICAgZmFsc2UsICAgICAgICAvLyBDb252ZXJ0ICdcbicgaW4gcGFyYWdyYXBocyBpbnRvIDxicj4KICAgIGxhbmdQcmVmaXg6ICAgJ2xhbmd1YWdlLScsICAvLyBDU1MgbGFuZ3VhZ2UgcHJlZml4IGZvciBmZW5jZWQgYmxvY2tzCiAgICBsaW5raWZ5OiAgICAgIGZhbHNlLCAgICAgICAgLy8gYXV0b2NvbnZlcnQgVVJMLWxpa2UgdGV4dHMgdG8gbGlua3MKICAgIGxpbmtUYXJnZXQ6ICAgJycsICAgICAgICAgICAvLyBzZXQgdGFyZ2V0IHRvIG9wZW4gbGluayBpbgoKICAgIC8vIEVuYWJsZSBzb21lIGxhbmd1YWdlLW5ldXRyYWwgcmVwbGFjZW1lbnRzICsgcXVvdGVzIGJlYXV0aWZpY2F0aW9uCiAgICB0eXBvZ3JhcGhlcjogIGZhbHNlLAoKICAgIC8vIERvdWJsZSArIHNpbmdsZSBxdW90ZXMgcmVwbGFjZW1lbnQgcGFpcnMsIHdoZW4gdHlwb2dyYXBoZXIgZW5hYmxlZCwKICAgIC8vIGFuZCBzbWFydHF1b3RlcyBvbi4gU2V0IGRvdWJsZXMgdG8gJ8KrwrsnIGZvciBSdXNzaWFuLCAn4oCe4oCcJyBmb3IgR2VybWFuLgogICAgcXVvdGVzOiAn4oCc4oCd4oCY4oCZJywKCiAgICAvLyBIaWdobGlnaHRlciBmdW5jdGlvbi4gU2hvdWxkIHJldHVybiBlc2NhcGVkIEhUTUwsCiAgICAvLyBvciAnJyBpZiBpbnB1dCBub3QgY2hhbmdlZAogICAgLy8KICAgIC8vIGZ1bmN0aW9uICgvKnN0ciwgbGFuZyovKSB7IHJldHVybiAnJzsgfQogICAgLy8KICAgIGhpZ2hsaWdodDogbnVsbCwKCiAgICBtYXhOZXN0aW5nOiAgIDIwICAgICAgICAgICAgLy8gSW50ZXJuYWwgcHJvdGVjdGlvbiwgcmVjdXJzaW9uIGxpbWl0CiAgfSwKCiAgY29tcG9uZW50czogewoKICAgIGNvcmU6IHsKICAgICAgcnVsZXM6IFsKICAgICAgICAnYmxvY2snLAogICAgICAgICdpbmxpbmUnLAogICAgICAgICdyZWZlcmVuY2VzJywKICAgICAgICAncmVwbGFjZW1lbnRzJywKICAgICAgICAnbGlua2lmeScsCiAgICAgICAgJ3NtYXJ0cXVvdGVzJywKICAgICAgICAncmVmZXJlbmNlcycsCiAgICAgICAgJ2FiYnIyJywKICAgICAgICAnZm9vdG5vdGVfdGFpbCcKICAgICAgXQogICAgfSwKCiAgICBibG9jazogewogICAgICBydWxlczogWwogICAgICAgICdibG9ja3F1b3RlJywKICAgICAgICAnY29kZScsCiAgICAgICAgJ2ZlbmNlcycsCiAgICAgICAgJ2hlYWRpbmcnLAogICAgICAgICdocicsCiAgICAgICAgJ2h0bWxibG9jaycsCiAgICAgICAgJ2xoZWFkaW5nJywKICAgICAgICAnbGlzdCcsCiAgICAgICAgJ3BhcmFncmFwaCcsCiAgICAgICAgJ3RhYmxlJwogICAgICBdCiAgICB9LAoKICAgIGlubGluZTogewogICAgICBydWxlczogWwogICAgICAgICdhdXRvbGluaycsCiAgICAgICAgJ2JhY2t0aWNrcycsCiAgICAgICAgJ2RlbCcsCiAgICAgICAgJ2VtcGhhc2lzJywKICAgICAgICAnZW50aXR5JywKICAgICAgICAnZXNjYXBlJywKICAgICAgICAnZm9vdG5vdGVfcmVmJywKICAgICAgICAnaHRtbHRhZycsCiAgICAgICAgJ2xpbmtzJywKICAgICAgICAnbmV3bGluZScsCiAgICAgICAgJ3RleHQnCiAgICAgIF0KICAgIH0KICB9Cn07Cgp9LHt9XSw4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gUmVtYXJrYWJsZSBkZWZhdWx0IG9wdGlvbnMKCid1c2Ugc3RyaWN0JzsKCgptb2R1bGUuZXhwb3J0cyA9IHsKICBvcHRpb25zOiB7CiAgICBodG1sOiAgICAgICAgIGZhbHNlLCAgICAgICAgLy8gRW5hYmxlIEhUTUwgdGFncyBpbiBzb3VyY2UKICAgIHhodG1sT3V0OiAgICAgZmFsc2UsICAgICAgICAvLyBVc2UgJy8nIHRvIGNsb3NlIHNpbmdsZSB0YWdzICg8YnIgLz4pCiAgICBicmVha3M6ICAgICAgIGZhbHNlLCAgICAgICAgLy8gQ29udmVydCAnXG4nIGluIHBhcmFncmFwaHMgaW50byA8YnI+CiAgICBsYW5nUHJlZml4OiAgICdsYW5ndWFnZS0nLCAgLy8gQ1NTIGxhbmd1YWdlIHByZWZpeCBmb3IgZmVuY2VkIGJsb2NrcwogICAgbGlua2lmeTogICAgICBmYWxzZSwgICAgICAgIC8vIGF1dG9jb252ZXJ0IFVSTC1saWtlIHRleHRzIHRvIGxpbmtzCiAgICBsaW5rVGFyZ2V0OiAgICcnLCAgICAgICAgICAgLy8gc2V0IHRhcmdldCB0byBvcGVuIGxpbmsgaW4KCiAgICAvLyBFbmFibGUgc29tZSBsYW5ndWFnZS1uZXV0cmFsIHJlcGxhY2VtZW50cyArIHF1b3RlcyBiZWF1dGlmaWNhdGlvbgogICAgdHlwb2dyYXBoZXI6ICBmYWxzZSwKCiAgICAvLyBEb3VibGUgKyBzaW5nbGUgcXVvdGVzIHJlcGxhY2VtZW50IHBhaXJzLCB3aGVuIHR5cG9ncmFwaGVyIGVuYWJsZWQsCiAgICAvLyBhbmQgc21hcnRxdW90ZXMgb24uIFNldCBkb3VibGVzIHRvICfCq8K7JyBmb3IgUnVzc2lhbiwgJ+KAnuKAnCcgZm9yIEdlcm1hbi4KICAgIHF1b3RlczogICAgICAgJ+KAnOKAneKAmOKAmScsCgogICAgLy8gSGlnaGxpZ2h0ZXIgZnVuY3Rpb24uIFNob3VsZCByZXR1cm4gZXNjYXBlZCBIVE1MLAogICAgLy8gb3IgJycgaWYgaW5wdXQgbm90IGNoYW5nZWQKICAgIC8vCiAgICAvLyBmdW5jdGlvbiAoLypzdHIsIGxhbmcqLykgeyByZXR1cm4gJyc7IH0KICAgIC8vCiAgICBoaWdobGlnaHQ6ICAgICBudWxsLAoKICAgIG1heE5lc3Rpbmc6ICAgIDIwICAgICAgICAgICAgLy8gSW50ZXJuYWwgcHJvdGVjdGlvbiwgcmVjdXJzaW9uIGxpbWl0CiAgfSwKCiAgY29tcG9uZW50czogewogICAgLy8gRG9uJ3QgcmVzdHJpY3QgY29yZS9ibG9jay9pbmxpbmUgcnVsZXMKICAgIGNvcmU6IHt9LAogICAgYmxvY2s6IHt9LAogICAgaW5saW5lOiB7fQogIH0KfTsKCn0se31dLDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgcmVwbGFjZUVudGl0aWVzID0gcmVxdWlyZSgnLi4vY29tbW9uL3V0aWxzJykucmVwbGFjZUVudGl0aWVzOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBub3JtYWxpemVMaW5rKHVybCkgewogIHZhciBub3JtYWxpemVkID0gcmVwbGFjZUVudGl0aWVzKHVybCk7CiAgLy8gV2Ugc2hvdWxkbid0IGNhcmUgYWJvdXQgdGhlIHJlc3VsdCBvZiBtYWxmb3JtZWQgVVJJcywKICAvLyBhbmQgc2hvdWxkIG5vdCB0aHJvdyBhbiBleGNlcHRpb24uCiAgdHJ5IHsKICAgIG5vcm1hbGl6ZWQgPSBkZWNvZGVVUkkobm9ybWFsaXplZCk7CiAgfSBjYXRjaCAoZXJyKSB7fQogIHJldHVybiBlbmNvZGVVUkkobm9ybWFsaXplZCk7Cn07Cgp9LHsiLi4vY29tbW9uL3V0aWxzIjo1fV0sMTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZVJlZmVyZW5jZShzdHIpIHsKICAvLyB1c2UgLnRvVXBwZXJDYXNlKCkgaW5zdGVhZCBvZiAudG9Mb3dlckNhc2UoKQogIC8vIGhlcmUgdG8gYXZvaWQgYSBjb25mbGljdCB3aXRoIE9iamVjdC5wcm90b3R5cGUKICAvLyBtZW1iZXJzIChtb3N0IG5vdGFibHksIGBfX3Byb3RvX19gKQogIHJldHVybiBzdHIudHJpbSgpLnJlcGxhY2UoL1xzKy9nLCAnICcpLnRvVXBwZXJDYXNlKCk7Cn07Cgp9LHt9XSwxMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCgp2YXIgbm9ybWFsaXplTGluayA9IHJlcXVpcmUoJy4vbm9ybWFsaXplX2xpbmsnKTsKdmFyIHVuZXNjYXBlTWQgICAgPSByZXF1aXJlKCcuLi9jb21tb24vdXRpbHMnKS51bmVzY2FwZU1kOwoKLyoqCiAqIFBhcnNlIGxpbmsgZGVzdGluYXRpb24KICoKICogICAtIG9uIHN1Y2Nlc3MgaXQgcmV0dXJucyBhIHN0cmluZyBhbmQgdXBkYXRlcyBzdGF0ZS5wb3M7CiAqICAgLSBvbiBmYWlsdXJlIGl0IHJldHVybnMgbnVsbAogKgogKiBAcGFyYW0gIHtPYmplY3R9IHN0YXRlCiAqIEBwYXJhbSAge051bWJlcn0gcG9zCiAqIEBhcGkgcHJpdmF0ZQogKi8KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2VMaW5rRGVzdGluYXRpb24oc3RhdGUsIHBvcykgewogIHZhciBjb2RlLCBsZXZlbCwgbGluaywKICAgICAgc3RhcnQgPSBwb3MsCiAgICAgIG1heCA9IHN0YXRlLnBvc01heDsKCiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgPT09IDB4M0MgLyogPCAqLykgewogICAgcG9zKys7CiAgICB3aGlsZSAocG9zIDwgbWF4KSB7CiAgICAgIGNvZGUgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpOwogICAgICBpZiAoY29kZSA9PT0gMHgwQSAvKiBcbiAqLykgeyByZXR1cm4gZmFsc2U7IH0KICAgICAgaWYgKGNvZGUgPT09IDB4M0UgLyogPiAqLykgewogICAgICAgIGxpbmsgPSBub3JtYWxpemVMaW5rKHVuZXNjYXBlTWQoc3RhdGUuc3JjLnNsaWNlKHN0YXJ0ICsgMSwgcG9zKSkpOwogICAgICAgIGlmICghc3RhdGUucGFyc2VyLnZhbGlkYXRlTGluayhsaW5rKSkgeyByZXR1cm4gZmFsc2U7IH0KICAgICAgICBzdGF0ZS5wb3MgPSBwb3MgKyAxOwogICAgICAgIHN0YXRlLmxpbmtDb250ZW50ID0gbGluazsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICBpZiAoY29kZSA9PT0gMHg1QyAvKiBcICovICYmIHBvcyArIDEgPCBtYXgpIHsKICAgICAgICBwb3MgKz0gMjsKICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgcG9zKys7CiAgICB9CgogICAgLy8gbm8gY2xvc2luZyAnPicKICAgIHJldHVybiBmYWxzZTsKICB9CgogIC8vIHRoaXMgc2hvdWxkIGJlIC4uLiB9IGVsc2UgeyAuLi4gYnJhbmNoCgogIGxldmVsID0gMDsKICB3aGlsZSAocG9zIDwgbWF4KSB7CiAgICBjb2RlID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKTsKCiAgICBpZiAoY29kZSA9PT0gMHgyMCkgeyBicmVhazsgfQoKICAgIGlmIChjb2RlID4gMHgwOCAmJiBjb2RlIDwgMHgwZSkgeyBicmVhazsgfQoKICAgIGlmIChjb2RlID09PSAweDVDIC8qIFwgKi8gJiYgcG9zICsgMSA8IG1heCkgewogICAgICBwb3MgKz0gMjsKICAgICAgY29udGludWU7CiAgICB9CgogICAgaWYgKGNvZGUgPT09IDB4MjggLyogKCAqLykgewogICAgICBsZXZlbCsrOwogICAgICBpZiAobGV2ZWwgPiAxKSB7IGJyZWFrOyB9CiAgICB9CgogICAgaWYgKGNvZGUgPT09IDB4MjkgLyogKSAqLykgewogICAgICBsZXZlbC0tOwogICAgICBpZiAobGV2ZWwgPCAwKSB7IGJyZWFrOyB9CiAgICB9CgogICAgcG9zKys7CiAgfQoKICBpZiAoc3RhcnQgPT09IHBvcykgeyByZXR1cm4gZmFsc2U7IH0KCiAgbGluayA9IHVuZXNjYXBlTWQoc3RhdGUuc3JjLnNsaWNlKHN0YXJ0LCBwb3MpKTsKICBpZiAoIXN0YXRlLnBhcnNlci52YWxpZGF0ZUxpbmsobGluaykpIHsgcmV0dXJuIGZhbHNlOyB9CgogIHN0YXRlLmxpbmtDb250ZW50ID0gbGluazsKICBzdGF0ZS5wb3MgPSBwb3M7CiAgcmV0dXJuIHRydWU7Cn07Cgp9LHsiLi4vY29tbW9uL3V0aWxzIjo1LCIuL25vcm1hbGl6ZV9saW5rIjo5fV0sMTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgovKioKICogUGFyc2UgbGluayBsYWJlbHMKICoKICogVGhpcyBmdW5jdGlvbiBhc3N1bWVzIHRoYXQgZmlyc3QgY2hhcmFjdGVyIChgW2ApIGFscmVhZHkgbWF0Y2hlczsKICogcmV0dXJucyB0aGUgZW5kIG9mIHRoZSBsYWJlbC4KICoKICogQHBhcmFtICB7T2JqZWN0fSBzdGF0ZQogKiBAcGFyYW0gIHtOdW1iZXJ9IHN0YXJ0CiAqIEBhcGkgcHJpdmF0ZQogKi8KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2VMaW5rTGFiZWwoc3RhdGUsIHN0YXJ0KSB7CiAgdmFyIGxldmVsLCBmb3VuZCwgbWFya2VyLAogICAgICBsYWJlbEVuZCA9IC0xLAogICAgICBtYXggPSBzdGF0ZS5wb3NNYXgsCiAgICAgIG9sZFBvcyA9IHN0YXRlLnBvcywKICAgICAgb2xkRmxhZyA9IHN0YXRlLmlzSW5MYWJlbDsKCiAgaWYgKHN0YXRlLmlzSW5MYWJlbCkgeyByZXR1cm4gLTE7IH0KCiAgaWYgKHN0YXRlLmxhYmVsVW5tYXRjaGVkU2NvcGVzKSB7CiAgICBzdGF0ZS5sYWJlbFVubWF0Y2hlZFNjb3Blcy0tOwogICAgcmV0dXJuIC0xOwogIH0KCiAgc3RhdGUucG9zID0gc3RhcnQgKyAxOwogIHN0YXRlLmlzSW5MYWJlbCA9IHRydWU7CiAgbGV2ZWwgPSAxOwoKICB3aGlsZSAoc3RhdGUucG9zIDwgbWF4KSB7CiAgICBtYXJrZXIgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGF0ZS5wb3MpOwogICAgaWYgKG1hcmtlciA9PT0gMHg1QiAvKiBbICovKSB7CiAgICAgIGxldmVsKys7CiAgICB9IGVsc2UgaWYgKG1hcmtlciA9PT0gMHg1RCAvKiBdICovKSB7CiAgICAgIGxldmVsLS07CiAgICAgIGlmIChsZXZlbCA9PT0gMCkgewogICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHN0YXRlLnBhcnNlci5za2lwVG9rZW4oc3RhdGUpOwogIH0KCiAgaWYgKGZvdW5kKSB7CiAgICBsYWJlbEVuZCA9IHN0YXRlLnBvczsKICAgIHN0YXRlLmxhYmVsVW5tYXRjaGVkU2NvcGVzID0gMDsKICB9IGVsc2UgewogICAgc3RhdGUubGFiZWxVbm1hdGNoZWRTY29wZXMgPSBsZXZlbCAtIDE7CiAgfQoKICAvLyByZXN0b3JlIG9sZCBzdGF0ZQogIHN0YXRlLnBvcyA9IG9sZFBvczsKICBzdGF0ZS5pc0luTGFiZWwgPSBvbGRGbGFnOwoKICByZXR1cm4gbGFiZWxFbmQ7Cn07Cgp9LHt9XSwxMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCgp2YXIgdW5lc2NhcGVNZCA9IHJlcXVpcmUoJy4uL2NvbW1vbi91dGlscycpLnVuZXNjYXBlTWQ7CgovKioKICogUGFyc2UgbGluayB0aXRsZQogKgogKiAgIC0gb24gc3VjY2VzcyBpdCByZXR1cm5zIGEgc3RyaW5nIGFuZCB1cGRhdGVzIHN0YXRlLnBvczsKICogICAtIG9uIGZhaWx1cmUgaXQgcmV0dXJucyBudWxsCiAqCiAqIEBwYXJhbSAge09iamVjdH0gc3RhdGUKICogQHBhcmFtICB7TnVtYmVyfSBwb3MKICogQGFwaSBwcml2YXRlCiAqLwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZUxpbmtUaXRsZShzdGF0ZSwgcG9zKSB7CiAgdmFyIGNvZGUsCiAgICAgIHN0YXJ0ID0gcG9zLAogICAgICBtYXggPSBzdGF0ZS5wb3NNYXgsCiAgICAgIG1hcmtlciA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcyk7CgogIGlmIChtYXJrZXIgIT09IDB4MjIgLyogIiAqLyAmJiBtYXJrZXIgIT09IDB4MjcgLyogJyAqLyAmJiBtYXJrZXIgIT09IDB4MjggLyogKCAqLykgeyByZXR1cm4gZmFsc2U7IH0KCiAgcG9zKys7CgogIC8vIGlmIG9wZW5pbmcgbWFya2VyIGlzICIoIiwgc3dpdGNoIGl0IHRvIGNsb3NpbmcgbWFya2VyICIpIgogIGlmIChtYXJrZXIgPT09IDB4MjgpIHsgbWFya2VyID0gMHgyOTsgfQoKICB3aGlsZSAocG9zIDwgbWF4KSB7CiAgICBjb2RlID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKTsKICAgIGlmIChjb2RlID09PSBtYXJrZXIpIHsKICAgICAgc3RhdGUucG9zID0gcG9zICsgMTsKICAgICAgc3RhdGUubGlua0NvbnRlbnQgPSB1bmVzY2FwZU1kKHN0YXRlLnNyYy5zbGljZShzdGFydCArIDEsIHBvcykpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIGlmIChjb2RlID09PSAweDVDIC8qIFwgKi8gJiYgcG9zICsgMSA8IG1heCkgewogICAgICBwb3MgKz0gMjsKICAgICAgY29udGludWU7CiAgICB9CgogICAgcG9zKys7CiAgfQoKICByZXR1cm4gZmFsc2U7Cn07Cgp9LHsiLi4vY29tbW9uL3V0aWxzIjo1fV0sMTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgovKioKICogTG9jYWwgZGVwZW5kZW5jaWVzCiAqLwoKdmFyIGFzc2lnbiAgICAgICA9IHJlcXVpcmUoJy4vY29tbW9uL3V0aWxzJykuYXNzaWduOwp2YXIgUmVuZGVyZXIgICAgID0gcmVxdWlyZSgnLi9yZW5kZXJlcicpOwp2YXIgUGFyc2VyQ29yZSAgID0gcmVxdWlyZSgnLi9wYXJzZXJfY29yZScpOwp2YXIgUGFyc2VyQmxvY2sgID0gcmVxdWlyZSgnLi9wYXJzZXJfYmxvY2snKTsKdmFyIFBhcnNlcklubGluZSA9IHJlcXVpcmUoJy4vcGFyc2VyX2lubGluZScpOwp2YXIgUnVsZXIgICAgICAgID0gcmVxdWlyZSgnLi9ydWxlcicpOwoKLyoqCiAqIFByZXNldCBjb25maWdzCiAqLwoKdmFyIGNvbmZpZyA9IHsKICAnZGVmYXVsdCc6ICAgIHJlcXVpcmUoJy4vY29uZmlncy9kZWZhdWx0JyksCiAgJ2Z1bGwnOiAgICAgICByZXF1aXJlKCcuL2NvbmZpZ3MvZnVsbCcpLAogICdjb21tb25tYXJrJzogcmVxdWlyZSgnLi9jb25maWdzL2NvbW1vbm1hcmsnKQp9OwoKLyoqCiAqIFRoZSBgU3RhdGVDb3JlYCBjbGFzcyBtYW5hZ2VzIHN0YXRlLgogKgogKiBAcGFyYW0ge09iamVjdH0gYGluc3RhbmNlYCBSZW1hcmthYmxlIGluc3RhbmNlCiAqIEBwYXJhbSB7U3RyaW5nfSBgc3RyYCBNYXJrZG93biBzdHJpbmcKICogQHBhcmFtIHtPYmplY3R9IGBlbnZgCiAqLwoKZnVuY3Rpb24gU3RhdGVDb3JlKGluc3RhbmNlLCBzdHIsIGVudikgewogIHRoaXMuc3JjID0gc3RyOwogIHRoaXMuZW52ID0gZW52OwogIHRoaXMub3B0aW9ucyA9IGluc3RhbmNlLm9wdGlvbnM7CiAgdGhpcy50b2tlbnMgPSBbXTsKICB0aGlzLmlubGluZU1vZGUgPSBmYWxzZTsKCiAgdGhpcy5pbmxpbmUgPSBpbnN0YW5jZS5pbmxpbmU7CiAgdGhpcy5ibG9jayA9IGluc3RhbmNlLmJsb2NrOwogIHRoaXMucmVuZGVyZXIgPSBpbnN0YW5jZS5yZW5kZXJlcjsKICB0aGlzLnR5cG9ncmFwaGVyID0gaW5zdGFuY2UudHlwb2dyYXBoZXI7Cn0KCi8qKgogKiBUaGUgbWFpbiBgUmVtYXJrYWJsZWAgY2xhc3MuIENyZWF0ZSBhbiBpbnN0YW5jZSBvZgogKiBgUmVtYXJrYWJsZWAgd2l0aCBhIGBwcmVzZXRgIGFuZC9vciBgb3B0aW9uc2AuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBgcHJlc2V0YCBJZiBubyBwcmVzZXQgaXMgZ2l2ZW4sIGBkZWZhdWx0YCBpcyB1c2VkLgogKiBAcGFyYW0ge09iamVjdH0gYG9wdGlvbnNgCiAqLwoKZnVuY3Rpb24gUmVtYXJrYWJsZShwcmVzZXQsIG9wdGlvbnMpIHsKICBpZiAodHlwZW9mIHByZXNldCAhPT0gJ3N0cmluZycpIHsKICAgIG9wdGlvbnMgPSBwcmVzZXQ7CiAgICBwcmVzZXQgPSAnZGVmYXVsdCc7CiAgfQoKICB0aGlzLmlubGluZSAgID0gbmV3IFBhcnNlcklubGluZSgpOwogIHRoaXMuYmxvY2sgICAgPSBuZXcgUGFyc2VyQmxvY2soKTsKICB0aGlzLmNvcmUgICAgID0gbmV3IFBhcnNlckNvcmUoKTsKICB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKCk7CiAgdGhpcy5ydWxlciAgICA9IG5ldyBSdWxlcigpOwoKICB0aGlzLm9wdGlvbnMgID0ge307CiAgdGhpcy5jb25maWd1cmUoY29uZmlnW3ByZXNldF0pOwogIHRoaXMuc2V0KG9wdGlvbnMgfHwge30pOwp9CgovKioKICogU2V0IG9wdGlvbnMgYXMgYW4gYWx0ZXJuYXRpdmUgdG8gcGFzc2luZyB0aGVtCiAqIHRvIHRoZSBjb25zdHJ1Y3Rvci4KICoKICogYGBganMKICogbWQuc2V0KHt0eXBvZ3JhcGhlcjogdHJ1ZX0pOwogKiBgYGAKICogQHBhcmFtIHtPYmplY3R9IGBvcHRpb25zYAogKiBAYXBpIHB1YmxpYwogKi8KClJlbWFya2FibGUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucyk7Cn07CgovKioKICogQmF0Y2ggbG9hZGVyIGZvciBjb21wb25lbnRzIHJ1bGVzIHN0YXRlcywgYW5kIG9wdGlvbnMKICoKICogQHBhcmFtICB7T2JqZWN0fSBgcHJlc2V0c2AKICovCgpSZW1hcmthYmxlLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAocHJlc2V0cykgewogIHZhciBzZWxmID0gdGhpczsKCiAgaWYgKCFwcmVzZXRzKSB7IHRocm93IG5ldyBFcnJvcignV3JvbmcgYHJlbWFya2FibGVgIHByZXNldCwgY2hlY2sgbmFtZS9jb250ZW50Jyk7IH0KICBpZiAocHJlc2V0cy5vcHRpb25zKSB7IHNlbGYuc2V0KHByZXNldHMub3B0aW9ucyk7IH0KICBpZiAocHJlc2V0cy5jb21wb25lbnRzKSB7CiAgICBPYmplY3Qua2V5cyhwcmVzZXRzLmNvbXBvbmVudHMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgaWYgKHByZXNldHMuY29tcG9uZW50c1tuYW1lXS5ydWxlcykgewogICAgICAgIHNlbGZbbmFtZV0ucnVsZXIuZW5hYmxlKHByZXNldHMuY29tcG9uZW50c1tuYW1lXS5ydWxlcywgdHJ1ZSk7CiAgICAgIH0KICAgIH0pOwogIH0KfTsKCi8qKgogKiBVc2UgYSBwbHVnaW4uCiAqCiAqIGBgYGpzCiAqIHZhciBtZCA9IG5ldyBSZW1hcmthYmxlKCk7CiAqCiAqIG1kLnVzZShwbHVnaW4xKQogKiAgIC51c2UocGx1Z2luMiwgb3B0cykKICogICAudXNlKHBsdWdpbjMpOwogKiBgYGAKICoKICogQHBhcmFtICB7RnVuY3Rpb259IGBwbHVnaW5gCiAqIEBwYXJhbSAge09iamVjdH0gYG9wdGlvbnNgCiAqIEByZXR1cm4ge09iamVjdH0gYFJlbWFya2FibGVgIGZvciBjaGFpbmluZwogKi8KClJlbWFya2FibGUucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4sIG9wdGlvbnMpIHsKICBwbHVnaW4odGhpcywgb3B0aW9ucyk7CiAgcmV0dXJuIHRoaXM7Cn07CgoKLyoqCiAqIFBhcnNlIHRoZSBpbnB1dCBgc3RyaW5nYCBhbmQgcmV0dXJuIGEgdG9rZW5zIGFycmF5LgogKiBNb2RpZmllcyBgZW52YCB3aXRoIGRlZmluaXRpb25zIGRhdGEuCiAqCiAqIEBwYXJhbSAge1N0cmluZ30gYHN0cmluZ2AKICogQHBhcmFtICB7T2JqZWN0fSBgZW52YAogKiBAcmV0dXJuIHtBcnJheX0gQXJyYXkgb2YgdG9rZW5zCiAqLwoKUmVtYXJrYWJsZS5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoc3RyLCBlbnYpIHsKICB2YXIgc3RhdGUgPSBuZXcgU3RhdGVDb3JlKHRoaXMsIHN0ciwgZW52KTsKICB0aGlzLmNvcmUucHJvY2VzcyhzdGF0ZSk7CiAgcmV0dXJuIHN0YXRlLnRva2VuczsKfTsKCi8qKgogKiBUaGUgbWFpbiBgLnJlbmRlcigpYCBtZXRob2QgdGhhdCBkb2VzIGFsbCB0aGUgbWFnaWMgOikKICoKICogQHBhcmFtICB7U3RyaW5nfSBgc3RyaW5nYAogKiBAcGFyYW0gIHtPYmplY3R9IGBlbnZgCiAqIEByZXR1cm4ge1N0cmluZ30gUmVuZGVyZWQgSFRNTC4KICovCgpSZW1hcmthYmxlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoc3RyLCBlbnYpIHsKICBlbnYgPSBlbnYgfHwge307CiAgcmV0dXJuIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMucGFyc2Uoc3RyLCBlbnYpLCB0aGlzLm9wdGlvbnMsIGVudik7Cn07CgovKioKICogUGFyc2UgdGhlIGdpdmVuIGNvbnRlbnQgYHN0cmluZ2AgYXMgYSBzaW5nbGUgc3RyaW5nLgogKgogKiBAcGFyYW0gIHtTdHJpbmd9IGBzdHJpbmdgCiAqIEBwYXJhbSAge09iamVjdH0gYGVudmAKICogQHJldHVybiB7QXJyYXl9IEFycmF5IG9mIHRva2VucwogKi8KClJlbWFya2FibGUucHJvdG90eXBlLnBhcnNlSW5saW5lID0gZnVuY3Rpb24gKHN0ciwgZW52KSB7CiAgdmFyIHN0YXRlID0gbmV3IFN0YXRlQ29yZSh0aGlzLCBzdHIsIGVudik7CiAgc3RhdGUuaW5saW5lTW9kZSA9IHRydWU7CiAgdGhpcy5jb3JlLnByb2Nlc3Moc3RhdGUpOwogIHJldHVybiBzdGF0ZS50b2tlbnM7Cn07CgovKioKICogUmVuZGVyIGEgc2luZ2xlIGNvbnRlbnQgYHN0cmluZ2AsIHdpdGhvdXQgd3JhcHBpbmcgaXQKICogdG8gcGFyYWdyYXBocwogKgogKiBAcGFyYW0gIHtTdHJpbmd9IGBzdHJgCiAqIEBwYXJhbSAge09iamVjdH0gYGVudmAKICogQHJldHVybiB7U3RyaW5nfQogKi8KClJlbWFya2FibGUucHJvdG90eXBlLnJlbmRlcklubGluZSA9IGZ1bmN0aW9uIChzdHIsIGVudikgewogIGVudiA9IGVudiB8fCB7fTsKICByZXR1cm4gdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5wYXJzZUlubGluZShzdHIsIGVudiksIHRoaXMub3B0aW9ucywgZW52KTsKfTsKCi8qKgogKiBFeHBvc2UgYFJlbWFya2FibGVgCiAqLwoKbW9kdWxlLmV4cG9ydHMgPSBSZW1hcmthYmxlOwoKLyoqCiAqIEV4cG9zZSBgdXRpbHNgLCBVc2VmdWwgaGVscGVyIGZ1bmN0aW9ucyBmb3IgY3VzdG9tCiAqIHJlbmRlcmluZy4KICovCgptb2R1bGUuZXhwb3J0cy51dGlscyA9IHJlcXVpcmUoJy4vY29tbW9uL3V0aWxzJyk7Cgp9LHsiLi9jb21tb24vdXRpbHMiOjUsIi4vY29uZmlncy9jb21tb25tYXJrIjo2LCIuL2NvbmZpZ3MvZGVmYXVsdCI6NywiLi9jb25maWdzL2Z1bGwiOjgsIi4vcGFyc2VyX2Jsb2NrIjoxNSwiLi9wYXJzZXJfY29yZSI6MTYsIi4vcGFyc2VyX2lubGluZSI6MTcsIi4vcmVuZGVyZXIiOjE4LCIuL3J1bGVyIjoxOX1dLDE1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKLyoqCiAqIExvY2FsIGRlcGVuZGVuY2llcwogKi8KCnZhciBSdWxlciAgICAgID0gcmVxdWlyZSgnLi9ydWxlcicpOwp2YXIgU3RhdGVCbG9jayA9IHJlcXVpcmUoJy4vcnVsZXNfYmxvY2svc3RhdGVfYmxvY2snKTsKCi8qKgogKiBQYXJzZXIgcnVsZXMKICovCgp2YXIgX3J1bGVzID0gWwogIFsgJ2NvZGUnLCAgICAgICByZXF1aXJlKCcuL3J1bGVzX2Jsb2NrL2NvZGUnKSBdLAogIFsgJ2ZlbmNlcycsICAgICByZXF1aXJlKCcuL3J1bGVzX2Jsb2NrL2ZlbmNlcycpLCAgICAgWyAncGFyYWdyYXBoJywgJ2Jsb2NrcXVvdGUnLCAnbGlzdCcgXSBdLAogIFsgJ2Jsb2NrcXVvdGUnLCByZXF1aXJlKCcuL3J1bGVzX2Jsb2NrL2Jsb2NrcXVvdGUnKSwgWyAncGFyYWdyYXBoJywgJ2Jsb2NrcXVvdGUnLCAnbGlzdCcgXSBdLAogIFsgJ2hyJywgICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2Jsb2NrL2hyJyksICAgICAgICAgWyAncGFyYWdyYXBoJywgJ2Jsb2NrcXVvdGUnLCAnbGlzdCcgXSBdLAogIFsgJ2xpc3QnLCAgICAgICByZXF1aXJlKCcuL3J1bGVzX2Jsb2NrL2xpc3QnKSwgICAgICAgWyAncGFyYWdyYXBoJywgJ2Jsb2NrcXVvdGUnIF0gXSwKICBbICdmb290bm90ZScsICAgcmVxdWlyZSgnLi9ydWxlc19ibG9jay9mb290bm90ZScpLCAgIFsgJ3BhcmFncmFwaCcgXSBdLAogIFsgJ2hlYWRpbmcnLCAgICByZXF1aXJlKCcuL3J1bGVzX2Jsb2NrL2hlYWRpbmcnKSwgICAgWyAncGFyYWdyYXBoJywgJ2Jsb2NrcXVvdGUnIF0gXSwKICBbICdsaGVhZGluZycsICAgcmVxdWlyZSgnLi9ydWxlc19ibG9jay9saGVhZGluZycpIF0sCiAgWyAnaHRtbGJsb2NrJywgIHJlcXVpcmUoJy4vcnVsZXNfYmxvY2svaHRtbGJsb2NrJyksICBbICdwYXJhZ3JhcGgnLCAnYmxvY2txdW90ZScgXSBdLAogIFsgJ3RhYmxlJywgICAgICByZXF1aXJlKCcuL3J1bGVzX2Jsb2NrL3RhYmxlJyksICAgICAgWyAncGFyYWdyYXBoJyBdIF0sCiAgWyAnZGVmbGlzdCcsICAgIHJlcXVpcmUoJy4vcnVsZXNfYmxvY2svZGVmbGlzdCcpLCAgICBbICdwYXJhZ3JhcGgnIF0gXSwKICBbICdwYXJhZ3JhcGgnLCAgcmVxdWlyZSgnLi9ydWxlc19ibG9jay9wYXJhZ3JhcGgnKSBdCl07CgovKioKICogQmxvY2sgUGFyc2VyIGNsYXNzCiAqCiAqIEBhcGkgcHJpdmF0ZQogKi8KCmZ1bmN0aW9uIFBhcnNlckJsb2NrKCkgewogIHRoaXMucnVsZXIgPSBuZXcgUnVsZXIoKTsKICBmb3IgKHZhciBpID0gMDsgaSA8IF9ydWxlcy5sZW5ndGg7IGkrKykgewogICAgdGhpcy5ydWxlci5wdXNoKF9ydWxlc1tpXVswXSwgX3J1bGVzW2ldWzFdLCB7CiAgICAgIGFsdDogKF9ydWxlc1tpXVsyXSB8fCBbXSkuc2xpY2UoKQogICAgfSk7CiAgfQp9CgovKioKICogR2VuZXJhdGUgdG9rZW5zIGZvciB0aGUgZ2l2ZW4gaW5wdXQgcmFuZ2UuCiAqCiAqIEBwYXJhbSAge09iamVjdH0gYHN0YXRlYCBIYXMgcHJvcGVydGllcyBsaWtlIGBzcmNgLCBgcGFyc2VyYCwgYG9wdGlvbnNgIGV0YwogKiBAcGFyYW0gIHtOdW1iZXJ9IGBzdGFydExpbmVgCiAqIEBwYXJhbSAge051bWJlcn0gYGVuZExpbmVgCiAqIEBhcGkgcHJpdmF0ZQogKi8KClBhcnNlckJsb2NrLnByb3RvdHlwZS50b2tlbml6ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgc3RhcnRMaW5lLCBlbmRMaW5lKSB7CiAgdmFyIHJ1bGVzID0gdGhpcy5ydWxlci5nZXRSdWxlcygnJyk7CiAgdmFyIGxlbiA9IHJ1bGVzLmxlbmd0aDsKICB2YXIgbGluZSA9IHN0YXJ0TGluZTsKICB2YXIgaGFzRW1wdHlMaW5lcyA9IGZhbHNlOwogIHZhciBvaywgaTsKCiAgd2hpbGUgKGxpbmUgPCBlbmRMaW5lKSB7CiAgICBzdGF0ZS5saW5lID0gbGluZSA9IHN0YXRlLnNraXBFbXB0eUxpbmVzKGxpbmUpOwogICAgaWYgKGxpbmUgPj0gZW5kTGluZSkgewogICAgICBicmVhazsKICAgIH0KCiAgICAvLyBUZXJtaW5hdGlvbiBjb25kaXRpb24gZm9yIG5lc3RlZCBjYWxscy4KICAgIC8vIE5lc3RlZCBjYWxscyBjdXJyZW50bHkgdXNlZCBmb3IgYmxvY2txdW90ZXMgJiBsaXN0cwogICAgaWYgKHN0YXRlLnRTaGlmdFtsaW5lXSA8IHN0YXRlLmJsa0luZGVudCkgewogICAgICBicmVhazsKICAgIH0KCiAgICAvLyBUcnkgYWxsIHBvc3NpYmxlIHJ1bGVzLgogICAgLy8gT24gc3VjY2VzcywgcnVsZSBzaG91bGQ6CiAgICAvLwogICAgLy8gLSB1cGRhdGUgYHN0YXRlLmxpbmVgCiAgICAvLyAtIHVwZGF0ZSBgc3RhdGUudG9rZW5zYAogICAgLy8gLSByZXR1cm4gdHJ1ZQoKICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICBvayA9IHJ1bGVzW2ldKHN0YXRlLCBsaW5lLCBlbmRMaW5lLCBmYWxzZSk7CiAgICAgIGlmIChvaykgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgLy8gc2V0IHN0YXRlLnRpZ2h0IGlmZiB3ZSBoYWQgYW4gZW1wdHkgbGluZSBiZWZvcmUgY3VycmVudCB0YWcKICAgIC8vIGkuZS4gbGF0ZXN0IGVtcHR5IGxpbmUgc2hvdWxkIG5vdCBjb3VudAogICAgc3RhdGUudGlnaHQgPSAhaGFzRW1wdHlMaW5lczsKCiAgICAvLyBwYXJhZ3JhcGggbWlnaHQgImVhdCIgb25lIG5ld2xpbmUgYWZ0ZXIgaXQgaW4gbmVzdGVkIGxpc3RzCiAgICBpZiAoc3RhdGUuaXNFbXB0eShzdGF0ZS5saW5lIC0gMSkpIHsKICAgICAgaGFzRW1wdHlMaW5lcyA9IHRydWU7CiAgICB9CgogICAgbGluZSA9IHN0YXRlLmxpbmU7CgogICAgaWYgKGxpbmUgPCBlbmRMaW5lICYmIHN0YXRlLmlzRW1wdHkobGluZSkpIHsKICAgICAgaGFzRW1wdHlMaW5lcyA9IHRydWU7CiAgICAgIGxpbmUrKzsKCiAgICAgIC8vIHR3byBlbXB0eSBsaW5lcyBzaG91bGQgc3RvcCB0aGUgcGFyc2VyIGluIGxpc3QgbW9kZQogICAgICBpZiAobGluZSA8IGVuZExpbmUgJiYgc3RhdGUucGFyZW50VHlwZSA9PT0gJ2xpc3QnICYmIHN0YXRlLmlzRW1wdHkobGluZSkpIHsgYnJlYWs7IH0KICAgICAgc3RhdGUubGluZSA9IGxpbmU7CiAgICB9CiAgfQp9OwoKdmFyIFRBQlNfU0NBTl9SRSA9IC9bXG5cdF0vZzsKdmFyIE5FV0xJTkVTX1JFICA9IC9ccltcblx1MDA4NV18W1x1MjQyNFx1MjAyOFx1MDA4NV0vZzsKdmFyIFNQQUNFU19SRSAgICA9IC9cdTAwYTAvZzsKCi8qKgogKiBUb2tlbml6ZSB0aGUgZ2l2ZW4gYHN0cmAuCiAqCiAqIEBwYXJhbSAge1N0cmluZ30gYHN0cmAgU291cmNlIHN0cmluZwogKiBAcGFyYW0gIHtPYmplY3R9IGBvcHRpb25zYAogKiBAcGFyYW0gIHtPYmplY3R9IGBlbnZgCiAqIEBwYXJhbSAge0FycmF5fSBgb3V0VG9rZW5zYAogKiBAYXBpIHByaXZhdGUKICovCgpQYXJzZXJCbG9jay5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoc3RyLCBvcHRpb25zLCBlbnYsIG91dFRva2VucykgewogIHZhciBzdGF0ZSwgbGluZVN0YXJ0ID0gMCwgbGFzdFRhYlBvcyA9IDA7CiAgaWYgKCFzdHIpIHsgcmV0dXJuIFtdOyB9CgogIC8vIE5vcm1hbGl6ZSBzcGFjZXMKICBzdHIgPSBzdHIucmVwbGFjZShTUEFDRVNfUkUsICcgJyk7CgogIC8vIE5vcm1hbGl6ZSBuZXdsaW5lcwogIHN0ciA9IHN0ci5yZXBsYWNlKE5FV0xJTkVTX1JFLCAnXG4nKTsKCiAgLy8gUmVwbGFjZSB0YWJzIHdpdGggcHJvcGVyIG51bWJlciBvZiBzcGFjZXMgKDEuLjQpCiAgaWYgKHN0ci5pbmRleE9mKCdcdCcpID49IDApIHsKICAgIHN0ciA9IHN0ci5yZXBsYWNlKFRBQlNfU0NBTl9SRSwgZnVuY3Rpb24gKG1hdGNoLCBvZmZzZXQpIHsKICAgICAgdmFyIHJlc3VsdDsKICAgICAgaWYgKHN0ci5jaGFyQ29kZUF0KG9mZnNldCkgPT09IDB4MEEpIHsKICAgICAgICBsaW5lU3RhcnQgPSBvZmZzZXQgKyAxOwogICAgICAgIGxhc3RUYWJQb3MgPSAwOwogICAgICAgIHJldHVybiBtYXRjaDsKICAgICAgfQogICAgICByZXN1bHQgPSAnICAgICcuc2xpY2UoKG9mZnNldCAtIGxpbmVTdGFydCAtIGxhc3RUYWJQb3MpICUgNCk7CiAgICAgIGxhc3RUYWJQb3MgPSBvZmZzZXQgLSBsaW5lU3RhcnQgKyAxOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSk7CiAgfQoKICBzdGF0ZSA9IG5ldyBTdGF0ZUJsb2NrKHN0ciwgdGhpcywgb3B0aW9ucywgZW52LCBvdXRUb2tlbnMpOwogIHRoaXMudG9rZW5pemUoc3RhdGUsIHN0YXRlLmxpbmUsIHN0YXRlLmxpbmVNYXgpOwp9OwoKLyoqCiAqIEV4cG9zZSBgUGFyc2VyQmxvY2tgCiAqLwoKbW9kdWxlLmV4cG9ydHMgPSBQYXJzZXJCbG9jazsKCn0seyIuL3J1bGVyIjoxOSwiLi9ydWxlc19ibG9jay9ibG9ja3F1b3RlIjoyMSwiLi9ydWxlc19ibG9jay9jb2RlIjoyMiwiLi9ydWxlc19ibG9jay9kZWZsaXN0IjoyMywiLi9ydWxlc19ibG9jay9mZW5jZXMiOjI0LCIuL3J1bGVzX2Jsb2NrL2Zvb3Rub3RlIjoyNSwiLi9ydWxlc19ibG9jay9oZWFkaW5nIjoyNiwiLi9ydWxlc19ibG9jay9ociI6MjcsIi4vcnVsZXNfYmxvY2svaHRtbGJsb2NrIjoyOCwiLi9ydWxlc19ibG9jay9saGVhZGluZyI6MjksIi4vcnVsZXNfYmxvY2svbGlzdCI6MzAsIi4vcnVsZXNfYmxvY2svcGFyYWdyYXBoIjozMSwiLi9ydWxlc19ibG9jay9zdGF0ZV9ibG9jayI6MzIsIi4vcnVsZXNfYmxvY2svdGFibGUiOjMzfV0sMTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgovKioKICogTG9jYWwgZGVwZW5kZW5jaWVzCiAqLwoKdmFyIFJ1bGVyID0gcmVxdWlyZSgnLi9ydWxlcicpOwoKLyoqCiAqIENvcmUgcGFyc2VyIGBydWxlc2AKICovCgp2YXIgX3J1bGVzID0gWwogIFsgJ2Jsb2NrJywgICAgICAgICAgcmVxdWlyZSgnLi9ydWxlc19jb3JlL2Jsb2NrJykgICAgICAgICAgXSwKICBbICdhYmJyJywgICAgICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfY29yZS9hYmJyJykgICAgICAgICAgIF0sCiAgWyAncmVmZXJlbmNlcycsICAgICByZXF1aXJlKCcuL3J1bGVzX2NvcmUvcmVmZXJlbmNlcycpICAgICBdLAogIFsgJ2lubGluZScsICAgICAgICAgcmVxdWlyZSgnLi9ydWxlc19jb3JlL2lubGluZScpICAgICAgICAgXSwKICBbICdmb290bm90ZV90YWlsJywgIHJlcXVpcmUoJy4vcnVsZXNfY29yZS9mb290bm90ZV90YWlsJykgIF0sCiAgWyAnYWJicjInLCAgICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2NvcmUvYWJicjInKSAgICAgICAgICBdLAogIFsgJ3JlcGxhY2VtZW50cycsICAgcmVxdWlyZSgnLi9ydWxlc19jb3JlL3JlcGxhY2VtZW50cycpICAgXSwKICBbICdzbWFydHF1b3RlcycsICAgIHJlcXVpcmUoJy4vcnVsZXNfY29yZS9zbWFydHF1b3RlcycpICAgIF0sCiAgWyAnbGlua2lmeScsICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2NvcmUvbGlua2lmeScpICAgICAgICBdCl07CgovKioKICogQ2xhc3MgZm9yIHRvcCBsZXZlbCAoYGNvcmVgKSBwYXJzZXIgcnVsZXMKICoKICogQGFwaSBwcml2YXRlCiAqLwoKZnVuY3Rpb24gQ29yZSgpIHsKICB0aGlzLm9wdGlvbnMgPSB7fTsKICB0aGlzLnJ1bGVyID0gbmV3IFJ1bGVyKCk7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBfcnVsZXMubGVuZ3RoOyBpKyspIHsKICAgIHRoaXMucnVsZXIucHVzaChfcnVsZXNbaV1bMF0sIF9ydWxlc1tpXVsxXSk7CiAgfQp9CgovKioKICogUHJvY2VzcyBydWxlcyB3aXRoIHRoZSBnaXZlbiBgc3RhdGVgCiAqCiAqIEBwYXJhbSAge09iamVjdH0gYHN0YXRlYAogKiBAYXBpIHByaXZhdGUKICovCgpDb3JlLnByb3RvdHlwZS5wcm9jZXNzID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAgdmFyIGksIGwsIHJ1bGVzOwogIHJ1bGVzID0gdGhpcy5ydWxlci5nZXRSdWxlcygnJyk7CiAgZm9yIChpID0gMCwgbCA9IHJ1bGVzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgcnVsZXNbaV0oc3RhdGUpOwogIH0KfTsKCi8qKgogKiBFeHBvc2UgYENvcmVgCiAqLwoKbW9kdWxlLmV4cG9ydHMgPSBDb3JlOwoKfSx7Ii4vcnVsZXIiOjE5LCIuL3J1bGVzX2NvcmUvYWJiciI6MzQsIi4vcnVsZXNfY29yZS9hYmJyMiI6MzUsIi4vcnVsZXNfY29yZS9ibG9jayI6MzYsIi4vcnVsZXNfY29yZS9mb290bm90ZV90YWlsIjozNywiLi9ydWxlc19jb3JlL2lubGluZSI6MzgsIi4vcnVsZXNfY29yZS9saW5raWZ5IjozOSwiLi9ydWxlc19jb3JlL3JlZmVyZW5jZXMiOjQwLCIuL3J1bGVzX2NvcmUvcmVwbGFjZW1lbnRzIjo0MSwiLi9ydWxlc19jb3JlL3NtYXJ0cXVvdGVzIjo0Mn1dLDE3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKLyoqCiAqIExvY2FsIGRlcGVuZGVuY2llcwogKi8KCnZhciBSdWxlciAgICAgICA9IHJlcXVpcmUoJy4vcnVsZXInKTsKdmFyIFN0YXRlSW5saW5lID0gcmVxdWlyZSgnLi9ydWxlc19pbmxpbmUvc3RhdGVfaW5saW5lJyk7CnZhciB1dGlscyAgICAgICA9IHJlcXVpcmUoJy4vY29tbW9uL3V0aWxzJyk7CgovKioKICogSW5saW5lIFBhcnNlciBgcnVsZXNgCiAqLwoKdmFyIF9ydWxlcyA9IFsKICBbICd0ZXh0JywgICAgICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2lubGluZS90ZXh0JykgXSwKICBbICduZXdsaW5lJywgICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2lubGluZS9uZXdsaW5lJykgXSwKICBbICdlc2NhcGUnLCAgICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2lubGluZS9lc2NhcGUnKSBdLAogIFsgJ2JhY2t0aWNrcycsICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfaW5saW5lL2JhY2t0aWNrcycpIF0sCiAgWyAnZGVsJywgICAgICAgICAgICAgcmVxdWlyZSgnLi9ydWxlc19pbmxpbmUvZGVsJykgXSwKICBbICdpbnMnLCAgICAgICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2lubGluZS9pbnMnKSBdLAogIFsgJ21hcmsnLCAgICAgICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfaW5saW5lL21hcmsnKSBdLAogIFsgJ2VtcGhhc2lzJywgICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfaW5saW5lL2VtcGhhc2lzJykgXSwKICBbICdzdWInLCAgICAgICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2lubGluZS9zdWInKSBdLAogIFsgJ3N1cCcsICAgICAgICAgICAgIHJlcXVpcmUoJy4vcnVsZXNfaW5saW5lL3N1cCcpIF0sCiAgWyAnbGlua3MnLCAgICAgICAgICAgcmVxdWlyZSgnLi9ydWxlc19pbmxpbmUvbGlua3MnKSBdLAogIFsgJ2Zvb3Rub3RlX2lubGluZScsIHJlcXVpcmUoJy4vcnVsZXNfaW5saW5lL2Zvb3Rub3RlX2lubGluZScpIF0sCiAgWyAnZm9vdG5vdGVfcmVmJywgICAgcmVxdWlyZSgnLi9ydWxlc19pbmxpbmUvZm9vdG5vdGVfcmVmJykgXSwKICBbICdhdXRvbGluaycsICAgICAgICByZXF1aXJlKCcuL3J1bGVzX2lubGluZS9hdXRvbGluaycpIF0sCiAgWyAnaHRtbHRhZycsICAgICAgICAgcmVxdWlyZSgnLi9ydWxlc19pbmxpbmUvaHRtbHRhZycpIF0sCiAgWyAnZW50aXR5JywgICAgICAgICAgcmVxdWlyZSgnLi9ydWxlc19pbmxpbmUvZW50aXR5JykgXQpdOwoKLyoqCiAqIElubGluZSBQYXJzZXIgY2xhc3MuIE5vdGUgdGhhdCBsaW5rIHZhbGlkYXRpb24gaXMgc3RyaWN0ZXIKICogaW4gUmVtYXJrYWJsZSB0aGFuIHdoYXQgaXMgc3BlY2lmaWVkIGJ5IENvbW1vbk1hcmsuIElmIHlvdQogKiB3YW50IHRvIGNoYW5nZSB0aGlzIHlvdSBjYW4gdXNlIGEgY3VzdG9tIHZhbGlkYXRvci4KICoKICogQGFwaSBwcml2YXRlCiAqLwoKZnVuY3Rpb24gUGFyc2VySW5saW5lKCkgewogIHRoaXMucnVsZXIgPSBuZXcgUnVsZXIoKTsKICBmb3IgKHZhciBpID0gMDsgaSA8IF9ydWxlcy5sZW5ndGg7IGkrKykgewogICAgdGhpcy5ydWxlci5wdXNoKF9ydWxlc1tpXVswXSwgX3J1bGVzW2ldWzFdKTsKICB9CgogIC8vIENhbiBiZSBvdmVycmlkZGVuIHdpdGggYSBjdXN0b20gdmFsaWRhdG9yCiAgdGhpcy52YWxpZGF0ZUxpbmsgPSB2YWxpZGF0ZUxpbms7Cn0KCi8qKgogKiBTa2lwIGEgc2luZ2xlIHRva2VuIGJ5IHJ1bm5pbmcgYWxsIHJ1bGVzIGluIHZhbGlkYXRpb24gbW9kZS4KICogUmV0dXJucyBgdHJ1ZWAgaWYgYW55IHJ1bGUgcmVwb3J0cyBzdWNjZXNzLgogKgogKiBAcGFyYW0gIHtPYmplY3R9IGBzdGF0ZWAKICogQGFwaSBwcml2YWdlCiAqLwoKUGFyc2VySW5saW5lLnByb3RvdHlwZS5za2lwVG9rZW4gPSBmdW5jdGlvbiAoc3RhdGUpIHsKICB2YXIgcnVsZXMgPSB0aGlzLnJ1bGVyLmdldFJ1bGVzKCcnKTsKICB2YXIgbGVuID0gcnVsZXMubGVuZ3RoOwogIHZhciBwb3MgPSBzdGF0ZS5wb3M7CiAgdmFyIGksIGNhY2hlZF9wb3M7CgogIGlmICgoY2FjaGVkX3BvcyA9IHN0YXRlLmNhY2hlR2V0KHBvcykpID4gMCkgewogICAgc3RhdGUucG9zID0gY2FjaGVkX3BvczsKICAgIHJldHVybjsKICB9CgogIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgaWYgKHJ1bGVzW2ldKHN0YXRlLCB0cnVlKSkgewogICAgICBzdGF0ZS5jYWNoZVNldChwb3MsIHN0YXRlLnBvcyk7CiAgICAgIHJldHVybjsKICAgIH0KICB9CgogIHN0YXRlLnBvcysrOwogIHN0YXRlLmNhY2hlU2V0KHBvcywgc3RhdGUucG9zKTsKfTsKCi8qKgogKiBHZW5lcmF0ZSB0b2tlbnMgZm9yIHRoZSBnaXZlbiBpbnB1dCByYW5nZS4KICoKICogQHBhcmFtICB7T2JqZWN0fSBgc3RhdGVgCiAqIEBhcGkgcHJpdmF0ZQogKi8KClBhcnNlcklubGluZS5wcm90b3R5cGUudG9rZW5pemUgPSBmdW5jdGlvbiAoc3RhdGUpIHsKICB2YXIgcnVsZXMgPSB0aGlzLnJ1bGVyLmdldFJ1bGVzKCcnKTsKICB2YXIgbGVuID0gcnVsZXMubGVuZ3RoOwogIHZhciBlbmQgPSBzdGF0ZS5wb3NNYXg7CiAgdmFyIG9rLCBpOwoKICB3aGlsZSAoc3RhdGUucG9zIDwgZW5kKSB7CgogICAgLy8gVHJ5IGFsbCBwb3NzaWJsZSBydWxlcy4KICAgIC8vIE9uIHN1Y2Nlc3MsIHRoZSBydWxlIHNob3VsZDoKICAgIC8vCiAgICAvLyAtIHVwZGF0ZSBgc3RhdGUucG9zYAogICAgLy8gLSB1cGRhdGUgYHN0YXRlLnRva2Vuc2AKICAgIC8vIC0gcmV0dXJuIHRydWUKICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICBvayA9IHJ1bGVzW2ldKHN0YXRlLCBmYWxzZSk7CgogICAgICBpZiAob2spIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGlmIChvaykgewogICAgICBpZiAoc3RhdGUucG9zID49IGVuZCkgeyBicmVhazsgfQogICAgICBjb250aW51ZTsKICAgIH0KCiAgICBzdGF0ZS5wZW5kaW5nICs9IHN0YXRlLnNyY1tzdGF0ZS5wb3MrK107CiAgfQoKICBpZiAoc3RhdGUucGVuZGluZykgewogICAgc3RhdGUucHVzaFBlbmRpbmcoKTsKICB9Cn07CgovKioKICogUGFyc2UgdGhlIGdpdmVuIGlucHV0IHN0cmluZy4KICoKICogQHBhcmFtICB7U3RyaW5nfSBgc3RyYAogKiBAcGFyYW0gIHtPYmplY3R9IGBvcHRpb25zYAogKiBAcGFyYW0gIHtPYmplY3R9IGBlbnZgCiAqIEBwYXJhbSAge0FycmF5fSBgb3V0VG9rZW5zYAogKiBAYXBpIHByaXZhdGUKICovCgpQYXJzZXJJbmxpbmUucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKHN0ciwgb3B0aW9ucywgZW52LCBvdXRUb2tlbnMpIHsKICB2YXIgc3RhdGUgPSBuZXcgU3RhdGVJbmxpbmUoc3RyLCB0aGlzLCBvcHRpb25zLCBlbnYsIG91dFRva2Vucyk7CiAgdGhpcy50b2tlbml6ZShzdGF0ZSk7Cn07CgovKioKICogVmFsaWRhdGUgdGhlIGdpdmVuIGB1cmxgIGJ5IGNoZWNraW5nIGZvciBiYWQgcHJvdG9jb2xzLgogKgogKiBAcGFyYW0gIHtTdHJpbmd9IGB1cmxgCiAqIEByZXR1cm4ge0Jvb2xlYW59CiAqLwoKZnVuY3Rpb24gdmFsaWRhdGVMaW5rKHVybCkgewogIHZhciBCQURfUFJPVE9DT0xTID0gWyAndmJzY3JpcHQnLCAnamF2YXNjcmlwdCcsICdmaWxlJyBdOwogIHZhciBzdHIgPSB1cmwudHJpbSgpLnRvTG93ZXJDYXNlKCk7CiAgLy8gQ2FyZSBhYm91dCBkaWdpdGFsIGVudGl0aWVzICJqYXZhc2NyaXB0JiN4M0E7YWxlcnQoMSkiCiAgc3RyID0gdXRpbHMucmVwbGFjZUVudGl0aWVzKHN0cik7CiAgaWYgKHN0ci5pbmRleE9mKCc6JykgIT09IC0xICYmIEJBRF9QUk9UT0NPTFMuaW5kZXhPZihzdHIuc3BsaXQoJzonKVswXSkgIT09IC0xKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHJldHVybiB0cnVlOwp9CgovKioKICogRXhwb3NlIGBQYXJzZXJJbmxpbmVgCiAqLwoKbW9kdWxlLmV4cG9ydHMgPSBQYXJzZXJJbmxpbmU7Cgp9LHsiLi9jb21tb24vdXRpbHMiOjUsIi4vcnVsZXIiOjE5LCIuL3J1bGVzX2lubGluZS9hdXRvbGluayI6NDMsIi4vcnVsZXNfaW5saW5lL2JhY2t0aWNrcyI6NDQsIi4vcnVsZXNfaW5saW5lL2RlbCI6NDUsIi4vcnVsZXNfaW5saW5lL2VtcGhhc2lzIjo0NiwiLi9ydWxlc19pbmxpbmUvZW50aXR5Ijo0NywiLi9ydWxlc19pbmxpbmUvZXNjYXBlIjo0OCwiLi9ydWxlc19pbmxpbmUvZm9vdG5vdGVfaW5saW5lIjo0OSwiLi9ydWxlc19pbmxpbmUvZm9vdG5vdGVfcmVmIjo1MCwiLi9ydWxlc19pbmxpbmUvaHRtbHRhZyI6NTEsIi4vcnVsZXNfaW5saW5lL2lucyI6NTIsIi4vcnVsZXNfaW5saW5lL2xpbmtzIjo1MywiLi9ydWxlc19pbmxpbmUvbWFyayI6NTQsIi4vcnVsZXNfaW5saW5lL25ld2xpbmUiOjU1LCIuL3J1bGVzX2lubGluZS9zdGF0ZV9pbmxpbmUiOjU2LCIuL3J1bGVzX2lubGluZS9zdWIiOjU3LCIuL3J1bGVzX2lubGluZS9zdXAiOjU4LCIuL3J1bGVzX2lubGluZS90ZXh0Ijo1OX1dLDE4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKLyoqCiAqIExvY2FsIGRlcGVuZGVuY2llcwogKi8KCnZhciB1dGlscyA9IHJlcXVpcmUoJy4vY29tbW9uL3V0aWxzJyk7CnZhciBydWxlcyA9IHJlcXVpcmUoJy4vcnVsZXMnKTsKCi8qKgogKiBFeHBvc2UgYFJlbmRlcmVyYAogKi8KCm1vZHVsZS5leHBvcnRzID0gUmVuZGVyZXI7CgovKioKICogUmVuZGVyZXIgY2xhc3MuIFJlbmRlcnMgSFRNTCBhbmQgZXhwb3NlcyBgcnVsZXNgIHRvIGFsbG93CiAqIGxvY2FsIG1vZGlmaWNhdGlvbnMuCiAqLwoKZnVuY3Rpb24gUmVuZGVyZXIoKSB7CiAgdGhpcy5ydWxlcyA9IHV0aWxzLmFzc2lnbih7fSwgcnVsZXMpOwoKICAvLyBleHBvcnRlZCBoZWxwZXIsIGZvciBjdXN0b20gcnVsZXMgb25seQogIHRoaXMuZ2V0QnJlYWsgPSBydWxlcy5nZXRCcmVhazsKfQoKLyoqCiAqIFJlbmRlciBhIHN0cmluZyBvZiBpbmxpbmUgSFRNTCB3aXRoIHRoZSBnaXZlbiBgdG9rZW5zYCBhbmQKICogYG9wdGlvbnNgLgogKgogKiBAcGFyYW0gIHtBcnJheX0gYHRva2Vuc2AKICogQHBhcmFtICB7T2JqZWN0fSBgb3B0aW9uc2AKICogQHBhcmFtICB7T2JqZWN0fSBgZW52YAogKiBAcmV0dXJuIHtTdHJpbmd9CiAqIEBhcGkgcHVibGljCiAqLwoKUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlcklubGluZSA9IGZ1bmN0aW9uICh0b2tlbnMsIG9wdGlvbnMsIGVudikgewogIHZhciBfcnVsZXMgPSB0aGlzLnJ1bGVzOwogIHZhciBsZW4gPSB0b2tlbnMubGVuZ3RoLCBpID0gMDsKICB2YXIgcmVzdWx0ID0gJyc7CgogIHdoaWxlIChsZW4tLSkgewogICAgcmVzdWx0ICs9IF9ydWxlc1t0b2tlbnNbaV0udHlwZV0odG9rZW5zLCBpKyssIG9wdGlvbnMsIGVudiwgdGhpcyk7CiAgfQoKICByZXR1cm4gcmVzdWx0Owp9OwoKLyoqCiAqIFJlbmRlciBhIHN0cmluZyBvZiBIVE1MIHdpdGggdGhlIGdpdmVuIGB0b2tlbnNgIGFuZAogKiBgb3B0aW9uc2AuCiAqCiAqIEBwYXJhbSAge0FycmF5fSBgdG9rZW5zYAogKiBAcGFyYW0gIHtPYmplY3R9IGBvcHRpb25zYAogKiBAcGFyYW0gIHtPYmplY3R9IGBlbnZgCiAqIEByZXR1cm4ge1N0cmluZ30KICogQGFwaSBwdWJsaWMKICovCgpSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHRva2Vucywgb3B0aW9ucywgZW52KSB7CiAgdmFyIF9ydWxlcyA9IHRoaXMucnVsZXM7CiAgdmFyIGxlbiA9IHRva2Vucy5sZW5ndGgsIGkgPSAtMTsKICB2YXIgcmVzdWx0ID0gJyc7CgogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIGlmICh0b2tlbnNbaV0udHlwZSA9PT0gJ2lubGluZScpIHsKICAgICAgcmVzdWx0ICs9IHRoaXMucmVuZGVySW5saW5lKHRva2Vuc1tpXS5jaGlsZHJlbiwgb3B0aW9ucywgZW52KTsKICAgIH0gZWxzZSB7CiAgICAgIHJlc3VsdCArPSBfcnVsZXNbdG9rZW5zW2ldLnR5cGVdKHRva2VucywgaSwgb3B0aW9ucywgZW52LCB0aGlzKTsKICAgIH0KICB9CiAgcmV0dXJuIHJlc3VsdDsKfTsKCn0seyIuL2NvbW1vbi91dGlscyI6NSwiLi9ydWxlcyI6MjB9XSwxOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCi8qKgogKiBSdWxlciBpcyBhIGhlbHBlciBjbGFzcyBmb3IgYnVpbGRpbmcgcmVzcG9uc2liaWxpdHkgY2hhaW5zIGZyb20KICogcGFyc2UgcnVsZXMuIEl0IGFsbG93czoKICoKICogICAtIGVhc3kgc3RhY2sgcnVsZXMgY2hhaW5zCiAqICAgLSBnZXR0aW5nIG1haW4gY2hhaW4gYW5kIG5hbWVkIGNoYWlucyBjb250ZW50IChhcyBhcnJheXMgb2YgZnVuY3Rpb25zKQogKgogKiBIZWxwZXIgbWV0aG9kcywgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LgogKiBAYXBpIHByaXZhdGUKICovCgpmdW5jdGlvbiBSdWxlcigpIHsKICAvLyBMaXN0IG9mIGFkZGVkIHJ1bGVzLiBFYWNoIGVsZW1lbnQgaXM6CiAgLy8KICAvLyB7IG5hbWU6IFhYWCwKICAvLyAgIGVuYWJsZWQ6IEJvb2xlYW4sCiAgLy8gICBmbjogRnVuY3Rpb24oKSwKICAvLyAgIGFsdDogWyBuYW1lMiwgbmFtZTMgXSB9CiAgLy8KICB0aGlzLl9fcnVsZXNfXyA9IFtdOwoKICAvLyBDYWNoZWQgcnVsZSBjaGFpbnMuCiAgLy8KICAvLyBGaXJzdCBsZXZlbCAtIGNoYWluIG5hbWUsICcnIGZvciBkZWZhdWx0LgogIC8vIFNlY29uZCBsZXZlbCAtIGRpZ2l0YWwgYW5jaG9yIGZvciBmYXN0IGZpbHRlcmluZyBieSBjaGFyY29kZXMuCiAgLy8KICB0aGlzLl9fY2FjaGVfXyA9IG51bGw7Cn0KCi8qKgogKiBGaW5kIHRoZSBpbmRleCBvZiBhIHJ1bGUgYnkgYG5hbWVgLgogKgogKiBAcGFyYW0gIHtTdHJpbmd9IGBuYW1lYAogKiBAcmV0dXJuIHtOdW1iZXJ9IEluZGV4IG9mIHRoZSBnaXZlbiBgbmFtZWAKICogQGFwaSBwcml2YXRlCiAqLwoKUnVsZXIucHJvdG90eXBlLl9fZmluZF9fID0gZnVuY3Rpb24gKG5hbWUpIHsKICB2YXIgbGVuID0gdGhpcy5fX3J1bGVzX18ubGVuZ3RoOwogIHZhciBpID0gLTE7CgogIHdoaWxlIChsZW4tLSkgewogICAgaWYgKHRoaXMuX19ydWxlc19fWysraV0ubmFtZSA9PT0gbmFtZSkgewogICAgICByZXR1cm4gaTsKICAgIH0KICB9CiAgcmV0dXJuIC0xOwp9OwoKLyoqCiAqIEJ1aWxkIHRoZSBydWxlcyBsb29rdXAgY2FjaGUKICoKICogQGFwaSBwcml2YXRlCiAqLwoKUnVsZXIucHJvdG90eXBlLl9fY29tcGlsZV9fID0gZnVuY3Rpb24gKCkgewogIHZhciBzZWxmID0gdGhpczsKICB2YXIgY2hhaW5zID0gWyAnJyBdOwoKICAvLyBjb2xsZWN0IHVuaXF1ZSBuYW1lcwogIHNlbGYuX19ydWxlc19fLmZvckVhY2goZnVuY3Rpb24gKHJ1bGUpIHsKICAgIGlmICghcnVsZS5lbmFibGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBydWxlLmFsdC5mb3JFYWNoKGZ1bmN0aW9uIChhbHROYW1lKSB7CiAgICAgIGlmIChjaGFpbnMuaW5kZXhPZihhbHROYW1lKSA8IDApIHsKICAgICAgICBjaGFpbnMucHVzaChhbHROYW1lKTsKICAgICAgfQogICAgfSk7CiAgfSk7CgogIHNlbGYuX19jYWNoZV9fID0ge307CgogIGNoYWlucy5mb3JFYWNoKGZ1bmN0aW9uIChjaGFpbikgewogICAgc2VsZi5fX2NhY2hlX19bY2hhaW5dID0gW107CiAgICBzZWxmLl9fcnVsZXNfXy5mb3JFYWNoKGZ1bmN0aW9uIChydWxlKSB7CiAgICAgIGlmICghcnVsZS5lbmFibGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoY2hhaW4gJiYgcnVsZS5hbHQuaW5kZXhPZihjaGFpbikgPCAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHNlbGYuX19jYWNoZV9fW2NoYWluXS5wdXNoKHJ1bGUuZm4pOwogICAgfSk7CiAgfSk7Cn07CgovKioKICogUnVsZXIgcHVibGljIG1ldGhvZHMKICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAqLwoKLyoqCiAqIFJlcGxhY2UgcnVsZSBmdW5jdGlvbgogKgogKiBAcGFyYW0gIHtTdHJpbmd9IGBuYW1lYCBSdWxlIG5hbWUKICogQHBhcmFtICB7RnVuY3Rpb24gYGZuYAogKiBAcGFyYW0gIHtPYmplY3R9IGBvcHRpb25zYAogKiBAYXBpIHByaXZhdGUKICovCgpSdWxlci5wcm90b3R5cGUuYXQgPSBmdW5jdGlvbiAobmFtZSwgZm4sIG9wdGlvbnMpIHsKICB2YXIgaWR4ID0gdGhpcy5fX2ZpbmRfXyhuYW1lKTsKICB2YXIgb3B0ID0gb3B0aW9ucyB8fCB7fTsKCiAgaWYgKGlkeCA9PT0gLTEpIHsKICAgIHRocm93IG5ldyBFcnJvcignUGFyc2VyIHJ1bGUgbm90IGZvdW5kOiAnICsgbmFtZSk7CiAgfQoKICB0aGlzLl9fcnVsZXNfX1tpZHhdLmZuID0gZm47CiAgdGhpcy5fX3J1bGVzX19baWR4XS5hbHQgPSBvcHQuYWx0IHx8IFtdOwogIHRoaXMuX19jYWNoZV9fID0gbnVsbDsKfTsKCi8qKgogKiBBZGQgYSBydWxlIHRvIHRoZSBjaGFpbiBiZWZvcmUgZ2l2ZW4gdGhlIGBydWxlTmFtZWAuCiAqCiAqIEBwYXJhbSAge1N0cmluZ30gICBgYmVmb3JlTmFtZWAKICogQHBhcmFtICB7U3RyaW5nfSAgIGBydWxlTmFtZWAKICogQHBhcmFtICB7RnVuY3Rpb259IGBmbmAKICogQHBhcmFtICB7T2JqZWN0fSAgIGBvcHRpb25zYAogKiBAYXBpIHByaXZhdGUKICovCgpSdWxlci5wcm90b3R5cGUuYmVmb3JlID0gZnVuY3Rpb24gKGJlZm9yZU5hbWUsIHJ1bGVOYW1lLCBmbiwgb3B0aW9ucykgewogIHZhciBpZHggPSB0aGlzLl9fZmluZF9fKGJlZm9yZU5hbWUpOwogIHZhciBvcHQgPSBvcHRpb25zIHx8IHt9OwoKICBpZiAoaWR4ID09PSAtMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdQYXJzZXIgcnVsZSBub3QgZm91bmQ6ICcgKyBiZWZvcmVOYW1lKTsKICB9CgogIHRoaXMuX19ydWxlc19fLnNwbGljZShpZHgsIDAsIHsKICAgIG5hbWU6IHJ1bGVOYW1lLAogICAgZW5hYmxlZDogdHJ1ZSwKICAgIGZuOiBmbiwKICAgIGFsdDogb3B0LmFsdCB8fCBbXQogIH0pOwoKICB0aGlzLl9fY2FjaGVfXyA9IG51bGw7Cn07CgovKioKICogQWRkIGEgcnVsZSB0byB0aGUgY2hhaW4gYWZ0ZXIgdGhlIGdpdmVuIGBydWxlTmFtZWAuCiAqCiAqIEBwYXJhbSAge1N0cmluZ30gICBgYWZ0ZXJOYW1lYAogKiBAcGFyYW0gIHtTdHJpbmd9ICAgYHJ1bGVOYW1lYAogKiBAcGFyYW0gIHtGdW5jdGlvbn0gYGZuYAogKiBAcGFyYW0gIHtPYmplY3R9ICAgYG9wdGlvbnNgCiAqIEBhcGkgcHJpdmF0ZQogKi8KClJ1bGVyLnByb3RvdHlwZS5hZnRlciA9IGZ1bmN0aW9uIChhZnRlck5hbWUsIHJ1bGVOYW1lLCBmbiwgb3B0aW9ucykgewogIHZhciBpZHggPSB0aGlzLl9fZmluZF9fKGFmdGVyTmFtZSk7CiAgdmFyIG9wdCA9IG9wdGlvbnMgfHwge307CgogIGlmIChpZHggPT09IC0xKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ1BhcnNlciBydWxlIG5vdCBmb3VuZDogJyArIGFmdGVyTmFtZSk7CiAgfQoKICB0aGlzLl9fcnVsZXNfXy5zcGxpY2UoaWR4ICsgMSwgMCwgewogICAgbmFtZTogcnVsZU5hbWUsCiAgICBlbmFibGVkOiB0cnVlLAogICAgZm46IGZuLAogICAgYWx0OiBvcHQuYWx0IHx8IFtdCiAgfSk7CgogIHRoaXMuX19jYWNoZV9fID0gbnVsbDsKfTsKCi8qKgogKiBBZGQgYSBydWxlIHRvIHRoZSBlbmQgb2YgY2hhaW4uCiAqCiAqIEBwYXJhbSAge1N0cmluZ30gICBgcnVsZU5hbWVgCiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBgZm5gCiAqIEBwYXJhbSAge09iamVjdH0gICBgb3B0aW9uc2AKICogQHJldHVybiB7U3RyaW5nfQogKi8KClJ1bGVyLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKHJ1bGVOYW1lLCBmbiwgb3B0aW9ucykgewogIHZhciBvcHQgPSBvcHRpb25zIHx8IHt9OwoKICB0aGlzLl9fcnVsZXNfXy5wdXNoKHsKICAgIG5hbWU6IHJ1bGVOYW1lLAogICAgZW5hYmxlZDogdHJ1ZSwKICAgIGZuOiBmbiwKICAgIGFsdDogb3B0LmFsdCB8fCBbXQogIH0pOwoKICB0aGlzLl9fY2FjaGVfXyA9IG51bGw7Cn07CgovKioKICogRW5hYmxlIGEgcnVsZSBvciBsaXN0IG9mIHJ1bGVzLgogKgogKiBAcGFyYW0gIHtTdHJpbmd8QXJyYXl9IGBsaXN0YCBOYW1lIG9yIGFycmF5IG9mIHJ1bGUgbmFtZXMgdG8gZW5hYmxlCiAqIEBwYXJhbSAge0Jvb2xlYW59IGBzdHJpY3RgIElmIGB0cnVlYCwgYWxsIG5vbiBsaXN0ZWQgcnVsZXMgd2lsbCBiZSBkaXNhYmxlZC4KICogQGFwaSBwcml2YXRlCiAqLwoKUnVsZXIucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uIChsaXN0LCBzdHJpY3QpIHsKICBsaXN0ID0gIUFycmF5LmlzQXJyYXkobGlzdCkKICAgID8gWyBsaXN0IF0KICAgIDogbGlzdDsKCiAgLy8gSW4gc3RyaWN0IG1vZGUgZGlzYWJsZSBhbGwgZXhpc3RpbmcgcnVsZXMgZmlyc3QKICBpZiAoc3RyaWN0KSB7CiAgICB0aGlzLl9fcnVsZXNfXy5mb3JFYWNoKGZ1bmN0aW9uIChydWxlKSB7CiAgICAgIHJ1bGUuZW5hYmxlZCA9IGZhbHNlOwogICAgfSk7CiAgfQoKICAvLyBTZWFyY2ggYnkgbmFtZSBhbmQgZW5hYmxlCiAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgICB2YXIgaWR4ID0gdGhpcy5fX2ZpbmRfXyhuYW1lKTsKICAgIGlmIChpZHggPCAwKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignUnVsZXMgbWFuYWdlcjogaW52YWxpZCBydWxlIG5hbWUgJyArIG5hbWUpOwogICAgfQogICAgdGhpcy5fX3J1bGVzX19baWR4XS5lbmFibGVkID0gdHJ1ZTsKICB9LCB0aGlzKTsKCiAgdGhpcy5fX2NhY2hlX18gPSBudWxsOwp9OwoKCi8qKgogKiBEaXNhYmxlIGEgcnVsZSBvciBsaXN0IG9mIHJ1bGVzLgogKgogKiBAcGFyYW0gIHtTdHJpbmd8QXJyYXl9IGBsaXN0YCBOYW1lIG9yIGFycmF5IG9mIHJ1bGUgbmFtZXMgdG8gZGlzYWJsZQogKiBAYXBpIHByaXZhdGUKICovCgpSdWxlci5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uIChsaXN0KSB7CiAgbGlzdCA9ICFBcnJheS5pc0FycmF5KGxpc3QpCiAgICA/IFsgbGlzdCBdCiAgICA6IGxpc3Q7CgogIC8vIFNlYXJjaCBieSBuYW1lIGFuZCBkaXNhYmxlCiAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgICB2YXIgaWR4ID0gdGhpcy5fX2ZpbmRfXyhuYW1lKTsKICAgIGlmIChpZHggPCAwKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignUnVsZXMgbWFuYWdlcjogaW52YWxpZCBydWxlIG5hbWUgJyArIG5hbWUpOwogICAgfQogICAgdGhpcy5fX3J1bGVzX19baWR4XS5lbmFibGVkID0gZmFsc2U7CiAgfSwgdGhpcyk7CgogIHRoaXMuX19jYWNoZV9fID0gbnVsbDsKfTsKCi8qKgogKiBHZXQgYSBydWxlcyBsaXN0IGFzIGFuIGFycmF5IG9mIGZ1bmN0aW9ucy4KICoKICogQHBhcmFtICB7U3RyaW5nfSBgY2hhaW5OYW1lYAogKiBAcmV0dXJuIHtPYmplY3R9CiAqIEBhcGkgcHJpdmF0ZQogKi8KClJ1bGVyLnByb3RvdHlwZS5nZXRSdWxlcyA9IGZ1bmN0aW9uIChjaGFpbk5hbWUpIHsKICBpZiAodGhpcy5fX2NhY2hlX18gPT09IG51bGwpIHsKICAgIHRoaXMuX19jb21waWxlX18oKTsKICB9CiAgcmV0dXJuIHRoaXMuX19jYWNoZV9fW2NoYWluTmFtZV07Cn07CgovKioKICogRXhwb3NlIGBSdWxlcmAKICovCgptb2R1bGUuZXhwb3J0cyA9IFJ1bGVyOwoKfSx7fV0sMjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgovKioKICogTG9jYWwgZGVwZW5kZW5jaWVzCiAqLwoKdmFyIGhhcyAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vY29tbW9uL3V0aWxzJykuaGFzOwp2YXIgdW5lc2NhcGVNZCAgICAgID0gcmVxdWlyZSgnLi9jb21tb24vdXRpbHMnKS51bmVzY2FwZU1kOwp2YXIgcmVwbGFjZUVudGl0aWVzID0gcmVxdWlyZSgnLi9jb21tb24vdXRpbHMnKS5yZXBsYWNlRW50aXRpZXM7CnZhciBlc2NhcGVIdG1sICAgICAgPSByZXF1aXJlKCcuL2NvbW1vbi91dGlscycpLmVzY2FwZUh0bWw7CgovKioKICogUmVuZGVyZXIgcnVsZXMgY2FjaGUKICovCgp2YXIgcnVsZXMgPSB7fTsKCi8qKgogKiBCbG9ja3F1b3RlcwogKi8KCnJ1bGVzLmJsb2NrcXVvdGVfb3BlbiA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8YmxvY2txdW90ZT5cbic7Cn07CgpydWxlcy5ibG9ja3F1b3RlX2Nsb3NlID0gZnVuY3Rpb24gKHRva2VucywgaWR4IC8qLCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzwvYmxvY2txdW90ZT4nICsgZ2V0QnJlYWsodG9rZW5zLCBpZHgpOwp9OwoKLyoqCiAqIENvZGUKICovCgpydWxlcy5jb2RlID0gZnVuY3Rpb24gKHRva2VucywgaWR4IC8qLCBvcHRpb25zLCBlbnYgKi8pIHsKICBpZiAodG9rZW5zW2lkeF0uYmxvY2spIHsKICAgIHJldHVybiAnPHByZT48Y29kZT4nICsgZXNjYXBlSHRtbCh0b2tlbnNbaWR4XS5jb250ZW50KSArICc8L2NvZGU+PC9wcmU+JyArIGdldEJyZWFrKHRva2VucywgaWR4KTsKICB9CiAgcmV0dXJuICc8Y29kZT4nICsgZXNjYXBlSHRtbCh0b2tlbnNbaWR4XS5jb250ZW50KSArICc8L2NvZGU+JzsKfTsKCi8qKgogKiBGZW5jZWQgY29kZSBibG9ja3MKICovCgpydWxlcy5mZW5jZSA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52LCBpbnN0YW5jZSkgewogIHZhciB0b2tlbiA9IHRva2Vuc1tpZHhdOwogIHZhciBsYW5nQ2xhc3MgPSAnJzsKICB2YXIgbGFuZ1ByZWZpeCA9IG9wdGlvbnMubGFuZ1ByZWZpeDsKICB2YXIgbGFuZ05hbWUgPSAnJywgZmVuY2VOYW1lOwogIHZhciBoaWdobGlnaHRlZDsKCiAgaWYgKHRva2VuLnBhcmFtcykgewoKICAgIC8vCiAgICAvLyBgYGBmb28gYmFyCiAgICAvLwogICAgLy8gVHJ5IGN1c3RvbSByZW5kZXJlciAiZm9vIiBmaXJzdC4gVGhhdCB3aWxsIHNpbXBsaWZ5IG92ZXJ3cml0ZQogICAgLy8gZm9yIGRpYWdyYW1zLCBsYXRleCwgYW5kIGFueSBvdGhlciBmZW5jZWQgYmxvY2sgd2l0aCBjdXN0b20gbG9vawogICAgLy8KCiAgICBmZW5jZU5hbWUgPSB0b2tlbi5wYXJhbXMuc3BsaXQoL1xzKy9nKVswXTsKCiAgICBpZiAoaGFzKGluc3RhbmNlLnJ1bGVzLmZlbmNlX2N1c3RvbSwgZmVuY2VOYW1lKSkgewogICAgICByZXR1cm4gaW5zdGFuY2UucnVsZXMuZmVuY2VfY3VzdG9tW2ZlbmNlTmFtZV0odG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiwgaW5zdGFuY2UpOwogICAgfQoKICAgIGxhbmdOYW1lID0gZXNjYXBlSHRtbChyZXBsYWNlRW50aXRpZXModW5lc2NhcGVNZChmZW5jZU5hbWUpKSk7CiAgICBsYW5nQ2xhc3MgPSAnIGNsYXNzPSInICsgbGFuZ1ByZWZpeCArIGxhbmdOYW1lICsgJyInOwogIH0KCiAgaWYgKG9wdGlvbnMuaGlnaGxpZ2h0KSB7CiAgICBoaWdobGlnaHRlZCA9IG9wdGlvbnMuaGlnaGxpZ2h0KHRva2VuLmNvbnRlbnQsIGxhbmdOYW1lKSB8fCBlc2NhcGVIdG1sKHRva2VuLmNvbnRlbnQpOwogIH0gZWxzZSB7CiAgICBoaWdobGlnaHRlZCA9IGVzY2FwZUh0bWwodG9rZW4uY29udGVudCk7CiAgfQoKICByZXR1cm4gJzxwcmU+PGNvZGUnICsgbGFuZ0NsYXNzICsgJz4nCiAgICAgICAgKyBoaWdobGlnaHRlZAogICAgICAgICsgJzwvY29kZT48L3ByZT4nCiAgICAgICAgKyBnZXRCcmVhayh0b2tlbnMsIGlkeCk7Cn07CgpydWxlcy5mZW5jZV9jdXN0b20gPSB7fTsKCi8qKgogKiBIZWFkaW5ncwogKi8KCnJ1bGVzLmhlYWRpbmdfb3BlbiA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCAvKiwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8aCcgKyB0b2tlbnNbaWR4XS5oTGV2ZWwgKyAnPic7Cn07CnJ1bGVzLmhlYWRpbmdfY2xvc2UgPSBmdW5jdGlvbiAodG9rZW5zLCBpZHggLyosIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPC9oJyArIHRva2Vuc1tpZHhdLmhMZXZlbCArICc+XG4nOwp9OwoKLyoqCiAqIEhvcml6b250YWwgcnVsZXMKICovCgpydWxlcy5ociA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCwgb3B0aW9ucyAvKiwgZW52ICovKSB7CiAgcmV0dXJuIChvcHRpb25zLnhodG1sT3V0ID8gJzxociAvPicgOiAnPGhyPicpICsgZ2V0QnJlYWsodG9rZW5zLCBpZHgpOwp9OwoKLyoqCiAqIEJ1bGxldHMKICovCgpydWxlcy5idWxsZXRfbGlzdF9vcGVuID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzx1bD5cbic7Cn07CnJ1bGVzLmJ1bGxldF9saXN0X2Nsb3NlID0gZnVuY3Rpb24gKHRva2VucywgaWR4IC8qLCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzwvdWw+JyArIGdldEJyZWFrKHRva2VucywgaWR4KTsKfTsKCi8qKgogKiBMaXN0IGl0ZW1zCiAqLwoKcnVsZXMubGlzdF9pdGVtX29wZW4gPSBmdW5jdGlvbiAoLyogdG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPGxpPic7Cn07CnJ1bGVzLmxpc3RfaXRlbV9jbG9zZSA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8L2xpPlxuJzsKfTsKCi8qKgogKiBPcmRlcmVkIGxpc3QgaXRlbXMKICovCgpydWxlcy5vcmRlcmVkX2xpc3Rfb3BlbiA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCAvKiwgb3B0aW9ucywgZW52ICovKSB7CiAgdmFyIHRva2VuID0gdG9rZW5zW2lkeF07CiAgdmFyIG9yZGVyID0gdG9rZW4ub3JkZXIgPiAxID8gJyBzdGFydD0iJyArIHRva2VuLm9yZGVyICsgJyInIDogJyc7CiAgcmV0dXJuICc8b2wnICsgb3JkZXIgKyAnPlxuJzsKfTsKcnVsZXMub3JkZXJlZF9saXN0X2Nsb3NlID0gZnVuY3Rpb24gKHRva2VucywgaWR4IC8qLCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzwvb2w+JyArIGdldEJyZWFrKHRva2VucywgaWR4KTsKfTsKCi8qKgogKiBQYXJhZ3JhcGhzCiAqLwoKcnVsZXMucGFyYWdyYXBoX29wZW4gPSBmdW5jdGlvbiAodG9rZW5zLCBpZHggLyosIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiB0b2tlbnNbaWR4XS50aWdodCA/ICcnIDogJzxwPic7Cn07CnJ1bGVzLnBhcmFncmFwaF9jbG9zZSA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCAvKiwgb3B0aW9ucywgZW52ICovKSB7CiAgdmFyIGFkZEJyZWFrID0gISh0b2tlbnNbaWR4XS50aWdodCAmJiBpZHggJiYgdG9rZW5zW2lkeCAtIDFdLnR5cGUgPT09ICdpbmxpbmUnICYmICF0b2tlbnNbaWR4IC0gMV0uY29udGVudCk7CiAgcmV0dXJuICh0b2tlbnNbaWR4XS50aWdodCA/ICcnIDogJzwvcD4nKSArIChhZGRCcmVhayA/IGdldEJyZWFrKHRva2VucywgaWR4KSA6ICcnKTsKfTsKCi8qKgogKiBMaW5rcwogKi8KCnJ1bGVzLmxpbmtfb3BlbiA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCwgb3B0aW9ucyAvKiBlbnYgKi8pIHsKICB2YXIgdGl0bGUgPSB0b2tlbnNbaWR4XS50aXRsZSA/ICgnIHRpdGxlPSInICsgZXNjYXBlSHRtbChyZXBsYWNlRW50aXRpZXModG9rZW5zW2lkeF0udGl0bGUpKSArICciJykgOiAnJzsKICB2YXIgdGFyZ2V0ID0gb3B0aW9ucy5saW5rVGFyZ2V0ID8gKCcgdGFyZ2V0PSInICsgb3B0aW9ucy5saW5rVGFyZ2V0ICsgJyInKSA6ICcnOwogIHJldHVybiAnPGEgaHJlZj0iJyArIGVzY2FwZUh0bWwodG9rZW5zW2lkeF0uaHJlZikgKyAnIicgKyB0aXRsZSArIHRhcmdldCArICc+JzsKfTsKcnVsZXMubGlua19jbG9zZSA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8L2E+JzsKfTsKCi8qKgogKiBJbWFnZXMKICovCgpydWxlcy5pbWFnZSA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCwgb3B0aW9ucyAvKiwgZW52ICovKSB7CiAgdmFyIHNyYyA9ICcgc3JjPSInICsgZXNjYXBlSHRtbCh0b2tlbnNbaWR4XS5zcmMpICsgJyInOwogIHZhciB0aXRsZSA9IHRva2Vuc1tpZHhdLnRpdGxlID8gKCcgdGl0bGU9IicgKyBlc2NhcGVIdG1sKHJlcGxhY2VFbnRpdGllcyh0b2tlbnNbaWR4XS50aXRsZSkpICsgJyInKSA6ICcnOwogIHZhciBhbHQgPSAnIGFsdD0iJyArICh0b2tlbnNbaWR4XS5hbHQgPyBlc2NhcGVIdG1sKHJlcGxhY2VFbnRpdGllcyh0b2tlbnNbaWR4XS5hbHQpKSA6ICcnKSArICciJzsKICB2YXIgc3VmZml4ID0gb3B0aW9ucy54aHRtbE91dCA/ICcgLycgOiAnJzsKICByZXR1cm4gJzxpbWcnICsgc3JjICsgYWx0ICsgdGl0bGUgKyBzdWZmaXggKyAnPic7Cn07CgovKioKICogVGFibGVzCiAqLwoKcnVsZXMudGFibGVfb3BlbiA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8dGFibGU+XG4nOwp9OwpydWxlcy50YWJsZV9jbG9zZSA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8L3RhYmxlPlxuJzsKfTsKcnVsZXMudGhlYWRfb3BlbiA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8dGhlYWQ+XG4nOwp9OwpydWxlcy50aGVhZF9jbG9zZSA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8L3RoZWFkPlxuJzsKfTsKcnVsZXMudGJvZHlfb3BlbiA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8dGJvZHk+XG4nOwp9OwpydWxlcy50Ym9keV9jbG9zZSA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8L3Rib2R5PlxuJzsKfTsKcnVsZXMudHJfb3BlbiA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8dHI+JzsKfTsKcnVsZXMudHJfY2xvc2UgPSBmdW5jdGlvbiAoLyogdG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPC90cj5cbic7Cn07CnJ1bGVzLnRoX29wZW4gPSBmdW5jdGlvbiAodG9rZW5zLCBpZHggLyosIG9wdGlvbnMsIGVudiAqLykgewogIHZhciB0b2tlbiA9IHRva2Vuc1tpZHhdOwogIHJldHVybiAnPHRoJwogICAgKyAodG9rZW4uYWxpZ24gPyAnIHN0eWxlPSJ0ZXh0LWFsaWduOicgKyB0b2tlbi5hbGlnbiArICciJyA6ICcnKQogICAgKyAnPic7Cn07CnJ1bGVzLnRoX2Nsb3NlID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzwvdGg+JzsKfTsKcnVsZXMudGRfb3BlbiA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCAvKiwgb3B0aW9ucywgZW52ICovKSB7CiAgdmFyIHRva2VuID0gdG9rZW5zW2lkeF07CiAgcmV0dXJuICc8dGQnCiAgICArICh0b2tlbi5hbGlnbiA/ICcgc3R5bGU9InRleHQtYWxpZ246JyArIHRva2VuLmFsaWduICsgJyInIDogJycpCiAgICArICc+JzsKfTsKcnVsZXMudGRfY2xvc2UgPSBmdW5jdGlvbiAoLyogdG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPC90ZD4nOwp9OwoKLyoqCiAqIEJvbGQKICovCgpydWxlcy5zdHJvbmdfb3BlbiA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8c3Ryb25nPic7Cn07CnJ1bGVzLnN0cm9uZ19jbG9zZSA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8L3N0cm9uZz4nOwp9OwoKLyoqCiAqIEl0YWxpY2l6ZQogKi8KCnJ1bGVzLmVtX29wZW4gPSBmdW5jdGlvbiAoLyogdG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPGVtPic7Cn07CnJ1bGVzLmVtX2Nsb3NlID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzwvZW0+JzsKfTsKCi8qKgogKiBTdHJpa2V0aHJvdWdoCiAqLwoKcnVsZXMuZGVsX29wZW4gPSBmdW5jdGlvbiAoLyogdG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPGRlbD4nOwp9OwpydWxlcy5kZWxfY2xvc2UgPSBmdW5jdGlvbiAoLyogdG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiAqLykgewogIHJldHVybiAnPC9kZWw+JzsKfTsKCi8qKgogKiBJbnNlcnQKICovCgpydWxlcy5pbnNfb3BlbiA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8aW5zPic7Cn07CnJ1bGVzLmluc19jbG9zZSA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8L2lucz4nOwp9OwoKLyoqCiAqIEhpZ2hsaWdodAogKi8KCnJ1bGVzLm1hcmtfb3BlbiA9IGZ1bmN0aW9uICgvKiB0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8bWFyaz4nOwp9OwpydWxlcy5tYXJrX2Nsb3NlID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzwvbWFyaz4nOwp9OwoKLyoqCiAqIFN1cGVyLSBhbmQgc3ViLXNjcmlwdAogKi8KCnJ1bGVzLnN1YiA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCAvKiwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8c3ViPicgKyBlc2NhcGVIdG1sKHRva2Vuc1tpZHhdLmNvbnRlbnQpICsgJzwvc3ViPic7Cn07CnJ1bGVzLnN1cCA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCAvKiwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8c3VwPicgKyBlc2NhcGVIdG1sKHRva2Vuc1tpZHhdLmNvbnRlbnQpICsgJzwvc3VwPic7Cn07CgovKioKICogQnJlYWtzCiAqLwoKcnVsZXMuaGFyZGJyZWFrID0gZnVuY3Rpb24gKHRva2VucywgaWR4LCBvcHRpb25zIC8qLCBlbnYgKi8pIHsKICByZXR1cm4gb3B0aW9ucy54aHRtbE91dCA/ICc8YnIgLz5cbicgOiAnPGJyPlxuJzsKfTsKcnVsZXMuc29mdGJyZWFrID0gZnVuY3Rpb24gKHRva2VucywgaWR4LCBvcHRpb25zIC8qLCBlbnYgKi8pIHsKICByZXR1cm4gb3B0aW9ucy5icmVha3MgPyAob3B0aW9ucy54aHRtbE91dCA/ICc8YnIgLz5cbicgOiAnPGJyPlxuJykgOiAnXG4nOwp9OwoKLyoqCiAqIFRleHQKICovCgpydWxlcy50ZXh0ID0gZnVuY3Rpb24gKHRva2VucywgaWR4IC8qLCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gZXNjYXBlSHRtbCh0b2tlbnNbaWR4XS5jb250ZW50KTsKfTsKCi8qKgogKiBDb250ZW50CiAqLwoKcnVsZXMuaHRtbGJsb2NrID0gZnVuY3Rpb24gKHRva2VucywgaWR4IC8qLCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gdG9rZW5zW2lkeF0uY29udGVudDsKfTsKcnVsZXMuaHRtbHRhZyA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCAvKiwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuIHRva2Vuc1tpZHhdLmNvbnRlbnQ7Cn07CgovKioKICogQWJicmV2aWF0aW9ucywgaW5pdGlhbGlzbQogKi8KCnJ1bGVzLmFiYnJfb3BlbiA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCAvKiwgb3B0aW9ucywgZW52ICovKSB7CiAgcmV0dXJuICc8YWJiciB0aXRsZT0iJyArIGVzY2FwZUh0bWwocmVwbGFjZUVudGl0aWVzKHRva2Vuc1tpZHhdLnRpdGxlKSkgKyAnIj4nOwp9OwpydWxlcy5hYmJyX2Nsb3NlID0gZnVuY3Rpb24gKC8qIHRva2VucywgaWR4LCBvcHRpb25zLCBlbnYgKi8pIHsKICByZXR1cm4gJzwvYWJicj4nOwp9OwoKLyoqCiAqIEZvb3Rub3RlcwogKi8KCnJ1bGVzLmZvb3Rub3RlX3JlZiA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCkgewogIHZhciBuID0gTnVtYmVyKHRva2Vuc1tpZHhdLmlkICsgMSkudG9TdHJpbmcoKTsKICB2YXIgaWQgPSAnZm5yZWYnICsgbjsKICBpZiAodG9rZW5zW2lkeF0uc3ViSWQgPiAwKSB7CiAgICBpZCArPSAnOicgKyB0b2tlbnNbaWR4XS5zdWJJZDsKICB9CiAgcmV0dXJuICc8c3VwIGNsYXNzPSJmb290bm90ZS1yZWYiPjxhIGhyZWY9IiNmbicgKyBuICsgJyIgaWQ9IicgKyBpZCArICciPlsnICsgbiArICddPC9hPjwvc3VwPic7Cn07CnJ1bGVzLmZvb3Rub3RlX2Jsb2NrX29wZW4gPSBmdW5jdGlvbiAodG9rZW5zLCBpZHgsIG9wdGlvbnMpIHsKICB2YXIgaHIgPSBvcHRpb25zLnhodG1sT3V0CiAgICA/ICc8aHIgY2xhc3M9ImZvb3Rub3Rlcy1zZXAiIC8+XG4nCiAgICA6ICc8aHIgY2xhc3M9ImZvb3Rub3Rlcy1zZXAiPlxuJzsKICByZXR1cm4gIGhyICsgJzxzZWN0aW9uIGNsYXNzPSJmb290bm90ZXMiPlxuPG9sIGNsYXNzPSJmb290bm90ZXMtbGlzdCI+XG4nOwp9OwpydWxlcy5mb290bm90ZV9ibG9ja19jbG9zZSA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gJzwvb2w+XG48L3NlY3Rpb24+XG4nOwp9OwpydWxlcy5mb290bm90ZV9vcGVuID0gZnVuY3Rpb24gKHRva2VucywgaWR4KSB7CiAgdmFyIGlkID0gTnVtYmVyKHRva2Vuc1tpZHhdLmlkICsgMSkudG9TdHJpbmcoKTsKICByZXR1cm4gJzxsaSBpZD0iZm4nICsgaWQgKyAnIiAgY2xhc3M9ImZvb3Rub3RlLWl0ZW0iPic7Cn07CnJ1bGVzLmZvb3Rub3RlX2Nsb3NlID0gZnVuY3Rpb24gKCkgewogIHJldHVybiAnPC9saT5cbic7Cn07CnJ1bGVzLmZvb3Rub3RlX2FuY2hvciA9IGZ1bmN0aW9uICh0b2tlbnMsIGlkeCkgewogIHZhciBuID0gTnVtYmVyKHRva2Vuc1tpZHhdLmlkICsgMSkudG9TdHJpbmcoKTsKICB2YXIgaWQgPSAnZm5yZWYnICsgbjsKICBpZiAodG9rZW5zW2lkeF0uc3ViSWQgPiAwKSB7CiAgICBpZCArPSAnOicgKyB0b2tlbnNbaWR4XS5zdWJJZDsKICB9CiAgcmV0dXJuICcgPGEgaHJlZj0iIycgKyBpZCArICciIGNsYXNzPSJmb290bm90ZS1iYWNrcmVmIj7ihqk8L2E+JzsKfTsKCi8qKgogKiBEZWZpbml0aW9uIGxpc3RzCiAqLwoKcnVsZXMuZGxfb3BlbiA9IGZ1bmN0aW9uKCkgewogIHJldHVybiAnPGRsPlxuJzsKfTsKcnVsZXMuZHRfb3BlbiA9IGZ1bmN0aW9uKCkgewogIHJldHVybiAnPGR0Pic7Cn07CnJ1bGVzLmRkX29wZW4gPSBmdW5jdGlvbigpIHsKICByZXR1cm4gJzxkZD4nOwp9OwpydWxlcy5kbF9jbG9zZSA9IGZ1bmN0aW9uKCkgewogIHJldHVybiAnPC9kbD5cbic7Cn07CnJ1bGVzLmR0X2Nsb3NlID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuICc8L2R0PlxuJzsKfTsKcnVsZXMuZGRfY2xvc2UgPSBmdW5jdGlvbigpIHsKICByZXR1cm4gJzwvZGQ+XG4nOwp9OwoKLyoqCiAqIEhlbHBlciBmdW5jdGlvbnMKICovCgpmdW5jdGlvbiBuZXh0VG9rZW4odG9rZW5zLCBpZHgpIHsKICBpZiAoKytpZHggPj0gdG9rZW5zLmxlbmd0aCAtIDIpIHsKICAgIHJldHVybiBpZHg7CiAgfQogIGlmICgodG9rZW5zW2lkeF0udHlwZSA9PT0gJ3BhcmFncmFwaF9vcGVuJyAmJiB0b2tlbnNbaWR4XS50aWdodCkgJiYKICAgICAgKHRva2Vuc1tpZHggKyAxXS50eXBlID09PSAnaW5saW5lJyAmJiB0b2tlbnNbaWR4ICsgMV0uY29udGVudC5sZW5ndGggPT09IDApICYmCiAgICAgICh0b2tlbnNbaWR4ICsgMl0udHlwZSA9PT0gJ3BhcmFncmFwaF9jbG9zZScgJiYgdG9rZW5zW2lkeCArIDJdLnRpZ2h0KSkgewogICAgcmV0dXJuIG5leHRUb2tlbih0b2tlbnMsIGlkeCArIDIpOwogIH0KICByZXR1cm4gaWR4Owp9CgovKioKICogQ2hlY2sgdG8gc2VlIGlmIGBcbmAgaXMgbmVlZGVkIGJlZm9yZSB0aGUgbmV4dCB0b2tlbi4KICoKICogQHBhcmFtICB7QXJyYXl9IGB0b2tlbnNgCiAqIEBwYXJhbSAge051bWJlcn0gYGlkeGAKICogQHJldHVybiB7U3RyaW5nfSBFbXB0eSBzdHJpbmcgb3IgbmV3bGluZQogKiBAYXBpIHByaXZhdGUKICovCgp2YXIgZ2V0QnJlYWsgPSBydWxlcy5nZXRCcmVhayA9IGZ1bmN0aW9uIGdldEJyZWFrKHRva2VucywgaWR4KSB7CiAgaWR4ID0gbmV4dFRva2VuKHRva2VucywgaWR4KTsKICBpZiAoaWR4IDwgdG9rZW5zLmxlbmd0aCAmJiB0b2tlbnNbaWR4XS50eXBlID09PSAnbGlzdF9pdGVtX2Nsb3NlJykgewogICAgcmV0dXJuICcnOwogIH0KICByZXR1cm4gJ1xuJzsKfTsKCi8qKgogKiBFeHBvc2UgYHJ1bGVzYAogKi8KCm1vZHVsZS5leHBvcnRzID0gcnVsZXM7Cgp9LHsiLi9jb21tb24vdXRpbHMiOjV9XSwyMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIEJsb2NrIHF1b3RlcwoKJ3VzZSBzdHJpY3QnOwoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYmxvY2txdW90ZShzdGF0ZSwgc3RhcnRMaW5lLCBlbmRMaW5lLCBzaWxlbnQpIHsKICB2YXIgbmV4dExpbmUsIGxhc3RMaW5lRW1wdHksIG9sZFRTaGlmdCwgb2xkQk1hcmtzLCBvbGRJbmRlbnQsIG9sZFBhcmVudFR5cGUsIGxpbmVzLAogICAgICB0ZXJtaW5hdG9yUnVsZXMsCiAgICAgIGksIGwsIHRlcm1pbmF0ZSwKICAgICAgcG9zID0gc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV0gKyBzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXSwKICAgICAgbWF4ID0gc3RhdGUuZU1hcmtzW3N0YXJ0TGluZV07CgogIGlmIChwb3MgPiBtYXgpIHsgcmV0dXJuIGZhbHNlOyB9CgogIC8vIGNoZWNrIHRoZSBibG9jayBxdW90ZSBtYXJrZXIKICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKyspICE9PSAweDNFLyogPiAqLykgeyByZXR1cm4gZmFsc2U7IH0KCiAgaWYgKHN0YXRlLmxldmVsID49IHN0YXRlLm9wdGlvbnMubWF4TmVzdGluZykgeyByZXR1cm4gZmFsc2U7IH0KCiAgLy8gd2Uga25vdyB0aGF0IGl0J3MgZ29pbmcgdG8gYmUgYSB2YWxpZCBibG9ja3F1b3RlLAogIC8vIHNvIG5vIHBvaW50IHRyeWluZyB0byBmaW5kIHRoZSBlbmQgb2YgaXQgaW4gc2lsZW50IG1vZGUKICBpZiAoc2lsZW50KSB7IHJldHVybiB0cnVlOyB9CgogIC8vIHNraXAgb25lIG9wdGlvbmFsIHNwYWNlIGFmdGVyICc+JwogIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpID09PSAweDIwKSB7IHBvcysrOyB9CgogIG9sZEluZGVudCA9IHN0YXRlLmJsa0luZGVudDsKICBzdGF0ZS5ibGtJbmRlbnQgPSAwOwoKICBvbGRCTWFya3MgPSBbIHN0YXRlLmJNYXJrc1tzdGFydExpbmVdIF07CiAgc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV0gPSBwb3M7CgogIC8vIGNoZWNrIGlmIHdlIGhhdmUgYW4gZW1wdHkgYmxvY2txdW90ZQogIHBvcyA9IHBvcyA8IG1heCA/IHN0YXRlLnNraXBTcGFjZXMocG9zKSA6IHBvczsKICBsYXN0TGluZUVtcHR5ID0gcG9zID49IG1heDsKCiAgb2xkVFNoaWZ0ID0gWyBzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXSBdOwogIHN0YXRlLnRTaGlmdFtzdGFydExpbmVdID0gcG9zIC0gc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV07CgogIHRlcm1pbmF0b3JSdWxlcyA9IHN0YXRlLnBhcnNlci5ydWxlci5nZXRSdWxlcygnYmxvY2txdW90ZScpOwoKICAvLyBTZWFyY2ggdGhlIGVuZCBvZiB0aGUgYmxvY2sKICAvLwogIC8vIEJsb2NrIGVuZHMgd2l0aCBlaXRoZXI6CiAgLy8gIDEuIGFuIGVtcHR5IGxpbmUgb3V0c2lkZToKICAvLyAgICAgYGBgCiAgLy8gICAgID4gdGVzdAogIC8vCiAgLy8gICAgIGBgYAogIC8vICAyLiBhbiBlbXB0eSBsaW5lIGluc2lkZToKICAvLyAgICAgYGBgCiAgLy8gICAgID4KICAvLyAgICAgdGVzdAogIC8vICAgICBgYGAKICAvLyAgMy4gYW5vdGhlciB0YWcKICAvLyAgICAgYGBgCiAgLy8gICAgID4gdGVzdAogIC8vICAgICAgLSAtIC0KICAvLyAgICAgYGBgCiAgZm9yIChuZXh0TGluZSA9IHN0YXJ0TGluZSArIDE7IG5leHRMaW5lIDwgZW5kTGluZTsgbmV4dExpbmUrKykgewogICAgcG9zID0gc3RhdGUuYk1hcmtzW25leHRMaW5lXSArIHN0YXRlLnRTaGlmdFtuZXh0TGluZV07CiAgICBtYXggPSBzdGF0ZS5lTWFya3NbbmV4dExpbmVdOwoKICAgIGlmIChwb3MgPj0gbWF4KSB7CiAgICAgIC8vIENhc2UgMTogbGluZSBpcyBub3QgaW5zaWRlIHRoZSBibG9ja3F1b3RlLCBhbmQgdGhpcyBsaW5lIGlzIGVtcHR5LgogICAgICBicmVhazsKICAgIH0KCiAgICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKyspID09PSAweDNFLyogPiAqLykgewogICAgICAvLyBUaGlzIGxpbmUgaXMgaW5zaWRlIHRoZSBibG9ja3F1b3RlLgoKICAgICAgLy8gc2tpcCBvbmUgb3B0aW9uYWwgc3BhY2UgYWZ0ZXIgJz4nCiAgICAgIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpID09PSAweDIwKSB7IHBvcysrOyB9CgogICAgICBvbGRCTWFya3MucHVzaChzdGF0ZS5iTWFya3NbbmV4dExpbmVdKTsKICAgICAgc3RhdGUuYk1hcmtzW25leHRMaW5lXSA9IHBvczsKCiAgICAgIHBvcyA9IHBvcyA8IG1heCA/IHN0YXRlLnNraXBTcGFjZXMocG9zKSA6IHBvczsKICAgICAgbGFzdExpbmVFbXB0eSA9IHBvcyA+PSBtYXg7CgogICAgICBvbGRUU2hpZnQucHVzaChzdGF0ZS50U2hpZnRbbmV4dExpbmVdKTsKICAgICAgc3RhdGUudFNoaWZ0W25leHRMaW5lXSA9IHBvcyAtIHN0YXRlLmJNYXJrc1tuZXh0TGluZV07CiAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIC8vIENhc2UgMjogbGluZSBpcyBub3QgaW5zaWRlIHRoZSBibG9ja3F1b3RlLCBhbmQgdGhlIGxhc3QgbGluZSB3YXMgZW1wdHkuCiAgICBpZiAobGFzdExpbmVFbXB0eSkgeyBicmVhazsgfQoKICAgIC8vIENhc2UgMzogYW5vdGhlciB0YWcgZm91bmQuCiAgICB0ZXJtaW5hdGUgPSBmYWxzZTsKICAgIGZvciAoaSA9IDAsIGwgPSB0ZXJtaW5hdG9yUnVsZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIGlmICh0ZXJtaW5hdG9yUnVsZXNbaV0oc3RhdGUsIG5leHRMaW5lLCBlbmRMaW5lLCB0cnVlKSkgewogICAgICAgIHRlcm1pbmF0ZSA9IHRydWU7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIGlmICh0ZXJtaW5hdGUpIHsgYnJlYWs7IH0KCiAgICBvbGRCTWFya3MucHVzaChzdGF0ZS5iTWFya3NbbmV4dExpbmVdKTsKICAgIG9sZFRTaGlmdC5wdXNoKHN0YXRlLnRTaGlmdFtuZXh0TGluZV0pOwoKICAgIC8vIEEgbmVnYXRpdmUgbnVtYmVyIG1lYW5zIHRoYXQgdGhpcyBpcyBhIHBhcmFncmFwaCBjb250aW51YXRpb247CiAgICAvLwogICAgLy8gQW55IG5lZ2F0aXZlIG51bWJlciB3aWxsIGRvIHRoZSBqb2IgaGVyZSwgYnV0IGl0J3MgYmV0dGVyIGZvciBpdAogICAgLy8gdG8gYmUgbGFyZ2UgZW5vdWdoIHRvIG1ha2UgYW55IGJ1Z3Mgb2J2aW91cy4KICAgIHN0YXRlLnRTaGlmdFtuZXh0TGluZV0gPSAtMTMzNzsKICB9CgogIG9sZFBhcmVudFR5cGUgPSBzdGF0ZS5wYXJlbnRUeXBlOwogIHN0YXRlLnBhcmVudFR5cGUgPSAnYmxvY2txdW90ZSc7CiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ2Jsb2NrcXVvdGVfb3BlbicsCiAgICBsaW5lczogbGluZXMgPSBbIHN0YXJ0TGluZSwgMCBdLAogICAgbGV2ZWw6IHN0YXRlLmxldmVsKysKICB9KTsKICBzdGF0ZS5wYXJzZXIudG9rZW5pemUoc3RhdGUsIHN0YXJ0TGluZSwgbmV4dExpbmUpOwogIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgIHR5cGU6ICdibG9ja3F1b3RlX2Nsb3NlJywKICAgIGxldmVsOiAtLXN0YXRlLmxldmVsCiAgfSk7CiAgc3RhdGUucGFyZW50VHlwZSA9IG9sZFBhcmVudFR5cGU7CiAgbGluZXNbMV0gPSBzdGF0ZS5saW5lOwoKICAvLyBSZXN0b3JlIG9yaWdpbmFsIHRTaGlmdDsgdGhpcyBtaWdodCBub3QgYmUgbmVjZXNzYXJ5IHNpbmNlIHRoZSBwYXJzZXIKICAvLyBoYXMgYWxyZWFkeSBiZWVuIGhlcmUsIGJ1dCBqdXN0IHRvIG1ha2Ugc3VyZSB3ZSBjYW4gZG8gdGhhdC4KICBmb3IgKGkgPSAwOyBpIDwgb2xkVFNoaWZ0Lmxlbmd0aDsgaSsrKSB7CiAgICBzdGF0ZS5iTWFya3NbaSArIHN0YXJ0TGluZV0gPSBvbGRCTWFya3NbaV07CiAgICBzdGF0ZS50U2hpZnRbaSArIHN0YXJ0TGluZV0gPSBvbGRUU2hpZnRbaV07CiAgfQogIHN0YXRlLmJsa0luZGVudCA9IG9sZEluZGVudDsKCiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSwyMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIENvZGUgYmxvY2sgKDQgc3BhY2VzIHBhZGRlZCkKCid1c2Ugc3RyaWN0JzsKCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNvZGUoc3RhdGUsIHN0YXJ0TGluZSwgZW5kTGluZS8qLCBzaWxlbnQqLykgewogIHZhciBuZXh0TGluZSwgbGFzdDsKCiAgaWYgKHN0YXRlLnRTaGlmdFtzdGFydExpbmVdIC0gc3RhdGUuYmxrSW5kZW50IDwgNCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgbGFzdCA9IG5leHRMaW5lID0gc3RhcnRMaW5lICsgMTsKCiAgd2hpbGUgKG5leHRMaW5lIDwgZW5kTGluZSkgewogICAgaWYgKHN0YXRlLmlzRW1wdHkobmV4dExpbmUpKSB7CiAgICAgIG5leHRMaW5lKys7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgaWYgKHN0YXRlLnRTaGlmdFtuZXh0TGluZV0gLSBzdGF0ZS5ibGtJbmRlbnQgPj0gNCkgewogICAgICBuZXh0TGluZSsrOwogICAgICBsYXN0ID0gbmV4dExpbmU7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgYnJlYWs7CiAgfQoKICBzdGF0ZS5saW5lID0gbmV4dExpbmU7CiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ2NvZGUnLAogICAgY29udGVudDogc3RhdGUuZ2V0TGluZXMoc3RhcnRMaW5lLCBsYXN0LCA0ICsgc3RhdGUuYmxrSW5kZW50LCB0cnVlKSwKICAgIGJsb2NrOiB0cnVlLAogICAgbGluZXM6IFsgc3RhcnRMaW5lLCBzdGF0ZS5saW5lIF0sCiAgICBsZXZlbDogc3RhdGUubGV2ZWwKICB9KTsKCiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSwyMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIERlZmluaXRpb24gbGlzdHMKCid1c2Ugc3RyaWN0JzsKCgovLyBTZWFyY2ggYFs6fl1bXG4gXWAsIHJldHVybnMgbmV4dCBwb3MgYWZ0ZXIgbWFya2VyIG9uIHN1Y2Nlc3MKLy8gb3IgLTEgb24gZmFpbC4KZnVuY3Rpb24gc2tpcE1hcmtlcihzdGF0ZSwgbGluZSkgewogIHZhciBwb3MsIG1hcmtlciwKICAgICAgc3RhcnQgPSBzdGF0ZS5iTWFya3NbbGluZV0gKyBzdGF0ZS50U2hpZnRbbGluZV0sCiAgICAgIG1heCA9IHN0YXRlLmVNYXJrc1tsaW5lXTsKCiAgaWYgKHN0YXJ0ID49IG1heCkgeyByZXR1cm4gLTE7IH0KCiAgLy8gQ2hlY2sgYnVsbGV0CiAgbWFya2VyID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQrKyk7CiAgaWYgKG1hcmtlciAhPT0gMHg3RS8qIH4gKi8gJiYgbWFya2VyICE9PSAweDNBLyogOiAqLykgeyByZXR1cm4gLTE7IH0KCiAgcG9zID0gc3RhdGUuc2tpcFNwYWNlcyhzdGFydCk7CgogIC8vIHJlcXVpcmUgc3BhY2UgYWZ0ZXIgIjoiCiAgaWYgKHN0YXJ0ID09PSBwb3MpIHsgcmV0dXJuIC0xOyB9CgogIC8vIG5vIGVtcHR5IGRlZmluaXRpb25zLCBlLmcuICIgIDogIgogIGlmIChwb3MgPj0gbWF4KSB7IHJldHVybiAtMTsgfQoKICByZXR1cm4gcG9zOwp9CgpmdW5jdGlvbiBtYXJrVGlnaHRQYXJhZ3JhcGhzKHN0YXRlLCBpZHgpIHsKICB2YXIgaSwgbCwKICAgICAgbGV2ZWwgPSBzdGF0ZS5sZXZlbCArIDI7CgogIGZvciAoaSA9IGlkeCArIDIsIGwgPSBzdGF0ZS50b2tlbnMubGVuZ3RoIC0gMjsgaSA8IGw7IGkrKykgewogICAgaWYgKHN0YXRlLnRva2Vuc1tpXS5sZXZlbCA9PT0gbGV2ZWwgJiYgc3RhdGUudG9rZW5zW2ldLnR5cGUgPT09ICdwYXJhZ3JhcGhfb3BlbicpIHsKICAgICAgc3RhdGUudG9rZW5zW2kgKyAyXS50aWdodCA9IHRydWU7CiAgICAgIHN0YXRlLnRva2Vuc1tpXS50aWdodCA9IHRydWU7CiAgICAgIGkgKz0gMjsKICAgIH0KICB9Cn0KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmbGlzdChzdGF0ZSwgc3RhcnRMaW5lLCBlbmRMaW5lLCBzaWxlbnQpIHsKICB2YXIgY29udGVudFN0YXJ0LAogICAgICBkZExpbmUsCiAgICAgIGR0TGluZSwKICAgICAgaXRlbUxpbmVzLAogICAgICBsaXN0TGluZXMsCiAgICAgIGxpc3RUb2tJZHgsCiAgICAgIG5leHRMaW5lLAogICAgICBvbGRJbmRlbnQsCiAgICAgIG9sZERESW5kZW50LAogICAgICBvbGRQYXJlbnRUeXBlLAogICAgICBvbGRUU2hpZnQsCiAgICAgIG9sZFRpZ2h0LAogICAgICBwcmV2RW1wdHlFbmQsCiAgICAgIHRpZ2h0OwoKICBpZiAoc2lsZW50KSB7CiAgICAvLyBxdWlyazogdmFsaWRhdGlvbiBtb2RlIHZhbGlkYXRlcyBhIGRkIGJsb2NrIG9ubHksIG5vdCBhIHdob2xlIGRlZmxpc3QKICAgIGlmIChzdGF0ZS5kZEluZGVudCA8IDApIHsgcmV0dXJuIGZhbHNlOyB9CiAgICByZXR1cm4gc2tpcE1hcmtlcihzdGF0ZSwgc3RhcnRMaW5lKSA+PSAwOwogIH0KCiAgbmV4dExpbmUgPSBzdGFydExpbmUgKyAxOwogIGlmIChzdGF0ZS5pc0VtcHR5KG5leHRMaW5lKSkgewogICAgaWYgKCsrbmV4dExpbmUgPiBlbmRMaW5lKSB7IHJldHVybiBmYWxzZTsgfQogIH0KCiAgaWYgKHN0YXRlLnRTaGlmdFtuZXh0TGluZV0gPCBzdGF0ZS5ibGtJbmRlbnQpIHsgcmV0dXJuIGZhbHNlOyB9CiAgY29udGVudFN0YXJ0ID0gc2tpcE1hcmtlcihzdGF0ZSwgbmV4dExpbmUpOwogIGlmIChjb250ZW50U3RhcnQgPCAwKSB7IHJldHVybiBmYWxzZTsgfQoKICBpZiAoc3RhdGUubGV2ZWwgPj0gc3RhdGUub3B0aW9ucy5tYXhOZXN0aW5nKSB7IHJldHVybiBmYWxzZTsgfQoKICAvLyBTdGFydCBsaXN0CiAgbGlzdFRva0lkeCA9IHN0YXRlLnRva2Vucy5sZW5ndGg7CgogIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgIHR5cGU6ICdkbF9vcGVuJywKICAgIGxpbmVzOiBsaXN0TGluZXMgPSBbIHN0YXJ0TGluZSwgMCBdLAogICAgbGV2ZWw6IHN0YXRlLmxldmVsKysKICB9KTsKCiAgLy8KICAvLyBJdGVyYXRlIGxpc3QgaXRlbXMKICAvLwoKICBkdExpbmUgPSBzdGFydExpbmU7CiAgZGRMaW5lID0gbmV4dExpbmU7CgogIC8vIE9uZSBkZWZpbml0aW9uIGxpc3QgY2FuIGNvbnRhaW4gbXVsdGlwbGUgRFRzLAogIC8vIGFuZCBvbmUgRFQgY2FuIGJlIGZvbGxvd2VkIGJ5IG11bHRpcGxlIEREcy4KICAvLwogIC8vIFRodXMsIHRoZXJlIGlzIHR3byBsb29wcyBoZXJlLCBhbmQgbGFiZWwgaXMKICAvLyBuZWVkZWQgdG8gYnJlYWsgb3V0IG9mIHRoZSBzZWNvbmQgb25lCiAgLy8KICAvKmVzbGludCBuby1sYWJlbHM6MCxibG9jay1zY29wZWQtdmFyOjAqLwogIE9VVEVSOgogIGZvciAoOzspIHsKICAgIHRpZ2h0ID0gdHJ1ZTsKICAgIHByZXZFbXB0eUVuZCA9IGZhbHNlOwoKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgdHlwZTogJ2R0X29wZW4nLAogICAgICBsaW5lczogWyBkdExpbmUsIGR0TGluZSBdLAogICAgICBsZXZlbDogc3RhdGUubGV2ZWwrKwogICAgfSk7CiAgICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICAgIHR5cGU6ICdpbmxpbmUnLAogICAgICBjb250ZW50OiBzdGF0ZS5nZXRMaW5lcyhkdExpbmUsIGR0TGluZSArIDEsIHN0YXRlLmJsa0luZGVudCwgZmFsc2UpLnRyaW0oKSwKICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsICsgMSwKICAgICAgbGluZXM6IFsgZHRMaW5lLCBkdExpbmUgXSwKICAgICAgY2hpbGRyZW46IFtdCiAgICB9KTsKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgdHlwZTogJ2R0X2Nsb3NlJywKICAgICAgbGV2ZWw6IC0tc3RhdGUubGV2ZWwKICAgIH0pOwoKICAgIGZvciAoOzspIHsKICAgICAgc3RhdGUudG9rZW5zLnB1c2goewogICAgICAgIHR5cGU6ICdkZF9vcGVuJywKICAgICAgICBsaW5lczogaXRlbUxpbmVzID0gWyBuZXh0TGluZSwgMCBdLAogICAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbCsrCiAgICAgIH0pOwoKICAgICAgb2xkVGlnaHQgPSBzdGF0ZS50aWdodDsKICAgICAgb2xkRERJbmRlbnQgPSBzdGF0ZS5kZEluZGVudDsKICAgICAgb2xkSW5kZW50ID0gc3RhdGUuYmxrSW5kZW50OwogICAgICBvbGRUU2hpZnQgPSBzdGF0ZS50U2hpZnRbZGRMaW5lXTsKICAgICAgb2xkUGFyZW50VHlwZSA9IHN0YXRlLnBhcmVudFR5cGU7CiAgICAgIHN0YXRlLmJsa0luZGVudCA9IHN0YXRlLmRkSW5kZW50ID0gc3RhdGUudFNoaWZ0W2RkTGluZV0gKyAyOwogICAgICBzdGF0ZS50U2hpZnRbZGRMaW5lXSA9IGNvbnRlbnRTdGFydCAtIHN0YXRlLmJNYXJrc1tkZExpbmVdOwogICAgICBzdGF0ZS50aWdodCA9IHRydWU7CiAgICAgIHN0YXRlLnBhcmVudFR5cGUgPSAnZGVmbGlzdCc7CgogICAgICBzdGF0ZS5wYXJzZXIudG9rZW5pemUoc3RhdGUsIGRkTGluZSwgZW5kTGluZSwgdHJ1ZSk7CgogICAgICAvLyBJZiBhbnkgb2YgbGlzdCBpdGVtIGlzIHRpZ2h0LCBtYXJrIGxpc3QgYXMgdGlnaHQKICAgICAgaWYgKCFzdGF0ZS50aWdodCB8fCBwcmV2RW1wdHlFbmQpIHsKICAgICAgICB0aWdodCA9IGZhbHNlOwogICAgICB9CiAgICAgIC8vIEl0ZW0gYmVjb21lIGxvb3NlIGlmIGZpbmlzaCB3aXRoIGVtcHR5IGxpbmUsCiAgICAgIC8vIGJ1dCB3ZSBzaG91bGQgZmlsdGVyIGxhc3QgZWxlbWVudCwgYmVjYXVzZSBpdCBtZWFucyBsaXN0IGZpbmlzaAogICAgICBwcmV2RW1wdHlFbmQgPSAoc3RhdGUubGluZSAtIGRkTGluZSkgPiAxICYmIHN0YXRlLmlzRW1wdHkoc3RhdGUubGluZSAtIDEpOwoKICAgICAgc3RhdGUudFNoaWZ0W2RkTGluZV0gPSBvbGRUU2hpZnQ7CiAgICAgIHN0YXRlLnRpZ2h0ID0gb2xkVGlnaHQ7CiAgICAgIHN0YXRlLnBhcmVudFR5cGUgPSBvbGRQYXJlbnRUeXBlOwogICAgICBzdGF0ZS5ibGtJbmRlbnQgPSBvbGRJbmRlbnQ7CiAgICAgIHN0YXRlLmRkSW5kZW50ID0gb2xkRERJbmRlbnQ7CgogICAgICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICAgICAgdHlwZTogJ2RkX2Nsb3NlJywKICAgICAgICBsZXZlbDogLS1zdGF0ZS5sZXZlbAogICAgICB9KTsKCiAgICAgIGl0ZW1MaW5lc1sxXSA9IG5leHRMaW5lID0gc3RhdGUubGluZTsKCiAgICAgIGlmIChuZXh0TGluZSA+PSBlbmRMaW5lKSB7IGJyZWFrIE9VVEVSOyB9CgogICAgICBpZiAoc3RhdGUudFNoaWZ0W25leHRMaW5lXSA8IHN0YXRlLmJsa0luZGVudCkgeyBicmVhayBPVVRFUjsgfQogICAgICBjb250ZW50U3RhcnQgPSBza2lwTWFya2VyKHN0YXRlLCBuZXh0TGluZSk7CiAgICAgIGlmIChjb250ZW50U3RhcnQgPCAwKSB7IGJyZWFrOyB9CgogICAgICBkZExpbmUgPSBuZXh0TGluZTsKCiAgICAgIC8vIGdvIHRvIHRoZSBuZXh0IGxvb3AgaXRlcmF0aW9uOgogICAgICAvLyBpbnNlcnQgREQgdGFnIGFuZCByZXBlYXQgY2hlY2tpbmcKICAgIH0KCiAgICBpZiAobmV4dExpbmUgPj0gZW5kTGluZSkgeyBicmVhazsgfQogICAgZHRMaW5lID0gbmV4dExpbmU7CgogICAgaWYgKHN0YXRlLmlzRW1wdHkoZHRMaW5lKSkgeyBicmVhazsgfQogICAgaWYgKHN0YXRlLnRTaGlmdFtkdExpbmVdIDwgc3RhdGUuYmxrSW5kZW50KSB7IGJyZWFrOyB9CgogICAgZGRMaW5lID0gZHRMaW5lICsgMTsKICAgIGlmIChkZExpbmUgPj0gZW5kTGluZSkgeyBicmVhazsgfQogICAgaWYgKHN0YXRlLmlzRW1wdHkoZGRMaW5lKSkgeyBkZExpbmUrKzsgfQogICAgaWYgKGRkTGluZSA+PSBlbmRMaW5lKSB7IGJyZWFrOyB9CgogICAgaWYgKHN0YXRlLnRTaGlmdFtkZExpbmVdIDwgc3RhdGUuYmxrSW5kZW50KSB7IGJyZWFrOyB9CiAgICBjb250ZW50U3RhcnQgPSBza2lwTWFya2VyKHN0YXRlLCBkZExpbmUpOwogICAgaWYgKGNvbnRlbnRTdGFydCA8IDApIHsgYnJlYWs7IH0KCiAgICAvLyBnbyB0byB0aGUgbmV4dCBsb29wIGl0ZXJhdGlvbjoKICAgIC8vIGluc2VydCBEVCBhbmQgREQgdGFncyBhbmQgcmVwZWF0IGNoZWNraW5nCiAgfQoKICAvLyBGaW5pbGl6ZSBsaXN0CiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ2RsX2Nsb3NlJywKICAgIGxldmVsOiAtLXN0YXRlLmxldmVsCiAgfSk7CiAgbGlzdExpbmVzWzFdID0gbmV4dExpbmU7CgogIHN0YXRlLmxpbmUgPSBuZXh0TGluZTsKCiAgLy8gbWFyayBwYXJhZ3JhcGhzIHRpZ2h0IGlmIG5lZWRlZAogIGlmICh0aWdodCkgewogICAgbWFya1RpZ2h0UGFyYWdyYXBocyhzdGF0ZSwgbGlzdFRva0lkeCk7CiAgfQoKICByZXR1cm4gdHJ1ZTsKfTsKCn0se31dLDI0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gZmVuY2VzIChgYGAgbGFuZywgfn5+IGxhbmcpCgondXNlIHN0cmljdCc7CgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBmZW5jZXMoc3RhdGUsIHN0YXJ0TGluZSwgZW5kTGluZSwgc2lsZW50KSB7CiAgdmFyIG1hcmtlciwgbGVuLCBwYXJhbXMsIG5leHRMaW5lLCBtZW0sCiAgICAgIGhhdmVFbmRNYXJrZXIgPSBmYWxzZSwKICAgICAgcG9zID0gc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV0gKyBzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXSwKICAgICAgbWF4ID0gc3RhdGUuZU1hcmtzW3N0YXJ0TGluZV07CgogIGlmIChwb3MgKyAzID4gbWF4KSB7IHJldHVybiBmYWxzZTsgfQoKICBtYXJrZXIgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpOwoKICBpZiAobWFya2VyICE9PSAweDdFLyogfiAqLyAmJiBtYXJrZXIgIT09IDB4NjAgLyogYCAqLykgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8gc2NhbiBtYXJrZXIgbGVuZ3RoCiAgbWVtID0gcG9zOwogIHBvcyA9IHN0YXRlLnNraXBDaGFycyhwb3MsIG1hcmtlcik7CgogIGxlbiA9IHBvcyAtIG1lbTsKCiAgaWYgKGxlbiA8IDMpIHsgcmV0dXJuIGZhbHNlOyB9CgogIHBhcmFtcyA9IHN0YXRlLnNyYy5zbGljZShwb3MsIG1heCkudHJpbSgpOwoKICBpZiAocGFyYW1zLmluZGV4T2YoJ2AnKSA+PSAwKSB7IHJldHVybiBmYWxzZTsgfQoKICAvLyBTaW5jZSBzdGFydCBpcyBmb3VuZCwgd2UgY2FuIHJlcG9ydCBzdWNjZXNzIGhlcmUgaW4gdmFsaWRhdGlvbiBtb2RlCiAgaWYgKHNpbGVudCkgeyByZXR1cm4gdHJ1ZTsgfQoKICAvLyBzZWFyY2ggZW5kIG9mIGJsb2NrCiAgbmV4dExpbmUgPSBzdGFydExpbmU7CgogIGZvciAoOzspIHsKICAgIG5leHRMaW5lKys7CiAgICBpZiAobmV4dExpbmUgPj0gZW5kTGluZSkgewogICAgICAvLyB1bmNsb3NlZCBibG9jayBzaG91bGQgYmUgYXV0b2Nsb3NlZCBieSBlbmQgb2YgZG9jdW1lbnQuCiAgICAgIC8vIGFsc28gYmxvY2sgc2VlbXMgdG8gYmUgYXV0b2Nsb3NlZCBieSBlbmQgb2YgcGFyZW50CiAgICAgIGJyZWFrOwogICAgfQoKICAgIHBvcyA9IG1lbSA9IHN0YXRlLmJNYXJrc1tuZXh0TGluZV0gKyBzdGF0ZS50U2hpZnRbbmV4dExpbmVdOwogICAgbWF4ID0gc3RhdGUuZU1hcmtzW25leHRMaW5lXTsKCiAgICBpZiAocG9zIDwgbWF4ICYmIHN0YXRlLnRTaGlmdFtuZXh0TGluZV0gPCBzdGF0ZS5ibGtJbmRlbnQpIHsKICAgICAgLy8gbm9uLWVtcHR5IGxpbmUgd2l0aCBuZWdhdGl2ZSBpbmRlbnQgc2hvdWxkIHN0b3AgdGhlIGxpc3Q6CiAgICAgIC8vIC0gYGBgCiAgICAgIC8vICB0ZXN0CiAgICAgIGJyZWFrOwogICAgfQoKICAgIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpICE9PSBtYXJrZXIpIHsgY29udGludWU7IH0KCiAgICBpZiAoc3RhdGUudFNoaWZ0W25leHRMaW5lXSAtIHN0YXRlLmJsa0luZGVudCA+PSA0KSB7CiAgICAgIC8vIGNsb3NpbmcgZmVuY2Ugc2hvdWxkIGJlIGluZGVudGVkIGxlc3MgdGhhbiA0IHNwYWNlcwogICAgICBjb250aW51ZTsKICAgIH0KCiAgICBwb3MgPSBzdGF0ZS5za2lwQ2hhcnMocG9zLCBtYXJrZXIpOwoKICAgIC8vIGNsb3NpbmcgY29kZSBmZW5jZSBtdXN0IGJlIGF0IGxlYXN0IGFzIGxvbmcgYXMgdGhlIG9wZW5pbmcgb25lCiAgICBpZiAocG9zIC0gbWVtIDwgbGVuKSB7IGNvbnRpbnVlOyB9CgogICAgLy8gbWFrZSBzdXJlIHRhaWwgaGFzIHNwYWNlcyBvbmx5CiAgICBwb3MgPSBzdGF0ZS5za2lwU3BhY2VzKHBvcyk7CgogICAgaWYgKHBvcyA8IG1heCkgeyBjb250aW51ZTsgfQoKICAgIGhhdmVFbmRNYXJrZXIgPSB0cnVlOwogICAgLy8gZm91bmQhCiAgICBicmVhazsKICB9CgogIC8vIElmIGEgZmVuY2UgaGFzIGhlYWRpbmcgc3BhY2VzLCB0aGV5IHNob3VsZCBiZSByZW1vdmVkIGZyb20gaXRzIGlubmVyIGJsb2NrCiAgbGVuID0gc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV07CgogIHN0YXRlLmxpbmUgPSBuZXh0TGluZSArIChoYXZlRW5kTWFya2VyID8gMSA6IDApOwogIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgIHR5cGU6ICdmZW5jZScsCiAgICBwYXJhbXM6IHBhcmFtcywKICAgIGNvbnRlbnQ6IHN0YXRlLmdldExpbmVzKHN0YXJ0TGluZSArIDEsIG5leHRMaW5lLCBsZW4sIHRydWUpLAogICAgbGluZXM6IFsgc3RhcnRMaW5lLCBzdGF0ZS5saW5lIF0sCiAgICBsZXZlbDogc3RhdGUubGV2ZWwKICB9KTsKCiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSwyNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFByb2Nlc3MgZm9vdG5vdGUgcmVmZXJlbmNlIGxpc3QKCid1c2Ugc3RyaWN0JzsKCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGZvb3Rub3RlKHN0YXRlLCBzdGFydExpbmUsIGVuZExpbmUsIHNpbGVudCkgewogIHZhciBvbGRCTWFyaywgb2xkVFNoaWZ0LCBvbGRQYXJlbnRUeXBlLCBwb3MsIGxhYmVsLAogICAgICBzdGFydCA9IHN0YXRlLmJNYXJrc1tzdGFydExpbmVdICsgc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV0sCiAgICAgIG1heCA9IHN0YXRlLmVNYXJrc1tzdGFydExpbmVdOwoKICAvLyBsaW5lIHNob3VsZCBiZSBhdCBsZWFzdCA1IGNoYXJzIC0gIlteeF06IgogIGlmIChzdGFydCArIDQgPiBtYXgpIHsgcmV0dXJuIGZhbHNlOyB9CgogIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCkgIT09IDB4NUIvKiBbICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCArIDEpICE9PSAweDVFLyogXiAqLykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc3RhdGUubGV2ZWwgPj0gc3RhdGUub3B0aW9ucy5tYXhOZXN0aW5nKSB7IHJldHVybiBmYWxzZTsgfQoKICBmb3IgKHBvcyA9IHN0YXJ0ICsgMjsgcG9zIDwgbWF4OyBwb3MrKykgewogICAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgPT09IDB4MjApIHsgcmV0dXJuIGZhbHNlOyB9CiAgICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gMHg1RCAvKiBdICovKSB7CiAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgaWYgKHBvcyA9PT0gc3RhcnQgKyAyKSB7IHJldHVybiBmYWxzZTsgfSAvLyBubyBlbXB0eSBmb290bm90ZSBsYWJlbHMKICBpZiAocG9zICsgMSA+PSBtYXggfHwgc3RhdGUuc3JjLmNoYXJDb2RlQXQoKytwb3MpICE9PSAweDNBIC8qIDogKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHNpbGVudCkgeyByZXR1cm4gdHJ1ZTsgfQogIHBvcysrOwoKICBpZiAoIXN0YXRlLmVudi5mb290bm90ZXMpIHsgc3RhdGUuZW52LmZvb3Rub3RlcyA9IHt9OyB9CiAgaWYgKCFzdGF0ZS5lbnYuZm9vdG5vdGVzLnJlZnMpIHsgc3RhdGUuZW52LmZvb3Rub3Rlcy5yZWZzID0ge307IH0KICBsYWJlbCA9IHN0YXRlLnNyYy5zbGljZShzdGFydCArIDIsIHBvcyAtIDIpOwogIHN0YXRlLmVudi5mb290bm90ZXMucmVmc1snOicgKyBsYWJlbF0gPSAtMTsKCiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ2Zvb3Rub3RlX3JlZmVyZW5jZV9vcGVuJywKICAgIGxhYmVsOiBsYWJlbCwKICAgIGxldmVsOiBzdGF0ZS5sZXZlbCsrCiAgfSk7CgogIG9sZEJNYXJrID0gc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV07CiAgb2xkVFNoaWZ0ID0gc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV07CiAgb2xkUGFyZW50VHlwZSA9IHN0YXRlLnBhcmVudFR5cGU7CiAgc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV0gPSBzdGF0ZS5za2lwU3BhY2VzKHBvcykgLSBwb3M7CiAgc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV0gPSBwb3M7CiAgc3RhdGUuYmxrSW5kZW50ICs9IDQ7CiAgc3RhdGUucGFyZW50VHlwZSA9ICdmb290bm90ZSc7CgogIGlmIChzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXSA8IHN0YXRlLmJsa0luZGVudCkgewogICAgc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV0gKz0gc3RhdGUuYmxrSW5kZW50OwogICAgc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV0gLT0gc3RhdGUuYmxrSW5kZW50OwogIH0KCiAgc3RhdGUucGFyc2VyLnRva2VuaXplKHN0YXRlLCBzdGFydExpbmUsIGVuZExpbmUsIHRydWUpOwoKICBzdGF0ZS5wYXJlbnRUeXBlID0gb2xkUGFyZW50VHlwZTsKICBzdGF0ZS5ibGtJbmRlbnQgLT0gNDsKICBzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXSA9IG9sZFRTaGlmdDsKICBzdGF0ZS5iTWFya3Nbc3RhcnRMaW5lXSA9IG9sZEJNYXJrOwoKICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICB0eXBlOiAnZm9vdG5vdGVfcmVmZXJlbmNlX2Nsb3NlJywKICAgIGxldmVsOiAtLXN0YXRlLmxldmVsCiAgfSk7CgogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sMjY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBoZWFkaW5nICgjLCAjIywgLi4uKQoKJ3VzZSBzdHJpY3QnOwoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaGVhZGluZyhzdGF0ZSwgc3RhcnRMaW5lLCBlbmRMaW5lLCBzaWxlbnQpIHsKICB2YXIgY2gsIGxldmVsLCB0bXAsCiAgICAgIHBvcyA9IHN0YXRlLmJNYXJrc1tzdGFydExpbmVdICsgc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV0sCiAgICAgIG1heCA9IHN0YXRlLmVNYXJrc1tzdGFydExpbmVdOwoKICBpZiAocG9zID49IG1heCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgY2ggID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKTsKCiAgaWYgKGNoICE9PSAweDIzLyogIyAqLyB8fCBwb3MgPj0gbWF4KSB7IHJldHVybiBmYWxzZTsgfQoKICAvLyBjb3VudCBoZWFkaW5nIGxldmVsCiAgbGV2ZWwgPSAxOwogIGNoID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQoKytwb3MpOwogIHdoaWxlIChjaCA9PT0gMHgyMy8qICMgKi8gJiYgcG9zIDwgbWF4ICYmIGxldmVsIDw9IDYpIHsKICAgIGxldmVsKys7CiAgICBjaCA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KCsrcG9zKTsKICB9CgogIGlmIChsZXZlbCA+IDYgfHwgKHBvcyA8IG1heCAmJiBjaCAhPT0gMHgyMC8qIHNwYWNlICovKSkgeyByZXR1cm4gZmFsc2U7IH0KCiAgaWYgKHNpbGVudCkgeyByZXR1cm4gdHJ1ZTsgfQoKICAvLyBMZXQncyBjdXQgdGFpbHMgbGlrZSAnICAgICMjIyAgJyBmcm9tIHRoZSBlbmQgb2Ygc3RyaW5nCgogIG1heCA9IHN0YXRlLnNraXBDaGFyc0JhY2sobWF4LCAweDIwLCBwb3MpOyAvLyBzcGFjZQogIHRtcCA9IHN0YXRlLnNraXBDaGFyc0JhY2sobWF4LCAweDIzLCBwb3MpOyAvLyAjCiAgaWYgKHRtcCA+IHBvcyAmJiBzdGF0ZS5zcmMuY2hhckNvZGVBdCh0bXAgLSAxKSA9PT0gMHgyMC8qIHNwYWNlICovKSB7CiAgICBtYXggPSB0bXA7CiAgfQoKICBzdGF0ZS5saW5lID0gc3RhcnRMaW5lICsgMTsKCiAgc3RhdGUudG9rZW5zLnB1c2goeyB0eXBlOiAnaGVhZGluZ19vcGVuJywKICAgIGhMZXZlbDogbGV2ZWwsCiAgICBsaW5lczogWyBzdGFydExpbmUsIHN0YXRlLmxpbmUgXSwKICAgIGxldmVsOiBzdGF0ZS5sZXZlbAogIH0pOwoKICAvLyBvbmx5IGlmIGhlYWRlciBpcyBub3QgZW1wdHkKICBpZiAocG9zIDwgbWF4KSB7CiAgICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICAgIHR5cGU6ICdpbmxpbmUnLAogICAgICBjb250ZW50OiBzdGF0ZS5zcmMuc2xpY2UocG9zLCBtYXgpLnRyaW0oKSwKICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsICsgMSwKICAgICAgbGluZXM6IFsgc3RhcnRMaW5lLCBzdGF0ZS5saW5lIF0sCiAgICAgIGNoaWxkcmVuOiBbXQogICAgfSk7CiAgfQogIHN0YXRlLnRva2Vucy5wdXNoKHsgdHlwZTogJ2hlYWRpbmdfY2xvc2UnLCBoTGV2ZWw6IGxldmVsLCBsZXZlbDogc3RhdGUubGV2ZWwgfSk7CgogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sMjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBIb3Jpem9udGFsIHJ1bGUKCid1c2Ugc3RyaWN0JzsKCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGhyKHN0YXRlLCBzdGFydExpbmUsIGVuZExpbmUsIHNpbGVudCkgewogIHZhciBtYXJrZXIsIGNudCwgY2gsCiAgICAgIHBvcyA9IHN0YXRlLmJNYXJrc1tzdGFydExpbmVdLAogICAgICBtYXggPSBzdGF0ZS5lTWFya3Nbc3RhcnRMaW5lXTsKCiAgcG9zICs9IHN0YXRlLnRTaGlmdFtzdGFydExpbmVdOwoKICBpZiAocG9zID4gbWF4KSB7IHJldHVybiBmYWxzZTsgfQoKICBtYXJrZXIgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MrKyk7CgogIC8vIENoZWNrIGhyIG1hcmtlcgogIGlmIChtYXJrZXIgIT09IDB4MkEvKiAqICovICYmCiAgICAgIG1hcmtlciAhPT0gMHgyRC8qIC0gKi8gJiYKICAgICAgbWFya2VyICE9PSAweDVGLyogXyAqLykgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8gbWFya2VycyBjYW4gYmUgbWl4ZWQgd2l0aCBzcGFjZXMsIGJ1dCB0aGVyZSBzaG91bGQgYmUgYXQgbGVhc3QgMyBvbmUKCiAgY250ID0gMTsKICB3aGlsZSAocG9zIDwgbWF4KSB7CiAgICBjaCA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcysrKTsKICAgIGlmIChjaCAhPT0gbWFya2VyICYmIGNoICE9PSAweDIwLyogc3BhY2UgKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgICBpZiAoY2ggPT09IG1hcmtlcikgeyBjbnQrKzsgfQogIH0KCiAgaWYgKGNudCA8IDMpIHsgcmV0dXJuIGZhbHNlOyB9CgogIGlmIChzaWxlbnQpIHsgcmV0dXJuIHRydWU7IH0KCiAgc3RhdGUubGluZSA9IHN0YXJ0TGluZSArIDE7CiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ2hyJywKICAgIGxpbmVzOiBbIHN0YXJ0TGluZSwgc3RhdGUubGluZSBdLAogICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgfSk7CgogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sMjg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBIVE1MIGJsb2NrCgondXNlIHN0cmljdCc7CgoKdmFyIGJsb2NrX25hbWVzID0gcmVxdWlyZSgnLi4vY29tbW9uL2h0bWxfYmxvY2tzJyk7CgoKdmFyIEhUTUxfVEFHX09QRU5fUkUgPSAvXjwoW2EtekEtWl17MSwxNX0pW1xzXC8+XS87CnZhciBIVE1MX1RBR19DTE9TRV9SRSA9IC9ePFwvKFthLXpBLVpdezEsMTV9KVtccz5dLzsKCmZ1bmN0aW9uIGlzTGV0dGVyKGNoKSB7CiAgLyplc2xpbnQgbm8tYml0d2lzZTowKi8KICB2YXIgbGMgPSBjaCB8IDB4MjA7IC8vIHRvIGxvd2VyIGNhc2UKICByZXR1cm4gKGxjID49IDB4NjEvKiBhICovKSAmJiAobGMgPD0gMHg3YS8qIHogKi8pOwp9Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGh0bWxibG9jayhzdGF0ZSwgc3RhcnRMaW5lLCBlbmRMaW5lLCBzaWxlbnQpIHsKICB2YXIgY2gsIG1hdGNoLCBuZXh0TGluZSwKICAgICAgcG9zID0gc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV0sCiAgICAgIG1heCA9IHN0YXRlLmVNYXJrc1tzdGFydExpbmVdLAogICAgICBzaGlmdCA9IHN0YXRlLnRTaGlmdFtzdGFydExpbmVdOwoKICBwb3MgKz0gc2hpZnQ7CgogIGlmICghc3RhdGUub3B0aW9ucy5odG1sKSB7IHJldHVybiBmYWxzZTsgfQoKICBpZiAoc2hpZnQgPiAzIHx8IHBvcyArIDIgPj0gbWF4KSB7IHJldHVybiBmYWxzZTsgfQoKICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSAhPT0gMHgzQy8qIDwgKi8pIHsgcmV0dXJuIGZhbHNlOyB9CgogIGNoID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zICsgMSk7CgogIGlmIChjaCA9PT0gMHgyMS8qICEgKi8gfHwgY2ggPT09IDB4M0YvKiA/ICovKSB7CiAgICAvLyBEaXJlY3RpdmUgc3RhcnQgLyBjb21tZW50IHN0YXJ0IC8gcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBzdGFydAogICAgaWYgKHNpbGVudCkgeyByZXR1cm4gdHJ1ZTsgfQoKICB9IGVsc2UgaWYgKGNoID09PSAweDJGLyogLyAqLyB8fCBpc0xldHRlcihjaCkpIHsKCiAgICAvLyBQcm9iYWJseSBzdGFydCBvciBlbmQgb2YgdGFnCiAgICBpZiAoY2ggPT09IDB4MkYvKiBcICovKSB7CiAgICAgIC8vIGNsb3NpbmcgdGFnCiAgICAgIG1hdGNoID0gc3RhdGUuc3JjLnNsaWNlKHBvcywgbWF4KS5tYXRjaChIVE1MX1RBR19DTE9TRV9SRSk7CiAgICAgIGlmICghbWF0Y2gpIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9IGVsc2UgewogICAgICAvLyBvcGVuaW5nIHRhZwogICAgICBtYXRjaCA9IHN0YXRlLnNyYy5zbGljZShwb3MsIG1heCkubWF0Y2goSFRNTF9UQUdfT1BFTl9SRSk7CiAgICAgIGlmICghbWF0Y2gpIHsgcmV0dXJuIGZhbHNlOyB9CiAgICB9CiAgICAvLyBNYWtlIHN1cmUgdGFnIG5hbWUgaXMgdmFsaWQKICAgIGlmIChibG9ja19uYW1lc1ttYXRjaFsxXS50b0xvd2VyQ2FzZSgpXSAhPT0gdHJ1ZSkgeyByZXR1cm4gZmFsc2U7IH0KICAgIGlmIChzaWxlbnQpIHsgcmV0dXJuIHRydWU7IH0KCiAgfSBlbHNlIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIC8vIElmIHdlIGFyZSBoZXJlIC0gd2UgZGV0ZWN0ZWQgSFRNTCBibG9jay4KICAvLyBMZXQncyByb2xsIGRvd24gdGlsbCBlbXB0eSBsaW5lIChibG9jayBlbmQpLgogIG5leHRMaW5lID0gc3RhcnRMaW5lICsgMTsKICB3aGlsZSAobmV4dExpbmUgPCBzdGF0ZS5saW5lTWF4ICYmICFzdGF0ZS5pc0VtcHR5KG5leHRMaW5lKSkgewogICAgbmV4dExpbmUrKzsKICB9CgogIHN0YXRlLmxpbmUgPSBuZXh0TGluZTsKICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICB0eXBlOiAnaHRtbGJsb2NrJywKICAgIGxldmVsOiBzdGF0ZS5sZXZlbCwKICAgIGxpbmVzOiBbIHN0YXJ0TGluZSwgc3RhdGUubGluZSBdLAogICAgY29udGVudDogc3RhdGUuZ2V0TGluZXMoc3RhcnRMaW5lLCBuZXh0TGluZSwgMCwgdHJ1ZSkKICB9KTsKCiAgcmV0dXJuIHRydWU7Cn07Cgp9LHsiLi4vY29tbW9uL2h0bWxfYmxvY2tzIjoyfV0sMjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBsaGVhZGluZyAoLS0tLCA9PT0pCgondXNlIHN0cmljdCc7CgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBsaGVhZGluZyhzdGF0ZSwgc3RhcnRMaW5lLCBlbmRMaW5lLyosIHNpbGVudCovKSB7CiAgdmFyIG1hcmtlciwgcG9zLCBtYXgsCiAgICAgIG5leHQgPSBzdGFydExpbmUgKyAxOwoKICBpZiAobmV4dCA+PSBlbmRMaW5lKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzdGF0ZS50U2hpZnRbbmV4dF0gPCBzdGF0ZS5ibGtJbmRlbnQpIHsgcmV0dXJuIGZhbHNlOyB9CgogIC8vIFNjYW4gbmV4dCBsaW5lCgogIGlmIChzdGF0ZS50U2hpZnRbbmV4dF0gLSBzdGF0ZS5ibGtJbmRlbnQgPiAzKSB7IHJldHVybiBmYWxzZTsgfQoKICBwb3MgPSBzdGF0ZS5iTWFya3NbbmV4dF0gKyBzdGF0ZS50U2hpZnRbbmV4dF07CiAgbWF4ID0gc3RhdGUuZU1hcmtzW25leHRdOwoKICBpZiAocG9zID49IG1heCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgbWFya2VyID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKTsKCiAgaWYgKG1hcmtlciAhPT0gMHgyRC8qIC0gKi8gJiYgbWFya2VyICE9PSAweDNELyogPSAqLykgeyByZXR1cm4gZmFsc2U7IH0KCiAgcG9zID0gc3RhdGUuc2tpcENoYXJzKHBvcywgbWFya2VyKTsKCiAgcG9zID0gc3RhdGUuc2tpcFNwYWNlcyhwb3MpOwoKICBpZiAocG9zIDwgbWF4KSB7IHJldHVybiBmYWxzZTsgfQoKICBwb3MgPSBzdGF0ZS5iTWFya3Nbc3RhcnRMaW5lXSArIHN0YXRlLnRTaGlmdFtzdGFydExpbmVdOwoKICBzdGF0ZS5saW5lID0gbmV4dCArIDE7CiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ2hlYWRpbmdfb3BlbicsCiAgICBoTGV2ZWw6IG1hcmtlciA9PT0gMHgzRC8qID0gKi8gPyAxIDogMiwKICAgIGxpbmVzOiBbIHN0YXJ0TGluZSwgc3RhdGUubGluZSBdLAogICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgfSk7CiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ2lubGluZScsCiAgICBjb250ZW50OiBzdGF0ZS5zcmMuc2xpY2UocG9zLCBzdGF0ZS5lTWFya3Nbc3RhcnRMaW5lXSkudHJpbSgpLAogICAgbGV2ZWw6IHN0YXRlLmxldmVsICsgMSwKICAgIGxpbmVzOiBbIHN0YXJ0TGluZSwgc3RhdGUubGluZSAtIDEgXSwKICAgIGNoaWxkcmVuOiBbXQogIH0pOwogIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgIHR5cGU6ICdoZWFkaW5nX2Nsb3NlJywKICAgIGhMZXZlbDogbWFya2VyID09PSAweDNELyogPSAqLyA/IDEgOiAyLAogICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgfSk7CgogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sMzA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBMaXN0cwoKJ3VzZSBzdHJpY3QnOwoKCi8vIFNlYXJjaCBgWy0rKl1bXG4gXWAsIHJldHVybnMgbmV4dCBwb3MgYXJ0ZXIgbWFya2VyIG9uIHN1Y2Nlc3MKLy8gb3IgLTEgb24gZmFpbC4KZnVuY3Rpb24gc2tpcEJ1bGxldExpc3RNYXJrZXIoc3RhdGUsIHN0YXJ0TGluZSkgewogIHZhciBtYXJrZXIsIHBvcywgbWF4OwoKICBwb3MgPSBzdGF0ZS5iTWFya3Nbc3RhcnRMaW5lXSArIHN0YXRlLnRTaGlmdFtzdGFydExpbmVdOwogIG1heCA9IHN0YXRlLmVNYXJrc1tzdGFydExpbmVdOwoKICBpZiAocG9zID49IG1heCkgeyByZXR1cm4gLTE7IH0KCiAgbWFya2VyID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKyspOwogIC8vIENoZWNrIGJ1bGxldAogIGlmIChtYXJrZXIgIT09IDB4MkEvKiAqICovICYmCiAgICAgIG1hcmtlciAhPT0gMHgyRC8qIC0gKi8gJiYKICAgICAgbWFya2VyICE9PSAweDJCLyogKyAqLykgewogICAgcmV0dXJuIC0xOwogIH0KCiAgaWYgKHBvcyA8IG1heCAmJiBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpICE9PSAweDIwKSB7CiAgICAvLyAiIDEudGVzdCAiIC0gaXMgbm90IGEgbGlzdCBpdGVtCiAgICByZXR1cm4gLTE7CiAgfQoKICByZXR1cm4gcG9zOwp9CgovLyBTZWFyY2ggYFxkK1suKV1bXG4gXWAsIHJldHVybnMgbmV4dCBwb3MgYXJ0ZXIgbWFya2VyIG9uIHN1Y2Nlc3MKLy8gb3IgLTEgb24gZmFpbC4KZnVuY3Rpb24gc2tpcE9yZGVyZWRMaXN0TWFya2VyKHN0YXRlLCBzdGFydExpbmUpIHsKICB2YXIgY2gsCiAgICAgIHBvcyA9IHN0YXRlLmJNYXJrc1tzdGFydExpbmVdICsgc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV0sCiAgICAgIG1heCA9IHN0YXRlLmVNYXJrc1tzdGFydExpbmVdOwoKICBpZiAocG9zICsgMSA+PSBtYXgpIHsgcmV0dXJuIC0xOyB9CgogIGNoID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKyspOwoKICBpZiAoY2ggPCAweDMwLyogMCAqLyB8fCBjaCA+IDB4MzkvKiA5ICovKSB7IHJldHVybiAtMTsgfQoKICBmb3IgKDs7KSB7CiAgICAvLyBFT0wgLT4gZmFpbAogICAgaWYgKHBvcyA+PSBtYXgpIHsgcmV0dXJuIC0xOyB9CgogICAgY2ggPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MrKyk7CgogICAgaWYgKGNoID49IDB4MzAvKiAwICovICYmIGNoIDw9IDB4MzkvKiA5ICovKSB7CiAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIC8vIGZvdW5kIHZhbGlkIG1hcmtlcgogICAgaWYgKGNoID09PSAweDI5LyogKSAqLyB8fCBjaCA9PT0gMHgyZS8qIC4gKi8pIHsKICAgICAgYnJlYWs7CiAgICB9CgogICAgcmV0dXJuIC0xOwogIH0KCgogIGlmIChwb3MgPCBtYXggJiYgc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSAhPT0gMHgyMC8qIHNwYWNlICovKSB7CiAgICAvLyAiIDEudGVzdCAiIC0gaXMgbm90IGEgbGlzdCBpdGVtCiAgICByZXR1cm4gLTE7CiAgfQogIHJldHVybiBwb3M7Cn0KCmZ1bmN0aW9uIG1hcmtUaWdodFBhcmFncmFwaHMoc3RhdGUsIGlkeCkgewogIHZhciBpLCBsLAogICAgICBsZXZlbCA9IHN0YXRlLmxldmVsICsgMjsKCiAgZm9yIChpID0gaWR4ICsgMiwgbCA9IHN0YXRlLnRva2Vucy5sZW5ndGggLSAyOyBpIDwgbDsgaSsrKSB7CiAgICBpZiAoc3RhdGUudG9rZW5zW2ldLmxldmVsID09PSBsZXZlbCAmJiBzdGF0ZS50b2tlbnNbaV0udHlwZSA9PT0gJ3BhcmFncmFwaF9vcGVuJykgewogICAgICBzdGF0ZS50b2tlbnNbaSArIDJdLnRpZ2h0ID0gdHJ1ZTsKICAgICAgc3RhdGUudG9rZW5zW2ldLnRpZ2h0ID0gdHJ1ZTsKICAgICAgaSArPSAyOwogICAgfQogIH0KfQoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbGlzdChzdGF0ZSwgc3RhcnRMaW5lLCBlbmRMaW5lLCBzaWxlbnQpIHsKICB2YXIgbmV4dExpbmUsCiAgICAgIGluZGVudCwKICAgICAgb2xkVFNoaWZ0LAogICAgICBvbGRJbmRlbnQsCiAgICAgIG9sZFRpZ2h0LAogICAgICBvbGRQYXJlbnRUeXBlLAogICAgICBzdGFydCwKICAgICAgcG9zQWZ0ZXJNYXJrZXIsCiAgICAgIG1heCwKICAgICAgaW5kZW50QWZ0ZXJNYXJrZXIsCiAgICAgIG1hcmtlclZhbHVlLAogICAgICBtYXJrZXJDaGFyQ29kZSwKICAgICAgaXNPcmRlcmVkLAogICAgICBjb250ZW50U3RhcnQsCiAgICAgIGxpc3RUb2tJZHgsCiAgICAgIHByZXZFbXB0eUVuZCwKICAgICAgbGlzdExpbmVzLAogICAgICBpdGVtTGluZXMsCiAgICAgIHRpZ2h0ID0gdHJ1ZSwKICAgICAgdGVybWluYXRvclJ1bGVzLAogICAgICBpLCBsLCB0ZXJtaW5hdGU7CgogIC8vIERldGVjdCBsaXN0IHR5cGUgYW5kIHBvc2l0aW9uIGFmdGVyIG1hcmtlcgogIGlmICgocG9zQWZ0ZXJNYXJrZXIgPSBza2lwT3JkZXJlZExpc3RNYXJrZXIoc3RhdGUsIHN0YXJ0TGluZSkpID49IDApIHsKICAgIGlzT3JkZXJlZCA9IHRydWU7CiAgfSBlbHNlIGlmICgocG9zQWZ0ZXJNYXJrZXIgPSBza2lwQnVsbGV0TGlzdE1hcmtlcihzdGF0ZSwgc3RhcnRMaW5lKSkgPj0gMCkgewogICAgaXNPcmRlcmVkID0gZmFsc2U7CiAgfSBlbHNlIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGlmIChzdGF0ZS5sZXZlbCA+PSBzdGF0ZS5vcHRpb25zLm1heE5lc3RpbmcpIHsgcmV0dXJuIGZhbHNlOyB9CgogIC8vIFdlIHNob3VsZCB0ZXJtaW5hdGUgbGlzdCBvbiBzdHlsZSBjaGFuZ2UuIFJlbWVtYmVyIGZpcnN0IG9uZSB0byBjb21wYXJlLgogIG1hcmtlckNoYXJDb2RlID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zQWZ0ZXJNYXJrZXIgLSAxKTsKCiAgLy8gRm9yIHZhbGlkYXRpb24gbW9kZSB3ZSBjYW4gdGVybWluYXRlIGltbWVkaWF0ZWx5CiAgaWYgKHNpbGVudCkgeyByZXR1cm4gdHJ1ZTsgfQoKICAvLyBTdGFydCBsaXN0CiAgbGlzdFRva0lkeCA9IHN0YXRlLnRva2Vucy5sZW5ndGg7CgogIGlmIChpc09yZGVyZWQpIHsKICAgIHN0YXJ0ID0gc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV0gKyBzdGF0ZS50U2hpZnRbc3RhcnRMaW5lXTsKICAgIG1hcmtlclZhbHVlID0gTnVtYmVyKHN0YXRlLnNyYy5zdWJzdHIoc3RhcnQsIHBvc0FmdGVyTWFya2VyIC0gc3RhcnQgLSAxKSk7CgogICAgc3RhdGUudG9rZW5zLnB1c2goewogICAgICB0eXBlOiAnb3JkZXJlZF9saXN0X29wZW4nLAogICAgICBvcmRlcjogbWFya2VyVmFsdWUsCiAgICAgIGxpbmVzOiBsaXN0TGluZXMgPSBbIHN0YXJ0TGluZSwgMCBdLAogICAgICBsZXZlbDogc3RhdGUubGV2ZWwrKwogICAgfSk7CgogIH0gZWxzZSB7CiAgICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICAgIHR5cGU6ICdidWxsZXRfbGlzdF9vcGVuJywKICAgICAgbGluZXM6IGxpc3RMaW5lcyA9IFsgc3RhcnRMaW5lLCAwIF0sCiAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbCsrCiAgICB9KTsKICB9CgogIC8vCiAgLy8gSXRlcmF0ZSBsaXN0IGl0ZW1zCiAgLy8KCiAgbmV4dExpbmUgPSBzdGFydExpbmU7CiAgcHJldkVtcHR5RW5kID0gZmFsc2U7CiAgdGVybWluYXRvclJ1bGVzID0gc3RhdGUucGFyc2VyLnJ1bGVyLmdldFJ1bGVzKCdsaXN0Jyk7CgogIHdoaWxlIChuZXh0TGluZSA8IGVuZExpbmUpIHsKICAgIGNvbnRlbnRTdGFydCA9IHN0YXRlLnNraXBTcGFjZXMocG9zQWZ0ZXJNYXJrZXIpOwogICAgbWF4ID0gc3RhdGUuZU1hcmtzW25leHRMaW5lXTsKCiAgICBpZiAoY29udGVudFN0YXJ0ID49IG1heCkgewogICAgICAvLyB0cmltbWluZyBzcGFjZSBpbiAiLSAgICBcbiAgMyIgY2FzZSwgaW5kZW50IGlzIDEgaGVyZQogICAgICBpbmRlbnRBZnRlck1hcmtlciA9IDE7CiAgICB9IGVsc2UgewogICAgICBpbmRlbnRBZnRlck1hcmtlciA9IGNvbnRlbnRTdGFydCAtIHBvc0FmdGVyTWFya2VyOwogICAgfQoKICAgIC8vIElmIHdlIGhhdmUgbW9yZSB0aGFuIDQgc3BhY2VzLCB0aGUgaW5kZW50IGlzIDEKICAgIC8vICh0aGUgcmVzdCBpcyBqdXN0IGluZGVudGVkIGNvZGUgYmxvY2spCiAgICBpZiAoaW5kZW50QWZ0ZXJNYXJrZXIgPiA0KSB7IGluZGVudEFmdGVyTWFya2VyID0gMTsgfQoKICAgIC8vIElmIGluZGVudCBpcyBsZXNzIHRoYW4gMSwgYXNzdW1lIHRoYXQgaXQncyBvbmUsIGV4YW1wbGU6CiAgICAvLyAgIi1cbiAgdGVzdCIKICAgIGlmIChpbmRlbnRBZnRlck1hcmtlciA8IDEpIHsgaW5kZW50QWZ0ZXJNYXJrZXIgPSAxOyB9CgogICAgLy8gIiAgLSAgdGVzdCIKICAgIC8vICBeXl5eXiAtIGNhbGN1bGF0aW5nIHRvdGFsIGxlbmd0aCBvZiB0aGlzIHRoaW5nCiAgICBpbmRlbnQgPSAocG9zQWZ0ZXJNYXJrZXIgLSBzdGF0ZS5iTWFya3NbbmV4dExpbmVdKSArIGluZGVudEFmdGVyTWFya2VyOwoKICAgIC8vIFJ1biBzdWJwYXJzZXIgJiB3cml0ZSB0b2tlbnMKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgdHlwZTogJ2xpc3RfaXRlbV9vcGVuJywKICAgICAgbGluZXM6IGl0ZW1MaW5lcyA9IFsgc3RhcnRMaW5lLCAwIF0sCiAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbCsrCiAgICB9KTsKCiAgICBvbGRJbmRlbnQgPSBzdGF0ZS5ibGtJbmRlbnQ7CiAgICBvbGRUaWdodCA9IHN0YXRlLnRpZ2h0OwogICAgb2xkVFNoaWZ0ID0gc3RhdGUudFNoaWZ0W3N0YXJ0TGluZV07CiAgICBvbGRQYXJlbnRUeXBlID0gc3RhdGUucGFyZW50VHlwZTsKICAgIHN0YXRlLnRTaGlmdFtzdGFydExpbmVdID0gY29udGVudFN0YXJ0IC0gc3RhdGUuYk1hcmtzW3N0YXJ0TGluZV07CiAgICBzdGF0ZS5ibGtJbmRlbnQgPSBpbmRlbnQ7CiAgICBzdGF0ZS50aWdodCA9IHRydWU7CiAgICBzdGF0ZS5wYXJlbnRUeXBlID0gJ2xpc3QnOwoKICAgIHN0YXRlLnBhcnNlci50b2tlbml6ZShzdGF0ZSwgc3RhcnRMaW5lLCBlbmRMaW5lLCB0cnVlKTsKCiAgICAvLyBJZiBhbnkgb2YgbGlzdCBpdGVtIGlzIHRpZ2h0LCBtYXJrIGxpc3QgYXMgdGlnaHQKICAgIGlmICghc3RhdGUudGlnaHQgfHwgcHJldkVtcHR5RW5kKSB7CiAgICAgIHRpZ2h0ID0gZmFsc2U7CiAgICB9CiAgICAvLyBJdGVtIGJlY29tZSBsb29zZSBpZiBmaW5pc2ggd2l0aCBlbXB0eSBsaW5lLAogICAgLy8gYnV0IHdlIHNob3VsZCBmaWx0ZXIgbGFzdCBlbGVtZW50LCBiZWNhdXNlIGl0IG1lYW5zIGxpc3QgZmluaXNoCiAgICBwcmV2RW1wdHlFbmQgPSAoc3RhdGUubGluZSAtIHN0YXJ0TGluZSkgPiAxICYmIHN0YXRlLmlzRW1wdHkoc3RhdGUubGluZSAtIDEpOwoKICAgIHN0YXRlLmJsa0luZGVudCA9IG9sZEluZGVudDsKICAgIHN0YXRlLnRTaGlmdFtzdGFydExpbmVdID0gb2xkVFNoaWZ0OwogICAgc3RhdGUudGlnaHQgPSBvbGRUaWdodDsKICAgIHN0YXRlLnBhcmVudFR5cGUgPSBvbGRQYXJlbnRUeXBlOwoKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgdHlwZTogJ2xpc3RfaXRlbV9jbG9zZScsCiAgICAgIGxldmVsOiAtLXN0YXRlLmxldmVsCiAgICB9KTsKCiAgICBuZXh0TGluZSA9IHN0YXJ0TGluZSA9IHN0YXRlLmxpbmU7CiAgICBpdGVtTGluZXNbMV0gPSBuZXh0TGluZTsKICAgIGNvbnRlbnRTdGFydCA9IHN0YXRlLmJNYXJrc1tzdGFydExpbmVdOwoKICAgIGlmIChuZXh0TGluZSA+PSBlbmRMaW5lKSB7IGJyZWFrOyB9CgogICAgaWYgKHN0YXRlLmlzRW1wdHkobmV4dExpbmUpKSB7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIC8vCiAgICAvLyBUcnkgdG8gY2hlY2sgaWYgbGlzdCBpcyB0ZXJtaW5hdGVkIG9yIGNvbnRpbnVlZC4KICAgIC8vCiAgICBpZiAoc3RhdGUudFNoaWZ0W25leHRMaW5lXSA8IHN0YXRlLmJsa0luZGVudCkgeyBicmVhazsgfQoKICAgIC8vIGZhaWwgaWYgdGVybWluYXRpbmcgYmxvY2sgZm91bmQKICAgIHRlcm1pbmF0ZSA9IGZhbHNlOwogICAgZm9yIChpID0gMCwgbCA9IHRlcm1pbmF0b3JSdWxlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgaWYgKHRlcm1pbmF0b3JSdWxlc1tpXShzdGF0ZSwgbmV4dExpbmUsIGVuZExpbmUsIHRydWUpKSB7CiAgICAgICAgdGVybWluYXRlID0gdHJ1ZTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgaWYgKHRlcm1pbmF0ZSkgeyBicmVhazsgfQoKICAgIC8vIGZhaWwgaWYgbGlzdCBoYXMgYW5vdGhlciB0eXBlCiAgICBpZiAoaXNPcmRlcmVkKSB7CiAgICAgIHBvc0FmdGVyTWFya2VyID0gc2tpcE9yZGVyZWRMaXN0TWFya2VyKHN0YXRlLCBuZXh0TGluZSk7CiAgICAgIGlmIChwb3NBZnRlck1hcmtlciA8IDApIHsgYnJlYWs7IH0KICAgIH0gZWxzZSB7CiAgICAgIHBvc0FmdGVyTWFya2VyID0gc2tpcEJ1bGxldExpc3RNYXJrZXIoc3RhdGUsIG5leHRMaW5lKTsKICAgICAgaWYgKHBvc0FmdGVyTWFya2VyIDwgMCkgeyBicmVhazsgfQogICAgfQoKICAgIGlmIChtYXJrZXJDaGFyQ29kZSAhPT0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zQWZ0ZXJNYXJrZXIgLSAxKSkgeyBicmVhazsgfQogIH0KCiAgLy8gRmluaWxpemUgbGlzdAogIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgIHR5cGU6IGlzT3JkZXJlZCA/ICdvcmRlcmVkX2xpc3RfY2xvc2UnIDogJ2J1bGxldF9saXN0X2Nsb3NlJywKICAgIGxldmVsOiAtLXN0YXRlLmxldmVsCiAgfSk7CiAgbGlzdExpbmVzWzFdID0gbmV4dExpbmU7CgogIHN0YXRlLmxpbmUgPSBuZXh0TGluZTsKCiAgLy8gbWFyayBwYXJhZ3JhcGhzIHRpZ2h0IGlmIG5lZWRlZAogIGlmICh0aWdodCkgewogICAgbWFya1RpZ2h0UGFyYWdyYXBocyhzdGF0ZSwgbGlzdFRva0lkeCk7CiAgfQoKICByZXR1cm4gdHJ1ZTsKfTsKCn0se31dLDMxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gUGFyYWdyYXBoCgondXNlIHN0cmljdCc7CgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJhZ3JhcGgoc3RhdGUsIHN0YXJ0TGluZS8qLCBlbmRMaW5lKi8pIHsKICB2YXIgZW5kTGluZSwgY29udGVudCwgdGVybWluYXRlLCBpLCBsLAogICAgICBuZXh0TGluZSA9IHN0YXJ0TGluZSArIDEsCiAgICAgIHRlcm1pbmF0b3JSdWxlczsKCiAgZW5kTGluZSA9IHN0YXRlLmxpbmVNYXg7CgogIC8vIGp1bXAgbGluZS1ieS1saW5lIHVudGlsIGVtcHR5IG9uZSBvciBFT0YKICBpZiAobmV4dExpbmUgPCBlbmRMaW5lICYmICFzdGF0ZS5pc0VtcHR5KG5leHRMaW5lKSkgewogICAgdGVybWluYXRvclJ1bGVzID0gc3RhdGUucGFyc2VyLnJ1bGVyLmdldFJ1bGVzKCdwYXJhZ3JhcGgnKTsKCiAgICBmb3IgKDsgbmV4dExpbmUgPCBlbmRMaW5lICYmICFzdGF0ZS5pc0VtcHR5KG5leHRMaW5lKTsgbmV4dExpbmUrKykgewogICAgICAvLyB0aGlzIHdvdWxkIGJlIGEgY29kZSBibG9jayBub3JtYWxseSwgYnV0IGFmdGVyIHBhcmFncmFwaAogICAgICAvLyBpdCdzIGNvbnNpZGVyZWQgYSBsYXp5IGNvbnRpbnVhdGlvbiByZWdhcmRsZXNzIG9mIHdoYXQncyB0aGVyZQogICAgICBpZiAoc3RhdGUudFNoaWZ0W25leHRMaW5lXSAtIHN0YXRlLmJsa0luZGVudCA+IDMpIHsgY29udGludWU7IH0KCiAgICAgIC8vIFNvbWUgdGFncyBjYW4gdGVybWluYXRlIHBhcmFncmFwaCB3aXRob3V0IGVtcHR5IGxpbmUuCiAgICAgIHRlcm1pbmF0ZSA9IGZhbHNlOwogICAgICBmb3IgKGkgPSAwLCBsID0gdGVybWluYXRvclJ1bGVzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGlmICh0ZXJtaW5hdG9yUnVsZXNbaV0oc3RhdGUsIG5leHRMaW5lLCBlbmRMaW5lLCB0cnVlKSkgewogICAgICAgICAgdGVybWluYXRlID0gdHJ1ZTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGVybWluYXRlKSB7IGJyZWFrOyB9CiAgICB9CiAgfQoKICBjb250ZW50ID0gc3RhdGUuZ2V0TGluZXMoc3RhcnRMaW5lLCBuZXh0TGluZSwgc3RhdGUuYmxrSW5kZW50LCBmYWxzZSkudHJpbSgpOwoKICBzdGF0ZS5saW5lID0gbmV4dExpbmU7CiAgaWYgKGNvbnRlbnQubGVuZ3RoKSB7CiAgICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICAgIHR5cGU6ICdwYXJhZ3JhcGhfb3BlbicsCiAgICAgIHRpZ2h0OiBmYWxzZSwKICAgICAgbGluZXM6IFsgc3RhcnRMaW5lLCBzdGF0ZS5saW5lIF0sCiAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbAogICAgfSk7CiAgICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICAgIHR5cGU6ICdpbmxpbmUnLAogICAgICBjb250ZW50OiBjb250ZW50LAogICAgICBsZXZlbDogc3RhdGUubGV2ZWwgKyAxLAogICAgICBsaW5lczogWyBzdGFydExpbmUsIHN0YXRlLmxpbmUgXSwKICAgICAgY2hpbGRyZW46IFtdCiAgICB9KTsKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgdHlwZTogJ3BhcmFncmFwaF9jbG9zZScsCiAgICAgIHRpZ2h0OiBmYWxzZSwKICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgICB9KTsKICB9CgogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sMzI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBQYXJzZXIgc3RhdGUgY2xhc3MKCid1c2Ugc3RyaWN0JzsKCgpmdW5jdGlvbiBTdGF0ZUJsb2NrKHNyYywgcGFyc2VyLCBvcHRpb25zLCBlbnYsIHRva2VucykgewogIHZhciBjaCwgcywgc3RhcnQsIHBvcywgbGVuLCBpbmRlbnQsIGluZGVudF9mb3VuZDsKCiAgdGhpcy5zcmMgPSBzcmM7CgogIC8vIFNob3J0Y3V0cyB0byBzaW1wbGlmeSBuZXN0ZWQgY2FsbHMKICB0aGlzLnBhcnNlciA9IHBhcnNlcjsKCiAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKCiAgdGhpcy5lbnYgPSBlbnY7CgogIC8vCiAgLy8gSW50ZXJuYWwgc3RhdGUgdmFydGlhYmxlcwogIC8vCgogIHRoaXMudG9rZW5zID0gdG9rZW5zOwoKICB0aGlzLmJNYXJrcyA9IFtdOyAgLy8gbGluZSBiZWdpbiBvZmZzZXRzIGZvciBmYXN0IGp1bXBzCiAgdGhpcy5lTWFya3MgPSBbXTsgIC8vIGxpbmUgZW5kIG9mZnNldHMgZm9yIGZhc3QganVtcHMKICB0aGlzLnRTaGlmdCA9IFtdOyAgLy8gaW5kZW50IGZvciBlYWNoIGxpbmUKCiAgLy8gYmxvY2sgcGFyc2VyIHZhcmlhYmxlcwogIHRoaXMuYmxrSW5kZW50ICA9IDA7IC8vIHJlcXVpcmVkIGJsb2NrIGNvbnRlbnQgaW5kZW50CiAgICAgICAgICAgICAgICAgICAgICAgLy8gKGZvciBleGFtcGxlLCBpZiB3ZSBhcmUgaW4gbGlzdCkKICB0aGlzLmxpbmUgICAgICAgPSAwOyAvLyBsaW5lIGluZGV4IGluIHNyYwogIHRoaXMubGluZU1heCAgICA9IDA7IC8vIGxpbmVzIGNvdW50CiAgdGhpcy50aWdodCAgICAgID0gZmFsc2U7ICAvLyBsb29zZS90aWdodCBtb2RlIGZvciBsaXN0cwogIHRoaXMucGFyZW50VHlwZSA9ICdyb290JzsgLy8gaWYgYGxpc3RgLCBibG9jayBwYXJzZXIgc3RvcHMgb24gdHdvIG5ld2xpbmVzCiAgdGhpcy5kZEluZGVudCAgID0gLTE7IC8vIGluZGVudCBvZiB0aGUgY3VycmVudCBkZCBibG9jayAoLTEgaWYgdGhlcmUgaXNuJ3QgYW55KQoKICB0aGlzLmxldmVsID0gMDsKCiAgLy8gcmVuZGVyZXIKICB0aGlzLnJlc3VsdCA9ICcnOwoKICAvLyBDcmVhdGUgY2FjaGVzCiAgLy8gR2VuZXJhdGUgbWFya2Vycy4KICBzID0gdGhpcy5zcmM7CiAgaW5kZW50ID0gMDsKICBpbmRlbnRfZm91bmQgPSBmYWxzZTsKCiAgZm9yIChzdGFydCA9IHBvcyA9IGluZGVudCA9IDAsIGxlbiA9IHMubGVuZ3RoOyBwb3MgPCBsZW47IHBvcysrKSB7CiAgICBjaCA9IHMuY2hhckNvZGVBdChwb3MpOwoKICAgIGlmICghaW5kZW50X2ZvdW5kKSB7CiAgICAgIGlmIChjaCA9PT0gMHgyMC8qIHNwYWNlICovKSB7CiAgICAgICAgaW5kZW50Kys7CiAgICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaW5kZW50X2ZvdW5kID0gdHJ1ZTsKICAgICAgfQogICAgfQoKICAgIGlmIChjaCA9PT0gMHgwQSB8fCBwb3MgPT09IGxlbiAtIDEpIHsKICAgICAgaWYgKGNoICE9PSAweDBBKSB7IHBvcysrOyB9CiAgICAgIHRoaXMuYk1hcmtzLnB1c2goc3RhcnQpOwogICAgICB0aGlzLmVNYXJrcy5wdXNoKHBvcyk7CiAgICAgIHRoaXMudFNoaWZ0LnB1c2goaW5kZW50KTsKCiAgICAgIGluZGVudF9mb3VuZCA9IGZhbHNlOwogICAgICBpbmRlbnQgPSAwOwogICAgICBzdGFydCA9IHBvcyArIDE7CiAgICB9CiAgfQoKICAvLyBQdXNoIGZha2UgZW50cnkgdG8gc2ltcGxpZnkgY2FjaGUgYm91bmRzIGNoZWNrcwogIHRoaXMuYk1hcmtzLnB1c2gocy5sZW5ndGgpOwogIHRoaXMuZU1hcmtzLnB1c2gocy5sZW5ndGgpOwogIHRoaXMudFNoaWZ0LnB1c2goMCk7CgogIHRoaXMubGluZU1heCA9IHRoaXMuYk1hcmtzLmxlbmd0aCAtIDE7IC8vIGRvbid0IGNvdW50IGxhc3QgZmFrZSBsaW5lCn0KClN0YXRlQmxvY2sucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiBpc0VtcHR5KGxpbmUpIHsKICByZXR1cm4gdGhpcy5iTWFya3NbbGluZV0gKyB0aGlzLnRTaGlmdFtsaW5lXSA+PSB0aGlzLmVNYXJrc1tsaW5lXTsKfTsKClN0YXRlQmxvY2sucHJvdG90eXBlLnNraXBFbXB0eUxpbmVzID0gZnVuY3Rpb24gc2tpcEVtcHR5TGluZXMoZnJvbSkgewogIGZvciAodmFyIG1heCA9IHRoaXMubGluZU1heDsgZnJvbSA8IG1heDsgZnJvbSsrKSB7CiAgICBpZiAodGhpcy5iTWFya3NbZnJvbV0gKyB0aGlzLnRTaGlmdFtmcm9tXSA8IHRoaXMuZU1hcmtzW2Zyb21dKSB7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gZnJvbTsKfTsKCi8vIFNraXAgc3BhY2VzIGZyb20gZ2l2ZW4gcG9zaXRpb24uClN0YXRlQmxvY2sucHJvdG90eXBlLnNraXBTcGFjZXMgPSBmdW5jdGlvbiBza2lwU3BhY2VzKHBvcykgewogIGZvciAodmFyIG1heCA9IHRoaXMuc3JjLmxlbmd0aDsgcG9zIDwgbWF4OyBwb3MrKykgewogICAgaWYgKHRoaXMuc3JjLmNoYXJDb2RlQXQocG9zKSAhPT0gMHgyMC8qIHNwYWNlICovKSB7IGJyZWFrOyB9CiAgfQogIHJldHVybiBwb3M7Cn07CgovLyBTa2lwIGNoYXIgY29kZXMgZnJvbSBnaXZlbiBwb3NpdGlvbgpTdGF0ZUJsb2NrLnByb3RvdHlwZS5za2lwQ2hhcnMgPSBmdW5jdGlvbiBza2lwQ2hhcnMocG9zLCBjb2RlKSB7CiAgZm9yICh2YXIgbWF4ID0gdGhpcy5zcmMubGVuZ3RoOyBwb3MgPCBtYXg7IHBvcysrKSB7CiAgICBpZiAodGhpcy5zcmMuY2hhckNvZGVBdChwb3MpICE9PSBjb2RlKSB7IGJyZWFrOyB9CiAgfQogIHJldHVybiBwb3M7Cn07CgovLyBTa2lwIGNoYXIgY29kZXMgcmV2ZXJzZSBmcm9tIGdpdmVuIHBvc2l0aW9uIC0gMQpTdGF0ZUJsb2NrLnByb3RvdHlwZS5za2lwQ2hhcnNCYWNrID0gZnVuY3Rpb24gc2tpcENoYXJzQmFjayhwb3MsIGNvZGUsIG1pbikgewogIGlmIChwb3MgPD0gbWluKSB7IHJldHVybiBwb3M7IH0KCiAgd2hpbGUgKHBvcyA+IG1pbikgewogICAgaWYgKGNvZGUgIT09IHRoaXMuc3JjLmNoYXJDb2RlQXQoLS1wb3MpKSB7IHJldHVybiBwb3MgKyAxOyB9CiAgfQogIHJldHVybiBwb3M7Cn07CgovLyBjdXQgbGluZXMgcmFuZ2UgZnJvbSBzb3VyY2UuClN0YXRlQmxvY2sucHJvdG90eXBlLmdldExpbmVzID0gZnVuY3Rpb24gZ2V0TGluZXMoYmVnaW4sIGVuZCwgaW5kZW50LCBrZWVwTGFzdExGKSB7CiAgdmFyIGksIGZpcnN0LCBsYXN0LCBxdWV1ZSwgc2hpZnQsCiAgICAgIGxpbmUgPSBiZWdpbjsKCiAgaWYgKGJlZ2luID49IGVuZCkgewogICAgcmV0dXJuICcnOwogIH0KCiAgLy8gT3B0OiBkb24ndCB1c2UgcHVzaCBxdWV1ZSBmb3Igc2luZ2xlIGxpbmU7CiAgaWYgKGxpbmUgKyAxID09PSBlbmQpIHsKICAgIGZpcnN0ID0gdGhpcy5iTWFya3NbbGluZV0gKyBNYXRoLm1pbih0aGlzLnRTaGlmdFtsaW5lXSwgaW5kZW50KTsKICAgIGxhc3QgPSBrZWVwTGFzdExGID8gdGhpcy5lTWFya3NbbGluZV0gKyAxIDogdGhpcy5lTWFya3NbbGluZV07CiAgICByZXR1cm4gdGhpcy5zcmMuc2xpY2UoZmlyc3QsIGxhc3QpOwogIH0KCiAgcXVldWUgPSBuZXcgQXJyYXkoZW5kIC0gYmVnaW4pOwoKICBmb3IgKGkgPSAwOyBsaW5lIDwgZW5kOyBsaW5lKyssIGkrKykgewogICAgc2hpZnQgPSB0aGlzLnRTaGlmdFtsaW5lXTsKICAgIGlmIChzaGlmdCA+IGluZGVudCkgeyBzaGlmdCA9IGluZGVudDsgfQogICAgaWYgKHNoaWZ0IDwgMCkgeyBzaGlmdCA9IDA7IH0KCiAgICBmaXJzdCA9IHRoaXMuYk1hcmtzW2xpbmVdICsgc2hpZnQ7CgogICAgaWYgKGxpbmUgKyAxIDwgZW5kIHx8IGtlZXBMYXN0TEYpIHsKICAgICAgLy8gTm8gbmVlZCBmb3IgYm91bmRzIGNoZWNrIGJlY2F1c2Ugd2UgaGF2ZSBmYWtlIGVudHJ5IG9uIHRhaWwuCiAgICAgIGxhc3QgPSB0aGlzLmVNYXJrc1tsaW5lXSArIDE7CiAgICB9IGVsc2UgewogICAgICBsYXN0ID0gdGhpcy5lTWFya3NbbGluZV07CiAgICB9CgogICAgcXVldWVbaV0gPSB0aGlzLnNyYy5zbGljZShmaXJzdCwgbGFzdCk7CiAgfQoKICByZXR1cm4gcXVldWUuam9pbignJyk7Cn07CgoKbW9kdWxlLmV4cG9ydHMgPSBTdGF0ZUJsb2NrOwoKfSx7fV0sMzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBHRk0gdGFibGUsIG5vbi1zdGFuZGFyZAoKJ3VzZSBzdHJpY3QnOwoKCmZ1bmN0aW9uIGdldExpbmUoc3RhdGUsIGxpbmUpIHsKICB2YXIgcG9zID0gc3RhdGUuYk1hcmtzW2xpbmVdICsgc3RhdGUuYmxrSW5kZW50LAogICAgICBtYXggPSBzdGF0ZS5lTWFya3NbbGluZV07CgogIHJldHVybiBzdGF0ZS5zcmMuc3Vic3RyKHBvcywgbWF4IC0gcG9zKTsKfQoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGFibGUoc3RhdGUsIHN0YXJ0TGluZSwgZW5kTGluZSwgc2lsZW50KSB7CiAgdmFyIGNoLCBsaW5lVGV4dCwgcG9zLCBpLCBuZXh0TGluZSwgcm93cywKICAgICAgYWxpZ25zLCB0LCB0YWJsZUxpbmVzLCB0Ym9keUxpbmVzOwoKICAvLyBzaG91bGQgaGF2ZSBhdCBsZWFzdCB0aHJlZSBsaW5lcwogIGlmIChzdGFydExpbmUgKyAyID4gZW5kTGluZSkgeyByZXR1cm4gZmFsc2U7IH0KCiAgbmV4dExpbmUgPSBzdGFydExpbmUgKyAxOwoKICBpZiAoc3RhdGUudFNoaWZ0W25leHRMaW5lXSA8IHN0YXRlLmJsa0luZGVudCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgLy8gZmlyc3QgY2hhcmFjdGVyIG9mIHRoZSBzZWNvbmQgbGluZSBzaG91bGQgYmUgJ3wnIG9yICctJwoKICBwb3MgPSBzdGF0ZS5iTWFya3NbbmV4dExpbmVdICsgc3RhdGUudFNoaWZ0W25leHRMaW5lXTsKICBpZiAocG9zID49IHN0YXRlLmVNYXJrc1tuZXh0TGluZV0pIHsgcmV0dXJuIGZhbHNlOyB9CgogIGNoID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKTsKICBpZiAoY2ggIT09IDB4N0MvKiB8ICovICYmIGNoICE9PSAweDJELyogLSAqLyAmJiBjaCAhPT0gMHgzQS8qIDogKi8pIHsgcmV0dXJuIGZhbHNlOyB9CgogIGxpbmVUZXh0ID0gZ2V0TGluZShzdGF0ZSwgc3RhcnRMaW5lICsgMSk7CiAgaWYgKCEvXlstOnwgXSskLy50ZXN0KGxpbmVUZXh0KSkgeyByZXR1cm4gZmFsc2U7IH0KCiAgcm93cyA9IGxpbmVUZXh0LnNwbGl0KCd8Jyk7CiAgaWYgKHJvd3MgPD0gMikgeyByZXR1cm4gZmFsc2U7IH0KICBhbGlnbnMgPSBbXTsKICBmb3IgKGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykgewogICAgdCA9IHJvd3NbaV0udHJpbSgpOwogICAgaWYgKCF0KSB7CiAgICAgIC8vIGFsbG93IGVtcHR5IGNvbHVtbnMgYmVmb3JlIGFuZCBhZnRlciB0YWJsZSwgYnV0IG5vdCBpbiBiZXR3ZWVuIGNvbHVtbnM7CiAgICAgIC8vIGUuZy4gYWxsb3cgYCB8LS0tfCBgLCBkaXNhbGxvdyBgIC0tLXx8LS0tIGAKICAgICAgaWYgKGkgPT09IDAgfHwgaSA9PT0gcm93cy5sZW5ndGggLSAxKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgaWYgKCEvXjo/LSs6PyQvLnRlc3QodCkpIHsgcmV0dXJuIGZhbHNlOyB9CiAgICBpZiAodC5jaGFyQ29kZUF0KHQubGVuZ3RoIC0gMSkgPT09IDB4M0EvKiA6ICovKSB7CiAgICAgIGFsaWducy5wdXNoKHQuY2hhckNvZGVBdCgwKSA9PT0gMHgzQS8qIDogKi8gPyAnY2VudGVyJyA6ICdyaWdodCcpOwogICAgfSBlbHNlIGlmICh0LmNoYXJDb2RlQXQoMCkgPT09IDB4M0EvKiA6ICovKSB7CiAgICAgIGFsaWducy5wdXNoKCdsZWZ0Jyk7CiAgICB9IGVsc2UgewogICAgICBhbGlnbnMucHVzaCgnJyk7CiAgICB9CiAgfQoKICBsaW5lVGV4dCA9IGdldExpbmUoc3RhdGUsIHN0YXJ0TGluZSkudHJpbSgpOwogIGlmIChsaW5lVGV4dC5pbmRleE9mKCd8JykgPT09IC0xKSB7IHJldHVybiBmYWxzZTsgfQogIHJvd3MgPSBsaW5lVGV4dC5yZXBsYWNlKC9eXHx8XHwkL2csICcnKS5zcGxpdCgnfCcpOwogIGlmIChhbGlnbnMubGVuZ3RoICE9PSByb3dzLmxlbmd0aCkgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc2lsZW50KSB7IHJldHVybiB0cnVlOyB9CgogIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgIHR5cGU6ICd0YWJsZV9vcGVuJywKICAgIGxpbmVzOiB0YWJsZUxpbmVzID0gWyBzdGFydExpbmUsIDAgXSwKICAgIGxldmVsOiBzdGF0ZS5sZXZlbCsrCiAgfSk7CiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ3RoZWFkX29wZW4nLAogICAgbGluZXM6IFsgc3RhcnRMaW5lLCBzdGFydExpbmUgKyAxIF0sCiAgICBsZXZlbDogc3RhdGUubGV2ZWwrKwogIH0pOwoKICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICB0eXBlOiAndHJfb3BlbicsCiAgICBsaW5lczogWyBzdGFydExpbmUsIHN0YXJ0TGluZSArIDEgXSwKICAgIGxldmVsOiBzdGF0ZS5sZXZlbCsrCiAgfSk7CiAgZm9yIChpID0gMDsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHsKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgdHlwZTogJ3RoX29wZW4nLAogICAgICBhbGlnbjogYWxpZ25zW2ldLAogICAgICBsaW5lczogWyBzdGFydExpbmUsIHN0YXJ0TGluZSArIDEgXSwKICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsKysKICAgIH0pOwogICAgc3RhdGUudG9rZW5zLnB1c2goewogICAgICB0eXBlOiAnaW5saW5lJywKICAgICAgY29udGVudDogcm93c1tpXS50cmltKCksCiAgICAgIGxpbmVzOiBbIHN0YXJ0TGluZSwgc3RhcnRMaW5lICsgMSBdLAogICAgICBsZXZlbDogc3RhdGUubGV2ZWwsCiAgICAgIGNoaWxkcmVuOiBbXQogICAgfSk7CiAgICBzdGF0ZS50b2tlbnMucHVzaCh7IHR5cGU6ICd0aF9jbG9zZScsIGxldmVsOiAtLXN0YXRlLmxldmVsIH0pOwogIH0KICBzdGF0ZS50b2tlbnMucHVzaCh7IHR5cGU6ICd0cl9jbG9zZScsIGxldmVsOiAtLXN0YXRlLmxldmVsIH0pOwogIHN0YXRlLnRva2Vucy5wdXNoKHsgdHlwZTogJ3RoZWFkX2Nsb3NlJywgbGV2ZWw6IC0tc3RhdGUubGV2ZWwgfSk7CgogIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgIHR5cGU6ICd0Ym9keV9vcGVuJywKICAgIGxpbmVzOiB0Ym9keUxpbmVzID0gWyBzdGFydExpbmUgKyAyLCAwIF0sCiAgICBsZXZlbDogc3RhdGUubGV2ZWwrKwogIH0pOwoKICBmb3IgKG5leHRMaW5lID0gc3RhcnRMaW5lICsgMjsgbmV4dExpbmUgPCBlbmRMaW5lOyBuZXh0TGluZSsrKSB7CiAgICBpZiAoc3RhdGUudFNoaWZ0W25leHRMaW5lXSA8IHN0YXRlLmJsa0luZGVudCkgeyBicmVhazsgfQoKICAgIGxpbmVUZXh0ID0gZ2V0TGluZShzdGF0ZSwgbmV4dExpbmUpLnRyaW0oKTsKICAgIGlmIChsaW5lVGV4dC5pbmRleE9mKCd8JykgPT09IC0xKSB7IGJyZWFrOyB9CiAgICByb3dzID0gbGluZVRleHQucmVwbGFjZSgvXlx8fFx8JC9nLCAnJykuc3BsaXQoJ3wnKTsKCiAgICBzdGF0ZS50b2tlbnMucHVzaCh7IHR5cGU6ICd0cl9vcGVuJywgbGV2ZWw6IHN0YXRlLmxldmVsKysgfSk7CiAgICBmb3IgKGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykgewogICAgICBzdGF0ZS50b2tlbnMucHVzaCh7IHR5cGU6ICd0ZF9vcGVuJywgYWxpZ246IGFsaWduc1tpXSwgbGV2ZWw6IHN0YXRlLmxldmVsKysgfSk7CiAgICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgICB0eXBlOiAnaW5saW5lJywKICAgICAgICBjb250ZW50OiByb3dzW2ldLnJlcGxhY2UoL15cfD8gKnwgKlx8PyQvZywgJycpLAogICAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbCwKICAgICAgICBjaGlsZHJlbjogW10KICAgICAgfSk7CiAgICAgIHN0YXRlLnRva2Vucy5wdXNoKHsgdHlwZTogJ3RkX2Nsb3NlJywgbGV2ZWw6IC0tc3RhdGUubGV2ZWwgfSk7CiAgICB9CiAgICBzdGF0ZS50b2tlbnMucHVzaCh7IHR5cGU6ICd0cl9jbG9zZScsIGxldmVsOiAtLXN0YXRlLmxldmVsIH0pOwogIH0KICBzdGF0ZS50b2tlbnMucHVzaCh7IHR5cGU6ICd0Ym9keV9jbG9zZScsIGxldmVsOiAtLXN0YXRlLmxldmVsIH0pOwogIHN0YXRlLnRva2Vucy5wdXNoKHsgdHlwZTogJ3RhYmxlX2Nsb3NlJywgbGV2ZWw6IC0tc3RhdGUubGV2ZWwgfSk7CgogIHRhYmxlTGluZXNbMV0gPSB0Ym9keUxpbmVzWzFdID0gbmV4dExpbmU7CiAgc3RhdGUubGluZSA9IG5leHRMaW5lOwogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sMzQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBQYXJzZSBhYmJyZXZpYXRpb24gZGVmaW5pdGlvbnMsIGkuZS4gYCpbYWJicl06IGRlc2NyaXB0aW9uYAovLwoKJ3VzZSBzdHJpY3QnOwoKCnZhciBTdGF0ZUlubGluZSAgICA9IHJlcXVpcmUoJy4uL3J1bGVzX2lubGluZS9zdGF0ZV9pbmxpbmUnKTsKdmFyIHBhcnNlTGlua0xhYmVsID0gcmVxdWlyZSgnLi4vaGVscGVycy9wYXJzZV9saW5rX2xhYmVsJyk7CgoKZnVuY3Rpb24gcGFyc2VBYmJyKHN0ciwgcGFyc2VySW5saW5lLCBvcHRpb25zLCBlbnYpIHsKICB2YXIgc3RhdGUsIGxhYmVsRW5kLCBwb3MsIG1heCwgbGFiZWwsIHRpdGxlOwoKICBpZiAoc3RyLmNoYXJDb2RlQXQoMCkgIT09IDB4MkEvKiAqICovKSB7IHJldHVybiAtMTsgfQogIGlmIChzdHIuY2hhckNvZGVBdCgxKSAhPT0gMHg1Qi8qIFsgKi8pIHsgcmV0dXJuIC0xOyB9CgogIGlmIChzdHIuaW5kZXhPZignXTonKSA9PT0gLTEpIHsgcmV0dXJuIC0xOyB9CgogIHN0YXRlID0gbmV3IFN0YXRlSW5saW5lKHN0ciwgcGFyc2VySW5saW5lLCBvcHRpb25zLCBlbnYsIFtdKTsKICBsYWJlbEVuZCA9IHBhcnNlTGlua0xhYmVsKHN0YXRlLCAxKTsKCiAgaWYgKGxhYmVsRW5kIDwgMCB8fCBzdHIuY2hhckNvZGVBdChsYWJlbEVuZCArIDEpICE9PSAweDNBLyogOiAqLykgeyByZXR1cm4gLTE7IH0KCiAgbWF4ID0gc3RhdGUucG9zTWF4OwoKICAvLyBhYmJyIHRpdGxlIGlzIGFsd2F5cyBvbmUgbGluZSwgc28gbG9va2luZyBmb3IgZW5kaW5nICJcbiIgaGVyZQogIGZvciAocG9zID0gbGFiZWxFbmQgKyAyOyBwb3MgPCBtYXg7IHBvcysrKSB7CiAgICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gMHgwQSkgeyBicmVhazsgfQogIH0KCiAgbGFiZWwgPSBzdHIuc2xpY2UoMiwgbGFiZWxFbmQpOwogIHRpdGxlID0gc3RyLnNsaWNlKGxhYmVsRW5kICsgMiwgcG9zKS50cmltKCk7CiAgaWYgKHRpdGxlLmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gLTE7IH0KICBpZiAoIWVudi5hYmJyZXZpYXRpb25zKSB7IGVudi5hYmJyZXZpYXRpb25zID0ge307IH0KICAvLyBwcmVwZW5kICc6JyB0byBhdm9pZCBjb25mbGljdCB3aXRoIE9iamVjdC5wcm90b3R5cGUgbWVtYmVycwogIGlmICh0eXBlb2YgZW52LmFiYnJldmlhdGlvbnNbJzonICsgbGFiZWxdID09PSAndW5kZWZpbmVkJykgewogICAgZW52LmFiYnJldmlhdGlvbnNbJzonICsgbGFiZWxdID0gdGl0bGU7CiAgfQoKICByZXR1cm4gcG9zOwp9Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGFiYnIoc3RhdGUpIHsKICB2YXIgdG9rZW5zID0gc3RhdGUudG9rZW5zLCBpLCBsLCBjb250ZW50LCBwb3M7CgogIGlmIChzdGF0ZS5pbmxpbmVNb2RlKSB7CiAgICByZXR1cm47CiAgfQoKICAvLyBQYXJzZSBpbmxpbmVzCiAgZm9yIChpID0gMSwgbCA9IHRva2Vucy5sZW5ndGggLSAxOyBpIDwgbDsgaSsrKSB7CiAgICBpZiAodG9rZW5zW2kgLSAxXS50eXBlID09PSAncGFyYWdyYXBoX29wZW4nICYmCiAgICAgICAgdG9rZW5zW2ldLnR5cGUgPT09ICdpbmxpbmUnICYmCiAgICAgICAgdG9rZW5zW2kgKyAxXS50eXBlID09PSAncGFyYWdyYXBoX2Nsb3NlJykgewoKICAgICAgY29udGVudCA9IHRva2Vuc1tpXS5jb250ZW50OwogICAgICB3aGlsZSAoY29udGVudC5sZW5ndGgpIHsKICAgICAgICBwb3MgPSBwYXJzZUFiYnIoY29udGVudCwgc3RhdGUuaW5saW5lLCBzdGF0ZS5vcHRpb25zLCBzdGF0ZS5lbnYpOwogICAgICAgIGlmIChwb3MgPCAwKSB7IGJyZWFrOyB9CiAgICAgICAgY29udGVudCA9IGNvbnRlbnQuc2xpY2UocG9zKS50cmltKCk7CiAgICAgIH0KCiAgICAgIHRva2Vuc1tpXS5jb250ZW50ID0gY29udGVudDsKICAgICAgaWYgKCFjb250ZW50Lmxlbmd0aCkgewogICAgICAgIHRva2Vuc1tpIC0gMV0udGlnaHQgPSB0cnVlOwogICAgICAgIHRva2Vuc1tpICsgMV0udGlnaHQgPSB0cnVlOwogICAgICB9CiAgICB9CiAgfQp9OwoKfSx7Ii4uL2hlbHBlcnMvcGFyc2VfbGlua19sYWJlbCI6MTIsIi4uL3J1bGVzX2lubGluZS9zdGF0ZV9pbmxpbmUiOjU2fV0sMzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBFbmNsb3NlIGFiYnJldmlhdGlvbnMgaW4gPGFiYnI+IHRhZ3MKLy8KJ3VzZSBzdHJpY3QnOwoKCnZhciBQVU5DVF9DSEFSUyA9ICcgXG4oKVtdXCciLiwhPy0nOwoKCi8vIGZyb20gR29vZ2xlIGNsb3N1cmUgbGlicmFyeQovLyBodHRwOi8vY2xvc3VyZS1saWJyYXJ5Lmdvb2dsZWNvZGUuY29tL2dpdC1oaXN0b3J5L2RvY3MvbG9jYWxfY2xvc3VyZV9nb29nX3N0cmluZ19zdHJpbmcuanMuc291cmNlLmh0bWwjbGluZTEwMjEKZnVuY3Rpb24gcmVnRXNjYXBlKHMpIHsKICByZXR1cm4gcy5yZXBsYWNlKC8oWy0oKVxbXF17fSs/Ki4kXF58LDojPCFcXF0pL2csICdcXCQxJyk7Cn0KCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGFiYnIyKHN0YXRlKSB7CiAgdmFyIGksIGosIGwsIHRva2VucywgdG9rZW4sIHRleHQsIG5vZGVzLCBwb3MsIGxldmVsLCByZWcsIG0sIHJlZ1RleHQsCiAgICAgIGJsb2NrVG9rZW5zID0gc3RhdGUudG9rZW5zOwoKICBpZiAoIXN0YXRlLmVudi5hYmJyZXZpYXRpb25zKSB7IHJldHVybjsgfQogIGlmICghc3RhdGUuZW52LmFiYnJSZWdFeHApIHsKICAgIHJlZ1RleHQgPSAnKF58WycgKyBQVU5DVF9DSEFSUy5zcGxpdCgnJykubWFwKHJlZ0VzY2FwZSkuam9pbignJykgKyAnXSknCiAgICAgICAgICAgICsgJygnICsgT2JqZWN0LmtleXMoc3RhdGUuZW52LmFiYnJldmlhdGlvbnMpLm1hcChmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHguc3Vic3RyKDEpOwogICAgICAgICAgICAgICAgICAgIH0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiLmxlbmd0aCAtIGEubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIH0pLm1hcChyZWdFc2NhcGUpLmpvaW4oJ3wnKSArICcpJwogICAgICAgICAgICArICcoJHxbJyArIFBVTkNUX0NIQVJTLnNwbGl0KCcnKS5tYXAocmVnRXNjYXBlKS5qb2luKCcnKSArICddKSc7CiAgICBzdGF0ZS5lbnYuYWJiclJlZ0V4cCA9IG5ldyBSZWdFeHAocmVnVGV4dCwgJ2cnKTsKICB9CiAgcmVnID0gc3RhdGUuZW52LmFiYnJSZWdFeHA7CgogIGZvciAoaiA9IDAsIGwgPSBibG9ja1Rva2Vucy5sZW5ndGg7IGogPCBsOyBqKyspIHsKICAgIGlmIChibG9ja1Rva2Vuc1tqXS50eXBlICE9PSAnaW5saW5lJykgeyBjb250aW51ZTsgfQogICAgdG9rZW5zID0gYmxvY2tUb2tlbnNbal0uY2hpbGRyZW47CgogICAgLy8gV2Ugc2NhbiBmcm9tIHRoZSBlbmQsIHRvIGtlZXAgcG9zaXRpb24gd2hlbiBuZXcgdGFncyBhZGRlZC4KICAgIGZvciAoaSA9IHRva2Vucy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICB0b2tlbiA9IHRva2Vuc1tpXTsKICAgICAgaWYgKHRva2VuLnR5cGUgIT09ICd0ZXh0JykgeyBjb250aW51ZTsgfQoKICAgICAgcG9zID0gMDsKICAgICAgdGV4dCA9IHRva2VuLmNvbnRlbnQ7CiAgICAgIHJlZy5sYXN0SW5kZXggPSAwOwogICAgICBsZXZlbCA9IHRva2VuLmxldmVsOwogICAgICBub2RlcyA9IFtdOwoKICAgICAgd2hpbGUgKChtID0gcmVnLmV4ZWModGV4dCkpKSB7CiAgICAgICAgaWYgKHJlZy5sYXN0SW5kZXggPiBwb3MpIHsKICAgICAgICAgIG5vZGVzLnB1c2goewogICAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICAgIGNvbnRlbnQ6IHRleHQuc2xpY2UocG9zLCBtLmluZGV4ICsgbVsxXS5sZW5ndGgpLAogICAgICAgICAgICBsZXZlbDogbGV2ZWwKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgbm9kZXMucHVzaCh7CiAgICAgICAgICB0eXBlOiAnYWJicl9vcGVuJywKICAgICAgICAgIHRpdGxlOiBzdGF0ZS5lbnYuYWJicmV2aWF0aW9uc1snOicgKyBtWzJdXSwKICAgICAgICAgIGxldmVsOiBsZXZlbCsrCiAgICAgICAgfSk7CiAgICAgICAgbm9kZXMucHVzaCh7CiAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICBjb250ZW50OiBtWzJdLAogICAgICAgICAgbGV2ZWw6IGxldmVsCiAgICAgICAgfSk7CiAgICAgICAgbm9kZXMucHVzaCh7CiAgICAgICAgICB0eXBlOiAnYWJicl9jbG9zZScsCiAgICAgICAgICBsZXZlbDogLS1sZXZlbAogICAgICAgIH0pOwogICAgICAgIHBvcyA9IHJlZy5sYXN0SW5kZXggLSBtWzNdLmxlbmd0aDsKICAgICAgfQoKICAgICAgaWYgKCFub2Rlcy5sZW5ndGgpIHsgY29udGludWU7IH0KCiAgICAgIGlmIChwb3MgPCB0ZXh0Lmxlbmd0aCkgewogICAgICAgIG5vZGVzLnB1c2goewogICAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgICAgY29udGVudDogdGV4dC5zbGljZShwb3MpLAogICAgICAgICAgbGV2ZWw6IGxldmVsCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIC8vIHJlcGxhY2UgY3VycmVudCBub2RlCiAgICAgIGJsb2NrVG9rZW5zW2pdLmNoaWxkcmVuID0gdG9rZW5zID0gW10uY29uY2F0KHRva2Vucy5zbGljZSgwLCBpKSwgbm9kZXMsIHRva2Vucy5zbGljZShpICsgMSkpOwogICAgfQogIH0KfTsKCn0se31dLDM2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBibG9jayhzdGF0ZSkgewoKICBpZiAoc3RhdGUuaW5saW5lTW9kZSkgewogICAgc3RhdGUudG9rZW5zLnB1c2goewogICAgICB0eXBlOiAnaW5saW5lJywKICAgICAgY29udGVudDogc3RhdGUuc3JjLnJlcGxhY2UoL1xuL2csICcgJykudHJpbSgpLAogICAgICBsZXZlbDogMCwKICAgICAgbGluZXM6IFsgMCwgMSBdLAogICAgICBjaGlsZHJlbjogW10KICAgIH0pOwoKICB9IGVsc2UgewogICAgc3RhdGUuYmxvY2sucGFyc2Uoc3RhdGUuc3JjLCBzdGF0ZS5vcHRpb25zLCBzdGF0ZS5lbnYsIHN0YXRlLnRva2Vucyk7CiAgfQp9OwoKfSx7fV0sMzc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBmb290bm90ZV9ibG9jayhzdGF0ZSkgewogIHZhciBpLCBsLCBqLCB0LCBsYXN0UGFyYWdyYXBoLCBsaXN0LCB0b2tlbnMsIGN1cnJlbnQsIGN1cnJlbnRMYWJlbCwKICAgICAgbGV2ZWwgPSAwLAogICAgICBpbnNpZGVSZWYgPSBmYWxzZSwKICAgICAgcmVmVG9rZW5zID0ge307CgogIGlmICghc3RhdGUuZW52LmZvb3Rub3RlcykgeyByZXR1cm47IH0KCiAgc3RhdGUudG9rZW5zID0gc3RhdGUudG9rZW5zLmZpbHRlcihmdW5jdGlvbih0b2spIHsKICAgIGlmICh0b2sudHlwZSA9PT0gJ2Zvb3Rub3RlX3JlZmVyZW5jZV9vcGVuJykgewogICAgICBpbnNpZGVSZWYgPSB0cnVlOwogICAgICBjdXJyZW50ID0gW107CiAgICAgIGN1cnJlbnRMYWJlbCA9IHRvay5sYWJlbDsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKHRvay50eXBlID09PSAnZm9vdG5vdGVfcmVmZXJlbmNlX2Nsb3NlJykgewogICAgICBpbnNpZGVSZWYgPSBmYWxzZTsKICAgICAgLy8gcHJlcGVuZCAnOicgdG8gYXZvaWQgY29uZmxpY3Qgd2l0aCBPYmplY3QucHJvdG90eXBlIG1lbWJlcnMKICAgICAgcmVmVG9rZW5zWyc6JyArIGN1cnJlbnRMYWJlbF0gPSBjdXJyZW50OwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAoaW5zaWRlUmVmKSB7IGN1cnJlbnQucHVzaCh0b2spOyB9CiAgICByZXR1cm4gIWluc2lkZVJlZjsKICB9KTsKCiAgaWYgKCFzdGF0ZS5lbnYuZm9vdG5vdGVzLmxpc3QpIHsgcmV0dXJuOyB9CiAgbGlzdCA9IHN0YXRlLmVudi5mb290bm90ZXMubGlzdDsKCiAgc3RhdGUudG9rZW5zLnB1c2goewogICAgdHlwZTogJ2Zvb3Rub3RlX2Jsb2NrX29wZW4nLAogICAgbGV2ZWw6IGxldmVsKysKICB9KTsKICBmb3IgKGkgPSAwLCBsID0gbGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgdHlwZTogJ2Zvb3Rub3RlX29wZW4nLAogICAgICBpZDogaSwKICAgICAgbGV2ZWw6IGxldmVsKysKICAgIH0pOwoKICAgIGlmIChsaXN0W2ldLnRva2VucykgewogICAgICB0b2tlbnMgPSBbXTsKICAgICAgdG9rZW5zLnB1c2goewogICAgICAgIHR5cGU6ICdwYXJhZ3JhcGhfb3BlbicsCiAgICAgICAgdGlnaHQ6IGZhbHNlLAogICAgICAgIGxldmVsOiBsZXZlbCsrCiAgICAgIH0pOwogICAgICB0b2tlbnMucHVzaCh7CiAgICAgICAgdHlwZTogJ2lubGluZScsCiAgICAgICAgY29udGVudDogJycsCiAgICAgICAgbGV2ZWw6IGxldmVsLAogICAgICAgIGNoaWxkcmVuOiBsaXN0W2ldLnRva2VucwogICAgICB9KTsKICAgICAgdG9rZW5zLnB1c2goewogICAgICAgIHR5cGU6ICdwYXJhZ3JhcGhfY2xvc2UnLAogICAgICAgIHRpZ2h0OiBmYWxzZSwKICAgICAgICBsZXZlbDogLS1sZXZlbAogICAgICB9KTsKICAgIH0gZWxzZSBpZiAobGlzdFtpXS5sYWJlbCkgewogICAgICB0b2tlbnMgPSByZWZUb2tlbnNbJzonICsgbGlzdFtpXS5sYWJlbF07CiAgICB9CgogICAgc3RhdGUudG9rZW5zID0gc3RhdGUudG9rZW5zLmNvbmNhdCh0b2tlbnMpOwogICAgaWYgKHN0YXRlLnRva2Vuc1tzdGF0ZS50b2tlbnMubGVuZ3RoIC0gMV0udHlwZSA9PT0gJ3BhcmFncmFwaF9jbG9zZScpIHsKICAgICAgbGFzdFBhcmFncmFwaCA9IHN0YXRlLnRva2Vucy5wb3AoKTsKICAgIH0gZWxzZSB7CiAgICAgIGxhc3RQYXJhZ3JhcGggPSBudWxsOwogICAgfQoKICAgIHQgPSBsaXN0W2ldLmNvdW50ID4gMCA/IGxpc3RbaV0uY291bnQgOiAxOwogICAgZm9yIChqID0gMDsgaiA8IHQ7IGorKykgewogICAgICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICAgICAgdHlwZTogJ2Zvb3Rub3RlX2FuY2hvcicsCiAgICAgICAgaWQ6IGksCiAgICAgICAgc3ViSWQ6IGosCiAgICAgICAgbGV2ZWw6IGxldmVsCiAgICAgIH0pOwogICAgfQoKICAgIGlmIChsYXN0UGFyYWdyYXBoKSB7CiAgICAgIHN0YXRlLnRva2Vucy5wdXNoKGxhc3RQYXJhZ3JhcGgpOwogICAgfQoKICAgIHN0YXRlLnRva2Vucy5wdXNoKHsKICAgICAgdHlwZTogJ2Zvb3Rub3RlX2Nsb3NlJywKICAgICAgbGV2ZWw6IC0tbGV2ZWwKICAgIH0pOwogIH0KICBzdGF0ZS50b2tlbnMucHVzaCh7CiAgICB0eXBlOiAnZm9vdG5vdGVfYmxvY2tfY2xvc2UnLAogICAgbGV2ZWw6IC0tbGV2ZWwKICB9KTsKfTsKCn0se31dLDM4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmxpbmUoc3RhdGUpIHsKICB2YXIgdG9rZW5zID0gc3RhdGUudG9rZW5zLCB0b2ssIGksIGw7CgogIC8vIFBhcnNlIGlubGluZXMKICBmb3IgKGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgdG9rID0gdG9rZW5zW2ldOwogICAgaWYgKHRvay50eXBlID09PSAnaW5saW5lJykgewogICAgICBzdGF0ZS5pbmxpbmUucGFyc2UodG9rLmNvbnRlbnQsIHN0YXRlLm9wdGlvbnMsIHN0YXRlLmVudiwgdG9rLmNoaWxkcmVuKTsKICAgIH0KICB9Cn07Cgp9LHt9XSwzOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFJlcGxhY2UgbGluay1saWtlIHRleHRzIHdpdGggbGluayBub2Rlcy4KLy8KLy8gQ3VycmVudGx5IHJlc3RyaWN0ZWQgYnkgYGlubGluZS52YWxpZGF0ZUxpbmsoKWAgdG8gaHR0cC9odHRwcy9mdHAKLy8KJ3VzZSBzdHJpY3QnOwoKCnZhciBBdXRvbGlua2VyID0gcmVxdWlyZSgnYXV0b2xpbmtlcicpOwoKCnZhciBMSU5LX1NDQU5fUkUgPSAvd3d3fEB8XDpcL1wvLzsKCgpmdW5jdGlvbiBpc0xpbmtPcGVuKHN0cikgewogIHJldHVybiAvXjxhWz5cc10vaS50ZXN0KHN0cik7Cn0KZnVuY3Rpb24gaXNMaW5rQ2xvc2Uoc3RyKSB7CiAgcmV0dXJuIC9ePFwvYVxzKj4vaS50ZXN0KHN0cik7Cn0KCi8vIFN0dXBpZCBmYWJyaWMgdG8gYXZvaWQgc2luZ2xldG9ucywgZm9yIHRocmVhZCBzYWZldHkuCi8vIFJlcXVpcmVkIGZvciBlbmdpbmVzIGxpa2UgTmFzaG9ybi4KLy8KZnVuY3Rpb24gY3JlYXRlTGlua2lmaWVyKCkgewogIHZhciBsaW5rcyA9IFtdOwogIHZhciBhdXRvbGlua2VyID0gbmV3IEF1dG9saW5rZXIoewogICAgc3RyaXBQcmVmaXg6IGZhbHNlLAogICAgdXJsOiB0cnVlLAogICAgZW1haWw6IHRydWUsCiAgICB0d2l0dGVyOiBmYWxzZSwKICAgIHJlcGxhY2VGbjogZnVuY3Rpb24gKGxpbmtlciwgbWF0Y2gpIHsKICAgICAgLy8gT25seSBjb2xsZWN0IG1hdGNoZWQgc3RyaW5ncyBidXQgZG9uJ3QgY2hhbmdlIGFueXRoaW5nLgogICAgICBzd2l0Y2ggKG1hdGNoLmdldFR5cGUoKSkgewogICAgICAgIC8qZXNsaW50IGRlZmF1bHQtY2FzZTowKi8KICAgICAgICBjYXNlICd1cmwnOgogICAgICAgICAgbGlua3MucHVzaCh7CiAgICAgICAgICAgIHRleHQ6IG1hdGNoLm1hdGNoZWRUZXh0LAogICAgICAgICAgICB1cmw6IG1hdGNoLmdldFVybCgpCiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2VtYWlsJzoKICAgICAgICAgIGxpbmtzLnB1c2goewogICAgICAgICAgICB0ZXh0OiBtYXRjaC5tYXRjaGVkVGV4dCwKICAgICAgICAgICAgLy8gbm9ybWFsaXplIGVtYWlsIHByb3RvY29sCiAgICAgICAgICAgIHVybDogJ21haWx0bzonICsgbWF0Y2guZ2V0RW1haWwoKS5yZXBsYWNlKC9ebWFpbHRvOi9pLCAnJykKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0pOwoKICByZXR1cm4gewogICAgbGlua3M6IGxpbmtzLAogICAgYXV0b2xpbmtlcjogYXV0b2xpbmtlcgogIH07Cn0KCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGxpbmtpZnkoc3RhdGUpIHsKICB2YXIgaSwgaiwgbCwgdG9rZW5zLCB0b2tlbiwgdGV4dCwgbm9kZXMsIGxuLCBwb3MsIGxldmVsLCBodG1sTGlua0xldmVsLAogICAgICBibG9ja1Rva2VucyA9IHN0YXRlLnRva2VucywKICAgICAgbGlua2lmaWVyID0gbnVsbCwgbGlua3MsIGF1dG9saW5rZXI7CgogIGlmICghc3RhdGUub3B0aW9ucy5saW5raWZ5KSB7IHJldHVybjsgfQoKICBmb3IgKGogPSAwLCBsID0gYmxvY2tUb2tlbnMubGVuZ3RoOyBqIDwgbDsgaisrKSB7CiAgICBpZiAoYmxvY2tUb2tlbnNbal0udHlwZSAhPT0gJ2lubGluZScpIHsgY29udGludWU7IH0KICAgIHRva2VucyA9IGJsb2NrVG9rZW5zW2pdLmNoaWxkcmVuOwoKICAgIGh0bWxMaW5rTGV2ZWwgPSAwOwoKICAgIC8vIFdlIHNjYW4gZnJvbSB0aGUgZW5kLCB0byBrZWVwIHBvc2l0aW9uIHdoZW4gbmV3IHRhZ3MgYWRkZWQuCiAgICAvLyBVc2UgcmV2ZXJzZWQgbG9naWMgaW4gbGlua3Mgc3RhcnQvZW5kIG1hdGNoCiAgICBmb3IgKGkgPSB0b2tlbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgdG9rZW4gPSB0b2tlbnNbaV07CgogICAgICAvLyBTa2lwIGNvbnRlbnQgb2YgbWFya2Rvd24gbGlua3MKICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICdsaW5rX2Nsb3NlJykgewogICAgICAgIGktLTsKICAgICAgICB3aGlsZSAodG9rZW5zW2ldLmxldmVsICE9PSB0b2tlbi5sZXZlbCAmJiB0b2tlbnNbaV0udHlwZSAhPT0gJ2xpbmtfb3BlbicpIHsKICAgICAgICAgIGktLTsKICAgICAgICB9CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIC8vIFNraXAgY29udGVudCBvZiBodG1sIHRhZyBsaW5rcwogICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ2h0bWx0YWcnKSB7CiAgICAgICAgaWYgKGlzTGlua09wZW4odG9rZW4uY29udGVudCkgJiYgaHRtbExpbmtMZXZlbCA+IDApIHsKICAgICAgICAgIGh0bWxMaW5rTGV2ZWwtLTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzTGlua0Nsb3NlKHRva2VuLmNvbnRlbnQpKSB7CiAgICAgICAgICBodG1sTGlua0xldmVsKys7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChodG1sTGlua0xldmVsID4gMCkgeyBjb250aW51ZTsgfQoKICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICd0ZXh0JyAmJiBMSU5LX1NDQU5fUkUudGVzdCh0b2tlbi5jb250ZW50KSkgewoKICAgICAgICAvLyBJbml0IGxpbmtpZmllciBpbiBsYXp5IG1hbm5lciwgb25seSBpZiByZXF1aXJlZC4KICAgICAgICBpZiAoIWxpbmtpZmllcikgewogICAgICAgICAgbGlua2lmaWVyID0gY3JlYXRlTGlua2lmaWVyKCk7CiAgICAgICAgICBsaW5rcyA9IGxpbmtpZmllci5saW5rczsKICAgICAgICAgIGF1dG9saW5rZXIgPSBsaW5raWZpZXIuYXV0b2xpbmtlcjsKICAgICAgICB9CgogICAgICAgIHRleHQgPSB0b2tlbi5jb250ZW50OwogICAgICAgIGxpbmtzLmxlbmd0aCA9IDA7CiAgICAgICAgYXV0b2xpbmtlci5saW5rKHRleHQpOwoKICAgICAgICBpZiAoIWxpbmtzLmxlbmd0aCkgeyBjb250aW51ZTsgfQoKICAgICAgICAvLyBOb3cgc3BsaXQgc3RyaW5nIHRvIG5vZGVzCiAgICAgICAgbm9kZXMgPSBbXTsKICAgICAgICBsZXZlbCA9IHRva2VuLmxldmVsOwoKICAgICAgICBmb3IgKGxuID0gMDsgbG4gPCBsaW5rcy5sZW5ndGg7IGxuKyspIHsKCiAgICAgICAgICBpZiAoIXN0YXRlLmlubGluZS52YWxpZGF0ZUxpbmsobGlua3NbbG5dLnVybCkpIHsgY29udGludWU7IH0KCiAgICAgICAgICBwb3MgPSB0ZXh0LmluZGV4T2YobGlua3NbbG5dLnRleHQpOwoKICAgICAgICAgIGlmIChwb3MpIHsKICAgICAgICAgICAgbGV2ZWwgPSBsZXZlbDsKICAgICAgICAgICAgbm9kZXMucHVzaCh7CiAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgICAgICAgIGNvbnRlbnQ6IHRleHQuc2xpY2UoMCwgcG9zKSwKICAgICAgICAgICAgICBsZXZlbDogbGV2ZWwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBub2Rlcy5wdXNoKHsKICAgICAgICAgICAgdHlwZTogJ2xpbmtfb3BlbicsCiAgICAgICAgICAgIGhyZWY6IGxpbmtzW2xuXS51cmwsCiAgICAgICAgICAgIHRpdGxlOiAnJywKICAgICAgICAgICAgbGV2ZWw6IGxldmVsKysKICAgICAgICAgIH0pOwogICAgICAgICAgbm9kZXMucHVzaCh7CiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgY29udGVudDogbGlua3NbbG5dLnRleHQsCiAgICAgICAgICAgIGxldmVsOiBsZXZlbAogICAgICAgICAgfSk7CiAgICAgICAgICBub2Rlcy5wdXNoKHsKICAgICAgICAgICAgdHlwZTogJ2xpbmtfY2xvc2UnLAogICAgICAgICAgICBsZXZlbDogLS1sZXZlbAogICAgICAgICAgfSk7CiAgICAgICAgICB0ZXh0ID0gdGV4dC5zbGljZShwb3MgKyBsaW5rc1tsbl0udGV4dC5sZW5ndGgpOwogICAgICAgIH0KICAgICAgICBpZiAodGV4dC5sZW5ndGgpIHsKICAgICAgICAgIG5vZGVzLnB1c2goewogICAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICAgIGNvbnRlbnQ6IHRleHQsCiAgICAgICAgICAgIGxldmVsOiBsZXZlbAogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyByZXBsYWNlIGN1cnJlbnQgbm9kZQogICAgICAgIGJsb2NrVG9rZW5zW2pdLmNoaWxkcmVuID0gdG9rZW5zID0gW10uY29uY2F0KHRva2Vucy5zbGljZSgwLCBpKSwgbm9kZXMsIHRva2Vucy5zbGljZShpICsgMSkpOwogICAgICB9CiAgICB9CiAgfQp9OwoKfSx7ImF1dG9saW5rZXIiOjYwfV0sNDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgoKdmFyIFN0YXRlSW5saW5lICAgICAgICAgID0gcmVxdWlyZSgnLi4vcnVsZXNfaW5saW5lL3N0YXRlX2lubGluZScpOwp2YXIgcGFyc2VMaW5rTGFiZWwgICAgICAgPSByZXF1aXJlKCcuLi9oZWxwZXJzL3BhcnNlX2xpbmtfbGFiZWwnKTsKdmFyIHBhcnNlTGlua0Rlc3RpbmF0aW9uID0gcmVxdWlyZSgnLi4vaGVscGVycy9wYXJzZV9saW5rX2Rlc3RpbmF0aW9uJyk7CnZhciBwYXJzZUxpbmtUaXRsZSAgICAgICA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvcGFyc2VfbGlua190aXRsZScpOwp2YXIgbm9ybWFsaXplUmVmZXJlbmNlICAgPSByZXF1aXJlKCcuLi9oZWxwZXJzL25vcm1hbGl6ZV9yZWZlcmVuY2UnKTsKCgpmdW5jdGlvbiBwYXJzZVJlZmVyZW5jZShzdHIsIHBhcnNlciwgb3B0aW9ucywgZW52KSB7CiAgdmFyIHN0YXRlLCBsYWJlbEVuZCwgcG9zLCBtYXgsIGNvZGUsIHN0YXJ0LCBocmVmLCB0aXRsZSwgbGFiZWw7CgogIGlmIChzdHIuY2hhckNvZGVBdCgwKSAhPT0gMHg1Qi8qIFsgKi8pIHsgcmV0dXJuIC0xOyB9CgogIGlmIChzdHIuaW5kZXhPZignXTonKSA9PT0gLTEpIHsgcmV0dXJuIC0xOyB9CgogIHN0YXRlID0gbmV3IFN0YXRlSW5saW5lKHN0ciwgcGFyc2VyLCBvcHRpb25zLCBlbnYsIFtdKTsKICBsYWJlbEVuZCA9IHBhcnNlTGlua0xhYmVsKHN0YXRlLCAwKTsKCiAgaWYgKGxhYmVsRW5kIDwgMCB8fCBzdHIuY2hhckNvZGVBdChsYWJlbEVuZCArIDEpICE9PSAweDNBLyogOiAqLykgeyByZXR1cm4gLTE7IH0KCiAgbWF4ID0gc3RhdGUucG9zTWF4OwoKICAvLyBbbGFiZWxdOiAgIGRlc3RpbmF0aW9uICAgJ3RpdGxlJwogIC8vICAgICAgICAgXl5eIHNraXAgb3B0aW9uYWwgd2hpdGVzcGFjZSBoZXJlCiAgZm9yIChwb3MgPSBsYWJlbEVuZCArIDI7IHBvcyA8IG1heDsgcG9zKyspIHsKICAgIGNvZGUgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpOwogICAgaWYgKGNvZGUgIT09IDB4MjAgJiYgY29kZSAhPT0gMHgwQSkgeyBicmVhazsgfQogIH0KCiAgLy8gW2xhYmVsXTogICBkZXN0aW5hdGlvbiAgICd0aXRsZScKICAvLyAgICAgICAgICAgIF5eXl5eXl5eXl5eIHBhcnNlIHRoaXMKICBpZiAoIXBhcnNlTGlua0Rlc3RpbmF0aW9uKHN0YXRlLCBwb3MpKSB7IHJldHVybiAtMTsgfQogIGhyZWYgPSBzdGF0ZS5saW5rQ29udGVudDsKICBwb3MgPSBzdGF0ZS5wb3M7CgogIC8vIFtsYWJlbF06ICAgZGVzdGluYXRpb24gICAndGl0bGUnCiAgLy8gICAgICAgICAgICAgICAgICAgICAgIF5eXiBza2lwcGluZyB0aG9zZSBzcGFjZXMKICBzdGFydCA9IHBvczsKICBmb3IgKHBvcyA9IHBvcyArIDE7IHBvcyA8IG1heDsgcG9zKyspIHsKICAgIGNvZGUgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpOwogICAgaWYgKGNvZGUgIT09IDB4MjAgJiYgY29kZSAhPT0gMHgwQSkgeyBicmVhazsgfQogIH0KCiAgLy8gW2xhYmVsXTogICBkZXN0aW5hdGlvbiAgICd0aXRsZScKICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgXl5eXl5eXiBwYXJzZSB0aGlzCiAgaWYgKHBvcyA8IG1heCAmJiBzdGFydCAhPT0gcG9zICYmIHBhcnNlTGlua1RpdGxlKHN0YXRlLCBwb3MpKSB7CiAgICB0aXRsZSA9IHN0YXRlLmxpbmtDb250ZW50OwogICAgcG9zID0gc3RhdGUucG9zOwogIH0gZWxzZSB7CiAgICB0aXRsZSA9ICcnOwogICAgcG9zID0gc3RhcnQ7CiAgfQoKICAvLyBlbnN1cmUgdGhhdCB0aGUgZW5kIG9mIHRoZSBsaW5lIGlzIGVtcHR5CiAgd2hpbGUgKHBvcyA8IG1heCAmJiBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpID09PSAweDIwLyogc3BhY2UgKi8pIHsgcG9zKys7IH0KICBpZiAocG9zIDwgbWF4ICYmIHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgIT09IDB4MEEpIHsgcmV0dXJuIC0xOyB9CgogIGxhYmVsID0gbm9ybWFsaXplUmVmZXJlbmNlKHN0ci5zbGljZSgxLCBsYWJlbEVuZCkpOwogIGlmICh0eXBlb2YgZW52LnJlZmVyZW5jZXNbbGFiZWxdID09PSAndW5kZWZpbmVkJykgewogICAgZW52LnJlZmVyZW5jZXNbbGFiZWxdID0geyB0aXRsZTogdGl0bGUsIGhyZWY6IGhyZWYgfTsKICB9CgogIHJldHVybiBwb3M7Cn0KCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlZmVyZW5jZXMoc3RhdGUpIHsKICB2YXIgdG9rZW5zID0gc3RhdGUudG9rZW5zLCBpLCBsLCBjb250ZW50LCBwb3M7CgogIHN0YXRlLmVudi5yZWZlcmVuY2VzID0gc3RhdGUuZW52LnJlZmVyZW5jZXMgfHwge307CgogIGlmIChzdGF0ZS5pbmxpbmVNb2RlKSB7CiAgICByZXR1cm47CiAgfQoKICAvLyBTY2FuIGRlZmluaXRpb25zIGluIHBhcmFncmFwaCBpbmxpbmVzCiAgZm9yIChpID0gMSwgbCA9IHRva2Vucy5sZW5ndGggLSAxOyBpIDwgbDsgaSsrKSB7CiAgICBpZiAodG9rZW5zW2ldLnR5cGUgPT09ICdpbmxpbmUnICYmCiAgICAgICAgdG9rZW5zW2kgLSAxXS50eXBlID09PSAncGFyYWdyYXBoX29wZW4nICYmCiAgICAgICAgdG9rZW5zW2kgKyAxXS50eXBlID09PSAncGFyYWdyYXBoX2Nsb3NlJykgewoKICAgICAgY29udGVudCA9IHRva2Vuc1tpXS5jb250ZW50OwogICAgICB3aGlsZSAoY29udGVudC5sZW5ndGgpIHsKICAgICAgICBwb3MgPSBwYXJzZVJlZmVyZW5jZShjb250ZW50LCBzdGF0ZS5pbmxpbmUsIHN0YXRlLm9wdGlvbnMsIHN0YXRlLmVudik7CiAgICAgICAgaWYgKHBvcyA8IDApIHsgYnJlYWs7IH0KICAgICAgICBjb250ZW50ID0gY29udGVudC5zbGljZShwb3MpLnRyaW0oKTsKICAgICAgfQoKICAgICAgdG9rZW5zW2ldLmNvbnRlbnQgPSBjb250ZW50OwogICAgICBpZiAoIWNvbnRlbnQubGVuZ3RoKSB7CiAgICAgICAgdG9rZW5zW2kgLSAxXS50aWdodCA9IHRydWU7CiAgICAgICAgdG9rZW5zW2kgKyAxXS50aWdodCA9IHRydWU7CiAgICAgIH0KICAgIH0KICB9Cn07Cgp9LHsiLi4vaGVscGVycy9ub3JtYWxpemVfcmVmZXJlbmNlIjoxMCwiLi4vaGVscGVycy9wYXJzZV9saW5rX2Rlc3RpbmF0aW9uIjoxMSwiLi4vaGVscGVycy9wYXJzZV9saW5rX2xhYmVsIjoxMiwiLi4vaGVscGVycy9wYXJzZV9saW5rX3RpdGxlIjoxMywiLi4vcnVsZXNfaW5saW5lL3N0YXRlX2lubGluZSI6NTZ9XSw0MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFNpbXBsZSB0eXBvZ3JhcGhpY2FsIHJlcGxhY2VtZW50cwovLwondXNlIHN0cmljdCc7CgovLyBUT0RPOgovLyAtIGZyYWN0aW9uYWxzIDEvMiwgMS80LCAzLzQgLT4gwr0sIMK8LCDCvgovLyAtIG1pbHRpcGxpY2F0aW9uIDIgeCA0IC0+IDIgw5cgNAoKdmFyIFJBUkVfUkUgPSAvXCstfFwuXC58XD9cP1w/XD98ISEhIXwsLHwtLS87Cgp2YXIgU0NPUEVEX0FCQlJfUkUgPSAvXCgoY3x0bXxyfHApXCkvaWc7CnZhciBTQ09QRURfQUJCUiA9IHsKICAnYyc6ICfCqScsCiAgJ3InOiAnwq4nLAogICdwJzogJ8KnJywKICAndG0nOiAn4oSiJwp9OwoKZnVuY3Rpb24gcmVwbGFjZVNjb3BlZEFiYnIoc3RyKSB7CiAgaWYgKHN0ci5pbmRleE9mKCcoJykgPCAwKSB7IHJldHVybiBzdHI7IH0KCiAgcmV0dXJuIHN0ci5yZXBsYWNlKFNDT1BFRF9BQkJSX1JFLCBmdW5jdGlvbihtYXRjaCwgbmFtZSkgewogICAgcmV0dXJuIFNDT1BFRF9BQkJSW25hbWUudG9Mb3dlckNhc2UoKV07CiAgfSk7Cn0KCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlcGxhY2Uoc3RhdGUpIHsKICB2YXIgaSwgdG9rZW4sIHRleHQsIGlubGluZVRva2VucywgYmxrSWR4OwoKICBpZiAoIXN0YXRlLm9wdGlvbnMudHlwb2dyYXBoZXIpIHsgcmV0dXJuOyB9CgogIGZvciAoYmxrSWR4ID0gc3RhdGUudG9rZW5zLmxlbmd0aCAtIDE7IGJsa0lkeCA+PSAwOyBibGtJZHgtLSkgewoKICAgIGlmIChzdGF0ZS50b2tlbnNbYmxrSWR4XS50eXBlICE9PSAnaW5saW5lJykgeyBjb250aW51ZTsgfQoKICAgIGlubGluZVRva2VucyA9IHN0YXRlLnRva2Vuc1tibGtJZHhdLmNoaWxkcmVuOwoKICAgIGZvciAoaSA9IGlubGluZVRva2Vucy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICB0b2tlbiA9IGlubGluZVRva2Vuc1tpXTsKICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICd0ZXh0JykgewogICAgICAgIHRleHQgPSB0b2tlbi5jb250ZW50OwoKICAgICAgICB0ZXh0ID0gcmVwbGFjZVNjb3BlZEFiYnIodGV4dCk7CgogICAgICAgIGlmIChSQVJFX1JFLnRlc3QodGV4dCkpIHsKICAgICAgICAgIHRleHQgPSB0ZXh0CiAgICAgICAgICAgIC5yZXBsYWNlKC9cKy0vZywgJ8KxJykKICAgICAgICAgICAgLy8gLi4sIC4uLiwgLi4uLi4uLiAtPiDigKYKICAgICAgICAgICAgLy8gYnV0ID8uLi4uLiAmICEuLi4uLiAtPiA/Li4gJiAhLi4KICAgICAgICAgICAgLnJlcGxhY2UoL1wuezIsfS9nLCAn4oCmJykucmVwbGFjZSgvKFs/IV0p4oCmL2csICckMS4uJykKICAgICAgICAgICAgLnJlcGxhY2UoLyhbPyFdKXs0LH0vZywgJyQxJDEkMScpLnJlcGxhY2UoLyx7Mix9L2csICcsJykKICAgICAgICAgICAgLy8gZW0tZGFzaAogICAgICAgICAgICAucmVwbGFjZSgvKF58W14tXSktLS0oW14tXXwkKS9tZywgJyQxXHUyMDE0JDInKQogICAgICAgICAgICAvLyBlbi1kYXNoCiAgICAgICAgICAgIC5yZXBsYWNlKC8oXnxccyktLShcc3wkKS9tZywgJyQxXHUyMDEzJDInKQogICAgICAgICAgICAucmVwbGFjZSgvKF58W14tXHNdKS0tKFteLVxzXXwkKS9tZywgJyQxXHUyMDEzJDInKTsKICAgICAgICB9CgogICAgICAgIHRva2VuLmNvbnRlbnQgPSB0ZXh0OwogICAgICB9CiAgICB9CiAgfQp9OwoKfSx7fV0sNDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBDb252ZXJ0IHN0cmFpZ2h0IHF1b3RhdGlvbiBtYXJrcyB0byB0eXBvZ3JhcGhpYyBvbmVzCi8vCid1c2Ugc3RyaWN0JzsKCgp2YXIgUVVPVEVfVEVTVF9SRSA9IC9bJyJdLzsKdmFyIFFVT1RFX1JFID0gL1snIl0vZzsKdmFyIFBVTkNUX1JFID0gL1stXHMoKVxbXF1dLzsKdmFyIEFQT1NUUk9QSEUgPSAn4oCZJzsKCi8vIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0cnVlIGlmIHRoZSBjaGFyYWN0ZXIgYXQgYHBvc2AKLy8gY291bGQgYmUgaW5zaWRlIGEgd29yZC4KZnVuY3Rpb24gaXNMZXR0ZXIoc3RyLCBwb3MpIHsKICBpZiAocG9zIDwgMCB8fCBwb3MgPj0gc3RyLmxlbmd0aCkgeyByZXR1cm4gZmFsc2U7IH0KICByZXR1cm4gIVBVTkNUX1JFLnRlc3Qoc3RyW3Bvc10pOwp9CgoKZnVuY3Rpb24gcmVwbGFjZUF0KHN0ciwgaW5kZXgsIGNoKSB7CiAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgaW5kZXgpICsgY2ggKyBzdHIuc3Vic3RyKGluZGV4ICsgMSk7Cn0KCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNtYXJ0cXVvdGVzKHN0YXRlKSB7CiAgLyplc2xpbnQgbWF4LWRlcHRoOjAqLwogIHZhciBpLCB0b2tlbiwgdGV4dCwgdCwgcG9zLCBtYXgsIHRoaXNMZXZlbCwgbGFzdFNwYWNlLCBuZXh0U3BhY2UsIGl0ZW0sCiAgICAgIGNhbk9wZW4sIGNhbkNsb3NlLCBqLCBpc1NpbmdsZSwgYmxrSWR4LCB0b2tlbnMsCiAgICAgIHN0YWNrOwoKICBpZiAoIXN0YXRlLm9wdGlvbnMudHlwb2dyYXBoZXIpIHsgcmV0dXJuOyB9CgogIHN0YWNrID0gW107CgogIGZvciAoYmxrSWR4ID0gc3RhdGUudG9rZW5zLmxlbmd0aCAtIDE7IGJsa0lkeCA+PSAwOyBibGtJZHgtLSkgewoKICAgIGlmIChzdGF0ZS50b2tlbnNbYmxrSWR4XS50eXBlICE9PSAnaW5saW5lJykgeyBjb250aW51ZTsgfQoKICAgIHRva2VucyA9IHN0YXRlLnRva2Vuc1tibGtJZHhdLmNoaWxkcmVuOwogICAgc3RhY2subGVuZ3RoID0gMDsKCiAgICBmb3IgKGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRva2VuID0gdG9rZW5zW2ldOwoKICAgICAgaWYgKHRva2VuLnR5cGUgIT09ICd0ZXh0JyB8fCBRVU9URV9URVNUX1JFLnRlc3QodG9rZW4udGV4dCkpIHsgY29udGludWU7IH0KCiAgICAgIHRoaXNMZXZlbCA9IHRva2Vuc1tpXS5sZXZlbDsKCiAgICAgIGZvciAoaiA9IHN0YWNrLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgaWYgKHN0YWNrW2pdLmxldmVsIDw9IHRoaXNMZXZlbCkgeyBicmVhazsgfQogICAgICB9CiAgICAgIHN0YWNrLmxlbmd0aCA9IGogKyAxOwoKICAgICAgdGV4dCA9IHRva2VuLmNvbnRlbnQ7CiAgICAgIHBvcyA9IDA7CiAgICAgIG1heCA9IHRleHQubGVuZ3RoOwoKICAgICAgLyplc2xpbnQgbm8tbGFiZWxzOjAsYmxvY2stc2NvcGVkLXZhcjowKi8KICAgICAgT1VURVI6CiAgICAgIHdoaWxlIChwb3MgPCBtYXgpIHsKICAgICAgICBRVU9URV9SRS5sYXN0SW5kZXggPSBwb3M7CiAgICAgICAgdCA9IFFVT1RFX1JFLmV4ZWModGV4dCk7CiAgICAgICAgaWYgKCF0KSB7IGJyZWFrOyB9CgogICAgICAgIGxhc3RTcGFjZSA9ICFpc0xldHRlcih0ZXh0LCB0LmluZGV4IC0gMSk7CiAgICAgICAgcG9zID0gdC5pbmRleCArIDE7CiAgICAgICAgaXNTaW5nbGUgPSAodFswXSA9PT0gIiciKTsKICAgICAgICBuZXh0U3BhY2UgPSAhaXNMZXR0ZXIodGV4dCwgcG9zKTsKCiAgICAgICAgaWYgKCFuZXh0U3BhY2UgJiYgIWxhc3RTcGFjZSkgewogICAgICAgICAgLy8gbWlkZGxlIG9mIHdvcmQKICAgICAgICAgIGlmIChpc1NpbmdsZSkgewogICAgICAgICAgICB0b2tlbi5jb250ZW50ID0gcmVwbGFjZUF0KHRva2VuLmNvbnRlbnQsIHQuaW5kZXgsIEFQT1NUUk9QSEUpOwogICAgICAgICAgfQogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICBjYW5PcGVuID0gIW5leHRTcGFjZTsKICAgICAgICBjYW5DbG9zZSA9ICFsYXN0U3BhY2U7CgogICAgICAgIGlmIChjYW5DbG9zZSkgewogICAgICAgICAgLy8gdGhpcyBjb3VsZCBiZSBhIGNsb3NpbmcgcXVvdGUsIHJld2luZCB0aGUgc3RhY2sgdG8gZ2V0IGEgbWF0Y2gKICAgICAgICAgIGZvciAoaiA9IHN0YWNrLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICAgIGl0ZW0gPSBzdGFja1tqXTsKICAgICAgICAgICAgaWYgKHN0YWNrW2pdLmxldmVsIDwgdGhpc0xldmVsKSB7IGJyZWFrOyB9CiAgICAgICAgICAgIGlmIChpdGVtLnNpbmdsZSA9PT0gaXNTaW5nbGUgJiYgc3RhY2tbal0ubGV2ZWwgPT09IHRoaXNMZXZlbCkgewogICAgICAgICAgICAgIGl0ZW0gPSBzdGFja1tqXTsKICAgICAgICAgICAgICBpZiAoaXNTaW5nbGUpIHsKICAgICAgICAgICAgICAgIHRva2Vuc1tpdGVtLnRva2VuXS5jb250ZW50ID0gcmVwbGFjZUF0KHRva2Vuc1tpdGVtLnRva2VuXS5jb250ZW50LCBpdGVtLnBvcywgc3RhdGUub3B0aW9ucy5xdW90ZXNbMl0pOwogICAgICAgICAgICAgICAgdG9rZW4uY29udGVudCA9IHJlcGxhY2VBdCh0b2tlbi5jb250ZW50LCB0LmluZGV4LCBzdGF0ZS5vcHRpb25zLnF1b3Rlc1szXSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRva2Vuc1tpdGVtLnRva2VuXS5jb250ZW50ID0gcmVwbGFjZUF0KHRva2Vuc1tpdGVtLnRva2VuXS5jb250ZW50LCBpdGVtLnBvcywgc3RhdGUub3B0aW9ucy5xdW90ZXNbMF0pOwogICAgICAgICAgICAgICAgdG9rZW4uY29udGVudCA9IHJlcGxhY2VBdCh0b2tlbi5jb250ZW50LCB0LmluZGV4LCBzdGF0ZS5vcHRpb25zLnF1b3Rlc1sxXSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHN0YWNrLmxlbmd0aCA9IGo7CiAgICAgICAgICAgICAgY29udGludWUgT1VURVI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChjYW5PcGVuKSB7CiAgICAgICAgICBzdGFjay5wdXNoKHsKICAgICAgICAgICAgdG9rZW46IGksCiAgICAgICAgICAgIHBvczogdC5pbmRleCwKICAgICAgICAgICAgc2luZ2xlOiBpc1NpbmdsZSwKICAgICAgICAgICAgbGV2ZWw6IHRoaXNMZXZlbAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChjYW5DbG9zZSAmJiBpc1NpbmdsZSkgewogICAgICAgICAgdG9rZW4uY29udGVudCA9IHJlcGxhY2VBdCh0b2tlbi5jb250ZW50LCB0LmluZGV4LCBBUE9TVFJPUEhFKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07Cgp9LHt9XSw0MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFByb2Nlc3MgYXV0b2xpbmtzICc8cHJvdG9jb2w6Li4uPicKCid1c2Ugc3RyaWN0JzsKCnZhciB1cmxfc2NoZW1hcyAgID0gcmVxdWlyZSgnLi4vY29tbW9uL3VybF9zY2hlbWFzJyk7CnZhciBub3JtYWxpemVMaW5rID0gcmVxdWlyZSgnLi4vaGVscGVycy9ub3JtYWxpemVfbGluaycpOwoKCi8qZXNsaW50IG1heC1sZW46MCovCnZhciBFTUFJTF9SRSAgICA9IC9ePChbYS16QS1aMC05LiEjJCUmJyorXC89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKik+LzsKdmFyIEFVVE9MSU5LX1JFID0gL148KFthLXpBLVouXC1dezEsMjV9KTooW148Plx4MDAtXHgyMF0qKT4vOwoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYXV0b2xpbmsoc3RhdGUsIHNpbGVudCkgewogIHZhciB0YWlsLCBsaW5rTWF0Y2gsIGVtYWlsTWF0Y2gsIHVybCwgZnVsbFVybCwgcG9zID0gc3RhdGUucG9zOwoKICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSAhPT0gMHgzQy8qIDwgKi8pIHsgcmV0dXJuIGZhbHNlOyB9CgogIHRhaWwgPSBzdGF0ZS5zcmMuc2xpY2UocG9zKTsKCiAgaWYgKHRhaWwuaW5kZXhPZignPicpIDwgMCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgbGlua01hdGNoID0gdGFpbC5tYXRjaChBVVRPTElOS19SRSk7CgogIGlmIChsaW5rTWF0Y2gpIHsKICAgIGlmICh1cmxfc2NoZW1hcy5pbmRleE9mKGxpbmtNYXRjaFsxXS50b0xvd2VyQ2FzZSgpKSA8IDApIHsgcmV0dXJuIGZhbHNlOyB9CgogICAgdXJsID0gbGlua01hdGNoWzBdLnNsaWNlKDEsIC0xKTsKICAgIGZ1bGxVcmwgPSBub3JtYWxpemVMaW5rKHVybCk7CiAgICBpZiAoIXN0YXRlLnBhcnNlci52YWxpZGF0ZUxpbmsodXJsKSkgeyByZXR1cm4gZmFsc2U7IH0KCiAgICBpZiAoIXNpbGVudCkgewogICAgICBzdGF0ZS5wdXNoKHsKICAgICAgICB0eXBlOiAnbGlua19vcGVuJywKICAgICAgICBocmVmOiBmdWxsVXJsLAogICAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbAogICAgICB9KTsKICAgICAgc3RhdGUucHVzaCh7CiAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgIGNvbnRlbnQ6IHVybCwKICAgICAgICBsZXZlbDogc3RhdGUubGV2ZWwgKyAxCiAgICAgIH0pOwogICAgICBzdGF0ZS5wdXNoKHsgdHlwZTogJ2xpbmtfY2xvc2UnLCBsZXZlbDogc3RhdGUubGV2ZWwgfSk7CiAgICB9CgogICAgc3RhdGUucG9zICs9IGxpbmtNYXRjaFswXS5sZW5ndGg7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGVtYWlsTWF0Y2ggPSB0YWlsLm1hdGNoKEVNQUlMX1JFKTsKCiAgaWYgKGVtYWlsTWF0Y2gpIHsKCiAgICB1cmwgPSBlbWFpbE1hdGNoWzBdLnNsaWNlKDEsIC0xKTsKCiAgICBmdWxsVXJsID0gbm9ybWFsaXplTGluaygnbWFpbHRvOicgKyB1cmwpOwogICAgaWYgKCFzdGF0ZS5wYXJzZXIudmFsaWRhdGVMaW5rKGZ1bGxVcmwpKSB7IHJldHVybiBmYWxzZTsgfQoKICAgIGlmICghc2lsZW50KSB7CiAgICAgIHN0YXRlLnB1c2goewogICAgICAgIHR5cGU6ICdsaW5rX29wZW4nLAogICAgICAgIGhyZWY6IGZ1bGxVcmwsCiAgICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgICAgIH0pOwogICAgICBzdGF0ZS5wdXNoKHsKICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgY29udGVudDogdXJsLAogICAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbCArIDEKICAgICAgfSk7CiAgICAgIHN0YXRlLnB1c2goeyB0eXBlOiAnbGlua19jbG9zZScsIGxldmVsOiBzdGF0ZS5sZXZlbCB9KTsKICAgIH0KCiAgICBzdGF0ZS5wb3MgKz0gZW1haWxNYXRjaFswXS5sZW5ndGg7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHJldHVybiBmYWxzZTsKfTsKCn0seyIuLi9jb21tb24vdXJsX3NjaGVtYXMiOjQsIi4uL2hlbHBlcnMvbm9ybWFsaXplX2xpbmsiOjl9XSw0NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFBhcnNlIGJhY2t0aWNrcwoKJ3VzZSBzdHJpY3QnOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBiYWNrdGlja3Moc3RhdGUsIHNpbGVudCkgewogIHZhciBzdGFydCwgbWF4LCBtYXJrZXIsIG1hdGNoU3RhcnQsIG1hdGNoRW5kLAogICAgICBwb3MgPSBzdGF0ZS5wb3MsCiAgICAgIGNoID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKTsKCiAgaWYgKGNoICE9PSAweDYwLyogYCAqLykgeyByZXR1cm4gZmFsc2U7IH0KCiAgc3RhcnQgPSBwb3M7CiAgcG9zKys7CiAgbWF4ID0gc3RhdGUucG9zTWF4OwoKICB3aGlsZSAocG9zIDwgbWF4ICYmIHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgPT09IDB4NjAvKiBgICovKSB7IHBvcysrOyB9CgogIG1hcmtlciA9IHN0YXRlLnNyYy5zbGljZShzdGFydCwgcG9zKTsKCiAgbWF0Y2hTdGFydCA9IG1hdGNoRW5kID0gcG9zOwoKICB3aGlsZSAoKG1hdGNoU3RhcnQgPSBzdGF0ZS5zcmMuaW5kZXhPZignYCcsIG1hdGNoRW5kKSkgIT09IC0xKSB7CiAgICBtYXRjaEVuZCA9IG1hdGNoU3RhcnQgKyAxOwoKICAgIHdoaWxlIChtYXRjaEVuZCA8IG1heCAmJiBzdGF0ZS5zcmMuY2hhckNvZGVBdChtYXRjaEVuZCkgPT09IDB4NjAvKiBgICovKSB7IG1hdGNoRW5kKys7IH0KCiAgICBpZiAobWF0Y2hFbmQgLSBtYXRjaFN0YXJ0ID09PSBtYXJrZXIubGVuZ3RoKSB7CiAgICAgIGlmICghc2lsZW50KSB7CiAgICAgICAgc3RhdGUucHVzaCh7CiAgICAgICAgICB0eXBlOiAnY29kZScsCiAgICAgICAgICBjb250ZW50OiBzdGF0ZS5zcmMuc2xpY2UocG9zLCBtYXRjaFN0YXJ0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvWyBcbl0rL2csICcgJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyaW0oKSwKICAgICAgICAgIGJsb2NrOiBmYWxzZSwKICAgICAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbAogICAgICAgIH0pOwogICAgICB9CiAgICAgIHN0YXRlLnBvcyA9IG1hdGNoRW5kOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9CgogIGlmICghc2lsZW50KSB7IHN0YXRlLnBlbmRpbmcgKz0gbWFya2VyOyB9CiAgc3RhdGUucG9zICs9IG1hcmtlci5sZW5ndGg7CiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSw0NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFByb2Nlc3Mgfn5kZWxldGVkIHRleHR+fgoKJ3VzZSBzdHJpY3QnOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWwoc3RhdGUsIHNpbGVudCkgewogIHZhciBmb3VuZCwKICAgICAgcG9zLAogICAgICBzdGFjaywKICAgICAgbWF4ID0gc3RhdGUucG9zTWF4LAogICAgICBzdGFydCA9IHN0YXRlLnBvcywKICAgICAgbGFzdENoYXIsCiAgICAgIG5leHRDaGFyOwoKICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQpICE9PSAweDdFLyogfiAqLykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc2lsZW50KSB7IHJldHVybiBmYWxzZTsgfSAvLyBkb24ndCBydW4gYW55IHBhaXJzIGluIHZhbGlkYXRpb24gbW9kZQogIGlmIChzdGFydCArIDQgPj0gbWF4KSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCArIDEpICE9PSAweDdFLyogfiAqLykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc3RhdGUubGV2ZWwgPj0gc3RhdGUub3B0aW9ucy5tYXhOZXN0aW5nKSB7IHJldHVybiBmYWxzZTsgfQoKICBsYXN0Q2hhciA9IHN0YXJ0ID4gMCA/IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0IC0gMSkgOiAtMTsKICBuZXh0Q2hhciA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0ICsgMik7CgogIGlmIChsYXN0Q2hhciA9PT0gMHg3RS8qIH4gKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKG5leHRDaGFyID09PSAweDdFLyogfiAqLykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAobmV4dENoYXIgPT09IDB4MjAgfHwgbmV4dENoYXIgPT09IDB4MEEpIHsgcmV0dXJuIGZhbHNlOyB9CgogIHBvcyA9IHN0YXJ0ICsgMjsKICB3aGlsZSAocG9zIDwgbWF4ICYmIHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgPT09IDB4N0UvKiB+ICovKSB7IHBvcysrOyB9CiAgaWYgKHBvcyA+IHN0YXJ0ICsgMykgewogICAgLy8gc2VxdWVuY2Ugb2YgNCsgbWFya2VycyB0YWtpbmcgYXMgbGl0ZXJhbCwgc2FtZSBhcyBpbiBhIGVtcGhhc2lzCiAgICBzdGF0ZS5wb3MgKz0gcG9zIC0gc3RhcnQ7CiAgICBpZiAoIXNpbGVudCkgeyBzdGF0ZS5wZW5kaW5nICs9IHN0YXRlLnNyYy5zbGljZShzdGFydCwgcG9zKTsgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICBzdGF0ZS5wb3MgPSBzdGFydCArIDI7CiAgc3RhY2sgPSAxOwoKICB3aGlsZSAoc3RhdGUucG9zICsgMSA8IG1heCkgewogICAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXRlLnBvcykgPT09IDB4N0UvKiB+ICovKSB7CiAgICAgIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGF0ZS5wb3MgKyAxKSA9PT0gMHg3RS8qIH4gKi8pIHsKICAgICAgICBsYXN0Q2hhciA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXRlLnBvcyAtIDEpOwogICAgICAgIG5leHRDaGFyID0gc3RhdGUucG9zICsgMiA8IG1heCA/IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXRlLnBvcyArIDIpIDogLTE7CiAgICAgICAgaWYgKG5leHRDaGFyICE9PSAweDdFLyogfiAqLyAmJiBsYXN0Q2hhciAhPT0gMHg3RS8qIH4gKi8pIHsKICAgICAgICAgIGlmIChsYXN0Q2hhciAhPT0gMHgyMCAmJiBsYXN0Q2hhciAhPT0gMHgwQSkgewogICAgICAgICAgICAvLyBjbG9zaW5nICd+ficKICAgICAgICAgICAgc3RhY2stLTsKICAgICAgICAgIH0gZWxzZSBpZiAobmV4dENoYXIgIT09IDB4MjAgJiYgbmV4dENoYXIgIT09IDB4MEEpIHsKICAgICAgICAgICAgLy8gb3BlbmluZyAnfn4nCiAgICAgICAgICAgIHN0YWNrKys7CiAgICAgICAgICB9IC8vIGVsc2UgewogICAgICAgICAgICAvLyAgLy8gc3RhbmRhbG9uZSAnIH5+ICcgaW5kZW50ZWQgd2l0aCBzcGFjZXMKICAgICAgICAgICAgLy8gfQogICAgICAgICAgaWYgKHN0YWNrIDw9IDApIHsKICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzdGF0ZS5wYXJzZXIuc2tpcFRva2VuKHN0YXRlKTsKICB9CgogIGlmICghZm91bmQpIHsKICAgIC8vIHBhcnNlciBmYWlsZWQgdG8gZmluZCBlbmRpbmcgdGFnLCBzbyBpdCdzIG5vdCB2YWxpZCBlbXBoYXNpcwogICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICAvLyBmb3VuZCEKICBzdGF0ZS5wb3NNYXggPSBzdGF0ZS5wb3M7CiAgc3RhdGUucG9zID0gc3RhcnQgKyAyOwoKICBpZiAoIXNpbGVudCkgewogICAgc3RhdGUucHVzaCh7IHR5cGU6ICdkZWxfb3BlbicsIGxldmVsOiBzdGF0ZS5sZXZlbCsrIH0pOwogICAgc3RhdGUucGFyc2VyLnRva2VuaXplKHN0YXRlKTsKICAgIHN0YXRlLnB1c2goeyB0eXBlOiAnZGVsX2Nsb3NlJywgbGV2ZWw6IC0tc3RhdGUubGV2ZWwgfSk7CiAgfQoKICBzdGF0ZS5wb3MgPSBzdGF0ZS5wb3NNYXggKyAyOwogIHN0YXRlLnBvc01heCA9IG1heDsKICByZXR1cm4gdHJ1ZTsKfTsKCn0se31dLDQ2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gUHJvY2VzcyAqdGhpcyogYW5kIF90aGF0XwoKJ3VzZSBzdHJpY3QnOwoKCmZ1bmN0aW9uIGlzQWxwaGFOdW0oY29kZSkgewogIHJldHVybiAoY29kZSA+PSAweDMwIC8qIDAgKi8gJiYgY29kZSA8PSAweDM5IC8qIDkgKi8pIHx8CiAgICAgICAgIChjb2RlID49IDB4NDEgLyogQSAqLyAmJiBjb2RlIDw9IDB4NUEgLyogWiAqLykgfHwKICAgICAgICAgKGNvZGUgPj0gMHg2MSAvKiBhICovICYmIGNvZGUgPD0gMHg3QSAvKiB6ICovKTsKfQoKLy8gcGFyc2Ugc2VxdWVuY2Ugb2YgZW1waGFzaXMgbWFya2VycywKLy8gInN0YXJ0IiBzaG91bGQgcG9pbnQgYXQgYSB2YWxpZCBtYXJrZXIKZnVuY3Rpb24gc2NhbkRlbGltcyhzdGF0ZSwgc3RhcnQpIHsKICB2YXIgcG9zID0gc3RhcnQsIGxhc3RDaGFyLCBuZXh0Q2hhciwgY291bnQsCiAgICAgIGNhbl9vcGVuID0gdHJ1ZSwKICAgICAgY2FuX2Nsb3NlID0gdHJ1ZSwKICAgICAgbWF4ID0gc3RhdGUucG9zTWF4LAogICAgICBtYXJrZXIgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCk7CgogIGxhc3RDaGFyID0gc3RhcnQgPiAwID8gc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQgLSAxKSA6IC0xOwoKICB3aGlsZSAocG9zIDwgbWF4ICYmIHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgPT09IG1hcmtlcikgeyBwb3MrKzsgfQogIGlmIChwb3MgPj0gbWF4KSB7IGNhbl9vcGVuID0gZmFsc2U7IH0KICBjb3VudCA9IHBvcyAtIHN0YXJ0OwoKICBpZiAoY291bnQgPj0gNCkgewogICAgLy8gc2VxdWVuY2Ugb2YgZm91ciBvciBtb3JlIHVuZXNjYXBlZCBtYXJrZXJzIGNhbid0IHN0YXJ0L2VuZCBhbiBlbXBoYXNpcwogICAgY2FuX29wZW4gPSBjYW5fY2xvc2UgPSBmYWxzZTsKICB9IGVsc2UgewogICAgbmV4dENoYXIgPSBwb3MgPCBtYXggPyBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpIDogLTE7CgogICAgLy8gY2hlY2sgd2hpdGVzcGFjZSBjb25kaXRpb25zCiAgICBpZiAobmV4dENoYXIgPT09IDB4MjAgfHwgbmV4dENoYXIgPT09IDB4MEEpIHsgY2FuX29wZW4gPSBmYWxzZTsgfQogICAgaWYgKGxhc3RDaGFyID09PSAweDIwIHx8IGxhc3RDaGFyID09PSAweDBBKSB7IGNhbl9jbG9zZSA9IGZhbHNlOyB9CgogICAgaWYgKG1hcmtlciA9PT0gMHg1RiAvKiBfICovKSB7CiAgICAgIC8vIGNoZWNrIGlmIHdlIGFyZW4ndCBpbnNpZGUgdGhlIHdvcmQKICAgICAgaWYgKGlzQWxwaGFOdW0obGFzdENoYXIpKSB7IGNhbl9vcGVuID0gZmFsc2U7IH0KICAgICAgaWYgKGlzQWxwaGFOdW0obmV4dENoYXIpKSB7IGNhbl9jbG9zZSA9IGZhbHNlOyB9CiAgICB9CiAgfQoKICByZXR1cm4gewogICAgY2FuX29wZW46IGNhbl9vcGVuLAogICAgY2FuX2Nsb3NlOiBjYW5fY2xvc2UsCiAgICBkZWxpbXM6IGNvdW50CiAgfTsKfQoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbXBoYXNpcyhzdGF0ZSwgc2lsZW50KSB7CiAgdmFyIHN0YXJ0Q291bnQsCiAgICAgIGNvdW50LAogICAgICBmb3VuZCwKICAgICAgb2xkQ291bnQsCiAgICAgIG5ld0NvdW50LAogICAgICBzdGFjaywKICAgICAgcmVzLAogICAgICBtYXggPSBzdGF0ZS5wb3NNYXgsCiAgICAgIHN0YXJ0ID0gc3RhdGUucG9zLAogICAgICBtYXJrZXIgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCk7CgogIGlmIChtYXJrZXIgIT09IDB4NUYvKiBfICovICYmIG1hcmtlciAhPT0gMHgyQSAvKiAqICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzaWxlbnQpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIGRvbid0IHJ1biBhbnkgcGFpcnMgaW4gdmFsaWRhdGlvbiBtb2RlCgogIHJlcyA9IHNjYW5EZWxpbXMoc3RhdGUsIHN0YXJ0KTsKICBzdGFydENvdW50ID0gcmVzLmRlbGltczsKICBpZiAoIXJlcy5jYW5fb3BlbikgewogICAgc3RhdGUucG9zICs9IHN0YXJ0Q291bnQ7CiAgICBpZiAoIXNpbGVudCkgeyBzdGF0ZS5wZW5kaW5nICs9IHN0YXRlLnNyYy5zbGljZShzdGFydCwgc3RhdGUucG9zKTsgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICBpZiAoc3RhdGUubGV2ZWwgPj0gc3RhdGUub3B0aW9ucy5tYXhOZXN0aW5nKSB7IHJldHVybiBmYWxzZTsgfQoKICBzdGF0ZS5wb3MgPSBzdGFydCArIHN0YXJ0Q291bnQ7CiAgc3RhY2sgPSBbIHN0YXJ0Q291bnQgXTsKCiAgd2hpbGUgKHN0YXRlLnBvcyA8IG1heCkgewogICAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXRlLnBvcykgPT09IG1hcmtlcikgewogICAgICByZXMgPSBzY2FuRGVsaW1zKHN0YXRlLCBzdGF0ZS5wb3MpOwogICAgICBjb3VudCA9IHJlcy5kZWxpbXM7CiAgICAgIGlmIChyZXMuY2FuX2Nsb3NlKSB7CiAgICAgICAgb2xkQ291bnQgPSBzdGFjay5wb3AoKTsKICAgICAgICBuZXdDb3VudCA9IGNvdW50OwoKICAgICAgICB3aGlsZSAob2xkQ291bnQgIT09IG5ld0NvdW50KSB7CiAgICAgICAgICBpZiAobmV3Q291bnQgPCBvbGRDb3VudCkgewogICAgICAgICAgICBzdGFjay5wdXNoKG9sZENvdW50IC0gbmV3Q291bnQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBhc3NlcnQobmV3Q291bnQgPiBvbGRDb3VudCkKICAgICAgICAgIG5ld0NvdW50IC09IG9sZENvdW50OwoKICAgICAgICAgIGlmIChzdGFjay5sZW5ndGggPT09IDApIHsgYnJlYWs7IH0KICAgICAgICAgIHN0YXRlLnBvcyArPSBvbGRDb3VudDsKICAgICAgICAgIG9sZENvdW50ID0gc3RhY2sucG9wKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoc3RhY2subGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBzdGFydENvdW50ID0gb2xkQ291bnQ7CiAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgc3RhdGUucG9zICs9IGNvdW50OwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBpZiAocmVzLmNhbl9vcGVuKSB7IHN0YWNrLnB1c2goY291bnQpOyB9CiAgICAgIHN0YXRlLnBvcyArPSBjb3VudDsKICAgICAgY29udGludWU7CiAgICB9CgogICAgc3RhdGUucGFyc2VyLnNraXBUb2tlbihzdGF0ZSk7CiAgfQoKICBpZiAoIWZvdW5kKSB7CiAgICAvLyBwYXJzZXIgZmFpbGVkIHRvIGZpbmQgZW5kaW5nIHRhZywgc28gaXQncyBub3QgdmFsaWQgZW1waGFzaXMKICAgIHN0YXRlLnBvcyA9IHN0YXJ0OwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8gZm91bmQhCiAgc3RhdGUucG9zTWF4ID0gc3RhdGUucG9zOwogIHN0YXRlLnBvcyA9IHN0YXJ0ICsgc3RhcnRDb3VudDsKCiAgaWYgKCFzaWxlbnQpIHsKICAgIGlmIChzdGFydENvdW50ID09PSAyIHx8IHN0YXJ0Q291bnQgPT09IDMpIHsKICAgICAgc3RhdGUucHVzaCh7IHR5cGU6ICdzdHJvbmdfb3BlbicsIGxldmVsOiBzdGF0ZS5sZXZlbCsrIH0pOwogICAgfQogICAgaWYgKHN0YXJ0Q291bnQgPT09IDEgfHwgc3RhcnRDb3VudCA9PT0gMykgewogICAgICBzdGF0ZS5wdXNoKHsgdHlwZTogJ2VtX29wZW4nLCBsZXZlbDogc3RhdGUubGV2ZWwrKyB9KTsKICAgIH0KCiAgICBzdGF0ZS5wYXJzZXIudG9rZW5pemUoc3RhdGUpOwoKICAgIGlmIChzdGFydENvdW50ID09PSAxIHx8IHN0YXJ0Q291bnQgPT09IDMpIHsKICAgICAgc3RhdGUucHVzaCh7IHR5cGU6ICdlbV9jbG9zZScsIGxldmVsOiAtLXN0YXRlLmxldmVsIH0pOwogICAgfQogICAgaWYgKHN0YXJ0Q291bnQgPT09IDIgfHwgc3RhcnRDb3VudCA9PT0gMykgewogICAgICBzdGF0ZS5wdXNoKHsgdHlwZTogJ3N0cm9uZ19jbG9zZScsIGxldmVsOiAtLXN0YXRlLmxldmVsIH0pOwogICAgfQogIH0KCiAgc3RhdGUucG9zID0gc3RhdGUucG9zTWF4ICsgc3RhcnRDb3VudDsKICBzdGF0ZS5wb3NNYXggPSBtYXg7CiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSw0NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFByb2Nlc3MgaHRtbCBlbnRpdHkgLSAmIzEyMzssICYjeEFGOywgJnF1b3Q7LCAuLi4KCid1c2Ugc3RyaWN0JzsKCnZhciBlbnRpdGllcyAgICAgICAgICA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lbnRpdGllcycpOwp2YXIgaGFzICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuLi9jb21tb24vdXRpbHMnKS5oYXM7CnZhciBpc1ZhbGlkRW50aXR5Q29kZSA9IHJlcXVpcmUoJy4uL2NvbW1vbi91dGlscycpLmlzVmFsaWRFbnRpdHlDb2RlOwp2YXIgZnJvbUNvZGVQb2ludCAgICAgPSByZXF1aXJlKCcuLi9jb21tb24vdXRpbHMnKS5mcm9tQ29kZVBvaW50OwoKCnZhciBESUdJVEFMX1JFID0gL14mIygoPzp4W2EtZjAtOV17MSw4fXxbMC05XXsxLDh9KSk7L2k7CnZhciBOQU1FRF9SRSAgID0gL14mKFthLXpdW2EtejAtOV17MSwzMX0pOy9pOwoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW50aXR5KHN0YXRlLCBzaWxlbnQpIHsKICB2YXIgY2gsIGNvZGUsIG1hdGNoLCBwb3MgPSBzdGF0ZS5wb3MsIG1heCA9IHN0YXRlLnBvc01heDsKCiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgIT09IDB4MjYvKiAmICovKSB7IHJldHVybiBmYWxzZTsgfQoKICBpZiAocG9zICsgMSA8IG1heCkgewogICAgY2ggPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MgKyAxKTsKCiAgICBpZiAoY2ggPT09IDB4MjMgLyogIyAqLykgewogICAgICBtYXRjaCA9IHN0YXRlLnNyYy5zbGljZShwb3MpLm1hdGNoKERJR0lUQUxfUkUpOwogICAgICBpZiAobWF0Y2gpIHsKICAgICAgICBpZiAoIXNpbGVudCkgewogICAgICAgICAgY29kZSA9IG1hdGNoWzFdWzBdLnRvTG93ZXJDYXNlKCkgPT09ICd4JyA/IHBhcnNlSW50KG1hdGNoWzFdLnNsaWNlKDEpLCAxNikgOiBwYXJzZUludChtYXRjaFsxXSwgMTApOwogICAgICAgICAgc3RhdGUucGVuZGluZyArPSBpc1ZhbGlkRW50aXR5Q29kZShjb2RlKSA/IGZyb21Db2RlUG9pbnQoY29kZSkgOiBmcm9tQ29kZVBvaW50KDB4RkZGRCk7CiAgICAgICAgfQogICAgICAgIHN0YXRlLnBvcyArPSBtYXRjaFswXS5sZW5ndGg7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIG1hdGNoID0gc3RhdGUuc3JjLnNsaWNlKHBvcykubWF0Y2goTkFNRURfUkUpOwogICAgICBpZiAobWF0Y2gpIHsKICAgICAgICBpZiAoaGFzKGVudGl0aWVzLCBtYXRjaFsxXSkpIHsKICAgICAgICAgIGlmICghc2lsZW50KSB7IHN0YXRlLnBlbmRpbmcgKz0gZW50aXRpZXNbbWF0Y2hbMV1dOyB9CiAgICAgICAgICBzdGF0ZS5wb3MgKz0gbWF0Y2hbMF0ubGVuZ3RoOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBpZiAoIXNpbGVudCkgeyBzdGF0ZS5wZW5kaW5nICs9ICcmJzsgfQogIHN0YXRlLnBvcysrOwogIHJldHVybiB0cnVlOwp9OwoKfSx7Ii4uL2NvbW1vbi9lbnRpdGllcyI6MSwiLi4vY29tbW9uL3V0aWxzIjo1fV0sNDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBQcm9jZWVzcyBlc2NhcGVkIGNoYXJzIGFuZCBoYXJkYnJlYWtzCgondXNlIHN0cmljdCc7Cgp2YXIgRVNDQVBFRCA9IFtdOwoKZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykgeyBFU0NBUEVELnB1c2goMCk7IH0KCidcXCEiIyQlJlwnKCkqKywuLzo7PD0+P0BbXV5fYHt8fX4tJwogIC5zcGxpdCgnJykuZm9yRWFjaChmdW5jdGlvbihjaCkgeyBFU0NBUEVEW2NoLmNoYXJDb2RlQXQoMCldID0gMTsgfSk7CgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlc2NhcGUoc3RhdGUsIHNpbGVudCkgewogIHZhciBjaCwgcG9zID0gc3RhdGUucG9zLCBtYXggPSBzdGF0ZS5wb3NNYXg7CgogIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpICE9PSAweDVDLyogXCAqLykgeyByZXR1cm4gZmFsc2U7IH0KCiAgcG9zKys7CgogIGlmIChwb3MgPCBtYXgpIHsKICAgIGNoID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKTsKCiAgICBpZiAoY2ggPCAyNTYgJiYgRVNDQVBFRFtjaF0gIT09IDApIHsKICAgICAgaWYgKCFzaWxlbnQpIHsgc3RhdGUucGVuZGluZyArPSBzdGF0ZS5zcmNbcG9zXTsgfQogICAgICBzdGF0ZS5wb3MgKz0gMjsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgaWYgKGNoID09PSAweDBBKSB7CiAgICAgIGlmICghc2lsZW50KSB7CiAgICAgICAgc3RhdGUucHVzaCh7CiAgICAgICAgICB0eXBlOiAnaGFyZGJyZWFrJywKICAgICAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbAogICAgICAgIH0pOwogICAgICB9CgogICAgICBwb3MrKzsKICAgICAgLy8gc2tpcCBsZWFkaW5nIHdoaXRlc3BhY2VzIGZyb20gbmV4dCBsaW5lCiAgICAgIHdoaWxlIChwb3MgPCBtYXggJiYgc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gMHgyMCkgeyBwb3MrKzsgfQoKICAgICAgc3RhdGUucG9zID0gcG9zOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9CgogIGlmICghc2lsZW50KSB7IHN0YXRlLnBlbmRpbmcgKz0gJ1xcJzsgfQogIHN0YXRlLnBvcysrOwogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sNDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBQcm9jZXNzIGlubGluZSBmb290bm90ZXMgKF5bLi4uXSkKCid1c2Ugc3RyaWN0JzsKCnZhciBwYXJzZUxpbmtMYWJlbCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvcGFyc2VfbGlua19sYWJlbCcpOwoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZm9vdG5vdGVfaW5saW5lKHN0YXRlLCBzaWxlbnQpIHsKICB2YXIgbGFiZWxTdGFydCwKICAgICAgbGFiZWxFbmQsCiAgICAgIGZvb3Rub3RlSWQsCiAgICAgIG9sZExlbmd0aCwKICAgICAgbWF4ID0gc3RhdGUucG9zTWF4LAogICAgICBzdGFydCA9IHN0YXRlLnBvczsKCiAgaWYgKHN0YXJ0ICsgMiA+PSBtYXgpIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0KSAhPT0gMHg1RS8qIF4gKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0ICsgMSkgIT09IDB4NUIvKiBbICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzdGF0ZS5sZXZlbCA+PSBzdGF0ZS5vcHRpb25zLm1heE5lc3RpbmcpIHsgcmV0dXJuIGZhbHNlOyB9CgogIGxhYmVsU3RhcnQgPSBzdGFydCArIDI7CiAgbGFiZWxFbmQgPSBwYXJzZUxpbmtMYWJlbChzdGF0ZSwgc3RhcnQgKyAxKTsKCiAgLy8gcGFyc2VyIGZhaWxlZCB0byBmaW5kICddJywgc28gaXQncyBub3QgYSB2YWxpZCBub3RlCiAgaWYgKGxhYmVsRW5kIDwgMCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgLy8gV2UgZm91bmQgdGhlIGVuZCBvZiB0aGUgbGluaywgYW5kIGtub3cgZm9yIGEgZmFjdCBpdCdzIGEgdmFsaWQgbGluazsKICAvLyBzbyBhbGwgdGhhdCdzIGxlZnQgdG8gZG8gaXMgdG8gY2FsbCB0b2tlbml6ZXIuCiAgLy8KICBpZiAoIXNpbGVudCkgewogICAgaWYgKCFzdGF0ZS5lbnYuZm9vdG5vdGVzKSB7IHN0YXRlLmVudi5mb290bm90ZXMgPSB7fTsgfQogICAgaWYgKCFzdGF0ZS5lbnYuZm9vdG5vdGVzLmxpc3QpIHsgc3RhdGUuZW52LmZvb3Rub3Rlcy5saXN0ID0gW107IH0KICAgIGZvb3Rub3RlSWQgPSBzdGF0ZS5lbnYuZm9vdG5vdGVzLmxpc3QubGVuZ3RoOwoKICAgIHN0YXRlLnBvcyA9IGxhYmVsU3RhcnQ7CiAgICBzdGF0ZS5wb3NNYXggPSBsYWJlbEVuZDsKCiAgICBzdGF0ZS5wdXNoKHsKICAgICAgdHlwZTogJ2Zvb3Rub3RlX3JlZicsCiAgICAgIGlkOiBmb290bm90ZUlkLAogICAgICBsZXZlbDogc3RhdGUubGV2ZWwKICAgIH0pOwogICAgc3RhdGUubGlua0xldmVsKys7CiAgICBvbGRMZW5ndGggPSBzdGF0ZS50b2tlbnMubGVuZ3RoOwogICAgc3RhdGUucGFyc2VyLnRva2VuaXplKHN0YXRlKTsKICAgIHN0YXRlLmVudi5mb290bm90ZXMubGlzdFtmb290bm90ZUlkXSA9IHsgdG9rZW5zOiBzdGF0ZS50b2tlbnMuc3BsaWNlKG9sZExlbmd0aCkgfTsKICAgIHN0YXRlLmxpbmtMZXZlbC0tOwogIH0KCiAgc3RhdGUucG9zID0gbGFiZWxFbmQgKyAxOwogIHN0YXRlLnBvc01heCA9IG1heDsKICByZXR1cm4gdHJ1ZTsKfTsKCn0seyIuLi9oZWxwZXJzL3BhcnNlX2xpbmtfbGFiZWwiOjEyfV0sNTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBQcm9jZXNzIGZvb3Rub3RlIHJlZmVyZW5jZXMgKFteLi4uXSkKCid1c2Ugc3RyaWN0JzsKCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGZvb3Rub3RlX3JlZihzdGF0ZSwgc2lsZW50KSB7CiAgdmFyIGxhYmVsLAogICAgICBwb3MsCiAgICAgIGZvb3Rub3RlSWQsCiAgICAgIGZvb3Rub3RlU3ViSWQsCiAgICAgIG1heCA9IHN0YXRlLnBvc01heCwKICAgICAgc3RhcnQgPSBzdGF0ZS5wb3M7CgogIC8vIHNob3VsZCBiZSBhdCBsZWFzdCA0IGNoYXJzIC0gIlteeF0iCiAgaWYgKHN0YXJ0ICsgMyA+IG1heCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgaWYgKCFzdGF0ZS5lbnYuZm9vdG5vdGVzIHx8ICFzdGF0ZS5lbnYuZm9vdG5vdGVzLnJlZnMpIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0KSAhPT0gMHg1Qi8qIFsgKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0ICsgMSkgIT09IDB4NUUvKiBeICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzdGF0ZS5sZXZlbCA+PSBzdGF0ZS5vcHRpb25zLm1heE5lc3RpbmcpIHsgcmV0dXJuIGZhbHNlOyB9CgogIGZvciAocG9zID0gc3RhcnQgKyAyOyBwb3MgPCBtYXg7IHBvcysrKSB7CiAgICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gMHgyMCkgeyByZXR1cm4gZmFsc2U7IH0KICAgIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpID09PSAweDBBKSB7IHJldHVybiBmYWxzZTsgfQogICAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgPT09IDB4NUQgLyogXSAqLykgewogICAgICBicmVhazsKICAgIH0KICB9CgogIGlmIChwb3MgPT09IHN0YXJ0ICsgMikgeyByZXR1cm4gZmFsc2U7IH0gLy8gbm8gZW1wdHkgZm9vdG5vdGUgbGFiZWxzCiAgaWYgKHBvcyA+PSBtYXgpIHsgcmV0dXJuIGZhbHNlOyB9CiAgcG9zKys7CgogIGxhYmVsID0gc3RhdGUuc3JjLnNsaWNlKHN0YXJ0ICsgMiwgcG9zIC0gMSk7CiAgaWYgKHR5cGVvZiBzdGF0ZS5lbnYuZm9vdG5vdGVzLnJlZnNbJzonICsgbGFiZWxdID09PSAndW5kZWZpbmVkJykgeyByZXR1cm4gZmFsc2U7IH0KCiAgaWYgKCFzaWxlbnQpIHsKICAgIGlmICghc3RhdGUuZW52LmZvb3Rub3Rlcy5saXN0KSB7IHN0YXRlLmVudi5mb290bm90ZXMubGlzdCA9IFtdOyB9CgogICAgaWYgKHN0YXRlLmVudi5mb290bm90ZXMucmVmc1snOicgKyBsYWJlbF0gPCAwKSB7CiAgICAgIGZvb3Rub3RlSWQgPSBzdGF0ZS5lbnYuZm9vdG5vdGVzLmxpc3QubGVuZ3RoOwogICAgICBzdGF0ZS5lbnYuZm9vdG5vdGVzLmxpc3RbZm9vdG5vdGVJZF0gPSB7IGxhYmVsOiBsYWJlbCwgY291bnQ6IDAgfTsKICAgICAgc3RhdGUuZW52LmZvb3Rub3Rlcy5yZWZzWyc6JyArIGxhYmVsXSA9IGZvb3Rub3RlSWQ7CiAgICB9IGVsc2UgewogICAgICBmb290bm90ZUlkID0gc3RhdGUuZW52LmZvb3Rub3Rlcy5yZWZzWyc6JyArIGxhYmVsXTsKICAgIH0KCiAgICBmb290bm90ZVN1YklkID0gc3RhdGUuZW52LmZvb3Rub3Rlcy5saXN0W2Zvb3Rub3RlSWRdLmNvdW50OwogICAgc3RhdGUuZW52LmZvb3Rub3Rlcy5saXN0W2Zvb3Rub3RlSWRdLmNvdW50Kys7CgogICAgc3RhdGUucHVzaCh7CiAgICAgIHR5cGU6ICdmb290bm90ZV9yZWYnLAogICAgICBpZDogZm9vdG5vdGVJZCwKICAgICAgc3ViSWQ6IGZvb3Rub3RlU3ViSWQsCiAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbAogICAgfSk7CiAgfQoKICBzdGF0ZS5wb3MgPSBwb3M7CiAgc3RhdGUucG9zTWF4ID0gbWF4OwogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sNTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBQcm9jZXNzIGh0bWwgdGFncwoKJ3VzZSBzdHJpY3QnOwoKCnZhciBIVE1MX1RBR19SRSA9IHJlcXVpcmUoJy4uL2NvbW1vbi9odG1sX3JlJykuSFRNTF9UQUdfUkU7CgoKZnVuY3Rpb24gaXNMZXR0ZXIoY2gpIHsKICAvKmVzbGludCBuby1iaXR3aXNlOjAqLwogIHZhciBsYyA9IGNoIHwgMHgyMDsgLy8gdG8gbG93ZXIgY2FzZQogIHJldHVybiAobGMgPj0gMHg2MS8qIGEgKi8pICYmIChsYyA8PSAweDdhLyogeiAqLyk7Cn0KCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGh0bWx0YWcoc3RhdGUsIHNpbGVudCkgewogIHZhciBjaCwgbWF0Y2gsIG1heCwgcG9zID0gc3RhdGUucG9zOwoKICBpZiAoIXN0YXRlLm9wdGlvbnMuaHRtbCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgLy8gQ2hlY2sgc3RhcnQKICBtYXggPSBzdGF0ZS5wb3NNYXg7CiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgIT09IDB4M0MvKiA8ICovIHx8CiAgICAgIHBvcyArIDIgPj0gbWF4KSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICAvLyBRdWljayBmYWlsIG9uIHNlY29uZCBjaGFyCiAgY2ggPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MgKyAxKTsKICBpZiAoY2ggIT09IDB4MjEvKiAhICovICYmCiAgICAgIGNoICE9PSAweDNGLyogPyAqLyAmJgogICAgICBjaCAhPT0gMHgyRi8qIC8gKi8gJiYKICAgICAgIWlzTGV0dGVyKGNoKSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgbWF0Y2ggPSBzdGF0ZS5zcmMuc2xpY2UocG9zKS5tYXRjaChIVE1MX1RBR19SRSk7CiAgaWYgKCFtYXRjaCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgaWYgKCFzaWxlbnQpIHsKICAgIHN0YXRlLnB1c2goewogICAgICB0eXBlOiAnaHRtbHRhZycsCiAgICAgIGNvbnRlbnQ6IHN0YXRlLnNyYy5zbGljZShwb3MsIHBvcyArIG1hdGNoWzBdLmxlbmd0aCksCiAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbAogICAgfSk7CiAgfQogIHN0YXRlLnBvcyArPSBtYXRjaFswXS5sZW5ndGg7CiAgcmV0dXJuIHRydWU7Cn07Cgp9LHsiLi4vY29tbW9uL2h0bWxfcmUiOjN9XSw1MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFByb2Nlc3MgKytpbnNlcnRlZCB0ZXh0KysKCid1c2Ugc3RyaWN0JzsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5zKHN0YXRlLCBzaWxlbnQpIHsKICB2YXIgZm91bmQsCiAgICAgIHBvcywKICAgICAgc3RhY2ssCiAgICAgIG1heCA9IHN0YXRlLnBvc01heCwKICAgICAgc3RhcnQgPSBzdGF0ZS5wb3MsCiAgICAgIGxhc3RDaGFyLAogICAgICBuZXh0Q2hhcjsKCiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0KSAhPT0gMHgyQi8qICsgKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHNpbGVudCkgeyByZXR1cm4gZmFsc2U7IH0gLy8gZG9uJ3QgcnVuIGFueSBwYWlycyBpbiB2YWxpZGF0aW9uIG1vZGUKICBpZiAoc3RhcnQgKyA0ID49IG1heCkgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQgKyAxKSAhPT0gMHgyQi8qICsgKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHN0YXRlLmxldmVsID49IHN0YXRlLm9wdGlvbnMubWF4TmVzdGluZykgeyByZXR1cm4gZmFsc2U7IH0KCiAgbGFzdENoYXIgPSBzdGFydCA+IDAgPyBzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCAtIDEpIDogLTE7CiAgbmV4dENoYXIgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCArIDIpOwoKICBpZiAobGFzdENoYXIgPT09IDB4MkIvKiArICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChuZXh0Q2hhciA9PT0gMHgyQi8qICsgKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKG5leHRDaGFyID09PSAweDIwIHx8IG5leHRDaGFyID09PSAweDBBKSB7IHJldHVybiBmYWxzZTsgfQoKICBwb3MgPSBzdGFydCArIDI7CiAgd2hpbGUgKHBvcyA8IG1heCAmJiBzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpID09PSAweDJCLyogKyAqLykgeyBwb3MrKzsgfQogIGlmIChwb3MgIT09IHN0YXJ0ICsgMikgewogICAgLy8gc2VxdWVuY2Ugb2YgMysgbWFya2VycyB0YWtpbmcgYXMgbGl0ZXJhbCwgc2FtZSBhcyBpbiBhIGVtcGhhc2lzCiAgICBzdGF0ZS5wb3MgKz0gcG9zIC0gc3RhcnQ7CiAgICBpZiAoIXNpbGVudCkgeyBzdGF0ZS5wZW5kaW5nICs9IHN0YXRlLnNyYy5zbGljZShzdGFydCwgcG9zKTsgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICBzdGF0ZS5wb3MgPSBzdGFydCArIDI7CiAgc3RhY2sgPSAxOwoKICB3aGlsZSAoc3RhdGUucG9zICsgMSA8IG1heCkgewogICAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXRlLnBvcykgPT09IDB4MkIvKiArICovKSB7CiAgICAgIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGF0ZS5wb3MgKyAxKSA9PT0gMHgyQi8qICsgKi8pIHsKICAgICAgICBsYXN0Q2hhciA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXRlLnBvcyAtIDEpOwogICAgICAgIG5leHRDaGFyID0gc3RhdGUucG9zICsgMiA8IG1heCA/IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXRlLnBvcyArIDIpIDogLTE7CiAgICAgICAgaWYgKG5leHRDaGFyICE9PSAweDJCLyogKyAqLyAmJiBsYXN0Q2hhciAhPT0gMHgyQi8qICsgKi8pIHsKICAgICAgICAgIGlmIChsYXN0Q2hhciAhPT0gMHgyMCAmJiBsYXN0Q2hhciAhPT0gMHgwQSkgewogICAgICAgICAgICAvLyBjbG9zaW5nICcrKycKICAgICAgICAgICAgc3RhY2stLTsKICAgICAgICAgIH0gZWxzZSBpZiAobmV4dENoYXIgIT09IDB4MjAgJiYgbmV4dENoYXIgIT09IDB4MEEpIHsKICAgICAgICAgICAgLy8gb3BlbmluZyAnKysnCiAgICAgICAgICAgIHN0YWNrKys7CiAgICAgICAgICB9IC8vIGVsc2UgewogICAgICAgICAgICAvLyAgLy8gc3RhbmRhbG9uZSAnICsrICcgaW5kZW50ZWQgd2l0aCBzcGFjZXMKICAgICAgICAgICAgLy8gfQogICAgICAgICAgaWYgKHN0YWNrIDw9IDApIHsKICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzdGF0ZS5wYXJzZXIuc2tpcFRva2VuKHN0YXRlKTsKICB9CgogIGlmICghZm91bmQpIHsKICAgIC8vIHBhcnNlciBmYWlsZWQgdG8gZmluZCBlbmRpbmcgdGFnLCBzbyBpdCdzIG5vdCB2YWxpZCBlbXBoYXNpcwogICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICAvLyBmb3VuZCEKICBzdGF0ZS5wb3NNYXggPSBzdGF0ZS5wb3M7CiAgc3RhdGUucG9zID0gc3RhcnQgKyAyOwoKICBpZiAoIXNpbGVudCkgewogICAgc3RhdGUucHVzaCh7IHR5cGU6ICdpbnNfb3BlbicsIGxldmVsOiBzdGF0ZS5sZXZlbCsrIH0pOwogICAgc3RhdGUucGFyc2VyLnRva2VuaXplKHN0YXRlKTsKICAgIHN0YXRlLnB1c2goeyB0eXBlOiAnaW5zX2Nsb3NlJywgbGV2ZWw6IC0tc3RhdGUubGV2ZWwgfSk7CiAgfQoKICBzdGF0ZS5wb3MgPSBzdGF0ZS5wb3NNYXggKyAyOwogIHN0YXRlLnBvc01heCA9IG1heDsKICByZXR1cm4gdHJ1ZTsKfTsKCn0se31dLDUzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gUHJvY2VzcyBbbGlua3NdKDx0bz4gInN0dWZmIikKCid1c2Ugc3RyaWN0JzsKCnZhciBwYXJzZUxpbmtMYWJlbCAgICAgICA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvcGFyc2VfbGlua19sYWJlbCcpOwp2YXIgcGFyc2VMaW5rRGVzdGluYXRpb24gPSByZXF1aXJlKCcuLi9oZWxwZXJzL3BhcnNlX2xpbmtfZGVzdGluYXRpb24nKTsKdmFyIHBhcnNlTGlua1RpdGxlICAgICAgID0gcmVxdWlyZSgnLi4vaGVscGVycy9wYXJzZV9saW5rX3RpdGxlJyk7CnZhciBub3JtYWxpemVSZWZlcmVuY2UgICA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvbm9ybWFsaXplX3JlZmVyZW5jZScpOwoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbGlua3Moc3RhdGUsIHNpbGVudCkgewogIHZhciBsYWJlbFN0YXJ0LAogICAgICBsYWJlbEVuZCwKICAgICAgbGFiZWwsCiAgICAgIGhyZWYsCiAgICAgIHRpdGxlLAogICAgICBwb3MsCiAgICAgIHJlZiwKICAgICAgY29kZSwKICAgICAgaXNJbWFnZSA9IGZhbHNlLAogICAgICBvbGRQb3MgPSBzdGF0ZS5wb3MsCiAgICAgIG1heCA9IHN0YXRlLnBvc01heCwKICAgICAgc3RhcnQgPSBzdGF0ZS5wb3MsCiAgICAgIG1hcmtlciA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0KTsKCiAgaWYgKG1hcmtlciA9PT0gMHgyMS8qICEgKi8pIHsKICAgIGlzSW1hZ2UgPSB0cnVlOwogICAgbWFya2VyID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQoKytzdGFydCk7CiAgfQoKICBpZiAobWFya2VyICE9PSAweDVCLyogWyAqLykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc3RhdGUubGV2ZWwgPj0gc3RhdGUub3B0aW9ucy5tYXhOZXN0aW5nKSB7IHJldHVybiBmYWxzZTsgfQoKICBsYWJlbFN0YXJ0ID0gc3RhcnQgKyAxOwogIGxhYmVsRW5kID0gcGFyc2VMaW5rTGFiZWwoc3RhdGUsIHN0YXJ0KTsKCiAgLy8gcGFyc2VyIGZhaWxlZCB0byBmaW5kICddJywgc28gaXQncyBub3QgYSB2YWxpZCBsaW5rCiAgaWYgKGxhYmVsRW5kIDwgMCkgeyByZXR1cm4gZmFsc2U7IH0KCiAgcG9zID0gbGFiZWxFbmQgKyAxOwogIGlmIChwb3MgPCBtYXggJiYgc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gMHgyOC8qICggKi8pIHsKICAgIC8vCiAgICAvLyBJbmxpbmUgbGluawogICAgLy8KCiAgICAvLyBbbGlua10oICA8aHJlZj4gICJ0aXRsZSIgICkKICAgIC8vICAgICAgICBeXiBza2lwcGluZyB0aGVzZSBzcGFjZXMKICAgIHBvcysrOwogICAgZm9yICg7IHBvcyA8IG1heDsgcG9zKyspIHsKICAgICAgY29kZSA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcyk7CiAgICAgIGlmIChjb2RlICE9PSAweDIwICYmIGNvZGUgIT09IDB4MEEpIHsgYnJlYWs7IH0KICAgIH0KICAgIGlmIChwb3MgPj0gbWF4KSB7IHJldHVybiBmYWxzZTsgfQoKICAgIC8vIFtsaW5rXSggIDxocmVmPiAgInRpdGxlIiAgKQogICAgLy8gICAgICAgICAgXl5eXl5eIHBhcnNpbmcgbGluayBkZXN0aW5hdGlvbgogICAgc3RhcnQgPSBwb3M7CiAgICBpZiAocGFyc2VMaW5rRGVzdGluYXRpb24oc3RhdGUsIHBvcykpIHsKICAgICAgaHJlZiA9IHN0YXRlLmxpbmtDb250ZW50OwogICAgICBwb3MgPSBzdGF0ZS5wb3M7CiAgICB9IGVsc2UgewogICAgICBocmVmID0gJyc7CiAgICB9CgogICAgLy8gW2xpbmtdKCAgPGhyZWY+ICAidGl0bGUiICApCiAgICAvLyAgICAgICAgICAgICAgICBeXiBza2lwcGluZyB0aGVzZSBzcGFjZXMKICAgIHN0YXJ0ID0gcG9zOwogICAgZm9yICg7IHBvcyA8IG1heDsgcG9zKyspIHsKICAgICAgY29kZSA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcyk7CiAgICAgIGlmIChjb2RlICE9PSAweDIwICYmIGNvZGUgIT09IDB4MEEpIHsgYnJlYWs7IH0KICAgIH0KCiAgICAvLyBbbGlua10oICA8aHJlZj4gICJ0aXRsZSIgICkKICAgIC8vICAgICAgICAgICAgICAgICAgXl5eXl5eXiBwYXJzaW5nIGxpbmsgdGl0bGUKICAgIGlmIChwb3MgPCBtYXggJiYgc3RhcnQgIT09IHBvcyAmJiBwYXJzZUxpbmtUaXRsZShzdGF0ZSwgcG9zKSkgewogICAgICB0aXRsZSA9IHN0YXRlLmxpbmtDb250ZW50OwogICAgICBwb3MgPSBzdGF0ZS5wb3M7CgogICAgICAvLyBbbGlua10oICA8aHJlZj4gICJ0aXRsZSIgICkKICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgXl4gc2tpcHBpbmcgdGhlc2Ugc3BhY2VzCiAgICAgIGZvciAoOyBwb3MgPCBtYXg7IHBvcysrKSB7CiAgICAgICAgY29kZSA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcyk7CiAgICAgICAgaWYgKGNvZGUgIT09IDB4MjAgJiYgY29kZSAhPT0gMHgwQSkgeyBicmVhazsgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aXRsZSA9ICcnOwogICAgfQoKICAgIGlmIChwb3MgPj0gbWF4IHx8IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgIT09IDB4MjkvKiApICovKSB7CiAgICAgIHN0YXRlLnBvcyA9IG9sZFBvczsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcG9zKys7CiAgfSBlbHNlIHsKICAgIC8vCiAgICAvLyBMaW5rIHJlZmVyZW5jZQogICAgLy8KCiAgICAvLyBkbyBub3QgYWxsb3cgbmVzdGVkIHJlZmVyZW5jZSBsaW5rcwogICAgaWYgKHN0YXRlLmxpbmtMZXZlbCA+IDApIHsgcmV0dXJuIGZhbHNlOyB9CgogICAgLy8gW2Zvb10gIFtiYXJdCiAgICAvLyAgICAgIF5eIG9wdGlvbmFsIHdoaXRlc3BhY2UgKGNhbiBpbmNsdWRlIG5ld2xpbmVzKQogICAgZm9yICg7IHBvcyA8IG1heDsgcG9zKyspIHsKICAgICAgY29kZSA9IHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcyk7CiAgICAgIGlmIChjb2RlICE9PSAweDIwICYmIGNvZGUgIT09IDB4MEEpIHsgYnJlYWs7IH0KICAgIH0KCiAgICBpZiAocG9zIDwgbWF4ICYmIHN0YXRlLnNyYy5jaGFyQ29kZUF0KHBvcykgPT09IDB4NUIvKiBbICovKSB7CiAgICAgIHN0YXJ0ID0gcG9zICsgMTsKICAgICAgcG9zID0gcGFyc2VMaW5rTGFiZWwoc3RhdGUsIHBvcyk7CiAgICAgIGlmIChwb3MgPj0gMCkgewogICAgICAgIGxhYmVsID0gc3RhdGUuc3JjLnNsaWNlKHN0YXJ0LCBwb3MrKyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcG9zID0gc3RhcnQgLSAxOwogICAgICB9CiAgICB9CgogICAgLy8gY292ZXJzIGxhYmVsID09PSAnJyBhbmQgbGFiZWwgPT09IHVuZGVmaW5lZAogICAgLy8gKGNvbGxhcHNlZCByZWZlcmVuY2UgbGluayBhbmQgc2hvcnRjdXQgcmVmZXJlbmNlIGxpbmsgcmVzcGVjdGl2ZWx5KQogICAgaWYgKCFsYWJlbCkgewogICAgICBpZiAodHlwZW9mIGxhYmVsID09PSAndW5kZWZpbmVkJykgewogICAgICAgIHBvcyA9IGxhYmVsRW5kICsgMTsKICAgICAgfQogICAgICBsYWJlbCA9IHN0YXRlLnNyYy5zbGljZShsYWJlbFN0YXJ0LCBsYWJlbEVuZCk7CiAgICB9CgogICAgcmVmID0gc3RhdGUuZW52LnJlZmVyZW5jZXNbbm9ybWFsaXplUmVmZXJlbmNlKGxhYmVsKV07CiAgICBpZiAoIXJlZikgewogICAgICBzdGF0ZS5wb3MgPSBvbGRQb3M7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGhyZWYgPSByZWYuaHJlZjsKICAgIHRpdGxlID0gcmVmLnRpdGxlOwogIH0KCiAgLy8KICAvLyBXZSBmb3VuZCB0aGUgZW5kIG9mIHRoZSBsaW5rLCBhbmQga25vdyBmb3IgYSBmYWN0IGl0J3MgYSB2YWxpZCBsaW5rOwogIC8vIHNvIGFsbCB0aGF0J3MgbGVmdCB0byBkbyBpcyB0byBjYWxsIHRva2VuaXplci4KICAvLwogIGlmICghc2lsZW50KSB7CiAgICBzdGF0ZS5wb3MgPSBsYWJlbFN0YXJ0OwogICAgc3RhdGUucG9zTWF4ID0gbGFiZWxFbmQ7CgogICAgaWYgKGlzSW1hZ2UpIHsKICAgICAgc3RhdGUucHVzaCh7CiAgICAgICAgdHlwZTogJ2ltYWdlJywKICAgICAgICBzcmM6IGhyZWYsCiAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgIGFsdDogc3RhdGUuc3JjLnN1YnN0cihsYWJlbFN0YXJ0LCBsYWJlbEVuZCAtIGxhYmVsU3RhcnQpLAogICAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbAogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHN0YXRlLnB1c2goewogICAgICAgIHR5cGU6ICdsaW5rX29wZW4nLAogICAgICAgIGhyZWY6IGhyZWYsCiAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbCsrCiAgICAgIH0pOwogICAgICBzdGF0ZS5saW5rTGV2ZWwrKzsKICAgICAgc3RhdGUucGFyc2VyLnRva2VuaXplKHN0YXRlKTsKICAgICAgc3RhdGUubGlua0xldmVsLS07CiAgICAgIHN0YXRlLnB1c2goeyB0eXBlOiAnbGlua19jbG9zZScsIGxldmVsOiAtLXN0YXRlLmxldmVsIH0pOwogICAgfQogIH0KCiAgc3RhdGUucG9zID0gcG9zOwogIHN0YXRlLnBvc01heCA9IG1heDsKICByZXR1cm4gdHJ1ZTsKfTsKCn0seyIuLi9oZWxwZXJzL25vcm1hbGl6ZV9yZWZlcmVuY2UiOjEwLCIuLi9oZWxwZXJzL3BhcnNlX2xpbmtfZGVzdGluYXRpb24iOjExLCIuLi9oZWxwZXJzL3BhcnNlX2xpbmtfbGFiZWwiOjEyLCIuLi9oZWxwZXJzL3BhcnNlX2xpbmtfdGl0bGUiOjEzfV0sNTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBQcm9jZXNzID09aGlnaGxpZ2h0ZWQgdGV4dD09CgondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlbChzdGF0ZSwgc2lsZW50KSB7CiAgdmFyIGZvdW5kLAogICAgICBwb3MsCiAgICAgIHN0YWNrLAogICAgICBtYXggPSBzdGF0ZS5wb3NNYXgsCiAgICAgIHN0YXJ0ID0gc3RhdGUucG9zLAogICAgICBsYXN0Q2hhciwKICAgICAgbmV4dENoYXI7CgogIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCkgIT09IDB4M0QvKiA9ICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzaWxlbnQpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIGRvbid0IHJ1biBhbnkgcGFpcnMgaW4gdmFsaWRhdGlvbiBtb2RlCiAgaWYgKHN0YXJ0ICsgNCA+PSBtYXgpIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0ICsgMSkgIT09IDB4M0QvKiA9ICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzdGF0ZS5sZXZlbCA+PSBzdGF0ZS5vcHRpb25zLm1heE5lc3RpbmcpIHsgcmV0dXJuIGZhbHNlOyB9CgogIGxhc3RDaGFyID0gc3RhcnQgPiAwID8gc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQgLSAxKSA6IC0xOwogIG5leHRDaGFyID0gc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhcnQgKyAyKTsKCiAgaWYgKGxhc3RDaGFyID09PSAweDNELyogPSAqLykgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAobmV4dENoYXIgPT09IDB4M0QvKiA9ICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChuZXh0Q2hhciA9PT0gMHgyMCB8fCBuZXh0Q2hhciA9PT0gMHgwQSkgeyByZXR1cm4gZmFsc2U7IH0KCiAgcG9zID0gc3RhcnQgKyAyOwogIHdoaWxlIChwb3MgPCBtYXggJiYgc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gMHgzRC8qID0gKi8pIHsgcG9zKys7IH0KICBpZiAocG9zICE9PSBzdGFydCArIDIpIHsKICAgIC8vIHNlcXVlbmNlIG9mIDMrIG1hcmtlcnMgdGFraW5nIGFzIGxpdGVyYWwsIHNhbWUgYXMgaW4gYSBlbXBoYXNpcwogICAgc3RhdGUucG9zICs9IHBvcyAtIHN0YXJ0OwogICAgaWYgKCFzaWxlbnQpIHsgc3RhdGUucGVuZGluZyArPSBzdGF0ZS5zcmMuc2xpY2Uoc3RhcnQsIHBvcyk7IH0KICAgIHJldHVybiB0cnVlOwogIH0KCiAgc3RhdGUucG9zID0gc3RhcnQgKyAyOwogIHN0YWNrID0gMTsKCiAgd2hpbGUgKHN0YXRlLnBvcyArIDEgPCBtYXgpIHsKICAgIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGF0ZS5wb3MpID09PSAweDNELyogPSAqLykgewogICAgICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhdGUucG9zICsgMSkgPT09IDB4M0QvKiA9ICovKSB7CiAgICAgICAgbGFzdENoYXIgPSBzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGF0ZS5wb3MgLSAxKTsKICAgICAgICBuZXh0Q2hhciA9IHN0YXRlLnBvcyArIDIgPCBtYXggPyBzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGF0ZS5wb3MgKyAyKSA6IC0xOwogICAgICAgIGlmIChuZXh0Q2hhciAhPT0gMHgzRC8qID0gKi8gJiYgbGFzdENoYXIgIT09IDB4M0QvKiA9ICovKSB7CiAgICAgICAgICBpZiAobGFzdENoYXIgIT09IDB4MjAgJiYgbGFzdENoYXIgIT09IDB4MEEpIHsKICAgICAgICAgICAgLy8gY2xvc2luZyAnPT0nCiAgICAgICAgICAgIHN0YWNrLS07CiAgICAgICAgICB9IGVsc2UgaWYgKG5leHRDaGFyICE9PSAweDIwICYmIG5leHRDaGFyICE9PSAweDBBKSB7CiAgICAgICAgICAgIC8vIG9wZW5pbmcgJz09JwogICAgICAgICAgICBzdGFjaysrOwogICAgICAgICAgfSAvLyBlbHNlIHsKICAgICAgICAgICAgLy8gIC8vIHN0YW5kYWxvbmUgJyA9PSAnIGluZGVudGVkIHdpdGggc3BhY2VzCiAgICAgICAgICAgIC8vIH0KICAgICAgICAgIGlmIChzdGFjayA8PSAwKSB7CiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc3RhdGUucGFyc2VyLnNraXBUb2tlbihzdGF0ZSk7CiAgfQoKICBpZiAoIWZvdW5kKSB7CiAgICAvLyBwYXJzZXIgZmFpbGVkIHRvIGZpbmQgZW5kaW5nIHRhZywgc28gaXQncyBub3QgdmFsaWQgZW1waGFzaXMKICAgIHN0YXRlLnBvcyA9IHN0YXJ0OwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8gZm91bmQhCiAgc3RhdGUucG9zTWF4ID0gc3RhdGUucG9zOwogIHN0YXRlLnBvcyA9IHN0YXJ0ICsgMjsKCiAgaWYgKCFzaWxlbnQpIHsKICAgIHN0YXRlLnB1c2goeyB0eXBlOiAnbWFya19vcGVuJywgbGV2ZWw6IHN0YXRlLmxldmVsKysgfSk7CiAgICBzdGF0ZS5wYXJzZXIudG9rZW5pemUoc3RhdGUpOwogICAgc3RhdGUucHVzaCh7IHR5cGU6ICdtYXJrX2Nsb3NlJywgbGV2ZWw6IC0tc3RhdGUubGV2ZWwgfSk7CiAgfQoKICBzdGF0ZS5wb3MgPSBzdGF0ZS5wb3NNYXggKyAyOwogIHN0YXRlLnBvc01heCA9IG1heDsKICByZXR1cm4gdHJ1ZTsKfTsKCn0se31dLDU1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gUHJvY2Vlc3MgJ1xuJwoKJ3VzZSBzdHJpY3QnOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBuZXdsaW5lKHN0YXRlLCBzaWxlbnQpIHsKICB2YXIgcG1heCwgbWF4LCBwb3MgPSBzdGF0ZS5wb3M7CgogIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChwb3MpICE9PSAweDBBLyogXG4gKi8pIHsgcmV0dXJuIGZhbHNlOyB9CgogIHBtYXggPSBzdGF0ZS5wZW5kaW5nLmxlbmd0aCAtIDE7CiAgbWF4ID0gc3RhdGUucG9zTWF4OwoKICAvLyAnICBcbicgLT4gaGFyZGJyZWFrCiAgLy8gTG9va3VwIGluIHBlbmRpbmcgY2hhcnMgaXMgYmFkIHByYWN0aWNlISBEb24ndCBjb3B5IHRvIG90aGVyIHJ1bGVzIQogIC8vIFBlbmRpbmcgc3RyaW5nIGlzIHN0b3JlZCBpbiBjb25jYXQgbW9kZSwgaW5kZXhlZCBsb29rdXBzIHdpbGwgY2F1c2UKICAvLyBjb252ZXJ0aW9uIHRvIGZsYXQgbW9kZS4KICBpZiAoIXNpbGVudCkgewogICAgaWYgKHBtYXggPj0gMCAmJiBzdGF0ZS5wZW5kaW5nLmNoYXJDb2RlQXQocG1heCkgPT09IDB4MjApIHsKICAgICAgaWYgKHBtYXggPj0gMSAmJiBzdGF0ZS5wZW5kaW5nLmNoYXJDb2RlQXQocG1heCAtIDEpID09PSAweDIwKSB7CiAgICAgICAgc3RhdGUucGVuZGluZyA9IHN0YXRlLnBlbmRpbmcucmVwbGFjZSgvICskLywgJycpOwogICAgICAgIHN0YXRlLnB1c2goewogICAgICAgICAgdHlwZTogJ2hhcmRicmVhaycsCiAgICAgICAgICBsZXZlbDogc3RhdGUubGV2ZWwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdGF0ZS5wZW5kaW5nID0gc3RhdGUucGVuZGluZy5zbGljZSgwLCAtMSk7CiAgICAgICAgc3RhdGUucHVzaCh7CiAgICAgICAgICB0eXBlOiAnc29mdGJyZWFrJywKICAgICAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbAogICAgICAgIH0pOwogICAgICB9CgogICAgfSBlbHNlIHsKICAgICAgc3RhdGUucHVzaCh7CiAgICAgICAgdHlwZTogJ3NvZnRicmVhaycsCiAgICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsCiAgICAgIH0pOwogICAgfQogIH0KCiAgcG9zKys7CgogIC8vIHNraXAgaGVhZGluZyBzcGFjZXMgZm9yIG5leHQgbGluZQogIHdoaWxlIChwb3MgPCBtYXggJiYgc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSA9PT0gMHgyMCkgeyBwb3MrKzsgfQoKICBzdGF0ZS5wb3MgPSBwb3M7CiAgcmV0dXJuIHRydWU7Cn07Cgp9LHt9XSw1NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIElubGluZSBwYXJzZXIgc3RhdGUKCid1c2Ugc3RyaWN0JzsKCgpmdW5jdGlvbiBTdGF0ZUlubGluZShzcmMsIHBhcnNlcklubGluZSwgb3B0aW9ucywgZW52LCBvdXRUb2tlbnMpIHsKICB0aGlzLnNyYyA9IHNyYzsKICB0aGlzLmVudiA9IGVudjsKICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogIHRoaXMucGFyc2VyID0gcGFyc2VySW5saW5lOwogIHRoaXMudG9rZW5zID0gb3V0VG9rZW5zOwogIHRoaXMucG9zID0gMDsKICB0aGlzLnBvc01heCA9IHRoaXMuc3JjLmxlbmd0aDsKICB0aGlzLmxldmVsID0gMDsKICB0aGlzLnBlbmRpbmcgPSAnJzsKICB0aGlzLnBlbmRpbmdMZXZlbCA9IDA7CgogIHRoaXMuY2FjaGUgPSBbXTsgICAgICAgIC8vIFN0b3JlcyB7IHN0YXJ0OiBlbmQgfSBwYWlycy4gVXNlZnVsIGZvciBiYWNrdHJhY2sKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvcHRpbWl6YXRpb24gb2YgcGFpcnMgcGFyc2UgKGVtcGhhc2lzLCBzdHJpa2VzKS4KCiAgLy8gTGluayBwYXJzZXIgc3RhdGUgdmFycwoKICB0aGlzLmlzSW5MYWJlbCA9IGZhbHNlOyAvLyBTZXQgdHJ1ZSB3aGVuIHNlZWsgbGluayBsYWJlbCAtIHdlIHNob3VsZCBkaXNhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gInBhaXJlZCIgcnVsZXMgKGVtcGhhc2lzLCBzdHJpa2VzKSB0byBub3Qgc2tpcAogICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhaWxpbmcgYF1gCgogIHRoaXMubGlua0xldmVsID0gMDsgICAgIC8vIEluY3JlbWVudCBmb3IgZWFjaCBuZXN0aW5nIGxpbmsuIFVzZWQgdG8gcHJldmVudAogICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5lc3RpbmcgaW4gZGVmaW5pdGlvbnMKCiAgdGhpcy5saW5rQ29udGVudCA9ICcnOyAgLy8gVGVtcG9yYXJ5IHN0b3JhZ2UgZm9yIGxpbmsgdXJsCgogIHRoaXMubGFiZWxVbm1hdGNoZWRTY29wZXMgPSAwOyAvLyBUcmFjayB1bnBhaXJlZCBgW2AgZm9yIGxpbmsgbGFiZWxzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChiYWNrdHJhY2sgb3B0aW1pemF0aW9uKQp9CgoKLy8gRmx1c2ggcGVuZGluZyB0ZXh0Ci8vClN0YXRlSW5saW5lLnByb3RvdHlwZS5wdXNoUGVuZGluZyA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLnRva2Vucy5wdXNoKHsKICAgIHR5cGU6ICd0ZXh0JywKICAgIGNvbnRlbnQ6IHRoaXMucGVuZGluZywKICAgIGxldmVsOiB0aGlzLnBlbmRpbmdMZXZlbAogIH0pOwogIHRoaXMucGVuZGluZyA9ICcnOwp9OwoKCi8vIFB1c2ggbmV3IHRva2VuIHRvICJzdHJlYW0iLgovLyBJZiBwZW5kaW5nIHRleHQgZXhpc3RzIC0gZmx1c2ggaXQgYXMgdGV4dCB0b2tlbgovLwpTdGF0ZUlubGluZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uICh0b2tlbikgewogIGlmICh0aGlzLnBlbmRpbmcpIHsKICAgIHRoaXMucHVzaFBlbmRpbmcoKTsKICB9CgogIHRoaXMudG9rZW5zLnB1c2godG9rZW4pOwogIHRoaXMucGVuZGluZ0xldmVsID0gdGhpcy5sZXZlbDsKfTsKCgovLyBTdG9yZSB2YWx1ZSB0byBjYWNoZS4KLy8gISEhIEltcGxlbWVudGF0aW9uIGhhcyBwYXJzZXItc3BlY2lmaWMgb3B0aW1pemF0aW9ucwovLyAhISEga2V5cyBNVVNUIGJlIGludGVnZXIsID49IDA7IHZhbHVlcyBNVVNUIGJlIGludGVnZXIsID4gMAovLwpTdGF0ZUlubGluZS5wcm90b3R5cGUuY2FjaGVTZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWwpIHsKICBmb3IgKHZhciBpID0gdGhpcy5jYWNoZS5sZW5ndGg7IGkgPD0ga2V5OyBpKyspIHsKICAgIHRoaXMuY2FjaGUucHVzaCgwKTsKICB9CgogIHRoaXMuY2FjaGVba2V5XSA9IHZhbDsKfTsKCgovLyBHZXQgY2FjaGUgdmFsdWUKLy8KU3RhdGVJbmxpbmUucHJvdG90eXBlLmNhY2hlR2V0ID0gZnVuY3Rpb24gKGtleSkgewogIHJldHVybiBrZXkgPCB0aGlzLmNhY2hlLmxlbmd0aCA/IHRoaXMuY2FjaGVba2V5XSA6IDA7Cn07CgoKbW9kdWxlLmV4cG9ydHMgPSBTdGF0ZUlubGluZTsKCn0se31dLDU3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gUHJvY2VzcyB+c3Vic2NyaXB0fgoKJ3VzZSBzdHJpY3QnOwoKLy8gc2FtZSBhcyBVTkVTQ0FQRV9NRF9SRSBwbHVzIGEgc3BhY2UKdmFyIFVORVNDQVBFX1JFID0gL1xcKFsgXFwhIiMkJSYnKCkqKywuXC86Ozw9Pj9AW1xdXl9ge3x9fi1dKS9nOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzdWIoc3RhdGUsIHNpbGVudCkgewogIHZhciBmb3VuZCwKICAgICAgY29udGVudCwKICAgICAgbWF4ID0gc3RhdGUucG9zTWF4LAogICAgICBzdGFydCA9IHN0YXRlLnBvczsKCiAgaWYgKHN0YXRlLnNyYy5jaGFyQ29kZUF0KHN0YXJ0KSAhPT0gMHg3RS8qIH4gKi8pIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHNpbGVudCkgeyByZXR1cm4gZmFsc2U7IH0gLy8gZG9uJ3QgcnVuIGFueSBwYWlycyBpbiB2YWxpZGF0aW9uIG1vZGUKICBpZiAoc3RhcnQgKyAyID49IG1heCkgeyByZXR1cm4gZmFsc2U7IH0KICBpZiAoc3RhdGUubGV2ZWwgPj0gc3RhdGUub3B0aW9ucy5tYXhOZXN0aW5nKSB7IHJldHVybiBmYWxzZTsgfQoKICBzdGF0ZS5wb3MgPSBzdGFydCArIDE7CgogIHdoaWxlIChzdGF0ZS5wb3MgPCBtYXgpIHsKICAgIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGF0ZS5wb3MpID09PSAweDdFLyogfiAqLykgewogICAgICBmb3VuZCA9IHRydWU7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIHN0YXRlLnBhcnNlci5za2lwVG9rZW4oc3RhdGUpOwogIH0KCiAgaWYgKCFmb3VuZCB8fCBzdGFydCArIDEgPT09IHN0YXRlLnBvcykgewogICAgc3RhdGUucG9zID0gc3RhcnQ7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBjb250ZW50ID0gc3RhdGUuc3JjLnNsaWNlKHN0YXJ0ICsgMSwgc3RhdGUucG9zKTsKCiAgLy8gZG9uJ3QgYWxsb3cgdW5lc2NhcGVkIHNwYWNlcy9uZXdsaW5lcyBpbnNpZGUKICBpZiAoY29udGVudC5tYXRjaCgvKF58W15cXF0pKFxcXFwpKlxzLykpIHsKICAgIHN0YXRlLnBvcyA9IHN0YXJ0OwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8gZm91bmQhCiAgc3RhdGUucG9zTWF4ID0gc3RhdGUucG9zOwogIHN0YXRlLnBvcyA9IHN0YXJ0ICsgMTsKCiAgaWYgKCFzaWxlbnQpIHsKICAgIHN0YXRlLnB1c2goewogICAgICB0eXBlOiAnc3ViJywKICAgICAgbGV2ZWw6IHN0YXRlLmxldmVsLAogICAgICBjb250ZW50OiBjb250ZW50LnJlcGxhY2UoVU5FU0NBUEVfUkUsICckMScpCiAgICB9KTsKICB9CgogIHN0YXRlLnBvcyA9IHN0YXRlLnBvc01heCArIDE7CiAgc3RhdGUucG9zTWF4ID0gbWF4OwogIHJldHVybiB0cnVlOwp9OwoKfSx7fV0sNTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBQcm9jZXNzIF5zdXBlcnNjcmlwdF4KCid1c2Ugc3RyaWN0JzsKCi8vIHNhbWUgYXMgVU5FU0NBUEVfTURfUkUgcGx1cyBhIHNwYWNlCnZhciBVTkVTQ0FQRV9SRSA9IC9cXChbIFxcISIjJCUmJygpKissLlwvOjs8PT4/QFtcXV5fYHt8fX4tXSkvZzsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3VwKHN0YXRlLCBzaWxlbnQpIHsKICB2YXIgZm91bmQsCiAgICAgIGNvbnRlbnQsCiAgICAgIG1heCA9IHN0YXRlLnBvc01heCwKICAgICAgc3RhcnQgPSBzdGF0ZS5wb3M7CgogIGlmIChzdGF0ZS5zcmMuY2hhckNvZGVBdChzdGFydCkgIT09IDB4NUUvKiBeICovKSB7IHJldHVybiBmYWxzZTsgfQogIGlmIChzaWxlbnQpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIGRvbid0IHJ1biBhbnkgcGFpcnMgaW4gdmFsaWRhdGlvbiBtb2RlCiAgaWYgKHN0YXJ0ICsgMiA+PSBtYXgpIHsgcmV0dXJuIGZhbHNlOyB9CiAgaWYgKHN0YXRlLmxldmVsID49IHN0YXRlLm9wdGlvbnMubWF4TmVzdGluZykgeyByZXR1cm4gZmFsc2U7IH0KCiAgc3RhdGUucG9zID0gc3RhcnQgKyAxOwoKICB3aGlsZSAoc3RhdGUucG9zIDwgbWF4KSB7CiAgICBpZiAoc3RhdGUuc3JjLmNoYXJDb2RlQXQoc3RhdGUucG9zKSA9PT0gMHg1RS8qIF4gKi8pIHsKICAgICAgZm91bmQgPSB0cnVlOwogICAgICBicmVhazsKICAgIH0KCiAgICBzdGF0ZS5wYXJzZXIuc2tpcFRva2VuKHN0YXRlKTsKICB9CgogIGlmICghZm91bmQgfHwgc3RhcnQgKyAxID09PSBzdGF0ZS5wb3MpIHsKICAgIHN0YXRlLnBvcyA9IHN0YXJ0OwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgY29udGVudCA9IHN0YXRlLnNyYy5zbGljZShzdGFydCArIDEsIHN0YXRlLnBvcyk7CgogIC8vIGRvbid0IGFsbG93IHVuZXNjYXBlZCBzcGFjZXMvbmV3bGluZXMgaW5zaWRlCiAgaWYgKGNvbnRlbnQubWF0Y2goLyhefFteXFxdKShcXFxcKSpccy8pKSB7CiAgICBzdGF0ZS5wb3MgPSBzdGFydDsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIC8vIGZvdW5kIQogIHN0YXRlLnBvc01heCA9IHN0YXRlLnBvczsKICBzdGF0ZS5wb3MgPSBzdGFydCArIDE7CgogIGlmICghc2lsZW50KSB7CiAgICBzdGF0ZS5wdXNoKHsKICAgICAgdHlwZTogJ3N1cCcsCiAgICAgIGxldmVsOiBzdGF0ZS5sZXZlbCwKICAgICAgY29udGVudDogY29udGVudC5yZXBsYWNlKFVORVNDQVBFX1JFLCAnJDEnKQogICAgfSk7CiAgfQoKICBzdGF0ZS5wb3MgPSBzdGF0ZS5wb3NNYXggKyAxOwogIHN0YXRlLnBvc01heCA9IG1heDsKICByZXR1cm4gdHJ1ZTsKfTsKCn0se31dLDU5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gU2tpcCB0ZXh0IGNoYXJhY3RlcnMgZm9yIHRleHQgdG9rZW4sIHBsYWNlIHRob3NlIHRvIHBlbmRpbmcgYnVmZmVyCi8vIGFuZCBpbmNyZW1lbnQgY3VycmVudCBwb3MKCid1c2Ugc3RyaWN0JzsKCgovLyBSdWxlIHRvIHNraXAgcHVyZSB0ZXh0Ci8vICd7fSQlQH4rPTonIHJlc2VydmVkIGZvciBleHRlbnRpb25zCgpmdW5jdGlvbiBpc1Rlcm1pbmF0b3JDaGFyKGNoKSB7CiAgc3dpdGNoIChjaCkgewogICAgY2FzZSAweDBBLyogXG4gKi86CiAgICBjYXNlIDB4NUMvKiBcICovOgogICAgY2FzZSAweDYwLyogYCAqLzoKICAgIGNhc2UgMHgyQS8qICogKi86CiAgICBjYXNlIDB4NUYvKiBfICovOgogICAgY2FzZSAweDVFLyogXiAqLzoKICAgIGNhc2UgMHg1Qi8qIFsgKi86CiAgICBjYXNlIDB4NUQvKiBdICovOgogICAgY2FzZSAweDIxLyogISAqLzoKICAgIGNhc2UgMHgyNi8qICYgKi86CiAgICBjYXNlIDB4M0MvKiA8ICovOgogICAgY2FzZSAweDNFLyogPiAqLzoKICAgIGNhc2UgMHg3Qi8qIHsgKi86CiAgICBjYXNlIDB4N0QvKiB9ICovOgogICAgY2FzZSAweDI0LyogJCAqLzoKICAgIGNhc2UgMHgyNS8qICUgKi86CiAgICBjYXNlIDB4NDAvKiBAICovOgogICAgY2FzZSAweDdFLyogfiAqLzoKICAgIGNhc2UgMHgyQi8qICsgKi86CiAgICBjYXNlIDB4M0QvKiA9ICovOgogICAgY2FzZSAweDNBLyogOiAqLzoKICAgICAgcmV0dXJuIHRydWU7CiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gZmFsc2U7CiAgfQp9Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRleHQoc3RhdGUsIHNpbGVudCkgewogIHZhciBwb3MgPSBzdGF0ZS5wb3M7CgogIHdoaWxlIChwb3MgPCBzdGF0ZS5wb3NNYXggJiYgIWlzVGVybWluYXRvckNoYXIoc3RhdGUuc3JjLmNoYXJDb2RlQXQocG9zKSkpIHsKICAgIHBvcysrOwogIH0KCiAgaWYgKHBvcyA9PT0gc3RhdGUucG9zKSB7IHJldHVybiBmYWxzZTsgfQoKICBpZiAoIXNpbGVudCkgeyBzdGF0ZS5wZW5kaW5nICs9IHN0YXRlLnNyYy5zbGljZShzdGF0ZS5wb3MsIHBvcyk7IH0KCiAgc3RhdGUucG9zID0gcG9zOwoKICByZXR1cm4gdHJ1ZTsKfTsKCn0se31dLDYwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7CiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgewogICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlIHVubGVzcyBhbWRNb2R1bGVJZCBpcyBzZXQKICAgIGRlZmluZShbXSwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gKHJvb3RbJ0F1dG9saW5rZXInXSA9IGZhY3RvcnkoKSk7CiAgICB9KTsKICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykgewogICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0CiAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cywKICAgIC8vIGxpa2UgTm9kZS4KICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwogIH0gZWxzZSB7CiAgICByb290WydBdXRvbGlua2VyJ10gPSBmYWN0b3J5KCk7CiAgfQp9KHRoaXMsIGZ1bmN0aW9uICgpIHsKCi8qIQogKiBBdXRvbGlua2VyLmpzCiAqIDAuMTUuMwogKgogKiBDb3B5cmlnaHQoYykgMjAxNSBHcmVnb3J5IEphY29icyA8Z3JlZ0BncmVnLWphY29icy5jb20+CiAqIE1JVCBMaWNlbnNlZC4gaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHAKICoKICogaHR0cHM6Ly9naXRodWIuY29tL2dyZWdqYWNvYnMvQXV0b2xpbmtlci5qcwogKi8KLyoqCiAqIEBjbGFzcyBBdXRvbGlua2VyCiAqIEBleHRlbmRzIE9iamVjdAogKiAKICogVXRpbGl0eSBjbGFzcyB1c2VkIHRvIHByb2Nlc3MgYSBnaXZlbiBzdHJpbmcgb2YgdGV4dCwgYW5kIHdyYXAgdGhlIFVSTHMsIGVtYWlsIGFkZHJlc3NlcywgYW5kIFR3aXR0ZXIgaGFuZGxlcyBpbiAKICogdGhlIGFwcHJvcHJpYXRlIGFuY2hvciAoJmx0O2EmZ3Q7KSB0YWdzIHRvIHR1cm4gdGhlbSBpbnRvIGxpbmtzLgogKiAKICogQW55IG9mIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgbWF5IGJlIHByb3ZpZGVkIGluIGFuIE9iamVjdCAobWFwKSBwcm92aWRlZCB0byB0aGUgQXV0b2xpbmtlciBjb25zdHJ1Y3Rvciwgd2hpY2gKICogd2lsbCBjb25maWd1cmUgaG93IHRoZSB7QGxpbmsgI2xpbmsgbGluaygpfSBtZXRob2Qgd2lsbCBwcm9jZXNzIHRoZSBsaW5rcy4KICogCiAqIEZvciBleGFtcGxlOgogKiAKICogICAgIHZhciBhdXRvbGlua2VyID0gbmV3IEF1dG9saW5rZXIoIHsKICogICAgICAgICBuZXdXaW5kb3cgOiBmYWxzZSwKICogICAgICAgICB0cnVuY2F0ZSAgOiAzMAogKiAgICAgfSApOwogKiAgICAgCiAqICAgICB2YXIgaHRtbCA9IGF1dG9saW5rZXIubGluayggIkpvZSB3ZW50IHRvIHd3dy55YWhvby5jb20iICk7CiAqICAgICAvLyBwcm9kdWNlczogJ0pvZSB3ZW50IHRvIDxhIGhyZWY9Imh0dHA6Ly93d3cueWFob28uY29tIj55YWhvby5jb208L2E+JwogKiAKICogCiAqIFRoZSB7QGxpbmsgI3N0YXRpYy1saW5rIHN0YXRpYyBsaW5rKCl9IG1ldGhvZCBtYXkgYWxzbyBiZSB1c2VkIHRvIGlubGluZSBvcHRpb25zIGludG8gYSBzaW5nbGUgY2FsbCwgd2hpY2ggbWF5CiAqIGJlIG1vcmUgY29udmVuaWVudCBmb3Igb25lLW9mZiB1c2VzLiBGb3IgZXhhbXBsZToKICogCiAqICAgICB2YXIgaHRtbCA9IEF1dG9saW5rZXIubGluayggIkpvZSB3ZW50IHRvIHd3dy55YWhvby5jb20iLCB7CiAqICAgICAgICAgbmV3V2luZG93IDogZmFsc2UsCiAqICAgICAgICAgdHJ1bmNhdGUgIDogMzAKICogICAgIH0gKTsKICogICAgIC8vIHByb2R1Y2VzOiAnSm9lIHdlbnQgdG8gPGEgaHJlZj0iaHR0cDovL3d3dy55YWhvby5jb20iPnlhaG9vLmNvbTwvYT4nCiAqIAogKiAKICogIyMgQ3VzdG9tIFJlcGxhY2VtZW50cyBvZiBMaW5rcwogKiAKICogSWYgdGhlIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBkbyBub3QgcHJvdmlkZSBlbm91Z2ggZmxleGliaWxpdHksIGEge0BsaW5rICNyZXBsYWNlRm59IG1heSBiZSBwcm92aWRlZCB0byBmdWxseSBjdXN0b21pemUKICogdGhlIG91dHB1dCBvZiBBdXRvbGlua2VyLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbmNlIGZvciBlYWNoIFVSTC9FbWFpbC9Ud2l0dGVyIGhhbmRsZSBtYXRjaCB0aGF0IGlzIGVuY291bnRlcmVkLgogKiAKICogRm9yIGV4YW1wbGU6CiAqIAogKiAgICAgdmFyIGlucHV0ID0gIi4uLiI7ICAvLyBzdHJpbmcgd2l0aCBVUkxzLCBFbWFpbCBBZGRyZXNzZXMsIGFuZCBUd2l0dGVyIEhhbmRsZXMKICogICAgIAogKiAgICAgdmFyIGxpbmtlZFRleHQgPSBBdXRvbGlua2VyLmxpbmsoIGlucHV0LCB7CiAqICAgICAgICAgcmVwbGFjZUZuIDogZnVuY3Rpb24oIGF1dG9saW5rZXIsIG1hdGNoICkgewogKiAgICAgICAgICAgICBjb25zb2xlLmxvZyggImhyZWYgPSAiLCBtYXRjaC5nZXRBbmNob3JIcmVmKCkgKTsKICogICAgICAgICAgICAgY29uc29sZS5sb2coICJ0ZXh0ID0gIiwgbWF0Y2guZ2V0QW5jaG9yVGV4dCgpICk7CiAqICAgICAgICAgCiAqICAgICAgICAgICAgIHN3aXRjaCggbWF0Y2guZ2V0VHlwZSgpICkgewogKiAgICAgICAgICAgICAgICAgY2FzZSAndXJsJyA6IAogKiAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAidXJsOiAiLCBtYXRjaC5nZXRVcmwoKSApOwogKiAgICAgICAgICAgICAgICAgICAgIAogKiAgICAgICAgICAgICAgICAgICAgIGlmKCBtYXRjaC5nZXRVcmwoKS5pbmRleE9mKCAnbXlzaXRlLmNvbScgKSA9PT0gLTEgKSB7CiAqICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSBhdXRvbGlua2VyLmdldFRhZ0J1aWxkZXIoKS5idWlsZCggbWF0Y2ggKTsgIC8vIHJldHVybnMgYW4gYEF1dG9saW5rZXIuSHRtbFRhZ2AgaW5zdGFuY2UsIHdoaWNoIHByb3ZpZGVzIG11dGF0b3IgbWV0aG9kcyBmb3IgZWFzeSBjaGFuZ2VzCiAqICAgICAgICAgICAgICAgICAgICAgICAgIHRhZy5zZXRBdHRyKCAncmVsJywgJ25vZm9sbG93JyApOwogKiAgICAgICAgICAgICAgICAgICAgICAgICB0YWcuYWRkQ2xhc3MoICdleHRlcm5hbC1saW5rJyApOwogKiAgICAgICAgICAgICAgICAgICAgICAgICAKICogICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhZzsKICogICAgICAgICAgICAgICAgICAgICAgICAgCiAqICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICogICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7ICAvLyBsZXQgQXV0b2xpbmtlciBwZXJmb3JtIGl0cyBub3JtYWwgYW5jaG9yIHRhZyByZXBsYWNlbWVudAogKiAgICAgICAgICAgICAgICAgICAgIH0KICogICAgICAgICAgICAgICAgICAgICAKICogICAgICAgICAgICAgICAgIGNhc2UgJ2VtYWlsJyA6CiAqICAgICAgICAgICAgICAgICAgICAgdmFyIGVtYWlsID0gbWF0Y2guZ2V0RW1haWwoKTsKICogICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggImVtYWlsOiAiLCBlbWFpbCApOwogKiAgICAgICAgICAgICAgICAgICAgIAogKiAgICAgICAgICAgICAgICAgICAgIGlmKCBlbWFpbCA9PT0gIm15QG93bi5hZGRyZXNzIiApIHsKICogICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAgLy8gZG9uJ3QgYXV0by1saW5rIHRoaXMgcGFydGljdWxhciBlbWFpbCBhZGRyZXNzOyBsZWF2ZSBhcy1pcwogKiAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAqICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgIC8vIG5vIHJldHVybiB2YWx1ZSB3aWxsIGhhdmUgQXV0b2xpbmtlciBwZXJmb3JtIGl0cyBub3JtYWwgYW5jaG9yIHRhZyByZXBsYWNlbWVudCAoc2FtZSBhcyByZXR1cm5pbmcgYHRydWVgKQogKiAgICAgICAgICAgICAgICAgICAgIH0KICogICAgICAgICAgICAgICAgIAogKiAgICAgICAgICAgICAgICAgY2FzZSAndHdpdHRlcicgOgogKiAgICAgICAgICAgICAgICAgICAgIHZhciB0d2l0dGVySGFuZGxlID0gbWF0Y2guZ2V0VHdpdHRlckhhbmRsZSgpOwogKiAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCB0d2l0dGVySGFuZGxlICk7CiAqICAgICAgICAgICAgICAgICAgICAgCiAqICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8YSBocmVmPSJodHRwOi8vbmV3cGxhY2UudG8ubGluay50d2l0dGVyLmhhbmRsZXMudG8vIj4nICsgdHdpdHRlckhhbmRsZSArICc8L2E+JzsKICogICAgICAgICAgICAgfQogKiAgICAgICAgIH0KICogICAgIH0gKTsKICogCiAqIAogKiBUaGUgZnVuY3Rpb24gbWF5IHJldHVybiB0aGUgZm9sbG93aW5nIHZhbHVlczoKICogCiAqIC0gYHRydWVgIChCb29sZWFuKTogQWxsb3cgQXV0b2xpbmtlciB0byByZXBsYWNlIHRoZSBtYXRjaCBhcyBpdCBub3JtYWxseSB3b3VsZC4KICogLSBgZmFsc2VgIChCb29sZWFuKTogRG8gbm90IHJlcGxhY2UgdGhlIGN1cnJlbnQgbWF0Y2ggYXQgYWxsIC0gbGVhdmUgYXMtaXMuCiAqIC0gQW55IFN0cmluZzogSWYgYSBzdHJpbmcgaXMgcmV0dXJuZWQgZnJvbSB0aGUgZnVuY3Rpb24sIHRoZSBzdHJpbmcgd2lsbCBiZSB1c2VkIGRpcmVjdGx5IGFzIHRoZSByZXBsYWNlbWVudCBIVE1MIGZvcgogKiAgIHRoZSBtYXRjaC4KICogLSBBbiB7QGxpbmsgQXV0b2xpbmtlci5IdG1sVGFnfSBpbnN0YW5jZSwgd2hpY2ggY2FuIGJlIHVzZWQgdG8gYnVpbGQvbW9kaWZ5IGFuIEhUTUwgdGFnIGJlZm9yZSB3cml0aW5nIG91dCBpdHMgSFRNTCB0ZXh0LgogKiAKICogQGNvbnN0cnVjdG9yCiAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnXSBUaGUgY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgQXV0b2xpbmtlciBpbnN0YW5jZSwgc3BlY2lmaWVkIGluIGFuIE9iamVjdCAobWFwKS4KICovCnZhciBBdXRvbGlua2VyID0gZnVuY3Rpb24oIGNmZyApIHsKCUF1dG9saW5rZXIuVXRpbC5hc3NpZ24oIHRoaXMsIGNmZyApOyAgLy8gYXNzaWduIHRoZSBwcm9wZXJ0aWVzIG9mIGBjZmdgIG9udG8gdGhlIEF1dG9saW5rZXIgaW5zdGFuY2UuIFByb3RvdHlwZSBwcm9wZXJ0aWVzIHdpbGwgYmUgdXNlZCBmb3IgbWlzc2luZyBjb25maWdzLgp9OwoKCkF1dG9saW5rZXIucHJvdG90eXBlID0gewoJY29uc3RydWN0b3IgOiBBdXRvbGlua2VyLCAgLy8gZml4IGNvbnN0cnVjdG9yIHByb3BlcnR5CgkKCS8qKgoJICogQGNmZyB7Qm9vbGVhbn0gdXJscwoJICogCgkgKiBgdHJ1ZWAgaWYgbWlzY2VsbGFuZW91cyBVUkxzIHNob3VsZCBiZSBhdXRvbWF0aWNhbGx5IGxpbmtlZCwgYGZhbHNlYCBpZiB0aGV5IHNob3VsZCBub3QgYmUuCgkgKi8KCXVybHMgOiB0cnVlLAoJCgkvKioKCSAqIEBjZmcge0Jvb2xlYW59IGVtYWlsCgkgKiAKCSAqIGB0cnVlYCBpZiBlbWFpbCBhZGRyZXNzZXMgc2hvdWxkIGJlIGF1dG9tYXRpY2FsbHkgbGlua2VkLCBgZmFsc2VgIGlmIHRoZXkgc2hvdWxkIG5vdCBiZS4KCSAqLwoJZW1haWwgOiB0cnVlLAoJCgkvKioKCSAqIEBjZmcge0Jvb2xlYW59IHR3aXR0ZXIKCSAqIAoJICogYHRydWVgIGlmIFR3aXR0ZXIgaGFuZGxlcyAoIkBleGFtcGxlIikgc2hvdWxkIGJlIGF1dG9tYXRpY2FsbHkgbGlua2VkLCBgZmFsc2VgIGlmIHRoZXkgc2hvdWxkIG5vdCBiZS4KCSAqLwoJdHdpdHRlciA6IHRydWUsCgkKCS8qKgoJICogQGNmZyB7Qm9vbGVhbn0gbmV3V2luZG93CgkgKiAKCSAqIGB0cnVlYCBpZiB0aGUgbGlua3Mgc2hvdWxkIG9wZW4gaW4gYSBuZXcgd2luZG93LCBgZmFsc2VgIG90aGVyd2lzZS4KCSAqLwoJbmV3V2luZG93IDogdHJ1ZSwKCQoJLyoqCgkgKiBAY2ZnIHtCb29sZWFufSBzdHJpcFByZWZpeAoJICogCgkgKiBgdHJ1ZWAgaWYgJ2h0dHA6Ly8nIG9yICdodHRwczovLycgYW5kL29yIHRoZSAnd3d3Licgc2hvdWxkIGJlIHN0cmlwcGVkIGZyb20gdGhlIGJlZ2lubmluZyBvZiBVUkwgbGlua3MnIHRleHQsIAoJICogYGZhbHNlYCBvdGhlcndpc2UuCgkgKi8KCXN0cmlwUHJlZml4IDogdHJ1ZSwKCQoJLyoqCgkgKiBAY2ZnIHtOdW1iZXJ9IHRydW5jYXRlCgkgKiAKCSAqIEEgbnVtYmVyIGZvciBob3cgbWFueSBjaGFyYWN0ZXJzIGxvbmcgVVJMcy9lbWFpbHMvdHdpdHRlciBoYW5kbGVzIHNob3VsZCBiZSB0cnVuY2F0ZWQgdG8gaW5zaWRlIHRoZSB0ZXh0IG9mIAoJICogYSBsaW5rLiBJZiB0aGUgVVJML2VtYWlsL3R3aXR0ZXIgaXMgb3ZlciB0aGlzIG51bWJlciBvZiBjaGFyYWN0ZXJzLCBpdCB3aWxsIGJlIHRydW5jYXRlZCB0byB0aGlzIGxlbmd0aCBieSAKCSAqIGFkZGluZyBhIHR3byBwZXJpb2QgZWxsaXBzaXMgKCcuLicpIHRvIHRoZSBlbmQgb2YgdGhlIHN0cmluZy4KCSAqIAoJICogRm9yIGV4YW1wbGU6IEEgdXJsIGxpa2UgJ2h0dHA6Ly93d3cueWFob28uY29tL3NvbWUvbG9uZy9wYXRoL3RvL2EvZmlsZScgdHJ1bmNhdGVkIHRvIDI1IGNoYXJhY3RlcnMgbWlnaHQgbG9vawoJICogc29tZXRoaW5nIGxpa2UgdGhpczogJ3lhaG9vLmNvbS9zb21lL2xvbmcvcGF0Li4nCgkgKi8KCXRydW5jYXRlIDogdW5kZWZpbmVkLAoJCgkvKioKCSAqIEBjZmcge1N0cmluZ30gY2xhc3NOYW1lCgkgKiAKCSAqIEEgQ1NTIGNsYXNzIG5hbWUgdG8gYWRkIHRvIHRoZSBnZW5lcmF0ZWQgbGlua3MuIFRoaXMgY2xhc3Mgd2lsbCBiZSBhZGRlZCB0byBhbGwgbGlua3MsIGFzIHdlbGwgYXMgdGhpcyBjbGFzcwoJICogcGx1cyB1cmwvZW1haWwvdHdpdHRlciBzdWZmaXhlcyBmb3Igc3R5bGluZyB1cmwvZW1haWwvdHdpdHRlciBsaW5rcyBkaWZmZXJlbnRseS4KCSAqIAoJICogRm9yIGV4YW1wbGUsIGlmIHRoaXMgY29uZmlnIGlzIHByb3ZpZGVkIGFzICJteUxpbmsiLCB0aGVuOgoJICogCgkgKiAtIFVSTCBsaW5rcyB3aWxsIGhhdmUgdGhlIENTUyBjbGFzc2VzOiAibXlMaW5rIG15TGluay11cmwiCgkgKiAtIEVtYWlsIGxpbmtzIHdpbGwgaGF2ZSB0aGUgQ1NTIGNsYXNzZXM6ICJteUxpbmsgbXlMaW5rLWVtYWlsIiwgYW5kCgkgKiAtIFR3aXR0ZXIgbGlua3Mgd2lsbCBoYXZlIHRoZSBDU1MgY2xhc3NlczogIm15TGluayBteUxpbmstdHdpdHRlciIKCSAqLwoJY2xhc3NOYW1lIDogIiIsCgkKCS8qKgoJICogQGNmZyB7RnVuY3Rpb259IHJlcGxhY2VGbgoJICogCgkgKiBBIGZ1bmN0aW9uIHRvIGluZGl2aWR1YWxseSBwcm9jZXNzIGVhY2ggVVJML0VtYWlsL1R3aXR0ZXIgbWF0Y2ggZm91bmQgaW4gdGhlIGlucHV0IHN0cmluZy4KCSAqIAoJICogU2VlIHRoZSBjbGFzcydzIGRlc2NyaXB0aW9uIGZvciB1c2FnZS4KCSAqIAoJICogVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6CgkgKiAKCSAqIEBjZmcge0F1dG9saW5rZXJ9IHJlcGxhY2VGbi5hdXRvbGlua2VyIFRoZSBBdXRvbGlua2VyIGluc3RhbmNlLCB3aGljaCBtYXkgYmUgdXNlZCB0byByZXRyaWV2ZSBjaGlsZCBvYmplY3RzIGZyb20gKHN1Y2gKCSAqICAgYXMgdGhlIGluc3RhbmNlJ3Mge0BsaW5rICNnZXRUYWdCdWlsZGVyIHRhZyBidWlsZGVyfSkuCgkgKiBAY2ZnIHtBdXRvbGlua2VyLm1hdGNoLk1hdGNofSByZXBsYWNlRm4ubWF0Y2ggVGhlIE1hdGNoIGluc3RhbmNlIHdoaWNoIGNhbiBiZSB1c2VkIHRvIHJldHJpZXZlIGluZm9ybWF0aW9uIGFib3V0IHRoZQoJICogICB7QGxpbmsgQXV0b2xpbmtlci5tYXRjaC5VcmwgVVJMfS97QGxpbmsgQXV0b2xpbmtlci5tYXRjaC5FbWFpbCBlbWFpbH0ve0BsaW5rIEF1dG9saW5rZXIubWF0Y2guVHdpdHRlciBUd2l0dGVyfQoJICogICBtYXRjaCB0aGF0IHRoZSBgcmVwbGFjZUZuYCBpcyBjdXJyZW50bHkgcHJvY2Vzc2luZy4KCSAqLwoJCgkKCS8qKgoJICogQHByaXZhdGUKCSAqIEBwcm9wZXJ0eSB7QXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxQYXJzZXJ9IGh0bWxQYXJzZXIKCSAqIAoJICogVGhlIEh0bWxQYXJzZXIgaW5zdGFuY2UgdXNlZCB0byBza2lwIG92ZXIgSFRNTCB0YWdzLCB3aGlsZSBmaW5kaW5nIHRleHQgbm9kZXMgdG8gcHJvY2Vzcy4gVGhpcyBpcyBsYXppbHkgaW5zdGFudGlhdGVkCgkgKiBpbiB0aGUge0BsaW5rICNnZXRIdG1sUGFyc2VyfSBtZXRob2QuCgkgKi8KCWh0bWxQYXJzZXIgOiB1bmRlZmluZWQsCgkKCS8qKgoJICogQHByaXZhdGUKCSAqIEBwcm9wZXJ0eSB7QXV0b2xpbmtlci5tYXRjaFBhcnNlci5NYXRjaFBhcnNlcn0gbWF0Y2hQYXJzZXIKCSAqIAoJICogVGhlIE1hdGNoUGFyc2VyIGluc3RhbmNlIHVzZWQgdG8gZmluZCBVUkwvZW1haWwvVHdpdHRlciBtYXRjaGVzIGluIHRoZSB0ZXh0IG5vZGVzIG9mIGFuIGlucHV0IHN0cmluZyBwYXNzZWQgdG8KCSAqIHtAbGluayAjbGlua30uIFRoaXMgaXMgbGF6aWx5IGluc3RhbnRpYXRlZCBpbiB0aGUge0BsaW5rICNnZXRNYXRjaFBhcnNlcn0gbWV0aG9kLgoJICovCgltYXRjaFBhcnNlciA6IHVuZGVmaW5lZCwKCQoJLyoqCgkgKiBAcHJpdmF0ZQoJICogQHByb3BlcnR5IHtBdXRvbGlua2VyLkFuY2hvclRhZ0J1aWxkZXJ9IHRhZ0J1aWxkZXIKCSAqIAoJICogVGhlIEFuY2hvclRhZ0J1aWxkZXIgaW5zdGFuY2UgdXNlZCB0byBidWlsZCB0aGUgVVJML2VtYWlsL1R3aXR0ZXIgcmVwbGFjZW1lbnQgYW5jaG9yIHRhZ3MuIFRoaXMgaXMgbGF6aWx5IGluc3RhbnRpYXRlZAoJICogaW4gdGhlIHtAbGluayAjZ2V0VGFnQnVpbGRlcn0gbWV0aG9kLgoJICovCgl0YWdCdWlsZGVyIDogdW5kZWZpbmVkLAoJCgkKCS8qKgoJICogQXV0b21hdGljYWxseSBsaW5rcyBVUkxzLCBlbWFpbCBhZGRyZXNzZXMsIGFuZCBUd2l0dGVyIGhhbmRsZXMgZm91bmQgaW4gdGhlIGdpdmVuIGNodW5rIG9mIEhUTUwuIAoJICogRG9lcyBub3QgbGluayBVUkxzIGZvdW5kIHdpdGhpbiBIVE1MIHRhZ3MuCgkgKiAKCSAqIEZvciBpbnN0YW5jZSwgaWYgZ2l2ZW4gdGhlIHRleHQ6IGBZb3Ugc2hvdWxkIGdvIHRvIGh0dHA6Ly93d3cueWFob28uY29tYCwgdGhlbiB0aGUgcmVzdWx0CgkgKiB3aWxsIGJlIGBZb3Ugc2hvdWxkIGdvIHRvICZsdDthIGhyZWY9Imh0dHA6Ly93d3cueWFob28uY29tIiZndDtodHRwOi8vd3d3LnlhaG9vLmNvbSZsdDsvYSZndDtgCgkgKiAKCSAqIFRoaXMgbWV0aG9kIGZpbmRzIHRoZSB0ZXh0IGFyb3VuZCBhbnkgSFRNTCBlbGVtZW50cyBpbiB0aGUgaW5wdXQgYHRleHRPckh0bWxgLCB3aGljaCB3aWxsIGJlIHRoZSB0ZXh0IHRoYXQgaXMgcHJvY2Vzc2VkLgoJICogQW55IG9yaWdpbmFsIEhUTUwgZWxlbWVudHMgd2lsbCBiZSBsZWZ0IGFzLWlzLCBhcyB3ZWxsIGFzIHRoZSB0ZXh0IHRoYXQgaXMgYWxyZWFkeSB3cmFwcGVkIGluIGFuY2hvciAoJmx0O2EmZ3Q7KSB0YWdzLgoJICogCgkgKiBAcGFyYW0ge1N0cmluZ30gdGV4dE9ySHRtbCBUaGUgSFRNTCBvciB0ZXh0IHRvIGxpbmsgVVJMcywgZW1haWwgYWRkcmVzc2VzLCBhbmQgVHdpdHRlciBoYW5kbGVzIHdpdGhpbiAoZGVwZW5kaW5nIG9uIGlmCgkgKiAgIHRoZSB7QGxpbmsgI3VybHN9LCB7QGxpbmsgI2VtYWlsfSwgYW5kIHtAbGluayAjdHdpdHRlcn0gb3B0aW9ucyBhcmUgZW5hYmxlZCkuCgkgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBIVE1MLCB3aXRoIFVSTHMvZW1haWxzL1R3aXR0ZXIgaGFuZGxlcyBhdXRvbWF0aWNhbGx5IGxpbmtlZC4KCSAqLwoJbGluayA6IGZ1bmN0aW9uKCB0ZXh0T3JIdG1sICkgewoJCXZhciBodG1sUGFyc2VyID0gdGhpcy5nZXRIdG1sUGFyc2VyKCksCgkJICAgIGh0bWxOb2RlcyA9IGh0bWxQYXJzZXIucGFyc2UoIHRleHRPckh0bWwgKSwKCQkgICAgYW5jaG9yVGFnU3RhY2tDb3VudCA9IDAsICAvLyB1c2VkIHRvIG9ubHkgcHJvY2VzcyB0ZXh0IGFyb3VuZCBhbmNob3IgdGFncywgYW5kIGFueSBpbm5lciB0ZXh0L2h0bWwgdGhleSBtYXkgaGF2ZQoJCSAgICByZXN1bHRIdG1sID0gW107CgkJCgkJZm9yKCB2YXIgaSA9IDAsIGxlbiA9IGh0bWxOb2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHsKCQkJdmFyIG5vZGUgPSBodG1sTm9kZXNbIGkgXSwKCQkJICAgIG5vZGVUeXBlID0gbm9kZS5nZXRUeXBlKCksCgkJCSAgICBub2RlVGV4dCA9IG5vZGUuZ2V0VGV4dCgpOwoJCQkKCQkJaWYoIG5vZGVUeXBlID09PSAnZWxlbWVudCcgKSB7CgkJCQkvLyBQcm9jZXNzIEhUTUwgbm9kZXMgaW4gdGhlIGlucHV0IGB0ZXh0T3JIdG1sYAoJCQkJaWYoIG5vZGUuZ2V0VGFnTmFtZSgpID09PSAnYScgKSB7CgkJCQkJaWYoICFub2RlLmlzQ2xvc2luZygpICkgeyAgLy8gaXQncyB0aGUgc3RhcnQgPGE+IHRhZwoJCQkJCQlhbmNob3JUYWdTdGFja0NvdW50Kys7CgkJCQkJfSBlbHNlIHsgICAvLyBpdCdzIHRoZSBlbmQgPC9hPiB0YWcKCQkJCQkJYW5jaG9yVGFnU3RhY2tDb3VudCA9IE1hdGgubWF4KCBhbmNob3JUYWdTdGFja0NvdW50IC0gMSwgMCApOyAgLy8gYXR0ZW1wdCB0byBoYW5kbGUgZXh0cmFuZW91cyA8L2E+IHRhZ3MgYnkgbWFraW5nIHN1cmUgdGhlIHN0YWNrIGNvdW50IG5ldmVyIGdvZXMgYmVsb3cgMAoJCQkJCX0KCQkJCX0KCQkJCXJlc3VsdEh0bWwucHVzaCggbm9kZVRleHQgKTsgIC8vIG5vdyBhZGQgdGhlIHRleHQgb2YgdGhlIHRhZyBpdHNlbGYgdmVyYmF0aW0KCQkJCQoJCQl9IGVsc2UgaWYoIG5vZGVUeXBlID09PSAnZW50aXR5JyApIHsKCQkJCXJlc3VsdEh0bWwucHVzaCggbm9kZVRleHQgKTsgIC8vIGFwcGVuZCBIVE1MIGVudGl0eSBub2RlcyAoc3VjaCBhcyAnJm5ic3A7JykgdmVyYmF0aW0KCQkJCQoJCQl9IGVsc2UgewoJCQkJLy8gUHJvY2VzcyB0ZXh0IG5vZGVzIGluIHRoZSBpbnB1dCBgdGV4dE9ySHRtbGAKCQkJCWlmKCBhbmNob3JUYWdTdGFja0NvdW50ID09PSAwICkgewoJCQkJCS8vIElmIHdlJ3JlIG5vdCB3aXRoaW4gYW4gPGE+IHRhZywgcHJvY2VzcyB0aGUgdGV4dCBub2RlIHRvIGxpbmtpZnkKCQkJCQl2YXIgbGlua2lmaWVkU3RyID0gdGhpcy5saW5raWZ5U3RyKCBub2RlVGV4dCApOwoJCQkJCXJlc3VsdEh0bWwucHVzaCggbGlua2lmaWVkU3RyICk7CgkJCQkJCgkJCQl9IGVsc2UgewoJCQkJCS8vIGB0ZXh0YCBpcyB3aXRoaW4gYW4gPGE+IHRhZywgc2ltcGx5IGFwcGVuZCB0aGUgdGV4dCAtIHdlIGRvIG5vdCB3YW50IHRvIGF1dG9saW5rIGFueXRoaW5nIAoJCQkJCS8vIGFscmVhZHkgd2l0aGluIGFuIDxhPi4uLjwvYT4gdGFnCgkJCQkJcmVzdWx0SHRtbC5wdXNoKCBub2RlVGV4dCApOwoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiByZXN1bHRIdG1sLmpvaW4oICIiICk7Cgl9LAoJCgkKCS8qKgoJICogUHJvY2VzcyB0aGUgdGV4dCB0aGF0IGxpZXMgaW4gYmV0d2VlbiBIVE1MIHRhZ3MsIHBlcmZvcm1pbmcgdGhlIGFuY2hvciB0YWcgcmVwbGFjZW1lbnRzIGZvciBtYXRjaGVkIAoJICogVVJMcy9lbWFpbHMvVHdpdHRlciBoYW5kbGVzLCBhbmQgcmV0dXJucyB0aGUgc3RyaW5nIHdpdGggdGhlIHJlcGxhY2VtZW50cyBtYWRlLiAKCSAqIAoJICogVGhpcyBtZXRob2QgZG9lcyB0aGUgYWN0dWFsIHdyYXBwaW5nIG9mIFVSTHMvZW1haWxzL1R3aXR0ZXIgaGFuZGxlcyB3aXRoIGFuY2hvciB0YWdzLgoJICogCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIG9mIHRleHQgdG8gYXV0by1saW5rLgoJICogQHJldHVybiB7U3RyaW5nfSBUaGUgdGV4dCB3aXRoIGFuY2hvciB0YWdzIGF1dG8tZmlsbGVkLgoJICovCglsaW5raWZ5U3RyIDogZnVuY3Rpb24oIHN0ciApIHsKCQlyZXR1cm4gdGhpcy5nZXRNYXRjaFBhcnNlcigpLnJlcGxhY2UoIHN0ciwgdGhpcy5jcmVhdGVNYXRjaFJldHVyblZhbCwgdGhpcyApOwoJfSwKCQoJCgkvKioKCSAqIENyZWF0ZXMgdGhlIHJldHVybiBzdHJpbmcgdmFsdWUgZm9yIGEgZ2l2ZW4gbWF0Y2ggaW4gdGhlIGlucHV0IHN0cmluZywgZm9yIHRoZSB7QGxpbmsgI3Byb2Nlc3NUZXh0Tm9kZX0gbWV0aG9kLgoJICogCgkgKiBUaGlzIG1ldGhvZCBoYW5kbGVzIHRoZSB7QGxpbmsgI3JlcGxhY2VGbn0sIGlmIG9uZSB3YXMgcHJvdmlkZWQuCgkgKiAKCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge0F1dG9saW5rZXIubWF0Y2guTWF0Y2h9IG1hdGNoIFRoZSBNYXRjaCBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSBtYXRjaC4KCSAqIEByZXR1cm4ge1N0cmluZ30gVGhlIHN0cmluZyB0aGF0IHRoZSBgbWF0Y2hgIHNob3VsZCBiZSByZXBsYWNlZCB3aXRoLiBUaGlzIGlzIHVzdWFsbHkgdGhlIGFuY2hvciB0YWcgc3RyaW5nLCBidXQKCSAqICAgbWF5IGJlIHRoZSBgbWF0Y2hTdHJgIGl0c2VsZiBpZiB0aGUgbWF0Y2ggaXMgbm90IHRvIGJlIHJlcGxhY2VkLgoJICovCgljcmVhdGVNYXRjaFJldHVyblZhbCA6IGZ1bmN0aW9uKCBtYXRjaCApIHsKCQkvLyBIYW5kbGUgYSBjdXN0b20gYHJlcGxhY2VGbmAgYmVpbmcgcHJvdmlkZWQKCQl2YXIgcmVwbGFjZUZuUmVzdWx0OwoJCWlmKCB0aGlzLnJlcGxhY2VGbiApIHsKCQkJcmVwbGFjZUZuUmVzdWx0ID0gdGhpcy5yZXBsYWNlRm4uY2FsbCggdGhpcywgdGhpcywgbWF0Y2ggKTsgIC8vIEF1dG9saW5rZXIgaW5zdGFuY2UgaXMgdGhlIGNvbnRleHQsIGFuZCB0aGUgZmlyc3QgYXJnCgkJfQoJCQoJCWlmKCB0eXBlb2YgcmVwbGFjZUZuUmVzdWx0ID09PSAnc3RyaW5nJyApIHsKCQkJcmV0dXJuIHJlcGxhY2VGblJlc3VsdDsgIC8vIGByZXBsYWNlRm5gIHJldHVybmVkIGEgc3RyaW5nLCB1c2UgdGhhdAoJCQkKCQl9IGVsc2UgaWYoIHJlcGxhY2VGblJlc3VsdCA9PT0gZmFsc2UgKSB7CgkJCXJldHVybiBtYXRjaC5nZXRNYXRjaGVkVGV4dCgpOyAgLy8gbm8gcmVwbGFjZW1lbnQgZm9yIHRoZSBtYXRjaAoJCQkKCQl9IGVsc2UgaWYoIHJlcGxhY2VGblJlc3VsdCBpbnN0YW5jZW9mIEF1dG9saW5rZXIuSHRtbFRhZyApIHsKCQkJcmV0dXJuIHJlcGxhY2VGblJlc3VsdC50b1N0cmluZygpOwoJCQoJCX0gZWxzZSB7ICAvLyByZXBsYWNlRm5SZXN1bHQgPT09IHRydWUsIG9yIG5vL3Vua25vd24gcmV0dXJuIHZhbHVlIGZyb20gZnVuY3Rpb24KCQkJLy8gUGVyZm9ybSBBdXRvbGlua2VyJ3MgZGVmYXVsdCBhbmNob3IgdGFnIGdlbmVyYXRpb24KCQkJdmFyIHRhZ0J1aWxkZXIgPSB0aGlzLmdldFRhZ0J1aWxkZXIoKSwKCQkJICAgIGFuY2hvclRhZyA9IHRhZ0J1aWxkZXIuYnVpbGQoIG1hdGNoICk7ICAvLyByZXR1cm5zIGFuIEF1dG9saW5rZXIuSHRtbFRhZyBpbnN0YW5jZQoJCQkKCQkJcmV0dXJuIGFuY2hvclRhZy50b1N0cmluZygpOwoJCX0KCX0sCgkKCQoJLyoqCgkgKiBMYXppbHkgaW5zdGFudGlhdGVzIGFuZCByZXR1cm5zIHRoZSB7QGxpbmsgI2h0bWxQYXJzZXJ9IGluc3RhbmNlIGZvciB0aGlzIEF1dG9saW5rZXIgaW5zdGFuY2UuCgkgKiAKCSAqIEBwcm90ZWN0ZWQKCSAqIEByZXR1cm4ge0F1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sUGFyc2VyfQoJICovCglnZXRIdG1sUGFyc2VyIDogZnVuY3Rpb24oKSB7CgkJdmFyIGh0bWxQYXJzZXIgPSB0aGlzLmh0bWxQYXJzZXI7CgkJCgkJaWYoICFodG1sUGFyc2VyICkgewoJCQlodG1sUGFyc2VyID0gdGhpcy5odG1sUGFyc2VyID0gbmV3IEF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sUGFyc2VyKCk7CgkJfQoJCQoJCXJldHVybiBodG1sUGFyc2VyOwoJfSwKCQoJCgkvKioKCSAqIExhemlseSBpbnN0YW50aWF0ZXMgYW5kIHJldHVybnMgdGhlIHtAbGluayAjbWF0Y2hQYXJzZXJ9IGluc3RhbmNlIGZvciB0aGlzIEF1dG9saW5rZXIgaW5zdGFuY2UuCgkgKiAKCSAqIEBwcm90ZWN0ZWQKCSAqIEByZXR1cm4ge0F1dG9saW5rZXIubWF0Y2hQYXJzZXIuTWF0Y2hQYXJzZXJ9CgkgKi8KCWdldE1hdGNoUGFyc2VyIDogZnVuY3Rpb24oKSB7CgkJdmFyIG1hdGNoUGFyc2VyID0gdGhpcy5tYXRjaFBhcnNlcjsKCQkKCQlpZiggIW1hdGNoUGFyc2VyICkgewoJCQltYXRjaFBhcnNlciA9IHRoaXMubWF0Y2hQYXJzZXIgPSBuZXcgQXV0b2xpbmtlci5tYXRjaFBhcnNlci5NYXRjaFBhcnNlciggewoJCQkJdXJscyA6IHRoaXMudXJscywKCQkJCWVtYWlsIDogdGhpcy5lbWFpbCwKCQkJCXR3aXR0ZXIgOiB0aGlzLnR3aXR0ZXIsCgkJCQlzdHJpcFByZWZpeCA6IHRoaXMuc3RyaXBQcmVmaXgKCQkJfSApOwoJCX0KCQkKCQlyZXR1cm4gbWF0Y2hQYXJzZXI7Cgl9LAoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUge0BsaW5rICN0YWdCdWlsZGVyfSBpbnN0YW5jZSBmb3IgdGhpcyBBdXRvbGlua2VyIGluc3RhbmNlLCBsYXppbHkgaW5zdGFudGlhdGluZyBpdAoJICogaWYgaXQgZG9lcyBub3QgeWV0IGV4aXN0LgoJICogCgkgKiBUaGlzIG1ldGhvZCBtYXkgYmUgdXNlZCBpbiBhIHtAbGluayAjcmVwbGFjZUZufSB0byBnZW5lcmF0ZSB0aGUge0BsaW5rIEF1dG9saW5rZXIuSHRtbFRhZyBIdG1sVGFnfSBpbnN0YW5jZSB0aGF0IAoJICogQXV0b2xpbmtlciB3b3VsZCBub3JtYWxseSBnZW5lcmF0ZSwgYW5kIHRoZW4gYWxsb3cgZm9yIG1vZGlmaWNhdGlvbnMgYmVmb3JlIHJldHVybmluZyBpdC4gRm9yIGV4YW1wbGU6CgkgKiAKCSAqICAgICB2YXIgaHRtbCA9IEF1dG9saW5rZXIubGluayggIlRlc3QgZ29vZ2xlLmNvbSIsIHsKCSAqICAgICAgICAgcmVwbGFjZUZuIDogZnVuY3Rpb24oIGF1dG9saW5rZXIsIG1hdGNoICkgewoJICogICAgICAgICAgICAgdmFyIHRhZyA9IGF1dG9saW5rZXIuZ2V0VGFnQnVpbGRlcigpLmJ1aWxkKCBtYXRjaCApOyAgLy8gcmV0dXJucyBhbiB7QGxpbmsgQXV0b2xpbmtlci5IdG1sVGFnfSBpbnN0YW5jZQoJICogICAgICAgICAgICAgdGFnLnNldEF0dHIoICdyZWwnLCAnbm9mb2xsb3cnICk7CgkgKiAgICAgICAgICAgICAKCSAqICAgICAgICAgICAgIHJldHVybiB0YWc7CgkgKiAgICAgICAgIH0KCSAqICAgICB9ICk7CgkgKiAgICAgCgkgKiAgICAgLy8gZ2VuZXJhdGVkIGh0bWw6CgkgKiAgICAgLy8gICBUZXN0IDxhIGhyZWY9Imh0dHA6Ly9nb29nbGUuY29tIiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub2ZvbGxvdyI+Z29vZ2xlLmNvbTwvYT4KCSAqIAoJICogQHJldHVybiB7QXV0b2xpbmtlci5BbmNob3JUYWdCdWlsZGVyfQoJICovCglnZXRUYWdCdWlsZGVyIDogZnVuY3Rpb24oKSB7CgkJdmFyIHRhZ0J1aWxkZXIgPSB0aGlzLnRhZ0J1aWxkZXI7CgkJCgkJaWYoICF0YWdCdWlsZGVyICkgewoJCQl0YWdCdWlsZGVyID0gdGhpcy50YWdCdWlsZGVyID0gbmV3IEF1dG9saW5rZXIuQW5jaG9yVGFnQnVpbGRlciggewoJCQkJbmV3V2luZG93ICAgOiB0aGlzLm5ld1dpbmRvdywKCQkJCXRydW5jYXRlICAgIDogdGhpcy50cnVuY2F0ZSwKCQkJCWNsYXNzTmFtZSAgIDogdGhpcy5jbGFzc05hbWUKCQkJfSApOwoJCX0KCQkKCQlyZXR1cm4gdGFnQnVpbGRlcjsKCX0KCn07CgoKLyoqCiAqIEF1dG9tYXRpY2FsbHkgbGlua3MgVVJMcywgZW1haWwgYWRkcmVzc2VzLCBhbmQgVHdpdHRlciBoYW5kbGVzIGZvdW5kIGluIHRoZSBnaXZlbiBjaHVuayBvZiBIVE1MLiAKICogRG9lcyBub3QgbGluayBVUkxzIGZvdW5kIHdpdGhpbiBIVE1MIHRhZ3MuCiAqIAogKiBGb3IgaW5zdGFuY2UsIGlmIGdpdmVuIHRoZSB0ZXh0OiBgWW91IHNob3VsZCBnbyB0byBodHRwOi8vd3d3LnlhaG9vLmNvbWAsIHRoZW4gdGhlIHJlc3VsdAogKiB3aWxsIGJlIGBZb3Ugc2hvdWxkIGdvIHRvICZsdDthIGhyZWY9Imh0dHA6Ly93d3cueWFob28uY29tIiZndDtodHRwOi8vd3d3LnlhaG9vLmNvbSZsdDsvYSZndDtgCiAqIAogKiBFeGFtcGxlOgogKiAKICogICAgIHZhciBsaW5rZWRUZXh0ID0gQXV0b2xpbmtlci5saW5rKCAiR28gdG8gZ29vZ2xlLmNvbSIsIHsgbmV3V2luZG93OiBmYWxzZSB9ICk7CiAqICAgICAvLyBQcm9kdWNlczogIkdvIHRvIDxhIGhyZWY9Imh0dHA6Ly9nb29nbGUuY29tIj5nb29nbGUuY29tPC9hPiIKICogCiAqIEBzdGF0aWMKICogQHBhcmFtIHtTdHJpbmd9IHRleHRPckh0bWwgVGhlIEhUTUwgb3IgdGV4dCB0byBmaW5kIFVSTHMsIGVtYWlsIGFkZHJlc3NlcywgYW5kIFR3aXR0ZXIgaGFuZGxlcyB3aXRoaW4gKGRlcGVuZGluZyBvbiBpZgogKiAgIHRoZSB7QGxpbmsgI3VybHN9LCB7QGxpbmsgI2VtYWlsfSwgYW5kIHtAbGluayAjdHdpdHRlcn0gb3B0aW9ucyBhcmUgZW5hYmxlZCkuCiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gQW55IG9mIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBBdXRvbGlua2VyIGNsYXNzLCBzcGVjaWZpZWQgaW4gYW4gT2JqZWN0IChtYXApLgogKiAgIFNlZSB0aGUgY2xhc3MgZGVzY3JpcHRpb24gZm9yIGFuIGV4YW1wbGUgY2FsbC4KICogQHJldHVybiB7U3RyaW5nfSBUaGUgSFRNTCB0ZXh0LCB3aXRoIFVSTHMgYXV0b21hdGljYWxseSBsaW5rZWQKICovCkF1dG9saW5rZXIubGluayA9IGZ1bmN0aW9uKCB0ZXh0T3JIdG1sLCBvcHRpb25zICkgewoJdmFyIGF1dG9saW5rZXIgPSBuZXcgQXV0b2xpbmtlciggb3B0aW9ucyApOwoJcmV0dXJuIGF1dG9saW5rZXIubGluayggdGV4dE9ySHRtbCApOwp9OwoKCi8vIEF1dG9saW5rZXIgTmFtZXNwYWNlcwpBdXRvbGlua2VyLm1hdGNoID0ge307CkF1dG9saW5rZXIuaHRtbFBhcnNlciA9IHt9OwpBdXRvbGlua2VyLm1hdGNoUGFyc2VyID0ge307Ci8qZ2xvYmFsIEF1dG9saW5rZXIgKi8KLypqc2hpbnQgZXFudWxsOnRydWUsIGJvc3M6dHJ1ZSAqLwovKioKICogQGNsYXNzIEF1dG9saW5rZXIuVXRpbAogKiBAc2luZ2xldG9uCiAqIAogKiBBIGZldyB1dGlsaXR5IG1ldGhvZHMgZm9yIEF1dG9saW5rZXIuCiAqLwpBdXRvbGlua2VyLlV0aWwgPSB7CgkKCS8qKgoJICogQHByb3BlcnR5IHtGdW5jdGlvbn0gYWJzdHJhY3RNZXRob2QKCSAqIAoJICogQSBmdW5jdGlvbiBvYmplY3Qgd2hpY2ggcmVwcmVzZW50cyBhbiBhYnN0cmFjdCBtZXRob2QuCgkgKi8KCWFic3RyYWN0TWV0aG9kIDogZnVuY3Rpb24oKSB7IHRocm93ICJhYnN0cmFjdCI7IH0sCgkKCQoJLyoqCgkgKiBBc3NpZ25zIChzaGFsbG93IGNvcGllcykgdGhlIHByb3BlcnRpZXMgb2YgYHNyY2Agb250byBgZGVzdGAuCgkgKiAKCSAqIEBwYXJhbSB7T2JqZWN0fSBkZXN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuCgkgKiBAcGFyYW0ge09iamVjdH0gc3JjIFRoZSBzb3VyY2Ugb2JqZWN0LgoJICogQHJldHVybiB7T2JqZWN0fSBUaGUgZGVzdGluYXRpb24gb2JqZWN0IChgZGVzdGApCgkgKi8KCWFzc2lnbiA6IGZ1bmN0aW9uKCBkZXN0LCBzcmMgKSB7CgkJZm9yKCB2YXIgcHJvcCBpbiBzcmMgKSB7CgkJCWlmKCBzcmMuaGFzT3duUHJvcGVydHkoIHByb3AgKSApIHsKCQkJCWRlc3RbIHByb3AgXSA9IHNyY1sgcHJvcCBdOwoJCQl9CgkJfQoJCQoJCXJldHVybiBkZXN0OwoJfSwKCQoJCgkvKioKCSAqIEV4dGVuZHMgYHN1cGVyY2xhc3NgIHRvIGNyZWF0ZSBhIG5ldyBzdWJjbGFzcywgYWRkaW5nIHRoZSBgcHJvdG9Qcm9wc2AgdG8gdGhlIG5ldyBzdWJjbGFzcydzIHByb3RvdHlwZS4KCSAqIAoJICogQHBhcmFtIHtGdW5jdGlvbn0gc3VwZXJjbGFzcyBUaGUgY29uc3RydWN0b3IgZnVuY3Rpb24gZm9yIHRoZSBzdXBlcmNsYXNzLgoJICogQHBhcmFtIHtPYmplY3R9IHByb3RvUHJvcHMgVGhlIG1ldGhvZHMvcHJvcGVydGllcyB0byBhZGQgdG8gdGhlIHN1YmNsYXNzJ3MgcHJvdG90eXBlLiBUaGlzIG1heSBjb250YWluIHRoZQoJICogICBzcGVjaWFsIHByb3BlcnR5IGBjb25zdHJ1Y3RvcmAsIHdoaWNoIHdpbGwgYmUgdXNlZCBhcyB0aGUgbmV3IHN1YmNsYXNzJ3MgY29uc3RydWN0b3IgZnVuY3Rpb24uCgkgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIG5ldyBzdWJjbGFzcyBmdW5jdGlvbi4KCSAqLwoJZXh0ZW5kIDogZnVuY3Rpb24oIHN1cGVyY2xhc3MsIHByb3RvUHJvcHMgKSB7CgkJdmFyIHN1cGVyY2xhc3NQcm90byA9IHN1cGVyY2xhc3MucHJvdG90eXBlOwoJCQoJCXZhciBGID0gZnVuY3Rpb24oKSB7fTsKCQlGLnByb3RvdHlwZSA9IHN1cGVyY2xhc3NQcm90bzsKCQkKCQl2YXIgc3ViY2xhc3M7CgkJaWYoIHByb3RvUHJvcHMuaGFzT3duUHJvcGVydHkoICdjb25zdHJ1Y3RvcicgKSApIHsKCQkJc3ViY2xhc3MgPSBwcm90b1Byb3BzLmNvbnN0cnVjdG9yOwoJCX0gZWxzZSB7CgkJCXN1YmNsYXNzID0gZnVuY3Rpb24oKSB7IHN1cGVyY2xhc3NQcm90by5jb25zdHJ1Y3Rvci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7IH07CgkJfQoJCQoJCXZhciBzdWJjbGFzc1Byb3RvID0gc3ViY2xhc3MucHJvdG90eXBlID0gbmV3IEYoKTsgIC8vIHNldCB1cCBwcm90b3R5cGUgY2hhaW4KCQlzdWJjbGFzc1Byb3RvLmNvbnN0cnVjdG9yID0gc3ViY2xhc3M7ICAvLyBmaXggY29uc3RydWN0b3IgcHJvcGVydHkKCQlzdWJjbGFzc1Byb3RvLnN1cGVyY2xhc3MgPSBzdXBlcmNsYXNzUHJvdG87CgkJCgkJZGVsZXRlIHByb3RvUHJvcHMuY29uc3RydWN0b3I7ICAvLyBkb24ndCByZS1hc3NpZ24gY29uc3RydWN0b3IgcHJvcGVydHkgdG8gdGhlIHByb3RvdHlwZSwgc2luY2UgYSBuZXcgZnVuY3Rpb24gbWF5IGhhdmUgYmVlbiBjcmVhdGVkIChgc3ViY2xhc3NgKSwgd2hpY2ggaXMgbm93IGFscmVhZHkgdGhlcmUKCQlBdXRvbGlua2VyLlV0aWwuYXNzaWduKCBzdWJjbGFzc1Byb3RvLCBwcm90b1Byb3BzICk7CgkJCgkJcmV0dXJuIHN1YmNsYXNzOwoJfSwKCQoJCgkvKioKCSAqIFRydW5jYXRlcyB0aGUgYHN0cmAgYXQgYGxlbiAtIGVsbGlwc2lzQ2hhcnMubGVuZ3RoYCwgYW5kIGFkZHMgdGhlIGBlbGxpcHNpc0NoYXJzYCB0byB0aGUKCSAqIGVuZCBvZiB0aGUgc3RyaW5nIChieSBkZWZhdWx0LCB0d28gcGVyaW9kczogJy4uJykuIElmIHRoZSBgc3RyYCBsZW5ndGggZG9lcyBub3QgZXhjZWVkIAoJICogYGxlbmAsIHRoZSBzdHJpbmcgd2lsbCBiZSByZXR1cm5lZCB1bmNoYW5nZWQuCgkgKiAKCSAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byB0cnVuY2F0ZSBhbmQgYWRkIGFuIGVsbGlwc2lzIHRvLgoJICogQHBhcmFtIHtOdW1iZXJ9IHRydW5jYXRlTGVuIFRoZSBsZW5ndGggdG8gdHJ1bmNhdGUgdGhlIHN0cmluZyBhdC4KCSAqIEBwYXJhbSB7U3RyaW5nfSBbZWxsaXBzaXNDaGFycz0uLl0gVGhlIGVsbGlwc2lzIGNoYXJhY3RlcihzKSB0byBhZGQgdG8gdGhlIGVuZCBvZiBgc3RyYAoJICogICB3aGVuIHRydW5jYXRlZC4gRGVmYXVsdHMgdG8gJy4uJwoJICovCgllbGxpcHNpcyA6IGZ1bmN0aW9uKCBzdHIsIHRydW5jYXRlTGVuLCBlbGxpcHNpc0NoYXJzICkgewoJCWlmKCBzdHIubGVuZ3RoID4gdHJ1bmNhdGVMZW4gKSB7CgkJCWVsbGlwc2lzQ2hhcnMgPSAoIGVsbGlwc2lzQ2hhcnMgPT0gbnVsbCApID8gJy4uJyA6IGVsbGlwc2lzQ2hhcnM7CgkJCXN0ciA9IHN0ci5zdWJzdHJpbmcoIDAsIHRydW5jYXRlTGVuIC0gZWxsaXBzaXNDaGFycy5sZW5ndGggKSArIGVsbGlwc2lzQ2hhcnM7CgkJfQoJCXJldHVybiBzdHI7Cgl9LAoJCgkKCS8qKgoJICogU3VwcG9ydHMgYEFycmF5LnByb3RvdHlwZS5pbmRleE9mKClgIGZ1bmN0aW9uYWxpdHkgZm9yIG9sZCBJRSAoSUU4IGFuZCBiZWxvdykuCgkgKiAKCSAqIEBwYXJhbSB7QXJyYXl9IGFyciBUaGUgYXJyYXkgdG8gZmluZCBhbiBlbGVtZW50IG9mLgoJICogQHBhcmFtIHsqfSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIGZpbmQgaW4gdGhlIGFycmF5LCBhbmQgcmV0dXJuIHRoZSBpbmRleCBvZi4KCSAqIEByZXR1cm4ge051bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBgZWxlbWVudGAsIG9yIC0xIGlmIGl0IHdhcyBub3QgZm91bmQuCgkgKi8KCWluZGV4T2YgOiBmdW5jdGlvbiggYXJyLCBlbGVtZW50ICkgewoJCWlmKCBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiApIHsKCQkJcmV0dXJuIGFyci5pbmRleE9mKCBlbGVtZW50ICk7CgkJCQoJCX0gZWxzZSB7CgkJCWZvciggdmFyIGkgPSAwLCBsZW4gPSBhcnIubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7CgkJCQlpZiggYXJyWyBpIF0gPT09IGVsZW1lbnQgKSByZXR1cm4gaTsKCQkJfQoJCQlyZXR1cm4gLTE7CgkJfQoJfSwKCQoJCgkKCS8qKgoJICogUGVyZm9ybXMgdGhlIGZ1bmN0aW9uYWxpdHkgb2Ygd2hhdCBtb2Rlcm4gYnJvd3NlcnMgZG8gd2hlbiBgU3RyaW5nLnByb3RvdHlwZS5zcGxpdCgpYCBpcyBjYWxsZWQKCSAqIHdpdGggYSByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBjb250YWlucyBjYXB0dXJpbmcgcGFyZW50aGVzaXMuCgkgKiAKCSAqIEZvciBleGFtcGxlOgoJICogCgkgKiAgICAgLy8gTW9kZXJuIGJyb3dzZXJzOiAKCSAqICAgICAiYSxiLGMiLnNwbGl0KCAvKCwpLyApOyAgLy8gLS0+IFsgJ2EnLCAnLCcsICdiJywgJywnLCAnYycgXQoJICogICAgIAoJICogICAgIC8vIE9sZCBJRSAoaW5jbHVkaW5nIElFOCk6CgkgKiAgICAgImEsYixjIi5zcGxpdCggLygsKS8gKTsgIC8vIC0tPiBbICdhJywgJ2InLCAnYycgXQoJICogICAgIAoJICogVGhpcyBtZXRob2QgZW11bGF0ZXMgdGhlIGZ1bmN0aW9uYWxpdHkgb2YgbW9kZXJuIGJyb3dzZXJzIGZvciB0aGUgb2xkIElFIGNhc2UuCgkgKiAKCSAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBzcGxpdC4KCSAqIEBwYXJhbSB7UmVnRXhwfSBzcGxpdFJlZ2V4IFRoZSByZWd1bGFyIGV4cHJlc3Npb24gdG8gc3BsaXQgdGhlIGlucHV0IGBzdHJgIG9uLiBUaGUgc3BsaXR0aW5nCgkgKiAgIGNoYXJhY3RlcihzKSB3aWxsIGJlIHNwbGljZWQgaW50byB0aGUgYXJyYXksIGFzIGluIHRoZSAibW9kZXJuIGJyb3dzZXJzIiBleGFtcGxlIGluIHRoZSAKCSAqICAgZGVzY3JpcHRpb24gb2YgdGhpcyBtZXRob2QuIAoJICogICBOb3RlICMxOiB0aGUgc3VwcGxpZWQgcmVndWxhciBleHByZXNzaW9uICoqbXVzdCoqIGhhdmUgdGhlICdnJyBmbGFnIHNwZWNpZmllZC4KCSAqICAgTm90ZSAjMjogZm9yIHNpbXBsaWNpdHkncyBzYWtlLCB0aGUgcmVndWxhciBleHByZXNzaW9uIGRvZXMgbm90IG5lZWQgCgkgKiAgIHRvIGNvbnRhaW4gY2FwdHVyaW5nIHBhcmVudGhlc2lzIC0gaXQgd2lsbCBiZSBhc3N1bWVkIHRoYXQgYW55IG1hdGNoIGhhcyB0aGVtLgoJICogQHJldHVybiB7U3RyaW5nW119IFRoZSBzcGxpdCBhcnJheSBvZiBzdHJpbmdzLCB3aXRoIHRoZSBzcGxpdHRpbmcgY2hhcmFjdGVyKHMpIGluY2x1ZGVkLgoJICovCglzcGxpdEFuZENhcHR1cmUgOiBmdW5jdGlvbiggc3RyLCBzcGxpdFJlZ2V4ICkgewoJCWlmKCAhc3BsaXRSZWdleC5nbG9iYWwgKSB0aHJvdyBuZXcgRXJyb3IoICJgc3BsaXRSZWdleGAgbXVzdCBoYXZlIHRoZSAnZycgZmxhZyBzZXQiICk7CgkJCgkJdmFyIHJlc3VsdCA9IFtdLAoJCSAgICBsYXN0SWR4ID0gMCwKCQkgICAgbWF0Y2g7CgkJCgkJd2hpbGUoIG1hdGNoID0gc3BsaXRSZWdleC5leGVjKCBzdHIgKSApIHsKCQkJcmVzdWx0LnB1c2goIHN0ci5zdWJzdHJpbmcoIGxhc3RJZHgsIG1hdGNoLmluZGV4ICkgKTsKCQkJcmVzdWx0LnB1c2goIG1hdGNoWyAwIF0gKTsgIC8vIHB1c2ggdGhlIHNwbGl0dGluZyBjaGFyKHMpCgkJCQoJCQlsYXN0SWR4ID0gbWF0Y2guaW5kZXggKyBtYXRjaFsgMCBdLmxlbmd0aDsKCQl9CgkJcmVzdWx0LnB1c2goIHN0ci5zdWJzdHJpbmcoIGxhc3RJZHggKSApOwoJCQoJCXJldHVybiByZXN1bHQ7Cgl9CgkKfTsKLypnbG9iYWwgQXV0b2xpbmtlciAqLwovKmpzaGludCBib3NzOnRydWUgKi8KLyoqCiAqIEBjbGFzcyBBdXRvbGlua2VyLkh0bWxUYWcKICogQGV4dGVuZHMgT2JqZWN0CiAqIAogKiBSZXByZXNlbnRzIGFuIEhUTUwgdGFnLCB3aGljaCBjYW4gYmUgdXNlZCB0byBlYXNpbHkgYnVpbGQvbW9kaWZ5IEhUTUwgdGFncyBwcm9ncmFtbWF0aWNhbGx5LgogKiAKICogQXV0b2xpbmtlciB1c2VzIHRoaXMgYWJzdHJhY3Rpb24gdG8gY3JlYXRlIEhUTUwgdGFncywgYW5kIHRoZW4gd3JpdGUgdGhlbSBvdXQgYXMgc3RyaW5ncy4gWW91IG1heSBhbHNvIHVzZQogKiB0aGlzIGNsYXNzIGluIHlvdXIgY29kZSwgZXNwZWNpYWxseSB3aXRoaW4gYSB7QGxpbmsgQXV0b2xpbmtlciNyZXBsYWNlRm4gcmVwbGFjZUZufS4KICogCiAqICMjIEV4YW1wbGVzCiAqIAogKiBFeGFtcGxlIGluc3RhbnRpYXRpb246CiAqIAogKiAgICAgdmFyIHRhZyA9IG5ldyBBdXRvbGlua2VyLkh0bWxUYWcoIHsKICogICAgICAgICB0YWdOYW1lIDogJ2EnLAogKiAgICAgICAgIGF0dHJzICAgOiB7ICdocmVmJzogJ2h0dHA6Ly9nb29nbGUuY29tJywgJ2NsYXNzJzogJ2V4dGVybmFsLWxpbmsnIH0sCiAqICAgICAgICAgaW5uZXJIdG1sIDogJ0dvb2dsZScKICogICAgIH0gKTsKICogICAgIAogKiAgICAgdGFnLnRvU3RyaW5nKCk7ICAvLyA8YSBocmVmPSJodHRwOi8vZ29vZ2xlLmNvbSIgY2xhc3M9ImV4dGVybmFsLWxpbmsiPkdvb2dsZTwvYT4KICogICAgIAogKiAgICAgLy8gSW5kaXZpZHVhbCBhY2Nlc3NvciBtZXRob2RzCiAqICAgICB0YWcuZ2V0VGFnTmFtZSgpOyAgICAgICAgICAgICAgICAgLy8gJ2EnCiAqICAgICB0YWcuZ2V0QXR0ciggJ2hyZWYnICk7ICAgICAgICAgICAgLy8gJ2h0dHA6Ly9nb29nbGUuY29tJwogKiAgICAgdGFnLmhhc0NsYXNzKCAnZXh0ZXJuYWwtbGluaycgKTsgIC8vIHRydWUKICogCiAqIAogKiBVc2luZyBtdXRhdG9yIG1ldGhvZHMgKHdoaWNoIG1heSBiZSB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGggaW5zdGFudGlhdGlvbiBjb25maWcgcHJvcGVydGllcyk6CiAqIAogKiAgICAgdmFyIHRhZyA9IG5ldyBBdXRvbGlua2VyLkh0bWxUYWcoKTsKICogICAgIHRhZy5zZXRUYWdOYW1lKCAnYScgKTsKICogICAgIHRhZy5zZXRBdHRyKCAnaHJlZicsICdodHRwOi8vZ29vZ2xlLmNvbScgKTsKICogICAgIHRhZy5hZGRDbGFzcyggJ2V4dGVybmFsLWxpbmsnICk7CiAqICAgICB0YWcuc2V0SW5uZXJIdG1sKCAnR29vZ2xlJyApOwogKiAgICAgCiAqICAgICB0YWcuZ2V0VGFnTmFtZSgpOyAgICAgICAgICAgICAgICAgLy8gJ2EnCiAqICAgICB0YWcuZ2V0QXR0ciggJ2hyZWYnICk7ICAgICAgICAgICAgLy8gJ2h0dHA6Ly9nb29nbGUuY29tJwogKiAgICAgdGFnLmhhc0NsYXNzKCAnZXh0ZXJuYWwtbGluaycgKTsgIC8vIHRydWUKICogICAgIAogKiAgICAgdGFnLnRvU3RyaW5nKCk7ICAvLyA8YSBocmVmPSJodHRwOi8vZ29vZ2xlLmNvbSIgY2xhc3M9ImV4dGVybmFsLWxpbmsiPkdvb2dsZTwvYT4KICogICAgIAogKiAKICogIyMgRXhhbXBsZSB1c2Ugd2l0aGluIGEge0BsaW5rIEF1dG9saW5rZXIjcmVwbGFjZUZuIHJlcGxhY2VGbn0KICogCiAqICAgICB2YXIgaHRtbCA9IEF1dG9saW5rZXIubGluayggIlRlc3QgZ29vZ2xlLmNvbSIsIHsKICogICAgICAgICByZXBsYWNlRm4gOiBmdW5jdGlvbiggYXV0b2xpbmtlciwgbWF0Y2ggKSB7CiAqICAgICAgICAgICAgIHZhciB0YWcgPSBhdXRvbGlua2VyLmdldFRhZ0J1aWxkZXIoKS5idWlsZCggbWF0Y2ggKTsgIC8vIHJldHVybnMgYW4ge0BsaW5rIEF1dG9saW5rZXIuSHRtbFRhZ30gaW5zdGFuY2UsIGNvbmZpZ3VyZWQgd2l0aCB0aGUgTWF0Y2gncyBocmVmIGFuZCBhbmNob3IgdGV4dAogKiAgICAgICAgICAgICB0YWcuc2V0QXR0ciggJ3JlbCcsICdub2ZvbGxvdycgKTsKICogICAgICAgICAgICAgCiAqICAgICAgICAgICAgIHJldHVybiB0YWc7CiAqICAgICAgICAgfQogKiAgICAgfSApOwogKiAgICAgCiAqICAgICAvLyBnZW5lcmF0ZWQgaHRtbDoKICogICAgIC8vICAgVGVzdCA8YSBocmVmPSJodHRwOi8vZ29vZ2xlLmNvbSIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm9mb2xsb3ciPmdvb2dsZS5jb208L2E+CiAqICAgICAKICogICAgIAogKiAjIyBFeGFtcGxlIHVzZSB3aXRoIGEgbmV3IHRhZyBmb3IgdGhlIHJlcGxhY2VtZW50CiAqIAogKiAgICAgdmFyIGh0bWwgPSBBdXRvbGlua2VyLmxpbmsoICJUZXN0IGdvb2dsZS5jb20iLCB7CiAqICAgICAgICAgcmVwbGFjZUZuIDogZnVuY3Rpb24oIGF1dG9saW5rZXIsIG1hdGNoICkgewogKiAgICAgICAgICAgICB2YXIgdGFnID0gbmV3IEF1dG9saW5rZXIuSHRtbFRhZyggewogKiAgICAgICAgICAgICAgICAgdGFnTmFtZSA6ICdidXR0b24nLAogKiAgICAgICAgICAgICAgICAgYXR0cnMgICA6IHsgJ3RpdGxlJzogJ0xvYWQgVVJMOiAnICsgbWF0Y2guZ2V0QW5jaG9ySHJlZigpIH0sCiAqICAgICAgICAgICAgICAgICBpbm5lckh0bWwgOiAnTG9hZCBVUkw6ICcgKyBtYXRjaC5nZXRBbmNob3JUZXh0KCkKICogICAgICAgICAgICAgfSApOwogKiAgICAgICAgICAgICAKICogICAgICAgICAgICAgcmV0dXJuIHRhZzsKICogICAgICAgICB9CiAqICAgICB9ICk7CiAqICAgICAKICogICAgIC8vIGdlbmVyYXRlZCBodG1sOgogKiAgICAgLy8gICBUZXN0IDxidXR0b24gdGl0bGU9IkxvYWQgVVJMOiBodHRwOi8vZ29vZ2xlLmNvbSI+TG9hZCBVUkw6IGdvb2dsZS5jb208L2J1dHRvbj4KICovCkF1dG9saW5rZXIuSHRtbFRhZyA9IEF1dG9saW5rZXIuVXRpbC5leHRlbmQoIE9iamVjdCwgewoJCgkvKioKCSAqIEBjZmcge1N0cmluZ30gdGFnTmFtZQoJICogCgkgKiBUaGUgdGFnIG5hbWUuIEV4OiAnYScsICdidXR0b24nLCBldGMuCgkgKiAKCSAqIE5vdCByZXF1aXJlZCBhdCBpbnN0YW50aWF0aW9uIHRpbWUsIGJ1dCBzaG91bGQgYmUgc2V0IHVzaW5nIHtAbGluayAjc2V0VGFnTmFtZX0gYmVmb3JlIHtAbGluayAjdG9TdHJpbmd9CgkgKiBpcyBleGVjdXRlZC4KCSAqLwoJCgkvKioKCSAqIEBjZmcge09iamVjdC48U3RyaW5nLCBTdHJpbmc+fSBhdHRycwoJICogCgkgKiBBbiBrZXkvdmFsdWUgT2JqZWN0IChtYXApIG9mIGF0dHJpYnV0ZXMgdG8gY3JlYXRlIHRoZSB0YWcgd2l0aC4gVGhlIGtleXMgYXJlIHRoZSBhdHRyaWJ1dGUgbmFtZXMsIGFuZCB0aGUKCSAqIHZhbHVlcyBhcmUgdGhlIGF0dHJpYnV0ZSB2YWx1ZXMuCgkgKi8KCQoJLyoqCgkgKiBAY2ZnIHtTdHJpbmd9IGlubmVySHRtbAoJICogCgkgKiBUaGUgaW5uZXIgSFRNTCBmb3IgdGhlIHRhZy4gCgkgKiAKCSAqIE5vdGUgdGhlIGNhbWVsIGNhc2UgbmFtZSBvbiBgaW5uZXJIdG1sYC4gQWNyb255bXMgYXJlIGNhbWVsQ2FzZWQgaW4gdGhpcyB1dGlsaXR5IChzdWNoIGFzIG5vdCB0byBydW4gaW50byB0aGUgYWNyb255bSAKCSAqIG5hbWluZyBpbmNvbnNpc3RlbmN5IHRoYXQgdGhlIERPTSBkZXZlbG9wZXJzIGNyZWF0ZWQgd2l0aCBgWE1MSHR0cFJlcXVlc3RgKS4gWW91IG1heSBhbHRlcm5hdGl2ZWx5IHVzZSB7QGxpbmsgI2lubmVySFRNTH0KCSAqIGlmIHlvdSBwcmVmZXIsIGJ1dCB0aGlzIG9uZSBpcyByZWNvbW1lbmRlZC4KCSAqLwoJCgkvKioKCSAqIEBjZmcge1N0cmluZ30gaW5uZXJIVE1MCgkgKiAKCSAqIEFsaWFzIG9mIHtAbGluayAjaW5uZXJIdG1sfSwgYWNjZXB0ZWQgZm9yIGNvbnNpc3RlbmN5IHdpdGggdGhlIGJyb3dzZXIgRE9NIGFwaSwgYnV0IHByZWZlciB0aGUgY2FtZWxDYXNlZCB2ZXJzaW9uCgkgKiBmb3IgYWNyb255bSBuYW1lcy4KCSAqLwoJCgkKCS8qKgoJICogQHByb3RlY3RlZAoJICogQHByb3BlcnR5IHtSZWdFeHB9IHdoaXRlc3BhY2VSZWdleAoJICogCgkgKiBSZWd1bGFyIGV4cHJlc3Npb24gdXNlZCB0byBtYXRjaCB3aGl0ZXNwYWNlIGluIGEgc3RyaW5nIG9mIENTUyBjbGFzc2VzLgoJICovCgl3aGl0ZXNwYWNlUmVnZXggOiAvXHMrLywKCQoJCgkvKioKCSAqIEBjb25zdHJ1Y3RvcgoJICogQHBhcmFtIHtPYmplY3R9IFtjZmddIFRoZSBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMgZm9yIHRoaXMgY2xhc3MsIGluIGFuIE9iamVjdCAobWFwKQoJICovCgljb25zdHJ1Y3RvciA6IGZ1bmN0aW9uKCBjZmcgKSB7CgkJQXV0b2xpbmtlci5VdGlsLmFzc2lnbiggdGhpcywgY2ZnICk7CgkJCgkJdGhpcy5pbm5lckh0bWwgPSB0aGlzLmlubmVySHRtbCB8fCB0aGlzLmlubmVySFRNTDsgIC8vIGFjY2VwdCBlaXRoZXIgdGhlIGNhbWVsQ2FzZWQgZm9ybSBvciB0aGUgZnVsbHkgY2FwaXRhbGl6ZWQgYWNyb255bQoJfSwKCQoJCgkvKioKCSAqIFNldHMgdGhlIHRhZyBuYW1lIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGdlbmVyYXRlIHRoZSB0YWcgd2l0aC4KCSAqIAoJICogQHBhcmFtIHtTdHJpbmd9IHRhZ05hbWUKCSAqIEByZXR1cm4ge0F1dG9saW5rZXIuSHRtbFRhZ30gVGhpcyBIdG1sVGFnIGluc3RhbmNlLCBzbyB0aGF0IG1ldGhvZCBjYWxscyBtYXkgYmUgY2hhaW5lZC4KCSAqLwoJc2V0VGFnTmFtZSA6IGZ1bmN0aW9uKCB0YWdOYW1lICkgewoJCXRoaXMudGFnTmFtZSA9IHRhZ05hbWU7CgkJcmV0dXJuIHRoaXM7Cgl9LAoJCgkKCS8qKgoJICogUmV0cmlldmVzIHRoZSB0YWcgbmFtZS4KCSAqIAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRUYWdOYW1lIDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMudGFnTmFtZSB8fCAiIjsKCX0sCgkKCQoJLyoqCgkgKiBTZXRzIGFuIGF0dHJpYnV0ZSBvbiB0aGUgSHRtbFRhZy4KCSAqIAoJICogQHBhcmFtIHtTdHJpbmd9IGF0dHJOYW1lIFRoZSBhdHRyaWJ1dGUgbmFtZSB0byBzZXQuCgkgKiBAcGFyYW0ge1N0cmluZ30gYXR0clZhbHVlIFRoZSBhdHRyaWJ1dGUgdmFsdWUgdG8gc2V0LgoJICogQHJldHVybiB7QXV0b2xpbmtlci5IdG1sVGFnfSBUaGlzIEh0bWxUYWcgaW5zdGFuY2UsIHNvIHRoYXQgbWV0aG9kIGNhbGxzIG1heSBiZSBjaGFpbmVkLgoJICovCglzZXRBdHRyIDogZnVuY3Rpb24oIGF0dHJOYW1lLCBhdHRyVmFsdWUgKSB7CgkJdmFyIHRhZ0F0dHJzID0gdGhpcy5nZXRBdHRycygpOwoJCXRhZ0F0dHJzWyBhdHRyTmFtZSBdID0gYXR0clZhbHVlOwoJCQoJCXJldHVybiB0aGlzOwoJfSwKCQoJCgkvKioKCSAqIFJldHJpZXZlcyBhbiBhdHRyaWJ1dGUgZnJvbSB0aGUgSHRtbFRhZy4gSWYgdGhlIGF0dHJpYnV0ZSBkb2VzIG5vdCBleGlzdCwgcmV0dXJucyBgdW5kZWZpbmVkYC4KCSAqIAoJICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgVGhlIGF0dHJpYnV0ZSBuYW1lIHRvIHJldHJpZXZlLgoJICogQHJldHVybiB7U3RyaW5nfSBUaGUgYXR0cmlidXRlJ3MgdmFsdWUsIG9yIGB1bmRlZmluZWRgIGlmIGl0IGRvZXMgbm90IGV4aXN0IG9uIHRoZSBIdG1sVGFnLgoJICovCglnZXRBdHRyIDogZnVuY3Rpb24oIGF0dHJOYW1lICkgewoJCXJldHVybiB0aGlzLmdldEF0dHJzKClbIGF0dHJOYW1lIF07Cgl9LAoJCgkKCS8qKgoJICogU2V0cyBvbmUgb3IgbW9yZSBhdHRyaWJ1dGVzIG9uIHRoZSBIdG1sVGFnLgoJICogCgkgKiBAcGFyYW0ge09iamVjdC48U3RyaW5nLCBTdHJpbmc+fSBhdHRycyBBIGtleS92YWx1ZSBPYmplY3QgKG1hcCkgb2YgdGhlIGF0dHJpYnV0ZXMgdG8gc2V0LgoJICogQHJldHVybiB7QXV0b2xpbmtlci5IdG1sVGFnfSBUaGlzIEh0bWxUYWcgaW5zdGFuY2UsIHNvIHRoYXQgbWV0aG9kIGNhbGxzIG1heSBiZSBjaGFpbmVkLgoJICovCglzZXRBdHRycyA6IGZ1bmN0aW9uKCBhdHRycyApIHsKCQl2YXIgdGFnQXR0cnMgPSB0aGlzLmdldEF0dHJzKCk7CgkJQXV0b2xpbmtlci5VdGlsLmFzc2lnbiggdGFnQXR0cnMsIGF0dHJzICk7CgkJCgkJcmV0dXJuIHRoaXM7Cgl9LAoJCgkKCS8qKgoJICogUmV0cmlldmVzIHRoZSBhdHRyaWJ1dGVzIE9iamVjdCAobWFwKSBmb3IgdGhlIEh0bWxUYWcuCgkgKiAKCSAqIEByZXR1cm4ge09iamVjdC48U3RyaW5nLCBTdHJpbmc+fSBBIGtleS92YWx1ZSBvYmplY3Qgb2YgdGhlIGF0dHJpYnV0ZXMgZm9yIHRoZSBIdG1sVGFnLgoJICovCglnZXRBdHRycyA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLmF0dHJzIHx8ICggdGhpcy5hdHRycyA9IHt9ICk7Cgl9LAoJCgkKCS8qKgoJICogU2V0cyB0aGUgcHJvdmlkZWQgYGNzc0NsYXNzYCwgb3ZlcndyaXRpbmcgYW55IGN1cnJlbnQgQ1NTIGNsYXNzZXMgb24gdGhlIEh0bWxUYWcuCgkgKiAKCSAqIEBwYXJhbSB7U3RyaW5nfSBjc3NDbGFzcyBPbmUgb3IgbW9yZSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gc2V0IChvdmVyd3JpdGUpLgoJICogQHJldHVybiB7QXV0b2xpbmtlci5IdG1sVGFnfSBUaGlzIEh0bWxUYWcgaW5zdGFuY2UsIHNvIHRoYXQgbWV0aG9kIGNhbGxzIG1heSBiZSBjaGFpbmVkLgoJICovCglzZXRDbGFzcyA6IGZ1bmN0aW9uKCBjc3NDbGFzcyApIHsKCQlyZXR1cm4gdGhpcy5zZXRBdHRyKCAnY2xhc3MnLCBjc3NDbGFzcyApOwoJfSwKCQoJCgkvKioKCSAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBhZGQgb25lIG9yIG1vcmUgQ1NTIGNsYXNzZXMgdG8gdGhlIEh0bWxUYWcuIFdpbGwgbm90IGFkZCBkdXBsaWNhdGUgQ1NTIGNsYXNzZXMuCgkgKiAKCSAqIEBwYXJhbSB7U3RyaW5nfSBjc3NDbGFzcyBPbmUgb3IgbW9yZSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gYWRkLgoJICogQHJldHVybiB7QXV0b2xpbmtlci5IdG1sVGFnfSBUaGlzIEh0bWxUYWcgaW5zdGFuY2UsIHNvIHRoYXQgbWV0aG9kIGNhbGxzIG1heSBiZSBjaGFpbmVkLgoJICovCglhZGRDbGFzcyA6IGZ1bmN0aW9uKCBjc3NDbGFzcyApIHsKCQl2YXIgY2xhc3NBdHRyID0gdGhpcy5nZXRDbGFzcygpLAoJCSAgICB3aGl0ZXNwYWNlUmVnZXggPSB0aGlzLndoaXRlc3BhY2VSZWdleCwKCQkgICAgaW5kZXhPZiA9IEF1dG9saW5rZXIuVXRpbC5pbmRleE9mLCAgLy8gdG8gc3VwcG9ydCBJRTggYW5kIGJlbG93CgkJICAgIGNsYXNzZXMgPSAoICFjbGFzc0F0dHIgKSA/IFtdIDogY2xhc3NBdHRyLnNwbGl0KCB3aGl0ZXNwYWNlUmVnZXggKSwKCQkgICAgbmV3Q2xhc3NlcyA9IGNzc0NsYXNzLnNwbGl0KCB3aGl0ZXNwYWNlUmVnZXggKSwKCQkgICAgbmV3Q2xhc3M7CgkJCgkJd2hpbGUoIG5ld0NsYXNzID0gbmV3Q2xhc3Nlcy5zaGlmdCgpICkgewoJCQlpZiggaW5kZXhPZiggY2xhc3NlcywgbmV3Q2xhc3MgKSA9PT0gLTEgKSB7CgkJCQljbGFzc2VzLnB1c2goIG5ld0NsYXNzICk7CgkJCX0KCQl9CgkJCgkJdGhpcy5nZXRBdHRycygpWyAnY2xhc3MnIF0gPSBjbGFzc2VzLmpvaW4oICIgIiApOwoJCXJldHVybiB0aGlzOwoJfSwKCQoJCgkvKioKCSAqIENvbnZlbmllbmNlIG1ldGhvZCB0byByZW1vdmUgb25lIG9yIG1vcmUgQ1NTIGNsYXNzZXMgZnJvbSB0aGUgSHRtbFRhZy4KCSAqIAoJICogQHBhcmFtIHtTdHJpbmd9IGNzc0NsYXNzIE9uZSBvciBtb3JlIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byByZW1vdmUuCgkgKiBAcmV0dXJuIHtBdXRvbGlua2VyLkh0bWxUYWd9IFRoaXMgSHRtbFRhZyBpbnN0YW5jZSwgc28gdGhhdCBtZXRob2QgY2FsbHMgbWF5IGJlIGNoYWluZWQuCgkgKi8KCXJlbW92ZUNsYXNzIDogZnVuY3Rpb24oIGNzc0NsYXNzICkgewoJCXZhciBjbGFzc0F0dHIgPSB0aGlzLmdldENsYXNzKCksCgkJICAgIHdoaXRlc3BhY2VSZWdleCA9IHRoaXMud2hpdGVzcGFjZVJlZ2V4LAoJCSAgICBpbmRleE9mID0gQXV0b2xpbmtlci5VdGlsLmluZGV4T2YsICAvLyB0byBzdXBwb3J0IElFOCBhbmQgYmVsb3cKCQkgICAgY2xhc3NlcyA9ICggIWNsYXNzQXR0ciApID8gW10gOiBjbGFzc0F0dHIuc3BsaXQoIHdoaXRlc3BhY2VSZWdleCApLAoJCSAgICByZW1vdmVDbGFzc2VzID0gY3NzQ2xhc3Muc3BsaXQoIHdoaXRlc3BhY2VSZWdleCApLAoJCSAgICByZW1vdmVDbGFzczsKCQkKCQl3aGlsZSggY2xhc3Nlcy5sZW5ndGggJiYgKCByZW1vdmVDbGFzcyA9IHJlbW92ZUNsYXNzZXMuc2hpZnQoKSApICkgewoJCQl2YXIgaWR4ID0gaW5kZXhPZiggY2xhc3NlcywgcmVtb3ZlQ2xhc3MgKTsKCQkJaWYoIGlkeCAhPT0gLTEgKSB7CgkJCQljbGFzc2VzLnNwbGljZSggaWR4LCAxICk7CgkJCX0KCQl9CgkJCgkJdGhpcy5nZXRBdHRycygpWyAnY2xhc3MnIF0gPSBjbGFzc2VzLmpvaW4oICIgIiApOwoJCXJldHVybiB0aGlzOwoJfSwKCQoJCgkvKioKCSAqIENvbnZlbmllbmNlIG1ldGhvZCB0byByZXRyaWV2ZSB0aGUgQ1NTIGNsYXNzKGVzKSBmb3IgdGhlIEh0bWxUYWcsIHdoaWNoIHdpbGwgZWFjaCBiZSBzZXBhcmF0ZWQgYnkgc3BhY2VzIHdoZW4KCSAqIHRoZXJlIGFyZSBtdWx0aXBsZS4KCSAqIAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRDbGFzcyA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLmdldEF0dHJzKClbICdjbGFzcycgXSB8fCAiIjsKCX0sCgkKCQoJLyoqCgkgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gY2hlY2sgaWYgdGhlIHRhZyBoYXMgYSBDU1MgY2xhc3Mgb3Igbm90LgoJICogCgkgKiBAcGFyYW0ge1N0cmluZ30gY3NzQ2xhc3MgVGhlIENTUyBjbGFzcyB0byBjaGVjayBmb3IuCgkgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIEh0bWxUYWcgaGFzIHRoZSBDU1MgY2xhc3MsIGBmYWxzZWAgb3RoZXJ3aXNlLgoJICovCgloYXNDbGFzcyA6IGZ1bmN0aW9uKCBjc3NDbGFzcyApIHsKCQlyZXR1cm4gKCAnICcgKyB0aGlzLmdldENsYXNzKCkgKyAnICcgKS5pbmRleE9mKCAnICcgKyBjc3NDbGFzcyArICcgJyApICE9PSAtMTsKCX0sCgkKCQoJLyoqCgkgKiBTZXRzIHRoZSBpbm5lciBIVE1MIGZvciB0aGUgdGFnLgoJICogCgkgKiBAcGFyYW0ge1N0cmluZ30gaHRtbCBUaGUgaW5uZXIgSFRNTCB0byBzZXQuCgkgKiBAcmV0dXJuIHtBdXRvbGlua2VyLkh0bWxUYWd9IFRoaXMgSHRtbFRhZyBpbnN0YW5jZSwgc28gdGhhdCBtZXRob2QgY2FsbHMgbWF5IGJlIGNoYWluZWQuCgkgKi8KCXNldElubmVySHRtbCA6IGZ1bmN0aW9uKCBodG1sICkgewoJCXRoaXMuaW5uZXJIdG1sID0gaHRtbDsKCQkKCQlyZXR1cm4gdGhpczsKCX0sCgkKCQoJLyoqCgkgKiBSZXRyaWV2ZXMgdGhlIGlubmVyIEhUTUwgZm9yIHRoZSB0YWcuCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0SW5uZXJIdG1sIDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuaW5uZXJIdG1sIHx8ICIiOwoJfSwKCQoJCgkvKioKCSAqIE92ZXJyaWRlIG9mIHN1cGVyY2xhc3MgbWV0aG9kIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIEhUTUwgc3RyaW5nIGZvciB0aGUgdGFnLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCXRvU3RyaW5nIDogZnVuY3Rpb24oKSB7CgkJdmFyIHRhZ05hbWUgPSB0aGlzLmdldFRhZ05hbWUoKSwKCQkgICAgYXR0cnNTdHIgPSB0aGlzLmJ1aWxkQXR0cnNTdHIoKTsKCQkKCQlhdHRyc1N0ciA9ICggYXR0cnNTdHIgKSA/ICcgJyArIGF0dHJzU3RyIDogJyc7ICAvLyBwcmVwZW5kIGEgc3BhY2UgaWYgdGhlcmUgYXJlIGFjdHVhbGx5IGF0dHJpYnV0ZXMKCQkKCQlyZXR1cm4gWyAnPCcsIHRhZ05hbWUsIGF0dHJzU3RyLCAnPicsIHRoaXMuZ2V0SW5uZXJIdG1sKCksICc8LycsIHRhZ05hbWUsICc+JyBdLmpvaW4oICIiICk7Cgl9LAoJCgkKCS8qKgoJICogU3VwcG9ydCBtZXRob2QgZm9yIHtAbGluayAjdG9TdHJpbmd9LCByZXR1cm5zIHRoZSBzdHJpbmcgc3BhY2Utc2VwYXJhdGVkIGtleT0idmFsdWUiIHBhaXJzLCB1c2VkIHRvIHBvcHVsYXRlIAoJICogdGhlIHN0cmluZ2lmaWVkIEh0bWxUYWcuCgkgKiAKCSAqIEBwcm90ZWN0ZWQKCSAqIEByZXR1cm4ge1N0cmluZ30gRXhhbXBsZSByZXR1cm46IGBhdHRyMT0idmFsdWUxIiBhdHRyMj0idmFsdWUyImAKCSAqLwoJYnVpbGRBdHRyc1N0ciA6IGZ1bmN0aW9uKCkgewoJCWlmKCAhdGhpcy5hdHRycyApIHJldHVybiAiIjsgIC8vIG5vIGBhdHRyc2AgT2JqZWN0IChtYXApIGhhcyBiZWVuIHNldCwgcmV0dXJuIGVtcHR5IHN0cmluZwoJCQoJCXZhciBhdHRycyA9IHRoaXMuZ2V0QXR0cnMoKSwKCQkgICAgYXR0cnNBcnIgPSBbXTsKCQkKCQlmb3IoIHZhciBwcm9wIGluIGF0dHJzICkgewoJCQlpZiggYXR0cnMuaGFzT3duUHJvcGVydHkoIHByb3AgKSApIHsKCQkJCWF0dHJzQXJyLnB1c2goIHByb3AgKyAnPSInICsgYXR0cnNbIHByb3AgXSArICciJyApOwoJCQl9CgkJfQoJCXJldHVybiBhdHRyc0Fyci5qb2luKCAiICIgKTsKCX0KCQp9ICk7Ci8qZ2xvYmFsIEF1dG9saW5rZXIgKi8KLypqc2hpbnQgc3ViOnRydWUgKi8KLyoqCiAqIEBwcm90ZWN0ZWQKICogQGNsYXNzIEF1dG9saW5rZXIuQW5jaG9yVGFnQnVpbGRlcgogKiBAZXh0ZW5kcyBPYmplY3QKICogCiAqIEJ1aWxkcyBhbmNob3IgKCZsdDthJmd0OykgdGFncyBmb3IgdGhlIEF1dG9saW5rZXIgdXRpbGl0eSB3aGVuIGEgbWF0Y2ggaXMgZm91bmQuCiAqIAogKiBOb3JtYWxseSB0aGlzIGNsYXNzIGlzIGluc3RhbnRpYXRlZCwgY29uZmlndXJlZCwgYW5kIHVzZWQgaW50ZXJuYWxseSBieSBhbiB7QGxpbmsgQXV0b2xpbmtlcn0gaW5zdGFuY2UsIGJ1dCBtYXkgCiAqIGFjdHVhbGx5IGJlIHJldHJpZXZlZCBpbiBhIHtAbGluayBBdXRvbGlua2VyI3JlcGxhY2VGbiByZXBsYWNlRm59IHRvIGNyZWF0ZSB7QGxpbmsgQXV0b2xpbmtlci5IdG1sVGFnIEh0bWxUYWd9IGluc3RhbmNlcwogKiB3aGljaCBtYXkgYmUgbW9kaWZpZWQgYmVmb3JlIHJldHVybmluZyBmcm9tIHRoZSB7QGxpbmsgQXV0b2xpbmtlciNyZXBsYWNlRm4gcmVwbGFjZUZufS4gRm9yIGV4YW1wbGU6CiAqIAogKiAgICAgdmFyIGh0bWwgPSBBdXRvbGlua2VyLmxpbmsoICJUZXN0IGdvb2dsZS5jb20iLCB7CiAqICAgICAgICAgcmVwbGFjZUZuIDogZnVuY3Rpb24oIGF1dG9saW5rZXIsIG1hdGNoICkgewogKiAgICAgICAgICAgICB2YXIgdGFnID0gYXV0b2xpbmtlci5nZXRUYWdCdWlsZGVyKCkuYnVpbGQoIG1hdGNoICk7ICAvLyByZXR1cm5zIGFuIHtAbGluayBBdXRvbGlua2VyLkh0bWxUYWd9IGluc3RhbmNlCiAqICAgICAgICAgICAgIHRhZy5zZXRBdHRyKCAncmVsJywgJ25vZm9sbG93JyApOwogKiAgICAgICAgICAgICAKICogICAgICAgICAgICAgcmV0dXJuIHRhZzsKICogICAgICAgICB9CiAqICAgICB9ICk7CiAqICAgICAKICogICAgIC8vIGdlbmVyYXRlZCBodG1sOgogKiAgICAgLy8gICBUZXN0IDxhIGhyZWY9Imh0dHA6Ly9nb29nbGUuY29tIiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub2ZvbGxvdyI+Z29vZ2xlLmNvbTwvYT4KICovCkF1dG9saW5rZXIuQW5jaG9yVGFnQnVpbGRlciA9IEF1dG9saW5rZXIuVXRpbC5leHRlbmQoIE9iamVjdCwgewoJCgkvKioKCSAqIEBjZmcge0Jvb2xlYW59IG5ld1dpbmRvdwoJICogQGluaGVyaXRkb2MgQXV0b2xpbmtlciNuZXdXaW5kb3cKCSAqLwoJCgkvKioKCSAqIEBjZmcge051bWJlcn0gdHJ1bmNhdGUKCSAqIEBpbmhlcml0ZG9jIEF1dG9saW5rZXIjdHJ1bmNhdGUKCSAqLwoJCgkvKioKCSAqIEBjZmcge1N0cmluZ30gY2xhc3NOYW1lCgkgKiBAaW5oZXJpdGRvYyBBdXRvbGlua2VyI2NsYXNzTmFtZQoJICovCgkKCQoJLyoqCgkgKiBAY29uc3RydWN0b3IKCSAqIEBwYXJhbSB7T2JqZWN0fSBbY2ZnXSBUaGUgY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgQW5jaG9yVGFnQnVpbGRlciBpbnN0YW5jZSwgc3BlY2lmaWVkIGluIGFuIE9iamVjdCAobWFwKS4KCSAqLwoJY29uc3RydWN0b3IgOiBmdW5jdGlvbiggY2ZnICkgewoJCUF1dG9saW5rZXIuVXRpbC5hc3NpZ24oIHRoaXMsIGNmZyApOwoJfSwKCQoJCgkvKioKCSAqIEdlbmVyYXRlcyB0aGUgYWN0dWFsIGFuY2hvciAoJmx0O2EmZ3Q7KSB0YWcgdG8gdXNlIGluIHBsYWNlIG9mIHRoZSBtYXRjaGVkIFVSTC9lbWFpbC9Ud2l0dGVyIHRleHQsCgkgKiB2aWEgaXRzIGBtYXRjaGAgb2JqZWN0LgoJICogCgkgKiBAcGFyYW0ge0F1dG9saW5rZXIubWF0Y2guTWF0Y2h9IG1hdGNoIFRoZSBNYXRjaCBpbnN0YW5jZSB0byBnZW5lcmF0ZSBhbiBhbmNob3IgdGFnIGZyb20uCgkgKiBAcmV0dXJuIHtBdXRvbGlua2VyLkh0bWxUYWd9IFRoZSBIdG1sVGFnIGluc3RhbmNlIGZvciB0aGUgYW5jaG9yIHRhZy4KCSAqLwoJYnVpbGQgOiBmdW5jdGlvbiggbWF0Y2ggKSB7CgkJdmFyIHRhZyA9IG5ldyBBdXRvbGlua2VyLkh0bWxUYWcoIHsKCQkJdGFnTmFtZSAgIDogJ2EnLAoJCQlhdHRycyAgICAgOiB0aGlzLmNyZWF0ZUF0dHJzKCBtYXRjaC5nZXRUeXBlKCksIG1hdGNoLmdldEFuY2hvckhyZWYoKSApLAoJCQlpbm5lckh0bWwgOiB0aGlzLnByb2Nlc3NBbmNob3JUZXh0KCBtYXRjaC5nZXRBbmNob3JUZXh0KCkgKQoJCX0gKTsKCQkKCQlyZXR1cm4gdGFnOwoJfSwKCQoJCgkvKioKCSAqIENyZWF0ZXMgdGhlIE9iamVjdCAobWFwKSBvZiB0aGUgSFRNTCBhdHRyaWJ1dGVzIGZvciB0aGUgYW5jaG9yICgmbHQ7YSZndDspIHRhZyBiZWluZyBnZW5lcmF0ZWQuCgkgKiAKCSAqIEBwcm90ZWN0ZWQKCSAqIEBwYXJhbSB7InVybCIvImVtYWlsIi8idHdpdHRlciJ9IG1hdGNoVHlwZSBUaGUgdHlwZSBvZiBtYXRjaCB0aGF0IGFuIGFuY2hvciB0YWcgaXMgYmVpbmcgZ2VuZXJhdGVkIGZvci4KCSAqIEBwYXJhbSB7U3RyaW5nfSBocmVmIFRoZSBocmVmIGZvciB0aGUgYW5jaG9yIHRhZy4KCSAqIEByZXR1cm4ge09iamVjdH0gQSBrZXkvdmFsdWUgT2JqZWN0IChtYXApIG9mIHRoZSBhbmNob3IgdGFnJ3MgYXR0cmlidXRlcy4gCgkgKi8KCWNyZWF0ZUF0dHJzIDogZnVuY3Rpb24oIG1hdGNoVHlwZSwgYW5jaG9ySHJlZiApIHsKCQl2YXIgYXR0cnMgPSB7CgkJCSdocmVmJyA6IGFuY2hvckhyZWYgIC8vIHdlJ2xsIGFsd2F5cyBoYXZlIHRoZSBgaHJlZmAgYXR0cmlidXRlCgkJfTsKCQkKCQl2YXIgY3NzQ2xhc3MgPSB0aGlzLmNyZWF0ZUNzc0NsYXNzKCBtYXRjaFR5cGUgKTsKCQlpZiggY3NzQ2xhc3MgKSB7CgkJCWF0dHJzWyAnY2xhc3MnIF0gPSBjc3NDbGFzczsKCQl9CgkJaWYoIHRoaXMubmV3V2luZG93ICkgewoJCQlhdHRyc1sgJ3RhcmdldCcgXSA9ICJfYmxhbmsiOwoJCX0KCQkKCQlyZXR1cm4gYXR0cnM7Cgl9LAoJCgkKCS8qKgoJICogQ3JlYXRlcyB0aGUgQ1NTIGNsYXNzIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBhIGdpdmVuIGFuY2hvciB0YWcsIGJhc2VkIG9uIHRoZSBgbWF0Y2hUeXBlYCBhbmQgdGhlIHtAbGluayAjY2xhc3NOYW1lfQoJICogY29uZmlnLgoJICogCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHsidXJsIi8iZW1haWwiLyJ0d2l0dGVyIn0gbWF0Y2hUeXBlIFRoZSB0eXBlIG9mIG1hdGNoIHRoYXQgYW4gYW5jaG9yIHRhZyBpcyBiZWluZyBnZW5lcmF0ZWQgZm9yLgoJICogQHJldHVybiB7U3RyaW5nfSBUaGUgQ1NTIGNsYXNzIHN0cmluZyBmb3IgdGhlIGxpbmsuIEV4YW1wbGUgcmV0dXJuOiAibXlMaW5rIG15TGluay11cmwiLiBJZiBubyB7QGxpbmsgI2NsYXNzTmFtZX0KCSAqICAgd2FzIGNvbmZpZ3VyZWQsIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nLgoJICovCgljcmVhdGVDc3NDbGFzcyA6IGZ1bmN0aW9uKCBtYXRjaFR5cGUgKSB7CgkJdmFyIGNsYXNzTmFtZSA9IHRoaXMuY2xhc3NOYW1lOwoJCQoJCWlmKCAhY2xhc3NOYW1lICkgCgkJCXJldHVybiAiIjsKCQllbHNlCgkJCXJldHVybiBjbGFzc05hbWUgKyAiICIgKyBjbGFzc05hbWUgKyAiLSIgKyBtYXRjaFR5cGU7ICAvLyBleDogIm15TGluayBteUxpbmstdXJsIiwgIm15TGluayBteUxpbmstZW1haWwiLCBvciAibXlMaW5rIG15TGluay10d2l0dGVyIgoJfSwKCQoJCgkvKioKCSAqIFByb2Nlc3NlcyB0aGUgYGFuY2hvclRleHRgIGJ5IHRydW5jYXRpbmcgdGhlIHRleHQgYWNjb3JkaW5nIHRvIHRoZSB7QGxpbmsgI3RydW5jYXRlfSBjb25maWcuCgkgKiAKCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge1N0cmluZ30gYW5jaG9yVGV4dCBUaGUgYW5jaG9yIHRhZydzIHRleHQgKGkuZS4gd2hhdCB3aWxsIGJlIGRpc3BsYXllZCkuCgkgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBwcm9jZXNzZWQgYGFuY2hvclRleHRgLgoJICovCglwcm9jZXNzQW5jaG9yVGV4dCA6IGZ1bmN0aW9uKCBhbmNob3JUZXh0ICkgewoJCWFuY2hvclRleHQgPSB0aGlzLmRvVHJ1bmNhdGUoIGFuY2hvclRleHQgKTsKCQkKCQlyZXR1cm4gYW5jaG9yVGV4dDsKCX0sCgkKCQoJLyoqCgkgKiBQZXJmb3JtcyB0aGUgdHJ1bmNhdGlvbiBvZiB0aGUgYGFuY2hvclRleHRgLCBpZiB0aGUgYGFuY2hvclRleHRgIGlzIGxvbmdlciB0aGFuIHRoZSB7QGxpbmsgI3RydW5jYXRlfSBvcHRpb24uCgkgKiBUcnVuY2F0ZXMgdGhlIHRleHQgdG8gMiBjaGFyYWN0ZXJzIGZld2VyIHRoYW4gdGhlIHtAbGluayAjdHJ1bmNhdGV9IG9wdGlvbiwgYW5kIGFkZHMgIi4uIiB0byB0aGUgZW5kLgoJICogCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGhlIGFuY2hvciB0YWcncyB0ZXh0IChpLmUuIHdoYXQgd2lsbCBiZSBkaXNwbGF5ZWQpLgoJICogQHJldHVybiB7U3RyaW5nfSBUaGUgdHJ1bmNhdGVkIGFuY2hvciB0ZXh0LgoJICovCglkb1RydW5jYXRlIDogZnVuY3Rpb24oIGFuY2hvclRleHQgKSB7CgkJcmV0dXJuIEF1dG9saW5rZXIuVXRpbC5lbGxpcHNpcyggYW5jaG9yVGV4dCwgdGhpcy50cnVuY2F0ZSB8fCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgKTsKCX0KCQp9ICk7Ci8qZ2xvYmFsIEF1dG9saW5rZXIgKi8KLyoqCiAqIEBwcml2YXRlCiAqIEBjbGFzcyBBdXRvbGlua2VyLmh0bWxQYXJzZXIuSHRtbFBhcnNlcgogKiBAZXh0ZW5kcyBPYmplY3QKICogCiAqIEFuIEhUTUwgcGFyc2VyIGltcGxlbWVudGF0aW9uIHdoaWNoIHNpbXBseSB3YWxrcyBhbiBIVE1MIHN0cmluZyBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiAKICoge0BsaW5rIEF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sTm9kZSBIdG1sTm9kZXN9IHRoYXQgcmVwcmVzZW50IHRoZSBiYXNpYyBIVE1MIHN0cnVjdHVyZSBvZiB0aGUgaW5wdXQgc3RyaW5nLgogKiAKICogQXV0b2xpbmtlciB1c2VzIHRoaXMgdG8gb25seSBsaW5rIFVSTHMvZW1haWxzL1R3aXR0ZXIgaGFuZGxlcyB3aXRoaW4gdGV4dCBub2RlcywgZWZmZWN0aXZlbHkgaWdub3JpbmcgLyAid2Fsa2luZwogKiBhcm91bmQiIEhUTUwgdGFncy4KICovCkF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sUGFyc2VyID0gQXV0b2xpbmtlci5VdGlsLmV4dGVuZCggT2JqZWN0LCB7CgkKCS8qKgoJICogQHByaXZhdGUKCSAqIEBwcm9wZXJ0eSB7UmVnRXhwfSBodG1sUmVnZXgKCSAqIAoJICogVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIHB1bGwgb3V0IEhUTUwgdGFncyBmcm9tIGEgc3RyaW5nLiBIYW5kbGVzIG5hbWVzcGFjZWQgSFRNTCB0YWdzIGFuZAoJICogYXR0cmlidXRlIG5hbWVzLCBhcyBzcGVjaWZpZWQgYnkgaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbC1tYXJrdXAvc3ludGF4Lmh0bWwuCgkgKiAKCSAqIENhcHR1cmluZyBncm91cHM6CgkgKiAKCSAqIDEuIFRoZSAiIURPQ1RZUEUiIHRhZyBuYW1lLCBpZiBhIHRhZyBpcyBhICZsdDshRE9DVFlQRSZndDsgdGFnLgoJICogMi4gSWYgaXQgaXMgYW4gZW5kIHRhZywgdGhpcyBncm91cCB3aWxsIGhhdmUgdGhlICcvJy4KCSAqIDMuIFRoZSB0YWcgbmFtZSBmb3IgYWxsIHRhZ3MgKG90aGVyIHRoYW4gdGhlICZsdDshRE9DVFlQRSZndDsgdGFnKQoJICovCglodG1sUmVnZXggOiAoZnVuY3Rpb24oKSB7CgkJdmFyIHRhZ05hbWVSZWdleCA9IC9bMC05YS16QS1aXVswLTlhLXpBLVo6XSovLAoJCSAgICBhdHRyTmFtZVJlZ2V4ID0gL1teXHNcMCInPlwvPVx4MDEtXHgxRlx4N0ZdKy8sICAgLy8gdGhlIHVuaWNvZGUgcmFuZ2UgYWNjb3VudHMgZm9yIGV4Y2x1ZGluZyBjb250cm9sIGNoYXJzLCBhbmQgdGhlIGRlbGV0ZSBjaGFyCgkJICAgIGF0dHJWYWx1ZVJlZ2V4ID0gLyg/OiJbXiJdKj8ifCdbXiddKj8nfFteJyI9PD5gXHNdKykvLCAvLyBkb3VibGUgcXVvdGVkLCBzaW5nbGUgcXVvdGVkLCBvciB1bnF1b3RlZCBhdHRyaWJ1dGUgdmFsdWVzCgkJICAgIG5hbWVFcXVhbHNWYWx1ZVJlZ2V4ID0gYXR0ck5hbWVSZWdleC5zb3VyY2UgKyAnKD86XFxzKj1cXHMqJyArIGF0dHJWYWx1ZVJlZ2V4LnNvdXJjZSArICcpPyc7ICAvLyBvcHRpb25hbCAnPVt2YWx1ZV0nCgkJCgkJcmV0dXJuIG5ldyBSZWdFeHAoIFsKCQkJLy8gZm9yIDwhRE9DVFlQRT4gdGFnLiBFeDogPCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBYSFRNTCAxLjAgU3RyaWN0Ly9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSL3hodG1sMS9EVEQveGh0bWwxLXN0cmljdC5kdGQiPikgCgkJCScoPzonLAoJCQkJJzwoIURPQ1RZUEUpJywgIC8vICoqKiBDYXB0dXJpbmcgR3JvdXAgMSAtIElmIGl0J3MgYSBkb2N0eXBlIHRhZwoJCQkJCQoJCQkJCS8vIFplcm8gb3IgbW9yZSBhdHRyaWJ1dGVzIGZvbGxvd2luZyB0aGUgdGFnIG5hbWUKCQkJCQknKD86JywKCQkJCQkJJ1xccysnLCAgLy8gb25lIG9yIG1vcmUgd2hpdGVzcGFjZSBjaGFycyBiZWZvcmUgYW4gYXR0cmlidXRlCgkJCQkJCQoJCQkJCQkvLyBFaXRoZXI6CgkJCQkJCS8vIEEuIGF0dHI9InZhbHVlIiwgb3IgCgkJCQkJCS8vIEIuICJ2YWx1ZSIgYWxvbmUgKFRvIGNvdmVyIGV4YW1wbGUgZG9jdHlwZSB0YWc6IDwhRE9DVFlQRSBodG1sIFBVQkxJQyAiLS8vVzNDLy9EVEQgWEhUTUwgMS4wIFN0cmljdC8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9UUi94aHRtbDEvRFREL3hodG1sMS1zdHJpY3QuZHRkIj4pIAoJCQkJCQknKD86JywgbmFtZUVxdWFsc1ZhbHVlUmVnZXgsICd8JywgYXR0clZhbHVlUmVnZXguc291cmNlICsgJyknLAoJCQkJCScpKicsCgkJCQknPicsCgkJCScpJywKCQkJCgkJCSd8JywKCQkJCgkJCS8vIEFsbCBvdGhlciBIVE1MIHRhZ3MgKGkuZS4gdGFncyB0aGF0IGFyZSBub3QgPCFET0NUWVBFPikKCQkJJyg/OicsCgkJCQknPCgvKT8nLCAgLy8gQmVnaW5uaW5nIG9mIGEgdGFnLiBFaXRoZXIgJzwnIGZvciBhIHN0YXJ0IHRhZywgb3IgJzwvJyBmb3IgYW4gZW5kIHRhZy4gCgkJCQkgICAgICAgICAgLy8gKioqIENhcHR1cmluZyBHcm91cCAyOiBUaGUgc2xhc2ggb3IgYW4gZW1wdHkgc3RyaW5nLiBTbGFzaCAoJy8nKSBmb3IgZW5kIHRhZywgZW1wdHkgc3RyaW5nIGZvciBzdGFydCBvciBzZWxmLWNsb3NpbmcgdGFnLgoJCQkKCQkJCQkvLyAqKiogQ2FwdHVyaW5nIEdyb3VwIDMgLSBUaGUgdGFnIG5hbWUKCQkJCQknKCcgKyB0YWdOYW1lUmVnZXguc291cmNlICsgJyknLAoJCQkJCQoJCQkJCS8vIFplcm8gb3IgbW9yZSBhdHRyaWJ1dGVzIGZvbGxvd2luZyB0aGUgdGFnIG5hbWUKCQkJCQknKD86JywKCQkJCQkJJ1xccysnLCAgICAgICAgICAgICAgICAvLyBvbmUgb3IgbW9yZSB3aGl0ZXNwYWNlIGNoYXJzIGJlZm9yZSBhbiBhdHRyaWJ1dGUKCQkJCQkJbmFtZUVxdWFsc1ZhbHVlUmVnZXgsICAvLyBhdHRyPSJ2YWx1ZSIgKHdpdGggb3B0aW9uYWwgPSJ2YWx1ZSIgcGFydCkKCQkJCQknKSonLAoJCQkJCQoJCQkJCSdcXHMqLz8nLCAgLy8gYW55IHRyYWlsaW5nIHNwYWNlcyBhbmQgb3B0aW9uYWwgJy8nIGJlZm9yZSB0aGUgY2xvc2luZyAnPicKCQkJCSc+JywKCQkJJyknCgkJXS5qb2luKCAiIiApLCAnZ2knICk7Cgl9ICkoKSwKCQoJLyoqCgkgKiBAcHJpdmF0ZQoJICogQHByb3BlcnR5IHtSZWdFeHB9IGh0bWxDaGFyYWN0ZXJFbnRpdGllc1JlZ2V4CgkgKgoJICogVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IG1hdGNoZXMgY29tbW9uIEhUTUwgY2hhcmFjdGVyIGVudGl0aWVzLgoJICogCgkgKiBJZ25vcmluZyAmYW1wOyBhcyBpdCBjb3VsZCBiZSBwYXJ0IG9mIGEgcXVlcnkgc3RyaW5nIC0tIGhhbmRsaW5nIGl0IHNlcGFyYXRlbHkuCgkgKi8KCWh0bWxDaGFyYWN0ZXJFbnRpdGllc1JlZ2V4OiAvKCZuYnNwO3wmIzE2MDt8Jmx0O3wmIzYwO3wmZ3Q7fCYjNjI7fCZxdW90O3wmIzM0O3wmIzM5OykvZ2ksCgkKCQoJLyoqCgkgKiBQYXJzZXMgYW4gSFRNTCBzdHJpbmcgYW5kIHJldHVybnMgYSBzaW1wbGUgYXJyYXkgb2Yge0BsaW5rIEF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sTm9kZSBIdG1sTm9kZXN9IHRvIHJlcHJlc2VudAoJICogdGhlIEhUTUwgc3RydWN0dXJlIG9mIHRoZSBpbnB1dCBzdHJpbmcuIAoJICogCgkgKiBAcGFyYW0ge1N0cmluZ30gaHRtbCBUaGUgSFRNTCB0byBwYXJzZS4KCSAqIEByZXR1cm4ge0F1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sTm9kZVtdfQoJICovCglwYXJzZSA6IGZ1bmN0aW9uKCBodG1sICkgewoJCXZhciBodG1sUmVnZXggPSB0aGlzLmh0bWxSZWdleCwKCQkgICAgY3VycmVudFJlc3VsdCwKCQkgICAgbGFzdEluZGV4ID0gMCwKCQkgICAgdGV4dEFuZEVudGl0eU5vZGVzLAoJCSAgICBub2RlcyA9IFtdOyAgLy8gd2lsbCBiZSB0aGUgcmVzdWx0IG9mIHRoZSBtZXRob2QKCQkKCQl3aGlsZSggKCBjdXJyZW50UmVzdWx0ID0gaHRtbFJlZ2V4LmV4ZWMoIGh0bWwgKSApICE9PSBudWxsICkgewoJCQl2YXIgdGFnVGV4dCA9IGN1cnJlbnRSZXN1bHRbIDAgXSwKCQkJICAgIHRhZ05hbWUgPSBjdXJyZW50UmVzdWx0WyAxIF0gfHwgY3VycmVudFJlc3VsdFsgMyBdLCAgLy8gVGhlIDwhRE9DVFlQRT4gdGFnIChleDogIiFET0NUWVBFIiksIG9yIGFub3RoZXIgdGFnIChleDogImEiIG9yICJpbWciKSAKCQkJICAgIGlzQ2xvc2luZ1RhZyA9ICEhY3VycmVudFJlc3VsdFsgMiBdLAoJCQkgICAgaW5CZXR3ZWVuVGFnc1RleHQgPSBodG1sLnN1YnN0cmluZyggbGFzdEluZGV4LCBjdXJyZW50UmVzdWx0LmluZGV4ICk7CgkJCQoJCQkvLyBQdXNoIFRleHROb2RlcyBhbmQgRW50aXR5Tm9kZXMgZm9yIGFueSB0ZXh0IGZvdW5kIGJldHdlZW4gdGFncwoJCQlpZiggaW5CZXR3ZWVuVGFnc1RleHQgKSB7CgkJCQl0ZXh0QW5kRW50aXR5Tm9kZXMgPSB0aGlzLnBhcnNlVGV4dEFuZEVudGl0eU5vZGVzKCBpbkJldHdlZW5UYWdzVGV4dCApOwoJCQkJbm9kZXMucHVzaC5hcHBseSggbm9kZXMsIHRleHRBbmRFbnRpdHlOb2RlcyApOwoJCQl9CgkJCQoJCQkvLyBQdXNoIHRoZSBFbGVtZW50Tm9kZQoJCQlub2Rlcy5wdXNoKCB0aGlzLmNyZWF0ZUVsZW1lbnROb2RlKCB0YWdUZXh0LCB0YWdOYW1lLCBpc0Nsb3NpbmdUYWcgKSApOwoJCQkKCQkJbGFzdEluZGV4ID0gY3VycmVudFJlc3VsdC5pbmRleCArIHRhZ1RleHQubGVuZ3RoOwoJCX0KCQkKCQkvLyBQcm9jZXNzIGFueSByZW1haW5pbmcgdGV4dCBhZnRlciB0aGUgbGFzdCBIVE1MIGVsZW1lbnQuIFdpbGwgcHJvY2VzcyBhbGwgb2YgdGhlIHRleHQgaWYgdGhlcmUgd2VyZSBubyBIVE1MIGVsZW1lbnRzLgoJCWlmKCBsYXN0SW5kZXggPCBodG1sLmxlbmd0aCApIHsKCQkJdmFyIHRleHQgPSBodG1sLnN1YnN0cmluZyggbGFzdEluZGV4ICk7CgkJCQoJCQkvLyBQdXNoIFRleHROb2RlcyBhbmQgRW50aXR5Tm9kZXMgZm9yIGFueSB0ZXh0IGZvdW5kIGJldHdlZW4gdGFncwoJCQlpZiggdGV4dCApIHsKCQkJCXRleHRBbmRFbnRpdHlOb2RlcyA9IHRoaXMucGFyc2VUZXh0QW5kRW50aXR5Tm9kZXMoIHRleHQgKTsKCQkJCW5vZGVzLnB1c2guYXBwbHkoIG5vZGVzLCB0ZXh0QW5kRW50aXR5Tm9kZXMgKTsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gbm9kZXM7Cgl9LAoJCgkKCS8qKgoJICogUGFyc2VzIHRleHQgYW5kIEhUTUwgZW50aXR5IG5vZGVzIGZyb20gYSBnaXZlbiBzdHJpbmcuIFRoZSBpbnB1dCBzdHJpbmcgc2hvdWxkIG5vdCBoYXZlIGFueSBIVE1MIHRhZ3MgKGVsZW1lbnRzKQoJICogd2l0aGluIGl0LgoJICogCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGhlIHRleHQgdG8gcGFyc2UuCgkgKiBAcmV0dXJuIHtBdXRvbGlua2VyLmh0bWxQYXJzZXIuSHRtbE5vZGVbXX0gQW4gYXJyYXkgb2YgSHRtbE5vZGVzIHRvIHJlcHJlc2VudCB0aGUgCgkgKiAgIHtAbGluayBBdXRvbGlua2VyLmh0bWxQYXJzZXIuVGV4dE5vZGUgVGV4dE5vZGVzfSBhbmQge0BsaW5rIEF1dG9saW5rZXIuaHRtbFBhcnNlci5FbnRpdHlOb2RlIEVudGl0eU5vZGVzfSBmb3VuZC4KCSAqLwoJcGFyc2VUZXh0QW5kRW50aXR5Tm9kZXMgOiBmdW5jdGlvbiggdGV4dCApIHsKCQl2YXIgbm9kZXMgPSBbXSwKCQkgICAgdGV4dEFuZEVudGl0eVRva2VucyA9IEF1dG9saW5rZXIuVXRpbC5zcGxpdEFuZENhcHR1cmUoIHRleHQsIHRoaXMuaHRtbENoYXJhY3RlckVudGl0aWVzUmVnZXggKTsgIC8vIHNwbGl0IGF0IEhUTUwgZW50aXRpZXMsIGJ1dCBpbmNsdWRlIHRoZSBIVE1MIGVudGl0aWVzIGluIHRoZSByZXN1bHRzIGFycmF5CgkJCgkJLy8gRXZlcnkgZXZlbiBudW1iZXJlZCB0b2tlbiBpcyBhIFRleHROb2RlLCBhbmQgZXZlcnkgb2RkIG51bWJlcmVkIHRva2VuIGlzIGFuIEVudGl0eU5vZGUKCQkvLyBGb3IgZXhhbXBsZTogYW4gaW5wdXQgYHRleHRgIG9mICJUZXN0ICZxdW90O3RoaXMmcXVvdDsgdG9kYXkiIHdvdWxkIHR1cm4gaW50byB0aGUgCgkJLy8gICBgdGV4dEFuZEVudGl0eVRva2Vuc2A6IFsgJ1Rlc3QgJywgJyZxdW90OycsICd0aGlzJywgJyZxdW90OycsICcgdG9kYXknIF0KCQlmb3IoIHZhciBpID0gMCwgbGVuID0gdGV4dEFuZEVudGl0eVRva2Vucy5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMiApIHsKCQkJdmFyIHRleHRUb2tlbiA9IHRleHRBbmRFbnRpdHlUb2tlbnNbIGkgXSwKCQkJICAgIGVudGl0eVRva2VuID0gdGV4dEFuZEVudGl0eVRva2Vuc1sgaSArIDEgXTsKCQkJCgkJCWlmKCB0ZXh0VG9rZW4gKSBub2Rlcy5wdXNoKCB0aGlzLmNyZWF0ZVRleHROb2RlKCB0ZXh0VG9rZW4gKSApOwoJCQlpZiggZW50aXR5VG9rZW4gKSBub2Rlcy5wdXNoKCB0aGlzLmNyZWF0ZUVudGl0eU5vZGUoIGVudGl0eVRva2VuICkgKTsKCQl9CgkJcmV0dXJuIG5vZGVzOwoJfSwKCQoJCgkvKioKCSAqIEZhY3RvcnkgbWV0aG9kIHRvIGNyZWF0ZSBhbiB7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkVsZW1lbnROb2RlIEVsZW1lbnROb2RlfS4KCSAqIAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7U3RyaW5nfSB0YWdUZXh0IFRoZSBmdWxsIHRleHQgb2YgdGhlIHRhZyAoZWxlbWVudCkgdGhhdCB3YXMgbWF0Y2hlZCwgaW5jbHVkaW5nIGl0cyBhdHRyaWJ1dGVzLgoJICogQHBhcmFtIHtTdHJpbmd9IHRhZ05hbWUgVGhlIG5hbWUgb2YgdGhlIHRhZy4gRXg6IEFuICZsdDtpbWcmZ3Q7IHRhZyB3b3VsZCBiZSBwYXNzZWQgdG8gdGhpcyBtZXRob2QgYXMgImltZyIuCgkgKiBAcGFyYW0ge0Jvb2xlYW59IGlzQ2xvc2luZ1RhZyBgdHJ1ZWAgaWYgaXQncyBhIGNsb3NpbmcgdGFnLCBmYWxzZSBvdGhlcndpc2UuCgkgKiBAcmV0dXJuIHtBdXRvbGlua2VyLmh0bWxQYXJzZXIuRWxlbWVudE5vZGV9CgkgKi8KCWNyZWF0ZUVsZW1lbnROb2RlIDogZnVuY3Rpb24oIHRhZ1RleHQsIHRhZ05hbWUsIGlzQ2xvc2luZ1RhZyApIHsKCQlyZXR1cm4gbmV3IEF1dG9saW5rZXIuaHRtbFBhcnNlci5FbGVtZW50Tm9kZSggewoJCQl0ZXh0ICAgIDogdGFnVGV4dCwKCQkJdGFnTmFtZSA6IHRhZ05hbWUudG9Mb3dlckNhc2UoKSwKCQkJY2xvc2luZyA6IGlzQ2xvc2luZ1RhZwoJCX0gKTsKCX0sCgkKCQoJLyoqCgkgKiBGYWN0b3J5IG1ldGhvZCB0byBjcmVhdGUgYSB7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkVudGl0eU5vZGUgRW50aXR5Tm9kZX0uCgkgKiAKCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBUaGUgdGV4dCB0aGF0IHdhcyBtYXRjaGVkIGZvciB0aGUgSFRNTCBlbnRpdHkgKHN1Y2ggYXMgJyZhbXA7bmJzcDsnKS4KCSAqIEByZXR1cm4ge0F1dG9saW5rZXIuaHRtbFBhcnNlci5FbnRpdHlOb2RlfQoJICovCgljcmVhdGVFbnRpdHlOb2RlIDogZnVuY3Rpb24oIHRleHQgKSB7CgkJcmV0dXJuIG5ldyBBdXRvbGlua2VyLmh0bWxQYXJzZXIuRW50aXR5Tm9kZSggeyB0ZXh0OiB0ZXh0IH0gKTsKCX0sCgkKCQoJLyoqCgkgKiBGYWN0b3J5IG1ldGhvZCB0byBjcmVhdGUgYSB7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLlRleHROb2RlIFRleHROb2RlfS4KCSAqIAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRoYXQgd2FzIG1hdGNoZWQuCgkgKiBAcmV0dXJuIHtBdXRvbGlua2VyLmh0bWxQYXJzZXIuVGV4dE5vZGV9CgkgKi8KCWNyZWF0ZVRleHROb2RlIDogZnVuY3Rpb24oIHRleHQgKSB7CgkJcmV0dXJuIG5ldyBBdXRvbGlua2VyLmh0bWxQYXJzZXIuVGV4dE5vZGUoIHsgdGV4dDogdGV4dCB9ICk7Cgl9CgkKfSApOwovKmdsb2JhbCBBdXRvbGlua2VyICovCi8qKgogKiBAYWJzdHJhY3QKICogQGNsYXNzIEF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sTm9kZQogKiAKICogUmVwcmVzZW50cyBhbiBIVE1MIG5vZGUgZm91bmQgaW4gYW4gaW5wdXQgc3RyaW5nLiBBbiBIVE1MIG5vZGUgaXMgb25lIG9mIHRoZSBmb2xsb3dpbmc6CiAqIAogKiAxLiBBbiB7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkVsZW1lbnROb2RlIEVsZW1lbnROb2RlfSwgd2hpY2ggcmVwcmVzZW50cyBIVE1MIHRhZ3MuCiAqIDIuIEEge0BsaW5rIEF1dG9saW5rZXIuaHRtbFBhcnNlci5UZXh0Tm9kZSBUZXh0Tm9kZX0sIHdoaWNoIHJlcHJlc2VudHMgdGV4dCBvdXRzaWRlIG9yIHdpdGhpbiBIVE1MIHRhZ3MuCiAqIDMuIEEge0BsaW5rIEF1dG9saW5rZXIuaHRtbFBhcnNlci5FbnRpdHlOb2RlIEVudGl0eU5vZGV9LCB3aGljaCByZXByZXNlbnRzIG9uZSBvZiB0aGUga25vd24gSFRNTAogKiAgICBlbnRpdGllcyB0aGF0IEF1dG9saW5rZXIgbG9va3MgZm9yLiBUaGlzIGluY2x1ZGVzIGNvbW1vbiBvbmVzIHN1Y2ggYXMgJmFtcDtxdW90OyBhbmQgJmFtcDtuYnNwOwogKi8KQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxOb2RlID0gQXV0b2xpbmtlci5VdGlsLmV4dGVuZCggT2JqZWN0LCB7CgkKCS8qKgoJICogQGNmZyB7U3RyaW5nfSB0ZXh0IChyZXF1aXJlZCkKCSAqIAoJICogVGhlIG9yaWdpbmFsIHRleHQgdGhhdCB3YXMgbWF0Y2hlZCBmb3IgdGhlIEh0bWxOb2RlLiAKCSAqIAoJICogLSBJbiB0aGUgY2FzZSBvZiBhbiB7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkVsZW1lbnROb2RlIEVsZW1lbnROb2RlfSwgdGhpcyB3aWxsIGJlIHRoZSB0YWcncwoJICogICB0ZXh0LgoJICogLSBJbiB0aGUgY2FzZSBvZiBhIHtAbGluayBBdXRvbGlua2VyLmh0bWxQYXJzZXIuVGV4dE5vZGUgVGV4dE5vZGV9LCB0aGlzIHdpbGwgYmUgdGhlIHRleHQgaXRzZWxmLgoJICogLSBJbiB0aGUgY2FzZSBvZiBhIHtAbGluayBBdXRvbGlua2VyLmh0bWxQYXJzZXIuRW50aXR5Tm9kZSBFbnRpdHlOb2RlfSwgdGhpcyB3aWxsIGJlIHRoZSB0ZXh0IG9mCgkgKiAgIHRoZSBIVE1MIGVudGl0eS4KCSAqLwoJdGV4dCA6ICIiLAoJCgkKCS8qKgoJICogQGNvbnN0cnVjdG9yCgkgKiBAcGFyYW0ge09iamVjdH0gY2ZnIFRoZSBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMgZm9yIHRoZSBNYXRjaCBpbnN0YW5jZSwgc3BlY2lmaWVkIGluIGFuIE9iamVjdCAobWFwKS4KCSAqLwoJY29uc3RydWN0b3IgOiBmdW5jdGlvbiggY2ZnICkgewoJCUF1dG9saW5rZXIuVXRpbC5hc3NpZ24oIHRoaXMsIGNmZyApOwoJfSwKCgkKCS8qKgoJICogUmV0dXJucyBhIHN0cmluZyBuYW1lIGZvciB0aGUgdHlwZSBvZiBub2RlIHRoYXQgdGhpcyBjbGFzcyByZXByZXNlbnRzLgoJICogCgkgKiBAYWJzdHJhY3QKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0VHlwZSA6IEF1dG9saW5rZXIuVXRpbC5hYnN0cmFjdE1ldGhvZCwKCQoJCgkvKioKCSAqIFJldHJpZXZlcyB0aGUge0BsaW5rICN0ZXh0fSBmb3IgdGhlIEh0bWxOb2RlLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldFRleHQgOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy50ZXh0OwoJfQoKfSApOwovKmdsb2JhbCBBdXRvbGlua2VyICovCi8qKgogKiBAY2xhc3MgQXV0b2xpbmtlci5odG1sUGFyc2VyLkVsZW1lbnROb2RlCiAqIEBleHRlbmRzIEF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sTm9kZQogKiAKICogUmVwcmVzZW50cyBhbiBIVE1MIGVsZW1lbnQgbm9kZSB0aGF0IGhhcyBiZWVuIHBhcnNlZCBieSB0aGUge0BsaW5rIEF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sUGFyc2VyfS4KICogCiAqIFNlZSB0aGlzIGNsYXNzJ3Mgc3VwZXJjbGFzcyAoe0BsaW5rIEF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sTm9kZX0pIGZvciBtb3JlIGRldGFpbHMuCiAqLwpBdXRvbGlua2VyLmh0bWxQYXJzZXIuRWxlbWVudE5vZGUgPSBBdXRvbGlua2VyLlV0aWwuZXh0ZW5kKCBBdXRvbGlua2VyLmh0bWxQYXJzZXIuSHRtbE5vZGUsIHsKCQoJLyoqCgkgKiBAY2ZnIHtTdHJpbmd9IHRhZ05hbWUgKHJlcXVpcmVkKQoJICogCgkgKiBUaGUgbmFtZSBvZiB0aGUgdGFnIHRoYXQgd2FzIG1hdGNoZWQuCgkgKi8KCXRhZ05hbWUgOiAnJywKCQoJLyoqCgkgKiBAY2ZnIHtCb29sZWFufSBjbG9zaW5nIChyZXF1aXJlZCkKCSAqIAoJICogYHRydWVgIGlmIHRoZSBlbGVtZW50ICh0YWcpIGlzIGEgY2xvc2luZyB0YWcsIGBmYWxzZWAgaWYgaXRzIGFuIG9wZW5pbmcgdGFnLgoJICovCgljbG9zaW5nIDogZmFsc2UsCgoJCgkvKioKCSAqIFJldHVybnMgYSBzdHJpbmcgbmFtZSBmb3IgdGhlIHR5cGUgb2Ygbm9kZSB0aGF0IHRoaXMgY2xhc3MgcmVwcmVzZW50cy4KCSAqIAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRUeXBlIDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuICdlbGVtZW50JzsKCX0sCgkKCgkvKioKCSAqIFJldHVybnMgdGhlIEhUTUwgZWxlbWVudCdzICh0YWcncykgbmFtZS4gRXg6IGZvciBhbiAmbHQ7aW1nJmd0OyB0YWcsIHJldHVybnMgImltZyIuCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0VGFnTmFtZSA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLnRhZ05hbWU7Cgl9LAoJCgkKCS8qKgoJICogRGV0ZXJtaW5lcyBpZiB0aGUgSFRNTCBlbGVtZW50ICh0YWcpIGlzIGEgY2xvc2luZyB0YWcuIEV4OiAmbHQ7ZGl2Jmd0OyByZXR1cm5zCgkgKiBgZmFsc2VgLCB3aGlsZSAmbHQ7L2RpdiZndDsgcmV0dXJucyBgdHJ1ZWAuCgkgKiAKCSAqIEByZXR1cm4ge0Jvb2xlYW59CgkgKi8KCWlzQ2xvc2luZyA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLmNsb3Npbmc7Cgl9CgkKfSApOwovKmdsb2JhbCBBdXRvbGlua2VyICovCi8qKgogKiBAY2xhc3MgQXV0b2xpbmtlci5odG1sUGFyc2VyLkVudGl0eU5vZGUKICogQGV4dGVuZHMgQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxOb2RlCiAqIAogKiBSZXByZXNlbnRzIGEga25vd24gSFRNTCBlbnRpdHkgbm9kZSB0aGF0IGhhcyBiZWVuIHBhcnNlZCBieSB0aGUge0BsaW5rIEF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sUGFyc2VyfS4KICogRXg6ICcmYW1wO25ic3A7Jywgb3IgJyZhbXAjMTYwOycgKHdoaWNoIHdpbGwgYmUgcmV0cmlldmFibGUgZnJvbSB0aGUge0BsaW5rICNnZXRUZXh0fSBtZXRob2QuCiAqIAogKiBOb3RlIHRoYXQgdGhpcyBjbGFzcyB3aWxsIG9ubHkgYmUgcmV0dXJuZWQgZnJvbSB0aGUgSHRtbFBhcnNlciBmb3IgdGhlIHNldCBvZiBjaGVja2VkIEhUTUwgZW50aXR5IG5vZGVzIAogKiBkZWZpbmVkIGJ5IHRoZSB7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxQYXJzZXIjaHRtbENoYXJhY3RlckVudGl0aWVzUmVnZXh9LgogKiAKICogU2VlIHRoaXMgY2xhc3MncyBzdXBlcmNsYXNzICh7QGxpbmsgQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxOb2RlfSkgZm9yIG1vcmUgZGV0YWlscy4KICovCkF1dG9saW5rZXIuaHRtbFBhcnNlci5FbnRpdHlOb2RlID0gQXV0b2xpbmtlci5VdGlsLmV4dGVuZCggQXV0b2xpbmtlci5odG1sUGFyc2VyLkh0bWxOb2RlLCB7CgkKCS8qKgoJICogUmV0dXJucyBhIHN0cmluZyBuYW1lIGZvciB0aGUgdHlwZSBvZiBub2RlIHRoYXQgdGhpcyBjbGFzcyByZXByZXNlbnRzLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldFR5cGUgOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gJ2VudGl0eSc7Cgl9CgkKfSApOwovKmdsb2JhbCBBdXRvbGlua2VyICovCi8qKgogKiBAY2xhc3MgQXV0b2xpbmtlci5odG1sUGFyc2VyLlRleHROb2RlCiAqIEBleHRlbmRzIEF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sTm9kZQogKiAKICogUmVwcmVzZW50cyBhIHRleHQgbm9kZSB0aGF0IGhhcyBiZWVuIHBhcnNlZCBieSB0aGUge0BsaW5rIEF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sUGFyc2VyfS4KICogCiAqIFNlZSB0aGlzIGNsYXNzJ3Mgc3VwZXJjbGFzcyAoe0BsaW5rIEF1dG9saW5rZXIuaHRtbFBhcnNlci5IdG1sTm9kZX0pIGZvciBtb3JlIGRldGFpbHMuCiAqLwpBdXRvbGlua2VyLmh0bWxQYXJzZXIuVGV4dE5vZGUgPSBBdXRvbGlua2VyLlV0aWwuZXh0ZW5kKCBBdXRvbGlua2VyLmh0bWxQYXJzZXIuSHRtbE5vZGUsIHsKCQoJLyoqCgkgKiBSZXR1cm5zIGEgc3RyaW5nIG5hbWUgZm9yIHRoZSB0eXBlIG9mIG5vZGUgdGhhdCB0aGlzIGNsYXNzIHJlcHJlc2VudHMuCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0VHlwZSA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiAndGV4dCc7Cgl9CgkKfSApOwovKmdsb2JhbCBBdXRvbGlua2VyICovCi8qKgogKiBAcHJpdmF0ZQogKiBAY2xhc3MgQXV0b2xpbmtlci5tYXRjaFBhcnNlci5NYXRjaFBhcnNlcgogKiBAZXh0ZW5kcyBPYmplY3QKICogCiAqIFVzZWQgYnkgQXV0b2xpbmtlciB0byBwYXJzZSB7QGxpbmsgI3VybHMgVVJMc30sIHtAbGluayAjZW1haWxzIGVtYWlsIGFkZHJlc3Nlc30sIGFuZCB7QGxpbmsgI3R3aXR0ZXIgVHdpdHRlciBoYW5kbGVzfSwgCiAqIGdpdmVuIGFuIGlucHV0IHN0cmluZyBvZiB0ZXh0LgogKiAKICogVGhlIE1hdGNoUGFyc2VyIGlzIGZlZCBhIG5vbi1IVE1MIHN0cmluZyBpbiBvcmRlciB0byBzZWFyY2ggb3V0IFVSTHMsIGVtYWlsIGFkZHJlc3NlcyBhbmQgVHdpdHRlciBoYW5kbGVzLiBBdXRvbGlua2VyCiAqIGZpcnN0IHVzZXMgdGhlIHtAbGluayBIdG1sUGFyc2VyfSB0byAid2FsayBhcm91bmQiIEhUTUwgdGFncywgYW5kIHRoZW4gdGhlIHRleHQgYXJvdW5kIHRoZSBIVE1MIHRhZ3MgaXMgcGFzc2VkIGludG8KICogdGhlIE1hdGNoUGFyc2VyIGluIG9yZGVyIHRvIGZpbmQgdGhlIGFjdHVhbCBtYXRjaGVzLgogKi8KQXV0b2xpbmtlci5tYXRjaFBhcnNlci5NYXRjaFBhcnNlciA9IEF1dG9saW5rZXIuVXRpbC5leHRlbmQoIE9iamVjdCwgewoJCgkvKioKCSAqIEBjZmcge0Jvb2xlYW59IHVybHMKCSAqIAoJICogYHRydWVgIGlmIG1pc2NlbGxhbmVvdXMgVVJMcyBzaG91bGQgYmUgYXV0b21hdGljYWxseSBsaW5rZWQsIGBmYWxzZWAgaWYgdGhleSBzaG91bGQgbm90IGJlLgoJICovCgl1cmxzIDogdHJ1ZSwKCQoJLyoqCgkgKiBAY2ZnIHtCb29sZWFufSBlbWFpbAoJICogCgkgKiBgdHJ1ZWAgaWYgZW1haWwgYWRkcmVzc2VzIHNob3VsZCBiZSBhdXRvbWF0aWNhbGx5IGxpbmtlZCwgYGZhbHNlYCBpZiB0aGV5IHNob3VsZCBub3QgYmUuCgkgKi8KCWVtYWlsIDogdHJ1ZSwKCQoJLyoqCgkgKiBAY2ZnIHtCb29sZWFufSB0d2l0dGVyCgkgKiAKCSAqIGB0cnVlYCBpZiBUd2l0dGVyIGhhbmRsZXMgKCJAZXhhbXBsZSIpIHNob3VsZCBiZSBhdXRvbWF0aWNhbGx5IGxpbmtlZCwgYGZhbHNlYCBpZiB0aGV5IHNob3VsZCBub3QgYmUuCgkgKi8KCXR3aXR0ZXIgOiB0cnVlLAoJCgkvKioKCSAqIEBjZmcge0Jvb2xlYW59IHN0cmlwUHJlZml4CgkgKiAKCSAqIGB0cnVlYCBpZiAnaHR0cDovLycgb3IgJ2h0dHBzOi8vJyBhbmQvb3IgdGhlICd3d3cuJyBzaG91bGQgYmUgc3RyaXBwZWQgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIFVSTCBsaW5rcycgdGV4dAoJICogaW4ge0BsaW5rIEF1dG9saW5rZXIubWF0Y2guVXJsIFVSTCBtYXRjaGVzfSwgYGZhbHNlYCBvdGhlcndpc2UuCgkgKiAKCSAqIFRPRE86IEhhbmRsZSB0aGlzIGJlZm9yZSBhIFVSTCBNYXRjaCBvYmplY3QgaXMgaW5zdGFudGlhdGVkLgoJICovCglzdHJpcFByZWZpeCA6IHRydWUsCgkKCQoJLyoqCgkgKiBAcHJpdmF0ZQoJICogQHByb3BlcnR5IHtSZWdFeHB9IG1hdGNoZXJSZWdleAoJICogCgkgKiBUaGUgcmVndWxhciBleHByZXNzaW9uIHRoYXQgbWF0Y2hlcyBVUkxzLCBlbWFpbCBhZGRyZXNzZXMsIGFuZCBUd2l0dGVyIGhhbmRsZXMuCgkgKiAKCSAqIFRoaXMgcmVndWxhciBleHByZXNzaW9uIGhhcyB0aGUgZm9sbG93aW5nIGNhcHR1cmluZyBncm91cHM6CgkgKiAKCSAqIDEuIEdyb3VwIHRoYXQgaXMgdXNlZCB0byBkZXRlcm1pbmUgaWYgdGhlcmUgaXMgYSBUd2l0dGVyIGhhbmRsZSBtYXRjaCAoaS5lLiBcQHNvbWVUd2l0dGVyVXNlcikuIFNpbXBseSBjaGVjayBmb3IgaXRzIAoJICogICAgZXhpc3RlbmNlIHRvIGRldGVybWluZSBpZiB0aGVyZSBpcyBhIFR3aXR0ZXIgaGFuZGxlIG1hdGNoLiBUaGUgbmV4dCBjb3VwbGUgb2YgY2FwdHVyaW5nIGdyb3VwcyBnaXZlIGluZm9ybWF0aW9uIAoJICogICAgYWJvdXQgdGhlIFR3aXR0ZXIgaGFuZGxlIG1hdGNoLgoJICogMi4gVGhlIHdoaXRlc3BhY2UgY2hhcmFjdGVyIGJlZm9yZSB0aGUgXEBzaWduIGluIGEgVHdpdHRlciBoYW5kbGUuIFRoaXMgaXMgbmVlZGVkIGJlY2F1c2UgdGhlcmUgYXJlIG5vIGxvb2tiZWhpbmRzIGluCgkgKiAgICBKUyByZWd1bGFyIGV4cHJlc3Npb25zLCBhbmQgY2FuIGJlIHVzZWQgdG8gcmVjb25zdHJ1Y3QgdGhlIG9yaWdpbmFsIHN0cmluZyBpbiBhIHJlcGxhY2UoKS4KCSAqIDMuIFRoZSBUd2l0dGVyIGhhbmRsZSBpdHNlbGYgaW4gYSBUd2l0dGVyIG1hdGNoLiBJZiB0aGUgbWF0Y2ggaXMgJ0Bzb21lVHdpdHRlclVzZXInLCB0aGUgaGFuZGxlIGlzICdzb21lVHdpdHRlclVzZXInLgoJICogNC4gR3JvdXAgdGhhdCBtYXRjaGVzIGFuIGVtYWlsIGFkZHJlc3MuIFVzZWQgdG8gZGV0ZXJtaW5lIGlmIHRoZSBtYXRjaCBpcyBhbiBlbWFpbCBhZGRyZXNzLCBhcyB3ZWxsIGFzIGhvbGRpbmcgdGhlIGZ1bGwgCgkgKiAgICBhZGRyZXNzLiBFeDogJ21lQG15LmNvbScKCSAqIDUuIEdyb3VwIHRoYXQgbWF0Y2hlcyBhIFVSTCBpbiB0aGUgaW5wdXQgdGV4dC4gRXg6ICdodHRwOi8vZ29vZ2xlLmNvbScsICd3d3cuZ29vZ2xlLmNvbScsIG9yIGp1c3QgJ2dvb2dsZS5jb20nLgoJICogICAgVGhpcyBhbHNvIGluY2x1ZGVzIGEgcGF0aCwgdXJsIHBhcmFtZXRlcnMsIG9yIGhhc2ggYW5jaG9ycy4gRXg6IGdvb2dsZS5jb20vcGF0aC90by9maWxlP3ExPTEmcTI9MiNteUFuY2hvcgoJICogNi4gR3JvdXAgdGhhdCBtYXRjaGVzIGEgcHJvdG9jb2wgVVJMIChpLmUuICdodHRwOi8vZ29vZ2xlLmNvbScpLiBUaGlzIGlzIHVzZWQgdG8gbWF0Y2ggcHJvdG9jb2wgVVJMcyB3aXRoIGp1c3QgYSBzaW5nbGUKCSAqICAgIHdvcmQsIGxpa2UgJ2h0dHA6Ly9sb2NhbGhvc3QnLCB3aGVyZSB3ZSB3b24ndCBkb3VibGUgY2hlY2sgdGhhdCB0aGUgZG9tYWluIG5hbWUgaGFzIGF0IGxlYXN0IG9uZSAnLicgaW4gaXQuCgkgKiA3LiBBIHByb3RvY29sLXJlbGF0aXZlICgnLy8nKSBtYXRjaCBmb3IgdGhlIGNhc2Ugb2YgYSAnd3d3LicgcHJlZml4ZWQgVVJMLiBXaWxsIGJlIGFuIGVtcHR5IHN0cmluZyBpZiBpdCBpcyBub3QgYSAKCSAqICAgIHByb3RvY29sLXJlbGF0aXZlIG1hdGNoLiBXZSBuZWVkIHRvIGtub3cgdGhlIGNoYXJhY3RlciBiZWZvcmUgdGhlICcvLycgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIGlmIGl0IGlzIGEgdmFsaWQgbWF0Y2gKCSAqICAgIG9yIHRoZSAvLyB3YXMgaW4gYSBzdHJpbmcgd2UgZG9uJ3Qgd2FudCB0byBhdXRvLWxpbmsuCgkgKiA4LiBBIHByb3RvY29sLXJlbGF0aXZlICgnLy8nKSBtYXRjaCBmb3IgdGhlIGNhc2Ugb2YgYSBrbm93biBUTEQgcHJlZml4ZWQgVVJMLiBXaWxsIGJlIGFuIGVtcHR5IHN0cmluZyBpZiBpdCBpcyBub3QgYSAKCSAqICAgIHByb3RvY29sLXJlbGF0aXZlIG1hdGNoLiBTZWUgIzYgZm9yIG1vcmUgaW5mby4gCgkgKi8KCW1hdGNoZXJSZWdleCA6IChmdW5jdGlvbigpIHsKCQl2YXIgdHdpdHRlclJlZ2V4ID0gLyhefFteXHddKUAoXHd7MSwxNX0pLywgICAgICAgICAgICAgIC8vIEZvciBtYXRjaGluZyBhIHR3aXR0ZXIgaGFuZGxlLiBFeDogQGdyZWdvcnlfamFjb2JzCgkJICAgIAoJCSAgICBlbWFpbFJlZ2V4ID0gLyg/OltcLTs6Jj1cK1wkLFx3XC5dK0ApLywgICAgICAgICAgICAgLy8gc29tZXRoaW5nQCBmb3IgZW1haWwgYWRkcmVzc2VzIChhLmsuYS4gbG9jYWwtcGFydCkKCQkgICAgCgkJICAgIHByb3RvY29sUmVnZXggPSAvKD86W0EtWmEtel1bLS4rQS1aYS16MC05XSs6KD8hW0EtWmEtel1bLS4rQS1aYS16MC05XSs6XC9cLykoPyFcZCtcLz8pKD86XC9cLyk/KS8sICAvLyBtYXRjaCBwcm90b2NvbCwgYWxsb3cgaW4gZm9ybWF0ICJodHRwOi8vIiBvciAibWFpbHRvOiIuIEhvd2V2ZXIsIGRvIG5vdCBtYXRjaCB0aGUgZmlyc3QgcGFydCBvZiBzb21ldGhpbmcgbGlrZSAnbGluazpodHRwOi8vd3d3Lmdvb2dsZS5jb20nIChpLmUuIGRvbid0IG1hdGNoICJsaW5rOiIpLiBBbHNvLCBtYWtlIHN1cmUgd2UgZG9uJ3QgaW50ZXJwcmV0ICdnb29nbGUuY29tOjgwMDAnIGFzIGlmICdnb29nbGUuY29tJyB3YXMgYSBwcm90b2NvbCBoZXJlIChpLmUuIGlnbm9yZSBhIHRyYWlsaW5nIHBvcnQgbnVtYmVyIGluIHRoaXMgcmVnZXgpCgkJICAgIHd3d1JlZ2V4ID0gLyg/Ond3d1wuKS8sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydGluZyB3aXRoICd3d3cuJwoJCSAgICBkb21haW5OYW1lUmVnZXggPSAvW0EtWmEtejAtOVwuXC1dKltBLVphLXowLTlcLV0vLCAgLy8gYW55dGhpbmcgbG9va2luZyBhdCBhbGwgbGlrZSBhIGRvbWFpbiwgbm9uLXVuaWNvZGUgZG9tYWlucywgbm90IGVuZGluZyBpbiBhIHBlcmlvZAoJCSAgICB0bGRSZWdleCA9IC9cLig/OmludGVybmF0aW9uYWx8Y29uc3RydWN0aW9ufGNvbnRyYWN0b3JzfGVudGVycHJpc2VzfHBob3RvZ3JhcGh5fHByb2R1Y3Rpb25zfGZvdW5kYXRpb258aW1tb2JpbGllbnxpbmR1c3RyaWVzfG1hbmFnZW1lbnR8cHJvcGVydGllc3x0ZWNobm9sb2d5fGNocmlzdG1hc3xjb21tdW5pdHl8ZGlyZWN0b3J5fGVkdWNhdGlvbnxlcXVpcG1lbnR8aW5zdGl0dXRlfG1hcmtldGluZ3xzb2x1dGlvbnN8dmFjYXRpb25zfGJhcmdhaW5zfGJvdXRpcXVlfGJ1aWxkZXJzfGNhdGVyaW5nfGNsZWFuaW5nfGNsb3RoaW5nfGNvbXB1dGVyfGRlbW9jcmF0fGRpYW1vbmRzfGdyYXBoaWNzfGhvbGRpbmdzfGxpZ2h0aW5nfHBhcnRuZXJzfHBsdW1iaW5nfHN1cHBsaWVzfHRyYWluaW5nfHZlbnR1cmVzfGFjYWRlbXl8Y2FyZWVyc3xjb21wYW55fGNydWlzZXN8ZG9tYWluc3xleHBvc2VkfGZsaWdodHN8ZmxvcmlzdHxnYWxsZXJ5fGd1aXRhcnN8aG9saWRheXxraXRjaGVufG5ldXN0YXJ8b2tpbmF3YXxyZWNpcGVzfHJlbnRhbHN8cmV2aWV3c3xzaGlrc2hhfHNpbmdsZXN8c3VwcG9ydHxzeXN0ZW1zfGFnZW5jeXxiZXJsaW58Y2FtZXJhfGNlbnRlcnxjb2ZmZWV8Y29uZG9zfGRhdGluZ3xlc3RhdGV8ZXZlbnRzfGV4cGVydHxmdXRib2x8a2F1ZmVufGx1eHVyeXxtYWlzb258bW9uYXNofG11c2V1bXxuYWdveWF8cGhvdG9zfHJlcGFpcnxyZXBvcnR8c29jaWFsfHN1cHBseXx0YXR0b298dGllbmRhfHRyYXZlbHx2aWFqZXN8dmlsbGFzfHZpc2lvbnx2b3Rpbmd8dm95YWdlfGFjdG9yfGJ1aWxkfGNhcmRzfGNoZWFwfGNvZGVzfGRhbmNlfGVtYWlsfGdsYXNzfGhvdXNlfG1hbmdvfG5pbmphfHBhcnRzfHBob3RvfHNob2VzfHNvbGFyfHRvZGF5fHRva3lvfHRvb2xzfHdhdGNofHdvcmtzfGFlcm98YXJwYXxhc2lhfGJlc3R8YmlrZXxibHVlfGJ1enp8Y2FtcHxjbHVifGNvb2x8Y29vcHxmYXJtfGZpc2h8Z2lmdHxndXJ1fGluZm98am9ic3xraXdpfGtyZWR8bGFuZHxsaW1vfGxpbmt8bWVudXxtb2JpfG1vZGF8bmFtZXxwaWNzfHBpbmt8cG9zdHxxcG9ufHJpY2h8cnVocnxzZXh5fHRpcHN8dm90ZXx2b3RvfHdhbmd8d2llbnx3aWtpfHpvbmV8YmFyfGJpZHxiaXp8Y2FifGNhdHxjZW98Y29tfGVkdXxnb3Z8aW50fGtpbXxtaWx8bmV0fG9ubHxvcmd8cHJvfHB1YnxyZWR8dGVsfHVub3x3ZWR8eHh4fHh5enxhY3xhZHxhZXxhZnxhZ3xhaXxhbHxhbXxhbnxhb3xhcXxhcnxhc3xhdHxhdXxhd3xheHxhenxiYXxiYnxiZHxiZXxiZnxiZ3xiaHxiaXxianxibXxibnxib3xicnxic3xidHxidnxid3xieXxienxjYXxjY3xjZHxjZnxjZ3xjaHxjaXxja3xjbHxjbXxjbnxjb3xjcnxjdXxjdnxjd3xjeHxjeXxjenxkZXxkanxka3xkbXxkb3xkenxlY3xlZXxlZ3xlcnxlc3xldHxldXxmaXxmanxma3xmbXxmb3xmcnxnYXxnYnxnZHxnZXxnZnxnZ3xnaHxnaXxnbHxnbXxnbnxncHxncXxncnxnc3xndHxndXxnd3xneXxoa3xobXxobnxocnxodHxodXxpZHxpZXxpbHxpbXxpbnxpb3xpcXxpcnxpc3xpdHxqZXxqbXxqb3xqcHxrZXxrZ3xraHxraXxrbXxrbnxrcHxrcnxrd3xreXxrenxsYXxsYnxsY3xsaXxsa3xscnxsc3xsdHxsdXxsdnxseXxtYXxtY3xtZHxtZXxtZ3xtaHxta3xtbHxtbXxtbnxtb3xtcHxtcXxtcnxtc3xtdHxtdXxtdnxtd3xteHxteXxtenxuYXxuY3xuZXxuZnxuZ3xuaXxubHxub3xucHxucnxudXxuenxvbXxwYXxwZXxwZnxwZ3xwaHxwa3xwbHxwbXxwbnxwcnxwc3xwdHxwd3xweXxxYXxyZXxyb3xyc3xydXxyd3xzYXxzYnxzY3xzZHxzZXxzZ3xzaHxzaXxzanxza3xzbHxzbXxzbnxzb3xzcnxzdHxzdXxzdnxzeHxzeXxzenx0Y3x0ZHx0Znx0Z3x0aHx0anx0a3x0bHx0bXx0bnx0b3x0cHx0cnx0dHx0dnx0d3x0enx1YXx1Z3x1a3x1c3x1eXx1enx2YXx2Y3x2ZXx2Z3x2aXx2bnx2dXx3Znx3c3x5ZXx5dHx6YXx6bXx6dylcYi8sICAgLy8gbWF0Y2ggb3VyIGtub3duIHRvcCBsZXZlbCBkb21haW5zIChUTERzKQoJCSAgICAKCQkgICAgLy8gQWxsb3cgb3B0aW9uYWwgcGF0aCwgcXVlcnkgc3RyaW5nLCBhbmQgaGFzaCBhbmNob3IsIG5vdCBlbmRpbmcgaW4gdGhlIGZvbGxvd2luZyBjaGFyYWN0ZXJzOiAiPyE6LC47IgoJCSAgICAvLyBodHRwOi8vYmxvZy5jb2Rpbmdob3Jyb3IuY29tL3RoZS1wcm9ibGVtLXdpdGgtdXJscy8KCQkgICAgdXJsU3VmZml4UmVnZXggPSAvW1wtQS1aYS16MC05KyZAI1wvJT1+XygpfCckKlxbXF0/ITosLjtdKltcLUEtWmEtejAtOSsmQCNcLyU9fl8oKXwnJCpcW1xdXS87CgkJCgkJcmV0dXJuIG5ldyBSZWdFeHAoIFsKCQkJJygnLCAgLy8gKioqIENhcHR1cmluZyBncm91cCAkMSwgd2hpY2ggY2FuIGJlIHVzZWQgdG8gY2hlY2sgZm9yIGEgdHdpdHRlciBoYW5kbGUgbWF0Y2guIFVzZSBncm91cCAkMyBmb3IgdGhlIGFjdHVhbCB0d2l0dGVyIGhhbmRsZSB0aG91Z2guICQyIG1heSBiZSB1c2VkIHRvIHJlY29uc3RydWN0IHRoZSBvcmlnaW5hbCBzdHJpbmcgaW4gYSByZXBsYWNlKCkgCgkJCQkvLyAqKiogQ2FwdHVyaW5nIGdyb3VwICQyLCB3aGljaCBtYXRjaGVzIHRoZSB3aGl0ZXNwYWNlIGNoYXJhY3RlciBiZWZvcmUgdGhlICdAJyBzaWduIChuZWVkZWQgYmVjYXVzZSBvZiBubyBsb29rYmVoaW5kcyksIGFuZCAKCQkJCS8vICoqKiBDYXB0dXJpbmcgZ3JvdXAgJDMsIHdoaWNoIG1hdGNoZXMgdGhlIGFjdHVhbCB0d2l0dGVyIGhhbmRsZQoJCQkJdHdpdHRlclJlZ2V4LnNvdXJjZSwKCQkJJyknLAoJCQkKCQkJJ3wnLAoJCQkKCQkJJygnLCAgLy8gKioqIENhcHR1cmluZyBncm91cCAkNCwgd2hpY2ggaXMgdXNlZCB0byBkZXRlcm1pbmUgYW4gZW1haWwgbWF0Y2gKCQkJCWVtYWlsUmVnZXguc291cmNlLAoJCQkJZG9tYWluTmFtZVJlZ2V4LnNvdXJjZSwKCQkJCXRsZFJlZ2V4LnNvdXJjZSwKCQkJJyknLAoJCQkKCQkJJ3wnLAoJCQkKCQkJJygnLCAgLy8gKioqIENhcHR1cmluZyBncm91cCAkNSwgd2hpY2ggaXMgdXNlZCB0byBtYXRjaCBhIFVSTAoJCQkJJyg/OicsIC8vIHBhcmVucyB0byBjb3ZlciBtYXRjaCBmb3IgcHJvdG9jb2wgKG9wdGlvbmFsKSwgYW5kIGRvbWFpbgoJCQkJCScoJywgIC8vICoqKiBDYXB0dXJpbmcgZ3JvdXAgJDYsIGZvciBhIHByb3RvY29sLXByZWZpeGVkIHVybCAoZXg6IGh0dHA6Ly9nb29nbGUuY29tKQoJCQkJCQlwcm90b2NvbFJlZ2V4LnNvdXJjZSwKCQkJCQkJZG9tYWluTmFtZVJlZ2V4LnNvdXJjZSwKCQkJCQknKScsCgkJCQkJCgkJCQkJJ3wnLAoJCQkJCQoJCQkJCScoPzonLCAgLy8gbm9uLWNhcHR1cmluZyBwYXJlbiBmb3IgYSAnd3d3LicgcHJlZml4ZWQgdXJsIChleDogd3d3Lmdvb2dsZS5jb20pCgkJCQkJCScoLj8vLyk/JywgIC8vICoqKiBDYXB0dXJpbmcgZ3JvdXAgJDcgZm9yIGFuIG9wdGlvbmFsIHByb3RvY29sLXJlbGF0aXZlIFVSTC4gTXVzdCBiZSBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBzdHJpbmcgb3Igc3RhcnQgd2l0aCBhIG5vbi13b3JkIGNoYXJhY3RlcgoJCQkJCQl3d3dSZWdleC5zb3VyY2UsCgkJCQkJCWRvbWFpbk5hbWVSZWdleC5zb3VyY2UsCgkJCQkJJyknLAoJCQkJCQoJCQkJCSd8JywKCQkJCQkKCQkJCQknKD86JywgIC8vIG5vbi1jYXB0dXJpbmcgcGFyZW4gZm9yIGtub3duIGEgVExEIHVybCAoZXg6IGdvb2dsZS5jb20pCgkJCQkJCScoLj8vLyk/JywgIC8vICoqKiBDYXB0dXJpbmcgZ3JvdXAgJDggZm9yIGFuIG9wdGlvbmFsIHByb3RvY29sLXJlbGF0aXZlIFVSTC4gTXVzdCBiZSBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBzdHJpbmcgb3Igc3RhcnQgd2l0aCBhIG5vbi13b3JkIGNoYXJhY3RlcgoJCQkJCQlkb21haW5OYW1lUmVnZXguc291cmNlLAoJCQkJCQl0bGRSZWdleC5zb3VyY2UsCgkJCQkJJyknLAoJCQkJJyknLAoJCQkJCgkJCQknKD86JyArIHVybFN1ZmZpeFJlZ2V4LnNvdXJjZSArICcpPycsICAvLyBtYXRjaCBmb3IgcGF0aCwgcXVlcnkgc3RyaW5nLCBhbmQvb3IgaGFzaCBhbmNob3IgLSBvcHRpb25hbAoJCQknKScKCQldLmpvaW4oICIiICksICdnaScgKTsKCX0gKSgpLAoJCgkvKioKCSAqIEBwcml2YXRlCgkgKiBAcHJvcGVydHkge1JlZ0V4cH0gY2hhckJlZm9yZVByb3RvY29sUmVsTWF0Y2hSZWdleAoJICogCgkgKiBUaGUgcmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gcmV0cmlldmUgdGhlIGNoYXJhY3RlciBiZWZvcmUgYSBwcm90b2NvbC1yZWxhdGl2ZSBVUkwgbWF0Y2guCgkgKiAKCSAqIFRoaXMgaXMgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSB7QGxpbmsgI21hdGNoZXJSZWdleH0sIHdoaWNoIG5lZWRzIHRvIGdyYWIgdGhlIGNoYXJhY3RlciBiZWZvcmUgYSBwcm90b2NvbC1yZWxhdGl2ZQoJICogJy8vJyBkdWUgdG8gdGhlIGxhY2sgb2YgYSBuZWdhdGl2ZSBsb29rLWJlaGluZCBpbiBKYXZhU2NyaXB0IHJlZ3VsYXIgZXhwcmVzc2lvbnMuIFRoZSBjaGFyYWN0ZXIgYmVmb3JlIHRoZSBtYXRjaCBpcyBzdHJpcHBlZAoJICogZnJvbSB0aGUgVVJMLgoJICovCgljaGFyQmVmb3JlUHJvdG9jb2xSZWxNYXRjaFJlZ2V4IDogL14oLik/XC9cLy8sCgkKCS8qKgoJICogQHByaXZhdGUKCSAqIEBwcm9wZXJ0eSB7QXV0b2xpbmtlci5NYXRjaFZhbGlkYXRvcn0gbWF0Y2hWYWxpZGF0b3IKCSAqIAoJICogVGhlIE1hdGNoVmFsaWRhdG9yIG9iamVjdCwgdXNlZCB0byBmaWx0ZXIgb3V0IGFueSBmYWxzZSBwb3NpdGl2ZXMgZnJvbSB0aGUge0BsaW5rICNtYXRjaGVyUmVnZXh9LiBTZWUKCSAqIHtAbGluayBBdXRvbGlua2VyLk1hdGNoVmFsaWRhdG9yfSBmb3IgZGV0YWlscy4KCSAqLwoJCgkKCS8qKgoJICogQGNvbnN0cnVjdG9yCgkgKiBAcGFyYW0ge09iamVjdH0gW2NmZ10gVGhlIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIEFuY2hvclRhZ0J1aWxkZXIgaW5zdGFuY2UsIHNwZWNpZmllZCBpbiBhbiBPYmplY3QgKG1hcCkuCgkgKi8KCWNvbnN0cnVjdG9yIDogZnVuY3Rpb24oIGNmZyApIHsKCQlBdXRvbGlua2VyLlV0aWwuYXNzaWduKCB0aGlzLCBjZmcgKTsKCQoJCXRoaXMubWF0Y2hWYWxpZGF0b3IgPSBuZXcgQXV0b2xpbmtlci5NYXRjaFZhbGlkYXRvcigpOwoJfSwKCQoJCgkvKioKCSAqIFBhcnNlcyB0aGUgaW5wdXQgYHRleHRgIHRvIHNlYXJjaCBmb3IgVVJMcy9lbWFpbHMvVHdpdHRlciBoYW5kbGVzLCBhbmQgY2FsbHMgdGhlIGByZXBsYWNlRm5gCgkgKiB0byBhbGxvdyByZXBsYWNlbWVudHMgb2YgdGhlIG1hdGNoZXMuIFJldHVybnMgdGhlIGB0ZXh0YCB3aXRoIG1hdGNoZXMgcmVwbGFjZWQuCgkgKiAKCSAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRvIHNlYXJjaCBhbmQgcmVwYWNlIG1hdGNoZXMgaW4uCgkgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXBsYWNlRm4gVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uIHRvIGhhbmRsZSB0aGUgcmVwbGFjZW1lbnRzLiBUaGUgZnVuY3Rpb24gdGFrZXMgYQoJICogICBzaW5nbGUgYXJndW1lbnQsIGEge0BsaW5rIEF1dG9saW5rZXIubWF0Y2guTWF0Y2h9IG9iamVjdCwgYW5kIHNob3VsZCByZXR1cm4gdGhlIHRleHQgdGhhdCBzaG91bGQKCSAqICAgbWFrZSB0aGUgcmVwbGFjZW1lbnQuCgkgKiBAcGFyYW0ge09iamVjdH0gW2NvbnRleHRPYmo9d2luZG93XSBUaGUgY29udGV4dCBvYmplY3QgKCJzY29wZSIpIHRvIHJ1biB0aGUgYHJlcGxhY2VGbmAgaW4uCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCXJlcGxhY2UgOiBmdW5jdGlvbiggdGV4dCwgcmVwbGFjZUZuLCBjb250ZXh0T2JqICkgewoJCXZhciBtZSA9IHRoaXM7ICAvLyBmb3IgY2xvc3VyZQoJCQoJCXJldHVybiB0ZXh0LnJlcGxhY2UoIHRoaXMubWF0Y2hlclJlZ2V4LCBmdW5jdGlvbiggbWF0Y2hTdHIsICQxLCAkMiwgJDMsICQ0LCAkNSwgJDYsICQ3LCAkOCApIHsKCQkJdmFyIG1hdGNoRGVzY09iaiA9IG1lLnByb2Nlc3NDYW5kaWRhdGVNYXRjaCggbWF0Y2hTdHIsICQxLCAkMiwgJDMsICQ0LCAkNSwgJDYsICQ3LCAkOCApOyAgLy8gIm1hdGNoIGRlc2NyaXB0aW9uIiBvYmplY3QKCQkJCgkJCS8vIFJldHVybiBvdXQgd2l0aCBubyBjaGFuZ2VzIGZvciBtYXRjaCB0eXBlcyB0aGF0IGFyZSBkaXNhYmxlZCAodXJsLCBlbWFpbCwgdHdpdHRlciksIG9yIGZvciBtYXRjaGVzIHRoYXQgYXJlIAoJCQkvLyBpbnZhbGlkIChmYWxzZSBwb3NpdGl2ZXMgZnJvbSB0aGUgbWF0Y2hlclJlZ2V4LCB3aGljaCBjYW4ndCB1c2UgbG9vay1iZWhpbmRzIHNpbmNlIHRoZXkgYXJlIHVuYXZhaWxhYmxlIGluIEpTKS4KCQkJaWYoICFtYXRjaERlc2NPYmogKSB7CgkJCQlyZXR1cm4gbWF0Y2hTdHI7CgkJCQkKCQkJfSBlbHNlIHsKCQkJCS8vIEdlbmVyYXRlIHJlcGxhY2VtZW50IHRleHQgZm9yIHRoZSBtYXRjaCBmcm9tIHRoZSBgcmVwbGFjZUZuYAoJCQkJdmFyIHJlcGxhY2VTdHIgPSByZXBsYWNlRm4uY2FsbCggY29udGV4dE9iaiwgbWF0Y2hEZXNjT2JqLm1hdGNoICk7CgkJCQlyZXR1cm4gbWF0Y2hEZXNjT2JqLnByZWZpeFN0ciArIHJlcGxhY2VTdHIgKyBtYXRjaERlc2NPYmouc3VmZml4U3RyOwoJCQl9CgkJfSApOwoJfSwKCQoJCgkvKioKCSAqIFByb2Nlc3NlcyBhIGNhbmRpZGF0ZSBtYXRjaCBmcm9tIHRoZSB7QGxpbmsgI21hdGNoZXJSZWdleH0uIAoJICogCgkgKiBOb3QgYWxsIG1hdGNoZXMgZm91bmQgYnkgdGhlIHJlZ2V4IGFyZSBhY3R1YWwgVVJML2VtYWlsL1R3aXR0ZXIgbWF0Y2hlcywgYXMgZGV0ZXJtaW5lZCBieSB0aGUge0BsaW5rICNtYXRjaFZhbGlkYXRvcn0uIEluCgkgKiB0aGlzIGNhc2UsIHRoZSBtZXRob2QgcmV0dXJucyBgbnVsbGAuIE90aGVyd2lzZSwgYSB2YWxpZCBPYmplY3Qgd2l0aCBgcHJlZml4U3RyYCwgYG1hdGNoYCwgYW5kIGBzdWZmaXhTdHJgIGlzIHJldHVybmVkLgoJICogCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IG1hdGNoU3RyIFRoZSBmdWxsIG1hdGNoIHRoYXQgd2FzIGZvdW5kIGJ5IHRoZSB7QGxpbmsgI21hdGNoZXJSZWdleH0uCgkgKiBAcGFyYW0ge1N0cmluZ30gdHdpdHRlck1hdGNoIFRoZSBtYXRjaGVkIHRleHQgb2YgYSBUd2l0dGVyIGhhbmRsZSwgaWYgdGhlIG1hdGNoIGlzIGEgVHdpdHRlciBtYXRjaC4KCSAqIEBwYXJhbSB7U3RyaW5nfSB0d2l0dGVySGFuZGxlUHJlZml4V2hpdGVzcGFjZUNoYXIgVGhlIHdoaXRlc3BhY2UgY2hhciBiZWZvcmUgdGhlIEAgc2lnbiBpbiBhIFR3aXR0ZXIgaGFuZGxlIG1hdGNoLiBUaGlzIAoJICogICBpcyBuZWVkZWQgYmVjYXVzZSBvZiBubyBsb29rYmVoaW5kcyBpbiBKUyByZWdleGVzLCBhbmQgaXMgbmVlZCB0byByZS1pbmNsdWRlIHRoZSBjaGFyYWN0ZXIgZm9yIHRoZSBhbmNob3IgdGFnIHJlcGxhY2VtZW50LgoJICogQHBhcmFtIHtTdHJpbmd9IHR3aXR0ZXJIYW5kbGUgVGhlIGFjdHVhbCBUd2l0dGVyIHVzZXIgKGkuZSB0aGUgd29yZCBhZnRlciB0aGUgQCBzaWduIGluIGEgVHdpdHRlciBtYXRjaCkuCgkgKiBAcGFyYW0ge1N0cmluZ30gZW1haWxBZGRyZXNzTWF0Y2ggVGhlIG1hdGNoZWQgZW1haWwgYWRkcmVzcyBmb3IgYW4gZW1haWwgYWRkcmVzcyBtYXRjaC4KCSAqIEBwYXJhbSB7U3RyaW5nfSB1cmxNYXRjaCBUaGUgbWF0Y2hlZCBVUkwgc3RyaW5nIGZvciBhIFVSTCBtYXRjaC4KCSAqIEBwYXJhbSB7U3RyaW5nfSBwcm90b2NvbFVybE1hdGNoIFRoZSBtYXRjaCBVUkwgc3RyaW5nIGZvciBhIHByb3RvY29sIG1hdGNoLiBFeDogJ2h0dHA6Ly95YWhvby5jb20nLiBUaGlzIGlzIHVzZWQgdG8gbWF0Y2gKCSAqICAgc29tZXRoaW5nIGxpa2UgJ2h0dHA6Ly9sb2NhbGhvc3QnLCB3aGVyZSB3ZSB3b24ndCBkb3VibGUgY2hlY2sgdGhhdCB0aGUgZG9tYWluIG5hbWUgaGFzIGF0IGxlYXN0IG9uZSAnLicgaW4gaXQuCgkgKiBAcGFyYW0ge1N0cmluZ30gd3d3UHJvdG9jb2xSZWxhdGl2ZU1hdGNoIFRoZSAnLy8nIGZvciBhIHByb3RvY29sLXJlbGF0aXZlIG1hdGNoIGZyb20gYSAnd3d3JyB1cmwsIHdpdGggdGhlIGNoYXJhY3RlciB0aGF0IAoJICogICBjb21lcyBiZWZvcmUgdGhlICcvLycuCgkgKiBAcGFyYW0ge1N0cmluZ30gdGxkUHJvdG9jb2xSZWxhdGl2ZU1hdGNoIFRoZSAnLy8nIGZvciBhIHByb3RvY29sLXJlbGF0aXZlIG1hdGNoIGZyb20gYSBUTEQgKHRvcCBsZXZlbCBkb21haW4pIG1hdGNoLCB3aXRoIAoJICogICB0aGUgY2hhcmFjdGVyIHRoYXQgY29tZXMgYmVmb3JlIHRoZSAnLy8nLgoJICogICAKCSAqIEByZXR1cm4ge09iamVjdH0gQSAibWF0Y2ggZGVzY3JpcHRpb24gb2JqZWN0Ii4gVGhpcyB3aWxsIGJlIGBudWxsYCBpZiB0aGUgbWF0Y2ggd2FzIGludmFsaWQsIG9yIGlmIGEgbWF0Y2ggdHlwZSBpcyBkaXNhYmxlZC4KCSAqICAgT3RoZXJ3aXNlLCB0aGlzIHdpbGwgYmUgYW4gT2JqZWN0IChtYXApIHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOgoJICogQHJldHVybiB7U3RyaW5nfSByZXR1cm4ucHJlZml4U3RyIFRoZSBjaGFyKHMpIHRoYXQgc2hvdWxkIGJlIHByZXBlbmRlZCB0byB0aGUgcmVwbGFjZW1lbnQgc3RyaW5nLiBUaGVzZSBhcmUgY2hhcihzKSB0aGF0CgkgKiAgIHdlcmUgbmVlZGVkIHRvIGJlIGluY2x1ZGVkIGZyb20gdGhlIHJlZ2V4IG1hdGNoIHRoYXQgd2VyZSBpZ25vcmVkIGJ5IHByb2Nlc3NpbmcgY29kZSwgYW5kIHNob3VsZCBiZSByZS1pbnNlcnRlZCBpbnRvIAoJICogICB0aGUgcmVwbGFjZW1lbnQgc3RyZWFtLgoJICogQHJldHVybiB7U3RyaW5nfSByZXR1cm4uc3VmZml4U3RyIFRoZSBjaGFyKHMpIHRoYXQgc2hvdWxkIGJlIGFwcGVuZGVkIHRvIHRoZSByZXBsYWNlbWVudCBzdHJpbmcuIFRoZXNlIGFyZSBjaGFyKHMpIHRoYXQKCSAqICAgd2VyZSBuZWVkZWQgdG8gYmUgaW5jbHVkZWQgZnJvbSB0aGUgcmVnZXggbWF0Y2ggdGhhdCB3ZXJlIGlnbm9yZWQgYnkgcHJvY2Vzc2luZyBjb2RlLCBhbmQgc2hvdWxkIGJlIHJlLWluc2VydGVkIGludG8gCgkgKiAgIHRoZSByZXBsYWNlbWVudCBzdHJlYW0uCgkgKiBAcmV0dXJuIHtBdXRvbGlua2VyLm1hdGNoLk1hdGNofSByZXR1cm4ubWF0Y2ggVGhlIE1hdGNoIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIG1hdGNoIHRoYXQgd2FzIGZvdW5kLgoJICovCglwcm9jZXNzQ2FuZGlkYXRlTWF0Y2ggOiBmdW5jdGlvbiggCgkJbWF0Y2hTdHIsIHR3aXR0ZXJNYXRjaCwgdHdpdHRlckhhbmRsZVByZWZpeFdoaXRlc3BhY2VDaGFyLCB0d2l0dGVySGFuZGxlLCAKCQllbWFpbEFkZHJlc3NNYXRjaCwgdXJsTWF0Y2gsIHByb3RvY29sVXJsTWF0Y2gsIHd3d1Byb3RvY29sUmVsYXRpdmVNYXRjaCwgdGxkUHJvdG9jb2xSZWxhdGl2ZU1hdGNoCgkpIHsKCQkvLyBOb3RlOiBUaGUgYG1hdGNoU3RyYCB2YXJpYWJsZSB3aWwgYmUgZml4ZWQgdXAgdG8gcmVtb3ZlIGNoYXJhY3RlcnMgdGhhdCBhcmUgbm8gbG9uZ2VyIG5lZWRlZCAod2hpY2ggd2lsbCAKCQkvLyBiZSBhZGRlZCB0byBgcHJlZml4U3RyYCBhbmQgYHN1ZmZpeFN0cmApLgoJCQoJCXZhciBwcm90b2NvbFJlbGF0aXZlTWF0Y2ggPSB3d3dQcm90b2NvbFJlbGF0aXZlTWF0Y2ggfHwgdGxkUHJvdG9jb2xSZWxhdGl2ZU1hdGNoLAoJCSAgICBtYXRjaCwgIC8vIFdpbGwgYmUgYW4gQXV0b2xpbmtlci5tYXRjaC5NYXRjaCBvYmplY3QKCQkgICAgCgkJICAgIHByZWZpeFN0ciA9ICIiLCAgICAgICAvLyBBIHN0cmluZyB0byB1c2UgdG8gcHJlZml4IHRoZSBhbmNob3IgdGFnIHRoYXQgaXMgY3JlYXRlZC4gVGhpcyBpcyBuZWVkZWQgZm9yIHRoZSBUd2l0dGVyIGhhbmRsZSBtYXRjaAoJCSAgICBzdWZmaXhTdHIgPSAiIjsgICAgICAgLy8gQSBzdHJpbmcgdG8gc3VmZml4IHRoZSBhbmNob3IgdGFnIHRoYXQgaXMgY3JlYXRlZC4gVGhpcyBpcyB1c2VkIGlmIHRoZXJlIGlzIGEgdHJhaWxpbmcgcGFyZW50aGVzaXMgdGhhdCBzaG91bGQgbm90IGJlIGF1dG8tbGlua2VkLgoJCSAgICAKCQkKCQkvLyBSZXR1cm4gb3V0IHdpdGggYG51bGxgIGZvciBtYXRjaCB0eXBlcyB0aGF0IGFyZSBkaXNhYmxlZCAodXJsLCBlbWFpbCwgdHdpdHRlciksIG9yIGZvciBtYXRjaGVzIHRoYXQgYXJlIAoJCS8vIGludmFsaWQgKGZhbHNlIHBvc2l0aXZlcyBmcm9tIHRoZSBtYXRjaGVyUmVnZXgsIHdoaWNoIGNhbid0IHVzZSBsb29rLWJlaGluZHMgc2luY2UgdGhleSBhcmUgdW5hdmFpbGFibGUgaW4gSlMpLgoJCWlmKAoJCQkoIHR3aXR0ZXJNYXRjaCAmJiAhdGhpcy50d2l0dGVyICkgfHwgKCBlbWFpbEFkZHJlc3NNYXRjaCAmJiAhdGhpcy5lbWFpbCApIHx8ICggdXJsTWF0Y2ggJiYgIXRoaXMudXJscyApIHx8CgkJCSF0aGlzLm1hdGNoVmFsaWRhdG9yLmlzVmFsaWRNYXRjaCggdXJsTWF0Y2gsIHByb3RvY29sVXJsTWF0Y2gsIHByb3RvY29sUmVsYXRpdmVNYXRjaCApIAoJCSkgewoJCQlyZXR1cm4gbnVsbDsKCQl9CgkJCgkJLy8gSGFuZGxlIGEgY2xvc2luZyBwYXJlbnRoZXNpcyBhdCB0aGUgZW5kIG9mIHRoZSBtYXRjaCwgYW5kIGV4Y2x1ZGUgaXQgaWYgdGhlcmUgaXMgbm90IGEgbWF0Y2hpbmcgb3BlbiBwYXJlbnRoZXNpcwoJCS8vIGluIHRoZSBtYXRjaCBpdHNlbGYuIAoJCWlmKCB0aGlzLm1hdGNoSGFzVW5iYWxhbmNlZENsb3NpbmdQYXJlbiggbWF0Y2hTdHIgKSApIHsKCQkJbWF0Y2hTdHIgPSBtYXRjaFN0ci5zdWJzdHIoIDAsIG1hdGNoU3RyLmxlbmd0aCAtIDEgKTsgIC8vIHJlbW92ZSB0aGUgdHJhaWxpbmcgIikiCgkJCXN1ZmZpeFN0ciA9ICIpIjsgIC8vIHRoaXMgd2lsbCBiZSBhZGRlZCBhZnRlciB0aGUgZ2VuZXJhdGVkIDxhPiB0YWcKCQl9CgkJCgkJCgkJaWYoIGVtYWlsQWRkcmVzc01hdGNoICkgewoJCQltYXRjaCA9IG5ldyBBdXRvbGlua2VyLm1hdGNoLkVtYWlsKCB7IG1hdGNoZWRUZXh0OiBtYXRjaFN0ciwgZW1haWw6IGVtYWlsQWRkcmVzc01hdGNoIH0gKTsKCQkJCgkJfSBlbHNlIGlmKCB0d2l0dGVyTWF0Y2ggKSB7CgkJCS8vIGZpeCB1cCB0aGUgYG1hdGNoU3RyYCBpZiB0aGVyZSB3YXMgYSBwcmVjZWRpbmcgd2hpdGVzcGFjZSBjaGFyLCB3aGljaCB3YXMgbmVlZGVkIHRvIGRldGVybWluZSB0aGUgbWF0Y2ggCgkJCS8vIGl0c2VsZiAoc2luY2UgdGhlcmUgYXJlIG5vIGxvb2stYmVoaW5kcyBpbiBKUyByZWdleGVzKQoJCQlpZiggdHdpdHRlckhhbmRsZVByZWZpeFdoaXRlc3BhY2VDaGFyICkgewoJCQkJcHJlZml4U3RyID0gdHdpdHRlckhhbmRsZVByZWZpeFdoaXRlc3BhY2VDaGFyOwoJCQkJbWF0Y2hTdHIgPSBtYXRjaFN0ci5zbGljZSggMSApOyAgLy8gcmVtb3ZlIHRoZSBwcmVmaXhlZCB3aGl0ZXNwYWNlIGNoYXIgZnJvbSB0aGUgbWF0Y2gKCQkJfQoJCQltYXRjaCA9IG5ldyBBdXRvbGlua2VyLm1hdGNoLlR3aXR0ZXIoIHsgbWF0Y2hlZFRleHQ6IG1hdGNoU3RyLCB0d2l0dGVySGFuZGxlOiB0d2l0dGVySGFuZGxlIH0gKTsKCQkJCgkJfSBlbHNlIHsgIC8vIHVybCBtYXRjaAoJCQkvLyBJZiBpdCdzIGEgcHJvdG9jb2wtcmVsYXRpdmUgJy8vJyBtYXRjaCwgcmVtb3ZlIHRoZSBjaGFyYWN0ZXIgYmVmb3JlIHRoZSAnLy8nICh3aGljaCB0aGUgbWF0Y2hlclJlZ2V4IG5lZWRlZAoJCQkvLyB0byBtYXRjaCBkdWUgdG8gdGhlIGxhY2sgb2YgYSBuZWdhdGl2ZSBsb29rLWJlaGluZCBpbiBKYXZhU2NyaXB0IHJlZ3VsYXIgZXhwcmVzc2lvbnMpCgkJCWlmKCBwcm90b2NvbFJlbGF0aXZlTWF0Y2ggKSB7CgkJCQl2YXIgY2hhckJlZm9yZU1hdGNoID0gcHJvdG9jb2xSZWxhdGl2ZU1hdGNoLm1hdGNoKCB0aGlzLmNoYXJCZWZvcmVQcm90b2NvbFJlbE1hdGNoUmVnZXggKVsgMSBdIHx8ICIiOwoJCQkJCgkJCQlpZiggY2hhckJlZm9yZU1hdGNoICkgeyAgLy8gZml4IHVwIHRoZSBgbWF0Y2hTdHJgIGlmIHRoZXJlIHdhcyBhIHByZWNlZGluZyBjaGFyIGJlZm9yZSBhIHByb3RvY29sLXJlbGF0aXZlIG1hdGNoLCB3aGljaCB3YXMgbmVlZGVkIHRvIGRldGVybWluZSB0aGUgbWF0Y2ggaXRzZWxmIChzaW5jZSB0aGVyZSBhcmUgbm8gbG9vay1iZWhpbmRzIGluIEpTIHJlZ2V4ZXMpCgkJCQkJcHJlZml4U3RyID0gY2hhckJlZm9yZU1hdGNoOwoJCQkJCW1hdGNoU3RyID0gbWF0Y2hTdHIuc2xpY2UoIDEgKTsgIC8vIHJlbW92ZSB0aGUgcHJlZml4ZWQgY2hhciBmcm9tIHRoZSBtYXRjaAoJCQkJfQoJCQl9CgkJCQoJCQltYXRjaCA9IG5ldyBBdXRvbGlua2VyLm1hdGNoLlVybCggewoJCQkJbWF0Y2hlZFRleHQgOiBtYXRjaFN0ciwKCQkJCXVybCA6IG1hdGNoU3RyLAoJCQkJcHJvdG9jb2xVcmxNYXRjaCA6ICEhcHJvdG9jb2xVcmxNYXRjaCwKCQkJCXByb3RvY29sUmVsYXRpdmVNYXRjaCA6ICEhcHJvdG9jb2xSZWxhdGl2ZU1hdGNoLAoJCQkJc3RyaXBQcmVmaXggOiB0aGlzLnN0cmlwUHJlZml4CgkJCX0gKTsKCQl9CgkJCgkJcmV0dXJuIHsKCQkJcHJlZml4U3RyIDogcHJlZml4U3RyLAoJCQlzdWZmaXhTdHIgOiBzdWZmaXhTdHIsCgkJCW1hdGNoICAgICA6IG1hdGNoCgkJfTsKCX0sCgkKCQoJLyoqCgkgKiBEZXRlcm1pbmVzIGlmIGEgbWF0Y2ggZm91bmQgaGFzIGFuIHVubWF0Y2hlZCBjbG9zaW5nIHBhcmVudGhlc2lzLiBJZiBzbywgdGhpcyBwYXJlbnRoZXNpcyB3aWxsIGJlIHJlbW92ZWQKCSAqIGZyb20gdGhlIG1hdGNoIGl0c2VsZiwgYW5kIGFwcGVuZGVkIGFmdGVyIHRoZSBnZW5lcmF0ZWQgYW5jaG9yIHRhZyBpbiB7QGxpbmsgI3Byb2Nlc3NUZXh0Tm9kZX0uCgkgKiAKCSAqIEEgbWF0Y2ggbWF5IGhhdmUgYW4gZXh0cmEgY2xvc2luZyBwYXJlbnRoZXNpcyBhdCB0aGUgZW5kIG9mIHRoZSBtYXRjaCBiZWNhdXNlIHRoZSByZWd1bGFyIGV4cHJlc3Npb24gbXVzdCBpbmNsdWRlIHBhcmVudGhlc2lzCgkgKiBmb3IgVVJMcyBzdWNoIGFzICJ3aWtpcGVkaWEuY29tL3NvbWV0aGluZ18oZGlzYW1iaWd1YXRpb24pIiwgd2hpY2ggc2hvdWxkIGJlIGF1dG8tbGlua2VkLiAKCSAqIAoJICogSG93ZXZlciwgYW4gZXh0cmEgcGFyZW50aGVzaXMgKndpbGwqIGJlIGluY2x1ZGVkIHdoZW4gdGhlIFVSTCBpdHNlbGYgaXMgd3JhcHBlZCBpbiBwYXJlbnRoZXNpcywgc3VjaCBhcyBpbiB0aGUgY2FzZSBvZgoJICogIih3aWtpcGVkaWEuY29tL3NvbWV0aGluZ18oZGlzYW1iaWd1YXRpb24pKSIuIEluIHRoaXMgY2FzZSwgdGhlIGxhc3QgY2xvc2luZyBwYXJlbnRoZXNpcyBzaG91bGQgKm5vdCogYmUgcGFydCBvZiB0aGUgVVJMIAoJICogaXRzZWxmLCBhbmQgdGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gYHRydWVgLgoJICogCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IG1hdGNoU3RyIFRoZSBmdWxsIG1hdGNoIHN0cmluZyBmcm9tIHRoZSB7QGxpbmsgI21hdGNoZXJSZWdleH0uCgkgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlcmUgaXMgYW4gdW5iYWxhbmNlZCBjbG9zaW5nIHBhcmVudGhlc2lzIGF0IHRoZSBlbmQgb2YgdGhlIGBtYXRjaFN0cmAsIGBmYWxzZWAgb3RoZXJ3aXNlLgoJICovCgltYXRjaEhhc1VuYmFsYW5jZWRDbG9zaW5nUGFyZW4gOiBmdW5jdGlvbiggbWF0Y2hTdHIgKSB7CgkJdmFyIGxhc3RDaGFyID0gbWF0Y2hTdHIuY2hhckF0KCBtYXRjaFN0ci5sZW5ndGggLSAxICk7CgkJCgkJaWYoIGxhc3RDaGFyID09PSAnKScgKSB7CgkJCXZhciBvcGVuUGFyZW5zTWF0Y2ggPSBtYXRjaFN0ci5tYXRjaCggL1woL2cgKSwKCQkJICAgIGNsb3NlUGFyZW5zTWF0Y2ggPSBtYXRjaFN0ci5tYXRjaCggL1wpL2cgKSwKCQkJICAgIG51bU9wZW5QYXJlbnMgPSAoIG9wZW5QYXJlbnNNYXRjaCAmJiBvcGVuUGFyZW5zTWF0Y2gubGVuZ3RoICkgfHwgMCwKCQkJICAgIG51bUNsb3NlUGFyZW5zID0gKCBjbG9zZVBhcmVuc01hdGNoICYmIGNsb3NlUGFyZW5zTWF0Y2gubGVuZ3RoICkgfHwgMDsKCQkJCgkJCWlmKCBudW1PcGVuUGFyZW5zIDwgbnVtQ2xvc2VQYXJlbnMgKSB7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKfSApOwovKmdsb2JhbCBBdXRvbGlua2VyICovCi8qanNoaW50IHNjcmlwdHVybDp0cnVlICovCi8qKgogKiBAcHJpdmF0ZQogKiBAY2xhc3MgQXV0b2xpbmtlci5NYXRjaFZhbGlkYXRvcgogKiBAZXh0ZW5kcyBPYmplY3QKICogCiAqIFVzZWQgYnkgQXV0b2xpbmtlciB0byBmaWx0ZXIgb3V0IGZhbHNlIHBvc2l0aXZlcyBmcm9tIHRoZSB7QGxpbmsgQXV0b2xpbmtlciNtYXRjaGVyUmVnZXh9LgogKiAKICogRHVlIHRvIHRoZSBsaW1pdGF0aW9ucyBvZiByZWd1bGFyIGV4cHJlc3Npb25zIChpbmNsdWRpbmcgdGhlIG1pc3NpbmcgZmVhdHVyZSBvZiBsb29rLWJlaGluZHMgaW4gSlMgcmVndWxhciBleHByZXNzaW9ucyksCiAqIHdlIGNhbm5vdCBhbHdheXMgZGV0ZXJtaW5lIHRoZSB2YWxpZGl0eSBvZiBhIGdpdmVuIG1hdGNoLiBUaGlzIGNsYXNzIGFwcGxpZXMgYSBiaXQgb2YgYWRkaXRpb25hbCBsb2dpYyB0byBmaWx0ZXIgb3V0IGFueQogKiBmYWxzZSBwb3NpdGl2ZXMgdGhhdCBoYXZlIGJlZW4gbWF0Y2hlZCBieSB0aGUge0BsaW5rIEF1dG9saW5rZXIjbWF0Y2hlclJlZ2V4fS4KICovCkF1dG9saW5rZXIuTWF0Y2hWYWxpZGF0b3IgPSBBdXRvbGlua2VyLlV0aWwuZXh0ZW5kKCBPYmplY3QsIHsKCQoJLyoqCgkgKiBAcHJpdmF0ZQoJICogQHByb3BlcnR5IHtSZWdFeHB9IGludmFsaWRQcm90b2NvbFJlbE1hdGNoUmVnZXgKCSAqIAoJICogVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIGNoZWNrIGEgcG90ZW50aWFsIHByb3RvY29sLXJlbGF0aXZlIFVSTCBtYXRjaCwgY29taW5nIGZyb20gdGhlIAoJICoge0BsaW5rIEF1dG9saW5rZXIjbWF0Y2hlclJlZ2V4fS4gQSBwcm90b2NvbC1yZWxhdGl2ZSBVUkwgaXMsIGZvciBleGFtcGxlLCAiLy95YWhvby5jb20iCgkgKiAKCSAqIFRoaXMgcmVndWxhciBleHByZXNzaW9uIGNoZWNrcyB0byBzZWUgaWYgdGhlcmUgaXMgYSB3b3JkIGNoYXJhY3RlciBiZWZvcmUgdGhlICcvLycgbWF0Y2ggaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIGlmIAoJICogd2Ugc2hvdWxkIGFjdHVhbGx5IGF1dG9saW5rIGEgcHJvdG9jb2wtcmVsYXRpdmUgVVJMLiBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIHRoZXJlIGlzIG5vIG5lZ2F0aXZlIGxvb2stYmVoaW5kIGluIAoJICogSmF2YVNjcmlwdCByZWd1bGFyIGV4cHJlc3Npb25zLiAKCSAqIAoJICogRm9yIGluc3RhbmNlLCB3ZSB3YW50IHRvIGF1dG9saW5rIHNvbWV0aGluZyBsaWtlICJHbyB0bzogLy9nb29nbGUuY29tIiwgYnV0IHdlIGRvbid0IHdhbnQgdG8gYXV0b2xpbmsgc29tZXRoaW5nIAoJICogbGlrZSAiYWJjLy9nb29nbGUuY29tIgoJICovCglpbnZhbGlkUHJvdG9jb2xSZWxNYXRjaFJlZ2V4IDogL15bXHddXC9cLy8sCgkKCS8qKgoJICogUmVnZXggdG8gdGVzdCBmb3IgYSBmdWxsIHByb3RvY29sLCB3aXRoIHRoZSB0d28gdHJhaWxpbmcgc2xhc2hlcy4gRXg6ICdodHRwOi8vJwoJICogCgkgKiBAcHJpdmF0ZQoJICogQHByb3BlcnR5IHtSZWdFeHB9IGhhc0Z1bGxQcm90b2NvbFJlZ2V4CgkgKi8KCWhhc0Z1bGxQcm90b2NvbFJlZ2V4IDogL15bQS1aYS16XVstLitBLVphLXowLTldKzpcL1wvLywKCQoJLyoqCgkgKiBSZWdleCB0byBmaW5kIHRoZSBVUkkgc2NoZW1lLCBzdWNoIGFzICdtYWlsdG86Jy4KCSAqIAoJICogVGhpcyBpcyB1c2VkIHRvIGZpbHRlciBvdXQgJ2phdmFzY3JpcHQ6JyBhbmQgJ3Zic2NyaXB0Oicgc2NoZW1lcy4KCSAqIAoJICogQHByaXZhdGUKCSAqIEBwcm9wZXJ0eSB7UmVnRXhwfSB1cmlTY2hlbWVSZWdleAoJICovCgl1cmlTY2hlbWVSZWdleCA6IC9eW0EtWmEtel1bLS4rQS1aYS16MC05XSs6LywKCQoJLyoqCgkgKiBSZWdleCB0byBkZXRlcm1pbmUgaWYgYXQgbGVhc3Qgb25lIHdvcmQgY2hhciBleGlzdHMgYWZ0ZXIgdGhlIHByb3RvY29sIChpLmUuIGFmdGVyIHRoZSAnOicpCgkgKiAKCSAqIEBwcml2YXRlCgkgKiBAcHJvcGVydHkge1JlZ0V4cH0gaGFzV29yZENoYXJBZnRlclByb3RvY29sUmVnZXgKCSAqLwoJaGFzV29yZENoYXJBZnRlclByb3RvY29sUmVnZXggOiAvOlteXHNdKj9bQS1aYS16XS8sCgkKCQoJLyoqCgkgKiBEZXRlcm1pbmVzIGlmIGEgZ2l2ZW4gbWF0Y2ggZm91bmQgYnkge0BsaW5rIEF1dG9saW5rZXIjcHJvY2Vzc1RleHROb2RlfSBpcyB2YWxpZC4gV2lsbCByZXR1cm4gYGZhbHNlYCBmb3I6CgkgKiAKCSAqIDEpIFVSTCBtYXRjaGVzIHdoaWNoIGRvIG5vdCBoYXZlIGF0IGxlYXN0IGhhdmUgb25lIHBlcmlvZCAoJy4nKSBpbiB0aGUgZG9tYWluIG5hbWUgKGVmZmVjdGl2ZWx5IHNraXBwaW5nIG92ZXIgCgkgKiAgICBtYXRjaGVzIGxpa2UgImFiYzpkZWYiKS4gSG93ZXZlciwgVVJMIG1hdGNoZXMgd2l0aCBhIHByb3RvY29sIHdpbGwgYmUgYWxsb3dlZCAoZXg6ICdodHRwOi8vbG9jYWxob3N0JykKCSAqIDIpIFVSTCBtYXRjaGVzIHdoaWNoIGRvIG5vdCBoYXZlIGF0IGxlYXN0IG9uZSB3b3JkIGNoYXJhY3RlciBpbiB0aGUgZG9tYWluIG5hbWUgKGVmZmVjdGl2ZWx5IHNraXBwaW5nIG92ZXIKCSAqICAgIG1hdGNoZXMgbGlrZSAiZ2l0OjEuMCIpLgoJICogMykgQSBwcm90b2NvbC1yZWxhdGl2ZSB1cmwgbWF0Y2ggKGEgVVJMIGJlZ2lubmluZyB3aXRoICcvLycpIHdob3NlIHByZXZpb3VzIGNoYXJhY3RlciBpcyBhIHdvcmQgY2hhcmFjdGVyIAoJICogICAgKGVmZmVjdGl2ZWx5IHNraXBwaW5nIG92ZXIgc3RyaW5ncyBsaWtlICJhYmMvL2dvb2dsZS5jb20iKQoJICogCgkgKiBPdGhlcndpc2UsIHJldHVybnMgYHRydWVgLgoJICogCgkgKiBAcGFyYW0ge1N0cmluZ30gdXJsTWF0Y2ggVGhlIG1hdGNoZWQgVVJMLCBpZiB0aGVyZSB3YXMgb25lLiBXaWxsIGJlIGFuIGVtcHR5IHN0cmluZyBpZiB0aGUgbWF0Y2ggaXMgbm90IGEgVVJMIG1hdGNoLgoJICogQHBhcmFtIHtTdHJpbmd9IHByb3RvY29sVXJsTWF0Y2ggVGhlIG1hdGNoIFVSTCBzdHJpbmcgZm9yIGEgcHJvdG9jb2wgbWF0Y2guIEV4OiAnaHR0cDovL3lhaG9vLmNvbScuIFRoaXMgaXMgdXNlZCB0byBtYXRjaAoJICogICBzb21ldGhpbmcgbGlrZSAnaHR0cDovL2xvY2FsaG9zdCcsIHdoZXJlIHdlIHdvbid0IGRvdWJsZSBjaGVjayB0aGF0IHRoZSBkb21haW4gbmFtZSBoYXMgYXQgbGVhc3Qgb25lICcuJyBpbiBpdC4KCSAqIEBwYXJhbSB7U3RyaW5nfSBwcm90b2NvbFJlbGF0aXZlTWF0Y2ggVGhlIHByb3RvY29sLXJlbGF0aXZlIHN0cmluZyBmb3IgYSBVUkwgbWF0Y2ggKGkuZS4gJy8vJyksIHBvc3NpYmx5IHdpdGggYSBwcmVjZWRpbmcKCSAqICAgY2hhcmFjdGVyIChleCwgYSBzcGFjZSwgc3VjaCBhczogJyAvLycsIG9yIGEgbGV0dGVyLCBzdWNoIGFzOiAnYS8vJykuIFRoZSBtYXRjaCBpcyBpbnZhbGlkIGlmIHRoZXJlIGlzIGEgd29yZCBjaGFyYWN0ZXIKCSAqICAgcHJlY2VkaW5nIHRoZSAnLy8nLgoJICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBtYXRjaCBnaXZlbiBpcyB2YWxpZCBhbmQgc2hvdWxkIGJlIHByb2Nlc3NlZCwgb3IgYGZhbHNlYCBpZiB0aGUgbWF0Y2ggaXMgaW52YWxpZCBhbmQvb3IgCgkgKiAgIHNob3VsZCBqdXN0IG5vdCBiZSBwcm9jZXNzZWQuCgkgKi8KCWlzVmFsaWRNYXRjaCA6IGZ1bmN0aW9uKCB1cmxNYXRjaCwgcHJvdG9jb2xVcmxNYXRjaCwgcHJvdG9jb2xSZWxhdGl2ZU1hdGNoICkgewoJCWlmKAoJCQkoIHByb3RvY29sVXJsTWF0Y2ggJiYgIXRoaXMuaXNWYWxpZFVyaVNjaGVtZSggcHJvdG9jb2xVcmxNYXRjaCApICkgfHwKCQkJdGhpcy51cmxNYXRjaERvZXNOb3RIYXZlUHJvdG9jb2xPckRvdCggdXJsTWF0Y2gsIHByb3RvY29sVXJsTWF0Y2ggKSB8fCAgICAgICAvLyBBdCBsZWFzdCBvbmUgcGVyaW9kICgnLicpIG11c3QgZXhpc3QgaW4gdGhlIFVSTCBtYXRjaCBmb3IgdXMgdG8gY29uc2lkZXIgaXQgYW4gYWN0dWFsIFVSTCwgKnVubGVzcyogaXQgd2FzIGEgZnVsbCBwcm90b2NvbCBtYXRjaCAobGlrZSAnaHR0cDovL2xvY2FsaG9zdCcpCgkJCXRoaXMudXJsTWF0Y2hEb2VzTm90SGF2ZUF0TGVhc3RPbmVXb3JkQ2hhciggdXJsTWF0Y2gsIHByb3RvY29sVXJsTWF0Y2ggKSB8fCAgLy8gQXQgbGVhc3Qgb25lIGxldHRlciBjaGFyYWN0ZXIgbXVzdCBleGlzdCBpbiB0aGUgZG9tYWluIG5hbWUgYWZ0ZXIgYSBwcm90b2NvbCBtYXRjaC4gRXg6IHNraXAgb3ZlciBzb21ldGhpbmcgbGlrZSAiZ2l0OjEuMCIKCQkJdGhpcy5pc0ludmFsaWRQcm90b2NvbFJlbGF0aXZlTWF0Y2goIHByb3RvY29sUmVsYXRpdmVNYXRjaCApICAgICAgICAgICAgICAgICAvLyBBIHByb3RvY29sLXJlbGF0aXZlIG1hdGNoIHdoaWNoIGhhcyBhIHdvcmQgY2hhcmFjdGVyIGluIGZyb250IG9mIGl0IChzbyB3ZSBjYW4gc2tpcCBzb21ldGhpbmcgbGlrZSAiYWJjLy9nb29nbGUuY29tIikKCQkpIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQlyZXR1cm4gdHJ1ZTsKCX0sCgkKCQoJLyoqCgkgKiBEZXRlcm1pbmVzIGlmIHRoZSBVUkkgc2NoZW1lIGlzIGEgdmFsaWQgc2NoZW1lIHRvIGJlIGF1dG9saW5rZWQuIFJldHVybnMgYGZhbHNlYCBpZiB0aGUgc2NoZW1lIGlzIAoJICogJ2phdmFzY3JpcHQ6JyBvciAndmJzY3JpcHQ6JwoJICogCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IHVyaVNjaGVtZU1hdGNoIFRoZSBtYXRjaCBVUkwgc3RyaW5nIGZvciBhIGZ1bGwgVVJJIHNjaGVtZSBtYXRjaC4gRXg6ICdodHRwOi8veWFob28uY29tJyAKCSAqICAgb3IgJ21haWx0bzphQGEuY29tJy4KCSAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgc2NoZW1lIGlzIGEgdmFsaWQgb25lLCBgZmFsc2VgIG90aGVyd2lzZS4KCSAqLwoJaXNWYWxpZFVyaVNjaGVtZSA6IGZ1bmN0aW9uKCB1cmlTY2hlbWVNYXRjaCApIHsKCQl2YXIgdXJpU2NoZW1lID0gdXJpU2NoZW1lTWF0Y2gubWF0Y2goIHRoaXMudXJpU2NoZW1lUmVnZXggKVsgMCBdLnRvTG93ZXJDYXNlKCk7CgkJCgkJcmV0dXJuICggdXJpU2NoZW1lICE9PSAnamF2YXNjcmlwdDonICYmIHVyaVNjaGVtZSAhPT0gJ3Zic2NyaXB0OicgKTsKCX0sCgkKCQoJLyoqCgkgKiBEZXRlcm1pbmVzIGlmIGEgVVJMIG1hdGNoIGRvZXMgbm90IGhhdmUgZWl0aGVyOgoJICogCgkgKiBhKSBhIGZ1bGwgcHJvdG9jb2wgKGkuZS4gJ2h0dHA6Ly8nKSwgb3IKCSAqIGIpIGF0IGxlYXN0IG9uZSBkb3QgKCcuJykgaW4gdGhlIGRvbWFpbiBuYW1lIChmb3IgYSBub24tZnVsbC1wcm90b2NvbCBtYXRjaCkuCgkgKiAKCSAqIEVpdGhlciBzaXR1YXRpb24gaXMgY29uc2lkZXJlZCBhbiBpbnZhbGlkIFVSTCAoZXg6ICdnaXQ6ZCcgZG9lcyBub3QgaGF2ZSBlaXRoZXIgdGhlICc6Ly8nIHBhcnQsIG9yIGF0IGxlYXN0IG9uZSBkb3QKCSAqIGluIHRoZSBkb21haW4gbmFtZS4gSWYgdGhlIG1hdGNoIHdhcyAnZ2l0OmFiYy5jb20nLCB3ZSB3b3VsZCBjb25zaWRlciB0aGlzIHZhbGlkLikKCSAqIAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7U3RyaW5nfSB1cmxNYXRjaCBUaGUgbWF0Y2hlZCBVUkwsIGlmIHRoZXJlIHdhcyBvbmUuIFdpbGwgYmUgYW4gZW1wdHkgc3RyaW5nIGlmIHRoZSBtYXRjaCBpcyBub3QgYSBVUkwgbWF0Y2guCgkgKiBAcGFyYW0ge1N0cmluZ30gcHJvdG9jb2xVcmxNYXRjaCBUaGUgbWF0Y2ggVVJMIHN0cmluZyBmb3IgYSBwcm90b2NvbCBtYXRjaC4gRXg6ICdodHRwOi8veWFob28uY29tJy4gVGhpcyBpcyB1c2VkIHRvIG1hdGNoCgkgKiAgIHNvbWV0aGluZyBsaWtlICdodHRwOi8vbG9jYWxob3N0Jywgd2hlcmUgd2Ugd29uJ3QgZG91YmxlIGNoZWNrIHRoYXQgdGhlIGRvbWFpbiBuYW1lIGhhcyBhdCBsZWFzdCBvbmUgJy4nIGluIGl0LgoJICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBVUkwgbWF0Y2ggZG9lcyBub3QgaGF2ZSBhIGZ1bGwgcHJvdG9jb2wsIG9yIGF0IGxlYXN0IG9uZSBkb3QgKCcuJykgaW4gYSBub24tZnVsbC1wcm90b2NvbAoJICogICBtYXRjaC4KCSAqLwoJdXJsTWF0Y2hEb2VzTm90SGF2ZVByb3RvY29sT3JEb3QgOiBmdW5jdGlvbiggdXJsTWF0Y2gsIHByb3RvY29sVXJsTWF0Y2ggKSB7CgkJcmV0dXJuICggISF1cmxNYXRjaCAmJiAoICFwcm90b2NvbFVybE1hdGNoIHx8ICF0aGlzLmhhc0Z1bGxQcm90b2NvbFJlZ2V4LnRlc3QoIHByb3RvY29sVXJsTWF0Y2ggKSApICYmIHVybE1hdGNoLmluZGV4T2YoICcuJyApID09PSAtMSApOwoJfSwKCQoJCgkvKioKCSAqIERldGVybWluZXMgaWYgYSBVUkwgbWF0Y2ggZG9lcyBub3QgaGF2ZSBhdCBsZWFzdCBvbmUgd29yZCBjaGFyYWN0ZXIgYWZ0ZXIgdGhlIHByb3RvY29sIChpLmUuIGluIHRoZSBkb21haW4gbmFtZSkuCgkgKiAKCSAqIEF0IGxlYXN0IG9uZSBsZXR0ZXIgY2hhcmFjdGVyIG11c3QgZXhpc3QgaW4gdGhlIGRvbWFpbiBuYW1lIGFmdGVyIGEgcHJvdG9jb2wgbWF0Y2guIEV4OiBza2lwIG92ZXIgc29tZXRoaW5nIAoJICogbGlrZSAiZ2l0OjEuMCIKCSAqIAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7U3RyaW5nfSB1cmxNYXRjaCBUaGUgbWF0Y2hlZCBVUkwsIGlmIHRoZXJlIHdhcyBvbmUuIFdpbGwgYmUgYW4gZW1wdHkgc3RyaW5nIGlmIHRoZSBtYXRjaCBpcyBub3QgYSBVUkwgbWF0Y2guCgkgKiBAcGFyYW0ge1N0cmluZ30gcHJvdG9jb2xVcmxNYXRjaCBUaGUgbWF0Y2ggVVJMIHN0cmluZyBmb3IgYSBwcm90b2NvbCBtYXRjaC4gRXg6ICdodHRwOi8veWFob28uY29tJy4gVGhpcyBpcyB1c2VkIHRvCgkgKiAgIGtub3cgd2hldGhlciBvciBub3Qgd2UgaGF2ZSBhIHByb3RvY29sIGluIHRoZSBVUkwgc3RyaW5nLCBpbiBvcmRlciB0byBjaGVjayBmb3IgYSB3b3JkIGNoYXJhY3RlciBhZnRlciB0aGUgcHJvdG9jb2wKCSAqICAgc2VwYXJhdG9yICgnOicpLgoJICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBVUkwgbWF0Y2ggZG9lcyBub3QgaGF2ZSBhdCBsZWFzdCBvbmUgd29yZCBjaGFyYWN0ZXIgaW4gaXQgYWZ0ZXIgdGhlIHByb3RvY29sLCBgZmFsc2VgCgkgKiAgIG90aGVyd2lzZS4KCSAqLwoJdXJsTWF0Y2hEb2VzTm90SGF2ZUF0TGVhc3RPbmVXb3JkQ2hhciA6IGZ1bmN0aW9uKCB1cmxNYXRjaCwgcHJvdG9jb2xVcmxNYXRjaCApIHsKCQlpZiggdXJsTWF0Y2ggJiYgcHJvdG9jb2xVcmxNYXRjaCApIHsKCQkJcmV0dXJuICF0aGlzLmhhc1dvcmRDaGFyQWZ0ZXJQcm90b2NvbFJlZ2V4LnRlc3QoIHVybE1hdGNoICk7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0sCgkKCQoJLyoqCgkgKiBEZXRlcm1pbmVzIGlmIGEgcHJvdG9jb2wtcmVsYXRpdmUgbWF0Y2ggaXMgYW4gaW52YWxpZCBvbmUuIFRoaXMgbWV0aG9kIHJldHVybnMgYHRydWVgIGlmIHRoZXJlIGlzIGEgYHByb3RvY29sUmVsYXRpdmVNYXRjaGAsCgkgKiBhbmQgdGhhdCBtYXRjaCBjb250YWlucyBhIHdvcmQgY2hhcmFjdGVyIGJlZm9yZSB0aGUgJy8vJyAoaS5lLiBpdCBtdXN0IGNvbnRhaW4gd2hpdGVzcGFjZSBvciBub3RoaW5nIGJlZm9yZSB0aGUgJy8vJyBpbgoJICogb3JkZXIgdG8gYmUgY29uc2lkZXJlZCB2YWxpZCkuCgkgKiAKCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge1N0cmluZ30gcHJvdG9jb2xSZWxhdGl2ZU1hdGNoIFRoZSBwcm90b2NvbC1yZWxhdGl2ZSBzdHJpbmcgZm9yIGEgVVJMIG1hdGNoIChpLmUuICcvLycpLCBwb3NzaWJseSB3aXRoIGEgcHJlY2VkaW5nCgkgKiAgIGNoYXJhY3RlciAoZXgsIGEgc3BhY2UsIHN1Y2ggYXM6ICcgLy8nLCBvciBhIGxldHRlciwgc3VjaCBhczogJ2EvLycpLiBUaGUgbWF0Y2ggaXMgaW52YWxpZCBpZiB0aGVyZSBpcyBhIHdvcmQgY2hhcmFjdGVyCgkgKiAgIHByZWNlZGluZyB0aGUgJy8vJy4KCSAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiBpdCBpcyBhbiBpbnZhbGlkIHByb3RvY29sLXJlbGF0aXZlIG1hdGNoLCBgZmFsc2VgIG90aGVyd2lzZS4KCSAqLwoJaXNJbnZhbGlkUHJvdG9jb2xSZWxhdGl2ZU1hdGNoIDogZnVuY3Rpb24oIHByb3RvY29sUmVsYXRpdmVNYXRjaCApIHsKCQlyZXR1cm4gKCAhIXByb3RvY29sUmVsYXRpdmVNYXRjaCAmJiB0aGlzLmludmFsaWRQcm90b2NvbFJlbE1hdGNoUmVnZXgudGVzdCggcHJvdG9jb2xSZWxhdGl2ZU1hdGNoICkgKTsKCX0KCn0gKTsKLypnbG9iYWwgQXV0b2xpbmtlciAqLwovKioKICogQGFic3RyYWN0CiAqIEBjbGFzcyBBdXRvbGlua2VyLm1hdGNoLk1hdGNoCiAqIAogKiBSZXByZXNlbnRzIGEgbWF0Y2ggZm91bmQgaW4gYW4gaW5wdXQgc3RyaW5nIHdoaWNoIHNob3VsZCBiZSBBdXRvbGlua2VkLiBBIE1hdGNoIG9iamVjdCBpcyB3aGF0IGlzIHByb3ZpZGVkIGluIGEgCiAqIHtAbGluayBBdXRvbGlua2VyI3JlcGxhY2VGbiByZXBsYWNlRm59LCBhbmQgbWF5IGJlIHVzZWQgdG8gcXVlcnkgZm9yIGRldGFpbHMgYWJvdXQgdGhlIG1hdGNoLgogKiAKICogRm9yIGV4YW1wbGU6CiAqIAogKiAgICAgdmFyIGlucHV0ID0gIi4uLiI7ICAvLyBzdHJpbmcgd2l0aCBVUkxzLCBFbWFpbCBBZGRyZXNzZXMsIGFuZCBUd2l0dGVyIEhhbmRsZXMKICogICAgIAogKiAgICAgdmFyIGxpbmtlZFRleHQgPSBBdXRvbGlua2VyLmxpbmsoIGlucHV0LCB7CiAqICAgICAgICAgcmVwbGFjZUZuIDogZnVuY3Rpb24oIGF1dG9saW5rZXIsIG1hdGNoICkgewogKiAgICAgICAgICAgICBjb25zb2xlLmxvZyggImhyZWYgPSAiLCBtYXRjaC5nZXRBbmNob3JIcmVmKCkgKTsKICogICAgICAgICAgICAgY29uc29sZS5sb2coICJ0ZXh0ID0gIiwgbWF0Y2guZ2V0QW5jaG9yVGV4dCgpICk7CiAqICAgICAgICAgCiAqICAgICAgICAgICAgIHN3aXRjaCggbWF0Y2guZ2V0VHlwZSgpICkgewogKiAgICAgICAgICAgICAgICAgY2FzZSAndXJsJyA6IAogKiAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAidXJsOiAiLCBtYXRjaC5nZXRVcmwoKSApOwogKiAgICAgICAgICAgICAgICAgICAgIAogKiAgICAgICAgICAgICAgICAgY2FzZSAnZW1haWwnIDoKICogICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggImVtYWlsOiAiLCBtYXRjaC5nZXRFbWFpbCgpICk7CiAqICAgICAgICAgICAgICAgICAgICAgCiAqICAgICAgICAgICAgICAgICBjYXNlICd0d2l0dGVyJyA6CiAqICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coICJ0d2l0dGVyOiAiLCBtYXRjaC5nZXRUd2l0dGVySGFuZGxlKCkgKTsKICogICAgICAgICAgICAgfQogKiAgICAgICAgIH0KICogICAgIH0gKTsKICogICAgIAogKiBTZWUgdGhlIHtAbGluayBBdXRvbGlua2VyfSBjbGFzcyBmb3IgbW9yZSBkZXRhaWxzIG9uIHVzaW5nIHRoZSB7QGxpbmsgQXV0b2xpbmtlciNyZXBsYWNlRm4gcmVwbGFjZUZufS4KICovCkF1dG9saW5rZXIubWF0Y2guTWF0Y2ggPSBBdXRvbGlua2VyLlV0aWwuZXh0ZW5kKCBPYmplY3QsIHsKCQoJLyoqCgkgKiBAY2ZnIHtTdHJpbmd9IG1hdGNoZWRUZXh0IChyZXF1aXJlZCkKCSAqIAoJICogVGhlIG9yaWdpbmFsIHRleHQgdGhhdCB3YXMgbWF0Y2hlZC4KCSAqLwoJCgkKCS8qKgoJICogQGNvbnN0cnVjdG9yCgkgKiBAcGFyYW0ge09iamVjdH0gY2ZnIFRoZSBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMgZm9yIHRoZSBNYXRjaCBpbnN0YW5jZSwgc3BlY2lmaWVkIGluIGFuIE9iamVjdCAobWFwKS4KCSAqLwoJY29uc3RydWN0b3IgOiBmdW5jdGlvbiggY2ZnICkgewoJCUF1dG9saW5rZXIuVXRpbC5hc3NpZ24oIHRoaXMsIGNmZyApOwoJfSwKCgkKCS8qKgoJICogUmV0dXJucyBhIHN0cmluZyBuYW1lIGZvciB0aGUgdHlwZSBvZiBtYXRjaCB0aGF0IHRoaXMgY2xhc3MgcmVwcmVzZW50cy4KCSAqIAoJICogQGFic3RyYWN0CgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldFR5cGUgOiBBdXRvbGlua2VyLlV0aWwuYWJzdHJhY3RNZXRob2QsCgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBvcmlnaW5hbCB0ZXh0IHRoYXQgd2FzIG1hdGNoZWQuCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0TWF0Y2hlZFRleHQgOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5tYXRjaGVkVGV4dDsKCX0sCgkKCgkvKioKCSAqIFJldHVybnMgdGhlIGFuY2hvciBocmVmIHRoYXQgc2hvdWxkIGJlIGdlbmVyYXRlZCBmb3IgdGhlIG1hdGNoLgoJICogCgkgKiBAYWJzdHJhY3QKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0QW5jaG9ySHJlZiA6IEF1dG9saW5rZXIuVXRpbC5hYnN0cmFjdE1ldGhvZCwKCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGFuY2hvciB0ZXh0IHRoYXQgc2hvdWxkIGJlIGdlbmVyYXRlZCBmb3IgdGhlIG1hdGNoLgoJICogCgkgKiBAYWJzdHJhY3QKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0QW5jaG9yVGV4dCA6IEF1dG9saW5rZXIuVXRpbC5hYnN0cmFjdE1ldGhvZAoKfSApOwovKmdsb2JhbCBBdXRvbGlua2VyICovCi8qKgogKiBAY2xhc3MgQXV0b2xpbmtlci5tYXRjaC5FbWFpbAogKiBAZXh0ZW5kcyBBdXRvbGlua2VyLm1hdGNoLk1hdGNoCiAqIAogKiBSZXByZXNlbnRzIGEgRW1haWwgbWF0Y2ggZm91bmQgaW4gYW4gaW5wdXQgc3RyaW5nIHdoaWNoIHNob3VsZCBiZSBBdXRvbGlua2VkLgogKiAKICogU2VlIHRoaXMgY2xhc3MncyBzdXBlcmNsYXNzICh7QGxpbmsgQXV0b2xpbmtlci5tYXRjaC5NYXRjaH0pIGZvciBtb3JlIGRldGFpbHMuCiAqLwpBdXRvbGlua2VyLm1hdGNoLkVtYWlsID0gQXV0b2xpbmtlci5VdGlsLmV4dGVuZCggQXV0b2xpbmtlci5tYXRjaC5NYXRjaCwgewoJCgkvKioKCSAqIEBjZmcge1N0cmluZ30gZW1haWwgKHJlcXVpcmVkKQoJICogCgkgKiBUaGUgZW1haWwgYWRkcmVzcyB0aGF0IHdhcyBtYXRjaGVkLgoJICovCgkKCgkvKioKCSAqIFJldHVybnMgYSBzdHJpbmcgbmFtZSBmb3IgdGhlIHR5cGUgb2YgbWF0Y2ggdGhhdCB0aGlzIGNsYXNzIHJlcHJlc2VudHMuCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0VHlwZSA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiAnZW1haWwnOwoJfSwKCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGVtYWlsIGFkZHJlc3MgdGhhdCB3YXMgbWF0Y2hlZC4KCSAqIAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRFbWFpbCA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLmVtYWlsOwoJfSwKCQoKCS8qKgoJICogUmV0dXJucyB0aGUgYW5jaG9yIGhyZWYgdGhhdCBzaG91bGQgYmUgZ2VuZXJhdGVkIGZvciB0aGUgbWF0Y2guCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0QW5jaG9ySHJlZiA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiAnbWFpbHRvOicgKyB0aGlzLmVtYWlsOwoJfSwKCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGFuY2hvciB0ZXh0IHRoYXQgc2hvdWxkIGJlIGdlbmVyYXRlZCBmb3IgdGhlIG1hdGNoLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldEFuY2hvclRleHQgOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5lbWFpbDsKCX0KCQp9ICk7Ci8qZ2xvYmFsIEF1dG9saW5rZXIgKi8KLyoqCiAqIEBjbGFzcyBBdXRvbGlua2VyLm1hdGNoLlR3aXR0ZXIKICogQGV4dGVuZHMgQXV0b2xpbmtlci5tYXRjaC5NYXRjaAogKiAKICogUmVwcmVzZW50cyBhIFR3aXR0ZXIgbWF0Y2ggZm91bmQgaW4gYW4gaW5wdXQgc3RyaW5nIHdoaWNoIHNob3VsZCBiZSBBdXRvbGlua2VkLgogKiAKICogU2VlIHRoaXMgY2xhc3MncyBzdXBlcmNsYXNzICh7QGxpbmsgQXV0b2xpbmtlci5tYXRjaC5NYXRjaH0pIGZvciBtb3JlIGRldGFpbHMuCiAqLwpBdXRvbGlua2VyLm1hdGNoLlR3aXR0ZXIgPSBBdXRvbGlua2VyLlV0aWwuZXh0ZW5kKCBBdXRvbGlua2VyLm1hdGNoLk1hdGNoLCB7CgkKCS8qKgoJICogQGNmZyB7U3RyaW5nfSB0d2l0dGVySGFuZGxlIChyZXF1aXJlZCkKCSAqIAoJICogVGhlIFR3aXR0ZXIgaGFuZGxlIHRoYXQgd2FzIG1hdGNoZWQuCgkgKi8KCQoKCS8qKgoJICogUmV0dXJucyB0aGUgdHlwZSBvZiBtYXRjaCB0aGF0IHRoaXMgY2xhc3MgcmVwcmVzZW50cy4KCSAqIAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRUeXBlIDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuICd0d2l0dGVyJzsKCX0sCgkKCQoJLyoqCgkgKiBSZXR1cm5zIGEgc3RyaW5nIG5hbWUgZm9yIHRoZSB0eXBlIG9mIG1hdGNoIHRoYXQgdGhpcyBjbGFzcyByZXByZXNlbnRzLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldFR3aXR0ZXJIYW5kbGUgOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy50d2l0dGVySGFuZGxlOwoJfSwKCQoKCS8qKgoJICogUmV0dXJucyB0aGUgYW5jaG9yIGhyZWYgdGhhdCBzaG91bGQgYmUgZ2VuZXJhdGVkIGZvciB0aGUgbWF0Y2guCgkgKiAKCSAqIEByZXR1cm4ge1N0cmluZ30KCSAqLwoJZ2V0QW5jaG9ySHJlZiA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiAnaHR0cHM6Ly90d2l0dGVyLmNvbS8nICsgdGhpcy50d2l0dGVySGFuZGxlOwoJfSwKCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGFuY2hvciB0ZXh0IHRoYXQgc2hvdWxkIGJlIGdlbmVyYXRlZCBmb3IgdGhlIG1hdGNoLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldEFuY2hvclRleHQgOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gJ0AnICsgdGhpcy50d2l0dGVySGFuZGxlOwoJfQoJCn0gKTsKLypnbG9iYWwgQXV0b2xpbmtlciAqLwovKioKICogQGNsYXNzIEF1dG9saW5rZXIubWF0Y2guVXJsCiAqIEBleHRlbmRzIEF1dG9saW5rZXIubWF0Y2guTWF0Y2gKICogCiAqIFJlcHJlc2VudHMgYSBVcmwgbWF0Y2ggZm91bmQgaW4gYW4gaW5wdXQgc3RyaW5nIHdoaWNoIHNob3VsZCBiZSBBdXRvbGlua2VkLgogKiAKICogU2VlIHRoaXMgY2xhc3MncyBzdXBlcmNsYXNzICh7QGxpbmsgQXV0b2xpbmtlci5tYXRjaC5NYXRjaH0pIGZvciBtb3JlIGRldGFpbHMuCiAqLwpBdXRvbGlua2VyLm1hdGNoLlVybCA9IEF1dG9saW5rZXIuVXRpbC5leHRlbmQoIEF1dG9saW5rZXIubWF0Y2guTWF0Y2gsIHsKCQoJLyoqCgkgKiBAY2ZnIHtTdHJpbmd9IHVybCAocmVxdWlyZWQpCgkgKiAKCSAqIFRoZSB1cmwgdGhhdCB3YXMgbWF0Y2hlZC4KCSAqLwoJCgkvKioKCSAqIEBjZmcge0Jvb2xlYW59IHByb3RvY29sVXJsTWF0Y2ggKHJlcXVpcmVkKQoJICogCgkgKiBgdHJ1ZWAgaWYgdGhlIFVSTCBpcyBhIG1hdGNoIHdoaWNoIGFscmVhZHkgaGFzIGEgcHJvdG9jb2wgKGkuZS4gJ2h0dHA6Ly8nKSwgYGZhbHNlYCBpZiB0aGUgbWF0Y2ggd2FzIGZyb20gYSAnd3d3JyBvcgoJICoga25vd24gVExEIG1hdGNoLgoJICovCgkKCS8qKgoJICogQGNmZyB7Qm9vbGVhbn0gcHJvdG9jb2xSZWxhdGl2ZU1hdGNoIChyZXF1aXJlZCkKCSAqIAoJICogYHRydWVgIGlmIHRoZSBVUkwgaXMgYSBwcm90b2NvbC1yZWxhdGl2ZSBtYXRjaC4gQSBwcm90b2NvbC1yZWxhdGl2ZSBtYXRjaCBpcyBhIFVSTCB0aGF0IHN0YXJ0cyB3aXRoICcvLycsCgkgKiBhbmQgd2lsbCBiZSBlaXRoZXIgaHR0cDovLyBvciBodHRwczovLyBiYXNlZCBvbiB0aGUgcHJvdG9jb2wgdGhhdCB0aGUgc2l0ZSBpcyBsb2FkZWQgdW5kZXIuCgkgKi8KCQoJLyoqCgkgKiBAY2ZnIHtCb29sZWFufSBzdHJpcFByZWZpeCAocmVxdWlyZWQpCgkgKiBAaW5oZXJpdGRvYyBBdXRvbGlua2VyI3N0cmlwUHJlZml4CgkgKi8KCQoKCS8qKgoJICogQHByaXZhdGUKCSAqIEBwcm9wZXJ0eSB7UmVnRXhwfSB1cmxQcmVmaXhSZWdleAoJICogCgkgKiBBIHJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIHJlbW92ZSB0aGUgJ2h0dHA6Ly8nIG9yICdodHRwczovLycgYW5kL29yIHRoZSAnd3d3LicgZnJvbSBVUkxzLgoJICovCgl1cmxQcmVmaXhSZWdleDogL14oaHR0cHM/OlwvXC8pPyh3d3dcLik/L2ksCgkKCS8qKgoJICogQHByaXZhdGUKCSAqIEBwcm9wZXJ0eSB7UmVnRXhwfSBwcm90b2NvbFJlbGF0aXZlUmVnZXgKCSAqIAoJICogVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIHJlbW92ZSB0aGUgcHJvdG9jb2wtcmVsYXRpdmUgJy8vJyBmcm9tIHRoZSB7QGxpbmsgI3VybH0gc3RyaW5nLCBmb3IgcHVycG9zZXMKCSAqIG9mIHtAbGluayAjZ2V0QW5jaG9yVGV4dH0uIEEgcHJvdG9jb2wtcmVsYXRpdmUgVVJMIGlzLCBmb3IgZXhhbXBsZSwgIi8veWFob28uY29tIgoJICovCglwcm90b2NvbFJlbGF0aXZlUmVnZXggOiAvXlwvXC8vLAoJCgkvKioKCSAqIEBwcml2YXRlCgkgKiBAcHJvcGVydHkge0Jvb2xlYW59IHByb3RvY29sUHJlcGVuZGVkCgkgKiAKCSAqIFdpbGwgYmUgc2V0IHRvIGB0cnVlYCBpZiB0aGUgJ2h0dHA6Ly8nIHByb3RvY29sIGhhcyBiZWVuIHByZXBlbmRlZCB0byB0aGUge0BsaW5rICN1cmx9IChiZWNhdXNlIHRoZQoJICoge0BsaW5rICN1cmx9IGRpZCBub3QgaGF2ZSBhIHByb3RvY29sKQoJICovCglwcm90b2NvbFByZXBlbmRlZCA6IGZhbHNlLAoJCgoJLyoqCgkgKiBSZXR1cm5zIGEgc3RyaW5nIG5hbWUgZm9yIHRoZSB0eXBlIG9mIG1hdGNoIHRoYXQgdGhpcyBjbGFzcyByZXByZXNlbnRzLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldFR5cGUgOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gJ3VybCc7Cgl9LAoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgdXJsIHRoYXQgd2FzIG1hdGNoZWQsIGFzc3VtaW5nIHRoZSBwcm90b2NvbCB0byBiZSAnaHR0cDovLycgaWYgdGhlIG9yaWdpbmFsCgkgKiBtYXRjaCB3YXMgbWlzc2luZyBhIHByb3RvY29sLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldFVybCA6IGZ1bmN0aW9uKCkgewoJCXZhciB1cmwgPSB0aGlzLnVybDsKCQkKCQkvLyBpZiB0aGUgdXJsIHN0cmluZyBkb2Vzbid0IGJlZ2luIHdpdGggYSBwcm90b2NvbCwgYXNzdW1lICdodHRwOi8vJwoJCWlmKCAhdGhpcy5wcm90b2NvbFJlbGF0aXZlTWF0Y2ggJiYgIXRoaXMucHJvdG9jb2xVcmxNYXRjaCAmJiAhdGhpcy5wcm90b2NvbFByZXBlbmRlZCApIHsKCQkJdXJsID0gdGhpcy51cmwgPSAnaHR0cDovLycgKyB1cmw7CgkJCQoJCQl0aGlzLnByb3RvY29sUHJlcGVuZGVkID0gdHJ1ZTsKCQl9CgkJCgkJcmV0dXJuIHVybDsKCX0sCgkKCgkvKioKCSAqIFJldHVybnMgdGhlIGFuY2hvciBocmVmIHRoYXQgc2hvdWxkIGJlIGdlbmVyYXRlZCBmb3IgdGhlIG1hdGNoLgoJICogCgkgKiBAcmV0dXJuIHtTdHJpbmd9CgkgKi8KCWdldEFuY2hvckhyZWYgOiBmdW5jdGlvbigpIHsKCQl2YXIgdXJsID0gdGhpcy5nZXRVcmwoKTsKCQkKCQlyZXR1cm4gdXJsLnJlcGxhY2UoIC8mYW1wOy9nLCAnJicgKTsgIC8vIGFueSAmYW1wOydzIGluIHRoZSBVUkwgc2hvdWxkIGJlIGNvbnZlcnRlZCBiYWNrIHRvICcmJyBpZiB0aGV5IHdlcmUgZGlzcGxheWVkIGFzICZhbXA7IGluIHRoZSBzb3VyY2UgaHRtbCAKCX0sCgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBhbmNob3IgdGV4dCB0aGF0IHNob3VsZCBiZSBnZW5lcmF0ZWQgZm9yIHRoZSBtYXRjaC4KCSAqIAoJICogQHJldHVybiB7U3RyaW5nfQoJICovCglnZXRBbmNob3JUZXh0IDogZnVuY3Rpb24oKSB7CgkJdmFyIGFuY2hvclRleHQgPSB0aGlzLmdldFVybCgpOwoJCQoJCWlmKCB0aGlzLnByb3RvY29sUmVsYXRpdmVNYXRjaCApIHsKCQkJLy8gU3RyaXAgb2ZmIGFueSBwcm90b2NvbC1yZWxhdGl2ZSAnLy8nIGZyb20gdGhlIGFuY2hvciB0ZXh0CgkJCWFuY2hvclRleHQgPSB0aGlzLnN0cmlwUHJvdG9jb2xSZWxhdGl2ZVByZWZpeCggYW5jaG9yVGV4dCApOwoJCX0KCQlpZiggdGhpcy5zdHJpcFByZWZpeCApIHsKCQkJYW5jaG9yVGV4dCA9IHRoaXMuc3RyaXBVcmxQcmVmaXgoIGFuY2hvclRleHQgKTsKCQl9CgkJYW5jaG9yVGV4dCA9IHRoaXMucmVtb3ZlVHJhaWxpbmdTbGFzaCggYW5jaG9yVGV4dCApOyAgLy8gcmVtb3ZlIHRyYWlsaW5nIHNsYXNoLCBpZiB0aGVyZSBpcyBvbmUKCQkKCQlyZXR1cm4gYW5jaG9yVGV4dDsKCX0sCgkKCQoJLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkKCS8vIFV0aWxpdHkgRnVuY3Rpb25hbGl0eQoJCgkvKioKCSAqIFN0cmlwcyB0aGUgVVJMIHByZWZpeCAoc3VjaCBhcyAiaHR0cDovLyIgb3IgImh0dHBzOi8vIikgZnJvbSB0aGUgZ2l2ZW4gdGV4dC4KCSAqIAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IG9mIHRoZSBhbmNob3IgdGhhdCBpcyBiZWluZyBnZW5lcmF0ZWQsIGZvciB3aGljaCB0byBzdHJpcCBvZmYgdGhlCgkgKiAgIHVybCBwcmVmaXggKHN1Y2ggYXMgc3RyaXBwaW5nIG9mZiAiaHR0cDovLyIpCgkgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBgYW5jaG9yVGV4dGAsIHdpdGggdGhlIHByZWZpeCBzdHJpcHBlZC4KCSAqLwoJc3RyaXBVcmxQcmVmaXggOiBmdW5jdGlvbiggdGV4dCApIHsKCQlyZXR1cm4gdGV4dC5yZXBsYWNlKCB0aGlzLnVybFByZWZpeFJlZ2V4LCAnJyApOwoJfSwKCQoJCgkvKioKCSAqIFN0cmlwcyBhbnkgcHJvdG9jb2wtcmVsYXRpdmUgJy8vJyBmcm9tIHRoZSBhbmNob3IgdGV4dC4KCSAqIAoJICogQHByaXZhdGUKCSAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IG9mIHRoZSBhbmNob3IgdGhhdCBpcyBiZWluZyBnZW5lcmF0ZWQsIGZvciB3aGljaCB0byBzdHJpcCBvZmYgdGhlCgkgKiAgIHByb3RvY29sLXJlbGF0aXZlIHByZWZpeCAoc3VjaCBhcyBzdHJpcHBpbmcgb2ZmICIvLyIpCgkgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBgYW5jaG9yVGV4dGAsIHdpdGggdGhlIHByb3RvY29sLXJlbGF0aXZlIHByZWZpeCBzdHJpcHBlZC4KCSAqLwoJc3RyaXBQcm90b2NvbFJlbGF0aXZlUHJlZml4IDogZnVuY3Rpb24oIHRleHQgKSB7CgkJcmV0dXJuIHRleHQucmVwbGFjZSggdGhpcy5wcm90b2NvbFJlbGF0aXZlUmVnZXgsICcnICk7Cgl9LAoJCgkKCS8qKgoJICogUmVtb3ZlcyBhbnkgdHJhaWxpbmcgc2xhc2ggZnJvbSB0aGUgZ2l2ZW4gYGFuY2hvclRleHRgLCBpbiBwcmVwYXJhdGlvbiBmb3IgdGhlIHRleHQgdG8gYmUgZGlzcGxheWVkLgoJICogCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtTdHJpbmd9IGFuY2hvclRleHQgVGhlIHRleHQgb2YgdGhlIGFuY2hvciB0aGF0IGlzIGJlaW5nIGdlbmVyYXRlZCwgZm9yIHdoaWNoIHRvIHJlbW92ZSBhbnkgdHJhaWxpbmcKCSAqICAgc2xhc2ggKCcvJykgdGhhdCBtYXkgZXhpc3QuCgkgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBgYW5jaG9yVGV4dGAsIHdpdGggdGhlIHRyYWlsaW5nIHNsYXNoIHJlbW92ZWQuCgkgKi8KCXJlbW92ZVRyYWlsaW5nU2xhc2ggOiBmdW5jdGlvbiggYW5jaG9yVGV4dCApIHsKCQlpZiggYW5jaG9yVGV4dC5jaGFyQXQoIGFuY2hvclRleHQubGVuZ3RoIC0gMSApID09PSAnLycgKSB7CgkJCWFuY2hvclRleHQgPSBhbmNob3JUZXh0LnNsaWNlKCAwLCAtMSApOwoJCX0KCQlyZXR1cm4gYW5jaG9yVGV4dDsKCX0KCQp9ICk7CnJldHVybiBBdXRvbGlua2VyOwoKfSkpOwoKfSx7fV0sIi8iOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKCm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvJyk7Cgp9LHsiLi9saWIvIjoxNH1dfSx7fSxbXSkoIi8iKQp9KTs=';
</script></html>
